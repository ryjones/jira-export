<Issue id="43000" key="FABG-917" number="917" project="10610" reporter="boxhock" creator="boxhock" type="10004" summary="Panic when listening to events" priority="3" status="10300" created="2019-10-25 14:41:29.0" updated="2019-11-27 14:11:47.0" votes="0" watches="1" workflowId="56103"> <description><! CDATA The following code in package _a.b_ is initiated from package _a_ through an interface:    {code:java} func (hs HyperledgerSubscription) Test() error { conf := config.FromFile("hyperledger.yaml")  sdk, err := fabsdk.New(conf) if err != nil { return err } defer sdk.Close()  ctx := sdk.ChannelContext("mychannel", fabsdk.WithUser("Admin"), fabsdk.WithOrg("Org1")) client, err := event.New(ctx, event.WithBlockEvents()) if err != nil { return err }  _, _, err = client.RegisterChaincodeEvent("mycc", "event123") if err != nil { return err }  return nil } {code}    Running this gives the following error: {code:java} panic: runtime error: invalid memory address or nil pointer dereference  signal SIGSEGV: segmentation violation code=0x1 addr=0xb0 pc=0x47cd5e6 goroutine 1  running : github.com/hyperledger/fabric-sdk-go/pkg/fabsdk.(*FabricSDK).newIdentity(0x0, 0xc000447330, 0x2, 0x2, 0xc00044f020, 0xc00044f040, 0xc000589530, 0x400e089) /Users/jonashals/go/pkg/mod/github.com/hyperledger/fabric-sdk-go@v1.0.0-beta1/pkg/fabsdk/context.go:53 +0x36 github.com/hyperledger/fabric-sdk-go/pkg/fabsdk.(*FabricSDK).Context.func1(0x28, 0xc0004e33b0, 0x4c19cc0, 0x4c19c80) /Users/jonashals/go/pkg/mod/github.com/hyperledger/fabric-sdk-go@v1.0.0-beta1/pkg/fabsdk/fabsdk.go:368 +0x4e github.com/hyperledger/fabric-sdk-go/pkg/context.NewChannel(0xc0004e33b0, 0x0, 0x0, 0x2, 0xc0004e33b0, 0xc000589658) /Users/jonashals/go/pkg/mod/github.com/hyperledger/fabric-sdk-go@v1.0.0-beta1/pkg/context/context.go:262 +0x3c github.com/hyperledger/fabric-sdk-go/pkg/fabsdk.(*FabricSDK).ChannelContext.func1(0x4a1c780, 0xc000447330, 0x10, 0x30) /Users/jonashals/go/pkg/mod/github.com/hyperledger/fabric-sdk-go@v1.0.0-beta1/pkg/fabsdk/fabsdk.go:385 +0x7d github.com/hyperledger/fabric-sdk-go/pkg/client/event.New(0xc000277000, 0xc000589788, 0x1, 0x1, 0x2, 0x2, 0xc000277000) /Users/jonashals/go/pkg/mod/github.com/hyperledger/fabric-sdk-go@v1.0.0-beta1/pkg/client/event/event.go:39 +0x3c github.com/redacted/blockchain.HyperledgerSubscription.Subscribe(0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xc00027c500, 0x10, 0x0, 0x0, ...) /Users/jonashals/go/src/github.com/redacted/blockchain/hyperledger.go:86 +0x220 {code} (The last part of the error dump has been removed. The relevant parts should still be included)     I have tried running the above code in a completely separate package - this works fine. It appears something about the interface/struct/something else is interfering with setting up the event subscription.  ></description> </Issue>
