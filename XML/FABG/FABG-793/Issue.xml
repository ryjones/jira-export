<Issue id="35486" key="FABG-793" number="793" project="10610" reporter="nyet" creator="nyet" type="10004" summary="metalinter fails if libltdl-dev is not installed" priority="3" status="3" created="2018-11-19 23:06:01.0" updated="2018-11-21 23:26:59.0" votes="0" watches="2" workflowId="46952"> <description><! CDATA The {{pkcs11}} namespace of the {{"github.com/miekg/pkcs11"}} import in {{pkg/core/cryptosuite/common/pkcs11/contextHandle.go}} overlaps with the package name {{pkcs11}}  If {{libltdl-dev}} is not installed, a "{{go build}}" would fail with   {code} # github.com/hyperledger/fabric-sdk-go/vendor/github.com/miekg/pkcs11 ../../../../../vendor/github.com/miekg/pkcs11/pkcs11.go:26:10: fatal error: ltdl.h: No such file or directory #include <ltdl.h> ^~~~~~~~ compilation terminated. {code}  It seems that the linter does not know {{pkcs11}} refers to the import, it thinks it refers to the local package.   Since the compile of the imported package fails, this confusion causes the linter to spew these errrors: {code} Running metalinters... pkg/core/cryptosuite/common/pkcs11/contextHandle.go:405:7:warning: unused struct field Error not declared by package pkcs11 (structcheck) pkg/core/cryptosuite/common/pkcs11/contextHandle.go:224:55:warning: SessionHandle not declared by package pkcs11 (interfacer, maligned, unconvert) pkg/core/cryptosuite/common/pkcs11/contextHandle.go:210:9:warning: unused variable or constant invalid operation: handle.ctx (variable of type *invalid type) has no field or method FindObjectsInit (varcheck) .... pkg/core/cryptosuite/common/pkcs11/contextHandle_test.go:378:22:warning: unused variable or constant invalid operation: ctx2 (variable of type *invalid type) has no field or method GetSessionInfo (varcheck) pkg/client/channel/chclient.go:44:15:warning: nolint directive did not match any issue (nolint) pkg/client/channel/chclientrun.go:18:30:warning: nolint directive did not match any issue (nolint) make: ***  Makefile:289: unit-test  Error 1 {code}  A partial fix might be to change the import namespace to something else, but most likely the top level {{Makefile}} should do something to ensure {{libltdl-dev}} is installed.  ></description> </Issue>
