<Issue id="45481" key="FABG-974" number="974" project="10610" reporter="pd93" creator="pd93" type="10004" summary="Error codes &gt;= 400 do not return a message or payload" priority="3" status="10300" created="2020-06-26 17:31:35.0" updated="2020-07-10 10:00:12.0" votes="1" watches="2" workflowId="59484" archived="N"> <description><! CDATA When a chaincode function is called from the go-sdk, it returns a `pb.Response` with the following structure as found in  the documentation|https://godoc.org/github.com/hyperledger/fabric-protos-go/peer#Response :  {code:go}  type Response struct { // A status code that should follow the HTTP status codes. Status int32 `protobuf:"varint,1,opt,name=status,proto3" json:"status,omitempty"` // A message associated with the response code. Message string `protobuf:"bytes,2,opt,name=message,proto3" json:"message,omitempty"` // A payload that can be used to include metadata with this response. Payload   byte `protobuf:"bytes,3,opt,name=payload,proto3" json:"payload,omitempty"` } {code}  You can also see the  constants defined for Status messages|https://godoc.org/github.com/hyperledger/fabric-chaincode-go/shim#pkg-constants :  {code:go} const ( // OK constant - status code less than 400, endorser will endorse it. // OK means init or invoke successfully. OK = 200  // ERRORTHRESHOLD constant - status code greater than or equal to 400 will be considered  an error and rejected by endorser. ERRORTHRESHOLD = 400  // ERROR constant - default error value ERROR = 500 ) {code}  When returning with `shim.Success(payload)`, the `Status` returned is 200 and the message/payload are returned normally. However, when returning with `shim.Error(message)` the `Status` returned is 0 (not 500) and the message/payload are reset to their default values. This is also true for any custom `pb.Response` with a `Status` >= 400. e.g.  {code:go} pb.Response{ Status: 404, Message: "Not Found", Payload:   byte("Some payload"), } {code}  The documentation linked above states that a:  bq. status code greater than or equal to 400 will be considered an error and rejected by endorser.  This means you **must** set the `Status` >= 400 when an error occurs, otherwise transactions may be committed when they shouldn't. However, doing this means that there is no way of returning an error message from Fabric to the go-sdk without string parsing `err.Error()`.  Please also see these related issues - especially the top one which received quite a bit of attention prior to v1: - https://jira.hyperledger.org/browse/FAB-3618 - https://jira.hyperledger.org/browse/FABJ-374 - https://jira.hyperledger.org/browse/FABJ-289  ></description> </Issue>
