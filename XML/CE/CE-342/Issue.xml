<Issue id="29492" key="CE-342" number="342" project="10200" reporter="patrickgardella" assignee="baohua" creator="patrickgardella" type="10005" summary="$DOCKER_OPTS not being expanded in docker.service" priority="4" resolution="10000" status="10001" created="2018-04-18 20:36:56.0" updated="2018-08-21 05:41:41.0" resolutiondate="2018-08-21 05:41:41.0" votes="0" watches="2" timeoriginalestimate="7200" timeestimate="7200" workflowId="29497"> <description><! CDATA I have been running the  tutorial|https://github.com/hyperledger/cello/blob/master/docs/setup_worker_docker.md  and have found that the instructions for modifying the docker.service file does not work on Ubuntu 16.04.  The tutorial says to add this to the docker.service file and reload the daemon and then restart the service: {code:java}  Service  DOCKER_OPTS="$DOCKER_OPTS -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock --api-cors-header='*' --default-ulimit=nofile=8192:16384 --default-ulimit=nproc=8192:16384" EnvironmentFile=-/etc/default/docker  ExecStart=  ExecStart=/usr/bin/dockerd -H fd:// $DOCKER_OPTS{code} When I restart the service, I do not see those options in the process list, nor are they running (that is, docker is not running a host on port 2375): {code:java} ps ax | grep docker 7774 ? Ssl 0:01 /usr/bin/dockerd -H fd:// 7782 ? Ssl 0:00 docker-containerd -l unix:///var/run/docker/libcontainerd/docker-containerd.sock --metrics-interval=0 --start-timeout 2m --state-dir /var/run/docker/libcontainerd/containerd --shim docker-containerd-shim --runtime docker-runc{code} The only way I could get this to work was to move the DOCKER_OPTS line into the ExecStart line: {code:java} ExecStart=/usr/bin/dockerd -H fd:// $DOCKER_OPTS -H tcp://0.0.0.0:2375 -H unix:///var/run/docker.sock --api-cors-header='*' --default-ulimit=nofile=8192:16384 --default-ulimit=nproc=8192:16384{code} I'll be happy to submit a patch-set on this, which I will do unless I hearÂ   ></description> </Issue>
