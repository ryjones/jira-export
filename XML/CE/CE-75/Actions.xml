<Action id="27760" issue="18771" author="baohua" type="comment" created="2017-07-03 02:01:48.0" updateauthor="baohua" updated="2017-07-03 02:01:48.0"> <body><! CDATA Thanks!  And once the tests are passed, can submit as commit.  ></body> </Action>
<Action id="28033" issue="18771" author="chawlanikhil24" type="comment" created="2017-07-07 18:20:39.0" updateauthor="chawlanikhil24" updated="2017-07-07 18:20:39.0"> <body><! CDATA The logs generated from the cli container after running  initialize.sh|https://github.com/chawlanikhil24/hyperledger-fabric-k8s/blob/master/fabric-1.0/driving-files/scripts/initialize.sh  script.   https://pastebin.com/YN4EmiW4  .  We have to rectify this error, to make Fabric-1.0 in action on Kubernetes. There has been certain discussion about this issue on this  link|https://jira.hyperledger.org/projects/CE/issues/CE-7?filter=allopenissues .  Please  come up with your opinions.     ></body> </Action>
<Action id="28038" issue="18771" author="baohua" type="comment" created="2017-07-08 01:13:57.0" updateauthor="baohua" updated="2017-07-08 01:13:57.0"> <body><! CDATA What's ur steps to repeat the error msg?   ~qiang0723  we may disable the tls first by booting up fabric 1.0, seems tls handshakes problem.  ></body> </Action>
<Action id="28041" issue="18771" author="chawlanikhil24" type="comment" created="2017-07-08 04:45:54.0" updateauthor="chawlanikhil24" updated="2017-07-08 04:45:54.0"> <body><! CDATA After deployment of the cluster on kubernetes, ran the *Fabric-cli ,* using the command:  kubectl exec -it <pod> /bin/bash  In the pod,  {code:java} $ bash scripts/initialize.sh {code}       ></body> </Action>
<Action id="28042" issue="18771" author="chawlanikhil24" type="comment" created="2017-07-08 04:53:23.0" updateauthor="chawlanikhil24" updated="2017-07-08 04:53:23.0"> <body><! CDATA  ^K8s Logs.tar   This tar contains the images from the container environment. All the information form the container environment variable set during deployment is available here. Please do consider them while rectifying the issue.    ></body> </Action>
<Action id="28126" issue="18771" author="qiang0723" type="comment" created="2017-07-11 05:48:14.0" updateauthor="qiang0723" updated="2017-07-11 06:01:23.0"> <body><! CDATA  ~chawlanikhil24  ,  1.  https://github.com/chawlanikhil24/hyperledger-fabric-k8s/blob/master/fabric-1.0/local/peer-base.yaml   ,I Think the env `CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE` should be   `local_default`     2.  https://github.com/chawlanikhil24/hyperledger-fabric-k8s/blob/master/fabric-1.0/local/peer2.yaml   CORE_PEER_GOSSIP_EXTERNALENDPOINT should be peer0-org2:7051     3. https://github.com/chawlanikhil24/hyperledger-fabric-k8s/blob/master/fabric-1.0/local/peer3.yaml  CORE_PEER_GOSSIP_BOOTSTRAP  should be its org's anchor peer IP  peer0-org2:7051  ></body> </Action>
<Action id="28127" issue="18771" author="chawlanikhil24" type="comment" created="2017-07-11 06:55:30.0" updateauthor="chawlanikhil24" updated="2017-07-11 06:55:30.0"> <body><! CDATA  ~qiang0723  , I made your suggested changes, but the issue at the beginning is with , orderer-service, which is demanding for the tls handshake and it is not being successfully executed. I am attaching the pic of the container log, I disables the tls handshake from the cli-container but, I can't disable tls-handshake on orderer-service mannually. If I am going correct, then for running chain code, we need to disable this tls-handshake and then proceed.      !image-2017-07-11-12-25-25-492.png!  ></body> </Action>
<Action id="28128" issue="18771" author="chawlanikhil24" type="comment" created="2017-07-11 07:07:00.0" updateauthor="chawlanikhil24" updated="2017-07-11 07:07:00.0"> <body><! CDATA When I enabled the "TLS_HANDSHAKE" from the fabric-cli pod. then   ```  2017-07-11 07:05:33.725 UTC  msp  GetLocalMSP -> DEBU 005 Returning existing local MSP 2017-07-11 07:05:33.725 UTC  msp  GetDefaultSigningIdentity -> DEBU 006 Obtaining default signing identity 2017-07-11 07:05:33.728 UTC  grpc  Printf -> DEBU 007 Failed to dial orderer-service:7050: connection error: desc = "transport: authentic ation handshake failed: x509: certificate is valid for orderer.example.com, orderer, not orderer-service"; please retry. Error: Error connecting due to rpc error: code = Internal desc = connection error: desc = "transport: authentication handshake failed: x 509: certificate is valid for orderer.example.com, orderer, not orderer-service"  ```  configtx.yaml allows me to create certs, in name-format: orderer.example.com not orderer-service, somehow we need to fix this  ></body> </Action>
<Action id="28129" issue="18771" author="qiang0723" type="comment" created="2017-07-11 07:35:08.0" updateauthor="qiang0723" updated="2017-07-11 07:40:15.0"> <body><! CDATA  ~chawlanikhil24       https://github.com/chawlanikhil24/hyperledger-fabric-k8s/blob/master/fabric-1.0/local/orderer.yaml   , ORDERER_GENERAL_TLS_ENABLED  this env can not disable TLS on orderer-service?  As the containers name, I think we best consistent with the configtx.yaml and crypto-config.yaml. If this, it must have a dot in containers name. as described in crypto-config.yaml,   ></body> </Action>
<Action id="28130" issue="18771" author="chawlanikhil24" type="comment" created="2017-07-11 07:55:15.0" updateauthor="chawlanikhil24" updated="2017-07-11 07:55:15.0"> <body><! CDATA  ~qiang0723  , By mistake, I skipped this environment variable and yess now the handshake skipped. :)  But a new error is generated  in orderer-service . Here is the  error|https://ghostbin.com/paste/4saqe  log.      As per dot in config.yaml and configtx.yaml, those are "." in names of  proxy in terms of kubernetes, so we can use . in proxy name in kubernetes, like in docker-swarm, we can name a proxy as x.y.z .   ></body> </Action>
<Action id="28134" issue="18771" author="qiang0723" type="comment" body=" ~chawlanikhil24  How can I repeat your steps, refer to  https://github.com/chawlanikhil24/hyperledger-fabric-k8s/tree/master/fabric-1.0  ?" created="2017-07-11 08:17:33.0" updateauthor="qiang0723" updated="2017-07-11 08:17:33.0"/>
<Action id="28135" issue="18771" author="chawlanikhil24" type="comment" created="2017-07-11 08:44:11.0" updateauthor="chawlanikhil24" updated="2017-07-11 08:44:11.0"> <body><! CDATA I followed the same steps, mentioned in  https://github.com/chawlanikhil24/hyperledger-fabric-k8s/blob/master/fabric-1.0/README.md  .   I used minikube+weavenet .  ></body> </Action>
<Action id="28196" issue="18771" author="grapebaba" type="comment" body="IMO, we don&apos;t need follow e2e_cli example. We need create tls certs using domain name which k8s used for peer service, orderer service" created="2017-07-12 01:48:15.0" updateauthor="grapebaba" updated="2017-07-12 01:48:15.0"/>
<Action id="28293" issue="18771" author="chawlanikhil24" type="comment" created="2017-07-13 06:25:55.0" updateauthor="chawlanikhil24" updated="2017-07-13 06:25:55.0"> <body><! CDATA After Disabling all the TLS handshakes, and debugging of scripts  I've reached till "creating the channel" from scripts/initialize.sh  Now, the only error persisting is, peer not joining the channel ..  error from the logs is: {code:java} 2017-07-13 06:24:32.986 UTC  msp  GetDefaultSigningIdentity -> DEBU 006 Obtaining default signing identity 2017-07-13 06:24:32.986 UTC  channelCmd  InitCmdFactory -> INFO 007 Endorser and orderer connections initialized 2017-07-13 06:24:32.987 UTC  msp/identity  Sign -> DEBU 008 Sign: plaintext: 0A8A070A5C08011A0C08A0A49CCB0510...EDF55FE0E72A1A080A000A000A000A00  2017-07-13 06:24:32.987 UTC  msp/identity  Sign -> DEBU 009 Sign: digest: D5DE97D82BA14CDBEFF7AF3E1034194576B6AD908669FF1E413BC3CEAB6EADF9  Error: proposal failed (err: rpc error: code = Unimplemented desc = unknown service protos.Endorser)  {code} I assume, if we rectify this ASAP, then fabric-1.0 will be running on top of K8s.  ></body> </Action>
<Action id="28826" issue="18771" author="chawlanikhil24" type="comment" created="2017-07-22 05:00:12.0" updateauthor="chawlanikhil24" updated="2017-07-22 05:00:12.0"> <body><! CDATA The last error has been debugged. The error was due to a bug of Kubernetes and the CNI i was using is weave.net . After updating to Kubernetes 1.7.1 and lates version of "Flannel", solved the issue of peer joining. As well as chaincode has been installed on the peers.   The only Issue that persists is "chaincode container creation" from inside of a kubernetes Pod. Working on it, and soon it will be fixed. The 2 ways I can think of : # Sharing the docker socket of host machine with the peer pod containers, and then create container on machine using the same socket. # Linking the peer container with kubernetes DNS pod and finding a way to deploy Chaincode Pod.  ></body> </Action>
<Action id="28879" issue="18771" author="baohua" type="comment" body="https://gerrit.hyperledger.org/r/#/c/11861/" created="2017-07-24 09:28:26.0" updateauthor="baohua" updated="2017-07-24 09:28:26.0"/>
