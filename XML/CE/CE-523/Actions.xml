<Action id="54638" issue="36017" author="hightall" type="comment" body=" ~sivak2018  can I see your browser visit screenshot? and show me the .env file in the root directory of project. thanks." created="2018-12-11 05:52:23.0" updateauthor="hightall" updated="2018-12-11 05:52:23.0"/>
<Action id="54640" issue="36017" author="sivak2018" type="comment" body="!Capture.PNG!" created="2018-12-11 06:05:40.0" updateauthor="sivak2018" updated="2018-12-11 06:05:40.0"/>
<Action id="54641" issue="36017" author="sivak2018" type="comment" body="I have given screenshot of .env file " created="2018-12-11 06:44:03.0" updateauthor="sivak2018" updated="2018-12-11 06:44:03.0"/>
<Action id="54654" issue="36017" author="thipuvaasan" type="comment" created="2018-12-11 11:00:42.0" updateauthor="thipuvaasan" updated="2018-12-11 13:42:06.0"> <body><! CDATA Hi, I also faced similar kind of issues. When I used "make all" and "make start" it resolved my problem. But now the UI is throwing "{color:#72767b}Invalid parameter: redirect_uri{color}" error. Can anyone help?  !image-2018-12-11-16-30-31-043.png!     ></body> </Action>
<Action id="54736" issue="36017" author="sivak2018" type="comment" created="2018-12-12 18:39:41.0" updateauthor="sivak2018" updated="2018-12-12 18:39:41.0"> <body><! CDATA Followed following below shown steps still keycloak-server container getting failed and cello dashboard shows relam error.   git clone http://gerrit.hyperledger.org/r/cello && cd cello make setup-master SERVER_PUBLIC_IP=xx.xx.xx.xx make start   docker logs cello-keycloak-server  18:36:25,946 INFO  org.keycloak.connections.jpa.updater.liquibase.LiquibaseJpaUpdaterProvider  (ServerService Thread Pool -- 62) Updating database. Using changelog META-INF/jpa-changelog-master.xml 18:36:25,994 ERROR  org.keycloak.connections.jpa.updater.liquibase.conn.DefaultLiquibaseConnectionProvider  (ServerService Thread Pool -- 62) Change Set META-INF/jpa-changelog-2.1.0.xml::2.1.0-KEYCLOAK-5461::bburke@redhat.com failed. Error: Table 'BROKER_LINK' already exists  Failed SQL: CREATE TABLE keycloak.BROKER_LINK (IDENTITY_PROVIDER VARCHAR(255) NOT NULL, STORAGE_PROVIDER_ID VARCHAR(255) NULL, REALM_ID VARCHAR(36) NOT NULL, BROKER_USER_ID VARCHAR(255) NULL, BROKER_USERNAME VARCHAR(255) NULL, TOKEN TEXT NULL, USER_ID VARCHAR(255) NOT NULL)  18:36:26,005 INFO  org.jboss.as.server  (Thread-2) WFLYSRV0220: Server shutdown has been requested via an OS signal 18:36:26,015 ERROR  org.jboss.msc.service.fail  (ServerService Thread Pool -- 62) MSC000001: Failed to start service jboss.undertow.deployment.default-server.default-host./auth: org.jboss.msc.service.StartException in service jboss.undertow.deployment.default-server.default-host./auth: java.lang.RuntimeException: RESTEASY003325: Failed to construct public org.keycloak.services.resources.KeycloakApplication(javax.servlet.ServletContext,org.jboss.resteasy.core.Dispatcher) at org.wildfly.extension.undertow.deployment.UndertowDeploymentService$1.run(UndertowDeploymentService.java:81) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)  Caused by: liquibase.exception.MigrationFailedException: Migration failed for change set META-INF/jpa-changelog-2.1.0.xml::2.1.0-KEYCLOAK-5461::bburke@redhat.com: Reason: liquibase.exception.DatabaseException: Table 'BROKER_LINK' already exists  Failed SQL: CREATE TABLE keycloak.BROKER_LINK (IDENTITY_PROVIDER VARCHAR(255) NOT NULL, STORAGE_PROVIDER_ID VARCHAR(255) NULL, REALM_ID VARCHAR(36) NOT NULL, BROKER_USER_ID VARCHAR(255) NULL, BROKER_USERNAME VARCHAR(255) NULL, TOKEN TEXT NULL, USER_ID VARCHAR(255) NOT NULL)  at liquibase.changelog.ChangeSet.execute(ChangeSet.java:619) at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:51) at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:79) at liquibase.Liquibase.update(Liquibase.java:214) at liquibase.Liquibase.update(Liquibase.java:192) at liquibase.Liquibase.update(Liquibase.java:188) at org.keycloak.connections.jpa.updater.liquibase.LiquibaseJpaUpdaterProvider.updateChangeSet(LiquibaseJpaUpdaterProvider.java:182) at org.keycloak.connections.jpa.updater.liquibase.LiquibaseJpaUpdaterProvider.update(LiquibaseJpaUpdaterProvider.java:102) ... 57 more Caused by: liquibase.exception.DatabaseException: Table 'BROKER_LINK' already exists  Failed SQL: CREATE TABLE keycloak.BROKER_LINK (IDENTITY_PROVIDER VARCHAR(255) NOT NULL, STORAGE_PROVIDER_ID VARCHAR(255) NULL, REALM_ID VARCHAR(36) NOT NULL, BROKER_USER_ID VARCHAR(255) NULL, BROKER_USERNAME VARCHAR(255) NULL, TOKEN TEXT NULL, USER_ID VARCHAR(255) NOT NULL)   ></body> </Action>
<Action id="54793" issue="36017" author="hightall" type="comment" created="2018-12-14 02:45:58.0" updateauthor="hightall" updated="2018-12-14 02:47:55.0"> <body><! CDATA  ~sivak2018  yes, I didn't change ssl required options for master realm, master realm is for administration, so I keep it, and you can see initial.py under src/operator-dashboard, I create a new realm named from environment "KEYCLOAK_REALM", you can change it through make start envrionment, such as KEYCLOAK_REALM=cello-test make start, this initial.py only run at the first time, the script will check if the /opt/cello/keycloak_mysql directory exists, if not exists will run this initial.py and create realm, then create new client id and get client secret from keycloak server for operator & user dashboard, and update the files(.makerc/operator-dashboard, .makerc/user-dashboard), change the OPERATOR_DASHBOARD_SSO_SECRET & USER_DASHBOARD_SSO_SECRET, then will start the cello service. So currently the check for /opt/cello/keycloak_mysql directory is not good, I will change to other method for checking whether initial keycloak server for first run. !屏幕快照 2018-12-14 上午10.46.36.png|thumbnail!   ></body> </Action>
<Action id="54794" issue="36017" author="sivak2018" type="comment" body="Thanks Haitao Yes i will also try this changes." created="2018-12-14 03:06:41.0" updateauthor="sivak2018" updated="2018-12-14 03:06:41.0"/>
<Action id="54837" issue="36017" author="sivak2018" type="comment" created="2018-12-16 03:43:42.0" updateauthor="sivak2018" updated="2018-12-16 03:43:42.0"> <body><! CDATA Do i have to create new environment variables  as shown below and start the cello. Do i need to do code changes in initial.py.    export SERVER_PUBLIC_IP=x.x.xx.x export KEYCLOAK_REALM=cello-test make start  ></body> </Action>
