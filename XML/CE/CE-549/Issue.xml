<Issue id="37330" key="CE-549" number="549" project="10200" reporter="tkueda" assignee="tongliofcary" creator="tkueda" type="10005" summary="Avoid using root in controller machine" priority="2" resolution="10000" status="10001" created="2019-01-31 13:56:02.0" updated="2019-04-12 12:48:08.0" resolutiondate="2019-04-12 12:48:08.0" votes="0" watches="4" workflowId="48931"> <description><! CDATA Some playbooks requires the root privilege in a controller machine that a user runs the ansible-playbook command. For example, the first two plays in  src/operator-dashboard/agent/ansible/roles/deploy_compose/plays.yml  configure them to run in local (controller) and requires "become_user: root". But, Cello users may not have the root privilege. Even if they have the privilege, they may not prepare an ssh key to login as root from their normal user context.  Why don't we run the plays with a normal user just by removing the become statements?  Note: In the older Cello implementations, the download and certificate generation run in a remote builder machine. So, I think this was not a problem. {noformat} diff --git a/src/operator-dashboard/agent/ansible/roles/deploy_compose/plays.yml b/src/operator-dashboard/agent/ansible/roles/deploy_compose/plays.yml index 45e1380..9666ca2 100755 --- a/src/operator-dashboard/agent/ansible/roles/deploy_compose/plays.yml +++ b/src/operator-dashboard/agent/ansible/roles/deploy_compose/plays.yml @@ -2,8 +2,6 @@ - name: get fabric crypto tool hosts: cloud connection: local -  become: true -  become_user: root vars_files: - "./../../vars/{{ env }}.yml" tasks: @@ -13,8 +11,6 @@ - name: generate certificates hosts: cloud connection: local -  become: true -  become_user: root vars_files: - "./../../vars/{{ env }}.yml" tasks: {noformat} Â   ></description> </Issue>
