<Action id="34668" issue="23970" author="sdarwin" type="comment" created="2017-11-16 13:32:08.0" updateauthor="sdarwin" updated="2017-11-16 13:32:08.0"> <body><! CDATA More info: https://github.com/moby/moby/pull/28257 https://github.com/moby/moby/issues/14041 https://github.com/kubernetes/kubernetes/issues/40182  "Might be considered too much of a workaround and I haven't tested it fully but it might be possible to add a ExecStartPost directive to the systemd unit file to execute iptables -P FORWARD ACCEPT after Docker starts to automatically set it."  ></body> </Action>
<Action id="35629" issue="23970" author="tongliofcary" type="comment" body=" ~sdarwin  can you share steps that you followed to stand up your cluster? Also your configuration files. Dealing with iptables is done by using flanneld deamon, there should not be any manual processes needed. Are you using ansible agent from src/agent/ansible?" created="2017-11-29 13:47:15.0" updateauthor="tongliofcary" updated="2017-11-29 13:47:15.0"/>
<Action id="35638" issue="23970" author="sdarwin" type="comment" created="2017-11-29 16:36:26.0" updateauthor="sdarwin" updated="2017-11-29 16:36:26.0"> <body><! CDATA Hi  ~tongliofcary  , > Are you using ansible agent from src/agent/ansible? yes > can you share steps that you followed to stand up your cluster?  ansible-playbook -e "mode=apply" aws.yml Essentially, a default installation. Just the source code from src/agent/ansible.  Other reports of the same bug: SimonOberzan Nov 29, in the cello chat channel "kept getting connection timeout errors when trying to connect to zookeepers on other hosts."  MohammadObaid Nov 16, in the cello chat channel "kafka is restarting again and again" "kafka is unable to communicate with zookeeper" MohammadObaid Nov 18, in the cello chat channel "However everytime when ansible created Ubuntu instance I need to quickly ssh into my instances and need to add rules before ansible go for setting fabric architecture." and,Nov 29  "@tongli Well I always ran same ansible playbook script and face same issue everytime . I have to manually ssh into servers and edit iptables setting. If I dont do that then containers couldnt communicate" Possibly related to the new jira issue CE-180 also. Another github issue about the topic:  https://github.com/moby/moby/issues/30338  –  ~tongliofcary  if you run iptables -L, is the general forwarding rule set to drop or accept? can you ping between all containers?  Solution: as mentioned before, what appears to be a good answer is "iptables -P FORWARD ACCEPT"  ></body> </Action>
<Action id="35658" issue="23970" author="tongliofcary" type="comment" body="https://gerrit.hyperledger.org/r/#/c/15821/" created="2017-11-29 23:41:08.0" updateauthor="tongliofcary" updated="2017-11-29 23:41:08.0"/>
