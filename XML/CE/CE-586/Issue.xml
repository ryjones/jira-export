<Issue id="38857" key="CE-586" number="586" project="10200" reporter="baohua" assignee="baohua" creator="baohua" type="10004" summary="Cannot build v0.9.0 operator-dashboard docker image" priority="3" resolution="10000" status="10001" created="2019-03-29 14:25:06.0" updated="2019-04-05 14:09:08.0" resolutiondate="2019-04-05 14:02:12.0" votes="0" watches="1" workflowId="50509"> <description><! CDATA Use the master branch code to build v0.9.0 operator-dashboard docker image locally.  When build the image locally, there's node js package error.  $ cd build_image/dockerhub/v0.9.0/operator-dashboard  $ docker build -t hyperledger/cello-operator-dashboard:x86_64-0.9.0 . Sending build context to Docker daemon 2.56kB Step 1/9 : FROM node:8.9 as build_js 8.9: Pulling from library/node 4176fe04cefe: Already exists 851356ecf618: Already exists 6115379c7b49: Already exists aaf7d781d601: Already exists 936f8420f2e4: Already exists eab82fe5fcf4: Already exists ba2f0c7b6af8: Already exists 70f351c27b65: Already exists Digest: sha256:5afc7736a71bcf24281d9dbff878c771106e0791d56949b1a4e8d27c50424283 Status: Downloaded newer image for node:8.9 ---> 672002a50a0b Step 2/9 : MAINTAINER haitao yue "hightall@me.com" ---> Running in bbbd906d6673 Removing intermediate container bbbd906d6673 ---> 1445a87c0bc2 Step 3/9 : RUN cd /tmp && git clone -b 'v0.9.0' --single-branch --depth 1  https://github.com/hyperledger/cello.git  ---> Running in 1ace9a58c149 Cloning into 'cello'... Note: checking out 'b6a340d1ba9502cb7319271eccbb8030b495da62'.  You are in 'detached HEAD' state. You can look around, make experimental changes and commit them, and you can discard any commits you make in this state without impacting any branches by performing another checkout.  If you want to create a new branch to retain commits you create, you may do so (now or later) by using -b with the checkout command again. Example:  git checkout -b new_branch_name  Removing intermediate container 1ace9a58c149 ---> fe2bb2e03518 Step 4/9 : RUN cp -r /tmp/cello/src/static /var/www ---> Running in a2a2c6d5a11f Removing intermediate container a2a2c6d5a11f ---> fdd991b9c4d0 Step 5/9 : RUN cd /var/www/dashboard && npm install && npm run build ---> Running in a226509abe73 npm WARN deprecated rc-drawer-menu@0.5.7: rc-drawer-menu is deprecated, please use rc-drawer instead. npm WARN deprecated react-router-redux@5.0.0-alpha.9: This project is no longer maintained. npm WARN notice  SECURITY  lodash has the following vulnerabilities: 1 moderate, 1 low. Go here for more details:  https://nodesecurity.io/advisories?search=lodash&version=4.17.4  - Run `npm i npm@latest -g` to upgrade your npm version, and then `npm audit` to get more info. npm WARN deprecated browserslist@2.11.3: Browserslist 2 could fail on reading Browserslist >3.0 config used in other tools. npm WARN deprecated circular-json@0.3.3: CircularJSON is in maintenance only, flatted is its successor. npm WARN deprecated core-js@1.2.7: core-js@<2.6.5 is no longer maintained. Please, upgrade to core-js@3 or at least to actual version of core-js@2. npm WARN deprecated bfj-node4@5.3.1: Switch to the `bfj` package for fixes and new features! npm WARN deprecated browserslist@1.7.7: Browserslist 2 could fail on reading Browserslist >3.0 config used in other tools. npm WARN notice  SECURITY  hoek has the following vulnerability: 1 moderate. Go here for more details:  https://nodesecurity.io/advisories?search=hoek&version=2.16.3  - Run `npm i npm@latest -g` to upgrade your npm version, and then `npm audit` to get more info. npm WARN deprecated hoek@2.16.3: This version is no longer maintained. Please upgrade to the latest version. npm WARN deprecated cryptiles@2.0.5: This version is no longer maintained. Please upgrade to the latest version. npm WARN deprecated boom@2.10.1: This version is no longer maintained. Please upgrade to the latest version. npm WARN notice  SECURITY  webpack-dev-server has the following vulnerability: 1 high. Go here for more details:  https://nodesecurity.io/advisories?search=webpack-dev-server&version=2.11.5  - Run `npm i npm@latest -g` to upgrade your npm version, and then `npm audit` to get more info. npm WARN notice  SECURITY  braces has the following vulnerability: 1 low. Go here for more details:  https://nodesecurity.io/advisories?search=braces&version=1.8.5  - Run `npm i npm@latest -g` to upgrade your npm version, and then `npm audit` to get more info.  > bigbrother-webpack-plugin@1.6.1 postinstall /var/www/dashboard/node_modules/bigbrother-webpack-plugin > node postinstall.js  > uglifyjs-webpack-plugin@0.4.6 postinstall /var/www/dashboard/node_modules/uglifyjs-webpack-plugin > node lib/post_install.js  npm notice created a lockfile as package-lock.json. You should commit this file. npm WARN react-fittext@1.0.0 requires a peer of react@^15.0.0 but none is installed. You must install peer dependencies yourself. npm WARN react-fittext@1.0.0 requires a peer of react-dom@^15.0.0 but none is installed. You must install peer dependencies yourself. npm WARN @ant-design/icons-react@1.1.2 requires a peer of @ant-design/icons@~1.1.0 but none is installed. You must install peer dependencies yourself. npm WARN babel-loader@8.0.5 requires a peer of @babel/core@^7.0.0 but none is installed. You must install peer dependencies yourself. npm WARN eslint-config-umi@0.1.5 requires a peer of eslint-plugin-jsx-a11y@^5.1.1 but none is installed. You must install peer dependencies yourself. npm WARN @babel/plugin-proposal-export-default@7.0.0-beta.32 requires a peer of @babel/core@7.0.0-beta.32 but none is installed. You must install peer dependencies yourself. npm WARN @babel/plugin-proposal-export-namespace@7.0.0-beta.32 requires a peer of @babel/core@7.0.0-beta.32 but none is installed. You must install peer dependencies yourself. npm WARN @babel/plugin-syntax-export-extensions@7.0.0-beta.32 requires a peer of @babel/core@7.0.0-beta.32 but none is installed. You must install peer dependencies yourself. npm WARN eslint-config-react-app@2.1.0 requires a peer of babel-eslint@^7.2.3 but none is installed. You must install peer dependencies yourself. npm WARN eslint-config-react-app@2.1.0 requires a peer of eslint-plugin-jsx-a11y@^5.1.1 but none is installed. You must install peer dependencies yourself. npm WARN ts-jest-babel-7@22.0.7 requires a peer of jest@^22.0.1 || ^22.1.0-alpha.1 || ^23.0.0-alpha.1 but none is installed. You must install peer dependencies yourself. npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.7 (node_modules/fsevents): npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.7: wanted \{"os":"darwin","arch":"any"} (current: \{"os":"linux","arch":"x64"})  added 2751 packages in 237.278s  > cello-operator@0.8.0 build /var/www/dashboard > cross-env ESLINT=none roadhog build  Failed to compile.  Module not found: Error: Can't resolve '@babel/runtime/helpers/esm/extends' in '/var/www/dashboard/node_modules/history/esm'   graceful-process#55|#55  exit with code:1 npm ERR! code ELIFECYCLE npm ERR! errno 1 npm ERR! cello-operator@0.8.0 build: `cross-env ESLINT=none roadhog build` npm ERR! Exit status 1 npm ERR! npm ERR! Failed at the cello-operator@0.8.0 build script. npm ERR! This is probably not a problem with npm. There is likely additional logging output above.  npm ERR! A complete log of this run can be found in: npm ERR! /root/.npm/_logs/2019-03-29T14_22_21_988Z-debug.log The command '/bin/sh -c cd /var/www/dashboard && npm install && npm run build' returned a non-zero code: 1  ></description> </Issue>
