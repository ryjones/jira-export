<Issue id="40855" key="FABCN-278" number="278" project="11207" reporter="vijaypunugubati" assignee="mbwhite" creator="vijaypunugubati" type="10000" summary="fabric-chaincode-node-merge job: Command failed on Scenario Tests " priority="2" resolution="10203" status="6" created="2019-07-01 15:26:52.0" updated="2019-11-30 21:15:04.0" resolutiondate="2019-08-02 16:18:48.0" votes="0" watches="8" workflowId="57096"> <description><! CDATA  Node chaincode command failed on Scenario Tests.  *Branch:* Master  *Platform:* ** s390x, x86_64  *Error Snippet:* {code:java} /00:04:04.617   10:30:25  Using gulpfile /w/workspace/fabric-chaincode-node-merge-s390x/gopath/src/github.com/hyperledger/fabric-chaincode-node/gulpfile.js 00:04:04.617   10:30:25  Starting 'test-e2e'... 00:04:04.617   10:30:25  Starting 'test-fv-shim'... 00:04:04.617   10:30:25  Starting '<anonymous>'... 00:04:05.009   00:04:05.009   00:04:05.009  (node:56201) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 uncaughtException listeners added. Use emitter.setMaxListeners() to increase limit 00:04:05.009    Typescript chaincode 00:06:44.508      Scenario 00:06:44.508        1) should write an asset 00:06:44.508        2) should update an asset 00:06:44.508        3) should handle the getMetadata 00:06:44.508   00:06:44.508    Chaincode clientidentity 00:09:07.578      4) should create an instance of the client identity class 00:09:07.578   00:09:07.578    Chaincode crosschaincode 00:13:31.182      5) "before all" hook 00:13:31.182   00:13:31.183    Chaincode CRUD 00:15:54.268      Get 00:15:54.268        6) should get single key value 00:15:54.268        7) should get a single key containing json data 00:15:54.268        8) should get multiple keys concurrently 00:15:54.268        9) should get a single composite key value 00:15:54.268        10) should return a list of results from a partial composite key using the old iterator style 00:15:54.268        11) should return a list of results from a partial composite key using the new iterator style 00:15:54.268        12) should return all keys between key1 and key3 using the old iterator style 00:15:54.268        13) should return all keys between key1 and key3 using the new iterator style 00:15:54.268        14) should get the history for a key using the old and new iterator style 00:15:54.268        15) should get a query result with pagination without setting a bookmark using the old iterator style 00:15:54.268        16) should get a query result with pagination without setting a bookmark using the new iterator style 00:15:54.268        17) should get a query result with pagination with a set bookmark using the old iterator style 00:15:54.268        18) should get a query result with pagination with a set bookmark using the new iterator style 00:15:54.268        19) should return a paginated list using the old iterator style 00:15:54.268        20) should return a paginated list using the new iterator style 00:15:54.268        21) should return a state from a partial composite key using the old iterator style 00:15:54.268        22) should return a state from a partial composite key using the new iterator style 00:15:54.268        23) should return a paginated list from partial composte key using the old iterator style 00:15:54.268        24) should return a paginated list from partial composte key using the new iterator style 00:15:54.268      Put 00:15:54.268        25) should add a key 00:15:54.268        26) should add a composite key 00:15:54.268        27) should update an existing key 00:15:54.268      Delete 00:15:54.268        28) should delete a key 00:15:54.268        29) should delete a composite key 00:15:54.268      Split 00:15:54.268        30) should split the composite key 00:15:54.268   00:15:54.268    Chaincode encryption 00:18:17.358      31) should encrypt and decrypt state values 00:18:17.358      32) should sign a value and verify the signature 00:18:17.358   00:18:17.358    Chaincode query 00:20:40.555      33) should perform an equals query 00:20:40.555      34) should perform an regex query 00:20:40.555   00:20:40.555   00:20:40.555    0 passing (16m) 00:20:40.555    34 failing 00:20:40.555   00:20:40.555    1) Typescript chaincode Scenario should write an asset: 00:20:40.555       Error: Command failed: docker exec org1_cli peer chaincode invoke  -o orderer.example.com:7050 -C mychannel -n annotations -c '{"Args": "TestContract:createAsset","GLD","GOLD_BAR","100","EXTRA_ID","50" }' --waitForEvent --waitForEventTimeout 100s 2>&1 00:20:40.555   00:20:40.555        at ChildProcess.exithandler (child_process.js:294:12) 00:20:40.555        at maybeClose (internal/child_process.js:970:16) 00:20:40.556        at Process.ChildProcess._handle.onexit (internal/child_process.js:259:5) 00:20:40.556   00:20:40.556    2) Typescript chaincode Scenario should update an asset: 00:20:40.556       Error: Command failed: docker exec org1_cli peer chaincode invoke  -o orderer.example.com:7050 -C mychannel -n annotations -c '{"Args": "TestContract:updateAsset","{\"id\":\"GLD\",\"name\":\"GOLD_BAR\",\"value\":200,\"extra\":{\"id\":\"EXTRA_ID\",\"value\":100}}" }' --waitForEvent --waitForEventTimeout 100s 2>&1 00:20:40.556   00:20:40.556        at ChildProcess.exithandler (child_process.js:294:12) 00:20:40.556        at maybeClose (internal/child_process.js:970:16) 00:20:40.556        at Process.ChildProcess._handle.onexit (internal/child_process.js:259:5) 00:20:40.556   00:20:40.556    3) Typescript chaincode Scenario should handle the getMetadata: 00:20:40.556       Error: Command failed: docker exec org2_cli peer chaincode query  -C mychannel -n annotations -c '{"Args": "org.hyperledger.fabric:GetMetadata" }' 00:20:40.556  Error: endorsement failure during query. response: status:500 message:"make sure the chaincode annotations has been successfully defined on channel mychannel and try again: chaincode annotations not found"  00:20:40.556   00:20:40.556        at ChildProcess.exithandler (child_process.js:294:12) 00:20:40.556        at maybeClose (internal/child_process.js:970:16) 00:20:40.556        at Process.ChildProcess._handle.onexit (internal/child_process.js:259:5) 00:20:40.556   00:20:40.556    4) Chaincode clientidentity should create an instance of the client identity class: 00:20:40.556       Error: Command failed: docker exec org2_cli peer chaincode query  -C mychannel -n clientidentity -c '{"Args": "org.mynamespace.clientidentity:clientIdentityInstance" }' 00:20:40.556  Error: endorsement failure during query. response: status:500 message:"make sure the chaincode clientidentity has been successfully defined on channel mychannel and try again: chaincode clientidentity not found"  00:20:40.556   00:20:40.556        at ChildProcess.exithandler (child_process.js:294:12) 00:20:40.556        at maybeClose (internal/child_process.js:970:16) 00:20:40.556        at Process.ChildProcess._handle.onexit (internal/child_process.js:259:5) 00:20:40.556   00:20:40.556    5) Chaincode crosschaincode "before all" hook: 00:20:40.556       Error: Command failed: docker exec org2_cli peer chaincode query  -C mychannel -n crosschaincode2 -c '{"Args": "org.mynamespace.crosschaincode2:getKey","key1" }' 00:20:40.556  Error: endorsement failure during query. response: status:500 message:"make sure the chaincode crosschaincode2 has been successfully defined on channel mychannel and try again: chaincode crosschaincode2 not found" / code placeholder {code}    Similar failures observed on all 34 scenarios. The error's for 34 scenarios is on below link's provided.  *Build:*  ** https://jenkins.hyperledger.org/view/fabric-chaincode-node/job/fabric-chaincode-node-merge-s390x/180/consoleFull    https://jenkins.hyperledger.org/view/fabric-chaincode-node/job/fabric-chaincode-node-merge-x86_64/180/console   ></description> </Issue>
