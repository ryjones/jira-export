<Action id="56445" issue="37195" author="mbwhite" type="comment" created="2019-01-31 14:21:12.0" updateauthor="mbwhite" updated="2019-01-31 14:21:12.0"> <body><! CDATA Within the `fabric-contract-api/jsontransactionserliazer.js` we need to add string-> number type coercion.  I.e. ensure that the types that come from the wire protocol should be co-erced into the types that the schema says they should be.   ></body> </Action>
<Action id="56629" issue="37195" author="awjh-ibm" type="comment" body="Not sure but is this an issue with the contract-api? Looks to me like an issue with the SDK which only takes an array of strings. We take those strings and coerce them to the correct values. 123 should therefore be submitted as a string, it will be converted later" created="2019-02-04 10:33:03.0" updateauthor="awjh-ibm" updated="2019-02-04 10:33:03.0"/>
<Action id="56633" issue="37195" author="jakeeyturner" type="comment" created="2019-02-04 11:08:35.0" updateauthor="jakeeyturner" updated="2019-02-04 11:15:01.0"> <body><! CDATA When submitting: {code:java}  "carNumber", "make","model","color","owner","2" {code} This error is thrown {code:java}   DIR-api:ContractProcess ERROR:2019-02-04T11:03:47.315Z ERROR  contracts-spi/chaincodefromcontract.js     DIR-api:ContractProcess 	{"message":"Unable to validate parameter due to  {\"keyword\":\"type\",\"dataPath\":\"\",\"schemaPath\":\"#/type\",\"params\":{\"type\":\"number\"},\"message\":\"should be number\"} ","stack":"Error: Unable to validate parameter due to  {\"keyword\":\"type\",\"dataPath\":\"\",\"schemaPath\":\"#/type\",\"params\":{\"type\":\"number\"},\"message\":\"should be number\"} \n    at DataMarshall.handleParameters (/Users/jake/Documents/DIRECTORY/contracts/DIR-contract/node_modules/fabric-shim/lib/contract-spi/datamarshall.js:118:27)\n    at ChaincodeFromContract.invokeFunctionality (/Users/jake/Documents/DIRECTORY/contracts/DIR-contract/node_modules/fabric-shim/lib/contract-spi/chaincodefromcontract.js:315:49)\n    at ChaincodeFromContract.Invoke (/Users/jake/Documents/DIRECTORY/contracts/DIR-contract/node_modules/fabric-shim/lib/contract-spi/chaincodefromcontract.js:278:21)\n    at handleMessage (/Users/jake/Documents/DIRECTORY/contracts/DIR-contract/node_modules/fabric-shim/lib/handler.js:614:47)\n    at ChaincodeSupportClient.handleTransaction (/Users/jake/Documents/DIRECTORY/contracts/DIR-contract/node_modules/fabric-shim/lib/handler.js:356:9)\n    at ClientDuplexStream.<anonymous> (/Users/jake/Documents/DIRECTORY/contracts/DIR-contract/node_modules/fabric-shim/lib/handler.js:296:30)\n    at emitOne (events.js:116:13)\n    at ClientDuplexStream.emit (events.js:211:7)\n    at addChunk (_stream_readable.js:263:12)\n    at readableAddChunk (_stream_readable.js:250:11)"} {code} The error response that comes from the peer is: {code:java} 2019-02-04T11:03:47.318Z - warn:  Transaction : _validatePeerResponses: Received error response from peer: message=transaction returned with failure: Error: Unable to validate parameter due to  {"keyword":"type","dataPath":"","schemaPath":"#/type","params":{"type":"number"},"message":"should be number"} , stack=Error: transaction returned with failure: Error: Unable to validate parameter due to  {"keyword":"type","dataPath":"","schemaPath":"#/type","params":{"type":"number"},"message":"should be number"}      at self._endorserClient.processProposal (/Users/jake/Documents/DIRECTORY/common/temp/node_modules/fabric-client/lib/Peer.js:140:36)     at Object.onReceiveStatus (/Users/jake/Documents/DIRECTORY/common/temp/node_modules/grpc/src/client_interceptors.js:1191:9)     at InterceptingListener._callNext (/Users/jake/Documents/DIRECTORY/common/temp/node_modules/grpc/src/client_interceptors.js:564:42)     at InterceptingListener.onReceiveStatus (/Users/jake/Documents/DIRECTORY/common/temp/node_modules/grpc/src/client_interceptors.js:614:8)     at callback (/Users/jake/Documents/DIRECTORY/common/temp/node_modules/grpc/src/client_interceptors.js:841:24), status=500, , url=grpc://localhost:7051, name=peer0.org1.example.com, name=peer0.org1.example.com, request-timeout=120001, grpc.ssl_target_name_override=peer0.org1.example.com, grpc.default_authority=peer0.org1.example.com, grpc.max_receive_message_length=-1, grpc.max_send_message_length=-1, isProposalResponse=true {code}  ></body> </Action>
<Action id="56637" issue="37195" author="awjh-ibm" type="comment" body="Verified, that when sending numbers the above happens" created="2019-02-04 11:45:04.0" updateauthor="awjh-ibm" updated="2019-02-04 11:45:04.0"/>
