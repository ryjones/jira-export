<Action id="48161" issue="32058" author="ashcherbakov" type="comment" created="2018-07-31 07:20:47.0" updateauthor="ashcherbakov" updated="2018-08-01 15:35:34.0"> <body><! CDATA *Problem reason:*  If a message is sent to a node which hasn't yet replied with pong (that is connected), then there is a chance that the message will be lost and not re-sent. This may lead to losing messages, especially during initial catch-up.  *Fix:* * Stash messages sent to disconnected node and re-send them once we got both ping and pong from them (that is both nodes are being connected and known to each other). The queue for stashing is limited to avoid out of memory issues. * Stash and re-send ping/pongs received from not yet connected entities.  *PR:*   https://github.com/hyperledger/indy-plenum/pull/844      *Covered with tests:*   stp_zmq/test/test_send_to_disconnected.py|https://github.com/hyperledger/indy-plenum/pull/844/files#diff-2dce90a7f03f12b73d021be239d2c382    stp_zmq/test/test_stashed_ping_pong.py|https://github.com/hyperledger/indy-plenum/pull/844/files#diff-0be12be3ae9c893fc7a6bb3c71fb7f9a      *Build*  Indy-Node: 1.5.537     *Risk*:  Medium     *Recommendation for QA*: * Run load test * Check catchup during load  ></body> </Action>
<Action id="48312" issue="32058" author="ozheregelya" type="comment" created="2018-08-02 19:01:59.0" updateauthor="ozheregelya" updated="2018-08-03 13:07:14.0"> <body><! CDATA Environment: indy-node 1.5.539 libindy 1.6.1~655  Steps to Validate: 1. Set up the pool. 2. Start medium load (like in INDY-1343). 3. Create one new node and add it to the pool. => Wait for catch up.  Actual Results: Node successfully completed catch up.  Additional load testing will be performed in scope of INDY-1343.  ></body> </Action>
