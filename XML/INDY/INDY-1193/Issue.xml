<Issue id="28035" key="INDY-1193" number="1193" project="10303" reporter="ckochenower" creator="ckochenower" type="10004" summary="send ATTRIB help includes an invalid example" priority="3" resolution="10001" status="10001" created="2018-02-26 16:51:28.0" updated="2019-03-29 20:35:47.0" resolutiondate="2019-03-29 20:35:47.0" votes="0" watches="1" workflowId="28037"> <environment><! CDATA {panel:title=OS}   root@dkmsa1:~/.indy-cli/networks/dkms# cat /etc/*release*  DISTRIB_ID=Ubuntu  DISTRIB_RELEASE=16.04  DISTRIB_CODENAME=xenial  DISTRIB_DESCRIPTION="Ubuntu 16.04.4 LTS"  NAME="Ubuntu"  VERSION="16.04.4 LTS (Xenial Xerus)"  ID=ubuntu  ID_LIKE=debian  PRETTY_NAME="Ubuntu 16.04.4 LTS"  VERSION_ID="16.04"  HOME_URL="http://www.ubuntu.com/"  SUPPORT_URL="http://help.ubuntu.com/"  BUG_REPORT_URL="http://bugs.launchpad.net/ubuntu/"  VERSION_CODENAME=xenial  UBUNTU_CODENAME=xenial {panel} {panel:title=apt-cache policy indy-node} root@dkmsa1:~/.indy-cli/networks/dkms# apt-cache policy indy-node  indy-node:    Installed: 1.3.54    Candidate: 1.3.54    Version table:  *** 1.3.54 500          500 https://repo.sovrin.org/deb xenial/stable amd64 Packages          100 /var/lib/dpkg/status       1.3.52 500          500 https://repo.sovrin.org/deb xenial/stable amd64 Packages       1.2.50 500          500 https://repo.sovrin.org/deb xenial/stable amd64 Packages       1.1.43 500          500 https://repo.sovrin.org/deb xenial/stable amd64 Packages       1.1.37 500          500 https://repo.sovrin.org/deb xenial/stable amd64 Packages       1.1.37 500          500 https://repo.sovrin.org/deb xenial/stable amd64 Packages       1.1.35 500          500 https://repo.sovrin.org/deb xenial/stable amd64 Packages       1.1.33 500          500 https://repo.sovrin.org/deb xenial/stable amd64 Packages       1.1.31 500          500 https://repo.sovrin.org/deb xenial/stable amd64 Packages       1.0.28 500          500 https://repo.sovrin.org/deb xenial/stable amd64 Packages       0.4.27 500          500 https://repo.sovrin.org/deb xenial/stable amd64 Packages {panel}    ></environment> <description><! CDATA *Version:*  indy-node 1.3.54  *Sample output:*    {code:java} indy@dkms> send ATTRIB help  Invalid syntax: 'send ATTRIB help'    send ATTRIB  -----------       title: Adds attributes to existing DID         usage: send ATTRIB dest=<target DID>  raw={<json-data>}   hash=<hashed-data>   enc=<encrypted-data>          example(s):          send ATTRIB dest=33A18XMqWqTzDpLHXLR5nT raw={"endpoint": "127.0.0.1:5555"}{code} Note the example of adding endpoint <IP>:<PORT> is a string instead of a dictionary containing an 'ha' element: {code:java} send ATTRIB dest=33A18XMqWqTzDpLHXLR5nT raw={"endpoint": "127.0.0.1:5555"}{code}  The following test on master helped me discover the correct raw JSON that must be sent: https://github.com/hyperledger/indy-node/blob/master/indy_client/test/cli/test_send_attrib_validation.py#L235-L252  The error I get when the "<IP>:<PORT>" is not included in the "ha" element is as follows: {code} indy@dkms> send ATTRIB dest=JdRkpwWwCBqjfcrsjAH1GT raw={"endpoint": "dkmseas.pdev.evernym.com:443"} Adding attributes {"endpoint": "dkmseas.pdev.evernym.com:443"} for JdRkpwWwCBqjfcrsjAH1GT Error: client request invalid: InvalidClientRequest()  caused by 'str' object has no attribute 'get'  {code}  The same command succeeds when wrapping "<IP>:<PORT>" in an 'ha' element: {code} indy@dkms> send ATTRIB dest=JdRkpwWwCBqjfcrsjAH1GT raw={"endpoint": {"ha": "34.217.164.50:443"}} Adding attributes {"endpoint": {"ha": "34.217.164.50:443"}} for JdRkpwWwCBqjfcrsjAH1GT Attribute added for nym JdRkpwWwCBqjfcrsjAH1GT {code}  If the example is correct, the code needs to change. If the code is correct, the example needs to change.  ></description> </Issue>
