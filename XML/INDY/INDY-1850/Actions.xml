<Action id="53564" issue="35370" author="vladimirwork" type="comment" created="2018-11-18 20:19:55.0" updateauthor="vladimirwork" updated="2018-11-18 20:19:55.0"> <body><! CDATA It looks like we have the same issue with indy-node package upgrade (1.6.681 -> 1.6.682): {noformat} Nov 18 19:53:38 4db03710d62f env 331 : WARNING: apt does not have a stable CLI interface. Use with caution in scripts. Nov 18 19:53:38 4db03710d62f env 331 : Get:1 http://security.ubuntu.com/ubuntu xenial-security InRelease  107 kB  Nov 18 19:53:38 4db03710d62f env 331 : Hit:2 http://archive.ubuntu.com/ubuntu xenial InRelease Nov 18 19:53:38 4db03710d62f env 331 : Get:3 http://archive.ubuntu.com/ubuntu xenial-updates InRelease  109 kB  Nov 18 19:53:39 4db03710d62f env 331 : Get:4 http://archive.ubuntu.com/ubuntu xenial-backports InRelease  107 kB  Nov 18 19:53:39 4db03710d62f env 331 : Hit:5 https://repo.sovrin.org/deb xenial InRelease Nov 18 19:53:40 4db03710d62f env 331 : Hit:6 https://repo.sovrin.org/sdk/deb xenial InRelease Nov 18 19:53:40 4db03710d62f env 331 : Fetched 323 kB in 1s (205 kB/s) Nov 18 19:53:41 4db03710d62f env 331 : Reading package lists... Nov 18 19:53:41 4db03710d62f env 331 : Building dependency tree... Nov 18 19:53:41 4db03710d62f env 331 : Reading state information... Nov 18 19:53:41 4db03710d62f env 331 : 13 packages can be upgraded. Run 'apt list --upgradable' to see them. Nov 18 19:53:47 4db03710d62f env 331 : indy-anoncreds Nov 18 19:53:47 4db03710d62f env 331 : indy-node Nov 18 19:53:47 4db03710d62f env 331 : indy-plenum Nov 18 19:53:47 4db03710d62f env 331 : libindy-crypto Nov 18 19:53:47 4db03710d62f env 331 : python3-indy-crypto Nov 18 19:53:47 4db03710d62f env 331 : + deps=indy-node=1.6.682 Nov 18 19:53:47 4db03710d62f env 331 : + ' ' -z indy-node=1.6.682 ' ' Nov 18 19:53:47 4db03710d62f env 331 : + echo 'Try to donwload indy version indy-node=1.6.682' Nov 18 19:53:47 4db03710d62f env 331 : Try to donwload indy version indy-node=1.6.682 Nov 18 19:53:47 4db03710d62f env 331 : + apt-get -y update Nov 18 19:53:47 4db03710d62f env 331 : Get:1 http://security.ubuntu.com/ubuntu xenial-security InRelease  107 kB  Nov 18 19:53:47 4db03710d62f env 331 : Hit:2 http://archive.ubuntu.com/ubuntu xenial InRelease Nov 18 19:53:47 4db03710d62f env 331 : Get:3 http://archive.ubuntu.com/ubuntu xenial-updates InRelease  109 kB  Nov 18 19:53:47 4db03710d62f env 331 : Get:4 http://archive.ubuntu.com/ubuntu xenial-backports InRelease  107 kB  Nov 18 19:53:48 4db03710d62f env 331 : Hit:5 https://repo.sovrin.org/deb xenial InRelease Nov 18 19:53:48 4db03710d62f env 331 : Hit:6 https://repo.sovrin.org/sdk/deb xenial InRelease Nov 18 19:53:48 4db03710d62f env 331 : Fetched 323 kB in 1s (206 kB/s) Nov 18 19:53:49 4db03710d62f env 331 : Reading package lists... Nov 18 19:53:49 4db03710d62f env 331 : + apt-get --download-only -y --allow-downgrades --allow-change-held-packages install indy-node=1.6.682 Nov 18 19:53:50 4db03710d62f env 331 : Reading package lists... Nov 18 19:53:50 4db03710d62f env 331 : Building dependency tree... Nov 18 19:53:50 4db03710d62f env 331 : Reading state information... Nov 18 19:53:51 4db03710d62f env 331 : Some packages could not be installed. This may mean that you have Nov 18 19:53:51 4db03710d62f env 331 : requested an impossible situation or if you are using the unstable Nov 18 19:53:51 4db03710d62f env 331 : distribution that some required packages have not yet been created Nov 18 19:53:51 4db03710d62f env 331 : or been moved out of Incoming. Nov 18 19:53:51 4db03710d62f env 331 : The following information may help to resolve the situation: Nov 18 19:53:51 4db03710d62f env 331 : The following packages have unmet dependencies: Nov 18 19:53:51 4db03710d62f env 331 :  indy-node : Depends: indy-plenum (= 1.6.593) but 1.6.590 is to be installed Nov 18 19:53:51 4db03710d62f env 331 : E: Unable to correct problems, you have held broken packages. Nov 18 19:53:51 4db03710d62f env 331 : + ret=100 Nov 18 19:53:51 4db03710d62f env 331 : + ' ' 100 -ne 0 ' ' Nov 18 19:53:51 4db03710d62f env 331 : + echo 'Failed to obtain indy-node=1.6.682' Nov 18 19:53:51 4db03710d62f env 331 : Failed to obtain indy-node=1.6.682 Nov 18 19:53:51 4db03710d62f env 331 : + exit 1 Nov 18 19:53:51 4db03710d62f env 331 : Upgrade from 1.6.681 to 1.6.682 failed: Command 'upgrade_indy_node "indy-node=1.6.682"' returned non-zero exit status 1 Nov 18 19:53:51 4db03710d62f env 331 : Trying to rollback to the previous version Command 'upgrade_indy_node "indy-node=1.6.682"' returned non-zero exit status 1 {noformat}   ></body> </Action>
<Action id="53638" issue="35370" author="dsurnin" type="comment" created="2018-11-20 13:31:33.0" updateauthor="dsurnin" updated="2018-11-20 13:31:33.0"> <body><! CDATA PR https://github.com/hyperledger/indy-node/pull/1044  first Node version with fix is 688  ></body> </Action>
<Action id="53760" issue="35370" author="ozheregelya" type="comment" created="2018-11-23 16:20:54.0" updateauthor="ozheregelya" updated="2018-11-23 16:24:46.0"> <body><! CDATA *Environment:* indy-node 1.6.634 -> 1.6.688 -> 1.6.699 sovrin 1.1.62 -> 1.1.91 -> 1.1.93  *Steps to Validate:* 1. Check upgrade to new version. 2. Check upgrade from new version. 3. Check rollback after failed upgrade and manual upgrade. (see  https://docs.google.com/spreadsheets/d/1ZeeTy0iwP2UhU-y2nJF3HNGlx0NZoLTgIEe9EwxQVQ8/edit#gid=1122130859  for details about upgrade cases)  *Actual Results:* Upgrade works.  ></body> </Action>
