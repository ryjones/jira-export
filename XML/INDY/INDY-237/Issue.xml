<Issue id="18072" key="INDY-237" number="237" project="10303" reporter="krw910" assignee="ashcherbakov" creator="krw910" type="10004" summary="Pool can stall if the primary goes offline as a new node is added if the transition happens when the pool is at the max f nodes" priority="2" resolution="10200" status="10001" created="2017-06-15 17:39:53.0" updated="2019-03-29 20:33:25.0" resolutiondate="2019-03-29 20:33:25.0" votes="0" watches="1" workflowId="18077"> <description><! CDATA If the pool has all the faulty nodes it can allow and the primary goes down as a new node, or faulty node, is coming on up the pool can get into a stalled state.Â   *Setup* Install only 4 nodes and 1 client  If the nodes are started then stop all the nodes.  *Steps* # Bring up only 3 of the 4 nodes. # On one of the nodes switch to the sovrin user and go to the .sovrin directory. # Search the node log for ":0 declaring primary as:" to see which node is the current primary. # Now shutdown the primary node at the same time you start Node 4. # Send a add NYM transaction and it should not go through (won't show Added NYM in the CLI)  {color:#d04437}Issue{color} With the primary going down we are in a failed state with not enough nodes to elect a new primary. When Node 4 comes up it was never disconnected from a primary because it was never connected. So Node 4 does not instantiate a view change and the protocol stalls.  ></description> </Issue>
