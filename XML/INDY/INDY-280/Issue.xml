<Issue id="18363" key="INDY-280" number="280" project="10303" reporter="krw910" assignee="danielhardman" creator="krw910" type="10002" summary="Upgrade: submit pool upgrade when one node is scheduled to upgrade in a huge period of time, like a week" priority="3" resolution="10000" status="10001" created="2017-06-19 22:25:14.0" updated="2019-03-29 20:34:02.0" resolutiondate="2019-03-29 20:34:02.0" votes="0" watches="1" timeoriginalestimate="10800" timeestimate="10800" workflowId="18368"> <description><! CDATA Upgrade: submit pool upgrade when one node is scheduled to upgrade in a huge period of time, like a week  *Things tried:*  Case 1:  Send two pool upgrade commands in a huge period of time for whole pool.  Case 2:  Upgrade one node using force=True parameter, and than send upgrade command for whole pool. 1. Upgrade Node 2 using force option (schedule upgrade of Node 2 to 2017-07-25, 10:30) {code:java} sovrin@test> send POOL_UPGRADE name=upgrade-oz2 version=0.4.7 sha256=f6f2ea8f45d8a057c9566a33f99474da2e5c6a6604d736121650e2730c6fb0a3  action=start schedule={'8ECVSk179mjsjKRLWiQtssMLgp6EPhWXtaYyStWPSGAb': '2017-07-25T10:30:00.000000+00:00'} timeout=10 force=True{code} 2. Upgrade whole pool (upgrade should be scheduled to today, 2017-07-03. Upgrade of Node 2 should be scheduled to 10:10) {code:java} send POOL_UPGRADE name=upgrade-oz3 version=0.4.7 sha256=f6f2ea8f45d8a057c9566a33f99474da2e5c6a6604d736121650e2730c6fb0a3 action=start schedule={'Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv': '2017-07-03T10:05:00.000000+00:00', '8ECVSk179mjsjKRLWiQtssMLgp6EPhWXtaYyStWPSGAb': '2017-07-03T10:10:00.000000+00:00', 'DKVxG2fXXTU8yT5N7hGEbXB3dfdAnYv1JczDUHpmDxya': '2017-07-03T10:15:00.000000+00:00', '4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA': '2017-07-03T10:20:00.000000+00:00'} timeout=10{code}     *Findings:*  Case 1:  Similar situation as described in INDY-231. Pool was upgraded not in scheduled dates.  Case 2:  The behavior is incorrect. When the upgrade is scheduled twice, node was upgraded not on schedule.   *Summary:*  For both of cases behavior is incorrect. When the upgrade is scheduled twice, it happened not on schedule. This problem was described in INDY-382. It was moved to separated ticket because case described in INDY-231 is unclear (in INDY-231 not scheduled upgrade was happened after one POOL_UPGRADE command).  ></description> </Issue>
