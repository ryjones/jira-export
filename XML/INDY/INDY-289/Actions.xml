<Action id="26855" issue="18428" author="vladimirwork" type="comment" body="FYI  ~krw910 ,  ~stevetolman ,  ~danielhardman ,  ~ashcherbakov " created="2017-06-20 14:54:34.0" updateauthor="vladimirwork" updated="2017-06-20 14:54:34.0"/>
<Action id="26895" issue="18428" author="stevetolman" type="comment" body="Please retest once INDY-13 is fixed." created="2017-06-20 21:13:54.0" updateauthor="stevetolman" updated="2017-06-20 21:13:54.0"/>
<Action id="27815" issue="18428" author="vladimirwork" type="comment" body="Bug is reproducing during the pool upgrade from 0.4.7 to 0.4.9 with the same steps. New logs are in attachment.  ^Node1_log.txt    ^Node2_log.txt   !Screenshot.PNG|thumbnail! " created="2017-07-04 10:29:17.0" updateauthor="vladimirwork" updated="2017-07-04 10:29:17.0"/>
<Action id="27833" issue="18428" author="lovesh" type="comment" body=" ~VladimirWork  The logs are at INFO level, can you please enable the TRACE logs while testing? Also can you give the entire log, these logs are about 10 seconds." created="2017-07-04 14:17:19.0" updateauthor="lovesh" updated="2017-07-04 14:20:11.0"/>
<Action id="27862" issue="18428" author="vladimirwork" type="comment" body="Cannot reproduce during 0.4.8 -&gt; 0.4.9 pool upgrade with trace logs on. Additional investigation is needed." created="2017-07-05 11:37:26.0" updateauthor="vladimirwork" updated="2017-07-05 11:37:26.0"/>
<Action id="27928" issue="18428" author="vladimirwork" type="comment" body="Bug has been reproduced during 0.4.9 -&gt; 0.4.10 pool upgrade. Trace logs from all nodes are in attachment. Send NYM failed in 09:15 server time due to Node 4 disconnection for upgrade. !Screenshot.PNG|thumbnail!   ^Node1.zip    ^Node2.zip    ^Node3.zip    ^Node4.zip  " created="2017-07-06 09:48:30.0" updateauthor="vladimirwork" updated="2017-07-11 11:44:46.0"/>
<Action id="28072" issue="18428" author="lovesh" type="comment" body="The problem is that the a node that started up after upgrade did not receive sufficient PROPAGATEs to so it could not consider the requests finalised and hence was stuck. A solution is to consider requests finalised after receiving PRE-PREPARE and sufficient PREPAREs, but choose the requests with digests that satisfy the PRE-PREPARE (and PREPAREs). If request is not present then ask other nodes for it" created="2017-07-10 09:19:15.0" updateauthor="lovesh" updated="2017-07-10 09:19:15.0"/>
<Action id="28143" issue="18428" author="lovesh" type="comment" body="PR, https://github.com/hyperledger/indy-plenum/pull/269" created="2017-07-11 12:24:09.0" updateauthor="lovesh" updated="2017-07-11 12:24:09.0"/>
<Action id="28495" issue="18428" author="vladimirwork" type="comment" body=" ~lovesh  I can&apos;t break NYM adding due to this fix but I still can &quot;pause&quot; the NYM adding during 0.4.37 -&gt; 0.4.38 pool upgrade (see screenshot) and all NYMs are added after the last node upgrade is completed - is it allowable behavior? Trace logs are in attachment. !Screenshot.PNG|thumbnail!   ^_node1.txt    ^_node2.txt    ^_node3.txt    ^_node4.txt  " created="2017-07-17 13:46:00.0" updateauthor="vladimirwork" updated="2017-07-17 13:46:00.0"/>
<Action id="28706" issue="18428" author="vladimirwork" type="comment" created="2017-07-20 09:05:46.0" updateauthor="vladimirwork" updated="2017-07-20 09:05:46.0"> <body><! CDATA The initial bug is fixed but now we have some pauses in the NYM adding due to pool upgrade. Is it allowable behavior or not? Please see my comment above for additional info.  ></body> </Action>
<Action id="28754" issue="18428" author="danielhardman" type="comment" body="I&apos;m not sure. I wonder what  ~lovesh  and  ~ashcherbakov  and  ~mzk-vct  think. Please weigh in, and tell me why you arrived at that opinion." created="2017-07-20 21:58:54.0" updateauthor="danielhardman" updated="2017-07-20 21:58:54.0"/>
<Action id="28765" issue="18428" author="ashcherbakov" type="comment" created="2017-07-21 08:06:30.0" updateauthor="ashcherbakov" updated="2017-07-21 08:06:30.0"> <body><! CDATA  ~danielhardman   ~VladimirWork  I think this behaviour is OK for now. We should not have upgrades too often, and sending a NYM during Upgrade has just some inconvenience, it's working in general. I suggest we create a separate ticket for this issue with pausing and think later how we can fix it. I think this new issue should have rather minor priority (at least not High).  ></body> </Action>
