<Action id="54942" issue="36233" author="mgbailey" type="comment" created="2018-12-18 19:07:32.0" updateauthor="mgbailey" updated="2018-12-18 19:07:32.0"> <body><! CDATA The steward has verified that the proper permissions are set on /var/lib/indy/sandbox, so write access is not preventing the file from being created:  ls -l -d /var/lib/indy/sandbox drwxrwxr-x 4 indy indy 4096 Dec 14 20:04 /var/lib/indy/sandbox  ></body> </Action>
<Action id="55160" issue="36233" author="derashe" type="comment" created="2018-12-28 09:15:53.0" updateauthor="derashe" updated="2018-12-28 09:15:53.0"> <body><! CDATA  ~mgbailey  We've discovered strange error appeared: * Upgrade from 1.1.30 to 1.1.33 failed: Platform is not supported  That means that python script didn't recognize current platform as Ubuntu.  Can you, please, clarify with steward of this node, if there some unusual startup environment (docker, Debian probably)?  ></body> </Action>
<Action id="55507" issue="36233" author="mgbailey" type="comment" created="2019-01-10 17:22:07.0" updateauthor="mgbailey" updated="2019-01-10 17:22:07.0"> <body><! CDATA From the steward: {code:java} Our node is running on a dedicated server (bare-metal).   $ lsb_release -a  No LSB modules are available.  Distributor ID: Ubuntu  Description: Ubuntu 16.04.5 LTS  Release: 16.04  Codename: xenial {code} So the OS looks correct.  ~Derashe  Is it possible that the error is because it is running on a dedicated server instead of in a VM? This is our first steward that is doing this.  ></body> </Action>
<Action id="55508" issue="36233" author="derashe" type="comment" created="2019-01-10 17:38:12.0" updateauthor="derashe" updated="2019-01-10 17:39:29.0"> <body><! CDATA  ~mgbailey   Can this steward run python lines of code below on this dedicated server and provide us the output? h4. {{_import platform_}} h4. {{_platform.uname()_}}  ></body> </Action>
<Action id="55537" issue="36233" author="mgbailey" type="comment" created="2019-01-11 14:56:59.0" updateauthor="mgbailey" updated="2019-01-11 14:56:59.0"> <body><! CDATA  ~Derashe  Result from steward: {code:java} uname_result(system='Linux', node='sovrin-validator.twinpeek.net', release='4.9.132-xxxx-std-ipv6-64', version='#406590 SMP Wed Oct 10 08:31:23 UTC 2018', machine='x86_64', processor='x86_64') {code}  ></body> </Action>
<Action id="55546" issue="36233" author="derashe" type="comment" created="2019-01-11 16:14:18.0" updateauthor="derashe" updated="2019-01-11 16:14:18.0"> <body><! CDATA Ok, the problem is that python's platform.uname() can't identify this platform as Ubuntu. We've replaced it with a modern _distro_ util. We will push it to the master. It would be also very nice, if this steward install _distro_ and provide us the output of code below, so we can be sure, that this will work.  In console: h4.  _pip install distro_  Python scipt: h4. _distro.linux_distribution()_  PR: https://github.com/hyperledger/indy-node/pull/1121  ></body> </Action>
<Action id="55601" issue="36233" author="derashe" type="comment" created="2019-01-14 11:43:33.0" updateauthor="derashe" updated="2019-01-14 11:43:33.0"> <body><! CDATA Rec for QA:  * Set up pool * Send and perform upgrade txn  ></body> </Action>
<Action id="55615" issue="36233" author="mgbailey" type="comment" created="2019-01-14 15:14:43.0" updateauthor="mgbailey" updated="2019-01-14 15:14:43.0"> <body><! CDATA  ~Derashe  here is the result on NodeTwinPeek:  >>> distro.linux_distribution()  ('Ubuntu', '16.04', 'Xenial Xerus')     ></body> </Action>
<Action id="55617" issue="36233" author="derashe" type="comment" body=" ~mgbailey  Perfect! That means our fix will work for this steward." created="2019-01-14 15:21:34.0" updateauthor="derashe" updated="2019-01-14 15:21:34.0"/>
<Action id="55668" issue="36233" author="vladimirwork" type="comment" created="2019-01-15 11:00:24.0" updateauthor="vladimirwork" updated="2019-01-15 11:00:24.0"> <body><! CDATA Build Info: 1.6.755  Steps to Reproduce: 1. Run upgrade from 1.6.755 to 1.6.756 against 4 nodes docker pool. 2. Check upgrade results and journalctl.  Actual Results: It looks like distro package broke upgrading: {noformat} Jan 15 10:20:16 e83cd99f5e18 env 63 :  indy-node : Depends: distro (= 1.3.0) but it is not installable Jan 15 10:20:16 e83cd99f5e18 env 63 : E: Unable to correct problems, you have held broken packages. Jan 15 10:20:16 e83cd99f5e18 env 63 : + ret=100 Jan 15 10:20:16 e83cd99f5e18 env 63 : + ' ' 100 -ne 0 ' ' Jan 15 10:20:16 e83cd99f5e18 env 63 : + echo 'Failed to obtain libindy-crypto=0.4.5 python3-indy-crypto=0.4.5 indy- Jan 15 10:20:16 e83cd99f5e18 env 63 : Failed to obtain libindy-crypto=0.4.5 python3-indy-crypto=0.4.5 indy-plenum=1 Jan 15 10:20:16 e83cd99f5e18 env 63 : + exit 1 Jan 15 10:20:16 e83cd99f5e18 env 63 : Upgrade from 1.6.755 to 1.6.756 failed {noformat}  Expected Results: Upgrade should perform normally.  ></body> </Action>
<Action id="55673" issue="36233" author="derashe" type="comment" created="2019-01-15 13:16:29.0" updateauthor="derashe" updated="2019-01-16 07:41:03.0"> <body><! CDATA Fixed in PR:  https://github.com/hyperledger/indy-node/pull/1126   Use indy-node 1.6.757 master  ></body> </Action>
<Action id="55712" issue="36233" author="vladimirwork" type="comment" created="2019-01-16 12:34:00.0" updateauthor="vladimirwork" updated="2019-01-16 12:34:00.0"> <body><! CDATA Build Info: indy-node 1.6.757  Steps to Validate: 1. Install indy-node 1.6.757. 2. Upgrade 1.6.757 to 1.6.758 (version with distro -> version with distro). 3. Install indy-node 1.6.750. 4. Upgrade 1.6.750 to 1.6.757 (version without distro -> version with distro).  Actual Results: Installation and both upgrades works normally.  ></body> </Action>
