<Action id="54396" issue="35902" author="mgbailey" type="comment" body="It is possible that the issue is not consensus, but rather that the nodes themselves rejected the instruction because they were in &quot;view change&quot;. But this is unacceptable as well. I am attaching a file with the output of the attempt to post the transaction to TestNet:  ^pool_restart.txt " created="2018-12-05 21:28:35.0" updateauthor="mgbailey" updated="2018-12-05 21:28:35.0"/>
<Action id="54407" issue="35902" author="ashcherbakov" type="comment" body="Yes, we need to accept PoolRestart in any state, and being able to do it even during the view change." created="2018-12-06 07:01:44.0" updateauthor="ashcherbakov" updated="2018-12-06 07:01:44.0"/>
<Action id="54595" issue="35902" author="toktar" type="comment" created="2018-12-10 15:42:19.0" updateauthor="toktar" updated="2018-12-11 07:46:10.0"> <body><! CDATA Problem reason: - All client requests are discarded in a View change process. In a long View change when something broke, we should have able to restart pool, upgrade pool and receive replies for read transactions requests.  Changes: - Allow processing of query requests, get transaction requests, action requests (restart pool, validator info) and force upgrade requests.  PR: *  https://github.com/hyperledger/indy-plenum/pull/1021  *  https://github.com/hyperledger/indy-plenum/pull/1016  *  https://github.com/hyperledger/indy-node/pull/1081   Version: * indy-node 1.6.728 -master * indy-plenum 1.6.631 -master  Risk factors: - In view change requests that need a quorum will processed - In view change requests that not need a quorum will not processed  Risk: - Medium  Covered with tests: *  test_force_upgrade_process_in_view_change.py|https://github.com/hyperledger/indy-node/pull/1081/files#diff-6e1c3461db8df1fbe38b55bb0b788139  * test_pool_restart_in_view_change * test_client_read_request_not_discard_in_view_change_with_dict * test_client_write_request_discard_in_view_change_with_dict * test_client_get_request_not_discard_in_view_change_with_dict * test_client_msg_discard_in_view_change_with_request  Recommendations for QA: * Check replies for different requests types  in a view change process. For example, start load test on a docker pool (4 nodes will be enough) with get, query, writes requests and force view change every 1 or 2 minute. Write requests should be nacked in view change, other should work correctly * For a long view change disconnect first (f - 2) nodes.  Send request with POOL_RESTART, POOL_UPGRADE, VALIDATOR_INFO in view change. All requests should  work correctly.    ></body> </Action>
<Action id="54670" issue="35902" author="vladimirwork" type="comment" created="2018-12-11 14:53:37.0" updateauthor="vladimirwork" updated="2018-12-11 14:53:37.0"> <body><! CDATA Build Info: indy-node 1.6.728  Steps to Validate: 1. Check replies for different requests types in a view change process. 2. For a long view change disconnect first (f - 2) nodes. 3. Send request with POOL_RESTART, POOL_UPGRADE, VALIDATOR_INFO in view change.  Actual Results: There are no REQNACK get requests during VC in progress and write requests return REQNACK or REJECT at the same time. POOL_RESTART, POOL_UPGRADE, VALIDATOR_INFO work during VC in progress.  ></body> </Action>
