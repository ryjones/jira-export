<Issue id="26132" key="INDY-1047" number="1047" project="10303" reporter="vladimirwork" creator="vladimirwork" type="10004" summary="Nodes write duplicated txns in domain ledger" priority="3" resolution="10001" status="10001" created="2017-12-18 10:22:28.0" updated="2019-03-29 20:35:42.0" resolutiondate="2019-03-29 20:35:42.0" votes="0" watches="3" workflowId="26132"> <description><! CDATA Overview: Nodes write duplicated txns in domain ledger due to primary node disconnection.  Build Info: indy-node 1.2.242  Steps to Reproduce: 1. Install pool of 4 nodes. 2. Stop the 4th node -> send two NYMs -> start the 4th node. 3. Stop the 3rd node -> send two NYMs -> start the 3rd node. 4. Stop the 2nd node -> send two NYMs -> start the 2nd node. 5. Send one more NYM to prove that pool works after all nodes are online. 6. Check the domain ledger (there are no duplicated entries now). 7. Stop the 1st node (primary) -> send two NYMs -> start the 1st node. 8. Check the domain ledger (there are 2 copies in ledger now). 9. Stop the 2nd node (primary) -> send two NYMs -> start the 2nd node. 10. Check the domain ledger (there are another 2 copies in ledger now, total incorrect entries count is 4).  Actual Results: There are duplicated entries in domain ledger after Step 6 (17th and 18th entries) and Step 8 (21st and 22nd entries):  bq.  10,{"dest":"542MVr22zcHbVyGzaXmbT1","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513587806654444,"signature":"XF8BLcAR8hyFHmKmuT83vCxnqx4LMVJiRibRmFfU66mssWSxTDW71RwnNGUzCRxmU9ztRbG5QVdwtyxw7t9d7xs","signatures":null,"txnTime":1513587806,"type":"1"}  bq.  11,{"dest":"542MVr22zcHbVyGzaXmbT2","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513587816791437,"signature":"2dwAdkc1ZzLdvNa1ijnert7o4paPptxsb3itvxQ2B1XMHHYVhZrZQDgzSPi8czyUjAiv4FZwSGC41jCmzyi5YPWm","signatures":null,"txnTime":1513587816,"type":"1"}  bq.  12,{"dest":"542MVr22zcHbVyGzaXmbT3","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513587891520062,"signature":"5NBJ2kakB94XNsHbvWr99tFNdrE32HgpEwq9Rm5NCCf8AqZPdb3eW8DUGnrYod1u4Px6hWaexCpJp3UQCSEnamgq","signatures":null,"txnTime":1513587891,"type":"1"}  bq.  13,{"dest":"542MVr22zcHbVyGzaXmbT4","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513587896717719,"signature":"2juhEkJgSbEEVkUzgrjMoBC7D4AVbvuPp6xSTqJ9vX8TNWF17XFVHFpSoN5vTzaQZihNRNaa569fL847xXrSd2gy","signatures":null,"txnTime":1513587896,"type":"1"}  bq.  14,{"dest":"542MVr22zcHbVyGzaXmbT5","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513587961287460,"signature":"55dkV1wX9BkNAERff1nGEnDRMVooXrP4wXhiMAv5LaJbUjgcMHMvff3DHVEz25tYL2RuAoShwprNbj3xLaAHiPhP","signatures":null,"txnTime":1513587961,"type":"1"}  bq.  15,{"dest":"542MVr22zcHbVyGzaXmbT6","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513587970341952,"signature":"4zoVKp7rtQWp42ueNz13GsRkHewSPtpPKUZwz1hP9JSwDY86bez7LxmejAw595uncSBYAtCReiVTyUbnHTVEhKVV","signatures":null,"txnTime":1513587970,"type":"1"}  bq.  16,{"dest":"542MVr22zcHbVyGzaXmbT7","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513588002055730,"signature":"5NDPnug9SeDKFZYZATi1YnmQnS1x74anyesm8oCuXBy5gCTzDi5aPPKv3NHZpseEUPxRHQ3C3QpDa6F6kZdxT1RV","signatures":null,"txnTime":1513588002,"type":"1"}  bq.  17,{"dest":"542MVr22zcHbVyGzaXmbT6","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513587970341952,"signature":"4zoVKp7rtQWp42ueNz13GsRkHewSPtpPKUZwz1hP9JSwDY86bez7LxmejAw595uncSBYAtCReiVTyUbnHTVEhKVV","signatures":null,"txnTime":1513588246,"type":"1"}  bq.  18,{"dest":"542MVr22zcHbVyGzaXmbT5","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513587961287460,"signature":"55dkV1wX9BkNAERff1nGEnDRMVooXrP4wXhiMAv5LaJbUjgcMHMvff3DHVEz25tYL2RuAoShwprNbj3xLaAHiPhP","signatures":null,"txnTime":1513588246,"type":"1"}  bq.  19,{"dest":"542MVr22zcHbVyGzaXmbT8","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513588275511311,"signature":"4sSAy95wERSvD3MnrtcRDJPQMbZHU52QACCJjgw8eJzhu5LVgCtvTFKWcTWY2oUpmSW79uETDdzFmqowHS63a1BR","signatures":null,"txnTime":1513588275,"type":"1"}  bq.  20,{"dest":"542MVr22zcHbVyGzaXmbT9","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513588278446878,"signature":"3pChMCk7CT91F19H68ci3n8jLq59UnzmFGGLdab3kWKrTAcw7TH7pTQoWVFCQU6Ch2dXvVxAqs9vHJckyhwprXLb","signatures":null,"txnTime":1513588278,"type":"1"}  bq.  21,{"dest":"542MVr22zcHbVyGzaXmbT1","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513587806654444,"signature":"XF8BLcAR8hyFHmKmuT83vCxnqx4LMVJiRibRmFfU66mssWSxTDW71RwnNGUzCRxmU9ztRbG5QVdwtyxw7t9d7xs","signatures":null,"txnTime":1513588474,"type":"1"}  bq.  22,{"dest":"542MVr22zcHbVyGzaXmbT2","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513587816791437,"signature":"2dwAdkc1ZzLdvNa1ijnert7o4paPptxsb3itvxQ2B1XMHHYVhZrZQDgzSPi8czyUjAiv4FZwSGC41jCmzyi5YPWm","signatures":null,"txnTime":1513588474,"type":"1"}  bq.  23,{"dest":"542MVr22zcHbVyGzaXmb88","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513588500569414,"signature":"2VdVRpGbNE5svubpwbF5mj7CvH1v3Q4756Gp8HJL4ksTMmVKxFKANm69EURrbQujt7xLaVqM6EtjKE4SSgY9jLy1","signatures":null,"txnTime":1513588500,"type":"1"}  bq.  24,{"dest":"542MVr22zcHbVyGzaXmb99","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513588502898016,"signature":"3581rf1fq6fu1mHh6j1tQWbTV2bZocKhyioDHhoa1Kk4PwVkx4aGH1PvmBdWwv6zhjut7AuthDLhbz58uoH7dFxL","signatures":null,"txnTime":1513588502,"type":"1"}  bq.  25,{"dest":"542MVr22zcHbVyGzaXm888","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513588630115778,"signature":"2ZPtUm6TcthAW1ymbFHh68HVcryQbEuyQQtbxPUDBYapqn9mVAhimNVcrYQza3LiDkMqTEYPXGZRi3r8wWy5cADU","signatures":null,"txnTime":1513588630,"type":"1"}  bq.  26,{"dest":"542MVr22zcHbVyGzaXm999","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513588648939221,"signature":"2BsR5DvexXYtrVsxQgo5TQPBLHoNDzVz1GHYiB69QQF38B8F5patejpUPrGEHNqmbnbLLm2yfhtQSmQULdRexeVK","signatures":null,"txnTime":1513588648,"type":"1"}  bq.  27,{"dest":"542MVr22zcHbVyGzaXm111","identifier":"V4SGRU86Z58d6TV7PBUe6f","reqId":1513588734955980,"signature":"4eRMaYjULxXy836HTAbYJVzE5EcfrBmcGiidhLhHY5Piyd8J1kGopFemr8s44MkgNMFRuhofFF9vxZug3qn1wRvJ","signatures":null,"txnTime":1513588734,"type":"1"}   Expected Results: There should be no spontaneous duplicated entries in ledger.  ></description> </Issue>
