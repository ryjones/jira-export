<Issue id="32868" key="INDY-1599" number="1599" project="10303" reporter="ashcherbakov" assignee="vladimirwork" creator="ashcherbakov" type="10002" summary="Use average latency for all clients when check the latency for View Change triggering" priority="3" resolution="10000" status="10001" created="2018-08-16 10:58:59.0" updated="2019-03-29 20:32:50.0" resolutiondate="2019-03-29 20:32:50.0" votes="0" watches="3" workflowId="44110"> <description><! CDATA As of now, Monitor tracks latency for every client independently. This may make it more sensitive for triggering View Change, but on the other hand it means that * It means that we have a to have a huge map (if we have 1,000,000 clients, then it will take about 1GB of memory). * We clean the map only after view change * We are too sensitive to spikes for 1 client only.  Let's keep track of the average (for all clients) latency only.  *Acceptance criteria:* * Move monitoring of latency into a strategy * Move existing calculation of latency per client into a strategy * Create a new strategy for calculation of average latency for all clients ** As we use moving average, we can just take into account latencies for all reqs from all clients within the window * Use the new strategy by default * Write unit tests        ></description> </Issue>
