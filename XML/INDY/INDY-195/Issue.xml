<Issue id="17738" key="INDY-195" number="195" project="10303" reporter="krw910" assignee="danielhardman" creator="krw910" type="10004" summary="Service crashed after running under various bad network conditions." priority="2" resolution="10000" status="10001" created="2017-06-10 23:49:17.0" updated="2019-03-29 20:32:50.0" resolutiondate="2019-03-29 20:32:50.0" votes="0" watches="1" workflowId="17742"> <description><! CDATA This one will be difficult to reproduce. I am including some of the logs to point in the right direction.  *Attachment is shows the service crash on Node 3*  *--Further testing shows this seems to only happen if you are shutting down the sovrin-node service and starting it up again after a few minutes. This does not happen with loss of connection like the ports are shut off. This was done to simulate brown outs or temporary loss of connection.*  I was doing various bad network condition testing. I had been running using traffic_shaper.sh to simulate 20% dropped packets. All 7 nodes were running with 20% dropped packets.  I used load_test.py to simulated 2 clients sending 200 NYM transactions each one at a time. # While that script was running I launched the CLI and added one NYM manually. # The nodes all disconnected in the CLI and reconnected and then the NYM was added. #  # I then stopped the sovrin-node service just on Node 6 while the script to add NYMs was still running. # One minute later I started the sovrin-node service on Node 6. # About 10 minutes later I stopped running the traffic_shaper.sh on all the nodes while still running the load script. # Two nodes were out of sync at this time Nodes 3 and 5. # I stopped running the load script and checked the services on Nodes 3 and 5 to find they had crashed.  *Fix* {color:#14892c}I restarted the sovrin-node service on Nodes 3 and 5 and they got in sync with the pool. {color} {color:#d04437}I was not able to add any new transactions at this point.{color} {color:#14892c}I restarted all the nodes in the pool and the pool was functional again.{color}  ></description> </Issue>
