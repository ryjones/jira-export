<Issue id="18348" key="INDY-266" number="266" project="10303" reporter="krw910" assignee="krw910" creator="krw910" type="10002" summary="Get the primary node to change to a lagged or dead node in succession" priority="3" resolution="10000" status="10001" created="2017-06-19 22:02:25.0" updated="2019-03-29 20:33:21.0" resolutiondate="2019-03-29 20:33:21.0" votes="0" watches="1" workflowId="18353"> <description><! CDATA Primary changing to a very lagged node, or a dead node or dead nodes in succession.:  *Things tried:* Case 1: view change during high load of CPU. When the primary node is overloaded, but there is no activity in the pool, view change does not happen. View change happens only when the pool processes some transactions. When view change happens and there are not overloaded nodes, one of them will be selected as new primary. If all nodes of the pool are overloaded, primary node is selected as usual.  Case 2: view change when some nodes have load by TCP protocol. Load by TCP protocol affects performance of the pool less than CPU load, but results are the same as for CPU load.  Case 3: primary changing to a dead node. Primary changing to a dead node is impossible by design. This case was additionally tested and changing primary to a dead node is impossible in current implementation.  *Findings:* The main thing which was noticed during exploration of this question is that node with average performance (which accords to performance of main part of nodes) will be preferable than the node with the best performance (e.g. when all nodes are slow, the only fast node will not be selected as primary).  *Additional Information:* Despite on this research, the logic of primary selection (and especially performance estimation) is still unclear. Probably it make sense to perform so,e research of performance estimation and check that it works correctly.  ></description> </Issue>
