<Issue id="18690" key="INDY-335" number="335" project="10303" reporter="andrey.goncharov" assignee="danielhardman" creator="stevetolman" type="10001" summary="Implement: A node should start catchup process if its ledger gets out of sync" priority="3" resolution="10000" status="10001" created="2017-06-26 20:58:39.0" updated="2019-03-29 20:34:51.0" resolutiondate="2019-03-29 20:34:51.0" votes="0" watches="4" timeoriginalestimate="97200" timeestimate="97200" workflowId="18690"> <description><! CDATA A node's ledger might get out of sync for different reasons (say, write to db failed), thus it will be lagging behind and will not be able to process newer PRE-PREPAREs, PREPAREs and COMMITs.    This needs to be fixed, we have CHECKPOINT in the code which is sent periodically, as of now it only helps in garbage collection. It should be used as opportunity to start a catch up process node come to a start where it can start processing new requests again.  Alternatively we can find specific places in the code where we discard messages, check for discard reason and start catch up if the reason is unsynced ledger.      The design|https://docs.google.com/document/d/1OCUsD46HLhqhqZBJmn5wLZ2gTS1mcu6CQszoAh1gUA0/edit#heading=h.oqftj4wkhga5 .     WARNING: If we bind to discards the protocol might get way too chatty. Discussion with Daniel and Jason is required!     ></description> </Issue>
