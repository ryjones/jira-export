<Issue id="35158" key="INDY-1820" number="1820" project="10303" reporter="zhigunenko.dsr" assignee="zhigunenko.dsr" creator="zhigunenko.dsr" type="10004" summary="Node service stops during node key validation" priority="3" resolution="10000" status="10001" created="2018-11-07 08:50:04.0" updated="2019-03-29 20:33:35.0" resolutiondate="2019-03-29 20:33:35.0" votes="0" watches="2" workflowId="46597"> <description><! CDATA *Environment:* indy-node 1.6.78 (stable) sovrin 1.1.30 (stable)  *Steps to Reproduce:* 1) Prepare pool with 4 Nodes only 2) Send transaction for node adding 3) Demote new nonexistent node  *Actual Results:* All nodes stop their services with error {code:java} Nov 07 07:45:08 1c31f9a17571 env 7897 :   File "/usr/local/lib/python3.5/dist-packages/stp_core/network/keep_in_touch.py", line 45, in serviceLifecycle Nov 07 07:45:08 1c31f9a17571 env 7897 :     self.maintainConnections() Nov 07 07:45:08 1c31f9a17571 env 7897 :   File "/usr/local/lib/python3.5/dist-packages/stp_zmq/kit_zstack.py", line 64, in maintainConnections Nov 07 07:45:08 1c31f9a17571 env 7897 :     missing = self.connectToMissing() Nov 07 07:45:08 1c31f9a17571 env 7897 :   File "/usr/local/lib/python3.5/dist-packages/stp_zmq/kit_zstack.py", line 120, in connectToMissing Nov 07 07:45:08 1c31f9a17571 env 7897 :     self.connect(name, ha=self.registry name ) Nov 07 07:45:08 1c31f9a17571 env 7897 :   File "/usr/local/lib/python3.5/dist-packages/stp_zmq/zstack.py", line 599, in connect Nov 07 07:45:08 1c31f9a17571 env 7897 :     publicKeyRaw) if publicKeyRaw else self.getPublicKey(name) Nov 07 07:45:08 1c31f9a17571 env 7897 :   File "/usr/local/lib/python3.5/dist-packages/stp_zmq/zstack.py", line 892, in getPublicKey Nov 07 07:45:08 1c31f9a17571 env 7897 :     raise PublicKeyNotFoundOnDisk(self.name, name) Nov 07 07:45:08 1c31f9a17571 env 7897 : stp_core.network.exceptions.PublicKeyNotFoundOnDisk: Node2 could not get Node8's public key from disk. Make sure the keys are initialized for this r Nov 07 07:45:08 1c31f9a17571 systemd 1 : indy-node.service: Main process exited, code=exited, status=1/FAILURE Nov 07 07:45:08 1c31f9a17571 systemd 1 : indy-node.service: Unit entered failed state. Nov 07 07:45:08 1c31f9a17571 systemd 1 : indy-node.service: Failed with result 'exit-code'. Nov 07 07:45:18 1c31f9a17571 systemd 1 : indy-node.service: Service hold-off time over, scheduling restart. Nov 07 07:45:18 1c31f9a17571 systemd 1 : Stopped Indy Node. {code}  *Additional Info:* Logs, ledgers and journalctl here   ^INDY-1820.tar.gz    ></description> </Issue>
