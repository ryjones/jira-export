<Issue id="33283" key="INDY-1651" number="1651" project="10303" reporter="ashcherbakov" creator="ashcherbakov" type="10002" summary="Support Incremental creation of 3PC batches" priority="3" status="10200" created="2018-08-28 12:48:26.0" updated="2019-02-13 13:02:51.0" votes="0" watches="1" workflowId="44553"> <description><! CDATA As of now each PrePrepare defines 1 3PC batch. Ordering each batch requires sending and processing lots of 3PC messages, so the more requests we put into batch, the better throughput we achieve (theoretically). Unfortunatelly now dynamic validation is performed when PrePrepare is created or received, which means that we need to perform dynamic validation of all requests in a batch at once, and for batches consisting of 1000s requests it means pause of tens seconds during which node is not responsive. Furthermore, this validation takes place on primary replica, and only after it is finished here it can start on non-primary.  Proposed solution is to allow multiple PrePrepares define 1 3PC batch,Â  so that validation of each PrePrepare is relatively fast and can overlap between primary and non-primary nodes reducing total latency. This will allow much bigger batches which in turn can significantly reduce workload per request, leading to higher throughput.  ></description> </Issue>
