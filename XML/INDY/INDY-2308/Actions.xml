<Action id="66222" issue="43489" author="toktar" type="comment" created="2019-12-11 12:35:07.0" updateauthor="toktar" updated="2019-12-12 12:35:42.0"> <body><! CDATA PoA: * Write an integration test:  *  ** make 2 view changes (current view_no=2) ** delay NewView messages on  Node1, 2, 3, 4  (nv_delay()) ** promote new Node5 (send_and_check the transaction) ** start Node5 ** delay commits on all nodes(Node1, 2, 3, 4, 5) (node.nodeIbStasher.delay(cDelay())) ** reset delay for NewView ** wait for a view change (2->3) ** promote new Node6  (send, not check the transaction) ** start Node6, wait for a catchup ** reset delays for commits ** wait for a view change (3->4) (Node5 a new primary) ** check that view change finished on all nodes ** check that all nodes can write * Add a fix. If a node receive NewView from non-primary node, ask all nodes for a NewView. If the lagging node have a quorum (f+1) of NewView messages, ** finish a view change  ** start a catchup ( ? )  ></body> </Action>
<Action id="66278" issue="43489" author="donqui" type="comment" created="2019-12-16 20:07:12.0" updateauthor="donqui" updated="2019-12-16 20:07:20.0"> <body><! CDATA Fork that contains a test that potentially tests this exact issue:  https://github.com/donqui/indy-plenum/tree/feature/INDY_2308  plenum/test/view_change/test_nemanja.py  ></body> </Action>
<Action id="66735" issue="43489" author="ashcherbakov" type="comment" body="Validation will be done in the scope of INDY-2326" created="2020-01-17 13:10:09.0" updateauthor="ashcherbakov" updated="2020-01-17 13:10:38.0"/>
