<Issue id="20467" key="INDY-786" number="786" project="10303" reporter="ozheregelya" assignee="danielhardman" creator="ozheregelya" type="10004" summary="Pool is still writing transactions when more than F nodes are stopped" priority="2" resolution="10000" status="10001" created="2017-08-28 16:33:04.0" updated="2019-03-29 20:32:38.0" resolutiondate="2019-03-29 20:32:38.0" votes="0" watches="2" workflowId="20469"> <description><! CDATA Steps to Reproduce: 1. Set up pool of 4 nodes. (f=1) 2. Add 2 more nodes to the pool. (n=6, f=1) 3. Send transactions to make sure that pool works. 4. Stop services on Node 6, send transaction. => transaction is written, it is ok. 5. Stop services on Node 5, send transaction. => transaction is written, but is should not (because there are less than n-f nodes are in pool). 6. Stop services on Node 4, send transaction. => transaction is written, but is should not. 7. Stop services on Node 3, send transaction. => transaction is not written.  Actual Results: Pool is still writing transactions when more than F nodes are stopped.  Expected Results: Pool should stop writing transactions after step 5.  Additional Information: After promotion of all nodes pool is working. The problem doesn't reproduce on the same pool after starting of stopped nodes.  Here is output of CLI: {code:java} sovrin@test> new key with seed 000000000000000000000000Trustee1 Key created in wallet Default DID for key is V4SGRU86Z58d6TV7PBUe6f Verification key is ~CoRER63DVYnWZtK8uAzNbx Current DID set to V4SGRU86Z58d6TV7PBUe6f sovrin@test> send NYM dest=V4SGRU86Z58d6TV7PBUe11 Adding nym V4SGRU86Z58d6TV7PBUe11 Nym V4SGRU86Z58d6TV7PBUe11 added CONNECTION: EkUTN5MQk7HKy6YNZfDAAD7iP3b5bb72XUd1YkJYmSUV disconnected from Node5C sovrin@test> send NYM dest=V4SGRU86Z58d6TV7PBUe12 Adding nym V4SGRU86Z58d6TV7PBUe12 Nym V4SGRU86Z58d6TV7PBUe12 added CONNECTION: EkUTN5MQk7HKy6YNZfDAAD7iP3b5bb72XUd1YkJYmSUV disconnected from Node6C sovrin@test> send NYM dest=V4SGRU86Z58d6TV7PBUe13 Adding nym V4SGRU86Z58d6TV7PBUe13 Nym V4SGRU86Z58d6TV7PBUe13 added sovrin@test> send NYM dest=V4SGRU86Z58d6TV7PBUe13 Adding nym V4SGRU86Z58d6TV7PBUe13 Nym V4SGRU86Z58d6TV7PBUe13 added sovrin@test> send NYM dest=V4SGRU86Z58d6TV7PBUe14 Adding nym V4SGRU86Z58d6TV7PBUe14 Nym V4SGRU86Z58d6TV7PBUe14 added CONNECTION: EkUTN5MQk7HKy6YNZfDAAD7iP3b5bb72XUd1YkJYmSUV disconnected from Node4C sovrin@test> send NYM dest=V4SGRU86Z58d6TV7PBUe15 Adding nym V4SGRU86Z58d6TV7PBUe15 Nym V4SGRU86Z58d6TV7PBUe15 added sovrin@test> send NYM dest=V4SGRU86Z58d6TV7PBUe25 Adding nym V4SGRU86Z58d6TV7PBUe25 Nym V4SGRU86Z58d6TV7PBUe25 added sovrin@test> send NYM dest=V4SGRU86Z58d6TV7PBU123 Adding nym V4SGRU86Z58d6TV7PBU123 Nym V4SGRU86Z58d6TV7PBU123 added CONNECTION: EkUTN5MQk7HKy6YNZfDAAD7iP3b5bb72XUd1YkJYmSUV disconnected from Node3C sovrin@test> send NYM dest=V4SGRU86Z58d6TV7PBU124 Adding nym V4SGRU86Z58d6TV7PBU124 CONNECTION: EkUTN5MQk7HKy6YNZfDAAD7iP3b5bb72XUd1YkJYmSUV now connected to Node3C sovrin@test> send NYM dest=V4SGRU86Z58d6TV7PBU125 Adding nym V4SGRU86Z58d6TV7PBU125 sovrin@test> send NYM dest=V4SGRU86Z58d6TV7PBU125 Adding nym V4SGRU86Z58d6TV7PBU125 CONNECTION: EkUTN5MQk7HKy6YNZfDAAD7iP3b5bb72XUd1YkJYmSUV now connected to Node4C sovrin@test> send NYM dest=V4SGRU86Z58d6TV7PBU125 Adding nym V4SGRU86Z58d6TV7PBU125 CONNECTION: EkUTN5MQk7HKy6YNZfDAAD7iP3b5bb72XUd1YkJYmSUV now connected to Node5C sovrin@test> send NYM dest=V4SGRU86Z58d6TV7PBU126 Adding nym V4SGRU86Z58d6TV7PBU126 sovrin@test> send NYM dest=V4SGRU86Z58d6TV7PBU127 Adding nym V4SGRU86Z58d6TV7PBU127 CONNECTION: EkUTN5MQk7HKy6YNZfDAAD7iP3b5bb72XUd1YkJYmSUV now connected to Node6C Nym V4SGRU86Z58d6TV7PBU126 added Nym V4SGRU86Z58d6TV7PBU124 added Nym V4SGRU86Z58d6TV7PBU127 added Nym V4SGRU86Z58d6TV7PBU125 added Nym V4SGRU86Z58d6TV7PBU125 added Nym V4SGRU86Z58d6TV7PBU125 added{code}  ></description> </Issue>
