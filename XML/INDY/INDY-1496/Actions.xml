<Action id="47601" issue="32056" author="sergey-shilov" type="comment" created="2018-07-20 15:56:39.0" updateauthor="sergey-shilov" updated="2018-07-21 11:10:41.0"> <body><! CDATA *Problem state / reason:*  Connections tracking and client stack restart are disabled by default. They need to be enabled by default.  Also see: https://jira.hyperledger.org/browse/INDY-1431?focusedCommentId=47234&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-47234  *Changes:*  Enabled connections tracking (_TRACK_CONNECTED_CLIENTS_NUM_ENABLED = True_) and client stack restart (_CLIENT_STACK_RESTART_ENABLED_ _= True_).  Also see: https://jira.hyperledger.org/browse/INDY-1431?focusedCommentId=47234&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-47234  *Committed into:*       https://github.com/hyperledger/indy-plenum/pull/830       https://github.com/hyperledger/indy-node/pull/836      indy-node 1.5.516-master  *Risk factors:*      Clients may not receive their replies.  *Risk:*      Medium  *Recommendations for QA:*  Continue load testing with enabled by default connections tracking and client stack restart.  ></body> </Action>
<Action id="48072" issue="32056" author="vladimirwork" type="comment" created="2018-07-28 14:39:12.0" updateauthor="vladimirwork" updated="2018-07-30 15:56:12.0"> <body><! CDATA Build Info: indy-node 1.5.526  Steps to Validate: 1. Run continuous load testing below and above client connections limit. 2. Check node logs and load test results.  Actual Results: 1. Node tracks client connections and restarts client stack after installation by default. 2. Pool works normally below client connections limit. 3. Amount of sent txns is always equal to succeeded + failed (due to PoolLedgerTimeout response) above client connections limit. 4. Amount of failed txns with enabled client stask restart case is less or equal to not enabled case: {noformat} limit: 10 load: 10 x 10 each 2 seconds (~30 peak clients amount) on | Server Time: 2025 Sent: 24590 Succ: 24495 Failed: 95 Nacked: 0 Rejected: 0 off | Server Time: 2358 Sent: 26529 Succ: 26428 Failed: 101 Nacked: 0 Rejected: 0  limit: 10 load: 15 x 10 each 2 seconds (~50 peak clients amount) on | Server Time: 1481 Sent: 17443 Succ: 15825 Failed: 1618 Nacked: 0 Rejected: 0 off | Server Time: 1360 Sent: 21946 Succ: 17561 Failed: 4385 Nacked: 0 Rejected: 0 {noformat}     ></body> </Action>
