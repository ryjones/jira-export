<Action id="53419" issue="34852" author="vladimirwork" type="comment" created="2018-11-14 09:48:09.0" updateauthor="vladimirwork" updated="2018-11-16 11:00:44.0"> <body><! CDATA Test run 1 (10 writes/sec / indy-node 1.6.648): !1770_10w_node5.PNG|thumbnail!  !1770_10w_node15.PNG|thumbnail!   Test run 2 (100 writes/sec / indy-node 1.6.673): !1770_100w_node1.PNG|thumbnail!  !1770_100w_node25.PNG|thumbnail!  Logs and metrics: ev@evernymr33:logs/1770_12_11_2018_metrics.tar.gz ev@evernymr33:logs/1770_12_11_2018.tar.gz  Test run 3 (10 writes/sec + 100 reads / indy-node 1.6.673): !1770_10w_100r_node1.PNG|thumbnail!  !1770_10w_100r_node13.PNG|thumbnail!  !1770_10w_100r_node25.PNG|thumbnail!  Logs and metrics: ev@evernymr33:logs/1770_13_11_2018_10_100.7z  Test run 4 (100 writes/sec + 1000 reads / indy-node 1.6.673): !1770_100w_1000r_node1.PNG|thumbnail!  !1770_100w_1000r_node13.PNG|thumbnail!  !1770_100w_1000r_node25.PNG|thumbnail!  Logs and metrics: ev@evernymr33:logs/1770_14_11_2018_100_1000.7z Clients output: ev@evernymr33:logs/client_output_reads_1770_100_1000_case.tar.gz ev@evernymr33:logs/client_output_writes_1770_100_1000_case.tar.gz  ></body> </Action>
<Action id="53490" issue="34852" author="anikitindsr" type="comment" body="After small investigation of logs from the last load_test launching (1770_14_11_2018_100_1000.7z) was noticed, that there are a lot of errors, which described in INDY-1849 (2600), that means that all of this batches was discarded. Before giving some recommendation to stewards about connection&apos;s limitation i propose, that we should retest this situation when hot fix of INDY-1849 wuold be added into plenum&apos;s part." created="2018-11-15 13:31:16.0" updateauthor="anikitindsr" updated="2018-11-15 13:31:16.0"/>
<Action id="53533" issue="34852" author="anikitindsr" type="comment" created="2018-11-16 12:53:26.0" updateauthor="anikitindsr" updated="2018-11-19 07:17:54.0"> <body><! CDATA As i can see in client's output (client_output_reads_1770_100_1000_case) we had 3843 rejected requests by "Client request is discarded since view change is in progress" reason, 1 request had a "Pool Ledger timeout" and other requests (494842) was successfully read and returned a REPLY to client.   Also about write requests: It was a 542635 successfully "write" requests, 653214 with ErrorCode.PoolLedgerTimeout error and 101378 nacked by "Client request is discarded since view change" reason.  ></body> </Action>
<Action id="53714" issue="34852" author="vladimirwork" type="comment" created="2018-11-22 09:50:38.0" updateauthor="vladimirwork" updated="2018-11-22 09:50:38.0"> <body><! CDATA Build Info: indy-node 1.6.694  Steps to Validate: 1. Set MAX_CONNECTED_CLIENTS_NUM = 200 and 300 connection limit in the iptables. 2. Run production load test (writes + reads).  Actual Results: 22 from 25 nodes have ~283k txns in domain ledger and ~262k txn in token ledger and almost all of 1.5m reads were successful (263 nacked/rejected and 1 failed). All logs are in ev@evernymr33:logs/1770_22_11_2018.tar.gz  ></body> </Action>
<Action id="53716" issue="34852" author="ashcherbakov" type="comment" created="2018-11-22 09:59:35.0" updateauthor="ashcherbakov" updated="2018-11-22 09:59:35.0"> <body><! CDATA Recommendation for Stewards: * restrict incoming client connections in firewall (iptables) to *500* * set *MAX_CONNECTED_CLIENTS_NUM = 400*  ></body> </Action>
<Action id="53721" issue="34852" author="anikitindsr" type="comment" created="2018-11-22 10:13:25.0" updateauthor="anikitindsr" updated="2018-11-22 10:13:25.0"> <body><! CDATA After the last load_test launching (with MAX_CONNECTED_CLIENTS_NUM = 200 and 300 connection limit in the iptables), the next results was got:  * For read transactions there was a 1453754 successfull and 264 failed requests. * For write transactions there was a 539230 successfull and 1104 failed. After this load_test launches we assume that the most usable limitations from indy-node side is MAX_CONNECTED_CLIENTS_NUM=400 and 500 for iptables.  ></body> </Action>
