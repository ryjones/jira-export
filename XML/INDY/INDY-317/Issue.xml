<Issue id="18597" key="INDY-317" number="317" project="10303" reporter="ozheregelya" assignee="krw910" creator="ozheregelya" type="10004" summary="Steward is able to send request to demote his own node" priority="4" resolution="10200" status="10001" created="2017-06-23 09:43:15.0" updated="2019-03-29 20:33:41.0" resolutiondate="2019-03-29 20:33:41.0" votes="0" watches="2" workflowId="18597"> <environment><! CDATA Build Info: sovrin-client version: 0.3.22 sovrin-node version: 0.3.24  OS/Platform: Ubuntu 16.04.2 LTS  ></environment> <description><! CDATA *Overview:* Steward is able to send request to demote his own node.  *Case 1:* *Steps to Reproduce:* 0. Create pool consists of 4 nodes, add 5 and 6 nodes. 1. As Steward of Node 5 send following command: sovrin@test> send NODE dest=4Tn3wZMNCvhSTXPcLinQDnHyj56DTLQtL61ki4jo2Loc data=\{'alias': 'Node5', 'services':   } Sending node request for node identifier 4Tn3wZMNCvhSTXPcLinQDnHyj56DTLQtL61ki4jo2Loc by EHHnpHErJkPqhtJWuKekA4Cn8jLhvnfTsvVVdy53Qarr (request id: 1498209422595095) Node request completed 4Tn3wZMNCvhSTXPcLinQDnHyj56DTLQtL61ki4jo2Loc  *Actual Results:* Node was not demoted, but in CLI "Node request completed 4Tn3wZMNCvhSTXPcLinQDnHyj56DTLQtL61ki4jo2Loc" appear.  *Expected Results:* Error message that Steward can't demote the node should appear.  *Case 2:* *Steps to Reproduce:* 0. Create pool consists of 4 nodes, add 5 and 6 nodes. 1. As Trustee, blacklist Node 5. 2. As Steward of Node 5 send following command: sovrin@test> send NODE dest=4Tn3wZMNCvhSTXPcLinQDnHyj56DTLQtL61ki4jo2Loc data=\{'alias': 'Node5', 'services':   }  *Actual Results:* Node was promoted, following messages appear: {code:java} Sending node request for node identifier 4Tn3wZMNCvhSTXPcLinQDnHyj56DTLQtL61ki4jo2Loc by EHHnpHErJkPqhtJWuKekA4Cn8jLhvnfTsvVVdy53Qarr (request id: 1498207392204695) Node request completed 4Tn3wZMNCvhSTXPcLinQDnHyj56DTLQtL61ki4jo2Loc 7cb2iGMVsVMAAY13Q63S22RoemYa6Yjq8x7YydKBi54W looking for Node5C at 10.0.0.105:9710 7cb2iGMVsVMAAY13Q63S22RoemYa6Yjq8x7YydKBi54W now connected to Node5C{code} *Expected Results:* Error message that Steward can't demote or promote the node should appear.  *Additional Information:* Logs for Case 2 attached. This problem was discussed with Kelly and he said that similar problem was found and fixed about several moths ago.  ></description> </Issue>
