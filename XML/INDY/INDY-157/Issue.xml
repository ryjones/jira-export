<Issue id="17556" key="INDY-157" number="157" project="10303" reporter="alexander.shekhovcov" assignee="nage" creator="alexander.shekhovcov" type="10004" summary=" POOL_UPGRADE  The Node is not able to parse a CANCEL record from the upgrade_log" priority="3" resolution="10000" status="10001" created="2017-06-06 12:26:29.0" updated="2019-03-29 20:34:20.0" resolutiondate="2019-03-29 20:34:20.0" votes="0" watches="5" workflowId="17560"> <description><! CDATA The Node raises the below exception during restart after upgrade {code:java} Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : Traceback (most recent call last): Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : File "/usr/local/bin/start_sovrin_node", line 47, in <module> Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : cliha=cliha) Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : File "/usr/local/lib/python3.5/dist-packages/sovrin_node/server/node.py", line 92, in __init__ Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : self.upgrader = self.getUpgrader() Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : File "/usr/local/lib/python3.5/dist-packages/sovrin_node/server/node.py", line 148, in getUpgrader Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : upgradeFailedCallback=self.postConfigLedgerCaughtUp) Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : File "/usr/local/lib/python3.5/dist-packages/sovrin_node/server/upgrader.py", line 90, in __init__ Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : self.__defaultLog(dataDir, config) Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : File "/usr/local/lib/python3.5/dist-packages/sovrin_node/server/upgrader.py", line 71, in __defaultLog Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : return UpgradeLog(filePath=log) Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : File "/usr/local/lib/python3.5/dist-packages/sovrin_node/server/upgrade_log.py", line 21, in __init__ Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : self.__load() Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : File "/usr/local/lib/python3.5/dist-packages/sovrin_node/server/upgrade_log.py", line 31, in __load Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : when = parseDate(item 2 ) Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : File "/usr/lib/python3/dist-packages/dateutil/parser.py", line 1008, in parse Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : return DEFAULTPARSER.parse(timestr, **kwargs) Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : File "/usr/lib/python3/dist-packages/dateutil/parser.py", line 404, in parse Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : ret = default.replace(**repl) Jun 06 11:46:50 californiaShakeP1.qatest.evernym.com start_sovrin_node 20602 : ValueError: year is out of range{code} *upgrade_log:* {code:java} 2017-06-06 11:20:25.813834 scheduled 2017-06-06 14:25:00.258870+00:00 0.3.129 2017-06-06 11:36:14.433810 cancelled 11074 0.3.129 2017-06-06 11:42:15.287275 scheduled 2017-06-06 14:45:00.258870+03:00 0.3.129 2017-06-06 11:44:59.299328 scheduled 2017-06-06 14:45:00.258870+03:00 0.3.129 {code} POOL_UPGRADE CANCEL txn: {code:java} send POOL_UPGRADE name=upgrade-060617 version=0.3.129 sha256=aad1242 action=cancel schedule={'Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv': '2017-06-06T14:40:00.258870+03:00', '8ECVSk179mjsjKRLWiQt ssMLgp6EPhWXtaYyStWPSGAb': '2017-06-06T14:45:00.258870+03:00', 'DKVxG2fXXTU8yT5N7hGEbXB3dfdAnYv1JczDUHpmDxya':'2017-06-06T14:50:00.258870+03:00','4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA':'2017-06-06T14:55:0 0.258870+03:00'} timeout=10{code}       ></description> </Issue>
