<Action id="59800" issue="39476" author="andkononykhin" type="comment" created="2019-05-07 13:43:52.0" updateauthor="andkononykhin" updated="2019-05-07 13:56:23.0"> <body><! CDATA PoA: * taa acceptance for client requests would be performed inside  Node:doDynamicValidation|https://github.com/hyperledger/indy-plenum/blob/c32edb325ef829f68beff473a9b3e4277051b6cd/plenum/server/node.py#L2401  method * *LedgerInfo* class would be extended to have *taa_acceptance_required* property which would be set to *True* by default * tests plan: ** extend tests for LedgerInfo ** taa acceptance is required for Domain and not required for other ledgers defined in plenum's Node ** client's requests with missed taa acceptance: *** pass validation if taa acceptance for corresponded ledger id is not required or not enabled (no TAA txn written to config leder yet) *** fail validation otherwise ** client requests with taa acceptance: *** rejected if **** acceptance taaDigest doesn't match latest TAA **** acceptance mechanism is unknown **** acceptance time is not acceptable *** accepted otherwise  ></body> </Action>
<Action id="60246" issue="39476" author="andkononykhin" type="comment" created="2019-05-22 09:38:40.0" updateauthor="andkononykhin" updated="2019-05-22 11:14:15.0"> <body><! CDATA Problem reason: * All write transactions for ledger where it is expected (Domain, Plugin) should include acceptance of transaction author agreement.  Changes: * Node's dynamic validation has been improved to check existence and validity of the TAA acceptance.  PR: *  https://github.com/hyperledger/indy-plenum/pull/1214  *  https://github.com/hyperledger/indy-plenum/pull/1213  *  https://github.com/hyperledger/indy-plenum/pull/1195   Version: * Indy-Node: 1.8.0.dev941  Risk factors: * New validation impacts all write transactions and might prevent them from being written to ledger.  Risk: * Low  Covered with tests: * Yes, unit and integration  Recommendations for QA * check on pool without any TAA activated yet: ** any write request with taa acceptance to any ledger should be rejected ** any valid write request with no TAA acceptance should  be written * activate TAA: ** any write request without taa acceptance to Domain ledger should be rejected ** any write request with invalid TAA acceptance should be rejected, possible invalid parameters: *** wrong TAA digest *** unknown TAA acceptance mechanism *** wrong time: **** less tham TAA txn time - 120 secs **** more than PP time + 120 secs where PP time is a txn time for the batch txn that includes the request ** any valid write request to Domain ledger with valid taa acceptance should be written ** any valid write requests to other ledgers with no TAA acceptance should be written ** any valid write requsts to other ledgers with TAA acceptance should be rejected * deactivate TAA: ** check the same cases as for not activated TAA  ></body> </Action>
