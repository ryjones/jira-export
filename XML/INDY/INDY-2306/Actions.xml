<Action id="65806" issue="43483" author="jeromek" type="comment" body="Here another Chat that could verify this problem: https://chat.hyperledger.org/channel/indy?msg=8dy9zQpkwMZ3DnXFL" created="2019-11-27 13:28:02.0" updateauthor="jeromek" updated="2019-11-27 13:28:02.0"/>
<Action id="66051" issue="43483" author="ashcherbakov" type="comment" created="2019-12-04 07:52:16.0" updateauthor="ashcherbakov" updated="2019-12-04 07:52:16.0"> <body><! CDATA We checked how big is reply to GET_SCHEMA in this case: {code} 16:08:26,383|DEBUG|client_message_provider.py|CONNECTION: Cannot transmit message. Error InvalidMessageExceedingSizeException('Message len 199615 exceeded allowed limit of 131072',) {code} So, the reply size is `199615` bytes which is more than the limit of 128K. What we need to understand is why the state proof in this case is so big and whether this is expected.   Possible options: 1) Reduce maximum number of attributes - May be not so good from use cases point of view - There are already big SCHEMA txns on prod nets 2) Increase message limit (from 128K to 256K for example) 3) Do not apply message limit restrictions for Replies to clients.  Option 3 may be the best one.  ></body> </Action>
<Action id="66053" issue="43483" author="jeromek" type="comment" body="I would also recommend going with option 3." created="2019-12-04 08:28:35.0" updateauthor="jeromek" updated="2019-12-04 08:28:35.0"/>
<Action id="66221" issue="43483" author="donqui" type="comment" created="2019-12-11 10:18:28.0" updateauthor="donqui" updated="2019-12-12 09:35:08.0"> <body><! CDATA Problem reason/description: - An outbound message could not be sent if it is over a certain size. This cause issues with schemas tha when written were under the limit, but when fetched went over the limit due to additional metadata and the size of the state proof.  Changes:  Removed check for the size of outbound messages * PR:  https://github.com/hyperledger/indy-plenum/pull/1429   Version: - plenum: 1.12.1.dev977 - node: 1.12.1~dev1162  Risk: - Low  Covered with tests: *  https://github.com/hyperledger/indy-plenum/blob/master/stp_zmq/test/test_no_size_limit_for_outbound_msgs.py   Recommendations for QA - write a SCHEMA that is under the limit but close to it, and try to read it so that when read it is over the limit. This probably needs to be done on a build that does not have a fix, and the build with the fix.  ></body> </Action>
<Action id="66261" issue="43483" author="vladimirwork" type="comment" created="2019-12-13 14:03:25.0" updateauthor="vladimirwork" updated="2019-12-13 14:03:25.0"> <body><! CDATA Build Info: 1.12.1~dev1162  Steps to Valdiate: https://github.com/VladimirWork/indy-test-automation/blob/93f874abaaed4653f49a7a0f86583715f0d5f589/system/draft/test_misc.py#L2250  Actual Results: Test fails against 1.12.1~dev1158 wiht PoolLedgerTimeout. Test passes against 1.12.1~dev1162.  ></body> </Action>
<Action id="66313" issue="43483" author="ashcherbakov" type="comment" body=" https://github.com/hyperledger/indy-node/pull/1542  - tests to check that GET_CRED_DEF for large Schemas works" created="2019-12-19 08:30:13.0" updateauthor="ashcherbakov" updated="2019-12-19 08:30:13.0"/>
