<Action id="25498" issue="17162" author="ashcherbakov" type="comment" created="2017-06-06 12:30:09.0" updateauthor="ashcherbakov" updated="2017-06-06 12:30:09.0"> <body><! CDATA Problem reason:  - When we start processing 3PC batch, we save am expected state of the ledger. When we commit a batch, we compare expected state with the real (committed) one. So, if we change the ledger state in between (example: catch-up), the compare will fail.  Changes:  - Remove all 3PC messages which are already processed by catch-up; reset the uncommitted state.  Risk factors: - catch-up - 3PC messages    Risk: Medium  Covered with tests: - https://github.com/evernym/plenum/blob/master/plenum/test/batching_3pc/catch-up/test_3pc_paused_during_catch_up.py - https://github.com/evernym/plenum/blob/master/plenum/test/batching_3pc/catch-up/test_catchup_during_3pc.py - https://github.com/evernym/plenum/blob/master/plenum/test/batching_3pc/catch-up/test_catchup_during_3pc_continue_working.py    ></body> </Action>
<Action id="25527" issue="17162" author="ashcherbakov" type="comment" created="2017-06-06 15:48:02.0" updateauthor="ashcherbakov" updated="2017-06-09 11:26:17.0"> <body><! CDATA Build: - sovrin-node: 0.3.134 - sovrin-client: 0.3.132  ></body> </Action>
<Action id="25938" issue="17162" author="krw910" type="comment" body="I ran the exact same load tests as before and did not get any of the nodes into the failed state. I was running 1,000 transactions sent at once with no issues." created="2017-06-09 22:46:25.0" updateauthor="krw910" updated="2017-06-09 22:46:25.0"/>
