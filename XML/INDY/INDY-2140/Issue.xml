<Issue id="40553" key="INDY-2140" number="2140" project="10303" reporter="ashcherbakov" assignee="sergey.khoroshavin" creator="ashcherbakov" type="10002" summary="Debug: Integrate PBFT viewchanger service into current codebase" priority="3" resolution="10000" status="10001" created="2019-06-13 09:01:28.0" updated="2019-10-14 05:33:53.0" resolutiondate="2019-10-11 16:44:19.0" votes="0" watches="4" workflowId="53502"> <description><! CDATA Acceptance criteria: * Makse sure there are no critical/major issues with View Change * Unskip tests we added long time ago that failed with the old view change implementation. * Make sure all existing tests are unskipped/rewritten/removed and pass ** Remove tests related to old view change if necessary * Remove code related to old View Change logic     Tasks: # Unskip all tests (create a ticket if a test can not be unskipped by a reason) -  ~sergey.khoroshavin  # Code cleanup  ~sergey.khoroshavin  ** Make sure that `primaries_batch_needed ` is used correctly - DONE ** `future_primary_handler.set_node_state()` is called from at least 4 places - DONE ** Do we need `self.schedule_view_change_completion_check(self._view_change_timeout)` in `on_view_change_start` - IN PROGRESS ** Do we need `replica.on_view_change_start()` - IN PROGRESS ** Do we need `primaryChanged` in replica - TBD ** Remove `notify_view_change_complete` - TBD ** "VCDone_queue" in validator info output - _DONE_ ** Should we still call self.instance_changes.remove_view(self.view_no) - _DONE_ # Refactor Future Primaries batch needed  ~Toktar  - DONE # Remove old view change logic  ~sergey.khoroshavin  - IN PROGRESS # Unskip view change written long time ago that failed with old protocol  ~Toktar  - DONE # Analyze load tests results  ~anikitinDSR  - DONE  ></description> </Issue>
