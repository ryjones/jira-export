<Issue id="31379" key="INDY-1429" number="1429" project="10303" reporter="sergey.khoroshavin" assignee="sergey.khoroshavin" creator="sergey.khoroshavin" type="10004" summary="Perf pool stopped ordering txns during load test" priority="3" resolution="10000" status="10001" created="2018-06-26 14:53:17.0" updated="2019-03-29 20:33:51.0" resolutiondate="2019-03-29 20:33:51.0" votes="0" watches="1" workflowId="31393"> <description><! CDATA *Versions:* indy-node: 1.4.478 indy-plenum: 1.4.418  *Node config* logLevel=DEBUG forceViewChangeFreq=600  *What happened* When running load test on with two agents running {code} python3.5 perf_processes.py -c 20 -n 1000 -k nym -g pool_transactions_genesis {code} in a loop after some view change pool stopped ordering transactions. Ledgers were NOT corrupted, all nodes eventually reached same state, but refused to order any new txn. Restarting all nodes in a pool fixed problem temporarily.  After investigation of log files it turned out that in the beginning of some view primary generated first PREPREPARE with more than 9000 txns, with size about 640k, while default MSG_LEN_LIMIT is just 128k. So, this PREPREPARE was not delivered to other nodes and no new transactions were ordered.  It's recommended to either increase MSG_LEN_LIMIT to 768k or decrease Max3PCBatchSize accordingly.  *Acceptance criteria* Find the root cause and create a ticket for fixing  ></description> </Issue>
