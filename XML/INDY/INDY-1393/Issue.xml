<Issue id="30933" key="INDY-1393" number="1393" project="10303" reporter="ashcherbakov" assignee="vladimirwork" creator="ashcherbakov" type="10002" summary="Indy-node 1.4 should reject requests from old unsupported clients gracefully" priority="3" resolution="10000" status="10001" created="2018-06-07 07:21:20.0" updated="2019-03-29 20:32:52.0" resolutiondate="2019-03-29 20:32:52.0" votes="0" watches="3" workflowId="30941"> <description><! CDATA As Indy Node 1.4 release contains breaking changes, it can work with the new clients supporting this changes only.  *Acceptance criteria:* * Add PROTOCOL_VERSION=2 * Add PROTOCOL_VERSION to `LedgerStatus` to handle catch ups from old clients * If there is LEDGER_STATUS or Request with a protocol version !=2, then discard with the following message: "make sure that the latest LibIndy is used and `indy_set_protocol_version(2)` is called". * Wait until LibIndy supporting `indy_set_protocol_version(2)` is issued and use this LibIndy in integration tests * Call `indy_set_protocol_version(2)` before opening a pool in integration tests * If there is a Ledger Status with a protocol version < 2 (that is the one came from old SDK), send back LedgerStatus to force it finish catch-up, so that next reqeusts to the ledger will fail gracefully with an error message to update SDK.  ></description> </Issue>
