<Issue id="27016" key="INDY-1099" number="1099" project="10303" reporter="vladimirwork" creator="vladimirwork" type="10004" summary="New transactions wipe out old ones in bad data ledger" priority="4" status="10200" created="2018-01-23 14:09:33.0" updated="2018-10-09 09:59:59.0" votes="0" watches="2" workflowId="27017"> <description><! CDATA Build Info: indy-node 1.2.279  Steps to Reproduce: 1. Install pool of 5 nodes. 2. Stop all nodes. 3. Delete value of "dest" attribute ("V4SGRU86Z58d6TV7PBUe6f") in default Trustee's entry of domain ledger transactions .ldb file on all nodes. 4. Delete all tree and state folders (with merkle leaves/nodes and state affixes) of all ledgers. 5. Start all nodes. 6. Check nodes' status and domain ledger by `read_ledger` tool (some of transactions in ledger are lost and current seqNo counter is not "the last entry seqNo + 1"). 7. Send NYMs to reach old transactions' seqNo in domain ledger and increase it up (so new added NYM have the same seqNo as old one).  Actual Results: New transactions (NYMs) wipe out old ones if their seqNos intersect.  Additional Info: We have explicit data loss (there are 10 transactions in domain ledger with seqNos from 19 to 29 after Step 5, so the first 18 transactions were lost) due to 1 value in 1 transaction was removed and implicit data loss due to broken seqNo counter that was set to `13` instead of `30`.  The priority of this ticket is low now (case with bad data ledger is not common) but it can be discussed additionally.  ></description> </Issue>
