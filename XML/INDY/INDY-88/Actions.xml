<Action id="24583" issue="17214" author="alexander.shekhovcov" type="comment" created="2017-05-29 14:35:31.0" updateauthor="alexander.shekhovcov" updated="2017-06-01 10:38:24.0"> <body><! CDATA (/)     *Problem reason:* # Adding a node without SERVICES actually joined the node to the pool. But the node was not started as a result the pool had more f malicious nodes.  *Changes:* # Do not start a new node if SERVICES does not contain VALIDATOR # removed test _testSendNodeSucceedsIfServicesIsMissed_ # added test _testSendNodeFailsIfServicesIsMissed_  *Committed into:*  https://github.com/evernym/plenum/pull/185/commits/79812f369099d9785146ac4e7f62567b1845ad4f  https://github.com/sovrin-foundation/sovrin-client/pull/197/files   *Risk factors:*  Commands which sent the add NODE txn without SERVICES will not join the node.  *Risk:*  Low  *Covered with tests:*  _testSendNodeFailsIfServicesIsMissed_  _testSuspendNodeWhichWasNeverActive_  _testAddNonActiveNodeThenActivate_     *Recommendations for QA:*  check if: * adding a node does not fail without SERVICES field and the node does not participate in the pool * updating node data does not fail without SERVICES field  ></body> </Action>
<Action id="26311" issue="17214" author="aleksey-roldugin" type="comment" created="2017-06-14 17:54:31.0" updateauthor="aleksey-roldugin" updated="2017-06-14 17:54:31.0"> <body><! CDATA h6. build  sovrin-node 0.3.138 sovrin-client 0.3.136 h6. verification h5. Case 1: adding a node does not fail without SERVICES field and the node does not participate in the pool # Send from CLI: {code:java} sovrin@test> send NODE dest=4Tn3wZMNCvhSTXPcLinQDnHyj56DTLQtL61ki4jo2Loc data={' client_port': 9710, 'client_ip': '52.65.105.174', 'alias': 'Node5', 'node_ip': ' 52.65.105.174', 'node_port': 9709, 'services':   } Sending node request for node identifier 4Tn3wZMNCvhSTXPcLinQDnHyj56DTLQtL61ki4jo2Loc by EHHnpHErJkPqhtJWuKekA4Cn8jLhvnfTsvVVdy53Qarr (request id: 1497456523692470) 3JmHZk3qC2mjCH7im2PWYfBWBb98AYccYBrBPMMfueeT looking for Node5C at 52.65.105.174:9710 Node request completed 4Tn3wZMNCvhSTXPcLinQDnHyj56DTLQtL61ki4jo2Loc 3JmHZk3qC2mjCH7im2PWYfBWBb98AYccYBrBPMMfueeT now connected to Node5C {code}  # Check that added node did not perform catch up.  h5. Case 2: updating node data does not fail without SERVICES field # Send from CLI: {code:java} sovrin@test> send NODE dest=Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv data={' alias': 'Node1', 'services':   } Sending node request for node identifier Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv by GJ1SzoWzavQYfNL9XkaJdrQejfztN4XqdsiV4ct3LXKL (request id: 1497458551565558) 3JmHZk3qC2mjCH7im2PWYfBWBb98AYccYBrBPMMfueeT disconnected from Node1C 36qHbo3X8z3iAR8GtLzCeb2QqeqfxoZ8hwyVt1BvAqhm disconnected from Node1C Node request completed Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv 36qHbo3X8z3iAR8GtLzCeb2QqeqfxoZ8hwyVt1BvAqhm could not find remote Node1C {code}  ></body> </Action>
