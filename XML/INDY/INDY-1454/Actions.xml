<Action id="47050" issue="31667" author="sergey.khoroshavin" type="comment" created="2018-07-06 18:21:20.0" updateauthor="sergey.khoroshavin" updated="2018-07-06 18:21:20.0"> <body><! CDATA Part of problem may be related to interference between normal and forced view change. Log investigation will be continued, but at the same time it is recommended to rerun load test with {code} ForceViewChangeFreq=1800 {code} and see if this problem persists.  ></body> </Action>
<Action id="47137" issue="31667" author="vladimirwork" type="comment" body="The issue doesn&apos;t reproduce against the same version pool against the same load with `ForceViewChangeFreq=1800`." created="2018-07-10 10:04:59.0" updateauthor="vladimirwork" updated="2018-07-10 10:04:59.0"/>
<Action id="47202" issue="31667" author="sergey.khoroshavin" type="comment" created="2018-07-11 10:23:35.0" updateauthor="sergey.khoroshavin" updated="2018-07-11 10:30:54.0"> <body><! CDATA There were two issues found: 1) when starting next view change view change timeout was not reset, which led to situation when two consecutive view changes (each taking 5 minutes, so 10 minutes total) triggered another view change, which took another 5 minutes and since already 15 minutes passed another forced view change was triggered. Quick fix was to increase forced view change period, proper fix is to reset view change timeout each time new view change starts. PR with fix: https://github.com/hyperledger/indy-plenum/pull/802 2) there were situations where most nodes finished view change very fast and started ordering transactions, and some nodes were slow enough to interleave their catchup during view change with ordering of new transactions by other nodes. This led to never ending catchup during view change (as well as never ending view change) because on every catchup round they were receiving new transactions, and catchup logic during view change was to wait until there are no new transactions caught up. PR with fix: https://github.com/hyperledger/indy-plenum/pull/804  Validation will done in scope of  INDY-1343|https://jira.hyperledger.org/browse/INDY-1343  and  INDY-1464|https://jira.hyperledger.org/browse/INDY-1464   ></body> </Action>
