<Issue id="32141" key="INDY-1513" number="1513" project="10303" reporter="ckochenower" assignee="ckochenower" creator="ckochenower" type="10002" summary="Chaos Experiment - Selection of backup primaries (replicas) that are not actually running" priority="2" resolution="10000" status="10001" created="2018-07-23 17:35:25.0" updated="2019-03-29 20:35:03.0" resolutiondate="2019-03-29 20:35:03.0" votes="0" watches="1" workflowId="43370"> <description><! CDATA 3 scenarios need to be simulated:  Scenario 1: Replica selection after forcing view change by shutting down indy-node on the master. # Discover which nodes are selected as master and replicas # Assuming round-robin selection of both the primary and replicas. For example, in a 10 node cluster (Node1 - Node10), Node1 would be selected as a primary (1st of 4 replicas), and Node2 through Node4 would be selected as replicas (backup primaries) # Shutdown Node5 followed by the master (Node1). # A view change should occur with Node2 becoming the master and Node3, Node4, and Node6 as replicas, because Node5 is down.  Scenario 2: Replica selection without forcing view change after making indy-node on one of the non-primary replicas unreachable (block node port or stop indy-node service) # Discover which nodes are selected as master and replicas # Assuming round-robin selection of both the primary and replicas. For example, in a 10 node cluster (Node1 - Node10), Node1 would be selected as a primary (1st of 4 replicas), and Node2 through Node4 would be selected as replicas (backup primaries) # Shutdown Node2 # Once the master detects Node2 is unreachable, expect it to select Node5 as a replica to replace Node2 as one of it's replicas  Scenario 3: Replica selection without forcing view change after demoting one of the non-primary replicas # Discover which nodes are selected as master and replicas # Assuming round-robin selection of both the primary and replicas. For example, in a 10 node cluster (Node1 - Node10), Node1 would be selected as a primary (1st of 4 replicas), and Node2 through Node4 would be selected as replicas (backup primaries) # Demote Node2 # Once the master detects Node2 has been demoted, expect it to select Node5 as a replica to replace Node2 as one of it's replicas  ></description> </Issue>
