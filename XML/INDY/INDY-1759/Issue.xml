<Issue id="34625" key="INDY-1759" number="1759" project="10303" reporter="ashcherbakov" assignee="vladimirwork" creator="ashcherbakov" type="10002" summary="Use persisted last_pp_seq_no for recovery of backup primaries" priority="3" resolution="10000" status="10001" created="2018-10-12 11:27:57.0" updated="2019-03-29 20:32:54.0" resolutiondate="2019-03-29 20:32:54.0" votes="0" watches="4" workflowId="46029"> <description><! CDATA As of now, if master primary crashed (stopped) and re-started, it will get last_pp_seq_no from other Nodes and continue correct ordering.  For backup primaries this information is not propagated, so backup primary will start sending PRE-PREPARES from 1, and other nodes will reject it. It may eventually cause a memory leak, since ordering on this backup is stopped for some time.  *Acceptance criteria* * Create a new key-value DB for persisting current states * Persist last pp_seq_no for each Instance in the pool * Use persisted last_pp_seq_no as a new pp_seq_no for a Replica if it's a primary in one of the Instances (including Master?)  ></description> </Issue>
