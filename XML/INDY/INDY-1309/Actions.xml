<Action id="43871" issue="29907" author="mgbailey" type="comment" body="We have seen this in another node now. We also do not see it in others. Where we have seen it occur, the node did not come up cleanly on the first try, and it was necessary to remove the data directory to retry bringing up the node." created="2018-05-04 17:24:24.0" updateauthor="mgbailey" updated="2018-05-04 17:24:24.0"/>
<Action id="43993" issue="29907" author="derashe" type="comment" created="2018-05-07 13:35:40.0" updateauthor="derashe" updated="2018-05-07 13:40:46.0"> <body><! CDATA  ~mgbailey  Hello, can i ask you a few things: * Was there any promote/demote operations with any nodes? Particullary, how was Veridium node added? * Can i get full journalctl from Veridium node? * What verison of node do you use?  ></body> </Action>
<Action id="43997" issue="29907" author="mgbailey" type="comment" created="2018-05-07 14:21:19.0" updateauthor="mgbailey" updated="2018-05-07 14:21:19.0"> <body><! CDATA  ~Derashe , There are many promotions and demotions on this network (the STN).  This node was added by a trustee putting steward credentials onto the STN, and then the steward putting his node attributes onto the pool ledger.  ^STN_pool_ledger.txt   I could request full journalctl, however I don't believe that this would help.  I was on with the steward in a screen share, and there was no other information in the journalclt of use.  This is indy-node 1.3.57  ></body> </Action>
<Action id="44059" issue="29907" author="mgbailey" type="comment" created="2018-05-08 14:15:59.0" updateauthor="mgbailey" updated="2018-05-08 14:15:59.0"> <body><! CDATA  ~Derashe , the contents of indy.env are: {code:java} NODE_NAME=VeridiumID NODE_PORT=9701 NODE_CLIENT_PORT=9702 CLIENT_CONNECTIONS_LIMIT=15360 {code}    ></body> </Action>
<Action id="44081" issue="29907" author="mgbailey" type="comment" body=" ~Derashe , as you pointed out, the alias in indy.env does not match the alias posted to the pool ledger. Could this explain the error we are seeing?" created="2018-05-08 16:08:59.0" updateauthor="mgbailey" updated="2018-05-08 16:08:59.0"/>
<Action id="44086" issue="29907" author="derashe" type="comment" created="2018-05-08 17:55:33.0" updateauthor="derashe" updated="2018-05-08 17:55:45.0"> <body><! CDATA  ~mgbailey  That error may happen, when txn of addition of new node was written to ledger and this node trying to connect with pool, and it's local node's name differs from one was written to ledger. During the process of primary selection, node looks for primary rank for it's instances, but because of names mismatch, get_rank_by_name function may return None value, as mentioned in get_rank_of function. So this cause TypeError.  P.S: Mentioned functions contains in TxnPoolManager class   ></body> </Action>
<Action id="44246" issue="29907" author="mgbailey" type="comment" body=" ~Derashe , good catch.  The problem is resolved when the alias is changed to match what is in the ledger. This ticket is resolved." created="2018-05-11 14:08:12.0" updateauthor="mgbailey" updated="2018-05-11 14:08:12.0"/>
