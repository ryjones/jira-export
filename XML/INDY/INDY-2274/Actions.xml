<Action id="65017" issue="43010" author="ashcherbakov" type="comment" created="2019-10-28 08:51:10.0" updateauthor="ashcherbakov" updated="2019-10-28 08:51:10.0"> <body><! CDATA  * Check if we introduced some regression during recent changes related to ZMQ ** Possible regression causes: *** New ZMQ *** Changes in RETRY_TIMEOUT_RESTRICTED and MAX_RECONNECT_RETRY_ON_SAME_SOCKET: https://github.com/hyperledger/indy-plenum/pull/1315 *** INDY-2222 (reconnect sockets on pings): https://github.com/hyperledger/indy-plenum/pull/1363 *** Do not send Batches to stashed https://github.com/hyperledger/indy-plenum/pull/1376 ** Possible items to check: *** Run system tests (the deal with reconnect catchup suite for example) on master + RETRY_TIMEOUT_RESTRICTED = 15 and MAX_RECONNECT_RETRY_ON_SAME_SOCKET = 1 *** Run the same system tests on 1.9.2 stable (old ZMQ version) *** Run the same system tests on 1.9.2 stable + RETRY_TIMEOUT_RESTRICTED = 2 and MAX_RECONNECT_RETRY_ON_SAME_SOCKET = 3 *** Run the tests as it was on 1.9.2 but with a new ZMQ *** Debug with ZMQ integration tests in Plenum as well (test_reconnect_multi)  ></body> </Action>
<Action id="65018" issue="43010" author="ashcherbakov" type="comment" created="2019-10-28 08:53:34.0" updateauthor="ashcherbakov" updated="2019-10-28 09:03:39.0"> <body><! CDATA Changes: * Added ROUTER_HANDOVER option so that we always use the latest connection with the same ID (all our Nodes use the same ID equal to the pubkey).  PR: * https://github.com/hyperledger/indy-plenum/pull/1386  Version: * 1.11.0.dev1119 Recommendation for QA: * make sure all system tests pass * do load with restarting nodes  ></body> </Action>
<Action id="65019" issue="43010" author="ashcherbakov" type="comment" created="2019-10-28 08:58:48.0" updateauthor="ashcherbakov" updated="2019-10-28 08:59:17.0"> <body><! CDATA Currently we have just 2 system tests failing: * test_case_demoting ** It looks like it has an issue in the test: it expects 1 node disconnecting while all nodes are connected at that time ** Suggested fix in test: *** Replace ` ensure_all_nodes_online(pool_handler, wallet_handler, trustee_did, unreached=1)` by ` ensure_all_nodes_online(pool_handler, wallet_handler, trustee_did, unreached=0)` * test_case_pool_ledger (waiting for connection, not waiting for catchup) ** The reason for failing is INDY-1960 *** A node is doing catchup while new requests (new NYM + NODE for this new NYM) are being sent *** Since we perform signature verification as part of static validation, a Node receives a NODE txn before it gets the corresponding NYM, so it rejects it ** Suggested fix in test: *** Keep the test as it is but skip with a reference to INDY-1960 *** In the current test use the same NYM for a NODE txn  ></body> </Action>
<Action id="65069" issue="43010" author="vladimirwork" type="comment" body="PR with updated tests: https://github.com/hyperledger/indy-test-automation/pull/71" created="2019-10-29 10:17:30.0" updateauthor="vladimirwork" updated="2019-10-29 10:17:30.0"/>
