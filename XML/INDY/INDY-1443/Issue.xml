<Issue id="31563" key="INDY-1443" number="1443" project="10303" reporter="ckochenower" assignee="vladimirwork" creator="ckochenower" type="10004" summary="validator-info -v --json does not produce valid JSON" priority="3" resolution="10000" status="10001" created="2018-07-02 19:03:56.0" updated="2019-03-29 20:34:58.0" resolutiondate="2019-03-29 20:34:58.0" votes="0" watches="4" workflowId="31577"> <environment><! CDATA {panel:title=My Indy Node environment} ~$ sudo apt list --installed | grep indy  WARNING: apt does not have a stable CLI interface. Use with caution in scripts.  indy-anoncreds/xenial,now 1.0.32 amd64  installed  indy-node/xenial,now 1.4.480 amd64  installed,upgradable to: 1.4.483  indy-plenum/xenial,now 1.4.419 amd64  installed,upgradable to: 1.4.423  libindy-crypto/xenial,now 0.4.0 amd64  installed  python3-indy-crypto/xenial,now 0.4.1 amd64  installed   ~$ pip3 freeze | grep indy You are using pip version 8.1.1, however version 10.0.1 is available. You should consider upgrading via the 'pip install --upgrade pip' command. indy-anoncreds==1.0.32 indy-crypto==0.4.1 indy-node==1.4.480 indy-plenum==1.4.419 indy-plenum-dev==1.4 {panel}   ></environment> <description><! CDATA 'validator\-info \-\-json' produces terse JSON output. The '\-v' option produces verbose output, but when combined with '\-\-json', the output is not valid JSON.  Steps to reproduce:  1. Run 'validator-info \-v \-\-json'  Sample output:  1. 'validator\-info \-\-json' {noformat} sudo validator-info --json { "response-version": "0.0.1", "timestamp": 1530557924, "Node_info": { "Name": "Node8", "did": "98VysG35LxrutKTNXvhaztPFHnx5u9kHtT7PnUGqDa8x", "verkey": "<redacted>", "Node_port":   { "ip": "0.0.0.0/0", "port": 9715, "protocol": "tcp" }  , "Client_port":   { "ip": "0.0.0.0/0", "port": 9716, "protocol": "tcp" }  , "Metrics": { "uptime": 4505, "transaction-count": { "config": 0, "ledger": 412, "pool": 10 }, "average-per-second": { "read-transactions": 0.0, "write-transactions": 0.0 } } }, "state": "running", "enabled": true, "Pool_info": { "Total_nodes_count": 10, "Reachable_nodes":   "Node1", "Node10", "Node2", "Node3", "Node4", "Node5", "Node6", "Node7", "Node8", "Node9"  , "Reachable_nodes_count": 10, "Unreachable_nodes":   , "Unreachable_nodes_count": 0 }, "software": { "indy-node": "1.4.480", "sovrin": null } } {noformat}  2. 'validator\-info \-v \-\-json` \- Only the first 61 lines included for brevity. Just enough to prove the output is not valid JSON. {noformat} 1 "Pool_info": 2      "Read_only":    n/a 3      "Reachable_nodes_count":  10 4      "f_value":      3 5      "Blacklisted_nodes": 6      "Total_nodes_count":  10 7      "Suspicious_nodes":  n/a 8      "Unreachable_nodes_count":  n/a 9      "Unreachable_nodes": 10      "Reachable_nodes": 11            Node1 12            Node10 13            Node2 14            Node3 15            Node4 16            Node5 17            Node6 18            Node7 19            Node8 20            Node9 21      "Quorums":      {'observer_data': Quorum(4), 'timestamp': Quorum(4), 'ledger_status': Quorum(6), 'bl    s_signatures': Quorum(7), 'election': Quorum(7), 'consistency_proof': Quorum(4), 'propagate': Quorum(4),     'checkpoint': Quorum(6), 'commit': Quorum(7), 'ledger_status_last_3PC': Quorum(4), 'propagate_primary': Q    uorum(4), 'same_consistency_proof': Quorum(4), 'view_change_done': Quorum(7), 'f': 3, 'prepare': Quorum(6    ), 'reply': Quorum(4), 'view_change': Quorum(7)} 22 "Hardware": 23      "HDD_used_by_node":  2650 MBs 24      "HDD_all":      2650 Mbs 25      "RAM_all_free":  7512 Mbs 26      "RAM_used_by_node":  478 Mbs 27 "response-version":  0.0.1 28 "Software": 29      "Indy_packages": 30            hi  indy-anoncreds                   1.0.32                                     amd64        A    nonymous credentials 31            hi  indy-node                        1.4.480                                    amd64        I    ndy node 32            hi  indy-plenum                      1.4.419                                    amd64        P    lenum Byzantine Fault Tolerant Protocol 33            hi  libindy-crypto                   0.4.0                                      amd64        T    his is the shared crypto libirary for Hyperledger Indy components. 34            hi  python3-indy-crypto              0.4.1                                      amd64        T    his is the official wrapper for Hyperledger Indy Crypto library (https://www.hyperledger.org/projects). 35  36      "OS_version":   Linux-4.4.0-1061-aws-x86_64-with-Ubuntu-16.04-xenial 37      "sovrin":       n/a 38      "indy-node":    1.4.480 39      "Installed_packages": 40            pytest 3.5.1 41            semver 2.7.9 42            indy-node 1.4.480 43            rlp 0.5.1 44            indy-crypto 0.4.1 45            Pygments 2.2.0 46            base58 1.0.0 47            ioflo 1.5.4 48            orderedset 2.0 49            sha3 0.2.1 50            setuptools 38.5.2 51            sortedcontainers 1.5.7 52            timeout-decorator 0.4.0 53            indy-plenum 1.4.419 54            python-dateutil 2.6.1 55            python-rocksdb 0.6.9 56            Charm-Crypto 0.0.0 57            pluggy 0.6.0 58            pyzmq 17.0.0 59            indy-plenum-dev 1.4 60            more-itertools 4.1.0 61            six 1.11.0 {noformat}  ></description> </Issue>
