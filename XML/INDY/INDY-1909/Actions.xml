<Action id="54778" issue="36097" author="toktar" type="comment" body="PR: https://github.com/hyperledger/indy-plenum/pull/1028" created="2018-12-13 15:12:22.0" updateauthor="toktar" updated="2018-12-13 15:12:22.0"/>
<Action id="54877" issue="36097" author="toktar" type="comment" created="2018-12-17 16:19:26.0" updateauthor="toktar" updated="2018-12-17 16:19:26.0"> <body><! CDATA Problem reason: - A node accumulates old InstanceChange messages and use it for quorum for view change.   Changes: - Discard old InstanceChange messages - Add tests  PR: *  https://github.com/hyperledger/indy-node/pull/1096  *  https://github.com/hyperledger/indy-plenum/pull/1028   Version: * indy-node 1.6.736 -master * indy-plenum 1.6.638 -master  Risk factors: - Problem with view change  Risk: - Low  Covered with tests: *  test_models.py|https://github.com/hyperledger/indy-plenum/pull/1028/files#diff-b7328ffeb9e512539a4abe4c1f10eb03  *  test_old_instance_change_discarding.py|https://github.com/hyperledger/indy-plenum/pull/1028/files#diff-37714c8f48307db3ea816980a2522bc5   Recommendations for QA: * Start pool for 4 nodes on Docker * Selectively limiting the Node4 connectivity to primary node * Restart Node2 and Node3 * Wait config.OUTDATED_INSTANCE_CHANGES_CHECK_INTERVAL  (2 hours by default) * Selectively limiting Node2 and Node3 connectivity to primary node * Write any txn and check that the reply is successfully received.  ></body> </Action>
<Action id="54916" issue="36097" author="zhigunenko.dsr" type="comment" created="2018-12-18 12:13:28.0" updateauthor="zhigunenko.dsr" updated="2018-12-18 12:13:28.0"> <body><! CDATA *Environment:* indy-node                  1.6.736 indy-plenum                1.6.638  *Steps to Validate:* 1) Start pool for 4 nodes on Docker, set node1 as primary 2) Block incoming packets from node4 to node1 (primary) 3) Unblock incoming packets from node4 to node1 (primary) after "INSTANCE_CHANGE{'viewNo': 1, 'reason': 26} but did not find the master to be slow" 4) Restart services on Node2 and Node3 5) Wait config.OUTDATED_INSTANCE_CHANGES_CHECK_INTERVAL==2min 6) Block incoming packets from node3 and node2 to node1 (primary) 7) Write nym 8) Wait another config.OUTDATED_INSTANCE_CHANGES_CHECK_INTERVAL==2min 9) Unblock incoming packets from node3 and node2 to node1 (primary) 10) Write another nym again  *Actual Results:* There is no view change. Pool orders new transactions   ></body> </Action>
