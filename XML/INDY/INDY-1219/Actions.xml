<Action id="41523" issue="28437" author="toktar" type="comment" created="2018-03-13 12:30:38.0" updateauthor="toktar" updated="2018-03-13 12:38:11.0"> <body><! CDATA The reason of the problem is that _read_ledger_ script creates a tmp copy of the ledger, since leveldb can not work with the db from multiple processes (even in read-only mode). So, if the copy is not deleted for some reasons, the results of _read_ledger_ may be outdated. This problem will be fixed when task INDY-1205 (Use RocksDB as a key-value storage) is merged, since RocksDB can work (in read-only mode) with a db from a different process. So, the new version of read_ledger script will not create a copy of the ledger.  ></body> </Action>
<Action id="41548" issue="28437" author="mgbailey" type="comment" body=" ~Toktar , what is the work-around?  Do I delete the temporary copy before running read_ledger?  Where is the copy?" created="2018-03-13 18:01:05.0" updateauthor="mgbailey" updated="2018-03-13 18:01:05.0"/>
<Action id="41692" issue="28437" author="mgbailey" type="comment" created="2018-03-15 16:54:05.0" updateauthor="mgbailey" updated="2018-03-15 16:54:05.0"> <body><! CDATA From  ~Toktar : "Cache are saved in '/var/lib/indy/data' in file with postfix '-read-copy'. Deleting this file should fix this problem."  ></body> </Action>
<Action id="44325" issue="28437" author="ashcherbakov" type="comment" body=" ~ozheregelya  Please check it as https://jira.hyperledger.org/browse/INDY-1289 is resolved." created="2018-05-14 11:51:21.0" updateauthor="ashcherbakov" updated="2018-05-14 11:51:21.0"/>
<Action id="44584" issue="28437" author="ozheregelya" type="comment" created="2018-05-17 15:25:33.0" updateauthor="ozheregelya" updated="2018-05-17 15:25:33.0"> <body><! CDATA indy-node 1.3.412  New read_ledger doesn't create -read-copy directories. Validator-info and read_ledger data accord to each other.     {code:java} root@605382d6b0cd:/home/indy# validator-info  Validator Node1 is running Validator DID: Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv Verification Key: 33nHHYKnqmtGAVfZZGoP8hpeExeH45Fo8cKmd5mcnKYk7XgWNBxkkKJ Node Port: None Client Port: None Metrics: Uptime: 2 hours, 6 minutes, 25 seconds Total Ledger Transactions: 5027 Total Pool Transactions: 6 Read Transactions/Seconds: 0.00 Write Transactions/Seconds: 0.66 Reachable Hosts: 6/6 Unreachable Hosts: 0/6  root@605382d6b0cd:/home/indy# read_ledger --type domain --count 5027 {code} Validator-info and read_ledger will be additionally tested on larger pools and with larger ledger during load testing.     ></body> </Action>
