<Action id="26875" issue="17358" author="andrey.goncharov" type="comment" body=" ~danielhardman  This tool kicks off migration scripts. We want our migration scripts to have root privileges, don&apos;t we? I mean what if we bring in a new DB, that certainly requires root permissions. Maybe, we should leave node_control_tool running as root, at least for now. What do you think?" created="2017-06-20 18:30:56.0" updateauthor="andrey.goncharov" updated="2017-06-20 18:30:56.0"/>
<Action id="26880" issue="17358" author="danielhardman" type="comment" created="2017-06-20 18:39:50.0" updateauthor="danielhardman" updated="2017-06-20 18:39:50.0"> <body><! CDATA I believe (but do not know for certain) that the way sudo works is that a user can be granted privileges to launch a limited set of top-level processes–and that this process tree can retain the privileged status of the original command. If this is true, then we can make node_control_tool.py run as a limited user that has sudo privileges to run apt, launch the sovrin daemon, and run migration scripts by starting a launcher for the migration script that always has the same starting commandline. This would be strongly preferable to truly running as root, for security reasons.  https://unix.stackexchange.com/questions/215412/allow-certain-guests-to-execute-certain-commands  ></body> </Action>
<Action id="26882" issue="17358" author="andrey.goncharov" type="comment" body=" ~danielhardman  My point is that we do not know what privileges our migrations might require. They are python scripts which can do basically anything. If we create a user with a restricted set of elevated permissions then we limit our migrations. " created="2017-06-20 18:50:07.0" updateauthor="andrey.goncharov" updated="2017-06-20 18:50:07.0"/>
<Action id="26887" issue="17358" author="danielhardman" type="comment" created="2017-06-20 19:04:12.0" updateauthor="danielhardman" updated="2017-06-20 19:04:12.0"> <body><! CDATA You are still not engaging on my point: if I am correct (and I don't know if I am; I want you to find out) you don't need to be root to have unbounded privileges. You just need to be in the sudoers file with the *top level* commands you are authorized to run. All the child processes launched by these top-level processes are also allowed to run. We don't have to enumerate all of them in advance.  If that is wrong, then root is required. Let's find out if my understanding is true or false.  ></body> </Action>
<Action id="30340" issue="17358" author="krw910" type="comment" body=" ~nage  we need some design around this issue." created="2017-08-29 21:29:33.0" updateauthor="krw910" updated="2017-08-29 21:29:33.0"/>
<Action id="64595" issue="17358" author="esplinr" type="comment" body="This issue represents best practice in Unix environments, but feedback on the system is that our current approach is satisfactory even to the security auditors. So we won&apos;t do this work unless someone can show why it is necessary." created="2019-10-11 09:42:26.0" updateauthor="esplinr" updated="2019-10-11 09:42:26.0"/>
