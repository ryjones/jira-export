<Issue id="20217" key="INDY-733" number="733" project="10303" reporter="vladimirwork" assignee="danielhardman" creator="vladimirwork" type="10004" summary="Unable to restore wallet after the pool upgrade" priority="2" resolution="10000" status="10001" created="2017-08-16 15:44:33.0" updated="2019-03-29 20:33:11.0" resolutiondate="2019-03-29 20:33:11.0" votes="0" watches="4" timeoriginalestimate="18000" timeestimate="18000" workflowId="20217"> <description><! CDATA Build Info: indy-node 1.0.110 (master)  Overview: Unable to restore wallet after the pool upgrade.  Preconditions: Installed 1.0.67 (master) pool.  Steps to Reproduce: 1. Enter the wallet. 2. Do an actions using this wallet that are saved in it. 3. Save the wallet or exit the CLI. 4. Perform upgrade to 1.0.110 (master). 5. Run the CLI and connect test.  Actual Results: Error occurred during restoring last active wallet (default.wallet), error: list index out of range Error while running coroutine shell: IndexError('list index out of range',) Traceback (most recent call last): File "/usr/local/bin/sovrin", line 78, in <module> run_cli() File "/usr/local/bin/sovrin", line 56, in run_cli looper.run(cli.shell(*commands)) File "/usr/local/lib/python3.5/dist-packages/stp_core/loop/looper.py", line 259, in run return self.loop.run_until_complete(what) File "/usr/lib/python3.5/asyncio/base_events.py", line 387, in run_until_complete return future.result() File "/usr/lib/python3.5/asyncio/futures.py", line 274, in result raise self._exception File "/usr/lib/python3.5/asyncio/tasks.py", line 239, in _step result = coro.send(None) File "/usr/local/lib/python3.5/dist-packages/stp_core/loop/looper.py", line 250, in wrapper raise ex File "/usr/local/lib/python3.5/dist-packages/stp_core/loop/looper.py", line 237, in wrapper results.append(await coro) File "/usr/local/lib/python3.5/dist-packages/plenum/cli/cli.py", line 1150, in shell self.parse(c) File "/usr/local/lib/python3.5/dist-packages/plenum/cli/cli.py", line 1946, in parse r = action(matchedVars) File "/usr/local/lib/python3.5/dist-packages/sovrin_client/cli/cli.py", line 1790, in _connectTo self.restoreLastActiveWallet() File "/usr/local/lib/python3.5/dist-packages/plenum/cli/cli.py", line 1810, in restoreLastActiveWallet self.errorDuringRestoringLastActiveWallet(baseFileName, e) File "/usr/local/lib/python3.5/dist-packages/plenum/cli/cli.py", line 1816, in errorDuringRestoringLastActiveWallet raise e File "/usr/local/lib/python3.5/dist-packages/plenum/cli/cli.py", line 1805, in restoreLastActiveWallet self._searchAndSetWallet(os.path.join(walletPath, baseFileName)) File "/usr/local/lib/python3.5/dist-packages/plenum/cli/cli.py", line 1634, in _searchAndSetWallet self._loadFromPath(name, copyAs=copyAs, override=override) File "/usr/local/lib/python3.5/dist-packages/plenum/cli/cli.py", line 1559, in _loadFromPath self.restoreWalletByPath(path, copyAs=copyAs, override=override) File "/usr/local/lib/python3.5/dist-packages/plenum/cli/cli.py", line 1767, in restoreWalletByPath wallet = self.walletSaver.loadWallet(walletFilePath) File "/usr/local/lib/python3.5/dist-packages/plenum/client/wallet.py", line 397, in loadWallet wallet = self.decode(wf.read()) File "/usr/local/lib/python3.5/dist-packages/plenum/client/wallet.py", line 324, in decode return jsonpickle.decode(data, keys=True) File "/usr/lib/python3/dist-packages/jsonpickle/__init__.py", line 148, in decode return unpickler.decode(string, backend=backend, keys=keys) File "/usr/lib/python3/dist-packages/jsonpickle/unpickler.py", line 26, in decode return context.restore(backend.decode(string), reset=reset) File "/usr/lib/python3/dist-packages/jsonpickle/unpickler.py", line 119, in restore value = self._restore(obj) File "/usr/lib/python3/dist-packages/jsonpickle/unpickler.py", line 159, in _restore return restore(obj) File "/usr/lib/python3/dist-packages/jsonpickle/unpickler.py", line 243, in _restore_object return self._restore_object_instance(obj, cls) File "/usr/lib/python3/dist-packages/jsonpickle/unpickler.py", line 308, in _restore_object_instance return self._restore_object_instance_variables(obj, instance) File "/usr/lib/python3/dist-packages/jsonpickle/unpickler.py", line 337, in _restore_object_instance_variables self._restore_from_dict(obj, instance) File "/usr/lib/python3/dist-packages/jsonpickle/unpickler.py", line 321, in _restore_from_dict value = self._restore(v) File "/usr/lib/python3/dist-packages/jsonpickle/unpickler.py", line 159, in _restore return restore(obj) File "/usr/lib/python3/dist-packages/jsonpickle/unpickler.py", line 243, in _restore_object return self._restore_object_instance(obj, cls) File "/usr/lib/python3/dist-packages/jsonpickle/unpickler.py", line 308, in _restore_object_instance return self._restore_object_instance_variables(obj, instance) File "/usr/lib/python3/dist-packages/jsonpickle/unpickler.py", line 337, in _restore_object_instance_variables self._restore_from_dict(obj, instance) File "/usr/lib/python3/dist-packages/jsonpickle/unpickler.py", line 321, in _restore_from_dict value = self._restore(v) File "/usr/lib/python3/dist-packages/jsonpickle/unpickler.py", line 159, in _restore return restore(obj) File "/usr/lib/python3/dist-packages/jsonpickle/unpickler.py", line 210, in _restore_id return self._objs obj tags.ID   IndexError: list index out of range  Expected Results: The last active wallet should restore normally.  ></description> </Issue>
