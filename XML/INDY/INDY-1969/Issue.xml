<Issue id="37225" key="INDY-1969" number="1969" project="10303" reporter="andkononykhin" creator="andkononykhin" type="10004" summary="It is possible to repeat the removal of a role from an Identity Owner" priority="4" status="10200" created="2019-01-29 16:07:58.0" updated="2019-02-13 12:51:40.0" votes="0" watches="1" workflowId="48814"> <description><! CDATA If a role is removed multiple times, the request is accepted and in case of repeated actions leads to "duplicates" (only _reqId_ differs) of NYM txns in domain ledger.  *Steps to Reproduce* * Add a steward role to a DID * Remove the steward role from the DID (set the DID role to None) * Remove the steward role from the DID again  *Actual Behavior* * One transaction is written to the ledger setting the DID role to Steward * One transaction is written to the ledger setting the DID role to None * A second transaction is written to the ledger setting the DID role to None  *Expected Behavior* * One transaction should be written to the ledger setting the DID role to Steward * One transaction should be written to the ledger setting the DID role to None * The second attempt to remove the Steward role should generate an error "The specified DID does not have the role"  Example cases: * trustee creates steward without verkey - demotes it - demotes it again * trustee creates identity owner without verkey - demotes itÂ (trustee here can be replaced with steward or trust_anchor)  As a special case: * cidentity owner (with verkey) demotes themselves  Notes: * This was found while working on implementation of new authentication rules in INDY-1730 * In general, it should not be possible to write a transaction that does not modify the current state.  ></description> </Issue>
