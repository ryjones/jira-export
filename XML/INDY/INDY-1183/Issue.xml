<Issue id="27873" key="INDY-1183" number="1183" project="10303" reporter="mgbailey" creator="mgbailey" type="10004" summary="Newly upgraded STN fails to accept transactions" environment="STN running 1.3.52" priority="1" resolution="10000" status="10001" created="2018-02-20 20:00:30.0" updated="2019-03-29 20:33:51.0" resolutiondate="2019-03-29 20:33:51.0" votes="0" watches="3" workflowId="27875"> <description><! CDATA Today we upgraded the STN from 1.2.50 to 1.3.52. We were posting transactions to it successfully yesterday before the upgrade, but now we are unable to successfully post transactions.  For example, at 19:17:17 I attempted to post a DID: {code:java} indy@sandbox> send NYM dest=SYLcHfW7PEU74ZWHkonbqx verkey=~7Xz2uHvQ8swWbchnsj1aAN Adding nym SYLcHfW7PEU74ZWHkonbqx {code} But it did not get written to the ledger.  The upgrade was successful for all nodes except for ibm, where we performed a manual upgrade.  I have access to 7 of 10 nodes, whose logs are attached.  All of our nodes (plus ibm) show that the same primaries have been selected on them.  validator-info shows connectivity between all nodes.  One thing that I am seeing are errors regarding consistency proofs: {code:java} 2018-02-20 19:15:21,880 | ERROR    | ledger_manager.py    (1001) | _buildConsistencyProof | virginia cannot build consistency proof till 35 since its ledger size is 32 {code} It appears that one of the nodes, pcValidator01, has 3 more transactions than the rest?  I will be contacting that steward for logs and ledger data, which I will post here.  If my supposition that there are 3 additional transactions in one validator's ledger is correct, then there are 2 things to look at:  # How did the transactions get in there? # Why does one node's ledger being out of sync prevent transactions in the whole pool?  ></description> </Issue>
