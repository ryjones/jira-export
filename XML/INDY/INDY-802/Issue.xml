<Issue id="20588" key="INDY-802" number="802" project="10303" reporter="ozheregelya" creator="ozheregelya" type="10004" summary=" Client  Hashes are not compared during first connection to the pool if ledgers have the same size" priority="4" resolution="10200" status="10001" created="2017-09-03 11:01:54.0" updated="2019-03-29 20:34:00.0" resolutiondate="2019-03-29 20:34:00.0" votes="0" watches="1" workflowId="20592"> <environment><! CDATA Build Info: (stable repo)   indy-node 1.1.33   indy-anoncreds 1.0.10   indy-plenum 1.1.24   sovrin 1.1.6 OS/Platform: Ubuntu 16.04.2 LTS Setup: 4+1 nodes, 1 client  ></environment> <description><! CDATA Steps to Reproduce: 1. Set up the pool of 4 nodes. 2. Put to the .sovrin on client machine following file:  (identifiers contain old CIDs instead of currently used DIDs) {code:java} {"data":{"alias":"Node1","client_ip":"10.0.0.2","client_port":9702,"node_ip":"10.0.0.2","node_port":9701,"services": "VALIDATOR" },"dest":"Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv","identifier":"FYmoFw55GeQH7SRFa37dkx1d2dZ3zUF8ckg7wmL7ofN4","txnId":"fea82e10e894419fe2bea7d96296a6d46f50f93f9eeda954ec461b2ed2950b62","type":"0"} {"data":{"alias":"Node2","client_ip":"10.0.0.3","client_port":9704,"node_ip":"10.0.0.3","node_port":9703,"services": "VALIDATOR" },"dest":"8ECVSk179mjsjKRLWiQtssMLgp6EPhWXtaYyStWPSGAb","identifier":"8QhFxKxyaFsJy4CyxeYX34dFH8oWqyBv1P4HLQCsoeLy","txnId":"1ac8aece2a18ced660fef8694b61aac3af08ba875ce3026a160acbc3a3af35fc","type":"0"} {"data":{"alias":"Node3","client_ip":"10.0.0.4","client_port":9706,"node_ip":"10.0.0.4","node_port":9705,"services": "VALIDATOR" },"dest":"DKVxG2fXXTU8yT5N7hGEbXB3dfdAnYv1JczDUHpmDxya","identifier":"2yAeV5ftuasWNgQwVYzeHeTuM7LwwNtPR3Zg9N4JiDgF","txnId":"7e9f355dffa78ed24668f0e0e369fd8c224076571c51e2ea8be5f26479edebe4","type":"0"} {"data":{"alias":"Node4","client_ip":"10.0.0.5","client_port":9708,"node_ip":"10.0.0.5","node_port":9707,"services": "VALIDATOR" },"dest":"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA","identifier":"FTE95CVthRtrBnK2PYCBbC9LghTcGwi9Zfi1Gz2dnyNx","txnId":"aa5e817d7cc626170eca175822029339a444eb0ee8f0bd20d3b0b76e566fb008","type":"0"}{code} 3. Open the CLI, send NYM to check that client works with the pool. => NYM is successfully send. 4. Using CLI, add 1 more node to the pool, exit the CLI. 5. Open CLI again, connect to test environment. => Catch up was started, following message appear in CLI during connection to test: {code:java} FiZUBGTj5sXzKtRHbuYVoXr9ePMeUku8hUjwvecHaKTm could not verify catchup reply CATCHUP_REP{'ledgerId': 0, 'consProof':   , 'txns': {'5': {'signature': '514zkpnsiekKieL9FzJwK3vh4Qq3S9tVDmDr3QLeUS1GuoR231Rs2dM575KVosB8yYrqFR8eYUHJhLZ2YMHWq91S', 'reqId': 1504177080495373, 'txnTime': 1504177080, 'data': {'node_port': 9701, 'node_ip': '10.0.0.6', 'alias': 'Node5', 'client_ip': '10.0.0.6', 'services':  'VALIDATOR' , 'client_port': 9702}, 'identifier': 'XhYtvJqezMUKfF6KVNaGmT', 'dest': '4Tn3wZMNCvhSTXPcLinQDnHyj56DTLQtL61ki4jo2Loc', 'type': '0'}}} since Inconsistency: different root hashes for the same tree size {code}  Actual Results: Catch up is happened only when ledger sizes are different.  Expected Results: Catch up should also happen when ledger sizes are the same, but hashes are different.  ></description> </Issue>
