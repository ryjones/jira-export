<Action id="61474" issue="40771" author="toktar" type="comment" created="2019-07-04 15:07:42.0" updateauthor="toktar" updated="2019-07-04 15:07:42.0"> <body><! CDATA *PoA:* * Add TAA timestamp check to the client request validation that timestamp is date. If timestamp has hours, minutes, seconds or microseconds, reject this request with the _InvalidClientTaaAcceptanceError_ with message _"TAA timestamp is too precise and is a privacy risk."_ * Change TAA timestamp validation. Timestamp must belong to the time period from   {code:java} (taa_txn_time - TXN_AUTHOR_AGREEMENT_ACCEPTANCE_TIME_BEFORE_TAA_TIME).date(){code} to  {code:java} (req_pp_time + TXN_AUTHOR_AGREEMENT_ACCEPTANCE_TIME_AFTER_PP_TIME).date(){code}  * Add tests: ** Send a request with TAA timestamp with hours - wait reject with _"TAA timestamp is too precise and is a privacy risk."_ message ** Send a request with TAA timestamp with minutes - wait reject with _"TAA timestamp is too precise and is a privacy risk."_ message ** Send a request with TAA timestamp with seconds - wait reject with _"TAA timestamp is too precise and is a privacy risk."_ message ** Send a request with TAA timestamp with microseconds - wait reject with _"TAA timestamp is too precise and is a privacy risk."_ message ** Send a request with TAA timestamp with seconds and hours - wait reject with _"TAA timestamp is too precise and is a privacy risk."_ message ** Send a request with TAA timestamp is lower than (taa_txn_time - BEFORE_TAA_TIME)  - wait reject with "Txn Author Agreement acceptance time is inappropriate:" message ** Send a request with correct TAA timestamp - wait success validation ** Send a request with TAA timestamp is higher than (req_pp_time + AFTER_PP_TIME)  - wait reject with "Txn Author Agreement acceptance time is inappropriate:" message ** Repeat 3 tests above with different combinations of time intervals relative to the borders of the day.  ></body> </Action>
<Action id="61476" issue="40771" author="toktar" type="comment" body="PR: https://github.com/hyperledger/indy-plenum/pull/1256" created="2019-07-05 08:16:07.0" updateauthor="toktar" updated="2019-07-05 08:16:07.0"/>
<Action id="61530" issue="40771" author="toktar" type="comment" created="2019-07-09 12:49:54.0" updateauthor="toktar" updated="2019-07-09 12:49:54.0"> <body><! CDATA *Problem reason:* - If a client signed two requests with TAA and send the second request after a few minutes after the first request then the second will be rejected.  *Changes:* - Check that a TAA timestamp in client requests doesn't contain time, only date. - Check that a TAA timestamp  belong to the time period from {code:java} (taa_txn_time - TXN_AUTHOR_AGREEMENT_ACCEPTANCE_TIME_BEFORE_TAA_TIME).date(){code} to {code:java} (req_pp_time + TXN_AUTHOR_AGREEMENT_ACCEPTANCE_TIME_AFTER_PP_TIME).date(){code}  *PR:* *  https://github.com/hyperledger/indy-node/pull/1377  *  https://github.com/hyperledger/indy-plenum/pull/1256   *Version:* * indy-node 1.9.1025 -master * (indy-plenum 1.9.836 -master)  *Risk factors:* - Problem with TAA for the client request validation.  *Risk:* - Medium  *Test:* *  test_taa_acceptance_validation.py|https://github.com/hyperledger/indy-plenum/pull/1256/files#diff-619bfcc06ab06b2941cabf54af13dd7e    *Recommendations for QA:* * Create a request with TAA and send it after more than 3 minutes after creation. Check that the transaction from request successfully was ordered. * Send a request with TAA timestamp with a time. Check that a reject was received * Check that request with TAA timestamp from yesterday will be rejected * Check that request with TAA timestamp from tomorrow will be rejected * Check that request with TAA timestamp from tomorrow after 1 minute after 00:00 will be passed * Check that request with TAA timestamp from yesterday in 23:59 will be passed  ></body> </Action>
<Action id="61607" issue="40771" author="vladimirwork" type="comment" created="2019-07-11 10:33:09.0" updateauthor="vladimirwork" updated="2019-07-11 10:33:09.0"> <body><! CDATA Build Info: indy-node 1.9.0~dev1028 plugins 1.0.0~dev62  Steps to Validate: 1. Create a request with TAA and send it after more than 3 minutes after creation. Check that the transaction from request successfully was ordered. 2. Send a request with TAA timestamp with a time. Check that a reject was received. 3. Check that request with TAA timestamp from yesterday will be rejected. 4. Check that request with TAA timestamp from tomorrow will be rejected.  Actual Results: All TAA changes work as expected.  ></body> </Action>
