<Issue id="35517" key="INDY-1867" number="1867" project="10303" reporter="ozheregelya" assignee="derashe" creator="ozheregelya" type="10004" summary="Pool stopped writing after production load with fees" priority="2" resolution="10000" status="10001" created="2018-11-21 13:29:33.0" updated="2019-03-29 20:33:36.0" resolutiondate="2019-03-29 20:33:36.0" votes="0" watches="4" workflowId="46983"> <description><! CDATA Environment: indy-node 1.6.690 libindy 1.6.7~816  Steps to Reproduce: 1. Setup the pool. 2. Run reading load test from 2 machines: {code:java} perf_processes.py -g live_transactions_genesis -m t -n 1 -y one -s 000000000000000000000000Trustee1 -s 000000000000000000000000Trustee2 -s 000000000000000000000000Trustee3 -s 000000000000000000000000Trustee4 --ext "{\"payment_addrs_count\":10,\"addr_mint_limit\":10,\"mint_by\":10,\"payment_method\":\"sov\",\"plugin_lib\":\"libsovtoken.so\",\"plugin_init\":\"sovtoken_init\",\"trustees_num\":4}" -k " {\"get_nym\":{\"count\": 9}}, {\"get_schema\":{\"count\": 2}}, {\"get_attrib\":{\"count\": 2}}, {\"get_cred_def\":{\"count\": 2}}, {\"get_revoc_reg_def\":{\"count\": 1}}, {\"verify_payment\":{\"count\": 1}} " -c 450 -b 100 -l 50 --short_stat{code} 3. Run writing load test from 3rd machine: {code:java} perf_processes.py -g live_transactions_genesis -m t -n 1 -y one -s 000000000000000000000000Trustee1 -s 000000000000000000000000Trustee2 -s 000000000000000000000000Trustee3 -s 000000000000000000000000Trustee4 --ext "{\"payment_addrs_count\":1000,\"addr_mint_limit\":1000,\"mint_by\":500,\"payment_method\":\"sov\",\"plugin_lib\":\"libsovtoken.so\",\"plugin_init\":\"sovtoken_init\",\"trustees_num\":4, \"set_fees\":{\"1\":1,\"100\":1,\"101\":1,\"102\":1,\"113\":1,\"10001\":1}}" -k " {\"nym\":{\"count\": 4}}, {\"schema\":{\"count\": 1}}, {\"attrib\":{\"count\": 3}}, {\"cred_def\":{\"count\": 1}}, {\"revoc_reg_def\":{\"count\": 1}}, {\"payment\":{\"count\": 9}} " -c 10 -b 10 -l 10{code}    *Actual Results:* Pool stopped writing after ~30K domain txns written. 17 nodes wrote 30616 txns, 8 nodes (11, 14, 1, 12, 9, 19, 20) wrote 30700.  Logs and metrics: s3://qanodelogs/indy-1770/live-20-11-18-production-mix-fees To get logs, run following command on log processor machine:  aws s3 cp --recursive s3://qanodelogs/indy-1770/live-20-11-18-production-mix-fees/ /home/ev/logs/indy-1770/live-20-11-18-production-mix-fees/  ></description> </Issue>
