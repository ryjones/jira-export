<Action id="37502" issue="24816" author="vladimirwork" type="comment" created="2017-12-15 12:17:33.0" updateauthor="vladimirwork" updated="2017-12-15 12:27:03.0"> <body><! CDATA Build Info: indy-node 1.2.241  Steps to Reproduce: 1. Install pool of 4 nodes. 2. Run load tests to fill ledger with ~10000 txns. 3. Add the 5th node. 4. Send NYM txn (send NYM dest=TLYLkqxLmZS6zhyzDpUD21). 5. Add the 6th node. 6. Send NYM (send NYM dest=5nGBeNBbhvxzUxoGnUAc2v). 7. Send NYM (send NYM dest=JuWFpbXytMZxWEdH6oBwk1). 8. Wait about 30 minutes. 9. Send NYM (send NYM dest=Kw1qHdrAGDVWKKM6Yifx79).  Actual Results: Step 4 NYM is added. Step 6 and 7 NYMs are not added. Node 5 catches up to 10211 txns but txn from Step 5 (adding Node 6 Steward) is not written to Node 5 domain ledger (so after Step 5 initial 4 nodes have 10212 txns but Node 5 has still 10211 and looks like not in consensus with the whole pool). Node 6 catches up to 8173 txns right after adding to the pool and up to 10212 after ~30 minutes only (NYM from Step 9 (sent after full Node 6 catch up) is not added too).  Logs before and after full Node 6 catchup are in attachment.  ^logs_before_full catchup.7z    ^logs_after_full_catchup.7z    ></body> </Action>
<Action id="37709" issue="24816" author="dsurnin" type="comment" body="node build 246 should contain the fix" created="2017-12-21 11:52:11.0" updateauthor="dsurnin" updated="2017-12-21 11:52:11.0"/>
<Action id="37724" issue="24816" author="vladimirwork" type="comment" created="2017-12-21 16:15:24.0" updateauthor="vladimirwork" updated="2017-12-21 16:15:24.0"> <body><! CDATA Build Info: indy-node 1.2.246  Steps to Reproduce: 1. Install pool of 4 nodes. 2. Run load tests to fill ledger with ~10000 txns. 3. Add the 5th node. 4. Send NYM txn (send NYM dest=TLYLkqxLmZS6zhyzDpUD21). 5. Add the 6th node.  Actual Results: Node 5 catches up successfully but doesn't reach consensus (NYMs from Steps 4, 6 aren't added to 5th node ledger). Node 6 doesn't catch up and doesn't reach consensus.  ^_node1.txt    ^_node5.txt    ^_node6.txt    ></body> </Action>
<Action id="38427" issue="24816" author="dsurnin" type="comment" created="2018-01-11 12:41:42.0" updateauthor="dsurnin" updated="2018-01-11 12:41:42.0"> <body><! CDATA new node should use fixed plenum  fixed plenum version is 215  ></body> </Action>
<Action id="38442" issue="24816" author="ashcherbakov" type="comment" body=" ~dsurnin  Please provide description of changes" created="2018-01-11 15:16:31.0" updateauthor="ashcherbakov" updated="2018-01-11 15:16:31.0"/>
<Action id="38483" issue="24816" author="dsurnin" type="comment" created="2018-01-12 04:33:09.0" updateauthor="dsurnin" updated="2018-01-12 04:33:09.0"> <body><! CDATA Problem reason: watermarks were not changed after catch up during the node were connected to pool  Changes: add watermark changes after catch up prevent reset of watermark on primary change in case of propagate  PR: https://github.com/hyperledger/indy-plenum/pull/491  Version: plenum 215  Risk factors: view change propagation  Risk: Med  Covered with tests: test_add_node_to_pool_with_large_ppseqno.py test_recover_primary_no_view_change.py  ></body> </Action>
<Action id="38499" issue="24816" author="vladimirwork" type="comment" created="2018-01-12 13:18:13.0" updateauthor="vladimirwork" updated="2018-01-12 13:18:13.0"> <body><! CDATA Build Info: indy-node 1.2.265 indy-plenum 1.2.215  Steps to Validate: 1. Install pool of 4 nodes. 2. Run load tests to fill ledger with ~10000 txns. 3. Add the 5th node. 4. Send NYM txn. 5. Add the 6th node. 6. Send NYM txn.  Actual Results: Both added nodes catch up and reach consensus successfully.  ></body> </Action>
