<Issue id="40866" key="INDY-2161" number="2161" project="10303" reporter="mgbailey" assignee="vladimirwork" creator="mgbailey" type="10004" summary="After a ledger-triggered upgrade of the Sovrin package failed, indy-node upgraded to an incorrect version" environment="Sovrin MainNet, indy-node version 1.7.1, sovrin version various." priority="2" resolution="10000" status="10001" created="2019-07-01 18:06:20.0" updated="2019-10-11 12:45:06.0" resolutiondate="2019-10-11 12:45:06.0" votes="0" watches="3" workflowId="53823"> <description><! CDATA An attempt was made to upgrade Sovrin MainNet that failed due to expired PGP keys on the repo. That is not the issue to be explored in this ticket. What happened afterwards is what needs examination.  The upgrade command that was posted was an attempt to get all nodes on the network onto the same version of the Sovrin package, including sovtoken, which had not previously been installed on MainNet. As such, the upgrade was to sovrin 1.1.41, which has the current version of indy-node installed on MainNet (1.7.1) as a dependency. The current head for indy-node in the repo is 1.8.1.  It appears that following failure of the sovrin package, the upgrade software then installed indy-node 1.8.1. This in spite of: * There was a package install error, which should abort the entire process * 1.8.1 was *not* the dependent version of the sovrin package being installed  This behavior happened on most nodes. Journalctl and indy logs from ev1 are attached, along with the relevant portion of the config ledger.  ></description> </Issue>
