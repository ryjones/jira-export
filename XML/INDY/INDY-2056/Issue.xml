<Issue id="39376" key="INDY-2056" number="2056" project="10303" reporter="lijamie" assignee="vladimirwork" creator="lijamie" type="10004" summary="Exception in node_leecher_service.py" priority="3" resolution="10003" status="10001" created="2019-04-17 22:54:44.0" updated="2019-04-26 12:26:44.0" resolutiondate="2019-04-25 14:43:40.0" votes="0" watches="3" workflowId="52255"> <description><! CDATA This is how to re-produce. # Start 3 nodes, say, 1, 2, 3 # Add #4.  # Start #4.  Another way to reproduce. # Start 3 nodes, say 1, 2, 3. # Stop #1 and wipe the data of #1.  # Restart #1.  The following is the stack trace.  File ".../.virtualenvs/venv/lib/python3.5/site-packages/plenum/server/node.py", line 1306, in prod c += await self.serviceNodeMsgs(limit) File ".../.virtualenvs/venv/lib/python3.5/site-packages/plenum/common/metrics_collector.py", line 375, in wrapper return await f(self, *args, **kwargs) File ".../.virtualenvs/venv/lib/python3.5/site-packages/plenum/server/node.py", line 1357, in serviceNodeMsgs await self.processNodeInBox() File ".../.virtualenvs/venv/lib/python3.5/site-packages/plenum/common/metrics_collector.py", line 375, in wrapper return await f(self, *args, **kwargs) File ".../.virtualenvs/venv/lib/python3.5/site-packages/plenum/server/node.py", line 1951, in processNodeInBox await self.process_one_node_message(m) File ".../.virtualenvs/venv/lib/python3.5/site-packages/plenum/server/node.py", line 1955, in process_one_node_message await self.nodeMsgRouter.handle(m) File ".../.virtualenvs/venv/lib/python3.5/site-packages/plenum/server/router.py", line 86, in handle res = self.handleSync(msg) File ".../.virtualenvs/venv/lib/python3.5/site-packages/plenum/server/router.py", line 75, in handleSync return self.getFunc(msg 0 )(*msg) File ".../.virtualenvs/venv/lib/python3.5/site-packages/plenum/common/metrics_collector.py", line 362, in wrapper return f(self, *args, **kwargs) File ".../.virtualenvs/venv/lib/python3.5/site-packages/plenum/common/ledger_manager.py", line 130, in processCatchupRep self._node_leecher_inbox.put_nowait((rep, frm)) File ".../.virtualenvs/venv/lib/python3.5/site-packages/plenum/common/channel.py", line 59, in put_nowait self._observable.notify_sync(msg) File ".../.virtualenvs/venv/lib/python3.5/site-packages/plenum/common/channel.py", line 41, in notify_sync handler(msg) File ".../.virtualenvs/venv/lib/python3.5/site-packages/plenum/common/channel.py", line 161, in _process_sync return handler(*msg) File ".../.virtualenvs/venv/lib/python3.5/site-packages/plenum/server/catchup/node_leecher_service.py", line 96, in _on_ledger_catchup_complete self._catchup_till = self._calc_catchup_till(msg.last_3pc) File ".../.virtualenvs/venv/lib/python3.5/site-packages/plenum/server/catchup/node_leecher_service.py", line 184, in _calc_catchup_till start_size = ledger.size AttributeError: 'NoneType' object has no attribute 'size'           ></description> </Issue>
