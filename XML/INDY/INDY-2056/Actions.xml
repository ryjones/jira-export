<Action id="59336" issue="39376" author="sergey.khoroshavin" type="comment" created="2019-04-19 10:23:07.0" updateauthor="sergey.khoroshavin" updated="2019-04-19 10:23:36.0"> <body><! CDATA  ~lijamie   I'm working on this right now and I think there will be a fix soon, however I wanted to clarify a bit some things: * What node version did you use? (I suspect it was some of dev builds from master) * Did you use any plugins (which add custom ledgers) in your setup? * Did you try second scenario with 4 nodes?  ></body> </Action>
<Action id="59347" issue="39376" author="lijamie" type="comment" created="2019-04-19 18:32:43.0" updateauthor="lijamie" updated="2019-04-19 18:32:43.0"> <body><! CDATA # I pulled it from the master branch about 2 weeks ago. I am not able to trace the version right now.  # I did not use any plugins. # Yes, I tried that with 4 nodes.   I had rolled back to an older version which is about 1 months old. Unfortunately I am not able to reproduce the bug again. My temporary fix is to cast ledger_id to int before Line 183 as the following to avoid the NoneType exception.     ledger_id = int(ledger_id)    ledger = self._provider.ledger(ledger_id)    start_size = ledger.size  ></body> </Action>
<Action id="59389" issue="39376" author="vladimirwork" type="comment" body="I cannot reproduce this against 1.7.0~dev901 master for both 3 and 4 nodes setups." created="2019-04-22 16:16:48.0" updateauthor="vladimirwork" updated="2019-04-22 16:16:48.0"/>
<Action id="59391" issue="39376" author="sergey.khoroshavin" type="comment" created="2019-04-22 16:29:43.0" updateauthor="sergey.khoroshavin" updated="2019-04-22 16:30:49.0"> <body><! CDATA  ~lijamie  I've analysed current source code and cannot find any case where situation you described is possible. However node_leecher_service is a very recent addition, so it is possible that you somehow managed to get really broken intermediate version. Also during analysis we've found and fixed yet another unhandled case (that's why I was asking you about plugins), so thanks a lot for your report! Please try latest master version and tell us if you still have this problem.  ></body> </Action>
