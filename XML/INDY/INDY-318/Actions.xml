<Action id="28490" issue="18598" author="andkononykhin" type="comment" created="2017-07-17 12:09:36.0" updateauthor="andkononykhin" updated="2017-07-17 12:09:36.0"> <body><! CDATA Hello,  ~stevetolman   As  ~alexander.shekhovcov  described plenum testing slows down development greatly. And it became more sensitive after we had merged it with 3 other repos (state, stp, ledger), so each PR to them (their code) lead to testing plenum's code as well.  We discussed that with  ~ashcherbakov  and we think that parallel testing mentioned by  ~alexander.shekhovcov  is the preferred option here. And it's very important to achieve progress here asap. Could you consider adding this task to current sprint (e.g. M1)?  Thank you     ></body> </Action>
<Action id="29252" issue="18598" author="mzk-vct" type="comment" body="*#3* not reproduced " created="2017-07-31 16:44:21.0" updateauthor="mzk-vct" updated="2017-07-31 16:44:21.0"/>
<Action id="29290" issue="18598" author="alexander.shekhovcov" type="comment" created="2017-08-01 12:09:38.0" updateauthor="alexander.shekhovcov" updated="2017-08-01 15:32:36.0"> <body><! CDATA *UPD:*  h4. 1. Speed up the tests  indy-plenum 1.0.77 Total test time: 98 mins  There are no extremely slow tests so this point will save only 10-20 mins if we somehow restrict all test by 60 sec. I suggest skip this.  !tests.png|thumbnail!   ^enh-tests-time.txt    h4. 2. Keep the test suite running time under some certain time.   See #1 above.  h4. 4. Intermittent tests  Fixed in INDY-400  ></body> </Action>
<Action id="29429" issue="18598" author="ashcherbakov" type="comment" body="Please timebox this to 1-2 more days. Try to come to some reasonable improvement, maybe not a perfect solution." created="2017-08-04 07:33:16.0" updateauthor="ashcherbakov" updated="2017-08-04 07:33:16.0"/>
<Action id="29643" issue="18598" author="alexander.shekhovcov" type="comment" created="2017-08-10 09:41:01.0" updateauthor="alexander.shekhovcov" updated="2017-08-10 10:07:30.0"> <body><! CDATA (/) Done.  What have been done: #  the plenum tests were split on 3 parts in order to run in parallel|https://github.com/hyperledger/indy-plenum/commit/b5899097b4ece6817db30c1082f57e2298905ffe#diff-58231b16fdee45a03a4ee3cf94a9f2c3R29  # fixed runner.py, run the tests as modules (not as a files) #  added an option PYTHONASYNCIODEBUG|https://github.com/hyperledger/indy-plenum/commit/b5899097b4ece6817db30c1082f57e2298905ffe#diff-db4046d22a6d11879df365370f43fc74R109  #  removed extra searching in test logs |https://github.com/hyperledger/indy-plenum/commit/b5899097b4ece6817db30c1082f57e2298905ffe#diff-f405897ac326641a5dd89f55302ff528R247  # remove some relation between tests # added xdist support (but xdist is not used for now), also see GroupedLoadScheduling  *Result:* indy-plenum: *20-30 min* on CI (3 executors) indy-node: ~20 min on CI (1 executor)  The next steps may be: * use xdist (all ready for that but some tests are failing) * speed up the slowest tests (for example view_change suit works 10+ mins)  *How to test:* * prepare virtual environment for indy-plenum * install pytest-xdist pypi packet * checkout indy-plenum repo * cd into root directory of code * download runner https://github.com/evernym/jenkins-shared/blob/master/resources/runner.py * execute `python runner.py --dir plenum --nooutput`  Make sure all tests are passed.     ></body> </Action>
<Action id="29657" issue="18598" author="vladimirwork" type="comment" created="2017-08-10 15:04:44.0" updateauthor="vladimirwork" updated="2017-08-10 15:04:44.0"> <body><! CDATA Total 1 runs 525 passed, 1 failed, 0 errors, 67 skipped Failed tests: plenum/test/test_util.py:test_utc_epoch Tests run. Returning 256 !Screenshot.PNG|thumbnail!   ></body> </Action>
<Action id="29797" issue="18598" author="vladimirwork" type="comment" created="2017-08-14 11:53:00.0" updateauthor="vladimirwork" updated="2017-08-14 11:53:00.0"> <body><! CDATA Total 1 runs 561 passed, 0 failed, 0 errors, 67 skipped Tests run. Returning 0 !_Screenshot.PNG|thumbnail!   ></body> </Action>
<Action id="29834" issue="18598" author="vladimirwork" type="comment" body="All plenum tests are passed successfully during 5 full runs (vm configuration should be at least 4GB RAM and 4 cores to avoid resource lack errors)." created="2017-08-15 07:01:23.0" updateauthor="vladimirwork" updated="2017-08-15 07:01:23.0"/>
