<Action id="49598" issue="33086" author="derashe" type="comment" created="2018-08-30 09:06:39.0" updateauthor="derashe" updated="2018-09-05 07:58:26.0"> <body><! CDATA  ~mgbailey   ~ashcherbakov   Problem reason: * We can't demote node because there are another node "valNode01" with same ip address: 54.214.176.123  Consequences:  * Now we have two nodes in the pool ("valNode01" and "trustscience-validator01"), that cannot be updated (including demotion, promotion) * This is a bug and it will be fixed in scope of this ticket  * That situation was caused by adding "trustscience-validator01" node with ips and ports similar to "valNode01" ips and ports  Commited info:  *  https://github.com/hyperledger/indy-plenum/pull/904   Rec for QA:  test on indy node ver >= 1.6.596  Try to reproduce some cases (they should fail): * add new node with name similar to existing one * add new node with host address (node/client) similar to existing one * change existing node's alias address to another exisiting node's alias * change existing node's host address to another exisiting node's HA  ></body> </Action>
<Action id="50160" issue="33086" author="derashe" type="comment" created="2018-09-10 14:38:02.0" updateauthor="derashe" updated="2018-09-10 14:38:16.0"> <body><! CDATA There is fix for demote and node txn validation in 1.6.596 node version.   We can demote "trustscience-validator01" node only if we change it's ip:port pair or "valNode01"'s ip:port pair  ></body> </Action>
<Action id="50163" issue="33086" author="mgbailey" type="comment" body=" ~Derashe  Is it possible to write a transaction to the ledger that would change the valNode01 ip:port data? What versions of indy will allow this? Only 1.6.596 and newer? Who (steward and/or trustee) can make this change? I would expect only the steward can, but I&apos;m just checking." created="2018-09-10 15:16:38.0" updateauthor="mgbailey" updated="2018-09-10 15:16:38.0"/>
<Action id="50178" issue="33086" author="derashe" type="comment" created="2018-09-10 17:42:36.0" updateauthor="derashe" updated="2018-09-10 17:42:36.0"> <body><! CDATA  ~mgbailey   * Yes, it is possible to change valNode01 ip:port data * It is possible with version that you have right now on the STN * Only steward of the node can change it's ip:port  All in all, you have two options to demote "trustscience-validator01": * first: You need both stewards to do this ** Change valNode01 ip:port ** Demote trustscience-validator01 * second: You need one steward (trustscience-validator01) ** Change trustscience-validator01 ip:port ** Demote trustscience-validator01  Hope, one of this would help.  ></body> </Action>
<Action id="50193" issue="33086" author="mgbailey" type="comment" body="Thanks,  ~Derashe  for the potential work-arounds. I will ask the steward to give them a try." created="2018-09-10 19:50:00.0" updateauthor="mgbailey" updated="2018-09-10 19:50:00.0"/>
<Action id="50308" issue="33086" author="ozheregelya" type="comment" created="2018-09-11 20:23:05.0" updateauthor="ozheregelya" updated="2018-09-11 20:23:05.0"> <body><! CDATA  ~mgbailey , Update of the valNode01 is possible on both of 1.3.62 and future RC. Behavior of NODE transactions was not changed. Only STEWARD can update node data and both of STEWARD and TRUSTEE can demote node.  ></body> </Action>
<Action id="50309" issue="33086" author="ozheregelya" type="comment" created="2018-09-11 20:36:21.0" updateauthor="ozheregelya" updated="2018-09-11 20:36:21.0"> <body><! CDATA Environment: indy-node 1.3.375 (master analog of version in STN and SLN) -> 1.6.601  Steps to Validate: 1. Set up the pool with two nodes with the same IPs and ports. 2. Change IPs and/or ports on one of these nodes. => Node can be demoted (old CLI). 3. Add one more node with the same IPs and ports for next steps. 4. Upgrade the pool to the latest master version. 5. Try to demote one of these node. => Node can be demoted (new CLI). 6. Try to update any node to get the same IPs and ports on two nodes. 7. Try to add new node to get the same IPs and ports on two nodes. => Situation from description is impossible on newer versions.  Actual Results: Situation from description is impossible in future. Nodes with the same IPs can be demoted.  ></body> </Action>
<Action id="50325" issue="33086" author="derashe" type="comment" created="2018-09-12 07:26:30.0" updateauthor="derashe" updated="2018-09-12 07:26:30.0"> <body><! CDATA Yes, I'm sorry.  ~ozheregelya  is right.  ~mgbailey   Work-arounds can be processed easier way: * first: You need only valNode01 steward to do this ** valNode01 change valNode01's ip:port ** Trustee demote trustscience-validator01  * second: You need only trustscience-validator01 steward to do this ** trustscience-validator01 change trustscience-validator01's ip:port ** Trustee demote trustscience-validator01     ></body> </Action>
