<Action id="49269" issue="33146" author="ckochenower" type="comment" created="2018-08-22 22:29:34.0" updateauthor="ckochenower" updated="2018-08-22 22:29:34.0"> <body><! CDATA The STDOUT from the "demote-promote" Chaos experiment located  here|https://github.com/evernym/chaosindy/blob/master/experiments/demote-promote.json  is attached:   ^run-demote-promote.out    ></body> </Action>
<Action id="49270" issue="33146" author="ckochenower" type="comment" body="I am rerunning the experiment with a 60 second pause/sleep between demoting and promoting the randomly selected node. Doing so ensures that the other nodes have time to see that the node was demoted and to reduce their f_value and Count_of_replicas values (because we are going from 10 to 9 nodes each time) before the demoted node is brought back into the pool." created="2018-08-22 22:59:14.0" updateauthor="ckochenower" updated="2018-08-22 22:59:14.0"/>
<Action id="49287" issue="33146" author="ckochenower" type="comment" created="2018-08-23 14:29:29.0" updateauthor="ckochenower" updated="2018-08-23 14:56:54.0"> <body><! CDATA Adding a 60 second pause/sleep between demoting and then promoting the node allows the experiment to run w/o failure through the night. The experiment successfully ran 316 times.  *Therefore, it appears that the pool can be compromised if the nodes are allowed to exit and then reenter the pool too quickly.*  The pool starts with 10 transactions on the Pool Ledger. Each iteration of the experiment increases the Pool Ledger by 2; one demote transaction and one promote transaction. With 316 successful iterations of the experiment, I would have expected the Pool Ledger Size (PLS) to be much larger than 109. It should have been closer to 316 * 2 + 10 = 642. I'm not sure how to explain the transaction count of 109.  !Screen Shot 2018-08-23 at 8.33.11 AM.png|thumbnail!   As a side note, it appears that even though the primary is guaranteed to be excluded from the list of nodes from which to randomly select a node for demotion, the pool experienced at least one view change. The experiment started with Node1 as the primary. Node2 was the primary after 316 iterations of the experiment.  ></body> </Action>
<Action id="51279" issue="33146" author="ashcherbakov" type="comment" body="The issue may be the same as addressed in INDY-1578, INDY-1719, INDY-1720" created="2018-09-27 15:50:57.0" updateauthor="ashcherbakov" updated="2018-09-27 15:50:57.0"/>
<Action id="53261" issue="33146" author="derashe" type="comment" created="2018-11-09 12:37:09.0" updateauthor="derashe" updated="2018-11-09 13:50:23.0"> <body><! CDATA During research, Janko reproduced the above situation in test environment. In this case we were able to distinguish some bugs, find them in code and create related tickets (Â INDY-1719, INDY-1720).  So problems that were described in this ticket will be solved in scope of them and this ticket can be closed.  ></body> </Action>
