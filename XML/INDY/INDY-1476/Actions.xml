<Action id="47353" issue="31884" author="ashcherbakov" type="comment" body=" ~mgbailey  How did you run `read_ledger`? It outputs just first 100 txns by default." created="2018-07-16 13:17:24.0" updateauthor="ashcherbakov" updated="2018-07-16 13:17:24.0"/>
<Action id="47371" issue="31884" author="mgbailey" type="comment" body=" ~ashcherbakov , read_ledger is working fine.  The issue is that the node that Evernym is the steward of, ev1, is not writing transactions to its local database that are successfully being written to the rest of the ledger.  This is true even after rebooting the node." created="2018-07-16 15:48:26.0" updateauthor="mgbailey" updated="2018-07-16 15:48:26.0"/>
<Action id="47520" issue="31884" author="toktar" type="comment" created="2018-07-19 09:53:37.0" updateauthor="toktar" updated="2018-07-19 09:53:37.0"> <body><! CDATA After analyzing logs follow problems with nodes were found: prosovitor, NewtonD, OASFCU (doesn't take part in transaction ordering) iRespond, ibm (some time disconnected, doesn't send any messages) atbsovrin, ServerVS (has problem with BLS signature)  ~mgbailey , please, attach to ticket logs from one of other correct nodes (Stuard, BIGAWSUSEAST1-001, icenode, Aalto, DustStorm, zaValidator, digitalbazaar, esatus_AG, royal_sovrin, TNO, danube, pcValidator01) if it possible. One node will be enough. At this moment on the ev1 I see more than f (=6) faulty nodes and it's a reason to not ordered transactions. My recommendation is all pool restarting if this indy-node version contains command to restart pool for trustee. If pool restart is a difficult or wouldn't help, check problem with BLS signature on atbsovrin, ServerVS and ping other faulty nodes. Maybe they have problems with connection.  ></body> </Action>
<Action id="47555" issue="31884" author="mgbailey" type="comment" body=" ~Toktar , I am attaching logs from BIGAWSUSEAST1-001 which should include the same time slice as the ev1 logs. ^BIGAWSUSEAST1-001.log.2018-07-09.gz " created="2018-07-19 16:37:10.0" updateauthor="mgbailey" updated="2018-07-19 16:37:10.0"/>
<Action id="47584" issue="31884" author="toktar" type="comment" created="2018-07-20 12:04:02.0" updateauthor="toktar" updated="2018-07-20 12:04:02.0"> <body><! CDATA  ~mgbailey , thank you very much. We can recommend to check configuration of keys on nodes atbsovrin, ServerVS.  For understanding this problem reason we need in domain and pool ledgers database for the node BIGAWSUSEAST1-001 and ev1. I apologize for the disturbance.  ></body> </Action>
<Action id="47608" issue="31884" author="mgbailey" type="comment" created="2018-07-20 17:34:49.0" updateauthor="mgbailey" updated="2018-07-20 17:34:49.0"> <body><! CDATA I have contacted the steward of the other node requesting ledgers, and am attaching those from ev1 now.  I am also reaching out to the stewards of atbsovrin and ServerVS regarding their node keys.     ></body> </Action>
<Action id="47615" issue="31884" author="mgbailey" type="comment" body="The ledgers&apos; contents from BIG are attached." created="2018-07-20 19:52:44.0" updateauthor="mgbailey" updated="2018-07-20 19:52:44.0"/>
<Action id="47686" issue="31884" author="mgbailey" type="comment" body=" ~Toktar  I successfully tcp-pinged all nodes on their node port.  IBM does have a communications issue that I am aware of, but connectivity with all other nodes appears normal.  Have you learned anything additional with the ledger information from BIG?" created="2018-07-23 22:55:47.0" updateauthor="mgbailey" updated="2018-07-23 22:55:47.0"/>
<Action id="47709" issue="31884" author="toktar" type="comment" created="2018-07-24 11:32:22.0" updateauthor="toktar" updated="2018-07-24 14:38:39.0"> <body><! CDATA  ~mgbailey , thank you! With the new ledger information we see ledgers were same in both nodes. It means nodes work correct but have problems with connection and BLS keys configuration. We recommend to check that the BLS key in the pool ledger database equal the key in /var/lib/indy/bls_keys/bls_pk on atbsovrin and ServerVS Besides, we think the pool restart command will fix bad connections between nodes. It is good that nodes tcp-pinged but it means nodes are available and busy with something. View Change for example, we fixed a lot of bugs in it in last time. We can found "sleeping" nodes problems by analyzing their logs if you could get it. If you need reestablish pool now, pool_restart should help.  ></body> </Action>
<Action id="48184" issue="31884" author="ashcherbakov" type="comment" body=" ~mgbailey  Any info from other nodes? Are issues with BLS keys checked and fixed?" created="2018-07-31 11:19:52.0" updateauthor="ashcherbakov" updated="2018-07-31 11:19:52.0"/>
<Action id="48221" issue="31884" author="mgbailey" type="comment" created="2018-07-31 23:09:34.0" updateauthor="mgbailey" updated="2018-07-31 23:09:34.0"> <body><! CDATA Status update:  prosovitor - emailed, but no response from steward yet  NewtonD - His ledger is up-to-date, but it is running 1.3.55 instead of 1.3.62.  I have sent him instructions for a manual update.  OASFCU - His domain ledger was behind.  He restarted the service on his node, and it caught up. No other obvious problems.  iRespond - His ledger is up-to-date. There appear to be no problems with this node.  ibm - This node is functional, but is not communicating with ev1 through our firewall since we set up an IP address whitelist for the node port. The ibm node is doing NAT on outgoing communications. A fix is expected the end of August. For now we have modified our firewall whitelist to account for the NAT.  atbsovrin - The BLS key on the node does not match the ledger entry. I'm working with the steward to correct this.  ServerVS - The BLS key on the node does not match the ledger entry. I'm working with the steward to correct this.  Unfortunately those last two may not be corrected immediately, since the ledger is not achieving consensus presently.     ></body> </Action>
<Action id="48228" issue="31884" author="ashcherbakov" type="comment" body="If we need to recover consensus, we should probably update the Pool to the latest version (force Upgrade is required)." created="2018-08-01 07:32:32.0" updateauthor="ashcherbakov" updated="2018-08-01 07:32:32.0"/>
<Action id="48268" issue="31884" author="mgbailey" type="comment" body="All nodes except for atbsovrin and ServerVS appear to be working, including 2 new validators that were added this week.  Consensus has been re-established.  I am continuing to reach out to those last 2 to get them to fix their BLS keys." created="2018-08-01 20:52:04.0" updateauthor="mgbailey" updated="2018-08-01 20:52:04.0"/>
