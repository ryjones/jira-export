<Action id="30130" issue="20374" author="krw910" type="comment" body=" ~ashcherbakov  We are dealing with a customer on this node that is having the trouble. More than anything  ~mgbailey  needs to know what steps to take next to help troubleshoot the issue. I would have assigned this to Victor, but I show he is out this week. Please pass this ticket to an available developer that can point Mike in the direction of what to do next for this node." created="2017-08-23 22:49:46.0" updateauthor="krw910" updated="2017-08-23 22:49:46.0"/>
<Action id="30135" issue="20374" author="ashcherbakov" type="comment" created="2017-08-24 05:53:41.0" updateauthor="ashcherbakov" updated="2017-08-24 05:53:41.0"> <body><! CDATA  ~mgbailey  Do I understand correctly that metis can post transactions to its ledger (it's not stalled), but it's always 12 txns behind? How do you get the total number of txns? Just counting the lines in txn files? I know that we had a bug previously where some empty lines were inserted there, so the real number of txns were equal, but number of lines was different.  Can you please provide the logs, and, if possible, ledger folders?   ></body> </Action>
<Action id="30169" issue="20374" author="mgbailey" type="comment" created="2017-08-24 16:46:06.0" updateauthor="mgbailey" updated="2017-08-24 16:46:06.0"> <body><! CDATA  ~ashcherbakov , attached are transactions and logs from metis.  I have also attached the transactions from jouer, one of the other nodes in the ESN.    There are no blank lines in either set of transactions, and the files are in sync except for the last 12 transactions.  I have added an additional transaction to the ledger manually, using the CLI.  Once again, metis added one transaction to the ledger as well, and remains 12 behind.  ></body> </Action>
<Action id="30202" issue="20374" author="ashcherbakov" type="comment" created="2017-08-25 13:41:40.0" updateauthor="ashcherbakov" updated="2017-08-25 13:41:40.0"> <body><! CDATA  ~mgbailey  Thank you. Can you please also provide the following info: - logs from 'jouer' - `domain_state` folders for both 'jouer' and 'metis' - `merkleLeaves` and `merkleNodes` folders for both 'jouer' and 'metis' Sorry for big amount of data needed for debug.  ></body> </Action>
<Action id="30207" issue="20374" author="mgbailey" type="comment" body=" ~ashcherbakov , I have added the requested files from jouer.  The domain_state is too large to upload to jira, so a google doc of it is  here|https://drive.google.com/file/d/0B8BSiLQLtlY8Y2pXQ2twWGtLZzg/view?usp=sharing .  The metis docs have been requested from the customer." created="2017-08-25 15:58:41.0" updateauthor="mgbailey" updated="2017-08-25 15:58:41.0"/>
<Action id="30242" issue="20374" author="mgbailey" type="comment" body=" ~ashcherbakov , The metis data requested is now available on google docs h ere.|https://drive.google.com/open?id=0B8BSiLQLtlY8TXFFNllqRGVHLUk " created="2017-08-27 18:04:56.0" updateauthor="mgbailey" updated="2017-08-27 18:04:56.0"/>
<Action id="30322" issue="20374" author="mzk-vct" type="comment" body=" ~mgbailey , unfortunately log level of jouer was to high, so its log does not contain &apos;debug&apos; and &apos;trace&apos; items. Could you please provide logs from other healthy node which had lower log level?" created="2017-08-29 15:54:25.0" updateauthor="mzk-vct" updated="2017-08-29 15:54:25.0"/>
<Action id="30324" issue="20374" author="mzk-vct" type="comment" body=" ~mgbailey  also, if possible, please attach more logs for metis, especially earlier ones" created="2017-08-29 16:10:01.0" updateauthor="mzk-vct" updated="2017-08-29 16:10:01.0"/>
<Action id="30330" issue="20374" author="mgbailey" type="comment" body=" ~mzk-vct  the only other node with low-level logs enabled was &apos;play&apos;, and it had other problems. Its logs are on INDY-759. Since these are the only two nodes with low-level logs enabled, and they were the two that had problems, it kind of makes me wonder if the logging itself might contribute to problems.  I have attached earlier metis logs." created="2017-08-29 20:00:49.0" updateauthor="mgbailey" updated="2017-08-29 20:00:49.0"/>
<Action id="30428" issue="20374" author="mgbailey" type="comment" body=" ~mzk-vct , I was excited to hear that the issue has been isolated.  Since this is a persistent issue that remains even after restarting the sovrin-node service, how hard would it be to get a hotfix for Indy-node 1.0.28 that we could put onto metis to resolve this?" created="2017-08-31 21:40:46.0" updateauthor="mgbailey" updated="2017-08-31 21:43:28.0"/>
<Action id="30482" issue="20374" author="mzk-vct" type="comment" created="2017-09-04 09:08:00.0" updateauthor="mzk-vct" updated="2017-09-04 09:08:00.0"> <body><! CDATA *Scenario:* # Client sends request # Request is ordered and node send Ordered and Checkpoint messages # If some nodes are slower then others (for example because of extended logging) they can process Checkpoint before Ordered # When Checkpoint is processed replica removes all request ordered before it (even requests which were ordered, but not yet executed) # So the Ordered message cannot be processed, because related request is removed.  *This leads to the following problems:* # Falling behind in written transactions # Executing the same request twice  *Solution:*  Do not remove requests which were ordered, but not executed  PR: https://github.com/hyperledger/indy-plenum/pull/370  ></body> </Action>
<Action id="30893" issue="20374" author="mgbailey" type="comment" body=" ~mzk-vct , what is the status of this?  It has been in review for over a week." created="2017-09-14 19:48:50.0" updateauthor="mgbailey" updated="2017-09-14 19:48:50.0"/>
<Action id="30919" issue="20374" author="mzk-vct" type="comment" created="2017-09-15 12:55:26.0" updateauthor="mzk-vct" updated="2017-09-15 12:55:26.0"> <body><! CDATA  ~mgbailey   There are failing tests that should be fixed before merge. This will be done in the current sprint.     ></body> </Action>
<Action id="31004" issue="20374" author="vladimirwork" type="comment" created="2017-09-19 10:11:18.0" updateauthor="vladimirwork" updated="2017-09-19 10:11:18.0"> <body><! CDATA Build Info: indy-node 1.1.138  Steps to Validate: 1. Install pool of 4 nodes. 2. Set logging to debug level at 1 node. 3. Perform low-load and high-load tests. 4. Check "read_ledger --type=domain --count" at all nodes.  Actual Results: Domain txns count is the same at all nodes of the pool. !Screenshot.PNG|thumbnail!   Additional Info: This issue is covered by plenum/test/test_request_executed_once_and_without_failing_behind.py unit test.  ></body> </Action>
<Action id="31253" issue="20374" author="mgbailey" type="comment" body=" ~danielhardman , USAA asked about this again.  Do we expect it in the upcoming build?" created="2017-09-28 20:21:37.0" updateauthor="mgbailey" updated="2017-09-28 20:21:37.0"/>
