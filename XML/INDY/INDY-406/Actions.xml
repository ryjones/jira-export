<Action id="28269" issue="19164" author="danielhardman" type="comment" body="this is a test comment" created="2017-07-12 20:07:29.0" updateauthor="danielhardman" updated="2017-07-12 20:07:29.0"/>
<Action id="28308" issue="19164" author="ashcherbakov" type="comment" created="2017-07-13 13:11:22.0" updateauthor="ashcherbakov" updated="2017-07-13 13:12:05.0"> <body><! CDATA Problem reason: - primary selection didn't start because catch-up didn't complete. - the cause is recently added MsgReq and MsgRep requests - They introduced 'composite' messages (when another message (unserialized) is a part of the message as-is) - It turned out that ujson serializes composite messages differently depending on the version: ujson=1.33 serializes to dict, and ujson=1.35 serializes to list. - Our code didn't fix ujson version, so 1.35 were used for developers and in Jenkins (the latest version in pypi). - The code assumes serialization according to 1.35, that's why all the tests passed. - However, we used canonical deb package for ujson, which is 1.33. So, the issue was reproduced with deb packages only.     Changes:  - Fixed ujson==1.33 - Fixed code to expect dict-based serialization - Fixed build to use canonical ujson, not 1.33 one.  Committed into: - https://github.com/hyperledger/indy-plenum/pull/272 - sovrin-node 0.4.23  Risk factors: - build - catch-up - NYM  Risk: - Medium  Covered with tests: - plenum/test/input_validation/test_message_serialization.py    ></body> </Action>
<Action id="28336" issue="19164" author="krw910" type="comment" body="This is now working and we have a functional build." created="2017-07-13 18:32:57.0" updateauthor="krw910" updated="2017-07-13 18:32:57.0"/>
