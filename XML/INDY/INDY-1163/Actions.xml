<Action id="40049" issue="27638" author="vladimirwork" type="comment" body="Issue reproduces with 4 nodes setup only (can&apos;t reproduce with 6 nodes setup with the same steps)." created="2018-02-13 08:42:47.0" updateauthor="vladimirwork" updated="2018-02-13 08:42:47.0"/>
<Action id="40111" issue="27638" author="ashcherbakov" type="comment" created="2018-02-14 08:41:45.0" updateauthor="ashcherbakov" updated="2018-02-14 08:41:45.0"> <body><! CDATA Added an integration test to reproduce the scenario: PR:  https://github.com/hyperledger/indy-plenum/pull/532   The tests passes.     Also There is something really weird in the log files: Node2:0 discards PREPREPARE with a message `PRE-PREPARE being sent to primary; suspicion code is 1`. * Node2:0 declares view change 3 as completed for instance 0, new primary is Node1:0 * Node2 receives PREPREPARE  from Node1 * According to code, `_can_process_pre_prepare`, it checks first that PREPREPARE   comes from the Primary. The check passes, so Node2:0 has Node1 as a Primary. * The next check is that the current replica is not a Primary (so that the PREPREPARE    is not sent TO Primary). And this check fails. So, Node2:0 started to think that Node2 is the Primary (not Node1). * The code is sequential, this is just two subsequent checks. Looks really weird.  I suggest to re-test it.     ></body> </Action>
<Action id="40130" issue="27638" author="vladimirwork" type="comment" body="Issue is reproducing with the same steps on 1.3.51. !INDY-1163.PNG|thumbnail!   ^INDY-1163-new.tar.gz  " created="2018-02-14 13:42:58.0" updateauthor="vladimirwork" updated="2018-02-14 13:42:58.0"/>
<Action id="40576" issue="27638" author="ashcherbakov" type="comment" body="The issue wasn&apos;t reproduced on my machine (and added integration test passes). However, it&apos;s reproduced on Vladimir&apos;s machine." created="2018-02-22 15:51:17.0" updateauthor="ashcherbakov" updated="2018-02-22 15:51:17.0"/>
<Action id="49084" issue="27638" author="ashcherbakov" type="comment" body="Needs to be fixed together with INDY-1580" created="2018-08-20 11:39:15.0" updateauthor="ashcherbakov" updated="2018-08-20 11:39:15.0"/>
<Action id="49403" issue="27638" author="ozheregelya" type="comment" body="Will be re-tested in scope of INDY-1580 (according comment was added to INDY-1580)." created="2018-08-27 10:53:06.0" updateauthor="ozheregelya" updated="2018-08-27 10:53:06.0"/>
