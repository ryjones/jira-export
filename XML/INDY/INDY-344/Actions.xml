<Action id="28024" issue="18754" author="alexander.shekhovcov" type="comment" created="2017-07-07 15:43:59.0" updateauthor="alexander.shekhovcov" updated="2017-07-07 16:04:21.0"> <body><! CDATA (/)  *Problem reason:* * the fpm tool packs python byte-code into a debian package by default  *Changes:* * exclude pyc and pyo during packaging * add a postinst hook which compiles bytecode after install * add a prerm hook which removes bytecode before remove a package  *Committed into:*   https://github.com/evernym/sovrin-packaging/commit/9799a13327d877b57daf667d6c7355cfbacf759f   sovrin-node 0.4.15+  sovrin-client 0.4.25+  *Risk factors:* Installation/removing all maintained deb packages.  *Risk:* Medium  *Covered with tests:* The packaging procedure is not supposed to be tested.  *Recommendation:* * Install sovrin-node and sovrin-client * Check if pyc files exist   {code:java} node-admin@sovrin-node1:~$ find /usr/local/lib/python3.5/dist-packages/sovrin_node -name "*.pyc" | wc -l 57 node-admin@sovrin-node1:~$ find /usr/local/lib/python3.5/dist-packages/sovrin_client -name "*.pyc" | wc -l 118 node-admin@sovrin-node1:~$ find /usr/local/lib/python3.5/dist-packages/plenum -name "*.pyc" | wc -l 463 node-admin@sovrin-node1:~$ find /usr/local/lib/python3.5/dist-packages/charm -name "*.pyc" | wc -l 152 ...{code} * Check if there are no pyc files in the deb packages  {code:java} node-admin@sovrin-node1:~$ dpkg -L sovrin-node | grep -E "*.pyc$" | wc -l 0 node-admin@sovrin-node1:~$ dpkg -L sovrin-client | grep -E "*.pyc$" | wc -l 0 node-admin@sovrin-node1:~$ dpkg -L python3-plenum | grep -E "*.pyc$" | wc -l 0 node-admin@sovrin-node1:~$ dpkg -L python3-charm-crypto | grep -E "*.pyc$" | wc -l 0 ...{code} * Remove sovrin-node and sovrin-client           ></body> </Action>
<Action id="28379" issue="18754" author="alexander.shekhovcov" type="comment" created="2017-07-14 09:46:12.0" updateauthor="alexander.shekhovcov" updated="2017-07-14 09:46:12.0"> <body><! CDATA Please check packages:   python3-base58|https://repo.evernym.com/deb/pool/xenial/master/p/python3-base58/    python3-charm-crypto|https://repo.evernym.com/deb/pool/xenial/master/p/python3-charm-crypto/    python3-intervaltree|https://repo.evernym.com/deb/pool/xenial/master/p/python3-intervaltree/    python3-ioflo|https://repo.evernym.com/deb/pool/xenial/master/p/python3-ioflo/    python3-ledger|https://repo.evernym.com/deb/pool/xenial/master/p/python3-ledger/    python3-orderedset|https://repo.evernym.com/deb/pool/xenial/master/p/python3-orderedset/    python3-prompt-toolkit|https://repo.evernym.com/deb/pool/xenial/master/p/python3-prompt-toolkit/    python3-pyzmq|https://repo.evernym.com/deb/pool/xenial/master/p/python3-pyzmq/    python3-raet|https://repo.evernym.com/deb/pool/xenial/master/p/python3-raet/    python3-rlp|https://repo.evernym.com/deb/pool/xenial/master/p/python3-rlp/    python3-sha3|https://repo.evernym.com/deb/pool/xenial/master/p/python3-sha3/    python3-timeout-decorator|https://repo.evernym.com/deb/pool/xenial/master/p/python3-timeout-decorator/    indy-anoncreds|https://repo.evernym.com/deb/pool/xenial/master/i/indy-anoncreds/    indy-plenum|https://repo.evernym.com/deb/pool/xenial/master/i/indy-plenum/    indy-node|https://repo.sovrin.org/deb/pool/xenial/master/i/indy-node/   ></body> </Action>
<Action id="28382" issue="18754" author="ozheregelya" type="comment" created="2017-07-14 10:57:53.0" updateauthor="ozheregelya" updated="2017-07-14 10:57:53.0"> <body><! CDATA Build Info:   sovrin-client version: 0.4.28   indy-node version: 0.4.28 OS/Platform: Ubuntu 16.04.2 LTS Setup: 7 nodes, 1 client  Steps to Validate: 1. Install indy-node. 2. Perform following commands: {code:java} find /usr/local/lib/python3.5/dist-packages/sovrin_node -name "*.pyc" | wc -l find /usr/local/lib/python3.5/dist-packages/sovrin_client -name "*.pyc" | wc -l find /usr/local/lib/python3.5/dist-packages/plenum -name "*.pyc" | wc -l find /usr/local/lib/python3.5/dist-packages/charm -name "*.pyc" | wc -l{code} {code:java} dpkg -L python3-base58 | grep -E "*.pyc$" | wc -l dpkg -L python3-charm-crypto | grep -E "*.pyc$" | wc -l dpkg -L python3-intervaltree | grep -E "*.pyc$" | wc -l dpkg -L python3-ioflo | grep -E "*.pyc$" | wc -l dpkg -L python3-orderedset | grep -E "*.pyc$" | wc -l dpkg -L python3-prompt-toolkit | grep -E "*.pyc$" | wc -l dpkg -L python3-pyzmq | grep -E "*.pyc$" | wc -l dpkg -L python3-raet | grep -E "*.pyc$" | wc -l dpkg -L python3-rlp | grep -E "*.pyc$" | wc -l dpkg -L python3-sha3 | grep -E "*.pyc$" | wc -l dpkg -L python3-timeout-decorator | grep -E "*.pyc$" | wc -l dpkg -L indy-anoncreds | grep -E "*.pyc$" | wc -l dpkg -L indy-plenum | grep -E "*.pyc$" | wc -l dpkg -L indy-node | grep -E "*.pyc$" | wc -l{code} 3. Uninstall indy-node.  Actual Results: {code:java} root@caf95bae7ce1:/home/sovrin# find /usr/local/lib/python3.5/dist-packages/sovrin_node -name "*.pyc" | wc -l 57 root@caf95bae7ce1:/home/sovrin# find /usr/local/lib/python3.5/dist-packages/sovrin_client -name "*.pyc" | wc -l 123 root@caf95bae7ce1:/home/sovrin# find /usr/local/lib/python3.5/dist-packages/plenum -name "*.pyc" | wc -l 478 root@caf95bae7ce1:/home/sovrin# find /usr/local/lib/python3.5/dist-packages/charm -name "*.pyc" | wc -l 152{code} {code:java} root@caf95bae7ce1:/home/sovrin# dpkg -L python3-base58 | grep -E "*.pyc$" | wc -l 0 root@caf95bae7ce1:/home/sovrin# dpkg -L python3-charm-crypto | grep -E "*.pyc$" | wc -l 0 root@caf95bae7ce1:/home/sovrin# dpkg -L python3-intervaltree | grep -E "*.pyc$" | wc -l 0 root@caf95bae7ce1:/home/sovrin# dpkg -L python3-ioflo | grep -E "*.pyc$" | wc -l 0 root@caf95bae7ce1:/home/sovrin# dpkg -L python3-orderedset | grep -E "*.pyc$" | wc -l 0 root@caf95bae7ce1:/home/sovrin# dpkg -L python3-prompt-toolkit | grep -E "*.pyc$" | wc -l 0 root@caf95bae7ce1:/home/sovrin# dpkg -L python3-pyzmq | grep -E "*.pyc$" | wc -l 0 root@caf95bae7ce1:/home/sovrin# dpkg -L python3-raet | grep -E "*.pyc$" | wc -l 0 root@caf95bae7ce1:/home/sovrin# dpkg -L python3-rlp | grep -E "*.pyc$" | wc -l 0 root@caf95bae7ce1:/home/sovrin# dpkg -L python3-sha3 | grep -E "*.pyc$" | wc -l 0 root@caf95bae7ce1:/home/sovrin# dpkg -L python3-timeout-decorator | grep -E "*.pyc$" | wc -l 0 root@caf95bae7ce1:/home/sovrin# dpkg -L indy-anoncreds | grep -E "*.pyc$" | wc -l 0 root@caf95bae7ce1:/home/sovrin# dpkg -L indy-plenum | grep -E "*.pyc$" | wc -l 0 root@caf95bae7ce1:/home/sovrin# dpkg -L indy-node | grep -E "*.pyc$" | wc -l 0{code}  ></body> </Action>
