<Action id="29982" issue="20220" author="ozheregelya" type="comment" created="2017-08-18 08:57:59.0" updateauthor="ozheregelya" updated="2017-08-18 08:58:19.0"> <body><! CDATA +Nodes logs+:  ^Node1.log   ^Node2.log   ^Node3.log   ^Node4.log      +Results for 10 transactions:+ {code:java} python3 load_test.py --clients-list load_test_clients.list -t NYM -c 1 -r 10 --at-once{code}  ^perf_results_1_10_1502981845.csv      +Results for 400 transactions:+ {code:java} python3 load_test.py --clients-list load_test_clients.list -t NYM -c 1 -r 400 --at-once{code}  ^perf_results_1_400_1502981869.csv   ></body> </Action>
<Action id="29995" issue="20220" author="alexander.shekhovcov" type="comment" created="2017-08-18 16:24:16.0" updateauthor="alexander.shekhovcov" updated="2017-08-18 16:24:16.0"> <body><! CDATA We limited length of an input message for a stack (zstack, rstack, ...) with: {code} MSG_LEN_LIMIT = 128 * 1024 {code}  the command  {code} python3 load_test.py --clients-list load_test_clients.list -t NYM -c 1 -r 400 --at-once {code} sends 400 requests in one batch as a result:  {code} 2017-08-18 16:13:36,524 | DEBUG    | batched.py           (  99) | flushOutBoxes | Node1 batching 400 msgs to Node2 into one transmission 2017-08-18 16:13:36,526 | DEBUG    | batched.py           ( 148) | signAndSerialize | Message will be discarded due to InvalidMessageExceedingSizeException('Message len 154335 exceeded allowed limit of 131072',) 2017-08-18 16:13:36,526 | DEBUG    | batched.py           ( 112) | flushOutBoxes | Node1 error Message will be discarded due to InvalidMessageExceedingSizeException('Message len 154335 exceeded allowed limit of 131072',). tried to Node2: None {code}  ( ~spivachuk  is going to replaced DEBUG level with ERROR level because actually it is an error)  If it is not a crucial thing to send all 400 request from one client  I'd suggest the following  {code} python3 load_test.py --clients-list load_test_clients.list -t NYM -c 4 -r 100 --at-once {code}  The command sends 400 request in 4 batches from each client and each of them less than limit.   ~kelly.wilson   ~ozheregelya  Is it eligible for testing?    ></body> </Action>
<Action id="30078" issue="20220" author="ozheregelya" type="comment" body="The problem was discussed and there were decided that current behavior of the system is correct. But there is unclear situation with load test: test works correctly with 1 client and 200 transactions but it does not work for 4 clients and 200 transactions per client with InvalidMessageExceedingSizeException. But this is topic for other ticket (see INDY-753)." created="2017-08-22 16:36:27.0" updateauthor="ozheregelya" updated="2017-08-22 16:36:27.0"/>
