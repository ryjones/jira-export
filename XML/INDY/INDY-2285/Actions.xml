<Action id="65779" issue="43142" author="toktar" type="comment" body="PR: https://github.com/hyperledger/indy-plenum/pull/1411" created="2019-11-26 08:03:36.0" updateauthor="toktar" updated="2019-11-26 08:03:36.0"/>
<Action id="65780" issue="43142" author="toktar" type="comment" created="2019-11-26 09:50:45.0" updateauthor="toktar" updated="2019-11-26 12:57:49.0"> <body><! CDATA *Problem reason:* - A malicious primary node can send different PrePrepares to n-f-1 and f nodes. In this case f nodes will have an incorrect state tree and will not be able to ordering during 2 next checkpoints - Any malicious node can send OldNewPrePrepareReply with incorrect PrePrepare (changed ppTime). A node receiving  incorrect PrePrepare will apply it and will not be able to ordering during 2 next checkpoints   *Changes:* - change logic of a digest generating for PrePrepares - add checks for messages with incorrect digest to OldViewPrePrepareReply processing  *PR:* *  https://github.com/hyperledger/indy-plenum/pull/1411   *Version:* * sovrin - #172 - master * token-plugin #120 - master * indy-node 1.12.0.dev1141 -master * indy-plenum 1.12.0.dev965 -master  *Risk factors:* - Problems with a validation of PrePrepare messages - Problems with re-ordering after a view change  *Risk:* - Medium  *Tests:* *  test_old_view_pre_prepare_reply_processing.py|https://github.com/hyperledger/indy-plenum/pull/1411/files#diff-07a332330721af7358ea3b0332d1e106   *  test_primary_send_incorrect_pp.py|https://github.com/hyperledger/indy-plenum/pull/1411/files#diff-6d7b44ce8565ea010d21c36b60456008    *Recommendations for QA:* * Production load test  *  ** force view change every 1 hour during 3 hours ** After force view change demote, promote a non primary node. ** Check that all nodes can order after 30min   ></body> </Action>
<Action id="65805" issue="43142" author="vladimirwork" type="comment" created="2019-11-27 12:57:55.0" updateauthor="vladimirwork" updated="2019-11-27 12:57:55.0"> <body><! CDATA Build Info: indy-node 1.12.0~dev1141 plugins 1.0.5~dev120  Steps to Reproduce: 1. Run production laod test with forced VCs. 2. Demote 10th node for 30 seconds and promote it back. 3. Demote 20th node for 120 seconds and promote it back.  Actual Results: 10th node lags after promotion and doesn't catch up.  ev@evernymr33:logs/27_11_2019_forced_vc.tar.gz ev@evernymr33:logs/27_11_2019_forced_vc_full_data.tar.gz  ></body> </Action>
<Action id="65831" issue="43142" author="vladimirwork" type="comment" body="The issue found will be fixed in scope of INDY-2308." created="2019-11-28 08:31:35.0" updateauthor="vladimirwork" updated="2019-11-28 08:33:56.0"/>
