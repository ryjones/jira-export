<Issue id="42490" key="INDY-2229" number="2229" project="10303" reporter="ashcherbakov" assignee="toktar" creator="ashcherbakov" type="10002" summary="A lagging Node need to be able to start catchup by checkpoints when view change is in progress" priority="3" resolution="10001" status="10001" created="2019-09-25 13:28:57.0" updated="2019-10-24 07:50:48.0" resolutiondate="2019-10-24 07:50:48.0" votes="0" watches="3" workflowId="55556"> <description><! CDATA Let's consider the following situations: * A node started view change * A node didn't receive NewView for some reasons while other nodes received it and finished view change * So, other nodes finished view change and started ordering while a lagging node is still in `waiting_for_new_view` (view change in progress) state.   Expected behavior here is that the lagging node should receive a quorum of 2 stable checkpoints from other nodes and do a catchup which should finish its view change.   *Acceptance criteria:* 1. Write integration tests: * Delay (without processing) receiving of  NewView by Gamma * Start a view change and wait until it finished on all nodes except Gamma * Order by all nodes except Gamma. Order 2 stable checkpoints * Make sure that Gamma eventually caught up all transactions, finished view change, and can participate in ordering  2. Do the following changes in code: * Process checkpoints from other nodes during view change * Make sure that we can start catchup during view change if receive a quorum of 2 stable checkpoints from other nodes * Make sure that finish of catchup finishes view change as well.   ></description> </Issue>
