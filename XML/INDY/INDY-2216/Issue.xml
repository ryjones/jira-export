<Issue id="42022" key="INDY-2216" number="2216" project="10303" reporter="vladimirwork" assignee="vladimirwork" creator="vladimirwork" type="10004" summary="Sovrin master package upgrade is broken" priority="3" resolution="10000" status="10001" created="2019-08-26 08:49:36.0" updated="2019-12-10 10:56:57.0" resolutiondate="2019-12-10 09:33:48.0" votes="0" watches="1" workflowId="55065"> <description><! CDATA Build Info: sovrin 1.1.135 indy-node 1.9.0~dev1014 plugins 1.0.0~dev59  Steps to Reproduce: 1. Try to upgrade pool to sovrin 1.1.136 using `pool upgrade`.  Actual Results: {noformat} Aug 26 07:33:25 fc7eefacd976 env 84 : WARNING: apt does not have a stable CLI interface. Use with caution in scripts. Aug 26 07:33:25 fc7eefacd976 env 84 : Get:1 http://archive.ubuntu.com/ubuntu xenial InRelease  247 kB  Aug 26 07:33:25 fc7eefacd976 env 84 : Get:2 http://security.ubuntu.com/ubuntu xenial-security InRelease  109 kB  Aug 26 07:33:25 fc7eefacd976 env 84 : Get:3 http://archive.ubuntu.com/ubuntu xenial-updates InRelease  109 kB  Aug 26 07:33:25 fc7eefacd976 env 84 : Get:4 http://archive.ubuntu.com/ubuntu xenial-backports InRelease  107 kB  Aug 26 07:33:25 fc7eefacd976 env 84 : Get:5 http://archive.ubuntu.com/ubuntu xenial/universe Sources  9802 kB  Aug 26 07:33:26 fc7eefacd976 env 84 : Get:6 http://security.ubuntu.com/ubuntu xenial-security/universe Sources  136 kB  Aug 26 07:33:26 fc7eefacd976 env 84 : Get:7 https://repo.sovrin.org/deb xenial InRelease  28.4 kB  Aug 26 07:33:26 fc7eefacd976 env 84 : Get:8 https://repo.sovrin.org/deb xenial/master amd64 Packages  263 kB  Aug 26 07:33:26 fc7eefacd976 env 84 : Get:9 http://security.ubuntu.com/ubuntu xenial-security/main amd64 Packages  924 kB  Aug 26 07:33:29 fc7eefacd976 env 84 : Get:10 http://security.ubuntu.com/ubuntu xenial-security/restricted amd64 Packages  12.7 kB  Aug 26 07:33:29 fc7eefacd976 env 84 : Get:11 http://security.ubuntu.com/ubuntu xenial-security/universe amd64 Packages  579 kB  Aug 26 07:33:31 fc7eefacd976 env 84 : Get:12 http://security.ubuntu.com/ubuntu xenial-security/multiverse amd64 Packages  6119 B  Aug 26 07:33:40 fc7eefacd976 env 84 : Get:13 http://archive.ubuntu.com/ubuntu xenial/main amd64 Packages  1558 kB  Aug 26 07:33:43 fc7eefacd976 env 84 : Get:14 http://archive.ubuntu.com/ubuntu xenial/restricted amd64 Packages  14.1 kB  Aug 26 07:33:43 fc7eefacd976 env 84 : Get:15 http://archive.ubuntu.com/ubuntu xenial/universe amd64 Packages  9827 kB  Aug 26 07:33:55 fc7eefacd976 env 84 : Get:16 http://archive.ubuntu.com/ubuntu xenial/multiverse amd64 Packages  176 kB  Aug 26 07:33:55 fc7eefacd976 env 84 : Get:17 http://archive.ubuntu.com/ubuntu xenial-updates/universe Sources  328 kB  Aug 26 07:33:56 fc7eefacd976 env 84 : Get:18 http://archive.ubuntu.com/ubuntu xenial-updates/main amd64 Packages  1304 kB  Aug 26 07:33:58 fc7eefacd976 env 84 : Get:19 http://archive.ubuntu.com/ubuntu xenial-updates/restricted amd64 Packages  13.1 kB  Aug 26 07:33:58 fc7eefacd976 env 84 : Get:20 http://archive.ubuntu.com/ubuntu xenial-updates/universe amd64 Packages  983 kB  Aug 26 07:33:59 fc7eefacd976 env 84 : Get:21 http://archive.ubuntu.com/ubuntu xenial-updates/multiverse amd64 Packages  19.1 kB  Aug 26 07:33:59 fc7eefacd976 env 84 : Get:22 http://archive.ubuntu.com/ubuntu xenial-backports/main amd64 Packages  7942 B  Aug 26 07:33:59 fc7eefacd976 env 84 : Get:23 http://archive.ubuntu.com/ubuntu xenial-backports/universe amd64 Packages  8807 B  Aug 26 07:33:59 fc7eefacd976 env 84 : Fetched 26.6 MB in 34s (777 kB/s) Aug 26 07:34:00 fc7eefacd976 env 84 : Reading package lists... Aug 26 07:34:00 fc7eefacd976 env 84 : Building dependency tree... Aug 26 07:34:00 fc7eefacd976 env 84 : Reading state information... Aug 26 07:34:00 fc7eefacd976 env 84 : 35 packages can be upgraded. Run 'apt list --upgradable' to see them. Aug 26 07:34:02 fc7eefacd976 env 84 : WARNING: apt does not have a stable CLI interface. Use with caution in scripts. Aug 26 07:34:02 fc7eefacd976 env 84 : Hit:1 http://security.ubuntu.com/ubuntu xenial-security InRelease Aug 26 07:34:02 fc7eefacd976 env 84 : Hit:2 http://archive.ubuntu.com/ubuntu xenial InRelease Aug 26 07:34:02 fc7eefacd976 env 84 : Hit:3 http://archive.ubuntu.com/ubuntu xenial-updates InRelease Aug 26 07:34:02 fc7eefacd976 env 84 : Hit:4 http://archive.ubuntu.com/ubuntu xenial-backports InRelease Aug 26 07:34:03 fc7eefacd976 env 84 : Hit:5 https://repo.sovrin.org/deb xenial InRelease Aug 26 07:34:05 fc7eefacd976 env 84 : Reading package lists... Aug 26 07:34:05 fc7eefacd976 env 84 : Building dependency tree... Aug 26 07:34:05 fc7eefacd976 env 84 : Reading state information... Aug 26 07:34:05 fc7eefacd976 env 84 : 35 packages can be upgraded. Run 'apt list --upgradable' to see them. Aug 26 07:34:10 fc7eefacd976 env 84 : /bin/sh: 1: Syntax error: "(" unexpected Aug 26 07:34:10 fc7eefacd976 env 84 : E: No packages found Aug 26 07:34:10 fc7eefacd976 env 84 : E: No packages found Aug 26 07:34:10 fc7eefacd976 env 84 : E: No packages found Aug 26 07:34:11 fc7eefacd976 env 84 : + deps='indy-plenum=1.9.2~dev871 indy-node sovrin=1.1.136' Aug 26 07:34:11 fc7eefacd976 env 84 : + ' ' -z 'indy-plenum=1.9.2~dev871 indy-node sovrin=1.1.136' ' ' Aug 26 07:34:11 fc7eefacd976 env 84 : + echo 'Try to donwload indy version indy-plenum=1.9.2~dev871 indy-node sovrin=1.1.136' Aug 26 07:34:11 fc7eefacd976 env 84 : Try to donwload indy version indy-plenum=1.9.2~dev871 indy-node sovrin=1.1.136 Aug 26 07:34:11 fc7eefacd976 env 84 : + apt-get -y update Aug 26 07:34:11 fc7eefacd976 env 84 : Hit:1 http://security.ubuntu.com/ubuntu xenial-security InRelease Aug 26 07:34:11 fc7eefacd976 env 84 : Hit:2 http://archive.ubuntu.com/ubuntu xenial InRelease Aug 26 07:34:11 fc7eefacd976 env 84 : Hit:3 http://archive.ubuntu.com/ubuntu xenial-updates InRelease Aug 26 07:34:11 fc7eefacd976 env 84 : Hit:4 http://archive.ubuntu.com/ubuntu xenial-backports InRelease Aug 26 07:34:12 fc7eefacd976 env 84 : Hit:5 https://repo.sovrin.org/deb xenial InRelease Aug 26 07:34:13 fc7eefacd976 env 84 : Reading package lists... Aug 26 07:34:13 fc7eefacd976 env 84 : + apt-get --download-only -y --allow-downgrades --allow-change-held-packages install indy-plenum=1.9.2~dev871 indy-node sovrin=1.1.136 Aug 26 07:34:15 fc7eefacd976 env 84 : Reading package lists... Aug 26 07:34:15 fc7eefacd976 env 84 : Building dependency tree... Aug 26 07:34:15 fc7eefacd976 env 84 : Reading state information... Aug 26 07:34:15 fc7eefacd976 env 84 : The following additional packages will be installed: Aug 26 07:34:15 fc7eefacd976 env 84 :   sovtoken Aug 26 07:34:15 fc7eefacd976 env 84 : The following held packages will be changed: Aug 26 07:34:15 fc7eefacd976 env 84 :   indy-node indy-plenum sovrin Aug 26 07:34:15 fc7eefacd976 env 84 : The following packages will be upgraded: Aug 26 07:34:15 fc7eefacd976 env 84 :   indy-node indy-plenum sovrin sovtoken Aug 26 07:34:17 fc7eefacd976 env 84 : 4 upgraded, 0 newly installed, 0 to remove and 31 not upgraded. {noformat}  Sovtokenfees package is absent in dependency tree and is not upgraded.  Expected Results: All dependent packages must be upgraded.   ></description> </Issue>
