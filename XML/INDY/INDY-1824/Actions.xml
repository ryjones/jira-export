<Action id="53194" issue="35177" author="ashcherbakov" type="comment" created="2018-11-08 09:42:20.0" updateauthor="ashcherbakov" updated="2018-11-08 09:42:20.0"> <body><! CDATA I can see the following in the provided log file: {code:java} Nov 06 17:01:19 ip-172-16-1-25 env 29650 : 2018-11-06 17:01:19,989 | DEBUG    | node_control_tool.py ( 170) | _create_backup | Creating backup for 1.3.62 Nov 06 17:01:20 ip-172-16-1-25 env 29650 : 2018-11-06 17:01:20,036 | INFO     | migration_tool.py    (  52) | migrate | Migrating from 1.3.62 to 1.6.78 on Ubuntu Nov 06 17:01:20 ip-172-16-1-25 env 29650 : 2018-11-06 17:01:20,037 | DEBUG    | migration_tool.py    (  54) | migrate | Found migration scripts:  '1_0_28_to_1_0_29', '1_1_37_to_1_1_38', '1_1_43_to_1_2_44', '1_2_44_to_1_2_45', '1_2_50_to_1_2_51', '1_2_51_to_1_2_52', '1_3_396_to_1_3_397', '1_3_428_to_1_3_429', '1_3_433_to_1_3_434', '1_4_500_to_1_4_501', 'disabled_1_0_29_to_1_0_28', 'helper_1_0_28_to_1_0_29', 'helper_1_1_37_to_1_1_38'  Nov 06 17:01:20 ip-172-16-1-25 env 29650 : 2018-11-06 17:01:20,038 | INFO     | migration_tool.py    (  61) | migrate | Following migrations will be applied:  '1_3_396_to_1_3_397', '1_3_428_to_1_3_429', '1_3_433_to_1_3_434', '1_4_500_to_1_4_501'  Nov 06 17:01:20 ip-172-16-1-25 env 29650 : 2018-11-06 17:01:20,038 | INFO     | migration_tool.py    (  63) | migrate | Applying migration 1_3_396_to_1_3_397 Nov 06 17:01:20 ip-172-16-1-25 env 29650 : 2018-11-06 17:01:20,038 | INFO     | migration_tool.py    (  35) | _call_migration_script | script path /usr/local/lib/python3.5/dist-packages/data/migrations/deb/1_3_396_to_1_3_397.py Nov 06 17:01:21 ip-172-16-1-25 env 29650 : Traceback (most recent call last): Nov 06 17:01:21 ip-172-16-1-25 env 29650 :   File "/usr/local/lib/python3.5/dist-packages/data/migrations/deb/1_3_396_to_1_3_397.py", line 14, in <module> Nov 06 17:01:21 ip-172-16-1-25 env 29650 :     from storage.kv_store_leveldb_int_keys import KeyValueStorageLeveldbIntKeys Nov 06 17:01:21 ip-172-16-1-25 env 29650 :   File "/usr/local/lib/python3.5/dist-packages/storage/kv_store_leveldb_int_keys.py", line 1, in <module> Nov 06 17:01:21 ip-172-16-1-25 env 29650 :     from storage.helper import integer_comparator Nov 06 17:01:21 ip-172-16-1-25 env 29650 :   File "/usr/local/lib/python3.5/dist-packages/storage/helper.py", line 5, in <module> Nov 06 17:01:21 ip-172-16-1-25 env 29650 :     from plenum.common.config_util import getConfig Nov 06 17:01:21 ip-172-16-1-25 env 29650 :   File "/usr/local/lib/python3.5/dist-packages/plenum/__init__.py", line 73, in <module> Nov 06 17:01:21 ip-172-16-1-25 env 29650 :     setup_plugins() Nov 06 17:01:21 ip-172-16-1-25 env 29650 :   File "/usr/local/lib/python3.5/dist-packages/plenum/__init__.py", line 57, in setup_plugins Nov 06 17:01:21 ip-172-16-1-25 env 29650 :     plugin = find_and_load_plugin(plugin_name, plugin_root, installed_packages) Nov 06 17:01:21 ip-172-16-1-25 env 29650 :   File "/usr/local/lib/python3.5/dist-packages/plenum/__init__.py", line 29, in find_and_load_plugin Nov 06 17:01:21 ip-172-16-1-25 env 29650 :     plugin = importlib.import_module(plugin_name) Nov 06 17:01:21 ip-172-16-1-25 env 29650 :   File "/usr/lib/python3.5/importlib/__init__.py", line 126, in import_module Nov 06 17:01:21 ip-172-16-1-25 env 29650 :     return _bootstrap._gcd_import(name level: , package, level) Nov 06 17:01:21 ip-172-16-1-25 env 29650 :   File "/usr/local/lib/python3.5/dist-packages/sovtokenfees/__init__.py", line 4, in <module> Nov 06 17:01:21 ip-172-16-1-25 env 29650 :     from sovtokenfees.messages.fields import TxnFeesField Nov 06 17:01:21 ip-172-16-1-25 env 29650 :   File "/usr/local/lib/python3.5/dist-packages/sovtokenfees/messages/fields.py", line 5, in <module> Nov 06 17:01:21 ip-172-16-1-25 env 29650 :     from sovtoken.messages.fields import PublicInputsField, \ Nov 06 17:01:21 ip-172-16-1-25 env 29650 :   File "/usr/local/lib/python3.5/dist-packages/sovtoken/messages/fields.py", line 4, in <module> Nov 06 17:01:21 ip-172-16-1-25 env 29650 :     from sovtoken.util import decode_address_to_vk_bytes Nov 06 17:01:21 ip-172-16-1-25 env 29650 :   File "/usr/local/lib/python3.5/dist-packages/sovtoken/util.py", line 8, in <module> Nov 06 17:01:21 ip-172-16-1-25 env 29650 :     from plenum.server.domain_req_handler import DomainRequestHandler Nov 06 17:01:21 ip-172-16-1-25 env 29650 :   File "/usr/local/lib/python3.5/dist-packages/plenum/server/domain_req_handler.py", line 15, in <module> Nov 06 17:01:21 ip-172-16-1-25 env 29650 :     from plenum.server.ledger_req_handler import LedgerRequestHandler Nov 06 17:01:21 ip-172-16-1-25 env 29650 :   File "/usr/local/lib/python3.5/dist-packages/plenum/server/ledger_req_handler.py", line 8, in <module> Nov 06 17:01:21 ip-172-16-1-25 env 29650 :     from plenum.common.ledger import Ledger Nov 06 17:01:21 ip-172-16-1-25 env 29650 :   File "/usr/local/lib/python3.5/dist-packages/plenum/common/ledger.py", line 5, in <module> Nov 06 17:01:21 ip-172-16-1-25 env 29650 :     from ledger.ledger import Ledger as _Ledger Nov 06 17:01:21 ip-172-16-1-25 env 29650 :   File "/usr/local/lib/python3.5/dist-packages/ledger/ledger.py", line 14, in <module> Nov 06 17:01:21 ip-172-16-1-25 env 29650 :     from storage.helper import initKeyValueStorageIntKeys Nov 06 17:01:21 ip-172-16-1-25 env 29650 : ImportError: cannot import name 'initKeyValueStorageIntKeys' {code} So, it looks like a Steward has Sovrin plugins installed? How is it happened on SLN? It looks like this is the source of the issue. I think we need to  1) remove Sovrin packages 2) try migration again  ></body> </Action>
<Action id="53195" issue="35177" author="ashcherbakov" type="comment" body=" ~mgbailey   ~esplinr  ^^" created="2018-11-08 09:42:41.0" updateauthor="ashcherbakov" updated="2018-11-08 09:42:41.0"/>
<Action id="53222" issue="35177" author="mgbailey" type="comment" body="Thanks for the guidance,  ~ashcherbakov . I have arranged to get with him later today. For question #2, why was the upgrade not rolled back properly?" created="2018-11-08 15:27:14.0" updateauthor="mgbailey" updated="2018-11-08 15:27:14.0"/>
<Action id="53473" issue="35177" author="ashcherbakov" type="comment" created="2018-11-15 09:06:51.0" updateauthor="ashcherbakov" updated="2018-11-15 09:06:51.0"> <body><! CDATA As for the rolling back the Upgrade, this is because of base58 dependency: 1.3.62 depends on 0.2.4 while 1.6.78 on 1.0.0. base58 wasn't explicitly downgraded during upgrade, that's why roll-back failed...  I created a bug INDY-1848 to fix downgrade.  As for this ticket, is the Node repaired and functional now? Can we close the ticket?  ~mgbailey ?  ></body> </Action>
<Action id="53498" issue="35177" author="mgbailey" type="comment" body=" ~ashcherbakov , yes, thank you. Please close the ticket." created="2018-11-15 15:47:39.0" updateauthor="mgbailey" updated="2018-11-15 15:47:39.0"/>
