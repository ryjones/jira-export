<Issue id="27354" key="INDY-1201" number="1201" project="10303" reporter="nhan.trong.nguyen" creator="nhan.trong.nguyen" type="10004" summary="Adding new schema, field &apos;attr_names&apos; of schema json can contain duplicate attribute name." priority="3" resolution="10000" status="10001" created="2018-02-02 04:06:27.0" updated="2019-03-29 20:33:29.0" resolutiondate="2019-03-29 20:33:29.0" votes="0" watches="2" workflowId="28078"> <environment><! CDATA OS: ubuntu16.04  Libindy: 1.3.0  Wrapper: python  indy-node: 1.2.50  indy-plenum: 1.2.29  indy-anoncred: 1.0.11  sovrin: 1.1.7  ></environment> <description><! CDATA When I use libindy to build and submit schema request to ledger, I realize that ledger can accept the schema whose 'attr_names' contains duplicate attribute name.  Reproduce steps when using libindy: | |Step|Data| |1|Create a pool ledger config. pool.create_pool_ledger_config(pool_name, pool_config).|pool_name = 'test_pool' pool_config = \{'genesis_txn': pool_transactions_sandbox_genesis}| |2|Open pool ledger and get 'pool_handle'. pool.open_pool_ledger(pool_name).|pool_name = 'test_pool'| |3|Create a wallet. wallet.create_wallet(pool_name, wallet_name, None, None, None).|pool_name = 'test_pool' wallet_name = 'test_wallet'| |4|Open wallet and get 'wallet_handle'. wallet.open_wallet(wallet_name, None, None).|wallet_name = 'test_wallet'| |5|Create and store did of default trustee as 'did_default_trustee'. signus.create_and_store_my_did(wallet_handle, did_json).|wallet_handle in step 4. did_json = '\{'seed': '000000000000000000000000Trustee1'}'.| |6|Build schema request store created request as 'schema_req'. ledger.build_schema_request(submitter_did, schema_json).|submitter_did = did_default_trustee. schema_json = '\{'name': 'test', 'version': '1.0', 'attr_names':  'name', 'name' }'| |7|Submit 'schema_req' to ledger by role steward. ledger.sign_and_submit_request(pool_handle, wallet_handle, submitter_did, schema_req).|pool_handle in step 2. wallet_handle in step 4. submitter_did = did_default_trustee. schema_req in step 9.|  Expected result: SDK throws an error when the parameters it receives are incorrect. Actual result: ledger accepts the request.      This issue also happen when I execute command manually in CLI to submit schema request.  Reproduce steps when executing manually: # Open command prompt. # Execute command 'indy'. # Execute command 'connect sandbox'. # Execute command 'new key with seed 000000000000000000000000Trustee1'. # Execute command 'send SCHEMA name=test version=1.0 keys=name,name'.  Expected result: the schema request cannot be sent, 'invalid syntax' message displays.  Actual result: ledger accept schema request.  ></description> </Issue>
