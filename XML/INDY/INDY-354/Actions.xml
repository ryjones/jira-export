<Action id="28362" issue="18768" author="stevetolman" type="comment" body=" ~spivachuk ,  ~mzk-vct  We are moving this ticket and ticket indy-355 to the M1 sprint unless you can give us good reasons to keep them in H5." created="2017-07-13 22:13:52.0" updateauthor="stevetolman" updated="2017-07-13 22:13:52.0"/>
<Action id="28424" issue="18768" author="spivachuk" type="comment" created="2017-07-14 17:44:17.0" updateauthor="spivachuk" updated="2017-07-14 17:44:53.0"> <body><! CDATA  ~stevetolman , the issue revealed in both these tickets seems to be caused by that in the current implementation a node replies to a write transaction before it is completely applied to the ledger.  The load test used in this ticket checks the case when some users in parallel update their own verkeys cyclically while other users in parallel read the verkeys of the former cyclically. The load test used in INDY-355 checks the case when all users in parallel update and read their own verkeys cyclically. The behavior with replying to transactions before they are completely applied to the ledger can result in our case in that the signature of a next transaction updating the user's verkey is verified against an expired verkey instead of the last set verkey. And this seems to be the reason of the issue observed. The issue is reproduced under a load of about 20 simultaneous users.  We guess that this issue should not occur if there are pauses between successive write transactions related to the same nym. However, this guess may not be the case because the test {{test_users_write_and_read_own_keys}} (used in INDY-355) performs verification before each next verkey update that the verkey set for the user last time is returned when reading from the ledger and this verification succeeds each time.  I think that we should clarify the conditions when the issue occurs in order to prioritize it right. To do this we should add delays to the user actions cycles and check whether the issue is reproduced or not when these delays are increased or decreased.  ></body> </Action>
<Action id="30290" issue="18768" author="ashcherbakov" type="comment" body="Looks like the issue is fixed in the scope of INDY-761. We need to test this one after INDY-761 is done." created="2017-08-29 08:10:01.0" updateauthor="ashcherbakov" updated="2017-08-29 08:10:01.0"/>
<Action id="30761" issue="18768" author="ozheregelya" type="comment" body="Specified in description script is still using CIDs instead of DIDs and adding to the ledger CID of default steward does not help. This problem with test scripts described in INDY-836. So, this ticket can&apos;t be tested before fix of INDY-836." created="2017-09-12 14:11:22.0" updateauthor="ozheregelya" updated="2017-09-12 14:11:22.0"/>
<Action id="31219" issue="18768" author="ashcherbakov" type="comment" created="2017-09-28 08:39:52.0" updateauthor="ashcherbakov" updated="2017-09-28 08:40:33.0"> <body><! CDATA The behaviour described in this ticket is OK, since we can not guarantee that just written value will be immediately available to use (this is specific of consensus protocols).  A client needs to check seqNo/txnTime in the Reply to decide whether the reply is fresh enough.  ></body> </Action>
<Action id="34416" issue="18768" author="ashcherbakov" type="comment" body="This should be solved by the client checking the tinestamp/seqNo of the Reply to make sure that this is the desired and fresh enough reply" created="2017-11-07 14:39:15.0" updateauthor="ashcherbakov" updated="2017-11-07 14:39:15.0"/>
<Action id="35538" issue="18768" author="krw910" type="comment" body=" ~ozheregelya  take a look at this ticket. If it is not fixed and needs to be reopened push it to the bottom of the backlog with comments. We don&apos;t want to add more development work to this sprint." created="2017-11-27 21:58:00.0" updateauthor="krw910" updated="2017-11-27 21:58:00.0"/>
<Action id="35561" issue="18768" author="ashcherbakov" type="comment" created="2017-11-28 08:25:05.0" updateauthor="ashcherbakov" updated="2017-11-28 08:25:05.0"> <body><! CDATA  ~krw910  I don't think there is something to be checked or fixes here. The behaviour in the ticket is expected.  There is no timestamp check on the client (and on the tests used in this task).  ></body> </Action>
<Action id="35582" issue="18768" author="ozheregelya" type="comment" body="As I can see in previous Alex&apos;s comment and in Daniel&apos;s comment in INDY-716 (https://jira.hyperledger.org/browse/INDY-761?focusedCommentId=31257&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-31257 ), this is expected behavior. By the way, test script from description still doesn&apos;t work. I think I should close this ticket as won&apos;t fix." created="2017-11-28 17:03:58.0" updateauthor="ozheregelya" updated="2017-11-28 17:03:58.0"/>
