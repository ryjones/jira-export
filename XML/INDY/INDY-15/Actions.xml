<Action id="24266" issue="17081" author="krw910" type="comment" created="2017-05-24 21:16:04.0" updateauthor="krw910" updated="2017-05-24 21:16:04.0"> <body><! CDATA Fix from Lovesh Harchandani  https://github.com/evernym/stp/commit/fd68242d94e86d958d94108747a9b4581421d0bd#diff-0236f66d0eed2d1c7c0fdf4394ac91efR580   and here is the test   https://github.com/evernym/stp/commit/fd68242d94e86d958d94108747a9b4581421d0bd#diff-7ffd3624d890e8f700882833e216fc4cR74   ></body> </Action>
<Action id="24267" issue="17081" author="krw910" type="comment" body="To test try sending something like this from CLI, `send ATTRIB dest=&lt;some dest&gt; raw={&quot;k2&quot;: &quot;v2\x9c&quot;}` this should not end up in the ledger, and then `send ATTRIB dest=&lt;some dest&gt; raw={&quot;k2&quot;: &quot;v2&quot;}`. Now you should see something in ledger what i am doing is adding a non utf-8 character `\x9c`" created="2017-05-24 21:17:32.0" updateauthor="krw910" updated="2017-05-24 21:17:32.0"/>
<Action id="24275" issue="17081" author="krw910" type="comment" body="This fix is working and throws an appropriate error message." created="2017-05-24 21:47:01.0" updateauthor="krw910" updated="2017-05-24 21:47:01.0"/>
<Action id="24276" issue="17081" author="danielhardman" type="comment" created="2017-05-24 21:57:30.0" updateauthor="danielhardman" updated="2017-05-24 21:57:30.0"> <body><! CDATA I am going to reject this fix until we have a discussion, because it's not obvious to me that it's okay to require all attrib values to be utf-8. It seems to me that the ledger shouldn't make any assumptions about the nature of an attribute value–not even the assumption that it's text. What if the attribute value is a bitmap, for example?  If we decide that, no, attrib values must be utf8 text, then we can move the ticket back to done.  ></body> </Action>
<Action id="24286" issue="17081" author="danielhardman" type="comment" created="2017-05-25 01:06:57.0" updateauthor="danielhardman" updated="2017-05-25 01:06:57.0"> <body><! CDATA I discussed this with Jason, and he convinced me that requiring utf-8 text for all attrib values is a reasonable constraint for now. We may have to change this later, though.  This is a very narrow fix; it only applies to zmq messages, not to CLI input and so forth. Enforcing as part of a ZMQ read will pick up CLI stuff eventually, but there are other places that might have the same issue. I will explore those in separate tickets.  ></body> </Action>
