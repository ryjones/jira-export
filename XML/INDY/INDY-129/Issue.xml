<Issue id="17316" key="INDY-129" number="129" project="10303" reporter="krw910" assignee="danielhardman" creator="krw910" type="10002" summary="Setup a node in a pool in a NAT scenario" priority="1" resolution="10000" status="10001" created="2017-05-31 15:30:49.0" updated="2019-03-29 20:33:01.0" resolutiondate="2019-03-29 20:33:01.0" votes="0" watches="2" workflowId="17320"> <description><! CDATA We need to test having a node in a NAT scenario. Here is a configuration that is being used in a test pool run outside our QA team.  Setup a node as close to this configuration as possible.  * The validator is running on a virtual machine. * The IP address for the virtual machine is not bound to any of the VM's logical devices. * The firewall is an enterprise edge device/system. * The firewall forwards all TCP traffic on ports 9701 and 9702 to the VM, if these packets are from one of the other validators. * All other packets are dropped by the firewall. * The firewall is not doing stateful inspection. * The node running the validator is also running the CLI and three other agents. * Because traffic from the validator node is using the external IP address (which is what is stored in the ledger) and it does not appear to be from one of the other validators, the firewall will drop all of these packets. * In order to get around this, they created a rule in the nat target of iptables that reroutes all traffic with the destination of the external IP address immediately to localhost.  ></description> </Issue>
