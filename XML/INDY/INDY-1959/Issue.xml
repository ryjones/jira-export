<Issue id="36933" key="INDY-1959" number="1959" project="10303" reporter="sergey.khoroshavin" creator="sergey.khoroshavin" type="10002" summary="Node should be automatically restarted when hung" priority="3" status="10200" created="2019-01-18 14:11:49.0" updated="2019-01-18 14:12:26.0" votes="0" watches="1" workflowId="48498"> <description><! CDATA *Acceptance criteria* * Node control tool should be able to detect when node becomes unresponsive, and force a restart after some timeout (default value of 600 looks nice) * This behavior should be configurable (both whether restart is needed and value of timeout)  *Nice to have* In case of forced restart it would be exceptionally useful to automatically gather stack trace of node for further analysis. It is possible using gdb with python debugging plugin. Following things a required: * _gdb_ and _python3.5-dbg_ packages should be installed * if using Ubuntu 16.04 plugin should be patched:  {code} /usr/share/gdb/auto-load/usr/bin/python3.5m-gdb.py: - fields = gdb.lookup_type('PyUnicodeObject').target().fields() + fields = gdb.lookup_type('PyUnicodeObject').fields() {code} Probably it's possible to place patched plugin somewhere in home directory in order to avoid modifying system files. * attach to process by running _sudo gdb python3.5 <pid>_ * get stack trace by running _py-bt_ inside gdb console * if for some reason we need to keep process running _detach_ should be issued inside gdb console before closing gdb  A lot of useful information can be found here: * https://wiki.python.org/moin/DebuggingWithGdb * https://stackoverflow.com/questions/53084290/python-gdb-error-python-exception-class-runtimeerror-type-does-not-have-a-t * http://grapsus.net/blog/?q=gdb  ></description> </Issue>
