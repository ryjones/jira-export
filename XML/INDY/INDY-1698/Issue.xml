<Issue id="33711" key="INDY-1698" number="1698" project="10303" reporter="devin-fisher" creator="devin-fisher" type="10002" summary="Define how node deals with exceptions thrown by plugins" priority="2" resolution="10000" status="10001" created="2018-09-12 21:57:09.0" updated="2019-10-11 12:00:17.0" resolutiondate="2019-10-11 11:52:52.0" votes="0" watches="6" workflowId="45012"> <description><! CDATA Observed:  An AttributeError was thrown during the execution of PRE_DYNAMIC_VALIDATION hook. This exception was not caught and surfaced all the way out to start_indy_node. Effectively crashing the node.  processReqDuringBatch in indy-plenum/plenum/server/replica.py catches InvalidClientMessageException and UnknownIdentifier but don't deal with more generic exceptions     Expected: A pooly written hook should not be able to crash the node. At least not so easily.     This issue was obsured in work done at Evernym. If this ticket is worked on by an Evernym employee,  https://evernym.atlassian.net/browse/TOK-425 |https://evernym.atlassian.net/browse/TOK-425,  could provide additional context.  *Acceptance Criteria:* * Produce a document that defines: ** the contract between Indy Node and Plugins ** description of how Indy Node will respond when a plugin does not fulfill the contract * Write tests that ensure that Indy Node fulfills this contract. * Ensure the contract is properly implemented in Plenum's code base  ></description> </Issue>
