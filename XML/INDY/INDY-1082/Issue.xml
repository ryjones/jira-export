<Issue id="26696" key="INDY-1082" number="1082" project="10303" reporter="krw910" creator="krw910" type="10004" summary="Nodes crash with &quot;No space left on device&quot; error" priority="1" resolution="10200" status="10001" created="2018-01-09 20:29:25.0" updated="2019-03-29 20:33:22.0" resolutiondate="2019-03-29 20:33:22.0" votes="0" watches="1" workflowId="26696"> <description><! CDATA libindy-crypto=0.2.0 indy-plenum=1.2.212 indy-anoncreds=1.0.32 indy-node=1.2.255 sovrin=1.1.42  I have 7 nodes setup in a global pool. I was running the load scripts that use libindy to get to 100,000+ NYMs I reached 118,000 on most of the nodes, but at least two are only at about 87,000 The scripts stopped working so I checked the nodes with both the read_ledger tool and the validator-info tool. In both cases an error was thrown that there was no space left on the device. I created a new file on the system and when I open it with VIM I am unable to save it with text. I get an error message about the swap file.  *{color:#d04437}Errors{color}*  The logs do not show any errors just that they stopped in the middle of different operations.  *Journalctl -xe* *See attachment for full log output* {code} error: maximum authentication attempts exceeded for root from 89.151.159.158 port 60477 ssh2  preauth  Disconnecting: Too many authentication failures  preauth  {code}  *Opening a node log file* {code} E297: Write error in swap file "Node1.log"  noeol  59162L, 55095296C {code}  *read_ledger --type domain --count* {code} ubuntu@tokyoQALive5:~$ sudo su - indy -c"read_ledger --type domain --count" Traceback (most recent call last): File "/usr/local/bin/read_ledger", line 161, in <module> read_copy_ledger_data_dir = make_copy_of_ledger(ledger_data_dir) File "/usr/local/bin/read_ledger", line 150, in make_copy_of_ledger shutil.copytree(data_dir, read_copy_data_dir) File "/usr/lib/python3.5/shutil.py", line 309, in copytree os.makedirs(dst) File "/usr/lib/python3.5/os.py", line 241, in makedirs mkdir(name, mode) OSError:  Errno 28  No space left on device: '/var/lib/indy/live/data/Node5-read-copy' {code}  validator-info -v {code} ubuntu@tokyoQALive5:~$ sudo su - indy -c"validator-info -v" --- Logging error --- Traceback (most recent call last): File "/usr/lib/python3.5/logging/__init__.py", line 984, in emit self.flush() File "/usr/lib/python3.5/logging/__init__.py", line 964, in flush self.stream.flush() OSError:  Errno 28  No space left on device Call stack: File "/usr/local/bin/validator-info", line 651, in <module> sys.exit(main()) File "/usr/local/bin/validator-info", line 606, in main logger.debug("Cmd line arguments: {}".format(args)) Message: "Cmd line arguments: Namespace(basedir='/var/lib/indy/live', json=False, log='/var/log/indy/validator-info.log', stdlog=False, verbose=True)" Arguments: () --- Logging error --- Traceback (most recent call last): File "/usr/lib/python3.5/logging/handlers.py", line 71, in emit if self.shouldRollover(record): File "/usr/local/lib/python3.5/dist-packages/stp_core/common/logging/TimeAndSizeRotatingFileHandler.py", line 19, in shouldRollover bool(RotatingFileHandler.shouldRollover(self, record)) File "/usr/lib/python3.5/logging/handlers.py", line 188, in shouldRollover self.stream.seek(0, 2)  #due to non-posix-compliant Windows feature OSError:  Errno 28  No space left on device Call stack: File "/usr/local/bin/validator-info", line 651, in <module> sys.exit(main()) File "/usr/local/bin/validator-info", line 643, in main logger.info("Reading file {} ...".format(file_path)) Message: 'Reading file /var/lib/indy/live/node5_info.json ...' Arguments: () Traceback (most recent call last): File "/usr/local/bin/validator-info", line 651, in <module> sys.exit(main()) File "/usr/local/bin/validator-info", line 644, in main print(get_stats_from_file(file_path, args.verbose, args.json)) File "/usr/local/bin/validator-info", line 490, in get_stats_from_file stats = json.loads(f.read()) File "/usr/lib/python3.5/json/__init__.py", line 319, in loads return _default_decoder.decode(s) File "/usr/lib/python3.5/json/decoder.py", line 339, in decode obj, end = self.raw_decode(s, idx=_w(s, 0).end()) File "/usr/lib/python3.5/json/decoder.py", line 357, in raw_decode raise JSONDecodeError("Expecting value", s, err.value) from None json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0) {code}  ></description> </Issue>
