<Issue id="38471" key="INDY-2022" number="2022" project="10303" reporter="mgbailey" assignee="vladimirwork" creator="mgbailey" type="10004" summary="POA: Sovrin TestNet lost consensus" environment="Sovrin TestNet, running indy-node version 1.6.83" priority="2" resolution="10000" status="10001" created="2019-03-14 18:24:35.0" updated="2019-03-29 20:32:38.0" resolutiondate="2019-03-29 20:32:38.0" votes="0" watches="4" workflowId="50114"> <description><! CDATA *Acceptance Criteria* * Examine the issue and identify the root cause. * Raise associated JIRA issues for addressing the problem. * If it is easy to fix, then provide a fix.  *Description* At approximately 2019-03-13 22:18:59 (from the logs) a view change occurred on Sovrin TestNet when the primary 0 was rebooted to apply a system patch. All nodes but one changed to the same primary, but regioit01 did not change. In addition, over the next few hours the domain ledgers on various nodes diverged, with some nodes having 41884 transactions, and others having 41927, or 41928. This is shown in these validator-info extracts: {code:java}  all > show primary { "Absa": { "Node_info": { "Replicas_status": { "Absa:0": { "Primary": "canada:0" } } } }, "EBPI-validation-node": { "Node_info": { "Replicas_status": { "EBPI-validation-node:0": { "Primary": "canada:0" } } } }, "NECValidator": { "Node_info": { "Replicas_status": { "NECValidator:0": { "Primary": "canada:0" } } } }, "NodeTwinPeek": { "Node_info": { "Replicas_status": { "NodeTwinPeek:0": { "Primary": "canada:0" } } } }, "RFCU": { "Node_info": { "Replicas_status": { "RFCU:0": { "Primary": "canada:0" } } } }, "SovrinNode": { "Node_info": { "Replicas_status": { "SovrinNode:0": { "Primary": "canada:0" } } } }, "Swisscom": { "Node_info": { "Replicas_status": { "Swisscom:0": { "Primary": "canada:0" } } } }, "VALIDATOR1": { "Node_info": { "Replicas_status": { "VALIDATOR1:0": { "Primary": "canada:0" } } } }, "anonyome": { "Node_info": { "Replicas_status": { "anonyome:0": { "Primary": "canada:0" } } } }, "australia": { "Node_info": { "Replicas_status": { "australia:0": { "Primary": "canada:0" } } } }, "brazil": { "Node_info": { "Replicas_status": { "brazil:0": { "Primary": "canada:0" } } } }, "canada": { "Node_info": { "Replicas_status": { "canada:0": { "Primary": "canada:0" } } } }, "dativa_validator": { "Node_info": { "Replicas_status": { "dativa_validator:0": { "Primary": "canada:0" } } } }, "england": { "Node_info": { "Replicas_status": { "england:0": { "Primary": "canada:0" } } } }, "ibmTest": { "Node_info": { "Replicas_status": { "ibmTest:0": { "Primary": "canada:0" } } } }, "korea": { "Node_info": { "Replicas_status": { "korea:0": { "Primary": "canada:0" } } } }, "lab10": { "Node_info": { "Replicas_status": { "lab10:0": { "Primary": "canada:0" } } } }, "regioit01": { "Node_info": { "Replicas_status": { "regioit01:0": { "Primary": "brazil:0" } } } }, "singapore": { "Node_info": { "Replicas_status": { "singapore:0": { "Primary": "canada:0" } } } }, "sovrin.sicpa.com": { "Node_info": { "Replicas_status": { "sovrin.sicpa.com:0": { "Primary": "canada:0" } } } }, "trusted_you": { "Node_info": { "Replicas_status": { "trusted_you:0": { "Primary": "canada:0" } } } }, "virginia": { "Node_info": { "Replicas_status": { "virginia:0": { "Primary": "canada:0" } } } } }  all > reload Please be patient while I contact all the nodes in the pool for their status...  all > show transCount { "Absa": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41884, "pool": 123 } } } }, "EBPI-validation-node": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "NECValidator": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "NodeTwinPeek": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "RFCU": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "SovrinNode": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "Swisscom": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "VALIDATOR1": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "anonyome": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "australia": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41928, "pool": 123 } } } }, "brazil": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41928, "pool": 123 } } } }, "canada": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "dativa_validator": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "england": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "ibmTest": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "korea": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "lab10": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "regioit01": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41722, "pool": 123 } } } }, "singapore": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "sovrin.sicpa.com": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "trusted_you": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } }, "virginia": { "Node_info": { "Metrics": { "transaction-count": { "1001": 0, "config": 24705, "ledger": 41927, "pool": 123 } } } } }{code} Consensus was restored using a pool-restart transaction.  We need to determine if there is a fault manifesting here that we have not seen before. Logs have been requested from stewards. If additional logs are needed, please request them.  ></description> </Issue>
