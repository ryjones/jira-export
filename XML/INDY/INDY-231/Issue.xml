<Issue id="18030" key="INDY-231" number="231" project="10303" reporter="ozheregelya" creator="ozheregelya" type="10004" summary=" POOL_UPGRADE  Upgrade scheduled to future date happened in current date on part of nodes" priority="2" resolution="10000" status="10001" created="2017-06-15 09:14:42.0" updated="2019-03-29 20:32:44.0" resolutiondate="2019-03-29 20:32:44.0" votes="0" watches="5" workflowId="18035"> <environment><! CDATA Build Info: sovrin-client version: 0.3.130 sovrin-node version: 0.3.132  OS/Platform: Ubuntu 16.04.2 LTS  ></environment> <description><! CDATA *Overview:* There were several not successful attempts of POOL_UPGRADE (with invalid intervals between upgrades, without timeout, send transaction without connection to test environment, send transaction not as trustee) on following pool: https://docs.google.com/spreadsheets/d/1fkFQlkGFIs6b_tyiL-Wwu-E81SSJLanfdgYzJEhzmNM/edit#gid=359577200  In each POOL_UPGRADE command date of upgrade was not today. After that valid transaction was send and part of nodes were upgraded.  *Steps to Reproduce:* 1. Open CLI in the client. 2. send POOL_UPGRADE transaction (full history of commands is in  ^cli.log ). {code:java} send POOL_UPGRADE name=upgrade-oz version=0.3.138 sha256=aad1242 action=start schedule={'Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv': '2017-06-25T12:30:00.000000+00:00', '8ECVSk179mjsjKRLWiQtssMLgp6EPhWXtaYyStWPSGAb': '2017-06-25T12:35:00.000000+00:00', 'DKVxG2fXXTU8yT5N7hGEbXB3dfdAnYv1JczDUHpmDxya': '2017-06-25T12:40:00.000000+00:00', '4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA': '2017-06-25T12:45:00.000000+00:00', '4SWokCJWJc69Tn74VvLS6t2G2ucvXqM9FDMsWJjmsUxe': '2017-06-25T12:50:00.000000+00:00', 'Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8': '2017-06-25T12:55:00.000000+00:00', 'BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW': '2017-06-25T13:00:00.000000+00:00'} timeout=5{code} 3. Look at nodes.  *Actual Results:* Nodes 1, 2, 3, 4, and 7 were upgraded at specified time but the date was 2017-06-14, nodes 5 and 6 were not upgraded.  *Expected Results:* Upgrade should be scheduled to 2017-06-25, nodes should not be upgraded.  *Additional Information:* Logs of not upgraded node:  ^Node5logs1.tar.gz   ^Node5logs.tar.gz   Logs of upgraded node:  ^Node7logs.tar.gz   upgrade_log of not upgraded node: {code:java} 2017-06-14 13:00:29.988500 scheduled 2017-06-25 12:50:00+00:00 0.3.138{code} upgrade_log of upgraded node: {code:java} 2017-06-14 12:26:17.608040 scheduled 2017-06-25 13:00:00+00:00 0.3.138 2017-06-14 12:59:59.612719 scheduled 2017-06-25 13:00:00+00:00 0.3.138 2017-06-14 13:00:17.123279 succeeded 2017-06-25 13:00:00+00:00 0.3.138{code}  ></description> </Issue>
