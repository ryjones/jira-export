<Issue id="38355" key="INDY-2018" number="2018" project="10303" reporter="vladimirwork" assignee="vladimirwork" creator="vladimirwork" type="10004" summary="Node fails to start after the load" priority="2" resolution="10000" status="10001" created="2019-03-11 11:22:09.0" updated="2019-03-29 20:34:34.0" resolutiondate="2019-03-29 20:34:34.0" votes="0" watches="2" workflowId="49989"> <description><! CDATA Build Info: 1.6.846  Steps to Reproduce: 1. Run load test to fill pool, config and domain ledgers with txns and stop it. 2. Stop the node (Node7). 3. Run another load test to fill pool, config and domain ledgers with txns and stop it. 4. Start the node. 5. Check started node service status and all ledgers.  Actual Results: Node7 has all txn that were written before the stopping but doesn't have all txns that were written after. Indy-node service fails to start with stacktrace: {noformat} Mar 11 10:59:25 b5f7a5aa3d32 env 2895 : Traceback (most recent call last): Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :   File "/usr/local/bin/start_indy_node", line 19, in <module> Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :     client_ip=sys.argv 4 , client_port=int(sys.argv 5 )) Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :   File "/usr/local/lib/python3.5/dist-packages/indy_node/utils/node_runner.py", line 51, in run_node Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :     ha=node_ha, cliha=client_ha) Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :   File "/usr/local/lib/python3.5/dist-packages/indy_node/server/node.py", line 100, in __init__ Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :     config=config) Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :   File "/usr/local/lib/python3.5/dist-packages/plenum/server/node.py", line 246, in __init__ Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :     self.network_stacks_init(seed) Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :   File "/usr/local/lib/python3.5/dist-packages/plenum/server/node.py", line 445, in network_stacks_init Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :     self.nodestack = cls(**kwargs) Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :   File "/usr/local/lib/python3.5/dist-packages/plenum/common/stacks.py", line 175, in __init__ Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :     mt_outgoing_size=MetricsName.OUTGOING_NODE_MESSAGE_SIZE) Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :   File "/usr/local/lib/python3.5/dist-packages/stp_zmq/kit_zstack.py", line 50, in __init__ Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :     mt_outgoing_size=mt_outgoing_size) Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :   File "/usr/local/lib/python3.5/dist-packages/stp_zmq/simple_zstack.py", line 50, in __init__ Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :     mt_outgoing_size=mt_outgoing_size) Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :   File "/usr/local/lib/python3.5/dist-packages/stp_zmq/zstack.py", line 102, in __init__ Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :     self.setupSigning() Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :   File "/usr/local/lib/python3.5/dist-packages/stp_zmq/zstack.py", line 327, in setupSigning Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :     self.addVerifier(vk) Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :   File "/usr/local/lib/python3.5/dist-packages/stp_zmq/zstack.py", line 330, in addVerifier Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :     self.verifiers verkey  = Verifier(z85.decode(verkey)) Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :   File "/usr/local/lib/python3.5/dist-packages/stp_core/crypto/nacl_wrappers.py", line 223, in __init__ Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :     key = VerifyKey(key, encoding.HexEncoder) Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :   File "/usr/local/lib/python3.5/dist-packages/stp_core/crypto/nacl_wrappers.py", line 73, in __init__ Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :     key = encoder.decode(key) Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :   File "/usr/local/lib/python3.5/dist-packages/stp_core/crypto/encoding.py", line 23, in decode Mar 11 10:59:25 b5f7a5aa3d32 env 2895 :     return binascii.unhexlify(data) Mar 11 10:59:25 b5f7a5aa3d32 env 2895 : binascii.Error: Non-hexadecimal digit found {noformat} See debug logs from all nodes in the attachment.  ></description> </Issue>
