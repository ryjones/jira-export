<Issue id="24413" key="INDY-958" number="958" project="10303" reporter="vladimirwork" assignee="vladimirwork" creator="vladimirwork" type="10004" summary="Pool is unable to write NYMs after BLS keys enabling" priority="2" resolution="10000" status="10001" created="2017-11-21 15:42:50.0" updated="2019-03-29 20:33:49.0" resolutiondate="2019-03-29 20:33:49.0" votes="0" watches="2" workflowId="24413"> <description><! CDATA Build Info: indy-node 1.2.47  Steps to Reproduce: 1. Install 1.1.43 version pool. 2. Perform upgrade with force=False to 1.2.47 version. 3. Run enable_bls script as indy user from all nodes, e.g.: bq. enable_bls --name=Node1 --node_dest=Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv --steward_seed=000000000000000000000000Steward1 --bls_seed=000000000000000000000000Steward1 bq. enable_bls --name=Node2 --node_dest=8ECVSk179mjsjKRLWiQtssMLgp6EPhWXtaYyStWPSGAb --steward_seed=000000000000000000000000Steward2 --bls_seed=000000000000000000000000Steward2 bq. enable_bls --name=Node3 --node_dest=DKVxG2fXXTU8yT5N7hGEbXB3dfdAnYv1JczDUHpmDxya --steward_seed=000000000000000000000000Steward3 --bls_seed=000000000000000000000000Steward3 bq. enable_bls --name=Node4 --node_dest=4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA --steward_seed=000000000000000000000000Steward4 --bls_seed=000000000000000000000000Steward4 4. Check /var/lib/indy/sandbox/keys/NodeX/bls_keys. 5. Check logs for "bls" entries. 6. Send and get some NYMs (it works). 7. Restart all nodes. 8. Check logs for "bls" entries. 9. Send and get some NYMs (NYMs adding doesn't work).  Actual Results: There is an error in Step 3: {quote}Traceback (most recent call last): File "/usr/local/bin/enable_bls", line 115, in <module> send_node_txn(node_name, bls_key, steward_seed, node_dest) File "/usr/local/bin/enable_bls", line 54, in send_node_txn client = Client(name, ha=ha) File "/usr/local/lib/python3.5/dist-packages/indy_client/client/client.py", line 51, in __init__ sighex) File "/usr/local/lib/python3.5/dist-packages/plenum/client/client.py", line 151, in __init__ sighex) File "/usr/local/lib/python3.5/dist-packages/plenum/common/stacks.py", line 73, in __init__ seed=seed, sighex=sighex, config=config) File "/usr/local/lib/python3.5/dist-packages/stp_zmq/kit_zstack.py", line 29, in __init__ msgRejectHandler=msgRejectHandler) File "/usr/local/lib/python3.5/dist-packages/stp_zmq/simple_zstack.py", line 39, in __init__ msgRejectHandler=msgRejectHandler) File "/usr/local/lib/python3.5/dist-packages/stp_zmq/zstack.py", line 81, in __init__ self.setupDirs() File "/usr/local/lib/python3.5/dist-packages/stp_zmq/zstack.py", line 263, in setupDirs os.makedirs(d, exist_ok=True) File "/usr/lib/python3.5/os.py", line 231, in makedirs makedirs(head, mode, exist_ok) File "/usr/lib/python3.5/os.py", line 241, in makedirs mkdir(name, mode) PermissionError:  Errno 13  Permission denied: 'keys'{quote}  BLS keys looks like added (Step 4) but not enabled (Step 5). Nodes restarting activates BLS on nodes (Step 8) but pool can read NYMs only after that (Step 9).   ></description> </Issue>
