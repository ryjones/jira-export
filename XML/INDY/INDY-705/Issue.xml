<Issue id="19909" key="INDY-705" number="705" project="10303" reporter="mgbailey" creator="mgbailey" type="10004" summary="Unicorn agents fail on &apos;show proof request&apos;" priority="2" resolution="10200" status="10001" created="2017-08-02 21:28:47.0" updated="2019-03-29 20:33:40.0" resolutiondate="2019-03-29 20:33:40.0" votes="0" watches="0" workflowId="19909"> <description><! CDATA If a connection-request is loaded, and then a modified version of it is loaded again, the modified one having proof-request data, 'show proof request' fails.  Here is the exact sequence (from the unicorn storyboard script): {quote} h4. 3.1.2.4  Establish Connection to unicornA  # replace path with absolute path to .sovrin file $ load sample/alice/unicornA-invitation.sovrin  # to see invitation run $ show connection "UnicornA"  # to accept invitation run $ accept request from "UnicornA" h4. 3.1.2.5  Respond to Proof Request  # to show proof request behaviour, we are loading proof-request from # invitation file # replace path with absolute path to .sovrin file $ load sample/alice/unicornA-proof-request-banking.sovrin  # Check proof request in link $ show connection "UnicornA"  # Check how proof request will be fulfilled $ show proof request "Proof-Banking-Relationship" {quote} The result (from the cli.log):  2017-08-02 10:31:17,181 | ERROR    | base_events.py       (1148) | default_exception_handler | Task exception was never retrieved future: <Task finished coro=<SovrinCli._fulfillAndShowConstructedProof() done, defined at /usr/local/lib/python3.5/dist-packages/sovrin_client/cli/cli.py:1558> exception=AttributeError("'list' object has no attribute 'keys'",)> Traceback (most recent call last):   File "/usr/lib/python3.5/asyncio/tasks.py", line 239, in _step     result = coro.send(None)   File "/usr/local/lib/python3.5/dist-packages/sovrin_client/cli/cli.py", line 1559, in _fulfillAndShowConstructedProof     fulfilled = await self.fulfillProofRequest(proof_request_name)   File "/usr/local/lib/python3.5/dist-packages/sovrin_client/cli/cli.py", line 1540, in fulfillProofRequest     return await self._fulfillProofRequestByContext(self.curContext)   File "/usr/local/lib/python3.5/dist-packages/sovrin_client/cli/cli.py", line 1501, in _fulfillProofRequestByContext     c.proofRequest.attributes)   File "/usr/local/lib/python3.5/dist-packages/sovrin_client/agent/agent_prover.py", line 195, in getClaimsUsedForAttrs     for key in attributes.keys(): AttributeError: 'list' object has no attribute 'keys'  ></description> </Issue>
