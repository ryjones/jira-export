<Action id="33316" issue="22885" author="mgbailey" type="comment" body="I just got a log from another steward that also shows the instance changes in its logs.  This node was unable to be in sync while the instance changes were occurring.  Then at 17:26 the problem abruptly cleared up and the node caught up and synced.  The log is  ^royal_sovrin.log .  The issue is still occurring on ev1." created="2017-10-27 16:12:29.0" updateauthor="mgbailey" updated="2017-10-27 16:12:29.0"/>
<Action id="33366" issue="22885" author="ashcherbakov" type="comment" body="May be related to INDY-34" created="2017-10-30 14:57:34.0" updateauthor="ashcherbakov" updated="2017-10-30 14:57:34.0"/>
<Action id="34237" issue="22885" author="mzk-vct" type="comment" created="2017-11-02 10:57:29.0" updateauthor="mzk-vct" updated="2017-11-02 10:57:29.0"> <body><! CDATA Partial fix which disables performance checks if there were no new requests received. https://github.com/hyperledger/indy-plenum/pull/435  ></body> </Action>
<Action id="34239" issue="22885" author="mzk-vct" type="comment" created="2017-11-02 11:05:09.0" updateauthor="mzk-vct" updated="2017-11-02 11:05:09.0"> <body><! CDATA Problem is caused by the bug in catchup mechanism.   When node does catch-up it receives missing transactions from other nodes and applies them to ledger. Node also tells master instance replica latest preprepare sequence number.  But it does not do same thing for backups and also does not tell Monitor about it.   So if then node receives commit for transaction which it caught up - master replica discards it, but backup replicas execute. That's why maser and backups  are actually at the same state, but since Monitor was not notified it says that backups ordered more requests than master.   ></body> </Action>
<Action id="34300" issue="22885" author="mzk-vct" type="comment" created="2017-11-03 08:19:31.0" updateauthor="mzk-vct" updated="2017-11-03 08:19:31.0"> <body><! CDATA Update: I found that actually monitor is reset, so it is not a part of problem.   Fix that notifies backup replicas about catchup: https://github.com/hyperledger/indy-plenum/pull/438    ></body> </Action>
<Action id="34305" issue="22885" author="mzk-vct" type="comment" body="Node version: 1.2.194" created="2017-11-03 09:51:45.0" updateauthor="mzk-vct" updated="2017-11-03 09:51:45.0"/>
<Action id="34316" issue="22885" author="mgbailey" type="comment" created="2017-11-03 14:05:00.0" updateauthor="mgbailey" updated="2017-11-03 14:05:25.0"> <body><! CDATA Update:  Early this morning, as a test, the steward of the node that was the primary turned off the service on his node temporarily, forcing a view change.  A new primary was selected, and the problem stopped appearing in the ev1 logs.    ^^  ~mzk-vct   ></body> </Action>
<Action id="34497" issue="22885" author="vladimirwork" type="comment" body="Fix works after upgrade form master to master. Upgrade from stable to master is blocked by INDY-833 case 12." created="2017-11-09 13:04:50.0" updateauthor="vladimirwork" updated="2017-11-09 13:04:50.0"/>
<Action id="34590" issue="22885" author="vladimirwork" type="comment" created="2017-11-13 14:35:46.0" updateauthor="vladimirwork" updated="2017-11-13 14:35:46.0"> <body><! CDATA Build Info: indy-node 1.2.208  Steps to Validate: 1. Set up pool (master or stable). 2. Perform upgrade to 1.2.208. 3. Check logs for view changes.  Actual Results: Pool makes view changes with normal rate (due to starting and stopping nodes or due to degraded node performance).  ></body> </Action>
