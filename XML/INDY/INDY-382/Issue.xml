<Issue id="18983" key="INDY-382" number="382" project="10303" reporter="ozheregelya" assignee="nage" creator="ozheregelya" type="10004" summary=" POOL_UPGRADE  Node is upgraded not on schedule when the upgrade is scheduled twice" priority="2" resolution="10000" status="10001" created="2017-07-05 15:50:04.0" updated="2019-03-29 20:34:36.0" resolutiondate="2019-03-29 20:34:36.0" votes="0" watches="3" workflowId="18983"> <environment><! CDATA Build Info:   sovrin-client version: 0.4.9   sovrin-node version: 0.4.9 OS/Platform: Ubuntu 16.04.2 LTS Setup: 4 nodes, 1 client  ></environment> <description><! CDATA *Overview:* Node is upgraded not on schedule when the upgrade is scheduled twice.  *Case 1:* *Steps to Reproduce:* 1. Send POOL_UPGRADE to one or several nodes. Node1 upgrade is scheduled to 2017-07-25 14:00: {code:java} send POOL_UPGRADE name=upgrade-1 version=0.4.9 sha256=f6f2ea8f45d8a057c9566a33f99474da2e5c6a6604d736121650e2730c6fb0a3 action=start schedule={'Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv': '2017-07-25T14:00:00.000000+00:00'} timeout=10 force=True{code} Node2 upgrade is scheduled to 2017-07-10 14:10: {code:java} send POOL_UPGRADE name=upgrade-2 version=0.4.9 sha256=f6f2ea8f45d8a057c9566a33f99474da2e5c6a6604d736121650e2730c6fb0a3 action=start schedule={'8ECVSk179mjsjKRLWiQtssMLgp6EPhWXtaYyStWPSGAb': '2017-07-10T14:10:00.000000+00:00'} timeout=10 force=True{code} 2. Send POOL_UPGRADE to all nodes. All nodes upgrade is scheduled to 2017-07-15: {code:java} send POOL_UPGRADE name=upgrade-3 version=0.4.9 sha256=f6f2ea8f45d8a057c9566a33f99474da2e5c6a6604d736121650e2730c6fb0a3 action=start schedule={'Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv': '2017-07-15T12:20:00.000000+00:00', '8ECVSk179mjsjKRLWiQtssMLgp6EPhWXtaYyStWPSGAb': '2017-7-15T10:25:00.000000+00:00', 'DKVxG2fXXTU8yT5N7hGEbXB3dfdAnYv1JczDUHpmDxya': '2017-07-15T10:30:00.000000+00:00', '4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA': '2017-07-15T10:35:00.000000+00:00'} timeout=10 force=False{code} *Actual Results:* Node 1 and Node 2 were upgraded 2017-07-05 (in date of sending the last POOL_UPGRADE) at 14:00 and 14:10 accordingly.  *Expected Results:* Nodes should be upgraded in accordance with the schedule.  ></description> </Issue>
