<Issue id="33074" key="INDY-1619" number="1619" project="10303" reporter="ozheregelya" assignee="toktar" creator="ozheregelya" type="10004" summary="Pool stopped writing after several View Changes under load with payments" priority="2" resolution="10000" status="10001" created="2018-08-21 16:10:15.0" updated="2019-03-29 20:34:01.0" resolutiondate="2019-03-29 20:34:01.0" votes="0" watches="2" workflowId="44282"> <description><! CDATA *Environment:* indy-node 1.5.555 sovtoken 0.8.0+20.46 sovtokenfees 0.8.0+20.46  *Steps to Reproduce:* 1. Run following load tests:  {code:java} READ python3.5 perf_processes.py -m t -n 1 -t 0.0001 -c 1690 -g ~/stab_transactions_genesis_new -k " {\"get_nym\": {\"count\": 9}}, {\"get_attrib\":{\"count\": 2}}, {\"get_schema\":{\"count\": 2}}, {\"get_cred_def\":{\"count\": 2}} " python3.5 perf_processes.py -m t -n 1 -t 0.0001 -c 1800 -g ~/stab_transactions_genesis_new -k " {\"get_revoc_reg_def\":{\"count\": 2}}, {\"get_revoc_reg_delta\":{\"count\": 2}} " python3.5 perf_processes.py -m t -n 1 -t 0.0001 -c 450 -g ~/stab_transactions_genesis_new -k verify_payment WRITE  python3.5 perf_processes.py -m t -n 1 -t 0.0001 -c 450 -g ~/stab_transactions_genesis_new -k " {\"nym\": {\"count\": 4}}, {\"schema\":{\"count\": 1}}, {\"attrib\":{\"count\": 3}}, {\"cred_def\":{\"count\": 1}} " python3.5 perf_processes.py -m t -n 1 -t 0.0001 -c 100 -g ~/stab_transactions_genesis_new -k " {\"revoc_reg_def\":{\"count\": 1}}, {\"revoc_reg_entry\":{\"count\": 1}} " python3.5 perf_processes.py -m t -n 1 -t 0.0001 -c 225 -g ~/stab_transactions_genesis_new -k " {\"payment\":{\"count\": 9}} " {code} 2. Stop load test after ~12 hours.  *Actual Results:* Pool stopped writing. About 8 View Changes were happened on part of nodes. There are a lot of messages like "NodeXX:0 is getting requests but still does not have a primary so the replica will not process the request until a primary is chosen" on all of nodes. Only 50K txns written.  *Expected Results:* Pool should work.  Logs: s3://qanodelogs/indy-1619/NodeXX/ To get logs, run following command on log processor machine:  aws s3 cp --recursive s3://qanodelogs/indy-1619/ /home/ev/logs/indy-1619/  ></description> </Issue>
