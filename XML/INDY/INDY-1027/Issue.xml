<Issue id="24900" key="INDY-1027" number="1027" project="10303" reporter="krw910" assignee="ashcherbakov" creator="krw910" type="10004" summary="Unable to add BLS key to ledger through CLI" priority="1" resolution="10200" status="10001" created="2017-12-08 22:24:53.0" updated="2019-03-29 20:33:49.0" resolutiondate="2019-03-29 20:33:49.0" votes="0" watches="1" workflowId="24902"> <description><! CDATA After upgrading a pool I was unable to send the node transaction through the CLI to add the new BLS key to the ledger.  {color:#d04437}Short Version I receive the following error through the CLI{color} {code} Node request failed with error: client request invalid: InvalidClientRequest('validation error  ClientNodeOperationData : unknown field - bls_key=<full key shown here> {code}  *Setup* 4 Node pool 1 Client Machine  *{color:#205081}1. Installed current Stable build and configured pool using the live pool settings in the sovrin_config.py file{color}*  *Starting Version* indy-plenum=1.1.27 indy-anoncreds=1.0.10 indy-node=1.1.43 sovrin=1.1.6  *{color:#205081}2. Used the pool upgrade transaction without force=True to upgrade the pool to indy-node 1.2.50{color}*  *Upgrade Version* libindy-crypto=0.1.6-10 indy-plenum=1.2.29 indy-anoncreds=1.0.11 indy-node=1.2.50 sovrin=1.1.7  *{color:#205081}3. Manually upgraded the CLI machine{color}* sudo apt install indy-node -y sudo apt install sovrin -y  *+Post Upgrade Steps to Enable BLS Keys+*  {code} Sometime later each Steward will need to run the following command line to add their BLS Keys 1. From the Validator Node a. Switch to the indy user sudo su - indy 	b. init_bls_keys --name NAME --seed SEED The --seed a 48 character input and is what is used to create the BLS key. NOTE: This is not your Steward or Node seed  Example with seed init_bls_keys --name Node1 --seed 000000000000000000001111111111111111111111111111  c. Capture the Stdout  BLS Public key is 3AfkzUZVn2WT9mxW2zQXMgX39FXSY5qzohnMVpdvNS5KSath1YG5Ux4u9ubTFTaP6W55XX9Yx7xPWeYos489oyY53WzwNBG7X4o32ESnZ9xacLmNsQLBjqc6oqpWGTbEXv4edFTrZ88n93sEh4fjFhQMumaXxDfWJgd9aj7KCSpf38F  2. From the CLI a. Manually upgrade CLI $ sudo apt install indy-node -y $ sudo apt install sovrin -y 	b. The first time running the upgraded CLI you will be prompted to migrated your previous settings. 	c. Now you will be sending a Node transaction like when you added the node to the pool. We will be adding the BLS key as a new parameter to the command to update the pool ledger with public key.  	d. Launch the CLI $ indy 	e. Connect to the pool $ connect live 	f. Set your Steward as the signer in the CLI $ indy@live> use DID <Steward DID> Example: $ indy@live> use DID Th7MpTaRZVRYnPiabds81Y 	g. Send the updated node information with the BLS key $ indy@live> send NODE dest=<node_dest> data={'alias':'<node name>', 'bls_key': 'key_generated_by_init_bls_keys'}  Example: $ indy@live> send NODE dest=Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv data={'alias':'Node1','bls_key': '3AfkzUZVn2WT9mxW2zQXMgX39FXSY5qzohnMVpdvNS5KSath1YG5Ux4u9ubTFTaP6W55XX9Yx7xPWeYos489oyY53WzwNBG7X4o32ESnZ9xacLmNsQLBjqc6oqpWGTbEXv4edFTrZ88n93sEh4fjFhQMumaXxDfWJgd9aj7KCSpf38F'} {code}  *{color:#d04437}This is where you will get the following error{color}* {code} Node request failed with error: client request invalid: InvalidClientRequest('validation error  ClientNodeOperationData : unknown field - bls_key=3AfkzUZVn2WT9mxW2zQXMgX39FXSY5qzohnMVpdvNS5KSath1YG5Ux4u9ubTFTaP6W55XX9Yx7xPWeYos489oyY53WzwNBG7X4o32ESnZ9xacLmNsQLBjqc6oqpWGTbEXv4edFTrZ88n93sEh4fjFhQMumaXxDfWJgd9aj7KCSpf38F',) {code}   ></description> </Issue>
