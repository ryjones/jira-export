<Action id="28099" issue="19067" author="mzk-vct" type="comment" created="2017-07-10 16:05:07.0" updateauthor="mzk-vct" updated="2017-07-10 16:05:07.0"> <body><! CDATA The reason is that ujson dependency which is used for serialization (marshaling) of messages does serialization in different ways depending on its version: ujson==1.35 - does what we need, ujson==1.33 - does it wrong.  Â    ~krw910   ~ozheregelya   ~aleksey-roldugin   ~ozheregelya   ~VladimirWork   Researching solutions, but there is workaround to make pool work - manually install ujson==1.35 for user sovrin  ></body> </Action>
<Action id="28107" issue="19067" author="mzk-vct" type="comment" body="Found simple solution, pull request https://github.com/hyperledger/indy-plenum/pull/266" created="2017-07-10 17:30:42.0" updateauthor="mzk-vct" updated="2017-07-10 17:30:42.0"/>
<Action id="28137" issue="19067" author="mzk-vct" type="comment" body="PR for Sovrin https://github.com/hyperledger/indy-node/pull/218" created="2017-07-11 11:55:42.0" updateauthor="mzk-vct" updated="2017-07-11 11:55:42.0"/>
<Action id="28147" issue="19067" author="mzk-vct" type="comment" created="2017-07-11 13:00:54.0" updateauthor="mzk-vct" updated="2017-07-11 13:02:24.0"> <body><! CDATA  *Problem reason:* # In the scope of message validation task messages were reimplemented as classes, but in a way to keep them compatible with a code that is written for named tuples. That's why they mimic for being named tuples.  # version of ujson that is used for serialization differs depending on the version of OS.  # ujson of version 1.33 uses different methods for getting fields of objects then ujson of version 1.35. # MessageRequest recently introduced includes other messages as field values. In this case ujson 1.33 and 1.35 give different results.  *Changes:* Overrided __dir__ method for MessageBase to make it return only keys that we need  *Builds:* sovrin-node==0.4.19 plenum==0.4.35  *Tests:* https://github.com/hyperledger/indy-plenum/blob/master/plenum/test/input_validation/test_message_serialization.py  *Risk factors:* New message implementation pretends being named tuple quite well, but it is not right solution and this ticket shows that it can cause problems. It was done this way because of time and some other limitations, but it should be re-factored.  *Risk:* Low  *Recommendations for QA (optional):* Try running pool with different versions of ujson  ></body> </Action>
<Action id="28222" issue="19067" author="vladimirwork" type="comment" created="2017-07-12 10:35:06.0" updateauthor="vladimirwork" updated="2017-07-12 10:35:06.0"> <body><! CDATA Build Info: sovrin-node 0.4.19  Steps to Validate: 1. Start nodes with ujson 1.33/1.34/1.35.  Actual Results: Nodes start successfully. There are no errors in systemctl status sovrin-node.service and journalctl.  ></body> </Action>
