<Action id="57758" issue="32575" author="cam-parra" type="comment" created="2019-02-28 21:01:12.0" updateauthor="cam-parra" updated="2019-02-28 21:01:44.0"> <body><! CDATA INDY1554 POA  Purpose  This will set write permissions for the `REVOC_REG_DEF` txn and setting it's properties correctly on the ledger.  Plan  1. Write integration tests in  indy_node/test/write_permission/test_revocation_write_permission.py ( https://github.com/hyperledger/indy-node/blob/master/indy_node/test/write_permission/test_revocation_write_permission.py ) 2. Add rules for revocation using TDD 3. Update documentation 4. Integrate with old and new request handlers  ></body> </Action>
<Action id="58290" issue="32575" author="cam-parra" type="comment" created="2019-03-19 13:35:16.0" updateauthor="cam-parra" updated="2019-03-19 13:35:16.0"> <body><! CDATA Problem reason/description:  Revocation did not have the correct permissions set.  Changes:  auth_map.py modified  domain_request_handler modified   PR:      https://github.com/hyperledger/indy-node/pull/1192      Version: h1. #1204     Risk factors: - ....  Risk: - med  Covered with tests: - https://github.com/hyperledger/indy-node/blob/master/indy_node/test/write_permission/test_revocation_write_permission.py  Recommendations for QA - add edit revocation with different roles  ></body> </Action>
<Action id="58348" issue="32575" author="vladimirwork" type="comment" created="2019-03-20 15:31:06.0" updateauthor="vladimirwork" updated="2019-03-20 15:31:06.0"> <body><! CDATA Build Info: indy-node 1.6.868  Steps to Reproduce: 0. Install pool with ANYONE_CAN_WRITE=False (or with default settings). 1. Create REVOC_REG_DEF and REVOC_REG_ENTRY by default Trustee. 2. Add None role entity and another Trustee entity in the ledger. 3. Try to edit REVOC_REG_DEF and REVOC_REG_ENTRY from Step 1 by None role entity. 4. Try to edit REVOC_REG_DEF and REVOC_REG_ENTRY from Step 1 by another Trustee role entity.  Actual Results: I've got correct error for REVOC_REG_ENTRY *but not for REVOC_REG_DEF (there is REPLYs for both entities)*: 3: {noformat} {"result":{"txnMetadata":{"seqNo":17,"txnId":"CQU4s9soCBJbkpk7vnQCJH:4:V4SGRU86Z58d6TV7PBUe6f:3:CL:12:cred_def_tag:CL_ACCUM:another_revoc_def_tag","txnTime":1553094091},"ver":"1","reqSignature":{"values": {"value":"3kz2TonGkEMrYy9rpSYYAKXBzahBepp27WMRN1mmSu7kNzAsqUmmJeH1DJXZ3LVfJdmUxmVFNCV1Rx4t9FFQvcKH","from":"CQU4s9soCBJbkpk7vnQCJH"} ,"type":"ED25519"},"txn":{"metadata":{"digest":"ca124e2d1b6d72b310fcba641966de6a02853428e48a38c276759af1b1cb5e47","from":"CQU4s9soCBJbkpk7vnQCJH","reqId":1553094090499436427},"type":"113","protocolVersion":2,"data":{"credDefId":"V4SGRU86Z58d6TV7PBUe6f:3:CL:12:cred_def_tag","tag":"another_revoc_def_tag","revocDefType":"CL_ACCUM","value":{"tailsLocation":"tails\/BHTDmteEQwRCkK6Q7hHw3XfjaSgFofKwQTBhqd3HojQF","issuanceType":"ISSUANCE_BY_DEFAULT","publicKeys":{"accumKey":{"z":"1 05070A9433CA190711130017BCD0F163F5EF329D4A015671B662F1B0B56FA062 1 0CAD8FA88443C713AA2B8E0DD5ECD548F7FC0B061235EE9CD59E7FE32559C287 1 193BA552717DE6FABEB3F9F6FABE6F7C7B18C596F3279A760112EE593E28A8D6 1 155B82B5A201AD94DBBF82099E6AEDCCABDA2963DFD3260FD29CD44B3C83361E 1 03D8CA2B0FB17AA63EB89482888BBD65CC59C0A9FCCC363766E0C3A7970677B4 1 0E15B47CE3028547E6F3195D42335360883E358DEFAE1AB30E8CB9C1DF7A204F 1 20EB8ADF41E96FA48DDB55DEE5169D334C9970C0359E36674D4A5B7FEA91CFBD 1 1004A467068E5EAC3A20D0F012F4B83AA435002686FA5A294039EFEB99169C5B 1 0E9095962DC2698EBF160D5F64EC1EFA2436F5F4E15312328AE296B9276212CB 1 08603E479E0E6E37C0AB8372B962D26FDF5883BF29BF50C06D142B4910C50937 1 0B65C41B05B47F549931F6BB59563E44201018C47EC800B847DFDC62C1C43AFA 1 1A2018EB6AA7437C7A51FA61B62E76C6A1DE337B45657095FF85A07A363FB885"}},"maxCredNum":1,"tailsHash":"BHTDmteEQwRCkK6Q7hHw3XfjaSgFofKwQTBhqd3HojQF"},"id":"V4SGRU86Z58d6TV7PBUe6f:4:V4SGRU86Z58d6TV7PBUe6f:3:CL:12:cred_def_tag:CL_ACCUM:another_revoc_def_tag"}},"auditPath": "DejEdYJk3DZsx4rgW934C3epRiej2wRAVn8xCdSTnSPx" ,"rootHash":"5CLsSvCmWAo54MzhmdaV62cvzB2VXzbmKRbWARHMsaER"},"op":"REPLY"}  {'identifier': 'CQU4s9soCBJbkpk7vnQCJH', 'reason': "client request invalid: UnauthorizedClientRequest('None role can not edit REVOC_REG_ENTRY txn since only owner can modify it',)", 'op': 'REJECT', 'reqId': 1553094091471307564} {noformat}  4: {noformat} {"result":{"ver":"1","txn":{"protocolVersion":2,"data":{"revocDefType":"CL_ACCUM","id":"V4SGRU86Z58d6TV7PBUe6f:4:V4SGRU86Z58d6TV7PBUe6f:3:CL:12:cred_def_tag:CL_ACCUM:another_revoc_def_tag","credDefId":"V4SGRU86Z58d6TV7PBUe6f:3:CL:12:cred_def_tag","value":{"tailsHash":"BHTDmteEQwRCkK6Q7hHw3XfjaSgFofKwQTBhqd3HojQF","tailsLocation":"tails\/BHTDmteEQwRCkK6Q7hHw3XfjaSgFofKwQTBhqd3HojQF","maxCredNum":1,"issuanceType":"ISSUANCE_BY_DEFAULT","publicKeys":{"accumKey":{"z":"1 05070A9433CA190711130017BCD0F163F5EF329D4A015671B662F1B0B56FA062 1 0CAD8FA88443C713AA2B8E0DD5ECD548F7FC0B061235EE9CD59E7FE32559C287 1 193BA552717DE6FABEB3F9F6FABE6F7C7B18C596F3279A760112EE593E28A8D6 1 155B82B5A201AD94DBBF82099E6AEDCCABDA2963DFD3260FD29CD44B3C83361E 1 03D8CA2B0FB17AA63EB89482888BBD65CC59C0A9FCCC363766E0C3A7970677B4 1 0E15B47CE3028547E6F3195D42335360883E358DEFAE1AB30E8CB9C1DF7A204F 1 20EB8ADF41E96FA48DDB55DEE5169D334C9970C0359E36674D4A5B7FEA91CFBD 1 1004A467068E5EAC3A20D0F012F4B83AA435002686FA5A294039EFEB99169C5B 1 0E9095962DC2698EBF160D5F64EC1EFA2436F5F4E15312328AE296B9276212CB 1 08603E479E0E6E37C0AB8372B962D26FDF5883BF29BF50C06D142B4910C50937 1 0B65C41B05B47F549931F6BB59563E44201018C47EC800B847DFDC62C1C43AFA 1 1A2018EB6AA7437C7A51FA61B62E76C6A1DE337B45657095FF85A07A363FB885"}}},"tag":"another_revoc_def_tag"},"type":"113","metadata":{"digest":"cf9d1d805fbf56c6b9aef3a87daf63e66662d3753e7239dfbdacd88c039c8e5f","from":"5nKYKaNC3CY5HPN7QGt7tn","reqId":1553094092334199976}},"auditPath": "3yC6KAErj3iDqi2GgqWxoSKCvHwsqDap8f5apLomQzR3","DejEdYJk3DZsx4rgW934C3epRiej2wRAVn8xCdSTnSPx" ,"reqSignature":{"values": {"value":"5skZQnMix8Z6gHVYygL5xnBTXWmp5HoD1iXcosWq115M3Pa949P6npaVz9zpByoxQF7iYuZU9YWUZKXjBA4LUJqu","from":"5nKYKaNC3CY5HPN7QGt7tn"} ,"type":"ED25519"},"txnMetadata":{"txnTime":1553094093,"txnId":"5nKYKaNC3CY5HPN7QGt7tn:4:V4SGRU86Z58d6TV7PBUe6f:3:CL:12:cred_def_tag:CL_ACCUM:another_revoc_def_tag","seqNo":18},"rootHash":"4zehkLiyTLS7RSWyu4jsfdQCWnp2GHi1TpCfP5aQMn8"},"op":"REPLY"}  {'reqId': 1553094093520915925, 'reason': "client request invalid: UnauthorizedClientRequest('TRUSTEE can not edit REVOC_REG_ENTRY txn since only owner can modify it',)", 'op': 'REJECT', 'identifier': '5nKYKaNC3CY5HPN7QGt7tn'} {noformat}  Expected Results: There are should be similar REJECTs for both txn types.  ></body> </Action>
<Action id="58364" issue="32575" author="vladimirwork" type="comment" created="2019-03-21 08:26:56.0" updateauthor="vladimirwork" updated="2019-03-21 08:26:56.0"> <body><! CDATA Build Info: indy-node 1.6.868  Actual Results: REVOC_REG_DEF and REVOC_REG_ENTRY permissions work as expected. There is an issue with ledger and client REVOC_REG_DEF_IDs difference - it will be fixed in scope of INDY-2030.  ></body> </Action>
