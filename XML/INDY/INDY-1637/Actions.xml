<Action id="49876" issue="33127" author="sergey-shilov" type="comment" created="2018-09-05 08:26:29.0" updateauthor="sergey-shilov" updated="2018-09-11 09:37:20.0"> <body><! CDATA *Problem state / reason:*  Validator info tool dumped just the last node state. It would be better for debugging to have the history of node states.  *Changes:*  Now validator info tool dumps node state into RocksDB in addition to single file. This functionality is not supposed to be used in production and disabled by default. To enable dumping of validator-info into DB in addition to file specify the following in indy config file (/etc/indy/...): VALIDATOR_INFO_USE_DB {color:#f92672}= {color}{color:#66d9ef}True{color}  Also implemented *validator-info-history* tool to read data from RocksDB storages, see usage.  *Committed into:*  https://github.com/hyperledger/indy-plenum/pull/910  https://github.com/hyperledger/indy-node/pull/929   https://github.com/hyperledger/indy-node/pull/933  indy-node 1.6.597-master  *Risk factors:*  Nothing is expected.  *Risk:*  Low  *Recommendations for QA:*  Current implementation of *validator-info-history* tool is not final. Please try all features described in usage and provide your feedback what should be changed/improved for ease of use. Also try to use *validator-info-history* to read from several storages got from several nodes. A subset of nodes can be specified in command line parameters.  ></body> </Action>
<Action id="49892" issue="33127" author="zhigunenko.dsr" type="comment" created="2018-09-05 14:04:41.0" updateauthor="zhigunenko.dsr" updated="2018-09-05 14:04:41.0"> <body><! CDATA *Environment:* indy-node 1.6.597 indy-plenum 1.6.538  *Steps to Validate:* 1) {color:#00875A}validator-info-history --help{color}  2) {color:#00875A}validator-info-history -v -n -1 {color} 3) {color:#00875A}validator-info-history -v -s --names Node8{color} 4) {color:#00875A}validator-info-history -v -n 1 --names Node1,Node3{color} 5) {color:#00875A}validator-info-history -v -n 2 -s{color} 6) {color:#00875A}validator-info-history -v -n 99{color} 7) {color:#DE350B}validator-info-history -v --frm 1 --to 1536154610{color} - shows nothing, but in case --frm 1536154608 --to 1536154610 there is single record with timestamp=1536154609 8) {color:#00875A}validator-info-history -v --frm 1536154610 --to 0.1{color} - expected exception "invalid int value" 9) {color:#FF8B00}validator-info-history -v --frm 1536154615 --to 1536154610{color} - AssertionError is thrown 10) {color:#FF8B00}validator-info-history -v --frm 1536154610 --to 1536154605{color} - AssertionError is thrown 11) {color:#00875A}validator-info-history --fields Pool{color} - expected "Incorrect fields path" 12) {color:#00875A}validator-info-history --fields Pool_info{color} 13) {color:#00875A}validator-info-history --json --names Node1,Node3 --frm 1536154608 --to 1536154612 --fields Hardware,Pool_info.f_value{color}  14) {color:#00875A}validator-info{color} 15) {color:#00875A}validator-info -v{color} 16) {color:#00875A}CLI get-validator-info command{color}  *Additionl info:*  ~sergey-shilov  1) with "v" and without "json" it would be better if timestamp would be human-readable, e.g. '%Y-%m-%d %H:%M:%S'    ></body> </Action>
<Action id="50058" issue="33127" author="ashcherbakov" type="comment" body="Fixed in  https://github.com/hyperledger/indy-node/pull/936  (Indy Node 1.6.599)" created="2018-09-07 07:26:14.0" updateauthor="ashcherbakov" updated="2018-09-07 07:26:14.0"/>
<Action id="50065" issue="33127" author="zhigunenko.dsr" type="comment" created="2018-09-07 09:23:19.0" updateauthor="zhigunenko.dsr" updated="2018-09-07 09:23:19.0"> <body><! CDATA *Environment:* indy-node                  1.6.599 indy-plenum                1.6.538  *Steps to Validate:* 1) {color:#00875A}validator-info-history -v --frm 1 --to 1536309570{color} 2) {color:#00875A}validator-info-history -v --frm 1536309569 --to 1536309570{color} 3) {color:#00875A}validator-info-history -v --frm 1536309569 --to 0{color} - expected Error Message 4) {color:#00875A}validator-info-history --json --names Node1 --frm 1536309569 --to 1636309569 --fields Hardware,Pool_info.f_value{color}  ></body> </Action>
<Action id="50231" issue="33127" author="sergey-shilov" type="comment" created="2018-09-11 09:32:25.0" updateauthor="sergey-shilov" updated="2018-09-11 09:32:25.0"> <body><! CDATA To enable dumping of validator-info into DB in addition to file specify the following in indy config file (/etc/indy/...): VALIDATOR_INFO_USE_DB {color:#f92672}= {color}{color:#66d9ef}True{color}  ></body> </Action>
