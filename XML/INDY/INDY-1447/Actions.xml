<Action id="47115" issue="31628" author="vladimirwork" type="comment" created="2018-07-09 16:17:27.0" updateauthor="vladimirwork" updated="2018-07-09 16:17:27.0"> <body><! CDATA Config ledgers on all nodes match, there are the last entries about 1.4.66 upgrade: {noformat} nva-stn-q001.qa.evernym.com 27 {"reqSignature":{"type":"ED25519","values": {"from":"V4SGRU86Z58d6TV7PBUe6f","value":"5UAut2SQaZUBGw3frT3vx92LmX9tx1uF2JkDSknEhuK1xqEyYwntXvU6o4xKcdqPHwXHxGjnRQABQQbCBRYhK3AB"} },"txn":{"data":{"action":"start","force":true,"name":"upgrade1366","reinstall":false,"schedule":{"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA":"2018-07-02T13:30:00.258870-06:00","4SWokCJWJc69Tn74VvLS6t2G2ucvXqM9FDMsWJjmsUxe":"2018-07-02T13:30:00.258870-06:00","8ECVSk179mjsjKRLWiQtssMLgp6EPhWXtaYyStWPSGAb":"2018-07-02T13:30:00.258870-06:00","BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW":"2018-07-02T13:30:00.258870-06:00","Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8":"2018-07-02T13:30:00.258870-06:00","DKVxG2fXXTU8yT5N7hGEbXB3dfdAnYv1JczDUHpmDxya":"2018-07-02T13:30:00.258870-06:00","Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv":"2018-07-02T13:30:00.258870-06:00"},"sha256":"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855","timeout":15,"version":"1.4.66"},"metadata":{"digest":"f5c626cd1e6ee57986c17345a06430e8b4939ccdf1a60c5f92d525dc03209cc5","from":"V4SGRU86Z58d6TV7PBUe6f","reqId":1530556300625867000},"type":"109"},"txnMetadata":{"seqNo":27,"txnTime":1530556303},"ver":"1"} 28 {"reqSignature":{"type":"ED25519","values": {"from":"BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW","value":"2ZAFnAK3sqTizTqowrqVanggk2976KeopzCmAEPCZS4TF3tCx59tCwVx5eRFYLUHBpgEJ4KQg3V8adj2HZFNDoCi"} },"txn":{"data":{"data":{"action":"in_progress","version":"1.4.66"}},"metadata":{"digest":"9e99995de7c6180a0fec7ebc3e283927571171cc1dd1bf5a1955f22a4a2928b0","from":"BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW","reqId":1530559800266709},"type":"110"},"txnMetadata":{"seqNo":28,"txnTime":1530559800},"ver":"1"} 29 {"reqSignature":{"type":"ED25519","values": {"from":"Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8","value":"2gMqtyeK41DiGfL8YTFxBG33yu3h3pJsEXmkahyQknEXY5D9idW3tHHAgJzyWrPpQYhP5qR2k3ArfomvQng7vWUG"} },"txn":{"data":{"data":{"action":"in_progress","version":"1.4.66"}},"metadata":{"digest":"63b2a83f5b2a94151aa7f7bb60b808f63b0f60ec61409017a5d03f51d1f329fb","from":"Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8","reqId":1530559800261900},"type":"110"},"txnMetadata":{"seqNo":29,"txnTime":1530559800},"ver":"1"} 30 {"reqSignature":{"type":"ED25519","values": {"from":"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA","value":"3M6p1uWu3tTY2svfpLbGH42RmqwTGywXohy3uz1iTU4GK5nndEMALvi5hRqfavgBtx9HdTq8vMzUp6w5sdNLdekb"} },"txn":{"data":{"data":{"action":"in_progress","version":"1.4.66"}},"metadata":{"digest":"b715ce1d67552dce1a1c8999fc1530a73108933b205e529bcfd3620625c6bf7a","from":"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA","reqId":1530559799531887},"type":"110"},"txnMetadata":{"seqNo":30,"txnTime":1530559800},"ver":"1"}  sgp-stn-q001.qa.evernym.com  27,{"action":"start","force":true,"identifier":"V4SGRU86Z58d6TV7PBUe6f","name":"upgrade1366","reinstall":false,"reqId":1530556300625867000,"schedule":{"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA":"2018-07-02T13:30:00.258870-06:00","4SWokCJWJc69Tn74VvLS6t2G2ucvXqM9FDMsWJjmsUxe":"2018-07-02T13:30:00.258870-06:00","8ECVSk179mjsjKRLWiQtssMLgp6EPhWXtaYyStWPSGAb":"2018-07-02T13:30:00.258870-06:00","BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW":"2018-07-02T13:30:00.258870-06:00","Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8":"2018-07-02T13:30:00.258870-06:00","DKVxG2fXXTU8yT5N7hGEbXB3dfdAnYv1JczDUHpmDxya":"2018-07-02T13:30:00.258870-06:00","Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv":"2018-07-02T13:30:00.258870-06:00"},"sha256":"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855","signature":"5UAut2SQaZUBGw3frT3vx92LmX9tx1uF2JkDSknEhuK1xqEyYwntXvU6o4xKcdqPHwXHxGjnRQABQQbCBRYhK3AB","signatures":null,"timeout":15,"txnTime":1530556303,"type":"109","version":"1.4.66"}   28,{"data":{"action":"in_progress","version":"1.4.66"},"identifier":"BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW","reqId":1530559800266709,"signature":"2ZAFnAK3sqTizTqowrqVanggk2976KeopzCmAEPCZS4TF3tCx59tCwVx5eRFYLUHBpgEJ4KQg3V8adj2HZFNDoCi","signatures":null,"txnTime":1530559800,"type":"110"}   29,{"data":{"action":"in_progress","version":"1.4.66"},"identifier":"Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8","reqId":1530559800261900,"signature":"2gMqtyeK41DiGfL8YTFxBG33yu3h3pJsEXmkahyQknEXY5D9idW3tHHAgJzyWrPpQYhP5qR2k3ArfomvQng7vWUG","signatures":null,"txnTime":1530559800,"type":"110"}   30,{"data":{"action":"in_progress","version":"1.4.66"},"identifier":"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA","reqId":1530559799531887,"signature":"3M6p1uWu3tTY2svfpLbGH42RmqwTGywXohy3uz1iTU4GK5nndEMALvi5hRqfavgBtx9HdTq8vMzUp6w5sdNLdekb","signatures":null,"txnTime":1530559800,"type":"110"}   syd-stn-q001.qa.evernym.com  27,{"action":"start","force":true,"identifier":"V4SGRU86Z58d6TV7PBUe6f","name":"upgrade1366","reinstall":false,"reqId":1530556300625867000,"schedule":{"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA":"2018-07-02T13:30:00.258870-06:00","4SWokCJWJc69Tn74VvLS6t2G2ucvXqM9FDMsWJjmsUxe":"2018-07-02T13:30:00.258870-06:00","8ECVSk179mjsjKRLWiQtssMLgp6EPhWXtaYyStWPSGAb":"2018-07-02T13:30:00.258870-06:00","BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW":"2018-07-02T13:30:00.258870-06:00","Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8":"2018-07-02T13:30:00.258870-06:00","DKVxG2fXXTU8yT5N7hGEbXB3dfdAnYv1JczDUHpmDxya":"2018-07-02T13:30:00.258870-06:00","Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv":"2018-07-02T13:30:00.258870-06:00"},"sha256":"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855","signature":"5UAut2SQaZUBGw3frT3vx92LmX9tx1uF2JkDSknEhuK1xqEyYwntXvU6o4xKcdqPHwXHxGjnRQABQQbCBRYhK3AB","signatures":null,"timeout":15,"txnTime":1530556303,"type":"109","version":"1.4.66"}   28,{"data":{"action":"in_progress","version":"1.4.66"},"identifier":"BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW","reqId":1530559800266709,"signature":"2ZAFnAK3sqTizTqowrqVanggk2976KeopzCmAEPCZS4TF3tCx59tCwVx5eRFYLUHBpgEJ4KQg3V8adj2HZFNDoCi","signatures":null,"txnTime":1530559800,"type":"110"}   29,{"data":{"action":"in_progress","version":"1.4.66"},"identifier":"Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8","reqId":1530559800261900,"signature":"2gMqtyeK41DiGfL8YTFxBG33yu3h3pJsEXmkahyQknEXY5D9idW3tHHAgJzyWrPpQYhP5qR2k3ArfomvQng7vWUG","signatures":null,"txnTime":1530559800,"type":"110"}   30,{"data":{"action":"in_progress","version":"1.4.66"},"identifier":"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA","reqId":1530559799531887,"signature":"3M6p1uWu3tTY2svfpLbGH42RmqwTGywXohy3uz1iTU4GK5nndEMALvi5hRqfavgBtx9HdTq8vMzUp6w5sdNLdekb","signatures":null,"txnTime":1530559800,"type":"110"}   tky-stn-q001.qa.evernym.com 27 {"reqSignature":{"type":"ED25519","values": {"from":"V4SGRU86Z58d6TV7PBUe6f","value":"5UAut2SQaZUBGw3frT3vx92LmX9tx1uF2JkDSknEhuK1xqEyYwntXvU6o4xKcdqPHwXHxGjnRQABQQbCBRYhK3AB"} },"txn":{"data":{"action":"start","force":true,"name":"upgrade1366","reinstall":false,"schedule":{"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA":"2018-07-02T13:30:00.258870-06:00","4SWokCJWJc69Tn74VvLS6t2G2ucvXqM9FDMsWJjmsUxe":"2018-07-02T13:30:00.258870-06:00","8ECVSk179mjsjKRLWiQtssMLgp6EPhWXtaYyStWPSGAb":"2018-07-02T13:30:00.258870-06:00","BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW":"2018-07-02T13:30:00.258870-06:00","Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8":"2018-07-02T13:30:00.258870-06:00","DKVxG2fXXTU8yT5N7hGEbXB3dfdAnYv1JczDUHpmDxya":"2018-07-02T13:30:00.258870-06:00","Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv":"2018-07-02T13:30:00.258870-06:00"},"sha256":"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855","timeout":15,"version":"1.4.66"},"metadata":{"digest":"f5c626cd1e6ee57986c17345a06430e8b4939ccdf1a60c5f92d525dc03209cc5","from":"V4SGRU86Z58d6TV7PBUe6f","reqId":1530556300625867000},"type":"109"},"txnMetadata":{"seqNo":27,"txnTime":1530556303},"ver":"1"} 28 {"reqSignature":{"type":"ED25519","values": {"from":"BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW","value":"2ZAFnAK3sqTizTqowrqVanggk2976KeopzCmAEPCZS4TF3tCx59tCwVx5eRFYLUHBpgEJ4KQg3V8adj2HZFNDoCi"} },"txn":{"data":{"data":{"action":"in_progress","version":"1.4.66"}},"metadata":{"digest":"9e99995de7c6180a0fec7ebc3e283927571171cc1dd1bf5a1955f22a4a2928b0","from":"BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW","reqId":1530559800266709},"type":"110"},"txnMetadata":{"seqNo":28,"txnTime":1530559800},"ver":"1"} 29 {"reqSignature":{"type":"ED25519","values": {"from":"Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8","value":"2gMqtyeK41DiGfL8YTFxBG33yu3h3pJsEXmkahyQknEXY5D9idW3tHHAgJzyWrPpQYhP5qR2k3ArfomvQng7vWUG"} },"txn":{"data":{"data":{"action":"in_progress","version":"1.4.66"}},"metadata":{"digest":"63b2a83f5b2a94151aa7f7bb60b808f63b0f60ec61409017a5d03f51d1f329fb","from":"Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8","reqId":1530559800261900},"type":"110"},"txnMetadata":{"seqNo":29,"txnTime":1530559800},"ver":"1"} 30 {"reqSignature":{"type":"ED25519","values": {"from":"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA","value":"3M6p1uWu3tTY2svfpLbGH42RmqwTGywXohy3uz1iTU4GK5nndEMALvi5hRqfavgBtx9HdTq8vMzUp6w5sdNLdekb"} },"txn":{"data":{"data":{"action":"in_progress","version":"1.4.66"}},"metadata":{"digest":"b715ce1d67552dce1a1c8999fc1530a73108933b205e529bcfd3620625c6bf7a","from":"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA","reqId":1530559799531887},"type":"110"},"txnMetadata":{"seqNo":30,"txnTime":1530559800},"ver":"1"}  can-stn-q001.qa.evernym.com 27 {"reqSignature":{"type":"ED25519","values": {"from":"V4SGRU86Z58d6TV7PBUe6f","value":"5UAut2SQaZUBGw3frT3vx92LmX9tx1uF2JkDSknEhuK1xqEyYwntXvU6o4xKcdqPHwXHxGjnRQABQQbCBRYhK3AB"} },"txn":{"data":{"action":"start","force":true,"name":"upgrade1366","reinstall":false,"schedule":{"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA":"2018-07-02T13:30:00.258870-06:00","4SWokCJWJc69Tn74VvLS6t2G2ucvXqM9FDMsWJjmsUxe":"2018-07-02T13:30:00.258870-06:00","8ECVSk179mjsjKRLWiQtssMLgp6EPhWXtaYyStWPSGAb":"2018-07-02T13:30:00.258870-06:00","BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW":"2018-07-02T13:30:00.258870-06:00","Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8":"2018-07-02T13:30:00.258870-06:00","DKVxG2fXXTU8yT5N7hGEbXB3dfdAnYv1JczDUHpmDxya":"2018-07-02T13:30:00.258870-06:00","Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv":"2018-07-02T13:30:00.258870-06:00"},"sha256":"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855","timeout":15,"version":"1.4.66"},"metadata":{"digest":"f5c626cd1e6ee57986c17345a06430e8b4939ccdf1a60c5f92d525dc03209cc5","from":"V4SGRU86Z58d6TV7PBUe6f","reqId":1530556300625867000},"type":"109"},"txnMetadata":{"seqNo":27,"txnTime":1530556303},"ver":"1"} 28 {"reqSignature":{"type":"ED25519","values": {"from":"BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW","value":"2ZAFnAK3sqTizTqowrqVanggk2976KeopzCmAEPCZS4TF3tCx59tCwVx5eRFYLUHBpgEJ4KQg3V8adj2HZFNDoCi"} },"txn":{"data":{"data":{"action":"in_progress","version":"1.4.66"}},"metadata":{"digest":"9e99995de7c6180a0fec7ebc3e283927571171cc1dd1bf5a1955f22a4a2928b0","from":"BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW","reqId":1530559800266709},"type":"110"},"txnMetadata":{"seqNo":28,"txnTime":1530559800},"ver":"1"} 29 {"reqSignature":{"type":"ED25519","values": {"from":"Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8","value":"2gMqtyeK41DiGfL8YTFxBG33yu3h3pJsEXmkahyQknEXY5D9idW3tHHAgJzyWrPpQYhP5qR2k3ArfomvQng7vWUG"} },"txn":{"data":{"data":{"action":"in_progress","version":"1.4.66"}},"metadata":{"digest":"63b2a83f5b2a94151aa7f7bb60b808f63b0f60ec61409017a5d03f51d1f329fb","from":"Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8","reqId":1530559800261900},"type":"110"},"txnMetadata":{"seqNo":29,"txnTime":1530559800},"ver":"1"} 30 {"reqSignature":{"type":"ED25519","values": {"from":"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA","value":"3M6p1uWu3tTY2svfpLbGH42RmqwTGywXohy3uz1iTU4GK5nndEMALvi5hRqfavgBtx9HdTq8vMzUp6w5sdNLdekb"} },"txn":{"data":{"data":{"action":"in_progress","version":"1.4.66"}},"metadata":{"digest":"b715ce1d67552dce1a1c8999fc1530a73108933b205e529bcfd3620625c6bf7a","from":"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA","reqId":1530559799531887},"type":"110"},"txnMetadata":{"seqNo":30,"txnTime":1530559800},"ver":"1"}  irl-stn-q001.qa.evernym.com  27,{"action":"start","force":true,"identifier":"V4SGRU86Z58d6TV7PBUe6f","name":"upgrade1366","reinstall":false,"reqId":1530556300625867000,"schedule":{"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA":"2018-07-02T13:30:00.258870-06:00","4SWokCJWJc69Tn74VvLS6t2G2ucvXqM9FDMsWJjmsUxe":"2018-07-02T13:30:00.258870-06:00","8ECVSk179mjsjKRLWiQtssMLgp6EPhWXtaYyStWPSGAb":"2018-07-02T13:30:00.258870-06:00","BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW":"2018-07-02T13:30:00.258870-06:00","Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8":"2018-07-02T13:30:00.258870-06:00","DKVxG2fXXTU8yT5N7hGEbXB3dfdAnYv1JczDUHpmDxya":"2018-07-02T13:30:00.258870-06:00","Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv":"2018-07-02T13:30:00.258870-06:00"},"sha256":"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855","signature":"5UAut2SQaZUBGw3frT3vx92LmX9tx1uF2JkDSknEhuK1xqEyYwntXvU6o4xKcdqPHwXHxGjnRQABQQbCBRYhK3AB","signatures":null,"timeout":15,"txnTime":1530556303,"type":"109","version":"1.4.66"}   28,{"data":{"action":"in_progress","version":"1.4.66"},"identifier":"BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW","reqId":1530559800266709,"signature":"2ZAFnAK3sqTizTqowrqVanggk2976KeopzCmAEPCZS4TF3tCx59tCwVx5eRFYLUHBpgEJ4KQg3V8adj2HZFNDoCi","signatures":null,"txnTime":1530559800,"type":"110"}   29,{"data":{"action":"in_progress","version":"1.4.66"},"identifier":"Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8","reqId":1530559800261900,"signature":"2gMqtyeK41DiGfL8YTFxBG33yu3h3pJsEXmkahyQknEXY5D9idW3tHHAgJzyWrPpQYhP5qR2k3ArfomvQng7vWUG","signatures":null,"txnTime":1530559800,"type":"110"}   30,{"data":{"action":"in_progress","version":"1.4.66"},"identifier":"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA","reqId":1530559799531887,"signature":"3M6p1uWu3tTY2svfpLbGH42RmqwTGywXohy3uz1iTU4GK5nndEMALvi5hRqfavgBtx9HdTq8vMzUp6w5sdNLdekb","signatures":null,"txnTime":1530559800,"type":"110"}   sao-stn-q001.qa.evernym.com  27,{"action":"start","force":true,"identifier":"V4SGRU86Z58d6TV7PBUe6f","name":"upgrade1366","reinstall":false,"reqId":1530556300625867000,"schedule":{"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA":"2018-07-02T13:30:00.258870-06:00","4SWokCJWJc69Tn74VvLS6t2G2ucvXqM9FDMsWJjmsUxe":"2018-07-02T13:30:00.258870-06:00","8ECVSk179mjsjKRLWiQtssMLgp6EPhWXtaYyStWPSGAb":"2018-07-02T13:30:00.258870-06:00","BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW":"2018-07-02T13:30:00.258870-06:00","Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8":"2018-07-02T13:30:00.258870-06:00","DKVxG2fXXTU8yT5N7hGEbXB3dfdAnYv1JczDUHpmDxya":"2018-07-02T13:30:00.258870-06:00","Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv":"2018-07-02T13:30:00.258870-06:00"},"sha256":"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855","signature":"5UAut2SQaZUBGw3frT3vx92LmX9tx1uF2JkDSknEhuK1xqEyYwntXvU6o4xKcdqPHwXHxGjnRQABQQbCBRYhK3AB","signatures":null,"timeout":15,"txnTime":1530556303,"type":"109","version":"1.4.66"}   28,{"data":{"action":"in_progress","version":"1.4.66"},"identifier":"BM8dTooz5uykCbYSAAFwKNkYfT4koomBHsSWHTDtkjhW","reqId":1530559800266709,"signature":"2ZAFnAK3sqTizTqowrqVanggk2976KeopzCmAEPCZS4TF3tCx59tCwVx5eRFYLUHBpgEJ4KQg3V8adj2HZFNDoCi","signatures":null,"txnTime":1530559800,"type":"110"}   29,{"data":{"action":"in_progress","version":"1.4.66"},"identifier":"Cv1Ehj43DDM5ttNBmC6VPpEfwXWwfGktHwjDJsTV5Fz8","reqId":1530559800261900,"signature":"2gMqtyeK41DiGfL8YTFxBG33yu3h3pJsEXmkahyQknEXY5D9idW3tHHAgJzyWrPpQYhP5qR2k3ArfomvQng7vWUG","signatures":null,"txnTime":1530559800,"type":"110"}   30,{"data":{"action":"in_progress","version":"1.4.66"},"identifier":"4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA","reqId":1530559799531887,"signature":"3M6p1uWu3tTY2svfpLbGH42RmqwTGywXohy3uz1iTU4GK5nndEMALvi5hRqfavgBtx9HdTq8vMzUp6w5sdNLdekb","signatures":null,"txnTime":1530559800,"type":"110"}  {noformat}   ></body> </Action>
<Action id="47258" issue="31628" author="spivachuk" type="comment" created="2018-07-12 10:02:23.0" updateauthor="spivachuk" updated="2018-07-12 10:10:54.0"> <body><! CDATA *Node1*, *Node2*, *Node3* and *Node5* are currently on the version *1.3.62*. So they definitely succeeded with the upgrade to *1.3.62*. Also these 4 nodes are the only ones which have upgrade logs now. The upgrade logs on all of them also indicate the successful upgrade to *1.3.62*. For all the nodes in the pool there are {{NODE_UPGRADE action=in_progress}} transactions for this version in the config ledger. However, only for *Node1*, *Node2*, *Node3* {color:#d04437}but not for{color} *Node5* and for no one else there are {{NODE_UPGRADE action=complete}} transactions for this version.  The rest of the nodes - *Node4*, *Node6* and *Node7* are currently on the version *1.4.66*. So they succeeded with the upgrade to *1.4.66*. For all of them there are {{NODE_UPGRADE action=in_progress}} transactions for this version in the config ledger. But there are no {{NODE_UPGRADE action=complete}} transactions for this version for any of these nodes. Also none of these nodes have upgrade logs now.  ></body> </Action>
<Action id="47294" issue="31628" author="spivachuk" type="comment" body="Attached the pool ledger, the config ledger, the upgrade logs for those nodes which have them now and {{indy-node-control}} logs for all the nodes." created="2018-07-13 10:11:51.0" updateauthor="spivachuk" updated="2018-07-13 10:11:51.0"/>
<Action id="47295" issue="31628" author="spivachuk" type="comment" created="2018-07-13 10:32:33.0" updateauthor="spivachuk" updated="2018-07-13 10:47:03.0"> <body><! CDATA Most likely *Node5* was upgraded to *1.3.62* *manually* because its {{indy-node-control}} log reported by {{journalctl}} is for the period from 2018-03-31 to 2018-07-12 and they do not contain messages about any performed upgrades (the automated upgrade to *1.3.62* was scheduled for 2018-05-30).  On all the other nodes in the pool {{indy-node-control}} logs reported by {{journalctl}} are for the period from 2018-06-12 to 2018-07-12. On *Node4*, *Node6* and *Node7* these logs indicate the successful upgrade to *1.4.66* (it was scheduled for 2018-07-02).  ></body> </Action>
<Action id="47314" issue="31628" author="spivachuk" type="comment" created="2018-07-13 17:30:58.0" updateauthor="spivachuk" updated="2018-07-13 17:30:58.0"> <body><! CDATA According to {{indy-node}} logs *Node1*, *Node3* and *Node5* received the request {{POOL_UPGRADE version=1.4.66 action=start force=true}} _directly_ from the client _after_ they had already added the corresponding transaction to the ledger (the latter was possible due to they however had received these requests via {{PROPAGATEs}}). Since nodes handle forced requests _only when_ receive them _directly_ from clients, so *Node1*, *Node3* and *Node5* attempted to handle this forced {{POOL_UPGRADE}} request _after_ they had already added the corresponding transaction to the ledger. Due to this, validation of this request on these nodes prevented its further handling because the validation treated this upgrade as already scheduled.  As to *Node2*, according to its {{indy-node}} log, it {color:#d04437}did not receive{color} the {{POOL_UPGRADE}} request _directly_ from the client. So it did not even attempt to handle this forced {{POOL_UPGRADE}} request.  As to *Node4*, *Node6* and *Node7*, after the completed upgrade to *1.4.66* and restart they were unable to complete propagate primary view change because they were unable to complete catch-up since they did not gather the quorum of {{LedgerStatuses}}. They did not gather the quorum because they discarded {{LedgerStatuses}} from the 4 not upgraded nodes due to a changed message format (missed {{protocolVersion}} field). Due to *Node4*, *Node6* and *Node7* did not completed catch-up, they did not send {{NODE_UPGRADE action=complete}} requests for the completed upgrade.  ></body> </Action>
<Action id="47316" issue="31628" author="spivachuk" type="comment" created="2018-07-13 17:46:49.0" updateauthor="spivachuk" updated="2018-07-13 17:46:49.0"> <body><! CDATA *PoA:*  Handle a forced request not when just receiving it directly from a client but when receiving it for the first time either directly from a client or in {{PROPAGATE}} from another node.  ></body> </Action>
<Action id="47457" issue="31628" author="spivachuk" type="comment" created="2018-07-18 11:02:17.0" updateauthor="spivachuk" updated="2018-07-18 16:08:17.0"> <body><! CDATA *Problem reason:* - The node handled forced requests only when receiving them directly from clients but not when receiving them in {{PROPAGATEs}} from other nodes.  *Changes:* - Added tests verifying different cases of handling of {{POOL_UPGRADE force=true}} request. - Fixed a bug with a wrong workflow of handling forced requests. - Combined {{processRequest}} methods of {{Node}} classes in plenum and indy-node into one method in plenum. - Divided {{Node.getReplyFromLedger}} method into two ones for usage simplification. - Corrected the type of values being retrieved from {{ReqIdrToTxn}} storage. - Renamed {{handleActionTxn}} methods in {{Upgrader}} and {{Restarter}} classes using different names since they do not use common interface.  *PRs:* -  https://github.com/hyperledger/indy-plenum/pull/819  -  https://github.com/hyperledger/indy-plenum/pull/822  -  https://github.com/hyperledger/indy-node/pull/822  -  https://github.com/hyperledger/indy-node/pull/825   *Version:* - indy-node 1.4.510-master - indy-plenum 1.4.462-master  *Risk factors:* - Nothing is expected.  *Risk:* - Low  *Covered with tests:* - {{test_node_handles_forced_upgrade_on_client_request}} - {{test_node_handles_forced_upgrade_on_propagate}} - {{test_forced_upgrade_no_consensus_on_single_node}} - {{test_pool_upgrade_force_scheduled_only_once}} - {{test_forced_upgrade_handled_once_if_request_received_after_propagate}} - {{test_forced_upgrade_handled_once_if_ordered_and_then_request_received}}  ></body> </Action>
<Action id="47526" issue="31628" author="vladimirwork" type="comment" created="2018-07-19 12:06:58.0" updateauthor="vladimirwork" updated="2018-07-19 12:47:09.0"> <body><! CDATA Build Info: indy-node 1.4.510 -> 1.5.511  Steps to Reproduce: 1. Install pool of 4 nodes. 2. Slow down 1st node by traffic_shaping script. 3. Send upgrade command with force=True, same time for all nodes in future. 4. Check nodes' versions and logs.  Actual Results: All nodes except 1st upgraded successfully. 1st node didn't upgrade but there are entries in upgrade log about upgrade scheduling and starting (but there are no entries about upgrade in journalctl on this node).  ^1447.tar.gz    Additional Info: Node1: {noformat} root@edf7725b7bc4:/var/lib/indy/sandbox/data/Node1# cat upgrade_log  2018-07-19 11:24:31.572324	scheduled	2018-07-19 11:25:00.258870+00:00	1.5.511	1531999471535575 2018-07-19 11:25:00.282208	started	2018-07-19 11:25:00.258870+00:00	1.5.511	1531999471535575 2018-07-19 11:35:00.351796	scheduled	2018-07-19 11:25:00.258870+00:00	1.5.511	1531999471535575 2018-07-19 11:35:00.352301	started	2018-07-19 11:25:00.258870+00:00	1.5.511	1531999471535575 {noformat}  Node2, 3, 4: {noformat} root@be8e95711cef:/var/lib/indy/sandbox/data/Node2# cat upgrade_log  2018-07-19 11:24:31.591067	scheduled	2018-07-19 11:25:00.258870+00:00	1.5.511	1531999471535575 2018-07-19 11:25:00.260194	started	2018-07-19 11:25:00.258870+00:00	1.5.511	1531999471535575 2018-07-19 11:25:48.330038	succeeded	2018-07-19 11:25:00.258870+00:00	1.5.511	1531999471535575 {noformat}   ></body> </Action>
<Action id="47546" issue="31628" author="spivachuk" type="comment" created="2018-07-19 16:03:21.0" updateauthor="spivachuk" updated="2018-07-23 14:52:49.0"> <body><! CDATA Due to the logs from the previous message, on *Node1* {{indy-node}} service sent an upgrade message to {{indy-node-control}} service but, however, after this the upgrade was not performed. After 10 minutes timeout {{indy-node}} service reported a message about an exceeded timeout for the upgrade to its log and sent an upgrade message to {{indy-node-control}} service once again. In 1 minute after this {{indy-node}} service was stopped by an external signal.  As I can suggest, {{indy-node-control}} did not receive the first upgrade message due to {{traffic_shaping}} influence, then, however, received the second upgrade message, but after that failed to download the new version packages due to {{traffic_shaping}} influence too and so failed to complete the upgrade.  I recommend to re-test the scenario with disabled dropping of packets in {{traffic_shaping}}.  ></body> </Action>
<Action id="47588" issue="31628" author="vladimirwork" type="comment" body="All logs produced by the same steps but without package dropping.  ^1447_without_drop.tar.gz  " created="2018-07-20 12:30:54.0" updateauthor="vladimirwork" updated="2018-07-20 12:30:54.0"/>
<Action id="47633" issue="31628" author="spivachuk" type="comment" created="2018-07-23 10:56:18.0" updateauthor="spivachuk" updated="2018-07-23 10:56:18.0"> <body><! CDATA The upgrade was scheduled for 07/20 11:20. *Node1* started the upgrade but failed to complete it at 11:30:33 because 300 seconds timeout for {{apt update}} command was exceeded. Before the moment of {{apt update}} timeout was exceeded, {{indy-node}} service had re-sent an upgrade message to {{indy-node-control}} service at 11:30:00 because {{Upgrader}}'s 10 minute timeout for upgrade was exceeded.  *Node2*, *Node3* and *Node4* succeeded with the upgrade.  However, in the upgrade logs of all the nodes in the pool there are multiple pairs of {{scheduled}} and {{started}} messages. This was so because the nodes were made multiple catch-ups at that period and so re-handled the {{POOL_UPGRADE}} transaction multiple times in {{Node.postConfigLedgerCaughtUp}} calls since the version from the transaction was being detected as not yet installed. The nodes were made repeated catch-ups in scope of view changes due to 2 reasons: 1) no quorum of {{ViewChangeDone}} messages and 2) having a quorum of {{ViewChangeDone}} messages but being behind the accepted state.  ></body> </Action>
