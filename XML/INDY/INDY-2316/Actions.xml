<Action id="66333" issue="43779" author="vladimirwork" type="comment" created="2019-12-20 10:19:28.0" updateauthor="vladimirwork" updated="2019-12-23 09:35:24.0"> <body><! CDATA Build Info: 1.12.1~dev1165  Steps to Reproduce: 1. Try to create a transaction author agreement with a 'retired' field.  Actual Results: Pool returns REPLY.  Expected Results: Pool must return REJECT.  {color:#57D9A3}RESOLVED{color} - fixed in indy-node 1.12.1~dev1167 / plugins 1.0.6~dev136  ></body> </Action>
<Action id="66341" issue="43779" author="vladimirwork" type="comment" created="2019-12-20 13:27:30.0" updateauthor="vladimirwork" updated="2019-12-20 13:27:30.0"> <body><! CDATA Testing PoA:  1. Check TAA backward compatibility at pool side (system test). 2. Check functionality and its compatibility to requirements (INDY-2302) (system test + review). 3. Check TAA backward compatibility at client side (state proof reading using old client, manual + system test). 4. Validate indy-node and indy-sdk TAA documentation (review).  ></body> </Action>
<Action id="66346" issue="43779" author="vladimirwork" type="comment" created="2019-12-20 14:42:24.0" updateauthor="vladimirwork" updated="2019-12-20 15:47:15.0"> <body><! CDATA Build Info: 1.12.1~dev1165  Steps to Reproduce: 1. Try to write nym with appended TAA _with timestamp before TAA creation data_.  Actual Results: Pool returns REPLY.  Expected Results: Pool must return REJECT.  System test fails here: https://github.com/VladimirWork/indy-test-automation/blob/a72a4a24e54bcf6f6fe84565f64134df27b8699f/system/draft/test_upgrade_docker_7_new_taa.py#L238  {color:#57D9A3}RESOLVED{color} - timestamp was rounded to the actual date  ></body> </Action>
<Action id="66360" issue="43779" author="toktar" type="comment" created="2019-12-20 15:29:36.0" updateauthor="toktar" updated="2019-12-20 15:29:36.0"> <body><! CDATA Please, re-test this step, if it's possible. "Try to write nym with appended TAA _with timestamp before TAA creation data_." With the older time of signing TAA because it will be rounded to a day. Thank you!  ></body> </Action>
<Action id="66396" issue="43779" author="toktar" type="comment" created="2019-12-25 08:39:26.0" updateauthor="toktar" updated="2019-12-25 08:39:26.0"> <body><! CDATA *Problem reason:* - After changing the logic of the TAA, several bugs and several opportunities for improvements were found.  *Changes:* - Need to validate TAA acceptance against uncommitted TAA - Fix retirement time for disabling (set to the current pp_time instead of 0), disable only active TAAs - And other changes.  *PR:* *  https://github.com/hyperledger/indy-plenum/pull/1436  *  https://github.com/hyperledger/indy-plenum/pull/1438  *  https://github.com/hyperledger/indy-node/pull/1548  *  https://github.com/hyperledger/indy-plenum/pull/1439  *  https://github.com/hyperledger/indy-node/pull/1549  *  https://github.com/hyperledger/indy-plenum/pull/1442   *Version:* * sovrin - #195 - master * token-plugin #139 - master * indy-node 1.12.1.dev1171 -master * indy-plenum 1.121.dev989 -master  *Risk factors:* - TAA  *Risk:* - Medium  *Recommendations for QA:* * Check that the DISABLE txn disables only active TAAs (change retirement_ts to time of ) and doesn't change old retired TAAs. * Add a system tests, when we send NYM with a new TAA right after creating it. Without waiting for the TAA committing **  * Check that update TAA without field "text" works correctly * Check that the sdk metadata parser works correctly  ></body> </Action>
<Action id="66397" issue="43779" author="vladimirwork" type="comment" created="2019-12-25 09:19:52.0" updateauthor="vladimirwork" updated="2019-12-26 07:45:53.0"> <body><! CDATA We have a stacktrace disabling TAA written before the upgrade without ratification_ts: {noformat} E           Dec 25 09:09:04 0782b52ae74a env 1240 :   File "/usr/local/lib/python3.5/dist-packages/plenum/server/request_handlers/txn_author_agreement_disable_handler.py", line 48, in update_state E           Dec 25 09:09:04 0782b52ae74a env 1240 :     taa TXN_AUTHOR_AGREEMENT_VERSION , taa TXN_AUTHOR_AGREEMENT_RATIFICATION_TS , E           Dec 25 09:09:04 0782b52ae74a env 1240 : KeyError: 'ratification_ts' {noformat}  {color:#57D9A3}RESOLVED{color} - fixed in indy-node 1.12.1~dev1174 / plugins 1.0.6~dev141  ></body> </Action>
<Action id="66412" issue="43779" author="vladimirwork" type="comment" created="2019-12-26 13:32:58.0" updateauthor="vladimirwork" updated="2019-12-26 13:32:58.0"> <body><! CDATA All system tests are implemented and pass:  https://github.com/hyperledger/indy-test-automation/blob/3e6232c492b47d32d9721b93a608a00c0cb0c16e/system/draft/test_misc.py#L2287 https://github.com/hyperledger/indy-test-automation/blob/3e6232c492b47d32d9721b93a608a00c0cb0c16e/system/draft/test_misc.py#L2592 https://github.com/hyperledger/indy-test-automation/blob/3e6232c492b47d32d9721b93a608a00c0cb0c16e/system/draft/test_upgrade_docker_7_new_taa.py#L20  ></body> </Action>
