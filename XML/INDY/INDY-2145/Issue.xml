<Issue id="40587" key="INDY-2145" number="2145" project="10303" reporter="sergey.khoroshavin" creator="sergey.khoroshavin" type="10004" summary="Old instance change messages are sometimes not discarded" priority="3" status="10200" created="2019-06-14 11:57:09.0" updated="2020-03-27 13:09:21.0" votes="0" watches="1" workflowId="53536"> <environment><! CDATA   {code} 2019-06-03 16:38:52,294|INFO|view_changer.py|VIEW CHANGE: SYGNET1 sending an instance change with view_no 7 since State signatures are not updated for too long 2019-06-03 16:38:52,294|INFO|instance_change_provider.py|InstanceChangeProvider: Discard InstanceChange from makolab01 for ViewNo 7 because it is out of date (was received 11223sec ago) 2019-06-03 16:40:18,790|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'reason': 43, 'viewNo': 7} from validatedid 2019-06-03 16:40:36,662|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'reason': 43, 'viewNo': 7} from uvs_val2  2019-06-08 07:10:01,977|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'viewNo': 7, 'reason': 43} from fetch-ai 2019-06-08 07:10:47,969|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'viewNo': 7, 'reason': 43} from FoundationBuilder 2019-06-08 07:10:55,408|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'viewNo': 7, 'reason': 43} from Certisign 2019-06-08 07:11:43,313|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'viewNo': 7, 'reason': 43} from ovvalidator 2019-06-08 07:12:23,055|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'viewNo': 7, 'reason': 43} from datum-sovrin 2019-06-08 07:13:31,331|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'viewNo': 7, 'reason': 43} from xsvalidatorec2irl 2019-06-08 07:13:31,331|NOTIFICATION|view_changer.py|VIEW CHANGE: SYGNET1 initiating a view change to 7 from 6 {code}  ></environment> <description><! CDATA Logs from one node from BuilderNet show following: {code} 2019-06-03 13:31:49,271|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'reason': 43, 'viewNo': 7} from makolab012019-06-03 2019-06-03 16:38:52,294|INFO|view_changer.py|VIEW CHANGE: SYGNET1 sending an instance change with view_no 7 since State signatures are not updated for too long 2019-06-03 16:38:52,294|INFO|instance_change_provider.py|InstanceChangeProvider: Discard InstanceChange from makolab01 for ViewNo 7 because it is out of date (was received 11223sec ago) 2019-06-03 16:40:18,790|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'reason': 43, 'viewNo': 7} from validatedid 2019-06-03 16:40:36,662|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'reason': 43, 'viewNo': 7} from uvs_val2  2019-06-08 07:10:01,977|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'viewNo': 7, 'reason': 43} from fetch-ai 2019-06-08 07:10:47,969|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'viewNo': 7, 'reason': 43} from FoundationBuilder 2019-06-08 07:10:55,408|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'viewNo': 7, 'reason': 43} from Certisign 2019-06-08 07:11:43,313|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'viewNo': 7, 'reason': 43} from ovvalidator 2019-06-08 07:12:23,055|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'viewNo': 7, 'reason': 43} from datum-sovrin 2019-06-08 07:13:31,331|INFO|view_changer.py|SYGNET1 received instance change request: INSTANCE_CHANGE{'viewNo': 7, 'reason': 43} from xsvalidatorec2irl 2019-06-08 07:13:31,331|NOTIFICATION|view_changer.py|VIEW CHANGE: SYGNET1 initiating a view change to 7 from 6 {code}  It seems like discarding mechanism for old instance change messages is active (it did fired on old makolab01 instance change message), however it didn't fire on many other messages, which led to false view change.  ></description> </Issue>
