<Action id="27827" issue="18943" author="vladimirwork" type="comment" body="FYI  ~krw910 ,  ~stevetolman ,  ~danielhardman ,  ~ashcherbakov " created="2017-07-04 12:17:22.0" updateauthor="vladimirwork" updated="2017-07-04 12:17:22.0"/>
<Action id="29485" issue="18943" author="spivachuk" type="comment" created="2017-08-07 10:13:57.0" updateauthor="spivachuk" updated="2017-08-07 10:17:05.0"> <body><! CDATA *Problem reason:* * In Sovrin CLI there was an exception handler for the case when a schema with the seq no passed in {{ref}} parameter of {{send CLAIM_DEF}} command is not found but an exception of the corresponding type was nowhere raised in the code. Also in wallets and public repos both exceptions and None values were used in different places in the code to indicate that the requested value is not found.  *Changes:* * Corrected getting of values from wallets and public repos. SchemaNotFoundError and ValueError are now raised in case the requested value is not found (for schemas and other values correspondingly). * Corrected existing tests correspondingly to the made changes. * Added tests for send CLAIM_DEF command which verify the fix. * Updated indy-anoncreds dependency.  *Committed into:* * Pull requests: ** https://github.com/hyperledger/indy-anoncreds/pull/86 ** https://github.com/hyperledger/indy-node/pull/281 * Version: ** indy-node-dev 1.0.78  *Risk factors:* * Operations which get values from wallets and public repos.  *Risk:* * Low  *Covered with tests:* * New tests: ** testSendClaimDefSucceedsIfRefIsSeqNoOfSchemaTxn ** testSendClaimDefFailsIfRefIsSeqNoOfNonSchemaTxn ** testSendClaimDefFailsIfRefIsNotExistingSeqNo * Existing tests: ** testGetSchemaByInvalidSeqNo ** testGetSchemaNonExistent ** testSubmitPublicKey ** testGetPrimaryPublicKeyNonExistent ** testGetRevocationPublicKeyNonExistent  *Recommendations for QA:* * Please verify that the message {{Schema with seqNo <SEQ_NO> not found}} is printed in both cases: when the transaction with the seq no passed in {{ref}} parameter of {{send CLAIM_DEF}} command is not SCHEMA and when there is no transaction with the seq no passed in {{ref}} parameter of {{send CLAIM_DEF}} command.  ></body> </Action>
<Action id="29491" issue="18943" author="vladimirwork" type="comment" created="2017-08-07 13:27:26.0" updateauthor="vladimirwork" updated="2017-08-07 13:27:26.0"> <body><! CDATA Build Info: sovrin 1.0.78 indy-node 1.0.78  Steps to Validate: 1. Send CLAIM_DEF with nonexistent seqNo as REF parameter. 2. Send CLAIM_DEF with existing seqNo (not SCHEMA) as REF parameter. 3. Send CLAIM_DEF with existing seqNo (SCHEMA) as REF parameter.  Actual Results: Step 1 and 2: Schema with seqNo ... not found. Step 3: The claim definition was published to the Sovrin distributed ledger: Sequence number is ... !Screenshot.PNG|thumbnail!   ></body> </Action>
