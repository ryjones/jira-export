<Action id="30805" issue="20772" author="andrey.goncharov" type="comment" body="Added a design doc. Please review https://docs.google.com/document/d/14qwjFbrbMyGLjrAH7Kyqcv9e62Fo83GGdDwMXbk4b2A" created="2017-09-13 12:08:05.0" updateauthor="andrey.goncharov" updated="2017-09-13 12:08:05.0"/>
<Action id="30806" issue="20772" author="andrey.goncharov" type="comment" created="2017-09-13 12:10:20.0" updateauthor="andrey.goncharov" updated="2017-09-13 12:10:20.0"> <body><! CDATA What is "daemon wallet"? Why do you want to keep shred "cli history"?  Why do you want to keep shared key cache?     ></body> </Action>
<Action id="31008" issue="20772" author="andrey.goncharov" type="comment" body="Spreadsheet with file move https://docs.google.com/spreadsheets/d/1A84H8knCtn8rrTirzxta8XC1jpHBjvQiqrxquTv6bpc" created="2017-09-19 13:26:27.0" updateauthor="andrey.goncharov" updated="2017-09-19 13:26:27.0"/>
<Action id="31025" issue="20772" author="nage" type="comment" created="2017-09-19 21:10:14.0" updateauthor="nage" updated="2017-09-19 21:10:14.0"> <body><! CDATA The Daemon wallet was the keys/wallet required to run a node as a service (when you are running as a system daemon where do those files go --> not in a home folder).  Someone said we have a cli history file on disk, we were just calling out that this needs a clear file name (if it exists) and should live in the users home folder.  Also, it seems unusual to write logs to the current working directory unless the user has asked for that behavior, if you are logging by default, isn't it more normal to log to a known location in their home folder (or use system logging of some kind)?  Finally, someone said that we have some type of CurveZMQ key cache, and that was shared between Sovrin-aware programs and processes, if that isn't the case, please clarify what keys are stored or persisted to disk and what distinctions are useful at a file system level.  The idea here was that there exist keys on disk that are used to verify incomming connections and establish communications (but are not stored configuration or user data in the same way wallets are).  They shouldn't be stored in the same places we store wallets, unless we want to manage and back them up like wallets.  ></body> </Action>
<Action id="31131" issue="20772" author="andrey.goncharov" type="comment" created="2017-09-25 12:04:26.0" updateauthor="andrey.goncharov" updated="2017-09-25 12:04:42.0"> <body><! CDATA  ~nage   ??The Daemon wallet was the keys/wallet required to run a node as a service (when you are running as a system daemon where do those files go --> not in a home folder).??  Node is run from sovrin user. Why shouldn't it write to home of that user?  ??Also, it seems unusual to write logs to the current working directory unless the user has asked for that behavior, if you are logging by default, isn't it more normal to log to a known location in their home folder (or use system logging of some kind)???  Agreed. Changed to .indy/cli.log  ??Finally, someone said that we have some type of CurveZMQ key cache, and that was shared between Sovrin-aware programs and processes, if that isn't the case, please clarify what keys are stored or persisted to disk and what distinctions are useful at a file system level.  The idea here was that there exist keys on disk that are used to verify incomming connections and establish communications (but are not stored configuration or user data in the same way wallets are).  They shouldn't be stored in the same places we store wallets, unless we want to manage and back them up like wallets.??  As I said before node is run from sovrin user. Why shouldn't we keep related keys in that user's home dir? Wallets are client related and they are stored in a home directory of a user who runs the cli.   ></body> </Action>
<Action id="31183" issue="20772" author="sergey-shilov" type="comment" created="2017-09-26 16:39:17.0" updateauthor="sergey-shilov" updated="2017-09-26 16:39:43.0"> <body><! CDATA  ~nage ,  ~andrey.goncharov ,  ~ashcherbakov  Hi guys, currently I'm working on migration script in scope of this ticket and my question is what strategy should we use during directories/files migration: move or copy? Should we remove old directories/files at the end of successful migration in case of copy strategy? Thanks.  ></body> </Action>
<Action id="31199" issue="20772" author="ashcherbakov" type="comment" body="We perform backup before migration, don&apos;t we? So move should be safe from my point of view. I think we should not have any outdated files in the file system after migration (all previous data must be in backup)." created="2017-09-27 08:44:38.0" updateauthor="ashcherbakov" updated="2017-09-27 08:44:38.0"/>
<Action id="31270" issue="20772" author="danielhardman" type="comment" body="I think  ~sergey-shilov &apos;s question can only be answered by  ~tharmon  or  ~mgbailey . However, my vote is that a backup is adequate protection–and in fact, is cleaner than leaving a bunch of clutter than has to be manually cleaned up. Is the backup done tarball-style, capturing all permissions? And could the backup be restored simply by unpacking the archive? Or will we remove enough things that there&apos;d be manual directory creation required to restore the backup?" created="2017-09-29 14:13:09.0" updateauthor="danielhardman" updated="2017-09-29 14:13:09.0"/>
<Action id="31271" issue="20772" author="danielhardman" type="comment" body="Regarding the earlier note from Andrey G about the daemon running as the sovrin user: First, it should be the indy user now–right? Second, isn&apos;t it a bit unusual for a daemon user to have a folder under /home? If the user *does* have a folder there, I agree that putting the artifacts owned by that user, there, makes total sense..." created="2017-09-29 14:14:33.0" updateauthor="danielhardman" updated="2017-09-29 14:14:33.0"/>
<Action id="31275" issue="20772" author="ashcherbakov" type="comment" created="2017-09-29 14:52:18.0" updateauthor="ashcherbakov" updated="2017-09-29 15:43:11.0"> <body><! CDATA  ~nage   ~danielhardman  As of now indy-node daemon is running as sovrin (indy) user which has home folder. But we think that it's not good, and eventually we would like to avoid it (not in this ticket). In the scope of this ticket we're planning to fully avoid writing or having anything in /home directory if node is running as a daemon. All data is going to migrate to /var/lib/indy, /var/log and /etc/indy The data for CLI (which is run from the user) will go to home folder (/home/user/.indy-cli).  ></body> </Action>
<Action id="33388" issue="20772" author="ozheregelya" type="comment" created="2017-10-30 19:56:43.0" updateauthor="ozheregelya" updated="2017-10-30 20:12:59.0"> <body><! CDATA indy-node 1.2.189 indy-anoncreds 1.0.32 indy-plenum 1.2.158 sovrin 1.1.31  Case 1: indy-cli and .indy-cli directories present in /home/indy: {code:java} me@me-VM:/home/indy$ ll total 44 drwxr-xr-x 6 indy indy 4096 Out 30 10:16 ./ drwxr-xr-x 4 root root 4096 Out 30 10:15 ../ -rw-r--r-- 1 indy indy 220 Set 1 2015 .bash_logout -rw-r--r-- 1 indy indy 3771 Set 1 2015 .bashrc drwxr-xr-x 3 indy indy 4096 Abr 20 2016 .config/ drwxr-xr-x 2 indy indy 4096 Out 30 10:16 .indy/ drwxr-xr-x 3 indy indy 4096 Out 30 10:16 .indy-cli/ drwxr-xr-x 3 indy indy 4096 Out 30 10:16 indy-cli/ -rw-r--r-- 1 indy indy 655 Mai 16 13:49 .profile -rw-r--r-- 1 indy indy 1600 Jan 9 2016 .Xdefaults -rw-r--r-- 1 indy indy 14 Jan 9 2016 .xscreensaver me@me-VM:/home/indy$ ll indy-cli/ total 12 drwxr-xr-x 3 indy indy 4096 Out 30 10:16 ./ drwxr-xr-x 6 indy indy 4096 Out 30 10:16 ../ drwxr-xr-x 2 indy indy 4096 Out 30 10:16 networks/ me@me-VM:/home/indy$ ll .indy-cli/ total 12 drwxr-xr-x 3 indy indy 4096 Out 30 10:16 ./ drwxr-xr-x 6 indy indy 4096 Out 30 10:16 ../ drwxr-xr-x 5 indy indy 4096 Out 30 10:16 networks/{code} Expected Results: Only one directory should present. Additional Information: Note that this is actual only for indy user. For others ones only .indy-cli directory presents.   ></body> </Action>
<Action id="34230" issue="20772" author="vladimirwork" type="comment" created="2017-11-02 08:43:07.0" updateauthor="vladimirwork" updated="2017-11-02 10:05:17.0"> <body><! CDATA Build Info: indy-node 1.2.188  Steps to Reproduce: 1. Perform pool upgrade to 1.2.192 version (force flag doesn't matter).  Actual Results: Nodes don't start after the upgrade. Manual start also doesn't work. See journalctl for additional info.  ^journalctl.txt   !upgrade_to_192.PNG|thumbnail!   Expected Results: Nodes should start normally after the upgrade.  Additional Info: The same manual node upgrade also doesn't work due to unmet dependencies:  The following packages have unmet dependencies: indy-node : Depends: indy-plenum (= 1.2.161) but 1.2.156 is to be installed E: Unable to correct problems, you have held broken packages.  ></body> </Action>
<Action id="34310" issue="20772" author="ozheregelya" type="comment" created="2017-11-03 11:39:58.0" updateauthor="ozheregelya" updated="2017-11-03 11:39:58.0"> <body><! CDATA Case 3: Following errors appear during clean installation of sovrin package: {code:java} grep: /etc/sovrin/node_control.conf: No such file or directory sed: can't read /etc/sovrin/node_control.conf: No such file or directory{code} Case 4: There is only one indy.env file on each node. indy.env file should be created for each network.  ></body> </Action>
<Action id="34313" issue="20772" author="vladimirwork" type="comment" body=" ~dsurnin  We need to change clear_node.py according to file folder path changes (with --full parameter it should clear ledgers for all node networks)." created="2017-11-03 12:21:44.0" updateauthor="vladimirwork" updated="2017-11-03 12:21:44.0"/>
<Action id="34364" issue="20772" author="ozheregelya" type="comment" created="2017-11-06 12:01:57.0" updateauthor="ozheregelya" updated="2017-11-06 12:01:57.0"> <body><! CDATA *Version Info:* indy-anoncreds 1.0.32 indy-node 1.2.198 indy-plenum 1.2.165 libindy-crypto 0.1.6-10 python3-indy-crypto 0.1.6 sovrin 1.1.37   *Case 5:*  Owner of genesis files in user home directory is root if package was installed by user _me_: {code:java} me@me-VM:~$ cd ~/.indy-cli/networks/sandbox me@me-VM:~/.indy-cli/networks/sandbox$ ll total 16 drwxr-xr-x 2 me me 4096 Nov 6 11:29 ./ drwxr-xr-x 5 me me 4096 Nov 6 11:22 ../ -rw-r--r-- 1 root root 2121 Nov 6 11:22 domain_transactions_genesis -rw-r--r-- 1 root root 2276 Nov 6 11:22 pool_transactions_genesis{code} Owner should be _me_.  *Case 6:*  Genesis files for node (in /var/lib/indy/NETWORK_NAME) are executable:    {code:java} me@me-VM:~/.indy-cli/networks/sandbox$ ll /var/lib/indy/sandbox/ total 16 drwxrwxr-x 2 indy indy 4096 Nov 6 11:22 ./ drwxrwxr-x 5 indy indy 4096 Nov 6 11:22 ../ -rwxrwxr-- 1 indy indy 2121 Nov 6 11:22 domain_transactions_genesis* -rwxrwxr-- 1 indy indy 2276 Nov 6 11:22 pool_transactions_genesis*   {code} Geneses files should not be executable.  *Case 7:* Need to update dockerfiles to initialize client for indy user on node machine. (RUN generate_sovrin_pool_transactions --nodes $nodecnt --clients $clicnt --ips "$ips")  ></body> </Action>
<Action id="34421" issue="20772" author="ozheregelya" type="comment" created="2017-11-07 15:16:40.0" updateauthor="ozheregelya" updated="2017-11-07 15:16:40.0"> <body><! CDATA *Case 8:*  Client data (/home/indy/.indy, /home/indy/.indy/wallets, /home/indy/.indy/dCancelata/clients) should not be removed from .indy directory.  ></body> </Action>
<Action id="34449" issue="20772" author="vladimirwork" type="comment" created="2017-11-08 11:01:03.0" updateauthor="vladimirwork" updated="2017-11-08 11:01:03.0"> <body><! CDATA *Case 9:*  Build Info: indy-node 1.2.199  Steps to Reproduce: 1. Perform pool upgrade command to 1.2.201 version.  Actual Results: Upgrade is failed due to duplicated logging parameter at the same line as another parameter in config file:  {quote}Nov 08 09:15:43 1bcb81aa9e29 env 1387 :   File "/usr/local/bin/start_indy_node", line 9, in <module> Nov 08 09:15:43 1bcb81aa9e29 env 1387 :     config = getConfig() Nov 08 09:15:43 1bcb81aa9e29 env 1387 :   File "/usr/local/lib/python3.5/dist-packages/indy_common/config_util.py", line 19, in getConfig Nov 08 09:15:43 1bcb81aa9e29 env 1387 :     extend_with_default_external_config(config, user_config_dir) Nov 08 09:15:43 1bcb81aa9e29 env 1387 :   File "/usr/local/lib/python3.5/dist-packages/plenum/common/config_util.py", line 41, in extend_with_default_external_config Nov 08 09:15:43 1bcb81aa9e29 env 1387 :     extend_with_external_config(extendee, (extendee.GENERAL_CONFIG_DIR, extendee.GENERAL_CONFIG_FILE)) Nov 08 09:15:43 1bcb81aa9e29 env 1387 :   File "/usr/local/lib/python3.5/dist-packages/plenum/common/config_util.py", line 32, in extend_with_external_config Nov 08 09:15:43 1bcb81aa9e29 env 1387 :     config = getInstalledConfig(*extender) Nov 08 09:15:43 1bcb81aa9e29 env 1387 :   File "/usr/local/lib/python3.5/dist-packages/plenum/common/config_util.py", line 26, in getInstalledConfig Nov 08 09:15:43 1bcb81aa9e29 env 1387 :     spec.loader.exec_module(config) Nov 08 09:15:43 1bcb81aa9e29 env 1387 :   File "<frozen importlib._bootstrap_external>", line 661, in exec_module Nov 08 09:15:43 1bcb81aa9e29 env 1387 :   File "<frozen importlib._bootstrap_external>", line 767, in get_code Nov 08 09:15:43 1bcb81aa9e29 env 1387 :   File "<frozen importlib._bootstrap_external>", line 727, in source_to_code Nov 08 09:15:43 1bcb81aa9e29 env 1387 :   File "<frozen importlib._bootstrap>", line 222, in _call_with_frames_removed Nov 08 09:15:43 1bcb81aa9e29 env 1387 :   File "/etc/indy/indy_config.py", line 16 Nov 08 09:15:43 1bcb81aa9e29 env 1387 :     NETWORK_NAME = 'sandbox'enableStdOutLogging=False Nov 08 09:15:43 1bcb81aa9e29 env 1387 :                                               ^ Nov 08 09:15:43 1bcb81aa9e29 env 1387 : SyntaxError: invalid syntax{quote}  Expected Results: There should be no duplicated parameters in config. Upgrade should be performed normally. !screenshot-1.png|thumbnail!   ></body> </Action>
<Action id="34454" issue="20772" author="ozheregelya" type="comment" created="2017-11-08 14:23:20.0" updateauthor="ozheregelya" updated="2017-11-08 15:37:45.0"> <body><! CDATA -Case 10:-  invalid for indy-node 1.2.203 indy-node upgrare from 1.2.180 to 1.2.202  Steps to Reproduce: 1. Setup the pool with 1.2.180 indy node (before file folder changes) 2. Upgrade indy-node to 1.2.202 and all depending packages using apt-get install. 3. Run migrations (see instruction  https://docs.google.com/document/d/1vUvbioL5OsmZMSkwRcu0p0jdttJO5VS8K3GhDLdNaoI/edit|https://docs.google.com/document/d/1vUvbioL5OsmZMSkwRcu0p0jdttJO5VS8K3GhDLdNaoI/edit)  ) 4. Send NYM transaction. => Message about successful writing of transaction appear in cli. 5. Send GET_NYM for this NYM. => GET_NYM didn't return anything. 6. Send one more NYM transaction. => Message about successful writing of transaction appear in cli. 5. Send GET_NYM for this NYM. => GET_NYM didn't return anything. 6. Run read_ledger for this transaction. => Olly first NYM was written. !Screenshot_2017-11-08_12-17-51.png|thumbnail!  UPD: For indy-node 1.2.203 writing works correctly. Problem with reading is caused by not upgraded CLI. Backward compatibility with old client will be additionally tested during verification analog of live pool upgrade.   Actual Results: Writing and reading transactions work strange.  Expected Results: All transactions should be written. Reading should work.  Additional Information: Attached logs:  ^Node1.log   ^Node2.log   ^Node3.log   ^Node4.log   ></body> </Action>
<Action id="34458" issue="20772" author="vladimirwork" type="comment" created="2017-11-08 15:50:22.0" updateauthor="vladimirwork" updated="2017-11-08 15:50:22.0"> <body><! CDATA *Case 11:*  Build Info: indy-node 1.2.203  Actual Results: Agents store their wallets in /var/lib/indy/: INFO     | walleted_agent.py    (130) | _saveWallet | Active wallet "Faber College" saved (/var/lib/indy/wallets/agents/faber-college/faber college.wallet) INFO     | walleted_agent.py    (130) | _saveWallet | Active wallet "issuer" saved (/var/lib/indy/wallets/agents/faber-college/issuer/issuer.wallet)  Expected Results: Agents should store their wallets in ~/.indi-cli/.  ></body> </Action>
<Action id="34476" issue="20772" author="ozheregelya" type="comment" created="2017-11-08 19:54:23.0" updateauthor="ozheregelya" updated="2017-11-08 19:58:00.0"> <body><! CDATA Additional information for case 9: Here is content of /etc/indy/indy_config.py after manual migration: {code:java} enableStdOutLogging=False baseDir = '/var/lib/indy' NODE_BASE_DATA_DIR = baseDir LOG_DIR = '/var/log/indy' BACKUP_DIR = '/var/lib/indy/backup' CLI_BASE_DIR = '~/.indy-cli/' CLI_NETWORK_DIR = '~/.indy-cli/networks' NODE_BASE_DATA_DIR = baseDir NETWORK_NAME = 'sandbox' enableStdOutLogging=False LOG_SIZE=999 NETWORK_NAME = 'sandbox' {code} Only following parameters were duplicated: enableStdOutLogging and NETWORK_NAME.  ></body> </Action>
<Action id="34493" issue="20772" author="vladimirwork" type="comment" created="2017-11-09 10:48:11.0" updateauthor="vladimirwork" updated="2017-11-09 10:48:11.0"> <body><! CDATA *Case 12:*  Build Info: indy-node 1.1.43 (stable)  Steps to Reproduce: 1. Perform pool upgrade to 1.2.203 (master) version.  Actual Results: Migration script 1_1_150_to_1_1_151.py applying is failed due to FindNotFound error (/home/indy/.indy). !1.1.43-1.2.203.PNG|thumbnail!   Expected Results: Pool upgrade from stable to master should work normally.  ></body> </Action>
<Action id="34521" issue="20772" author="ozheregelya" type="comment" created="2017-11-09 17:36:09.0" updateauthor="ozheregelya" updated="2017-11-09 17:36:09.0"> <body><! CDATA UPD for Case 12: Migration fails in the next step on 1.2.205 version: {code:java} Nov 09 17:20:17 53bbae2d4c60 env 84 : 2017-11-09 17:20:17,430 | DEBUG | node_control_tool.py (201) | _create_backup | Creating backup for 1.1.43 Nov 09 17:20:17 53bbae2d4c60 env 84 : 2017-11-09 17:20:17,740 | INFO | migration_tool.py (52) | migrate | Migrating from 1.1.43 to 1.2.205 on Ubuntu Nov 09 17:20:17 53bbae2d4c60 env 84 : 2017-11-09 17:20:17,748 | DEBUG | migration_tool.py (54) | migrate | Found migration scripts:  '1_0_96_to_1_0_97', '1_1_150_to_1_ Nov 09 17:20:17 53bbae2d4c60 env 84 : 2017-11-09 17:20:17,748 | INFO | migration_tool.py (61) | migrate | Following migrations will be applied:  '1_1_150_to_1_1_151', Nov 09 17:20:17 53bbae2d4c60 env 84 : 2017-11-09 17:20:17,749 | INFO | migration_tool.py (63) | migrate | Applying migration 1_1_150_to_1_1_151 Nov 09 17:20:17 53bbae2d4c60 env 84 : 2017-11-09 17:20:17,749 | INFO | migration_tool.py (35) | _call_migration_script | script path /usr/local/lib/python3.5/dist-pac Nov 09 17:20:19 53bbae2d4c60 env 84 : 2017-11-09 17:20:19,080 | INFO | migration_tool.py (67) | migrate | Migration 1_1_150_to_1_1_151 applied in 1.33109450340271 sec Nov 09 17:20:19 53bbae2d4c60 env 84 : 2017-11-09 17:20:19,080 | INFO | migration_tool.py (63) | migrate | Applying migration 1_1_152_to_1_1_153 Nov 09 17:20:19 53bbae2d4c60 env 84 : 2017-11-09 17:20:19,081 | INFO | migration_tool.py (35) | _call_migration_script | script path /usr/local/lib/python3.5/dist-pac Nov 09 17:20:20 53bbae2d4c60 env 84 : 2017-11-09 17:20:20,309 | DEBUG | __init__.py (60) | register | Registered VCS backend: git Nov 09 17:20:20 53bbae2d4c60 env 84 : 2017-11-09 17:20:20,410 | DEBUG | __init__.py (60) | register | Registered VCS backend: hg Nov 09 17:20:20 53bbae2d4c60 env 84 : 2017-11-09 17:20:20,640 | DEBUG | __init__.py (60) | register | Registered VCS backend: svn Nov 09 17:20:20 53bbae2d4c60 env 84 : 2017-11-09 17:20:20,676 | DEBUG | __init__.py (60) | register | Registered VCS backend: bzr Nov 09 17:20:21 53bbae2d4c60 env 84 : 2017-11-09 17:20:21,046 | INFO | 1_1_152_to_1_1_153.py (18) | <module> | script path /usr/local/lib/python3.5/dist-packages/data/mi Nov 09 17:20:21 53bbae2d4c60 su 3035 : Successful su for indy by root Nov 09 17:20:21 53bbae2d4c60 su 3035 : + ??? root:indy Nov 09 17:20:21 53bbae2d4c60 su 3035 : pam_env(su:session): Unable to open env file: /etc/default/locale: No such file or directory Nov 09 17:20:21 53bbae2d4c60 su 3035 : pam_unix(su:session): session opened for user indy by (uid=0) Nov 09 17:20:21 53bbae2d4c60 env 84 : Can not find the directory with the ledger: /var/lib/indy/data/nodes Nov 09 17:20:21 53bbae2d4c60 env 84 : Traceback (most recent call last): Nov 09 17:20:21 53bbae2d4c60 env 84 : File "/usr/local/lib/python3.5/dist-packages/data/migrations/deb/helper_1_1_152_to_1_1_153.py", line 40, in <module> Nov 09 17:20:21 53bbae2d4c60 env 84 : migrate_all() Nov 09 17:20:21 53bbae2d4c60 env 84 : File "/usr/local/lib/python3.5/dist-packages/data/migrations/deb/helper_1_1_152_to_1_1_153.py", line 33, in migrate_all Nov 09 17:20:21 53bbae2d4c60 env 84 : nodes_data_dir = _get_nodes_data_dir() Nov 09 17:20:21 53bbae2d4c60 env 84 : File "/usr/local/lib/python3.5/dist-packages/data/migrations/deb/helper_1_1_152_to_1_1_153.py", line 19, in _get_nodes_data_dir Nov 09 17:20:21 53bbae2d4c60 env 84 : raise Exception(msg) Nov 09 17:20:21 53bbae2d4c60 env 84 : Exception: Can not find the directory with the ledger: /var/lib/indy/data/nodes Nov 09 17:20:21 53bbae2d4c60 su 3035 : pam_unix(su:session): session closed for user indy Nov 09 17:20:21 53bbae2d4c60 env 84 : 2017-11-09 17:20:21,704 | ERROR | 1_1_152_to_1_1_153.py (28) | <module> | Migration failed: script returned 1 Nov 09 17:20:21 53bbae2d4c60 env 84 : Traceback (most recent call last): Nov 09 17:20:21 53bbae2d4c60 env 84 : File "/usr/local/lib/python3.5/dist-packages/data/migrations/deb/1_1_152_to_1_1_153.py", line 29, in <module> Nov 09 17:20:21 53bbae2d4c60 env 84 : raise Exception(msg) Nov 09 17:20:21 53bbae2d4c60 env 84 : Exception: Migration failed: script returned 1 Nov 09 17:20:21 53bbae2d4c60 env 84 : 2017-11-09 17:20:21,964 | ERROR | migration_tool.py (44) | _call_migration_script | Migration failed: script returned 1 Nov 09 17:20:21 53bbae2d4c60 env 84 : 2017-11-09 17:20:21,964 | DEBUG | node_control_tool.py (206) | _restore_from_backup | Restoring from backup for 1.1.43 Nov 09 17:20:21 53bbae2d4c60 env 84 : 2017-11-09 17:20:21,967 | WARNING | node_control_tool.py (213) | _restore_from_backup | Copying last_version failed due to  Errno 2  N Nov 09 17:20:21 53bbae2d4c60 env 84 : 2017-11-09 17:20:21,967 | WARNING | node_control_tool.py (213) | _restore_from_backup | Copying next_version failed due to  Errno 2  N Nov 09 17:20:21 53bbae2d4c60 env 84 : 2017-11-09 17:20:21,967 | WARNING | node_control_tool.py (213) | _restore_from_backup | Copying upgrade_log failed due to  Errno 2  No Nov 09 17:20:21 53bbae2d4c60 env 84 : 2017-11-09 17:20:21,967 | WARNING | node_control_tool.py (213) | _restore_from_backup | Copying last_version_file failed due to  Errno Nov 09 17:20:22 53bbae2d4c60 env 84 : 2017-11-09 17:20:22,126 | WARNING | node_control_tool.py (222) | _restore_from_backup | Copying last_version failed due to  Errno 2  N Nov 09 17:20:22 53bbae2d4c60 env 84 : 2017-11-09 17:20:22,152 | WARNING | node_control_tool.py (222) | _restore_from_backup | Copying next_version failed due to  Errno 2  N Nov 09 17:20:22 53bbae2d4c60 env 84 : 2017-11-09 17:20:22,152 | WARNING | node_control_tool.py (222) | _restore_from_backup | Copying upgrade_log failed due to  Errno 2  No Nov 09 17:20:22 53bbae2d4c60 env 84 : 2017-11-09 17:20:22,152 | WARNING | node_control_tool.py (222) | _restore_from_backup | Copying last_version_file failed due to  Errno Nov 09 17:20:22 53bbae2d4c60 env 84 : 2017-11-09 17:20:22,153 | DEBUG | node_control_tool.py (233) | _remove_old_backups | Removing old backups Nov 09 17:20:22 53bbae2d4c60 env 84 : 2017-11-09 17:20:22,153 | ERROR | node_control_tool.py (265) | _upgrade | Unexpected error in _upgrade Migration failed: script retu Nov 09 17:20:22 53bbae2d4c60 env 84 : 2017-11-09 17:20:22,153 | INFO | node_control_tool.py (257) | _upgrade | Trying to upgrade from 1.1.43 to 1.1.43 Nov 09 17:20:22 53bbae2d4c60 env 84 : 2017-11-09 17:20:22,153 | INFO | node_control_tool.py (163) | _call_upgrade_script | Upgrading sovrin node to version 1.1.43, test_ Nov 09 17:20:22 53bbae2d4c60 env 84 : 2017-11-09 17:20:22,153 | INFO | node_control_tool.py (142) | _get_deps_list | Getting dependencies for indy-node=1.1.43 Nov 09 17:20:22 53bbae2d4c60 env 84 : WARNING: apt does not have a stable CLI interface. Use with caution in scripts. Nov 09 17:20:28 53bbae2d4c60 env 84 : E: Version '1.1.43' for 'indy-node' was not found Nov 09 17:20:28 53bbae2d4c60 env 84 : E: No packages found Nov 09 17:20:28 53bbae2d4c60 env 84 : 2017-11-09 17:20:28,096 | ERROR | node_control_tool.py (265) | _upgrade | Unexpected error in _upgrade Command 'apt-cache show indy- Nov 09 17:20:28 53bbae2d4c60 env 84 : 2017-11-09 17:20:28,096 | DEBUG | node_control_tool.py (293) | start | Waiting for the next event Nov 09 17:20:28 53bbae2d4c60 env 84 : 2017-11-09 17:20:28,096 | DEBUG | node_control_tool.py (315) | start | Closing socket with fd 5 Nov 09 17:20:28 53bbae2d4c60 env 84 : 2017-11-09 17:20:28,096 | DEBUG | node_control_tool.py (293) | start | Waiting for the next event{code}  ></body> </Action>
<Action id="34537" issue="20772" author="vladimirwork" type="comment" created="2017-11-10 13:16:47.0" updateauthor="vladimirwork" updated="2017-11-10 13:16:47.0"> <body><! CDATA *Case 13:*  Build Info: indy-node 1.1.43 (stable)  Steps to Reproduce: 1. Perform manual client machine upgrade (via apt-get install indy-node) to 1.2.203 (master). 2. Check ~/.indy-cli/networks/NETWORK_NAME/ for genesis files.  Actual Results: There is no domain genesis file in the folder (but there is pool genesis file).  Expected Results: There should be both genesis files in this folder.  Additional Info: Client works normally in despite of genesis file absence, so this is a minor issue.  ></body> </Action>
<Action id="34626" issue="20772" author="vladimirwork" type="comment" body="Verified according to https://docs.google.com/spreadsheets/d/15_9oh8apbzSfjyAdLydl8ToEM692Jce44I2CSfULYkw/edit#gid=0." created="2017-11-14 16:23:59.0" updateauthor="vladimirwork" updated="2017-11-14 16:23:59.0"/>
