<Issue id="32753" key="INDY-1579" number="1579" project="10303" reporter="vladimirwork" creator="vladimirwork" type="10004" summary="Incorrect upgrade error due to already used upgrade name" priority="4" status="10200" created="2018-08-11 08:15:46.0" updated="2018-10-12 07:19:25.0" votes="0" watches="1" workflowId="43989"> <description><! CDATA Build Info: sovrin 1.1.67 indy-node 1.5.555  Steps to Reproduce: 1. Try to upgrade indy-node with sovrin package installed via old/new CLI: {noformat} indy@sandbox> new key with seed 000000000000000000000000Trustee1 Key created in wallet Default DID for key is V4SGRU86Z58d6TV7PBUe6f Verification key is ~CoRER63DVYnWZtK8uAzNbx Current DID set to V4SGRU86Z58d6TV7PBUe6f indy@sandbox> send POOL_UPGRADE name=upgrade556 version=1.5.556 sha256=ed0a366b4ef36d40c055672a8b83679e99246fec71a706b4ae4cb7958feace3f action=start schedule={'Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv ':'2018-08-10T11:00:00.258870+00:00','8ECVSk179mjsjKRLWiQtssMLgp6EPhWXtaYyStWPSGAb': '2018-08-10T11:00:00.258870+00:00', 'DKVxG2fXXTU8yT5N7hGEbXB3dfdAnYv1JczDUHpmDxya': '2018-08-10T11:00:00.258870+00:00', '4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA': '2018-08-10T11:00:00.258870+00:00'} timeout=10 force=True Sending pool upgrade upgrade556 for version 1.5.556 Pool upgrade failed: client request invalid: UnauthorizedClientRequest('TRUSTEE cannot do POOL_UPGRADE',) {noformat}  {noformat} pool(p1):wallet(w1):did(V4S...e6f):indy> ledger pool-upgrade name=upgrade556 version=1.5.556 action=start sha256=f284bdc3c1c9e24a494e285cb387c69510f28de51c15bb93179d9c7f28705398 schedule={"Gw6pDLhcBcoQesN72qfotTgFa7cbuqZpkX3Xo6pLhPhv":"2018-08-10T10:45:00.000000+00:00","8ECVSk179mjsjKRLWiQtssMLgp6EPhWXtaYyStWPSGAb":"2018-08-10T10:50:00.000000+00:00","DKVxG2fXXTU8yT5N7hGEbXB3dfdAnYv1JczDUHpmDxya":"2018-08-10T10:55:00.000000+00:00","4PS3EDQ3dW1tci1Bp6543CfuuebjFrg36kLAUcskGfaA":"2018-08-10T11:00:00.000000+00:00"} timeout=10 force=true Transaction has been rejected: TRUSTEE cannot do POOL_UPGRADE {noformat}  Actual Result: {color:red}Pool upgrade failed: client request invalid: UnauthorizedClientRequest('TRUSTEE cannot do POOL_UPGRADE',) / Transaction has been rejected: TRUSTEE cannot do POOL_UPGRADE{color}  Expected Results: There was another cancelled upgrade with the same name, so we should see error about already used upgrade name in this case.  ></description> </Issue>
