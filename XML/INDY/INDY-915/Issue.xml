<Issue id="22505" key="INDY-915" number="915" project="10303" reporter="ozheregelya" assignee="nage" creator="ozheregelya" type="10004" summary="Unclear errors appear in CLI on GET_NYM after upgrade pool from 1.0.28 version." priority="2" resolution="10000" status="10001" created="2017-10-19 14:16:14.0" updated="2019-03-29 20:34:07.0" resolutiondate="2019-03-29 20:34:07.0" votes="0" watches="2" workflowId="22505"> <environment><! CDATA Build Info: indy-node 1.0.28 (stable) -> 1.1.37 (stable) -> 1.1.41 (RC) -> 1.1.165 (master) OS/Platform: Ubuntu 16.04.2 LTS Setup: 6 nodes (docker pool), 1 client  ></environment> <description><! CDATA *Steps to Reproduce:* 1. Setup the pool with version 1.0.28 (stable). 2. Send NYM. 3. Upgrade pool to the 1.1.37 version (stable). 4. Send NYM. 5. Upgrade pool to the 1.1.41 version (RC). 6. Send NYM. 7. Upgrade pool to the 1.1.165 (master) version. 8. Send NYM. 9. Setup bls keys on nodes (init_bls_keys --name nodeN) and send NODE transactions with created bls keys. 10. Try to GET_NYM for one of created NYMs.  *Actual Results:* {code:java} indy@test> send GET_NYM dest=V4SGRU86Z58d6TV7PB7777 Getting nym V4SGRU86Z58d6TV7PB7777 There is a state proof, but no multi signature 6DKmmq7CLbE2vZDZmhFYHZencyyUQz9N1RtNZbvB48wH got reply for (V4SGRU86Z58d6TV7PBUe6f:1508407453717608) with bad multi signature from Node4C There is a state proof, but no multi signature 6DKmmq7CLbE2vZDZmhFYHZencyyUQz9N1RtNZbvB48wH got reply for (V4SGRU86Z58d6TV7PBUe6f:1508407453717608) with bad multi signature from Node6C There is a state proof, but no multi signature 6DKmmq7CLbE2vZDZmhFYHZencyyUQz9N1RtNZbvB48wH got reply for (V4SGRU86Z58d6TV7PBUe6f:1508407453717608) with bad multi signature from Node3C There is a state proof, but no multi signature 6DKmmq7CLbE2vZDZmhFYHZencyyUQz9N1RtNZbvB48wH got reply for (V4SGRU86Z58d6TV7PBUe6f:1508407453717608) with bad multi signature from Node2C There is a state proof, but no multi signature 6DKmmq7CLbE2vZDZmhFYHZencyyUQz9N1RtNZbvB48wH got reply for (V4SGRU86Z58d6TV7PBUe6f:1508407453717608) with bad multi signature from Node5C There is a state proof, but no multi signature 6DKmmq7CLbE2vZDZmhFYHZencyyUQz9N1RtNZbvB48wH got reply for (V4SGRU86Z58d6TV7PBUe6f:1508407453717608) with bad multi signature from Node1C Current verkey for NYM V4SGRU86Z58d6TV7PB7777 is ~V4SGRU86Z58d6TV7PB7777 with role TRUST_ANCHOR{code} *Expected Results:* Errors "There is a state proof, but no multi signature 6DKmmq7CLbE2vZDZmhFYHZencyyUQz9N1RtNZbvB48wH got reply for (V4SGRU86Z58d6TV7PBUe6f:1508407453717608) with bad multi signature from Node1C" should not appear neither for NYMs added before update to version with state proofs, nor for newly created NYMs.  *Additional Information:* Restart of the pool and restart of CLI didn't help.  *Case 2:*  0. After Case 1 do following: 1. Demote 4 of 6 nodes. 2. send GET_NYM for NYM created after configuring blskeys. => GET_NYM worked successfully. 3. Demote 1 more node. 4. send GET_NYM for NYM created after configuring blskeys.  *Actual Results:* Messages are repeatedly shown until stopping the CLI: {code:java} indy@test> send GET_NYM dest=V4SGRU86Z58d6TV7PB6666 Getting nym V4SGRU86Z58d6TV7PB6666 There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424114096257) with bad multi signature from Node2C There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424114096257) with bad multi signature from Node1C Current verkey for NYM V4SGRU86Z58d6TV7PB6666 is ~V4SGRU86Z58d6TV7PB6666 CONNECTION: 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 disconnected from Node2C indy@test> send GET_NYM dest=V4SGRU86Z58d6TV7PB6666 Getting nym V4SGRU86Z58d6TV7PB6666 There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424126544585) with bad multi signature from Node1C There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424126544585) with bad multi signature from Node1C There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424126544585) with bad multi signature from Node1C There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424126544585) with bad multi signature from Node1C There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424126544585) with bad multi signature from Node1C There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424126544585) with bad multi signature from Node1C There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424126544585) with bad multi signature from Node1C There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424126544585) with bad multi signature from Node1C There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424126544585) with bad multi signature from Node1C There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424126544585) with bad multi signature from Node1C There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424126544585) with bad multi signature from Node1C There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424126544585) with bad multi signature from Node1C There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424126544585) with bad multi signature from Node1C There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424126544585) with bad multi signature from Node1C There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424126544585) with bad multi signature from Node1C There is a state proof, but no multi signature 4YYedN1pErWMeMdWdLW5Pa3EVddkfr8s8g5FAXN6B2o8 got reply for (V4SGRU86Z58d6TV7PBUe6f:1508424126544585) with bad multi signature from Node1C .... etc. {code}    *Expected Results:* Errors should not appear.     *Case 2.1 (the same behavior, but other steps):*  Steps to Reproduce: 1. Set up the pool of 4 nodes with 1.1.170 version (with initialized blskeys, like in docker pool). 2. Set up the client. 3. Change the blskey fields for each node in pool_transaction_sandbox_genesis file on client. 4. Open the CLI, send GET_NYM. => Message appears for each node. 5. Demote 3 nodes. 6. Send GET_NYM.  *Actual Results:* Message repeatedly appears for the last not demoted node.  *Expected Results:* Message should appear only once.  ></description> </Issue>
