<Issue id="19249" key="INDY-420" number="420" project="10303" reporter="krw910" assignee="danielhardman" creator="krw910" type="10004" summary="Disconnection of the primary node and secondary node can lead to pool failure (service stop or port disconnect)" priority="1" resolution="10000" status="10001" created="2017-07-14 01:05:22.0" updated="2019-03-29 20:32:21.0" resolutiondate="2019-03-29 20:32:21.0" votes="0" watches="4" timeoriginalestimate="0" timeestimate="0" workflowId="19249"> <description><! CDATA This may seem like an edge case, but I think there is a bigger issue with this ticket.  *Setup* 4 nodes 4 clients  *Steps* # Once everything is setup go to the .sovrin directory on one of the nodes and search for  “new primary is” to see which node is the primary node. # Go to the primary node and stop the sovrin-node service "sudo systemctl stop sovrin-node" # Now open the logs on one of the remaining nodes and run the search again to see which nodes is now the primary node. # Start the service again on the machine that you just shut the service down on "sudo systemctl start sovrin-node" # Check the logs on the node where you just started the sovrin-node service to see if a new primary was selected.  *{color:#d04437}At this point no primary election or view change occurred{color}*  Send a NYM transaction to make sure the pool is still accepting transactions.  *{color:#14892c}You will see that the pool is still functioning {color}*  # Check the transactions file on the node where you started the service and you should see the NYM transaction you just sent. # Now shutdown the sovrin-node service on the current primary node # Check to see if a new primary was selected  *{color:#d04437}Issue{color}* At this point not only was a new primary node not selected, but you also could not send any more transactions to the pool. It acted as if only 2 nodes were in the pool instead of 3 and so it could not reach consensus. We are still testing around the scenario to see if there is a problem when nodes restart their services and cannot participate in the new primary election process.   ></description> </Issue>
