<Issue id="28802" key="INDY-1236" number="1236" project="10303" reporter="ozheregelya" assignee="ozheregelya" creator="ozheregelya" type="10004" summary="Load test fails with timeout error" priority="2" resolution="10000" status="10001" created="2018-03-23 14:53:58.0" updated="2019-03-29 20:32:27.0" resolutiondate="2019-03-29 20:32:27.0" votes="0" watches="5" workflowId="28805"> <environment><! CDATA indy-node 1.3.350 libindy 1.3.1~416  ></environment> <description><! CDATA Size: XL (PoA + fix)  Steps to Reproduce: Run load test: `python3 Perf_Add_nyms.py -n 1000000`  Load test output: {code:java} ======== Created NYM request... _indy_loop_callback: Function returned b'{"result":{"identifier":"Th7MpTaRZVRYnPiabds81Y","seqNo":69157,"signature":"uS7ex9tf1B5XKGgYX7on9YBqfMPdxvpKio2kiibpd3 GmJuqbKohbnhPqVoUaNvJZgsyChzdroCqm9uSSXqnEzmq","reqId":1521799295295701355,"dest":"5dTgz9qtfGkMJSziJgR6Xq","auditPath": "DNqmoGGTgpiBBAciPXesQMZrDc869zbHSp3dTU 9CCH96","84y14BEtKJVhvzxk9jcUkShSiLBCQwmLgBHDfSVzq6FF","HXuMghQ8oWzhPY9a1e6zeKDqDh47m4Y74S4XkDNfViu4","5zzz6XrU7YDqKfKcir5xcwFSn14Cb8BrSPDknTRBcpTe","FXgXuJuBy wh96dcSzHBompV5W6mCafbhThpMSRGm19n5","79rKLpcLZWVvnLFPGobnVzUqWSjjNHAGViUwNgQSzdgT" ,"txnTime":1521799295,"rootHash":"3aVbsYzWtiN84xYxiaW9kL5ZC14pYUk13Q2ekBC14 Rhn","signatures":null,"type":"1"},"op":"REPLY"}' ======== Submitted NYM request _indy_loop_callback: Function returned (b'APSapr2CQwpa3r8z6WE8CY', b'67jrf4UCHzAenHzyT596gh4C4cTZS92rZFHw5HrqNbmc') ======== DID69081: APSapr2CQwpa3r8z6WE8CY  _indy_loop_callback: Function returned b'{"reqId":1521799296030170739,"identifier":"Th7MpTaRZVRYnPiabds81Y","operation":{"dest":"APSapr2CQwpa3r8z6WE8CY","type" :"1"},"protocolVersion":1}' ======== Created NYM request... _indy_loop_callback: Function returned b'{"result":{"signatures":null,"signature":"25oUYjwbpNto8bb9dU8NTphd8Y5wvhmUin6AJUWAhXm9eQUtfc9bYC2Vb8vd1q1KVJEQDtYCSqjw eA8SyxpCAqTq","txnTime":1521799296,"type":"1","reqId":1521799296030170739,"seqNo":69158,"rootHash":"6YSHtbLR4XPqxvdbTW1ybvn353cPKGW3KrwCW8cy98J7","identifier": "Th7MpTaRZVRYnPiabds81Y","auditPath": "F7NhGpzu3cjjpvCVdp4SodsUkKBKkp1kpDgQHkJxLR4W","DNqmoGGTgpiBBAciPXesQMZrDc869zbHSp3dTU9CCH96","84y14BEtKJVhvzxk9jcUkShSiL BCQwmLgBHDfSVzq6FF","HXuMghQ8oWzhPY9a1e6zeKDqDh47m4Y74S4XkDNfViu4","5zzz6XrU7YDqKfKcir5xcwFSn14Cb8BrSPDknTRBcpTe","FXgXuJuBywh96dcSzHBompV5W6mCafbhThpMSRGm19n5 ","79rKLpcLZWVvnLFPGobnVzUqWSjjNHAGViUwNgQSzdgT" ,"dest":"APSapr2CQwpa3r8z6WE8CY"},"op":"REPLY"}' ======== Submitted NYM request _indy_loop_callback: Function returned (b'93BvgPLfWVtWHZEDLTCN3i', b'5P68jssRddPmoHMqNjfcFi6Nr5fE6vK9ZsDKvpo6ny8w') ======== DID69082: 93BvgPLfWVtWHZEDLTCN3i  _indy_loop_callback: Function returned b'{"reqId":1521799296982578065,"identifier":"Th7MpTaRZVRYnPiabds81Y","operation":{"dest":"93BvgPLfWVtWHZEDLTCN3i","type" :"1"},"protocolVersion":1}' ======== Created NYM request... _indy_loop_callback: Function returned b'{"result":{"signatures":null,"dest":"93BvgPLfWVtWHZEDLTCN3i","txnTime":1521799300,"auditPath": "AXPu3KeHaa4cNFSL5kG7mG Yubc6ifvRLVo16mmESKDMJ","DNqmoGGTgpiBBAciPXesQMZrDc869zbHSp3dTU9CCH96","84y14BEtKJVhvzxk9jcUkShSiLBCQwmLgBHDfSVzq6FF","HXuMghQ8oWzhPY9a1e6zeKDqDh47m4Y74S4XkDNf Viu4","5zzz6XrU7YDqKfKcir5xcwFSn14Cb8BrSPDknTRBcpTe","FXgXuJuBywh96dcSzHBompV5W6mCafbhThpMSRGm19n5","79rKLpcLZWVvnLFPGobnVzUqWSjjNHAGViUwNgQSzdgT" ,"reqId":152 1799296982578065,"identifier":"Th7MpTaRZVRYnPiabds81Y","type":"1","rootHash":"JAL5PKmUUZ3sDKCEbKrkC1pGpPZAYaQG4xYEdQ6N1mpt","signature":"3FnW8mh6y1AWDTZ861p5tv LxeapeGbYh9SSKNmpCv8jN6kDmJg2Bm6H5QS8R481nT4czwRXKcXu4U6SXqv4gyY6s","seqNo":69159},"op":"REPLY"}' ======== Submitted NYM request _indy_loop_callback: Function returned (b'5Hi3oGkLzBxMTeURecMZJF', b'3LZ9DJdtzHYx1moW6Q251BcbXruCSnXLZ8UttmF3TaGK') ======== DID69083: 5Hi3oGkLzBxMTeURecMZJF  _indy_loop_callback: Function returned b'{"reqId":1521799302157613423,"identifier":"Th7MpTaRZVRYnPiabds81Y","operation":{"dest":"5Hi3oGkLzBxMTeURecMZJF","type" :"1"},"protocolVersion":1}' ======== Created NYM request... _indy_loop_callback: Function returned error 307 Exception in callback _indy_loop_callback(207253, 307, b'') at /usr/local/lib/python3.5/dist-packages/indy/libindy.py:62 handle: <Handle _indy_loop_callback(207253, 307, b'') at /usr/local/lib/python3.5/dist-packages/indy/libindy.py:62> Traceback (most recent call last): File "/usr/lib/python3.5/asyncio/events.py", line 125, in _run self._callback(*self._args) File "/usr/local/lib/python3.5/dist-packages/indy/libindy.py", line 70, in _indy_loop_callback future.set_exception(IndyError(ErrorCode(err))) File "/usr/lib/python3.5/enum.py", line 241, in __call__ return cls.__new__(cls, value) File "/usr/lib/python3.5/enum.py", line 476, in __new__ raise ValueError("%r is not a valid %s" % (value, cls.__name__)) ValueError: 307 is not a valid ErrorCode ^CTraceback (most recent call last): File "Perf_Add_nyms.py", line 204, in <module> loop.run_until_complete(add_nyms(results.p, results.n, results.i, results.s)) File "/usr/lib/python3.5/asyncio/base_events.py", line 375, in run_until_complete self.run_forever() File "/usr/lib/python3.5/asyncio/base_events.py", line 345, in run_forever self._run_once() File "/usr/lib/python3.5/asyncio/base_events.py", line 1276, in _run_once event_list = self._selector.select(timeout) File "/usr/lib/python3.5/selectors.py", line 441, in select fd_event_list = self._epoll.poll(timeout, max_ev) KeyboardInterrupt{code} Nodes logs:  https://drive.google.com/file/d/1JOMG6ezqAkDEQTXRsL5eb11pHFL7KIT0/view?usp=sharing   ></description> </Issue>
