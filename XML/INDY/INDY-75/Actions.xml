<Action id="26507" issue="17171" author="andkononykhin" type="comment" created="2017-06-16 11:12:07.0" updateauthor="andkononykhin" updated="2017-06-16 11:12:46.0"> <body><! CDATA Jenkins log where test failed:  https://jenkins.evernym.com/job/Plenum/job/master/119/artifact/test-result.agent-ubuntu-04.txt   (attached here as well: https://jira.hyperledger.org/secure/attachment/11180/test-result.agent-ubuntu-04.txt)  According to it we see: # first 3 Nodes (Alpha, Beta, Delta) during start went through 2 rounds of elections # all messages for not started node had been suspended # last Node (Gamma) started after election finally happened # Gamma received all suspended messages from each node at once: pinged Alpha - received all messages from it, pinged Beta - all msgs from it ... # set of messages from each node included several NOMINATEs, several REELECTIONs, several PRIMARYs # Gamma processed them one by one from each Node and seems it led to misbehaviors:  #  ## Gamma expects REELECTION with round=1 but received both versions of REELECTION messages (round=1 and round=2). So, it discarded the latter. ## Gamma accumulated REELECTIONs, achieved quorum and initiated reelection (resetting accumulated nominations) itself at the time when first three nodes had been already decided about primaries (for me it means that old REELECTION messages should be treated as obsolete and ignored). As a result, Gamma had lack of nominations to choose the primary.  There are two options to fix that test: # update/increase default timeout in plenum/test/test_node.py:ensureElectionsDone: for now it expected 0 number of reelections  callingplenum/test/waits.py:expectedPoolElectionTimeout # wait for updated election logic in scopr of INDY-13 and adjust test to it  I don't think that option 1 resolves issue cause of mentioned misbehaviors, so I'm going to mark the task as blocked by INDY-13.     ></body> </Action>
<Action id="28208" issue="17171" author="krw910" type="comment" body="I have verified this test is enabled and passed in the last build of plenum. The test is located  here|https://github.com/hyperledger/indy-plenum/blob/12ca9b5b86e4dde21204e0f3fa016c4cc3eae4d2/plenum/test/test_node_connection.py " created="2017-07-12 05:11:13.0" updateauthor="krw910" updated="2017-07-12 05:11:13.0"/>
