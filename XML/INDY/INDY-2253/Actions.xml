<Action id="64755" issue="42768" author="vladimirwork" type="comment" body="Done in https://github.com/hyperledger/indy-test-automation/pull/65, need to check it in CD because there are still intermittent catchup failures even with 200 extra txns written in the end of each test." created="2019-10-16 15:34:32.0" updateauthor="vladimirwork" updated="2019-10-16 15:34:32.0"/>
<Action id="64756" issue="42768" author="vladimirwork" type="comment" body="Also we have catchup failure with forcing catchup with 200 extra txns in the latest nightly pipeline: https://build.sovrin.org/blue/organizations/jenkins/indy-node%2Findy-node-nightly/detail/indy-node-nightly/135/tests -&gt; TestCatchUpSuiteExtended.py / Run TestCatchUpSuiteExtended.py /  8  Upload test report / test_case_config_ledger False-55-200  – system.indy-node-tests.TestCatchUpSuiteExtended.TestCatchUpSuiteExtended" created="2019-10-16 15:36:14.0" updateauthor="vladimirwork" updated="2019-10-16 15:36:14.0"/>
<Action id="64769" issue="42768" author="vladimirwork" type="comment" created="2019-10-17 14:10:28.0" updateauthor="vladimirwork" updated="2019-10-17 14:10:28.0"> <body><! CDATA Build Info: indy-node 1.11.0~dev1107 plugins 1.0.4~dev105  Steps to Reproduce: https://github.com/hyperledger/indy-test-automation/blob/0779b086b45dbbe6aa4e1a150b980bff644faf1e/system/indy-node-tests/TestCatchUpSuite.py#L18 (we checked all nodes reachability (True) and sent 200 extra txns to force catchup)  Actual Results: Node9 has 12 domain and 1 audit txn in the end of test instead of 612 and 611 respectively: {noformat} DOMAIN LEDGER SYNC:  '612', '612', '612', '612', '612', '612', '612', '612', '12'  AUDIT LEDGER SYNC:  '611', '611', '611', '611', '611', '611', '611', '611', '1'  {noformat}  Logs: ev@evernymr33:logs/2253.tar.gz  ></body> </Action>
<Action id="64866" issue="42768" author="ashcherbakov" type="comment" created="2019-10-22 11:20:16.0" updateauthor="ashcherbakov" updated="2019-10-22 11:20:28.0"> <body><! CDATA Analysis result and suggestions:  *test_consensus_restore_after_f_plus_one* * IN PROGRESS  ~Toktar   *TestAuditSuite.test_case_demote_master_backup_non_primary 0 * * INDY-2247  ~Toktar   *TestCatchUpSuite REQUIRE CHANGES IN TESTS* * There are two reasons why this test is failing: ** If check_reachability=True, then it fails on checks for the Node before the last one ( -2  Node), since we don't do reachability checks for it. ** If check_reachability=False, then it may fail because we don't send enough requests to start catchup. * Suggested fixes: 1) If check_reachability=True, call `ensure_all_nodes_online` after  -2  Node is started 2) If check_reachability=False, then there are 2 options: O1: Send N requests; Call `ensure_all_nodes_online`; Send 200 reqs O2: Send requests in a loop until all nodes are in the same state (do not send more than 1000).  ></body> </Action>
<Action id="64867" issue="42768" author="ashcherbakov" type="comment" created="2019-10-22 11:24:06.0" updateauthor="ashcherbakov" updated="2019-10-22 11:24:06.0"> <body><! CDATA *TestCatchUpSuiteExtended.test_case_token_ledger REQUIRE  CHANGES IN TESTS* Suggested Changes: add `ensure_all_nodes_online` check right after starting the node regardless of `wait_catchup_before_ordering` flag.   ></body> </Action>
<Action id="64872" issue="42768" author="toktar" type="comment" created="2019-10-22 12:44:53.0" updateauthor="toktar" updated="2019-10-22 12:44:53.0"> <body><! CDATA *test_consensus_restore_after_f_plus_one* Suggested Changes:  **  add catchup and reachability check after service_start for nodes Node4 and Node5 (# 5/7 online - can w+r)  ></body> </Action>
<Action id="64893" issue="42768" author="vladimirwork" type="comment" body="Done in https://github.com/hyperledger/indy-test-automation/pull/69" created="2019-10-23 13:18:10.0" updateauthor="vladimirwork" updated="2019-10-23 13:18:10.0"/>
<Action id="64942" issue="42768" author="vladimirwork" type="comment" body="All tests have been updated, merged to master and bumped to both pipelines." created="2019-10-24 14:13:47.0" updateauthor="vladimirwork" updated="2019-10-24 14:13:47.0"/>
<Action id="64996" issue="42768" author="ashcherbakov" type="comment" body="The reason of all failing tests now is reconnection issue. We have INDY-2261 to process this" created="2019-10-25 12:54:58.0" updateauthor="ashcherbakov" updated="2019-10-25 12:54:58.0"/>
