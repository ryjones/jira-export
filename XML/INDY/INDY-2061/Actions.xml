<Action id="59363" issue="39403" author="derashe" type="comment" created="2019-04-22 08:41:19.0" updateauthor="derashe" updated="2019-04-22 11:41:40.0"> <body><! CDATA Problem reason/description: - Attrib wasn't included in auth_map  Changes: - attrib txn included in auth_map. Additional validation.  PR: -  https://github.com/hyperledger/indy-node/pull/1246   Version: - 901 dev  Risk factors: - no  Risk: - Low  Covered with tests: -  https://github.com/hyperledger/indy-node/pull/1246/files#diff-0a39e5bf9d3fa2b68ac770621dd032e6   Recommendations for QA * Set specific auth rules for attrib txn (for example "owner signature AND steward signatures" for adding attrib, and "owner AND trustee sigantures" for editing) * Check addition and editing of attrib with these auth_rules (check it for raw/hash/enc attribs)  Â   ></body> </Action>
<Action id="59409" issue="39403" author="vladimirwork" type="comment" created="2019-04-23 10:37:28.0" updateauthor="vladimirwork" updated="2019-04-23 10:38:09.0"> <body><! CDATA Build Info: indy-node 1.7.0~dev901  Steps to Reproduce: See steps here: https://github.com/VladimirWork/indy-test-automation/blob/003185e25776a6ebc46ac73f5ba49ba6fbaccaa3/system/draft/TestAuthMapSuite.py#L15  Actual Results: There is an inconsistent behaviour for "enc" parameter while editing attrib - it fails to be edited by Trustee (according to auth rule) and requires Steward signature (like for adding, not for editing):  {noformat} {'op': 'REJECT', 'reqId': 1556015004616995645, 'reason': "client request invalid: UnauthorizedClientRequest('Not enough STEWARD signatures',)", 'identifier': 'BagRmrDHtHpfmrcFUqLx23'} {noformat}  but for two other parameters "xhash" and "raw" with the same steps this test passes:  {noformat} {'result': {'auditPath':  '5ovm2rim3BmujRVvF1dbgG823vEUQAJYJTvntqoPCmCo', 'GS51z2tytPtazYa9hKRaUq8gSrEfBfTdYP59qwKWWij7', '6NVGJjQVapQ7HV5Xg5y8u5sHjEMp7hEXDhbcrHZ6SZsV' , 'txn': {'type': '100', 'data': {'dest': '5CJDA2owSdoyozuXJtJ3mN', 'hash': 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855'}, 'protocolVersion': 2, 'metadata': {'digest': 'a6b8039cc34b8a85cc0de9f6182864146b34c6efd28addb3fbc4e27593810bf7', 'payloadDigest': '3617698a2e36fed47bb88392d70e14f86e5789dfd510db548c9ceafb23adfbca', 'reqId': 1556014990384530371, 'from': '8jnYy6MtgFGinoo42Ken1R'}}, 'ver': '1', 'txnMetadata': {'txnTime': 1556014991, 'txnId': '5CJDA2owSdoyozuXJtJ3mN:1:e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855', 'seqNo': 14}, 'rootHash': 'CUYdqcvddXSxigt4JvkMSDFzt3eYkY5XMoVMKtR2TseZ', 'reqSignature': {'type': 'ED25519', 'values':  {'from': '8jnYy6MtgFGinoo42Ken1R', 'value': '4tJ1RDXPQgYJqytdG8C7Grqm8KS4Nu7pNKM47eRVabgvUNpmdKf6txZNmDyTBNg9phvEzxbi1ihuCGitDbCja1Do'} }}, 'op': 'REPLY'}  {'op': 'REPLY', 'result': {'auditPath':  'AP5LYZ9NDM2G5L49VfSmwNttjiinHdmB8EFSHbdnSSgY', 'BHvdbAwJki4RiksaK1gvxQMCxQDir959X8mf6TJiNZ5e' , 'txn': {'type': '100', 'data': {'dest': 'WZzT6zTE6HudUPyqqZB3ZD', 'raw': '{"key":"value2"}'}, 'metadata': {'from': '95YmX1ravD1DEF2kW8Yg84', 'payloadDigest': 'fc2951d6d0d286ab57b332c25e9e4e72dc1bf71176b1470acb1c28713cdcaa7d', 'reqId': 1556014997464665736, 'digest': '92f0ce1d3e7b5cf14a94b3f1eadb28d094da053f5f3f26d7901ebc3141861804'}, 'protocolVersion': 2}, 'ver': '1', 'txnMetadata': {'txnTime': 1556014998, 'txnId': 'WZzT6zTE6HudUPyqqZB3ZD:1:2c70e12b7a0646f92279f427c7b38e7334d8e5389cff167a1dc30e73f826b683', 'seqNo': 19}, 'rootHash': '2vNPUaJ2BJXDzEgyqMZKjNu3ZhNriDt2FtZfTRHWEpvp', 'reqSignature': {'type': 'ED25519', 'values':  {'from': '95YmX1ravD1DEF2kW8Yg84', 'value': '61ae7W94tK7qPvQbUiJuvMfof8d76XFLmniHKskBvz9gq1vra6DPt5qnzeZSvKSuzXZsBC7qT2yBAW5bRZWzFkhH'} }}} {noformat}  Pool's logs are in attachment.  ^INDY-2061.tar.gz    ></body> </Action>
<Action id="59413" issue="39403" author="vladimirwork" type="comment" body="xhash and enc parameters have the same key and value so *they can be added only and cannot be edited*." created="2019-04-23 13:07:43.0" updateauthor="vladimirwork" updated="2019-04-23 13:07:43.0"/>
