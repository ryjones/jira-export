<Issue id="27532" key="INDY-1152" number="1152" project="10303" reporter="anikitindsr" assignee="vladimirwork" creator="anikitindsr" type="10004" summary="Failed restart after getting unhandled exception (KeyError)" environment="indy-node 1.2.50-stable" priority="3" resolution="10000" status="10001" created="2018-02-08 15:43:04.0" updated="2019-03-29 20:35:14.0" resolutiondate="2019-03-29 20:35:14.0" votes="0" watches="2" workflowId="27533"> <description><! CDATA While testing pool upgrade was noted, that nodes which failed the upgrade procedure had broken indy-node processes. In systemd service we have option like 'Restart=on-failure' that meens that service must be restarted when running process will broke (by KeyError unhandled exception for example). All of nodes with faulty upgrade procedure had unhandled exception and systemctl did not restart indy-node service.Â  The main assumption is that main python process had unhandled exception, was stopped but child processes was not stopped and systemd not restart service. Ways to investigate: # There is several type of service - 'forked' and 'sample'. What of type do we use dy default? # How many subprocesses we use for indy-node service  Also, set 'SIGTERM' into list of handled signal.  ></description> </Issue>
