<Issue id="22933" key="INDY-936" number="936" project="10303" reporter="ashcherbakov" assignee="nage" creator="ashcherbakov" type="10001" summary="We need to be able to support changes in Node-to-Node communication" priority="3" resolution="10000" status="10001" created="2017-10-30 13:08:36.0" updated="2019-03-29 20:34:37.0" resolutiondate="2019-03-29 20:34:37.0" votes="0" watches="1" workflowId="22934"> <description><! CDATA It's perfectly possible that we may need to change Node-to-Node communication (add new messages, change protocol, ass/remove fields from messages, edit messages, etc.).  Option1: Always require UPDATE on the same time, so we can assume that our pool is always at the same version. - It may mean that our pool is unavailable for a couple of minutes, but probably it's fine for now, since we don't have big load, and we can always announce a maintenance time  Option2: Define a 'pool protocol version' as a minimal version of nodes in the pool. We can get this version from config ledger (NODE_UPGRADE txn). Have protocol-version-dependent code, so that we don't send new messages until all Nodes in the pool understand the new type of messages. - it may slow down providing hotfixes, so probably should be combined with Option1.  Option3: Each Node-to-Node message has a version, and we should send all versions of a message, so that both old and new Nodes can understand it. - it doesn't help when we change the whole protocol, so we need Option2 there.  ></description> </Issue>
