<Issue id="39180" key="INDY-2047" number="2047" project="10303" reporter="sergey.khoroshavin" assignee="vladimirwork" creator="sergey.khoroshavin" type="10004" summary="Nodes can fail on first start after upgrading from version without audit ledger to version with audit ledger" priority="3" resolution="10000" status="10001" created="2019-04-09 16:45:20.0" updated="2019-04-18 10:20:23.0" resolutiondate="2019-04-18 10:20:23.0" votes="0" watches="3" workflowId="52057"> <description><! CDATA *Problem reason* On first start after upgrade catch-up is done using old protocol (i.e. catching up each ledger independently), and it can happen so that other nodes manage to order some transaction between catching up audit and other ledgers. This can lead to failed attempts to apply PREPREPAREs and halted ordering on some nodes (however ledger won't be corrupted and they could be restarted to try again).  *Proposed solution* On startup do several rounds of catchup until either audit transaction is caught up or some timeout passed (TBD, 2-3 minutes?)  ></description> </Issue>
