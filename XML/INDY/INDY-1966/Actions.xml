<Action id="56791" issue="37188" author="toktar" type="comment" created="2019-02-08 13:38:49.0" updateauthor="toktar" updated="2019-02-08 13:38:49.0"> <body><! CDATA *PoA:* +Write a test+ for reproduce this problem: 1. Stop the node Delta 2. Patch methods for processing VCStartMsgStrategy messages 3. Delay CurrentState messages on Delta 4. Start Delta 5. Start view change with a maser degradation reason (from view 0 to 1) 6. Check that Delta start VCStartMsgStrategy after quorum of InstanceChanges 7. Reset delay for CurrentStates 8. Check that propagate primary happened. 9. Unpatch VCStartMsgStrategy methods and process catching messages. 10. Start view change with a maser degradation reason (from view 1 to 2) 11. Check that all nodes has viewNo = 2 and can order transactions. If test reproduced the problem +add a fix+. In the end of catchup call  VCStartMsgStrategy method which will back strategy's parameters to initial define values  ></body> </Action>
<Action id="56852" issue="37188" author="toktar" type="comment" created="2019-02-11 14:56:08.0" updateauthor="toktar" updated="2019-02-12 12:01:12.0"> <body><! CDATA *Problem reason:* - If a node collect quorum of instance change messages before propagating primary and start pre-processing ViewChange messages, then after propagating primary the node can't do a new view change.  *Changes:* - Add a complete logic in a VCStartMsgStrategy before start view change.  *PR:* *  https://github.com/hyperledger/indy-node/pull/1167  *  https://github.com/hyperledger/indy-plenum/pull/1081   *Version:* * indy-node 1.6.801 -master * (indy-plenum 1.6.676 -master)  *Risk factors:* - A node can't order after start.  *Risk:* - Low  *Test:* *  test_restart_node_with_view_changes.py|https://github.com/hyperledger/indy-plenum/pull/1081/files#diff-0c3695aa4d1c10233f315936e874a530   *Recommendations for QA:*  Load with 10 txn/sec (any medium load), force view change every 1 hour. Try to restart not primary node in view change and just before view change.  ></body> </Action>
<Action id="56954" issue="37188" author="vladimirwork" type="comment" created="2019-02-13 07:52:43.0" updateauthor="vladimirwork" updated="2019-02-13 07:52:43.0"> <body><! CDATA Build Info: indy-node 1.6.802  Steps to Validate: 1. Load with 10 txn/sec (any medium load). 2. Force view change every 30 minutes. 3. Restart not primary nodes (5-10 one by one) in view change and just before view change.  Actual Results: There are the same view no and primaries at the end of load test. Amount of txns in ledger also is the same.  ></body> </Action>
