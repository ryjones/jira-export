<Action id="46184" issue="30974" author="sergey.khoroshavin" type="comment" body="PR with simple fix: https://github.com/hyperledger/indy-plenum/pull/747" created="2018-06-19 09:34:23.0" updateauthor="sergey.khoroshavin" updated="2018-06-19 09:34:23.0"/>
<Action id="46306" issue="30974" author="sergey.khoroshavin" type="comment" created="2018-06-20 17:02:16.0" updateauthor="sergey.khoroshavin" updated="2018-06-20 17:02:16.0"> <body><! CDATA Now stashed ordered batches are applied correctly even if some of their requests were written during catchup process. It is recommended to rerun load tests from  INDY-1350|https://jira.hyperledger.org/browse/INDY-1350  to see if pool is still unstable.  ></body> </Action>
<Action id="46359" issue="30974" author="ashcherbakov" type="comment" created="2018-06-21 09:16:40.0" updateauthor="ashcherbakov" updated="2018-06-21 09:16:40.0"> <body><! CDATA `bug.png` - workflow of initial problem found in INDY-1400  `bug_fixed.png` - workflow of the fix done in the scope of INDY-1404 and INDY-1405  `node_init.png` - workflow of a similar problem with node initiation  `node_init_fixed.png` - workflow of the fix done in the scope of INDY-1404 and INDY-1405  ></body> </Action>
<Action id="46367" issue="30974" author="sergey.khoroshavin" type="comment" created="2018-06-21 12:13:22.0" updateauthor="sergey.khoroshavin" updated="2018-06-21 17:13:38.0"> <body><! CDATA *Problem reason:* Catchup interruption caused by view change can leave transactions in ledger that are only part of some batch. Current application of stashed ordered messages was not checking whether some transactions are already written, which leaded to corrupted ledger state.  *Changes:* Now transactions in stashed ordered messages are applied only if they were not already written to ledger.  *PR:* https://github.com/hyperledger/indy-plenum/pull/747  *Version:* indy-plenum: 1.4.413-master indy-node: 1.4.470-master  *Risk:* Low  *Covered with tests:* https://github.com/hyperledger/indy-plenum/pull/747/files#diff-6a289ded022270a06e44a66b22b5f012  *Recommendations for QA:* It is recommended to rerun load tests from  INDY-1350|https://jira.hyperledger.org/browse/INDY-1350  to see if pool is still unstable  ></body> </Action>
