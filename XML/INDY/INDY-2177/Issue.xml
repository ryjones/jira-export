<Issue id="41364" key="INDY-2177" number="2177" project="10303" reporter="ashcherbakov" assignee="sergey.khoroshavin" creator="ashcherbakov" type="10002" summary="Use audit ledger in Checkpoints" priority="3" resolution="10000" status="10001" created="2019-07-23 09:32:11.0" updated="2019-10-01 10:59:21.0" resolutiondate="2019-08-30 16:15:28.0" votes="0" watches="2" workflowId="54369"> <description><! CDATA As of now, Checkpoints calculate digests based on the digests of PrePrepares forming the Checkpoints. It can lead to a problem when the Checkpoint is started not from the beginning. For example we caught-up till ppSeqNo=53, so the current code will start the next Checkpoint from 54 instead of 0. So, this Checkpoint will have different digest comparing to other nodes participating in consensus (these nodes have all 100 PrePrepares forming the Checkpoint, but caught-up node has only 46). This can be critical in a new view change protocol relying on checkpoints a lot.  With a presence of audit ledger we can use audit ledger's root hash as a digest to solve the issue mentioned above.  *Acceptance criteria* * Use audit ledger's root hash instead of digests * Checkpoint's startSeqNo can be equal to always 0. In general, it's not needed at all, but we have to keep it for backward compatibility. * Simplify checkpoint logic in general  ></description> </Issue>
