<Action id="30530" issue="20565" author="krw910" type="comment" body="We want to see which nodes succeeded and which nodes failed." created="2017-09-05 20:46:51.0" updateauthor="krw910" updated="2017-09-05 20:46:51.0"/>
<Action id="34408" issue="20565" author="mzk-vct" type="comment" created="2017-11-07 09:52:07.0" updateauthor="mzk-vct" updated="2017-11-07 09:52:07.0"> <body><! CDATA  ~krw910  Is there corresponding logs?  Also there are only three records, but eight nodes as I see.  Was pool working well after upgrade despite this node failed upgrade?  ></body> </Action>
<Action id="34431" issue="20565" author="mgbailey" type="comment" created="2017-11-07 19:22:33.0" updateauthor="mgbailey" updated="2017-11-07 19:22:33.0"> <body><! CDATA  ~mzk-vct  our nodes do not retain logs that far back.  I suspect that this is due to force=true, with all nodes set to upgrade simultaneously, which was required for this upgrade (and others).  It is probable that as the nodes came up, they did not have consensus, and the transaction was not written to the config ledger.  ></body> </Action>
<Action id="34635" issue="20565" author="ashcherbakov" type="comment" created="2017-11-15 08:07:31.0" updateauthor="ashcherbakov" updated="2017-11-16 12:58:52.0"> <body><! CDATA  ~mgbailey   - If we send POOL_UPGRADE with force=true, then there is a chance that NODE_UPGRADE with IN_PROGRESS action will not be written to the ledger since all nodes in the pool are restarted at the same time, and the txn is getting lost and we have no consensus. - After Node is restarted, it checked whether we had 1) START action in Upgrade log and 2) NODE_UPGRADE with IN_PROGRESS action. If so, it sent Upgrade SUCCEESS or FAIL (depending on whether the current version equals to the expected one). - In the situation with forced POOL_UPGRADE we didn't have IN_PROGRESS txn, so SUCCESS/FAIL NODE_UPGRADE txns may be not sent and written to the ledger - It look like it's sufficient to check START action in Upgrade log only. If we have it, we send NODE_UPGRADE.   ></body> </Action>
<Action id="34662" issue="20565" author="ashcherbakov" type="comment" body="PR: https://github.com/hyperledger/indy-node/pull/452" created="2017-11-16 13:00:28.0" updateauthor="ashcherbakov" updated="2017-11-16 13:00:28.0"/>
<Action id="34720" issue="20565" author="ashcherbakov" type="comment" body="Build: 1.2.213" created="2017-11-17 14:49:26.0" updateauthor="ashcherbakov" updated="2017-11-17 14:49:26.0"/>
<Action id="35769" issue="20565" author="ozheregelya" type="comment" created="2017-12-04 11:35:39.0" updateauthor="ozheregelya" updated="2017-12-04 11:35:39.0"> <body><! CDATA Version Info: indy-node 1.2.50 (RC)  Steps to Validate: # Perform successful force upgrade with the same date for all nodes. # Run read_ledger --type config command, check that all actions are written. # Perform force upgrade with some failed nodes. # Run read_ledger --type config command, check that all actions are written. # Perform not force upgrade. # Run read_ledger --type config command, check that all actions are written and that nothing were broken.  Actual Results:  All actions are written, upgrade work without any issues.  ></body> </Action>
