<Issue id="40973" key="INDY-2168" number="2168" project="10303" reporter="esplinr" creator="esplinr" type="10002" summary="GitLab CI Research" priority="3" resolution="10000" status="10001" created="2019-07-10 13:27:31.0" updated="2020-02-12 14:44:47.0" resolutiondate="2019-08-14 13:45:56.0" votes="0" watches="4" workflowId="53941"> <description><! CDATA *Acceptance Criteria* * Learn about GitLab CI * Evaluate efforts to move Indy SDK from Jenkins to GitLab * Estimate effort of moving Indy Node from Jenkins to GitLab CI  *Current version of GitLab CI/CD*: 12.1  *The things to check* (requirements for the CI server, filling is in progress): +CI+ ||Requirement||Supported||Notes|| |build PRs (from forks / branches) on a merged result|{color:#de350b}no{color}|see  comment|https://jira.hyperledger.org/browse/INDY-2168?focusedCommentId=62504&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-62504 | |pass build statuses back to GitHub|{color:#de350b}no {color}|see  comment|https://jira.hyperledger.org/browse/INDY-2168?focusedCommentId=62504&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-62504 | |do not use pipeline changes in PRs from untrusted authors (non-maintainers)|{color:#de350b}no {color}|see  link|https://docs.gitlab.com/12.1/ce/ci/merge_request_pipelines/index.html#important-notes-about-merge-requests-from-forked-projects  where they mention that it's not possible (in 12.1)| |ability to run jobs in parallel and sequentially|yes| link|https://docs.gitlab.com/12.1/ce/ci/yaml/README.html#stages | |(SDK) Ability to share artifacts between jobs|yes| link1|https://docs.gitlab.com/12.1/ce/ci/caching/index.html#cache-vs-artifacts ,  link2|https://docs.gitlab.com/ee/ci/yaml/README.html#dependencies  | |support dockers|yes| link|https://docs.gitlab.com/12.1/runner/executors/docker.html  | |(SDK) support linked jobs running on multiple runners in scope of one pipeline (services)|{color:#de350b}seems no{color} |as far as i understand  services|https://docs.gitlab.com/ee/ci/yaml/README.html#services  are run on the same runner only, but  the kubernetes executor|https://docs.gitlab.com/12.1/runner/executors/kubernetes.html  should be checked as an option| |(nice to have) support (parse and display in UI) junit-xml style test reports|yes | link1|https://docs.gitlab.com/12.1/ce/ci/yaml/README.html#artifactsreportsjunit ,  link2|https://docs.gitlab.com/12.1/ce/ci/junit_test_reports.html  |  +CD+ ||Requirement|| ||Supported||Notes|| |Keep secrets safe| | | | | |run CD pipelines only on trusted runners|{color:#de350b}seems no{color}| supported|https://docs.gitlab.com/12.1/ce/ci/pipelines.html#security-on-protected-branches  only for GitLab repositories protected branches, no support for GitHub | | |do not run any non-CD pipelines where CD ones are run OR provide strong env isolation|{color:#de350b}no {color}|even for GitLab repositories there is no way to protect pipeline against changes from untrusted PRs (mentioned above)| | |ability to mask secret values in logs|yes | link|https://docs.gitlab.com/12.1/ce/ci/variables/README.html#masked-variables  | |support the following secret types:| | | | | |secret text (token)|yes| link|https://docs.gitlab.com/12.1/ce/ci/variables/README.html#variable-types  | | |username / password pars|yes|as two variables| | |secret files|yes | link|https://docs.gitlab.com/12.1/ce/ci/variables/README.html#variable-types  | | |ssh keys|yes|as one secret file  link|https://docs.gitlab.com/12.1/ce/ci/ssh_keys/README.html  | | |(nice to have) ssh keys with passphrases|no |only variables and files are  supported|https://docs.gitlab.com/12.1/ce/ci/variables/README.html#variable-types | |  ></description> </Issue>
