<Action id="29105" issue="19297" author="mzk-vct" type="comment" created="2017-07-27 15:51:15.0" updateauthor="mzk-vct" updated="2017-07-27 15:51:15.0"> <body><! CDATA  ~danielhardman  Am I right that the purpose of this is to make all dependencies to be installed from sovrin repos even if they are also available from other repos? I have some concerns: # I suspect that changing priority of repos in hooks can confuse node admin or cause some problems. # Post install script starts after installation is complete and dependencies installed. But even if we use preinstall script instead I cannot guarantee that it will be executed before installation of dependencies since package can be installed in a multiple ways.  I made a short research, but found no clear answer. # What should we do if some dependencies are already installed from base ubuntu repos?  What if we explicitly guide node admin to change repo priority instead? We can provide shell script to simplify this process.     ></body> </Action>
<Action id="29222" issue="19297" author="danielhardman" type="comment" created="2017-07-31 11:51:18.0" updateauthor="danielhardman" updated="2017-07-31 11:51:18.0"> <body><! CDATA No, we don't want all dependencies to install from sovrin repos. For example, i want ujson and similar modules that we have nothing to do with, to install latest stable from the distro. However, we *do* want indy-node and indy-plenum to install from sovrin repos, even if at some future date they are also available in the main distro repos. If we don't do this, hyperledger indy could release an update to indy that sovrin is unprepared to accept, and sovrin's network would be destabilized.  Note that I am requesting this change to priority of repos to be made by *Sovrin*'s deb file, not indy-node's. If people are going to run Sovrin, then they need to use the version of indy-node that the Sovrin pool is pegged to. If they want to run raw indy-node, they can run whatever version they like.  ></body> </Action>
<Action id="29285" issue="19297" author="mzk-vct" type="comment" created="2017-08-01 11:19:43.0" updateauthor="mzk-vct" updated="2017-08-01 11:19:43.0"> <body><! CDATA  ~danielhardman   My main concern is whether it should be done automatically in process of installation. In an  installation guide (page 6)|https://drive.google.com/drive/u/0/folders/0B4efUY1IocYwUERNNW5sekNTMUU  we ask node admin to manually put sovrin repos on the apt repo list. Can we just tell him to put them with specific repo priority?  ></body> </Action>
<Action id="29297" issue="19297" author="danielhardman" type="comment" created="2017-08-01 14:00:43.0" updateauthor="danielhardman" updated="2017-08-01 14:00:43.0"> <body><! CDATA I don't understand why it's hard or difficult to automate this. Can you provide some additional details?  I am under the impression that placing the sovrin repo at the top of /etc/apt/sources.lst will not work; that will cause apt to find sovrin's repo version first, but it will still find other versions as well, and pick the latest. The only way we can do this is to update /etc/apt/preferences and placing a high priority on sovrin's repo. Thus, we would be asking an admin to make two edits instead of one. It can be done, but it seems more cumbersome than just automating that.  Perhaps there are good reasons why automating it is a bad idea?  ></body> </Action>
<Action id="29303" issue="19297" author="mzk-vct" type="comment" created="2017-08-01 14:47:21.0" updateauthor="mzk-vct" updated="2017-08-01 14:47:21.0"> <body><! CDATA *>Can you provide some additional details?* # As you said we want indy-node and indy-plenum to install from sovrin repos, even if at some future date they are also available in the main distro repos. But if we are going to change priority in deb pre/post install hooks we cannot guarantee that at the moment when admin installs them *first time* they will be installed from sovrin repos. # I found no clear explanation when exactly preinstall script runs - before or after downloading of dependencies. Looks like the only way to know it for sure is to make an experiment.  *>Perhaps there are good reasons why automating it is a bad idea?* *>Thus, we would be asking an admin to make two edits instead of one.* Automating is not a bad idea, but I'd not recommend to manipulate repos priority in deb pre/post install hook. Admin should be aware that such change is going to be done and should be able to do it manually, considering all specific fetures of his system. Instead I propose automating installation preparations.   Yes, it requires one more edit, but we can automate this. Moreover, we can automate some other steps, like adding keys, repos and calling apt install.           ></body> </Action>
<Action id="29368" issue="19297" author="danielhardman" type="comment" body="I defer to  ~nage &apos;s judgment." created="2017-08-02 18:59:52.0" updateauthor="danielhardman" updated="2017-08-02 18:59:52.0"/>
<Action id="65511" issue="19297" author="esplinr" type="comment" created="2019-11-13 14:46:11.0" updateauthor="esplinr" updated="2019-11-13 14:46:11.0"> <body><! CDATA We are in the process of updating Indy Node from Ubuntu 16.04 to Ubuntu 18.04, and regret having dependencies on so many packages that conflict with the new repos. We want to minimize that practice going forward, so we don't expect many overlaps between Sovrin repos and the standard repos. For now, situations where we are concerned about pulling a package from a specific repository are addressed by careful explicit pinning.  If we decide that changing repo prioritization is required to meet a specific objective, we will reconsider this decision. It might be preferable to add it to the steward instructions instead of automating it in an install script so that system administrators are not surprised.  ></body> </Action>
