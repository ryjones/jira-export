<Issue id="33873" key="IS-978" number="978" project="10401" reporter="burdettadam" creator="burdettadam" type="10004" summary="Linker issue: Providing custom LD_LIBRARY_PATH doesn&apos;t work" priority="3" status="3" created="2018-09-18 17:34:50.0" updated="2020-06-23 16:39:59.0" votes="1" watches="5" workflowId="51743"> <description><! CDATA Hi, I want to play with the SDK but I got stuck.  I've installed xcode, and compiled {noformat} libindy{noformat} following these instructions  https://github.com/hyperledger/indy-sdk/blob/master/doc/mac-build.md . After I compile libindy in step 5, finishing with following output {noformat} Compiling rust-base58 v0.0.4 Finished dev  unoptimized + debuginfo  target(s) in 11m 12s{noformat} The artefacts are built in {noformat} target{noformat} subdirectory {noformat} ~/dev/hyperledger/indy-sdk/libindy/target/debug (master):ls -l total 1008368 drwxr-xr-x   32 patrikstas  staff       1024 Aug 18 18:16 build drwxr-xr-x  227 patrikstas  staff       7264 Aug 18 18:20 deps drwxr-xr-x    2 patrikstas  staff         64 Aug 18 18:16 examples drwxr-xr-x    4 patrikstas  staff        128 Aug 18 18:19 incremental -rw-r--r--    2 patrikstas  staff  118999112 Aug 18 18:20 libindy.a -rw-r--r--    1 patrikstas  staff      11594 Aug 18 18:20 libindy.d -rwxr-xr-x    2 patrikstas  staff   41140664 Aug 18 18:20 libindy.dylib -rw-r--r--    2 patrikstas  staff   97980520 Aug 18 18:20 libindy.rlib drwxr-xr-x    2 patrikstas  staff         64 Aug 18 18:16 native{noformat} So after having libindy library ready according to the step 5, I am trying to install indy-sdk NPM package. As the artefact is not stored in {noformat} /usr/lib/local{noformat} or so, I am explicitly specifying path to this directory the way it's specified on NPM page, by setting {noformat} LD_LIBRARY_PATH{noformat} pointing to directory containing compiled libindy libraries. {noformat} ~/dev/hyperledger/indy-test:LD_LIBRARY_PATH="/Users/patrikstas/dev/hyperledger/indy-sdk/libindy/target/debug" npm install --save indy-sdk  > indy-sdk@1.6.1 install /Users/patrikstas/dev/hyperledger/indy-test/node_modules/indy-sdk > node-gyp rebuild  CXX(target) Release/obj.target/indynodejs/src/indy.o ./Release/.deps/Release/obj.target/indynodejs/src/indy.o.d.raw Stats { dev: 16777220, mode: 33188, nlink: 1, uid: 501, gid: 20, rdev: 0, blksize: 4194304, ino: 8596009699, size: 2597, blocks: 8, atimeMs: 1534597700000, mtimeMs: 1534597700000, ctimeMs: 1534597700087.317, birthtimeMs: 1534597699905.6628, atime: 2018-08-18T13:08:20.000Z, mtime: 2018-08-18T13:08:20.000Z, ctime: 2018-08-18T13:08:20.087Z, birthtime: 2018-08-18T13:08:19.906Z } SOLINK_MODULE(target) Release/indynodejs.node ld: library not found for -lindy clang: error: linker command failed with exit code 1 (use -v to see invocation) make: ***  Release/indynodejs.node  Error 1 gyp ERR! build error gyp ERR! stack Error: `make` failed with exit code: 2 gyp ERR! stack     at ChildProcess.onExit (/Users/patrikstas/.config/yarn/global/node_modules/npm/node_modules/node-gyp/lib/build.js:258:23) gyp ERR! stack     at emitTwo (events.js:126:13) gyp ERR! stack     at ChildProcess.emit (events.js:214:7) gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:198:12) gyp ERR! System Darwin 17.6.0 gyp ERR! command "/Users/patrikstas/.nvm/versions/node/v8.11.3/bin/node" "/Users/patrikstas/.config/yarn/global/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "rebuild" gyp ERR! cwd /Users/patrikstas/dev/hyperledger/indy-test/node_modules/indy-sdk gyp ERR! node -v v8.11.3 gyp ERR! node-gyp -v v3.6.2 gyp ERR! not ok npm WARN indy-test@1.0.0 No description npm WARN indy-test@1.0.0 No repository field.  npm ERR! code ELIFECYCLE npm ERR! errno 1 npm ERR! indy-sdk@1.6.1 install: `node-gyp rebuild` npm ERR! Exit status 1 npm ERR! npm ERR! Failed at the indy-sdk@1.6.1 install script. npm ERR! This is probably not a problem with npm. There is likely additional logging output above.  npm ERR! A complete log of this run can be found in: npm ERR!     /Users/patrikstas/.npm/_logs/2018-08-18T13_08_20_536Z-debug.log{noformat} The strange thing is that it's actually looking for something called `lindy`, not `libindy`, or is it? Out of curiosity, I've tried to rename all those libindy.*** files in target directory respectively to `lindy.***`, but without much success.  Am I doing something wrong, or is there a problem with the package? Thanks in advance!   Edit: Well, I see now that `-lindy` is specified for node-gyp config here  https://github.com/hyperledger/indy-sdk/blob/master/wrappers/nodejs/binding.gypWhat's  `lindy` then?  ></description> </Issue>
