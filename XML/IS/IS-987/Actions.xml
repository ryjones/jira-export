<Action id="50709" issue="33882" author="burdettadam" type="comment" created="2018-09-19 17:07:12.0" updateauthor="burdettadam" updated="2018-09-19 17:07:12.0"> <body><! CDATA h3. * Alexis-Falquier|https://github.com/Alexis-Falquier * commented  on Jul 25|https://github.com/hyperledger/indy-sdk/issues/977#issuecomment-407819589  |I am having the same error when trying to do the 'Write a DID and Query Its Verkey' tutorial. at step 2 "open ledger and get handle" I get {{_indy_loop_callback: Function returned error 308 Error occurred: ErrorCode.PoolIncompatibleProtocolVersion}} I followed all the steps to set up the environment so I do not know what could be causing this EDIT: Tomislav solved my issue in the rocketchat two step solution: add this line to the script: {{await pool.set_protocol_version(2)}} This solved the incompatibleProtocol error but I then had an issue where my script couldn't connect to the nodes, make sure the genesis file is looking at the correct ip (i.e. if you have your nodes running on 127.0.0.1 like I then changed the genesis file appropriately)|  ></body> </Action>
<Action id="50710" issue="33882" author="burdettadam" type="comment" created="2018-09-19 17:07:30.0" updateauthor="burdettadam" updated="2018-09-19 17:07:30.0"> <body><! CDATA h3. * nbxtruong|https://github.com/nbxtruong * commented  on Jul 26|https://github.com/hyperledger/indy-sdk/issues/977#issuecomment-408300952  |Thank you  @Alexis-Falquier|https://github.com/Alexis-Falquier  I add this line to the script: await pool.set_protocol_version(2) and use: npm i  indy-sdk@1.5.0-beta|mailto:indy-sdk@1.5.0-beta  indy-pool version 1.3 But I have this error: UnhandledPromiseRejectionWarning: TypeError: indy.set_protocol_version is not a function|  ></body> </Action>
<Action id="50711" issue="33882" author="burdettadam" type="comment" created="2018-09-19 17:07:50.0" updateauthor="burdettadam" updated="2018-09-19 17:07:50.0"> <body><! CDATA h3. * Alexis-Falquier|https://github.com/Alexis-Falquier * commented  on Jul 27|https://github.com/hyperledger/indy-sdk/issues/977#issuecomment-408468813  |I am not sure, it seems you might be using varying / older versions of the sdk / pool which would explain why it says it is not a function, as it might have been added in a newer verison. libindy i believe is in version 1.4 maybe try re-installing everything and building sdk from source to make sure you have the most up to date version of everything.|  ></body> </Action>
<Action id="50712" issue="33882" author="burdettadam" type="comment" created="2018-09-19 17:08:37.0" updateauthor="burdettadam" updated="2018-09-19 17:08:37.0"> <body><! CDATA h3. * benjsmi|https://github.com/benjsmi * commented  on Aug 6|https://github.com/hyperledger/indy-sdk/issues/977#issuecomment-410817107   |I'm seeing this same error. I load the SDK in as a Node object and print out its methods using the {{node}} interpreter from the prompt: {{> const indy = require('indy-sdk'); undefined > indy \{ capi: { issuerCreateSchema:  Function , issuerCreateAndStoreCredentialDef:  Function , issuerCreateAndStoreRevocReg:  Function , issuerCreateCredentialOffer:  Function , issuerCreateCredential:  Function , issuerRevokeCredential:  Function , issuerMergeRevocationRegistryDeltas:  Function , proverCreateMasterSecret:  Function , proverCreateCredentialReq:  Function , proverStoreCredential:  Function , proverGetCredentials:  Function , proverGetCredentialsForProofReq:  Function , proverCreateProof:  Function , verifierVerifyProof:  Function , createRevocationState:  Function , updateRevocationState:  Function , openBlobStorageReader:  Function , openBlobStorageWriter:  Function , createKey:  Function , setKeyMetadata:  Function , getKeyMetadata:  Function , cryptoSign:  Function , cryptoVerify:  Function , cryptoAuthCrypt:  Function , cryptoAuthDecrypt:  Function , cryptoAnonCrypt:  Function , cryptoAnonDecrypt:  Function , createAndStoreMyDid:  Function , replaceKeysStart:  Function , replaceKeysApply:  Function , storeTheirDid:  Function , keyForDid:  Function , keyForLocalDid:  Function , setEndpointForDid:  Function , getEndpointForDid:  Function , setDidMetadata:  Function , getDidMetadata:  Function , getMyDidWithMeta:  Function , listMyDidsWithMeta:  Function , abbreviateVerkey:  Function , signAndSubmitRequest:  Function , submitRequest:  Function , signRequest:  Function , buildGetDdoRequest:  Function , buildNymRequest:  Function , buildAttribRequest:  Function , buildGetAttribRequest:  Function , buildGetNymRequest:  Function , buildSchemaRequest:  Function , buildGetSchemaRequest:  Function , parseGetSchemaResponse:  Function , buildCredDefRequest:  Function , buildGetCredDefRequest:  Function , parseGetCredDefResponse:  Function , buildNodeRequest:  Function , buildGetTxnRequest:  Function , buildPoolConfigRequest:  Function , buildPoolRestartRequest:  Function , buildPoolUpgradeRequest:  Function , buildRevocRegDefRequest:  Function , buildGetRevocRegDefRequest:  Function , parseGetRevocRegDefResponse:  Function , buildRevocRegEntryRequest:  Function , buildGetRevocRegRequest:  Function , parseGetRevocRegResponse:  Function , buildGetRevocRegDeltaRequest:  Function , parseGetRevocRegDeltaResponse:  Function , isPairwiseExists:  Function , createPairwise:  Function , listPairwise:  Function , getPairwise:  Function , setPairwiseMetadata:  Function , createPoolLedgerConfig:  Function , openPoolLedger:  Function , refreshPoolLedger:  Function , listPools:  Function , closePoolLedger:  Function , deletePoolLedgerConfig:  Function , createWallet:  Function , openWallet:  Function , listWallets:  Function , closeWallet:  Function , deleteWallet:  Function , path: '/home/node/node_modules/indy-sdk/build/Release/indynodejs.node' }, issuerCreateSchema:  Function: issuerCreateSchema , issuerCreateAndStoreCredentialDef:  Function: issuerCreateAndStoreCredentialDef , issuerCreateAndStoreRevocReg:  Function: issuerCreateAndStoreRevocReg , issuerCreateCredentialOffer:  Function: issuerCreateCredentialOffer , issuerCreateCredential:  Function: issuerCreateCredential , issuerRevokeCredential:  Function: issuerRevokeCredential , issuerMergeRevocationRegistryDeltas:  Function: issuerMergeRevocationRegistryDeltas , proverCreateMasterSecret:  Function: proverCreateMasterSecret , proverCreateCredentialReq:  Function: proverCreateCredentialReq , proverStoreCredential:  Function: proverStoreCredential , proverGetCredentials:  Function: proverGetCredentials , proverGetCredentialsForProofReq:  Function: proverGetCredentialsForProofReq , proverCreateProof:  Function: proverCreateProof , verifierVerifyProof:  Function: verifierVerifyProof , createRevocationState:  Function: createRevocationState , updateRevocationState:  Function: updateRevocationState , openBlobStorageReader:  Function: openBlobStorageReader , openBlobStorageWriter:  Function: openBlobStorageWriter , createKey:  Function: createKey , setKeyMetadata:  Function: setKeyMetadata , getKeyMetadata:  Function: getKeyMetadata , cryptoSign:  Function: cryptoSign , cryptoVerify:  Function: cryptoVerify , cryptoAuthCrypt:  Function: cryptoAuthCrypt , cryptoAuthDecrypt:  Function: cryptoAuthDecrypt , cryptoAnonCrypt:  Function: cryptoAnonCrypt , cryptoAnonDecrypt:  Function: cryptoAnonDecrypt , createAndStoreMyDid:  Function: createAndStoreMyDid , replaceKeysStart:  Function: replaceKeysStart , replaceKeysApply:  Function: replaceKeysApply , storeTheirDid:  Function: storeTheirDid , keyForDid:  Function: keyForDid , keyForLocalDid:  Function: keyForLocalDid , setEndpointForDid:  Function: setEndpointForDid , getEndpointForDid:  Function: getEndpointForDid , setDidMetadata:  Function: setDidMetadata , getDidMetadata:  Function: getDidMetadata , getMyDidWithMeta:  Function: getMyDidWithMeta , listMyDidsWithMeta:  Function: listMyDidsWithMeta , abbreviateVerkey:  Function: abbreviateVerkey , signAndSubmitRequest:  Function: signAndSubmitRequest , submitRequest:  Function: submitRequest , signRequest:  Function: signRequest , buildGetDdoRequest:  Function: buildGetDdoRequest , buildNymRequest:  Function: buildNymRequest , buildAttribRequest:  Function: buildAttribRequest , buildGetAttribRequest:  Function: buildGetAttribRequest , buildGetNymRequest:  Function: buildGetNymRequest , buildSchemaRequest:  Function: buildSchemaRequest , buildGetSchemaRequest:  Function: buildGetSchemaRequest , parseGetSchemaResponse:  Function: parseGetSchemaResponse , buildCredDefRequest:  Function: buildCredDefRequest , buildGetCredDefRequest:  Function: buildGetCredDefRequest , parseGetCredDefResponse:  Function: parseGetCredDefResponse , buildNodeRequest:  Function: buildNodeRequest , buildGetTxnRequest:  Function: buildGetTxnRequest , buildPoolConfigRequest:  Function: buildPoolConfigRequest , buildPoolRestartRequest:  Function: buildPoolRestartRequest , buildPoolUpgradeRequest:  Function: buildPoolUpgradeRequest , buildRevocRegDefRequest:  Function: buildRevocRegDefRequest , buildGetRevocRegDefRequest:  Function: buildGetRevocRegDefRequest , parseGetRevocRegDefResponse:  Function: parseGetRevocRegDefResponse , buildRevocRegEntryRequest:  Function: buildRevocRegEntryRequest , buildGetRevocRegRequest:  Function: buildGetRevocRegRequest , parseGetRevocRegResponse:  Function: parseGetRevocRegResponse , buildGetRevocRegDeltaRequest:  Function: buildGetRevocRegDeltaRequest , parseGetRevocRegDeltaResponse:  Function: parseGetRevocRegDeltaResponse , isPairwiseExists:  Function: isPairwiseExists , createPairwise:  Function: createPairwise , listPairwise:  Function: listPairwise , getPairwise:  Function: getPairwise , setPairwiseMetadata:  Function: setPairwiseMetadata , createPoolLedgerConfig:  Function: createPoolLedgerConfig , openPoolLedger:  Function: openPoolLedger , refreshPoolLedger:  Function: refreshPoolLedger , listPools:  Function: listPools , closePoolLedger:  Function: closePoolLedger , deletePoolLedgerConfig:  Function: deletePoolLedgerConfig , createWallet:  Function: createWallet , openWallet:  Function: openWallet , listWallets:  Function: listWallets , closeWallet:  Function: closeWallet , deleteWallet:  Function: deleteWallet  }}} Everything is there except {{set_protocol_version}}. Odd. My libindy package is version 1.6.1: {{libindy: Installed: 1.6.1 Candidate: 1.6.1 Version table: *** 1.6.1 500 500 https://repo.sovrin.org/sdk/deb xenial/stable amd64 Packages 100 /var/lib/dpkg/status 1.6.0 500 500 https://repo.sovrin.org/sdk/deb xenial/stable amd64 Packages 1.5.0 500 500 https://repo.sovrin.org/sdk/deb xenial/stable amd64 Packages 1.4.0 500 500 https://repo.sovrin.org/sdk/deb xenial/stable amd64 Packages 1.3.0 500 500 https://repo.sovrin.org/sdk/deb xenial/stable amd64 Packages 1.2.0 500 500 https://repo.sovrin.org/sdk/deb xenial/stable amd64 Packages 1.1.0 500 500 https://repo.sovrin.org/sdk/deb xenial/stable amd64 Packages}}|  ></body> </Action>
<Action id="50713" issue="33882" author="burdettadam" type="comment" created="2018-09-19 17:08:52.0" updateauthor="burdettadam" updated="2018-09-19 17:08:52.0"> <body><! CDATA h3. * benjsmi|https://github.com/benjsmi * commented  on Aug 6|https://github.com/hyperledger/indy-sdk/issues/977#issuecomment-410821064  |Ah, in my case, npm was stuck on installing {{indy-sdk}} package at {{0.2.5}}. If I were you, I'd check to see if {{npm install --save indy-sdk@1.6.1-beta}} does the trick. Or specify it in your package.json. The strange thing is that npmjs.com does show that 1.6.1-beta is the latest release and the default release. Not sure why I ended up with 0.2.5.|  ></body> </Action>
<Action id="50714" issue="33882" author="burdettadam" type="comment" created="2018-09-19 17:09:16.0" updateauthor="burdettadam" updated="2018-09-19 17:09:16.0"> <body><! CDATA h3. * benjsmi|https://github.com/benjsmi * commented  on Aug 6|https://github.com/hyperledger/indy-sdk/issues/977#issuecomment-410822880   |{quote}A pre-release version MAY be denoted by appending a hyphen and a series of dot separated identifiers immediately following the patch version. Identifiers MUST comprise only ASCII alphanumerics and hyphen  0-9A-Za-z- . Identifiers MUST NOT be empty. Numeric identifiers MUST NOT include leading zeroes. Pre-release versions have a lower precedence than the associated normal version. A pre-release version indicates that the version is unstable and might not satisfy the intended compatibility requirements as denoted by its associated normal version. Examples: 1.0.0-alpha, 1.0.0-alpha.1, 1.0.0-0.3.7, 1.0.0-x.7.z.92.{quote} Indy folks who can maintain NPM package listing: note that because you stuck {{-beta}} on the end of the version, this is _not_ the default version that will be installed when folks do {{npm i indy-sdk}}! I know it's still a beta, but this whole thread/issue exists because people wanted to use a function that's not there in 0.2.5 that wasn't added until 1.5.0 or so and they just installed the default version like I did.|  ></body> </Action>
<Action id="68896" issue="33882" author="JIRAUSER20027" type="comment" created="2020-04-21 09:12:26.0" updateauthor="JIRAUSER20027" updated="2020-04-21 09:12:26.0"> <body><! CDATA I am having the same error now *PoolIncompatibleProtocolVersionException:* _The pool genesis transactions are not compatible with protocol version._ I have tried implementing the above solution but since i am a newbie here I didnt understand:   add this line to the script: {{await pool.set_protocol_version(2)}}  Which script are we referring to ?  Thanks!  ></body> </Action>
