<Action id="59989" issue="39149" author="izashkalov" type="comment" created="2019-05-14 07:56:40.0" updateauthor="izashkalov" updated="2019-05-14 08:05:00.0"> <body><! CDATA After installing ROOT rights on the emulator. I changed the write permissions in the root directory for all subfolders the emulator directories.  "chmod -R 777 /"  I was able to get  "revRegInfo" without IO exception from *Anoncreds.issuerCreateAndStoreRevocReg*.  ></body> </Action>
<Action id="59990" issue="39149" author="sergeybrazhnik" type="comment" created="2019-05-14 08:00:05.0" updateauthor="sergeybrazhnik" updated="2019-05-14 08:00:05.0"> <body><! CDATA    It seems to me that I have found a trouble place.   The .recursive(true) for android throws the PermissionExceptions  For Android you provides system API calls getCacheDir() or getFilesDir() which returns full path to application folder like  */storage/emulated/0/Android/data/com.package.name/files/*  Application has no rights to create all this chain of folders.  Possible solution is to exclude .recursive(true) for Android    {code:java} impl Writer for DefaultWriterConfig { fn create(&self, id: i32) -> IndyResult<Box<WritableBlob>> { let path = PathBuf::from(&self.base_dir);  fs::DirBuilder::new() .recursive(true) // need to be excluded for Android .create(tmp_storage_file(id).parent().unwrap())?;  let file = File::create(tmp_storage_file(id)) .map_err(map_err_trace!())?;  Ok(Box::new(DefaultWriter { base_dir: path, uri_pattern: self.uri_pattern.clone(), file, id, })) } } {code}    ></body> </Action>
<Action id="60050" issue="39149" author="sergey.minaev" type="comment" created="2019-05-16 11:01:30.0" updateauthor="sergey.minaev" updated="2019-05-16 11:01:30.0"> <body><! CDATA  ~SergeyBrazhnik   ~izashkalov  1) could you share libindy logs with TRACE level?   2) I'm in doubt is it really problem with recursive creation of directories or with smth else. IMO it should be smth different as recursive dir builder is largely used in codebase in different modules (wallet, pool, etc)  Also it may be helpful to extend trace in create of default writer config to {code:java} fs::DirBuilder::new() .recursive(true) .create(tmp_storage_file(id).parent().unwrap()) .map_err(map_err_trace!())?;{code} and rebuild of libindy.  3) Several months ago we faced with problem of permissions on Android and there was a problem with copying file while opening pool. It was resolved in  https://github.com/hyperledger/indy-sdk/commit/8bbf38918abd5f8346a619bef1d0b1419e5ec98c  And I can see the same potential problem in finalize of default writer   https://github.com/hyperledger/indy-sdk/blob/master/libindy/src/services/blob_storage/default_writer.rs#L85   ></body> </Action>
<Action id="60051" issue="39149" author="izashkalov" type="comment" created="2019-05-16 11:12:20.0" updateauthor="izashkalov" updated="2019-05-16 11:18:11.0"> <body><! CDATA  ~sergey.minaev   1) I attached file android-log.txt, can you check its?   ></body> </Action>
<Action id="60053" issue="39149" author="sergey.minaev" type="comment" body=" ~izashkalov  attached file contains only INFO logs, but I&apos;m asking for TRACE level" created="2019-05-16 11:41:14.0" updateauthor="sergey.minaev" updated="2019-05-16 11:41:14.0"/>
<Action id="60057" issue="39149" author="izashkalov" type="comment" created="2019-05-16 12:11:47.0" updateauthor="izashkalov" updated="2019-05-16 12:11:47.0"> <body><! CDATA  ~sergey.minaev  How I can receive need logs? Now I use the next code {code}  LibIndy.api.indy_set_default_logger("trace"); {code}  ></body> </Action>
<Action id="60070" issue="39149" author="sergey.minaev" type="comment" created="2019-05-16 14:57:57.0" updateauthor="sergey.minaev" updated="2019-05-16 14:57:57.0"> <body><! CDATA  ~izashkalov  it should be enough if other layers (app config, ide settings or adb) will not filter out the trace. Fill free to chat me at  https://chat.hyperledger.org/direct/sergey.minaev  about logging for more details  ></body> </Action>
<Action id="60638" issue="39149" author="sergey.minaev" type="comment" created="2019-06-04 08:33:52.0" updateauthor="sergey.minaev" updated="2019-06-04 08:34:51.0"> <body><! CDATA After discussion and debugging we have confirmed the reason of fault: Recursive creation of folder for Default Tails Writer in system-wide temporary directory may fail in some setup due to permissions. BTW no changes in codebase expected as temporary directory can be defined for the process by TMPDIR env variable to specific for application path.  To resolve this ticket I suggest to document this nuance in appropriate API functions.  ></body> </Action>
<Action id="62031" issue="39149" author="artemkaaas" type="comment" body="Added `Note` to function: https://github.com/hyperledger/indy-sdk/pull/1757" created="2019-07-23 08:19:26.0" updateauthor="artemkaaas" updated="2019-07-23 08:19:26.0"/>
