<Issue id="32249" key="IS-841" number="841" project="10401" reporter="dominic" assignee="ryanmarsh" creator="dominic" type="10006" summary="Libindy should check restrictions on requested predicates during validation of proof" priority="2" resolution="10000" status="10001" created="2018-07-26 20:00:03.0" updated="2019-10-29 18:29:54.0" resolutiondate="2019-05-30 10:31:10.0" votes="0" watches="5" workflowId="50662"> <environment><! CDATA Ubuntu 16.04 Python 3.6.6 Pip 10.0.1 Libindy 1.5.0  ></environment> <description><! CDATA Restrictions set on requested_predicates during proof validation have no effect. I have tested the following restrictions, and neither worked: * issuer_did * cred_def_id  *Tested with the python 3.6 wrapper*  Based on  this comment in the source code|https://github.com/hyperledger/indy-sdk/blob/2123d8634692edea58f5cf589609762bea18db64/libindy/src/api/anoncreds.rs#L1118 , restrictions on predicates should work.  Example proof request: {code:javascript} { "nonce": "123432421212", "name": "proof_req_1", "version": "0.1", "requested_attributes": { "attr1_referent": {"name": "name"} }, "requested_predicates": { "predicate1_referent": { "name": "age",  "p_type": ">=",  "p_value": 18,  "restrictions":  {"issuer_did": "a"}  } } } {code} Despite there being no issuer with a did of "a", the prover will use an attribute that has been signed by another DID to fulfill the predicate. The verifier accepts this proof even though it shouldn't.  _I've attached a sample Python3.6 file that runs through an example of restrictions failing. Assuming you have the python wrapper installed, you should be able to just run it by typing python3.6 <filename.py>_  ></description> </Issue>
