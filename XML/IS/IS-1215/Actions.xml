<Action id="58043" issue="38321" author="sergey.minaev" type="comment" created="2019-03-11 12:32:10.0" updateauthor="sergey.minaev" updated="2019-03-11 12:32:50.0"> <body><! CDATA  ~ignisvulpis  my feeling (after brief review of codebase) is  In general code works correctly as this particular wallet_handle is smth reserved for new one so can be used for callback to.  But the naming here is not clear enough  Is it correct summary and we have to change names?  ></body> </Action>
<Action id="58061" issue="38321" author="ignisvulpis" type="comment" created="2019-03-11 18:15:24.0" updateauthor="ignisvulpis" updated="2019-03-11 18:15:24.0"> <body><! CDATA The problem is that there is one list of callbacks which is a list indexed with i32. Sometimes, when opening or creating this i32 is a wallet_handle but sometimes when a 'real' callback is created then that i32 is a cb_id (CallbackHandle). Both, wallet_handle and cb_id, are created by sequence:get_next_id. Now to improve readability and type-safety I want to introduce the types WalletHandle and CallbackHandle, which are different and can't be mixed.  So I think that we always should create a new cb_id and pass the parameters of the callbacks as usual even when the parameter for the callback is the wallet_handle which could be used as the cb_id but should not.  ></body> </Action>
