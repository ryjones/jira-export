<Action id="49724" issue="33408" author="sklump" type="comment" created="2018-08-31 18:22:53.0" updateauthor="sklump" updated="2018-08-31 18:22:53.0"> <body><! CDATA If I hot-swap `{{pip install base58==0.2.4}}` underneath the node control tool on the docker container to match the dependency in indy-plenum, the migration script `{{1_3_396_to_1_3_397.py}}` chokes with a stack trace ending in  Â   {{``` File "/usr/local/lib/python3.5/dist-packages/plenum/common/messages/fields.py", line 350, in Base58Field _alphabet = set(base58.alphabet.decode("utf-8")) AttributeError: 'str' object has no attribute 'decode' ```}} and I see that  base58.py|http://base58.py/  v0.2.4 had `{{alphabet}}` as a `{{str}}` where v1.0.0 has it as a `{{bytes}}`.  It could be as simple as finding these and using `{{set(base58.alphabet.decode('utf-8') if isinstance(base58.alphabet, bytes) else base58.alphabet}}` instead, then relaxing the requirements to base58>=0.2.4 throughout?  ></body> </Action>
<Action id="49761" issue="33408" author="vladimirwork" type="comment" body=" ~sklump  indy-pool.dockerfile builds pool in one container with 4 processes of indy-node and it&apos;s impossible to perform pool upgrade with this pool since indy-node-control stops indy-node service using systemctl before upgrade and starts it the same way after. If you want to perform pool upgrade you should use this https://github.com/hyperledger/indy-node/tree/master/environment/docker/pool to install fair pool (one node - one docker container, indy-node as system service, not as python process)." created="2018-09-03 07:57:21.0" updateauthor="vladimirwork" updated="2018-09-03 07:57:21.0"/>
<Action id="50936" issue="33408" author="sklump" type="comment" created="2018-09-21 12:12:58.0" updateauthor="sklump" updated="2018-09-21 12:12:58.0"> <body><! CDATA This ticket is kind of an artifact of history now. It might still be interesting to be able to support upgrading the node pool of the indy-pool.dockerfile that indy-sdk includes, but it is not essential, at least for us. For this, it's best to stand up a real indy node pool as Mr. Vladimir Shishkin recommends via indy-node.  It is possible to stand up an indy-node 1.3.62 pool like this:  1: ``` git clone https://github.com/hyperledger/indy-node cd indy-node ``` 2: Apply this diff: ``` --- a/environment/docker/pool/core.ubuntu.dockerfile +++ b/environment/docker/pool/core.ubuntu.dockerfile @@ -17,10 +17,10 @@ RUN pip3 install -U \ setuptools RUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 68DB5E88 RUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys BD33704C -RUN echo "deb https://repo.sovrin.org/deb xenial master" >> /etc/apt/sources.list -RUN echo "deb https://repo.sovrin.org/sdk/deb xenial master" >> /etc/apt/sources.list +RUN echo "deb https://repo.sovrin.org/deb xenial stable" >> /etc/apt/sources.list +RUN echo "deb https://repo.sovrin.org/sdk/deb xenial stable" >> /etc/apt/sources.list RUN useradd -ms /bin/bash -l -u $uid indy -RUN apt-get update -y && apt-get install -y indy-node libindy +RUN apt-get update -y && apt-get install -y python3-base58=0.2.4 indy-plenum=1.2.42 indy-anoncreds=1.0.11 indy-node=1.3.62 python3-indy-crypto=0.4.1 libindy-crypto=0.4.0 libindy RUN pip3 install python3-indy USER indy WORKDIR /home/indy diff --git a/environment/docker/pool/pool_start.sh b/environment/docker/pool/pool_start.sh index 580ed53..140b6f7 100755 --- a/environment/docker/pool/pool_start.sh +++ b/environment/docker/pool/pool_start.sh @@ -26,7 +26,7 @@ IFS="," POOL_DATA=($POOL_DATA)  echo "Creating pool network $POOL_NETWORK_NAME" -SUBNET="${BASE_IP}0/8" +SUBNET="${BASE_IP}0/24" (($(docker network ls -f name="$POOL_NETWORK_NAME" | grep -w "$POOL_NETWORK_NAME" | wc -l))) && docker network rm "$POOL_NETWORK_NAME" docker network create --subnet=$SUBNET "$POOL_NETWORK_NAME" ``` 3: Make sure no docker network is squatting on `10.0.0.0/24` and ``` cd environment/dockerpool/ ./pool_start.sh ```  ></body> </Action>
