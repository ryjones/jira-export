<Action id="46477" issue="31337" author="sergey.minaev" type="comment" created="2018-06-25 09:33:38.0" updateauthor="sergey.minaev" updated="2018-06-25 09:33:38.0"> <body><! CDATA I'm not sure about 204 is the best error code for this scenario. Actually there is no requested DID also in the ledger, not just in the wallet. 204 is correct error code for KeyForLocalDID call. BTW InvalidState is incorrect error here  ></body> </Action>
<Action id="46483" issue="31337" author="sergey.minaev" type="comment" body="After discussion with Slava we decide to return 212 error as temporary solution and add appropriate comment for this case. Probably, ItemNotFound will became common error, not just wallet error." created="2018-06-25 12:20:16.0" updateauthor="sergey.minaev" updated="2018-06-26 08:17:21.0"/>
<Action id="46524" issue="31337" author="sergey.minaev" type="comment" created="2018-06-26 08:14:46.0" updateauthor="sergey.minaev" updated="2018-06-26 08:14:46.0"> <body><! CDATA PR with fix https://github.com/hyperledger/indy-sdk/pull/904 Fix version: master 1.4.0-604 Changes: return WalletItemNotFound (212) instead of InvalidState  ></body> </Action>
<Action id="46593" issue="31337" author="vladimirwork" type="comment" created="2018-06-27 11:24:25.0" updateauthor="vladimirwork" updated="2018-06-27 11:24:25.0"> <body><! CDATA Build Info: indy-node 1.4.470 libindy 1.4.0~605 python3-indy 1.4.0.dev605  Steps to Validate: 1. Create and open pool and wallet. 2. Call `did.key_for_did` for valid DID that doesn't present in wallet and ledger.  Actual Results: {noformat} TRACE|indy::commands::did           |                src/commands/did.rs:545 | _get_nym_ack >>> wallet_handle: 3, get_nym_reply_result: Ok("{\"op\":\"REPLY\",\"result\":{\"data\":null,\"identifier\":\"3fyKjNLV6foqDxoEbBiQhY\",\"type\":\"105\",\"dest\":\"3fyKjNLV6foqDxoEbBiQhY\",\"seqNo\":null,\"state_proof\":{\"multi_signature\":{\"participants\": \"Node4\",\"Node3\",\"Node2\" ,\"signature\":\"R7HLiMwmFh5hzs7jkzvs5JBxcWQThdj17bztKdQj6DRnDdnVzhfdyfpzsvbZHFAVjLkTtbHPhVFaqrqbF11NVsp5sT1ghgyrP5v6YTjod9SR6pS45BaGeD2C4FdupZbqJmGVQWuwJ4aFsHaQP5qrMXdU4ogJ1RgCFRhJgPQUZcApGf\",\"value\":{\"timestamp\":1530027887,\"pool_state_root_hash\":\"H59VbR38tmmnyyDovb65XGB1jGv4Z8e4hbXcwurwDRBb\",\"state_root_hash\":\"GwvsXxrLAYqpg2QmDXe1HeNsJuCRRxgbdRv9dmDZZRW\",\"txn_root_hash\":\"EkAAgte9pyEHpDA1BvuswGqtQxkvxpPs9yjJn5f9QKsc\",\"ledger_id\":1}},\"proof_nodes\":\"+QOo+QGRoFO6njmm+jSFPiYl0J8gDs5rXlyvB0wPnOaSPOE01b8qoCRrkPoJJsDOYhsTcefJRPzhi0c3OsuIXmClRILScKFVoBAQl6iGdT+RPppqALuRsYOrtSSacblYrK1aZiMAZ52voIFjFgU6a1VEXSCR2XpugiQrs564Bd0h\\/pWcUMnRv+eroCaWNdQlDcG7lM6HjGQ1wOduMUFACjnqC3akv8GaDnf8oFbaqDP5cAUDMK7ZHjFXGuBgFgT8TT4I\\/84BvHprERfCoN1y2Tkpgb4xTjhg1nO3i6qA0v5cO0dsoQ9pb9RpFuofgKBLJw5NNJjV4kGenC1nXgkkZ7STyo5A6MxJHI1c3\\/m0G4CAoL8QgC6a78sPnRhjdbUStwqlPP4TOGrPyYC4FAYtN\\/A9oApPgooeo5yhtCSmQrp9oQGH8pBYgf+wP6a2sjj80NAUgKA0p3RBUZRmMZVbLPFNGd+LI8hJA5VChFp2jMScDGZQ\\/6CtyRhicU8eRxNBrbcu5FGqTbLyQnPb4yt8LPhshaxqN4D5AhGgGgcd4St7pk6WFtJsg69pcVywhUyEGR126kWbB1IsYGig9SlSGRa6Pl3VK06PhZoClXn41W5ABvKBmpxMqqVKc+ughCtDNBiluc553NwvRL0K1kC1ebxdgSnzAuL8yyf5aFagmQ3GeunWIQ30zNnjVwJfj0yIdVBFUuPS9pIk1hunGJWgcBfg35txNsnDf7tahYBuN+AIwV+IoSXsPXJYFHwXoEqg33dwNGmFZ3lMyhj5MDYMC6X1c0MJJ79u50re4Um\\/ej2gAHvXydCefa3b2rTi3buOsJ2wiSxEU9kNgy0iIOwBzeCgUln9I5xKMbPvTCMXmbgFWpzDQIujH9gX228nILNZ\\/GGgPOvYc0ZogXQhrGJXNV7NBeVR6bWAmCZ2RQ8LIMZZCfWgGTowPXz2LDS6P46oawD2CDBxrpBG+PusJC+mn\\/2rZH+gopPbRLKuKue8pKcHAalIPPOiNlEO8SuMpDurzD3AGoKgpwuIzEXnHg+iNx4Lu2LCgshZhSlyFfqmhB+RrOuzaXOgqYaKSf4NipD2vSfTxVHLL9GLHkJ5LxNOQaUd9o8SVQ6gy1LcTp6\\/\\/O50dQHgLZSTclozM3Mg8C83vQC3PUyr8K2gIabaqBVdhYFMuXpuivbFPB0L3aJ3zaDOlwelU+O+e2ug4JCABf3E6TGjUKprYg66guL2\\/s7rlYKYfGHe1SeeJI+A\",\"root_hash\":\"GwvsXxrLAYqpg2QmDXe1HeNsJuCRRxgbdRv9dmDZZRW\"},\"reqId\":1530098503143894156,\"txnTime\":null}}") ERROR|indy::errors::indy            |                 src/errors/indy.rs:73  | Casting error to ErrorCode: Item not found TRACE|indy::api::did                |                     src/api/did.rs:300 | indy_key_for_did: key: "" IndyError: ErrorCode.WalletItemNotFound ------------------------------ Captured log call ------------------------------- libindy.py                  72 WARNING  _indy_loop_callback: Function returned error 212 --------------------------- Captured stdout teardown --------------------------- 6: failed Message: ErrorCode.WalletItemNotFound {noformat}   ></body> </Action>
