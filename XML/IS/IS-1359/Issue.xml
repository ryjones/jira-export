<Issue id="41842" key="IS-1359" number="1359" project="10401" reporter="sergey.minaev" assignee="sergey.minaev" creator="sergey.minaev" type="10002" summary="Wallet migration API for full-qualified DID" priority="3" resolution="10000" status="10001" created="2019-08-16 13:02:07.0" updated="2019-09-27 10:20:11.0" resolutiondate="2019-09-16 12:26:34.0" votes="0" watches="2" workflowId="54881"> <description><! CDATA *Story* As an application developer using the Indy wallet, I need a way to modify the prefix of a DID to make a legacy  DID fully qualified, or to do other DID maintenance.  *Acceptance Criteria* * API(s) exists for editing the prefix of a DID ** If the DID has no prefix, we can add a prefix (prepend did:peer or did:sov to a legacy did) ** If the DID has a prefix, we can modify the prefix (migrate did:sov to did:sov-new) * Documentation exists for helping an application developer use this API for migrating their wallet  *Notes* * In addition to modifying a single DID, it would be nice to be able to also modify multiple DIDs (migrate all "did:sov" to "did:sov-new") * We evaluated having a method for migrating the entire wallet from legacy DIDs (missing the network-specific prefix such as did:sov: ), to fully qualified DID's, but the wallet doesn't have the information necessary to distinguish between Indy DIDs and Peer DIDs. So instead, we want to provide the API necessary for the application to manage whatever migration it intends to do. * If we were to migrate the entire wallet, we considered an API like: ** indy_wallet_migrate(wallet_config, credentials, migration_config) - will open the wallet by config and credential, check content version, check current version, apply migration logic (taking into account migration_config), close wallet and return status code ** migration config - optional JSON with optional parameters. For full-qualified DID migration (from None version to 1st version) only one parameter is expected: "default_did_prefix" ** all existing DIDs would be re-placed by full-qualified form with defined by config prefix ** We would also need to version the wallet contents to distinguish between the legacy DIDs and the post-migration fully qualified DIDs.  ></description> </Issue>
