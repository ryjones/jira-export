<Issue id="26304" key="IS-497" number="497" project="10401" reporter="ozheregelya" creator="ozheregelya" type="10004" summary="CLI: did and wallet are still shown in prompt after closing wallet in some cases" priority="4" resolution="10000" status="10001" created="2017-12-28 19:53:06.0" updated="2018-01-24 07:59:59.0" resolutiondate="2018-01-22 20:04:08.0" votes="0" watches="2" workflowId="51199"> <environment><! CDATA indy-node 1.2.251 indy-cli 1.1.1~297  ></environment> <description><! CDATA Case 1:  Steps to Reproduce: 0. Connect to any pool.  1. Open any wallet compatible with this pool, use any did.  2. Close wallet. => used did is still shown in prompt. 3. Create new wallet compatible with this pool. => did is still shown in prompt. 4. Try to send any transaction. => Error message appear: "Submitter DID: "V4SGRU86Z58d6TV7PBUe6f" not found" 5. Run command _did list._  Actual Results: {code:java} pool(p1):did(V4S...e6f):indy> wallet create wwwp1 pool_name=p1 Wallet "wwwp1" has been created pool(p1):did(V4S...e6f):indy> wallet open wwwp1 Wallet "wwwp1" has been opened pool(p1):wallet(wwwp1):did(V4S...e6f):indy> ledger nym did=V4SGRU86Z58d6TV7PBUe61 Submitter DID: "V4SGRU86Z58d6TV7PBUe6f" not found pool(p1):wallet(wwwp1):did(V4S...e6f):indy> did list  There are no dids Current did "V4SGRU86Z58d6TV7PBUe6f" {code} Expected Results: did should disappear from prompt after closing of wallet.  Case 2:  Steps to Reproduce: 1. Open any existing wallet.  2. Try to open not existing wallet. => Opened wallet is closed, but not existing wallet is closed. 3. Try to open any existing wallet. => Indy SDK error occurred WalletInvalidHandle 4. Try to close current wallet. => Indy SDK error occurred WalletInvalidHandle  Actual Results: Wallet is closed, but it is still shown in prompt.  Expected Results: Wallet should not be shown in prompt, or it should be reopened if new wallet can't be opened.  ></description> </Issue>
