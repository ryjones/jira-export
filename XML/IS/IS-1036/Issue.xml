<Issue id="34600" key="IS-1036" number="1036" project="10401" reporter="gudkov" assignee="zhigunenko.dsr" creator="gudkov" type="10006" summary="CLI: did rotate-key command should support resume mode" priority="3" resolution="10000" status="10001" created="2018-10-11 11:46:45.0" updated="2019-05-22 10:32:50.0" resolutiondate="2018-11-09 08:47:49.0" votes="0" watches="4" workflowId="51610"> <description><! CDATA did rotate-key is complex operation that includes multiple steps:  1. Creation of transition key 2. Posting transition key to ledger 3. Applying transition key to DID  If step 2 finishes with timeout we are in a vague state as txn can be ordered or rejected by pool and don't know should we apply step 3 or not. To solve this we recommends the following:  1. Interrupt command after step 2 2. Show to the user proposal to execute the same command with "resume" flag 3. If "resume" flag is set read transition key from the wallet 4. Send GET_NYM to the ledger. Check NYM verkey with transition key. 5. If keys are the same just apply new key to DID 6. If keys are different try to post NYM with new key to ledger and in case of success apply new key to DID  Note that keys can be different because of freshness, but it is acceptable as in this case transaction will be just rejected by ledger and user can retry once more.  *Acceptance criteria* * indy_get_did_with_meta updated to allow access to transition verkey * New resume flag added to did rotate-key command * Tests written and passed    ></description> </Issue>
