<Issue id="39573" key="IS-1252" number="1252" project="10401" reporter="nsivraj" assignee="nsivraj" creator="nsivraj" type="10004" summary="Custom Android logging crashes if logger is called within a java Callback" priority="3" resolution="10000" status="10001" created="2019-04-30 22:25:16.0" updated="2019-10-04 05:34:47.0" resolutiondate="2019-10-03 21:36:23.0" votes="0" watches="4" workflowId="52456"> <description><! CDATA Whenever a rust custom logger (LibvcxLogger or LibindyLogger) logging statement on android is invoked such as  trace!("get_config_value >>> key: {}", key);  and that logging statement is called INSIDE a previous java Callback then the android app will crash.   Here is an real call sequence where we have seen it crash... 1) vcx_wallet_add_record – with key 'dataKey' succeeds adding key with value to wallet 2) vcx_wallet_add_record – with key 'dataKey' fails because key is already in wallet 3) the vcxAddRecordWalletCB gets called for the second vcx_wallet_add_record 4) the callback invokes checkCallback(future, err) 5) checkCallback invokes VcxException.fromSdkError(err) 6) the VcxException constructor invokes LibVcx.api.vcx_get_current_error(errorDetailsJson); 7) vcx_get_current_error has a trace statement in it that invokes the custom LibvcxLogger 8) the android app crashes!  There are many many many scenarios where this could happen in nested java Callbacks and we are seeing several reports of android app crashes. If we use the LibvcxDefaultLogger and LibindyDefaultLogger then it DOES NOT crash BUT we cannot collect log statements into a file so that the user can email us the log file. We really need a solution to this problem for Android as soon as possible.  I have a simple Android test that reproduces the crashing of the android app and it only takes 5 minutes to run it with the rust code build to see if a certain rust code change will fix the issue. Using this Android test we have tried several different scenarios to pin point which changes in the code would eliminate the crash. We can share some of the ideas that have come out of this. I will attach some of the log files that show the crashing of the app.  ></description> </Issue>
