<Issue id="33972" key="IS-1004" number="1004" project="10401" reporter="andrey.goncharov" creator="andrey.goncharov" type="10005" summary="IndySDK should require exact matches of proof and credential attribute names" priority="3" status="10405" created="2018-09-21 08:38:52.0" updated="2019-11-22 16:12:04.0" votes="0" watches="2" workflowId="50708"> <description><! CDATA *Problem statement* Consider the following case. Say, we create a schema with an attribute "AAA". Then we create a cred def based on this schema. We issue a credential { “AAA”: “value” } using this cred def to a connection. We send a proof request to the connection with an attribute "aaa". Due to a previous requirement Libindy normalizes fields in credentials and therefore matches "aaa" from the request to "AAA" in the credential. Libindy issues a proof { “aaa”: “value” } and considers this proof valid.  *Immediate action* Libindy no longer does any normalization and requires exact matches. It means that in the example above Libindy wouldn’t be able to match “aaa” from the proof request to “AAA” from the credential. Only a proof request with an attribute “AAA” would satisfy the credential with “AAA”.  *Future plans* We introduce “negotiation” phase. Say, as a user we have an issued credential with data { “Name”: “Alex” } and somebody requests a proof with data { “name” }. We can not use “Name” and issue a proof right away, instead we a counter-offer, saying that we don’t have “name”, but we could send a proof with “Name”, would it be ok? The other party can either accept this counter-offer and send an updated proof requests or reject it effectively ending this negotiation. We introduce “loosely-matched” attributes. Now when we send a proof request, we basically say I want a list of attributes with these names {  { name: “Name” }, { “name”: “Address” }  } , where a name of an attribute is always a string. We could allow regexps as attribute names to allow “loosely-matched” attributes, satisfying a provided regexp.  *Notes* * Useful comments in an internal doc https://docs.google.com/document/d/1aySmwd-fJN7aC3jsMIB_IrDE6wri-5lZmqpHC1tPvrE  *TODO* * We need to evaluate the impact this change has on previous proofs. ** Version the proof request format, and have a different default behavior with the new version?  ></description> </Issue>
