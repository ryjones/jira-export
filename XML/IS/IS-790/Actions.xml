<Action id="46464" issue="31290" author="swcurran" type="comment" created="2018-06-22 18:41:21.0" updateauthor="swcurran" updated="2018-06-22 18:41:21.0"> <body><! CDATA Our (BC Gov) thoughts on the last two items are as follows: - get_credentials should support wql in filter parameter  For this one, we would want the return value from the get_credentials function be compatible with the return result of the get_credentials_for_proof_req and that either can be used subsequent on an   indy_prover_create_proof|https://github.com/hyperledger/indy-sdk/blob/a0473562bed41bf6fdcdd6ee2cd7222a18186bf5/libindy/src/api/anoncreds.rs#L1105 . That would allow us to use that call to get the credentials filtered at the wallet level for use in creating a Proof. - get_credentials_for_proof_req should support additional filter parameter with custom wql - discuss with Daniel and others  Assuming we can use "get_credentials" in the proof flow, I would suggest that a little more time/consideration be taken to figure the right solution for this. Our thinking is that the filtering needs to be within the Proof Request JSON itself, so that the Verifier can specify it.  How to do that in an possibly interoperable way - e.g. potentially possible with other Identity Solutions would be good.  Note that being able to do wallet-level filtering for Proofs is absolutely crucial for us, so if a revised get_credentials still cannot be used in a Proof flow, then the proposed update to get_credentials_for_proof_req (within or outside of a Proof Request data structure) is crucial.  ></body> </Action>
<Action id="47156" issue="31290" author="gudkov" type="comment" created="2018-07-10 13:08:47.0" updateauthor="gudkov" updated="2018-07-10 13:18:18.0"> <body><! CDATA  ~swcurran   ~danielhardman   ~Artemkaaas  {quote}For this one, we would want the return value from the get_credentials function be compatible with the return result of the get_credentials_for_proof_req and that either can be used subsequent on an indy_prover_create_proof. That would allow us to use that call to get the credentials filtered at the wallet level for use in creating a Proof. {quote} *get_credentials* and *prover_create_proof* have different mission. The first one filters the credentials, but second one filters the credential for each attribute in proof request. User can create aggregated proof that for each attribute uses different credentials. *get_credentials* returns list of *Credential Info* records, *indy_prover_create_proof* returns the map were for each attribute in proof request present exactly same list of *Credential Info* records.  Both results are compatible with *create_proof* function and contains enough information for proof creation after corresponded filtering on application level. {quote}Our thinking is that the filtering needs to be within the Proof Request JSON itself {quote} Usually proof request doesn't contain values of attributes and Verifier don't know values of attributes. As result I am really not sure that we need to include additional values filtering to Proof Request. But now i see that it isn't good idea to add single wql parameter to *get_credentials_for_proof_req* as we need dedicated wql restriction for each attribute. We still need additional filter, but i suggest to define dedicated wql query for each attribute:  {{filter = \{}}   'attr1': wql1,   'attr2': wql2, }  ></body> </Action>
<Action id="47158" issue="31290" author="gudkov" type="comment" created="2018-07-10 13:11:22.0" updateauthor="gudkov" updated="2018-07-10 13:11:22.0"> <body><! CDATA  ~swcurran   ~danielhardman   ~Artemkaaas   Also we need to update get_credentials and indy_prover_create_proof to return iterator instead of the whole list of values. Iterator for indy_prover_create_proof will be a bit complex as we need dedicated iteration over each attribute in proof request.  ></body> </Action>
<Action id="47175" issue="31290" author="swcurran" type="comment" created="2018-07-10 15:49:35.0" updateauthor="swcurran" updated="2018-07-10 15:49:35.0"> <body><! CDATA  ~gudkov  I think you mean that *get_credentials* and *get_credentials_for_proof_req* have different missions, which makes sense.  So is the solution going to be to include a wql filter to both calls so that the wallet results can reflect that?  Or are you saying we (the application) will have to write a filter to convert the output of *get_credentials* to match the input required by *prover_create_proof*?  Re: Proof Request.  We do think that in some cases the Verifier will know enough about what they are after to specify in the Proof Request attributes and needed values. While not the common case, it will be needed.  Agree that a single wql specification will not be useful.  What we would really like to see is that instead of a proof request being a list of attributes each from a credential, that a proof request be a list of credential specifications and a group of attributes associated with each credential. In that case, the wql would obviously be associated with the credential.  We are not worried about making the Proof Request change in this ticket.  Our plan is to have the Verifier include the wql in our Proof Request, and then have the Prover extract the wql and remove it from the Proof Request to be acceptable to Indy-SDK.  That way we can play with the Proof Request a bit and propose something to the community.  ></body> </Action>
<Action id="47447" issue="31290" author="artemkaaas" type="comment" created="2018-07-18 05:37:37.0" updateauthor="artemkaaas" updated="2018-07-18 05:37:56.0"> <body><! CDATA Implemented in PR: https://github.com/hyperledger/indy-sdk/pull/940 Build version: master-625 Changes:  * `indy_prover_store_credential` API call was updated to create tags for a stored credential object. * Added two chains of APIs related to credentials search that allows fetching records by batches: ** Simple credentials search - `indy_prover_search_credentials` - `indy_prover_fetch_credentials` - `indy_prover_close_credentials_search` ** Search credentials for proof request - `indy_prover_search_credentials_for_proof_req` - `indy_prover_fetch_credentials_for_proof_req` - `indy_prover_close_credentials_search_for_proof_req` * All search functions support wql queries  ></body> </Action>
<Action id="47528" issue="31290" author="gudkov" type="comment" body="Required API was implemented, covered by tests and tests passed." created="2018-07-19 12:15:37.0" updateauthor="gudkov" updated="2018-07-19 12:15:37.0"/>
