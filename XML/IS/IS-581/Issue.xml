<Issue id="28235" key="IS-581" number="581" project="10401" reporter="ozheregelya" creator="ozheregelya" type="10004" summary="CLI: CLI sometimes response &apos;NYM not found&apos; for existing NYM in batch mode" priority="2" resolution="10000" status="10001" created="2018-03-05 22:06:15.0" updated="2018-03-27 15:15:54.0" resolutiondate="2018-03-27 15:15:05.0" votes="0" watches="2" workflowId="51263"> <description><! CDATA *Environment:* docker pol of 7 nodes indy-node 1.3.324 libindy 1.3.1~406 indy-cli 1.3.1~406  *Steps to Reproduce:* 1. Execute one by one attached batch files.  *Actual Results:* There are 3 possible cases: 1. Batch file executed successfully. 2. Batch file execution failed on line 12. 3. Batch file execution failed on line 18. The result is unpredictable. Each result is possible for all of files.  *Expected Result:* Batch files should be executed without errors.  *Additional Information:* The issue was reproduced after running {{RUST_LOG=indy=trace indy-cli AS-01-01-general-2.batch}} and {{indy-cli AS-01-01-general-2.batch}}. But in case of output redirection to the file {{RUST_LOG=indy=trace indy-cli AS-01-01-general-3.batch &>cli_log.txt}} it was not reproduced. *Logs for failed get-nym:* Result of previous writing this nym: {code:java} Nym request has been sent to Ledger. Metadata: +---------------------+---------------------+ | Request ID          | Transaction time    | +---------------------+---------------------+ | 1520286426163919427 | 2018-03-05 21:47:06 | +---------------------+---------------------+ Data: +------------------------+-------------------------+------+ | Did                    | Verkey                  | Role | +------------------------+-------------------------+------+ | TLvnGKZVC3qkiZgn56esFG | ~YXLYfwoWJ8utAU8TBSmgn4 | -    | +------------------------+-------------------------+------+ TRACE|indy_cli::commands::ledger::nym_command|             src/commands/ledger.rs:74  | execute << Ok(()) {code} get-nym: {code:java} ledger get-nym did=TLvnGKZVC3qkiZgn56esFG TRACE|indy_cli::commands::ledger::get_nym_command|             src/commands/ledger.rs:89  | execute >> ctx CommandContext { main_prompt: RefCell { value: "indy" }, sub_prompts: RefCell { value: {1: "pool(AS-pool)", 2: "wallet(AS-01-wallet-2)", 3: "did(L8v...uYr)"} }, is_exit: RefCell { value: false }, int_values: RefCell { value: {"CONNECTED_POOL_HANDLE": 2, "OPENED_WALLET_HANDLE": 3} }, string_values: RefCell { value: {"ACTIVE_DID": "L8voaFcbR8oAJu9mKHxuYr", "OPENED_WALLET_NAME": "AS-01-wallet-2", "CONNECTED_POOL_NAME": "AS-pool"} } } params {"did": "TLvnGKZVC3qkiZgn56esFG"} INFO|indy::commands                |                src/commands/mod.rs:95  | LedgerCommand command received INFO|indy::commands::ledger        |             src/commands/ledger.rs:388 | build_get_nym_request >>> submitter_did: "L8voaFcbR8oAJu9mKHxuYr", target_did: "TLvnGKZVC3qkiZgn56esFG" INFO|indy::commands::ledger        |             src/commands/ledger.rs:396 | build_get_attrib_request <<< res: "{\"reqId\":1520286427579778203,\"identifier\":\"L8voaFcbR8oAJu9mKHxuYr\",\"operation\":{\"type\":\"105\",\"dest\":\"TLvnGKZVC3qkiZgn56esFG\"},\"protocolVersion\":1}" INFO|indy::commands                |                src/commands/mod.rs:95  | LedgerCommand command received TRACE|indy::services::pool          |           src/services/pool/mod.rs:293 | zmq poll 1 TRACE|indy::services::pool          |           src/services/pool/mod.rs:310 | cmd   123, 34, 114, 101, 113, 73, 100, 34, 58, 49, 53, 50, 48, 50, 56, 54, 52, 50, 55, 53, 55, 57, 55, 55, 56, 50, 48, 51, 44, 34, 105, 100, 101, 110, 116, 105, 102, 105, 101, 114, 34, 58, 34, 76, 56, 118, 111, 97, 70, 99, 98, 82, 56, 111, 65, 74, 117, 57, 109, 75, 72, 120, 117, 89, 114, 34, 44, 34, 111, 112, 101, 114, 97, 116, 105, 111, 110, 34, 58, 123, 34, 116, 121, 112, 101, 34, 58, 34, 49, 48, 53, 34, 44, 34, 100, 101, 115, 116, 34, 58, 34, 84, 76, 118, 110, 71, 75, 90, 86, 67, 51, 113, 107, 105, 90, 103, 110, 53, 54, 101, 115, 70, 71, 34, 125, 44, 34, 112, 114, 111, 116, 111, 99, 111, 108, 86, 101, 114, 115, 105, 111, 110, 34, 58, 49, 125 ,  7, 0, 0, 0   INFO|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:158 | cmd "{\"reqId\":1520286427579778203,\"identifier\":\"L8voaFcbR8oAJu9mKHxuYr\",\"operation\":{\"type\":\"105\",\"dest\":\"TLvnGKZVC3qkiZgn56esFG\"},\"protocolVersion\":1}" TRACE|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:198 | try_send_request schedule next sending to Some(Tm { tm_sec: 8, tm_min: 47, tm_hour: 21, tm_mday: 5, tm_mon: 2, tm_year: 118, tm_wday: 1, tm_yday: 63, tm_isdst: 0, tm_utcoff: 0, tm_nsec: 580004426 }) INFO|indy::services::pool          |           src/services/pool/mod.rs:544 | RemoteNode::send_str Node6 {"reqId":1520286427579778203,"identifier":"L8voaFcbR8oAJu9mKHxuYr","operation":{"type":"105","dest":"TLvnGKZVC3qkiZgn56esFG"},"protocolVersion":1} TRACE|indy::services::pool          |           src/services/pool/mod.rs:246 | zmq poll loop << TRACE|indy::services::pool          |           src/services/pool/mod.rs:240 | zmq poll loop >> TRACE|indy::services::pool          |           src/services/pool/mod.rs:348 | get_zmq_poll_timeout first_event Tm { tm_sec: 8, tm_min: 47, tm_hour: 21, tm_mday: 5, tm_mon: 2, tm_year: 118, tm_wday: 1, tm_yday: 63, tm_isdst: 0, tm_utcoff: 0, tm_nsec: 580004426 } TRACE|indy::services::pool          |           src/services/pool/mod.rs:349 | get_zmq_poll_timeout now_utc Tm { tm_sec: 7, tm_min: 47, tm_hour: 21, tm_mday: 5, tm_mon: 2, tm_year: 118, tm_wday: 1, tm_yday: 63, tm_isdst: 0, tm_utcoff: 0, tm_nsec: 580020981 } TRACE|indy::services::pool          |           src/services/pool/mod.rs:351 | get_zmq_poll_timeout diff Duration Duration { secs: 0, nanos: 999983445 } TRACE|indy::services::pool          |           src/services/pool/mod.rs:353 | get_zmq_poll_timeout diff ms 999 TRACE|indy::services::pool          |           src/services/pool/mod.rs:293 | zmq poll 1 INFO|indy::services::pool          |           src/services/pool/mod.rs:538 | RemoteNode::recv_msg Node2 {"result":{"txnTime":1520286426,"signatures":null,"seqNo":25,"dest":"TLvnGKZVC3qkiZgn56esFG","rootHash":"Dg4YTAJdTxzKPdd3QQsFrpR8GoB7iqnqQWF4aHBsgcsL","reqId":1520286426163919427,"signature":"4wDMiHYQD4ASByaGGNR8yAXQGcyaT1GartHHhioRhgc7pu7fgGLAqBX2csqgrtbkvrhtZvzC5oeLnvHjR6mzPV2W","type":"1","auditPath": "EM6qjDEwFyxvFqh5irQhSUnMfqcWwbKFGH7qqH59dHya","GUSAPYbWRp6kJhdMwedgtbEqywkJEiNQkH27fEdHaXHv" ,"verkey":"~YXLYfwoWJ8utAU8TBSmgn4","identifier":"L8voaFcbR8oAJu9mKHxuYr"},"op":"REPLY"} TRACE|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:60  | TransactionHandler::process_reply: >>> req_id: 1520286426163919427, raw_msg: "{\"result\":{\"txnTime\":1520286426,\"signatures\":null,\"seqNo\":25,\"dest\":\"TLvnGKZVC3qkiZgn56esFG\",\"rootHash\":\"Dg4YTAJdTxzKPdd3QQsFrpR8GoB7iqnqQWF4aHBsgcsL\",\"reqId\":1520286426163919427,\"signature\":\"4wDMiHYQD4ASByaGGNR8yAXQGcyaT1GartHHhioRhgc7pu7fgGLAqBX2csqgrtbkvrhtZvzC5oeLnvHjR6mzPV2W\",\"type\":\"1\",\"auditPath\": \"EM6qjDEwFyxvFqh5irQhSUnMfqcWwbKFGH7qqH59dHya\",\"GUSAPYbWRp6kJhdMwedgtbEqywkJEiNQkH27fEdHaXHv\" ,\"verkey\":\"~YXLYfwoWJ8utAU8TBSmgn4\",\"identifier\":\"L8voaFcbR8oAJu9mKHxuYr\"},\"op\":\"REPLY\"}" WARN|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:63  | TransactionHandler::process_reply: <<< No pending command for request TRACE|indy::services::pool          |           src/services/pool/mod.rs:246 | zmq poll loop << TRACE|indy::services::pool          |           src/services/pool/mod.rs:240 | zmq poll loop >> TRACE|indy::services::pool          |           src/services/pool/mod.rs:348 | get_zmq_poll_timeout first_event Tm { tm_sec: 8, tm_min: 47, tm_hour: 21, tm_mday: 5, tm_mon: 2, tm_year: 118, tm_wday: 1, tm_yday: 63, tm_isdst: 0, tm_utcoff: 0, tm_nsec: 580004426 } TRACE|indy::services::pool          |           src/services/pool/mod.rs:349 | get_zmq_poll_timeout now_utc Tm { tm_sec: 7, tm_min: 47, tm_hour: 21, tm_mday: 5, tm_mon: 2, tm_year: 118, tm_wday: 1, tm_yday: 63, tm_isdst: 0, tm_utcoff: 0, tm_nsec: 602202925 } TRACE|indy::services::pool          |           src/services/pool/mod.rs:351 | get_zmq_poll_timeout diff Duration Duration { secs: 0, nanos: 977801501 } TRACE|indy::services::pool          |           src/services/pool/mod.rs:353 | get_zmq_poll_timeout diff ms 977 TRACE|indy::services::pool          |           src/services/pool/mod.rs:293 | zmq poll 1 INFO|indy::services::pool          |           src/services/pool/mod.rs:538 | RemoteNode::recv_msg Node6 {"reqId":1520286427579778203,"op":"REQACK","identifier":"L8voaFcbR8oAJu9mKHxuYr"} WARN|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:53  | unhandled msg ReqACK(Response { req_id: 1520286427579778203 }) TRACE|indy::services::pool          |           src/services/pool/mod.rs:246 | zmq poll loop << TRACE|indy::services::pool          |           src/services/pool/mod.rs:240 | zmq poll loop >> TRACE|indy::services::pool          |           src/services/pool/mod.rs:348 | get_zmq_poll_timeout first_event Tm { tm_sec: 8, tm_min: 47, tm_hour: 21, tm_mday: 5, tm_mon: 2, tm_year: 118, tm_wday: 1, tm_yday: 63, tm_isdst: 0, tm_utcoff: 0, tm_nsec: 580004426 } TRACE|indy::services::pool          |           src/services/pool/mod.rs:349 | get_zmq_poll_timeout now_utc Tm { tm_sec: 7, tm_min: 47, tm_hour: 21, tm_mday: 5, tm_mon: 2, tm_year: 118, tm_wday: 1, tm_yday: 63, tm_isdst: 0, tm_utcoff: 0, tm_nsec: 700606062 } TRACE|indy::services::pool          |           src/services/pool/mod.rs:351 | get_zmq_poll_timeout diff Duration Duration { secs: 0, nanos: 879398364 } TRACE|indy::services::pool          |           src/services/pool/mod.rs:353 | get_zmq_poll_timeout diff ms 879 TRACE|indy::services::pool          |           src/services/pool/mod.rs:293 | zmq poll 1 INFO|indy::services::pool          |           src/services/pool/mod.rs:538 | RemoteNode::recv_msg Node1 {"result":{"dest":"TLvnGKZVC3qkiZgn56esFG","identifier":"L8voaFcbR8oAJu9mKHxuYr","signatures":null,"rootHash":"Dg4YTAJdTxzKPdd3QQsFrpR8GoB7iqnqQWF4aHBsgcsL","signature":"4wDMiHYQD4ASByaGGNR8yAXQGcyaT1GartHHhioRhgc7pu7fgGLAqBX2csqgrtbkvrhtZvzC5oeLnvHjR6mzPV2W","reqId":1520286426163919427,"txnTime":1520286426,"verkey":"~YXLYfwoWJ8utAU8TBSmgn4","auditPath": "EM6qjDEwFyxvFqh5irQhSUnMfqcWwbKFGH7qqH59dHya","GUSAPYbWRp6kJhdMwedgtbEqywkJEiNQkH27fEdHaXHv" ,"type":"1","seqNo":25},"op":"REPLY"} TRACE|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:60  | TransactionHandler::process_reply: >>> req_id: 1520286426163919427, raw_msg: "{\"result\":{\"dest\":\"TLvnGKZVC3qkiZgn56esFG\",\"identifier\":\"L8voaFcbR8oAJu9mKHxuYr\",\"signatures\":null,\"rootHash\":\"Dg4YTAJdTxzKPdd3QQsFrpR8GoB7iqnqQWF4aHBsgcsL\",\"signature\":\"4wDMiHYQD4ASByaGGNR8yAXQGcyaT1GartHHhioRhgc7pu7fgGLAqBX2csqgrtbkvrhtZvzC5oeLnvHjR6mzPV2W\",\"reqId\":1520286426163919427,\"txnTime\":1520286426,\"verkey\":\"~YXLYfwoWJ8utAU8TBSmgn4\",\"auditPath\": \"EM6qjDEwFyxvFqh5irQhSUnMfqcWwbKFGH7qqH59dHya\",\"GUSAPYbWRp6kJhdMwedgtbEqywkJEiNQkH27fEdHaXHv\" ,\"type\":\"1\",\"seqNo\":25},\"op\":\"REPLY\"}" WARN|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:63  | TransactionHandler::process_reply: <<< No pending command for request TRACE|indy::services::pool          |           src/services/pool/mod.rs:246 | zmq poll loop << TRACE|indy::services::pool          |           src/services/pool/mod.rs:240 | zmq poll loop >> TRACE|indy::services::pool          |           src/services/pool/mod.rs:348 | get_zmq_poll_timeout first_event Tm { tm_sec: 8, tm_min: 47, tm_hour: 21, tm_mday: 5, tm_mon: 2, tm_year: 118, tm_wday: 1, tm_yday: 63, tm_isdst: 0, tm_utcoff: 0, tm_nsec: 580004426 } TRACE|indy::services::pool          |           src/services/pool/mod.rs:349 | get_zmq_poll_timeout now_utc Tm { tm_sec: 7, tm_min: 47, tm_hour: 21, tm_mday: 5, tm_mon: 2, tm_year: 118, tm_wday: 1, tm_yday: 63, tm_isdst: 0, tm_utcoff: 0, tm_nsec: 710716931 } TRACE|indy::services::pool          |           src/services/pool/mod.rs:351 | get_zmq_poll_timeout diff Duration Duration { secs: 0, nanos: 869287495 } TRACE|indy::services::pool          |           src/services/pool/mod.rs:353 | get_zmq_poll_timeout diff ms 869 TRACE|indy::services::pool          |           src/services/pool/mod.rs:293 | zmq poll 1 INFO|indy::services::pool          |           src/services/pool/mod.rs:538 | RemoteNode::recv_msg Node6 {"result":{"type":"105","data":null,"identifier":"L8voaFcbR8oAJu9mKHxuYr","reqId":1520286427579778203,"seqNo":null,"dest":"TLvnGKZVC3qkiZgn56esFG","txnTime":null,"state_proof":{"proof_nodes":"+QJL+JWgO8mlngpweK03LQ03AT2+SdHe+L0AtpGBaEyN3RlYPyK4cvhwuG57ImlkZW50aWZpZXIiOiJWNFNHUlU4Nlo1OGQ2VFY3UEJVZTZmIiwicm9sZSI6IjIiLCJzZXFObyI6MywidHhuVGltZSI6bnVsbCwidmVya2V5IjoiflJIR050ZnZrZ1BFVVF6UU50TnhMTnUiffkBsaDT0j9uCbFabO0LnyutnB5uDC61QaWLtVTJU4XCa4sWo4CAoJqauj70Qf++s0g43b1zvnQEyQJh2lfNqxFRtmaADvkwgKAnQX7muSztsNraYuV\/n+wOYAmdtCBD9wC+8fidNa861aCfn21gHZkHJUjdCW4ZKqsCTaJdwy8V6WUSolEQrvc1cKBf5RO1AptKjt0GB9mb7JkP+Q4iyF8TKqWF3Xos73TpN6BwgF\/53RoSI625mEOziDdW4\/GCYk4kRmG\/2ZUJe4c1NaC2YfwOhLj0zWf1s42IwrcYjj7Dn5YW7yBgb435Uf\/CwKAJoSIREMPm00brmAexRx54jNRGoC63XlW8rwtdz4WeTKBOPTIYSIOjjKBvX6aZ1FZpxobaRq9vO9WEJFKBOV6HY6AZp5CpVs1tgjB3v2uak8pYNhCb0iDAMpJPh+AkPndumKAlthSA5a4KV2Iw5ZQ\/LDCR4mxD8miwISkJKNBDxhBubaDq\/jDh1ipb8onhSAYdTMW3BUdLP1S3W1qwR4skRz5jqKA7Ohl8US\/Ipw9m90WNb\/7n5LAxzanxSmitjBCIzSGcGoA=","root_hash":"26PCie1DLRiZdRBDvMBhKsxEcWWT4oyMgNJbAvmUTCe8","multi_signature":{"signature":"R1rnYSsHScgD1ZXageFfgJAqe2tB5j9jBFVCWpvtYsSzM2pst1oLgoDon8sf1qf3T7R9qQWrDGzcJGwHKv4XgBkgWBxaSdgXFZxwUpVLBRJDVeXZRp8Y8FLSP1m4c76wEkxX1q4RKXaiGSHYMonV8Eg9LDRnBAB2fKYmj5DB7Qv5VZ","value":{"txn_root_hash":"EjHL454Je9coTWs584GEgp4t5VVowtRczMyMZSpeWJLR","timestamp":1520286425,"pool_state_root_hash":"GX3KEXsownLbWNCo4sCuN4cEU1c3aXdhnuSRwrMB7832","state_root_hash":"26PCie1DLRiZdRBDvMBhKsxEcWWT4oyMgNJbAvmUTCe8","ledger_id":1},"participants": "Node3","Node1","Node2","Node5","Node7" }}},"op":"REPLY"} TRACE|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:60  | TransactionHandler::process_reply: >>> req_id: 1520286427579778203, raw_msg: "{\"result\":{\"type\":\"105\",\"data\":null,\"identifier\":\"L8voaFcbR8oAJu9mKHxuYr\",\"reqId\":1520286427579778203,\"seqNo\":null,\"dest\":\"TLvnGKZVC3qkiZgn56esFG\",\"txnTime\":null,\"state_proof\":{\"proof_nodes\":\"+QJL+JWgO8mlngpweK03LQ03AT2+SdHe+L0AtpGBaEyN3RlYPyK4cvhwuG57ImlkZW50aWZpZXIiOiJWNFNHUlU4Nlo1OGQ2VFY3UEJVZTZmIiwicm9sZSI6IjIiLCJzZXFObyI6MywidHhuVGltZSI6bnVsbCwidmVya2V5IjoiflJIR050ZnZrZ1BFVVF6UU50TnhMTnUiffkBsaDT0j9uCbFabO0LnyutnB5uDC61QaWLtVTJU4XCa4sWo4CAoJqauj70Qf++s0g43b1zvnQEyQJh2lfNqxFRtmaADvkwgKAnQX7muSztsNraYuV\\/n+wOYAmdtCBD9wC+8fidNa861aCfn21gHZkHJUjdCW4ZKqsCTaJdwy8V6WUSolEQrvc1cKBf5RO1AptKjt0GB9mb7JkP+Q4iyF8TKqWF3Xos73TpN6BwgF\\/53RoSI625mEOziDdW4\\/GCYk4kRmG\\/2ZUJe4c1NaC2YfwOhLj0zWf1s42IwrcYjj7Dn5YW7yBgb435Uf\\/CwKAJoSIREMPm00brmAexRx54jNRGoC63XlW8rwtdz4WeTKBOPTIYSIOjjKBvX6aZ1FZpxobaRq9vO9WEJFKBOV6HY6AZp5CpVs1tgjB3v2uak8pYNhCb0iDAMpJPh+AkPndumKAlthSA5a4KV2Iw5ZQ\\/LDCR4mxD8miwISkJKNBDxhBubaDq\\/jDh1ipb8onhSAYdTMW3BUdLP1S3W1qwR4skRz5jqKA7Ohl8US\\/Ipw9m90WNb\\/7n5LAxzanxSmitjBCIzSGcGoA=\",\"root_hash\":\"26PCie1DLRiZdRBDvMBhKsxEcWWT4oyMgNJbAvmUTCe8\",\"multi_signature\":{\"signature\":\"R1rnYSsHScgD1ZXageFfgJAqe2tB5j9jBFVCWpvtYsSzM2pst1oLgoDon8sf1qf3T7R9qQWrDGzcJGwHKv4XgBkgWBxaSdgXFZxwUpVLBRJDVeXZRp8Y8FLSP1m4c76wEkxX1q4RKXaiGSHYMonV8Eg9LDRnBAB2fKYmj5DB7Qv5VZ\",\"value\":{\"txn_root_hash\":\"EjHL454Je9coTWs584GEgp4t5VVowtRczMyMZSpeWJLR\",\"timestamp\":1520286425,\"pool_state_root_hash\":\"GX3KEXsownLbWNCo4sCuN4cEU1c3aXdhnuSRwrMB7832\",\"state_root_hash\":\"26PCie1DLRiZdRBDvMBhKsxEcWWT4oyMgNJbAvmUTCe8\",\"ledger_id\":1},\"participants\": \"Node3\",\"Node1\",\"Node2\",\"Node5\",\"Node7\" }}},\"op\":\"REPLY\"}" TRACE|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:77  | TransactionHandler::process_reply: reply_cnt: 0, f: 2 DEBUG|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:80  | TransactionHandler::process_reply: Try to verify proof and signature TRACE|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:228 | TransactionHandler::parse_reply_for_proof_checking: >>> json_msg: Object({"data": Null, "dest": String("TLvnGKZVC3qkiZgn56esFG"), "identifier": String("L8voaFcbR8oAJu9mKHxuYr"), "reqId": Number(PosInt(1520286427579778203)), "seqNo": Null, "state_proof": Object({"multi_signature": Object({"participants": Array( String("Node3"), String("Node1"), String("Node2"), String("Node5"), String("Node7") ), "signature": String("R1rnYSsHScgD1ZXageFfgJAqe2tB5j9jBFVCWpvtYsSzM2pst1oLgoDon8sf1qf3T7R9qQWrDGzcJGwHKv4XgBkgWBxaSdgXFZxwUpVLBRJDVeXZRp8Y8FLSP1m4c76wEkxX1q4RKXaiGSHYMonV8Eg9LDRnBAB2fKYmj5DB7Qv5VZ"), "value": Object({"ledger_id": Number(PosInt(1)), "pool_state_root_hash": String("GX3KEXsownLbWNCo4sCuN4cEU1c3aXdhnuSRwrMB7832"), "state_root_hash": String("26PCie1DLRiZdRBDvMBhKsxEcWWT4oyMgNJbAvmUTCe8"), "timestamp": Number(PosInt(1520286425)), "txn_root_hash": String("EjHL454Je9coTWs584GEgp4t5VVowtRczMyMZSpeWJLR")})}), "proof_nodes": String("+QJL+JWgO8mlngpweK03LQ03AT2+SdHe+L0AtpGBaEyN3RlYPyK4cvhwuG57ImlkZW50aWZpZXIiOiJWNFNHUlU4Nlo1OGQ2VFY3UEJVZTZmIiwicm9sZSI6IjIiLCJzZXFObyI6MywidHhuVGltZSI6bnVsbCwidmVya2V5IjoiflJIR050ZnZrZ1BFVVF6UU50TnhMTnUiffkBsaDT0j9uCbFabO0LnyutnB5uDC61QaWLtVTJU4XCa4sWo4CAoJqauj70Qf++s0g43b1zvnQEyQJh2lfNqxFRtmaADvkwgKAnQX7muSztsNraYuV/n+wOYAmdtCBD9wC+8fidNa861aCfn21gHZkHJUjdCW4ZKqsCTaJdwy8V6WUSolEQrvc1cKBf5RO1AptKjt0GB9mb7JkP+Q4iyF8TKqWF3Xos73TpN6BwgF/53RoSI625mEOziDdW4/GCYk4kRmG/2ZUJe4c1NaC2YfwOhLj0zWf1s42IwrcYjj7Dn5YW7yBgb435Uf/CwKAJoSIREMPm00brmAexRx54jNRGoC63XlW8rwtdz4WeTKBOPTIYSIOjjKBvX6aZ1FZpxobaRq9vO9WEJFKBOV6HY6AZp5CpVs1tgjB3v2uak8pYNhCb0iDAMpJPh+AkPndumKAlthSA5a4KV2Iw5ZQ/LDCR4mxD8miwISkJKNBDxhBubaDq/jDh1ipb8onhSAYdTMW3BUdLP1S3W1qwR4skRz5jqKA7Ohl8US/Ipw9m90WNb/7n5LAxzanxSmitjBCIzSGcGoA="), "root_hash": String("26PCie1DLRiZdRBDvMBhKsxEcWWT4oyMgNJbAvmUTCe8")}), "txnTime": Null, "type": String("105")}) TRACE|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:231 | TransactionHandler::parse_reply_for_proof_checking: xtype: "105" TRACE|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:245 | TransactionHandler::parse_reply_for_proof_checking: proof: "+QJL+JWgO8mlngpweK03LQ03AT2+SdHe+L0AtpGBaEyN3RlYPyK4cvhwuG57ImlkZW50aWZpZXIiOiJWNFNHUlU4Nlo1OGQ2VFY3UEJVZTZmIiwicm9sZSI6IjIiLCJzZXFObyI6MywidHhuVGltZSI6bnVsbCwidmVya2V5IjoiflJIR050ZnZrZ1BFVVF6UU50TnhMTnUiffkBsaDT0j9uCbFabO0LnyutnB5uDC61QaWLtVTJU4XCa4sWo4CAoJqauj70Qf++s0g43b1zvnQEyQJh2lfNqxFRtmaADvkwgKAnQX7muSztsNraYuV/n+wOYAmdtCBD9wC+8fidNa861aCfn21gHZkHJUjdCW4ZKqsCTaJdwy8V6WUSolEQrvc1cKBf5RO1AptKjt0GB9mb7JkP+Q4iyF8TKqWF3Xos73TpN6BwgF/53RoSI625mEOziDdW4/GCYk4kRmG/2ZUJe4c1NaC2YfwOhLj0zWf1s42IwrcYjj7Dn5YW7yBgb435Uf/CwKAJoSIREMPm00brmAexRx54jNRGoC63XlW8rwtdz4WeTKBOPTIYSIOjjKBvX6aZ1FZpxobaRq9vO9WEJFKBOV6HY6AZp5CpVs1tgjB3v2uak8pYNhCb0iDAMpJPh+AkPndumKAlthSA5a4KV2Iw5ZQ/LDCR4mxD8miwISkJKNBDxhBubaDq/jDh1ipb8onhSAYdTMW3BUdLP1S3W1qwR4skRz5jqKA7Ohl8US/Ipw9m90WNb/7n5LAxzanxSmitjBCIzSGcGoA=" TRACE|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:253 | TransactionHandler::parse_reply_for_proof_checking: root_hash: "26PCie1DLRiZdRBDvMBhKsxEcWWT4oyMgNJbAvmUTCe8" TRACE|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:266 | TransactionHandler::parse_reply_for_proof_checking: Data is null TRACE|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:288 | TransactionHandler::parse_reply_for_proof_checking: data: None, parsed_data: Null TRACE|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:316 | TransactionHandler::parse_reply_for_proof_checking: GET_NYM TRACE|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:346 | TransactionHandler::parse_reply_for_proof_checking: dest:  57, 121, 162, 219, 13, 40, 216, 180, 212, 163, 220, 6, 40, 40, 64, 99, 45, 111, 148, 155, 15, 53, 150, 148, 50, 22, 4, 116, 30, 54, 5, 143  TRACE|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:361 | parse_reply_for_proof_checking: <<< proof "+QJL+JWgO8mlngpweK03LQ03AT2+SdHe+L0AtpGBaEyN3RlYPyK4cvhwuG57ImlkZW50aWZpZXIiOiJWNFNHUlU4Nlo1OGQ2VFY3UEJVZTZmIiwicm9sZSI6IjIiLCJzZXFObyI6MywidHhuVGltZSI6bnVsbCwidmVya2V5IjoiflJIR050ZnZrZ1BFVVF6UU50TnhMTnUiffkBsaDT0j9uCbFabO0LnyutnB5uDC61QaWLtVTJU4XCa4sWo4CAoJqauj70Qf++s0g43b1zvnQEyQJh2lfNqxFRtmaADvkwgKAnQX7muSztsNraYuV/n+wOYAmdtCBD9wC+8fidNa861aCfn21gHZkHJUjdCW4ZKqsCTaJdwy8V6WUSolEQrvc1cKBf5RO1AptKjt0GB9mb7JkP+Q4iyF8TKqWF3Xos73TpN6BwgF/53RoSI625mEOziDdW4/GCYk4kRmG/2ZUJe4c1NaC2YfwOhLj0zWf1s42IwrcYjj7Dn5YW7yBgb435Uf/CwKAJoSIREMPm00brmAexRx54jNRGoC63XlW8rwtdz4WeTKBOPTIYSIOjjKBvX6aZ1FZpxobaRq9vO9WEJFKBOV6HY6AZp5CpVs1tgjB3v2uak8pYNhCb0iDAMpJPh+AkPndumKAlthSA5a4KV2Iw5ZQ/LDCR4mxD8miwISkJKNBDxhBubaDq/jDh1ipb8onhSAYdTMW3BUdLP1S3W1qwR4skRz5jqKA7Ohl8US/Ipw9m90WNb/7n5LAxzanxSmitjBCIzSGcGoA=", root_hash: "26PCie1DLRiZdRBDvMBhKsxEcWWT4oyMgNJbAvmUTCe8", dest:  57, 121, 162, 219, 13, 40, 216, 180, 212, 163, 220, 6, 40, 40, 64, 99, 45, 111, 148, 155, 15, 53, 150, 148, 50, 22, 4, 116, 30, 54, 5, 143 , value: None DEBUG|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:86  | TransactionHandler::process_reply: Proof and signature are present DEBUG|indy::services::pool::state_proof|   src/services/pool/state_proof.rs:251 | verify_proof >> key  57, 121, 162, 219, 13, 40, 216, 180, 212, 163, 220, 6, 40, 40, 64, 99, 45, 111, 148, 155, 15, 53, 150, 148, 50, 22, 4, 116, 30, 54, 5, 143 , expected_value None TRACE|indy::services::pool::state_proof|   src/services/pool/state_proof.rs:184 | Check proof, cur node: Full(FullNode { nodes:  Some(Hash( 211, 210, 63, 110, 9, 177, 90, 108, 237, 11, 159, 43, 173, 156, 30, 110, 12, 46, 181, 65, 165, 139, 181, 84, 201, 83, 133, 194, 107, 139, 22, 163 )), None, None, Some(Hash( 154, 154, 186, 62, 244, 65, 255, 190, 179, 72, 56, 221, 189, 115, 190, 116, 4, 201, 2, 97, 218, 87, 205, 171, 17, 81, 182, 102, 128, 14, 249, 48 )), None, Some(Hash( 39, 65, 126, 230, 185, 44, 237, 176, 218, 218, 98, 229, 127, 159, 236, 14, 96, 9, 157, 180, 32, 67, 247, 0, 190, 241, 248, 157, 53, 175, 58, 213 )), Some(Hash( 159, 159, 109, 96, 29, 153, 7, 37, 72, 221, 9, 110, 25, 42, 171, 2, 77, 162, 93, 195, 47, 21, 233, 101, 18, 162, 81, 16, 174, 247, 53, 112 )), Some(Hash( 95, 229, 19, 181, 2, 155, 74, 142, 221, 6, 7, 217, 155, 236, 153, 15, 249, 14, 34, 200, 95, 19, 42, 165, 133, 221, 122, 44, 239, 116, 233, 55 )), Some(Hash( 112, 128, 95, 249, 221, 26, 18, 35, 173, 185, 152, 67, 179, 136, 55, 86, 227, 241, 130, 98, 78, 36, 70, 97, 191, 217, 149, 9, 123, 135, 53, 53 )), Some(Hash( 182, 97, 252, 14, 132, 184, 244, 205, 103, 245, 179, 141, 136, 194, 183, 24, 142, 62, 195, 159, 150, 22, 239, 32, 96, 111, 141, 249, 81, 255, 194, 192 )), Some(Hash( 9, 161, 34, 17, 16, 195, 230, 211, 70, 235, 152, 7, 177, 71, 30, 120, 140, 212, 70, 160, 46, 183, 94, 85, 188, 175, 11, 93, 207, 133, 158, 76 )), Some(Hash( 78, 61, 50, 24, 72, 131, 163, 140, 160, 111, 95, 166, 153, 212, 86, 105, 198, 134, 218, 70, 175, 111, 59, 213, 132, 36, 82, 129, 57, 94, 135, 99 )), Some(Hash( 25, 167, 144, 169, 86, 205, 109, 130, 48, 119, 191, 107, 154, 147, 202, 88, 54, 16, 155, 210, 32, 192, 50, 146, 79, 135, 224, 36, 62, 119, 110, 152 )), Some(Hash( 37, 182, 20, 128, 229, 174, 10, 87, 98, 48, 229, 148, 63, 44, 48, 145, 226, 108, 67, 242, 104, 176, 33, 41, 9, 40, 208, 67, 198, 16, 110, 109 )), Some(Hash( 234, 254, 48, 225, 214, 42, 91, 242, 137, 225, 72, 6, 29, 76, 197, 183, 5, 71, 75, 63, 84, 183, 91, 90, 176, 71, 139, 36, 71, 62, 99, 168 )), Some(Hash( 59, 58, 25, 124, 81, 47, 200, 167, 15, 102, 247, 69, 141, 111, 254, 231, 228, 176, 49, 205, 169, 241, 74, 104, 173, 140, 16, 136, 205, 33, 156, 26 )) , value: None }) TRACE|indy::services::pool::state_proof|   src/services/pool/state_proof.rs:184 | Check proof, cur node: Hash( 154, 154, 186, 62, 244, 65, 255, 190, 179, 72, 56, 221, 189, 115, 190, 116, 4, 201, 2, 97, 218, 87, 205, 171, 17, 81, 182, 102, 128, 14, 249, 48 ) TRACE|indy::services::pool::state_proof|   src/services/pool/state_proof.rs:184 | Check proof, cur node: Leaf(Leaf { path:  59, 201, 165, 158, 10, 112, 120, 173, 55, 45, 13, 55, 1, 61, 190, 73, 209, 222, 248, 189, 0, 182, 145, 129, 104, 76, 141, 221, 25, 88, 63, 34 , value:  248, 112, 184, 110, 123, 34, 105, 100, 101, 110, 116, 105, 102, 105, 101, 114, 34, 58, 34, 86, 52, 83, 71, 82, 85, 56, 54, 90, 53, 56, 100, 54, 84, 86, 55, 80, 66, 85, 101, 54, 102, 34, 44, 34, 114, 111, 108, 101, 34, 58, 34, 50, 34, 44, 34, 115, 101, 113, 78, 111, 34, 58, 51, 44, 34, 116, 120, 110, 84, 105, 109, 101, 34, 58, 110, 117, 108, 108, 44, 34, 118, 101, 114, 107, 101, 121, 34, 58, 34, 126, 82, 72, 71, 78, 116, 102, 118, 107, 103, 80, 69, 85, 81, 122, 81, 78, 116, 78, 120, 76, 78, 117, 34, 125  }) TRACE|indy::services::pool::state_proof|   src/services/pool/state_proof.rs:210 | Node::_get_value in Leaf searched path Ok("\t\u{7}\t\n\u{2}\r\u{b}\u{0}\r\u{2}\u{8}\r\u{8}\u{b}\u{4}\r\u{4}\n\u{3}\r\u{c}\u{0}\u{6}\u{2}\u{8}\u{2}\u{8}\u{4}\u{0}\u{6}\u{3}\u{2}\r\u{6}\u{f}\t\u{4}\t\u{b}\u{0}\u{f}\u{3}\u{5}\t\u{6}\t\u{4}\u{3}\u{2}\u{1}\u{6}\u{0}\u{4}\u{7}\u{4}\u{1}\u{e}\u{3}\u{6}\u{0}\u{5}\u{8}\u{f}"), stored path Ok("\u{b}\u{c}\t\n\u{5}\t\u{e}\u{0}\n\u{7}\u{0}\u{7}\u{8}\n\r\u{3}\u{7}\u{2}\r\u{0}\r\u{3}\u{7}\u{0}\u{1}\u{3}\r\u{b}\u{e}\u{4}\t\r\u{1}\r\u{e}\u{f}\u{8}\u{b}\r\u{0}\u{0}\u{b}\u{6}\t\u{1}\u{8}\u{1}\u{6}\u{8}\u{4}\u{c}\u{8}\r\r\r\u{1}\t\u{5}\u{8}\u{3}\u{f}\u{2}\u{2}") DEBUG|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:97  | TransactionHandler::process_reply: proof_valid: true TRACE|indy::services::pool::state_proof|   src/services/pool/state_proof.rs:276 | verify_proof_signature: >>> signature: "R1rnYSsHScgD1ZXageFfgJAqe2tB5j9jBFVCWpvtYsSzM2pst1oLgoDon8sf1qf3T7R9qQWrDGzcJGwHKv4XgBkgWBxaSdgXFZxwUpVLBRJDVeXZRp8Y8FLSP1m4c76wEkxX1q4RKXaiGSHYMonV8Eg9LDRnBAB2fKYmj5DB7Qv5VZ", participants:  "Node3", "Node1", "Node2", "Node5", "Node7" , pool_state_root:  133, 169, 108, 101, 100, 103, 101, 114, 95, 105, 100, 1, 180, 112, 111, 111, 108, 95, 115, 116, 97, 116, 101, 95, 114, 111, 111, 116, 95, 104, 97, 115, 104, 217, 44, 71, 88, 51, 75, 69, 88, 115, 111, 119, 110, 76, 98, 87, 78, 67, 111, 52, 115, 67, 117, 78, 52, 99, 69, 85, 49, 99, 51, 97, 88, 100, 104, 110, 117, 83, 82, 119, 114, 77, 66, 55, 56, 51, 50, 175, 115, 116, 97, 116, 101, 95, 114, 111, 111, 116, 95, 104, 97, 115, 104, 217, 44, 50, 54, 80, 67, 105, 101, 49, 68, 76, 82, 105, 90, 100, 82, 66, 68, 118, 77, 66, 104, 75, 115, 120, 69, 99, 87, 87, 84, 52, 111, 121, 77, 103, 78, 74, 98, 65, 118, 109, 85, 84, 67, 101, 56, 169, 116, 105, 109, 101, 115, 116, 97, 109, 112, 206, 90, 157, 186, 217, 173, 116, 120, 110, 95, 114, 111, 111, 116, 95, 104, 97, 115, 104, 217, 44, 69, 106, 72, 76, 52, 53, 52, 74, 101, 57, 99, 111, 84, 87, 115, 53, 56, 52, 71, 69, 103, 112, 52, 116, 53, 86, 86, 111, 119, 116, 82, 99, 122, 77, 121, 77, 90, 83, 112, 101, 87, 74, 76, 82  DEBUG|indy::services::pool::state_proof|   src/services/pool/state_proof.rs:288 | verify_proof_signature: ver_keys.len(): 5 DEBUG|indy::services::pool::state_proof|   src/services/pool/state_proof.rs:308 | verify_proof_signature: signature: MultiSignature { point: PointG1 { point: ECP:   false, FP:   BIG:   1E820238C79FE4E8C28AC157CFEC73D4465012D92E12674C1018D13FE1383E6D    , FP:   BIG:   20A62D2659EE365B0CCB3CDC8CF988C8F83637AC774F9386A47583AC16463CBA    , FP:   BIG:   095E45DDF417D05FB10933FFC63D474548B7FFFF7888802F07FFFFFF7D07A8A8       }, bytes:  4, 11, 211, 24, 234, 54, 81, 118, 206, 180, 49, 119, 200, 119, 87, 108, 164, 123, 183, 249, 182, 191, 133, 137, 226, 253, 234, 255, 201, 25, 40, 249, 59, 36, 244, 121, 216, 0, 137, 182, 178, 177, 131, 250, 145, 37, 242, 156, 53, 69, 227, 237, 98, 190, 199, 99, 232, 175, 172, 25, 60, 234, 20, 209, 52, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0  } DEBUG|indy::services::pool::state_proof|   src/services/pool/state_proof.rs:312 | verify_proof_signature: <<< res: true DEBUG|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:107 | TransactionHandler::process_reply: signature_valid: true DEBUG|indy::services::pool::transaction_handler|src/services/pool/transaction_handler.rs:113 | TransactionHandler::process_reply: consensus_reached true INFO|indy::commands                |                src/commands/mod.rs:95  | LedgerCommand command received NYM not found Batch execution failed at line #12 {code} Similar sequence of actions works for old CLI and new one.  ></description> </Issue>
