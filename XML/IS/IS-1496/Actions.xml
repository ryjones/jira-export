<Action id="67987" issue="44330" author="anikitindsr" type="comment" created="2020-02-18 13:54:06.0" updateauthor="anikitindsr" updated="2020-02-18 14:56:05.0"> <body><! CDATA h1. PoA. h2. Main goals: * Ability to create dockerized indy pool and running test using this pool. * What the possibilities of androids machines? Does it have hardware support? * Costs of using Github Actions. * What the actions are allowed, like `on push, on pull request` * Are there any possibilities for running in parallel? * Cache for docker images.  ></body> </Action>
<Action id="68019" issue="44330" author="anikitindsr" type="comment" created="2020-02-20 14:22:42.0" updateauthor="anikitindsr" updated="2020-02-20 14:22:42.0"> <body><! CDATA Doc with findings can be found in:  https://docs.google.com/document/d/1ZIFTa3Gj80DbVLp08r0XEPk8O3QUD17sVgGMaFYqqIk/edit?usp=sharing  ></body> </Action>
<Action id="68114" issue="44330" author="anikitindsr" type="comment" created="2020-02-26 13:28:04.0" updateauthor="anikitindsr" updated="2020-02-26 13:29:08.0"> <body><! CDATA Maybe it would be helpful. Example of workflow, which build target artifacts for tests, upload and use them in other job for run tests:  {code} name: CI  on:  push   jobs: Build: runs-on: ubuntu-latest steps: - uses: actions/checkout@v1 - name: Build client image run: docker build -f libindy/ci/ubuntu.dockerfile -t test_client ci - name: Create container for test run: docker run -di -v $(realpath .):/home/indy/test_dir --rm --privileged --name indy_client --env RUST_TEST_THREADS=1 --env RUST_LOG=trace --env TEST_POOL_IP=10.0.0.2 test_client - name: Check disk space run: docker exec -i indy_client df -h - name: Chmod run: chmod -R 777 libindy - name: Cargo build run: docker exec -i --workdir /home/indy/test_dir/libindy indy_client cargo build #     - name: Cargo test #       run: docker exec -i --workdir /home/indy/test_dir/libindy indy_client cargo test --test pool high_cases::open::open_pool_ledger_works -- --exact - name: ZIP artifacts run: docker exec -i --workdir /home/indy/test_dir/libindy indy_client zip -r artifacts.zip target - name: Upload artifacts uses: actions/upload-artifact@v1 with: name: cargo_builds path: libindy/artifacts.zip  RunTests: runs-on: ubuntu-latest needs:  Build  steps: - uses: actions/checkout@v1 - run: mkdir artifacts - name: Download artifacts uses: actions/download-artifact@v1 with: name: cargo_builds path: ./artifacts - name: LS run: ls -la . - name: PWD run: pwd - name: Unpack artifacts run: unzip artifacts/artifacts.zip - name: Build docker image with indy pool inside run: docker build -f ci/indy-pool.dockerfile -t test_pool --build-arg pool_ip=10.0.0.2 ci - name: Create network run: docker network create --subnet=10.0.0.0/8 indy-sdk-network - name: Run IndyPool run: docker run -d --name indy_pool -p 9701-9708:9701-9708 --net=indy-sdk-network test_pool - name: Chmod run: chmod -R 777 libindy - name: Build client image run: docker build -f libindy/ci/ubuntu.dockerfile -t test_client ci - name : Create container for tests run: docker run -di -v $(realpath .):/home/indy/test_dir --rm --privileged --name indy_client --net=indy-sdk-network --env RUST_TEST_THREADS=1 --env RUST_LOG=trace --env TEST_POOL_IP=10.0.0.2 test_client - name: Run tests run: docker exec -i --workdir /home/indy/test_dir/libindy indy_client cargo test --test pool high_cases::open::open_pool_ledger_works -- --exact {code}  ></body> </Action>
<Action id="68136" issue="44330" author="sergey.minaev" type="comment" body="Current vision is to use GitHub Actions and keep in the mind the option to migrate Azure Pipelines or Circle CI if needed" created="2020-02-27 13:12:47.0" updateauthor="sergey.minaev" updated="2020-02-27 13:12:47.0"/>
