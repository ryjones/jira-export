<Issue id="15345" key="FABJ-208" number="208" project="10605" reporter="zerppen" assignee="zerppen" creator="zerppen" type="10004" summary="Invoking getRows can&apos;t get table information when  column is empty" environment="ubuntu 14.04 LTS" priority="1" resolution="10000" status="6" created="2017-03-14 09:07:42.0" updated="2018-07-19 00:20:45.0" resolutiondate="2017-03-28 18:38:28.0" votes="0" watches="1" workflowId="33646"> <description><! CDATA Following two methods invoked by query method I tested, results show in attachment.  After reading the results,and comparing to go-chaincode.We can find getRows generating a bug,because invoking go-chaincode's GetRows when the column is null I can get all the table information .    private String queryCurrencyByID(ChaincodeStub stub,String   args){  log.debug("queryCurrencyByID..."); if(args.length!=1){ return "Incorrect number of arguments. Expecting 1"; } String id = args 0 ; TableProto.Row cuRow = getCurrencyByID(stub,id); if(cuRow==null){ log.error("queryCurrencyByID error1"); return "queryCurrencyByID error1"; } if(cuRow.getColumnsCount()==0){ return "no data can be queryed"; } JSONObject cuJson = new JSONObject(); cuJson.put("id",cuRow.getColumns(0).getString()); cuJson.put("count",cuRow.getColumns(1).getInt64()); cuJson.put("leftCount",cuRow.getColumns(2).getInt64()); cuJson.put("creator",cuRow.getColumns(3).getString()); cuJson.put("createTime",cuRow.getColumns(4).getInt64());  return cuJson.toString(); } TableProto.Row getCurrencyByID(ChaincodeStub stub,String id){  TableProto.Column queryCol = TableProto.Column.newBuilder() .setString(id).build(); List<TableProto.Column> key = new ArrayList<TableProto.Column>(); key.add(queryCol); TableProto.Row row = null;  try { row = stub.getRow(TableCurrency,key);  }catch(Exception e){ return null;  } return row;   }  private String queryAllCurrency(ChaincodeStub stub,String   args){  log.debug("queryAllCurrency..."); if(args.length!=0){ log.error("incorrect number of arguments"); return "incorrect number of arguments"; } ArrayList<TableProto.Row> rows = null; try {   rows = stub.getRows(TableCurrency,null); }catch(Exception e){ return "getRows operation failed"; } if(rows.size()==0){ log.info("rows.size = 0"); return "no data can be queryed"; } JSONArray jArray = new JSONArray(); for(int i= 0;i<rows.size();i++){ JSONObject jObject = new JSONObject(); jObject.put("id",rows.get(i).getColumns(0).getString()); jObject.put("count",rows.get(i).getColumns(1).getInt64()); jObject.put("leftCount",rows.get(i).getColumns(2).getInt64()); jObject.put("creator",rows.get(i).getColumns(3).getString()); jObject.put("createTime",rows.get(i).getColumns(4).getInt64()); jArray.add(jObject); } return jArray.toString(); }  ></description> </Issue>
