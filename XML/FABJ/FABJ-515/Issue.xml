<Issue id="44636" key="FABJ-515" number="515" project="10605" reporter="smartheye" creator="smartheye" type="10004" summary="Channel.getExecutorService() throws NPE while peer is not able to connect event service and channel has shut down" priority="3" status="10701" created="2020-03-23 04:32:30.0" updated="2021-05-21 10:16:12.0" votes="0" watches="3" workflowId="58554" archived="N"> <description><! CDATA *Environment:*    Fabric SDK Java : 1.4.8    Fabric Gateway Java:  1.4.3    Fabric Network :  https://github.com/hyperledger/fabric-samples/tree/v1.4.6/first-network       (it's running in local laptop)    Environment Varibale in Fabric SDK Java & Gateway Java       - discovery: true       - asLocalhost: false     *Summary:*  It's to be reproduced while start a local fabric network (first-network) , set as asLocalhost to be false and discovery to be true in the fabric sdk.  While channel is being shut down, PeerEventServiceClient gets error on connection and tries to reconnect. but NPE is thrown while getting executor service of channel as client is set to be null.     Error Log {code:java} java.lang.NullPointerException 	at org.hyperledger.fabric.sdk.Channel.getExecutorService(Channel.java:2032) 	at org.hyperledger.fabric.sdk.Peer.getExecutorService(Peer.java:139) 	at org.hyperledger.fabric.sdk.Peer.reconnectPeerEventServiceClient(Peer.java:394) 	at org.hyperledger.fabric.sdk.PeerEventServiceClient$1.onError(PeerEventServiceClient.java:313) 	at io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:442) 	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39) 	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23) 	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40) 	at io.grpc.internal.CensusStatsModule$StatsClientInterceptor$1$1.onClose(CensusStatsModule.java:700) 	at io.grpc.PartialForwardingClientCallListener.onClose(PartialForwardingClientCallListener.java:39) 	at io.grpc.ForwardingClientCallListener.onClose(ForwardingClientCallListener.java:23) 	at io.grpc.ForwardingClientCallListener$SimpleForwardingClientCallListener.onClose(ForwardingClientCallListener.java:40) 	at io.grpc.internal.CensusTracingModule$TracingClientInterceptor$1$1.onClose(CensusTracingModule.java:399) 	at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:510) 	at io.grpc.internal.ClientCallImpl.access$300(ClientCallImpl.java:66) 	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl.close(ClientCallImpl.java:630) 	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl.access$700(ClientCallImpl.java:518) 	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:692) 	at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:681) 	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37) 	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:123) 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) 	at java.lang.Thread.run(Thread.java:748) {code}  ></description> </Issue>
