<Issue id="30406" key="FABJ-189" number="189" project="10605" reporter="sambhavdutt" assignee="aambati" creator="sambhavdutt" type="10004" summary="end-2-end java tests are failing fabric-ca-merge-end-2-end CI tests due to Authentication error." priority="1" resolution="10000" status="6" created="2018-05-18 21:47:16.0" updated="2019-03-19 11:12:58.0" resolutiondate="2018-05-21 20:36:41.0" votes="0" watches="3" workflowId="33627"> <description><! CDATA The sdk-java end-2-end-tests fail due to user Authentication error, this error is observed in multiple instances in the sdk-java e2e tests  *fabric Commit: c6d0e6c* *fabric-ca Commit: c583d33* *fabric-sdk-java Commit: 2294b0a*  {code:java} 20:17:52 2018-05-18 20:17:52,002 main TRACE HFCAClient:1225 - response status 401, HttpEntity ResponseEntityProxy{ Content-Type: application/json,Chunked: true }  20:17:52 2018-05-18 20:17:52,003 main TRACE HFCAClient:1227 - responseBody: {"result":"","errors": {"code":20,"message":"Authorization failure"} 20:17:52  ,"messages":  ,"success":false}  20:17:52 2018-05-18 20:17:52,003 main ERROR HFCAClient:1234 - POST request to https://localhost:7054 failed request body {"id":"user1526674666_13","type":"client","secret":"testUserRevoke","affiliation":"org1.department1","attrs": {"name":"user.role","value":"department lead"},{"name":"hf.Revoker","value":"true"} }. Response: {"result":"","errors": {"code":20,"message":"Authorization failure"} 20:17:52  ,"messages":  ,"success":false} 20:17:52 2018-05-18 20:17:52,003 main ERROR HFCAClient:381 - org.hyperledger.fabric.sdkintegration.SampleUser@4b477121 20:17:52 Tests run: 44, Failures: 17, Errors: 20, Skipped: 2, Time elapsed: 7.981 sec <<< FAILURE! - in org.hyperledger.fabric.sdkintegration.IntegrationSuite 20:17:52 setup(org.hyperledger.fabric.sdkintegration.End2endIT)  Time elapsed: 1.394 sec  <<< ERROR! 20:17:52 org.hyperledger.fabric_ca.sdk.exception.RegistrationException:  20:17:52 Error while registering the user org.hyperledger.fabric.sdkintegration.SampleUser@1cb929a9 url: https://localhost:7054  POST request to https://localhost:7054 failed request body {"id":"user1","type":"client","affiliation":"org1.department1","attrs":  }. Response: {"result":"","errors": {"code":20,"message":"Authorization failure"} 20:17:52  ,"messages":  ,"success":false}  20:17:52 	at org.hyperledger.fabric.sdkintegration.End2endIT.enrollUsersSetup(End2endIT.java:297) 20:17:52 	at org.hyperledger.fabric.sdkintegration.End2endIT.setup(End2endIT.java:186) 20:17:52 Caused by: org.hyperledger.fabric_ca.sdk.exception.HTTPException:  20:17:52 POST request to https://localhost:7054 failed request body {"id":"user1","type":"client","affiliation":"org1.department1","attrs":  }. Response: {"result":"","errors": {"code":20,"message":"Authorization failure"} 20:17:52  ,"messages":  ,"success":false} 20:17:52 	at org.hyperledger.fabric.sdkintegration.End2endIT.enrollUsersSetup(End2endIT.java:297) 20:17:52 	at org.hyperledger.fabric.sdkintegration.End2endIT.setup(End2endIT.java:186) 20:17:52  20:17:52 setup(org.hyperledger.fabric.sdkintegration.End2endAndBackAgainIT)  Time elapsed: 0.024 sec  <<< FAILURE! 20:17:52 java.lang.AssertionError: UserContext for user user1 has no enrollment set. 20:17:52 	at org.hyperledger.fabric.sdkintegration.End2endAndBackAgainIT.setup(End2endAndBackAgainIT.java:225) 20:17:52  20:17:52 setup(org.hyperledger.fabric.sdkintegration.UpdateChannelIT)  Time elapsed: 0.022 sec  <<< FAILURE! 20:17:52 java.lang.AssertionError: UserContext for user peerOrg1Admin has no enrollment set. 20:17:52 	at org.hyperledger.fabric.sdkintegration.UpdateChannelIT.setup(UpdateChannelIT.java:232) 20:17:52  {code}  *Build Log*  https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-merge-end-2-end-x86_64/60/  ></description> </Issue>
