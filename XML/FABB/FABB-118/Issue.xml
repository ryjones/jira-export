<Issue id="38082" key="FABB-118" number="118" project="10608" reporter="zealzeng" creator="zealzeng" type="10004" summary="Failed to start fabric-couchdb:0.4.14 when data persistent is enable" priority="3" resolution="10001" status="6" created="2019-02-28 10:08:29.0" updated="2021-01-14 19:26:35.0" resolutiondate="2021-01-14 19:26:35.0" votes="0" watches="2" workflowId="49702"> <description><! CDATA Upgrade to fabric 1.4 and failed to start fabric-couchdb:0.4.14, compose yaml is below(Or refer to attachment   ^docker-compose-couchdb1.yaml ).  =================================  {code:java} # # Copyright IBM Corp All Rights Reserved # # SPDX-License-Identifier: Apache-2.0 # version: '2'  networks: basic:  services: couchdb1: container_name: couchdb image: hyperledger/fabric-couchdb:0.4.14 #image: couchdb:2.2.0 # Populate the COUCHDB_USER and COUCHDB_PASSWORD to set an admin user and password # for CouchDB.  This will prevent CouchDB from operating in an "Admin Party" mode. environment: - COUCHDB_USER=admin - COUCHDB_PASSWORD=adminpwd - NODENAME=192.168.31.86 - ERL_FLAGS=-setcookie "brumbrum" -kernel inet_dist_listen_min 9100 -kernel inet_dist_listen_max 9100 - COUCHDB_SECRET=1234567890 ports: - 5984:5984 #- 5986:5986 - 4369:4369 - 9100:9100 volumes: - ./couchdb1/data:/opt/couchdb/data #  - ./couchdb1/etc/local.ini:/opt/couchdb/etc/local.ini #  - ./couchdb1/etc/vm.args:/opt/couchdb/etc/vm.args #networks: #  - basic  {code}   =================================  The error log：  {code:java}  info  2019-02-28T02:26:30.379926Z couchdb@192.168.31.86 <0.202.0> -------- Starting couch_sup  notice  2019-02-28T02:26:30.397423Z couchdb@192.168.31.86 <0.89.0> -------- config:  features  pluggable-storage-engines set to true for reason nil  notice  2019-02-28T02:26:30.439754Z couchdb@192.168.31.86 <0.89.0> -------- config:  couchdb  uuid set to 0a37eff60e00b95df0e4f0c5e70c4ade for reason nil  info  2019-02-28T02:26:30.582824Z couchdb@192.168.31.86 <0.207.0> -------- open_result error \{not_found,no_db_file} for _users  error  2019-02-28T02:26:30.584696Z couchdb@192.168.31.86 <0.250.0> -------- Could not open file ./data/_users.couch: permission denied  info  2019-02-28T02:26:30.584850Z couchdb@192.168.31.86 <0.207.0> -------- open_result error \{error,eacces} for _users  error  2019-02-28T02:26:30.585260Z couchdb@192.168.31.86 <0.242.0> -------- CRASH REPORT Process (<0.242.0>) with 1 neighbors exited with reason: no match of right hand value \{error,eacces} at couch_auth_cache:ensure_users_db_exists/2(line:447) <= couch_auth_cache:open_auth_db/0(line:419) <= couch_auth_cache:reinit_cache/1(line:282) <= couch_auth_cache:init/1(line:164) <= gen_server:init_it/6(line:328) <= proc_lib:init_p_do_apply/3(line:240) at gen_server:init_it/6(line:352) <= proc_lib:init_p_do_apply/3(line:240); initial_call: \{couch_auth_cache,init, 'Argument__1' }, ancestors:  couch_secondary_services,couch_sup,<0.201.0> , messages:   , links:  <0.210.0>,<0.244.0> , dictionary:   , trap_exit: true, status: running, heap_size: 987, stack_size: 27, reductions: 366  error  2019-02-28T02:26:30.586193Z couchdb@192.168.31.86 <0.201.0> -------- Error starting Apache CouchDB: {code}  While using official image couchdb:2.2.0, it works fine.        ></description> </Issue>
