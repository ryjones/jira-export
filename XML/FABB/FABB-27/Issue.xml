<Issue id="13165" key="FABB-27" number="27" project="10608" reporter="wayoon" assignee="muralisr" creator="wayoon" type="10004" summary="GetRows crashes if  rows are more than 100" priority="2" resolution="10000" status="6" created="2016-10-25 14:35:05.0" updated="2018-07-18 14:53:49.0" resolutiondate="2016-11-05 11:20:41.0" votes="0" watches="5" workflowId="32095"> <description><! CDATA GetRows crashes with the following error when returning rows are more than 100.  {code} 14:13:22.585  shim  DEBU :  5247bec6 Received message ERROR from shim 14:13:22.586  shim  DEBU :  5247bec6 Handling ChaincodeMessage of type: ERROR(state:ready) Error starting Simple chaincode: Error handling message:  5247bec6-0d75-4741-b7e1-a470cf1baf43 XXXXXXXXXXXXXXXXXX Chaincode handler FSM cannot handle message (ERROR) with payload size (30) while in state: ready {code}  Here's my test code and output {code} func (t *SimpleChaincode) queryTest(stub shim.ChaincodeStubInterface, args   string) (  byte, error) { 	mylogger.Debugf("---queryTest %v", args)  	userid := "sally1111" 	dataitem := "monitored_data"  	var keys =   shim.Column{} 	keyUser := shim.Column{Value: &shim.Column_String_{String_: userid}} 	keyData := shim.Column{Value: &shim.Column_String_{String_: dataitem}}  	keys = append(keys, keyUser) 	keys = append(keys, keyData)  	rowChannel, err := stub.GetRows("UserData", keys) 	if err != nil { 		return nil, fmt.Errorf("getRows operation failed. %s", err) 	}  	var rows   shim.Row 	for { 		select { 		case row, ok := <-rowChannel: 			if !ok { 				rowChannel = nil 			} else { 				rows = append(rows, row) 				mylogger.Debugf("count = %v", len(rows)) 			} 		} 		if rowChannel == nil { 			break 		} 	} 	 	mylogger.Debugf("total count = %v", len(rows))  	return nil, nil } {code}  output: {code} 14:13:22.550  consetnt_mgm  DEBU : ---queryTest  WebAppAdmin DJY27pEnl16d consentmanager  14:13:22.550  shim  DEBU :  5247bec6 Sending GET_STATE 14:13:22.552  shim  DEBU :  5247bec6 Received message RESPONSE from shim 14:13:22.552  shim  DEBU :  5247bec6 Handling ChaincodeMessage of type: RESPONSE(state:ready) 14:13:22.552  shim  DEBU :  5247bec6 before send 14:13:22.552  shim  DEBU :  5247bec6 GetState received payload RESPONSE 14:13:22.552  shim  DEBU :  5247bec6 after send 14:13:22.552  shim  DEBU :  5247bec6 Received RESPONSE, communicated (state:ready) 14:13:22.552  shim  DEBU : keyString= 8UserData9sally111114monitored_data 14:13:22.553  shim  DEBU :  5247bec6 Sending RANGE_QUERY_STATE 14:13:22.580  shim  DEBU :  5247bec6 Received message RESPONSE from shim 14:13:22.580  shim  DEBU :  5247bec6 Handling ChaincodeMessage of type: RESPONSE(state:ready) 14:13:22.580  shim  DEBU :  5247bec6 before send 14:13:22.580  shim  DEBU :  5247bec6 after send 14:13:22.580  shim  DEBU :  5247bec6 Received RESPONSE, communicated (state:ready) 14:13:22.580  shim  DEBU :  5247bec6 Received RESPONSE. Successfully got range 14:13:22.581  shim  DEBU :  5247bec6 Sending RANGE_QUERY_STATE_CLOSE 14:13:22.582  shim  DEBU :  5247bec6 Received message RESPONSE from shim 14:13:22.582  shim  DEBU :  5247bec6 Handling ChaincodeMessage of type: RESPONSE(state:ready) 14:13:22.582  shim  DEBU :  5247bec6 before send 14:13:22.582  shim  DEBU :  5247bec6 after send 14:13:22.582  shim  DEBU :  5247bec6 Received RESPONSE, communicated (state:ready) 14:13:22.582  shim  DEBU :  5247bec6 Received RESPONSE. Successfully got range 14:13:22.582  consetnt_mgm  DEBU : count = 1 14:13:22.582  consetnt_mgm  DEBU : count = 2 14:13:22.582  consetnt_mgm  DEBU : count = 3 14:13:22.582  consetnt_mgm  DEBU : count = 4 14:13:22.582  consetnt_mgm  DEBU : count = 5 14:13:22.582  consetnt_mgm  DEBU : count = 6 14:13:22.582  consetnt_mgm  DEBU : count = 7 14:13:22.582  consetnt_mgm  DEBU : count = 8 14:13:22.582  consetnt_mgm  DEBU : count = 9 14:13:22.582  consetnt_mgm  DEBU : count = 10 14:13:22.582  consetnt_mgm  DEBU : count = 11 14:13:22.582  consetnt_mgm  DEBU : count = 12 14:13:22.582  consetnt_mgm  DEBU : count = 13 14:13:22.582  consetnt_mgm  DEBU : count = 14 14:13:22.582  consetnt_mgm  DEBU : count = 15 14:13:22.582  consetnt_mgm  DEBU : count = 16 14:13:22.582  consetnt_mgm  DEBU : count = 17 14:13:22.582  consetnt_mgm  DEBU : count = 18 14:13:22.582  consetnt_mgm  DEBU : count = 19 14:13:22.582  consetnt_mgm  DEBU : count = 20 14:13:22.582  consetnt_mgm  DEBU : count = 21 14:13:22.582  consetnt_mgm  DEBU : count = 22 14:13:22.582  consetnt_mgm  DEBU : count = 23 14:13:22.583  consetnt_mgm  DEBU : count = 24 14:13:22.583  consetnt_mgm  DEBU : count = 25 14:13:22.583  consetnt_mgm  DEBU : count = 26 14:13:22.583  consetnt_mgm  DEBU : count = 27 14:13:22.583  consetnt_mgm  DEBU : count = 28 14:13:22.583  consetnt_mgm  DEBU : count = 29 14:13:22.583  consetnt_mgm  DEBU : count = 30 14:13:22.583  consetnt_mgm  DEBU : count = 31 14:13:22.583  consetnt_mgm  DEBU : count = 32 14:13:22.583  consetnt_mgm  DEBU : count = 33 14:13:22.583  consetnt_mgm  DEBU : count = 34 14:13:22.583  consetnt_mgm  DEBU : count = 35 14:13:22.583  consetnt_mgm  DEBU : count = 36 14:13:22.583  consetnt_mgm  DEBU : count = 37 14:13:22.583  consetnt_mgm  DEBU : count = 38 14:13:22.583  consetnt_mgm  DEBU : count = 39 14:13:22.583  consetnt_mgm  DEBU : count = 40 14:13:22.583  consetnt_mgm  DEBU : count = 41 14:13:22.583  consetnt_mgm  DEBU : count = 42 14:13:22.583  consetnt_mgm  DEBU : count = 43 14:13:22.583  consetnt_mgm  DEBU : count = 44 14:13:22.583  consetnt_mgm  DEBU : count = 45 14:13:22.583  consetnt_mgm  DEBU : count = 46 14:13:22.583  consetnt_mgm  DEBU : count = 47 14:13:22.583  consetnt_mgm  DEBU : count = 48 14:13:22.583  consetnt_mgm  DEBU : count = 49 14:13:22.583  consetnt_mgm  DEBU : count = 50 14:13:22.583  consetnt_mgm  DEBU : count = 51 14:13:22.583  consetnt_mgm  DEBU : count = 52 14:13:22.583  consetnt_mgm  DEBU : count = 53 14:13:22.583  consetnt_mgm  DEBU : count = 54 14:13:22.583  consetnt_mgm  DEBU : count = 55 14:13:22.583  consetnt_mgm  DEBU : count = 56 14:13:22.583  consetnt_mgm  DEBU : count = 57 14:13:22.583  consetnt_mgm  DEBU : count = 58 14:13:22.583  consetnt_mgm  DEBU : count = 59 14:13:22.583  consetnt_mgm  DEBU : count = 60 14:13:22.583  consetnt_mgm  DEBU : count = 61 14:13:22.583  consetnt_mgm  DEBU : count = 62 14:13:22.583  consetnt_mgm  DEBU : count = 63 14:13:22.583  consetnt_mgm  DEBU : count = 64 14:13:22.583  consetnt_mgm  DEBU : count = 65 14:13:22.583  consetnt_mgm  DEBU : count = 66 14:13:22.583  consetnt_mgm  DEBU : count = 67 14:13:22.583  consetnt_mgm  DEBU : count = 68 14:13:22.583  consetnt_mgm  DEBU : count = 69 14:13:22.583  consetnt_mgm  DEBU : count = 70 14:13:22.583  consetnt_mgm  DEBU : count = 71 14:13:22.583  consetnt_mgm  DEBU : count = 72 14:13:22.583  consetnt_mgm  DEBU : count = 73 14:13:22.583  consetnt_mgm  DEBU : count = 74 14:13:22.583  consetnt_mgm  DEBU : count = 75 14:13:22.583  consetnt_mgm  DEBU : count = 76 14:13:22.583  consetnt_mgm  DEBU : count = 77 14:13:22.583  consetnt_mgm  DEBU : count = 78 14:13:22.583  consetnt_mgm  DEBU : count = 79 14:13:22.583  consetnt_mgm  DEBU : count = 80 14:13:22.583  consetnt_mgm  DEBU : count = 81 14:13:22.583  consetnt_mgm  DEBU : count = 82 14:13:22.583  consetnt_mgm  DEBU : count = 83 14:13:22.583  consetnt_mgm  DEBU : count = 84 14:13:22.584  consetnt_mgm  DEBU : count = 85 14:13:22.584  consetnt_mgm  DEBU : count = 86 14:13:22.584  consetnt_mgm  DEBU : count = 87 14:13:22.584  consetnt_mgm  DEBU : count = 88 14:13:22.584  consetnt_mgm  DEBU : count = 89 14:13:22.584  consetnt_mgm  DEBU : count = 90 14:13:22.584  consetnt_mgm  DEBU : count = 91 14:13:22.584  consetnt_mgm  DEBU : count = 92 14:13:22.584  consetnt_mgm  DEBU : count = 93 14:13:22.584  consetnt_mgm  DEBU : count = 94 14:13:22.584  consetnt_mgm  DEBU : count = 95 14:13:22.584  consetnt_mgm  DEBU : count = 96 14:13:22.584  consetnt_mgm  DEBU : count = 97 14:13:22.584  consetnt_mgm  DEBU : count = 98 14:13:22.584  consetnt_mgm  DEBU : count = 99 14:13:22.584  shim  DEBU :  5247bec6 Sending RANGE_QUERY_STATE_NEXT 14:13:22.584  consetnt_mgm  DEBU : count = 100 14:13:22.585  shim  DEBU :  5247bec6 Received message ERROR from shim 14:13:22.586  shim  DEBU :  5247bec6 Handling ChaincodeMessage of type: ERROR(state:ready) Error starting Simple chaincode: Error handling message:  5247bec6-0d75-4741-b7e1-a470cf1baf43 XXXXXXXXXXXXXXXXXX Chaincode handler FSM cannot handle message (ERROR) with payload size (30) while in state: ready vagrant@hyperledger-devenv:v0.0.11-ed90562:/opt/gopath/src/consentmanager$ {code}  ></description> </Issue>
