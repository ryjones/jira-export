<Issue id="13877" key="FABB-45" number="45" project="10608" reporter="kchristidis" assignee="greg.haskins" creator="kchristidis" type="10004" summary="make protos doesn&apos;t work" priority="3" resolution="10000" status="6" created="2016-12-21 23:10:34.0" updated="2018-07-18 14:53:54.0" resolutiondate="2017-01-10 21:51:25.0" votes="0" watches="3" workflowId="32113"> <description><! CDATA I destroy my Vagrant environment, rebuild it, and proceed to "make protos". Here's its output:  {code} vagrant@hyperledger-devenv:v0.2.2-5adaef7:/opt/gopath/src/github.com/hyperledger/fabric$ make protos Unable to find image 'hyperledger/fabric-baseimage:x86_64-0.2.2' locally x86_64-0.2.2: Pulling from hyperledger/fabric-baseimage  af49a5ceb2a5: Pull complete 8f9757b472e7: Pull complete e931b117db38: Pull complete 47b5e16c0811: Pull complete 9332eaf1a55b: Pull complete 95bdd37821eb: Pull complete 2af301fab12e: Pull complete Digest: sha256:b701179a194d9b3a92ec60c9c9eab0bb780c6b1f2c4f6ebf838e1ad351fc9052 Status: Downloaded newer image for hyperledger/fabric-baseimage:x86_64-0.2.2 make 1 : Entering directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools' Building github.com/golang/lint/golint -> golint make 1 : Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools' make 1 : Entering directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools' Building github.com/kardianos/govendor -> govendor make 1 : Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools' make 1 : Entering directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools' Building golang.org/x/tools/cmd/goimports -> goimports make 1 : Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools' make 1 : Entering directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools' Building github.com/golang/protobuf/protoc-gen-go -> protoc-gen-go make 1 : Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools' make 1 : Entering directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools' Building github.com/onsi/ginkgo/ginkgo -> ginkgo make 1 : Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools' make 1 : Entering directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools' Building github.com/axw/gocov/... -> gocov make 1 : Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools' make 1 : Entering directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools' Building github.com/AlekSi/gocov-xml -> gocov-xml make 1 : Leaving directory '/opt/gopath/src/github.com/hyperledger/fabric/gotools' cp /opt/gotools/obj/gopath/bin/golint /opt/gotools/obj/gopath/bin/govendor /opt/gotools/obj/gopath/bin/goimports /opt/gotools/obj/gopath/bin/protoc-gen-go /opt/gotools/obj/gopath/bin/ginkgo /opt/gotools/obj/gopath/bin/gocov /opt/gotools/obj/gopath/bin/gocov-xml /opt/gotools/bin (cd build/docker/gotools/bin && tar -jc *) > build/gotools.tar.bz2 mkdir -p build/image/testenv/payload cp build/gotools.tar.bz2 build/image/testenv/payload Building docker testenv-image docker build  -t hyperledger/fabric-testenv build/image/testenv Sending build context to Docker daemon 11.95 MB Step 1 : FROM hyperledger/fabric-baseimage:x86_64-0.2.2 ---> 4ac07a26ca7a Step 2 : ADD payload/gotools.tar.bz2 /usr/local/bin/ ---> 264ee103c8f5 Removing intermediate container 2bf9f79e6f4c Step 3 : WORKDIR /opt/gopath/src/github.com/hyperledger/fabric ---> Running in 8936a80006d9 ---> 4a09d8201354 Removing intermediate container 8936a80006d9 Successfully built 4a09d8201354 docker tag hyperledger/fabric-testenv hyperledger/fabric-testenv:x86_64-0.7.0-snapshot-2ff045d ++ find . -name .protoroot -exec readlink -f '{}' ';' + PROTO_ROOT_FILES='/opt/gopath/src/github.com/hyperledger/fabric/orderer/sbft/.protoroot /opt/gopath/src/github.com/hyperledger/fabric/protos/.protoroot' ++ dirname /opt/gopath/src/github.com/hyperledger/fabric/orderer/sbft/.protoroot /opt/gopath/src/github.com/hyperledger/fabric/protos/.protoroot + PROTO_ROOT_DIRS='/opt/gopath/src/github.com/hyperledger/fabric/orderer/sbft /opt/gopath/src/github.com/hyperledger/fabric/protos' +++ for dir in '$PROTO_ROOT_DIRS' +++ echo '-path /opt/gopath/src/github.com/hyperledger/fabric/orderer/sbft -prune -o ' +++ for dir in '$PROTO_ROOT_DIRS' +++ echo '-path /opt/gopath/src/github.com/hyperledger/fabric/protos -prune -o ' ++ find /opt/gopath/src/github.com/hyperledger/fabric -path /opt/gopath/src/github.com/hyperledger/fabric/orderer/sbft -prune -o -path /opt/gopath/src/github.com/hyperledger/fabric/protos -prune -o -path /opt/gopath/src/github.com/hyperledger/fabric/vendor -prune -o -path /opt/gopath/src/github.com/hyperledger/fabric/gotools -prune -o -path /opt/gopath/src/github.com/hyperledger/fabric/build -prune -o -name '*.proto' -exec readlink -f '{}' ';' + ROOTLESS_PROTO_FILES='/opt/gopath/src/github.com/hyperledger/fabric/accesscontrol/attributes/proto/attributes.proto /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/table.proto /opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc/test.proto /opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/go/utxo/util/dah.proto /opt/gopath/src/github.com/hyperledger/fabric/gossip/proto/message.proto /opt/gopath/src/github.com/hyperledger/fabric/msp/identities.proto' ++ dirname /opt/gopath/src/github.com/hyperledger/fabric/accesscontrol/attributes/proto/attributes.proto /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/table.proto /opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc/test.proto /opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/go/utxo/util/dah.proto /opt/gopath/src/github.com/hyperledger/fabric/gossip/proto/message.proto /opt/gopath/src/github.com/hyperledger/fabric/msp/identities.proto ++ sort ++ uniq + ROOTLESS_PROTO_DIRS='/opt/gopath/src/github.com/hyperledger/fabric/accesscontrol/attributes/proto /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim /opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc /opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/go/utxo/util /opt/gopath/src/github.com/hyperledger/fabric/gossip/proto /opt/gopath/src/github.com/hyperledger/fabric/msp' Working on dir /opt/gopath/src/github.com/hyperledger/fabric/accesscontrol/attributes/proto + for dir in '$ROOTLESS_PROTO_DIRS' '$PROTO_ROOT_DIRS' + echo Working on dir /opt/gopath/src/github.com/hyperledger/fabric/accesscontrol/attributes/proto ++ sort ++ uniq ++ find /opt/gopath/src/github.com/hyperledger/fabric/accesscontrol/attributes/proto -name '*.proto' -exec dirname '{}' ';' + for protos in '$(find "$dir" -name '\''*.proto'\'' -exec dirname {} \; | sort | uniq)' + protoc --proto_path=/opt/gopath/src/github.com/hyperledger/fabric/accesscontrol/attributes/proto --go_out=plugins=grpc:/opt/gopath/src /opt/gopath/src/github.com/hyperledger/fabric/accesscontrol/attributes/proto/attributes.proto + for dir in '$ROOTLESS_PROTO_DIRS' '$PROTO_ROOT_DIRS' + echo Working on dir /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim Working on dir /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim ++ find /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim -name '*.proto' -exec dirname '{}' ';' ++ uniq ++ sort + for protos in '$(find "$dir" -name '\''*.proto'\'' -exec dirname {} \; | sort | uniq)' + protoc --proto_path=/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim --go_out=plugins=grpc:/opt/gopath/src /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/table.proto + for dir in '$ROOTLESS_PROTO_DIRS' '$PROTO_ROOT_DIRS' + echo Working on dir /opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc Working on dir /opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc ++ find /opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc -name '*.proto' -exec dirname '{}' ';' ++ uniq ++ sort + for protos in '$(find "$dir" -name '\''*.proto'\'' -exec dirname {} \; | sort | uniq)' + protoc --proto_path=/opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc --go_out=plugins=grpc:/opt/gopath/src /opt/gopath/src/github.com/hyperledger/fabric/core/comm/testdata/grpc/test.proto /opt/gopath/src/test.pb.go: Permission deniedMakefile:223: recipe for target 'protos' failed make: ***  protos  Error 1 vagrant@hyperledger-devenv:v0.2.2-5adaef7:/opt/gopath/src/github.com/hyperledger/fabric$ {code}   ></description> </Issue>
