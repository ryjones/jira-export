<Issue id="45271" key="FABB-151" number="151" project="10608" reporter="manish-sethi" assignee="denyeart" creator="manish-sethi" type="10004" summary="Remove delayed_commits=true from couchdb configs" priority="3" resolution="10000" status="6" created="2020-06-15 19:08:43.0" updated="2020-06-25 12:10:57.0" resolutiondate="2020-06-25 12:10:57.0" votes="0" watches="4" workflowId="59184" archived="N"> <description><! CDATA We use `delayed_commits=true` in couchdb config for better performance and then at the block commit time, we invoke `_ensure_full_commit`. This arrangement was under the assumption that the `_ensure_full_commit` `fsyncs` the data as per the couchdb docs -  https://docs.couchdb.org/en/2.3.1/api/database/compact.html#db-ensure-full-commit.  However, after talking to couchdb folks, we figured that this was true only until couchdb 1.x. Since then, the `_ensure_full_commit` is more or less a fake call as far as `fsync` is concerned.  Â   We need to configure remove `delayed_commits=true` from the couchdb configs and remove the unnecessary calls to `_ensure_full_commit`. Also, in couchdb 3.0, these have been removed -  https://github.com/apache/couchdb/issues/2165   ></description> </Issue>
