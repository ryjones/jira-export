<Issue id="15090" key="FABB-39" number="39" project="10608" reporter="ynamiki" creator="ynamiki" type="10004" summary="Unit test fails behind proxy" priority="3" resolution="10000" status="6" created="2017-02-28 02:48:11.0" updated="2018-07-18 14:53:52.0" resolutiondate="2017-04-09 20:27:00.0" votes="0" watches="2" workflowId="32107"> <description><! CDATA `make` fails at unit test with the following error.  Docker might not see the proxy configuration.  Fabric revision: 7134f9f270317958fc5718762882930c3a2d4a38  {noformat} $ http_proxy="<proxy>" https_proxy="<proxy>" make ... unit-tests_1  | 2017/02/28 02:22:12 setting Number of procs to -1, was 2 unit-tests_1  | 2017/02/28 02:22:12 KeyStore path  msp/sampleconfig/keystore  missing  true :  <clean>  unit-tests_1  | 2017/02/28 02:22:12 Creating KeyStore at  msp/sampleconfig/keystore ... unit-tests_1  | 2017/02/28 02:22:12 KeyStore created at  msp/sampleconfig/keystore . unit-tests_1  | 2017/02/28 02:22:12 KeyStore opened at  msp/sampleconfig/keystore ...done unit-tests_1  | 2017/02/28 02:22:12 Initialize BCCSP  SW  unit-tests_1  | 2017/02/28 02:22:12 unit-tests_1  | FROM hyperledger/fabric-baseos:x86_64-0.3.0 unit-tests_1  | ADD binpackage.tar /usr/local/bin unit-tests_1  | LABEL org.hyperledger.fabric.chaincode.id.name="cartest" \ unit-tests_1  |       org.hyperledger.fabric.chaincode.id.version="" \ unit-tests_1  |       org.hyperledger.fabric.chaincode.type="CAR" \ unit-tests_1  |       org.hyperledger.fabric.version="0.7.0-snapshot-7134f9f" \ unit-tests_1  |       org.hyperledger.fabric.base.version="0.3.0" unit-tests_1  | 2017/02/28 02:22:35 Failed to generate platform-specific docker build: Error building CAR: Error returned from build: 255 "Building CAR /chaincode/input/codepackage.car unit-tests_1  |  CCI  parse org.hyperledger.chaincode.example02 unit-tests_1  |  CCI  parse appinit unit-tests_1  |  PB  protoc --go_out=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaincode/example02 --proto_path=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaincode/example02 /tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaincode/example02/interface.proto unit-tests_1  |  PB  protoc --go_out=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/appinit --proto_path=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/appinit /tmp/buildcar-1488248538670-1650840794/bu ild/src/hyperledger/cci/appinit/interface.proto unit-tests_1  |  PB  protoc --go_out=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaintool/meta --proto_path=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaintool/meta /tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaintool/meta/interface.proto unit-tests_1  |  GO  go get -d -v chaincode unit-tests_1  |  Using GOPATH /tmp/buildcar-1488248538670-1650840794/build/deps:/tmp/buildcar-1488248538670-1650840794/build:/tmp/buildcar-1488248538670-1650840794:/opt/gopath unit-tests_1  | Error: github.com/golang/protobuf (download) unit-tests_1  | # cd .; git clone https://github.com/golang/protobuf /tmp/buildcar-1488248538670-1650840794/build/deps/src/github.com/golang/protobuf unit-tests_1  | Cloning into '/tmp/buildcar-1488248538670-1650840794/build/deps/src/github.com/golang/protobuf'... unit-tests_1  | fatal: unable to access 'https://github.com/golang/protobuf/': Failed to connect to github.com port 443: No route to host unit-tests_1  | package github.com/golang/protobuf/proto: exit status 128 unit-tests_1  | unit-tests_1  | " unit-tests_1  | --- FAIL: TestCar_BuildImage (22.53s) unit-tests_1  |  platform_test.go:51: Error building docker: Failed to generate platform-specific docker build: Error building CAR: Error returned from build: 255 "Building CAR /chaincode/input/codepackage.car unit-tests_1  |           CCI  parse org.hyperledger.chaincode.example02 unit-tests_1  |           CCI  parse appinit unit-tests_1  |           PB  protoc --go_out=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaincode/example02 --proto_path=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaincode/example02 /tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaincode/example02/interface.proto unit-tests_1  | unit-tests_1  |           PB  protoc --go_out=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/appinit --proto_path=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/appinit /tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/appinit/interface.proto unit-tests_1  | unit-tests_1  |           PB  protoc --go_out=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaintool/meta --proto_path=/tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaintool/meta /tmp/buildcar-1488248538670-1650840794/build/src/hyperledger/cci/org/hyperledger/chaintool/meta/interface.proto unit-tests_1  | unit-tests_1  |           GO  go get -d -v chaincode unit-tests_1  |                  Using GOPATH /tmp/buildcar-1488248538670-1650840794/build/deps:/tmp/buildcar-1488248538670-1650840794/build:/tmp/buildcar-1488248538670-1650840794:/opt/gopath unit-tests_1  |          Error: github.com/golang/protobuf (download) unit-tests_1  |          # cd .; git clone https://github.com/golang/protobuf /tmp/buildcar-1488248538670-1650840794/build/deps/src/github.com/golang/protobuf unit-tests_1  |          Cloning into '/tmp/buildcar-1488248538670-1650840794/build/deps/src/github.com/golang/protobuf'... unit-tests_1  |          fatal: unable to access 'https://github.com/golang/protobuf/': Failed to connect to github.com port 443: No route to host unit-tests_1  |          package github.com/golang/protobuf/proto: exit status 128 unit-tests_1  | unit-tests_1  |          " (output = ) unit-tests_1  | FAIL unit-tests_1  | coverage: 0.0% of statements unit-tests_1  | FAIL     github.com/hyperledger/fabric/core/chaincode/platforms/car/test 22.551s unit-tests_1  | error: exit status 1 {noformat}    ></description> </Issue>
