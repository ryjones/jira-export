<Issue id="31437" key="STL-1314" number="1314" project="10001" reporter="yoni" assignee="shoan29" creator="yoni" type="10004" summary="batch with no transactions causes endless loop in validator publisher" environment="sawtooth 1.0.4-1 installed directly on Ubuntu." priority="3" status="10002" created="2018-06-28 08:37:32.0" updated="2019-05-23 14:24:57.0" votes="0" watches="1" workflowId="31451"> <description><! CDATA Bug reported by TASE.  Post empty batch without any transactions, the validator log is entering endless loop of the following print:  2018-06-28 14:31:54.405 DEBUG publisher  Abandoning block (1, S:, P:9f12a491): no batches added     following are the steps to reproduce: * edit  https://github.com/hyperledger/sawtooth-core/blob/master/sdk/examples/intkey_python/sawtooth_intkey/client_cli/create_batch.py   remove following strikethrough lines:  def create_batch(transactions, signer): transaction_signatures =  t.header_signature for t in transactions   header = batch_pb2.BatchHeader( signer_public_key=signer.get_public_key().as_hex(), -transaction_ids=transaction_signatures-)  header_bytes = header.SerializeToString()  signature = signer.sign(header_bytes)  batch = batch_pb2.Batch( header=header_bytes, -transactions=transactions,- header_signature=signature)  return batch    * run sudo python3 setup.py install * run intkey create_batch and load     ></description> </Issue>
