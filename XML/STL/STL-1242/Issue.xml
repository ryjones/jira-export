<Issue id="30198" key="STL-1242" number="1242" project="10001" reporter="askmish" assignee="JIRAUSER20226" creator="askmish" type="10004" summary="pyformance sends nan values to influxdb" priority="3" status="10100" created="2018-05-15 06:26:40.0" updated="2020-06-08 14:21:49.0" votes="0" watches="2" workflowId="30205"> <description><! CDATA Pyformance on certain occasions, sends nan values instead of 0. This happens everytime, consistently if python values of metrics vars are None or undefined. Influxdb is unable to parse nan.  As of today, pyformance doesn't have such abilities to filter out or substitute 0 for None. Either we have to change our code to ensure we don't send None values to pyformance or replace the pyformance with a library that does the filtering at client side or add an extra library like Kapacitor at influxdb server side.  Here's a sample log of the response from influxdb: Content-Length: 588 Connection: close  {"error":"partial write: unable to parse 'sawtooth_validator.completer.Completer.incomplete_batches_length,host=ubuntu-desktop value=nan 1521708718': invalid number\nunable to parse 'sawtooth_validator.chain.ChainController.block_num,host=ubuntu-desktop value=nan 1521708718': invalid number\nunable to parse 'sawtooth_validator.completer.Completer.seen_txns_length,host=ubuntu-desktop value=nan 1521708718': invalid number\nunable to parse 'sawtooth_validator.completer.Completer.incomplete_blocks_length,host=ubuntu-desktop value=nan 1521708718': invalid number dropped=0"}    ></description> </Issue>
