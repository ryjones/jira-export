<Issue id="29750" key="STL-1203" number="1203" project="10001" reporter="delventhalz" assignee="richardhill" creator="delventhalz" type="10004" summary="Invalid Batches sometimes return &quot;pending&quot; status when queried" priority="3" status="10100" created="2018-04-26 21:57:19.0" updated="2019-05-21 14:33:32.0" votes="0" watches="1" workflowId="29756"> <description><! CDATA Under certain conditions a Batch rejected by the validator is inappropriately given a status of "PENDING". It is possible to trigger this condition by submitting a Transaction with an invalid input address (specifically one that does not match the hexadecimal format), and then querying the `/batch_statuses` endpoint after the validator rejects it.  This can be demonstrated with this python script from  ~ailisp , who originally reported the issue:  https://gist.github.com/ailisp/6293ebdac7d6a07c33d55c0ed33b03c7   Steps to reproduce: - From sawtooth-core run `docker-compose -f docker/compose/sawtooth-default.yaml up` - Save above script to `test.py` - Run `python test.py`  You should see logs similar to this:  {{sawtooth-validator-default |  2018-04-26 21:41:03.874 INFO     executor  Exception creating context: Address or namespace asdfsfasfss listed in inputs is not valid}}{{sawtooth-validator-default |  2018-04-26 21:41:03.974 DEBUG    publisher  Batch 94d20adbcf7a2eb8abf9b22b5dbdac5754af424b7a0232ef69cf3e5201406b1914985b2010091b12fdae229585ad076a2381bcd37121403623896830645a7405 invalid, not added to block.}}  Running `curl localhost:8008/batch_statuses?id=<id from logs>` should confirm the logs from the script. The batch is still pending.  ></description> </Issue>
