<Issue id="27757" key="STL-1064" number="1064" project="10001" reporter="benoit.razet" assignee="pschwarz" creator="benoit.razet" type="10004" summary="Validator freeze when too many batches are submitted" priority="1" resolution="10000" status="10001" created="2018-02-15 02:15:33.0" updated="2018-02-19 15:36:11.0" resolutiondate="2018-02-19 15:36:11.0" votes="0" watches="3" workflowId="27759"> <description><! CDATA *Description:* When there are too many batches submitted concurrently through one rest api, the validator freezes.  *Reproducibility:* The bug is reproducible with the following modification to the Intkey test using the Python SDK. Submit additional Intkey transaction at high frequency in the test test_intkey_smoke.python.py and run concurrently more than 50 instances of this test.  The following branch allows to reproduce the bug:  https://github.com/benoitrazet/sawtooth-core/tree/validator_freeze   start the validator and the other containers in one terminal:  ./bin/run_docker_test test_intkey_smoke_python  in another terminal enter the test container and then run the test  docker exec -it latest_test-intkey-smoke-python_1 bash  for i in \{1..100}; do nose2-3 -c /project/sawtooth-core/integration/sawtooth_integration/nose2.cfg -v -s /project/sawtooth-core/integration/sawtooth_integration/tests test_intkey_smoke.TestIntkeySmoke & sleep 0.1 ; done  Looking at the logs of the first terminal should show eventually the validator freezing  *Remarks:* * we have observed that sometimes, if a 2nd restapi is connected to the validator, it is possible to submit transactions to this 2nd rest-api and the validator will process the batches.  * We have observed (without guaranteed reproducibility) that sometimes once the validator freezes, it may eventually unfreeze (after several minutes) and be able to process new batches submitted.  ></description> </Issue>
