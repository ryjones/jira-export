<Issue id="16655" key="STL-192" number="192" project="10001" reporter="cintel" assignee="adamludvik" creator="cintel" type="10005" summary="run_tests needs to clearly indicate success or failure. " priority="3" resolution="10000" status="10001" created="2017-05-11 18:02:29.0" updated="2018-02-01 16:52:39.0" resolutiondate="2018-02-01 16:52:39.0" votes="0" watches="1" workflowId="16656"> <description><! CDATA The final line issued by run_tests needs to indicate SUCCESS or FAILURE so developers can quickly determine the outcome of the tests.      The current output the first error message is 25 lines before the end of the output and is scrolled off the screen on default sized console windows.     integration_test_1 | Ran 1 test in 1.781s integration_test_1 |  integration_test_1 | FAILED (failures=1) integration_test_1 | ----------- coverage: platform linux, python 3.5.2-final-0 ----------- integration_test_1 | Name Stmts Miss Cover integration_test_1 | --------------------------------------------------------------------------------- integration_test_1 | bin/sawtooth 10 0 100% integration_test_1 | cli/sawtooth_cli/__init__.py 1 0 100% integration_test_1 | cli/sawtooth_cli/admin.py 16 5 69% integration_test_1 | cli/sawtooth_cli/admin_command/__init__.py 1 0 100% integration_test_1 | cli/sawtooth_cli/admin_command/config.py 28 21 25% integration_test_1 | cli/sawtooth_cli/admin_command/genesis.py 44 32 27% integration_test_1 | cli/sawtooth_cli/admin_command/keygen.py 48 37 23% integration_test_1 | cli/sawtooth_cli/batch.py 51 32 37% integration_test_1 | cli/sawtooth_cli/block.py 53 34 36% integration_test_1 | cli/sawtooth_cli/cluster.py 241 185 23% integration_test_1 | cli/sawtooth_cli/config.py 237 130 45% integration_test_1 | cli/sawtooth_cli/exceptions.py 3 0 100% integration_test_1 | cli/sawtooth_cli/format_utils.py 42 31 26% integration_test_1 | cli/sawtooth_cli/keygen.py 59 46 22% integration_test_1 | cli/sawtooth_cli/main.py 99 26 74% integration_test_1 | cli/sawtooth_cli/protobuf/__init__.py 0 0 100% integration_test_1 | cli/sawtooth_cli/protobuf/batch_pb2.py 27 0 100% integration_test_1 | cli/sawtooth_cli/protobuf/config_pb2.py 47 0 100% integration_test_1 | cli/sawtooth_cli/protobuf/genesis_pb2.py 18 0 100% integration_test_1 | cli/sawtooth_cli/protobuf/setting_pb2.py 20 0 100% integration_test_1 | cli/sawtooth_cli/protobuf/transaction_pb2.py 25 0 100% integration_test_1 | cli/sawtooth_cli/rest_client.py 68 29 57% integration_test_1 | cli/sawtooth_cli/state.py 51 30 41% integration_test_1 | cli/sawtooth_cli/submit.py 50 35 30% integration_test_1 | cli/sawtooth_cli/transaction.py 55 35 36% integration_test_1 | cli/sawtooth_cli/tty.py 17 10 41% integration_test_1 | integration/sawtooth_integration/__init__.py 0 0 100% integration_test_1 | integration/sawtooth_integration/tests/__init__.py 0 0 100% integration_test_1 | integration/sawtooth_integration/tests/integration_tools.py 27 11 59% integration_test_1 | integration/sawtooth_integration/tests/test_config_smoke.py 52 13 75% integration_test_1 | manage/__init__.py 0 0 100% integration_test_1 | manage/sawtooth_manage/__init__.py 1 0 100% integration_test_1 | manage/sawtooth_manage/docker.py 172 145 16% integration_test_1 | manage/sawtooth_manage/exceptions.py 6 2 67% integration_test_1 | manage/sawtooth_manage/node.py 57 27 53% integration_test_1 | manage/sawtooth_manage/simple.py 20 8 60% integration_test_1 | manage/sawtooth_manage/subproc.py 129 103 20% integration_test_1 | manage/sawtooth_manage/vnm.py 25 17 32% integration_test_1 | manage/setup.py 5 5 0% integration_test_1 | signing/sawtooth_signing/__init__.py 2 0 100% integration_test_1 | signing/sawtooth_signing/secp256k1_signer.py 83 40 52% integration_test_1 | --------------------------------------------------------------------------------- integration_test_1 | TOTAL 1890 1089 42% latest_integration_test_1 exited with code 1 Aborting on container exit... Stopping latest_rest_api_1 ... done Stopping latest_tp_config_1 ... done Stopping latest_validator_1 ... done ERROR:__main__:Failed to start test. ERROR:__main__:Command ' 'docker-compose', '-p', 'latest', '-f', '/project/sawtooth-core/integration/sawtooth_integration/docker/config-smoke.yaml', 'up', '--abort-on-container-exit' ' returned non-zero exit status 1 Traceback (most recent call last): File "/project/sawtooth-core/bin/run_docker_test", line 112, in main subprocess.run(compose_up, check=True, timeout=timer.remaining()) File "/usr/lib/python3.5/subprocess.py", line 708, in run output=stdout, stderr=stderr) subprocess.CalledProcessError: Command ' 'docker-compose', '-p', 'latest', '-f', '/project/sawtooth-core/integration/sawtooth_integration/docker/config-smoke.yaml', 'up', '--abort-on-container-exit' ' returned non-zero exit status 1 INFO:__main__:Container latest_integration_test_1 ran image sawtooth-dev-python:latest with install-type mounted INFO:__main__:Container latest_rest_api_1 ran image sawtooth-rest_api:latest with install-type mounted INFO:__main__:Container latest_tp_config_1 ran image sawtooth-tp_config:latest with install-type mounted INFO:__main__:Container latest_validator_1 ran image sawtooth-validator:latest with install-type mounted INFO:__main__:Shutting down with:  'docker-compose', '-p', 'latest', '-f', '/project/sawtooth-core/integration/sawtooth_integration/docker/config-smoke.yaml', 'down', '--remove-orphans'  Removing latest_integration_test_1 ... done Removing latest_rest_api_1 ... done Removing latest_tp_config_1 ... done Removing latest_validator_1 ... done Removing network latest_default  ></description> </Issue>
