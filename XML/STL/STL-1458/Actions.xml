<Action id="51945" issue="34137" author="knkski" type="comment" created="2018-10-09 19:48:38.0" updateauthor="knkski" updated="2018-10-09 19:48:38.0"> <body><! CDATA  ~manojgop : When running that contract creation call, I got this output from the {{seth-tp}} container: {noformat} 2018/10/09 19:35:47.852657 sawtooth_app_state.go:53:  DEBUG  GetAccount(bc3fb70b2246fc62d1c89c90ebf88bea0954e603) 2018/10/09 19:35:47.855358 sawtooth_app_state.go:53:  DEBUG  GetAccount(0000000000000000000000000000000000000000) panic: runtime error: invalid memory address or nil pointer dereference  signal SIGSEGV: segmentation violation code=0x1 addr=0x38 pc=0x9cf651  seth-tp          | goroutine 9  running : github.com/hyperledger/burrow/acm/state.GlobalAccountPermissions(0x7fc856158128, 0xc4201c2020, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...) 	/project/sawtooth-seth/processor/src/github.com/hyperledger/burrow/acm/state/state.go:123 +0x91 github.com/hyperledger/burrow/execution/evm.HasPermission(0xda5860, 0xc4201c2020, 0xda68e0, 0xc4201c2038, 0x8, 0xc4201c2030) 	/project/sawtooth-seth/processor/src/github.com/hyperledger/burrow/execution/evm/vm.go:108 +0xee seth_tp/handler.CreateContractAccount(0xc4201bc640, 0xc420236080, 0xc4201c2020, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...) 	/project/sawtooth-seth/processor/src/seth_tp/handler/transaction_handlers.go:245 +0x3f3 seth_tp/handler.(*BurrowEVMHandler).Apply(0x13bd340, 0xc420230180, 0xc4201c60c0, 0xc42023e000, 0xda3980) 	/project/sawtooth-seth/processor/src/seth_tp/handler/handler.go:110 +0x3ef github.com/hyperledger/sawtooth-sdk-go/processor.worker(0xc4201a1460, 0xbf5d0a, 0x10, 0xc420080cc0, 0xc42003c4d0, 0xc42021c230, 0x1, 0x1) 	/project/sawtooth-seth/processor/src/github.com/hyperledger/sawtooth-sdk-go/processor/worker.go:67 +0x340 created by github.com/hyperledger/sawtooth-sdk-go/processor.(*TransactionProcessor).start 	/project/sawtooth-seth/processor/src/github.com/hyperledger/sawtooth-sdk-go/processor/processor.go:140 +0x4b0 {noformat} It looks like you're trying to create a contract account without any permissions specified or global permissions set. To fix this, you could try either specifying permissions in the call you're making to create a contract account, or setting global permissions.  ></body> </Action>
<Action id="51966" issue="34137" author="manojgop" type="comment" created="2018-10-10 08:47:52.0" updateauthor="manojgop" updated="2018-10-10 11:20:23.0"> <body><! CDATA When I execute  seth show account 2befd96ce96af926aee64e8c702493e12be65b23, I see all permissions are enabled.  Address: 2befd96ce96af926aee64e8c702493e12be65b23 Balance: 0 Code : Nonce : 1 Perms : +root,+send,+call,+contract,+account (No Storage Set)  As per documentation, if a permission is not set, account permissions default to those set at the global permissions address. Also if no permissions are set at the global permissions address, all permissions are allowed.   Also if I create contact using “seth contract create --wait \{alias} \{contract}” it’s working fine. Only when I use JSON RPC I’m facing issue in deploying contract.      What is the command to set permissions with JSON RPC. I’m referring to documentation in  https://sawtooth.hyperledger.org/docs/seth/releases/latest/dapps.html#deploying-contracts   And below is the command I found in the documentation to deploy contact. I could  not find any permission field   curl -d '{"jsonrpc": "2.0", "method": "eth_sendTransaction", "id": 2, "params":  {"from": "0x  {address}", "data": "0x\{contract}"} }' -H "Content-Type: application/json" localhost:3030        ></body> </Action>
<Action id="52019" issue="34137" author="knkski" type="comment" created="2018-10-10 14:57:29.0" updateauthor="knkski" updated="2018-10-10 14:57:29.0"> <body><! CDATA  ~manojgop : You are probably using the code from this branch, which has an updated version of Burrow that introduces the panic:   https://github.com/hyperledger/sawtooth-seth/pull/73   The documentation has not yet been updated, since that PR hasn't yet been merged into master, as there's an open bug in Burrow to fix it:   https://github.com/hyperledger/burrow/issues/908   You'll have to either specify permissions in the RPC call (which the CLI does for you, which is why that works), or switch back to the master branch of Seth, which uses a version of Burrow that doesn't panic.  ></body> </Action>
<Action id="52020" issue="34137" author="manojgop" type="comment" created="2018-10-10 15:10:09.0" updateauthor="manojgop" updated="2018-10-10 15:10:09.0"> <body><! CDATA I'm using seth master branch.  below is the git log  commit f35b3a914ddae384ea48f3e0444cc2b33337b88a Merge: 32ec9d8 05a32aa Author: Kenneth Koski <kennethkoski@gmail.com> Date: Mon Oct 8 14:45:13 2018 -0500  Merge pull request #76 from boydjohnson/fix.build.rs  Fix build.rs for breaking protoc-rust change  ></body> </Action>
<Action id="52103" issue="34137" author="knkski" type="comment" body=" ~manojgop : It&apos;s quite possible that you&apos;re using a docker container with that branch still in it. Can you copy/paste the entire output from the {{docker-compose}} command here, as you try the above steps?" created="2018-10-11 14:56:10.0" updateauthor="knkski" updated="2018-10-11 14:56:10.0"/>
<Action id="52230" issue="34137" author="manojgop" type="comment" created="2018-10-15 04:24:27.0" updateauthor="manojgop" updated="2018-10-15 04:24:27.0"> <body><! CDATA version: '3'  services: seth-cli-go: build: context: . dockerfile: ./cli-go/Dockerfile args: - ISOLATION_ID=${ISOLATION_ID} - http_proxy - https_proxy - no_proxy image: sawtooth-seth-cli-go:${ISOLATION_ID} container_name: seth-cli-go volumes: - ./contracts:/project/sawtooth-seth/contracts - sawtooth:/root/.sawtooth depends_on: - rest-api working_dir: /project/sawtooth-seth entrypoint: | bash -c " seth init http://rest-api:8080 && if   ! -f /root/.sawtooth/keys/root.priv  ; then sawtooth keygen fi; tail -f /dev/null "  seth-tp: build: context: . dockerfile: ./processor/Dockerfile args: - ISOLATION_ID=${ISOLATION_ID} - http_proxy - https_proxy - no_proxy image: sawtooth-seth-tp:${ISOLATION_ID} container_name: seth-tp depends_on: - validator command: | bash -c " seth-tp -vv \ -C tcp://validator:4004 "  block-info-tp: image: hyperledger/sawtooth-block-info-tp:1.0 container_name: block-info-tp depends_on: - validator command: block-info-tp -vv --connect tcp://validator:4004  settings-tp: image: hyperledger/sawtooth-settings-tp:1.0 container_name: settings-tp depends_on: - validator command: settings-tp -vv --connect tcp://validator:4004  rest-api: image: hyperledger/sawtooth-rest-api:1.0 container_name: rest-api ports: - '8080:8080' depends_on: - validator entrypoint: | sawtooth-rest-api -vv --connect tcp://validator:4004 --bind rest-api:8080  validator: image: hyperledger/sawtooth-validator:1.0 container_name: sawtooth-validator ports: - '4004:4004/tcp' - 8800 command: | bash -c " if   ! -f /etc/keys/validator.priv  ; then sawadm keygen && sawset genesis \ -k /etc/sawtooth/keys/validator.priv \ -o config-genesis.batch && sawset proposal create \ -k /etc/sawtooth/keys/validator.priv \ sawtooth.validator.batch_injectors=block_info \ -o config.batch && sawadm genesis config-genesis.batch config.batch fi; sawtooth-validator -vv \ --endpoint tcp://validator:8800 \ --bind component:tcp://eth0:4004 \ --bind network:tcp://eth0:8800 "  seth-rpc: build: context: . dockerfile: ./rpc/Dockerfile args: - ISOLATION_ID=${ISOLATION_ID} - http_proxy - https_proxy - no_proxy image: sawtooth-seth-rpc:${ISOLATION_ID} container_name: seth-rpc volumes: - sawtooth:/root/.sawtooth depends_on: - validator ports: - 3030:3030 command: | bash -c " seth-rpc --connect tcp://validator:4004 --bind 0.0.0.0:3030 "  volumes: sawtooth:  ></body> </Action>
