<Issue id="28199" key="STL-1107" number="1107" project="10001" reporter="pschwarz" assignee="adamludvik" creator="pschwarz" type="10004" summary="Exception Occurs on Cache Miss" priority="3" status="10100" created="2018-03-02 23:43:47.0" updated="2019-05-21 14:33:44.0" votes="0" watches="1" workflowId="28202"> <description><! CDATA {code} Mar  1 13:00:05 ec2-34-224-8-197.compute-1.amazonaws.com  psimlr1-node4     ERROR                     Thread-51              block_validator Block validation failed with unexpected error: b1ee59bb7d8e69b89574248783bfb3dac73d52d697117fd8339ba3335de5c13b081b91fda07f5fae5a17e15f9793f6f46e8366de4388d06838bcbe08f77b1d2e (block_num:40, state:4ea8c91ead25acdb9260efb7a2c8fa3b1177c7b82c7cbd2f55d5aae54bf23594, previous_block_id:dded9329fcff0f37de24f70908cd393ecd3133016e2fe0f56c911e844578835850008d139e11477645b9aa2bc42ca356e6bcb037d1fc601a0194aa805f9652a0) Traceback (most recent call last): File "/usr/lib/python3/dist-packages/sawtooth_validator/journal/block_validator.py", line 443, in _extend_fork_diff_to_common_ancestor new_blkw = self._block_cache new_blkw.previous_block_id  File "/usr/lib/python3/dist-packages/sawtooth_validator/journal/block_cache.py", line 70, in __getitem__ value = self._cache block_id  KeyError: 'dded9329fcff0f37de24f70908cd393ecd3133016e2fe0f56c911e844578835850008d139e11477645b9aa2bc42ca356e6bcb037d1fc601a0194aa805f9652a0'  During handling of the above exception, another exception occurred:  Traceback (most recent call last): File "/usr/lib/python3/dist-packages/sawtooth_validator/journal/block_validator.py", line 633, in process_block_verification result.new_chain, result.current_chain) File "/usr/lib/python3/dist-packages/sawtooth_validator/journal/block_validator.py", line 447, in _extend_fork_diff_to_common_ancestor new_blkw, new_blkw.previous_block_id)) sawtooth_validator.journal.block_validator.BlockValidationError: Block b1ee59bb7d8e69b89574248783bfb3dac73d52d697117fd8339ba3335de5c13b081b91fda07f5fae5a17e15f9793f6f46e8366de4388d06838bcbe08f77b1d2e (block_num:40, state:4ea8c91ead25acdb9260efb7a2c8fa3b1177c7b82c7cbd2f55d5aae54bf23594, previous_block_id:dded9329fcff0f37de24f70908cd393ecd3133016e2fe0f56c911e844578835850008d139e11477645b9aa2bc42ca356e6bcb037d1fc601a0194aa805f9652a0) rejected due to missing predecessor dded9329fcff0f37de24f70908cd393ecd3133016e2fe0f56c911e844578835850008d139e11477645b9aa2bc42ca356e6bcb037d1fc601a0194aa805f9652a0  During handling of the above exception, another exception occurred:  Traceback (most recent call last): File "/usr/lib/python3/dist-packages/sawtooth_validator/journal/block_validator.py", line 643, in process_block_verification callback(False, result) File "/usr/lib/python3/dist-packages/sawtooth_validator/journal/block_validator.py", line 577, in wrapper del self._block_cache block.identifier  File "/usr/lib/python3/dist-packages/sawtooth_validator/journal/block_cache.py", line 93, in __delitem__ block = self._cache block_id .value KeyError: '544009f06ef06f508ce8a5f0d2ab03a766a2bb6c5eb3078ca3ed28361920cb423fbc22b5bff8c2e5f96c2d03d4f85bf5a6091fcf246738294c8d2a2cbc330611' {code}  This may be fixed by either STL-901 or STL-1097  ></description> </Issue>
