<Issue id="28329" key="STL-1115" number="1115" project="10001" reporter="sukrit007" assignee="mithun2679" creator="sukrit007" type="10004" summary="Validator synchronization issue after transaction processor dissconnects" priority="2" resolution="10000" status="10001" created="2018-03-09 06:36:59.0" updated="2018-09-20 07:21:54.0" resolutiondate="2018-09-20 07:21:54.0" votes="1" watches="4" workflowId="28332"> <description><! CDATA When running multiple validators, we noticed that when transaction processor is restarted on one of the nodes,  the validator on that node stops processing future blocks even after the transaction processor is up.  In some cases, it also affects other nodes and all of them go out of sync.  *Steps to reproduce*  For simulating this issue locally, I used a modified version of docker-compose file that runs 3 validators, 3 API containers, and 3 copy of default transaction processor :   https://gist.github.com/sukrit007/393f098af0a94c21db68decf4887f8a8     * Start all containers using docker-compose up *  {code:java} docker exec -it sawtooth-shell-default intkey set test 100 --url=http://rest-api3:8008 sleep 5s docker exec -it sawtooth-shell-default intkey show test --url=http://rest-api2:8008  # Stop intkey tp for validator2 docker-compose stop intkey-tp-python2  # Submit batch on validator2 docker exec -it sawtooth-shell-default intkey inc test 10 --url=http://rest-api2:8008 sleep 5s  # Check value on all the  validators docker exec -it sawtooth-shell-default intkey show test --url=http://rest-api:8008 docker exec -it sawtooth-shell-default intkey show test --url=http://rest-api2:8008 docker exec -it sawtooth-shell-default intkey show test --url=http://rest-api3:8008  # Start transaction processor for validator2 docker-compose start intkey-tp-python2  # Submit batch on validator2 docker exec -it sawtooth-shell-default intkey inc test 10 --url=http://rest-api2:8008 sleep 60s  # Check value on all the  validators docker exec -it sawtooth-shell-default intkey show test --url=http://rest-api:8008 docker exec -it sawtooth-shell-default intkey show test --url=http://rest-api2:8008 docker exec -it sawtooth-shell-default intkey show test --url=http://rest-api3:8008 ## You will notice that validator2 is not synchronizing blocks. In some cases one of other nodes might also stop synchronizing.{code}     *Error in logs* {code:java} Failed block validation: Block e15ba5457b67dc2b8e6b16d7ab5f45aae80df172a7f15449cdc47dcb55276c7726c1be97d3be6814e29c0b3569f1b76cee4422e05a4982c392abac7f47317338 (block_num:8, state:d4c837e061d5dbe1ea99cace6bd8d6756fabebdf4f753329b4936374e818333f, previous_block_id:9c25b1b571f2b9145c3f4cdafd0e7c48b2482f7b6d4cfbaadbbe4cabbf3692b266a1721979b11dff3c086dcf95d27e03a246ecb5cbbd271281c9ba2ac17db0d3) rejected due to missing predecessor 9c25b1b571f2b9145c3f4cdafd0e7c48b2482f7b6d4cfbaadbbe4cabbf3692b266a1721979b11dff3c086dcf95d27e03a246ecb5cbbd271281c9ba2ac17db0d3 {code}  ></description> </Issue>
