<Issue id="36584" key="STL-1475" number="1475" project="10001" reporter="danintel" assignee="rberg2" creator="danintel" type="10004" summary="Docs: Grafana documentation gives opentsdb_url port as 3000 instead of 8086" priority="3" resolution="10000" status="10001" created="2019-01-08 23:08:56.0" updated="2019-01-23 20:16:14.0" resolutiondate="2019-01-23 20:15:54.0" votes="0" watches="3" workflowId="48129"> <description><! CDATA In the SysAdmin Guide for Grafana,   https://sawtooth.hyperledger.org/docs/core/nightly/master/sysadmin_guide/grafana_configuration.html#configure-the-sawtooth-validator-for-grafana   Under "Configure the Sawtooth Validator for Grafana" step 2, there is:  opentsdb_url = "http://\{host}:3000"  AND under "Configure the Sawtooth REST API for Grafana" step 2, there is:  opentsdb_url = "http://\{host}:3000"  The port number is wrong. The port should be 8086, not 3000. Port 8086 is the InfluxDB port.  This error was introduced with the initial Grafana documentation sometime in 1.0.x. See STL-1130     Here is the Rocketchat session: * danintel 1:47 PM I get this error running grafana: `{{WARNING influx  Cannot write to 127.0.0.1: Service Unavailable}}` I follow the docs and the host stats display, but not Sawtooth stats (because of the above error from sawtooth-validator). * jsmitchell Owner 1:52 PM what argument are you giving to opentsdb for the validator?  * danintel 2:01 PM     I added this to `{{validator.toml}}`:  opentsdb_url = "http://127.0.0.1:3000" opentsdb_db = "metrics" opentsdb_username = "lrdata" opentsdb_password = "pwlrdata"  And this is in `{{telegraf.conf}}`:    outputs.influxdb      urls =  "http://localhost:8086"    database = "metrics"    username = "lrdata"    password = "pwlrdata" * jsmitchell Owner 2:02 PM port 3000 is wrong then  * both the validator and telegraf deliver their metrics to an influxdb instance which grafana reads from  *  change opentsdb_url to  http://localhost:8086|http://localhost:8086/  * danintel 2:05 PM I'll try that. The docs say:  "  # The host and port for Open TSDB database used for metrics opentsdb_url = "http://\{host}:3000" "  See https://sawtooth.hyperledger.org/docs/core/nightly/master/sysadmin_guide/grafana_configuration.html#configure-the-sawtooth-validator-for-grafana|https://sawtooth.hyperledger.org/docs/core/nightly/master/sysadmin_guide/grafana_configuration.html#configure-the-sawtooth-validator-for-grafana   So to summarize, port 3000 is only for the Grafana GUI. It is not also used for shuttling metrics data. * jsmitchell Owner 2:05 PM @achenette ^ ⚠  * rberg2 2:40 PM doh! it looks like I put the wrong port in there for the validator and rest-api. telegraf is correct. Sorry for the confusion.  ></description> </Issue>
