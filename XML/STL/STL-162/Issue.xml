<Issue id="16483" key="STL-162" number="162" project="10001" reporter="jjason" assignee="jjason" creator="jjason" type="10004" summary="DEFECT: Investigate and Resolve Validator Registry Info Containing None for Transaction ID" priority="3" resolution="10000" status="10001" created="2017-05-08 20:15:31.0" updated="2017-06-19 04:03:02.0" resolutiondate="2017-06-19 03:56:15.0" votes="0" watches="1" workflowId="16483"> <description><! CDATA In testing PoET fork resolution, I ran into a problem where an exception was thrown because the transaction ID retrieved from \{\{validator_info.transaction_id}} unexpectedly returned \{\{None}}. The problem occurred when running the PoET smoke test:  \{code} cd /project/sawtooth-core/integration/sawtooth_integration/docker run_docker_test poet-smoke.yaml \{code}  So far, this has happened only once and I have not reproduced problem in many subsequent runs of the test.  Here is a stack trace from when exception was caught (although I don't believe it is of much use beyond what I have already described):  \{code} validator-0_1 |  20:36:39.473 ERROR chain  'NoneType' object has no attribute 'encode' validator-0_1 | Traceback (most recent call last): validator-0_1 | File "/project/sawtooth-core/validator/sawtooth_validator/journal/chain.py", line 390, in run validator-0_1 | commit_new_chain = self._test_commit_new_chain() validator-0_1 | File "/project/sawtooth-core/validator/sawtooth_validator/journal/chain.py", line 323, in _test_commit_new_chain validator-0_1 | return fork_resolver.compare_forks(self._chain_head, self._new_block) validator-0_1 | File "/project/sawtooth-core/consensus/poet/core/sawtooth_poet/poet_consensus/poet_fork_resolver.py", line 200, in compare_forks validator-0_1 | block_cache=self._block_cache)) validator-0_1 | File "/project/sawtooth-core/consensus/poet/core/sawtooth_poet/poet_consensus/utils.py", line 233, in create_next_validator_state validator-0_1 | validator_info.transaction_id).block_num validator-0_1 | File "/project/sawtooth-core/validator/sawtooth_validator/journal/block_store.py", line 174, in get_block_by_transaction_id validator-0_1 | return self.__getitem__(self._block_store txn_id ) validator-0_1 | File "/project/sawtooth-core/validator/sawtooth_validator/journal/block_store.py", line 44, in __getitem__ validator-0_1 | stored_block = self._block_store key  validator-0_1 | File "/project/sawtooth-core/validator/sawtooth_validator/database/database.py", line 30, in __getitem__ validator-0_1 | return self.get(key) validator-0_1 | File "/project/sawtooth-core/validator/sawtooth_validator/database/lmdb_nolock_database.py", line 72, in get validator-0_1 | packed = txn.get(key.encode()) validator-0_1 | AttributeError: 'NoneType' object has no attribute 'encode' \{code}  ></description> </Issue>
