<Issue id="28156" key="STL-1103" number="1103" project="10001" reporter="adamludvik" assignee="pschwarz" creator="adamludvik" type="10004" summary="Unhandled KeyError in ParallelScheduler._is_in_same_batch" priority="3" resolution="10000" status="10001" created="2018-03-01 15:45:08.0" updated="2018-03-02 16:50:56.0" resolutiondate="2018-03-02 16:50:56.0" votes="0" watches="1" workflowId="28159"> <description><! CDATA An unhandled KeyError in the ParallelScheduler caused a network node to break and fail to make further progress.     Feb 28 18:20:41 ec2-34-229-203-90.compute-1.amazonaws.com  psimlr1-node3     ERROR                     Thread-44                       future An unhandled error occurred while running future callback#012Traceback (most recent call last):#012  File "/usr/lib/python3/dist-packages/sawtooth_validator/networking/future.py", line 79, in run_callback#012  self._callback_func(self._request, self._result)#012  File "/usr/lib/python3/dist-packages/sawtooth_validator/execution/executor.py", line 160, in _future_done_callback#012    error_data=response.extended_data)#012  File "/usr/lib/python3/dist-packages/sawtooth_validator/execution/scheduler_parallel.py", line 812, in set_transaction_execution_result#  012    txn_signature)#012  File "/usr/lib/python3/dist-packages/sawtooth_validator/execution/scheduler_parallel.py", line 733, in _remove_subsequent_result_because_of_batch_failure#012    if self._is_txn_to_replay(txn_id, poss_successor, seen):#012  File "/usr/lib/python3/dist-packages/sawtooth_validator/execution/scheduler_parallel.py", line 712, in  _is_txn_to_replay#012    possible_successor)#012  File "/usr/lib/python3/dist-packages/sawtooth_validator/execution/scheduler_parallel.py", line 693, in _is_in_same_batch#012    self._batches_by_txn_id txn_id_2 #012KeyError: 'b4c40ea2a06a3afd37cd34adb02cd40fe3ede0cd82b8bbe253a728a0bf4814373061d7b1c0eb39494a1a140abfa361132f66a6a5659d997663e9d062808bbda  c'  ></description> </Issue>
