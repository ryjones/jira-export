<Issue id="26735" key="STL-988" number="988" project="10001" reporter="askmish" assignee="rberg2" creator="askmish" type="10004" summary="poet registration create fails unless python3-cryptography is separately upgraded." priority="3" resolution="10000" status="10001" created="2018-01-11 09:45:22.0" updated="2018-02-14 15:44:08.0" resolutiondate="2018-02-14 15:44:08.0" votes="0" watches="4" workflowId="26735"> <environment><! CDATA example@example-desktop:~$ sawtooth --version sawtooth-cli (Hyperledger Sawtooth) version 1.0.0rc7.dev20 example@example-desktop:~$ uname -a Linux example-desktop 4.10.0-28-generic #32~16.04.2-Ubuntu SMP Thu Jul 20 10:19:48 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux example@example-desktop:~$  ></environment> <description><! CDATA *+Steps to reproduce:+* In a fresh install of ubuntu 16.04.3 LTS x64: sudo apt-get update sudo apt-get upgrade sudo apt-get install -y sawtooth .... Do stuff like sawadm keygen, etc .... example@example-desktop:/etc/sawtooth$ sudo poet registration create -k /etc/sawtooth/keys/validator.priv -o /home/sawtooth/poet.batch Traceback (most recent call last):( File "/usr/lib/python3/dist-packages/sawtooth_poet_cli/main.py", line 133, in main_wrapper main() File "/usr/lib/python3/dist-packages/sawtooth_poet_cli/main.py", line 123, in main do_registration(args) File "/usr/lib/python3/dist-packages/sawtooth_poet_cli/registration.py", line 104, in do_registration do_create(args) File "/usr/lib/python3/dist-packages/sawtooth_poet_cli/registration.py", line 128, in do_create nonce=SignupInfo.block_id_to_nonce(args.block)) File "/usr/lib/python3/dist-packages/sawtooth_poet/poet_consensus/signup_info.py", line 85, in create_signup_info nonce -cls.__MAXIMUM_NONCE_LENGTH__: ) File "/usr/lib/python3/dist-packages/sawtooth_poet_simulator/poet_enclave_simulator/poet_enclave_simulator.py", line 539, in create_signup_info nonce=nonce) File "/usr/lib/python3/dist-packages/sawtooth_poet_simulator/poet_enclave_simulator/poet_enclave_simulator.py", line 250, in create_signup_info cls._report_private_key.sign( AttributeError: '_RSAPrivateKey' object has no attribute 'sign'  *+Workaround:+* example@example-desktop:/etc/sawtooth$ sudo apt-get upgrade -y sawtooth Reading package lists... Done Building dependency tree        Reading state information... Done sawtooth is already the newest version (1.0.0rc7.dev20). Calculating upgrade... Done The following packages have been kept back: libdrm-amdgpu1 libdrm2 libegl1-mesa libgbm1 libgl1-mesa-dri libwayland-egl1-mesa libxatracker2 linux-generic-hwe-16.04 linux-headers-generic-hwe-16.04 linux-image-generic-hwe-16.04 linux-signed-generic-hwe-16.04 linux-signed-image-generic-hwe-16.04 The following packages will be upgraded: python3-cryptography 1 upgraded, 0 newly installed, 0 to remove and 12 not upgraded. Need to get 214 kB of archives. After this operation, 90.1 kB of additional disk space will be used. Get:1 http://repo.sawtooth.me/ubuntu/nightly xenial/universe amd64 python3-cryptography amd64 1.7.2-1  214 kB  Fetched 214 kB in 12s (17.3 kB/s)                                                                                                                                                                           (Reading database ... 181693 files and directories currently installed.) Preparing to unpack .../python3-cryptography_1.7.2-1_amd64.deb ... Unpacking python3-cryptography (1.7.2-1) over (1.2.3-1ubuntu0.1) ... Setting up python3-cryptography (1.7.2-1) ... example@example-desktop:/etc/sawtooth$ sudo poet registration create -k /etc/sawtooth/keys/validator.priv -o /home/sawtooth/poet.batch Writing key state for PoET public key: xxxxxx...xxxxxxx Generating /home/sawtooth/poet.batch  ></description> </Issue>
