<Issue id="40725" key="STL-1651" number="1651" project="10001" reporter="rranjan3" assignee="arsulegai" creator="rranjan3" type="10004" summary="Future timeout error on summarize block" priority="3" resolution="10000" status="10001" created="2019-06-20 17:08:36.0" updated="2019-07-29 13:28:27.0" resolutiondate="2019-07-29 13:28:27.0" votes="0" watches="2" workflowId="53679"> <environment><! CDATA OS - Ubuntu 16.04  Docker version - 18.03.1-ce  Docker-compose version - 1.21.2, build a133471  ></environment> <description><! CDATA PoET engine throws Future Timeout Error on summarize_block() call in engine. Occurs only when rate of transaction submission is relatively high(~30tps). Transactions being submitted using intkey-workload & smallbank-workload tools.  When run using dockers, the poet engine throws below timeout exception -  _sawtooth-poet-engine-0 |  2019-06-11 03:16:31.780 ERROR engine  Unhandled exception in message loop_ _sawtooth-poet-engine-0 | Traceback (most recent call last):_ _sawtooth-poet-engine-0 | File "/usr/lib/python3/dist-packages/sawtooth_poet_engine/engine.py", line 189, in start_ _sawtooth-poet-engine-0 | self._try_to_publish()_ _sawtooth-poet-engine-0 | File "/usr/lib/python3/dist-packages/sawtooth_poet_engine/engine.py", line 203, in _try_to_publish_ _sawtooth-poet-engine-0 | block_id = self._finalize_block()_ _sawtooth-poet-engine-0 | File "/usr/lib/python3/dist-packages/sawtooth_poet_engine/engine.py", line 115, in _finalize_block_ _sawtooth-poet-engine-0 | summary = self._summarize_block()_ _sawtooth-poet-engine-0 | File "/usr/lib/python3/dist-packages/sawtooth_poet_engine/engine.py", line 107, in _summarize_block_ _sawtooth-poet-engine-0 | return self._service.summarize_block()_ _sawtooth-poet-engine-0 | File "/usr/lib/python3/dist-packages/sawtooth_sdk/consensus/zmq_service.py", line 108, in summarize_block_ _sawtooth-poet-engine-0 | response_type=response_type)_ _sawtooth-poet-engine-0 | File "/usr/lib/python3/dist-packages/sawtooth_sdk/consensus/zmq_service.py", line 32, in _send_ _sawtooth-poet-engine-0 | ).result(self._timeout).content_ _sawtooth-poet-engine-0 | File "/usr/lib/python3/dist-packages/sawtooth_sdk/messaging/future.py", line 63, in result_ _sawtooth-poet-engine-0 | message_type))_ _sawtooth-poet-engine-0 | sawtooth_sdk.messaging.future.FutureTimeoutError: Future timed out waiting for response to CONSENSUS_SUMMARIZE_BLOCK_REQUEST_  The validator does not show any error in the logs. But the node would fall out of the network and start throwing backpressure as the block generation flow stalls & client requests pile up.  This issue has been reported from several enthusiasts in the community as well.   ></description> </Issue>
