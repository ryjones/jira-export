<Action id="59563" issue="39509" author="davidaedwards" type="comment" created="2019-04-29 08:35:51.0" updateauthor="davidaedwards" updated="2019-04-29 08:35:51.0"> <body><! CDATA I ran another test based upon the same configuration. However, this time the nodes were higher power. No longer single core.  The log below shows the point at which the poet engine stops logging information.  {code:none} sawtooth-poet-engine          |  2019-04-27 08:56:30.322 DEBUG    poet_block_verifier  Block Signer Name=validator-0393504a, ID=0393504a...b8478b2c, PoET public key=03f253cf...24ae2eeb sawtooth-poet-engine          |  2019-04-27 08:56:30.341 DEBUG    consensus_state  Validator validator-0393504a (ID=0393504a...b8478b2c): Signup committed block 085c3258, chain head was block 00000000 sawtooth-poet-engine          |  2019-04-27 08:56:30.344 DEBUG    consensus_state  Validator validator-0393504a (ID=0393504a...b8478b2c): Claimed 9228 block(s) out of 100000 sawtooth-poet-engine          |  2019-04-27 08:56:30.354 DEBUG    consensus_state  Validator validator-0393504a (ID=0393504a...b8478b2c): Committed in block 0, trying to claim block 9229 sawtooth-poet-engine          |  2019-04-27 08:56:30.378 DEBUG    consensus_state  Validator validator-0393504a (ID=0393504a...b8478b2c): zTest succeeded with depth 9179, expected=7050.789195, observed=91 79 sawtooth-poet-engine          |  2019-04-27 08:56:30.378 DEBUG    consensus_state  zTest history:  '1.4382', '1.3916', '1.3706'  sawtooth-poet-engine          |  2019-04-27 08:56:30.378 INFO     engine  Passed consensus check: 0bedb2d1ec300ca11720cc3fe2155d04519b7eaab39e1b4fbd6bbcf953f19def44f8c6fccbc6c986882119cb4307b3bd10a082e8ff 8776f35e0c815f0164f704 sawtooth-poet-engine          |  2019-04-27 08:56:30.383 DEBUG    engine  Received message: CONSENSUS_NOTIFY_BLOCK_VALID sawtooth-poet-engine          |  2019-04-27 08:56:30.389 INFO     engine  Choosing between chain heads -- current: 2269791bd7f0d13022fc2029f477969fbdb1745f2d541ff9ea197b8a740a1d6f37445512fae8f7a2e0b99c045 2e5be5c753f954298d9538e76a73555ae3619a1 -- new: 0bedb2d1ec300ca11720cc3fe2155d04519b7eaab39e1b4fbd6bbcf953f19def44f8c6fccbc6c986882119cb4307b3bd10a082e8ff8776f35e0c815f0164f704 sawtooth-poet-engine          |  2019-04-27 08:56:30.395 INFO     poet_fork_resolver  Choose new fork 0bedb2d1 over current fork 2269791b: New fork aggregate local mean (61218.838259) greater than current fork aggregate local mean (61211.647492) sawtooth-poet-engine          |  2019-04-27 08:56:30.407 DEBUG    consensus_state  Update state for validator-0393504a (ID=0393504a...b8478b2c): PPK=03f253cf...24ae2eeb, KBCC=9229, TBCC=9229 sawtooth-poet-engine          |  2019-04-27 08:56:30.408 DEBUG    poet_fork_resolver  Create consensus state: BID=0bedb2d1, ALM=61218.838259, TBCC=9229 sawtooth-poet-engine          |  2019-04-27 08:56:30.408 INFO     engine  Committing 0bedb2d1ec300ca11720cc3fe2155d04519b7eaab39e1b4fbd6bbcf953f19def44f8c6fccbc6c986882119cb4307b3bd10a082e8ff8776f35e0c815 f0164f704 sawtooth-validator-default    |  2019-04-27 08:56:30.415 DEBUG    broadcaster  Broadcasting events:  event_type: "sawtooth/block-commit" sawtooth-rest-api-default     |  2019-04-27 08:56:30.417 DEBUG    state_delta_subscription_handler  Received event 0bedb2d1: 8 changes sawtooth-rest-api-default     |  2019-04-27 08:56:30.417 DEBUG    state_delta_subscription_handler  Updating 1 subscribers sawtooth-poet-engine          |  2019-04-27 08:56:30.422 DEBUG    engine  Received message: CONSENSUS_NOTIFY_BLOCK_COMMIT sawtooth-poet-engine          |  2019-04-27 08:56:30.423 INFO     engine  Chain head updated to 0bedb2d1ec300ca11720cc3fe2155d04519b7eaab39e1b4fbd6bbcf953f19def44f8c6fccbc6c986882119cb4307b3bd10a082e8ff87 76f35e0c815f0164f704, abandoning block in progress sawtooth-poet-engine          |  2019-04-27 08:56:30.434 DEBUG    poet_block_publisher  Using PoET public key: 03f253cf...24ae2eeb sawtooth-poet-engine          |  2019-04-27 08:56:30.435 DEBUG    poet_block_publisher  Unseal signup data: eyJjb3Vu...ZWViIn0= sawtooth-poet-engine          |  2019-04-27 08:56:30.444 DEBUG    consensus_state  Validator validator-0393504a (ID=0393504a...b8478b2c): Signup committed block 085c3258, chain head was block 00000000 sawtooth-poet-engine          |  2019-04-27 08:56:30.447 DEBUG    consensus_state  Validator validator-0393504a (ID=0393504a...b8478b2c): Claimed 9229 block(s) out of 100000 sawtooth-poet-engine          |  2019-04-27 08:56:30.457 DEBUG    consensus_state  Validator validator-0393504a (ID=0393504a...b8478b2c): Committed in block 0, trying to claim block 9230 sawtooth-poet-engine          |  2019-04-27 08:56:30.493 DEBUG    consensus_state  Validator validator-0393504a (ID=0393504a...b8478b2c): zTest succeeded with depth 9180, expected=7051.510903, observed=91 80 sawtooth-poet-engine          |  2019-04-27 08:56:30.493 DEBUG    consensus_state  zTest history:  '1.3856', '1.4382', '1.3916'  sawtooth-poet-engine          |  2019-04-27 08:56:30.494 DEBUG    poet_block_publisher  Created wait timer: TIMER, 6.93, 3.13, GA4GIZBVGA2GKMBY sawtooth-validator-default    |  2019-04-27 08:56:31.940 DEBUG    gossip  Peers are:  'tcp://MY.SERVER.247:8800' . Unpeered candidates are:    sawtooth-validator-default    |  2019-04-27 08:56:32.942 DEBUG    gossip  Number of peers (1) below minimum peer threshold (3). Doing topology search. sawtooth-validator-default    |  2019-04-27 08:56:32.954 DEBUG    gossip_handlers  Got peers response message from 3db573bff15d6c8df43ca090323f4dc01f96216196a855db5c79eecdcde9ff56ffd23505f250ba72bf64ddd97 4dcc6ebb04a388e36083fe9a195111d81fab6fe. Endpoints:  'tcp://MY.SERVER.233:8800', 'tcp://MY.SERVER.247:8800'  sawtooth-validator-default    |  2019-04-27 08:56:33.264 DEBUG    gossip_handlers  Got peers request message from 3db573bff15d6c8df43ca090323f4dc01f96216196a855db5c79eecdcde9ff56ffd23505f250ba72bf64ddd974 dcc6ebb04a388e36083fe9a195111d81fab6fe sawtooth-rest-api-default     |  2019-04-27 08:56:33.300 DEBUG    route_handlers  Sending CLIENT_BATCH_SUBMIT_REQUEST request to validator sawtooth-rest-api-default     |  2019-04-27 08:56:33.306 DEBUG    route_handlers  Received CLIENT_BATCH_SUBMIT_RESPONSE response from validator with status OK sawtooth-rest-api-default     |  2019-04-27 08:56:33.307 INFO     helpers  POST /batches HTTP/1.1: 202 status, 362 size, in 0.006225 s sawtooth-poet-engine          |  2019-04-27 08:56:33.727 DEBUG    poet_block_publisher  Created wait certificate: CERT, 6.93, 3.13, GQ2DAZDCGI4TCZLC, GA4GIZBVGA2GKMBY sawtooth-poet-engine          |  2019-04-27 08:56:33.741 INFO     engine  Finalized 88df67ad063c045da9c1668c58475f36f74434d8cd32ae24f95245ccc5a1b82d36b633640c97cace3a241ffcfbb082cde55b857ad73a2d16658965dd a895b1c1 with {'Signature': '8fef5c7c480f94051414b5fc865c6913f767cb8cc47c78ad92b1553ab04a3c8128e9a8382106428ef1a2521f9fb891268b716f59e176735a746ffc88449cf5c9', 'SerializedCertificate': '{"block_hash": "b\ '\\\\x00\\\\xedF\\\\x91f\\\\xe6r\\\\x9e\\\\xa8\\\\xa7\\\\x00\\\\xabt)|#\\\\x05\\\\xef\\\\xece^h>\\\\x1f\\\\x1f\\\\xadV\\\\xb7\\\\xd3{^1\'", "duration": 3.1277851007722575, "local_mean": 6.928012181619097, "nonce": "180a05d7a8a0961a521b11ac7db554f3797c8d0f9bb0cefd806045456a865a20", "previous_certificate_id": "GA4GIZBVGA2GKMBY", "request_time": 1556355390.4676783, "validator_address": "0393504a36694d7add6b6 d9656ca4e32ff7bcd0696409011e1ae864ffeb8478b2c"}'} sawtooth-poet-engine          |  2019-04-27 08:56:33.742 INFO     engine  Published block 88df67ad063c045da9c1668c58475f36f74434d8cd32ae24f95245ccc5a1b82d36b633640c97cace3a241ffcfbb082cde55b857ad73a2d1665 8965dda895b1c1 sawtooth-validator-default    |  2019-04-27 08:56:33.744 DEBUG    block_validator  Adding block 88df67ad063c045da9c1668c58475f36f74434d8cd32ae24f95245ccc5a1b82d36b633640c97cace3a241ffcfbb082cde55b857ad73a2d16658965dda895b1c1 for processing sawtooth-validator-default    |  2019-04-27 08:56:33.786 INFO     block_validator  Block 88df67ad063c045da9c1668c58475f36f74434d8cd32ae24f95245ccc5a1b82d36b633640c97cace3a241ffcfbb082cde55b857ad73a2d16658965dda895b1c1 (block_num:9230, state:c7e590799f6e69b41713280357aaa3256d6ed8111a1658bf45deb57780fb201e, previous_block_id:0bedb2d1ec300ca11720cc3fe2155d04519b7eaab39e1b4fbd6bbcf953f19def44f8c6fccbc6c986882119cb4307b3bd10a082e8ff8776f35e0c815f0164f704) passed validation sawtooth-validator-default    |  2019-04-27 08:56:33.787 DEBUG    block_validator  Removing block from processing 88df67ad063c045da9c1668c58475f36f74434d8cd32ae24f95245ccc5a1b82d36b633640c97cace3a241ffcfbb082cde55b857ad73a2d16658965dda895b1c1 sawtooth-validator-default    |  2019-04-27 08:56:34.945 DEBUG    gossip  Peers are:  'tcp://MY.SERVER.247:8800' . Unpeered candidates are:    sawtooth-validator-default    |  2019-04-27 08:56:35.947 DEBUG    gossip  Number of peers (1) below minimum peer threshold (3). Doing topology search. sawtooth-validator-default    |  2019-04-27 08:56:35.958 DEBUG    gossip_handlers  Got peers response message from 3db573bff15d6c8df43ca090323f4dc01f96216196a855db5c79eecdcde9ff56ffd23505f250ba72bf64ddd974dcc6ebb04a388e36083fe9a195111d81fab6fe. Endpoints:  'tcp://MY.SERVER.233:8800', 'tcp://MY.SERVER.247:8800'  sawtooth-validator-default    |  2019-04-27 08:56:36.268 DEBUG    gossip_handlers  Got peers request message from 3db573bff15d6c8df43ca090323f4dc01f96216196a855db5c79eecdcde9ff56ffd23505f250ba72bf64ddd974dcc6ebb04a388e36083fe9a195111d81fab6fe sawtooth-validator-default    |  2019-04-27 08:56:37.951 DEBUG    gossip  Peers are:  'tcp://MY.SERVER.247:8800' . Unpeered candidates are:    sawtooth-rest-api-default     |  2019-04-27 08:56:38.238 DEBUG    route_handlers  Sending CLIENT_BATCH_SUBMIT_REQUEST request to validator sawtooth-rest-api-default     |  2019-04-27 08:56:38.256 DEBUG    route_handlers  Received CLIENT_BATCH_SUBMIT_RESPONSE response from validator with status OK sawtooth-rest-api-default     |  2019-04-27 08:56:38.258 INFO     helpers  POST /batches HTTP/1.1: 202 status, 362 size, in 0.019897 s sawtooth-validator-default    |  2019-04-27 08:56:38.952 DEBUG    gossip  Number of peers (1) below minimum peer threshold (3). Doing topology search. sawtooth-validator-default    |  2019-04-27 08:56:38.964 DEBUG    gossip_handlers  Got peers response message from 3db573bff15d6c8df43ca090323f4dc01f96216196a855db5c79eecdcde9ff56ffd23505f250ba72bf64ddd974dcc6ebb04a388e36083fe9a195111d81fab6fe. Endpoints:  'tcp://MY.SERVER.233:8800', 'tcp://MY.SERVER.247:8800'  sawtooth-validator-default    |  2019-04-27 08:56:39.273 DEBUG    gossip_handlers  Got peers request message from 3db573bff15d6c8df43ca090323f4dc01f96216196a855db5c79eecdcde9ff56ffd23505f250ba72bf64ddd974dcc6ebb04a388e36083fe9a195111d81fab6fe sawtooth-validator-default    |  2019-04-27 08:56:40.956 DEBUG    gossip  Peers are:  'tcp://MY.SERVER.247:8800' . Unpeered candidates are:    sawtooth-rest-api-default     |  2019-04-27 08:56:41.181 DEBUG    route_handlers  Sending CLIENT_BATCH_SUBMIT_REQUEST request to validator sawtooth-rest-api-default     |  2019-04-27 08:56:41.185 DEBUG    route_handlers  Received CLIENT_BATCH_SUBMIT_RESPONSE response from validator with status OK sawtooth-rest-api-default     |  2019-04-27 08:56:41.186 INFO     helpers  POST /batches HTTP/1.1: 202 status, 362 size, in 0.005305 s sawtooth-validator-default    |  2019-04-27 08:56:41.958 DEBUG    gossip  Number of peers (1) below minimum peer threshold (3). Doing topology search. sawtooth-validator-default    |  2019-04-27 08:56:41.969 DEBUG    gossip_handlers  Got peers response message from 3db573bff15d6c8df43ca090323f4dc01f96216196a855db5c79eecdcde9ff56ffd23505f250ba72bf64ddd974dcc6ebb04a388e36083fe9a195111d81fab6fe. Endpoints:  'tcp://MY.SERVER.233:8800', 'tcp://MY.SERVER.247:8800'  sawtooth-validator-default    |  2019-04-27 08:56:42.277 DEBUG    gossip_handlers  Got peers request message from 3db573bff15d6c8df43ca090323f4dc01f96216196a855db5c79eecdcde9ff56ffd23505f250ba72bf64ddd974dcc6ebb04a388e36083fe9a195111d81fab6fe sawtooth-validator-default    |  2019-04-27 08:56:43.961 DEBUG    gossip  Peers are:  'tcp://MY.SERVER.247:8800' . Unpeered candidates are:    sawtooth-rest-api-default     |  2019-04-27 08:56:44.277 DEBUG    route_handlers  Sending CLIENT_BATCH_SUBMIT_REQUEST request to validator sawtooth-rest-api-default     |  2019-04-27 08:56:44.292 DEBUG    route_handlers  Received CLIENT_BATCH_SUBMIT_RESPONSE response from validator with status OK sawtooth-rest-api-default     |  2019-04-27 08:56:44.293 INFO     helpers  POST /batches HTTP/1.1: 202 status, 362 size, in 0.017161 s sawtooth-validator-default    |  2019-04-27 08:56:44.963 DEBUG    gossip  Number of peers (1) below minimum peer threshold (3). Doing topology search. sawtooth-validator-default    |  2019-04-27 08:56:44.975 DEBUG    gossip_handlers  Got peers response message from 3db573bff15d6c8df43ca090323f4dc01f96216196a855db5c79eecdcde9ff56ffd23505f250ba72bf64ddd974dcc6ebb04a388e36083fe9a195111d81fab6fe. Endpoints:  'tcp://MY.SERVER.233:8800', 'tcp://MY.SERVER.247:8800'  sawtooth-validator-default    |  2019-04-27 08:56:45.282 DEBUG    gossip_handlers  Got peers request message from 3db573bff15d6c8df43ca090323f4dc01f96216196a855db5c79eecdcde9ff56ffd23505f250ba72bf64ddd974dcc6ebb04a388e36083fe9a195111d81fab6fe sawtooth-validator-default    |  2019-04-27 08:56:46.965 DEBUG    gossip  Peers are:  'tcp://MY.SERVER.247:8800' . Unpeered candidates are:    sawtooth-rest-api-default     |  2019-04-27 08:56:47.355 DEBUG    route_handlers  Sending CLIENT_BATCH_SUBMIT_REQUEST request to validator sawtooth-rest-api-default     |  2019-04-27 08:56:47.361 DEBUG    route_handlers  Received CLIENT_BATCH_SUBMIT_RESPONSE response from validator with status OK sawtooth-rest-api-default     |  2019-04-27 08:56:47.362 INFO     helpers  POST /batches HTTP/1.1: 202 status, 362 size, in 0.006510 s sawtooth-validator-default    |  2019-04-27 08:56:47.967 DEBUG    gossip  Number of peers (1) below minimum peer threshold (3). Doing topology search. sawtooth-validator-default    |  2019-04-27 08:56:47.980 DEBUG    gossip_handlers  Got peers response message from 3db573bff15d6c8df43ca090323f4dc01f96216196a855db5c79eecdcde9ff56ffd23505f250ba72bf64ddd974dcc6ebb04a388e36083fe9a195111d81fab6fe. Endpoints:  'tcp://MY.SERVER.233:8800', 'tcp://MY.SERVER.247:8800'  sawtooth-validator-default    |  2019-04-27 08:56:48.285 DEBUG    gossip_handlers  Got peers request message from 3db573bff15d6c8df43ca090323f4dc01f96216196a855db5c79eecdcde9ff56ffd23505f250ba72bf64ddd974dcc6ebb04a388e36083fe9a195111d81fab6fe sawtooth-rest-api-default     |  2019-04-27 08:56:49.101 DEBUG    route_handlers  Sending CLIENT_BATCH_SUBMIT_REQUEST request to validator sawtooth-rest-api-default     |  2019-04-27 08:56:49.106 DEBUG    route_handlers  Received CLIENT_BATCH_SUBMIT_RESPONSE response from validator with status OK sawtooth-rest-api-default     |  2019-04-27 08:56:49.107 INFO     helpers  POST /batches HTTP/1.1: 202 status, 362 size, in 0.005962 s sawtooth-validator-default    |  2019-04-27 08:56:49.971 DEBUG    gossip  Peers are:  'tcp://MY.SERVER.247:8800' . Unpeered candidates are:    {code}  Additionally, about 10 minutes after that happens. The response from the validator turns into `QUEUE_FULL`:  {code:none} sawtooth-rest-api-default     |  2019-04-27 09:12:13.860 DEBUG    route_handlers  Received CLIENT_BATCH_SUBMIT_RESPONSE response from validator with status QUEUE_FULL {code}  This leads me to think that perhaps something internal is getting jammed.  ></body> </Action>
<Action id="59595" issue="39509" author="davidaedwards" type="comment" created="2019-04-30 12:59:43.0" updateauthor="davidaedwards" updated="2019-04-30 12:59:43.0"> <body><! CDATA I ran another test on the original two nodes. This time, I did not constantly post batches to change the users data.  23 hours after starting the node, it will no-longer accept new blocks.   It is only at block number 25 currently.  ></body> </Action>
<Action id="62006" issue="39509" author="arsulegai" type="comment" created="2019-07-22 14:32:41.0" updateauthor="arsulegai" updated="2019-07-22 14:32:41.0"> <body><! CDATA Hi David,    # Could you please confirm if the TP was up and running prior to 5 minutes of the crash because of waiting too long for summarize block issue? # Another possibility is that you might have sent request from a client whose TP is not registered yet with the validator.  ></body> </Action>
<Action id="62007" issue="39509" author="davidaedwards" type="comment" created="2019-07-22 14:37:24.0" updateauthor="davidaedwards" updated="2019-07-22 14:37:24.0"> <body><! CDATA Thank you for the reply, but I have since changed employment, and I do not have access to the code in question. I am not sure the state of the project I was working on, nor when my previous employer will pick it up again.  Perhaps this ticket can be added to a back log?  ></body> </Action>
