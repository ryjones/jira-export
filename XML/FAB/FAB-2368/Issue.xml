<Issue id="14930" key="FAB-2368" number="2368" project="10002" reporter="muralisr" assignee="muralisr" creator="muralisr" type="10004" summary="crash with badly constructed transaction payload" priority="3" resolution="10000" status="6" created="2017-02-19 22:17:00.0" updated="2018-07-20 14:11:44.0" resolutiondate="2017-04-20 00:24:38.0" votes="0" watches="1" workflowId="37541"> <description><! CDATA We get a runtime panic if for some reason the Transaction does not contain a valid TransactionAction   {code:java} panic: runtime error: index out of range  goroutine 146  running : panic(0xb0eb40, 0xc420010100) /opt/go/src/runtime/panic.go:500 +0x1a1 github.com/hyperledger/fabric/protos/utils.GetActionFromEnvelope(0xc420072000, 0xc02, 0xc02, 0x0, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/protos/utils/proputils.go:472 +0xf4 github.com/hyperledger/fabric/core/ledger/kvledger/history/historydb/historyleveldb.(*historyDB).Commit(0xc421409100, 0xc4216b5e60, 0x36, 0xc4215cc500) /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/history/historydb/historyleveldb/historyleveldb.go:112 +0x294 github.com/hyperledger/fabric/core/ledger/kvledger.(*kvLedger).Commit(0xc4213f9300, 0xc4216b5e60, 0x1, 0x1) /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger.go:232 +0x3db github.com/hyperledger/fabric/core/ledger/ledgermgmt.(*closableLedger).Commit(0xc421409220, 0xc4216b5e60, 0x0, 0x0) <autogenerated>:1 +0x54 github.com/hyperledger/fabric/core/committer.(*LedgerCommitter).Commit(0xc4214a3100, 0xc4216b5e60, 0x5, 0x2) /opt/gopath/src/github.com/hyperledger/fabric/core/committer/committer_impl.go:62 +0x121 github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock(0xc4214a4cf0, 0xc4216b5e60, 0x1, 0x4, 0xc42166dfb8) /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:397 +0x56 github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads(0xc4214a4cf0) /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:294 +0x458 created by github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:148 +0x692 {code}  This happened because the nodejs client was out of sync on protos, but still, this should be handled gracefully.  ></description> </Issue>
