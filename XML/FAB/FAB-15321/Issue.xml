<Issue id="39582" key="FAB-15321" number="15321" project="10002" reporter="sambhavdutt" assignee="wenjian" creator="sambhavdutt" type="10004" summary="LTE tests are failing consistently in all couchdb performance test cases with Assertion error" priority="2" resolution="10000" status="6" created="2019-05-02 03:08:37.0" updated="2019-05-13 12:50:25.0" resolutiondate="2019-05-13 12:31:22.0" votes="0" watches="5" workflowId="52466"> <description><! CDATA Ledger tests are failing consistently in all CouchDB performance test cases with Assertion error, "VaryNumParallelTxWithSingleChain performance test for CouchDB failed" The tests take around two hours in the failed cases.   *Branch:* release-1.4  *Error Snippet:* {code:java}  34m2019-05-06 02:37:27.088 UTC  couchdb  CreateDatabaseIfNotExist -> INFO 001 0m Created state database _users  34m2019-05-06 02:37:27.106 UTC  couchdb  CreateDatabaseIfNotExist -> INFO 002 0m Created state database _replicator panic: runtime error: invalid memory address or nil pointer dereference  signal SIGSEGV: segmentation violation code=0x1 addr=0x18 pc=0xfa843e   goroutine 37  running : github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.(*CommonStorageDBProvider).RegisterHealthChecker(0xc00034e270, 0xc00034e270, 0xc00000c480) 	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/common_storage_db.go:67 +0x5e github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.NewCommonStorageDBProvider(0x1332ce0, 0xc00000e160, 0x133cde0, 0x1cd10e8, 0x0, 0x0, 0x2, 0x4, 0x0, 0xc00011e680) 	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/common_storage_db.go:57 +0xec github.com/hyperledger/fabric/core/ledger/kvledger.(*Provider).Initialize(0xc00011e680, 0xc0000bdd40, 0x0, 0x0) 	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:88 +0x25e github.com/hyperledger/fabric/core/ledger/ledgermgmt.initialize(0xc0000c0370) 	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:73 +0x4b4 github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize.func1() 	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:53 +0x2a sync.(*Once).Do(0x1cd11b0, 0xc00006be30) 	/opt/go/go1.11.5.linux.amd64/src/sync/once.go:44 +0xb3 github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize(0xc0000c0370) 	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:52 +0x55 github.com/hyperledger/fabric/test/tools/LTE/chainmgmt.newChainsMgr(0xc00000c1a0, 0xc000037260, 0x10a9601, 0xc0000fa000) 	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/test/tools/LTE/chainmgmt/chains.go:56 +0x130 github.com/hyperledger/fabric/test/tools/LTE/chainmgmt.InitTestEnv(0xc00000c1a0, 0xc000037260, 0x8eb201, 0x5ccf9de6) 	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/test/tools/LTE/chainmgmt/testenv.go:34 +0x77 github.com/hyperledger/fabric/test/tools/LTE/experiments.BenchmarkInsertTxs(0xc0000ca680) 	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/test/tools/LTE/experiments/insert_txs_test.go:44 +0x55 testing.(*B).runN(0xc0000ca680, 0x1) 	/opt/go/go1.11.5.linux.amd64/src/testing/benchmark.go:141 +0xb2 testing.(*B).run1.func1(0xc0000ca680) 	/opt/go/go1.11.5.linux.amd64/src/testing/benchmark.go:214 +0x5a created by testing.(*B).run1 	/opt/go/go1.11.5.linux.amd64/src/testing/benchmark.go:207 +0x7d exit status 2 FAIL	github.com/hyperledger/fabric/test/tools/LTE/experiments	0.236s Failed to run the test. Stopping couchdb container (id: aadcf52f3261)... {code}  Failed Tests  {code:java} ledger_lte.py::perf_couchdb::test_FAB_3870_VaryNumParallelTxPerChain FAILED ledger_lte.py::perf_couchdb::test_FAB_3871_VaryNumChain FAILED ledger_lte.py::perf_couchdb::test_FAB_3872_VaryNumParallelTxWithSingleChain FAILED ledger_lte.py::perf_couchdb::test_FAB_3873_VaryNumChainWithNoParallelism FAILED ledger_lte.py::perf_couchdb::test_FAB_3874_VaryKVSize FAILED ledger_lte.py::perf_couchdb::test_FAB_3875_VaryBatchSize FAILED ledger_lte.py::perf_couchdb::test_FAB_3876a_VaryNumWritesInEachTx FAILED ledger_lte.py::perf_couchdb::test_FAB_3876b_VaryNumReadsInEachTx FAILED 23:04:44 ledger_lte.py::perf_couchdb::test_FAB_3877_VaryNumTxs FAILED {code}  *Build Log* https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-lte-release-1.4-x86_64/127/  ></description> </Issue>
