<Issue id="16152" key="FAB-3555" number="3555" project="10002" reporter="mffrench" assignee="chris.elder" creator="mffrench" type="10004" summary="Peer panic on SIGSEV while connecting to CouchDB" priority="3" resolution="10000" status="6" created="2017-05-02 08:20:14.0" updated="2018-07-20 14:12:30.0" resolutiondate="2017-06-14 00:25:21.0" votes="0" watches="4" workflowId="38253"> <description><! CDATA Hi,  I encountered following SIGSEV on peer with CouchDB on rev b2a2b3b11481438639bf27ed10b99e490dd23b8c (the one recommended on fabric-sdk-java README). This may be solved and I'll try to retest asap on the fresh master but as I didn't see such issue after a search on Jira I raise this bug for the records.  Best regards,  Mathilde  panic: runtime error: invalid memory address or nil pointer dereference  signal SIGSEGV: segmentation violation code=0x1 addr=0x10 pc=0xaadd06   goroutine 1  running : panic(0xc70aa0, 0xc420010060) 	/opt/go/src/runtime/panic.go:500 +0x1a1 github.com/hyperledger/fabric/core/ledger/util/couchdb.(*CouchInstance).handleRequest(0xc4201319a0, 0xd53b79, 0x3, 0xc420226480, 0x17, 0x0, 0x0, 0x0, 0x0, 0x0, ...) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/util/couchdb/couchdb.go:1265 +0xad6 github.com/hyperledger/fabric/core/ledger/util/couchdb.(*CouchInstance).VerifyConnection(0xc4201319a0, 0x0, 0x0, 0x0, 0x0) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/util/couchdb/couchdb.go:337 +0x15d github.com/hyperledger/fabric/core/ledger/util/couchdb.CreateCouchInstance(0xc42000c06f, 0xf, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xc4201ce9f0, ...) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/util/couchdb/couchdbutil.go:44 +0x245 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb.NewVersionedDBProvider(0xc4201ce9f0, 0xc4202064d0, 0x1) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb.go:59 +0xc1 github.com/hyperledger/fabric/core/ledger/kvledger.NewProvider(0xc689e0, 0x0, 0xc42021f4d0, 0x0) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:90 +0x2bf github.com/hyperledger/fabric/core/ledger/ledgermgmt.initialize() 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:59 +0x14e github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize.func1() 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:49 +0x14 sync.(*Once).Do(0x13b4dd0, 0xdd76a8) 	/opt/go/src/sync/once.go:44 +0xdb github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize() 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:50 +0x39 github.com/hyperledger/fabric/peer/node.serve(0xc4202366c0, 0x0, 0x1, 0x0, 0x0) 	/opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:95 +0x74 github.com/hyperledger/fabric/peer/node.glob..func1(0x135d900, 0xc4202366c0, 0x0, 0x1, 0x0, 0x0) 	/opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:83 +0x3f github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0x135d900, 0xc4202366a0, 0x1, 0x1, 0x135d900, 0xc4202366a0) 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x234 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x135e180, 0xf, 0xc4200120f5, 0x4) 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x367 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x135e180, 0x2b, 0xc4200120f5) 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x2b main.main() 	/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:110 +0x545  ></description> </Issue>
