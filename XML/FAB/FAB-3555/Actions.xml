<Action id="23310" issue="16152" author="denyeart" type="comment" created="2017-05-03 02:57:58.0" updateauthor="denyeart" updated="2017-05-03 02:57:58.0"> <body><! CDATA  ~mffrench  I have not seen this error on recent master.  Please do reproduce on latest master and provide reproduction steps.  ></body> </Action>
<Action id="23508" issue="16152" author="mffrench" type="comment" created="2017-05-07 16:04:34.0" updateauthor="mffrench" updated="2017-05-07 16:04:34.0"> <body><! CDATA Hi David,  good news : my test on the last fresh master (rev: 434210518c2d20596cf04f5f2d4256becde9bc80) show the peer is connecting successfully to CouchDB.  Best,  ></body> </Action>
<Action id="23544" issue="16152" author="denyeart" type="comment" body="Thanks  ~mffrench , I will investigate that code location and determine if a nil pointer is still possible in some scenario.  If I dont see any evidence then I will close this Bug since you can&apos;t reproduce it anymore." created="2017-05-08 16:23:45.0" updateauthor="denyeart" updated="2017-05-08 16:23:45.0"/>
<Action id="23568" issue="16152" author="mffrench" type="comment" created="2017-05-08 19:21:38.0" updateauthor="mffrench" updated="2017-05-08 19:21:38.0"> <body><! CDATA In the case you would like to see this SIGSEV in rev b2a2b3b11481438639bf27ed10b99e490dd23b8c here's the extract of my docker-compose : {code:java} o0.org0: container_name: o0.org0 # to be changed with image tag corresponding to rev b2a2b3b11481438639bf27ed10b99e490dd23b8c image: hyperledger/fabric-orderer:x86_64-1.0.0-alpha working_dir: /opt/gopath/src/github.com/hyperledger/fabric/orderer command: orderer environment: # - GRPC_TRACE=all # - GRPC_VERBOSITY=debug - ORDERER_GENERAL_LOGLEVEL=INFO - ORDERER_GENERAL_LISTENADDRESS=0.0.0.0 - ORDERER_GENERAL_LISTENPORT=7050 # - ORDERER_GENERAL_GENESISMETHOD=file - ORDERER_GENERAL_GENESISPROFILE=Elixir # - ORDERER_GENERAL_GENESISFILE=/etc/hyperledger/fabric/orderer/orderer.block - ORDERER_GENERAL_LOCALMSPID=Org0 - ORDERER_GENERAL_LOCALMSPDIR=/etc/hyperledger/fabric/orderer/localMspConfig - ORDERER_GENERAL_TLS_ENABLED=true - ORDERER_GENERAL_TLS_PRIVATEKEY=/etc/hyperledger/fabric/orderer/localMspConfig/keystore/o0Signer.pem - ORDERER_GENERAL_TLS_CERTIFICATE=/etc/hyperledger/fabric/orderer/localMspConfig/signcerts/o0Signer.pem - ORDERER_GENERAL_TLS_ROOTCAS= /etc/hyperledger/fabric/orderer/localMspConfig/cacerts/org0.pem,/etc/hyperledger/fabric/orderer/localMspConfig/cacerts/org1.pem  - ORDERER_CFG_PATH=/etc/hyperledger/fabric/orderer - BASE_DOCKER_NS=hyperledger - DOCKER_NS=hyperledger - ARCH=x86_64 - PROJECT_VERSION=1.0.0-alpha - BASE_VERSION=0.3.0 volumes: - ./tmp/conf/Org0/o0:/etc/hyperledger/fabric/orderer ports: - 8050:7050 - 8060:6060  cdbp0.org0: container_name: cdbp0.org0 # to be changed with image tag corresponding to rev b2a2b3b11481438639bf27ed10b99e490dd23b8c image: hyperledger/fabric-couchdb:x86_64-1.0.0-alpha # to be changed  environment: - CLEAN_DB_ON_STARTUP=true volumes: - ./tmp/data/Org0/p0/cdbp:/opt/couchdb/data ports: - 8084:5984  p0.org0: container_name: p0.org0 # to be changed with image tag corresponding to rev b2a2b3b11481438639bf27ed10b99e490dd23b8c image: hyperledger/fabric-peer:x86_64-1.0.0-alpha depends_on: - o0.org0 - cdbp0.org0 working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer command: sh -c 'echo "Sleep 2 mn waiting CouchDB to be ready" ; sleep 120; cp -R /etc/hyperledger/fabric/msp/ /etc/hyperledger/fabric/peer/ && peer node start --peer-defaultchain=false ; sleep 10000' environment: # - GRPC_TRACE=all # - GRPC_VERBOSITY=debug # - CORE_PEER_ADDRESSAUTODETECT=true - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=elixirtov1_default - CORE_LOGGING_LEVEL=INFO - CORE_NEXT=true - CORE_LEDGER_STATE_STATEDATABASE=CouchDB - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=cdbp0.org0:5984 - CORE_PEER_TLS_ENABLED=true - CORE_PEER_ENDORSER_ENABLED=true - CORE_PEER_GOSSIP_USELEADERELECTION=true - CORE_PEER_GOSSIP_ORGLEADER=false - CORE_PEER_PROFILE_ENABLED=true # - CORE_PEER_GOSSIP_IGNORESECURITY=true - CORE_PEER_ID=p0.org0 - CORE_PEER_ADDRESS=p0.org0:7051 - CORE_PEER_GOSSIP_EXTERNALENDPOINT=p0.org0:7051 - CORE_PEER_LOCALMSPID=Org0 - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/peer/localMspConfig - CORE_PEER_GOSSIP_SKIPHANDSHAKE=true - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/peer/localMspConfig/signcerts/p0Signer.pem - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/peer/localMspConfig/keystore/p0Signer.pem - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/peer/localMspConfig/cacerts/org0.pem - PEER_CFG_PATH=/etc/hyperledger/fabric/peer - BASE_DOCKER_NS=hyperledger - DOCKER_NS=hyperledger - ARCH=x86_64 - PROJECT_VERSION=1.0.0-alpha - BASE_VERSION=0.3.0 volumes: - /var/run/:/host/var/run/ - ./tmp/conf/Org0/p0:/etc/hyperledger/fabric/peer ports: - 8051:7051 - 8053:7053 {code}       ></body> </Action>
<Action id="23569" issue="16152" author="jonathanlevi" type="comment" body="Thank you  ~mffrench " created="2017-05-08 19:37:37.0" updateauthor="jonathanlevi" updated="2017-05-08 19:37:37.0"/>
<Action id="23672" issue="16152" author="christopherferris" type="comment" body=" ~denyeart  is this absolutely critical for alpha2?" created="2017-05-10 17:59:17.0" updateauthor="christopherferris" updated="2017-05-10 17:59:17.0"/>
<Action id="23674" issue="16152" author="denyeart" type="comment" body="Not needed for alpha2, just need to confirm there are no lurking issues here." created="2017-05-10 18:01:26.0" updateauthor="denyeart" updated="2017-05-10 18:01:26.0"/>
<Action id="25669" issue="16152" author="denyeart" type="comment" created="2017-06-07 16:31:36.0" updateauthor="denyeart" updated="2017-06-07 20:03:50.0"> <body><! CDATA We have not seen another occurrence of this issue, but looking at commit b2a2b3b11481438639bf27ed10b99e490dd23b8c, couchdb.go line 1265 is:      couchDBReturn.StatusCode = resp.StatusCode   ~chris.elder  , although we would not expect a nil condition, it would be better to return an error and retry, rather than have a nil pointer panic. Could you add extra error/nil/retry handling around that code?  It is line 1333 in most recent master.     ></body> </Action>
