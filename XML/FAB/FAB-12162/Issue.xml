<Issue id="34080" key="FAB-12162" number="12162" project="10002" reporter="sykesm" assignee="sykesm" creator="sykesm" type="10004" summary="data race between block cutter mock and etcdraft chain test" priority="4" resolution="10000" status="6" created="2018-09-25 17:37:14.0" updated="2018-09-28 13:51:01.0" resolutiondate="2018-09-28 13:51:01.0" votes="0" watches="1" workflowId="45403"> <description><! CDATA {code} unit-tests_1  | •••================== unit-tests_1  | WARNING: DATA RACE unit-tests_1  | Write at 0x00c4201e2848 by goroutine 35: unit-tests_1  |   github.com/hyperledger/fabric/orderer/mocks/common/blockcutter.(*Receiver).Ordered() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/orderer/mocks/common/blockcutter/blockcutter.go:81 +0x760 unit-tests_1  |   github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).serveRequest() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:210 +0x8cc unit-tests_1  |  unit-tests_1  | Previous read at 0x00c4201e2848 by goroutine 19: unit-tests_1  |   github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.glob..func1.2.6.4.1() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:174 +0x5b unit-tests_1  |   runtime.call32() unit-tests_1  |       /opt/go/src/runtime/asm_amd64.s:573 +0x3a unit-tests_1  |   reflect.Value.Call() unit-tests_1  |       /opt/go/src/reflect/value.go:308 +0xc0 unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion.(*AsyncAssertion).pollActual() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion/async_assertion.go:71 +0xc4 unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion.(*AsyncAssertion).match() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion/async_assertion.go:107 +0x100 unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion.(*AsyncAssertion).Should() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion/async_assertion.go:48 +0x76 unit-tests_1  |   github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.glob..func1.2.6.4() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:175 +0x4da unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*runner).runSync() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/runner.go:110 +0xbb unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*runner).run() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/runner.go:64 +0x17a unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*ItNode).Run() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/it_node.go:26 +0xa0 unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec.(*Spec).runSample() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec/spec.go:203 +0x768 unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec.(*Spec).Run() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec/spec.go:138 +0x14b unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).runSpec() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:198 +0x173 unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).runSpecs() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:168 +0x49a unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).Run() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:64 +0x103 unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/suite.(*Suite).Run() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/suite/suite.go:62 +0x3b9 unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo.RunSpecsWithCustomReporters() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/ginkgo_dsl.go:220 +0x310 unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo.RunSpecs() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/ginkgo_dsl.go:201 +0xc1 unit-tests_1  |   github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.TestEtcdraft() unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/etcdraft_suite_test.go:17 +0x85 unit-tests_1  |   testing.tRunner() unit-tests_1  |       /opt/go/src/testing/testing.go:777 +0x16d {code}  This is on current master at #25f79cd6e9877ad8bad5f733b0afcaa8bcbaa41a  ></description> </Issue>
