<Issue id="43363" key="FAB-17101" number="17101" project="10002" reporter="tecnalia" creator="tecnalia" type="10004" summary="Fatal panic on orderer bootup" priority="3" resolution="10204" status="6" created="2019-11-18 11:35:05.0" updated="2020-04-26 04:32:10.0" resolutiondate="2020-04-26 04:32:10.0" votes="0" watches="2" workflowId="56471"> <description><! CDATA {{No idea why im getting this error while deploying the orderer with docker.}}     {{My fabric version is 1.4.3 using official tagged image}}     {{2019-11-18 11:30:15.752 UTC  orderer.common.server  createLedgerFactory -> DEBU 15d Ledger dir: /var/hyperledger/production/orderer}} {{2019-11-18 11:30:15.752 UTC  kvledger.util  CreateDirIfMissing -> DEBU 15e CreateDirIfMissing  /var/hyperledger/production/orderer/index/ }} {{2019-11-18 11:30:15.752 UTC  kvledger.util  logDirStatus -> DEBU 15f Before creating dir -  /var/hyperledger/production/orderer/index/  exists}} {{2019-11-18 11:30:15.752 UTC  kvledger.util  logDirStatus -> DEBU 160 After creating dir -  /var/hyperledger/production/orderer/index/  exists}} {{2019-11-18 11:30:15.775 UTC  orderer.common.server  createSubDir -> DEBU 161 Found chains sub-dir and using it}} {{2019-11-18 11:30:15.775 UTC  orderer.common.server  extractSysChanLastConfig -> INFO 162 Not bootstrapping because of 1 existing channels}} {{2019-11-18 11:30:15.776 UTC  fsblkstorage  newBlockfileMgr -> DEBU 163 newBlockfileMgr() initializing file-based block storage for ledger: system }} {{2019-11-18 11:30:15.776 UTC  kvledger.util  CreateDirIfMissing -> DEBU 164 CreateDirIfMissing  /var/hyperledger/production/orderer/chains/system/ }} {{2019-11-18 11:30:15.776 UTC  kvledger.util  logDirStatus -> DEBU 165 Before creating dir -  /var/hyperledger/production/orderer/chains/system/  does not exist}} {{2019-11-18 11:30:15.776 UTC  kvledger.util  logDirStatus -> DEBU 166 After creating dir -  /var/hyperledger/production/orderer/chains/system/  exists}} {{2019-11-18 11:30:15.776 UTC  fsblkstorage  newBlockfileMgr -> INFO 167 Getting block information from block storage}} {{2019-11-18 11:30:15.776 UTC  fsblkstorage  constructCheckpointInfoFromBlockFiles -> DEBU 168 Retrieving checkpoint info from block files}} {{2019-11-18 11:30:15.776 UTC  fsblkstorage  retrieveLastFileSuffix -> DEBU 169 retrieveLastFileSuffix()}} {{2019-11-18 11:30:15.776 UTC  fsblkstorage  retrieveLastFileSuffix -> DEBU 16a retrieveLastFileSuffix() - biggestFileNum = -1}} {{2019-11-18 11:30:15.776 UTC  fsblkstorage  constructCheckpointInfoFromBlockFiles -> DEBU 16b Last file number found = -1}} {{2019-11-18 11:30:15.776 UTC  fsblkstorage  constructCheckpointInfoFromBlockFiles -> DEBU 16c No block file found}} {{2019-11-18 11:30:15.776 UTC  fsblkstorage  newBlockfileMgr -> DEBU 16d Info constructed by scanning the blocks dir = (*fsblkstorage.checkpointInfo)(0xc00026c2a0)(latestFileChunkSuffixNum= 0 , latestFileChunksize= 0 , isChainEmpty= true , lastBlockNumber= 0 )}} {{2019-11-18 11:30:15.781 UTC  fsblkstorage  newBlockIndex -> DEBU 16e newBlockIndex() - indexItems:  BlockNum  }} {{panic: runtime error: invalid memory address or nil pointer dereference}} {{ signal SIGSEGV: segmentation violation code=0x1 addr=0x10 pc=0x9ed5e9 }}{{goroutine 1  running :}} {{github.com/hyperledger/fabric/protos/utils.GetMetadataFromBlock(0x0, 0x1, 0x0, 0x194, 0x1b8f970)}} {{ /opt/gopath/src/github.com/hyperledger/fabric/protos/utils/blockutils.go:55 +0x39}} {{github.com/hyperledger/fabric/protos/utils.GetLastConfigIndexFromBlock(0x0, 0xc0002b2400, 0xffffffffffffffff, 0x0)}} {{ /opt/gopath/src/github.com/hyperledger/fabric/protos/utils/blockutils.go:75 +0x37}} {{github.com/hyperledger/fabric/orderer/common/multichannel.ConfigBlock(0x7fb1000890f0, 0xc0002b2400, 0xc0002b2400)}} {{ /opt/gopath/src/github.com/hyperledger/fabric/orderer/common/multichannel/registrar.go:112 +0x68}} {{github.com/hyperledger/fabric/orderer/common/server.extractSysChanLastConfig(0x114f780, 0xc0002b2060, 0xc00014a300, 0x114f780)}} {{ /opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:207 +0x275}} {{github.com/hyperledger/fabric/orderer/common/server.Start(0x1018e03, 0x5, 0xc0001ac900)}} {{ /opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:110 +0x28a}} {{github.com/hyperledger/fabric/orderer/common/server.Main()}} {{ /opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:91 +0x1ce}} {{main.main()}} {{ /opt/gopath/src/github.com/hyperledger/fabric/orderer/main.go:15 +0x20}}  ></description> </Issue>
