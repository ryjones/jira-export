<Issue id="40906" key="FAB-15868" number="15868" project="10002" reporter="jlcs" assignee="yacovm" creator="jlcs" type="10004" summary="EtcdRaft fails to start if the PEM TLS certificate differs even in an ending empty line" priority="3" resolution="10000" status="6" created="2019-07-03 11:04:56.0" updated="2019-07-05 12:58:35.0" resolutiondate="2019-07-05 12:58:23.0" votes="0" watches="3" workflowId="53863"> <description><! CDATA When deploying the orderers in Kubernetes, I passed the TLS certificate and private key as K8S secrets.  In this process, I trimmed the PEM text to remove the empty line at the end.  But the genesis block, created with configtxgen, included the empty line.     When the Orderer starts, it tries to find if it is a consenter from the identities in the genesis block. But it searches it with   {{if bytes.Equal(c.Cert, cst.ServerTlsCert)}}  at  https://github.com/hyperledger/fabric/blob/release-1.4/orderer/consensus/etcdraft/consenter.go#L111   Therefore, the last empty line forces the comparison to fail.     It should compare equality with other method, e.g. parsing as string and trimming whitespace, using a certificate package, etc.     ></description> </Issue>
