<Issue id="41445" key="FAB-16104" number="16104" project="10002" reporter="senthil1" assignee="senthil1" creator="senthil1" type="10003" summary="change the order of commit of pvtData of old blocks" priority="3" resolution="10000" status="6" created="2019-07-26 12:10:49.0" updated="2019-08-13 21:26:01.0" resolutiondate="2019-08-13 20:47:56.0" votes="0" watches="3" workflowId="54462"> <description><! CDATA Currently, the commit of pvtData of old block execute the following steps: # commit the pvtData of old blocks to the pvtdata store. # commit the data to stateDB. # remove a marker from the pvtdata store. If the peer fails after storing the data in pvtdatastore, the marker helps in synching the stateDB with the pvtdataStore.  The complex flow is used for the failure/recovery.  This can be simplified as follows: # store the pvtData of old blocks to the stateDB. # store the pvtData of old blocks to the pvtDataStore.  If the peer fails after storing the pvtData in the stateDB, we don't need to do any special operation to recover the states. The reconciler would fetch the data as the pvtData is missing in the pvtdata Store. While committing the pvtData to the stateDB, at the worst case, we might overwrite existing data but there is no consistency issues. Hence, the pvtdataStore would be easily synced after the failure.      ></description> </Issue>
