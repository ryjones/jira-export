<Issue id="30450" key="FAB-10252" number="10252" project="10002" reporter="pandrejko" assignee="denyeart" creator="pandrejko" type="10001" summary="Improve message on query when peer is not authorized to view private data" priority="3" resolution="10001" status="6" created="2018-05-21 17:55:40.0" updated="2019-07-30 02:59:44.0" resolutiondate="2019-07-30 02:59:44.0" votes="0" watches="2" workflowId="35801"> <description><! CDATA Currently, with the marbles_private_data sample chaincode, when a peer who is not  authorized to the private data issues a query for that data, they receive the following 'Error' when this is actually expected behavior.  We should handle this error better and improve the message returned. I'm not sure it should be an error.  'Peer not authorized to private data' or something like that?  ```root@a0233053115d:/opt/gopath/src/github.com/hyperledger/fabric/peer#  peer chaincode query -C mychannel -n marblesp -c '\{"Args": "readMarblePrivateDetails","marble1" }' Error: error query chaincode by endorsing: status:500 message:"\{\"Error\":\"Failed to get private details for marble1: GET_STATE failed: transaction ID: 8bc0cf1b23773b11010e1670c8fd8daeb12cce611cbc03167102b9a83e1dd3bd: Private data matching public hash version is not available. Public hash version = &version.Height\{BlockNum:0x6, TxNum:0x0}, Private data version = (*version.Height)(nil)\"}"  root@a0233053115d:/opt/gopath/src/github.com/hyperledger/fabric/peer#```  ></description> </Issue>
