<Issue id="31557" key="FAB-10988" number="10988" project="10002" reporter="scottz" assignee="nnao" creator="scottz" type="10004" summary="fabric-test daily svt, 4 behave tests with cc upgrades, value cannot be unmarshalled" priority="2" resolution="10000" status="6" created="2018-07-02 18:33:31.0" updated="2019-03-19 11:13:30.0" resolutiondate="2018-07-17 18:14:30.0" votes="0" watches="2" workflowId="42596"> <description><! CDATA In today's daily svt fabric-test results in master (v1.2),  https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-svt-x86_64/68/consoleFull,  4 behave tests are failing. The "peer chaincode upgrade" command is at fault  Failing testcases in peer.feature: FAB-8381, FAB-8759, FAB-8759, FAB-8407  Suspect this might be a test framework issue, which probably must be changed to adapt to an API change - but this is still TBD.  It is reproducible on desktop: I executed `fabric-test/feature$ behave -k -n "values change" peer.feature `, which failed at step `When an admin upgrades the chaincode on channel` with the following error information:  \{'peer0.org1.example.com': 'Error occurred  \'docker exec peer0.org1.example.com /bin/bash -c "CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/23f663ec7e2311e8a3da02c9fd7cbfce/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 CORE_PEER_TLS_ROOTCERT_FILE=/var/hyperledger/configs/23f663ec7e2311e8a3da02c9fd7cbfce/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt CORE_PEER_TLS_CERT_FILE=/var/hyperledger/configs/23f663ec7e2311e8a3da02c9fd7cbfce/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/server.crt CORE_PEER_TLS_KEY_FILE=/var/hyperledger/configs/23f663ec7e2311e8a3da02c9fd7cbfce/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/server.key peer chaincode upgrade --name mycc --version 3 --channelID versioningtest --ctor \\\'\{\\\\"Args\\\\":  \\\\"init\\\\",\\\\"a\\\\",\\\\"1000\\\\",\\\\"b\\\\",\\\\"2000\\\\" }\\\' --tls true --cafile /var/hyperledger/configs/23f663ec7e2311e8a3da02c9fd7cbfce/ordererOrganizations/example.com/orderers/orderer0.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --orderer orderer0.example.com:7050 "\' : \x1b 36m2018-07-02 18:12:38.918 UTC  viperutil  getKeysRecursively -> DEBU 001\x1b 0m Found map string interface\{} value for peer.BCCSP\n\x1b 36m2018-07-02 18:12:38.918 UTC  viperutil  unmarshalJSON -> DEBU 002\x1b 0m Unmarshal JSON: value cannot be unmarshalled: invalid character \'S\' looking for beginning of value     ></description> </Issue>
