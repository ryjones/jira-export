<Issue id="22816" key="FAB-6744" number="6744" project="10002" reporter="bstasyszyn" assignee="c0rwin" creator="bstasyszyn" type="10004" summary="Peer panics when hash of pvt data doesn&apos;t match hash in public data" priority="2" resolution="10000" status="6" created="2017-10-24 14:50:35.0" updated="2018-07-20 14:14:45.0" resolutiondate="2017-10-26 11:08:49.0" votes="0" watches="2" workflowId="40347"> <description><! CDATA Steps to reproduce: -	Create a chaincode that invokes PutPrivateData on a collection, key, and random value (generated inside the chaincode) -	Invoke the chaincode on at least two peers (the random value will be different for each of the endorsers)  One (or both) of the peers panics:  peer0.example.com     | 2017-10-24 13:49:34.730 UTC  gossip/state  commitBlock -> ERRO 07a Got error while committing(Hash of pvt data for collection  mapcc6:col3  does not match with the corresponding hash in the public data.  peer0.example.com     | 					public hash =    byte{0xdc, 0xda, 0xe3, 0xac, 0xb8, 0x97, 0xb3, 0x68, 0x1e, 0x96, 0xc9, 0x15, 0x4e, 0xfa, 0x6c, 0x83, 0x99, 0x85, 0x43, 0x84, 0x2d, 0x49, 0x17, 0xa8, 0x9e, 0xeb, 0xc, 0xdd, 0xdb, 0x90, 0x7d, 0xf8} , pvt data hash =    byte{0xd3, 0x9e, 0xe0, 0xe1, 0xc9, 0x5d, 0x94, 0xc0, 0x31, 0xc4, 0x30, 0x9f, 0x8d, 0xed, 0xbb, 0x40, 0xb7, 0xb6, 0x8c, 0xc4, 0xb1, 0x5f, 0xa1, 0xb6, 0x26, 0x9f, 0x80, 0x22, 0xfe, 0xcd, 0x7c, 0xcf}  peer0.example.com     | commit failed peer0.example.com     | github.com/hyperledger/fabric/gossip/privdata.(*coordinator).StoreBlock peer0.example.com     | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/privdata/coordinator.go:209 peer0.example.com     | github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock peer0.example.com     | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:773 peer0.example.com     | github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads peer0.example.com     | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:557 peer0.example.com     | runtime.goexit peer0.example.com     | 	/opt/go/src/runtime/asm_amd64.s:2337 peer0.example.com     | github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock peer0.example.com     | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:774 peer0.example.com     | github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads peer0.example.com     | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:557 peer0.example.com     | runtime.goexit peer0.example.com     | 	/opt/go/src/runtime/asm_amd64.s:2337)   ></description> </Issue>
