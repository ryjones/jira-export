<Issue id="46305" key="FAB-18328" number="18328" project="10002" reporter="sykesm" creator="sykesm" type="10004" summary="race: externalbuilder/instance_test" priority="4" resolution="10000" status="6" created="2020-11-09 15:12:51.0" updated="2020-11-15 21:09:23.0" resolutiondate="2020-11-15 21:09:23.0" votes="0" watches="1" workflowId="60220" archived="N"> <description><! CDATA Running on master@cc77194a342f156d329ebb65b756716525909057 from November 9, 2020:  {code} ------------------------------ â€¢ Failure  1.013 seconds  Instance /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/container/externalbuilder/instance_test.go:30 Start /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/container/externalbuilder/instance_test.go:273 invokes the builder's run command and sets the run status  It  /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/container/externalbuilder/instance_test.go:274  Timed out after 1.001s. When passed a matcher, ReceiveMatcher's channel *must* receive something.  /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/container/externalbuilder/instance_test.go:288 ------------------------------ ================== WARNING: DATA RACE Write at 0x00c0000ae2a0 by goroutine 21: github.com/hyperledger/fabric/core/container/externalbuilder_test.glob..func2.1() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/container/externalbuilder/instance_test.go:41 +0x59b github.com/onsi/ginkgo/internal/leafnodes.(*runner).runSync() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/runner.go:113 +0xf3 github.com/onsi/ginkgo/internal/leafnodes.(*runner).run() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/runner.go:64 +0x107 github.com/onsi/ginkgo/internal/leafnodes.(*SetupNode).Run() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/setup_nodes.go:15 +0x87 github.com/onsi/ginkgo/internal/spec.(*Spec).runSample() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec/spec.go:193 +0x2c5 github.com/onsi/ginkgo/internal/spec.(*Spec).Run() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec/spec.go:138 +0x17e github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).runSpec() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:200 +0x172 github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).runSpecs() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:170 +0x216 github.com/onsi/ginkgo/internal/leafnodes.(*ItNode).Run() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/it_node.go:26 +0x87 github.com/onsi/ginkgo/internal/spec.(*Spec).runSample() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec/spec.go:215 +0x6e1 github.com/onsi/ginkgo/internal/spec.(*Spec).Run() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec/spec.go:138 +0x17e github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).runSpec() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:200 +0x172 github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).runSpecs() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:170 +0x216 github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).Run() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:66 +0x140 github.com/onsi/ginkgo/internal/suite.(*Suite).Run() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/suite/suite.go:62 +0x69f github.com/onsi/ginkgo.RunSpecsWithCustomReporters() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/ginkgo_dsl.go:221 +0x349 github.com/onsi/ginkgo.RunSpecs() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/ginkgo_dsl.go:202 +0x99 github.com/hyperledger/fabric/core/container/externalbuilder_test.TestExternalbuilders() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/container/externalbuilder/externalbuilder_suite_test.go:18 +0xf8 testing.tRunner() /usr/local/Cellar/go@1.14/1.14.11/libexec/src/testing/testing.go:1050 +0x1eb  Previous read at 0x00c0000ae2a0 by goroutine 26: github.com/hyperledger/fabric/core/container/externalbuilder_test.glob..func2.5.1.1() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/container/externalbuilder/instance_test.go:287 +0x3c  Goroutine 21 (running) created at: testing.(*T).Run() /usr/local/Cellar/go@1.14/1.14.11/libexec/src/testing/testing.go:1095 +0x537 testing.runTests.func1() /usr/local/Cellar/go@1.14/1.14.11/libexec/src/testing/testing.go:1339 +0xa6 testing.tRunner() /usr/local/Cellar/go@1.14/1.14.11/libexec/src/testing/testing.go:1050 +0x1eb testing.runTests() /usr/local/Cellar/go@1.14/1.14.11/libexec/src/testing/testing.go:1337 +0x594 testing.(*M).Run() /usr/local/Cellar/go@1.14/1.14.11/libexec/src/testing/testing.go:1252 +0x2ff main.main() _testmain.go:104 +0x337  Goroutine 26 (running) created at: github.com/hyperledger/fabric/core/container/externalbuilder_test.glob..func2.5.1() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/container/externalbuilder/instance_test.go:287 +0x5c3 github.com/onsi/ginkgo/internal/leafnodes.(*runner).runSync() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/runner.go:113 +0xf3 github.com/onsi/ginkgo/internal/leafnodes.(*runner).run() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/runner.go:64 +0x107 github.com/onsi/ginkgo/internal/leafnodes.(*ItNode).Run() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/it_node.go:26 +0x87 github.com/onsi/ginkgo/internal/spec.(*Spec).runSample() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec/spec.go:215 +0x6e1 github.com/onsi/ginkgo/internal/spec.(*Spec).Run() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec/spec.go:138 +0x17e github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).runSpec() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:200 +0x172 github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).runSpecs() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:170 +0x216 github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).Run() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:66 +0x140 github.com/onsi/ginkgo/internal/suite.(*Suite).Run() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/suite/suite.go:62 +0x69f github.com/onsi/ginkgo.RunSpecsWithCustomReporters() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/ginkgo_dsl.go:221 +0x349 github.com/onsi/ginkgo.RunSpecs() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/ginkgo_dsl.go:202 +0x99 github.com/hyperledger/fabric/core/container/externalbuilder_test.TestExternalbuilders() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/container/externalbuilder/externalbuilder_suite_test.go:18 +0xf8 testing.tRunner() /usr/local/Cellar/go@1.14/1.14.11/libexec/src/testing/testing.go:1050 +0x1eb ================== {code}  ></description> </Issue>
