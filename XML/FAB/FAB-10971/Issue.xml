<Issue id="31535" key="FAB-10971" number="10971" project="10002" reporter="mrshah-ibm" assignee="c0rwin" creator="mrshah-ibm" type="10004" summary="JavaEnv does not build on x86_64 systems for v1.1" priority="3" resolution="10001" status="6" created="2018-07-02 14:31:18.0" updated="2018-12-01 23:11:57.0" resolutiondate="2018-12-01 23:11:57.0" votes="0" watches="3" workflowId="42834"> <description><! CDATA When building the javaenv image, I get the following error:    {quote}docker build -t hyperledger/fabric-javaenv build/image/javaenv Sending build context to Docker daemon 50.18kB  Step 1/15 : FROM hyperledger/fabric-baseimage:0.4.6 ---> d41e75e114ef Step 2/15 : RUN curl -sSL https://services.gradle.org/distributions/gradle-2.12-bin.zip > /tmp/gradle-2.12-bin.zip ---> Running in df30d2d95011 Removing intermediate container df30d2d95011 ---> 2008eeb2351e Step 3/15 : RUN unzip -qo /tmp/gradle-2.12-bin.zip -d /opt && rm /tmp/gradle-2.12-bin.zip ---> Running in 4ddafd11895c Removing intermediate container 4ddafd11895c ---> 26fc0e018d49 Step 4/15 : RUN ln -s /opt/gradle-2.12/bin/gradle /usr/bin ---> Running in 95ea5f700f1a Removing intermediate container 95ea5f700f1a ---> a1d309b3829e Step 5/15 : ENV MAVEN_VERSION=3.3.9 ---> Running in d529cc24a855 Removing intermediate container d529cc24a855 ---> 73da8b1955b3 Step 6/15 : ENV USER_HOME_DIR="/root" ---> Running in 022eb2a7272d Removing intermediate container 022eb2a7272d ---> ad2e5fb646b5 Step 7/15 : RUN mkdir -p /usr/share/maven /usr/share/maven/ref && curl -fsSL http://www-us.apache.org/dist/maven/maven-3/$MAVEN_VERSION/binaries/apache-maven-$MAVEN_VERSION-bin.tar.gz | tar -xzC /usr/share/maven --strip-components=1 && ln -s /usr/share/maven/bin/mvn /usr/bin/mvn ---> Running in 36ae34b90538 Removing intermediate container 36ae34b90538 ---> 9fbbc5b8aed9 Step 8/15 : ENV MAVEN_HOME /usr/share/maven ---> Running in d7505f1cb6b2 Removing intermediate container d7505f1cb6b2 ---> 9eb6074512a7 Step 9/15 : ENV MAVEN_CONFIG "$USER_HOME_DIR/.m2" ---> Running in cddda5460704 Removing intermediate container cddda5460704 ---> 795cafaa1c6f Step 10/15 : ADD payload/javashim.tar.bz2 /root ---> f9f5813c2811 Step 11/15 : ADD payload/protos.tar.bz2 /root ---> 5f8d81e49e50 Step 12/15 : ADD payload/settings.gradle /root ---> 4fdd483fadeb Step 13/15 : WORKDIR /root Removing intermediate container a9330af061c7 ---> 4f3d9a4b8304 Step 14/15 : RUN core/chaincode/shim/java/javabuild.sh ---> Running in 3e1096eb15f1 � 91m � 0m� 91mFAILURE: � 0m� 91mBuild failed with an exception.� 0m� 91m � 0m� 91m � 0m� 91m* What went wrong: � 0m� 91mA problem occurred configuring project ':core:chaincode:shim:java'. � 0m� 91m> � 0m� 91mCould not resolve all dependencies for configuration ':core:chaincode:shim:java:classpath'. � 0m� 91m � 0m� 91m> � 0m� 91mCould not resolve com.google.protobuf:protobuf-gradle-plugin:0.8.0. � 0m� 91m Required by: � 0m� 91m root.core.chaincode.shim:java:unspecified � 0m� 91m � 0m� 91m> � 0m� 91mCould not resolve com.google.protobuf:protobuf-gradle-plugin:0.8.0. � 0m� 91m � 0m� 91m> � 0m� 91mCould not get resource 'https://repo1.maven.org/maven2/com/google/protobuf/protobuf-gradle-plugin/0.8.0/protobuf-gradle-plugin-0.8.0.pom'. � 0m� 91m � 0m� 91m> � 0m� 91mCould not GET 'https://repo1.maven.org/maven2/com/google/protobuf/protobuf-gradle-plugin/0.8.0/protobuf-gradle-plugin-0.8.0.pom'. � 0m� 91m � 0m� 91m> � 0m� 91mReceived fatal alert: protocol_version � 0m� 91m � 0m� 91m> � 0m� 91mCould not resolve com.google.protobuf:protobuf-gradle-plugin:0.8.0. � 0m� 91m � 0m� 91m> � 0m� 91mCould not get resource 'https://jcenter.bintray.com/com/google/protobuf/protobuf-gradle-plugin/0.8.0/protobuf-gradle-plugin-0.8.0.pom'. � 0m� 91m � 0m� 91m> � 0m� 91mCould not GET 'https://jcenter.bintray.com/com/google/protobuf/protobuf-gradle-plugin/0.8.0/protobuf-gradle-plugin-0.8.0.pom'. � 0m� 91m � 0m� 91m> � 0m� 91mConnection reset � 0m� 91m � 0m� 91m> � 0m� 91mCould not resolve com.google.protobuf:protobuf-gradle-plugin:0.8.0. � 0m� 91m � 0m� 91m> � 0m� 91mCould not get resource 'https://plugins.gradle.org/m2/com/google/protobuf/protobuf-gradle-plugin/0.8.0/protobuf-gradle-plugin-0.8.0.pom'. � 0m� 91m � 0m� 91m> � 0m� 91mCould not GET 'https://plugins.gradle.org/m2/com/google/protobuf/protobuf-gradle-plugin/0.8.0/protobuf-gradle-plugin-0.8.0.pom'. � 0m� 91m � 0m� 91m> � 0m� 91mConnection reset � 0m� 91m � 0m� 91m> � 0m� 91mCould not resolve com.google.guava:guava:18.0. � 0m� 91m Required by: � 0m� 91m root.core.chaincode.shim:java:unspecified > gradle.plugin.com.google.protobuf:protobuf-gradle-plugin:0.8.0 � 0m� 91m � 0m� 91m> � 0m� 91mCould not resolve com.google.guava:guava:18.0. � 0m� 91m � 0m� 91m> � 0m� 91mCould not get resource 'https://repo1.maven.org/maven2/com/google/guava/guava/18.0/guava-18.0.pom'. � 0m� 91m � 0m� 91m> � 0m� 91mCould not GET 'https://repo1.maven.org/maven2/com/google/guava/guava/18.0/guava-18.0.pom'. � 0m� 91m > Received fatal alert: protocol_version � 0m� 91m > � 0m� 91mCould not resolve com.google.guava:guava:18.0. � 0m� 91m> Could not get resource 'https://jcenter.bintray.com/com/google/guava/guava/18.0/guava-18.0.pom'. � 0m� 91m > � 0m� 91mCould not GET 'https://jcenter.bintray.com/com/google/guava/guava/18.0/guava-18.0.pom'. � 0m� 91m > � 0m� 91mConnection reset > Could not resolve com.google.guava:guava:18.0. � 0m� 91m > � 0m� 91mCould not get resource 'https://plugins.gradle.org/m2/com/google/guava/guava/18.0/guava-18.0.pom'. � 0m� 91m > Could not GET 'https://plugins.gradle.org/m2/com/google/guava/guava/18.0/guava-18.0.pom'. � 0m� 91m > � 0m� 91mConnection reset � 0m� 91m > � 0m� 91mCould not resolve com.google.gradle:osdetector-gradle-plugin:1.4.0. � 0m� 91m Required by: � 0m� 91m root.core.chaincode.shim:java:unspecified > gradle.plugin.com.google.protobuf:protobuf-gradle-plugin:0.8.0 � 0m� 91m > Could not resolve com.google.gradle:osdetector-gradle-plugin:1.4.0. � 0m� 91m � 0m� 91m> � 0m� 91mCould not get resource 'https://repo1.maven.org/maven2/com/google/gradle/osdetector-gradle-plugin/1.4.0/osdetector-gradle-plugin-1.4.0.pom'. � 0m� 91m> Could not GET 'https://repo1.maven.org/maven2/com/google/gradle/osdetector-gradle-plugin/1.4.0/osdetector-gradle-plugin-1.4.0.pom'. > � 0m� 91mReceived fatal alert: protocol_version > � 0m� 91mCould not resolve com.google.gradle:osdetector-gradle-plugin:1.4.0. > � 0m� 91mCould not get resource 'https://jcenter.bintray.com/com/google/gradle/osdetector-gradle-plugin/1.4.0/osdetector-gradle-plugin-1.4.0.pom'. > � 0m� 91mCould not GET 'https://jcenter.bintray.com/com/google/gradle/osdetector-gradle-plugin/1.4.0/osdetector-gradle-plugin-1.4.0.pom'. > � 0m� 91mConnection reset > Could not resolve com.google.gradle:osdetector-gradle-plugin:1.4.0. � 0m� 91m > � 0m� 91mCould not get resource 'https://plugins.gradle.org/m2/com/google/gradle/osdetector-gradle-plugin/1.4.0/osdetector-gradle-plugin-1.4.0.pom'. > � 0m� 91mCould not GET 'https://plugins.gradle.org/m2/com/google/gradle/osdetector-gradle-plugin/1.4.0/osdetector-gradle-plugin-1.4.0.pom'. � 0m� 91m > � 0m� 91mConnection reset � 0m� 91m > Could not resolve commons-lang:commons-lang:2.6. Required by: � 0m� 91m root.core.chaincode.shim:java:unspecified > gradle.plugin.com.google.protobuf:protobuf-gradle-plugin:0.8.0 � 0m� 91m> Could not resolve commons-lang:commons-lang:2.6. � 0m� 91m > Could not get resource 'https://repo1.maven.org/maven2/commons-lang/commons-lang/2.6/commons-lang-2.6.pom'. � 0m� 91m > � 0m� 91mCould not GET 'https://repo1.maven.org/maven2/commons-lang/commons-lang/2.6/commons-lang-2.6.pom'. � 0m� 91m > Received fatal alert: protocol_version � 0m� 91m > � 0m� 91mCould not resolve commons-lang:commons-lang:2.6. � 0m� 91m> Could not get resource 'https://jcenter.bintray.com/commons-lang/commons-lang/2.6/commons-lang-2.6.pom'. � 0m� 91m > Could not GET 'https://jcenter.bintray.com/commons-lang/commons-lang/2.6/commons-lang-2.6.pom'. � 0m� 91m > Connection reset � 0m� 91m > Could not resolve commons-lang:commons-lang:2.6. � 0m� 91m > � 0m� 91mCould not get resource 'https://plugins.gradle.org/m2/commons-lang/commons-lang/2.6/commons-lang-2.6.pom'. > � 0m� 91mCould not GET 'https://plugins.gradle.org/m2/commons-lang/commons-lang/2.6/commons-lang-2.6.pom'. � 0m� 91m> Connection reset  � 0m� 91m* Try: � 0m� 91mRun with --stacktrace option to get the stack trace. Run with � 0m� 91m--info or --debug� 0m� 91m option to get more log output. � 0mThe command '/bin/sh -c core/chaincode/shim/java/javabuild.sh' returned a non-zero code: 1 Makefile:304: recipe for target 'build/image/javaenv/.dummy-x86_64-1.1.0' failed make: ***  build/image/javaenv/.dummy-x86_64-1.1.0  Error 1 {quote}    ></description> </Issue>
