<Issue id="33707" key="FAB-11974" number="11974" project="10002" reporter="sykesm" assignee="manish-sethi" creator="sykesm" type="10004" summary="Intermittent test failures in in CI from panic core/ledger/kvledger" priority="3" resolution="10000" status="6" created="2018-09-12 20:34:50.0" updated="2019-03-19 10:57:39.0" resolutiondate="2018-09-15 12:44:44.0" votes="0" watches="2" workflowId="45008"> <description><! CDATA {code} 00:10:16.946 unit-tests_1  | panic: runtime error: invalid memory address or nil pointer dereference 00:10:16.946 unit-tests_1  |  signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0xe17732  00:10:16.947 unit-tests_1  |  00:10:16.947 unit-tests_1  | goroutine 598  running : 00:10:16.947 unit-tests_1  | github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).newRawIterator(0xc422e14d00, 0x0, 0x0, 0x0, 0x0, 0xc4228b0090, 0xc420578150, 0x1, 0xc420569e80) 00:10:16.948 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_iter.go:54 +0x2a2 00:10:16.949 unit-tests_1  | github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).newIterator(0xc422e14d00, 0x0, 0x0, 0x0, 0x0, 0x0, 0xc424a2cc38, 0xc420578150, 0xff) 00:10:16.950 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_iter.go:79 +0x99 00:10:16.951 unit-tests_1  | github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).NewIterator(0xc422e14d00, 0xc424a2cc38, 0xc420578150, 0x0, 0x0) 00:10:16.952 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:886 +0x147 00:10:16.952 unit-tests_1  | github.com/hyperledger/fabric/common/ledger/util/leveldbhelper.(*DB).GetIterator(0xc4200312c0, 0xc420569e20, 0x11, 0x20, 0xc420569e40, 0x11, 0x20, 0x20, 0xc4205d5cc8) 00:10:16.953 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/common/ledger/util/leveldbhelper/leveldb_helper.go:143 +0xa0 00:10:16.953 unit-tests_1  | github.com/hyperledger/fabric/common/ledger/util/leveldbhelper.(*DBHandle).GetIterator(0xc4204903e0, 0xc4205d5c90, 0x4, 0x8, 0xc4205d5cc0, 0x4, 0x8, 0x38) 00:10:16.953 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/common/ledger/util/leveldbhelper/leveldb_provider.go:110 +0x377 00:10:16.954 unit-tests_1  | github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt.(*expKeeper).retrieve(0xc42329c0c8, 0x5, 0x0, 0x0, 0x0, 0x0, 0x0) 00:10:16.954 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/expiry_keeper.go:84 +0x119 00:10:16.954 unit-tests_1  | github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt.(*purgeMgr).prepareWorkingsetFor(0xc42329e370, 0x5, 0xc4201c3630) 00:10:16.954 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/purge_mgr.go:151 +0x10a 00:10:16.955 unit-tests_1  | github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt.(*purgeMgr).PrepareForExpiringKeys.func1(0xc42329e370, 0x5) 00:10:16.955 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/purge_mgr.go:78 +0x87 00:10:16.955 unit-tests_1  | created by github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt.(*purgeMgr).PrepareForExpiringKeys 00:10:16.955 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/purge_mgr.go:74 +0x64 00:10:16.956 unit-tests_1  | FAIL	github.com/hyperledger/fabric/core/ledger/kvledger	24.834s {code}   ></description> </Issue>
