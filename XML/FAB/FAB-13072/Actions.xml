<Action id="54173" issue="35740" author="denyeart" type="comment" created="2018-12-03 05:11:28.0" updateauthor="denyeart" updated="2018-12-03 05:11:28.0"> <body><! CDATA  ~ShefaliMittal  I see the issue... when an index is defined it gets created as a document in the CouchDB database. The index document gets returned in the range query, and it doesn't have the expected ~version field defined. The same issue happens if you try to GetState() on a key like "_design/indexOwnerDoc". Note that PutState() does not allow keys that begin with an underscore as it is a reserved character in CouchDB. A similar check needs to be made for the chaincode getters, to ignore keys with underscores. For the range query there will additionally be paging implications.  FYI  ~Senthil1   ~manish-sethi   ></body> </Action>
<Action id="54211" issue="35740" author="denyeart" type="comment" created="2018-12-03 18:44:06.0" updateauthor="denyeart" updated="2018-12-05 04:57:33.0"> <body><! CDATA For v1.4 Fabric can fix by either detecting the missing ~version and adding a dummy version, or pulling these records out of the result set. We will go with the latter. And to ensure we return the expected page size, will requery CouchDB for more records if needed.  A defect will also be opened against CouchDB to not return indexes (metadata) in queries for user data.  ></body> </Action>
<Action id="54346" issue="35740" author="denyeart" type="comment" body="Merged https://gerrit.hyperledger.org/r/#/c/27915/ to master (v1.4)" created="2018-12-05 04:33:46.0" updateauthor="denyeart" updated="2018-12-05 04:33:46.0"/>
<Action id="54348" issue="35740" author="denyeart" type="comment" body="Cherry picked to release-1.3: https://gerrit.hyperledger.org/r/#/c/27948/" created="2018-12-05 04:56:46.0" updateauthor="denyeart" updated="2018-12-05 04:56:46.0"/>
