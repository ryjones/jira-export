<Action id="34563" issue="23913" author="mastersingh24" type="comment" created="2017-11-11 12:14:11.0" updateauthor="mastersingh24" updated="2017-11-11 12:14:11.0"> <body><! CDATA {code:java} root@906d5f0fede6:/opt/gopath/src/github.com/hyperledger/fabric/peer# pwd /opt/gopath/src/github.com/hyperledger/fabric/peer root@906d5f0fede6:/opt/gopath/src/github.com/hyperledger/fabric/peer# go get github.com/hyperledger/fabric/examples/chaincode/go/marbles02 package github.com/hyperledger/fabric/examples/chaincode/go/marbles02: /opt/gopath/src/github.com/hyperledger/fabric exists but /opt/gopath/src/github.com/hyperledger/fabric/.git does not - stale checkout? root@906d5f0fede6:/opt/gopath/src/github.com/hyperledger/fabric/peer# {code}  The above is not actually a real problem.  marbles02 should actually now be in the CLI image  ></body> </Action>
<Action id="34569" issue="23913" author="hhimanshu" type="comment" created="2017-11-12 16:14:22.0" updateauthor="hhimanshu" updated="2017-11-12 16:14:22.0"> <body><! CDATA Thanks,  ~mastersingh24  for your comment. based on your statement "actually now be in the CLI image", I refreshed my github repo and re-performed all the steps again.      {code:java} ➜  first-network git:(master) ✗ git pull origin master From https://github.com/hyperledger/fabric-samples * branch            master     -> FETCH_HEAD Already up-to-date. ➜  first-network git:(master) ✗ {code}   {code:java} ➜  first-network git:(master) ✗ ./byfn.sh -m generate Generating certs and genesis block for with channel 'mychannel' and CLI timeout of '10000' seconds and CLI delay of '3' seconds Continue (y/n)? y proceeding ... /Users/harit/bl/sources/hyperledger/bin/cryptogen  ########################################################## ##### Generate certificates using cryptogen tool ######### ########################################################## org1.example.com org2.example.com  /Users/harit/bl/sources/hyperledger/bin/configtxgen ########################################################## #########  Generating Orderer Genesis block ############## ########################################################## 2017-11-13 04:50:47.848 NZDT  common/tools/configtxgen  main -> INFO 001 Loading configuration 2017-11-13 04:50:47.855 NZDT  common/tools/configtxgen  doOutputBlock -> INFO 002 Generating genesis block 2017-11-13 04:50:47.856 NZDT  common/tools/configtxgen  doOutputBlock -> INFO 003 Writing genesis block  ################################################################# ### Generating channel configuration transaction 'channel.tx' ### ################################################################# 2017-11-13 04:50:47.871 NZDT  common/tools/configtxgen  main -> INFO 001 Loading configuration 2017-11-13 04:50:47.875 NZDT  common/tools/configtxgen  doOutputChannelCreateTx -> INFO 002 Generating new channel configtx 2017-11-13 04:50:47.876 NZDT  common/tools/configtxgen  doOutputChannelCreateTx -> INFO 003 Writing new channel tx  ################################################################# #######    Generating anchor peer update for Org1MSP   ########## ################################################################# 2017-11-13 04:50:47.889 NZDT  common/tools/configtxgen  main -> INFO 001 Loading configuration 2017-11-13 04:50:47.894 NZDT  common/tools/configtxgen  doOutputAnchorPeersUpdate -> INFO 002 Generating anchor peer update 2017-11-13 04:50:47.894 NZDT  common/tools/configtxgen  doOutputAnchorPeersUpdate -> INFO 003 Writing anchor peer update  ################################################################# #######    Generating anchor peer update for Org2MSP   ########## ################################################################# 2017-11-13 04:50:47.908 NZDT  common/tools/configtxgen  main -> INFO 001 Loading configuration 2017-11-13 04:50:47.914 NZDT  common/tools/configtxgen  doOutputAnchorPeersUpdate -> INFO 002 Generating anchor peer update 2017-11-13 04:50:47.914 NZDT  common/tools/configtxgen  doOutputAnchorPeersUpdate -> INFO 003 Writing anchor peer update {code}   {code:java} ➜  first-network git:(master) ✗ ./byfn.sh -m up -s couchdb > ~/Downloads/couchdb_network.log Continue (y/n)? y {code} see log file attached.   {code:java} ➜  first-network git:(master) ✗ docker ps CONTAINER ID        IMAGE                                                                                                  COMMAND                  CREATED              STATUS              PORTS                                              NAMES 0c1b05653416        dev-peer1.org2.example.com-mycc-1.0-26c2ef32838554aac4f7ad6f100aca865e87959c9a126e86d764c8d01f8346ab   "chaincode -peer.a..."   27 seconds ago       Up 26 seconds                                                          dev-peer1.org2.example.com-mycc-1.0 0b49cbac3032        dev-peer0.org1.example.com-mycc-1.0-384f11f484b9302df90b453200cfb25174305fce8f53f4e94d45ee3b6cab0ce9   "chaincode -peer.a..."   43 seconds ago       Up 41 seconds                                                          dev-peer0.org1.example.com-mycc-1.0 f33e2ea9cf0b        dev-peer0.org2.example.com-mycc-1.0-15b571b3ce849066b7ec74497da3b27e54e0df1345daff3951b94245ce09c42b   "chaincode -peer.a..."   58 seconds ago       Up 56 seconds                                                          dev-peer0.org2.example.com-mycc-1.0 1065ffdcf942        hyperledger/fabric-tools                                                                               "/bin/bash -c './s..."   About a minute ago   Up About a minute                                                      cli 9dadd735eb3a        hyperledger/fabric-peer                                                                                "peer node start"        About a minute ago   Up About a minute   0.0.0.0:9051->7051/tcp, 0.0.0.0:9053->7053/tcp     peer0.org2.example.com eaa4c5549690        hyperledger/fabric-peer                                                                                "peer node start"        About a minute ago   Up About a minute   0.0.0.0:8051->7051/tcp, 0.0.0.0:8053->7053/tcp     peer1.org1.example.com 23c1b62f96e9        hyperledger/fabric-peer                                                                                "peer node start"        About a minute ago   Up About a minute   0.0.0.0:10051->7051/tcp, 0.0.0.0:10053->7053/tcp   peer1.org2.example.com b2be48b39dd4        hyperledger/fabric-peer                                                                                "peer node start"        About a minute ago   Up About a minute   0.0.0.0:7051->7051/tcp, 0.0.0.0:7053->7053/tcp     peer0.org1.example.com 151b6acca22a        hyperledger/fabric-couchdb                                                                             "tini -- /docker-e..."   About a minute ago   Up About a minute   4369/tcp, 9100/tcp, 0.0.0.0:6984->5984/tcp         couchdb1 7ec644d73014        hyperledger/fabric-couchdb                                                                             "tini -- /docker-e..."   About a minute ago   Up About a minute   4369/tcp, 9100/tcp, 0.0.0.0:7984->5984/tcp         couchdb2 98703920adfd        hyperledger/fabric-couchdb                                                                             "tini -- /docker-e..."   About a minute ago   Up About a minute   4369/tcp, 9100/tcp, 0.0.0.0:8984->5984/tcp         couchdb3 ca2debd16466        hyperledger/fabric-couchdb                                                                             "tini -- /docker-e..."   About a minute ago   Up About a minute   4369/tcp, 9100/tcp, 0.0.0.0:5984->5984/tcp         couchdb0 12bf8fbf3c75        hyperledger/fabric-orderer                                                                             "orderer"                About a minute ago   Up About a minute   0.0.0.0:7050->7050/tcp                             orderer.example.com ➜  first-network git:(master) ✗ {code}   {code:java} ➜  first-network git:(master) ✗ docker exec -it cli bash root@1065ffdcf942:/opt/gopath/src/github.com/hyperledger/fabric/peer# {code}    Now, I tried running the command again based on the docs  https://hyperledger-fabric.readthedocs.io/en/latest/build_network.html#using-couchdb.    *  {quote}Install and instantiate the chaincode on {{peer0.org1.example.com}}: {quote}  {quote} # be sure to modify the $CHANNEL_NAME variable accordingly for the instantiate command peer chaincode install -n marbles -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/marbles02   peer chaincode instantiate -o orderer.example.com:7050 --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem -C $CHANNEL_NAME -n marbles -v 1.0 -c '\{"Args": "init" }' -P "OR ('Org0MSP.member','Org1MSP.member')"{quote} Pay close attention to the first command {code:java} -p github.com/hyperledger/fabric/examples/chaincode/go/marbles02{code} But this path does not exist in the {{cli}}, I tried locating it   {code:java} root@1065ffdcf942:/opt/gopath/src/github.com/hyperledger/fabric/peer# find / -type d -name "go" /opt/gopath/src/github.com/chaincode/chaincode_example02/go /opt/gopath/src/github.com/chaincode/fabcar/go /opt/gopath/src/github.com/chaincode/marbles02/go /opt/go /opt/go/src/go /opt/go/src/cmd/go /opt/go/misc/tour/static/lib/codemirror/mode/go /opt/go/pkg/linux_amd64/go /opt/go/pkg/linux_amd64/cmd/go /opt/go/pkg/linux_amd64_race/go {code} and realized that the path in the documentation is not correct anymore (maybe that was the path in previous releases). The correct path therefore, is  {code:java} -p github.com/chaincode/chaincode_example02/go {code} and I verified that as well   {code:java} root@1065ffdcf942:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer chaincode install -n marbles -v 1.0 -p github.com/chaincode/chaincode_example02/go 2017-11-12 15:58:45.093 UTC  msp  GetLocalMSP -> DEBU 001 Returning existing local MSP 2017-11-12 15:58:45.093 UTC  msp  GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity 2017-11-12 15:58:45.093 UTC  chaincodeCmd  checkChaincodeCmdParams -> INFO 003 Using default escc 2017-11-12 15:58:45.093 UTC  chaincodeCmd  checkChaincodeCmdParams -> INFO 004 Using default vscc 2017-11-12 15:58:45.093 UTC  chaincodeCmd  getChaincodeSpec -> DEBU 005 java chaincode disabled 2017-11-12 15:58:45.130 UTC  golang-platform  getCodeFromFS -> DEBU 006 getCodeFromFS github.com/chaincode/chaincode_example02/go 2017-11-12 15:58:45.251 UTC  golang-platform  func1 -> DEBU 007 Discarding GOROOT package fmt 2017-11-12 15:58:45.251 UTC  golang-platform  func1 -> DEBU 008 Discarding provided package github.com/hyperledger/fabric/core/chaincode/shim 2017-11-12 15:58:45.251 UTC  golang-platform  func1 -> DEBU 009 Discarding provided package github.com/hyperledger/fabric/protos/peer 2017-11-12 15:58:45.251 UTC  golang-platform  func1 -> DEBU 00a Discarding GOROOT package strconv 2017-11-12 15:58:45.253 UTC  golang-platform  GetDeploymentPayload -> DEBU 00b done 2017-11-12 15:58:45.258 UTC  msp/identity  Sign -> DEBU 00c Sign: plaintext: 0A9F070A5B08031A0B08B5DFA1D00510...F619FF0E0000FFFFACD4020D001C0000 2017-11-12 15:58:45.258 UTC  msp/identity  Sign -> DEBU 00d Sign: digest: 2C97AD52D2F2365EC5DBE37698C1967C914E59720B874A833A32D10A4A963163 2017-11-12 15:58:45.261 UTC  chaincodeCmd  install -> DEBU 00e Installed remotely response:<status:200 payload:"OK" > 2017-11-12 15:58:45.262 UTC  main  main -> INFO 00f Exiting..... {code}    Now, on to the second problem as per the documentation, we need to run the following command {code:java} peer chaincode instantiate -o orderer.example.com:7050 --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem -C $CHANNEL_NAME -n marbles -v 1.0 -c '{"Args": "init" }' -P "OR ('Org0MSP.member','Org1MSP.member')" {code} When I run this, I get error   {code:java} root@1065ffdcf942:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer chaincode instantiate -o orderer.example.com:7050 --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordere rOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem -C $CHANNEL_NAME -n marbles -v 1.0 -c '{"Args": "init" }' -P "OR ('Org0MSP.member','Org1MSP.member')" 2017-11-12 16:10:46.002 UTC  msp  GetLocalMSP -> DEBU 001 Returning existing local MSP 2017-11-12 16:10:46.003 UTC  msp  GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity Error: Must supply value for chaincode name parameter. Usage: peer chaincode instantiate  flags   Flags: -C, --channelID string The channel on which this command should be executed (default "testchainid") -c, --ctor string Constructor message for the chaincode in JSON format (default "{}") -E, --escc string The name of the endorsement system chaincode to be used for this chaincode -l, --lang string Language the chaincode is written in (default "golang") -n, --name string Name of the chaincode -P, --policy string The endorsement policy associated to this chaincode -v, --version string Version of the chaincode specified in install/instantiate/upgrade commands -V, --vscc string The name of the verification system chaincode to be used for this chaincode  Global Flags: --cafile string Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint --logging-level string Default logging level and overrides, see core.yaml for full syntax -o, --orderer string Ordering service endpoint --test.coverprofile string Done (default "coverage.cov") --tls Use TLS when communicating with the orderer endpoint --transient string Transient map of arguments in JSON encoding {code}    I looked into the {{-n}} flag, which is already set to {{marbles}}.  Now, I need help with two things * Fix the second issue related to following command    {code:java} peer chaincode instantiate -o orderer.example.com:7050 --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordere rOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem -C $CHANNEL_NAME -n marbles -v 1.0 -c '{"Args": "init" }' -P "OR ('Org0MSP.member','Org1MSP.member')" {code} * Do you agree that the documentation for command 01 needs to be updated with correct path value for parameter {{-p}}     Please let me know. Thanks  ></body> </Action>
<Action id="34570" issue="23913" author="hhimanshu" type="comment" created="2017-11-12 16:27:17.0" updateauthor="hhimanshu" updated="2017-11-12 16:27:17.0"> <body><! CDATA Also, I do see that {{marbles}} chaincode is installed {code:java} root@1065ffdcf942:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer chaincode list --installed 2017-11-12 16:25:41.742 UTC  msp  GetLocalMSP -> DEBU 001 Returning existing local MSP 2017-11-12 16:25:41.742 UTC  msp  GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity 2017-11-12 16:25:41.742 UTC  msp/identity  Sign -> DEBU 003 Sign: plaintext: 0AA0070A5C08031A0C0885ECA1D00510...74616C6C6564636861696E636F646573 2017-11-12 16:25:41.742 UTC  msp/identity  Sign -> DEBU 004 Sign: digest: D8770A9D9D4B8B5A17F0161A165708C2210057C48650D061311F33E1F72F2173 Get installed chaincodes on peer: name:"marbles" version:"1.0" path:"github.com/chaincode/chaincode_example02/go" name:"mycc" version:"1.0" path:"github.com/chaincode/chaincode_example02/go/" 2017-11-12 16:25:41.746 UTC  main  main -> INFO 005 Exiting..... root@1065ffdcf942:/opt/gopath/src/github.com/hyperledger/fabric/peer#{code} But, not instantiated {code:java} root@1065ffdcf942:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer chaincode list --instantiated 2017-11-12 16:26:25.673 UTC  msp  GetLocalMSP -> DEBU 001 Returning existing local MSP 2017-11-12 16:26:25.673 UTC  msp  GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity 2017-11-12 16:26:25.673 UTC  msp/identity  Sign -> DEBU 003 Sign: plaintext: 0AAD070A6908031A0C08B1ECA1D00510...0F0A0D676574636861696E636F646573 2017-11-12 16:26:25.673 UTC  msp/identity  Sign -> DEBU 004 Sign: digest: CC21104863B6F688312497E93E019A689C8D3F576AAF0D5F9493E146D616E72D Error: Error endorsing chaincode: rpc error: code = Unknown desc = Failed to deserialize creator identity, err MSP Org1MSP is unknown Usage: peer chaincode list  flags   Flags: -C, --channelID string The channel on which this command should be executed (default "testchainid") --installed Get the installed chaincodes on a peer --instantiated Get the instantiated chaincodes on a channel  Global Flags: --cafile string Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint --logging-level string Default logging level and overrides, see core.yaml for full syntax -o, --orderer string Ordering service endpoint --test.coverprofile string Done (default "coverage.cov") --tls Use TLS when communicating with the orderer endpoint --transient string Transient map of arguments in JSON encoding -v, --version Display current version of fabric peer server  root@1065ffdcf942:/opt/gopath/src/github.com/hyperledger/fabric/peer#   {code} This may be irrelevant but I am new to the project and wanted to share my approach to resolving/identifying issues  ></body> </Action>
