<Issue id="23992" key="FAB-7017" number="7017" project="10002" reporter="nnao" assignee="nnao" creator="nnao" type="10004" summary="Missing fabric-ca-fvt images for ca_cluster.py test" priority="3" resolution="10000" status="6" created="2017-11-16 22:53:37.0" updated="2018-07-20 14:14:57.0" resolutiondate="2017-11-18 11:30:21.0" votes="0" watches="1" workflowId="40525"> <description><! CDATA ca_client.py test failed because "make docker-images" command didn't make fabric-fvt image.  ubuntu@ubuntu-xenial:~/fabric-test/$ make git-update fabric ca docker-images ... ubuntu@ubuntu-xenial:~/fabric-test/$ cd regression/daily ubuntu@ubuntu-xenial:~/fabric-test/regression/daily$ py.test -v --junitxml results_cluster.xml ca_cluster.py ==================================================================================== test session starts ===================================================================================== platform linux2 -- Python 2.7.12, pytest-2.8.7, py-1.4.31, pluggy-0.3.1 -- /usr/bin/python cachedir: .cache rootdir: /home/ubuntu/fabric-test/regression/daily, inifile: collected 1 items  ca_cluster.py::CaClusterTest::test_FAB6863_BasicCAClustering FAILED  ----------------------------------------------------- generated xml file: /home/ubuntu/fabric-test/regression/daily/results_cluster.xml ------------------------------------------------------ ========================================================================================== FAILURES ========================================================================================== ________________________________________________________________________ CaClusterTest.test_FAB6863_BasicCAClustering ________________________________________________________________________  self = <ca_cluster.CaClusterTest testMethod=test_FAB6863_BasicCAClustering>  def test_FAB6863_BasicCAClustering(self): createLog = 'mkdir -p /tmp/logs; chmod 777 /tmp/logs' startContainer = 'docker run -v /tmp/logs:/tmp -v $PWD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyperledger/fabric-ca-fvt ./scripts/fvt/cluster_test.sh 4 4 8 128' command = createLog + ';' + startContainer >       output = check_output( command , shell=True)  ca_cluster.py:17: _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _  popenargs = ( 'mkdir -p /tmp/logs; chmod 777 /tmp/logs;docker run -v /tmp/logs:/tmp -v $PWD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyperledger/fabric-ca-fvt ./scrip ts/fvt/cluster_test.sh 4 4 8 128' ,) kwargs = {'shell': True}, process = <subprocess.Popen object at 0x7ff8f99bf790>, output = '', unused_err = None, retcode = 125 cmd =  'mkdir -p /tmp/logs; chmod 777 /tmp/logs;docker run -v /tmp/logs:/tmp -v $PWD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyperledger/fabric-ca-fvt ./scripts/fvt/ cluster_test.sh 4 4 8 128'   def check_output(*popenargs, **kwargs): r"""Run command with arguments and return its output as a byte string.  If the exit code was non-zero it raises a CalledProcessError.  The CalledProcessError object will have the return code in the returncode attribute and output in the output attribute.  The arguments are the same as for the Popen constructor.  Example:  >>> check_output( "ls", "-l", "/dev/null" ) 'crw-rw-rw- 1 root root 1, 3 Oct 18  2007 /dev/null\n'  The stdout argument is not allowed as it is used internally. To capture standard error in the result, use stderr=STDOUT.  >>> check_output( "/bin/sh", "-c", ...               "ls -l non_existent_file ; exit 0" , ...              stderr=STDOUT) 'ls: non_existent_file: No such file or directory\n' """ if 'stdout' in kwargs: raise ValueError('stdout argument not allowed, it will be overridden.') process = Popen(stdout=PIPE, *popenargs, **kwargs) output, unused_err = process.communicate() retcode = process.poll() if retcode: cmd = kwargs.get("args") if cmd is None: cmd = popenargs 0  >           raise CalledProcessError(retcode, cmd, output=output) E           CalledProcessError: Command ' 'mkdir -p /tmp/logs; chmod 777 /tmp/logs;docker run -v /tmp/logs:/tmp -v $PWD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyper ledger/fabric-ca-fvt ./scripts/fvt/cluster_test.sh 4 4 8 128' ' returned non-zero exit status 125  /usr/lib/python2.7/subprocess.py:574: CalledProcessError ------------------------------------------------------------------------------------ Captured stderr call ------------------------------------------------------------------------------------ Unable to find image 'hyperledger/fabric-ca-fvt:latest' locally docker: Error response from daemon: pull access denied for hyperledger/fabric-ca-fvt, repository does not exist or may require 'docker login'. See 'docker run --help'. ================================================================================== 1 failed in 2.70 seconds ==================================================================================  ></description> </Issue>
