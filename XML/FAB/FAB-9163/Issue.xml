<Issue id="28892" key="FAB-9163" number="9163" project="10002" reporter="sykesm" creator="sykesm" type="10003" summary="Data race in gossip" priority="4" resolution="10001" status="6" created="2018-03-26 15:14:48.0" updated="2020-01-22 22:31:15.0" resolutiondate="2020-01-22 22:31:15.0" votes="0" watches="1" workflowId="35651"> <description><! CDATA {code:java} unit-tests_1  | ==================  unit-tests_1  | WARNING: DATA RACE  unit-tests_1  | Write at 0x00c4200a92c4 by goroutine 65:  unit-tests_1  |   internal/race.Write()  unit-tests_1  |       /opt/go/src/internal/race/race.go:41 +0x38  unit-tests_1  |   sync.(*WaitGroup).Wait()  unit-tests_1  |       /opt/go/src/sync/waitgroup.go:129 +0xf4  unit-tests_1  |   github.com/hyperledger/fabric/gossip/comm.(*commImpl).Stop()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:380 +0x556  unit-tests_1  |   github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).Stop.func1()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:765 +0x7d  unit-tests_1  |  unit-tests_1  | Previous read at 0x00c4200a92c4 by goroutine 56:  unit-tests_1  |   internal/race.Read()  unit-tests_1  |       /opt/go/src/internal/race/race.go:37 +0x38  unit-tests_1  |   sync.(*WaitGroup).Add()  unit-tests_1  |       /opt/go/src/sync/waitgroup.go:71 +0x16f  unit-tests_1  |   github.com/hyperledger/fabric/gossip/comm.(*commImpl).Accept.func1()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:327 +0x139  unit-tests_1  |  unit-tests_1  | Goroutine 65 (running) created at:  unit-tests_1  |   github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).Stop()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:763 +0x17c  unit-tests_1  |   github.com/hyperledger/fabric/gossip/service.(*gossipServiceImpl).Stop()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/service/gossip_service.go:362 +0x6de  unit-tests_1  |   github.com/hyperledger/fabric/peer/node.serve()  unit-tests_1  |       github.com/hyperledger/fabric/peer/node/_test/_obj_test/start.go:389 +0x1cca  unit-tests_1  |   fmt.Fscanf()  unit-tests_1  |       /opt/go/src/fmt/scan.go:143 +0xf5  unit-tests_1  |   fmt.Sscanf()  unit-tests_1  |       /opt/go/src/fmt/scan.go:114 +0xbe  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/storage.fsParseName() ... unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:783 +0x444  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:736 +0x38  unit-tests_1  |   github.com/hyperledger/fabric/peer/node.TestStartCmd.func1()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/peer/node/start_test.go:51 +0x38  unit-tests_1  |  unit-tests_1  | Goroutine 56 (running) created at:  unit-tests_1  |   github.com/hyperledger/fabric/gossip/comm.(*commImpl).Accept()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:321 +0x32c  unit-tests_1  |   github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).start()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:308 +0xa7  unit-tests_1  | =================={code}  ></description> </Issue>
