<Action id="71433" issue="46378" author="denyeart" type="comment" body="Converted to task." created="2021-02-27 18:46:54.0" updateauthor="denyeart" updated="2021-02-27 18:46:54.0"/>
<Action id="71435" issue="46378" author="denyeart" type="comment" created="2021-02-27 18:54:09.0" updateauthor="denyeart" updated="2021-03-05 06:02:50.0"> <body><! CDATA Matt's comment copied from FAB-18361: {quote}Notably, we still can't update viper (because it really is configuration with fangs) and a number of other dependencies that require a minimum version of protobuf-1.4.  The big issue with protobuf is that it breaks etcd. The minor issues with protobuf are that google decided to introduce behaviors like their `detrand` package to prevent people from testing against their error messages while still not providing a sentinel error (as they did in the v2 of their package) to evaluate errors against. This has a ripple effect on a bunch of our tests.  The protobuf issue also prevents picking up new versions of gomega and prometheus. I believe it will also prevent us from picking up grpc-middleware changes. {quote}    Supposedly there is a good story brewing for etcd.  More background at https://github.com/hyperledger/fabric/pull/2185  ></body> </Action>
<Action id="72006" issue="46378" author="JIRAUSER22216" type="comment" created="2021-07-29 08:30:24.0" updateauthor="JIRAUSER22216" updated="2021-07-30 02:24:54.0"> <body><! CDATA While we were doing some experiments about fabric, we introduced protobuf-1.4, but we found that this will cause performance decrease for fabric since protobuf beyond the version 1.3.3 will invoke protoV2 (google.golang.org/protobuf/proto). So we are wondering if it is possible for you to bump protobuf of fabric directly to protoV2(google.golang.org/protobuf/proto), for example protobuf@v1.27.1?  protobuf@v1.4.3 invokes protobufV2, this may introduce some complexity for the code: {code:java} package proto  import (	 protoV2 "google.golang.org/protobuf/proto"	 "google.golang.org/protobuf/reflect/protoreflect"	 "google.golang.org/protobuf/runtime/protoiface"	 "google.golang.org/protobuf/runtime/protoimpl"  ){code} Our experiment result:  !TPS.png|width=490,height=257!    !image-2021-07-30-10-23-49-565.png|width=455,height=426!  !image-2021-07-30-10-24-29-225.png|width=455,height=446!  ></body> </Action>
