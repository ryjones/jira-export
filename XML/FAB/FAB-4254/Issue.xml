<Issue id="17286" key="FAB-4254" number="4254" project="10002" reporter="jasonshen" assignee="muralisr" creator="jasonshen" type="10004" summary="SERVICE_UNAVAILABLE when instantiate chaincode the second time" priority="2" resolution="10000" status="6" created="2017-05-31 02:18:44.0" updated="2018-07-20 14:13:02.0" resolutiondate="2017-06-09 11:56:57.0" votes="0" watches="3" workflowId="38739" security="10001"> <description><! CDATA this happens when instantiate chaincode twice. Just tested alpha2 node sdk, not sure it's Fabric's bug or sdk's.   below is how to reproduce this error: # download fabric-sdk-node, switch to alpha2 # mount data to docker to persist data ## ca1: volumes: - ./data/volumes/hyperledger/ca1:/etc/hyperledger/fabric-ca-server ## ca0: volumes: - ./data/volumes/hyperledger/ca0:/etc/hyperledger/fabric-ca-server ## orderer.example.com: volumes: - ./data/volumes/hyperledger/orderer/:/var/hyperledger/ ## peer0.org1.example.com: volumes: - ./data/volumes/hyperledger/peer0org1/:/var/hyperledger/ ## peer0.org2.example.com: volumes: - ./data/volumes/hyperledger/peer0org2/:/var/hyperledger/ # docker-compose up # test e2e example: node test/integration/e2e.js. Everything is fine. tests 82, pass 82. # restart the hyperledger dockers: docker rm -f `docker ps -a -q` && docker-compose up # test e2e example: node test/integration/e2e/invoke-transaction.js. tests 12, pass 12. Still fine. # restart hyperledger dockers again: docker rm -f `docker ps -a -q` && docker-compose up # test e2e example: node test/integration/e2e/invoke-transaction.js. Then errors:  #  {code:java} error:  Orderer.js : sendDeliver - on error code 14: "Error: Connect Failed\n at ClientDuplexStream._emitStatusIfDone (/gopath/src/github.com/hyperl edger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:201:19)\n at ClientDuplexStream._readsDone (/gopath/src/github.com/hyperledger/fabric -sdk-node/node_modules/grpc/src/node/src/client.js:169:8)\n at readCallback (/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/sr c/node/src/client.js:229:12)" error:  Chain.js : getChannelConfig - Failed Proposal. Error: Error: SERVICE_UNAVAILABLE at ClientDuplexStream.<anonymous> (/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-client/lib/Orderer.js:234:23) at emitOne (events.js:96:13) at ClientDuplexStream.emit (events.js:188:7) at ClientDuplexStream._emitStatusIfDone (/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:204:12) at ClientDuplexStream._readsDone (/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:169:8) at readCallback (/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:229:12) {code}  ></description> </Issue>
