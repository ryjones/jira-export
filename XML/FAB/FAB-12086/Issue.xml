<Issue id="33967" key="FAB-12086" number="12086" project="10002" reporter="manish-sethi" assignee="manish-sethi" creator="manish-sethi" type="10003" summary="Expose function in query executor for retrieving private data metadata by keyhash" priority="2" resolution="10000" status="6" created="2018-09-21 03:02:15.0" updated="2018-09-22 15:14:43.0" resolutiondate="2018-09-22 15:14:43.0" votes="0" watches="1" workflowId="45294"> <description><! CDATA During validation, key-based endorsement needs to check the endorsement based on the key hash.   In the current code, query executor exposes a function to retrieve the private data metadata by the private raw key. This function is meant to be used by the chaincode in a simulation. At the validation time, this raw private key is not available to all the peers and in the hashed rwset, only the hash of the key is available. Hence query executer needs to expose a function that accepts the hash of the key.  The key-based endorsement validation code wrongly uses the current function - https://sourcegraph.com/github.com/hyperledger/fabric@bce5756b0d0888fc5f88653a227c6935213fb547/-/blob/core/common/validation/statebased/vpmanagerimpl.go#L321  ></description> </Issue>
