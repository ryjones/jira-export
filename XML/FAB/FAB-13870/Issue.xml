<Issue id="37110" key="FAB-13870" number="13870" project="10002" reporter="vijaypunugubati" assignee="c0rwin" creator="vijaypunugubati" type="10004" summary="SetDialOpts given empty in Gossip.comm makes TestParallelSend fail" priority="3" resolution="10000" status="6" created="2019-01-24 15:21:23.0" updated="2019-03-19 11:13:38.0" resolutiondate="2019-01-29 14:32:43.0" votes="0" watches="5" workflowId="48687"> <description><! CDATA *Summary:*Â SetDialOpts has given empty in Gossip.comm makes TestParallelSend fail in fabric unit test coverage daily in the release-1.4 branch.  *Intermittent:*Â **Â No  *Branch:* release-1.4**  *Platform:* ** x86_64  *Error Snippet:* {code:java} /00:29:28.234  33m2019-01-24 01:55:03.887 UTC  gossip.comm#2000  SetDialOpts -> WARN 001 0m Given an empty set of grpc.DialOption, aborting 00:29:28.234  33m2019-01-24 01:55:03.887 UTC  gossip.comm#3000  SetDialOpts -> WARN 002 0m Given an empty set of grpc.DialOption, aborting 00:29:28.234  33m2019-01-24 01:55:04.904 UTC  gossip.comm#1548  createConnection -> WARN 003 0m Remote endpoint claims to be a different peer, expected 6c6f63616c686f73743a31353531 but got 6c6f63616c686f73743a31353530 00:29:28.234  33m2019-01-24 01:55:04.905 UTC  gossip.comm#1548  sendToEndpoint -> WARN 004 0m Failed obtaining connection for localhost:1550, PKIid:6c6f63616c686f73743a31353531 reason: authentication failure 00:29:28.234  33m2019-01-24 01:55:05.916 UTC  gossip.comm#4611  func1 -> WARN 005 0m localhost:4612, PKIid:6c6f63616c686f73743a34363132 isn't responsive: EOF 00:29:28.234  33m2019-01-24 01:55:06.417 UTC  gossip.comm#4611  sendToEndpoint -> WARN 006 0m Failed obtaining connection for localhost:4612, PKIid:6c6f63616c686f73743a34363132 reason: context deadline exceeded 00:29:28.234  33m2019-01-24 01:55:06.718 UTC  gossip.comm#4611  sendToEndpoint -> WARN 007 0m Failed obtaining connection for localhost:4612, PKIid:6c6f63616c686f73743a34363132 reason: context deadline exceeded 00:29:28.234  33m2019-01-24 01:55:06.819 UTC  gossip.comm#4611  sendToEndpoint -> WARN 008 0m Failed obtaining connection for localhost:4612, PKIid:6c6f63616c686f73743a34363132 reason: context deadline exceeded 00:29:28.234  33m2019-01-24 01:55:07.018 UTC  gossip.comm#4611  sendToEndpoint -> WARN 009 0m Failed obtaining connection for localhost:4612, PKIid:6c6f63616c686f73743a34363132 reason: context deadline exceeded 00:29:28.234  33m2019-01-24 01:55:10.931 UTC  gossip.comm#9611  authenticateRemotePeer -> WARN 00a 0m 127.0.0.1:42270 didn't send TLS certificate 00:29:28.234  31m2019-01-24 01:55:10.932 UTC  gossip.comm#9611  GossipStream -> ERRO 00b 0m Authentication failed: No TLS certificate 00:29:28.234  33m2019-01-24 01:55:11.131 UTC  gossip.comm#6612  authenticateRemotePeer -> WARN 00c 0m Failed reading messge from 127.0.0.1:45144, reason: timed out waiting for connection message from 127.0.0.1:45144 00:29:28.234  31m2019-01-24 01:55:11.131 UTC  gossip.comm#6612  GossipStream -> ERRO 00d 0m Authentication failed: timed out waiting for connection message from 127.0.0.1:45144 00:29:28.234  31m2019-01-24 01:55:11.938 UTC  gossip.comm#9611  authenticateRemotePeer -> ERRO 00e 0m Failed verifying signature from 127.0.0.1:42274 : Wrong certificate: 97 252 250 21 241 161 23 233 239 127 13 28 244 47 155 252 183 145 108 196 211 196 244 114 235 123 54 138 148 45 232 229 0 ,  24 1 114 66 10 14 108 111 99 97 108 104 111 115 116 58 57 54 49 50 18 14 108 111 99 97 108 104 111 115 116 58 57 54 49 50 26 32 209 93 188 222 158 226 148 245 97 223 185 149 186 48 246 93 55 164 132 26 29 245 182 62 34 228 87 32 85 67 53 60  00:29:28.234  31m2019-01-24 01:55:11.938 UTC  gossip.comm#9611  GossipStream -> ERRO 00f 0m Authentication failed: Wrong certificate: 97 252 250 21 241 161 23 233 239 127 13 28 244 47 155 252 183 145 108 196 211 196 244 114 235 123 54 138 148 45 232 229 0 ,  24 1 114 66 10 14 108 111 99 97 108 104 111 115 116 58 57 54 49 50 18 14 108 111 99 97 108 104 111 115 116 58 57 54 49 50 26 32 209 93 188 222 158 226 148 245 97 223 185 149 186 48 246 93 55 164 132 26 29 245 182 62 34 228 87 32 85 67 53 60  00:29:28.234  33m2019-01-24 01:55:12.942 UTC  gossip.comm#9611  authenticateRemotePeer -> WARN 010 0m Identity store rejected 127.0.0.1:42278 : identity doesn't match the computed pkiID 00:29:28.234  31m2019-01-24 01:55:12.943 UTC  gossip.comm#9611  GossipStream -> ERRO 011 0m Authentication failed: identity doesn't match the computed pkiID 00:29:28.234  31m2019-01-24 01:55:13.946 UTC  gossip.comm#9611  GossipStream -> ERRO 012 0m Authentication failed: Expected  209 157 162 209 13 128 173 188 54 76 102 91 83 33 154 196 140 120 165 30 246 226 25 157 73 244 120 25 138 218 60 121  in remote hash of TLS cert, but got  209 157 162 209 13 128 173 188 54 76 102 91 83 33 154 196 140 120 165 30 246 226 25 157 73 244 120 25 138 218 60 121 0  00:29:28.234 --- FAIL: TestParallelSend (5.00s) 00:29:28.234     comm_test.go:609:  00:29:28.234         	Error Trace:	comm_test.go:609 00:29:28.234         	Error:      	Not equal:  00:29:28.234         	            	expected: 20 00:29:28.234         	            	actual  : 1 00:29:28.234         	Test:       	TestParallelSend 00:29:28.234  33m2019-01-24 01:55:14.952 UTC  gossip.comm#9611  authenticateRemotePeer -> WARN 013 0m 127.0.0.1:42292 didn't send a pkiID 00:29:28.234  31m2019-01-24 01:55:14.952 UTC  gossip.comm#9611  GossipStream -> ERRO 014 0m Authentication failed: No PKI-ID 00:29:28.234  33m2019-01-24 01:55:15.963 UTC  gossip.comm#9611  authenticateRemotePeer -> WARN 015 0m Expected connection message from 127.0.0.1:42300 but got <nil> 00:29:28.234  31m2019-01-24 01:55:15.963 UTC  gossip.comm#9611  GossipStream -> ERRO 016 0m Authentication failed: Wrong type 00:29:28.234  33m2019-01-24 01:55:18.968 UTC  gossip.comm#9611  authenticateRemotePeer -> WARN 017 0m Failed reading messge from 127.0.0.1:42306, reason: timed out waiting for connection message from 127.0.0.1:42306 00:29:28.234  31m2019-01-24 01:55:18.968 UTC  gossip.comm#9611  GossipStream -> ERRO 018 0m Authentication failed: timed out waiting for connection message from 127.0.0.1:42306/ code placeholder {code} *Build Logs:*Â https://jenkins.hyperledger.org/view/Daily/job/fabric-unit-test-coverage-daily-release-1.4-x86_64/39/console  *Attachments:* ** *< None>*  ></description> </Issue>
