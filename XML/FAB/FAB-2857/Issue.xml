<Issue id="15430" key="FAB-2857" number="2857" project="10002" reporter="yacovm" assignee="gennadyl" creator="yacovm" type="10004" summary="Leader election module test failure in CI" priority="3" resolution="10000" status="6" created="2017-03-22 22:36:07.0" updated="2018-07-20 14:12:02.0" resolutiondate="2017-04-14 19:46:17.0" votes="0" watches="3" workflowId="37828"> <description><! CDATA https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8808/console  21:49:01 unit-tests_1  | panic: assert: arguments: Cannot call Get(0) because there are 0 argument(s). 21:49:01 unit-tests_1  |  21:49:01 unit-tests_1  | goroutine 15  running : 21:49:01 unit-tests_1  | panic(0x860dc0, 0xc420348270) 21:49:01 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x1a1 21:49:01 unit-tests_1  | github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock.Arguments.Get(0xb97e48, 0x0, 0x0, 0x0, 0xb97e48, 0x0) 21:49:01 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock/mock.go:526 +0x19b 21:49:01 unit-tests_1  | github.com/hyperledger/fabric/gossip/election.(*peer).Peers(0xc4200d12c0, 0x0, 0x0, 0x0) 21:49:01 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/election/election_test.go:124 +0x34a 21:49:01 unit-tests_1  | github.com/hyperledger/fabric/gossip/election.(*leaderElectionSvcImpl).isAlive(0xc4200e0600, 0xc4203481e8, 0x2, 0x8, 0x1) 21:49:01 unit-tests_1  | 	github.com/hyperledger/fabric/gossip/election/_test/_obj_test/election.go:326 +0x42 21:49:01 unit-tests_1  | github.com/hyperledger/fabric/gossip/election.(*leaderElectionSvcImpl).handleMessages(0xc4200e0600) 21:49:01 unit-tests_1  | 	github.com/hyperledger/fabric/gossip/election/_test/_obj_test/election.go:131 +0x3d1 21:49:01 unit-tests_1  | created by github.com/hyperledger/fabric/gossip/election.(*leaderElectionSvcImpl).start 21:49:01 unit-tests_1  | 	github.com/hyperledger/fabric/gossip/election/_test/_obj_test/election.go:111 +0x6a 21:49:01 unit-tests_1  | FAIL	github.com/hyperledger/fabric/gossip/election	1.628s 21:49:01 unit-tests_1  | error: exit status 1 21:49:01 unit-tests_1  | panic: EOF 21:49:01 unit-tests_1  |   According to the code, p.Called() returned an Arguments with no arguments. This (according to the documentation) can happen when: // Panics if the call is unexpected (i.e. not preceded by // appropriate .On .Return() calls)  But, in the test code- p.mockedMethods is written to with a lock, and read from using a RLock, and each time a value is written into- it's while holding a lock. This needs to be looked at.   ~C0rWin   ~gennadyl   ></description> </Issue>
