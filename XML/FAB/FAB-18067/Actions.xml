<Action id="69702" issue="45618" author="yacovm" type="comment" body=" ~denyeart  - we need to add support to the lifecycle side  in the peer. |https://github.com/hyperledger/fabric/blob/master/core/chaincode/lifecycle/metadata_provider.go " created="2020-07-16 08:21:34.0" updateauthor="yacovm" updated="2020-07-16 08:21:34.0"/>
<Action id="69703" issue="45618" author="yacovm" type="comment" created="2020-07-16 12:31:37.0" updateauthor="yacovm" updated="2020-07-16 12:31:37.0"> <body><! CDATA I think that maybe the only thing that needs to be added is simply to create a dynamic application policy for all collections that are implicit:   {code} 	for _, col := range collections { 		if strings.Index(col, "_implicit_org_") != 0 { 			// Not an implicit collection 			continue 		}   		// Implicit collection exists  		// Initialize definition of collections if it's missing 		if ccInfo.Definition.Collections == nil { 			ccInfo.Definition.Collections = &peer.CollectionConfigPackage{} 		}  		// Get the name of the member 		mspID := strings.Replace(col, "_implicit_org_", "", 1) 		// Build SignaturePolicyEnvelope that matches the MSP ID 		spe := policydsl.SignedByMspPeer(mspID) 		// Build ApplicationPolicy out of SignaturePolicyEnvelope 		ap := &peer.ApplicationPolicy{ 			Type: &peer.ApplicationPolicy_SignaturePolicy{ 				SignaturePolicy: spe, 			}, 		}  		ccInfo.Definition.Collections.Config = append(ccInfo.Definition.Collections.Config, &peer.CollectionConfig{ 			Payload: &peer.CollectionConfig_StaticCollectionConfig{ 				StaticCollectionConfig: &peer.StaticCollectionConfig{ 					Name: col, 					EndorsementPolicy: ap, 				}, 			}, 		}) 	}  {code}  and plant it  right before|https://github.com/hyperledger/fabric/blob/master/core/chaincode/lifecycle/metadata_provider.go#L132  the collections of the metadata are evaluated.  However this explicitly assumes that we have Node OU roles (peer node OU) in use, I guess it's fine.  ></body> </Action>
<Action id="71933" issue="45618" author="denyeart" type="comment" body=" ~andrew-coleman  Here is the story we talked about." created="2021-07-15 13:45:37.0" updateauthor="denyeart" updated="2021-07-15 13:45:37.0"/>
