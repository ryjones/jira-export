<Action id="22931" issue="15961" author="denyeart" type="comment" created="2017-04-24 12:21:29.0" updateauthor="denyeart" updated="2017-04-24 12:21:29.0"> <body><! CDATA From  ~balaji.viswanathan :  I ran a bunch of tests for this using haproxy as a reverse proxy as well to snoop on messages. I can recreate this over a telnet client sending exact PUT requests. This seems to be a couch specific issue regd handling of empty attachments.   The response for the PUT(empty attachment) is sent back to client. But, couch does not log the PUT in its log and the connection is in a undetermined state after that.  One option is to make this test in handleRequest and set req.Close = True for such requests, thereby not reusing the connection and telling server to explicitly close the connection.   ></body> </Action>
<Action id="22932" issue="15961" author="denyeart" type="comment" body="Let&apos;s investigate with CouchDB committers before making a decision." created="2017-04-24 12:21:58.0" updateauthor="denyeart" updated="2017-04-24 12:21:58.0"/>
<Action id="22934" issue="15961" author="balaji.viswanathan" type="comment" body="Created https://issues.apache.org/jira/browse/COUCHDB-3394" created="2017-04-24 12:31:00.0" updateauthor="balaji.viswanathan" updated="2017-04-24 12:31:00.0"/>
