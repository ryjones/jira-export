<Issue id="15961" key="FAB-3368" number="3368" project="10002" reporter="denyeart" assignee="chris.elder" creator="denyeart" type="10004" summary="CouchDB doesn&apos;t respond after empty attachment is saved." priority="3" resolution="10000" status="6" created="2017-04-24 12:20:03.0" updated="2018-07-20 14:12:22.0" resolutiondate="2017-05-17 23:53:17.0" votes="0" watches="2" workflowId="38132"> <description><! CDATA Tests in /fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb times out (after 35s, current client timeout threshold) at: handleRequest() method=POST url=http://couchdb:5984/testbasicrw/_ensure_full_commit  I have dug deeper and found that it is due to saving an empty byte array for key4 in TestBasicRW.  This turns into a couchdb document attachment of length 0.  While couchdb appears to handle this ok at first, the subsequent request to couch hangs (which happens to be http://couchdb:5984/testbasicrw/_ensure_full_commit), until the client times out after 35 seconds.  The retry is successful.  Saving an empty byte array for a chaincode key is allowable, therefore we need a resolution.  It seems like the empty attachment is causing a problem, which was hidden before FAB-2724, but now that connection is reused the problem shows up on the subsequent request.    ></description> </Issue>
