<Issue id="41935" key="FAB-16368" number="16368" project="10002" reporter="abel23" creator="abel23" type="10004" summary="peer crashed during commit to txmgr" priority="3" resolution="10203" status="6" created="2019-08-21 11:25:27.0" updated="2019-09-24 18:30:51.0" resolutiondate="2019-09-24 18:30:51.0" votes="0" watches="2" workflowId="54976"> <description><! CDATA The error logs of the crashed peer as are follows: {code:java} 2019-08-21 11:03:43.117 UTC  gossip.comm  createConnection -> DEBU 167ca Entering peer0.org1.example.com:7051 46540f179e02cf340eaae091ca92af6b698831e5b0d296f85820487b8d8bb3b9 2019-08-21 11:03:43.118 UTC  grpc  infof -> DEBU 167cb transport: loopyWriter.run returning. connection error: desc = "transport is closing" 2019-08-21 11:03:43.121 UTC  grpc  DialContext -> DEBU 167cc parsed scheme: "" 2019-08-21 11:03:43.121 UTC  grpc  DialContext -> DEBU 167cd scheme "" not registered, fallback to default scheme 2019-08-21 11:03:43.122 UTC  grpc  watcher -> DEBU 167ce ccResolverWrapper: sending new addresses to cc:  {peer0.org1.example.com:7051 0  <nil>}  2019-08-21 11:03:43.122 UTC  grpc  switchBalancer -> DEBU 167cf ClientConn switching balancer to "pick_first" 2019-08-21 11:03:43.122 UTC  grpc  HandleSubConnStateChange -> DEBU 167d0 pickfirstBalancer: HandleSubConnStateChange: 0xc00338c6a0, CONNECTING 2019-08-21 11:03:43.161 UTC  couchdb  handleRequest -> DEBU 167d1 Error handling CouchDB request. Error:not_found,  Status Code:404,  Reason:Database does not exist. 2019-08-21 11:03:43.161 UTC  pvtstatepurgemgmt  prepareWorkingsetFor -> DEBU 167d2 Preparing potential purge list working-set for expiringAtBlk  2  2019-08-21 11:03:43.161 UTC  leveldbhelper  GetIterator -> DEBU 167d3 Getting iterator for range    byte{0x6d, 0x79, 0x63, 0x68, 0x61, 0x6e, 0x6e, 0x65, 0x6c, 0x2f, 0x30, 0x0, 0x31, 0x1, 0x2, 0x0}  -    byte{0x6d, 0x79, 0x63, 0x68, 0x61, 0x6e, 0x6e, 0x65, 0x6c, 0x2f, 0x30, 0x0, 0x31, 0x1, 0x3, 0x0}  2019-08-21 11:03:43.161 UTC  lockbasedtxmgr  func1 -> DEBU 167d4 launched the background routine for preparing keys to purge with the next block 2019-08-21 11:03:43.161 UTC  statecouchdb  executeBatches -> DEBU 167d5 Executing batches =    2019-08-21 11:03:43.162 UTC  statecouchdb  LoadCommittedVersions -> DEBU 167d6 nsKeysMap=map   panic: error during commit to txmgr: error handling CouchDB request. Error:not_found,  Status Code:404,  Reason:Database does not exist.goroutine 1516  running : github.com/hyperledger/fabric/core/ledger/kvledger.(*kvLedger).CommitWithPvtData(0xc00015cd90, 0xc002797360, 0xc00279e58c, 0x0, 0x0) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger.go:402 +0xd5b github.com/hyperledger/fabric/core/committer.(*LedgerCommitter).CommitWithPvtData(0xc00248a2e0, 0xc002797360, 0xc00279e58c, 0x15d, 0xbf4f6732b1583903) 	/opt/gopath/src/github.com/hyperledger/fabric/core/committer/committer_impl.go:95 +0x75 github.com/hyperledger/fabric/gossip/privdata.(*coordinator).StoreBlock(0xc00024f6c0, 0xc002ad27c0, 0x0, 0x0, 0x0, 0x41, 0xc002c12e70) 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/privdata/coordinator.go:281 +0x16a9 github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock(0xc0023aea00, 0xc002ad27c0, 0x0, 0x0, 0x0, 0x3, 0x0) 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:810 +0xa2 github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads(0xc0023aea00) 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:598 +0x3d5 created by github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:284 +0x714  {code}  ></description> </Issue>
