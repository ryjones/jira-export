<Issue id="32801" key="FAB-11578" number="11578" project="10002" reporter="vramaiitkgp" assignee="dongming" creator="vramaiitkgp" type="10004" summary="ChannelEventHub reports DuplicatePeer error when PTE is run with Mutual TLS enabled" priority="3" resolution="10000" status="6" created="2018-08-13 19:03:27.0" updated="2018-08-22 14:45:30.0" resolutiondate="2018-08-22 14:45:30.0" votes="0" watches="2" workflowId="44038"> <description><! CDATA Running PTE in constant mode with MutualTLS produces errors of the following kind: {quote}info:  PTE 0 main : stdout: info:  PTE 0 exec :  Nid:chan:org:id=0:testorgschannel1:org1:0 channelAdd1Peer   info:  PTE 0 main : stdout: info:  PTE 1534185243791 util :  getTLSCert  key: org1, subkey: peer1  info:  PTE 0 main : stderr: error:  Channel.js : Peer localhost:7061 already exists  info:  PTE 0 main : stderr: error:  ChannelEventHub.js : DuplicatePeer: Peer localhost:7061 already exists at Channel.addPeer (/opt/gopath/src/gerrit/fabric-test/tools/PTE/node_modules/fabric-client/lib/Channel.js:547:19) at channelAdd1Peer (/opt/gopath/src/gerrit/fabric-test/tools/PTE/pte-execRequest.js:858:33) at setTargetPeers (/opt/gopath/src/gerrit/fabric-test/tools/PTE/pte-execRequest.js:1092:9) at invokeValidation (/opt/gopath/src/gerrit/fabric-test/tools/PTE/pte-execRequest.js:1331:5) at postEventProc (/opt/gopath/src/gerrit/fabric-test/tools/PTE/pte-execRequest.js:1362:5) at EventRegistration.eh.registerBlockEvent  as onEvent  (/opt/gopath/src/gerrit/fabric-test/tools/PTE/pte-execRequest.js:1407:29) at Object.keys.forEach (/opt/gopath/src/gerrit/fabric-test/tools/PTE/node_modules/fabric-client/lib/ChannelEventHub.js:1094:14) at Array.forEach (<anonymous>) at ChannelEventHub._processBlockEvents (/opt/gopath/src/gerrit/fabric-test/tools/PTE/node_modules/fabric-client/lib/ChannelEventHub.js:1091:41) at ClientDuplexStream._stream.on (/opt/gopath/src/gerrit/fabric-test/tools/PTE/node_modules/fabric-client/lib/ChannelEventHub.js:357:11)  info:  PTE 0 main : stderr: error:  ChannelEventHub.js : ChannelEventHub has detected an error DuplicatePeer: Peer localhost:7061 already exists {quote} I tracked down this error to the following commit:  https://github.com/hyperledger/fabric-test/commit/133aed11560c0a098fd4b4eefa95c27cddf75e3e#diff-7453cb0420b7c76888b2560308a85159   (The error doesn't appear with older commits.)  Â   ></description> </Issue>
