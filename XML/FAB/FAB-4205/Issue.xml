<Issue id="17231" key="FAB-4205" number="4205" project="10002" reporter="mffrench" assignee="jyellick" creator="mffrench" type="10001" summary="Non consortium configuration are not working anymore with alpha2" priority="4" resolution="10000" status="6" created="2017-05-29 20:16:31.0" updated="2018-07-20 18:53:48.0" resolutiondate="2017-06-02 01:06:55.0" votes="0" watches="3" workflowId="38703" security="10001"> <description><! CDATA Hello,  this is probably not a bug but instead a little improvement request to provide better error message. But it's not clear to me if non consortium profile configuration are still planned to be supported or not.   So with following profile configuration :    {code:java} --- Profiles:  Elixir: Orderer: <<: *OrdererDefaults Organizations: - *Org0 Application: <<: *ApplicationDefaults Organizations: - *Org0 - *Org1  Organizations: - &Org0 Name: Org0 ID: Org0 MSPDIR: somedir AdminPrincipal: Role.ADMIN BCCSP: Default: SW SW: Hash: SHA2 Security: 256 # Location of Key Store. If this is unset, a location will # be chosen using 'MSPDir'/keystore FileKeyStore: KeyStore: AnchorPeers: - Host: p0.org0 Port: 7051  - &Org1 Name: Org1 ID: Org1 MSPDIR: somedir AdminPrincipal: Role.ADMIN BCCSP: Default: SW SW: Hash: SHA2 Security: 256 # Location of Key Store. If this is unset, a location will # be chosen using 'MSPDir'/keystore FileKeyStore: KeyStore: AnchorPeers: - Host: p0.org1 Port: 7051  Orderer: &OrdererDefaults OrdererType: solo Addresses: - o0.org0:7050 BatchTimeout: 2s BatchSize: MaxMessageCount: 10 AbsoluteMaxBytes: 99 MB PreferredMaxBytes: 512 KB MaxChannels: 0 Kafka: Brokers: - 127.0.0.1:9092 Organizations:  Application: &ApplicationDefaults Organizations: {code}  Fabric orderer is raising following panic :   {code:java} 2017-05-29 17:47:47.750 UTC  orderer/multichain  NewManagerImpl -> CRIT 004 No system chain found panic: No system chain found  goroutine 1  running : panic(0xb03220, 0xc42025dde0) /opt/go/src/runtime/panic.go:500 +0x1a1 github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc4201d4ab0, 0xc25168, 0x15, 0x0, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x127 github.com/hyperledger/fabric/orderer/multichain.NewManagerImpl(0x11af3c0, 0xc420346120, 0xc42032ad80, 0x11acbc0, 0x11f3900, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/orderer/multichain/manager.go:139 +0x5d3 main.main() /opt/gopath/src/github.com/hyperledger/fabric/orderer/main.go:174 +0x179d {code}  If non consortium profile are still supported it seems to me systemChain and systemChainID should be defined in orderer/multichain/manager.go :   {code:java} --- a/orderer/multichain/manager.go +++ b/orderer/multichain/manager.go @@ -130,6 +130,8 @@ func NewManagerImpl(ledgerFactory ledger.Factory, consenters map string Consente consenters, signer) ml.chains string(chainID)  = chain + ml.systemChannelID = chainID + ml.systemChannel = chain chain.start() } {code}  If non consortium profile are not supported anymore, we should not be able to generate any ChannelTx through configtxgen and raise a configuration issue panic...  Let me know what you think.  Best,  Mathilde  ></description> </Issue>
