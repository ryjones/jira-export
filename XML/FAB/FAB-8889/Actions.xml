<Action id="41723" issue="28557" author="rameshthoomu" type="comment" created="2018-03-16 05:17:49.0" updateauthor="rameshthoomu" updated="2018-03-16 05:17:49.0"> <body><! CDATA ++Below are the test results on release *v1.1.0:*  1) byfn, efyn with default channel, custom channel, couchdb and node chaincode on x86_64, s390x and ppc64le platforms – PASSED  2) fabcar, fab-ca samples and balance transfer on x86_64 and mac - PASSED  3) upgrade network from 1.0.6 to 1.1.0 - TBD - Tests says passed, but some one has to look into the peer logs. Attached are the peer logs.  ~yacovm  Could you please check the attached logs. {code:java} 2018-03-16 04:45:45.485 UTC  gossip/gossip  func1 -> WARN 028 Deep probe of peer0.org1.example.com:7051 failed: x509: certificate signed by unknown authority github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).learnAnchorPeers.func1     /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:249 github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).Connect.func1     /opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:152 runtime.goexit     /opt/go/src/runtime/asm_amd64.s:2337 2018-03-16 04:45:45.485 UTC  gossip/discovery  func1 -> WARN 029 Could not connect to {peer0.org1.example.com:7051       peer0.org1.example.com:7051 <nil>} : x509: certificate signed by unknown authority 2{code} 4) Verified version checks in fabric and fabric-ca binaries, all are pointing to 1.1.0 , go1.9.2 and baseimage 0.4.6 - PASSED  5) v1.1.0 is now pointed to release-1.1 branch in RTD. Applies to both fabric and fabric-ca repos – PASSED  6) Verified npm version on fabric-sdk-node and fabric-chaincode node modules - PASSED {code:java} (hyp) Rameshs-MacBook-Pro:fabric-sdk-node thoomu@us.ibm.com$ npm dist-tags ls fabric-client latest: 1.1.0 unstable: 1.1.0-snapshot.103 (hyp) Rameshs-MacBook-Pro:fabric-sdk-node thoomu@us.ibm.com$ npm dist-tags ls fabric-ca-client latest: 1.1.0 unstable: 1.1.0-snapshot.101 (hyp) Rameshs-MacBook-Pro:fabric-sdk-node thoomu@us.ibm.com$ npm dist-tags ls fabric-shim latest: 1.1.0 unstable: 1.1.0-snapshot.13 (hyp) Rameshs-MacBook-Pro:fabric-sdk-node thoomu@us.ibm.com$ npm dist-tags ls fabric-shim-crypto latest: 1.1.0 unstable: 1.1.0-snapshot.5{code}       ></body> </Action>
<Action id="41736" issue="28557" author="yacovm" type="comment" created="2018-03-16 08:24:30.0" updateauthor="yacovm" updated="2018-03-16 08:24:30.0"> <body><! CDATA The peer log says that you have mis-configured the network.  "Remote endpoint claims to be a different peer" usually happens if you have your external endpoint different than what it should be.  As for what you quoted - that means that the peer's MSP doesn't know the CA that issued the certificate which the other peer provided.  ></body> </Action>
<Action id="41740" issue="28557" author="denyeart" type="comment" body=" ~rameshthoomu  Did you get those errors on the v1.0.6 byfn, or the v1.1.0 byfn?  I recall  ~yacovm  helped us fix up the gossip config in v1.1.0 byfn:  https://gerrit.hyperledger.org/r/#/c/18107/  , so hopefully that is resolved now..." created="2018-03-16 11:22:31.0" updateauthor="denyeart" updated="2018-03-16 11:22:31.0"/>
<Action id="41741" issue="28557" author="yacovm" type="comment" body="The fix you mention is unrelated to what his peers experience." created="2018-03-16 11:32:29.0" updateauthor="yacovm" updated="2018-03-16 11:32:29.0"/>
<Action id="41744" issue="28557" author="denyeart" type="comment" created="2018-03-16 12:13:39.0" updateauthor="denyeart" updated="2018-03-16 12:13:39.0"> <body><! CDATA I also receive some gossip errors in byfn v1.1.0.  I believe I have seen these before and ignored them since they don't block byfn success.  But would still like  ~yacovm  to take a look.  Full log attached as dave_byfn_peer0.org2.example.com.txt. {noformat} 2018-03-16T12:02:27.584757702Z 2018-03-16 12:02:27.584 UTC  gossip/service  updateEndpoints -> WARN 03a Failed to update ordering service endpoints, due to Channel with mychannel id was not found 2018-03-16T12:02:27.775357520Z 2018-03-16 12:02:27.775 UTC  kvledger  CommitWithPvtData -> INFO 03b Channel  mychannel : Committed block  1  with 1 transaction(s) 2018-03-16T12:02:27.892330743Z 2018-03-16 12:02:27.892 UTC  gossip/service  updateEndpoints -> WARN 03c Failed to update ordering service endpoints, due to Channel with mychannel id was not found 2018-03-16T12:02:28.104011688Z 2018-03-16 12:02:28.103 UTC  kvledger  CommitWithPvtData -> INFO 03d Channel  mychannel : Committed block  2  with 1 transaction(s) 2018-03-16T12:02:29.917857020Z 2018-03-16 12:02:29.917 UTC  gossip/comm  authenticateRemotePeer -> WARN 03e Failed reading messge from 172.18.0.10:48680, reason: Timed out waiting for connection message from 172.18.0.10:48680 2018-03-16T12:02:29.917900712Z 2018-03-16 12:02:29.917 UTC  gossip/comm  GossipStream -> ERRO 03f Authentication failed: Timed out waiting for connection message from 172.18.0.10:48680{noformat}  ></body> </Action>
<Action id="41754" issue="28557" author="yacovm" type="comment" created="2018-03-16 13:43:23.0" updateauthor="yacovm" updated="2018-03-16 13:43:23.0"> <body><! CDATA So I think that the "Failed to update ordering service endpoints" is due to the peer not being a leader and then receiving a command to update endpoints of the deliver client in the peer.  ~C0rWin  will probably know for sure and could confirm the assumption.  As for the communication errors... they happen at bootstrapping of the network because things are still shaky. If they don't repeat themselves, things are fine.   ></body> </Action>
