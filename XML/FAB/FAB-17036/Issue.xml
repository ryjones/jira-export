<Issue id="43235" key="FAB-17036" number="17036" project="10002" reporter="senthil1" assignee="senthil1" creator="senthil1" type="10002" summary="Refactor Version and Revision Cache in State CouchDB" priority="3" resolution="10002" status="6" created="2019-11-08 15:03:49.0" updated="2020-01-30 14:42:36.0" resolutiondate="2020-01-30 14:42:36.0" votes="0" watches="1" workflowId="56341"> <description><! CDATA Among ValidateAndPrepare(), PrepareExpiringKeys(), and RemoveStaleAndCommitPvtDataOfOldBlocks(), we can allow only one function to execute at a time. The reason is that each function calls LoadCommittedVersions() which would clear the existing entries in the transient buffer and load new entries (such a transient buffer is not applicable for the golevelDB). As a result, these three functions can interleave and nullify the optimization provided by the bulk read API.  Once the ledger cache (FAB-103) is introduced and existing LoadCommittedVersions() would be refactored to return a map. Then, we can allow these three functions to execute parallely.  ></description> </Issue>
