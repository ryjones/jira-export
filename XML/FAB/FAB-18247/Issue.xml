<Issue id="46154" key="FAB-18247" number="18247" project="10002" reporter="dongming" creator="dongming" type="10004" summary="snapshot is generated but still listed in pending list" priority="3" resolution="10204" status="6" created="2020-09-25 14:42:34.0" updated="2020-11-16 15:18:43.0" resolutiondate="2020-11-16 15:18:43.0" votes="0" watches="1" workflowId="60058" archived="N"> <description><! CDATA Fabric peer Commit SHA: 2b27d51  issue:  the block number is listed in the snapshot pending list after snapshot is generated  The list pending command:  Successfully got pending snapshot requests:  274000 290000 291000 292000 293000 294000 295000 296000 297000 298000 299000 300000 310000 320000 330000 340000 350000 400000 600000 800000 1000000      block 274000 is in the pending list, though the peer snapshot directory shows that snapshot for block 274000 is generated /var/hyperledger/production/ledgersData/snapshots/completed/testorgschannel0 # ls 200000  228000  241000  244000  247000  250000  253000  256000  259000  262000  265000  268000  274000  277000  280000 226000  229000  242000  245000  248000  251000  254000  257000  260000  263000  266000  269000  275000  278000 227000  240000  243000  246000  249000  252000  255000  258000  261000  264000  267000  270000  276000  279000      Also the peer log shows that the snapshot is generated:  (state_validation=4ms block_and_pvtdata_commit=17ms state_commit=8ms) commitHash= 44674555037478fbfd7ddae94bb8f2469dcbe74cdf665ea64d56b40deef02443   ^  34m2020-09-24 17:06:15.954 UTC  gossip.privdata  StoreBlock -> INFO ee3e8^  0m  testorgschannel0  Received block  274000  from buffer  ^  34m2020-09-24 17:06:15.980 UTC  committer.txvalidator  Validate -> INFO ee3e9^  0m  testorgschannel0  Validated block  274000  in 25ms  ^  34m2020-09-24 17:06:16.034 UTC  kvledger  commit -> INFO ee3ea^  0m  testorgschannel0  Committed block  274000  with 100 transaction(s) in 49ms (state_validation=14ms block_and_pvtdata_commit=18ms state_commit=8ms) commitHash= 59440a536a95d9cab00c4e887adb4f0544c19f0a893e0fd87ebdc1fb1e8fb433   ^  34m2020-09-24 17:06:16.036 UTC  kvledger  func1 -> INFO ee3eb^  0m Generating snapshot channelID=testorgschannel0 lastCommittedBlockNumber=274000  ^  34m2020-09-24 17:06:16.096 UTC  gossip.privdata  StoreBlock -> INFO ee3ec^  0m  testorgschannel0  Received block  274001  from buffer  ^  34m2020-09-24 17:06:16.106 UTC  committer.txvalidator  Validate -> INFO ee3ed^  0m  testorgschannel0  Validated block  274001  in 10ms  ^  34m2020-09-24 17:06:16.110 UTC  kvledger  processSnapshotMgmtEvents -> INFO ee3ee^  0m commit waiting on snapshot to be generated channelID=testorgschannel0 lastCommittedBlockNumber=274000  ^  34m2020-09-24 17:09:08.033 UTC  kvledger  func1 -> INFO ee3ef^  0m Generated snapshot channelID=testorgschannel0 lastCommittedBlockNumber=274000     ></description> </Issue>
