<Action id="51108" issue="34035" author="denyeart" type="comment" body=" ~yacovm  Can you take a look?" created="2018-09-24 16:26:55.0" updateauthor="denyeart" updated="2018-09-24 16:26:55.0"/>
<Action id="51113" issue="34035" author="yacovm" type="comment" created="2018-09-24 17:18:34.0" updateauthor="yacovm" updated="2018-09-24 17:18:34.0"> <body><! CDATA First of all - it would be nice to know what an "admin peer" is....  ~harrisob@us.ibm.com  ?  ~davidkel   Any ideas? Is this a listing of a peer that you perform using an admin certificate?  Now, second -  ~bravobardo  - can you please attach logs of the peer you're working with? specifically I am interested in  these|https://github.com/hyperledger/fabric/blob/release-1.2/discovery/service.go#L94   two|https://github.com/hyperledger/fabric/blob/release-1.2/discovery/service.go#L99  log lines, which exist in the latest master branch and also in the release-1.2.1 branch. I can't help you if I don't know what the SDK is sending and receiving from the peer...   ></body> </Action>
<Action id="51114" issue="34035" author="yacovm" type="comment" body="Another very important thing I&apos;d like you (  ~bravobardo  ) to do, if you can - is to try and play with the  discover CLI tool|https://hyperledger-fabric.readthedocs.io/en/latest/discovery-cli.html  to rule out (or find...) any bugs in the peer." created="2018-09-24 17:20:54.0" updateauthor="yacovm" updated="2018-09-24 17:20:54.0"/>
<Action id="51131" issue="34035" author="bravobardo" type="comment" created="2018-09-25 00:26:08.0" updateauthor="bravobardo" updated="2018-09-25 00:26:08.0"> <body><! CDATA Hi, Basically, I also do not know what an AdminPeer is in the end, but it is referenced in the FabricClient.js class:  {code:java} // creating admin peers if (discover_results && discover_results.peers_by_org) { {code}  By using the discover_tool CLI, the list of peers by org is always empty for balance-transfer sample. I think it is related to the way the network is configured for that sample. Is there a way to correctly configure it so the peers can be retrieved by orgs?    ></body> </Action>
<Action id="51142" issue="34035" author="yacovm" type="comment" body="Yes, you need to have anchor peers. Take a look at  this|https://github.com/hyperledger/fabric/blob/release-1.2/examples/e2e_cli/scripts/script.sh#L110-L126 " created="2018-09-25 04:55:29.0" updateauthor="yacovm" updated="2018-09-25 04:55:29.0"/>
<Action id="51189" issue="34035" author="bravobardo" type="comment" created="2018-09-26 06:02:36.0" updateauthor="bravobardo" updated="2018-09-26 06:02:36.0"> <body><! CDATA Hi. After spending some hours I still could not understand why discover.members is always empty, even though other 'discoveries' are retrieved from peer, like orderers and msps data.  a) the config file already states the peers as anchors (in fact, the balance-transfer configuration is very similar to the first-network one).  b) I have also tried to set one of the peers as 'discover enabled', as informed  here| https://fabric-sdk-node.github.io/tutorial-discovery.html  , but with no success as well.  The last point I could debug was in Peer.js, line 59 {code:java} // code placeholder self._discoveryClient.discover(request, function(err, response) {{code} Any tip on what may be missing?    s           ></body> </Action>
<Action id="51190" issue="34035" author="yacovm" type="comment" created="2018-09-26 06:39:40.0" updateauthor="yacovm" updated="2018-09-26 06:39:40.0"> <body><! CDATA {quote}Hi. After spending some hours I still could not understand why discover.members is always empty, even though other 'discoveries' are retrieved from peer, like orderers and msps data.{quote}  Because, the configuration of the fabric sample balance-transfer doesn't contain an update to anchor peers.  Let's try something - in the docker-compose file, add the following line to the  environment|https://github.com/hyperledger/fabric-samples/blob/release-1.2/balance-transfer/artifacts/docker-compose.yaml#L90-L93  of *peer1.org1.example.com*: {code} - CORE_PEER_GOSSIP_BOOTSTRAP=peer0.org1.example.com:7051 {code} and the following line in the environment of *peer1.org2.example.com*: {code} - CORE_PEER_GOSSIP_BOOTSTRAP=peer0.org2.example.com:7051 {code}  And then try to discover peers. You'll see that peers discover peers from their own organizations, but not from other organizations. That's because, anchor peers aren't updated after the channel is created. Even though the configtx.yaml has anchor peers in them, they need to be updated manually  in a similar fashion to what is done in the e2e_cli|https://github.com/hyperledger/fabric/blob/release-1.3/examples/e2e_cli/scripts/script.sh#L110-L126 .    ></body> </Action>
<Action id="51203" issue="34035" author="yacovm" type="comment" created="2018-09-26 12:19:59.0" updateauthor="yacovm" updated="2018-09-26 12:20:20.0"> <body><! CDATA I think the real problem might be that you need the balance transfer have an external endpoint defined for all peers... add an external endpoint to the peer(s) and it should work.  {code} - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0.org1.example.com:7051 {code}  ></body> </Action>
<Action id="51209" issue="34035" author="bravobardo" type="comment" created="2018-09-26 14:45:13.0" updateauthor="bravobardo" updated="2018-09-26 14:45:13.0"> <body><! CDATA Hy  ~yacovm . In fact, I have added both GOSSIP_BOOTSTRAP and GOSSIP_EXTERNALENDPOINT in ALL the peers (peer0.org1, peer1.org1, peer0.org2 and peer1.org2).  Then it worked :)  Only issue now is that I cannot display the Org2 peers in the explorer for some reason.     ></body> </Action>
<Action id="51225" issue="34035" author="yacovm" type="comment" created="2018-09-26 17:34:43.0" updateauthor="yacovm" updated="2018-09-26 17:35:12.0"> <body><! CDATA I meant for more than 1 peer... that was just an example.  If you say that now it works, but you cannot display the org2 peers in the explorer then it's likely an explorer problem, no? you probably need to close this JIRA and open a new one with the appropriate project...  ~denyeart  isn't that so?   ></body> </Action>
<Action id="51226" issue="34035" author="bravobardo" type="comment" created="2018-09-26 18:06:10.0" updateauthor="bravobardo" updated="2018-09-26 18:06:10.0"> <body><! CDATA Yeap, Yacoc.  In the end, most of it is related to the Explorer settings, except for the changes I did in the balance-transfer docker.yaml file - what I consider more like an enhancement than a real bug. I will propose some updates in their code.     Regarding Explorer, is  ~denyeart  the responsible?     Nevertheless, thanks a lot for the support.  Hugs  ></body> </Action>
