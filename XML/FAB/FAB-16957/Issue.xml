<Issue id="43023" key="FAB-16957" number="16957" project="10002" reporter="sykesm" assignee="caod" creator="sykesm" type="10004" summary="Intermittent test failure - orderer/common/cluster/deliver_test" priority="4" resolution="10000" status="6" created="2019-10-28 20:06:47.0" updated="2020-07-23 01:45:02.0" resolutiondate="2020-02-25 13:38:46.0" votes="0" watches="3" workflowId="56128"> <description><! CDATA The following code: {code} 272 func (ds *deliverServer) addExpectPullAssert(seq uint64) {                                                                                                                       273   ds.seekAssertions <- func(info *orderer.SeekInfo, _ string) { 274     assert.NotNil(ds.t, info.GetStart().GetSpecified()) 275     assert.Equal(ds.t, seq, info.GetStart().GetSpecified().Number) 276     assert.Equal(ds.t, info.ErrorResponse, orderer.SeekInfo_BEST_EFFORT) 277   } 278 }  {code}  panics in test: {code} 15:19:40  31m2019-10-28 19:18:21.556 UTC  test  fetchLastBlockSeq -> ERRO 1a9 0m Failed receiving the latest block from 127.0.0.1:37985: EOF 15:19:40  33m2019-10-28 19:18:21.556 UTC  test  func1 -> WARN 1aa 0m Received error of type 'EOF' from {127.0.0.1:37985   } 15:19:40  33m2019-10-28 19:18:21.557 UTC  test  connectToSomeEndpoint -> WARN 1ab 0m Could not connect to any endpoint of  {127.0.0.1:37985   }  15:19:40 panic: runtime error: invalid memory address or nil pointer dereference 15:19:40  signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0xed817a  15:19:40  15:19:40 goroutine 1085  running : 15:19:40 github.com/hyperledger/fabric/orderer/common/cluster_test.(*deliverServer).addExpectPullAssert.func1(0xc0000336c0, 0xc000138600, 0x15) 15:19:40 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/deliver_test.go:275 +0x14a 15:19:40 github.com/hyperledger/fabric/orderer/common/cluster_test.(*deliverServer).Deliver(0xc0000d5600, 0x132f8e0, 0xc0001a5630, 0x1319820, 0xc0000d5600) 15:19:40 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/deliver_test.go:184 +0x19a 15:19:40 github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/orderer._AtomicBroadcast_Deliver_Handler(0x116c920, 0xc0000d5600, 0x132ca60, 0xc0004ce780, 0x2702590, 0xc00037d000) 15:19:40 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/orderer/ab.pb.go:674 +0xce 15:19:40 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC(0xc00053ea80, 0x13312c0, 0xc000414180, 0xc00037d000, 0xc000419fb0, 0x1c70c60, 0x0, 0x0, 0x0) 15:19:40 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1202 +0x166a 15:19:40 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc00053ea80, 0x13312c0, 0xc000414180, 0xc00037d000, 0x0) 15:19:40 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1282 +0x12e6 15:19:40 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc000335850, 0xc00053ea80, 0x13312c0, 0xc000414180, 0xc00037d000) 15:19:40 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:717 +0xad 15:19:40 created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1 15:19:40 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:715 +0xb9 15:19:40 FAIL	github.com/hyperledger/fabric/orderer/common/cluster	1.614s {code}  ></description> </Issue>
