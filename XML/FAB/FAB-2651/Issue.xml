<Issue id="15218" key="FAB-2651" number="2651" project="10002" reporter="harrijk" assignee="harrijk" creator="harrijk" type="10004" summary="A number of Unit Tests are using an incorrect path to the MSP sampleconfig keystore" priority="3" resolution="10000" status="6" created="2017-03-06 12:17:55.0" updated="2018-07-20 14:11:54.0" resolutiondate="2017-03-27 13:37:59.0" votes="0" watches="2" workflowId="37700"> <description><! CDATA For some unit tests, a test configuration is setup to create a BCCSP keystore.  Other unit tests that require a keystore are using the one located in fabric/msp/sampleconfig/keystore.  Although the test configuration setup is attempting to use the fabric/msp/sampleconfig/keystore, the relative path to get to the keystore directory starts from the directory the unit test is located rather than the fabric directory.  As a result a new directory structure is created within the directory the unit test is located to setup a keystore.  This causes some unintended consequences.  The most serious of which is the creation of the keystore directory structure that is owned by root.  Within the CI environment fabric jobs first wipe clean the previous build's workspace.  Since the workspace contains directories owned by root (e.g., created during the events unit tests), the clean workspace operation fails.  This results in the failure of Fabric verify and merge jobs for the z and p platforms since the non-root user, jenkins, cannot delete files owned by root.  The reason that Fabric verify and merge jobs don't fail on the x86 platform is due to the fact that all x86 Jenkins workers are destroyed after the Jenkins job completes, and new x86 Jenkins workers are instantiated from a fresh image prior to starting any Jenkins jobs.  ></description> </Issue>
