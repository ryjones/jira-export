<Action id="60774" issue="40203" author="mhbauer" type="comment" created="2019-06-07 20:11:32.0" updateauthor="mhbauer" updated="2019-06-07 20:11:32.0"> <body><! CDATA TestChannelConfig fails for the same reason as this test.     The underlying issue to me is the global 'once'.     $ go test -v -race -run TestChannelConfig === RUN TestChannelConfig 2019-06-07 13:10:45.727 PDT  gossip.service  loadGossipConfig -> WARN 001 Configuration key peer.gossip.pvtData.transientstoreMaxBlockRetention isn't set, defaulting to 1000 2019-06-07 13:10:45.727 PDT  peer.gossip.sa  OrgByPeerIdentity -> ERRO 002 Invalid Peer Identity. It must be different from nil. --- FAIL: TestChannelConfig (0.00s) panic: Failed putting our own identity into the identity mapper: PKIID is nil  recovered  panic: Failed putting our own identity into the identity mapper: PKIID is nil  goroutine 6  running : testing.tRunner.func1(0xc000196a00) /Users/mhb/.go/src/testing/testing.go:830 +0x69d panic(0x4ca3ea0, 0xc0000c0940) /Users/mhb/.go/src/runtime/panic.go:522 +0x1b5 github.com/hyperledger/fabric/gossip/identity.NewIdentityMapper(0x4f00160, 0x6026340, 0x0, 0x0, 0x0, 0xc000202010, 0x4eda040, 0xc0003adef0, 0x4d789f3, 0x6) /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/identity/identity.go:83 +0x486 github.com/hyperledger/fabric/gossip/gossip.NewGossipService(0xc0001c4000, 0xc000089080, 0x4eda040, 0xc0003adef0, 0x4f00160, 0x6026340, 0x0, 0x0, 0x0, 0x0, ...) /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:96 +0x839 github.com/hyperledger/fabric/gossip/service.InitGossipService.func1() /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/service/gossip_service.go:164 +0x5bb sync.(*Once).Do(0x6026428, 0xc000062d28) /Users/mhb/.go/src/sync/once.go:44 +0xdf github.com/hyperledger/fabric/gossip/service.InitGossipService(0x4ee43e0, 0xc0001580f0, 0x4eef860, 0x6026340, 0xc0000ade50, 0xf, 0xc000089080, 0x0, 0x4f00160, 0x6026340, ...) /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/service/gossip_service.go:152 +0x21e github.com/hyperledger/fabric/gossip/service.TestChannelConfig(0xc000196a00) /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/service/gossip_service_test.go:896 +0x247 testing.tRunner(0xc000196a00, 0x4db0538) /Users/mhb/.go/src/testing/testing.go:865 +0x164 created by testing.(*T).Run /Users/mhb/.go/src/testing/testing.go:916 +0x65b exit status 2 FAIL github.com/hyperledger/fabric/gossip/service 0.264s  ></body> </Action>
<Action id="60779" issue="40203" author="mhbauer" type="comment" body="Where is the follow up?" created="2019-06-07 23:03:23.0" updateauthor="mhbauer" updated="2019-06-07 23:03:23.0"/>
