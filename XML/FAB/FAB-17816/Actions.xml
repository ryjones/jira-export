<Action id="69109" issue="44960" author="denyeart" type="comment" created="2020-04-29 03:32:11.0" updateauthor="denyeart" updated="2020-04-29 03:32:11.0"> <body><! CDATA  ~ginspctw  upgrade-dbs drops the state database but does not drop the block store or private data store.  The next time the peer starts, it will rebuild the state database, using the public data from the block store, and the private data from the private data store. Therefore, there is no need or expectation to 'sync' private data in normal upgrade scenario.  If you accidentally delete the private data store yourself, then the peer will not be in an expected state and the next time it starts it will not be able to rebuild the state database, and will instead a report an error "Failed to load ledger mychannel(The store is empty)". This would be a much worse problem than private data sync, you'd have to recreate the peer and rejoin channels so that it can process blocks and retrieve private data from another peer.  The invalid transaction is not related.  The transaction will be marked invalid in the block store and will not be applied to the state database,  this has nothing to do with private data or upgrade scenario. The transaction must have been invalid prior to the upgrade attempt.  All that being said, I'm not sure what you mean by "we couldn't get all the private datas in sync".  What is the exact error message you get? Could you post your logs?  Ideally with peer debug such as:  {code:java} FABRIC_LOGGING_SPEC=info:kvledger,ledgerstorage,statecouchdb,transientstore,gossip.privdata,chaincode.platform=debug peer node start {code}   ></body> </Action>
<Action id="69122" issue="44960" author="JIRAUSER20118" type="comment" created="2020-04-30 15:09:10.0" updateauthor="JIRAUSER20118" updated="2020-04-30 15:09:10.0"> <body><! CDATA Hi David Enyeart,  Thank you for the detailed explanation. I managed to get all the data back after recreating the peer and rejoining the channel.    ></body> </Action>
