<Issue id="19370" key="FAB-5391" number="5391" project="10002" reporter="suryalnvs" assignee="wlahti" creator="suryalnvs" type="10004" summary="Concurrent transactions are not going through on org2 on a channel formed with two orgs (org1 and org2) " priority="2" resolution="10000" status="6" created="2017-07-19 19:58:52.0" updated="2018-07-20 14:13:49.0" resolutiondate="2017-07-26 10:31:00.0" votes="0" watches="3" workflowId="39497"> <description><! CDATA *Recreate steps:*  1.  channel '*mychannel0*' has been created with Org1 and Org2      Org1 contains endorser *peer1* (peer0.org1.example.com) and comitter *peer2* (peer1.org1.example.com)  Org2 contains endorser *peer1* (peer0.org2.example.com) and comitter *peer2* (peer1.org2.example.com)  2. used CLI commands to create and join the channel  3. Installed *sample_cc* chaincode on peer1 of  org1 and org2  4. instantiated *sample_cc* chaincode on peer1 of org1  5. PTE tool has been used to send *constant* *mode* transactions with 4 threads and 0.01 s delay between each invoke.     *Expected Result:*  Chaincode instantiation should be per channel, transaction sent to Org2 should go though .     *Actual result:*  All the traffic sent to Org2 are failing with the following error:     *Gist of error logs from PTE:*    {code:java} info:  PTE 0 main : stderr: error:  Peer.js : sendProposal - timed out after:45000 error:  client-utils.js : sendPeersProposal - Promise is rejected: Error: REQUEST_TIMEOUT     at Timeout._onTimeout (/home/ibmadmin/fabric-sdk-node/node_modules/fabric-client/lib/Peer.js:100:19)     at ontimeout (timers.js:386:14)     at tryOnTimeout (timers.js:250:5)     at Timer.listOnTimeout (timers.js:214:5)  info:  PTE 0 main : stderr: error:  PTE 0 exec :  Nid:chan:org:id=0:mychannel0:org2:3 invoke_move_const  Failed to send transaction proposal due to error:  TypeError: Illegal buffer     at TypeError (native)     at Function.module.exports.ByteBuffer.wrap (/home/ibmadmin/fabric-sdk-node/node_modules/bytebuffer/dist/bytebuffer-node.js:346:19)     at Element.ProtoBuf.Reflect.ElementPrototype.verifyValue (/home/ibmadmin/fabric-sdk-node/node_modules/protobufjs/dist/protobuf.js:1886:39)     at T.ProtoBuf.Reflect.FieldPrototype.verifyValue (/home/ibmadmin/fabric-sdk-node/node_modules/protobufjs/dist/protobuf.js:3499:33)     at setter (/home/ibmadmin/fabric-sdk-node/node_modules/protobufjs/dist/protobuf.js:2582:77)     at Channel.sendTransaction (/home/ibmadmin/fabric-sdk-node/node_modules/fabric-client/lib/Channel.js:1441:27)     at /home/ibmadmin/fabric-sdk-node/test/v1performance/pte-execRequest.js:981:43     at eventRegister (/home/ibmadmin/fabric-sdk-node/test/v1performance/pte-execRequest.js:720:5)     at channel.sendTransactionProposal.then (/home/ibmadmin/fabric-sdk-node/test/v1performance/pte-execRequest.js:979:13)     at process._tickCallback (internal/process/next_tick.js:109:7{code}    *Gist of error logs from peer0.org2.example.com:* {code} 2017-07-19 20:12:34.881 UTC  chaincode  processStream -> ERRO e0c Error handling chaincode support stream: rpc error: code = Canceled desc = context canceled 2017-07-19 20:12:35.547 UTC  chaincode  Launch -> ERRO e0d launchAndWaitForRegister failed Timeout expired while starting chaincode sample_cc_ch1:v0(networkid:dev,peerid:peer0.org2.example.com,tx:9eaa0392890e6eb6a5bbef35cf83942f8fbc5fa3f89b4a57379d4a378b2b5320) 2017-07-19 20:12:35.548 UTC  chaincode  ExecuteChaincode -> ERRO e0e Error executing chaincode: Timeout expired while starting chaincode sample_cc_ch1:v0(networkid:dev,peerid:peer0.org2.example.com,tx:9eaa0392890e6eb6a5bbef35cf83942f8fbc5fa3f89b4a57379d4a378b2b5320) 2017-07-19 20:12:35.548 UTC  endorser  simulateProposal -> ERRO e0f failed to invoke chaincode name:"sample_cc_ch1"  on transaction 9eaa0392890e6eb6a5bbef35cf83942f8fbc5fa3f89b4a57379d4a378b2b5320, error: Error executing chaincode: Timeout expired while starting chaincode sample_cc_ch1:v0(networkid:dev,peerid:peer0.org2.example.com,tx:9eaa0392890e6eb6a5bbef35cf83942f8fbc5fa3f89b4a57379d4a378b2b5320) 2017-07-19 20:12:35.659 UTC  chaincode  Launch -> ERRO e10 launchAndWaitForRegister failed Timeout expired while starting chaincode sample_cc_ch1:v0(networkid:dev,peerid:peer0.org2.example.com,tx:a2292c21f3a2dea2598e2f41ba59825d2920189393f2187008a92e566cf6f49b) 2017-07-19 20:12:35.660 UTC  chaincode  ExecuteChaincode -> ERRO e11 Error executing chaincode: Timeout expired while starting chaincode sample_cc_ch1:v0(networkid:dev,peerid:peer0.org2.example.com,tx:a2292c21f3a2dea2598e2f41ba59825d2920189393f2187008a92e566cf6f49b) 2017-07-19 20:12:35.660 UTC  endorser  simulateProposal -> ERRO e12 failed to invoke chaincode name:"sample_cc_ch1"  on transaction a2292c21f3a2dea2598e2f41ba59825d2920189393f2187008a92e566cf6f49b, error: Error executing chaincode: Timeout expired while starting chaincode sample_cc_ch1:v0(networkid:dev,peerid:peer0.org2.example.com,tx:a2292c21f3a2dea2598e2f41ba59825d2920189393f2187008a92e566cf6f49b) 2017-07-19 20:12:36.337 UTC  chaincode  Launch -> ERRO e13 launchAndWaitForRegister failed Timeout expired while starting chaincode sample_cc_ch1:v0(networkid:dev,peerid:peer0.org2.example.com,tx:4efd480577901237f36b1f922634a13775f96c349575eeea9e96c5b7fd03c742) 2017-07-19 20:12:36.337 UTC  chaincode  ExecuteChaincode -> ERRO e14 Error executing chaincode: Timeout expired while starting chaincode sample_cc_ch1:v0(networkid:dev,peerid:peer0.org2.example.com,tx:4efd480577901237f36b1f922634a13775f96c349575eeea9e96c5b7fd03c742) 2017-07-19 20:12:36.337 UTC  endorser  simulateProposal -> ERRO e15 failed to invoke chaincode name:"sample_cc_ch1"  on transaction 4efd480577901237f36b1f922634a13775f96c349575eeea9e96c5b7fd03c742, error: Error executing chaincode: Timeout expired while starting chaincode sample_cc_ch1:v0(networkid:dev,peerid:peer0.org2.example.com,tx:4efd480577901237f36b1f922634a13775f96c349575eeea9e96c5b7fd03c742) 2017-07-19 20:12:36.511 UTC  chaincode  Launch -> ERRO e16 launchAndWaitForRegister failed Error chaincode is being launched: sample_cc_ch1:v0 2017-07-19 20:12:36.512 UTC  chaincode  ExecuteChaincode -> ERRO e17 Error executing chaincode: Error chaincode is being launched: sample_cc_ch1:v0 2017-07-19 20:12:36.512 UTC  endorser  simulateProposal -> ERRO e18 failed to invoke chaincode name:"sample_cc_ch1"  on transaction 8104b9a92af9aa81f7976c8640d33fb689303e485da1abd25fbbc2617dccb849, error: Error executing chaincode: Error chaincode is being launched: sample_cc_ch1:v0 2017-07-19 20:12:36.512 UTC  chaincode  Launch -> ERRO e19 launchAndWaitForRegister failed Error chaincode is being launched: sample_cc_ch1:v0 2017-07-19 20:12:36.512 UTC  chaincode  ExecuteChaincode -> ERRO e1a Error executing chaincode: Error chaincode is being launched: sample_cc_ch1:v0 2017-07-19 20:12:36.512 UTC  endorser  simulateProposal -> ERRO e1b failed to invoke chaincode name:"sample_cc_ch1"  on transaction ca0ad44e91b2f0c0ad7abc8189ed592f53ba9ea89f5ee325f2365a79a2baa3dd, error: Error executing chaincode: Error chaincode is being launched: sample_cc_ch1:v0 2017-07-19 20:12:36.558 UTC  chaincode  Launch -> ERRO e1c launchAndWaitForRegister failed Error chaincode is being launched: sample_cc_ch1:v0 2017-07-19 20:12:36.558 UTC  chaincode  ExecuteChaincode -> ERRO e1d Error executing chaincode: Error chaincode is being launched: sample_cc_ch1:v0 2017-07-19 20:12:36.558 UTC  endorser  simulateProposal -> ERRO e1e failed to invoke chaincode name:"sample_cc_ch1"  on transaction 1aa1f424f4958204adcbd3908d7dc785d13c4c9a240cbbd32541f461278c78ae, error: Error executing chaincode: Error chaincode is being launched: sample_cc_ch1:v0 2017-07-19 20:12:36.558 UTC  chaincode  Launch -> ERRO e1f launchAndWaitForRegister failed Error chaincode is being launched: sample_cc_ch1:v0 2017-07-19 20:12:36.558 UTC  chaincode  ExecuteChaincode -> ERRO e20 Error executing chaincode: Error chaincode is being launched: sample_cc_ch1:v0 2017-07-19 20:12:36.558 UTC  endorser  simulateProposal -> ERRO e21 failed to invoke chaincode name:"sample_cc_ch1"  on transaction 8bf90f7c6724f45ceb184fe30af46c615d2d7ac7cc0a17d9745fb0e7364158be, error: Error executing chaincode: Error chaincode is being launched: sample_cc_ch1:v0 2017-07-19 20:12:36.561 UTC  chaincode  ExecuteChaincode -> ERRO e22 Error executing chaincode: premature execution - chaincode (sample_cc_ch1:v0) is being launched {code}           ></description> </Issue>
