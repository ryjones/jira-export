<Issue id="36814" key="FAB-13705" number="13705" project="10002" reporter="tock" assignee="tock" creator="tock" type="10003" summary="Refine Bundle.ValidateNew by identifying a system vs. standard channel" priority="3" resolution="10000" status="6" created="2019-01-16 08:24:48.0" updated="2019-03-03 12:58:36.0" resolutiondate="2019-01-30 09:32:46.0" votes="0" watches="1" workflowId="48379"> <description><! CDATA * In {{common/multichannel/Bundle.ValidateNew()}} it is possible to identify the system channel using              {{_, isSys := b.ConsortiumsConfig()}} this can be used to refine {{validateMigrationStep()}} such that it deals more accurately with the migration-state transitions on the system vs. standard channels.    * In addition, prevent user from adding {{ConsortiumsConfig()}} to standard channels. This will protect {{multichannel.Registrar}} from blowing up on next initialization. ** Looking at the code in {{multichannel.Registrar}}, we see that  `{{_, ok := ledgerResources.ConsortiumsConfig()}}` is used to identify the system channel. If two system channels are identified, the code panics.  ** Now, in {{Bundle.ValidateNew()}}, currently there is no mechanism to prevent a user (orderer admin) from adding a {{ConsortiumsConfig()}} to a standard channel. ** If a user does that,  {{multichannel.Registrar}} will blow up in the next initialization.  ></description> </Issue>
