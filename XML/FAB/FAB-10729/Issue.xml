<Issue id="31196" key="FAB-10729" number="10729" project="10002" reporter="jyellick" assignee="jyellick" creator="jyellick" type="10001" summary="As a peer org admin, I need a chaincode API to define a chaincode" priority="3" resolution="10000" status="6" created="2018-06-19 20:58:08.0" updated="2019-02-20 05:27:44.0" resolutiondate="2019-02-20 05:27:44.0" votes="0" watches="1" workflowId="35872"> <description><! CDATA This story corresponds to the 'Define' step in the design document from FAB-8787.  The implementation should add a new chaincode function called {{Define}} which accepts a new message as its only parameter.  This message should have a single field, corresponding to the {{Definition}} message as defined in FAB-10726.  It should return a new empty message.  It should read from the organizations private store the key at <hash> and verify that each the messages are equal or fail.  It should use protobuf equality checking rather than direct bytes comparison.  Next, it should check to see whether the world state key <chaincode_name> is set.  If so, it should should read the bytes there, unmarshal it as a chaincode definition, and check that the sequence contained in the new definition is exactly one larger than the existing sequence number or fail.  If the key does not exist, it should ensure that the sequence number is 0 or fail.  Finally, it should marshal the definition and store it at world state key <chaincode_name> and return the empty message successfully.  ></description> </Issue>
