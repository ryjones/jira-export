<Issue id="45456" key="FAB-18021" number="18021" project="10002" reporter="tatsu-sato" assignee="tatsu-sato" creator="tatsu-sato" type="10002" summary="Improve log messages in msp/configbuilder.go" priority="3" status="10100" created="2020-06-23 18:54:58.0" updated="2020-06-24 08:15:38.0" votes="0" watches="1" workflowId="59356" archived="N"> <description><! CDATA Currently, *loadCertificateAt()* in *msp/configbuilder.go* prints warning messages when Certificate for each *OUIdentifier* is not set in *msp/config.yaml*.  An example of *msp/config.yaml*: {code:yaml} NodeOUs:   Enable: true ClientOUIdentifier:     OrganizationalUnitIdentifier: client PeerOUIdentifier:     OrganizationalUnitIdentifier: peer AdminOUIdentifier:     OrganizationalUnitIdentifier: admin OrdererOUIdentifier:     OrganizationalUnitIdentifier: orderer {code} An example of the warning messages when using the above *config.yaml*: {code:sh} configtxgen -profile TwoOrgsOrdererGenesis -channelID system-channel -outputBlock ./system-genesis-block/genesis.block 2020-06-23 18:25:49.972 UTC  common.tools.configtxgen  main -> INFO 001 Loading configuration 2020-06-23 18:25:49.994 UTC  common.tools.configtxgen.localconfig  completeInitialization -> INFO 002 Orderer.Addresses unset, setting to  127.0.0.1:7050  2020-06-23 18:25:49.994 UTC  common.tools.configtxgen.localconfig  completeInitialization -> INFO 003 orderer type: etcdraft 2020-06-23 18:25:49.994 UTC  common.tools.configtxgen.localconfig  completeInitialization -> INFO 004 Orderer.EtcdRaft.Options unset, setting to tick_interval:"500ms" election_tick:10 heartbeat_tick:1 max_inflight_blocks:5 snapshot_interval_size:16777216  2020-06-23 18:25:49.994 UTC  common.tools.configtxgen.localconfig  Load -> INFO 005 Loaded configuration: github.com/hyperledger/fabric-samples/test-network/configtx/configtx.yaml 2020-06-23 18:25:49.994 UTC  msp  loadCertificateAt -> WARN 006 Failed loading ClientOU certificate at  github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp :  could not read file github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp: is a directory  2020-06-23 18:25:49.994 UTC  msp  loadCertificateAt -> WARN 007 Failed loading PeerOU certificate at  github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp :  could not read file github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp: is a directory  2020-06-23 18:25:49.994 UTC  msp  loadCertificateAt -> WARN 008 Failed loading AdminOU certificate at  github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp :  could not read file github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp: is a directory  2020-06-23 18:25:49.994 UTC  msp  loadCertificateAt -> WARN 009 Failed loading OrdererOU certificate at  github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp :  could not read file github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp: is a directory  2020-06-23 18:25:49.995 UTC  msp  loadCertificateAt -> WARN 00a Failed loading ClientOU certificate at  github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp :  could not read file github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp: is a directory  2020-06-23 18:25:49.995 UTC  msp  loadCertificateAt -> WARN 00b Failed loading PeerOU certificate at  github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp :  could not read file github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp: is a directory  2020-06-23 18:25:49.995 UTC  msp  loadCertificateAt -> WARN 00c Failed loading AdminOU certificate at  github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp :  could not read file github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp: is a directory  2020-06-23 18:25:49.995 UTC  msp  loadCertificateAt -> WARN 00d Failed loading OrdererOU certificate at  github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp :  could not read file github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp: is a directory  2020-06-23 18:25:49.996 UTC  msp  loadCertificateAt -> WARN 00e Failed loading ClientOU certificate at  github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp :  could not read file github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp: is a directory  2020-06-23 18:25:49.996 UTC  msp  loadCertificateAt -> WARN 00f Failed loading PeerOU certificate at  github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp :  could not read file github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp: is a directory  2020-06-23 18:25:49.996 UTC  msp  loadCertificateAt -> WARN 010 Failed loading AdminOU certificate at  github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp :  could not read file github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp: is a directory  2020-06-23 18:25:49.996 UTC  msp  loadCertificateAt -> WARN 011 Failed loading OrdererOU certificate at  github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp :  could not read file github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp: is a directory  2020-06-23 18:25:49.997 UTC  common.tools.configtxgen  doOutputBlock -> INFO 012 Generating genesis block 2020-06-23 18:25:49.997 UTC  common.tools.configtxgen  doOutputBlock -> INFO 013 Writing genesis block {code} On the other hand, theÂ  document|https://hyperledger-fabric.readthedocs.io/en/master/msp.html#identity-classification  says that setting *Certificate* is optional and it is typical NOT to configure a specific *Certificate*.  Despite the typical setting, it may be noisy for users to always get the WARN Level log message. Also, it is desirable to be able to distinguish between the case where *Certificate* is not set and the case where the file is not found in the specific path.  Therefore, it is necessary to improve the log messages.  ></description> </Issue>
