<Issue id="14818" key="FAB-2257" number="2257" project="10002" reporter="jyellick" assignee="jyellick" creator="jyellick" type="10004" summary="Orderer startup locally is broken" priority="3" resolution="10000" status="6" created="2017-02-15 20:28:51.0" updated="2018-07-20 14:11:39.0" resolutiondate="2017-03-10 18:28:31.0" votes="0" watches="1" workflowId="37455"> <description><! CDATA In fixing the orderer docker startup, the orderer.yaml file was modified to include the LocalMSPDir.  This was required because without the variable in the yaml, the environment variable would not take effect.  However, this orderer.yaml variable was incorrectly set to ../msp when it was being set as a default in code to ../msp/sampleconfig.  Symptoms of this are:  $ ./orderer  2017-02-15 15:24:32.938 EST  orderer/config  Load -> INFO 001 No orderer cfg path set, assuming development environment, deriving from go path 2017-02-15 15:24:32.939 EST  orderer/config  Load -> INFO 002 Setting ORDERER_CFG_PATH to: /home/yellickj/go/src/github.com/hyperledger/fabric/orderer 2017-02-15 15:24:32.940 EST  viperutil  EnhancedExactUnmarshal -> INFO 003 map general:map LocalMSPID:DEFAULT GenesisFile:./genesisblock ListenPort:7050 LogLevel:info MaxWindowSize:1000 ListenAddress:127.0.0.1 TLS:map Certificate:<nil> RootCAs:<nil> ClientAuthEnabled:false ClientRootCAs:<nil> Enabled:false PrivateKey:<nil>  LocalMSPDir:../msp/ Profile:map Enabled:false Address:0.0.0.0:6060  QueueSize:10 GenesisMethod:provisional LedgerType:ram  ramledger:map HistorySize:1000  fileledger:map Location:<nil> Prefix:hyperledger-fabric-ordererledger  kafka:map Retry:map Stop:60s Period:3s  Verbose:false TLS:map PrivateKey:<nil> Certificate:<nil> RootCAs:<nil> Enabled:false   sbftlocal:map PeerCommAddr::6101 CertFile:sbft/testdata/cert1.pem KeyFile:sbft/testdata/key.pem DataDir:/tmp  genesis:map DeprecatedBatchSize:99 MB SbftShared:map N:1 F:0 RequestTimeoutNsec:1000000000 Peers:map :6101:sbft/testdata/cert1.pem   DeprecatedBatchTimeout:10s   2017-02-15 15:24:32.940 EST  orderer/config  completeInitialization -> INFO 004 Validated configuration to: &{General:{LedgerType:ram QueueSize:10 MaxWindowSize:1000 ListenAddress:127.0.0.1 ListenPort:7050 TLS:{Enabled:false PrivateKey: Certificate: RootCAs:   ClientAuthEnabled:false ClientRootCAs:  } GenesisMethod:provisional GenesisFile:./genesisblock Profile:{Enabled:false Address:0.0.0.0:6060} LogLevel:info LocalMSPDir:../msp/ LocalMSPID:DEFAULT} RAMLedger:{HistorySize:1000} FileLedger:{Location: Prefix:hyperledger-fabric-ordererledger} Kafka:{Retry:{Period:3s Stop:1m0s} Verbose:false Version:{version: 0 9 0 1 } TLS:{Enabled:false PrivateKey: Certificate: RootCAs:   ClientAuthEnabled:false ClientRootCAs:  }} Genesis:{DeprecatedBatchTimeout:10s DeprecatedBatchSize:103809024 SbftShared:{N:1 F:0 RequestTimeoutNsec:1000000000 Peers:map :6101:sbft/testdata/cert1.pem }} SbftLocal:{PeerCommAddr::6101 CertFile:sbft/testdata/cert1.pem KeyFile:sbft/testdata/key.pem DataDir:/tmp}} panic: Failed initializing crypto  Could not load a valid ca certificate from directory ../msp/cacerts, err Could not read directory open ../msp/cacerts: no such file or directory, err ../msp/cacerts   goroutine 1  running : panic(0x970d00, 0xc42023a530) 	/usr/lib/go/src/runtime/panic.go:500 +0x1a1 main.main() 	/home/yellickj/go/src/github.com/hyperledger/fabric/orderer/main.go:90 +0x16f8   ></description> </Issue>
