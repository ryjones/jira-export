<Issue id="43277" key="FAB-17046" number="17046" project="10002" reporter="sykesm" assignee="wlahti" creator="sykesm" type="10001" summary="When chaincode defined with the new lifecycle are no longer defined in any channel, they should be stopped" priority="3" resolution="10000" status="6" created="2019-11-11 16:32:54.0" updated="2020-01-27 21:05:32.0" resolutiondate="2020-01-27 21:05:32.0" votes="0" watches="2" workflowId="56384"> <description><! CDATA There is a state listener in the new lifecycle that tracks when chaincode is invocable (or not). Today, when a chaincode becomes invocable, we call the custodian to start it... A similar call needs to be made when a chaincode is no longer invocable to request the custodian to stop it.  The lifecycle cache already has a reference counted list of channel references to chaincode.  Acceptance: 1. Install chaincode with a name and package-ID "A" 2. Define chaincode 3. Install chaincode with name and package-ID "B" 4. Upgrade chaincode definition to "B" 5. Observe that chaincode container for package-ID "A" is stopped.  This story applies to internal platform chaincode and externally built and launched chaincode.  ></description> </Issue>
