<Action id="62419" issue="41526" author="yacovm" type="comment" created="2019-07-30 18:19:50.0" updateauthor="yacovm" updated="2019-07-30 18:19:50.0"> <body><! CDATA  ~angelo.decaro  ,  ~ales  ,  ~mastersingh24  ,  ~denyeart  - the context is that Ivan here got locked outside of his Fabric deployment (ouch... )     Do you think it's possible to add a warning for CA certificates and admin certificates a week before they expire?  ></body> </Action>
<Action id="62440" issue="41526" author="yacovm" type="comment" created="2019-07-30 22:35:22.0" updateauthor="yacovm" updated="2019-07-30 22:35:22.0"> <body><! CDATA Actually, it might be because the authentication filter of the x509 expiration is blocking you  ~gatakka  .  What is the error you get in the logs or the console? Can you elaborate?  Perhaps the right solution would be, to add a flag to the nodes that disable the expiration filter.  ></body> </Action>
<Action id="62446" issue="41526" author="gatakka" type="comment" created="2019-07-31 05:05:07.0" updateauthor="gatakka" updated="2019-07-31 05:05:44.0"> <body><! CDATA The error message is (name is replaced with xxx):  Endorser and orderer connections initialized  Error: got unexpected status: BAD_REQUEST – error authorizing update: error validating DeltaSet: policy for  Value   /Channel/Consortiums/xxxconsortium/xxxMsp/MSP not satisfied : signature set did not satisfy policy  ></body> </Action>
<Action id="62448" issue="41526" author="yacovm" type="comment" body="But where is the error of the expiration,  ~gatakka  ?" created="2019-07-31 06:11:59.0" updateauthor="yacovm" updated="2019-07-31 06:11:59.0"/>
<Action id="62449" issue="41526" author="gatakka" type="comment" created="2019-07-31 06:44:56.0" updateauthor="gatakka" updated="2019-07-31 06:46:19.0"> <body><! CDATA Let me go in details.  We expected certificates to last 10 years, they last only one. Because they were issued at almost the same the same time, all of them expired at the same time. Fabric stops accepting all of the requests. We generate new sets of certificates, using FabricCA, and replace all of them in MSP folder for Orderers and Peers. Ledger config update was not updated, only files in MSP folder for peers and orderers.  Fabric continue to work as expected - endorse and commit transactions.  When we decide to upgrade the chaincode, then we were unable to because policy was not satisfied. We use the same code/procedure for CC upgrade that we are using in the last 2 years.   If we sign the config update request with the new admin certificate, that is in MSP/admincerts folder, we have error signature set did not satisfy policy  If we use the old (expired) certificate, we got this error:  Cannot run peer because error when setting up MSP of type bccsp from directory xxx: signing identit y expired Xh38m10.528815371s ago  We are using the scripts provided in fabric documentation for config update.  ></body> </Action>
<Action id="62564" issue="41526" author="yacovm" type="comment" created="2019-08-02 23:59:08.0" updateauthor="yacovm" updated="2019-08-02 23:59:08.0"> <body><! CDATA {quote}Cannot run peer because error when setting up MSP of type bccsp from directory xxx: signing identity expired Xh38m10.528815371s ago{quote}  This error is an error from peer CLI.... don't use it with expired certs, just use an SDK or something.  I pushed a change set that adds a flag to disable the expiration check: https://gerrit.hyperledger.org/r/#/c/fabric/+/32695/  ></body> </Action>
<Action id="62688" issue="41526" author="denyeart" type="comment" body=" ~yacovm  I added FixVersion of v2.0.0. What are your thoughts on a backport to release-1.4?" created="2019-08-07 15:49:14.0" updateauthor="denyeart" updated="2019-08-07 15:49:14.0"/>
<Action id="62691" issue="41526" author="yacovm" type="comment" body="I can&apos;t without also dragging  https://gerrit.hyperledger.org/r/#/c/fabric/+/32693/  with it" created="2019-08-07 16:21:43.0" updateauthor="yacovm" updated="2019-08-07 16:21:43.0"/>
<Action id="62692" issue="41526" author="denyeart" type="comment" body=" ~yacovm  What are your thoughts on backporting  https://gerrit.hyperledger.org/r/#/c/fabric/+/32693/  to release-1.4?  :)" created="2019-08-07 16:42:09.0" updateauthor="denyeart" updated="2019-08-07 16:42:09.0"/>
<Action id="62703" issue="41526" author="yacovm" type="comment" created="2019-08-07 19:58:24.0" updateauthor="yacovm" updated="2019-08-07 19:58:24.0"> <body><! CDATA Had to take FAB-15532 as well which is an enhancement for the integration test framework.  FAB-15700 's backport is  https://gerrit.hyperledger.org/r/#/c/fabric/+/32768/   FAB-16141 's backport is  https://gerrit.hyperledger.org/r/#/c/fabric/+/32773/       I'll let  ~jyellick  decide if it's worth to merge them, but my personal opinion is that I'm sure that there will be at least one poor soul who will lock himself/herself out of its Fabric installation, and is using *1.4.x*  which is LTS, so it might be worth it.     Note, that I had to re-do FAB-16141 all over again and didn't cherry pick it, because the v2.0 code keeps drifting away from the good old 1.4.x codebase.      ></body> </Action>
<Action id="66279" issue="41526" author="mplisov" type="comment" created="2019-12-16 20:40:20.0" updateauthor="mplisov" updated="2019-12-16 20:40:20.0"> <body><! CDATA  ~yacovm  What is the decision on backporting  this feature to 1.4.x?   If I understand correctly there is no chance to get out of such lockout without fix to orderer code, right?  ></body> </Action>
<Action id="66280" issue="41526" author="yacovm" type="comment" body="I backported it, look in the  integration test|https://github.com/hyperledger/fabric/blob/release-1.4/integration/e2e/cft_test.go#L471-L598  if you want to test it yourself. " created="2019-12-16 20:49:12.0" updateauthor="yacovm" updated="2019-12-16 20:49:12.0"/>
