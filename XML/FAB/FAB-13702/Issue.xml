<Issue id="36803" key="FAB-13702" number="13702" project="10002" reporter="scottz" assignee="bharadwajambati1" creator="scottz" type="10101" summary="Onboard an OSN dynamically (no crashes of other OSNs), starting with channel orderers as subset of all orderers in systemchannel" priority="3" resolution="10000" status="6" created="2019-01-16 00:05:58.0" updated="2020-04-07 13:21:51.0" resolutiondate="2019-07-23 20:59:57.0" votes="0" watches="5" workflowId="48368"> <description><! CDATA An admin decides to increase the number of OSNs servicing an application channel, using an OSN that is already part of the consenter set of the system channel. h2. Setup # Define a fabric network with: ## etcd/raft with 4 OSNs (all under the same orderer organization) ## minimum 1 peer in 1 org # Configure the network with OSNs O1, O2, O3, O4 in the {{orderersystemchannel}} consenter set. # Bring up O1, O2, O3, and O4. # Create application channel {{channel1}} with OSNs O1-O3 (no O4!) in its consenter set, and proceed through the rest of the setup as in FAB-13601.  h2. Inputs # Start traffic, generating 100K transactions. Batchsize may be any value. # *Verify* O4 does not obtain any blocks in {{channel1}}, and we see no logs in O4 about {{channel1}}. # After traffic running for a few minutes, while it is still running, onboard O4 dynamically to channel1: ## Edit the {{channel1}} configuration to add O4. ## Sign and submit the channel update transaction to O1. ## Watch O4 blockheight grow as it retrieves blocks from another orderer. ## And after it catches up it should continue to grow while the new blocks arrive.  h2. Expectations # Verify all 100K blocks in {{channel1}} are retrieved by O4. # Observe the rate, how long it takes to catch up. # All nodes remain in service throughout the test. # No errors in the logs of peers and orderers. # No failures or errors reported by PTE.  h2. More variations for consideration  Which of these are worthwhile? # Stop O1 or O2 or O3 and restart them while the new OSN is onboarding and collecting blocks for the {{channel1}} from them. (Wait to do this until after the basic orderer restarts tests pass, e.g. FAB-13604) # Onboard another OSN with traffic running on channel1. # Onboard two new OSNs at once.  ></description> </Issue>
