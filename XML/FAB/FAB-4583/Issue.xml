<Issue id="17789" key="FAB-4583" number="4583" project="10002" reporter="nishi" creator="nishi" type="10001" summary="ERRO 00a Principal deserialization failed when sending invoke tx immediately after a join-channel" priority="4" resolution="10000" status="6" created="2017-06-12 19:58:27.0" updated="2018-07-20 18:56:21.0" resolutiondate="2017-06-19 19:44:22.0" votes="0" watches="2" workflowId="38977" security="10001"> <description><! CDATA On fabric commit level *961ccabe9258d5939c3c3fb3751e0eac515539f8**  using fabric-sdk-node e2e tests from *91bac30fec921775e21bf7f59de4d162f2462341*  When I send a invoke tx immediately after a join-channel, tx fails on node client and from orderer logs {code:java} 2017-06-12 17:54:57.749 UTC  cauthdsl  func2 -> ERRO 00a Principal deserialization failed: (The supplied identity is not valid, Verify() returned x509: certificate has expired or is not yet valid) for identity  10 7 79 114 103 50 77 83 80 18 221 5 45 45 45 45 45 66 69 71 73 78 32 67 69 82 84 73 70 73 67 65 84 69 45 45 45 45 45 10 77 73 73 66 56 68 67 67 65 90 101 103 65 119 73 66 65 103 73 85 66 105 72 65 79 113 110 55 49 73 80 76 54 76 84 86 85 73 118 77 82 55 110 98 49 90 89 119 67 103 89 73 75 111 90 73 122 106 48 69 65 119 73 119 10 99 122 69 76 77 65 107 71 65 49 85 69 66 104 77 67 86 86 77 120 69 122 65 82 66 103 78 86 66 65 103 84 67 107 78 104 98 71 108 109 98 51 74 117 97 87 69 120 70 106 65 85 66 103 78 86 66 65 99 84 68 86 78 104 10 98 105 66 71 99 109 70 117 89 50 108 122 89 50 56 120 71 84 65 88 66 103 78 86 66 65 111 84 69 71 57 121 90 122 73 117 90 88 104 104 98 88 66 115 90 83 53 106 98 50 48 120 72 68 65 97 66 103 78 86 66 65 77 84 10 69 50 78 104 76 109 57 121 90 122 73 117 90 88 104 104 98 88 66 115 90 83 53 106 98 50 48 119 72 104 99 78 77 84 99 119 78 106 69 121 77 84 99 49 77 68 65 119 87 104 99 78 77 84 103 119 78 84 69 121 77 68 69 49 10 77 68 65 119 87 106 65 81 77 81 52 119 68 65 89 68 86 81 81 68 69 119 86 104 90 71 49 112 98 106 66 90 77 66 77 71 66 121 113 71 83 77 52 57 65 103 69 71 67 67 113 71 83 77 52 57 65 119 69 72 65 48 73 65 10 66 69 66 65 85 79 71 69 106 66 78 83 77 79 49 52 77 110 72 56 47 54 50 73 74 121 105 83 106 70 110 73 99 49 51 82 82 71 108 100 97 43 52 84 77 100 82 70 121 117 109 67 119 74 119 119 82 65 54 49 105 112 80 120 10 68 52 55 113 87 43 122 83 119 121 109 110 119 116 66 69 103 121 43 88 113 72 67 106 98 68 66 113 77 65 52 71 65 49 85 100 68 119 69 66 47 119 81 69 65 119 73 67 66 68 65 77 66 103 78 86 72 82 77 66 65 102 56 69 10 65 106 65 65 77 66 48 71 65 49 85 100 68 103 81 87 66 66 84 79 66 111 72 71 51 65 88 43 48 76 121 99 112 83 90 81 118 74 113 57 49 50 73 102 54 122 65 114 66 103 78 86 72 83 77 69 74 68 65 105 103 67 68 110 10 55 117 77 99 80 80 120 51 87 47 115 90 84 119 66 90 77 121 116 120 101 79 80 108 67 114 51 107 106 89 90 102 117 68 83 117 112 100 88 114 74 84 65 75 66 103 103 113 104 107 106 79 80 81 81 68 65 103 78 72 65 68 66 69 10 65 105 66 97 68 80 49 78 67 116 84 75 69 113 113 74 72 76 79 86 72 88 76 117 70 110 53 54 47 88 97 85 97 86 98 104 81 43 117 43 112 77 88 87 86 81 73 103 90 86 110 56 78 75 90 54 113 100 68 66 57 87 101 76 10 78 116 70 104 117 103 69 68 98 81 57 70 115 80 48 86 89 48 80 70 78 75 69 88 101 80 103 61 10 45 45 45 45 45 69 78 68 32 67 69 82 84 73 70 73 67 65 84 69 45 45 45 45 45 10 {code} Â   Eventually tx commits successfully after few trials.  In my env I had to wait for around 3-3.5 minutes to be able to send tx successfully.  Figured out that this could happen when client time is ahead of server. I had my orderer container and node client running inside vagrant with only 2-3 seconds apart on time.  Can we log a better or more readable message to end user that why there was an invalid certificate (as in my case starting time for cert might have been met until few minutes on client elapsed)  ></description> </Issue>
