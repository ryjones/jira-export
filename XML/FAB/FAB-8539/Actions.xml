<Action id="40811" issue="28030" author="parivesh.kurmi" type="comment" created="2018-02-26 14:35:33.0" updateauthor="parivesh.kurmi" updated="2018-02-26 14:35:33.0"> <body><! CDATA I have attached the Screenshot for the issue i am getting on running ./byfn -m generate.  Please look into it.  ></body> </Action>
<Action id="40812" issue="28030" author="parivesh.kurmi" type="comment" body="Just for the information i am using Docker Toolbox on windows." created="2018-02-26 14:44:39.0" updateauthor="parivesh.kurmi" updated="2018-02-26 14:44:39.0"/>
<Action id="40815" issue="28030" author="rohitadivi" type="comment" created="2018-02-26 14:58:17.0" updateauthor="rohitadivi" updated="2018-02-26 14:58:50.0"> <body><! CDATA Hi Parivesh, Could you share your *orderer logs* and the log message for *./byfn -m generate* with me ? you can dm me on rocket chat or you can share them here.  My rocket chat id is rohitadivi    ></body> </Action>
<Action id="40821" issue="28030" author="parivesh.kurmi" type="comment" created="2018-02-26 15:19:03.0" updateauthor="parivesh.kurmi" updated="2018-02-26 15:19:24.0"> <body><! CDATA Hi Rohit ,  I am very new to this. not sure how to get orderer logs seperatley . The error message i am getting i have already attached in issue.JPG  ></body> </Action>
<Action id="40823" issue="28030" author="parivesh.kurmi" type="comment" body="okk i got it wait just sending you the screenshot for that" created="2018-02-26 15:20:33.0" updateauthor="parivesh.kurmi" updated="2018-02-26 15:20:33.0"/>
<Action id="40825" issue="28030" author="parivesh.kurmi" type="comment" body="I have attached the logs forÂ *./byfn -m generate. (generate.JPG)*" created="2018-02-26 15:22:37.0" updateauthor="parivesh.kurmi" updated="2018-02-26 15:22:50.0"/>
<Action id="40828" issue="28030" author="rohitadivi" type="comment" created="2018-02-26 15:34:09.0" updateauthor="rohitadivi" updated="2018-02-26 15:34:09.0"> <body><! CDATA Thanks for sharing the logs of ./byfn -m generate could you also share the orderer logs? You can use the command below to write the orderer logs to a text file and attach it here {code} docker logs orderer.example.com >& orderer_logs.txt {code}  ></body> </Action>
<Action id="40829" issue="28030" author="parivesh.kurmi" type="comment" body="I have attached the logs." created="2018-02-26 15:41:58.0" updateauthor="parivesh.kurmi" updated="2018-02-26 15:41:58.0"/>
<Action id="40836" issue="28030" author="rohitadivi" type="comment" created="2018-02-26 16:07:20.0" updateauthor="rohitadivi" updated="2018-02-26 16:07:20.0"> <body><! CDATA Thanks for the logs  I could see orderer crashed from the logs   here is the gist of logs {code} 35m2018-02-26 14:24:49.760 UTC  orderer/multichain  newLedgerResources -> CRIT 066 0m Error creating configtx manager and handlers: Error deserializing key Capabilities for group /Channel: Unexpected key Capabilities panic: Error creating configtx manager and handlers: Error deserializing key Capabilities for group /Channel: Unexpected key Capabilities  goroutine 1  running : panic(0xb31bc0, 0xc420336eb0) 	/opt/go/src/runtime/panic.go:500 +0x1a1 github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc4201b45d0, 0xc71091, 0x30, 0xc420336df0, 0x1, 0x1) 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x127 github.com/hyperledger/fabric/orderer/multichain.(*multiLedger).newLedgerResources(0xc4203029b0, 0xc420335320, 0xc420335320) 	/opt/gopath/src/github.com/hyperledger/fabric/orderer/multichain/manager.go:164 +0x393 github.com/hyperledger/fabric/orderer/multichain.NewManagerImpl(0x122a2a0, 0xc4201d8260, 0xc420334e40, 0x1226ea0, 0x126ee88, 0x0, 0x0) 	/opt/gopath/src/github.com/hyperledger/fabric/orderer/multichain/manager.go:114 +0x23b main.initializeMultiChainManager(0xc4201b0d80, 0x1226ea0, 0x126ee88, 0xc420185d70, 0x1) 	/opt/gopath/src/github.com/hyperledger/fabric/orderer/main.go:219 +0x27a main.main() 	/opt/gopath/src/github.com/hyperledger/fabric/orderer/main.go:75 +0x392 {code}  This indicates that you are using capabilities feature on fabric 1.0.x images. I did further investigation and reproduced the same error on my machine using fabric 1.0.6 images on the master branch.  Please confirm whether you're using fabric 1.0.x images.  ></body> </Action>
<Action id="40838" issue="28030" author="rohitadivi" type="comment" created="2018-02-26 16:12:07.0" updateauthor="rohitadivi" updated="2018-02-26 16:12:07.0"> <body><! CDATA Also if you want to continue using fabric 1.0.x images, please switch to release branch on fabric samples repo.  If you want to use fabric 1.1.0 alpha images then please follow the instruction mentioned in the  getting stated page|http://hyperledger-fabric.readthedocs.io/en/latest/samples.html#hyperledger-fabric-samples   {code} git clone -b master https://github.com/hyperledger/fabric-samples.git cd fabric-samples git checkout v1.1.0-alpha cd fabric-samples curl -sSL https://goo.gl/6wtTN5 | bash -s 1.1.0-alpha echo y | ./byfn.sh up {code}  ></body> </Action>
<Action id="40850" issue="28030" author="rohitadivi" type="comment" body="To prevent other users from running into similar problem it would be good to update the script to run with a specific version of the images and throw out an error if there is a mismatch between the version of the script and version of the images. This means the script should be looking for a specific image tag like v1.1.0 alpha rather than the images with latest tag.  ~scottz   ~bmos299   ~nileshdeotale   ~denyeart   ~Ratnakar " created="2018-02-26 17:27:01.0" updateauthor="rohitadivi" updated="2018-02-26 17:27:01.0"/>
<Action id="40886" issue="28030" author="parivesh.kurmi" type="comment" created="2018-02-27 00:45:31.0" updateauthor="parivesh.kurmi" updated="2018-02-27 00:45:31.0"> <body><! CDATA  ~rohitadivi  : Thanks for the quick reply.Â   I have few Queries:  As curl command was not working so i have downloaded theÂ hyperledger-fabric-windows-amd64-1.1.0-alpha/bin/(all images) manually. Will that work with what you are suggesting?Â   I have downloaded the images from below link:   https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/hyperledger-fabric/windows-amd64-1.1.0-alpha/hyperledger-fabric-windows-amd64-1.1.0-alpha.tar.gz|https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/hyperledger-fabric/windows-amd64-1.1.0-alpha/hyperledger-fabric-windows-amd64-1.1.0-alpha.tar.gz.   Please suggest if this is not the right one which one i have to download? git clone -b master https://github.com/hyperledger/fabric-samples.gitcd fabric-samples git checkout v1.1.0-alpha cd fabric-samples Â hyperledger-fabric-windows-amd64-1.1.0-alpha/bin/(all images) // curl command not working echo y | ./byfn.sh up  ></body> </Action>
<Action id="40891" issue="28030" author="ratnakar" type="comment" created="2018-02-27 01:42:23.0" updateauthor="ratnakar" updated="2018-02-27 01:42:23.0"> <body><! CDATA  ~parivesh.kurmi   As  ~rohitadivi  addressed in earlier comments, Orderer logs indicates thatÂ you are running the network with *Fabric version*Â *1.0.0* {code:java} 2018-02-26 14:24:48.189 UTC  orderer/main  main -> INFO 001 0m Starting orderer: Version: 1.0.0 Go version: go1.7.5 OS/Arch: linux/amd64 2018-02-26 14:24:48.196 UTC  orderer/main  initializeSecureServerConfig -> INFO 002 0m Starting orderer with TLS enabled{code} what error do you see when execute curl commandÂ  on windows machine ? Did you used Gitbash or any other tools?  If you still see the problem an alternative way is to download this  bootstrap.sh|https://raw.githubusercontent.com/hyperledger/fabric/master/scripts/bootstrap.sh  script . add executable permission and run the script with tag from Gitbash {code:java} ./bootstrap.sh 1.1.0-alpha {code}  ></body> </Action>
<Action id="40904" issue="28030" author="jyellick" type="comment" created="2018-02-27 04:39:07.0" updateauthor="jyellick" updated="2018-02-27 04:39:07.0"> <body><! CDATA I've put together a CR which adds some basic version checking into byfn.   https://gerrit.hyperledger.org/r/c/18455/    ~rohitadivi do you think this satisfies this bug, or did you have something else in mind?  ></body> </Action>
<Action id="40932" issue="28030" author="rohitadivi" type="comment" body=" ~jyellick  This is what I had in my mind, I am currently checking this fix on various image versions and binaries. I will update my comments on the CR once am done testing." created="2018-02-27 15:02:18.0" updateauthor="rohitadivi" updated="2018-02-27 15:02:18.0"/>
<Action id="40940" issue="28030" author="rohitadivi" type="comment" created="2018-02-27 16:49:00.0" updateauthor="rohitadivi" updated="2018-02-27 16:49:00.0"> <body><! CDATA The CR works well with all the test cases. Below is the summary of the test cases I worked on:  Â  ||Case||Fabric binaries||Fabric images||Result||Comments|| |1|1.0.6|1.0.6|Fails as expected|Configtxgen is at older version| |2|1.1.0-beta-snapshot|1.0.6|Fails as expected|Due to version mismatch| |3|1.1.0-alpha|1.1.0-alpha|Fails as expected|1.1.0 alpha version is not supported| |4|1.1.0-beta-snapshot|1.1.0-alpha|Fails as expected|Due to version mismatch| |5|1.1.0-alpha|1.1.0-beta-snapshot|Fails as expected|Due to version mismatch| |6|1.1.0-beta-snapshot|1.1.0-beta-snapshot|*Passed* successfully|Supported version|  ></body> </Action>
<Action id="41064" issue="28030" author="davidkhala" type="comment" created="2018-03-01 07:37:58.0" updateauthor="davidkhala" updated="2018-03-01 07:37:58.0"> <body><! CDATA I saw similar error when I tried to test node-sdk locally  `$ gulp test`  `$ docker logs orderer.example.com`  Â 2018-03-01 07:31:29.616 UTC  orderer/multichain  newLedgerResources -> CRIT 068 Error creating configtx manager and handlers: Error deserializing key Capabilities for group /Channel: Unexpected key Capabilities panic: Error creating configtx manager and handlers: Error deserializing key Capabilities for group /Channel: Unexpected key Capabilities  goroutine 1  running : panic(0xb44a80, 0xc4204070f0) 	/opt/go/src/runtime/panic.go:500 +0x1a1 github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc420209f50, 0xc860ec, 0x30, 0xc420407030, 0x1, 0x1) 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x127 github.com/hyperledger/fabric/orderer/multichain.(*multiLedger).newLedgerResources(0xc4203f6640, 0xc4203d7350, 0xc4203d7350) 	/opt/gopath/src/github.com/hyperledger/fabric/orderer/multichain/manager.go:153 +0x393 github.com/hyperledger/fabric/orderer/multichain.NewManagerImpl(0x1246880, 0xc42040c120, 0xc4203d6e70, 0x1243480, 0x128b4a8, 0x0, 0x0) 	/opt/gopath/src/github.com/hyperledger/fabric/orderer/multichain/manager.go:103 +0x23b main.initializeMultiChainManager(0xc420257440, 0x1243480, 0x128b4a8, 0xc420288960, 0x1) 	/opt/gopath/src/github.com/hyperledger/fabric/orderer/main.go:220 +0x27a main.main() 	/opt/gopath/src/github.com/hyperledger/fabric/orderer/main.go:75 +0x392   ></body> </Action>
