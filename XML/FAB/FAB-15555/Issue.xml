<Issue id="40158" key="FAB-15555" number="15555" project="10002" reporter="sambhavdutt" creator="sambhavdutt" type="10004" summary="Behave - CouchDB Indexing tests(features 72,364) have failed due to chaincode in the NODE tests." priority="3" resolution="10203" status="6" created="2019-05-25 14:25:16.0" updated="2019-07-30 04:09:32.0" resolutiondate="2019-07-30 04:09:32.0" votes="0" watches="3" workflowId="53060"> <description><! CDATA The CouchDB indexing tests in using marbles chaincode have failed in NODE in the following scenarios. The tests took around 10 hours which is 3 hours more than the usual build time for the Behave feature tests to complete all scenarios.  CouchDB_index.feature:72  FAB-7255: Test CouchDB indexing using marbles chaincode using NODE with 3 channels and 1 index with 3 selectors -- @1.2   CouchDB_index.feature:364  FAB-7260, FAB-7261: Test CouchDB indexing using install-after-instantiate with marbles chaincode using NODE with 3 channels and 1 index -- @1.2   *Branch:* master *Platform:* x86_64 Error Snippet: *FAB-7255* {code:java} Error: could not assemble transaction, err proposal response was not successful, error code 500, msg error starting container: error starting container: docker build failed: Error returned from build: 1 "npm WARN deprecated @types/winston@2.4.4: This is a stub types definition. winston provides its own type definitions, so you do not need this installed. npm ERR! Unexpected end of JSON input while parsing near '...0Mxa3H5DC+03sI/QLLSJJ' {code}  *FAB-7260* {code:java} Error occurred  u'docker exec peer0.org1.example.com sh -c "CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/c7899c3c7dc211e9a253fa163e6336f2/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode instantiate --name mycc2 --version 0 --lang NODE --channelID mychannel2 --ctor \'{\\"Args\\":  \\"\\" }\' --orderer orderer0.example.com:7050 "' : 2019-05-24 01:31:40.737 UTC  chaincodeCmd  checkChaincodeCmdParams -> INFO 001 Using default escc 2019-05-24 01:31:40.738 UTC  chaincodeCmd  checkChaincodeCmdParams -> INFO 002 Using default vscc Error: could not assemble transaction, err proposal response was not successful, error code 500, msg error starting container: error starting container: docker build failed: Error returned from build: 1 "npm WARN deprecated @types/winston@2.4.4: This is a stub types definition. winston provides its own type definitions, so you do not need this installed. npm ERR! Unexpected end of JSON input while parsing near '...0Mxa3H5DC+03sI/QLLSJJ'  npm ERR! A complete log of this run can be found in: npm ERR!     /root/.npm/_logs/2019-05-24T01_31_52_601Z-debug.log "   sh -c "CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/c7899c3c7dc211e9a253fa163e6336f2/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode instantiate --name mycc2 --version 0 --lang NODE --channelID mychannel2 --ctor '{\"Args\":  \"\" }' --orderer orderer0.example.com:7050 " : {'peer0.org1.example.com': 'Error occurred  u\'docker exec peer0.org1.example.com sh -c "CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/c7899c3c7dc211e9a253fa163e6336f2/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode instantiate --name mycc2 --version 0 --lang NODE --channelID mychannel2 --ctor \\\'{\\\\"Args\\\\":  \\\\"\\\\" }\\\' --orderer orderer0.example.com:7050 "\' : \x1b 34m2019-05-24 01:31:40.737 UTC  chaincodeCmd  checkChaincodeCmdParams -> INFO 001\x1b 0m Using default escc\n\x1b 34m2019-05-24 01:31:40.738 UTC  chaincodeCmd  checkChaincodeCmdParams -> INFO 002\x1b 0m Using default vscc\nError: could not assemble transaction, err proposal response was not successful, error code 500, msg error starting container: error starting container: docker build failed: Error returned from build: 1 "npm WARN deprecated @types/winston@2.4.4: This is a stub types definition. winston provides its own type definitions, so you do not need this installed.\nnpm ERR! Unexpected end of JSON input while parsing near \'...0Mxa3H5DC+03sI/QLLSJJ\'\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /root/.npm/_logs/2019-05-24T01_31_52_601Z-debug.log\n"\n'} {code}  *FAB-7261*  {code:java} Assertion Failed: Expected response was "owner":"jose"; received Error occurred  u'docker exec peer1.org1.example.com sh -c "CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/d675cd367dce11e9a253fa163e6336f2/peerOrganizations/org1.example.com/users/User1@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer1.org1.example.com CORE_PEER_ADDRESS=peer1.org1.example.com:7051 peer chaincode query --name mycc3 --ctor \'{\\"Args\\":  \\"queryMarbles\\", \\"{\\\\\\"selector\\\\\\":{\\\\\\"docType\\\\\\":\\\\\\"marble\\\\\\",\\\\\\"owner\\\\\\":\\\\\\"jose\\\\\\", \\\\\\"color\\\\\\":\\\\\\"red\\\\\\"}, \\\\\\"use_index\\\\\\": \\\\\\"_design/indexdoc_behave_test\\\\\\", \\\\\\"index_behave_test\\\\\\" }\\" }\' --channelID mychannel3 "' : Error: endorsement failure during query. response: status:500 message:"failed to execute transaction 1b47678c5c25a7d49dedb71ddc1cefe84dff6b15ec7f6d463087f029ba9ddee4:  channel mychannel3  could not launch chaincode mycc3:0: error starting container: error starting container: docker build failed: Error returned from build: 1 \"npm WARN deprecated @types/winston@2.4.4: This is a stub types definition. winston provides its own type definitions, so you do not need this installed.\nnpm ERR! Unexpected end of JSON input while parsing near '...ity\":\"sha512-WXvAXakn'\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /root/.npm/_logs/2019-05-24T03_03_03_210Z-debug.log\n\""  {code}  *Build Logs*  https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-master-x86_64/259/testReport/junit/CouchDB_index/Testing%20Fabric%20CouchDB%20indexing/FAB_7255__Test_CouchDB_indexing_using_marbles_chaincode_using_NODE_with_3_channels_and_1_index_with_3_selectors_____1_2_/  https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-master-x86_64/259/testReport/junit/CouchDB_index/Testing%20Fabric%20CouchDB%20indexing/FAB_7260__FAB_7261__Test_CouchDB_indexing_using_install_after_instantiate_with_marbles_chaincode_using_NODE_with_3_channels_and_1_index_____1_2_/  ></description> </Issue>
