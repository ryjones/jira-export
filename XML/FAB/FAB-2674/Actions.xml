<Action id="21345" issue="15241" author="binhn" type="comment" created="2017-03-06 22:58:50.0" updateauthor="binhn" updated="2017-03-06 22:58:50.0"> <body><! CDATA Not sure if this is the source of the problem, but I noticed the py version from the log is back docker-py version: 1.10.3 CPython version: 2.7.9  Our vagrant uses  vagrant@hyperledger-devenv:v0.3.0-2bc9d96:/opt/gopath/src/github.com/hyperledger/fabric$ python --version Python 2.7.12  I recommend to upgrade to 2.7.12 and try again  ></body> </Action>
<Action id="21346" issue="15241" author="latitiah" type="comment" created="2017-03-06 23:22:47.0" updateauthor="latitiah" updated="2017-03-07 17:37:24.0"> <body><! CDATA I am getting a failure as well, albeit, the error occurs at a later point.  I am using python ver 2.7.12. I am running these tests in vagrant. The following are the versions of the key packages that I am using (there's more but this is a subset of the ones that were recently added): b3j0f.aop (0.8.4) b3j0f.utils (1.4.4) behave (1.2.5) crypto (1.4.1) cryptography (1.7.1) docker (2.0.2) docker-compose (1.10.0) docker-pycreds (0.2.1) dockerpty (0.4.1) ecdsa (0.13) grpcio (1.2.0.dev0) grpcio-tools (1.1.3) Jinja (1.2) Jinja2 (2.9.5) pyOpenSSL (16.2.0) pysha3 (1.0b1) python-slugify (1.2.1) PyYAML (3.10) slugify (0.0.1)  {code:none} And user "dev0Org0" sends proposal "instantiateProposal1" to endorsers with timeout of "30" seconds with proposal responses "instantiateProposalResponses"                                               # steps/endorser_impl.py:109 30.003s | Endorser | | peer0    | | peer2    | Traceback (most recent call last): File "/usr/local/lib/python2.7/dist-packages/behave/model.py", line 1456, in run match.run(runner.context) File "/usr/local/lib/python2.7/dist-packages/behave/model.py", line 1903, in run self.func(context, *args, **kwargs) File "steps/endorser_impl.py", line 122, in step_impl resultsDict =  dict(zip(endorsers,  respFuture.result() for respFuture in proposalResponseFutures )) File "/usr/local/lib/python2.7/dist-packages/grpc/_channel.py", line 299, in result raise self _Rendezvous: <_Rendezvous of RPC that terminated with (StatusCode.DEADLINE_EXCEEDED, Deadline Exceeded)> {code}   ></body> </Action>
<Action id="21352" issue="15241" author="rameshthoomu" type="comment" created="2017-03-07 03:59:49.0" updateauthor="rameshthoomu" updated="2017-03-07 03:59:49.0"> <body><! CDATA CI is using python 2.7.12  {code:java} + python --version Python 2.7.12 {code}  I also, tried to execute this test with virtualenv setup but unable to proceed further.  {code:java} virtualenv -p /usr/bin/python2.7 venv source venv/bin/activate {code}  below is the error  {code:java} Running virtualenv with interpreter /usr/bin/python2.7 + source venv/bin/activate ++ deactivate nondestructive ++ unset -f pydoc ++ ' ' -z '' ' ' ++ ' ' -z '' ' ' ++ ' ' -n /bin/bash ' ' ++ hash -r ++ ' ' -z '' ' ' ++ unset VIRTUAL_ENV ++ ' ' '!' nondestructive = nondestructive ' ' ++ VIRTUAL_ENV=/w/workspace/behave/gopath/src/github.com/hyperledger/fabric/venv ++ export VIRTUAL_ENV ++ _OLD_VIRTUAL_PATH='/opt/go/go1.7.linux.amd64/bin:/w/workspace/behave/gopath/bin:~/npm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games' ++ PATH='/w/workspace/behave/gopath/src/github.com/hyperledger/fabric/venv/bin:/opt/go/go1.7.linux.amd64/bin:/w/workspace/behave/gopath/bin:~/npm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games' ++ export PATH ++ ' ' -z '' ' ' ++ ' ' -z '' ' ' venv/bin/activate: line 57: PS1: unbound variable Build step 'Execute shell' marked build as failure  ssh-agent  Stopped. {code}    ></body> </Action>
<Action id="21357" issue="15241" author="latitiah" type="comment" created="2017-03-07 17:24:55.0" updateauthor="latitiah" updated="2017-03-07 17:24:55.0"> <body><! CDATA I have verified that I am receiving the same error whether executed in virtualenv or a VM. `_Rendezvous: <_Rendezvous of RPC that terminated with (StatusCode.DEADLINE_EXCEEDED, Deadline Exceeded)>`    ></body> </Action>
<Action id="21358" issue="15241" author="latitiah" type="comment" created="2017-03-07 17:32:23.0" updateauthor="latitiah" updated="2017-03-07 17:36:26.0"> <body><! CDATA The following were the steps that I executed in Ubuntu in order to successfully install and execute virtualenv. (above behave error still persists): {code:none} sudo pip install virtualenv virtualenv -p /usr/bin/python2.7 behave_venv export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python2.7 source behave_venv/bin/activate pip install behave pip install grpcio-tools pip install "pysha3==1.0b1" pip install b3j0f.aop pip install jinja2 pip install pyopenssl pip install ecdsa pip install python-slugify pip install pyyaml docker rm -f $(docker ps -aq) make clean make docker-clean make peer make orderer make docker cd bddtests/ behave -k -D cache-deployment-spec features/bootstrap.feature {code}   ></body> </Action>
<Action id="21361" issue="15241" author="rameshthoomu" type="comment" created="2017-03-07 22:17:26.0" updateauthor="rameshthoomu" updated="2017-03-07 22:17:26.0"> <body><! CDATA Successfully created virtualenv in Jenkins CI after multiple attempts.. Below is configruation   {code:java} # Create virtual Environment to test behave tests virtualenv -p /usr/bin/python2.7 venv export PS1="test" export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python2.7 source venv/bin/activate # Install all required python modules pip install behave pip install grpcio-tools pip install "pysha3==1.0b1" pip install b3j0f.aop pip install jinja2 pip install pyopenssl pip install ecdsa pip install python-slugify pip install pyyaml # Build Peer and images make peer && make peer-docker && make orderer-docker docker images | grep hyperledger cd bddtests behave -k -D cache-deployment-spec #behave -k -D cache-deployment-spec features/bootstrap.feature {code} Below is the error log observed:   {code:java} # steps/bootstrap_impl.py:247 before_step: <steps.contexthelper.ContextHelper instance at 0x7f262d8c7440>  Assertion Failed: Expected 1 blocks, received 0 Captured stdout: Will copy gensisiBlock over at this point  Returning GRPC for address: 0.0.0.0:32768 dev0Org0 received reply: status: BAD_REQUEST , counter = 1 Done Start and end = 0/0  SeekInfo = start { specified { } } stop { specified { } } behavior: FAIL_IF_NOT_READY Got error: 404 Done receiving block {code}   https://jenkins.hyperledger.org/sandbox/job/fabric-verify-behave-x86_64/3/consoleText  ></body> </Action>
<Action id="21377" issue="15241" author="bmos299" type="comment" body="Latitia has determined it was due to the wait time on the instantiate.  She changed it from 30 to 90 seconds and the problem is corrected.  She has a PR submitted, https://gerrit.hyperledger.org/r/#/c/6979/. " created="2017-03-08 14:01:22.0" updateauthor="bmos299" updated="2017-03-08 14:01:22.0"/>
<Action id="21383" issue="15241" author="bmos299" type="comment" body="Assigning to Latitia since she has the CR pushed for this bug. " created="2017-03-08 15:03:29.0" updateauthor="bmos299" updated="2017-03-08 15:03:29.0"/>
