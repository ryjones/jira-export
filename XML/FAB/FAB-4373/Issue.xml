<Issue id="17502" key="FAB-4373" number="4373" project="10002" reporter="nishi" assignee="jyellick" creator="nishi" type="10004" summary="Default channel admin policy for orderering-system-channel can never evaulate to true" priority="2" resolution="10000" status="6" created="2017-06-05 16:37:04.0" updated="2018-07-20 14:13:08.0" resolutiondate="2017-06-15 16:51:25.0" votes="0" watches="2" workflowId="38823" security="10001"> <description><! CDATA commit level: *670be92475a50b06e7bcb3fca15a558438d88e4a**     Steps:  1. Update master to commit level mentioned above. make clean configtxlator configtxgen orderer peer configtxlator start  2. {{rm -Rf /var/hyperledger/production/orderer && ORDERER_GENERAL_LOGLEVEL=debug build/bin/orderer}}  3. run /examples/configtxupdate/reconfig/script.sh for sanity check. (check in logs for " channel: testchainid  About to write block, setting its LAST_CONFIG to 1") 4.  Follow steps in  https://github.com/hyperledger/fabric/tree/master/examples/configtxupdate   to update genesis config under section "Reconfiguration example"    https://github.com/jyellick/fabric-gerrit/tree/configtxlator/examples/configtxupdate  a) peer channel fetch config config_block.proto -o 127.0.0.1:7050 -c testchainid b)  3. In step "Edit the config, saving it as a new {{updated_config.json"}}   update  /Channel/Writers policy in the `updated_config.json` It should be set from: {code:java} "policy": \{  "policy": \{ "sub_policy": "Readers" }, "type": 3 }   {code} to: {code:java} "policy": \{ "policy": \{ "identities":   , "policy": \{ "n_out_of": \{ "n": 1, "policies":    } } }, "type": 1 }  {code} 5. Continue with commands  6. peer channel update -f config_update_as_envelope.proto -c testchainid -o 127.0.0.1:7050  7. cd orderer/sample_clients/broadcast_timestamp 8. go build 9. ./broadcast_timestamp -chainID testchainid  Expected Result:  10. to see in orderer logs tx failing to commit because of new policy  Actual Result:  Step 6 failed with {code:java} ubuntu@hyperledger-devenv:320efe9:/opt/gopath/src/github.com/hyperledger/fabric$ peer channel update -f config_update_as_envelope.proto -c testchainid -o 127.0.0.1:7050 2017-06-05 16:06:35.572 UTC  msp  getMspConfig -> INFO 001 intermediate certs folder not found at  /opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts . Skipping.:  stat /opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts: no such file or directory  2017-06-05 16:06:35.573 UTC  msp  getMspConfig -> INFO 002 crls folder not found at  /opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/intermediatecerts . Skipping.:  stat /opt/gopath/src/github.com/hyperledger/fabric/sampleconfig/msp/crls: no such file or directory  Error: Got unexpected status: BAD_REQUEST Usage: peer channel update  flags   {code}   Orderer Logs: {code:java} 2017-06-05 16:06:35.630 UTC  policies  GetPolicy -> DEBU 1f5 Returning policy Admins for evaluation 2017-06-05 16:06:35.630 UTC  orderer/common/broadcast  Handle -> WARN 1f6 Rejecting CONFIG_UPDATE because: Error authorizing update: Error validating DeltaSet: Policy for  Policy  /Channel/Writers not satisfied: Failed to reach implicit threshold of 2 sub-policies, required 1 remaining {code}    ></description> </Issue>
