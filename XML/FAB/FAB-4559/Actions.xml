<Action id="26019" issue="17762" author="muralisr" type="comment" created="2017-06-12 13:27:32.0" updateauthor="muralisr" updated="2017-06-12 13:27:32.0"> <body><! CDATA  ~jyellick  all errors should be handled with a disconnect in that code ? {code:java} case *orderer.DeliverResponse_Status: if t.Status == common.Status_SUCCESS {         logger.Warningf(" %s  ERROR! Received success for a seek that should never complete", b.chainID)         return } logger.Warningf(" %s  Got error %v", b.chainID, t) b.client.Disconnect() continue{code}  ></body> </Action>
<Action id="26020" issue="17762" author="gennadyl" type="comment" body="Seconded" created="2017-06-12 13:31:50.0" updateauthor="gennadyl" updated="2017-06-12 13:31:50.0"/>
<Action id="26022" issue="17762" author="muralisr" type="comment" body=" ~gennadyl  perhaps my question should have been to you and  ~C0rWin  .. what do you think ?" created="2017-06-12 14:41:44.0" updateauthor="muralisr" updated="2017-06-12 14:41:44.0"/>
<Action id="26030" issue="17762" author="jyellick" type="comment" body="I would say that&apos;s logically correct.  However, I would say {{SERVICE_UNAVAILABLE}} should be warning, {{BAD_REQUEST}} or {{FORBIDDEN}} should be critical, and especially in the case of those latter two, I&apos;m a bit concerned about the retry logic.  We should have the peer back off rather than spam for a channel it doesn&apos;t have access to as fast as it can." created="2017-06-12 15:03:44.0" updateauthor="jyellick" updated="2017-06-12 15:03:44.0"/>
<Action id="26124" issue="17762" author="gennadyl" type="comment" body="So far, I just made obvious change, suggested by Murali, with logging levels differentiation by types. Retry logic now ignores message type, uses only number of attempts and timeout, both reset after connection established." created="2017-06-13 08:53:39.0" updateauthor="gennadyl" updated="2017-06-13 08:53:39.0"/>
<Action id="26126" issue="17762" author="yacovm" type="comment" created="2017-06-13 09:40:45.0" updateauthor="yacovm" updated="2017-06-13 10:00:59.0"> <body><! CDATA I don't think that BAD_REQUEST or FORBIDDEN should be critical, this is only related to a single channel and not to all channels.  I'd say that ERROR is a more suitable level, don't you agree  ~jyellick  ?   Also - if we get FORBIDDEN  shouldn't we abort? it means the peer is evicted from the channel no?  ></body> </Action>
<Action id="26146" issue="17762" author="jyellick" type="comment" created="2017-06-13 14:04:22.0" updateauthor="jyellick" updated="2017-06-13 14:04:22.0"> <body><! CDATA > I'd say that ERROR is a more suitable level  I'm a bit torn between error and critical for those log messages.  The reason why I suggested critical, is because this breaks the end to end flow, and it's something the admin should definitely be aware of.  Of course, it could be argued that error is right for that level, but we output messages at an error level which are much less severe than this, so it is easy to get lost in the noise.  I see merits to both,and would leave it up to the implementor.  > Also - if we get FORBIDDEN shouldn't we abort? it means the peer is evicted from the channel no?  Usually, but what about the scenario where a peer is just added to the channel? If the peer attempts to connect to an orderer which has not yet received the updated config (this is admittedly a race, but a plausible one), then it will get back a FORBIDDEN.  In a few seconds most likely, the error will go away, so aborting forever would seem inappropriate in this case.  On the other hand, BAD_REQUEST seems unlikely to go away, unless there is a code bug in the orderer.  ></body> </Action>
<Action id="26169" issue="17762" author="gennadyl" type="comment" body="ChangeSet with fix ready for review: https://gerrit.hyperledger.org/r/#/c/10471/" created="2017-06-13 15:45:39.0" updateauthor="gennadyl" updated="2017-06-13 15:45:39.0"/>
