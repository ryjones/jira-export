<Action id="56261" issue="36877" author="christopherferris" type="comment" body="I get that getopt &gt; getopts but it is unclear to me what actual problem this is fixing. Yes, the script is now also called by CI and end users. What is the problem other than a preference for getopt?" created="2019-01-28 13:33:20.0" updateauthor="christopherferris" updated="2019-01-28 13:33:20.0"/>
<Action id="56275" issue="36877" author="tijohnson" type="comment" created="2019-01-28 17:33:15.0" updateauthor="tijohnson" updated="2019-01-28 17:33:15.0"> <body><! CDATA getopts (unlike getop) expects to find the flags on the command line first. But because you were sourcing the script (curl | bash -s) incorrectly (instead of curl xxx | bash -s -- ) you had to move the command line flags after the arguments. you got gotopts to  work but it was not very cooperative, which made the code pretty gnarly. I found a bug in the way the arguments were parsed. If I could have only allowed flags before the version arguments the code would have been much cleaner but people expected the flags after the arguments. It now allows them anywhere on the command line. I still believe the best solution was my first (using getopt and forcing OSX to upgrade their versions of getopt).  Small thing, when you update the version defaults (which seems to happen fairly often) you have to update in several places. Now you only have to update in one.  The big one (the reason I decided the script needed to fixed) was error handling. Bash is interactive scripting language and so default case to ignore the error status of command that it runs (you would not want a typo 'ls /tmpp' to cause your shell to exit. When you use it as a programming shell you need to change the default to exit upon error (-e). You can 'handle' errors and not exit if you chose. Another good flag to use it '-u'. I had to make one minor change to the script to handle an expected error where you want to continue.  I just run into a problem this AM: a function was made in a script last April. Last June someone accidentally remove the code for that function. It has been quietly failing for 7mo, which is totally unacceptable. The error message was there (line 3K out of 8K) the entire time.  In the end, it is your script you decide what to do with it. I fixed it knowing that was the case. Don't worry, you are not going to hurt my feelings.     ></body> </Action>
<Action id="56734" issue="36877" author="tijohnson" type="comment" body="I need to reach some kind of resolution on this. If I don&apos;t hear from anyone to the contrary in the next few days, I am going to close this ticket and abandon the Review Request." created="2019-02-06 22:36:15.0" updateauthor="tijohnson" updated="2019-02-06 22:36:15.0"/>
