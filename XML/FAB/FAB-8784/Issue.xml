<Issue id="28407" key="FAB-8784" number="8784" project="10002" reporter="vijayendrabvs" creator="vijayendrabvs" type="10004" summary="Panic in BYFN bringup" environment="Ubuntu 16.04." priority="3" resolution="10203" status="6" created="2018-03-12 01:28:51.0" updated="2018-12-01 11:32:09.0" resolutiondate="2018-12-01 11:32:09.0" votes="0" watches="3" workflowId="43054"> <description><! CDATA When running byfn.sh -m up, I'm seeing this panic (this is on Ubuntu 16.04) -  Â   ```  2018-03-12 01:13:07.546 UTC  msp  GetLocalMSP -> DEBU 00c Returning existing local MSP  112/1843  2018-03-12 01:13:07.546 UTC  msp  GetDefaultSigningIdentity -> DEBU 00d Obtaining default signing identity 2018-03-12 01:13:07.546 UTC  msp/identity  Sign -> DEBU 00e Sign: plaintext: 0AD9060A1508021A0608A3A897D50522...7F6D75BC6B78BA22490E8316272B0D6F 2018-03-12 01:13:07.546 UTC  msp/identity  Sign -> DEBU 00f Sign: digest: E530B27446AF8FD063CB74962335A678F2D9358BD98BEFFF5DB2B16CB2EAB66B fatal error: unexpected signal during runtime execution  signal SIGSEGV: segmentation violation code=0x1 addr=0x63 pc=0x7fefc1e8e259   runtime stack: runtime.throw(0xf11319, 0x2a) /opt/go/src/runtime/panic.go:605 +0x95 runtime.sigpanic() /opt/go/src/runtime/signal_unix.go:351 +0x2b8  goroutine 16  syscall, locked to thread : runtime.cgocall(0xbf38d0, 0xc420032de8, 0xf0fae1) /opt/go/src/runtime/cgocall.go:132 +0xe4 fp=0xc420032da8 sp=0xc420032d68 pc=0x4023b4 net._C2func_getaddrinfo(0x7fefb80008c0, 0x0, 0xc4204b8f90, 0xc4201be150, 0x0, 0x0, 0x0) net/_obj/_cgo_gotypes.go:86 +0x5f fp=0xc420032de8 sp=0xc420032da8 pc=0x5f893f net.cgoLookupIPCNAME.func2(0x7fefb80008c0, 0x0, 0xc4204b8f90, 0xc4201be150, 0xc4201db5c0, 0x7ffdc438ba83, 0x13) /opt/go/src/net/cgo_unix.go:151 +0x13f fp=0xc420032e40 sp=0xc420032de8 pc=0x5ffedf net.cgoLookupIPCNAME(0x7ffdc438ba83, 0x13, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0) /opt/go/src/net/cgo_unix.go:151 +0x175 fp=0xc420032f38 sp=0xc420032e40 pc=0x5fa195 net.cgoIPLookup(0xc4201db740, 0x7ffdc438ba83, 0x13) /opt/go/src/net/cgo_unix.go:203 +0x4d fp=0xc420032fc8 sp=0xc420032f38 pc=0x5fa8dd runtime.goexit() /opt/go/src/runtime/asm_amd64.s:2337 +0x1 fp=0xc420032fd0 sp=0xc420032fc8 pc=0x45e391 created by net.cgoLookupIP /opt/go/src/net/cgo_unix.go:213 +0xaf  goroutine 1  select : github.com/hyperledger/fabric/vendor/google.golang.org/grpc.DialContext(0x7fefc2210d40, 0xc4201db500, 0x7ffdc438ba83, 0x18, 0xc420431820, 0x4, 0x4, 0x0, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:422 +0x532 github.com/hyperledger/fabric/core/comm.(*grpcClient).NewConnection(0xc4204be780, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0x0, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/core/comm/client.go:217 +0x389 github.com/hyperledger/fabric/peer/common.(*OrdererClient).Broadcast(0xc4204b8e10, 0x0, 0x0, 0xc420499b10, 0xbc3909) /opt/gopath/src/github.com/hyperledger/fabric/peer/common/ordererclient.go:50 +0x6c github.com/hyperledger/fabric/peer/common.GetBroadcastClient(0x380, 0xc42033a120, 0x112, 0x112) /opt/gopath/src/github.com/hyperledger/fabric/peer/common/broadcastclient.go:41 +0x3e github.com/hyperledger/fabric/peer/channel.InitCmdFactory.func1(0xc4201fc360, 0xc4204b89f0, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/peer/channel/channel.go:136 +0x29 github.com/hyperledger/fabric/peer/channel.sendCreateChainTransaction(0xc42035f630, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/peer/channel/create.go:164 +0xa7 github.com/hyperledger/fabric/peer/channel.executeCreate(0xc42035f630, 0xc42035f630, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/peer/channel/create.go:178 +0x2f github.com/hyperledger/fabric/peer/channel.create(0xc4202e46c0, 0xc420388780, 0x1, 0xa, 0x0, 0xd5b080, 0x16705c0) /opt/gopath/src/github.com/hyperledger/fabric/peer/channel/create.go:213 +0x40 github.com/hyperledger/fabric/peer/channel.createCmd.func1(0xc4202e46c0, 0xc420388780, 0x1, 0xa, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/peer/channel/create.go:59 +0x52 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc4202e46c0, 0xc420388640, 0xa, 0xa, 0xc4202e46c0, 0xc420388640) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x3e8 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x164d4e0, 0x11, 0xc420314390, 0x5) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x2fe github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x164d4e0, 0x7d, 0xc420014035) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x2b main.main() /opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:112 +0x5e1  goroutine 36  syscall : os/signal.signal_recv(0x0) /opt/go/src/runtime/sigqueue.go:131 +0xa6 os/signal.loop() /opt/go/src/os/signal/signal_unix.go:22 +0x22  created by os/signal.init.0 /opt/go/src/os/signal/signal_unix.go:28 +0x41  goroutine 8  IO wait : internal/poll.runtime_pollWait(0x7fefc2a89f70, 0x72, 0x0) /opt/go/src/runtime/netpoll.go:173 +0x57 internal/poll.(*pollDesc).wait(0xc42012fd98, 0x72, 0xffffffffffffff00, 0x165d680, 0x1654ba0) /opt/go/src/internal/poll/fd_poll_runtime.go:85 +0xae internal/poll.(*pollDesc).waitRead(0xc42012fd98, 0xc420288c00, 0x400, 0x400) /opt/go/src/internal/poll/fd_poll_runtime.go:90 +0x3d internal/poll.(*FD).Read(0xc42012fd80, 0xc420288c00, 0x400, 0x400, 0x0, 0x0, 0x0) /opt/go/src/internal/poll/fd_unix.go:126 +0x18a net.(*netFD).Read(0xc42012fd80, 0xc420288c00, 0x400, 0x400, 0xc42046a380, 0x0, 0x412436) /opt/go/src/net/fd_unix.go:202 +0x52 net.(*conn).Read(0xc420126518, 0xc420288c00, 0x400, 0x400, 0x0, 0x0, 0x0) /opt/go/src/net/net.go:176 +0x6d crypto/tls.(*block).readFromUntil(0xc42043ac90, 0x7fefc2210e00, 0xc420126518, 0x5, 0xc420126518, 0x0) /opt/go/src/crypto/tls/conn.go:488 +0x95 crypto/tls.(*Conn).readRecord(0xc420219500, 0xf35617, 0xc420219620, 0xc4204b0c48) /opt/go/src/crypto/tls/conn.go:590 +0xe0 crypto/tls.(*Conn).Read(0xc420219500, 0xc42045a000, 0x8000, 0x8000, 0x0, 0x0, 0x0) /opt/go/src/crypto/tls/conn.go:1134 +0x110 bufio.(*Reader).Read(0xc42044c600, 0xc4204a8038, 0x9, 0x9, 0x18, 0xe52c20, 0x0) /opt/go/src/bufio/bufio.go:213 +0x30b io.ReadAtLeast(0x1656c00, 0xc42044c600, 0xc4204a8038, 0x9, 0x9, 0x9, 0x0, 0x412436, 0xc4204b0da0) /opt/go/src/io/io.go:309 +0x86 io.ReadFull(0x1656c00, 0xc42044c600, 0xc4204a8038, 0x9, 0x9, 0xc4204a8028, 0x0, 0x4) /opt/go/src/io/io.go:327 +0x58 github.com/hyperledger/fabric/vendor/golang.org/x/net/http2.readFrameHeader(0xc4204a8038, 0x9, 0x9, 0x1656c00, 0xc42044c600, 0x0, 0x0, 0xc4204b8030, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/golang.org/x/net/http2/frame.go:237 +0x7b github.com/hyperledger/fabric/vendor/golang.org/x/net/http2.(*Framer).ReadFrame(0xc4204a8000, 0x165fd00, 0xc4204b8030, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/golang.org/x/net/http2/frame.go:492 +0xa4 github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.(*framer).readFrame(0xc4201ef560, 0xc4204b8030, 0xc4204b8030, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http_util.go:592 +0x2f github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.(*http2Client).reader(0xc42007e820) /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http2_client.go:1154 +0xc0 created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.newHTTP2Client /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http2_client.go:260 +0xbf8  goroutine 9  select : github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.(*http2Client).controller(0xc42007e820) /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http2_client.go:1227 +0x148 created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.newHTTP2Client /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http2_client.go:290 +0xd2e  goroutine 10  select : github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.(*http2Client).keepalive(0xc42007e820) /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http2_client.go:1276 +0x13c created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.newHTTP2Client /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http2_client.go:292 +0xdd2  goroutine 11  select : github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*addrConn).transportMonitor(0xc42028e380) /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:995 +0x1de created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*ClientConn).resetAddrConn /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:716 +0x67a  goroutine 13  select : github.com/hyperledger/fabric/vendor/google.golang.org/grpc.newClientStream.func3(0x166c200, 0xc42007e820, 0xc42028e1c0, 0xc4200ae9a0, 0xc42011a800) /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/stream.go:255 +0x1cd  created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.newClientStream /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/stream.go:254 +0xe23  goroutine 14  select : net.(*Resolver).LookupIPAddr(0x169d370, 0x1667b40, 0xc4201db5c0, 0x7ffdc438ba83, 0x13, 0x0, 0x0, 0x0, 0x0, 0x0) /opt/go/src/net/lookup.go:196 +0x52b net.(*Resolver).internetAddrList(0x169d370, 0x1667b40, 0xc4201db5c0, 0xee76f6, 0x3, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0x0, ...) /opt/go/src/net/ipsock.go:293 +0x644 net.(*Resolver).resolveAddrList(0x169d370, 0x1667b40, 0xc4201db5c0, 0xee7c00, 0x4, 0xee76f6, 0x3, 0x7ffdc438ba83, 0x18, 0x0, ...) /opt/go/src/net/dial.go:193 +0x594 net.(*Dialer).DialContext(0xc420485458, 0x1667b40, 0xc4201db5c0, 0xee76f6, 0x3, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0x0, ...) /opt/go/src/net/dial.go:375 +0x248 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.dialContext(0x1667b40, 0xc4201db5c0, 0xee76f6, 0x3, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0xc4201ac500, 0xc42012f380) /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/go17.go:38 +0xb3 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.DialContext.func1(0x7fefc2210d40, 0xc4201db5c0, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0x16571c0, 0xc420124ca0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:329 +0x86 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.newProxyDialer.func1(0x7fefc2210d40, 0xc4201db5c0, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/proxy.go:121 +0x137 github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.dial(0x7fefc2210d40, 0xc4201db5c0, 0xc420321930, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http2_client.go:119 +0x5a github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.newHTTP2Client(0x7fefc2210d40, 0xc4201db5c0, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0xeef571, 0xd, 0x0, 0x0, ...) /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/http2_client.go:157 +0xa7 github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport.NewClientTransport(0x7fefc2210d40, 0xc4201db5c0, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0xeef571, 0xd, 0x0, 0x0, ...) /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/transport/transport.go:505 +0xae github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*addrConn).resetTransport(0xc42028e700, 0xc4204b8e00, 0xc42028e720, 0xc4201e0528) /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:929 +0x4b4 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*ClientConn).resetAddrConn(0xc42028e000, 0x7ffdc438ba83, 0x18, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:702 +0x340 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.DialContext.func3(0xc4201db560, 0xc42028e000, 0x1669a40, 0xc4201be140, 0x7ffdc438ba83, 0x18) /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:417 +0x223 created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.DialContext /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:386 +0x441  goroutine 15  select : net.cgoLookupIP(0x1667b40, 0xc4201db5c0, 0x7ffdc438ba83, 0x13, 0xc4204ae480, 0x1656c00, 0xc42044c600, 0xc4204a8038, 0x9, 0x9) /opt/go/src/net/cgo_unix.go:214 +0x1b0 net.(*Resolver).lookupIP(0x169d370, 0x1667b40, 0xc4201db5c0, 0x7ffdc438ba83, 0x13, 0x1656c00, 0xc42044c600, 0x0, 0x0, 0x0) /opt/go/src/net/lookup_unix.go:95 +0x12d net.(*Resolver).(net.lookupIP)-fm(0x1667b40, 0xc4201db5c0, 0x7ffdc438ba83, 0x13, 0x3, 0xc4201e5b00, 0xc420060540, 0x0, 0xc420020000) /opt/go/src/net/lookup.go:187 +0x56 net.glob..func10(0x1667b40, 0xc4201db5c0, 0xc4203219d0, 0x7ffdc438ba83, 0x13, 0x42ad09, 0xc400000008, 0xc420060540, 0xc4204a8000, 0x8db329) /opt/go/src/net/hook.go:19 +0x52 net.(*Resolver).LookupIPAddr.func1(0x18, 0x0, 0x0, 0x1) /opt/go/src/net/lookup.go:193 +0x5c internal/singleflight.(*Group).doCall(0x169d360, 0xc4204bea00, 0x7ffdc438ba83, 0x13, 0xc4204b8f00) /opt/go/src/internal/singleflight/singleflight.go:93 +0x2e created by internal/singleflight.(*Group).DoChan /opt/go/src/internal/singleflight/singleflight.go:86 +0x31f !!!!!!!!!!!!!!! Channel creation failed !!!!!!!!!!!!!!!! ========= ERROR !!! FAILED to execute End-2-End Scenario ===========  ```  Â   Here is the docker image listing -  Â   ```  ===> List out hyperledger docker images hyperledger/fabric-ca latest 8a6c8c2e2ebf 10 days ago 283MB hyperledger/fabric-ca x86_64-1.1.0-rc1 8a6c8c2e2ebf 10 days ago 283MB hyperledger/fabric-tools latest 006c689ec08e 10 days ago 1.46GB hyperledger/fabric-tools x86_64-1.1.0-rc1 006c689ec08e 10 days ago 1.46GB hyperledger/fabric-orderer latest 10afc128d402 10 days ago 180MB hyperledger/fabric-orderer x86_64-1.1.0-rc1 10afc128d402 10 days ago 180MB hyperledger/fabric-peer latest 6b44b1d021cb 10 days ago 187MB hyperledger/fabric-peer x86_64-1.1.0-rc1 6b44b1d021cb 10 days ago 187MB hyperledger/fabric-javaenv latest ea263125afb1 10 days ago 1.52GB hyperledger/fabric-javaenv x86_64-1.1.0-rc1 ea263125afb1 10 days ago 1.52GB hyperledger/fabric-ccenv latest 65c951b9681f 10 days ago 1.39GB hyperledger/fabric-ccenv x86_64-1.1.0-rc1 65c951b9681f 10 days ago 1.39GB hyperledger/fabric-zookeeper latest 92cbb952b6f8 3 weeks ago 1.39GB hyperledger/fabric-zookeeper x86_64-0.4.6 92cbb952b6f8 3 weeks ago 1.39GB hyperledger/fabric-kafka latest 554c591b86a8 3 weeks ago 1.4GB hyperledger/fabric-kafka x86_64-0.4.6 554c591b86a8 3 weeks ago 1.4GB hyperledger/fabric-couchdb latest 7e73c828fc5b 3 weeks ago 1.56GB hyperledger/fabric-couchdb x86_64-0.4.6 7e73c828fc5b 3 weeks ago 1.56GB hyperledger/sawtooth-tp_xo_python 0.8 a0922deeaef6 3 months ago 176MB hyperledger/sawtooth-validator 0.8 9a5de658200c 3 months ago 180MB hyperledger/sawtooth-all 0.8 9743e987285f 3 months ago 193MB hyperledger/sawtooth-tp_settings 0.8 9fe41c26c4f2 3 months ago 172MB hyperledger/sawtooth-rest_api 0.8 ca6439f7b4cc 3 months ago 177MB hyperledger/sawtooth-tp_intkey_python 0.8 b9889db3ae41 3 months ago 172MB  ```  Â   ></description> </Issue>
