<Action id="45545" issue="30831" author="denyeart" type="comment" body=" ~hhasni42  Can you summarize what the problem was?  Are you working on a fix, or suggesting somebody make a fix?" created="2018-06-05 20:32:39.0" updateauthor="denyeart" updated="2018-06-05 20:33:44.0"/>
<Action id="45606" issue="30831" author="hhasni42" type="comment" created="2018-06-06 16:01:42.0" updateauthor="hhasni42" updated="2018-06-06 16:10:49.0"> <body><! CDATA  ~denyeart  The problem is that the path used "_*META-INF/statedb/couchdb/indexes*"_ do not match mine _"src/build-chaincode/*META-INF/statedb/couchdb/indexes*/indexTest.json"._     I made a fix for my own usage (attached in diff file) and it works like i expected it.  If it's something you think useful i can make a Pull Request, except if i didn't understand how it is supposed tu be use.  ></body> </Action>
<Action id="45704" issue="30831" author="denyeart" type="comment" body=" ~hhasni42  Are you suggesting this was a user error?  Or a Fabric defect that needs to be fixed?" created="2018-06-08 13:51:21.0" updateauthor="denyeart" updated="2018-06-08 13:51:21.0"/>
<Action id="45731" issue="30831" author="chris.elder" type="comment" created="2018-06-08 18:05:59.0" updateauthor="chris.elder" updated="2018-06-08 18:05:59.0"> <body><! CDATA  ~hhasni42  I a little unclear on how the chaincode in your scenario is deployed.   The assumption is that the chaincode (chaincode.go) is in the top level directory passed to the deployment command.   peer chaincode install -n mycc -v 1.0 -p github.com/chaincode/chaincode_example  chaincode.go would be in the directory chaincode_example.     META-INF/ would also appear in the chaincode_example directory as a peer to the chaincode.  How are you deploying the chaincode?  Through the CLI, or another method?        ></body> </Action>
<Action id="45734" issue="30831" author="chris.elder" type="comment" body="My assessment at this point is that this is working as designed." created="2018-06-08 18:54:08.0" updateauthor="chris.elder" updated="2018-06-08 18:54:08.0"/>
<Action id="46965" issue="30831" author="hhasni42" type="comment" created="2018-07-05 18:00:09.0" updateauthor="hhasni42" updated="2018-07-05 18:00:09.0"> <body><! CDATA  ~denyeart ,  ~chris.elder   To answer your question: I use the Java SDK with this configuration: {code:java} ... "chaincode_path": "../blockgocc-test/", "build_dir": "build-chaincode", ...{code}   here is the code for the sdk: {code:java} String buildDir = this.currentConfiguration.getChaincodeConfig().getBuildDir(); this.chaincodeID = ChaincodeID.newBuilder().setName(name).setVersion(version).setPath(buildDir).build(); ... InstallProposalRequest installProposalRequest = this.client.newInstallProposalRequest(); installProposalRequest.setChaincodeID(chaincodeID); installProposalRequest.setChaincodeSourceLocation(new File(this.currentConfiguration.getChaincodeConfig().getChaincodePath())); installProposalRequest.setChaincodeVersion(chaincodeID.getVersion());   {code} __________________________________________________________________________________________  So I tried you're recommandation:  I tried to set the chaincode_path variable to the root folder of my chaincode.go (and META-INF directory)    {code:java} "chaincode_path": "../blockgocc-test/src/build-chaincode", "build_dir": "",{code} Also modified some code in order to use this conf. {code:java}  if (buildDir != null && !buildDir.isEmpty()) this.chaincodeID = ChaincodeID.newBuilder().setName(name).setVersion(version).setPath(buildDir).build(); else this.chaincodeID = ChaincodeID.newBuilder().setName(name).setVersion(version).build();{code}  and i got this error:    {code:java} org.hyperledger.fabric.sdk.exception.ProposalException: java.lang.IllegalArgumentException: Missing chaincodePath in InstallRequest  {code}    So i Fixed it: {code:java} if (buildDir != null && !buildDir.isEmpty()) this.chaincodeID = ChaincodeID.newBuilder().setName(name).setVersion(version).setPath(buildDir).build(); else this.chaincodeID = ChaincodeID.newBuilder().setName(name).setVersion(version).setPath("./").build();{code} and i got a new error: {code:java} org.hyperledger.fabric.sdk.exception.ProposalException: java.lang.IllegalArgumentException: The project source directory does not exist: /Users/hhasni/.sources/github.ibm.com/block4j-common/../blockgocc-test/src/build-chaincode/src/.{code} a "src" is automatically concatenated at the end of my path...     - Do you know how to deploy this with the JAVA SDK without HLF patch such as the one I suggest?   - Actually i didn't think that i made something bad. Also i expect that if the chaincode can compile with my original configuration it mean that the index deployment should work with the same configuration...  ></body> </Action>
<Action id="47139" issue="30831" author="mffrench" type="comment" created="2018-07-10 10:21:15.0" updateauthor="mffrench" updated="2018-07-10 10:21:15.0"> <body><! CDATA Hi  ~chris.elder  and  ~denyeart ,   as chaincodes are compiling successfully, I also tend to think it should also deploy indexes successfully. Anyway do you have any documentation showing how to deploy chaincodes with meta-inf indexes successfully though HLF SDK (Java or NodeJS) without patching HLF ? This could be really helpful to unlock our current work.  Best,  ></body> </Action>
<Action id="54232" issue="30831" author="denyeart" type="comment" body=" ~rickr  Could you assess whether something is needed on java sdk side?" created="2018-12-03 21:45:07.0" updateauthor="denyeart" updated="2018-12-03 21:45:07.0"/>
<Action id="54284" issue="30831" author="rickr" type="comment" created="2018-12-04 15:41:00.0" updateauthor="rickr" updated="2018-12-04 15:41:00.0"> <body><! CDATA Just looked the example has how indices would be supplied https://github.com/hyperledger/fabric-sdk-java/blob/b9f61bd903f1a67c3608da7da515e2a09f3ae499/src/test/java/org/hyperledger/fabric/sdkintegration/End2endIT.java#L423  I just checked this and running that proudces a tar stream with: -rw-r--r-- 0/0            6318 2018-11-13 12:33 src/github.com/example_cc/example_cc.go -rw-r--r-- 0/0             114 2018-11-13 12:33 META-INF/statedb/couchdb/indexes/IndexA.json  I think that agrees with what I see documented here :  https://hyperledger-fabric.readthedocs.io/en/release-1.3/couchdb_as_state_database.html  ></body> </Action>
<Action id="54418" issue="30831" author="denyeart" type="comment" body=" ~hhasni42  We are not able to reproduce an issue. Are you still seeing an issue?" created="2018-12-06 10:37:29.0" updateauthor="denyeart" updated="2018-12-06 10:37:29.0"/>
<Action id="66526" issue="30831" author="denyeart" type="comment" body="Have not been able to reproduce, closing." created="2020-01-08 04:42:11.0" updateauthor="denyeart" updated="2020-01-08 04:42:11.0"/>
