<Issue id="20520" key="FAB-5965" number="5965" project="10002" reporter="senthil1" assignee="muralisr" creator="senthil1" type="10004" summary="chaincode unit test fails due to missing TLS Certificate" priority="3" resolution="10000" status="6" created="2017-08-30 04:11:13.0" updated="2018-07-20 14:14:14.0" resolutiondate="2017-10-25 18:01:46.0" votes="0" watches="4" workflowId="39867"> <description><! CDATA Due to -FAB-5406-  Mutual TLS in chaincode service-P3, exectransaction_test.go fails with the following errors.  `2017-08-30 09:24:33.085 IST  accessControl  authenticate -> WARN 019 TLS is active but chaincode tmap:0 didn't send certificate`  launchAndWaitForRegister failed Timeout expired while starting chaincode tmap:0(networkid:dev,peerid:jdoe,tx:75c6ffaf-2d81-4fbb-9a52-e3e27d473f26) Error initializing chaincode tmap(Error deploying chaincode(2): Timeout expired while starting chaincode tmap:0(networkid:dev,peerid:jdoe,tx:75c6ffaf-2d81-4fbb-9a52-e3e27d473f26))  To reproduce above errors, enable TestQueries() unit test in exectransaction_test.go by commenting out testForSkip(t) ( https://github.com/hyperledger/fabric/blob/master/core/chaincode/exectransaction_test.go#L1075|https://github.com/hyperledger/fabric/blob/master/core/chaincode/exectransaction_test.go#L1075) )  After commenting out error in access.go ( https://github.com/hyperledger/fabric/blob/master/core/chaincode/accesscontrol/access.go#L104|https://github.com/hyperledger/fabric/blob/master/core/chaincode/accesscontrol/access.go#L104),  ), unit-test ran successfully.   Looks like exectransaction_test.go needs to be changed but not sure what the changes should be. We need TestQueries() for end to end testing which cannot be done by chaincode_support_test.go.   ></description> </Issue>
