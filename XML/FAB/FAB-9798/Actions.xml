<Action id="45733" issue="29829" author="manish-sethi" type="comment" body="Ledger has a test for this -  https://github.com/hyperledger/fabric/blob/master/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/txmgr_test.go#L687.  Changing the component to fabric-peer" created="2018-06-08 18:22:38.0" updateauthor="manish-sethi" updated="2018-06-08 18:22:38.0"/>
<Action id="45787" issue="29829" author="sykesm" type="comment" created="2018-06-11 14:37:48.0" updateauthor="sykesm" updated="2018-06-11 14:37:48.0"> <body><! CDATA It appears this has been resolved with the refactoring of core/chaincode.  https://github.com/hyperledger/fabric/blob/df69ad4d106da8b0df7bd583d4815615a9779ca7/core/chaincode/handler_test.go#L439-L448  Forcing a bogus error value from SetState when invoking the e2e transaction does not appear to hang and behaves as I believe it should.  Peer log contains the error returned from SetState: {code}  e  peer-0  2018-06-11 10:30:44.946 EDT  chaincode  HandleTransaction -> ERRO 02a  a07f733a  Failed to handle PUT_STATE. error: !!MJS: this is an error. It should be very visible: chaincode: mycc, key: b, value: 210  e  peer-0  github.com/hyperledger/fabric/core/chaincode.(*Handler).HandlePutState  e  peer-0  	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/chaincode/handler.go:772  e  peer-0  github.com/hyperledger/fabric/core/chaincode.(*Handler).HandlePutState-fm  e  peer-0  	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/chaincode/handler.go:190  e  peer-0  github.com/hyperledger/fabric/core/chaincode.(*Handler).HandleTransaction  e  peer-0  	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/chaincode/handler.go:242  e  peer-0  runtime.goexit  e  peer-0  	/usr/local/Cellar/go/1.10.3/libexec/src/runtime/asm_amd64.s:2361  e  peer-0  PUT_STATE failed: transaction ID: a07f733a1f1d3df6bab93206f782afe3df7959c1a3adfaa6baba5cd58b670e42  e  peer-0  github.com/hyperledger/fabric/core/chaincode.(*Handler).HandleTransaction  e  peer-0  	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/chaincode/handler.go:246  e  peer-0  runtime.goexit  e  peer-0  	/usr/local/Cellar/go/1.10.3/libexec/src/runtime/asm_amd64.s:2361  e  peer-0  2018-06-11 10:30:44.947 EDT  endorser  ProcessProposal -> ERRO 02b  testchannel  a07f733a  simulateProposal() resulted in chaincode name:"mycc"  response status 500 for txid: a07f733a1f1d3df6bab93206f782afe3df7959c1a3adfaa6baba5cd58b670e42 {code}  And chaincode query: {code} e  invoke  2018-06-11 10:30:45.349 EDT  chaincodeCmd  chaincodeInvokeOrQuery -> DEBU 04b ESCC invoke result: response:<status:500 message:"PUT_STATE failed: transaction ID: a07f733a1f1d3df6bab93206f782afe3df7959c1a3adfaa6baba5cd58b670e42: !!MJS: this is an error. It should be very visible: chaincode: mycc, key: b, value: 210" > payload:"\n \211q\362+\307\014\361\333=$\016IXj\242\237\365\003\234<\356l\201\n\342\212Q\217\225\272\004\323\022\223\002\nE\022\024\n\004lscc\022\014\n\n\n\004mycc\022\002\010\001\022-\n\004mycc\022%\n\007\n\001a\022\002\010\001\n\007\n\001b\022\002\010\001\032\007\n\001a\032\00290\032\010\n\001b\032\003210\032\301\001\010\364\003\022\273\001PUT_STATE failed: transaction ID: a07f733a1f1d3df6bab93206f782afe3df7959c1a3adfaa6baba5cd58b670e42: !!MJS: this is an error. It should be very visible: chaincode: mycc, key: b, value: 210\"\006\022\004mycc"   e  invoke  Error: endorsement failure during invoke. chaincode result: status:500 message:"PUT_STATE failed: transaction ID: a07f733a1f1d3df6bab93206f782afe3df7959c1a3adfaa6baba5cd58b670e42: !!MJS: this is an error. It should be very visible: chaincode: mycc, key: b, value: 210"  {code}  ></body> </Action>
<Action id="46205" issue="29829" author="muralisr" type="comment" body=" ~denyeart  this has the same feel &quot;error not passed back to chaincode&quot; as https://jira.hyperledger.org/browse/FAB-7959 and should have been resolved (as verified by  ~sykesm  above)." created="2018-06-19 14:58:24.0" updateauthor="muralisr" updated="2018-06-19 14:58:24.0"/>
<Action id="50024" issue="29829" author="sykesm" type="comment" body="Already addressed in current versions." created="2018-09-06 16:34:17.0" updateauthor="sykesm" updated="2018-09-06 16:34:17.0"/>
<Action id="50025" issue="29829" author="sykesm" type="comment" body="resolution status is probably wrong because it&apos;s &quot;already fixed&quot; - not because it&apos;s a duplicate, per se" created="2018-09-06 16:35:07.0" updateauthor="sykesm" updated="2018-09-06 16:35:07.0"/>
