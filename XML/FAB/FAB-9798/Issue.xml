<Issue id="29829" key="FAB-9798" number="9798" project="10002" reporter="denyeart" creator="denyeart" type="10004" summary="Tx Simulator doesn&apos;t handle errors gracefully" priority="3" resolution="10203" status="6" created="2018-04-30 18:41:21.0" updated="2018-09-06 16:35:07.0" resolutiondate="2018-09-06 16:34:17.0" votes="0" watches="5" workflowId="43056"> <description><! CDATA I attempted to save a non-UTF8 key to couchdb.  func (s *lockBasedTxSimulator) SetState calls ValidateKeyValue(), which returns: {code:java} return fmt.Errorf("Key should be a valid utf8 string:  %x ", key){code} However I get no good error message in peer or client.  Instead, the simulation times out after 30 seconds with this error: {code:java} 2018-04-30 14:34:29.421 EDT  chaincode  func1 -> DEBU 5e4  ae37838b handling PUT_STATE from chaincode 2018-04-30 14:34:29.421 EDT  statecouchdb  ValidateKeyValue -> INFO 5e5 ====validating key:marble1?? 2018-04-30 14:34:29.421 EDT  chaincode  func1 -> ERRO 5e6  ae37838b Failed to handle PUT_STATE. Sending ERROR 2018-04-30 14:34:29.421 EDT  chaincode  deRegisterTxid -> DEBU 5e7  ae37838b send ERROR(serial-false) 2018-04-30 14:34:59.418 EDT  chaincode  Execute -> DEBU 5e8 Exit 2018-04-30 14:34:59.418 EDT  chaincode  Execute -> DEBU 5e9 Exit 2018-04-30 14:34:59.418 EDT  chaincode  ExecuteChaincode -> ERRO 5ea timeout expired while executing transaction github.com/hyperledger/fabric/core/chaincode.(*Handler).Execute     /Users/denyeart/work/src/github.com/hyperledger/fabric/core/chaincode/handler.go:1219 github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Execute{code}  ></description> </Issue>
