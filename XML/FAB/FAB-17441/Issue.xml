<Issue id="44136" key="FAB-17441" number="17441" project="10002" reporter="tatsu-sato" assignee="tatsu-sato" creator="tatsu-sato" type="10004" summary="approveformyorg should allow update of only package ID" priority="3" resolution="10000" status="6" created="2020-01-24 20:30:57.0" updated="2020-03-19 04:14:58.0" resolutiondate="2020-02-04 18:49:51.0" votes="0" watches="3" workflowId="58037" archived="N"> <description><! CDATA Currently, `ApproveChaincodeDefinitionForOrg` cannot redefine a uncommitted definition when attempting to update only the package ID and occurs the error as bellow. {code:bash} # Define a uncommitted definition $ peer lifecycle chaincode approveformyorg -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --tls true --cafile /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --channelID mychannel --name fabcar --version 1 --init-required --package-id fabcar_1:a6b61184ef66929c1b6e6ad657c248e9ba6283080eb59250a93e1706eeffe981 --sequence 2  2020-01-24 01:00:18.095 UTC  chaincodeCmd  ClientWait -> INFO 001 txid  b5d63afa55bf13070b60e77c3a3ca95323d6dbd5a53205fedaffdc8f13e15f34  committed with status (VALID) at   # Attempt to update only the package ID $ peer lifecycle chaincode approveformyorg -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --tls true --cafile /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --channelID mychannel --name fabcar --version 1 --init-required --package-id test --sequence 2  Error: proposal failed with status: 500 - failed to invoke backing implementation of 'ApproveChaincodeDefinitionForMyOrg': attempted to redefine uncommitted sequence (2) for namespace fabcar with unchanged content {code} The above is caused by the following validation logic in `ApproveChaincodeDefinitionForOrg` function in `core/chaincode/lifecycle/lifecycle.go`: {code:go} if err := uncommittedParameters.Equal(cd.Parameters()); err == nil { return errors.Errorf("attempted to redefine uncommitted sequence (%d) for namespace %s with unchanged content", requestedSequence, ccname) } {code} A check for package ID updates should be added in the above validation logic.  ></description> </Issue>
