<Issue id="40048" key="FAB-15506" number="15506" project="10002" reporter="siddjain" assignee="mrosen52" creator="siddjain" type="10004" summary="SIGSEGV: segmentation violation if CORE_PEER_TLS_ROOTCERT_FILE is not set in peer CLI" priority="3" resolution="10000" status="6" created="2019-05-21 21:24:50.0" updated="2019-07-10 22:39:17.0" resolutiondate="2019-07-10 17:55:18.0" votes="0" watches="5" workflowId="52949"> <description><! CDATA There should be no need to set the  CORE_PEER_TLS_ROOTCERT_FILE environment variable if it has been specified via the --tlsRootCertFiles flag. However, if one does not specify this environment variable there is an error |panic: runtime error: invalid memory address or nil pointer dereference| | | signal SIGSEGV: segmentation violation code=0x1 addr=0x60 pc=0x110fddc | | | | | |goroutine 1  running :| | |github.com/hyperledger/fabric/peer/common.NewPeerClientForAddress(0x7ffef5eec7ef, 0xe, 0x7ffef5eec811, 0x10, 0x8fb52c, 0x9e8745, 0x1480413)| | |/opt/gopath/src/github.com/hyperledger/fabric/peer/common/peerclient.go:44 +0x8c| | |github.com/hyperledger/fabric/peer/common.GetEndorserClient(0x7ffef5eec7ef, 0xe, 0x7ffef5eec811, 0x10, 0x3, 0x1, 0xc4201d1988, 0x9e5bec)| | |/opt/gopath/src/github.com/hyperledger/fabric/peer/common/peerclient.go:122 +0x56| | |github.com/hyperledger/fabric/peer/chaincode.InitCmdFactory(0x148201f, 0x5, 0x1, 0x1a, 0x13b1dc0, 0xc420407fc0)| | |/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/common.go:369 +0xb19| | |github.com/hyperledger/fabric/peer/chaincode.chaincodeQuery(0xc4200dbb00, 0x0, 0x0, 0x0)| | |/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/query.go:56 +0xa0| | |github.com/hyperledger/fabric/peer/chaincode.queryCmd.func1(0xc4200dbb00, 0xc420499180, 0x0, 0x14, 0x0, 0x0)| | |/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/query.go:26 +0x34| | |github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc4200dbb00, 0xc420499040, 0x14, 0x14, 0xc4200dbb00, 0xc420499040)| | |/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:698 +0x46d| | |github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x1c90320, 0x1d78c30, 0xf, 0x1)| | |/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:783 +0x2e4| | |github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x1c90320, 0x1, 0xffffffffffffffff)| | |/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:736 +0x2b| | |main.main()| | |/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:97 +0x5bf|  ></description> </Issue>
