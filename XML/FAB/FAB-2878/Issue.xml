<Issue id="15451" key="FAB-2878" number="2878" project="10002" reporter="timpii" creator="timpii" type="10001" summary="CouchDB Phantom Read" priority="2" resolution="10000" status="6" created="2017-03-24 20:02:52.0" updated="2018-07-20 18:55:21.0" resolutiondate="2017-07-19 15:39:20.0" votes="0" watches="5" workflowId="37841"> <description><! CDATA Using CouchDB rich query functionality in the current implementation introduces a potential phantom read problem. As an example if endorsing chaincode performs a rich query to determine if a transaction is a duplicate and returns no results (happy path), by the time the commit happens that same query "could" produce a different result in the situation where a prior transaction was committed between the endorsement and committing phase.  Range queries against the LevelDB protect against this by rerunning the query at commit time. Currently, the rich query is not rerun and thus the result set is not validated for the query at time of commit. Protection against phantom reads should be included for CouchDB rich queries.   ></description> </Issue>
