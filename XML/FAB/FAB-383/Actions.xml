<Action id="18918" issue="12684" author="kchristidis" type="comment" created="2016-09-16 18:01:50.0" updateauthor="kchristidis" updated="2016-09-16 18:32:18.0"> <body><! CDATA This works just fine.  Assume you have a "bad" peer whose state got corrupted and whom you want to bring up. You pick one of the other peers (a "good" peer) and shut it down gracefully: {{peer node stop}}  This ensures that {{db.Stop()}} is called and all of the blocks/data in memory are flushed to the disk by rocksDB.  Then copy over the good peer's {{CORE_PEER_FILESYSTEMPATH/db}} directory (default: {{/var/hyperledger/production/db}}) to the bad peer, replacing its own {{db}} folder entirely.  Restart the good and the bad peer and you should be good to go.  For anyone curious on how I tested this, I documented the procedure (for my own reference here): https://gist.github.com/kchristidis/64acf4c32da51a9afd06ede358d4c043  Thanks to  ~manish-sethi  for helping me make sure the DB is stopped properly.  ></body> </Action>
<Action id="18919" issue="12684" author="mastersingh24" type="comment" created="2016-09-16 18:30:41.0" updateauthor="mastersingh24" updated="2016-09-16 18:30:41.0"> <body><! CDATA do you mean {{peer node stop}}   ?   ></body> </Action>
<Action id="18920" issue="12684" author="kchristidis" type="comment" body="Yes, good catch - updated it." created="2016-09-16 18:32:36.0" updateauthor="kchristidis" updated="2016-09-16 18:32:36.0"/>
<Action id="18921" issue="12684" author="kchristidis" type="comment" body="(Ah, the logged time for this task is not right but I cannot reset it, it seems.)" created="2016-09-16 18:34:56.0" updateauthor="kchristidis" updated="2016-09-16 18:34:56.0"/>
<Action id="18922" issue="12684" author="kchristidis" type="comment" body="I got bitten by a bug in the HashBlock function when investigating this by the way. I captured this in issue #20 in the GHE Fabric05 repo. (Thankfully, this doesn&apos;t affect the 0.6 release.)" created="2016-09-16 20:08:13.0" updateauthor="kchristidis" updated="2016-09-16 20:08:13.0"/>
