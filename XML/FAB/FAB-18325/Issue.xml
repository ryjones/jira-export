<Issue id="46300" key="FAB-18325" number="18325" project="10002" reporter="manish-sethi" creator="manish-sethi" type="10002" summary="Return error to deliver service client if snapshot generation in progress" priority="3" status="10100" created="2020-11-09 04:57:35.0" updated="2021-01-11 06:36:48.0" votes="0" watches="1" workflowId="60215" archived="N"> <description><! CDATA If snapshot generation is in progress (i.e., the commits are paused to the channel) and deliver service asks for a block that is not yet committed, return an error to client.  In the implementation, we can track the open  iterators|https://github.com/hyperledger/fabric/blob/1f372da73f2cade0cbd1b7fcbaec9dc294269cd9/core/ledger/kvledger/kv_ledger.go#L900  and their state and when the following condition becomes true for any iterator, return a typed error (say `LedgerBusy` error) from the iterator's `Next` function. {noformat} (snapshot generation in progress) && (iterator waiting or going to wait for block > snapshot height) {noformat} .  Finally, the deliver service can return the error code  Status_SERVICE_UNAVAILABLE|https://github.com/hyperledger/fabric-protos/blob/f44816d6f621f1f7615cb4fc65643791eb6d8ce6/common/common.proto#L24   Â   ></description> </Issue>
