<Issue id="17177" key="FAB-4177" number="4177" project="10002" reporter="jpatchell" assignee="jpatchell" creator="jpatchell" type="10004" summary="BCCSP PKCS11 implementation should add DER encoding to CKA_EC_POINT for all vendors" priority="2" resolution="10000" status="6" created="2017-05-26 15:57:47.0" updated="2018-07-20 14:12:58.0" resolutiondate="2017-06-06 20:13:36.0" votes="3" watches="8" workflowId="38683" security="10001"> <description><! CDATA Currently the BCCSP PKCS11 implementation only adds DER encoding to the CKA_EC_POINT attribute when importing an ECDSA public key if the library path contains "softhsm".  If using a non-softhsm PKCS11 library such as the PKCS11 client library to connect to a SafeNet Luna HSM then the subsequent C_CreateObject call will fail as the CKA_EC_POINT is not properly DER encoded.  The implementation should be changed to always add the DER encoding as it is standard in PKCS11 for the CKA_EC_POINT to be encoded this way.  The check for csp.lib to contain "softhsm" in bccsp/pkcs11/pkcs11.go in the importECKey function should simply be removed.  ></description> </Issue>
