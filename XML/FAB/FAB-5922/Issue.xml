<Issue id="20422" key="FAB-5922" number="5922" project="10002" reporter="scottz" creator="scottz" type="10001" summary="peer is isolated after restart, if no bootstrap peer is available" priority="3" resolution="10200" status="6" created="2017-08-25 19:43:25.0" updated="2018-07-20 18:48:29.0" resolutiondate="2018-07-20 14:05:24.0" votes="0" watches="4" workflowId="42971"> <description><! CDATA A peer that is stopped and later restarted will come up as another org leader in a channel if the peer is unable to contact a bootstrap peer.  Expected Behavior: we expected the peer to persist the list of peers with which it had been gossiping, so it could contact them and rejoin them when it restarts.  Consider this scenario, with delays and invokes between each step. Assume all peers mentioned are in same org. ``` 1. create peer0 ; peer0 elects self as leader 2. create peer1 with CORE_PEER_GOSSIP_BOOTSTRAP=peer0 ; peer1 contacts peer0, and becomes a nonLeader 3. create peer2 with CORE_PEER_GOSSIP_BOOTSTRAP=peer0,peer1 ; peer2 contacts peer0, and becomes a nonLeader 4. stop peer0 ; assume peer1 is elected new leader, and peer2 is still nonLeader 5. stop peer1 6. start peer1 ; peer1 elects self as leader, since it is isolated because peer0 (BOOTSTRAP peer) is unavailable. It would be helpful if the peer had persisted a list of peers in its org/channel, so it could contact peer2 now (and become a nonLeader - which is more appropriate since its ledger is likely lagging peer2) ```  Another option to consider might be to provide an API for the administrator to modify the peer's internal representation of the BOOTSTRAP env variable. I am not certain, but I think that could allow (in step 3) adding peer2 to the bootstrap list of peer1, and thus peer1 would find peer2 via bootstrap list when peer1 recovers in step 6. I believe that would require the peer to dynamically reread the BOOTSTRAP peer list - as well as USE the list after being restarted. Honestly I don't know if this design option could work, but it is just an idea that we brainstormed  ></description> </Issue>
