<Action id="18590" issue="12489" author="kchristidis" type="comment" body="I want to double-check with our team to make sure I&apos;m not missing anything, but I think f+2 observed different checkpoints for the same sequence number could act as such a halting condition." created="2016-08-19 21:25:09.0" updateauthor="kchristidis" updated="2016-08-19 21:25:09.0"/>
<Action id="18592" issue="12489" author="bmos299" type="comment" body="In Slack&apos;ing with Kostas and Info message may be best. " created="2016-08-20 02:36:13.0" updateauthor="bmos299" updated="2016-08-20 02:36:13.0"/>
<Action id="18615" issue="12489" author="corecode" type="comment" body="I&apos;d say the peer should panic" created="2016-08-22 11:35:38.0" updateauthor="corecode" updated="2016-08-22 11:35:38.0"/>
<Action id="18618" issue="12489" author="tuand" type="comment" body="We spit out a debug message saying &quot;out of sequence numbers&quot; and ignore the incoming request.  Probably should panic at this point." created="2016-08-22 13:02:02.0" updateauthor="tuand" updated="2016-08-22 13:02:02.0"/>
<Action id="18719" issue="12489" author="bmos299" type="comment" created="2016-08-30 18:30:14.0" updateauthor="bmos299" updated="2016-08-30 18:30:14.0"> <body><! CDATA Hi Simon and Tuan, once I am out of sequence...is it true to say I will never get back in sequence? If that is true, then I think a panic is the right solution. Thanks,  Barry  ></body> </Action>
<Action id="18721" issue="12489" author="kchristidis" type="comment" created="2016-08-30 20:42:56.0" updateauthor="kchristidis" updated="2016-08-30 20:42:56.0"> <body><! CDATA Barry, just making sure that the phrasing is clear --  If *the network* finds no stable certificate for the checkpoint then it'll be stuck, and panicking every peer is the right way to go.  If *a peer* gets out of sequence while the rest of the network is making progress normally (i.e. a stable certificate is found, etc.) then *the peer* will get back on track. (I've explained how this works at a very low level in our internal z repo - see issue 164.)  It's not clear from the original description whether you focus on the network as a whole, or a specific peer (you write "I" in your most recent comment for instance). I was the one who debugged the IGF issue a couple of weeks so I'm pretty certain you refer to the network, but I want to make sure we're all on the same page.  ></body> </Action>
<Action id="18727" issue="12489" author="corecode" type="comment" body="I still would suggest panicing the local peer that diverged.  It should never happen and is an indication of some fatal failure." created="2016-08-31 09:32:58.0" updateauthor="corecode" updated="2016-08-31 09:32:58.0"/>
<Action id="18741" issue="12489" author="bmos299" type="comment" created="2016-09-01 14:05:08.0" updateauthor="bmos299" updated="2016-09-01 14:05:08.0"> <body><! CDATA Thanks for the updates.  I am thinking in the case where the hash for a particular block is different  between peers.  I assume they will never converge? I understand there is a difference between being out of sequence (at a different block height) vs calculating a different hash for a particular block.  Is my understanding correct?  If so,  I like Simon's solution of panicing the peer and cutting a message that provides useful information.  If my understanding is incorrect, please ping me and we can chat.   ...and Kostas, yes Issue 164 has become the key document!  Thanks, Barry  ></body> </Action>
<Action id="18742" issue="12489" author="kchristidis" type="comment" created="2016-09-01 14:15:26.0" updateauthor="kchristidis" updated="2016-09-01 14:15:26.0"> <body><! CDATA If you cannot get 2f+1 peers to agree, then the network cannot converge, yes.  I do not find anything wrong with Simon's suggestion.  ></body> </Action>
<Action id="18817" issue="12489" author="mastersingh24" type="comment" body=" ~kchristidis  - this is done and merged already, correct?" created="2016-09-08 15:15:22.0" updateauthor="mastersingh24" updated="2016-09-08 15:15:22.0"/>
<Action id="18829" issue="12489" author="kchristidis" type="comment" created="2016-09-09 04:42:30.0" updateauthor="kchristidis" updated="2016-09-09 04:42:30.0"> <body><! CDATA Incorrect. (You were probably thinking of the warning message which has indeed already been merged.)  I just submitted two PRs that address the two scenarios we examine:  1. No stable cert for the network: If the peer identifies > f+1 different checkpoint values for the same sequence number, it panics. This indicates a network that won't be able to acquire a stable checkpoint certificate for this sequence number, and will therefore stop doing progress.  2. Peer's own state diverging: If the peer's own checkpoint differs from a witnessed weak checkpoint certificate, it panics.  Will mark the task as done when the PRs are merged.  ></body> </Action>
