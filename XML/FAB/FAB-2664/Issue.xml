<Issue id="15231" key="FAB-2664" number="2664" project="10002" reporter="nishi" creator="nishi" type="10004" summary="During E2E test peer2 in my docker-network panics with SIGSEV failure" priority="2" resolution="10000" status="6" created="2017-03-06 17:20:31.0" updated="2018-07-20 14:11:55.0" resolutiondate="2017-04-12 12:53:08.0" votes="0" watches="4" workflowId="37709"> <description><! CDATA During my E2E test sceanrio:  1 Orderer : solo, 4 peers, 1channel, 1 chaincode peer2 exited during installation of chaincode.   Errors: {code} docker logs -f cli 2017-03-06 17:08:42.380 UTC  logging  InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode' 2017-03-06 17:08:45.383 UTC  logging  GetModuleLevel -> DEBU 002 Module 'error' logger enabled for log level: DEBUG Error: Error getting endorser client chaincode: PEER_CONNECTIONERROR - Error trying to connect to local peer: grpc: timed out when dialing /opt/gopath/src/github.com/hyperledger/fabric/peer/common/common.go:84 github.com/hyperledger/fabric/peer/common.GetEndorserClient /opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/common.go:222 github.com/hyperledger/fabric/peer/chaincode.InitCmdFactory /opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:91 github.com/hyperledger/fabric/peer/chaincode.chaincodeInstall /opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:46 github.com/hyperledger/fabric/peer/chaincode.installCmd.func1 /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute /opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:111 main.main /opt/go/src/runtime/proc.go:192 runtime.main /opt/go/src/runtime/asm_amd64.s:2087 runtime.goexit  Usage: peer chaincode install  flags   Global Flags: -C, --chainID string             The chain on which this command should be executed (default "testchainid") -c, --ctor string                Constructor message for the chaincode in JSON format (default "{}") -E, --escc string                The name of the endorsement system chaincode to be used for this chaincode -l, --lang string                Language the chaincode is written in (default "golang") --logging-level string       Default logging level and overrides, see core.yaml for full syntax -n, --name string                Name of the chaincode -o, --orderer string             Ordering service endpoint -p, --path string                Path to chaincode -P, --policy string              The endorsement policy associated to this chaincode --test.coverprofile string   Done (default "coverage.cov") -t, --tid string                 Name of a custom ID generation algorithm (hashing and decoding) e.g. sha256base64 -u, --username string            Username for chaincode operations when security is enabled -v, --version string             Version of the chaincode specified in install/instantiate/upgrade commands -V, --vscc string                The name of the verification system chaincode to be used for this chaincode  !!!!!!!!!!!!!!! Chaincode installation on remote peer PEER2 has Failed !!!!!!!!!!!!!!!! {code} {code} docker logs -f peer2 2017-03-06 17:07:33.828 UTC  gossip/comm#-1  GossipStream -> ERRO 001 Authentication failed panic: runtime error: invalid memory address or nil pointer dereference  signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0x758c05   goroutine 50  running : panic(0xc19280, 0xc420014050) 	/opt/go/src/runtime/panic.go:500 +0x1a1 github.com/hyperledger/fabric/peer/gossip/mcs.(*mspMessageCryptoService).VerifyByChannel(0xc420196900, 0xc420141488, 0x4, 0x8, 0xc42138b880, 0x338, 0x338, 0xc4213e4690, 0x46, 0x46, ...) 	/opt/gopath/src/github.com/hyperledger/fabric/peer/gossip/mcs/mcs.go:234 +0x225 github.com/hyperledger/fabric/peer/gossip/mcs.(*mspMessageCryptoService).Verify(0xc420196900, 0xc42138b880, 0x338, 0x338, 0xc4213e4690, 0x46, 0x46, 0xc4216aeec0, 0x36, 0x36, ...) 	/opt/gopath/src/github.com/hyperledger/fabric/peer/gossip/mcs/mcs.go:216 +0x1c0 github.com/hyperledger/fabric/gossip/gossip.(*discoverySecurityAdapter).validateAliveMsgSignature.func1(0xc42138b880, 0x338, 0x338, 0xc4213e4690, 0x46, 0x46, 0xc4216aeec0, 0x36, 0x36, 0x5, ...) 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:827 +0xa6 github.com/hyperledger/fabric/protos/gossip.(*SignedGossipMessage).Verify(0xc420140900, 0xc42138b880, 0x338, 0x338, 0xc420140960, 0x411c05, 0xc420140950) 	/opt/gopath/src/github.com/hyperledger/fabric/protos/gossip/extensions.go:410 +0xcb github.com/hyperledger/fabric/gossip/gossip.(*discoverySecurityAdapter).validateAliveMsgSignature(0xc4206e5080, 0xc420140900, 0xc42138b880, 0x338, 0x338, 0x338) 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:831 +0xf2 github.com/hyperledger/fabric/gossip/gossip.(*discoverySecurityAdapter).ValidateAliveMsg(0xc4206e5080, 0xc420140900, 0xc4202917a0) 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:797 +0x243 github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleAliveMessage(0xc42008c870, 0xc420140900) 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:423 +0x208 github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMsgFromComm(0xc42008c870, 0xc420140770) 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:301 +0xe6a github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMessages(0xc42008c870) 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:276 +0x200 created by github.com/hyperledger/fabric/gossip/discovery.NewDiscoveryService 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:115 +0x50e vagrant@hyperledger-devenv:v0.3.0-9a09ac0:/opt/gopath/src/github.com/hyperledger/fabric/e2e$   {code}     ></description> </Issue>
