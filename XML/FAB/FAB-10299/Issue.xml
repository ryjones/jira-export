<Issue id="30504" key="FAB-10299" number="10299" project="10002" reporter="dongming" assignee="dongming" creator="dongming" type="10004" summary="PTE eventRegister var incorrect" priority="3" resolution="10000" status="6" created="2018-05-22 19:06:05.0" updated="2018-07-20 14:16:47.0" resolutiondate="2018-05-31 20:38:06.0" votes="0" watches="1" workflowId="42290"> <description><! CDATA 1) eventRegister(request_invoke.txId, function(sendPromise) \{ 2) var sendPromise = channel.sendTransaction(txRequest); 3) return Promise.all( sendPromise .concat(eventPromises))  1) eventRegister calls the callback with an array of event promises, so the variable name sendPromise is wrong 2) the second line in this block overwrites the sendPromise variable, so whatever is passed to the callback is now inaccessible 3) eventPromises is resolved to an array defined at the top of the file, which is always empty  This would make more sense:  eventRegister(request_invoke.txId, function(eventPromises) \{ // renamed sendPromise in the callback to eventPromises var sendPromise = channel.sendTransaction(txRequest); return Promise.all( sendPromise .concat(eventPromises))  ></description> </Issue>
