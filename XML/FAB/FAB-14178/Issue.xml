<Issue id="37670" key="FAB-14178" number="14178" project="10002" reporter="sae imson" assignee="denyeart" creator="sae imson" type="10004" summary="got 2 error - proposal responses from 3 endorsers are not identical to each others." priority="3" resolution="10203" status="6" created="2019-02-14 04:03:37.0" updated="2019-02-14 14:46:40.0" resolutiondate="2019-02-14 13:09:41.0" votes="0" watches="2" workflowId="49284"> <description><! CDATA   Test Environment   - Fabric java sdk version is 1.2.1/ fabric version is 1.2.  - Test system is composed of 3 endorsers, 7 committers(no chaincode),  4 orderers(kafka) on cloud.  - batch block is configured as 1tx/1block.  - private data  is used. collection file is attached.   - for RBAC(Role based access control) cid package is used in chaincode.       Error    through fabric java sdk, proposal was sent to 3 endorsers(AND policy) and didn't pass below validation.  =====================================================================================================  Collection<Set<ProposalResponse>> proposalConsistencySets = SDKUtils.getProposalConsistencySets(transactionPropResp);  if (proposalConsistencySets.size() != 1)  { fail(format("Expected only one set of consistent proposal responses but got %d", proposalConsistencySets.size())); }  =====================================================================================================  only 2 out of 3 endorsers returned same responses so "Expected only one set of consistent proposal responses but got 2" message returned from fabric java sdk, and this error appeared randomly during stress test. refer to log I attached.  on endorser, I saw mvcc error but I am not sure whether this caused got 2 error because after mvcc error, still number of transactions successfully committed as valid.  stress test without validation check was tried and orderer rejected transaction and returned error message was almost similar with got 2 error.  1) test condition : 1user, 1key, no commit check(no event receive) got 2 error disappear by I giving sleep time(100ms) between transactions.   2) test condition : various user and key(no key collision), commit check, sleep(0~15ms)  still got 2 error occur.        ></description> </Issue>
