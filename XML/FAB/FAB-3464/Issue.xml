<Issue id="16060" key="FAB-3464" number="3464" project="10002" reporter="adnanchoudhury" assignee="nickgaski" creator="adnanchoudhury" type="10004" summary="Ledger performance test: read/write errors in CouchDB when the number of database is high" priority="3" resolution="10000" status="6" created="2017-04-27 15:46:27.0" updated="2018-07-20 14:12:25.0" resolutiondate="2017-06-28 17:21:55.0" votes="0" watches="5" workflowId="38192"> <description><! CDATA While using CouchDB as a pluggable state database (a couchdb container residing on the host), read/write errors have been observed while doing performance test with proposed Ledger benchmarking tool (the tool:  https://gerrit.hyperledger.org/r/#/c/6793/ ). {code:java}   31m2017-04-27 17:23:24.615 EDT  statecouchdb  ApplyUpdates -> ERRO 928^  0m Error during Commit(): http: read on closed response body 2367 panic: Error during commit to txmgr:http: read on closed response body {code} Notes: 1. This occurs when the number of chains is 200 or more, and not effected by no. of parallel transactions on each chain. 2. It goes through the expected number of attempts (3) and exit after that.  The detailed log is in the attached file. Last 100 lines are most relevant.  How to reproduce: 1. Hyperledger fabric level: April 25 2. Cherrypick benchmarking tool:  https://gerrit.hyperledger.org/r/#/c/6793/  3. Change values in /fabric/core/ledger/benchmark/scripts/runbenchmark.sh so that total no, of parallel transactions (no. of chains multiplied by no. of parallel transactions per chain) is 200 or more 4. edit /fabric/core/ledger/benchmark/experiments/init_test.go to include CouchDB. 5. .run runbenchmark.sh  ></description> </Issue>
