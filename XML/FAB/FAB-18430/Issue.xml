<Issue id="46594" key="FAB-18430" number="18430" project="10002" reporter="suneel18" creator="suneel18" type="10004" summary="peer lifecycle chaincode queryinstalled fails for non-admin access" priority="3" resolution="10203" status="6" created="2021-02-24 13:33:22.0" updated="2021-02-25 06:02:41.0" resolutiondate="2021-02-25 06:02:41.0" votes="0" watches="2" workflowId="60538" archived="N"> <description><! CDATA While fetching the chaincode details from the network   Setting "CORE_PEER_MSPCONFIGPATH" to a non-admin msp on a fabirc network running chaincode in install-instantiate model and "peer chaincode list --instantiated -C channel" command lists instantiated chaincodes even through only client cert - key pairs  And running the same test on fabric network using the new chaincode lifecycle with a non-admin msp as CORE_PEER_MSPCONFIGPATH "peer lifecycle chaincode querycommitted --channelID" command also returns list of committed chaincodes   We tried the same process of setting "CORE_PEER_MSPCONFIGPATH" to non-admin users but this time tested to query listing of installed chaincodes  However  "CORE_PEER_MSPCONFIGPATH" to non-admin on fabric set up with install-instantiate  chaincode model    {code:java} peer chaincode list --installed -C allchannel {code} this fails with error     Error: bad response: 500 - access denied for  getinstalledchaincodes : Failed verifying that proposal's creator satisfies local MSP principal during channelless check policy with policy  Admins :  The identity is not an admin under this MSP  orgMSP : cannot test for classification, node ou for type  ADMIN , not defined, msp:  orgMSP    On the similar lines with "CORE_PEER_MSPCONFIGPATH" to non-admin on fabric set up with new lifecycle model {code:java} peer lifecycle chaincode queryinstalled{code} this too fails with similar error of   Error: query failed with status: 500 - Failed to authorize invocation due to failed ACL check: Failed verifying that proposal's creator satisfies local MSP principal during channelless check policy with policy  Admins :  The identity is not an admin under this MSP  orgMSP : cannot test for classification, node ou for type  ADMIN , not defined, msp:  orgMSP       Can we enable "peer lifecycle chaincode queryinstalled" to list installed chaincodes with client level access and not just limit it to admin access  ></description> </Issue>
