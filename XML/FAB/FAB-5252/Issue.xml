<Issue id="19168" key="FAB-5252" number="5252" project="10002" reporter="scottz" assignee="kchristidis" creator="scottz" type="10004" summary="&quot;make kafka&quot; failure for any non-default version, due to images/kafka/Dockerfile.in hardcoded pathname" priority="3" resolution="10000" status="6" created="2017-07-11 16:46:09.0" updated="2018-07-20 14:13:44.0" resolutiondate="2017-07-19 16:37:02.0" votes="0" watches="2" workflowId="39412"> <description><! CDATA +Problem+:  "make kafka" failure, for any version besides the default 0.9.0.1.  +Background+: In addition to changing orderer.yaml KafkaVersion, it seems one must also change  https://github.com/hyperledger/fabric/blob/master/images/kafka/Dockerfile.in#L8  (from 0.9.0.1 to one of the other supported values: 0.10.0.0 or 0.10.0.1 or 0.10.1.0 ) and "make kafka" image before deployment. I edited .../fabric/images/kafka/Dockerfile.in line 8 to make this change, and the "make kafka" command failed with error: {quote}curl: (22) The requested URL returned error: 404 Not Found {quote} +Proposed solution+:  Observe in line 11 of Dockerfile.in, we curl the kafka - however it uses a hardcoded pathname to 0.9.0.1 , causing the failure. If I am not mistaken, we should change the address from {quote}http://www-us.apache.org/dist/kafka/0.9.0.1/kafka_$\{SCALA_VERSION}-$\{KAFKA_VERSION}.tgz {quote} to {quote}http://www-us.apache.org/dist/kafka/$\{KAFKA_VERSION}/kafka_$\{SCALA_VERSION}-$\{KAFKA_VERSION}.tgz {quote} +WORKAROUND+: Since the user has to edit the Dockerfile.in already to change the KAFKA_VERSION, the user could also change the hardcoded pathname from 0.9.0.1 to the appropriate version - as in the suggested solution below.  +Additional request for accompanying documentation+: we could also use some documentation with better instructions of how-to steps to use different kafka versions.  http://hyperledger-fabric.readthedocs.io/en/latest/kafka.html  provides some info but does not explain that the images/kafka/Dockerfile.in must be edited and new images must be built (in addition to setting orderer.yaml KAFKA_VERSION).  ></description> </Issue>
