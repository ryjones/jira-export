<Issue id="36443" key="FAB-13465" number="13465" project="10002" reporter="yacovm" assignee="yacovm" creator="yacovm" type="10003" summary="Implement max retry attempts" priority="3" resolution="10000" status="6" created="2019-01-01 15:22:56.0" updated="2019-03-01 13:20:00.0" resolutiondate="2019-01-07 17:12:19.0" votes="0" watches="1" workflowId="47976"> <description><! CDATA The block puller currently retries indefinitely upon failure, because it was originally implement to be used by the etcdraft chain for snapshots. A node that needs a snapshot, cannot do anything else without it - so it makes sense to block until it can obtain the blocks for the snapshot from some OSN.  However, since onboarding is serial - a channel that may be unavailable might block the onboarding of other blocks via the following series of events:  # A node starts up and decides it needs to onboard the cluster. # It pulls the system chain and enumerates the existing channels. # It successfully pulls the last config block for channel *foo* (at this phase, channels that aren't available - are skipped, and not included in the final list of channels that should be pulled). # It starts pulling all channels it needs, and reaches the phase where it needs to pull the blocks of channel *foo*, and it retries indefinitely.   To prevent this problem, we need to introduce a configuration option for the block puller which will be activated only for the onboarding, and not for the consensus.   ></description> </Issue>
