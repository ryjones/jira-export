<Action id="24236" issue="16234" author="christopherferris" type="comment" body="this is not a bug, why is it classified as such?  ~muralisr " created="2017-05-24 13:28:01.0" updateauthor="christopherferris" updated="2017-05-24 13:28:01.0"/>
<Action id="24237" issue="16234" author="christopherferris" type="comment" body="personally, I think that this should wait to post 1.0." created="2017-05-24 13:28:21.0" updateauthor="christopherferris" updated="2017-05-24 13:28:21.0"/>
<Action id="24254" issue="16234" author="binhn" type="comment" body="I changed the priority to &quot;high&quot; as this bug would allow bogus transactions to get into the ledger. We need to fix this for 1.0." created="2017-05-24 17:29:57.0" updateauthor="binhn" updated="2017-05-24 17:32:04.0"/>
<Action id="24293" issue="16234" author="denyeart" type="comment" body="Agree with Binh, this looks like an important bug to fix with relatively small risk." created="2017-05-25 01:54:31.0" updateauthor="denyeart" updated="2017-05-25 01:54:31.0"/>
<Action id="24415" issue="16234" author="mastersingh24" type="comment" created="2017-05-26 09:03:55.0" updateauthor="mastersingh24" updated="2017-05-26 09:05:11.0"> <body><! CDATA I am pretty sure I understand the issue, but I don't think it is clear to everyone.   ~muralisr   I believe that we are saying we should change  https://github.com/hyperledger/fabric/blob/master/core/chaincode/shim/response.go#L28   from  {noformat} ERROR=500 {noformat} to  {noformat} ERROR=400 {noformat} ?  ></body> </Action>
<Action id="24430" issue="16234" author="muralisr" type="comment" body=" ~mastersingh24  right. Should have been clearer. Added the details so anyone can pick this JIRA up." created="2017-05-26 11:26:50.0" updateauthor="muralisr" updated="2017-05-26 11:26:50.0"/>
<Action id="24567" issue="16234" author="jimthematrix" type="comment" body="+1, if I&apos;m implementing ACL in my chaincode and I decided the Creator is not authorized, according to API spec I&apos;d use 403 (not authorized) in my response. but that would be interpreted by the validation as non-error (endorsement succeeded)." created="2017-05-29 04:26:29.0" updateauthor="jimthematrix" updated="2017-05-29 04:26:29.0"/>
<Action id="24607" issue="16234" author="christopherferris" type="comment" body="If this gets approved (I won&apos;t be the last one to vote, since I think this is just creeping improvements) then I will INSIST that it be a single comprehensive change that addresses the fix, the tests and the documentation, and any example/sample in the code base that is affected. Over all, I think this could wait. It may not be ideal, but it IS an API change and we are supposedly frozen vis our API and SPI." created="2017-05-29 19:06:25.0" updateauthor="christopherferris" updated="2017-05-29 19:06:25.0"/>
<Action id="24608" issue="16234" author="christopherferris" type="comment" body="I&apos;ll also note that IMNSHO this is not a bug but as designed and hence an improvement." created="2017-05-29 19:08:40.0" updateauthor="christopherferris" updated="2017-05-29 19:08:40.0"/>
<Action id="24728" issue="16234" author="denyeart" type="comment" body="I dont think anybody would by design indicate that a 403 (not authorized) should result in an endorsement.  This looks like an oversight/bug that needs to be fixed.  We can&apos;t be changing fundamental behavior after 1.0, therefore need to fix before 1.0." created="2017-05-31 05:09:59.0" updateauthor="denyeart" updated="2017-05-31 05:09:59.0"/>
<Action id="24817" issue="16234" author="christopherferris" type="comment" created="2017-05-31 17:35:20.0" updateauthor="christopherferris" updated="2017-05-31 17:35:20.0"> <body><! CDATA Quite possibly then, there is some lack of clarity on the nature of this change. It isn't clear that there IS actually a bug, it seems to me that the request is to align the error codes for chaincode developers. It may result in misunderstanding, I suppose, and yes, it will mean an API change but as I have noted elsewhere, every time we do this, we create inconsistencies in the documentation (or omit it altogether) and there are likely other areas that need to be addressed.      In other words, this is no small change and IMO it really needs to be considered carefully before we merge such a change, as it introduces an API change when we have previously said that the API is FROZEN.     ></body> </Action>
<Action id="24926" issue="16234" author="muralisr" type="comment" created="2017-06-01 13:28:37.0" updateauthor="muralisr" updated="2017-06-01 13:28:37.0"> <body><! CDATA  ~ChristopherFerris  we have changing  interpretation of what the "error" is. You are right that its not a bug in the sense that it is working as designed (we didn't by mistake say 500 when we meant 400). However, this change will invalidate all TXs stored in the ledger prior to the change with Errors in the range 400-500. If we don't mind that then we can do post 1.0.  Suggest we have  ~wlahti  put out a CR to assess the extent of changes and go from there ?  ></body> </Action>
<Action id="24929" issue="16234" author="christopherferris" type="comment" created="2017-06-01 13:55:50.0" updateauthor="christopherferris" updated="2017-06-01 13:55:50.0"> <body><! CDATA Ok, so if I understand this (and thanks  ~denyeart  and  ~muralisr  for clarifying) if we do not change this before 1.0, any change we make post 1.0 will mean that if I have a network deployed with v1.0.0 level code, and I upgrade to the post 1.0 level code with this change, that committed transactions in the ledger prior to the upgrade will be invalidated? Have I got that correct? That changes my understanding considerably.     However, and I will say this again I am sure, I'm willing to bet a considerable amount of beers that this will not be the only breaking change that we might consider post 1.0 because of anything we know now or because of any feedback/experience we get from having 1.0 deployed.  ></body> </Action>
<Action id="24932" issue="16234" author="muralisr" type="comment" created="2017-06-01 14:07:00.0" updateauthor="muralisr" updated="2017-06-01 14:12:03.0"> <body><! CDATA _>I upgrade to the post 1.0 level code with this change, that_ _committed transactions in the ledger prior to the upgrade will be invalidated_  That's right  ~ChristopherFerris  (I'd have said , "ledger will contain txs that would not have been committed post 1.0" but the spirit is right. The ledger will have ambiguous/inconsistent txs).  ... and I'm _NOT_ taking you up on the bet :) .  ></body> </Action>
<Action id="24951" issue="16234" author="christopherferris" type="comment" created="2017-06-01 15:01:21.0" updateauthor="christopherferris" updated="2017-06-01 15:01:21.0"> <body><! CDATA OK, I AM CHANGING MY VOTE. to apply Gari's suggested fix https://jira.hyperledger.org/browse/FAB-3618?focusedCommentId=24415&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-24415     It also needs to be documented CLEARLY  ></body> </Action>
<Action id="24952" issue="16234" author="christopherferris" type="comment" body="issue has reached the necessary 5 votes, and a CR may be submitted and merged." created="2017-06-01 15:02:07.0" updateauthor="christopherferris" updated="2017-06-01 15:02:07.0"/>
<Action id="25150" issue="16234" author="wlahti" type="comment" body="After discussing with  ~muralisr , the plan is to create a new constant, ERRORTHRESHOLD, which will be set to 400. The endorser will use this constant to determine whether to endorse/reject a proposal while shim.ERROR will still be used as the generic error status code of 500 (calls to shim.Error(msg) use this constant to set the status). " created="2017-06-02 17:41:04.0" updateauthor="wlahti" updated="2017-06-02 17:41:04.0"/>
<Action id="25175" issue="16234" author="muralisr" type="comment" body="A bit of explanation for ERRORTHRESHOLD - basically don&apos;t overload ERROR to be both a value of an error *and*  a threshold to test against. Separating them out makes for fewer implementation changes and keeps it clean." created="2017-06-02 18:59:20.0" updateauthor="muralisr" updated="2017-06-02 18:59:20.0"/>
<Action id="25183" issue="16234" author="wlahti" type="comment" body="CR out for review: https://gerrit.hyperledger.org/r/#/c/10085/" created="2017-06-02 19:58:51.0" updateauthor="wlahti" updated="2017-06-02 19:58:51.0"/>
