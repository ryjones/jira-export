<Issue id="44808" key="FAB-17751" number="17751" project="10002" reporter="baohua" creator="baohua" type="10004" summary="RAFT OSN may panic with repeatedly adding/removing OSN from the channel" priority="2" status="10300" created="2020-04-13 22:06:46.0" updated="2020-07-20 14:06:43.0" votes="0" watches="6" workflowId="58727" archived="N"> <description><! CDATA Test with release-v1.4 branch (b03b3d9fe at April 10, 2020).  Repeatedly add or remove OSN (seeÂ etcdraft_reconfig_test.go in the attachment).  Sometimes, there will be OSN panic with log of  ```   e  OrdererOrg.orderer2  2020-04-13 14:33:47.417 PDT  orderer.common.cluster  applyMembershipConfig -> INFO 10a 3 exists in both old and new membership for channel testchannel , skipping its deactivation e  OrdererOrg.orderer2  2020-04-13 14:33:47.417 PDT  orderer.common.cluster  applyMembershipConfig -> INFO 10a 3 exists in both old and new membership for channel testchannel , skipping its deactivation e  OrdererOrg.orderer2  2020-04-13 14:33:47.417 PDT  orderer.common.cluster  applyMembershipConfig -> INFO 10b 5 exists in both old and new membership for channel testchannel , skipping its deactivation e  OrdererOrg.orderer2  2020-04-13 14:33:47.417 PDT  orderer.common.cluster  Configure -> INFO 10c Exiting e  OrdererOrg.orderer2  panic: runtime error: invalid memory address or nil pointer dereference e  OrdererOrg.orderer2   signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x482498f  e  OrdererOrg.orderer2  e  OrdererOrg.orderer2  goroutine 631  running : e  OrdererOrg.orderer2  github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).apply(0xc0000ee780, 0xc00014fdf8, 0x1, 0x7) e  OrdererOrg.orderer2  /Users/baohua/Workspace/Go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:1109 +0xc2f e  OrdererOrg.orderer2  github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).serveRequest(0xc0000ee780) e  OrdererOrg.orderer2  /Users/baohua/Workspace/Go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:756 +0x975 e  OrdererOrg.orderer2  created by github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).Start e  OrdererOrg.orderer2  /Users/baohua/Workspace/Go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:340 +0x230  ```  The full log can be found in the attachment ginkgo-result2.log.  ></description> </Issue>
