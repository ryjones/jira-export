<Issue id="28590" key="FAB-8918" number="8918" project="10002" reporter="yacovm" assignee="angelo.decaro" creator="yacovm" type="10004" summary="Save viper lookup variable when obtaining reference to local MSP" priority="3" resolution="10000" status="6" created="2018-03-16 08:34:18.0" updated="2018-07-20 14:16:02.0" resolutiondate="2018-03-22 14:09:21.0" votes="0" watches="1" workflowId="41557"> <description><! CDATA The  viper lookup|https://github.com/hyperledger/fabric/blob/master/msp/mgmt/mgmt.go#L159  below takes about hundred micro-seconds to complete.  {code} 		mspType := viper.GetString("peer.localMspType") 		if mspType == "" { 			mspType = msp.ProviderTypeToString(msp.FABRIC) } {code}  This is invoked each time the local MSP reference is fetched for the sake of other services in the peer such as gossip.   An alternative way of removing the viper lookup from the critical path, is to move the lookup into the block that is protected by the lock, so that it is only performed once.   ></description> </Issue>
