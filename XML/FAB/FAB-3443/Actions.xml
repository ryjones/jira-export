<Action id="23062" issue="16038" author="c0rwin" type="comment" created="2017-04-27 10:41:42.0" updateauthor="c0rwin" updated="2017-04-27 10:41:42.0"> <body><! CDATA  ~amber-zhang  Does this specific to the gossip module only and with others work ok? Can you provide a bit more description and details?  ~wlahti  Can you please take a look on that one?  ></body> </Action>
<Action id="23064" issue="16038" author="wlahti" type="comment" created="2017-04-27 12:27:44.0" updateauthor="wlahti" updated="2017-04-27 12:27:44.0"> <body><! CDATA The title looks incorrect for this JIRA; I think, as the copied logs show, that the issue is with `getlevel` and not `revertlevels`.   As for why it's not working, `getlevel` doesn't currently support regular expressions like `setlevel` does. At the moment, you need to specify the module and any submodule name exactly as it appears in the logs to get the level for each individual module/submodule (e.g. gossip/discovery#peer0:7051).   I should update `getlevel` to include the regular expression feature as well and will get to that as soon as possible.   ></body> </Action>
<Action id="23068" issue="16038" author="wlahti" type="comment" created="2017-04-27 15:40:24.0" updateauthor="wlahti" updated="2017-04-27 15:42:53.0"> <body><! CDATA This may need to wait for post v1.0 as it will require a proto change to return an array that contains the module names and log levels for each log module that matches the regular expression. I'll be sure to at least work with someone to document the operational side of using the logging framework for v1.0.  See my comment above for how to properly use the `getlevel` function with the current design.   ></body> </Action>
<Action id="23175" issue="16038" author="wlahti" type="comment" body=" ~amber-zhang  Is this an issue with getlevel or revertlevels? The title mentions revertlevels while the logs show getlevel. " created="2017-04-28 18:41:28.0" updateauthor="wlahti" updated="2017-04-28 18:41:28.0"/>
<Action id="23320" issue="16038" author="amber-zhang" type="comment" created="2017-05-03 05:37:18.0" updateauthor="amber-zhang" updated="2017-05-03 05:37:18.0"> <body><! CDATA Hi Will,  I modified the title. The problem is at getlevel. Sorry for the confusing!  'getlevel' works well with full module/submodule.  Following, should I keep the bug open for future enhancing 'getlevel' with regular expression? or close it, then open a new bug for it? thanks  root@3385917a20a4:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer1:7051 peer logging getlevel gossip/discovery#peer1:7051 2017-05-03 05:28:02.974 UTC  cli/logging  getLevel -> INFO 001 Current log level for peer module 'gossip/discovery#peer1:7051': WARNING 2017-05-03 05:28:02.974 UTC  main  main -> INFO 002 Exiting..... root@3385917a20a4:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0:7051 peer logging getlevel gossip/discovery#peer0:7051 2017-05-03 05:28:16.815 UTC  cli/logging  getLevel -> INFO 001 Current log level for peer module 'gossip/discovery#peer0:7051': CRITICAL 2017-05-03 05:28:16.816 UTC  main  main -> INFO 002 Exiting.....  root@3385917a20a4:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0:7051 peer logging getlevel gossip/service       2017-05-03 05:31:16.948 UTC  cli/logging  getLevel -> INFO 001 Current log level for peer module 'gossip/service': CRITICAL 2017-05-03 05:31:16.948 UTC  main  main -> INFO 002 Exiting..... root@3385917a20a4:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0:7051 peer logging getlevel gossip/state   2017-05-03 05:31:21.901 UTC  cli/logging  getLevel -> INFO 001 Current log level for peer module 'gossip/state': CRITICAL 2017-05-03 05:31:21.901 UTC  main  main -> INFO 002 Exiting..... root@3385917a20a4:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer1:7051 peer logging getlevel gossip/state 2017-05-03 05:31:32.548 UTC  cli/logging  getLevel -> INFO 001 Current log level for peer module 'gossip/state': WARNING 2017-05-03 05:31:32.549 UTC  main  main -> INFO 002 Exiting..... root@3385917a20a4:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer1:7051 peer logging getlevel gossip/election 2017-05-03 05:31:50.930 UTC  cli/logging  getLevel -> INFO 001 Current log level for peer module 'gossip/election': WARNING 2017-05-03 05:31:50.931 UTC  main  main -> INFO 002 Exiting..... root@3385917a20a4:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer1:7051 peer logging getlevel gossip/pull#peer1:7051 2017-05-03 05:32:16.097 UTC  cli/logging  getLevel -> INFO 001 Current log level for peer module 'gossip/pull#peer1:7051': WARNING 2017-05-03 05:32:16.097 UTC  main  main -> INFO 002 Exiting.....   ></body> </Action>
<Action id="23337" issue="16038" author="wlahti" type="comment" created="2017-05-03 14:42:12.0" updateauthor="wlahti" updated="2017-05-03 14:44:12.0"> <body><! CDATA I think it would be best to open a new JIRA item to track that additional feature.   I will do one quick change related to this item to improve the CLI output statement for 'setlevel', making it clear that it's using regular expressions.  For example, {code} root@18c5c1c69e6d:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0:7051 peer logging setlevel gossip warning {code}  will now display: {code} Log level set for peer modules matching regular expression 'gossip': WARNING {code}  ></body> </Action>
<Action id="23342" issue="16038" author="wlahti" type="comment" body="https://gerrit.hyperledger.org/r/#/c/8893/ improves the output for &apos;setlevel&apos; and updates the usage descriptions for both &apos;getlevel&apos; and &apos;setlevel&apos;." created="2017-05-03 14:59:37.0" updateauthor="wlahti" updated="2017-05-03 14:59:37.0"/>
<Action id="23519" issue="16038" author="amber-zhang" type="comment" created="2017-05-08 10:16:15.0" updateauthor="amber-zhang" updated="2017-05-08 10:16:15.0"> <body><! CDATA Verified. Setlevel and getlevel works as design!  root@f584c2ffab1d:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer logging setlevel gossip warning 2017-05-08 10:02:54.463 UTC  cli/logging  setLevel -> INFO 004 Log level set for peer modules matching regular expression 'gossip': WARNING 2017-05-08 10:02:54.463 UTC  main  main -> INFO 005 Exiting.....  Â   root@f584c2ffab1d:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer logging getlevel gossip/pull  2017-05-08 10:05:18.282 UTC  cli/logging  getLevel -> INFO 004 Current log level for peer module 'gossip/pull': WARNING 2017-05-08 10:05:18.282 UTC  main  main -> INFO 005 Exiting.....  ></body> </Action>
