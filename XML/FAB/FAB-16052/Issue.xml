<Issue id="41375" key="FAB-16052" number="16052" project="10002" reporter="rameshthoomu" assignee="joe-alewine" creator="rameshthoomu" type="10004" summary="Chaincode Upgrade in release-1.3 is expecting 4 args." priority="4" resolution="10000" status="6" created="2019-07-23 23:40:58.0" updated="2019-10-16 21:32:38.0" resolutiondate="2019-10-16 21:32:38.0" votes="0" watches="2" workflowId="54382"> <description><! CDATA Observed below error while upgrading chaincode from 1.0 to 1.1 on one of the peer. See the command listed here https://hyperledger-fabric.readthedocs.io/en/release-1.3/commands/peerchaincode.html?highlight=upgrade%20chaincode#peer-chaincode-upgrade-example  root@a829385ceecb:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer chaincode install -n mycc -v 1.1 -p github.com/chaincode/chaincode_example02/go/ 2019-07-23 23:37:05.375 UTC  chaincodeCmd  checkChaincodeCmdParams -> INFO 001 Using default escc 2019-07-23 23:37:05.375 UTC  chaincodeCmd  checkChaincodeCmdParams -> INFO 002 Using default vscc 2019-07-23 23:37:05.600 UTC  chaincodeCmd  install -> INFO 003 Installed remotely {color:red}response:<status:200 payload:"OK" >{color} root@a829385ceecb:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer chaincode upgrade -o orderer.example.com:7050 --tls --cafile $ORDERER_CA -C mychannel -n mycc -v 1.1 -c '{"Args": "init","a","100","b","200",{color:red}*"c","300"*{color} }' -P "AND ('Org1MSP.peer','Org2MSP.peer')" 2019-07-23 23:37:09.775 UTC  chaincodeCmd  checkChaincodeCmdParams -> INFO 001 Using default escc 2019-07-23 23:37:09.776 UTC  chaincodeCmd  checkChaincodeCmdParams -> INFO 002 Using default vscc {color:red}Error: could not assemble transaction, err proposal response was not successful, error code 500, msg transaction returned with failure: Incorrect number of arguments. Expecting 4{color} root@a829385ceecb:/opt/gopath/src/github.com/hyperledger/fabric/peer#  I see the chaincode is upgraded to newer version  Rameshs-MBP:~ thoomu@us.ibm.com$ docker ps CONTAINER ID        IMAGE                                                                                                  COMMAND                  CREATED             STATUS              PORTS                                              NAMES 9222dba8f847        dev-peer1.org1.example.com-mycc-1.1-0e1b19f1366fab8cc9dca2d19d3709f9d357accf8f210278ec23ae00f2b0609f   "chaincode -peer.addâ€¦"   4 minutes ago       Up 4 minutes                                                           dev-peer1.org1.example.com-mycc-1.1   root@a829385ceecb:/opt/gopath/src/github.com/hyperledger/fabric/peer# *peer chaincode list --instantiated -C $CHANNEL_NAME* Get instantiated chaincodes on channel mychannel: Name: mycc, Version: 1.0, Path: github.com/chaincode/chaincode_example02/go/, Escc: escc, Vscc: vscc root@a829385ceecb:/opt/gopath/src/github.com/hyperledger/fabric/peer# #peer chaincode list --instantiated -C $CHANNEL_NAME root@a829385ceecb:/opt/gopath/src/github.com/hyperledger/fabric/peer# *peer chaincode list --installed* Get installed chaincodes on peer: Name: mycc, Version: 1.0, Path: github.com/chaincode/chaincode_example02/go/, Id: 333a19b11063d0ade7be691f9f22c04ad369baba15660f7ae9511fd1a6488209 {color:red}Name: mycc, Version: 1.1, Path: github.com/chaincode/chaincode_example02/go/, Id: 1ba04ff1994d31709d633ff97e7fb3c2d629011ad6422913937c9523ee86ce99{color} root@a829385ceecb:/opt/gopath/src/github.com/hyperledger/fabric/peer#  Chaincode Log:  Rameshs-MBP:~ thoomu@us.ibm.com$ docker logs -f dev-peer0.org2.example.com-mycc-1.1 2019-07-23 23:49:18.740 UTC  shim  2 -> ERRO 001  fc6357e7  Init get error response. Sending ERROR ex02 Init  Peer Log:  2019-07-23 23:48:54.960 UTC  endorser  callChaincode -> INFO 06d    19d1a3cb  Entry chaincode: name:"lscc" 2019-07-23 23:48:54.961 UTC  lscc  executeInstall -> INFO 06e Installed Chaincode  mycc  Version  1.1  to peer 2019-07-23 23:48:54.961 UTC  endorser  callChaincode -> INFO 06f    19d1a3cb  Exit chaincode: name:"lscc"  (1ms) 2019-07-23 23:49:01.025 UTC  endorser  callChaincode -> INFO 070  mychannel  fc6357e7  Entry chaincode: name:"lscc" 2019-07-23 23:49:01.034 UTC  golang-platform  GenerateDockerBuild -> INFO 071 building chaincode with ldflagsOpt: '-ldflags "-linkmode external -extldflags '-static'"' 2019-07-23 23:49:01.034 UTC  golang-platform  GenerateDockerBuild -> INFO 072 building chaincode with tags: 2019-07-23 23:49:18.740 UTC  endorser  callChaincode -> INFO 073  mychannel  fc6357e7  Exit chaincode: name:"lscc"  (17715ms) 2019-07-23 23:49:18.741 UTC  endorser  SimulateProposal -> ERRO 074  mychannel  fc6357e7  failed to invoke chaincode name:"lscc" , error: transaction returned with failure: Incorrect number of arguments. Expecting 4 github.com/hyperledger/fabric/core/chaincode.processChaincodeExecutionResult 	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:257 github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).ExecuteLegacyInit 	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:225 github.com/hyperledger/fabric/core/endorser.(*SupportImpl).ExecuteLegacyInit 	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/support.go:131 github.com/hyperledger/fabric/core/endorser.(*Endorser).callChaincode 	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:179 github.com/hyperledger/fabric/core/endorser.(*Endorser).SimulateProposal 	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:237 github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal 	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:456 github.com/hyperledger/fabric/core/handlers/auth/filter.(*expirationCheckFilter).ProcessProposal 	/opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/expiration.go:61 github.com/hyperledger/fabric/core/handlers/auth/filter.(*filter).ProcessProposal 	/opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/filter.go:32 github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler 	/opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:162 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1011 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1249 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:680 runtime.goexit 	/opt/go/src/runtime/asm_amd64.s:2361  ></description> </Issue>
