<Issue id="36987" key="FAB-13784" number="13784" project="10002" reporter="mastersingh24" creator="mastersingh24" type="10004" summary="gossip/discovery  - TestMsgStoreExpirationWithMembershipMessages" priority="4" resolution="10203" status="6" created="2019-01-21 12:57:13.0" updated="2019-12-03 20:58:28.0" resolutiondate="2019-12-03 20:25:19.0" votes="0" watches="5" workflowId="48554"> <description><! CDATA   {code:java} --- FAIL: TestMsgStoreExpirationWithMembershipMessages (75.01s) discovery_test.go:1334:  	Error Trace:	discovery_test.go:1334 	            				discovery_test.go:1346 	Error:      	Should be empty, but was map localhost:22610:1548073722977584517, 226  	Test:       	TestMsgStoreExpirationWithMembershipMessages 	Messages:   	 Step3 - expiration in msg store  Data from alive msg still exists in deadLastTS of discovery inst 1 discovery_test.go:1335:  	Error Trace:	discovery_test.go:1335 	            				discovery_test.go:1346 	Error:      	Should be empty, but was map localhost:22610:Endpoint: localhost:22610, InternalEndpoint: localhost:22610, PKI-ID: 6c6f63616c686f73743a3232363130, Metadata:   	Test:       	TestMsgStoreExpirationWithMembershipMessages 	Messages:   	 Step3 - expiration in msg store  id2Member mapping still still contains data related to Alive msg: discovery inst 1 discovery_test.go:1338:  	Error Trace:	discovery_test.go:1338 	            				discovery_test.go:1346 	Error:      	Should be zero, but was 1 	Test:       	TestMsgStoreExpirationWithMembershipMessages 	Messages:   	 Step3 - expiration in msg store  Dead membership list is not empty, discovery instance1 discovery_test.go:1334:  	Error Trace:	discovery_test.go:1334 	            				discovery_test.go:1367 	Error:      	Should be empty, but was map localhost:22610:1548073722977584517, 226  	Test:       	TestMsgStoreExpirationWithMembershipMessages 	Messages:   	 Step4 - memReq processing after expiration  Data from alive msg still exists in deadLastTS of discovery inst 1 discovery_test.go:1335:  	Error Trace:	discovery_test.go:1335 	            				discovery_test.go:1367 	Error:      	Should be empty, but was map localhost:22610:Endpoint: localhost:22610, InternalEndpoint: localhost:22610, PKI-ID: 6c6f63616c686f73743a3232363130, Metadata:   	Test:       	TestMsgStoreExpirationWithMembershipMessages 	Messages:   	 Step4 - memReq processing after expiration  id2Member mapping still still contains data related to Alive msg: discovery inst 1 discovery_test.go:1338:  	Error Trace:	discovery_test.go:1338 	            				discovery_test.go:1367 	Error:      	Should be zero, but was 1 	Test:       	TestMsgStoreExpirationWithMembershipMessages 	Messages:   	 Step4 - memReq processing after expiration  Dead membership list is not empty, discovery instance1 discovery_test.go:1333:  	Error Trace:	discovery_test.go:1333 	            				discovery_test.go:1384 	Error:      	Should be empty, but was map localhost:22610:1548073722977584517, 276  	Test:       	TestMsgStoreExpirationWithMembershipMessages 	Messages:   	 Step5.1 - after lost old aliveMsg process  Data from alive msg still exists in aliveLastTS of discovery inst 1 discovery_test.go:1335:  	Error Trace:	discovery_test.go:1335 	            				discovery_test.go:1384 	Error:      	Should be empty, but was map localhost:22610:Endpoint: localhost:22610, InternalEndpoint: localhost:22610, PKI-ID: 6c6f63616c686f73743a3232363130, Metadata:   	Test:       	TestMsgStoreExpirationWithMembershipMessages 	Messages:   	 Step5.1 - after lost old aliveMsg process  id2Member mapping still still contains data related to Alive msg: discovery inst 1 discovery_test.go:1337:  	Error Trace:	discovery_test.go:1337 	            				discovery_test.go:1384 	Error:      	Should be zero, but was 1 	Test:       	TestMsgStoreExpirationWithMembershipMessages 	Messages:   	 Step5.1 - after lost old aliveMsg process  Alive membership list is not empty, discovery instance1 discovery_test.go:1333:  	Error Trace:	discovery_test.go:1333 	            				discovery_test.go:1385 	Error:      	Should be empty, but was map localhost:22610:1548073722977584517, 276  	Test:       	TestMsgStoreExpirationWithMembershipMessages 	Messages:   	 Step5.2 - after lost new aliveMsg process  Data from alive msg still exists in aliveLastTS of discovery inst 1 discovery_test.go:1335:  	Error Trace:	discovery_test.go:1335 	            				discovery_test.go:1385 	Error:      	Should be empty, but was map localhost:22610:Endpoint: localhost:22610, InternalEndpoint: localhost:22610, PKI-ID: 6c6f63616c686f73743a3232363130, Metadata:   	Test:       	TestMsgStoreExpirationWithMembershipMessages 	Messages:   	 Step5.2 - after lost new aliveMsg process  id2Member mapping still still contains data related to Alive msg: discovery inst 1 discovery_test.go:1337:  	Error Trace:	discovery_test.go:1337 	            				discovery_test.go:1385 	Error:      	Should be zero, but was 1 	Test:       	TestMsgStoreExpirationWithMembershipMessages 	Messages:   	 Step5.2 - after lost new aliveMsg process  Alive membership list is not empty, discovery instance1 discovery_test.go:1333:  	Error Trace:	discovery_test.go:1333 	            				discovery_test.go:1410 	Error:      	Should be empty, but was map localhost:22610:1548073722977584517, 276  	Test:       	TestMsgStoreExpirationWithMembershipMessages 	Messages:   	 Step6 - after lost MembershipResp process  Data from alive msg still exists in aliveLastTS of discovery inst 1 discovery_test.go:1335:  	Error Trace:	discovery_test.go:1335 	            				discovery_test.go:1410 	Error:      	Should be empty, but was map localhost:22610:Endpoint: localhost:22610, InternalEndpoint: localhost:22610, PKI-ID: 6c6f63616c686f73743a3232363130, Metadata:   	Test:       	TestMsgStoreExpirationWithMembershipMessages 	Messages:   	 Step6 - after lost MembershipResp process  id2Member mapping still still contains data related to Alive msg: discovery inst 1 discovery_test.go:1337:  	Error Trace:	discovery_test.go:1337 	            				discovery_test.go:1410 	Error:      	Should be zero, but was 1 	Test:       	TestMsgStoreExpirationWithMembershipMessages 	Messages:   	 Step6 - after lost MembershipResp process  Alive membership list is not empty, discovery instance1 FAIL coverage: 86.6% of statements FAIL	github.com/hyperledger/fabric/gossip/discovery	82.078s {code}    ></description> </Issue>
