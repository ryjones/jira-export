<Issue id="20103" key="FAB-5711" number="5711" project="10002" reporter="guoger" assignee="guoger" creator="guoger" type="10004" summary="LastOffsetPersisted should be inserted to block in config update path" priority="3" resolution="10000" status="6" created="2017-08-10 15:00:30.0" updated="2018-07-20 14:14:03.0" resolutiondate="2017-08-14 14:11:11.0" votes="0" watches="2" workflowId="39700"> <description><! CDATA {code:java} case msgprocessor.ConfigUpdateMsg: 	_, err := support.ProcessNormalMsg(env) 	if err != nil { 		logger.Warningf(" channel: %s  Discarding bad config message: %s", support.ChainID(), err) 		break 	}  	batch := support.BlockCutter().Cut() 	if batch != nil { 		block := support.CreateNextBlock(batch) 		support.WriteBlock(block, nil) 	} 	block := support.CreateNextBlock(  *cb.Envelope{env}) 	support.WriteConfigBlock(block, nil) 	*timer = nil {code} In current implementation of config processing path, {{LastOffsetPersisted}} is not inserted into newly created block, neither is {{lastCutBlockNumber}} incremented by 1.  ></description> </Issue>
