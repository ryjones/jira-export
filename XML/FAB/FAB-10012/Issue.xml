<Issue id="30129" key="FAB-10012" number="10012" project="10002" reporter="rhegde" assignee="gennadyl" creator="rhegde" type="10004" summary="Peer does not reset the retry count for idle channel" priority="3" resolution="10000" status="6" created="2018-05-11 03:26:06.0" updated="2018-07-20 14:16:37.0" resolutiondate="2018-05-30 12:03:28.0" votes="0" watches="4" workflowId="42142"> <description><! CDATA Fabric Release - 1.0.6  Setup - Orderer with Kafka Consensus     Step to reproduce -   1. Peer is connected to the ord01 and the connection reset between them for the channel.  {code:java} 2018-05-10 08:49:19.811 CEST  deliveryClient  try -> WARN 2352 Got error: rpc error: code = Internal desc = stream terminated by RST_STREAM with error code: 2 , at 1 attempt. Retrying in 1s{code} 2.  Peer re-attempt the connection successfully for the channel. Ensure there is absolutely no ledger transactions on that channel. Again there is connection RST between that peer and orderer. {code:java} 2018-05-10 08:51:06.606 CEST  deliveryClient  try -> WARN 248e Got error: rpc error: code = Internal desc = stream terminated by RST_STREAM with error code: 2 , at 1 attempt. Retrying in 1s {code}   3. Peer re-attempt the connection successfully for the channel. Ensure there is absolutely no ledger transactions on that channel. Again there is connection RST between that peer and orderer.  {code:java} 018-05-10 09:04:20.827 CEST  deliveryClient  try -> WARN 2dbb Got error: rpc error: code = Internal desc = stream terminated by RST_STREAM with error code: 2 , at 2 attempt. Retrying in 2s{code}    Even after a successfully connection by peer ,the retry count is not reset.  Following pattern continues for 10 retry count whose wait seconds before connection retry is 512 seconds > 5 mins.  Since this crosses the threshold retry connect time - peer  gives up and does not perform any further connection retry with the orderer. The only option is restarting the Peer process.  ></description> </Issue>
