<Issue id="16159" key="FAB-3562" number="3562" project="10002" reporter="rhegde" assignee="wlahti" creator="rhegde" type="10004" summary="Peer CLI provides incorrect status code o/p for Successful Endorsement Response" priority="2" resolution="10000" status="6" created="2017-05-02 15:20:59.0" updated="2018-07-20 14:12:30.0" resolutiondate="2017-06-02 18:53:52.0" votes="0" watches="3" workflowId="38259"> <description><! CDATA Endorsement response code from 0 to 499 are marked as Endorsement Success. However our chaincode logic uses values from this range and this is used further by client to determine and execute response code specific operations.  We see a defect in Peer CLI output where for example Endorsement Response code set as 201 is returned as 200.   {quote} 2017-05-02 15:00:50.917 UTC  msp  Sign -> DEBU 006 Sign: digest: E4E1F2AE1CFDA1A84FFC8E0C730DE5BD22F1DCA3A82F37BCCD7DBBC45957CD62 2017-05-02 15:00:50.919 UTC  chaincodeCmd  chaincodeInvokeOrQuery -> INFO 007 Invoke result: version:1 response:<status:200 message:"OK" payload:"{\"participantShortName\":\"BANK2\",\"nettingGroupName\":\"TESTING2\",\"currencyIso\":\"USD\",\"nettingCutOffTime\":\"07:21:00\",\"nettingCutOffTimeShift\":0}" > payload:"\n o\315mF\325T&\347\r\210O\006\210\247\247a6\320E\"\236\000\342\343\3357<\020\005\327AB\022\272\002\nd\022\030\n\004lscc\022\020\n\016\n\006public\022\004\010\001\020\001\022H\n\006public\022>\n\022\n\nCLS001_101\022\004\010\002\020\001\n(\n CLS005_BANK2_TESTING2_2017-03-28\022\004\010\003\020\001\032\321\001\010\311\001\022=netting group response populated with default netting cut-off\032\214\001{\"participantShortName\":\"BANK2\",\"nettingGroupName\":\"TESTING2\",\"currencyIso\":\"USD\",\"nettingCutOffTime\":\"07:21:00\",\"nettingCutOffTimeShift\":0}" endorsement:<endorser:"\n\007Org0MSP\022\210\004-----BEGIN -----\nMIIBYzCCAQmgAwIBAwICA+gwCgYIKoZIzj0EAwIwEzERMA8GA1UEAwwIcGVlck9y\nZzAwHhcNMTcwMjIwMTkwNjExWhcNMTgwMjIwMTkwNjExWjAQMQ4wDAYDVQQDDAVw\nZWVyMDBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABEF6dfqjqfbIgZuOR+dgoJMl\n/FaUlGI70A/ixmVUY83Yp4YtV3FDBSOPiO5O+s8pHnpbwB1LqhrxAx1Plr0M/UWj\nUDBOMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFBY2bc84vLEwkX1fSAER2p48jJXw\nMB8GA1UdIwQYMBaAFFQzuQR1RZP/Qn/BNDtGSa8n4eN/MAoGCCqGSM49BAMCA0gA\nMEUCIQDeDZ71L+OTYcbbqiDNRf0L8OExO59mH1O3xpdwMAM0MgIgXySG4sv9yV31\nWcWRFfRFyu7o3T72kqiLZ1nkDuJ8jWI=\n-----END -----\n" signature:"0D\002 L^>\363\237\376\tI;\231\346<\027\212T\006\0325\200\033\277\272\032\013\224l,'%\006sK\002 \021\323V\350tdN>Nc\330\030\276\302\014T\202\002\375\206\257\353\352,\204\320\346`\031\014K\333" > 2017-05-02 15:00:50.920 UTC  main  main -> INFO 008 Exiting..... {quote}  At the same time - this is another thing to fix (https://github.com/hyperledger/fabric/blob/master/protos/peer/proposal_response.proto#L58)? 1. 'message' field is populated with "OK" whereas user-chain-code had populated it with "netting group response populated with default netting cut-off"  note: 'payload' byte array field is populated by a JSON byte array by user-chaincode which can be seen as string translated in the 'Payload' field.   This is run on 19th April published Fabric Images on CI Channel (https://chat.hyperledger.org/channel/fabric-ci?msg=7jxNech7WzkP9ngi3)  *Impact*: Our chaincode E2E testing is performed using Peer CLI and this information is helpful to confirm whether this is really part of the response before we start integrating with the HFC using SDK.  ></description> </Issue>
