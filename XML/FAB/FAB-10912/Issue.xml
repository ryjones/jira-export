<Issue id="31445" key="FAB-10912" number="10912" project="10002" reporter="sykesm" assignee="sykesm" creator="sykesm" type="10004" summary="TestPluginLoadingFailure fails on MacOS #2" priority="3" resolution="10000" status="6" created="2018-06-28 14:27:49.0" updated="2018-07-20 14:17:04.0" resolutiondate="2018-07-05 15:09:29.0" votes="0" watches="1" workflowId="42566"> <description><! CDATA {code:java} --- FAIL: TestPluginLoadingFailure (2.89s)     --- FAIL: TestPluginLoadingFailure/ENDORSERS_ESCC (0.07s)         Error Trace:    main_test.go:45     Error:      "2018-06-28 10:26:21.279 EDT  nodeCmd  serve -> INFO 001 Starting peer:     	           	Version: latest     	           	Commit SHA: development build     	           	Go version: go1.10.3     	           	OS/Arch: darwin/amd64     	           	Experimental features: true     	           	Chaincode:                   Base Image Version: 0.4.8                   Base Docker Namespace: hyperledger                   Base Docker Label: org.hyperledger.fabric                   Docker Namespace: hyperledger     	                            2018-06-28 10:26:21.279 EDT  ledgermgmt  initialize -> INFO 002 Initializing ledger mgmt                 2018-06-28 10:26:21.279 EDT  kvledger  NewProvider -> INFO 003 Initializing ledger provider                 panic: Error while trying to create dir if missing: mkdir /var/hyperledger: permission denied     	                            goroutine 1  running :                 github.com/hyperledger/fabric/common/ledger/util/leveldbhelper.(*DB).Open(0xc420037c00)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/common/ledger/util/leveldbhelper/leveldb_helper.go:84 +0x2dc                 github.com/hyperledger/fabric/core/ledger/kvledger.openIDStore(0xc4200b5a80, 0x36, 0x1)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:250 +0x11d                 github.com/hyperledger/fabric/core/ledger/kvledger.NewProvider(0x4a5cf80, 0x0, 0x0, 0x0)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:60 +0x8e                 github.com/hyperledger/fabric/core/ledger/ledgermgmt.initialize(0xc420031650, 0x0, 0x0, 0x0)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:65 +0x26f                 github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize.func1()                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:52 +0x3b                 sync.(*Once).Do(0x52b1220, 0xc4204a55d0)                 /usr/local/Cellar/go/1.10.3/libexec/src/sync/once.go:44 +0xbe                 github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize(0xc420031650)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:51 +0x4d                 github.com/hyperledger/fabric/peer/node.serve(0x52b1128, 0x0, 0x0, 0x0, 0x0)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/peer/node/start.go:153 +0x34d                 github.com/hyperledger/fabric/peer/node.glob..func1(0x526dde0, 0x52b1128, 0x0, 0x0, 0x0, 0x0)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/peer/node/start.go:111 +0x9c                 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0x526dde0, 0x52b1128, 0x0, 0x0, 0x526dde0, 0x52b1128)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:698 +0x46d                 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x526e440, 0x5293790, 0xf, 0x8)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:783 +0x2e4                 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x526e440, 0x8, 0xffffffffffffffff)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:736 +0x2b                 main.main()                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/peer/main.go:97 +0x5bf                 " does not contain "panic: Error opening plugin at path testdata/invalid_plugins/invalidplugin.so"     Test:       TestPluginLoadingFailure/ENDORSERS_ESCC         Error Trace:    main_test.go:46     Error:      "2018-06-28 10:26:21.279 EDT  nodeCmd  serve -> INFO 001 Starting peer:     	           	Version: latest     	           	Commit SHA: development build     	           	Go version: go1.10.3     	           	OS/Arch: darwin/amd64     	           	Experimental features: true     	           	Chaincode:                   Base Image Version: 0.4.8                   Base Docker Namespace: hyperledger                   Base Docker Label: org.hyperledger.fabric                   Docker Namespace: hyperledger     	                            2018-06-28 10:26:21.279 EDT  ledgermgmt  initialize -> INFO 002 Initializing ledger mgmt                 2018-06-28 10:26:21.279 EDT  kvledger  NewProvider -> INFO 003 Initializing ledger provider                 panic: Error while trying to create dir if missing: mkdir /var/hyperledger: permission denied     	                            goroutine 1  running :                 github.com/hyperledger/fabric/common/ledger/util/leveldbhelper.(*DB).Open(0xc420037c00)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/common/ledger/util/leveldbhelper/leveldb_helper.go:84 +0x2dc                 github.com/hyperledger/fabric/core/ledger/kvledger.openIDStore(0xc4200b5a80, 0x36, 0x1)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:250 +0x11d                 github.com/hyperledger/fabric/core/ledger/kvledger.NewProvider(0x4a5cf80, 0x0, 0x0, 0x0)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:60 +0x8e                 github.com/hyperledger/fabric/core/ledger/ledgermgmt.initialize(0xc420031650, 0x0, 0x0, 0x0)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:65 +0x26f                 github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize.func1()                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:52 +0x3b                 sync.(*Once).Do(0x52b1220, 0xc4204a55d0)                 /usr/local/Cellar/go/1.10.3/libexec/src/sync/once.go:44 +0xbe                 github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize(0xc420031650)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:51 +0x4d                 github.com/hyperledger/fabric/peer/node.serve(0x52b1128, 0x0, 0x0, 0x0, 0x0)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/peer/node/start.go:153 +0x34d                 github.com/hyperledger/fabric/peer/node.glob..func1(0x526dde0, 0x52b1128, 0x0, 0x0, 0x0, 0x0)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/peer/node/start.go:111 +0x9c                 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0x526dde0, 0x52b1128, 0x0, 0x0, 0x526dde0, 0x52b1128)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:698 +0x46d                 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x526e440, 0x5293790, 0xf, 0x8)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:783 +0x2e4                 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x526e440, 0x8, 0xffffffffffffffff)                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:736 +0x2b                 main.main()                 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/peer/main.go:97 +0x5bf                 " does not contain "plugin.Open"     Test:       TestPluginLoadingFailure/ENDORSERS_ESCC{code}  ></description> </Issue>
