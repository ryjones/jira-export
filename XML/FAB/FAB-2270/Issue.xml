<Issue id="14832" key="FAB-2270" number="2270" project="10002" reporter="ratnakar" creator="ratnakar" type="10004" summary="Unable to deploy chaincode using certificates generated from behave tests with default chainid &quot;testchainid&quot;" priority="2" resolution="10000" status="6" created="2017-02-16 17:19:18.0" updated="2018-07-20 14:11:40.0" resolutiondate="2017-02-19 06:09:50.0" votes="0" watches="2" workflowId="37466"> <description><! CDATA Commit Level : **3a61f6b61be404eb778d5d1be5179795eca218d0**   It is possible to deploy with default channel "testchainid" on a single peer. However, if we want to deploy chaincode on multiple orgs on defaultchannel "testchainid" using the behave generated certs it is throwing the below error.  {code} Error: Error endorsing chaincode: rpc error: code = 2 desc = The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority {code}   The step-by-step instructions for using the default channel are outlined here https://github.com/hyperledger/fabric/blob/master/docs/channel-setup.md   *Pre-requisites:*  * Vagrant  * Generate cert data from behave folder cd /opt/gopath/src/github.com/hyperledger/fabric/bddtests behave -k features/bootstrap.feature.  The above command generates certs for each org and stores under volume folder, For one run this is how it looks on my machine : {panel}bddtests/volumes/peer/7bbe3559ef4711e6866c0800275fb08f/peer0{panel}  * Used the docker-compose from here https://github.com/hyperledger/fabric/blob/master/docs/docker-compose-channel.yml edit docker-compose with below info  1. mount certs volume to orderer {code} volumes: - .bddtests/volumes/peer/7bbe3559ef4711e6866c0800275fb08f/peer0:/opt/gopath/src/github.com/hyperledger/fabric/orderer/msp {code}  2. mount chaincode to peer0 volume  {code} volumes: - /var/run/:/host/var/run/ - ./data/peer0:/etc/hyperledger/fabric/msp/sampleconfig - /opt/gopath/src/github.com/hyperledger/fabric/examples/:/opt/gopath/src/github.com/hyperledger/fabric/examples/ {code} 3. Also make sure peer is start with defaultchain true {code} command: peer node start --peer-defaultchain=true {code} and start the network {code} docker-compose -f docker-compose-channel.yml up -d {code} * Install chaincode on peer0 container {code} docker exec -e GOPATH=/opt/gopath -it peer0 bash {code} execute the below command in container {code} CORE_PEER_ADDRESS=peer0:7051 CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 peer chaincode install -C testchainid -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 {code} * Instantiate from CLI container {panel} docker exec -it cli bash {panel} {code} CORE_PEER_ADDRESS=peer0:7051 CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 peer chaincode instantiate -C testchainid -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{"Args": "init","a","100","b","200" }' {code}  At this step fails to instantiate the chaincode with below error: {code} 2017-02-16 16:28:08.442 UTC  logging  InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode' 2017-02-16 16:28:08.444 UTC  msp  GetLocalMSP -> DEBU 002 Returning existing local MSP 2017-02-16 16:28:08.444 UTC  msp  GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity 2017-02-16 16:28:08.446 UTC  chaincodeCmd  checkChaincodeCmdParams -> INFO 004 Using default escc 2017-02-16 16:28:08.446 UTC  chaincodeCmd  checkChaincodeCmdParams -> INFO 005 Using default vscc 2017-02-16 16:28:08.446 UTC  msp  Sign -> DEBU 006 Sign: plaintext: 0A87080A3F0803220B74657374636861...41554C540A04657363630A0476736363  2017-02-16 16:28:08.446 UTC  msp  Sign -> DEBU 007 Sign: digest: 90FF7EF2F5F6AC1AA7B27805E3BA4964D873AFE75F2830C4EA265251D77BE1A8  Error: Error endorsing chaincode: rpc error: code = 2 desc = The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority  {code}  ></description> </Issue>
