<Issue id="43247" key="FAB-17042" number="17042" project="10002" reporter="justformorefun" creator="justformorefun" type="10004" summary="cannot close gRPC stream for server when client calling stream  /protos.Deliver/DeliverFiltered" priority="2" status="10701" created="2019-11-11 02:58:18.0" updated="2020-03-25 17:10:20.0" votes="0" watches="4" workflowId="56354"> <description><! CDATA h6. 1 Issue Description  A fabric network bootstrapped with two channel created. And instaintiate a chaincode on two channels. When I invoke a chaincode' on a channel continually(such as, JMeter tool), at the same time I call other channel's chaincode once with tool,like Postman.  The surprising thing is the request from postman is over, but the peer side did not close method /protos.Deliver/DeliverFiltered stream for server.  h6. 2 Associated code and guess  The associated code is in common/deliver/deliver.go file. The (*Handler) Handle method body  has a for loop , within that loop calling (*Handler) deliverBlocks. When a client's incoming stream came, the server receives it and call deliverBlocks. And cannot exit from deliverBlocks due to seekInfo.Stop is math.MaxUint64.  In other words, server side cannot receive io.EOF. So the server side cannot close stream.  3 desired results  When client close the stream, so does the gRPC server side.     If more info needed for reproducing, I will add more.     ></description> </Issue>
