<Issue id="36434" key="FAB-13458" number="13458" project="10002" reporter="akshay.sood" creator="akshay.sood" type="10004" summary="Could not find default PKCS11 BCCSP when initializing fabric-ca-server v1.4.0" priority="2" resolution="10201" status="6" created="2018-12-31 06:18:06.0" updated="2018-12-31 07:16:05.0" resolutiondate="2018-12-31 07:15:52.0" votes="0" watches="1" workflowId="47967"> <description><! CDATA I am tring to init fabric-ca-server with pkcs11 set as default in BCCSP section.     fabric-ca-server version info: {code:java} $ fabric-ca-server version fabric-ca-server: Version: 1.4.0-snapshot-b191f9c Go version: go1.11.1 OS/Arch: linux/amd64 {code}  How I built the binaries of CA  {code:java} git checkout -b release-1.4 https://github.com/hyperledger/fabric-ca.git cd fabric-ca make all {code}   Modify bccsp section in fabric-ca-server-config.yaml  {code:java} bccsp: default: PKCS11 pkcs11: Library: /usr/local/lib/softhsm/libsofthsm2.so Pin: 1234 Label: Fabric2 hash: SHA2 security: 256 filekeystore: # The directory used for the software file-based keystore keystore: msp/keystore {code}  Now initialise fabric-ca-server {code:java} $ fabric-ca-server init -b admin:admin -d 2018/12/31 11:37:34  DEBUG  Home directory: /home/akshay/dev/fabric-ca/fabric-ca-server 2018/12/31 11:37:34  INFO  Configuration file location: /home/akshay/dev/fabric-ca/fabric-ca-server/fabric-ca-server-config.yaml 2018/12/31 11:37:34  DEBUG  Set log level:  2018/12/31 11:37:34  INFO  Server Version: 1.4.0-snapshot-b191f9c 2018/12/31 11:37:34  INFO  Server Levels: &{Identity:2 Affiliation:1 Certificate:1 Credential:1 RAInfo:1 Nonce:1} 2018/12/31 11:37:34  DEBUG  Making server filenames absolute 2018/12/31 11:37:34  DEBUG  Initializing default CA in directory /home/akshay/dev/fabric-ca/fabric-ca-server 2018/12/31 11:37:34  DEBUG  Init CA with home /home/akshay/dev/fabric-ca/fabric-ca-server and config {Version:1.4.0 Cfg:{Identities:{PasswordAttempts:10 AllowRemove:false} Affiliations:{AllowRemove:false}} CA:{Name: Keyfile: Certfile:ca-cert.pem Chainfile:ca-chain.pem} Signing:0xc000289ce0 CSR:{CN:ca.org1.example.com Names: {C:IN ST:Punjab L:Chandigarh O:org1.example.com OU:IT Services SerialNumber:}  Hosts: akshay localhost  KeyRequest:0xc00029e060 CA:0xc00029e0e0 SerialNumber:} Registry:{MaxEnrollments:-1 Identities: { Name:**** Pass:**** Type:client Affiliation: MaxEnrollments:0 Attrs:map hf.Registrar.Roles:* hf.Registrar.DelegateRoles:* hf.Revoker:1 hf.IntermediateCA:1 hf.GenCRL:1 hf.Registrar.Attributes:* hf.AffiliationMgr:1   } } Affiliations:map org1: department1 department2  org2: department1   LDAP:{ Enabled:false URL:ldap://****:****@<host>:<port>/<base> UserFilter:(uid=%s) GroupFilter:(memberUid=%s) Attribute:{ uid member   { }  map groups: { }  } TLS:{false    { }}  } DB:{ Type:sqlite3 Datasource:fabric-ca-server.db TLS:{false    { }}  } CSP:0xc00033fc40 Client:<nil> Intermediate:{ParentServer:{ URL: CAName:  } TLS:{Enabled:false CertFiles:   Client:{KeyFile: CertFile:}} Enrollment:{ Name: Secret:**** CAName: AttrReqs:   Profile: Label: CSR:<nil> Type:x509  }} CRL:{Expiry:24h0m0s} Idemix:{IssuerPublicKeyfile: IssuerSecretKeyfile: RevocationPublicKeyfile: RevocationPrivateKeyfile: RHPoolSize:1000 NonceExpiration:15s NonceSweepInterval:15m}} 2018/12/31 11:37:34  DEBUG  CA Home Directory: /home/akshay/dev/fabric-ca/fabric-ca-server 2018/12/31 11:37:34  DEBUG  Checking configuration file version '1.4.0' against server version: '1.4.0-snapshot-b191f9c' 2018/12/31 11:37:34  DEBUG  Initializing BCCSP: &{ProviderName:PKCS11 SwOpts:<nil> PluginOpts:<nil>} 2018/12/31 11:37:34  DEBUG  Closing server DBs 2018/12/31 11:37:34  FATAL  Initialization failure: Failed to initialize BCCSP Factories: %!s(<nil>) Could not find default `PKCS11` BCCSP {code}      ></description> </Issue>
