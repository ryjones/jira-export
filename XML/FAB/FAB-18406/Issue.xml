<Issue id="46512" key="FAB-18406" number="18406" project="10002" reporter="denyeart" creator="denyeart" type="10001" summary="Peer graceful shutdown" priority="2" status="10100" created="2021-01-25 14:54:36.0" updated="2021-10-13 08:34:23.0" votes="0" watches="2" workflowId="60455" archived="N"> <description><! CDATA Add an option to stop a peer gracefully, e.g. finish any commits and close channels before stopping peer abruptly.  Mihir recommend a preStop hook that does the following: - kubernetes calls the API/command to shutdown when the pod is supposed to be killed for any reason - process starts responding with 500 on /healthcheck endpoint. This will stop kubernetes from sending any calls to the pod. - process stops accepting connections - process cleanly closes all its out going connections, including any open dbs or files. - process terminates  ></description> </Issue>
