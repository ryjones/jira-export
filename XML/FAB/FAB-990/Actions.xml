<Action id="19685" issue="13321" author="jyellick" type="comment" created="2016-11-07 22:00:31.0" updateauthor="jyellick" updated="2016-11-07 22:00:31.0"> <body><! CDATA The queue size is intended to be configurable, and ultimately, we will coalesce the broadcast server paths to share this sort of configuration.  I do not however agree that we should turn this into a blocking all.  Making this a blocking call simply pushes the buffering into gRPC, so the gRPC must maintain a queue, and then block or fail.  By specifying the queue size in the application, the client can appropriately implement flow control.  If the client knows the queue size is set to 10 for instance, it can make sure that it sends only 10 requests, then sends only one request per ack it receives.  In this way, the client throttles itself to keep from overloading the server, dependent on the server's load.  ></body> </Action>
<Action id="19689" issue="13321" author="frankylu" type="comment" body=" ~jyellick  I hope this will be done for v0.6, which is enough for a lot of people, otherwise the problem this causes is actually pretty serious. for financial records, randomly dropping txs can be as bad as crushing the server " created="2016-11-08 05:33:12.0" updateauthor="frankylu" updated="2016-11-08 05:33:43.0"/>
<Action id="19692" issue="13321" author="jyellick" type="comment" created="2016-11-08 14:09:59.0" updateauthor="jyellick" updated="2016-11-08 14:09:59.0"> <body><! CDATA Ah, I had assumed that this was v1 code, sorry for not following.  In general, the idea behind the broadcaster stuff in 0.5/0.6 is that if a peer stops acknowledging messages, the gRPC queue can back up and the sender ultimately blocks on the attempted send, which prevents his thread from doing any work.  We must drop in this case, because otherwise, one bad node can prevent all the other nodes from getting any work done.  But, the queue size could definitely be larger, and configurable.  If you can confirm this is causing problems for you in 0.6, let me know, and I will put a patch together.  ></body> </Action>
<Action id="19809" issue="13321" author="frankylu" type="comment" body="yah, it would be good to add a fix to FAB990, for the time being just increase the hard coded queue size (i.e. 500) would solve the problem for most people, if adding to config is too troublesome " created="2016-11-20 03:10:50.0" updateauthor="frankylu" updated="2016-11-20 03:10:50.0"/>
<Action id="22143" issue="13321" author="denyeart" type="comment" body=" ~kchristidis If there is no intent to enhance 0.6 please close." created="2017-04-11 21:03:18.0" updateauthor="denyeart" updated="2017-04-11 21:03:18.0"/>
