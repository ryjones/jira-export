<Issue id="34616" key="FAB-12427" number="12427" project="10002" reporter="vsudip" assignee="smol" creator="vsudip" type="10004" summary="fabric-ca-server is not able to start with softhsm configuration" priority="3" resolution="10203" status="6" created="2018-10-12 07:34:42.0" updated="2018-11-14 08:05:04.0" resolutiondate="2018-10-16 07:05:31.0" votes="0" watches="2" workflowId="46020"> <description><! CDATA I have enabled the PKCS11 in fabric ca , but when starting the fabric-ca-server natively then throwing below error. Please note it works fine with default SW option. {code:java} 2018/10/12 07:27:01  INFO  Configuration file location: /opt/gopath/bin/fabric-ca-server-config.yaml 2018/10/12 07:27:01  INFO  Starting server in home directory: /opt/gopath/bin 2018/10/12 07:27:01  INFO  Server Version: 1.3.0 2018/10/12 07:27:01  INFO  Server Levels: &{Identity:1 Affiliation:1 Certificate:1 Credential:1 RAInfo:1 Nonce:1} 2018/10/12 07:27:01  DEBUG  Making server filenames absolute 2018/10/12 07:27:01  DEBUG  Initializing default CA in directory /opt/gopath/bin 2018/10/12 07:27:01  DEBUG  Init CA with home /opt/gopath/bin and config {Version:1.3.0 Cfg:{Identities:{AllowRemove:false} Affiliations:{AllowRemove:false}} CA:{Name: Keyfile: Certfile:ca-cert.pem Chainfile:ca-chain.pem} Signing:0xc4204ce7d0 CSR:{CN:fabric-ca-server Names: {C:US ST:North Carolina L: O:Hyperledger OU:Fabric SerialNumber:}  Hosts: safenet localhost  KeyRequest:0xc4204b1ac0 CA:0xc4204b1b40 SerialNumber:} Registry:{MaxEnrollments:-1 Identities: { Name:**** Pass:**** Type:client Affiliation: MaxEnrollments:0 Attrs:map hf.Registrar.Roles:* hf.Registrar.DelegateRoles:* hf.Revoker:1 hf.IntermediateCA:1 hf.GenCRL:1 hf.Registrar.Attributes:* hf.AffiliationMgr:1   } } Affiliations:map org2: department1  org1: department1 department2   LDAP:{ Enabled:false URL:ldap://****:****@<host>:<port>/<base> UserFilter:(uid=%s) GroupFilter:(memberUid=%s) Attribute:{ uid member   { }  map groups: { }  } TLS:{false    { }}  } DB:{ Type:sqlite3 Datasource:fabric-ca-server.db TLS:{false    { }}  } CSP:0xc4204de060 Client:<nil> Intermediate:{ParentServer:{ URL: CAName:  } TLS:{Enabled:false CertFiles:   Client:{KeyFile: CertFile:}} Enrollment:{ Name: Secret:**** CAName: AttrReqs:   Profile: Label: CSR:<nil> Type:x509  }} CRL:{Expiry:24h0m0s} Idemix:{IssuerPublicKeyfile: IssuerSecretKeyfile: RevocationPublicKeyfile: RevocationPrivateKeyfile: RHPoolSize:1000 NonceExpiration:15s NonceSweepInterval:15m}} 2018/10/12 07:27:01  DEBUG  CA Home Directory: /opt/gopath/bin 2018/10/12 07:27:01  DEBUG  Checking configuration file version '1.3.0' against server version: '1.3.0' 2018/10/12 07:27:01  DEBUG  Initializing BCCSP: &{ProviderName:PKCS11 SwOpts:<nil> PluginOpts:<nil>} 2018/10/12 07:27:01  DEBUG  Closing server DBs Error: Failed to initialize BCCSP Factories: %!s(<nil>) Could not find default `PKCS11` BCCSP  {code}  ></description> </Issue>
