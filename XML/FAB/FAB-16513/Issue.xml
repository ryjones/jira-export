<Issue id="42186" key="FAB-16513" number="16513" project="10002" reporter="narendranathreddy" creator="narendranathreddy" type="10004" summary="Error creating consenter: failed to restore persisted raft data: failed to create or read WAL: failed to open WAL: fileutil: file already locked" priority="1" resolution="10203" status="6" created="2019-09-04 15:21:22.0" updated="2021-09-19 15:48:34.0" resolutiondate="2019-09-05 07:45:04.0" votes="0" watches="3" workflowId="55237"> <description><! CDATA Two of Three orderers went to Panic State by leaving below logs   `:  1 2 3  channel=testchainid node=12019-09-04 14:16:22.389 UTC  orderer.consensus.etcdraft  writeBlock -> INFO 030 Writing block  1  (Raft index: 5) to ledger channel=testchainid node=12019-09-04 14:16:22.392 UTC  orderer.consensus.etcdraft  HandleChain -> INFO 031 EvictionSuspicion not set, defaulting to 10m0s2019-09-04 14:16:22.392 UTC  orderer.consensus.etcdraft  createOrReadWAL -> INFO 032 Found WAL data at path '/var/hyperledger/production/orderer/etcdraft/wal/check', replaying it channel=check node=12019-09-04 14:16:22.393 UTC  orderer.commmon.multichannel  newChainSupport -> PANI 033  channel: check  Error creating consenter: failed to restore persisted raft data: failed to create or read WAL: failed to open WAL: fileutil: file already lockedpanic:  channel: check  Error creating consenter: failed to restore persisted raft data: failed to create or read WAL: failed to open WAL: fileutil: file already locked goroutine 67  running :github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc00019a0b0, 0x0, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:229 +0x515github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc0000b4340, 0x4, 0x1040dcc, 0x2a, 0xc000409548, 0x2, 0x2, 0x0, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0xf6github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Panicf(0xc0000b4340, 0x1040dcc, 0x2a, 0xc000409548, 0x2, 0x2) /opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:159 +0x79github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Panicf(0xc0000b4348, 0x1040dcc, 0x2a, 0xc000409548, 0x2, 0x2) /opt/gopath/src/github.com/hyperledger/fabric/common/flogging/zap.go:74 +0x60github.com/hyperledger/fabric/orderer/common/multichannel.newChainSupport(0xc00011e000, 0xc00029d780, 0xc0005c7b60, 0x1145580, 0x1b8f970, 0xc0001a1830, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/orderer/common/multichannel/chainsupport.go:74 +0x710github.com/hyperledger/fabric/orderer/common/multichannel.(*Registrar).newChain(0xc00011e000, 0xc00029acd0) /opt/gopath/src/github.com/hyperledger/fabric/orderer/common/multichannel/registrar.go:327 +0x1dfgithub.com/hyperledger/fabric/orderer/common/multichannel.(*BlockWriter).WriteConfigBlock(0xc00007a680, 0xc0003a0700, 0xc0005c41a0, 0x9, 0x9) /opt/gopath/src/github.com/hyperledger/fabric/orderer/common/multichannel/blockwriter.go:118 +0x2f3github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).writeConfigBlock(0xc00018c280, 0xc0003a0700, 0x5) /opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:1266 +0x1b4github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).writeBlock(0xc00018c280, 0xc0003a0700, 0x5) /opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:839 +0x18fgithub.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).apply(0xc00018c280, 0xc000296448, 0x5, 0x6) /opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:1030 +0x250github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).serveRequest(0xc00018c280) /opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:748 +0x954created by github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).Start /opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:336 +0x1e0`     Complete Orderer Logs:  http://ideone.com/3S3UTj   ></description> </Issue>
