<Issue id="14309" key="FAB-1808" number="1808" project="10002" reporter="nishi" assignee="denyeart" creator="nishi" type="10004" summary="ledger panic error when trying to create 3800 channels inside fabric 1.0" priority="2" resolution="10000" status="6" created="2017-01-23 17:07:32.0" updated="2018-07-20 14:11:19.0" resolutiondate="2017-04-07 19:22:43.0" votes="0" watches="2" workflowId="37146"> <description><! CDATA During ledger stress testing, tried to create 3800 channels ran into panic error: where each channels holds: type Channel struct { 	myLedger ledger.PeerLedger 	myBatchQ BatchQ 	BG       *ledgertestutil.BlockGenerator }  When the #of channels is set to 3500 writes channels got created successfully. 2017/01/23 17:00:00 Error while creating dir  ledgersData/blocks/blocks/Default_3514/  panic: Error: mkdir ledgersData/blocks/blocks/Default_3514: protocol error  recovered  	panic: Error: mkdir ledgersData/blocks/blocks/Default_3514: protocol error  goroutine 6  running : panic(0x8f63c0, 0xc4210caeb0) 	/opt/go/src/runtime/panic.go:500 +0x1a1 testing.tRunner.func1(0xc42026afc0) 	/opt/go/src/testing/testing.go:579 +0x25d panic(0x8f63c0, 0xc4210caeb0) 	/opt/go/src/runtime/panic.go:458 +0x243 github.com/hyperledger/fabric/core/ledger/blkstorage/fsblkstorage.newBlockfileMgr(0xc4210caca4, 0xc, 0xc4201d0080, 0xc42006a2a0, 0xc4201d1c00, 0xc4201d1c00) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/blkstorage/fsblkstorage/blockfile_mgr.go:108 +0xbb9 github.com/hyperledger/fabric/core/ledger/blkstorage/fsblkstorage.newFsBlockStore(0xc4210caca4, 0xc, 0xc4201d0080, 0xc42006a2a0, 0xc4201d1c00, 0xc4201d1ae0) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/blkstorage/fsblkstorage/fs_blockstore.go:38 +0x57 github.com/hyperledger/fabric/core/ledger/blkstorage/fsblkstorage.(*FsBlockstoreProvider).OpenBlockStore(0xc4201d0280, 0xc4210caca4, 0xc, 0xc66b60, 0xc4201d1b80, 0x0, 0x0) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/blkstorage/fsblkstorage/fs_blockstore_provider.go:48 +0x7f github.com/hyperledger/fabric/core/ledger/kvledger.(*Provider).Open(0xc4201afce0, 0xc4210caca4, 0xc, 0x0, 0x0, 0x0, 0xc420047c40) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:106 +0xe3 github.com/hyperledger/fabric/core/ledger/kvledger.(*Provider).Create(0xc4201afce0, 0xc4210caca4, 0xc, 0xc4210cacb0, 0x1, 0x1, 0x2) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:90 +0xa9 github.com/hyperledger/fabric/core/ledger/ledgermgmt.CreateLedger(0xc4210caca4, 0xc, 0x0, 0x0, 0x0, 0x0) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:73 +0x19c github.com/hyperledger/fabric/core/ledger/perf.CreateLedger(0xed8) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/perf/perf_concurrency_test.go:242 +0xa1 github.com/hyperledger/fabric/core/ledger/perf.TestInitParams_C(0xc42026afc0) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/perf/perf_concurrency_test.go:82 +0x64b testing.tRunner(0xc42026afc0, 0xa13f00) 	/opt/go/src/testing/testing.go:610 +0x81 created by testing.(*T).Run 	/opt/go/src/testing/testing.go:646 +0x2ec vagrant@hyperledger-devenv:v0.2.2-aaa998e:/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/perf$ ls   ></description> </Issue>
