<Issue id="35561" key="FAB-12975" number="12975" project="10002" reporter="rajatsharma" creator="rajatsharma" type="10004" summary="System chaincode not deploying while using make peer-docker" priority="3" resolution="10201" status="6" created="2018-11-22 16:29:23.0" updated="2018-11-28 05:20:30.0" resolutiondate="2018-11-27 07:04:17.0" votes="0" watches="2" workflowId="47029"> <description><! CDATA While trying to deploy a System Chaincode, First we build the peer docker image using    {code:java} GO_TAGS+=" pluginsenabled" make peer-docker {code}  which gave the following warnings:   {code:java} /tmp/go-link-205301799/000006.o: In function `pluginOpen': /workdir/go/src/plugin/plugin_dlopen.go:19: warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking /tmp/go-link-205301799/000021.o: In function `mygetgrouplist': /workdir/go/src/os/user/getgrouplist_unix.go:15: warning: Using 'getgrouplist' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking /tmp/go-link-205301799/000020.o: In function `mygetgrgid_r': /workdir/go/src/os/user/cgo_lookup_unix.go:38: warning: Using 'getgrgid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking /tmp/go-link-205301799/000020.o: In function `mygetgrnam_r': /workdir/go/src/os/user/cgo_lookup_unix.go:43: warning: Using 'getgrnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking /tmp/go-link-205301799/000020.o: In function `mygetpwnam_r': /workdir/go/src/os/user/cgo_lookup_unix.go:33: warning: Using 'getpwnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking /tmp/go-link-205301799/000020.o: In function `mygetpwuid_r': /workdir/go/src/os/user/cgo_lookup_unix.go:28: warning: Using 'getpwuid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking /tmp/go-link-205301799/000004.o: In function `_cgo_f7895c2c5a3a_C2func_getaddrinfo': /tmp/go-build/cgo-gcc-prolog:46: warning: Using 'getaddrinfo' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking (cd sampleconfig && tar -jc *) > .build/sampleconfig.tar.bz2 {code}       The peer docker image was succesfully build.  we then used the above build peer docker image, to start a fabric network. To run our system chaincode the following changes were made:   in the core.yaml file :    {code:java} system: myscc: enable {code}   {code:java} systemPlugins:    - enabled: true      name: myscc      path: /opt/lib/myscc.so      invokableExternal: true      invokableCC2CC: true {code} and placed the specified chaincode at /opt/lib/myscc.so. After this, when we restart the peer, the peer container exits with the following log:    {code:java} fatal error: unexpected signal during runtime execution  signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x0 runtime stack: runtime.throw(0x1115b0a, 0x2a) /opt/go/src/runtime/panic.go:616 +0x81 runtime.sigpanic() /opt/go/src/runtime/signal_unix.go:372 +0x28egoroutine 1  syscall : runtime.cgocall(0xd24810, 0xc420446ca0, 0xec56a0) /opt/go/src/runtime/cgocall.go:128 +0x64 fp=0xc420446c70 sp=0xc420446c38 pc=0x402134 plugin._Cfunc_pluginOpen(0xc4203e0000, 0xc42000e248, 0x0) _cgo_gotypes.go:77 +0x4e fp=0xc420446ca0 sp=0xc420446c70 pc=0x8be3be plugin.open.func1(0xc4203e0000, 0xc42000e248, 0xc420376a40) /opt/go/src/plugin/plugin_dlopen.go:74 +0xac fp=0xc420446cd8 sp=0xc420446ca0 pc=0x8bf58c plugin.open(0xc4203761a0, 0x11, 0xc4203200d0, 0x0, 0x0) /opt/go/src/plugin/plugin_dlopen.go:74 +0x357 fp=0xc420446f90 sp=0xc420446cd8 pc=0x8be827 plugin.Open(0xc4203761a0, 0x11, 0x11e2800, 0xc4203200d0, 0x0) /opt/go/src/plugin/plugin.go:32 +0x35 fp=0xc420446fc8 sp=0xc420446f90 pc=0x8be095 github.com/hyperledger/fabric/core/scc.loadPlugin(0xc4203761a0, 0x11, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/core/scc/loadsysccs.go:70 +0x175 fp=0xc4204470f0 sp=0xc420446fc8 pc=0xcea265 github.com/hyperledger/fabric/core/scc.loadSysCCsWithConfig(0xc42000e238, 0x1, 0x1) /opt/gopath/src/github.com/hyperledger/fabric/core/scc/loadsysccs.go:51 +0x123 fp=0xc420447188 sp=0xc4204470f0 pc=0xce9f13 github.com/hyperledger/fabric/core/scc.loadSysCCs.func1() /opt/gopath/src/github.com/hyperledger/fabric/core/scc/loadsysccs.go:44 +0x97 fp=0xc4204471e0 sp=0xc420447188 pc=0xcec727 sync.(*Once).Do(0x1ab93c0, 0x113f938) /opt/go/src/sync/once.go:44 +0xbe fp=0xc420447218 sp=0xc4204471e0 pc=0x463fde github.com/hyperledger/fabric/core/scc.loadSysCCs(0xc4201c4550, 0x0, 0x1a95ae0, 0x1026460) /opt/gopath/src/github.com/hyperledger/fabric/core/scc/loadsysccs.go:38 +0x39 fp=0xc420447238 sp=0xc420447218 pc=0xce9db9 github.com/hyperledger/fabric/core/scc.CreatePluginSysCCs(0xc4201c4550, 0xc4204bf2a0, 0x11e2380, 0xc4201c4550) /opt/gopath/src/github.com/hyperledger/fabric/core/scc/register_pluginsenabled.go:15 +0x40 fp=0xc4204472c8 sp=0xc420447238 pc=0xcea6a0 github.com/hyperledger/fabric/peer/node.registerChaincodeSupport(0xc4201e4000, 0xc420037c80, 0x1b, 0x11d9040, 0xc4204de120, 0xc4203f07e0, 0x11c72c0, 0xc4201bb980, 0xc420318280, 0xc42015cbd0, ...) /opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:593 +0x752 fp=0xc4204474f0 sp=0xc4204472c8 pc=0xd20f62 github.com/hyperledger/fabric/peer/node.startChaincodeServer(0xc420038102, 0x16, 0x11c72c0, 0xc4201bb980, 0xc420318280, 0xc42015cbc0, 0x0, 0x0, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:628 +0x34b fp=0xc420447610 sp=0xc4204474f0 pc=0xd2168b github.com/hyperledger/fabric/peer/node.serve(0xc4204f6ea0, 0x0, 0x1, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:230 +0x9f0 fp=0xc420447c98 sp=0xc420447610 pc=0xd1d2a0 github.com/hyperledger/fabric/peer/node.glob..func1(0x19a8c40, 0xc4204f6ea0, 0x0, 0x1, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:112 +0x9c fp=0xc420447ce0 sp=0xc420447c98 pc=0xd230ec github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0x19a8c40, 0xc4204f6e90, 0x1, 0x1, 0x19a8c40, 0xc4204f6e90) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:698 +0x46d fp=0xc420447d88 sp=0xc420447ce0 pc=0xc721dd github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x19a92a0, 0x0, 0x19a85e0, 0x19a93e0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:783 +0x2e4 fp=0xc420447eb8 sp=0xc420447d88 pc=0xc72954 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x19a92a0, 0xc420323f30, 0x1) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:736 +0x2b fp=0xc420447ee8 sp=0xc420447eb8 pc=0xc7264b main.main() /opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:52 +0x2e5 fp=0xc420447f88 sp=0xc420447ee8 pc=0xd24525 runtime.main() /opt/go/src/runtime/proc.go:198 +0x212 fp=0xc420447fe0 sp=0xc420447f88 pc=0x42dec2 runtime.goexit() /opt/go/src/runtime/asm_amd64.s:2361 +0x1 fp=0xc420447fe8 sp=0xc420447fe0 pc=0x45bb01goroutine 6  syscall : os/signal.signal_recv(0x0) /opt/go/src/runtime/sigqueue.go:139 +0xa6 os/signal.loop() /opt/go/src/os/signal/signal_unix.go:22 +0x22 created by os/signal.init.0 /opt/go/src/os/signal/signal_unix.go:28 +0x41goroutine 21  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util.(*BufferPool).drain(0xc4201990a0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:206 +0x152 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util.NewBufferPool /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:237 +0x171goroutine 9  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).compactionError(0xc420170820) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:90 +0xff created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:142 +0x49dgoroutine 10  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).mpoolDrain(0xc420170820) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_state.go:101 +0x127 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:143 +0x4bfgoroutine 11  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).tCompaction(0xc420170820) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:834 +0x369 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:149 +0x627goroutine 12  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).mCompaction(0xc420170820) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:762 +0x15d created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:150 +0x649goroutine 13  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util.(*BufferPool).drain(0xc4201982a0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:206 +0x152 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util.NewBufferPool /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:237 +0x171goroutine 14  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).compactionError(0xc420170ea0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:90 +0xff created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:142 +0x49dgoroutine 15  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).mpoolDrain(0xc420170ea0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_state.go:101 +0x127 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:143 +0x4bfgoroutine 16  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).tCompaction(0xc420170ea0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:834 +0x369 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:149 +0x627goroutine 66  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).mCompaction(0xc420170ea0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:762 +0x15d created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:150 +0x649goroutine 67  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util.(*BufferPool).drain(0xc4201987e0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:206 +0x152 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util.NewBufferPool /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:237 +0x171goroutine 36  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).compactionError(0xc420171040) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:90 +0xff created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:142 +0x49dgoroutine 37  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).mpoolDrain(0xc420171040) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_state.go:101 +0x127 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:143 +0x4bfgoroutine 38  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).tCompaction(0xc420171040) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:834 +0x369 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:149 +0x627goroutine 39  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).mCompaction(0xc420171040) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:762 +0x15d created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:150 +0x649goroutine 40  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util.(*BufferPool).drain(0xc4201989a0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:206 +0x152 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util.NewBufferPool /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:237 +0x171goroutine 68  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).compactionError(0xc4201711e0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:90 +0xff created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:142 +0x49dgoroutine 69  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).mpoolDrain(0xc4201711e0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_state.go:101 +0x127 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:143 +0x4bfgoroutine 70  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).tCompaction(0xc4201711e0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:834 +0x369 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:149 +0x627goroutine 71  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).mCompaction(0xc4201711e0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:762 +0x15d created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:150 +0x649goroutine 24  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).compactionError(0xc420171520) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:90 +0xff created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:142 +0x49dgoroutine 51  IO wait : internal/poll.runtime_pollWait(0x7f689523df00, 0x72, 0xc4203069a8) /opt/go/src/runtime/netpoll.go:173 +0x57 internal/poll.(*pollDesc).wait(0xc420396198, 0x72, 0xffffffffffffff00, 0x11caf00, 0x19cbe38) /opt/go/src/internal/poll/fd_poll_runtime.go:85 +0x9b internal/poll.(*pollDesc).waitRead(0xc420396198, 0xc4202d2000, 0x1000, 0x1000) /opt/go/src/internal/poll/fd_poll_runtime.go:90 +0x3d internal/poll.(*FD).Read(0xc420396180, 0xc4202d2000, 0x1000, 0x1000, 0x0, 0x0, 0x0) /opt/go/src/internal/poll/fd_unix.go:157 +0x17d net.(*netFD).Read(0xc420396180, 0xc4202d2000, 0x1000, 0x1000, 0x4579f0, 0xc420000180, 0x4) /opt/go/src/net/fd_unix.go:202 +0x4f net.(*conn).Read(0xc4204de000, 0xc4202d2000, 0x1000, 0x1000, 0x0, 0x0, 0x0) /opt/go/src/net/net.go:176 +0x6a net/http.(*persistConn).Read(0xc4203d3680, 0xc4202d2000, 0x1000, 0x1000, 0xc420306b98, 0x404195, 0xc42009a180) /opt/go/src/net/http/transport.go:1453 +0x136 bufio.(*Reader).fill(0xc4202b9020) /opt/go/src/bufio/bufio.go:100 +0x11e bufio.(*Reader).Peek(0xc4202b9020, 0x1, 0x0, 0x0, 0x0, 0xc4201f4180, 0x0) /opt/go/src/bufio/bufio.go:132 +0x3a net/http.(*persistConn).readLoop(0xc4203d3680) /opt/go/src/net/http/transport.go:1601 +0x185 created by net/http.(*Transport).dialConn /opt/go/src/net/http/transport.go:1237 +0x95agoroutine 52  select : net/http.(*persistConn).writeLoop(0xc4203d3680) /opt/go/src/net/http/transport.go:1822 +0x14b created by net/http.(*Transport).dialConn /opt/go/src/net/http/transport.go:1238 +0x97fgoroutine 23  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util.(*BufferPool).drain(0xc4201988c0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:206 +0x152 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util.NewBufferPool /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:237 +0x171goroutine 25  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).mpoolDrain(0xc420171520) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_state.go:101 +0x127 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:143 +0x4bfgoroutine 26  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).tCompaction(0xc420171520) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:834 +0x369 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:149 +0x627goroutine 27  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).mCompaction(0xc420171520) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:762 +0x15d created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:150 +0x649goroutine 28  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util.(*BufferPool).drain(0xc420198c40) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:206 +0x152 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util.NewBufferPool /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:237 +0x171goroutine 29  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).compactionError(0xc4201716c0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:90 +0xff created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:142 +0x49dgoroutine 30  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).mpoolDrain(0xc4201716c0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_state.go:101 +0x127 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:143 +0x4bfgoroutine 31  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).tCompaction(0xc4201716c0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:834 +0x369 created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:149 +0x627goroutine 32  select : github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).mCompaction(0xc4201716c0) /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:762 +0x15d created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:150 +0x649 {code}    If the peer binary alone was compiled using  {code:java} GO_TAGS+=" pluginsenabled" make peer{code}       and copied to the peer docker image, everything works fine.     ></description> </Issue>
