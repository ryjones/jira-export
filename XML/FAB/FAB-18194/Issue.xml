<Issue id="45948" key="FAB-18194" number="18194" project="10002" reporter="ratnakar" assignee="denyeart" creator="ratnakar" type="10004" summary="Service discovery - endorsement service error after peers/orderers restarted" priority="2" resolution="10000" status="6" created="2020-08-28 17:29:07.0" updated="2020-10-12 02:26:18.0" resolutiondate="2020-09-04 12:08:43.0" votes="0" watches="6" workflowId="59859" archived="N"> <description><! CDATA I have a network setup with the following topology * 3 CAs (one for ordering service and the other two CAs for two different peer orgs) * A 5 node raft cluster * org1 with a single peer *peer1* (Anchor peer) * org2 with a single peer *peer2* (Anchor peer)   Created a channel *mychannel*, installed chaincode fabcar from  here|https://github.com/hyperledger/fabric-samples/tree/release-1.4/chaincode/fabcar/javascript    Sent transactions (~4K) to each peer from two different identities.  *Up on restarting peers and orderers transactions started failing with this error*    {code:bash} 2020-08-28 15:50:58.800 UTC  comm.grpc.server  1 -> INFO 041 unary call completed grpc.service=discovery.Discovery grpc.method=Discover grpc.peer_address=172.30.166.5:55204 grpc.code=OK grpc.call_duration=1.835501ms 2020-08-28 15:50:58.844 UTC  discovery  chaincodeQuery -> ERRO 042 Failed constructing descriptor for chaincode chaincodes:<name:"fabcar" > ,: required chaincodes are not installed on sufficient peers {code}    error on sdk client  {code:bash} 2020-08-28T17:21:19.783Z - error:  Channel.js : Channel:mychannel received discovery error:failed constructing descriptor for chaincodes:<name:"fabcar" > 2020-08-28T17:21:19.784Z - error:  DiscoveryEndorsementHandler : endorse - no endorsement plan found for {"chaincodes": {"name":"fabcar"} } Failed to submit transaction: Error: No endorsement plan available for {"chaincodes": {"name":"fabcar"} } {code}  logs for the peer are enclosed   ></description> </Issue>
