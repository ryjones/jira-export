<Issue id="31413" key="FAB-10891" number="10891" project="10002" reporter="denniskuhnert" creator="denniskuhnert" type="10001" summary="Peer discovery does not accept AcceptAllPolicy: Invalid policy" priority="3" resolution="10001" status="6" created="2018-06-27 13:11:28.0" updated="2020-01-22 22:32:28.0" resolutiondate="2020-01-22 22:32:28.0" votes="0" watches="3" workflowId="35901"> <description><! CDATA For test purposes I was trying to use the {{cauthdsl.AcceptAllPolicy}} policy when instantiating my CC.  image tag: 1.2.0-rc1 channel: my-channel cc: my-cc cc-version: 1  {code:java} AcceptAllPolicy = Envelope(NOutOf(0,   *cb.SignaturePolicy{}),     byte{}) {code}  peer log: {code:java} Invalid policy, either Identities(  ) or Rule(n_out_of:<> ) are empty: {code}  As a result the {{fabric-sdk-go}} (not related to this issue) returns {code:java} error getting channel response for channel  my-channel : Discovery status Code: (11) UNKNOWN. Description: error received from Discovery Server: error getting endorsers from target  localhost:7051 : failed constructing descriptor for chaincodes:<name:\"my-cc\" > " {code}  more peer logs: {code:java} 2018-06-27 12:55:31.735 UTC  discovery  validateStructure -> DEBU 1545a Received request from 172.18.0.1:44948 2018-06-27 12:55:31.736 UTC  discovery/lifecycle  Metadata -> DEBU 1545b Returning metadata for channel my-channel , chaincode my-cc : {my-cc 1  …   …    } 2018-06-27 12:55:31.737 UTC  discovery/lifecycle  Metadata -> DEBU 1545c Returning metadata for channel my-channel , chaincode my-cc : {my-cc 1  …   …    } 2018-06-27 12:55:31.737 UTC  discovery/DiscoverySupport  PolicyByChaincode -> WARN 1545d Invalid policy, either Identities(  ) or Rule(n_out_of:<> ) are empty: 2018-06-27 12:55:31.737 UTC  discovery/endorsement  computePrincipalSets -> DEBU 1545e Policy for chaincode ' name:"my-cc"  'doesn't exist 2018-06-27 12:55:31.737 UTC  discovery/endorsement  PeersForEndorsement -> WARN 1545f Principal set computation failed: policy not found 2018-06-27 12:55:31.737 UTC  discovery  chaincodeQuery -> ERRO 15460 Failed constructing descriptor for chaincode chaincodes:<name:"my-cc" > ,: policy not found 2018-06-27 12:55:31.738 UTC  discovery  validateStructure -> DEBU 15461 Received request from 172.18.0.1:44948 2018-06-27 12:55:31.739 UTC  discovery/lifecycle  Metadata -> DEBU 15462 Returning metadata for channel my-channel , chaincode my-cc : {my-cc 1  …   …    } 2018-06-27 12:55:31.739 UTC  discovery/lifecycle  Metadata -> DEBU 15463 Returning metadata for channel my-channel , chaincode my-cc : {my-cc 1  …   …    } 2018-06-27 12:55:31.739 UTC  discovery/DiscoverySupport  PolicyByChaincode -> WARN 15464 Invalid policy, either Identities(  ) or Rule(n_out_of:<> ) are empty: 2018-06-27 12:55:31.739 UTC  discovery/endorsement  computePrincipalSets -> DEBU 15465 Policy for chaincode ' name:"my-cc"  'doesn't exist 2018-06-27 12:55:31.739 UTC  discovery/endorsement  PeersForEndorsement -> WARN 15466 Principal set computation failed: policy not found 2018-06-27 12:55:31.739 UTC  discovery  chaincodeQuery -> ERRO 15467 Failed constructing descriptor for chaincode chaincodes:<name:"my-cc" > ,: policy not found 2018-06-27 12:55:31.836 UTC  gossip/election  waitForInterrupt -> DEBU 15468  …  : Exiting {code}  ></description> </Issue>
