<Issue id="47021" key="FAB-18522" number="18522" project="10002" reporter="arsulegai" creator="arsulegai" type="10004" summary="Support for custom chaincode server package preprocessor" priority="3" status="10300" created="2021-07-11 18:31:37.0" updated="2021-07-11 18:38:11.0" votes="0" watches="1" workflowId="60934" archived="N"> <description><! CDATA Reference discussion  https://lists.hyperledger.org/g/fabric/topic/84030071#10176   Â   *Brief flow on the chaincode installation at peer node:*  The chaincode package id is generated based on the input chaincode package bytes. SHA256 is applied on the input bytes to compute a hash which then in conjunction with chaincode id serves as a package id. The package is sent to the build process after it is persisted on the volume store, the package id is used to save the file.  *Concern:*  The package id is agreed upon value at an organization level. This is done post installation through an 'approveformyorg' command for a sequence. An organization that has multiple peers and would like to attach a unique instance of chaincode server for each of its peer, is then expected to produce same chaincode id for all its peer nodes across organization.  However, parameters to secure peer and chaincode server connections are supplied as part of the chaincode package itself. This makes it difficult to establish the unique identity for secure connection.  Buildpacks are provided for a user to have custom detect, build, release and run checkpoints. However, package id is computed much before these checkpoints are executed.  *Requirement:*  As a user of Fabric, one should be able to package the chaincode server as they wish but cautiously decide on contents to be used to generate the package id. Note: Chaincode package gets installed as usual following the existing process.  *Proposal:*  The proposal in this story is to allow a custom preprocessor in lines with buildpacks. The default Router implementation (for docker based build) and the buildpacks that do not carry preprocessor will apply SHA256 on the entire package.  ></description> </Issue>
