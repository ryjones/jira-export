<Issue id="12451" key="FAB-152" number="152" project="10002" reporter="nishi" creator="nishi" type="10004" summary="was able to set a user without registrar metadata as registrar using chain.setRegistar API." priority="3" resolution="10000" status="6" created="2016-08-17 15:01:21.0" updated="2018-07-20 14:10:02.0" resolutiondate="2016-09-05 10:36:05.0" votes="0" watches="3" workflowId="36080"> <description><! CDATA Was trying a -ve test to enroll a user without optional metadata for being a 'registrar' as registrar. Expected my test to fail.  But call chain.setRegistar with this user was successful.  From membersrvc.yaml metadata: "test_user0: 1 MS9qrN8hFjlE bank_a"  Here is a snippet from my test program: ----------------------------------  var badRegistrar = { name : 'test_user0', secret: 'MS9qrN8hFjlE' };  test('-Ve Test Enroll the registrar', function (t) { //get 'test_user0' chain.getUser(badRegistrar.name, function (err, user) { if (err) { fail(t, "-ve Test get registrar", err); } // Enroll 'test_user0' user.enroll(badRegistrar.secret, function (err) { if (err) { fail(t, "-ve Test enroll registrar", err); } try { //set test_user0 as registrar even membersrvc.yaml does Not have right metadata                           //for being a registrar chain.setRegistrar(user); }catch (e) { console.log(e); } }); }); });  P.S. Subsequent calls to enroll other users failed after setting 'test_user0' as registrar. With an appropriate error message:  Error: member test_user0 is not a registrar   But wouldn't it be better if chain.setRegistrar() itself identified that 'test_user0' is missing right metadata required for registrar?  Instead of a failing during enrollment of users?  Thanks!  ></description> </Issue>
