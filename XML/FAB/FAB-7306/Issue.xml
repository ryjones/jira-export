<Issue id="24770" key="FAB-7306" number="7306" project="10002" reporter="yacovm" assignee="yacovm" creator="yacovm" type="10001" summary="Have delivery-client OSN black-listing abort if only 1 OSN endpoint is left" priority="3" resolution="10000" status="6" created="2017-12-05 14:30:25.0" updated="2018-07-20 18:49:42.0" resolutiondate="2017-12-06 01:20:48.0" votes="0" watches="1" workflowId="40725"> <description><! CDATA When the peer receives a bad status (i.e UNAVAILABLE) from an ordering service node that it connects to, it disconnects from it and tries another ordering service node.  FAB-5006 introduced an optimization for v1.1 that makes the peer *temporarily* black-list ordering service nodes that send a bad status (i.e UNAVAILABLE) in order for the peer to prioritize selection of other OSNs, instead of connecting to them with the same probability.     This might be problematic in cases where the OSNs are behind a LB/NAT where only 1 endpoint is actually known to the peer, but in practice - several endpoints exist behind.  This would result the peer in always disabling immediately *all* OSNs because it only knows 1 endpoint.     We can easily overcome this if we don't black-list an endpoint if it is the last one remaining.  ></description> </Issue>
