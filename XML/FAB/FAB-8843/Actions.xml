<Action id="41541" issue="28494" author="sykesm" type="comment" created="2018-03-13 16:41:14.0" updateauthor="sykesm" updated="2018-03-13 16:41:14.0"> <body><! CDATA Another example: {code:java} unit-tests_1  | 2018-03-13 16:39:29.323 UTC  gossip/gossip#p8  handleMessage -> WARN 348 Message GossipMessage: tag:EMPTY alive_msg:<membership:<endpoint:"1.2.3.4:28620" pki_id:"localhost:28620" > timestamp:<inc_num:1520959158287783600 seq_num:21 > > , Envelope: 52 bytes, Signature: 52 bytes Secret payload: 17 bytes, Secret Signature: 17 bytes isn't valid  unit-tests_1  | --- FAIL: TestConfidentiality (0.00s)  unit-tests_1  | panic: listen tcp :42610: bind: address already in use  recovered   unit-tests_1  |       panic: listen tcp :42610: bind: address already in use  unit-tests_1  |  unit-tests_1  | goroutine 273  running :  unit-tests_1  | testing.tRunner.func1(0xc4201f51d0)  unit-tests_1  |       /opt/go/src/testing/testing.go:711 +0x2d2  unit-tests_1  | panic(0xde11c0, 0xc422866b40)  unit-tests_1  |       /opt/go/src/runtime/panic.go:491 +0x283  unit-tests_1  | github.com/hyperledger/fabric/gossip/comm.createGRPCLayer(0xa672, 0xec2458, 0xc4202fb618, 0xc4202fb608, 0x815cbe, 0xc42657b940)  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:683 +0x767  unit-tests_1  | github.com/hyperledger/fabric/gossip/comm.NewCommInstanceWithServer(0xa672, 0x143eb00, 0xc42657b920, 0xc426b0a7e0, 0xf, 0x10, 0x0, 0x0, 0x0, 0x0, ...)  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:63 +0xb00  unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.createCommWithServer(0xa672, 0x143eb00, 0xc42657b920, 0xc426b0a7e0, 0xf, 0x10, 0x0, 0xc42657b920, 0x87328b, 0xc422e69a80, ...)  unit-tests_1  |       github.com/hyperledger/fabric/gossip/gossip/_test/_obj_test/gossip_impl.go:184 +0xa5  unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.NewGossipService(0xc4222eafd0, 0x0, 0x1430700, 0xc4256f2ba8, 0x143e9e0, 0xc4256f2ba8, 0xc426b0a7e0, 0xf, 0x10, 0x0, ...)  unit-tests_1  |       github.com/hyperledger/fabric/gossip/gossip/_test/_obj_test/gossip_impl.go:94 +0x113f  unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.NewGossipServiceWithServer(0xc4222eafd0, 0x1430700, 0xc4256f2ba8, 0x143e9e0, 0xc4256f2ba8, 0xc426b0a7e0, 0xf, 0x10, 0x0, 0xc421352630, ...)  unit-tests_1  |       github.com/hyperledger/fabric/gossip/gossip/_test/_obj_test/gossip_impl.go:178 +0xa7  unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.newGossipInstanceWithExternalEndpoint(0xa672, 0x0, 0xc4256f2ba8, 0xc426b0a7b0, 0xf, 0x0, 0x0, 0x0, 0x518f2a70205edb94, 0x4c1538aacec57a38)  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/orgs_test.go:116 +0x3ae  unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.TestConfidentiality(0xc4201f51d0)  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/orgs_test.go:335 +0x650  unit-tests_1  | testing.tRunner(0xc4201f51d0, 0xec0d20)  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0xd0  unit-tests_1  | created by testing.(*T).Run  unit-tests_1  |       /opt/go/src/testing/testing.go:789 +0x2de  unit-tests_1  | FAIL  github.com/hyperledger/fabric/gossip/gossip     41.750s{code}  ></body> </Action>
<Action id="41542" issue="28494" author="sykesm" type="comment" created="2018-03-13 16:46:23.0" updateauthor="sykesm" updated="2018-03-13 16:46:23.0"> <body><! CDATA Another example: {code:java} unit-tests_1  | 2018-03-13 16:45:43.232 UTC  gossip/discovery#localhost:12611  expireDeadMembers -> WARN 148 Exiting  unit-tests_1  | --- FAIL: TestMsgStoreExpiration (38.13s)          Error Trace:    discovery_test.go:1303                          discovery_test.go:936          Error:          Received unexpected error "context deadline exceeded"          Messages:       Timeout expired!{code}  ></body> </Action>
<Action id="41543" issue="28494" author="sykesm" type="comment" created="2018-03-13 16:46:52.0" updateauthor="sykesm" updated="2018-03-13 16:46:52.0"> <body><! CDATA Another example: {code:java} unit-tests_1  | 2018-03-13 16:46:01.739 UTC  gossip/gossip#p1  UpdateLedgerHeight -> WARN 013 No such channel  99 104 97 110 66   unit-tests_1  | panic: listen tcp :32611: bind: address already in use  unit-tests_1  |  unit-tests_1  | goroutine 402  running :  unit-tests_1  | github.com/hyperledger/fabric/gossip/comm.createGRPCLayer(0x7f63, 0x100c170, 0xc420514948, 0xc420514938, 0x8a0f0e, 0xc42039a680)  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:683 +0x767  unit-tests_1  | github.com/hyperledger/fabric/gossip/comm.NewCommInstanceWithServer(0x7f63, 0x15e9b80, 0xc42039a660, 0xc420372280, 0xf, 0x10, 0x0, 0x0, 0x0, 0x0, ...)  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:63 +0xb00  unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.createCommWithServer(0x7f63, 0x15e9b80, 0xc42039a660, 0xc420372280, 0xf, 0x10, 0x0, 0xc42039a660, 0x8ff92b, 0xc4201ea040, ...)  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:174 +0x9b  unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.NewGossipService(0xc42036e160, 0x0, 0x15da040, 0x163bd38, 0x15e9be0, 0x163bd38, 0xc420372280, 0xf, 0x10, 0x0, ...)  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:97 +0x10c9  unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.NewGossipServiceWithServer(0xc42036e160, 0x15da040, 0x163bd38, 0x15e9be0, 0x163bd38, 0xc420372280, 0xf, 0x10, 0x0, 0x0, ...)  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:169 +0x9d  unit-tests_1  | github.com/hyperledger/fabric/gossip/service.newGossipInstance(0x7f63, 0x0, 0x64, 0xc420337770, 0x6, 0x6, 0xc4201460c0, 0x20070328)  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/service/gossip_service_test.go:656 +0x4c5  unit-tests_1  | github.com/hyperledger/fabric/gossip/service.startPeers.func1(0xc42000c2e0, 0x2, 0x2, 0x7f63, 0xc420372190, 0x0)  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/service/gossip_service_test.go:625 +0x83  unit-tests_1  | created by github.com/hyperledger/fabric/gossip/service.startPeers  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/gossip/service/gossip_service_test.go:623 +0xed  unit-tests_1  | FAIL  github.com/hyperledger/fabric/gossip/service    8.112s{code}  ></body> </Action>
<Action id="43703" issue="28494" author="jyellick" type="comment" created="2018-05-01 16:17:43.0" updateauthor="jyellick" updated="2018-05-01 16:17:43.0"> <body><! CDATA Seems like another {noformat} 16:03:16 unit-tests_1  | <<<TestConnectToAnchorPeers>>> 16:03:16 unit-tests_1  | --- FAIL: TestConnectToAnchorPeers (220.05s) 16:03:16 unit-tests_1  | 	assertions.go:247:   	Error Trace:	gossip_test.go:1515 16:03:16 unit-tests_1  | 		 	            	 			asm_amd64.s:2361 16:03:16 unit-tests_1  | 		 	Error:      	Didn't stop within a timely manner 16:03:16 unit-tests_1  | 		 	Test:       	TestConnectToAnchorPeers 16:03:16 unit-tests_1  | 	assertions.go:247:   	Error Trace:	gossip_test.go:1575 16:03:16 unit-tests_1  | 		 	            	 			gossip_test.go:474 16:03:16 unit-tests_1  | 		 	Error:      	Timeout expired! 16:03:16 unit-tests_1  | 		 	Test:       	TestConnectToAnchorPeers 16:03:16 unit-tests_1  | 2018-05-01 16:03:11.690 UTC  gossip/comm#8610  sendToEndpoint -> WARN b3e Failed obtaining connection for localhost:8613, PKIid: 108 111 99 97 108 104 111 115 116 58 56 54 49 51  reason: ConnStore is closing {noformat}  ></body> </Action>
<Action id="43707" issue="28494" author="c0rwin" type="comment" body=" ~nirro  Can you please take a look on this one?" created="2018-05-01 18:07:39.0" updateauthor="c0rwin" updated="2018-05-01 18:07:39.0"/>
<Action id="43717" issue="28494" author="nirro" type="comment" body=" ~C0rWin  sure, will take a look today" created="2018-05-02 07:28:42.0" updateauthor="nirro" updated="2018-05-02 07:28:42.0"/>
<Action id="44790" issue="28494" author="kchristidis" type="comment" body=" ~nirro : Update?" created="2018-05-21 19:14:45.0" updateauthor="kchristidis" updated="2018-05-21 19:14:45.0"/>
<Action id="44798" issue="28494" author="nirro" type="comment" created="2018-05-21 21:08:56.0" updateauthor="nirro" updated="2018-05-21 21:08:56.0"> <body><! CDATA hi  ~kchristidis , half of the issues mentioned in this item are fixed. the others are a bit harder since they happen once every 50 runs approximately, so it's harder to debug those.  hope to finish the item this week.  ></body> </Action>
<Action id="44836" issue="28494" author="nirro" type="comment" created="2018-05-22 12:59:44.0" updateauthor="nirro" updated="2018-05-22 12:59:44.0"> <body><! CDATA all tests mentioned in this issue except for TestMsgStoreExpiration are fixed in the following JIRA issues:  FAB-9100  Inconsistent "bind: address already in use" in TestConfidentiality unit-test  FAB-10105  Flaky TestConnectToAnchorPeers (fixed also the probelm in TestDissemination)  working on a fix for TestMsgStoreExpiration   ></body> </Action>
<Action id="44960" issue="28494" author="nirro" type="comment" created="2018-05-23 10:14:39.0" updateauthor="nirro" updated="2018-05-23 10:14:51.0"> <body><! CDATA tried to reproduce TestMsgStoreExpiration failure as mentioned in one of the comments above. for doing that, I ran the test in a loop 1000 times and haven't seen a single failure.  marking this JIRA items as Done, as TestMsgStoreExpiration is not reproducible and all others were fixed in the linked JIRA items.  ></body> </Action>
