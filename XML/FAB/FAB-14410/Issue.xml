<Issue id="38077" key="FAB-14410" number="14410" project="10002" reporter="guoger" creator="guoger" type="10004" summary="Flakey etcdraft integration test: leader assertion should be more lenient" priority="3" resolution="10000" status="6" created="2019-02-28 06:54:57.0" updated="2019-04-02 05:10:15.0" resolutiondate="2019-04-02 05:10:07.0" votes="0" watches="1" workflowId="49697"> <description><! CDATA integration tests sometimes try to find raft leader by  inspecting log|https://github.com/hyperledger/fabric/blob/0448fe83c035093eb7402f3081884f51513b3b3e/integration/e2e/cft_test.go#L384 : {code} 	findLeader := func(runner *ginkgomon.Runner) int { 		Eventually(runner.Err(), time.Minute, time.Second).Should(gbytes.Say("Raft leader changed: 0 -> "))  		idBuff := make(  byte, 1) 		runner.Err().Read(idBuff)  		newLeader, err := strconv.ParseInt(string(idBuff), 10, 32) 		Expect(err).To(BeNil()) 		return int(newLeader) 	} {code}  However, leader change does not always transition from zero. If a node in follower state with leader X, receives a raft msg with higher term from Y, the transition is then: {code} Raft leader changed: X -> Y {code}  We should make our assertion here more lenient.  Or, we could simply alter that line of log to not to reflect old leader  ></description> </Issue>
