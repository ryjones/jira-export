<Action id="56452" issue="36798" author="latitiah" type="comment" created="2019-01-31 15:38:54.0" updateauthor="latitiah" updated="2019-01-31 15:40:59.0"> <body><! CDATA With these changes, the happy path will be performed to follow the following steps: {code} Given I have a bootstrapped fabric network of type solo And I want to use the new chaincode lifecycle When an admin sets up a channel  And an admin builds a chaincode package And the organization admins install the built chaincode package on all peers Then a hash value is received on all peers When the organization admins approve the chaincode package on all peers And an admin commits the chaincode package to the channel And a user invokes on the chaincode with args  "init","a","1000","b","2000"  When a user queries on the chaincode with args  "query","a"  Then a user receives a success response of 1000  When an admin builds chaincode at path "github.com/hyperledger/fabric/examples/chaincode/go/example02/cmd" as version "2" with args  "init","a","1000","b","2000"  with name "mycc2" on all peers And the organization admins install the built chaincode package on all peers Then a hash value is received on all peers When the organization admins approve the upgraded chaincode package on all peers And an admin commits the chaincode package to the channel And a user invokes on the chaincode with args  "init","a","1000","b","2000"  When a user queries on the chaincode with args  "query","a"  Then a user receives a success response of 1000 {code}  ></body> </Action>
<Action id="56459" issue="36798" author="jyellick" type="comment" created="2019-01-31 18:45:06.0" updateauthor="jyellick" updated="2019-01-31 18:48:25.0"> <body><! CDATA >  When the organization admins approve the "ex04" chaincode package on "channel1" for all peers  Strictly speaking this should only have to happen for each org (one peer per org).  > When an admin builds chaincode at path "github.com/hyperledger/fabric/examples/chaincode/go/example02/cmd" as version "2" with args  "init","a","1000","b","2000"  with name "mycc2" on all peers  The admin doesn't build the chaincode, the admin packages the chaincode, and it only happens once.  This package is then installed.  I'm also missing the sequence numbers in this flow?  Are they intentionally omitted because this is the first definition for the channel?   ></body> </Action>
<Action id="56467" issue="36798" author="latitiah" type="comment" created="2019-01-31 19:20:02.0" updateauthor="latitiah" updated="2019-01-31 19:20:02.0"> <body><! CDATA Ah yes, the wording has been gravely simplified, but I can reword to look like the following:  {code}When each organization admin approves the "ex04" chaincode package on "channel1"{code} and  {code}When an admin packages chaincode at path "github.com/hyperledger/fabric/examples/chaincode/go/example02/cmd" as version "2" with name "mycc2"{code}  Yes, on an initial deploy the sequence is at 0, on every upgrade it is incremented from the value returned from a call to QueryDefinedChaincode (not sure what this would be for the CLI command).  ></body> </Action>
<Action id="56648" issue="36798" author="latitiah" type="comment" body="Discovered that the initial sequence should be set to 1 on a deploy, then incremented from there. Initially, the CLI command is &quot;peer chaincode list --committed&quot;" created="2019-02-04 15:41:04.0" updateauthor="latitiah" updated="2019-02-04 15:41:04.0"/>
<Action id="56732" issue="36798" author="latitiah" type="comment" created="2019-02-06 20:41:40.0" updateauthor="latitiah" updated="2019-02-06 20:41:40.0"> <body><! CDATA The following are the test scenarios that do not work at this time: {code}  Given I changed the "Application" capability to version "2_0" And I have a bootstrapped fabric network of type solo And I want to use the new chaincode lifecycle When an admin sets up a channel And an admin packages a chaincode And the organization admins install the chaincode package on all peers Then a hash value is received on all peers When each organization admin approves the chaincode package with policy "OR ('org1.example.com.member','org2.example.com.member')" And an admin commits the chaincode package to the channel And a user invokes on the chaincode with args  "init","a","1000","b","2000"  on both orgs And I wait up to "30" seconds for deploy to complete When a user queries on the chaincode with args  "query","a"  Then a user receives a success response of 1000 When an admin packages chaincode at path "github.com/hyperledger/fabric-test/chaincodes/example02/go/cmd" as version "2" with name "mycc2" And the organization admins install the chaincode package on all peers Then a hash value is received on all peers When each organization admin approves the upgraded chaincode package And an admin commits the chaincode package to the channel And a user invokes on the chaincode with args  "init","a","1000","b","2000"  on both orgs When a user queries on the chaincode with args  "query","a"  Then a user receives a success response of 100{code}  The following is the "no policy" scenario: {code}  Given I changed the "Application" capability to version "2_0" And I have a bootstrapped fabric network of type solo And I want to use the new chaincode lifecycle When an admin sets up a channel And an admin packages a chaincode And the organization admins install the chaincode package on all peers Then a hash value is received on all peers When each organization admin approves the chaincode package And an admin commits the chaincode package to the channel And a user invokes on the chaincode with args  "init","a","1000","b","2000"  on both orgs And I wait up to "30" seconds for deploy to complete When a user queries on the chaincode with args  "query","a"  Then a user receives a success response of 1000 When a user invokes on the chaincode with args  "invoke","a","b","10"  And I wait "5" seconds When a user queries on the chaincode with args  "query","a"  Then a user receives a success response of 990{code}  ></body> </Action>
<Action id="56772" issue="36798" author="latitiah" type="comment" body="https://gerrit.hyperledger.org/r/#/c/28928/" created="2019-02-07 21:26:42.0" updateauthor="latitiah" updated="2019-02-07 21:26:42.0"/>
<Action id="58721" issue="36798" author="latitiah" type="comment" body="As of today, all current tests in this area are passing." created="2019-03-29 13:01:35.0" updateauthor="latitiah" updated="2019-03-29 13:01:35.0"/>
