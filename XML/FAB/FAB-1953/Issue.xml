<Issue id="14455" key="FAB-1953" number="1953" project="10002" reporter="ratnakar" assignee="denyeart" creator="ratnakar" type="10004" summary="chaincode deploy fails with defaultchain, when stateDatabase is changed to couchDB ." priority="2" resolution="10000" status="6" created="2017-01-31 15:04:16.0" updated="2018-07-20 14:11:25.0" resolutiondate="2017-02-01 04:46:25.0" votes="0" watches="3" workflowId="37239"> <description><! CDATA chaincode deploy fails with defaultchain, when stateDatabase is changed to couchDB .  Commands to run  {code:java} cd /opt/gopath/src/github.com/hyperledger/fabric {code}  {code:java} orderer {code}  {code:java} CORE_LEDGER_STATE_STATEDATABASE=CouchDB peer node start --peer-defaultchain=true {code}  {code:java} CORE_PEER_MSPCONFIGPATH=./msp/sampleconfig peer chaincode deploy -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{"Args": "init","a","100","b","200" }' {code}    {noformat} CORE_PEER_MSPCONFIGPATH=./msp/sampleconfig peer chaincode deploy -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{"Args": "init","a","100","b","200" }' 2017-01-31 14:44:40.833 UTC  msp  getPemMaterialFromDir -> INFO 001 Reading directory msp/sampleconfig/cacerts 2017-01-31 14:44:40.834 UTC  msp  getPemMaterialFromDir -> INFO 002 Inspecting file msp/sampleconfig/cacerts/cacert.pem 2017-01-31 14:44:40.834 UTC  msp  getPemMaterialFromDir -> INFO 003 Reading directory msp/sampleconfig/signcerts 2017-01-31 14:44:40.835 UTC  msp  getPemMaterialFromDir -> INFO 004 Inspecting file msp/sampleconfig/signcerts/peer.pem 2017-01-31 14:44:40.835 UTC  msp  getPemMaterialFromDir -> INFO 005 Reading directory msp/sampleconfig/admincerts 2017-01-31 14:44:40.836 UTC  msp  getPemMaterialFromDir -> INFO 006 Inspecting file msp/sampleconfig/admincerts/admincert.pem 2017-01-31 14:44:40.837 UTC  msp  getPemMaterialFromDir -> INFO 007 Reading directory msp/sampleconfig/keystore 2017-01-31 14:44:40.837 UTC  msp  getPemMaterialFromDir -> INFO 008 Inspecting file msp/sampleconfig/keystore/key.pem 2017-01-31 14:44:40.838 UTC  msp  NewBccspMsp -> INFO 009 Creating BCCSP-based MSP instance 2017-01-31 14:44:40.838 UTC  peer  GetLocalMSP -> INFO 00a Created new local MSP 2017-01-31 14:44:40.838 UTC  msp  Setup -> INFO 00b Setting up MSP instance DEFAULT 2017-01-31 14:44:40.840 UTC  msp  newIdentity -> INFO 00c Creating identity instance for ID &{DEFAULT IDENTITY} 2017-01-31 14:44:40.840 UTC  msp  newIdentity -> INFO 00d Creating identity instance for ID &{DEFAULT IDENTITY} 2017-01-31 14:44:40.840 UTC  msp  newIdentity -> INFO 00e Creating identity instance for ID &{DEFAULT IDENTITY} 2017-01-31 14:44:40.857 UTC  peer  GetManagerForChain -> INFO 00f Created new msp manager for chain testchainid 2017-01-31 14:44:40.858 UTC  msp  Setup -> INFO 010 Setting up the MSP manager (1 msps) 2017-01-31 14:44:40.858 UTC  msp  Setup -> INFO 011 Setting up MSP 2017-01-31 14:44:40.858 UTC  msp  NewBccspMsp -> INFO 012 Creating BCCSP-based MSP instance 2017-01-31 14:44:40.858 UTC  msp  Setup -> INFO 013 Setting up MSP instance DEFAULT 2017-01-31 14:44:40.859 UTC  msp  newIdentity -> INFO 014 Creating identity instance for ID &{DEFAULT IDENTITY} 2017-01-31 14:44:40.859 UTC  msp  newIdentity -> INFO 015 Creating identity instance for ID &{DEFAULT IDENTITY} 2017-01-31 14:44:40.860 UTC  msp  newIdentity -> INFO 016 Creating identity instance for ID &{DEFAULT IDENTITY} 2017-01-31 14:44:40.860 UTC  msp  Setup -> INFO 017 MSP manager setup complete, setup 1 msps Error: Error endorsing chaincode: rpc error: code = 2 desc = chain does not exist(testchainid)  Usage: peer chaincode deploy  flags   Global Flags: -C, --chainID string             The chain on which this command should be executed (default "testchainid") -c, --ctor string                Constructor message for the chaincode in JSON format (default "{}") -l, --lang string                Language the chaincode is written in (default "golang") --logging-level string       Default logging level and overrides, see core.yaml for full syntax -n, --name string                Name of the chaincode returned by the deploy transaction -p, --path string                Path to chaincode --test.coverprofile string   Done (default "coverage.cov") -t, --tid string                 Name of a custom ID generation algorithm (hashing and decoding) e.g. sha256base64 -u, --username string            Username for chaincode operations when security is enabled -v, --version                    Display current version of fabric peer server  {noformat}   ></description> </Issue>
