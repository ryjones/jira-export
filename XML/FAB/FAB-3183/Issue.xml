<Issue id="15770" key="FAB-3183" number="3183" project="10002" reporter="denyeart" creator="denyeart" type="10001" summary="Need to warm up CouchDB indexes upon startup" priority="3" resolution="10000" status="6" created="2017-04-16 11:34:37.0" updated="2018-07-20 18:55:00.0" resolutiondate="2017-11-08 10:07:50.0" votes="0" watches="1" workflowId="38006"> <description><! CDATA Let's look at worst case... CouchDB builds indexes at query time (for any new docs since last index update), not at insert/update time like most databases.  Let's say a new peer has just come up and done state transfer on 1 million blocks.  CouchDB state db will be built out, but the first query during a simulation will have to build out an index covering millions of documents. The amount of time is probably measured in seconds, potentially exceeding the default timeout for CouchDB and chaincode execution.  It would be better to 'warm up' the indexes upon peer start (ledger initialization) by doing a trivial query.  This will force any unindexed documents to get indexed, before the peer can accept simulation requests.  ></description> </Issue>
