<Issue id="33563" key="FAB-11902" number="11902" project="10002" reporter="sykesm" assignee="ales" creator="sykesm" type="10004" summary="State based endorsement tests timed out in CI" priority="3" resolution="10000" status="6" created="2018-09-06 21:17:41.0" updated="2019-03-19 10:57:37.0" resolutiondate="2018-09-07 15:51:19.0" votes="0" watches="2" workflowId="44855"> <description><! CDATA {code} 00:25:38.055 unit-tests_1  | panic: test timed out after 20m0s 00:25:38.056 unit-tests_1  |  00:25:38.057 unit-tests_1  | goroutine 1062  running : 00:25:38.058 unit-tests_1  | testing.(*M).startAlarm.func1() 00:25:38.059 unit-tests_1  | 	/opt/go/src/testing/testing.go:1240 +0xfc 00:25:38.059 unit-tests_1  | created by time.goFunc 00:25:38.060 unit-tests_1  | 	/opt/go/src/time/sleep.go:172 +0x44 00:25:38.060 unit-tests_1  |  00:25:38.061 unit-tests_1  | goroutine 1  chan receive, 19 minutes : 00:25:38.061 unit-tests_1  | testing.tRunner.func1(0xc4200e8000) 00:25:38.062 unit-tests_1  | 	/opt/go/src/testing/testing.go:753 +0x11d 00:25:38.062 unit-tests_1  | testing.tRunner(0xc4200e8000, 0xc42066dd90) 00:25:38.063 unit-tests_1  | 	/opt/go/src/testing/testing.go:783 +0xf2 00:25:38.064 unit-tests_1  | testing.runTests(0xc420304880, 0x13f68e0, 0x17, 0x17, 0x7160fd) 00:25:38.065 unit-tests_1  | 	/opt/go/src/testing/testing.go:1061 +0x2c4 00:25:38.065 unit-tests_1  | testing.(*M).Run(0xc42046a100, 0x0) 00:25:38.066 unit-tests_1  | 	/opt/go/src/testing/testing.go:978 +0x171 00:25:38.066 unit-tests_1  | main.main() 00:25:38.068 unit-tests_1  | 	_testmain.go:136 +0x208 00:25:38.069 unit-tests_1  |  00:25:38.070 unit-tests_1  | goroutine 5  syscall, 20 minutes : 00:25:38.070 unit-tests_1  | os/signal.signal_recv(0x0) 00:25:38.071 unit-tests_1  | 	/opt/go/src/runtime/sigqueue.go:139 +0xa6 00:25:38.072 unit-tests_1  | os/signal.loop() 00:25:38.073 unit-tests_1  | 	/opt/go/src/os/signal/signal_unix.go:22 +0x22 00:25:38.074 unit-tests_1  | created by os/signal.init.0 00:25:38.075 unit-tests_1  | 	/opt/go/src/os/signal/signal_unix.go:28 +0x41 00:25:38.076 unit-tests_1  |  00:25:38.077 unit-tests_1  | goroutine 36  chan receive, 19 minutes : 00:25:38.078 unit-tests_1  | github.com/hyperledger/fabric/core/common/validation/statebased.runFunctions(0xc4200e90e0, 0x5b9191d9, 0xc420764da0, 0x3, 0x3) 00:25:38.079 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/statebased/vpmanager_test.go:145 +0x1b3 00:25:38.080 unit-tests_1  | github.com/hyperledger/fabric/core/common/validation/statebased.TestPvtDependencyConflict(0xc4200e90e0) 00:25:38.080 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/statebased/vpmanager_test.go:391 +0x614 00:25:38.081 unit-tests_1  | testing.tRunner(0xc4200e90e0, 0xe502a8) 00:25:38.081 unit-tests_1  | 	/opt/go/src/testing/testing.go:777 +0xd0 00:25:38.083 unit-tests_1  | created by testing.(*T).Run 00:25:38.083 unit-tests_1  | 	/opt/go/src/testing/testing.go:824 +0x2e0 00:25:38.084 unit-tests_1  |  00:25:38.085 unit-tests_1  | goroutine 37  chan send, 19 minutes : 00:25:38.086 unit-tests_1  | testing.tRunner.func1(0xc4200e91d0) 00:25:38.087 unit-tests_1  | 	/opt/go/src/testing/testing.go:772 +0x183 00:25:38.087 unit-tests_1  | testing.tRunner(0xc4200e91d0, 0xe501c8) 00:25:38.088 unit-tests_1  | 	/opt/go/src/testing/testing.go:783 +0xf2 00:25:38.089 unit-tests_1  | created by testing.(*T).Run 00:25:38.089 unit-tests_1  | 	/opt/go/src/testing/testing.go:824 +0x2e0 00:25:38.090 unit-tests_1  |  00:25:38.091 unit-tests_1  | goroutine 38  chan send, 19 minutes : 00:25:38.091 unit-tests_1  | testing.tRunner.func1(0xc4200e92c0) 00:25:38.092 unit-tests_1  | 	/opt/go/src/testing/testing.go:772 +0x183 00:25:38.093 unit-tests_1  | testing.tRunner(0xc4200e92c0, 0xe50280) 00:25:38.094 unit-tests_1  | 	/opt/go/src/testing/testing.go:783 +0xf2 00:25:38.095 unit-tests_1  | created by testing.(*T).Run 00:25:38.096 unit-tests_1  | 	/opt/go/src/testing/testing.go:824 +0x2e0 00:25:38.097 unit-tests_1  |  00:25:38.099 unit-tests_1  | goroutine 39  chan send, 19 minutes : 00:25:38.100 unit-tests_1  | testing.tRunner.func1(0xc4200e93b0) 00:25:38.101 unit-tests_1  | 	/opt/go/src/testing/testing.go:772 +0x183 00:25:38.101 unit-tests_1  | testing.tRunner(0xc4200e93b0, 0xe501c0) 00:25:38.102 unit-tests_1  | 	/opt/go/src/testing/testing.go:783 +0xf2 00:25:38.102 unit-tests_1  | created by testing.(*T).Run 00:25:38.103 unit-tests_1  | 	/opt/go/src/testing/testing.go:824 +0x2e0 00:25:38.103 unit-tests_1  |  00:25:38.104 unit-tests_1  | goroutine 40  chan send, 19 minutes : 00:25:38.104 unit-tests_1  | testing.tRunner.func1(0xc4200e94a0) 00:25:38.105 unit-tests_1  | 	/opt/go/src/testing/testing.go:772 +0x183 00:25:38.105 unit-tests_1  | testing.tRunner(0xc4200e94a0, 0xe502c0) 00:25:38.106 unit-tests_1  | 	/opt/go/src/testing/testing.go:783 +0xf2 00:25:38.106 unit-tests_1  | created by testing.(*T).Run 00:25:38.107 unit-tests_1  | 	/opt/go/src/testing/testing.go:824 +0x2e0 00:25:38.107 unit-tests_1  |  00:25:38.108 unit-tests_1  | goroutine 41  chan send, 19 minutes : 00:25:38.108 unit-tests_1  | testing.tRunner.func1(0xc4200e9590) 00:25:38.109 unit-tests_1  | 	/opt/go/src/testing/testing.go:772 +0x183 00:25:38.109 unit-tests_1  | testing.tRunner(0xc4200e9590, 0xe50200) 00:25:38.110 unit-tests_1  | 	/opt/go/src/testing/testing.go:783 +0xf2 00:25:38.110 unit-tests_1  | created by testing.(*T).Run 00:25:38.111 unit-tests_1  | 	/opt/go/src/testing/testing.go:824 +0x2e0 00:25:38.112 unit-tests_1  |  00:25:38.113 unit-tests_1  | goroutine 1058  chan receive, 19 minutes : 00:25:38.114 unit-tests_1  | testing.runTests.func1.1(0xc4200e8000) 00:25:38.115 unit-tests_1  | 	/opt/go/src/testing/testing.go:1068 +0x3b 00:25:38.117 unit-tests_1  | created by testing.runTests.func1 00:25:38.118 unit-tests_1  | 	/opt/go/src/testing/testing.go:1068 +0xa2 00:25:38.119 unit-tests_1  |  00:25:38.120 unit-tests_1  | goroutine 1053  semacquire, 19 minutes : 00:25:38.121 unit-tests_1  | sync.runtime_Semacquire(0xc420014630) 00:25:38.121 unit-tests_1  | 	/opt/go/src/runtime/sema.go:56 +0x39 00:25:38.122 unit-tests_1  | sync.(*RWMutex).Lock(0xc420014628) 00:25:38.122 unit-tests_1  | 	/opt/go/src/sync/rwmutex.go:98 +0x6e 00:25:38.123 unit-tests_1  | github.com/hyperledger/fabric/core/common/validation/statebased.(*validationContext).getOrCreateDependencyByTxnum(0xc420014628, 0x0, 0x0) 00:25:38.124 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/statebased/vpmanagerimpl.go:166 +0xd5 00:25:38.124 unit-tests_1  | github.com/hyperledger/fabric/core/common/validation/statebased.(*KeyLevelValidationParameterManagerImpl).SetTxValidationResult(0xc420014600, 0xe2436d, 0x2, 0x1, 0x0, 0x0, 0x0) 00:25:38.125 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/statebased/vpmanagerimpl.go:313 +0x61 00:25:38.125 unit-tests_1  | github.com/hyperledger/fabric/core/common/validation/statebased.TestPvtDependencyConflict.func2() 00:25:38.126 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/statebased/vpmanager_test.go:396 +0x56 00:25:38.126 unit-tests_1  | github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/assert.didPanic.func1(0xc420820ea8, 0xc420820ea7, 0xc420764d80) 00:25:38.127 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/assert/assertions.go:791 +0x57 00:25:38.127 unit-tests_1  | github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/assert.didPanic(0xc420764d80, 0xc42057dc80, 0xc4200120b8, 0x75a510) 00:25:38.128 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/assert/assertions.go:793 +0x4c 00:25:38.128 unit-tests_1  | github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/assert.NotPanics(0xe9e8e0, 0xc4200e90e0, 0xc420764d80, 0xc420820f78, 0x2, 0x2, 0x1) 00:25:38.129 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/assert/assertions.go:833 +0x32 00:25:38.129 unit-tests_1  | github.com/hyperledger/fabric/core/common/validation/statebased.runFunctions.func1(0xc4200e90e0, 0xc420764da0, 0x3, 0x3, 0x1, 0x5b9191d9, 0xc420012180) 00:25:38.130 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/statebased/vpmanager_test.go:140 +0xda 00:25:38.134 unit-tests_1  | created by github.com/hyperledger/fabric/core/common/validation/statebased.runFunctions 00:25:38.134 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/statebased/vpmanager_test.go:139 +0x177 00:25:38.135 unit-tests_1  |  00:25:38.136 unit-tests_1  | goroutine 1052  semacquire, 19 minutes : 00:25:38.137 unit-tests_1  | sync.runtime_notifyListWait(0xc420319990, 0xc400000000) 00:25:38.138 unit-tests_1  | 	/opt/go/src/runtime/sema.go:510 +0x10b 00:25:38.139 unit-tests_1  | sync.(*Cond).Wait(0xc420319980) 00:25:38.140 unit-tests_1  | 	/opt/go/src/sync/cond.go:56 +0x80 00:25:38.141 unit-tests_1  | github.com/hyperledger/fabric/core/common/validation/statebased.(*txDependency).waitForAndRetrieveValidationResult(0xc420859220, 0xe2436d, 0x2, 0x0, 0x0) 00:25:38.141 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/statebased/vpmanagerimpl.go:89 +0xe0 00:25:38.142 unit-tests_1  | github.com/hyperledger/fabric/core/common/validation/statebased.(*validationContext).waitForValidationResults(0xc420014628, 0xc4200cbcf0, 0x1, 0x1, 0x0, 0x0) 00:25:38.143 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/statebased/vpmanagerimpl.go:194 +0x17d 00:25:38.143 unit-tests_1  | github.com/hyperledger/fabric/core/common/validation/statebased.(*KeyLevelValidationParameterManagerImpl).GetValidationParameterForKey(0xc420014600, 0xe2436d, 0x2, 0xe24b03, 0x4, 0xe24622, 0x3, 0x1, 0x1, 0x0, ...) 00:25:38.144 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/statebased/vpmanagerimpl.go:268 +0x1ab 00:25:38.144 unit-tests_1  | github.com/hyperledger/fabric/core/common/validation/statebased.TestPvtDependencyConflict.func3() 00:25:38.144 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/statebased/vpmanager_test.go:399 +0x96 00:25:38.145 unit-tests_1  | github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/assert.didPanic.func1(0xc42004f6a8, 0xc42004f6a7, 0xc4204c4870) 00:25:38.146 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/assert/assertions.go:791 +0x57 00:25:38.146 unit-tests_1  | github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/assert.didPanic(0xc4204c4870, 0xc420327800, 0x14, 0xf) 00:25:38.147 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/assert/assertions.go:793 +0x4c 00:25:38.147 unit-tests_1  | github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/assert.NotPanics(0xe9e8e0, 0xc4200e90e0, 0xc4204c4870, 0xc4200cbf78, 0x2, 0x2, 0x5b9191d9) 00:25:38.148 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/assert/assertions.go:833 +0x32 00:25:38.148 unit-tests_1  | github.com/hyperledger/fabric/core/common/validation/statebased.runFunctions.func1(0xc4200e90e0, 0xc420764da0, 0x3, 0x3, 0x2, 0x5b9191d9, 0xc420012180) 00:25:38.149 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/statebased/vpmanager_test.go:140 +0xda 00:25:38.150 unit-tests_1  | created by github.com/hyperledger/fabric/core/common/validation/statebased.runFunctions 00:25:38.151 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/statebased/vpmanager_test.go:139 +0x177 00:25:38.152 unit-tests_1  | FAIL	github.com/hyperledger/fabric/core/common/validation/statebased	1200.052s {code}  https://gerrit.hyperledger.org/r/c/26149/  ></description> </Issue>
