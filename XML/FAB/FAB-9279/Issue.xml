<Issue id="29067" key="FAB-9279" number="9279" project="10002" reporter="rpjday" creator="rpjday" type="10001" summary="&quot;make license&quot; is broken if you have local changes" priority="4" resolution="10001" status="6" created="2018-04-01 08:54:28.0" updated="2020-01-22 22:32:49.0" resolutiondate="2020-01-22 22:32:49.0" votes="0" watches="2" workflowId="35664"> <description><! CDATA If I have a clean checkout, then running "make license" gives me what appears to be correct output:  *$ make license* *The following files are missing SPDX-License-Identifier headers:* *peer/node/start_test.go*  *Please replace the Apache license header comment text with:* *SPDX-License-Identifier: Apache-2.0*  *Checking committed files for traditional Apache License headers ...* *All remaining files have Apache 2.0 headers*  However, if I edit, say, docker-env.mk, and remove the old-style license info and rerun that command, I get:  *$ make license* *The following files are missing SPDX-License-Identifier headers:* *docker-env.mk*  *Please replace the Apache license header comment text with:* *SPDX-License-Identifier: Apache-2.0*  *Checking committed files for traditional Apache License headers ...* *The following files are missing traditional Apache 2.0 headers:* *docker-env.mk* *Fatal Error - All files must have a license header* *make: ***  Makefile:144: license  Error 1*  Note how there is suddenly no mention of the earlier reported file, peer/node/start_test.go, which is because having a locally-edited file in your working directory restricts the value of CHECK in the check_license.sh script to only the locally-edited files. Is that what it's supposed to do? That seems non-intuitive.  Â   ></description> </Issue>
