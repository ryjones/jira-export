<Action id="39463" issue="27246" author="sambhavdutt" type="comment" created="2018-01-31 21:38:16.0" updateauthor="sambhavdutt" updated="2018-01-31 21:38:16.0"> <body><! CDATA Peer and Chaincode tests are failing along with Orderer Service and Orderer_ote as kafka fails due to timeout, build #241  *Build Log* https://jenkins.hyperledger.org/view/Daily/job/fabric-test-daily-x86_64/241/consoleFull    ></body> </Action>
<Action id="39507" issue="27246" author="rameshthoomu" type="comment" created="2018-02-01 15:08:27.0" updateauthor="rameshthoomu" updated="2018-02-01 15:09:01.0"> <body><! CDATA Observed these failures on network latency in x86_64 nodes. I see many builds are failing with timeout error or curl is failing to fetch. Informed this to Linux foundation in #infra-support RC channel     ( https://chat.hyperledger.org/channel/infra-support?msg=yDjDiFiQtzTCgT2q3)    ~ry   ~jwagantall  ^^  ></body> </Action>
<Action id="39593" issue="27246" author="rameshthoomu" type="comment" created="2018-02-02 14:50:22.0" updateauthor="rameshthoomu" updated="2018-02-02 14:50:22.0"> <body><! CDATA h3. one more test failed with timeout error. https://jenkins.hyperledger.org/view/fabric/job/fabric-smoke-test-daily-x86_64/26/testReport/orderer/Orderer%20Service/FAB_3852__Message_Payloads_Less_than_1MB__for_kafka_orderer_using_the_NodeJS_SDK_interface_____1_4_/ h3.   {code:java} Error Message The containers are not ready in the allotted time (300 seconds)  Stacktrace Failing step: Given I have a bootstrapped fabric network of type kafka ... failed in 321.442s Location: orderer.feature:64 Assertion Failed: The containers are not ready in the allotted time (300 seconds) Captured stdout: testConfigs: configs/96489ed007de11e88883fa163ed8ae26 {code}    ></body> </Action>
<Action id="39612" issue="27246" author="ryjones" type="comment" body="No update on network issues from service provider." created="2018-02-02 22:35:18.0" updateauthor="ryjones" updated="2018-02-02 22:35:18.0"/>
<Action id="39665" issue="27246" author="rameshthoomu" type="comment" created="2018-02-05 14:34:17.0" updateauthor="rameshthoomu" updated="2018-02-05 14:36:09.0"> <body><! CDATA  ~ryjones   ~jwagantall  seems network issues are more frequent now and causing most of the build failures. Developers are complaining about these failures. Could you please let us know the ETA or findings on this issue.  https://gerrit.hyperledger.org/r/#/q/project:fabric-test  ></body> </Action>
<Action id="39695" issue="27246" author="ryjones" type="comment" body="I am working to schedule an outage for an upgrade" created="2018-02-05 19:39:25.0" updateauthor="ryjones" updated="2018-02-05 19:39:25.0"/>
<Action id="39717" issue="27246" author="sambhavdutt" type="comment" body=" ~ryjones  Can you tell when this outage is planned or if it has been worked on already. There are still some errors in the fabric tests due to the same issue. If the outage is not done yet, and will happen soon or later, that would be fine as it would possibly solve this problem." created="2018-02-06 14:26:25.0" updateauthor="sambhavdutt" updated="2018-02-06 14:27:12.0"/>
<Action id="39741" issue="27246" author="ryjones" type="comment" body=" ~sambhavdutt  there will be an email to the TSC when this is scheduled" created="2018-02-06 20:41:26.0" updateauthor="ryjones" updated="2018-02-06 20:41:26.0"/>
<Action id="39905" issue="27246" author="ryjones" type="comment" body="This work is done. We should see much less of these types of failures." created="2018-02-09 02:09:17.0" updateauthor="ryjones" updated="2018-02-09 02:09:17.0"/>
<Action id="40158" issue="27246" author="sambhavdutt" type="comment" created="2018-02-14 16:33:31.0" updateauthor="sambhavdutt" updated="2018-02-14 16:36:13.0"> <body><! CDATA After the Network fix, ca_tests and chaincodes tests are passing, but still Gossip(behave) fails due to 300 second timeout, and the Orderer tests fail too as kafka build was not complete within the timeframe.   *Build Log* https://jenkins.hyperledger.org/view/Daily/job/fabric-test-daily-x86_64/255/console  ></body> </Action>
<Action id="40260" issue="27246" author="rameshthoomu" type="comment" created="2018-02-15 16:05:14.0" updateauthor="rameshthoomu" updated="2018-02-15 16:05:14.0"> <body><! CDATA  ~ryjones  We are not seeing `curl` issues after the network is upgraded but below `timeout issues` are popping up very frequently. Below are few    {code:java} Issue#1: Error: Error endorsing query: rpc error: code = Unknown desc = error executing chaincode: timeout expired while starting chaincode  Issue#2: The containers are not ready in the allotted time (300 seconds){code}    ></body> </Action>
<Action id="40294" issue="27246" author="rameshthoomu" type="comment" created="2018-02-16 16:01:25.0" updateauthor="rameshthoomu" updated="2018-02-16 16:01:25.0"> <body><! CDATA  ~ryjones  *curl(18)* issues are popping up again in the builds. Most of the e2e tests are failing while downloading (using curl) maven binary. Also, I see many other builds are failing because of the timeout errors. See the below example    {code:java} Error: Error endorsing query: rpc error: code = Unknown desc = error executing chaincode: timeout expired while starting chaincode mycc:0(networkid:24f68e0a12d711e89721fa163e90259d,peerid:peer1.org1.example.com,tx:35df92cdb3d553c9556aac6270b56ab9b8e77674ea0e776e96dc61272333111f) - <nil> Usage:{code} {code:java} 00:02:45.612 Step 7/15 : RUN mkdir -p /usr/share/maven /usr/share/maven/ref   && curl -fsSL http://www-us.apache.org/dist/maven/maven-3/$MAVEN_VERSION/binaries/apache-maven-$MAVEN_VERSION-bin.tar.gz     | tar -xzC /usr/share/maven --strip-components=1   && ln -s /usr/share/maven/bin/mvn /usr/bin/mvn 00:02:45.668  ---> Running in f4d72bdecd50 00:02:50.786 curl: (18) transfer closed with 5559958 bytes remaining to read{code}    ></body> </Action>
<Action id="40419" issue="27246" author="sambhavdutt" type="comment" created="2018-02-20 14:53:40.0" updateauthor="sambhavdutt" updated="2018-02-20 14:53:40.0"> <body><! CDATA The Gossip(behave) tests are failing in the last build for fabric-test-daily-x86_64 as timeout expired.   {code:java} Expected response was 930; received Error occurred  'docker exec peer0.org1.exam... {code}  {code:java} Error: Error endorsing query: rpc error: code = Unknown desc = error executing chaincode: timeout expired while starting chaincode mycc:0(networkid:ba788a6815fd11e8829dfa163ef5eecb,peerid:peer0.org1.example.com,tx:0edb24a66e4e307ca691ed4bed5ff798dcb210753013564b26ef8c8cee509dd7) - <nil> {code}  *Build log*  https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/262/testReport/gossip/Gossip%20Service/_FAB_4667___FAB_4671___FAB_4672__A_leader_peer_goes_down_by_disconnect__comes_back_up__after__another_leader_is_elected__catches_up______1_3_/    ></body> </Action>
<Action id="40565" issue="27246" author="sambhavdutt" type="comment" created="2018-02-22 14:12:07.0" updateauthor="sambhavdutt" updated="2018-02-22 15:07:29.0"> <body><! CDATA The Bootstrap, Chaincode, Orderer and Peer tests failing in fabric-smoke-test daily(and in fabric-test-daily) due to timeout error,   {code:java} Failing step: And I have a bootstrapped fabric network of type kafka with tls ... failed in 323.763s Location: bootstrap.feature:82 Assertion Failed: The containers are not ready in the allotted time (300 seconds) Captured stdout: testConfigs: configs/7ba1a996179211e88bc6fa163ef84b42 {code}   {code:java} Failing step: Given I have a bootstrapped fabric network of type kafka ... failed in 314.238s Location: chaincodes.feature:379 Assertion Failed: The containers are not ready in the allotted time (300 seconds) Captured stdout: testConfigs: configs/44962eb0179511e88bc6fa163ef84b42 {code}   {code:java} Failing step: Given I have a bootstrapped fabric network of type kafka ... failed in 313.436s Location: orderer.feature:64 Assertion Failed: The containers are not ready in the allotted time (300 seconds) Captured stdout: testConfigs: configs/6e22173e179611e88bc6fa163ef84b42 {code}   {code:java} Failing step: Given I have a bootstrapped fabric network of type kafka using state-database leveldb with tls ... failed in 313.921s Location: peer.feature:40 Assertion Failed: The containers are not ready in the allotted time (300 seconds) Captured stdout: testConfigs: configs/d4ae2738179911e88bc6fa163ef84b42 {code}  *Build Log*  https://jenkins.hyperledger.org/view/Daily/job/fabric-smoke-test-daily-x86_64/47/consoleFull   ></body> </Action>
<Action id="40598" issue="27246" author="sambhavdutt" type="comment" created="2018-02-22 20:37:25.0" updateauthor="sambhavdutt" updated="2018-02-22 20:37:25.0"> <body><! CDATA  ~ryjones  Need your advise on this, I get the following error during byfn tests. Worked ok yesterday, should I increase the timeout to more than 60. It wouldn't be a problem if it is due a slow network issue that will be fixed soon.  {code:java}  16:15:16 ERROR: for peer1.org1.example.com  UnixHTTPConnectionPool(host='localhost', port=None): Read timed out. (read timeout=60) 16:15:16  16:15:16 ERROR: for peer1.org1.example.com  UnixHTTPConnectionPool(host='localhost', port=None): Read timed out. (read timeout=60) 16:15:16 An HTTP request took too long to complete. Retry with --verbose to obtain debug information. 16:15:16 If you encounter this issue regularly because of slow network conditions, consider setting COMPOSE_HTTP_TIMEOUT to a higher value (current value: 60). {code}   ></body> </Action>
<Action id="40599" issue="27246" author="ryjones" type="comment" body=" ~sambhavdutt  I would increase the timeout. I&apos;m not sure why things are failing." created="2018-02-22 20:40:09.0" updateauthor="ryjones" updated="2018-02-22 20:40:09.0"/>
<Action id="40600" issue="27246" author="sambhavdutt" type="comment" body=" ~ryjones  Thank you ! Will increase the timeout" created="2018-02-22 20:43:30.0" updateauthor="sambhavdutt" updated="2018-02-22 20:43:30.0"/>
<Action id="40807" issue="27246" author="sambhavdutt" type="comment" created="2018-02-26 14:11:39.0" updateauthor="sambhavdutt" updated="2018-02-26 14:11:39.0"> <body><! CDATA Gossip test in fabric-test-daily failed to execute as timeout expired.   {code:java} Error: Error endorsing query: rpc error: code = Unknown desc = error executing chaincode: timeout expired while starting chaincode mycc:0(networkid:9b361a181ab111e88f05fa163ef01172,peerid:peer1.org1.example.com,tx:09e4e0e09a50dfd26e69cd9e9bf3a41fabb50f9b3a28d8130812b8e14675fb04) - <nil>  {code}  *Build Log*  https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/269/testReport/gossip/Gossip%20Service/_FAB_4663___FAB_4664___FAB_4665__A_non_leader_peer_goes_down_by_disconnect__comes_back_up_and_catches_up_eventually______1_3_/   ></body> </Action>
<Action id="41187" issue="27246" author="sambhavdutt" type="comment" created="2018-03-05 14:09:50.0" updateauthor="sambhavdutt" updated="2018-03-05 14:09:50.0"> <body><! CDATA Gossip Service failed in the fabric-test-daily due to timeout,  *gossip.Gossip Service. FAB-4673   FAB-4674   FAB-4675  A leader peer goes down by disconnect, comes back up *before* another leader is elected, catches up. -- @1.3*   {code:java} Assertion Failed: Expected response was 980; received Error occurred  'docker exec peer0.org1.example.com /bin/bash -c "CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/d69596c6203611e8a422fa163e982d63/peerOrganizations/org1.example.com/users/User1@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com  {code}   {code:java} Error: Error endorsing query: rpc error: code = Unknown desc = error executing chaincode: timeout expired while starting chaincode mycc:0(networkid:d69596c6203611e8a422fa163e982d63,peerid:peer0.org1.example.com,tx:5dbf6c01a0c9710f9a283ac9a1d35d2907ee582c9dcd48a873834ee86c3cffc5) - <nil> {code}  *Build Log*  https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/278/testReport/gossip/Gossip%20Service/_FAB_4673___FAB_4674___FAB_4675__A_leader_peer_goes_down_by_disconnect__comes_back_up__before__another_leader_is_elected__catches_up______1_3_/   ></body> </Action>
<Action id="41251" issue="27246" author="sambhavdutt" type="comment" created="2018-03-06 14:05:00.0" updateauthor="sambhavdutt" updated="2018-03-06 14:05:00.0"> <body><! CDATA Timeout error observed in, chaincodes tests for fabric-smoke-test daily, and Gossip test for fabric-test daily,  *smoke-test-daily*  {code:java} Failing step: Given I have a bootstrapped fabric network of type kafka ... failed in 311.878s Location: chaincodes.feature:379 Assertion Failed: The kafka containers are not ready in the allotted time (300 seconds) Captured stdout: testConfigs: configs/16362de8210111e889b4fa163e5ab570 {code}  *fabric-test-daily*   {code:java} Failing step: Then a user receives a success response of 900 from "peer0.org2.example.com" ... failed in 0.000s Location: gossip.feature:303 Assertion Failed: Expected response was 900; received Error occurred  u'docker exec peer0.org2.example.com /bin/bash -c "CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/34f06ef2210511e89d2ffa163e1a0116/peerOrganizations/org2.example.com/users/User1@org2.example.com/msp CORE_PEER_LOCALMSPID=org2.example.com CORE_PEER_ID=peer0.org2.example.com CORE_PEER_ADDRESS=peer0.org2.example.com:7051 peer chaincode query --name mycc --ctor '{\"Args\":  \"query\",\"a\" }' --channelID behavesystest "' : 2018-03-06 06:15:04.597 UTC  msp  GetLocalMSP -> DEBU 001 Returning existing local MSP 2018-03-06 06:15:04.597 UTC  msp  GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity 2018-03-06 06:15:04.597 UTC  chaincodeCmd  checkChaincodeCmdParams -> INFO 003 Using default escc 2018-03-06 06:15:04.597 UTC  chaincodeCmd  checkChaincodeCmdParams -> INFO 004 Using default vscc 2018-03-06 06:15:04.597 UTC  chaincodeCmd  getChaincodeSpec -> DEBU 005 java chaincode enabled 2018-03-06 06:15:04.597 UTC  msp/identity  Sign -> DEBU 006 Sign: plaintext: 0AB8070A6B08031A0C08E8E3F8D40510...6D7963631A0A0A0571756572790A0161  2018-03-06 06:15:04.598 UTC  msp/identity  Sign -> DEBU 007 Sign: digest: 87ED54981283B907AE466EBDF9678CCFBF1C2A9F1A01CBF4AA3C9DDFD931B6B4  Error: Error endorsing query: rpc error: code = Unknown desc = error executing chaincode: timeout expired while starting chaincode   {code}  *Build Log* smoke-test-daily: https://jenkins.hyperledger.org/view/Daily/job/fabric-smoke-test-daily-x86_64/60/testReport/chaincodes/Chaincodes%20Testing/FAB_5791__Test_API_in_SHIM_interface_using_marbles02_and_shimApiDriver_chaincodes_for_kafka_orderer_couchdb_db_GOLANG_lang_____1_2_/  faric-test-daily: https://jenkins.hyperledger.org/view/Daily/job/fabric-test-daily-x86_64/279/testReport/gossip/Gossip%20Service/_FAB_4683___FAB_4684___FAB_4685__In_leader_selection_setup__leader_peer_goes_down_by_disconnect_for_at_least_15_seconds__comes_back_up_and_catches_up_eventually______1_3_/  ></body> </Action>
<Action id="42055" issue="27246" author="sambhavdutt" type="comment" created="2018-03-23 11:10:38.0" updateauthor="sambhavdutt" updated="2018-03-23 11:10:38.0"> <body><! CDATA  ~ryjones  Good Morning Ry.  Can you suggest something about the test case fails due to network issue (if I am not wrong) that are causing the tests/builds to timeout and fail, specifically in fabric-test-daily and smoke-test daily. Should I create a Bug and assign it to someone or communicate with a  team for this. Many of the test case timeouts were little more than 60 seconds. The time has been increased to 300 seconds but the builds still fail but to timeout.  ></body> </Action>
<Action id="42351" issue="27246" author="sambhavdutt" type="comment" body="The root cause of these build fails due to timeout will be verified soon if  the tests are failing due to network issue or if it because of tests." created="2018-03-29 19:11:50.0" updateauthor="sambhavdutt" updated="2018-03-29 19:15:40.0"/>
<Action id="42928" issue="27246" author="sambhavdutt" type="comment" body="The timeout errors that failed due to 300 seconds container timeout are not happening anymore in recent CI builds." created="2018-04-13 19:29:24.0" updateauthor="sambhavdutt" updated="2018-04-13 19:29:24.0"/>
