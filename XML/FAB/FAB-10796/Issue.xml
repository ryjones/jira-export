<Issue id="31270" key="FAB-10796" number="10796" project="10002" reporter="manish-sethi" assignee="senthil1" creator="manish-sethi" type="10001" summary="Command line tool for ledger management and troubleshooting (check heights, hashes, etc)" priority="2" resolution="10001" status="6" created="2018-06-21 15:07:18.0" updated="2021-02-22 14:58:43.0" resolutiondate="2021-02-22 14:58:16.0" votes="0" watches="3" workflowId="35881"> <description><! CDATA A tool (command line or web based) is desired that directly operates upon filesystem contents of ledger for the purpose of quick debugging and administration. The tool should handle following commands * View properties of block storage (e.g., be able to view block chain info, tx status) * Get hash of writes per block to help identify state forks (the hash is a new concept proposed in  https://docs.google.com/document/d/1_-e4Bu42E9vfdttrYBmiSUeOdanH2SiSnuhM1oOn1TA/edit ) * Delete last n blocks from block store for a given channel - see ideas in  https://docs.google.com/document/d/1_-e4Bu42E9vfdttrYBmiSUeOdanH2SiSnuhM1oOn1TA/edit  * Drop block store index, state db, and history db for a given channel (As of now, it's not possible to drop for a given channel. If there is a problem with a particular channel, the entire state/indexes for all the channels are to be dropped) * Un-join a peer from a channel (as of now, entire ledger provider db is to be dropped and hence all channels have to be re-joined )  This may be helpful in administration when a bug hits and some of the above needs to be built selectively.  +_To take an example_+, if someone hits into a rare bug as mentioned in FAB-10617, ideally the solution requires an admin to * Delete the last block from the troublesome channel, apply patch and restart the peer.  However, in the absence of such a tool, the admin is required to * Delete the entire block storage index and state db and history db for all the channels * Delete the entire last block file for the troublesome channel * If there only a single file as yet in the channel, then it becomes more complex that requires deletion of ledgers provider database which in turn requires the peer to re-join all the channels (i.e., as good as a fresh peer joining the network)  ></description> </Issue>
