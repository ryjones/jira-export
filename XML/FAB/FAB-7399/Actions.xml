<Action id="36046" issue="24898" author="jeffgarratt" type="comment" created="2017-12-08 22:00:33.0" updateauthor="jeffgarratt" updated="2017-12-08 22:11:18.0"> <body><! CDATA  ~wlahti   ~scottz  got this error when trying to upgrade to latest master branch.     The latest commit that actually passed had a docker label of x86_64-1.1.0-alpha-snapshot-8becdf0  ></body> </Action>
<Action id="36300" issue="24898" author="suryalnvs" type="comment" body="Reproduced the same on latest commit 446bf75d20a4df0a89b5c31f804e1f63ae56749c, Date:   Mon Dec 11 12:13:05 2017 +0000" created="2017-12-11 15:01:04.0" updateauthor="suryalnvs" updated="2017-12-11 15:01:04.0"/>
<Action id="38228" issue="24898" author="jyellick" type="comment" body="Fix in review via: https://gerrit.hyperledger.org/r/c/16599/" created="2018-01-05 15:31:31.0" updateauthor="jyellick" updated="2018-01-05 15:31:31.0"/>
<Action id="38528" issue="24898" author="suryalnvs" type="comment" body=" ~jyellick  I am still be able to reproduce the above qscc check failure on commit level 60fc1e99f863bb5c47c1dde78e5e32acf9e7e203" created="2018-01-12 21:52:46.0" updateauthor="suryalnvs" updated="2018-01-12 21:52:46.0"/>
<Action id="38559" issue="24898" author="jyellick" type="comment" body=" ~suryalnvs  can you please include the logs/panic for what you reproduced with 60fc1e99f863bb5c47c1dde78e5e32acf9e7e203 ?  Perhaps there is some other failure occuring, looking at the code the particular panic reported earlier should no longer be possible." created="2018-01-14 17:40:02.0" updateauthor="jyellick" updated="2018-01-14 17:40:02.0"/>
<Action id="38642" issue="24898" author="suryalnvs" type="comment" created="2018-01-15 16:00:29.0" updateauthor="suryalnvs" updated="2018-01-15 16:04:43.0"> <body><! CDATA  ~jyellick  When I am running the upgrade feature, I see the following errors {code:java} And user "dev0Org0" using cert alias "consortium1-cert" sends proposal "queryGetChainInfoProposal1" to endorsers with timeout of "60" seconds with proposal responses "queryGetChainInfoProposal1Responses" # steps/endorser_impl.py:140 0.015s | Endorser | | peer0 | | peer1 | | peer2 | | peer3 | Traceback (most recent call last): File "/home/surya/Envs/behave_venv/local/lib/python2.7/site-packages/behave/model.py", line 1456, in run match.run(runner.context) File "/home/surya/Envs/behave_venv/local/lib/python2.7/site-packages/behave/model.py", line 1903, in run self.func(context, *args, **kwargs) File "steps/endorser_impl.py", line 155, in step_impl resultsDict = dict(zip(endorsers,  respFuture.result() for respFuture in proposalResponseFutures )) File "/home/surya/Envs/behave_venv/local/lib/python2.7/site-packages/grpc/_channel.py", line 279, in result raise self _Rendezvous: <_Rendezvous of RPC that terminated with (StatusCode.UNKNOWN, Failed to deserialize creator identity, err MSP peerOrg0 is unknown)>  Captured stdout: Will copy gensisiBlock over at this point configAdminOrdererOrg0 received reply: status: SUCCESS , counter = 1 Done dev0Org0 received reply: status: SUCCESS , counter = 1 Done Start and end = 0/0  ProposalResponse: response { status: 200 }    ProposalResponse: response { status: 200 }    configAdminPeerOrg0 received reply: status: SUCCESS , counter = 1 Done Start and end = 1/1  ProposalResponse: response { status: 200 }    ProposalResponse: response { status: 200 }    ccSpec = type: GOLANG chaincode_id { path: "github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02" name: "example02" version: "1.0" } input { args: "init" args: "a" args: "100" args: "b" args: "200" }  Endorsers =  u'peer0' , rsults keys =  u'peer0'  Endorsers =  u'peer2' , rsults keys =  u'peer2'  Endorsers =  u'peer0', u'peer2' , rsults keys =  u'peer0', u'peer2'  configAdminPeerOrg0 received reply: status: SUCCESS , counter = 1 Done Start and end = 2/2  Endorsers =  u'peer0', u'peer2' , rsults keys =  u'peer0', u'peer2'  Endorsers =  u'peer0', u'peer2' , rsults keys =  u'peer0', u'peer2'  dev0Org0 received reply: status: SUCCESS , counter = 1 Done Start and end = 3/3  Endorsers =  u'peer0', u'peer2' , rsults keys =  u'peer0', u'peer2'  dev0Org0 received reply: status: SUCCESS , counter = 1 Done Start and end = 4/4  configAdminOrdererOrg0 received reply: status: SUCCESS , counter = 1 Done configAdminOrdererOrg0 received reply: status: BAD_REQUEST , counter = 1 Done configAdminOrdererOrg0 received reply: status: SUCCESS , counter = 1 Done ccSpec = type: GOLANG chaincode_id { path: "/" name: "qscc" version: "1.0" } input { args: "GetChainInfo" args: "com.acme.blockchain.jdoe.channel1" }  {code} and strangely only orderer1 (out of three orderers) is showing the following logs with identity mismatch like {code:java} the identity is a member of a different MSP (expected ordererOrg0, got peerOrg1) the identity is a member of a different MSP (expected ordererOrg0, got peerOrg0) the identity is a member of a different MSP (expected peerOrg0, got peerOrg1){code} and part of orderer1 logs are {code:java} 2018-01-15 15:38:48.332 UTC  policies  Evaluate -> DEBU 7d5 == Evaluating *cauthdsl.policy Policy /Channel/Orderer/ordererOrg0/Readers == 2018-01-15 15:38:48.332 UTC  msp  DeserializeIdentity -> INFO 7d6 Obtaining identity 2018-01-15 15:38:48.332 UTC  cauthdsl  func1 -> DEBU 7d7 0xc42000e108 gate 1516030728332289159 evaluation starts 2018-01-15 15:38:48.332 UTC  cauthdsl  func2 -> DEBU 7d8 0xc42000e108 signed by 0 principal evaluation starts (used  false ) 2018-01-15 15:38:48.332 UTC  cauthdsl  func2 -> DEBU 7d9 0xc42000e108 processing identity 0 with bytes of 0a08706565724f72673012d3052d2d2d2d2d424547494e202d2d2d2d2d0a4d4949422b444343415a2b674177494241774943412b6777436759494b6f5a497a6a304541774977565445524d41384741315545417777496347566c636b39790a5a7a4178437a414a42674e5642415954416c56544d517777436759445651514844414e53564641784444414b42674e5642416f4d41306c43545445584d4255470a413155454341774f546d3979644767675132467962327870626d45774868634e4d5467774d5445314d54557a4e444d795768634e4d546b774d5445314d54557a0a4e444d79576a42534d5134774441594456515144444156775a5756794d44454c4d416b474131554542684d4356564d784444414b42674e564241634d41314a550a5544454d4d416f47413155454367774453554a4e4d52637746515944565151494441354f62334a306143424459584a7662476c755954425a4d424d47427971470a534d34394167454743437147534d343941774548413049414247724f7a584f3948372f3038776d3956576736526a75336f4977447a485a6d4c7174566e4773660a4c4b613232694f484e5762736f73734c5a764b643570786566567a6352703563513259592f7245714758695a4e61476a596a42674d41774741315564457745420a2f7751434d414177485159445652304f424259454642772f454650705357573533466f64776e5a7659305058636b6a504d42384741315564497751594d4261410a464850382b7030632f4554706f672b4d534d4e334b544d4a774370334d424147413155644551514a4d4165434258426c5a5849774d416f4743437147534d34390a42414d43413063414d45514349476d4d556e6f31706d547a306d332f516861576d53495054576b343846556c6a6e2f4a624d5a3641556e3841694251346366520a587362586677673856477135777667577164737573434162556e4b6d647668386d3255454a673d3d0a2d2d2d2d2d454e44202d2d2d2d2d0a 2018-01-15 15:38:48.332 UTC  cauthdsl  func2 -> DEBU 7da 0xc42000e108 identity 0 does not satisfy principal: the identity is a member of a different MSP (expected ordererOrg0, got peerOrg0) 2018-01-15 15:38:48.332 UTC  cauthdsl  func2 -> DEBU 7db 0xc42000e108 principal evaluation fails 2018-01-15 15:38:48.332 UTC  cauthdsl  func1 -> DEBU 7dc 0xc42000e108 gate 1516030728332289159 evaluation fails 2018-01-15 15:38:48.332 UTC  policies  Evaluate -> DEBU 7dd Signature set did not satisfy policy /Channel/Orderer/ordererOrg0/Readers 2018-01-15 15:38:48.332 UTC  policies  Evaluate -> DEBU 7de == Done Evaluating *cauthdsl.policy Policy /Channel/Orderer/ordererOrg0/Readers 2018-01-15 15:38:48.332 UTC  policies  func1 -> DEBU 7df Evaluation Failed: Only 0 policies were satisfied, but needed 1 of   ordererOrg0.Readers   2018-01-15 15:38:48.332 UTC  policies  Evaluate -> DEBU 7e0 Signature set did not satisfy policy /Channel/Orderer/Readers 2018-01-15 15:38:48.332 UTC  policies  Evaluate -> DEBU 7e1 == Done Evaluating *policies.implicitMetaPolicy Policy /Channel/Orderer/Readers 2018-01-15 15:38:48.332 UTC  policies  Evaluate -> DEBU 7e2 == Evaluating *policies.implicitMetaPolicy Policy /Channel/Application/Readers == 2018-01-15 15:38:48.332 UTC  policies  Evaluate -> DEBU 7e3 This is an implicit meta policy, it will trigger other policy evaluations, whose failures may be benign 2018-01-15 15:38:48.332 UTC  policies  Evaluate -> DEBU 7e4 == Evaluating *cauthdsl.policy Policy /Channel/Application/peerOrg0/Readers == 2018-01-15 15:38:48.332 UTC  cauthdsl  func1 -> DEBU 7e5 0xc42000e118 gate 1516030728332526720 evaluation starts 2018-01-15 15:38:48.332 UTC  cauthdsl  func2 -> DEBU 7e6 0xc42000e118 signed by 0 principal evaluation starts (used  false ) 2018-01-15 15:38:48.332 UTC  cauthdsl  func2 -> DEBU 7e7 0xc42000e118 processing identity 0 with bytes of 0a08706565724f72673012d3052d2d2d2d2d424547494e202d2d2d2d2d0a4d4949422b444343415a2b674177494241774943412b6777436759494b6f5a497a6a304541774977565445524d41384741315545417777496347566c636b39790a5a7a4178437a414a42674e5642415954416c56544d517777436759445651514844414e53564641784444414b42674e5642416f4d41306c43545445584d4255470a413155454341774f546d3979644767675132467962327870626d45774868634e4d5467774d5445314d54557a4e444d795768634e4d546b774d5445314d54557a0a4e444d79576a42534d5134774441594456515144444156775a5756794d44454c4d416b474131554542684d4356564d784444414b42674e564241634d41314a550a5544454d4d416f47413155454367774453554a4e4d52637746515944565151494441354f62334a306143424459584a7662476c755954425a4d424d47427971470a534d34394167454743437147534d343941774548413049414247724f7a584f3948372f3038776d3956576736526a75336f4977447a485a6d4c7174566e4773660a4c4b613232694f484e5762736f73734c5a764b643570786566567a6352703563513259592f7245714758695a4e61476a596a42674d41774741315564457745420a2f7751434d414177485159445652304f424259454642772f454650705357573533466f64776e5a7659305058636b6a504d42384741315564497751594d4261410a464850382b7030632f4554706f672b4d534d4e334b544d4a774370334d424147413155644551514a4d4165434258426c5a5849774d416f4743437147534d34390a42414d43413063414d45514349476d4d556e6f31706d547a306d332f516861576d53495054576b343846556c6a6e2f4a624d5a3641556e3841694251346366520a587362586677673856477135777667577164737573434162556e4b6d647668386d3255454a673d3d0a2d2d2d2d2d454e44202d2d2d2d2d0a 2018-01-15 15:38:48.332 UTC  msp  SatisfiesPrincipal -> DEBU 7e8 Checking if identity satisfies MEMBER role for peerOrg0 2018-01-15 15:38:48.332 UTC  msp  Validate -> DEBU 7e9 MSP peerOrg0 validating identity 2018-01-15 15:38:48.332 UTC  msp/identity  newIdentity -> DEBU 7ea Creating identity instance for cert -----BEGIN CERTIFICATE----- MIIB+DCCAZ+gAwIBAwICA+gwCgYIKoZIzj0EAwIwVTERMA8GA1UEAwwIcGVlck9y ZzExCzAJBgNVBAYTAlVTMQwwCgYDVQQHDANSVFAxDDAKBgNVBAoMA0lCTTEXMBUG A1UECAwOTm9ydGggQ2Fyb2xpbmEwHhcNMTgwMTE1MTUzNDMyWhcNMTkwMTE1MTUz NDMyWjBSMQ4wDAYDVQQDDAVwZWVyMjELMAkGA1UEBhMCVVMxDDAKBgNVBAcMA1JU UDEMMAoGA1UECgwDSUJNMRcwFQYDVQQIDA5Ob3J0aCBDYXJvbGluYTBZMBMGByqG SM49AgEGCCqGSM49AwEHA0IABCsFJZcMI4lgRiG14qWnPVs1aByLJ+O3hxq8+6qr 7OW7teBMxnc/Z/FcEiXx7dD5o7pYL9W7Y0HsOBBPusP8EEmjYjBgMAwGA1UdEwEB /wQCMAAwHQYDVR0OBBYEFDEgIFwddEYr/C1MqmSAEsWjvWpBMB8GA1UdIwQYMBaA FFKan01RzrtqyloL314YOF6JSw/yMBAGA1UdEQQJMAeCBXBlZXIyMAoGCCqGSM49 BAMCA0cAMEQCIHFxHtjmNmdbL9tjqyyOU9OJNT9qzYX1PdNo5Dpq+2BzAiBXQwtb Bn7RoZmfgdbiDLxHOI0CsQFytmvjkD7duSwPZA== -----END CERTIFICATE----- 2018-01-15 15:38:48.332 UTC  cauthdsl  func1 -> DEBU 7ec 0xc4201361d8 gate 1516030728332921027 evaluation starts 2018-01-15 15:38:48.332 UTC  cauthdsl  func2 -> DEBU 7ed 0xc4201361d8 signed by 0 principal evaluation starts (used  false ) 2018-01-15 15:38:48.332 UTC  cauthdsl  func2 -> DEBU 7ee 0xc4201361d8 processing identity 0 with bytes of 0a08706565724f72673112d3052d2d2d2d2d424547494e202d2d2d2d2d0a4d4949422b444343415a2b674177494241774943412b6777436759494b6f5a497a6a304541774977565445524d41384741315545417777496347566c636b39790a5a7a4578437a414a42674e5642415954416c56544d517777436759445651514844414e53564641784444414b42674e5642416f4d41306c43545445584d4255470a413155454341774f546d3979644767675132467962327870626d45774868634e4d5467774d5445314d54557a4e444d795768634e4d546b774d5445314d54557a0a4e444d79576a42534d5134774441594456515144444156775a5756794d6a454c4d416b474131554542684d4356564d784444414b42674e564241634d41314a550a5544454d4d416f47413155454367774453554a4e4d52637746515944565151494441354f62334a306143424459584a7662476c755954425a4d424d47427971470a534d34394167454743437147534d34394177454841304941424373464a5a634d49346c67526947313471576e505673316142794c4a2b4f33687871382b3671720a374f57377465424d786e632f5a2f466345695878376444356f3770594c395737593048734f4242507573503845456d6a596a42674d41774741315564457745420a2f7751434d414177485159445652304f424259454644456749467764644559722f43314d716d53414573576a765770424d42384741315564497751594d4261410a46464b616e3031527a727471796c6f4c333134594f46364a53772f794d424147413155644551514a4d4165434258426c5a5849794d416f4743437147534d34390a42414d43413063414d4551434948467848746a6d4e6d64624c39746a7179794f55394f4a4e5439717a59583150644e6f354470712b32427a41694258517774620a426e37526f5a6d6667646269444c78484f49304373514679746d766a6b443764755377505a413d3d0a2d2d2d2d2d454e44202d2d2d2d2d0a 2018-01-15 15:38:48.333 UTC  cauthdsl  func2 -> DEBU 7ef 0xc4201361d8 identity 0 does not satisfy principal: the identity is a member of a different MSP (expected ordererOrg0, got peerOrg1) 2018-01-15 15:38:48.333 UTC  cauthdsl  func2 -> DEBU 7f0 0xc4201361d8 principal evaluation fails 2018-01-15 15:38:48.333 UTC  cauthdsl  func1 -> DEBU 7f1 0xc4201361d8 gate 1516030728332921027 evaluation fails 2018-01-15 15:38:48.333 UTC  policies  Evaluate -> DEBU 7f2 Signature set did not satisfy policy /Channel/Orderer/ordererOrg0/Readers 2018-01-15 15:38:48.333 UTC  policies  Evaluate -> DEBU 7f3 == Done Evaluating *cauthdsl.policy Policy /Channel/Orderer/ordererOrg0/Readers 2018-01-15 15:38:48.333 UTC  policies  func1 -> DEBU 7f4 Evaluation Failed: Only 0 policies were satisfied, but needed 1 of   ordererOrg0.Readers   2018-01-15 15:38:48.333 UTC  policies  Evaluate -> DEBU 7f5 Signature set did not satisfy policy /Channel/Orderer/Readers 2018-01-15 15:38:48.333 UTC  policies  Evaluate -> DEBU 7f6 == Done Evaluating *policies.implicitMetaPolicy Policy /Channel/Orderer/Readers 2018-01-15 15:38:48.333 UTC  policies  Evaluate -> DEBU 7f7 == Evaluating *policies.implicitMetaPolicy Policy /Channel/Application/Readers == 2018-01-15 15:38:48.333 UTC  policies  Evaluate -> DEBU 7f8 This is an implicit meta policy, it will trigger other policy evaluations, whose failures may be benign 2018-01-15 15:38:48.333 UTC  policies  Evaluate -> DEBU 7f9 == Evaluating *cauthdsl.policy Policy /Channel/Application/peerOrg0/Readers == 2018-01-15 15:38:48.333 UTC  cauthdsl  func1 -> DEBU 7fa 0xc420136378 gate 1516030728333330015 evaluation starts 2018-01-15 15:38:48.333 UTC  cauthdsl  func2 -> DEBU 7fb 0xc420136378 signed by 0 principal evaluation starts (used  false ) 2018-01-15 15:38:48.333 UTC  cauthdsl  func2 -> DEBU 7fc 0xc420136378 processing identity 0 with bytes of 0a08706565724f72673112d3052d2d2d2d2d424547494e202d2d2d2d2d0a4d4949422b444343415a2b674177494241774943412b6777436759494b6f5a497a6a304541774977565445524d41384741315545417777496347566c636b39790a5a7a4578437a414a42674e5642415954416c56544d517777436759445651514844414e53564641784444414b42674e5642416f4d41306c43545445584d4255470a413155454341774f546d3979644767675132467962327870626d45774868634e4d5467774d5445314d54557a4e444d795768634e4d546b774d5445314d54557a0a4e444d79576a42534d5134774441594456515144444156775a5756794d6a454c4d416b474131554542684d4356564d784444414b42674e564241634d41314a550a5544454d4d416f47413155454367774453554a4e4d52637746515944565151494441354f62334a306143424459584a7662476c755954425a4d424d47427971470a534d34394167454743437147534d34394177454841304941424373464a5a634d49346c67526947313471576e505673316142794c4a2b4f33687871382b3671720a374f57377465424d786e632f5a2f466345695878376444356f3770594c395737593048734f4242507573503845456d6a596a42674d41774741315564457745420a2f7751434d414177485159445652304f424259454644456749467764644559722f43314d716d53414573576a765770424d42384741315564497751594d4261410a46464b616e3031527a727471796c6f4c333134594f46364a53772f794d424147413155644551514a4d4165434258426c5a5849794d416f4743437147534d34390a42414d43413063414d4551434948467848746a6d4e6d64624c39746a7179794f55394f4a4e5439717a59583150644e6f354470712b32427a41694258517774620a426e37526f5a6d6667646269444c78484f49304373514679746d766a6b443764755377505a413d3d0a2d2d2d2d2d454e44202d2d2d2d2d0a 2018-01-15 15:38:48.333 UTC  cauthdsl  func2 -> DEBU 7fd 0xc420136378 identity 0 does not satisfy principal: the identity is a member of a different MSP (expected peerOrg0, got peerOrg1) 2018-01-15 15:38:48.333 UTC  cauthdsl  func2 -> DEBU 7fe 0xc420136378 principal evaluation fails 2018-01-15 15:38:48.333 UTC  cauthdsl  func1 -> DEBU 7ff 0xc420136378 gate 1516030728333330015 evaluation fails 2018-01-15 15:38:48.333 UTC  policies  Evaluate -> DEBU 800 Signature set did not satisfy policy /Channel/Application/peerOrg0/Readers 2018-01-15 15:38:48.333 UTC  policies  Evaluate -> DEBU 801 == Done Evaluating *cauthdsl.policy Policy /Channel/Application/peerOrg0/Readers 2018-01-15 15:38:48.333 UTC  policies  Evaluate -> DEBU 802 == Evaluating *cauthdsl.policy Policy /Channel/Application/peerOrg1/Readers == 2018-01-15 15:38:48.333 UTC  cauthdsl  func1 -> DEBU 803 0xc420136380 gate 1516030728333603127 evaluation starts 2018-01-15 15:38:48.333 UTC  cauthdsl  func2 -> DEBU 804 0xc420136380 signed by 0 principal evaluation starts (used  false )  {code}  ></body> </Action>
<Action id="38863" issue="24898" author="jyellick" type="comment" created="2018-01-18 16:24:18.0" updateauthor="jyellick" updated="2018-01-18 16:24:18.0"> <body><! CDATA The errors reported from the ordering log are not errors at all.  They are simple debugging statements for the policy evaluation.  Effectively, the policy asks "Did a member of ordererOrg, or peerOrg0, or peerOrg1 sign? Necessarily, a member is only from one of those orgs, so there will be log messages indicating the failure for the member to part of the other orgs.  It sounds to me like a user with authority from peerOrg0 is attempting to make a call to peers from peerOrg1 which it is not authorized to do.  Are you certain this step passes _before_ upgrade?  ></body> </Action>
<Action id="38876" issue="24898" author="suryalnvs" type="comment" created="2018-01-18 21:52:53.0" updateauthor="suryalnvs" updated="2018-01-18 21:52:53.0"> <body><! CDATA Able to pass the above step 1) before upgrading 2) after upgrading and before enabling capabilities. But failing after enabling capabilities. Attached the peer2 logs and orderer logs.     ></body> </Action>
<Action id="38877" issue="24898" author="jyellick" type="comment" body="Believe I have found the underlying problem.  Fix submitted for review here: https://gerrit.hyperledger.org/r/c/16969/" created="2018-01-18 22:48:52.0" updateauthor="jyellick" updated="2018-01-18 22:48:52.0"/>
<Action id="38879" issue="24898" author="suryalnvs" type="comment" body=" ~jyellick  I ran the tests with the  https://gerrit.hyperledger.org/r/c/16969/  and passed. Thank you." created="2018-01-18 23:18:33.0" updateauthor="suryalnvs" updated="2018-01-18 23:18:33.0"/>
