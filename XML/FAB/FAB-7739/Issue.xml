<Issue id="26816" key="FAB-7739" number="7739" project="10002" reporter="suryalnvs" assignee="sanchezl" creator="suryalnvs" type="10004" summary="Consentor error when upgraded orderers to v1.1 and left kafka at v1.0.X" environment="Commit Level: {color:#444444}60fc1e99f863bb5c47c1dde78e5e32acf9e7e203{color}" priority="3" resolution="10000" status="6" created="2018-01-15 22:19:42.0" updated="2018-07-20 14:15:26.0" resolutiondate="2018-01-24 20:49:19.0" votes="0" watches="6" workflowId="40964"> <description><! CDATA When upgraded orderers from v1.0.X to v1.1 and left kafka brokers at v1.0.X, seeing the consentor error logs in orderers. {code:java} 2018-01-12 20:29:48.185 UTC  orderer/consensus/kafka/sarama  func1 -> DEBU e18 Connected to broker at 5519eb1be81b:9092 (registered as #1) 2018-01-12 20:29:48.189 UTC  orderer/consensus/kafka/sarama  handleError -> DEBU e19 producer/broker/1 state change to  closing  because kafka: insufficient data to decode packet, more bytes expected 2018-01-12 20:29:48.189 UTC  orderer/consensus/kafka/sarama  Close -> DEBU e1a Closed connection to broker 5519eb1be81b:9092 2018-01-12 20:29:48.189 UTC  orderer/consensus/kafka  try -> DEBU e1b  channel: ed9f19  Need to retry because process failed = kafka: insufficient data to decode packet, more bytes expected 2018-01-12 20:29:50.902 UTC  common/deliver  Handle -> WARN e1c Error reading from 172.18.0.12:41400: rpc error: code = Canceled desc = context canceled 2018-01-12 20:29:50.903 UTC  orderer/common/server  func1 -> DEBU e1d Closing Deliver stream 2018-01-12 20:29:59.693 UTC  orderer/common/server  Deliver -> DEBU e1e Starting new Deliver handler 2018-01-12 20:29:59.693 UTC  common/deliver  Handle -> DEBU e1f Starting new deliver loop for 172.18.0.15:35832 2018-01-12 20:29:59.693 UTC  common/deliver  Handle -> DEBU e20 Attempting to read seek info message from 172.18.0.15:35832 2018-01-12 20:29:59.693 UTC  common/deliver  deliverBlocks -> WARN e21  channel: com.acme.blockchain.jdoe.channel1  Rejecting deliver request for 172.18.0.15:35832 because of consenter error 2018-01-12 20:29:59.694 UTC  common/deliver  Handle -> DEBU e22 Waiting for new SeekInfo from 172.18.0.15:35832 2018-01-12 20:29:59.695 UTC  common/deliver  Handle -> DEBU e23 Attempting to read seek info message from 172.18.0.15:35832 2018-01-12 20:30:09.696 UTC  common/deliver  Handle -> WARN e24 Error reading from 172.18.0.15:35832: rpc error: code = Canceled desc = context canceled 2018-01-12 20:30:09.696 UTC  orderer/common/server  func1 -> DEBU e25 Closing Deliver stream {code}  ></description> </Issue>
