<Issue id="31189" key="FAB-10722" number="10722" project="10002" reporter="sykesm" assignee="sykesm" creator="sykesm" type="10003" summary="Data race modifying MockLedgerInfo.Height" priority="4" resolution="10000" status="6" created="2018-06-19 20:22:59.0" updated="2018-07-20 14:16:59.0" resolutiondate="2018-07-02 12:07:12.0" votes="0" watches="1" workflowId="42489"> <description><! CDATA simple one {code:java} WARNING: DATA RACE Read at 0x00c4201f8168 by goroutine 21:   sync/atomic.LoadInt64()       /usr/local/Cellar/go/1.10.3/libexec/src/runtime/race_amd64.s:211 +0xb   github.com/hyperledger/fabric/core/deliverservice/mocks.(*MockLedgerInfo).LedgerHeight()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/deliverservice/mocks/blocksprovider.go:148 +0x3a   github.com/hyperledger/fabric/core/deliverservice.(*blocksRequester).RequestBlocks()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/deliverservice/requester.go:38 +0x59   github.com/hyperledger/fabric/core/deliverservice.(*deliverServiceImpl).newClient.func1()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient.go:224 +0x53   github.com/hyperledger/fabric/core/deliverservice.(*broadcastClient).afterConnect()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/deliverservice/client.go:185 +0x43e   github.com/hyperledger/fabric/core/deliverservice.(*broadcastClient).connect()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/deliverservice/client.go:160 +0x861   github.com/hyperledger/fabric/core/deliverservice.(*broadcastClient).doAction()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/deliverservice/client.go:127 +0x102   github.com/hyperledger/fabric/core/deliverservice.(*broadcastClient).try()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/deliverservice/client.go:91 +0x18b   github.com/hyperledger/fabric/core/deliverservice.(*broadcastClient).Recv()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/deliverservice/client.go:58 +0x7b   github.com/hyperledger/fabric/core/deliverservice/blocksprovider.(*blocksProviderImpl).DeliverBlocks()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/deliverservice/blocksprovider/blocksprovider.go:131 +0xeb   github.com/hyperledger/fabric/core/deliverservice.(*deliverServiceImpl).launchBlockProvider()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient.go:179 +0x26f  Previous write at 0x00c4201f8168 by goroutine 25:   github.com/hyperledger/fabric/core/deliverservice.TestDeliverServiceRestart()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient_test.go:169 +0x5f3   testing.tRunner()       /usr/local/Cellar/go/1.10.3/libexec/src/testing/testing.go:777 +0x16d{code} one of the tests didn't use {{atomic.StoreUint64}} when setting the ledger height.  ></description> </Issue>
