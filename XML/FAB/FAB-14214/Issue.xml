<Issue id="37731" key="FAB-14214" number="14214" project="10002" reporter="scottz" assignee="suryalnvs" creator="scottz" type="10101" summary="Raft Month Longrun Test (started March 18)" priority="3" resolution="10000" status="6" created="2019-02-16 01:47:32.0" updated="2019-07-23 18:20:35.0" resolutiondate="2019-07-18 17:49:20.0" votes="0" watches="3" workflowId="49346"> <description><! CDATA Simulate a live network by running traffic for a month in a mixed network. This is a very long traffic test with multiple channels and concurrent traffic in every channel, sending traffic to all the orderers. h2. Setup:  Create a network similar to the one described in FAB-13601 using 3 raft orderers, with these exceptions:  * 2 peers total, 2 orgs * {{batchSize.maxMessageCount}} = 500 * create 6 channels, and join all peers to all channels * set loglevels to INFO, the most detail that would be used in a live site * allocate 2.0 TB storage per peer and per orderer  h2. Input Traffic: * only 1 endorsement required, by any org peer; send each TX to only 1 peer * use a very small payload (maybe 8 bytes) in the transactions * 6 channels, 2 threads per channel * 12 total threads * overall traffic rate = 100 tps; each thread tps = 8.33 * constant mode, frequency (send rate, every thread) = 120 ms * Run for 30 days * 3 pte/nodesdk clients, each with 4 threads - 2 for each of 2 channels: ** client 1, thread 1 - channel1, peer1.org1, orderer1 ** client 1, thread 2 - channel1, peer1.org2, orderer1 ** client 1, thread 3 - channel2, peer1.org1, orderer1 ** client 1, thread 4 - channel2, peer1.org2, orderer1 ** client 2, thread 5 - channel3, peer1.org1, orderer2 ** client 2, thread 6 - channel3, peer1.org2, orderer2 ** client 2, thread 7 - channel4, peer1.org1, orderer2 ** client 2, thread 8 - channel4, peer1.org2, orderer2 ** client 3, thread 9 - channel5, peer1.org1, orderer3 ** client 3, thread 10 - channel5, peer1.org2, orderer3 ** client 3, thread 11 - channel6, peer1.org1, orderer3 ** client 3, thread 12 - channel6, peer1.org2, orderer3    h2. Expectations: * All nodes remain in service throughout the test. * No errors in the logs of peers and orderers. * PTE Test Passes and End2End Latency (avg per transaction) will be reported. * No failures or errors reported by PTE. Approximate Totals: ** Transactions: 30 days X 100 tps = 259,200,000 ** TX per channel: TotalTX / 6 = 43,200,000 ** TX per Block = 33 ** Blocks:  7,854,545 ** Blocks per channel: 1,309,091   * Optionally, we could occasionally upgrade the peers and orderers (preferably one at a time) with new stable images; if choose to do this, then expect a few failures to occur around the time each orderer or peer is stopped and restarted.        ></description> </Issue>
