<Issue id="18662" key="FAB-4998" number="4998" project="10002" reporter="nemoto" assignee="shimos" creator="nemoto" type="10004" summary="example04 build fails in the context of behave tests in test/feature" environment="fabric commit 4e219e9586b241893390f14b6a4d58d500891001" priority="4" resolution="10001" status="6" created="2017-06-26 06:51:02.0" updated="2020-01-22 21:52:40.0" resolutiondate="2020-01-22 21:52:40.0" votes="0" watches="2" workflowId="42918" security="10001"> <description><! CDATA I'm writing the following scenario in test/feature/peer.feature. But the instantiation of example04 fails. {noformat} Scenario Outline: FAB-3866: Multiple Chaincodes Per Peer   Given I have a bootstrapped fabric network of type <type>   When a user deploys chaincode at path "github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example04" with  "init", "test_event", "0"  with name "example04"   Then the chaincode is deployed (...snip)   Examples:     | type  |     | solo  |{noformat}    I tried to re-run the command and got the following messages. {noformat} $ docker exec -it cli bash root@f735d869a79e:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/740456fe57f111e79d9efa163e2101ee/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp \ CORE_PEER_TLS_ROOTCERT_FILE=/var/hyperledger/configs/740456fe57f111e79d9efa163e2101ee/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt \ CORE_PEER_LOCALMSPID=org1.example.com \ CORE_PEER_ID=peer0.org1.example.com \ CORE_PEER_ADDRESS=peer0.org1.example.com:7051 \ peer chaincode instantiate --name example04 --version 0 --channelID behavesystest --ctor '{"Args":  "init", "test_event", "0" }' --orderer orderer0.example.com:7050 2017-06-23 09:29:06.181 UTC  msp  getMspConfig -> WARN 001 Intermediate certs folder not found at  /var/hyperledger/configs/740456fe57f111e79d9efa163e2101ee/peerOrganizations/org1.e xample.com/users/Admin@org1.example.com/msp/intermediatecerts . Skipping.  stat /var/hyperledger/configs/740456fe57f111e79d9efa163e2101ee/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/intermediatecerts: no such file or directory  2017-06-23 09:29:06.181 UTC  msp  getMspConfig -> WARN 002 TLS intermediate certs folder not found at  /var/hyperledger/configs/740456fe57f111e79d9efa163e2101ee/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/tlsintermediatecerts . Skipping.  stat /var/hyperledger/configs/740456fe57f111e79d9efa163e2101ee/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/tlsintermediatecerts: no such file or directory  2017-06-23 09:29:06.182 UTC  msp  getMspConfig -> WARN 003 crls folder not found at  /var/hyperledger/configs/740456fe57f111e79d9efa163e2101ee/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/crls . Skipping.  stat /var/hyperledger/configs/740456fe57f111e79d9efa163e2101ee/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/crls: no such file or directory  2017-06-23 09:29:06.219 UTC  msp  GetLocalMSP -> DEBU 004 Returning existing local MSP 2017-06-23 09:29:06.219 UTC  msp  GetDefaultSigningIdentity -> DEBU 005 Obtaining default signing identity 2017-06-23 09:29:06.223 UTC  chaincodeCmd  checkChaincodeCmdParams -> INFO 006 Using default escc 2017-06-23 09:29:06.223 UTC  chaincodeCmd  checkChaincodeCmdParams -> INFO 007 Using default vscc 2017-06-23 09:29:06.225 UTC  msp/identity  Sign -> DEBU 008 Sign: plaintext: 0AA1070A6A08031A0B08E2BEB3CA0510...01300A000A04657363630A0476736363 2017-06-23 09:29:06.225 UTC  msp/identity  Sign -> DEBU 009 Sign: digest: 87A40E1879C2BC151F7DBAF3EDFF09ADB62D1C6BE3E4AFC0200A72B92D802A8C Error: Error endorsing chaincode: rpc error: code = Unknown desc = Error starting container: Failed to generate platform-specific docker build: Error returned from build: 2 "# github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example04 /opt/go/pkg/tool/linux_amd64/link: running gcc failed: exit status 1 (...snip) /tmp/go-link-682861525/000002.o: In function `Verify': /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/miekg/pkcs11/pkcs11.go:546: multiple definition of `Verify' /tmp/go-link-682861525/000001.o:/chaincode/input/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example04/vendor/github.com/hyperledger/fabric/vendor/github.com/miekg/pkcs11/pkcs11.go:546: first defined here /usr/lib/gcc/x86_64-linux-gnu/5/../../../x86_64-linux-gnu/libltdl.a(dlopen.o): In function `vm_open': (.text+0x5e): warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking /tmp/go-link-682861525/000000.o: In function `_cgo_7a2d42f1a351_C2func_getaddrinfo': /tmp/workdir/go/src/net/cgo_unix.go:66: warning: Using 'getaddrinfo' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking collect2: error: ld returned 1 exit status{noformat}     The environment is as follows: {noformat} $ uname -a Linux test 3.13.0-112-generic #159-Ubuntu SMP Fri Mar 3 15:26:07 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux $ docker version Client: Version:      17.03.1-ce API version:  1.27 Go version:   go1.7.5 Git commit:   c6d412e Built:        Mon Mar 27 17:10:36 2017 OS/Arch:      linux/amd64  Server: Version:      17.03.1-ce API version:  1.27 (minimum version 1.12) Go version:   go1.7.5 Git commit:   c6d412e Built:        Mon Mar 27 17:10:36 2017 OS/Arch:      linux/amd64 Experimental: false{noformat}  ></description> </Issue>
