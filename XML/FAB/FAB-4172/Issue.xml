<Issue id="17161" key="FAB-4172" number="4172" project="10002" reporter="amamina" creator="amamina" type="10004" summary="connect to orderer in high frequency will raise memory leak" environment="Ubuntu 16.04 X64" priority="3" resolution="10000" status="6" created="2017-05-26 09:45:39.0" updated="2018-07-20 14:12:57.0" resolutiondate="2018-02-07 16:21:41.0" votes="0" watches="9" workflowId="38678" security="10001"> <description><! CDATA I run Apache JMeter to pressure test fabric, each Request will open a new grpc to peer and orderer, than close grpc connection by golang assert defer. I found that memory increased very fast, and GC not effect.   Code broadcastClient, err := common.GetBroadcastClient(orderingEndpoint string, tlsEnabled bool, caFile string), this will call grpc.NewClientStream  !image-2017-05-26-17-41-48-581.png!  when defer broadcastClient.Close(), case <-t.Error() will run in;  cs.finish(err) is not called in case <-t.Error(), and there are no other places in fabric to release cs, this raise memory leak.  ></description> </Issue>
