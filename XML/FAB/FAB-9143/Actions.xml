<Action id="46199" issue="28871" author="sykesm" type="comment" created="2018-06-19 13:34:11.0" updateauthor="sykesm" updated="2018-06-19 13:34:11.0"> <body><! CDATA client.Start() and client.Close() are called from different go routines without serialization. {code:java} func (*balancer) Start(target string, config grpc.BalancerConfig) error { connWG.Add(1) connNumber++ // <-- here return nil }{code} and {code:java} func (*balancer) Close() error { connNumber-- connWG.Done() return nil } {code} Looking at the tests, connNumber is unnecessary as all references to it are in assertions that follow {{connWG.Wait()}} calls - implying the zero unclosed connections.  Fixing by removing the unnecessary connNumber state.  ></body> </Action>
<Action id="46216" issue="28871" author="sykesm" type="comment" body="https://gerrit.hyperledger.org/r/23319" created="2018-06-19 15:47:59.0" updateauthor="sykesm" updated="2018-06-19 15:47:59.0"/>
