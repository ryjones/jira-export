<Action id="70705" issue="46320" author="manish-sethi" type="comment" created="2020-11-18 00:52:49.0" updateauthor="manish-sethi" updated="2020-11-18 00:52:49.0"> <body><! CDATA  ~ymd2020  - This needs more details to understand the situation better. Is this reproducible? Do you have full logs from previous setup? Any additional info will be helpful. If not, can you answer following questions.  1) Though it doesn't appear from the sample code but still, were the value sizes very big (in the range of 64kb)? - there was a bug that was recently fixed related to this (https://github.com/hyperledger/fabric/pull/1909)  2) Was there ever a crash in the couchdb after which you started observing this inconsistency? - there was another bug that was fixed recently related to this (https://jira.hyperledger.org/browse/FABB-151)  3) You mentioned that "I started and stopped Docker and it stopped reproducing", did you just restart the containers and the data was still the same in the volume mounted for the couchdb container or you simply set up everything a fresh?  ></body> </Action>
<Action id="70738" issue="46320" author="JIRAUSER21077" type="comment" created="2020-11-19 06:01:51.0" updateauthor="JIRAUSER21077" updated="2020-11-19 06:01:51.0"> <body><! CDATA Thank you!  >1) Indeed, none of the data where the error occurred was just over 64KB. (67-69KB) I haven't let it reproduce, but given the circumstances, I think this is probably the cause.  >2) I have not observed.  >3) I just restarted the container. {code:java} docker stop containerid docker start containerid{code}  After that, it continued to work fine, and it hasn't been reproduced now.  Â   ></body> </Action>
<Action id="70745" issue="46320" author="manish-sethi" type="comment" created="2020-11-19 15:13:03.0" updateauthor="manish-sethi" updated="2020-11-19 21:36:02.0"> <body><! CDATA Thanks  ~ymd2020 . I believe that you wanted to say "some of the data", in place of "none of the data".  Yes, you had certainly hit into the bug that I mentioned in (1) above. The restarting helped because that empltied out the statedb cache maintained by the peer. As I had mentioned previously, this was fixed in v2.2.1 and I would strongly recommend you to move to v2.2.x where this bug was fixed and also v2.2 is our LTS (Long Term Support) release.  ></body> </Action>
<Action id="70763" issue="46320" author="manish-sethi" type="comment" body="Was fixed in V2.2.1 (https://github.com/hyperledger/fabric/pull/1909)" created="2020-11-19 22:17:46.0" updateauthor="manish-sethi" updated="2020-11-19 22:17:46.0"/>
