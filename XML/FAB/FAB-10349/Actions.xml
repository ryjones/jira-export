<Action id="45061" issue="30568" author="denyeart" type="comment" created="2018-05-24 14:24:20.0" updateauthor="denyeart" updated="2018-05-24 14:24:20.0"> <body><! CDATA For me, {code:java} $ pwd /Users/denyeart/work/src/github.com/hyperledger/fabric/peer $ go test{code} returns: {code:java}     --- FAIL: TestPluginLoadingFailure/ENDORSERS_ESCC{code} ... {code:java} 2018-05-24 10:22:13.384 EDT  core/handlers  loadPlugin -> CRIT 011 Error opening plugin at path testdata/invalid_plugins/invalidplugin.so: plugin.Open("testdata/invalid_plugins/invalidplugin.so"): dlopen(/Users/denyeart/work/src/github.com/hyperledger/fabric/peer/testdata/invalid_plugins/invalidplugin.so, 10): no suitable image found.  Did find:                             /Users/denyeart/work/src/github.com/hyperledger/fabric/peer/testdata/invalid_plugins/invalidplugin.so: file too short                             /Users/denyeart/work/src/github.com/hyperledger/fabric/peer/testdata/invalid_plugins/invalidplugin.so: file too short                         panic: Error opening plugin at path testdata/invalid_plugins/invalidplugin.so: plugin.Open("testdata/invalid_plugins/invalidplugin.so"): dlopen(/Users/denyeart/work/src/github.com/hyperledger/fabric/peer/testdata/invalid_plugins/invalidplugin.so, 10): no suitable image found.  Did find:                             /Users/denyeart/work/src/github.com/hyperledger/fabric/peer/testdata/invalid_plugins/invalidplugin.so: file too short                             /Users/denyeart/work/src/github.com/hyperledger/fabric/peer/testdata/invalid_plugins/invalidplugin.so: file too short                                                  goroutine 1  running :                         github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc420031d40, 0xc420342240, 0x206, 0x0, 0x0, 0x0)                             /Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x126                         github.com/hyperledger/fabric/core/handlers/library.(*registry).loadPlugin(0x527d0a0, 0xc42003208a, 0x29, 0x2, 0xc4202853c8, 0x1, 0x1)                             /Users/denyeart/work/src/github.com/hyperledger/fabric/core/handlers/library/registry.go:153 +0x282                         github.com/hyperledger/fabric/core/handlers/library.(*registry).evaluateModeAndLoad(0x527d0a0, 0xc4204b5aa0, 0x2, 0xc4202853c8, 0x1, 0x1)                             /Users/denyeart/work/src/github.com/hyperledger/fabric/core/handlers/library/registry.go:112 +0x73                         github.com/hyperledger/fabric/core/handlers/library.(*registry).loadHandlers(0x527d0a0, 0xc4202fc3a0, 0x2, 0x2, 0xc42000e6b0, 0x1, 0x1, 0xc4202f2660, 0xc4202f26c0)                             /Users/denyeart/work/src/github.com/hyperledger/fabric/core/handlers/library/registry.go:101 +0x1b0                         github.com/hyperledger/fabric/core/handlers/library.InitRegistry.func1()                             /Users/denyeart/work/src/github.com/hyperledger/fabric/core/handlers/library/registry.go:86 +0xd4                         sync.(*Once).Do(0x529b1a8, 0xc420285598)                             /usr/local/go/src/sync/once.go:44 +0xbe                         github.com/hyperledger/fabric/core/handlers/library.InitRegistry(0xc4202fc3a0, 0x2, 0x2, 0xc42000e6b0, 0x1, 0x1, 0xc4202f2660, 0xc4202f26c0, 0x4c7d960, 0xc42000e4a0)                             /Users/denyeart/work/src/github.com/hyperledger/fabric/core/handlers/library/registry.go:81 +0x84                         github.com/hyperledger/fabric/peer/node.serve(0x529b0d0, 0x0, 0x0, 0x0, 0x0)                             /Users/denyeart/work/src/github.com/hyperledger/fabric/peer/node/start.go:253 +0xde6                         github.com/hyperledger/fabric/peer/node.glob..func1(0x5257dc0, 0x529b0d0, 0x0, 0x0, 0x0, 0x0)                             /Users/denyeart/work/src/github.com/hyperledger/fabric/peer/node/start.go:111 +0x9c                         github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0x5257dc0, 0x529b0d0, 0x0, 0x0, 0x5257dc0, 0x529b0d0)                             /Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:698 +0x46d                         github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x5258420, 0x527d750, 0xf, 0x8)                             /Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:783 +0x2e4                         github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x5258420, 0x8, 0xffffffffffffffff)                             /Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:736 +0x2b                         main.main()                             /Users/denyeart/work/src/github.com/hyperledger/fabric/peer/main.go:97 +0x5bf                         " does not contain "invalid ELF header"{code}  ></body> </Action>
<Action id="45066" issue="30568" author="wlahti" type="comment" body="The lock issue was specific to my machine. The error  ~denyeart  provided above is the correct one. Updating the description and provide the easy fix, which is due to the check for the &quot;invalid ELF header&quot;, which is not output when run locally on MacOS. " created="2018-05-24 14:50:34.0" updateauthor="wlahti" updated="2018-05-24 14:50:34.0"/>
<Action id="45067" issue="30568" author="wlahti" type="comment" body="https://gerrit.hyperledger.org/r/c/22261/" created="2018-05-24 15:01:11.0" updateauthor="wlahti" updated="2018-05-24 15:01:11.0"/>
