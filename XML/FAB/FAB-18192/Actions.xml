<Action id="70303" issue="45943" author="kopaygorodsky" type="comment" body=" ~yacovm  I checked what&apos;s need to be done in order to fix this issue. need to change `MetadataValidator.ValidateConsensusMetadata` method definition, in order to create cert pool from simulated configuration we need to pass it as a param. The method requires old and new metadata, but I&apos;m thinking to change it to old and new channel bundle. Do you think this is ok? " created="2020-09-11 00:45:42.0" updateauthor="kopaygorodsky" updated="2020-09-11 00:45:42.0"/>
<Action id="70308" issue="45943" author="yacovm" type="comment" created="2020-09-11 09:22:57.0" updateauthor="yacovm" updated="2020-09-11 09:22:57.0"> <body><! CDATA I think both are fine, channel bundle just parses the config for you, or you can just build it yourself from the config.     Are you going to push a PR to Fabric?  ></body> </Action>
<Action id="70318" issue="45943" author="kopaygorodsky" type="comment" body="I&apos;m almost done with it, just need to fix a few tests of validator." created="2020-09-14 13:53:12.0" updateauthor="kopaygorodsky" updated="2020-09-14 13:53:12.0"/>
<Action id="70335" issue="45943" author="kopaygorodsky" type="comment" body="https://github.com/hyperledger/fabric/pull/1888" created="2020-09-17 01:01:45.0" updateauthor="kopaygorodsky" updated="2020-09-17 01:01:45.0"/>
<Action id="70448" issue="45943" author="wlahti" type="comment" body="Thanks,  ~kopaygorodsky ! I requested for Jason to attempt the automated backport to release-2.2 in the PR (assuming this code can be auto-backported). I&apos;ll close this task after we have a PR for release-2.2." created="2020-10-06 16:11:39.0" updateauthor="wlahti" updated="2020-10-06 16:12:49.0"/>
<Action id="70453" issue="45943" author="wlahti" type="comment" body="Ah, unfortunate. Looks like there are merge conflicts that will need to be resolved manually for the release-2.2 backport. Want to handle that  ~kopaygorodsky ? Otherwise, I&apos;m more than willing to  cherry-pick your commit and resolve the conflicts. " created="2020-10-06 18:12:11.0" updateauthor="wlahti" updated="2020-10-06 18:12:11.0"/>
<Action id="70454" issue="45943" author="kopaygorodsky" type="comment" body="Yes, I can handle that. This branch https://github.com/hyperledger/fabric/tree/mergify/bp/release-2.2/pr-1888, right? " created="2020-10-06 18:16:38.0" updateauthor="kopaygorodsky" updated="2020-10-06 18:16:38.0"/>
<Action id="70455" issue="45943" author="wlahti" type="comment" body="I&apos;m not sure there&apos;s anything we can do with those mergify branches. I always fetch the latest for the release branch I&apos;m backporting to, create a branch from that, and then cherry-pick the commit (and resolve conflicts). " created="2020-10-06 18:37:32.0" updateauthor="wlahti" updated="2020-10-06 18:37:32.0"/>
<Action id="70469" issue="45943" author="wlahti" type="comment" body="Quick update: I&apos;ve been busy with a few other tasks but plan to get back to handling this backport to release-2.2 as soon as possible, hopefully by the end of this week." created="2020-10-08 12:12:55.0" updateauthor="wlahti" updated="2020-10-08 12:12:55.0"/>
<Action id="70480" issue="45943" author="wlahti" type="comment" created="2020-10-09 20:53:08.0" updateauthor="wlahti" updated="2020-10-09 20:53:21.0"> <body><! CDATA With the major refactoring / new code in etcdraft/consenter.go in master compared to release-2.2, I decided to take a step back and first ensure we have an integration test to confirm the updated behavior from this fix in master.  https://github.com/hyperledger/fabric/pull/1997  Otherwise, I wasn't sure if I could be convinced I had the cherry-picked and adjusted the commit accurately for release-2.2. I'll use this new test to help verify things in release-2.2.  ></body> </Action>
<Action id="70517" issue="45943" author="wlahti" type="comment" body=" https://github.com/hyperledger/fabric/pull/2005  contains the backport of the fix as well as a new integration test and a fix for a bug I discovered while expanding the unit tests for the original fix. The PR was merged into release-2.2 today. " created="2020-10-14 14:35:40.0" updateauthor="wlahti" updated="2020-10-14 14:35:40.0"/>
<Action id="70560" issue="45943" author="kopaygorodsky" type="comment" body="I&apos;ve built an image from master branch and this fix works. On the other hand, I&apos;ve tried hyperledger-fabric.jfrog.io/fabric-orderer:amd64-2.2-stable and see this issue." created="2020-10-26 11:52:11.0" updateauthor="kopaygorodsky" updated="2020-10-26 11:52:11.0"/>
