<Issue id="30967" key="FAB-10587" number="10587" project="10002" reporter="manish-sethi" assignee="manish-sethi" creator="manish-sethi" type="10003" summary="Merge similar indexes in block storage index" priority="3" resolution="10000" status="6" created="2018-06-08 16:04:24.0" updated="2019-09-07 16:47:31.0" resolutiondate="2019-09-07 16:47:31.0" votes="0" watches="1" workflowId="55259"> <description><! CDATA In block store ledger, there are 3 indexes that serve queries of type ***ByTxid. These indexes maintain a mapping of txid to (1) transactionEnv Location in block file, (2) block location in block file and (3) the validation code respectively.  It's worth while to maintain all three pieces of information into a single index that maintain a mapping txid to `A single object that contains all three mentioned above`. This should reduce the size of the block index significantly.  For more details see code comments below... https://github.com/hyperledger/fabric/blob/86f87ebcd8a1819e3832b289f2d94d4a88bb6e05/common/ledger/blkstorage/fsblkstorage/blockindex.go#L67  Further, this created a bit of a problem while fixing a bug FAB-8557 in which we had to perform same check for multiple indexes (code links below) https://github.com/hyperledger/fabric/blob/86f87ebcd8a1819e3832b289f2d94d4a88bb6e05/common/ledger/blkstorage/fsblkstorage/blockindex.go#L123 https://github.com/hyperledger/fabric/blob/86f87ebcd8a1819e3832b289f2d94d4a88bb6e05/common/ledger/blkstorage/fsblkstorage/blockindex.go#L153 https://github.com/hyperledger/fabric/blob/86f87ebcd8a1819e3832b289f2d94d4a88bb6e05/common/ledger/blkstorage/fsblkstorage/blockindex.go#L163  This Requires rebuilding block storage index.  ></description> </Issue>
