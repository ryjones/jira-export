<Action id="19775" issue="13223" author="tuand" type="comment" created="2016-11-17 14:36:00.0" updateauthor="tuand" updated="2016-11-17 14:36:00.0"> <body><! CDATA at first blush,  This should be done as part of the grpc stream setup. The grpc server has various method to set up TLS cert pools.  Poking  ~jeffgarratt  to find out more about how TLS is set up in current code.  ></body> </Action>
<Action id="19778" issue="13223" author="tuand" type="comment" body=" ~adc   are you doing this for MSP ?" created="2016-11-17 18:34:39.0" updateauthor="tuand" updated="2016-11-17 18:34:39.0"/>
<Action id="19801" issue="13223" author="kchristidis" type="comment" body="Can we post an update on this?" created="2016-11-19 16:18:21.0" updateauthor="kchristidis" updated="2016-11-19 16:18:21.0"/>
<Action id="19817" issue="13223" author="tuand" type="comment" created="2016-11-21 14:17:57.0" updateauthor="tuand" updated="2016-11-21 14:17:57.0"> <body><! CDATA Had a quick chat with Angelo late Thursday. Binh had mentioned him doing the code for the orderer which would include this.  At that time Angelo needed to check with Elli on actual tasks.   ~adc  will update this issue.  ></body> </Action>
<Action id="19819" issue="13223" author="kchristidis" type="comment" body="Got it, thank you.  ~adc  let me know which sprint you plan to tackle this on." created="2016-11-21 14:22:35.0" updateauthor="kchristidis" updated="2016-11-21 14:22:35.0"/>
<Action id="19820" issue="13223" author="angelo.decaro" type="comment" body=" ~kchristidis , ~tuand , I need some clarification here. What we can provide is an MSP method to tell if an identity (x509 cert, for example) belong to a certain MSP. Is this what is meant by this jira item? To me, it looks more complex than that." created="2016-11-21 14:44:54.0" updateauthor="angelo.decaro" updated="2016-11-21 14:45:03.0"/>
<Action id="19821" issue="13223" author="tuand" type="comment" created="2016-11-21 15:01:40.0" updateauthor="tuand" updated="2016-11-21 15:01:40.0"> <body><! CDATA Hi  ~adc   when a peer connects to the ordering service via the normal Broadcast() and Deliver() calls,  we want to verify that the peer is allowed to connect, i.e. that a peer is part of one of the peer organizations ( I think Keith calls them participants ) in the network.  An orderer has a list of all the CA certs.  Thus, my first thought is that we configure the grpc stream btw peer and orderer with TLS and authenticate the peer in that way.  Not sure how MSP is going to work but is the authentication/authorization that we want included in what you're doing for MSP ?  ></body> </Action>
<Action id="19831" issue="13223" author="angelo.decaro" type="comment" body="Hi  ~tuand , I can say this: In the genesis/configuration block, there will be a section that declares policies to identity who has the right to call the Broadcast (write permission) and Deliver (read permission). The MSP can be used in this context to learn if a certain identity is part of an MSP, for example. We will provide this functionality.  ~ellaki  will soon post an example of genesis block. Regarding the TLS level, this is another story.  ~keithsmith , is the cop server in charge to generate TLS certificates? " created="2016-11-22 07:25:32.0" updateauthor="angelo.decaro" updated="2016-11-22 07:25:32.0"/>
<Action id="19872" issue="13223" author="tuand" type="comment" created="2016-11-28 19:11:37.0" updateauthor="tuand" updated="2016-11-28 19:32:28.0"> <body><! CDATA  ~adc   ~binhn   If I read FAB-634 correctly,  an orderer will have an MSP component to determine based on a Block signature whether the sender is authorized to talk to the ordering service ? For this issue originally, we were looking at determining whether a peer could connect to the ordering service at the grpc level. And we were going to do this by turning symmetric TLS on for the grpc stream.  I talked with Binh earlier and we're now leaning towards letting anyone connect to the ordering service grpc and doing the authentication at the block signature level.  Agree ? Disagree ?  ></body> </Action>
<Action id="19901" issue="13223" author="tuand" type="comment" created="2016-11-30 14:02:33.0" updateauthor="tuand" updated="2016-11-30 14:02:33.0"> <body><! CDATA After talking with  ~binhn ,  we've decided to have MSP handle the peer authentication.    I'm closing this issue for now.  If in the future , we determine the need to turn TLS on for the grpc stream, I'll create a new user story  ></body> </Action>
<Action id="19906" issue="13223" author="kchristidis" type="comment" created="2016-11-30 16:08:41.0" updateauthor="kchristidis" updated="2016-11-30 16:08:41.0"> <body><! CDATA Tuan, thanks for the update.  What is the high-level view of things then? How does peer authentication to the ordering service work?  You connect to the ordering service, some MSP check happens, and if it returns false, the connection is dropped?  Or something else?  ></body> </Action>
<Action id="19908" issue="13223" author="tuand" type="comment" created="2016-11-30 18:24:07.0" updateauthor="tuand" updated="2016-11-30 18:24:07.0"> <body><! CDATA The MSPManager maintains the list of all the organizations ( peers, users, CA ) participating in the fabric and the ACLs for who can do config/read/write/deploy.  On receipt of a Block,  orderer passes it to the MSP which then does its verification based on the signatures and ACLs  ></body> </Action>
<Action id="19910" issue="13223" author="kchristidis" type="comment" created="2016-11-30 18:38:40.0" updateauthor="kchristidis" updated="2016-11-30 18:38:40.0"> <body><! CDATA 1. I guess you mean "on receipt of an Envelope or DeliverUpdate"? 2. What happens if the verification fails? And who writes the code for what happens if this verification fails?  ></body> </Action>
<Action id="19912" issue="13223" author="tuand" type="comment" created="2016-11-30 19:17:40.0" updateauthor="tuand" updated="2016-11-30 19:17:40.0"> <body><! CDATA right, on receipt of Envelope or DeliverUpdate.  We do need to agree with  ~adc  on how orderer interacts with MSP  ></body> </Action>
<Action id="19913" issue="13223" author="kchristidis" type="comment" body="Can we track this then as a JIRA issue? I&apos;m mostly interested in identifying the work that needs to be done from the the ordering side." created="2016-11-30 19:38:56.0" updateauthor="kchristidis" updated="2016-11-30 19:38:56.0"/>
<Action id="19953" issue="13223" author="tuand" type="comment" body="created FAB-1274  as placeholder until Angelo can give us the official Jira issue for this work." created="2016-12-05 14:40:37.0" updateauthor="tuand" updated="2016-12-05 14:40:37.0"/>
