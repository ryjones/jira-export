<Issue id="37274" key="FAB-13972" number="13972" project="10002" reporter="latitiah" assignee="latitiah" creator="latitiah" type="10101" summary="Green Path: Removing an org from a channel" priority="3" resolution="10000" status="6" created="2019-01-30 15:32:22.0" updated="2019-04-02 23:51:19.0" resolutiondate="2019-04-02 23:51:19.0" votes="0" watches="1" workflowId="48865"> <description><! CDATA Given 3 orgs in a channel, remove 1 org. Verify that peers from that org should not be able to perform transactions on the channel.   Add that org back to the channel after the removal.  This test can be a continuation of test FAB-13971  *Proposed Steps:* {code} Given I have a bootstrapped fabric network of type solo And I want to use the new chaincode lifecycle When an admin sets up a channel  And an admin builds a chaincode package And the organization admins install the built chaincode package on all peers Then a hash value is received on all peers When the organization admins approve the chaincode package on all peers And an admin commits the chaincode package to the channel And a user invokes on the chaincode with args  "init","a","1000","b","2000"  When a user queries on the chaincode with args  "query","a"  Then a user receives a success response of 1000  When an admin adds an organization to the channel config # Assume channel config file is distributed out of band And all organization admins sign the updated channel config  # Sequence number is incremented in next step since change to channel config When the organization admins approve the upgraded chaincode package on all peers And an admin commits the chaincode package to the channel  When an admin fetches genesis information using peer "peer0.org1.example.com" Then the config block file is fetched from peer "peer0.org1.example.com" Then the updated config block contains Org3ExampleCom  When a user invokes on the chaincode with args  "invoke","a","b","10"  When a user queries on the chaincode with args  "query","a"  Then a user receives a success response of 990  When the peers from the added organization are added to the network  When an admin fetches genesis information at block 0 using peer "peer0.org3.example.com" When an admin makes peer "peer0.org3.example.com" join the channel And an admin makes peer "peer1.org3.example.com" join the channel  # Sequence number is incremented in next step since new org is joining And an admin installs the built chaincode package on "peer0.org3.example.com" And an admin installs the built chaincode package on "peer1.org3.example.com" Then a hash value is received on all peers When the organization admins approve the upgraded chaincode package on all peers And an admin commits the chaincode package to the channel  When a user queries on the chaincode with args  "query","a"  from "peer0.org3.example.com" Then a user receives a success response of 1000 from "peer0.org3.example.com"  #### End of FAB-13971 When an admin removes "Org2ExampleCom" from the channel config # Assume channel config file is distributed out of band And all organization admins sign the updated channel config  # Sequence number is incremented in next step since change to channel config When an admin approves the upgraded chaincode package on peer "peer0.org1.example.com" When the organization admins approve the upgraded chaincode package on peer "peer0.org3.example.com" And an admin commits the chaincode package to the channel  When an admin fetches genesis information using peer "peer0.org1.example.com" Then the config block file is fetched from peer "peer0.org1.example.com" Then the updated config block does not contain Org2ExampleCom  When a user invokes on the chaincode with args  "invoke","a","b","10"  When a user queries on the chaincode with args  "query","a"  Then a user receives a success response of 990  When a user queries on the chaincode with args  "query","a"  from "peer0.org2.example.com" Then a user receives a success response of 1000 from "peer0.org2.example.com" {code}  ></description> </Issue>
