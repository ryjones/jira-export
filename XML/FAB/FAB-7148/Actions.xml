<Action id="35623" issue="24528" author="sambhavdutt" type="comment" created="2017-11-29 12:48:35.0" updateauthor="sambhavdutt" updated="2017-11-29 12:48:35.0"> <body><! CDATA The same error is showing up in the fabric-test merge job now.  *Build Log*  https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-merge-x86_64/111/consoleFull  ></body> </Action>
<Action id="35677" issue="24528" author="sambhavdutt" type="comment" created="2017-11-30 16:19:32.0" updateauthor="sambhavdutt" updated="2017-11-30 16:19:32.0"> <body><! CDATA Observed the following errors in fabric-test-verify-x86_64, Build 577,  Scenario Outline: FAB-3852: Message Payloads Less than 1MB, for solo orderer using the NodeJS SDK interface -- @1.3 # orderer.feature:94   2:08:52     And I use the NodeJS SDK interface                                                                                  # steps/basic_impl.py:25 02:09:33 In file included from ../src/const.cpp:1:0: 02:09:33 ../src/const.cpp: In function ‘void declare_attributes(v8::Local<v8::Object>)’: 02:09:33 ../src/const.h:23:7: warning: ‘Nan::Maybe<bool> Nan::ForceSet(v8::Local<v8::Object>, v8::Local<v8::Value>, v8::Local<v8::Value>, v8::PropertyAttribute)’ is deprecated  -Wdeprecated-declarations  02:09:33   Nan::ForceSet(             \ 02:09:33        ^ 02:09:33 ../src/const.cpp:6:2: note: in expansion of macro ‘SET_CONST’ 02:09:33   SET_CONST(target, CKA_CLASS); 02:09:33   ^ 02:09:33 In file included from ../../nan/nan.h:197:0, 02:09:33                  from ../src/const.h:7, 02:09:33                  from ../src/const.cpp:1: 02:09:33 ../../nan/nan_maybe_43_inl.h:116:35: note: declared here 02:09:33  NAN_DEPRECATED inline Maybe<bool> ForceSet( 02:09:33                                    ^ 02:09:33 In file included from ../src/const.cpp:1:0: 02:09:33 ../src/const.h:23:7: warning: ‘Nan::Maybe<bool> Nan::ForceSet(v8::Local<v8::Object>, v8::Local<v8::Value>, v8::Local<v8::Value>, v8::PropertyAttribute)’ is deprecated  -Wdeprecated-declarations  02:09:33   Nan::ForceSet(             \ 02:09:33        ^ 02:09:33 ../src/const.cpp:6:2: note: in expansion of macro ‘SET_CONST’ 02:09:33   SET_CONST(target, CKA_CLASS); 02:09:33   ^ 02:09:33 In file included from ../../nan/nan.h:197:0, 02:09:33                  from ../src/const.h:7, 02:09:33                  from ../src/const.cpp:1: 02:09:33 ../../nan/nan_maybe_43_inl.h:116:35: note: declared here 02:09:33  NAN_DEPRECATED inline Maybe<bool> ForceSet( 02:09:33                                    ^ 02:09:33 In file included from ../src/const.cpp:1:0: 02:09:33 ../src/const.h:27:56: warning: ‘Nan::Maybe<bool> Nan::ForceSet(v8::Local<v8::Object>, v8::Local<v8::Value>, v8::Local<v8::Value>, v8::PropertyAttribute)’ is deprecated  -Wdeprecated-declarations  02:09:33    static_cast<PropertyAttribute>(ReadOnly | DontDelete)); 02:09:33                                                         ^ 02:09:33 ../src/const.cpp:6:2: note: in expansion of macro ‘SET_CONST’ 02:09:33   SET_CONST(target, CKA_CLASS); 02:09:33   ^ 02:09:33 In file included from ../../nan/nan.h:197:0, 02:09:33                  from ../src/const.h:7, 02:09:33                  from ../src/const.cpp:1: 02:09:33 ../../nan/nan_maybe_43_inl.h:116:35: note: declared here 02:09:33  NAN_DEPRECATED inline Maybe<bool> ForceSet( 02:09:33                                    ^ 02:09:33 In file included from ../src/const.cpp:1:0: 02:09:33 ../src/const.h:23:7: warning: ‘Nan::Maybe<bool> Nan::ForceSet(v8::Local<v8::Object>, v8::Local<v8::Value>, v8::Local<v8::Value>, v8::PropertyAttribute)’ is deprecated  -Wdeprecated-declarations  02:09:33   Nan::ForceSet(             \ 02:09:33        ^ 02:09:33 ../src/const.cpp:7:2: note: in expansion of macro ‘SET_CONST’ 02:09:33   SET_CONST(target, CKA_TOKEN); 02:09:33   ^ 02:09:33 In file included from ../../nan/nan.h:197:0, 02:09:33                  from ../src/const.h:7, 02:09:33                  from ../src/const.cpp:1: 02:09:33 ../../nan/nan_maybe_43_inl.h:116:35: note: declared here 02:09:33  NAN_DEPRECATED inline Maybe<bool> ForceSet( 02:09:33                                    ^ 02:09:33 In file included from ../src/const.cpp:1:0: 02:09:33 ../src/const.h:23:7: warning: ‘Nan::Maybe<bool> Nan::ForceSet(v8::Local<v8::Object>, v8::Local<v8::Value>, v8::Local<v8::Value>, v8::PropertyAttribute)’ is deprecated  -Wdeprecated-declarations  02:09:33   Nan::ForceSet(             \ 02:09:33        ^ 02:09:33 ../src/const.cpp:7:2: note: in expansion of macro ‘SET_CONST’ 02:09:33   SET_CONST(target, CKA_TOKEN); 02:09:33   ^ 02:09:33 In file included from ../../nan/nan.h:197:0, 02:09:33                  from ../src/const.h:7, 02:09:33                  from ../src/const.cpp:1: 02:09:33 ../../nan/nan_maybe_43_inl.h:116:35: note: declared here 02:09:33  NAN_DEPRECATED inline Maybe<bool> ForceSet( 02:09:33                                    ^ 02:09:33 In file included from ../src/const.cpp:1:0: 02:09:33 ../src/const.h:27:56: warning: ‘Nan::Maybe<bool> Nan::ForceSet(v8::Local<v8::Object>, v8::Local<v8::Value>, v8::Local<v8::Value>, v8::PropertyAttribute)’ is deprecated  -Wdeprecated-declarations  02:09:33    static_cast<PropertyAttribute>(ReadOnly | DontDelete)); 02:09:33                                                         ^ 02:09:33 ../src/const.cpp:7:2: note: in expansion of macro ‘SET_CONST’ 02:09:33   SET_CONST(target, CKA_TOKEN); 02:09:33   ^ 02:09:33 In file included from ../../nan/nan.h:197:0, 02:09:33                  from ../src/const.h:7, 02:09:33                  from ../src/const.cpp:1: 02:09:33 ../../nan/nan_maybe_43_inl.h:116:35: note: declared here 02:09:33  NAN_DEPRECATED inline Maybe<bool> ForceSet( 02:09:33                                    ^ 02:09:33 In file included from ../src/const.cpp:1:0: 02:09:33 ../src/const.h:23:7: warning: ‘Nan::Maybe<bool> Nan::ForceSet(v8::Local<v8::Object>, v8::Local<v8::Value>, v8::Local<v8::Value>, v8::PropertyAttribute)’ is deprecated  -Wdeprecated-declarations    *Build Log* https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-verify-x86_64/577/consoleFull  ></body> </Action>
<Action id="35691" issue="24528" author="latitiah" type="comment" created="2017-11-30 22:12:36.0" updateauthor="latitiah" updated="2017-11-30 22:12:36.0"> <body><! CDATA This error is sporatic and not consistent. I believe this issue is related to the CI slowness issues. The same test passes for a kafka based orderer network using NodeSDK.  I'm going to lower the priority, but leave the issue open for now.  ></body> </Action>
<Action id="35721" issue="24528" author="latitiah" type="comment" created="2017-12-01 15:37:32.0" updateauthor="latitiah" updated="2017-12-01 15:37:32.0"> <body><! CDATA In the meantime while these issues are being looked at in CI, I will increase the 2 minute timeouts to 5 minute timeouts. When it comes to the query and invoke timings, I need to be careful about increasing those times because that could impact tests and env settings and expectations for these settings.   ></body> </Action>
<Action id="35805" issue="24528" author="latitiah" type="comment" body="https://gerrit.hyperledger.org/r/#/c/15923/" created="2017-12-04 20:10:50.0" updateauthor="latitiah" updated="2017-12-04 20:10:50.0"/>
<Action id="36041" issue="24528" author="scottz" type="comment" created="2017-12-08 20:47:10.0" updateauthor="scottz" updated="2017-12-08 20:47:10.0"> <body><! CDATA  https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-verify-x86_64/test_results_analyzer/  job 613 failed just one iteration of one CI test: this one.   If the deploy (instantiate) is really all done, then the subsequent invoke should always pass. But it is not always passing.  How long do we arbitrarily wait after the deploy?  I am sure I asked this previously, but I will ask again: Rather than guessing at sleep time, is there anything else we can check, during the deploy verification, before returning successfully from that step?  Would it help if we have it dump out the actual returned status and the data value (instead of simply stating the length is incorrect)?  ></body> </Action>
<Action id="36052" issue="24528" author="scottz" type="comment" body=" ~latitiah  And I noticed that most of the tests in gossip.feature file contain a 5 second wait (minimum) after the deploy. Or, I should say, that is true for all testcases that try an invoke first. For the others the first thing they do is a query (instead of an invoke). All the tests in that file seem to be passing regularly." created="2017-12-08 23:41:36.0" updateauthor="scottz" updated="2017-12-08 23:41:36.0"/>
<Action id="37070" issue="24528" author="scottz" type="comment" created="2017-12-13 18:55:16.0" updateauthor="scottz" updated="2017-12-13 18:55:16.0"> <body><! CDATA  https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-verify-x86_64/test_results_analyzer/   Occasionally it still fails. See my previous comments. It is typically the 1.3 test that fails.  ></body> </Action>
<Action id="37636" issue="24528" author="sambhavdutt" type="comment" created="2017-12-19 16:01:02.0" updateauthor="sambhavdutt" updated="2017-12-19 16:01:02.0"> <body><! CDATA *Merge test failed for fabric-test-merge-x86_64 - Build # 129*  orderer.Orderer Service.FAB-3852: Message Payloads Less than 1MB, for kafka orderer using the CLI interface -- @1.2  Failing for the past 1 build (Since Unstable#129 ) Took 6 min 33 sec.  Error Message  The containers are not ready in the allotted time (300 seconds) Failing step: Given I have a bootstrapped fabric network of type kafka ... failed in 393.344s Location: orderer.feature:64 Assertion Failed: The containers are not ready in the allotted time (300 seconds) Captured stdout: testConfigs: configs/0c388bcce44011e78ad6fa163ede05d7  *Build Log* https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-merge-x86_64/129/testReport/orderer/Orderer%20Service/FAB_3852__Message_Payloads_Less_than_1MB__for_kafka_orderer_using_the_CLI_interface_____1_2_/   ></body> </Action>
<Action id="37799" issue="24528" author="sambhavdutt" type="comment" created="2017-12-26 16:26:43.0" updateauthor="sambhavdutt" updated="2017-12-26 16:26:43.0"> <body><! CDATA This test case (wrong deployment size) has failed in the last build  #27 for *fabric-smoke-test-daily-verify-x86_64*   orderer.Orderer Service.FAB-3852: Message Payloads Less than 1MB, for solo orderer using the NodeJS SDK interface -- @1.3  Error Message: Expected response to be of length 1024; received length 17; Result: Query Result...  And a user queries on the chaincode named "mycc" with args  "get","a"  ... passed in 2.986s Then a user receives a response containing a value of length 1024 ... failed in 0.000s   *Build Log*  https://jenkins.hyperledger.org/view/fabric-smoke/job/fabric-smoke-test-daily-verify-x86_64/27/testReport/orderer/Orderer%20Service/FAB_3852__Message_Payloads_Less_than_1MB__for_solo_orderer_using_the_NodeJS_SDK_interface_____1_3_/  ></body> </Action>
<Action id="37813" issue="24528" author="sambhavdutt" type="comment" created="2017-12-27 15:51:59.0" updateauthor="sambhavdutt" updated="2017-12-27 15:51:59.0"> <body><! CDATA The *fabric-smoke-test-daily-verify-x86_64* has passed successfully in the last build #28 without any error in the Ordering tests.  !ft.png|thumbnail!   ></body> </Action>
<Action id="37827" issue="24528" author="mastersingh24" type="comment" body="So is there a defect on Fabric or is this a failure due to CI taking too long?" created="2017-12-28 14:52:36.0" updateauthor="mastersingh24" updated="2017-12-28 14:52:36.0"/>
<Action id="37833" issue="24528" author="latitiah" type="comment" created="2017-12-28 19:29:32.0" updateauthor="latitiah" updated="2017-12-28 19:29:32.0"> <body><! CDATA This error is not consistent and seems to happen during "CI slowdowns". This is indicated from the statement  {code} Assertion Failed: The containers are not ready in the allotted time (300 seconds){code}  If there is a different error signature, it would indicate a different issue from timing.  ></body> </Action>
<Action id="38231" issue="24528" author="sambhavdutt" type="comment" body="This CI slowdown is not happening and the orderer test has been successful from the last six builds. Closing the bug for now as no error observed in this department." created="2018-01-05 17:29:12.0" updateauthor="sambhavdutt" updated="2018-01-05 17:29:12.0"/>
