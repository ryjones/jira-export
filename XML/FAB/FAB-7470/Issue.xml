<Issue id="26101" key="FAB-7470" number="7470" project="10002" reporter="lehors" assignee="lehors" creator="lehors" type="10004" summary="peer chaincode upgrade panics with SIGSEGV" priority="2" resolution="10000" status="6" created="2017-12-15 13:15:16.0" updated="2018-07-20 14:15:16.0" resolutiondate="2017-12-16 11:51:03.0" votes="0" watches="1" workflowId="40800"> <environment><! CDATA Ubuntu 16.04.1  go version go1.9.2 linux/amd64     ></environment> <description><! CDATA Following the new channel_update tutorial the command to upgrade the chaincode failed as follows: {code:java} # peer chaincode upgrade -o orderer.example.com:7050 --tls $CORE_PEER_TLS_ENABLED --cafile $ORDERER_CA -C $CHANNEL_NAME -n mycc -v 2.0 -c '{"Args": "init","a","90","b","210" }' -P "OR ('Org1MSP.member','Org2MSP.member','Org3MSP.member')" panic: runtime error: invalid memory address or nil pointer dereference  signal SIGSEGV: segmentation violation code=0x1 addr=0x20 pc=0xbb36bb   goroutine 1  running : github.com/hyperledger/fabric/peer/chaincode.chaincodeUpgrade(0x0, 0xc4203c4720, 0x0, 0x0)     /opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/upgrade.go:141 +0x4b github.com/hyperledger/fabric/peer/chaincode.upgradeCmd.func1(0xc4202b3200, 0xc420133700, 0x1, 0x10, 0x0, 0x0)     /opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/upgrade.go:43 +0xb0 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc4202b3200, 0xc420132a00, 0x10, 0x10, 0xc4202b3200, 0xc420132a00)     /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x3e8 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x16275c0, 0xf, 0xc420014055, 0x7)     /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x2fe github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x16275c0, 0x7d, 0xc420014055)     /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x2b main.main()     /opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:112 +0x493{code} Code inspection reveals that the ChaincodeCmdFactory is not initialized properly when calling chaincodeUpgrade.     ></description> </Issue>
