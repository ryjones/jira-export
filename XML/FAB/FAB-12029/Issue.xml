<Issue id="33828" key="FAB-12029" number="12029" project="10002" reporter="sykesm" assignee="c0rwin" creator="sykesm" type="10004" summary="intermittent test failures in gossp pull/pullstore_test.go TestAddAndRemove" priority="2" resolution="10000" status="6" created="2018-09-17 16:10:29.0" updated="2019-03-19 10:57:24.0" resolutiondate="2019-01-24 12:41:25.0" votes="0" watches="5" workflowId="45135"> <description><! CDATA {code} 15:08:02 unit-tests_1  | goroutine 23  running : 15:08:02 unit-tests_1  | github.com/hyperledger/fabric/gossip/util.PrintStackTrace() 15:08:02 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/util/misc.go:144 +0x87 15:08:02 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip/pull.waitUntilOrFail(0xc4200fe870, 0xc420060f80) 15:08:02 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/pull/pullstore_test.go:359 +0x18c 15:08:02 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip/pull.TestAddAndRemove(0xc4200fe870) 15:08:02 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/pull/pullstore_test.go:248 +0x15f 15:08:02 unit-tests_1  | testing.tRunner(0xc4200fe870, 0xd8d040) 15:08:02 unit-tests_1  | 	/opt/go/src/testing/testing.go:777 +0xd0 15:08:02 unit-tests_1  | created by testing.(*T).Run 15:08:02 unit-tests_1  | 	/opt/go/src/testing/testing.go:824 +0x2e0 15:08:02 unit-tests_1  |  15:08:02 unit-tests_1  | goroutine 1  chan receive : 15:08:02 unit-tests_1  | testing.tRunner.func1(0xc4200fe4b0) 15:08:02 unit-tests_1  | 	/opt/go/src/testing/testing.go:753 +0x11d 15:08:02 unit-tests_1  | testing.tRunner(0xc4200fe4b0, 0xc420077d90) 15:08:02 unit-tests_1  | 	/opt/go/src/testing/testing.go:783 +0xf2 15:08:02 unit-tests_1  | testing.runTests(0xc4201c92a0, 0x12f3b80, 0x6, 0x6, 0x6dfe69) 15:08:02 unit-tests_1  | 	/opt/go/src/testing/testing.go:1061 +0x2c4 15:08:02 unit-tests_1  | testing.(*M).Run(0xc42010e180, 0x0) 15:08:02 unit-tests_1  | 	/opt/go/src/testing/testing.go:978 +0x171 15:08:02 unit-tests_1  | main.main() 15:08:02 unit-tests_1  | 	_testmain.go:98 +0x208 15:08:02 unit-tests_1  |  15:08:02 unit-tests_1  | goroutine 29  sleep : 15:08:02 unit-tests_1  | time.Sleep(0x1dcd6500) 15:08:02 unit-tests_1  | 	/opt/go/src/runtime/time.go:102 +0x166 15:08:02 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip/algo.NewPullEngineWithFilter.func1(0xc42010e300, 0x1dcd6500) 15:08:02 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/algo/pull.go:130 +0x43 15:08:02 unit-tests_1  | created by github.com/hyperledger/fabric/gossip/gossip/algo.NewPullEngineWithFilter 15:08:02 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/algo/pull.go:128 +0x303 15:08:02 unit-tests_1  |  15:08:02 unit-tests_1  | goroutine 24  chan send : 15:08:02 unit-tests_1  | testing.tRunner.func1(0xc4200fe960) 15:08:02 unit-tests_1  | 	/opt/go/src/testing/testing.go:772 +0x183 15:08:02 unit-tests_1  | testing.tRunner(0xc4200fe960, 0xd8d050) 15:08:02 unit-tests_1  | 	/opt/go/src/testing/testing.go:783 +0xf2 15:08:02 unit-tests_1  | created by testing.(*T).Run 15:08:02 unit-tests_1  | 	/opt/go/src/testing/testing.go:824 +0x2e0 15:08:02 unit-tests_1  |  15:08:02 unit-tests_1  | goroutine 25  chan send : 15:08:02 unit-tests_1  | testing.tRunner.func1(0xc4200fea50) 15:08:02 unit-tests_1  | 	/opt/go/src/testing/testing.go:772 +0x183 15:08:02 unit-tests_1  | testing.tRunner(0xc4200fea50, 0xd8d070) 15:08:02 unit-tests_1  | 	/opt/go/src/testing/testing.go:783 +0xf2 15:08:02 unit-tests_1  | created by testing.(*T).Run 15:08:02 unit-tests_1  | 	/opt/go/src/testing/testing.go:824 +0x2e0 15:08:02 unit-tests_1  |  15:08:02 unit-tests_1  | goroutine 26  chan receive : 15:08:02 unit-tests_1  | testing.runTests.func1.1(0xc4200fe4b0) 15:08:02 unit-tests_1  | 	/opt/go/src/testing/testing.go:1068 +0x3b 15:08:02 unit-tests_1  | created by testing.runTests.func1 15:08:02 unit-tests_1  | 	/opt/go/src/testing/testing.go:1068 +0xa2 15:08:02 unit-tests_1  |  15:08:02 unit-tests_1  | goroutine 30  select : 15:08:02 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip/pull.createPullInstanceWithFilters.func3(0xc4201ee510) 15:08:02 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/pull/pullstore_test.go:153 +0x11a 15:08:02 unit-tests_1  | created by github.com/hyperledger/fabric/gossip/gossip/pull.createPullInstanceWithFilters 15:08:02 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/pull/pullstore_test.go:151 +0x447 15:08:02 unit-tests_1  |  15:08:02 unit-tests_1  | goroutine 31  sleep : 15:08:02 unit-tests_1  | time.Sleep(0x1dcd6500) 15:08:02 unit-tests_1  | 	/opt/go/src/runtime/time.go:102 +0x166 15:08:02 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip/algo.NewPullEngineWithFilter.func1(0xc42010e380, 0x1dcd6500) 15:08:02 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/algo/pull.go:130 +0x43 15:08:02 unit-tests_1  | created by github.com/hyperledger/fabric/gossip/gossip/algo.NewPullEngineWithFilter 15:08:02 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/algo/pull.go:128 +0x303 15:08:02 unit-tests_1  |  15:08:02 unit-tests_1  | goroutine 32  select : 15:08:02 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip/pull.createPullInstanceWithFilters.func3(0xc4201ee630) 15:08:02 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/pull/pullstore_test.go:153 +0x11a 15:08:02 unit-tests_1  | created by github.com/hyperledger/fabric/gossip/gossip/pull.createPullInstanceWithFilters 15:08:02 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/pull/pullstore_test.go:151 +0x447 15:08:02 unit-tests_1  | --- FAIL: TestAddAndRemove (22.35s) 15:08:02 unit-tests_1  | 	assertions.go:247:   	Error Trace:	pullstore_test.go:360 15:08:02 unit-tests_1  | 		 	            	 			pullstore_test.go:248 15:08:02 unit-tests_1  | 		 	Error:      	Timeout expired! 15:08:02 unit-tests_1  | 		 	Test:       	TestAddAndRemove 15:08:02 unit-tests_1  | FAIL 15:08:02 unit-tests_1  | coverage: 91.8% of statements 15:08:02 unit-tests_1  | FAIL	github.com/hyperledger/fabric/gossip/gossip/pull	22.363s {code}  ></description> </Issue>
