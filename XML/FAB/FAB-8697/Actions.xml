<Action id="45292" issue="28274" author="sykesm" type="comment" created="2018-05-30 16:11:06.0" updateauthor="sykesm" updated="2018-05-30 16:11:06.0"> <body><! CDATA  ~C0rWin  has someone been identified to work on this issue? These tests are consuming 417s (almost 7 minutes) of the 16m41s of test execution. {code:java} unit-tests_1  | ok  github.com/hyperledger/fabric/gossip/gossip	92.796s	coverage: 85.1% of statements unit-tests_1  | ok  github.com/hyperledger/fabric/gossip/gossip/algo	5.620s	coverage: 97.1% of statements unit-tests_1  | ok  github.com/hyperledger/fabric/gossip/gossip/channel	16.021s	coverage: 90.7% of statements unit-tests_1  | ok  github.com/hyperledger/fabric/gossip/gossip/msgstore	8.015s	coverage: 100.0% of statements unit-tests_1  | ok  github.com/hyperledger/fabric/gossip/gossip/pull	4.353s	coverage: 91.8% of statements unit-tests_1  | ok  github.com/hyperledger/fabric/gossip/identity	12.017s	coverage: 100.0% of statements unit-tests_1  | ok  github.com/hyperledger/fabric/gossip/privdata	8.846s	coverage: 84.7% of statements unit-tests_1  | ok  github.com/hyperledger/fabric/gossip/service	177.343s	coverage: 81.4% of statements unit-tests_1  | ok  github.com/hyperledger/fabric/gossip/state	32.088s	coverage: 80.3% of statements unit-tests_1  | ok  github.com/hyperledger/fabric/gossip/state/mocks	0.014s	coverage: 58.8% of statements unit-tests_1  | ok  github.com/hyperledger/fabric/gossip/util	4.043s	coverage: 78.2% of statements unit-tests_1  |  unit-tests_1  | real	16m41.004s unit-tests_1  | user	10m38.180s unit-tests_1  | sys	5m4.060s unit-tests_1  | experimental pluginsenabled unit-tests_1  | ok  github.com/hyperledger/fabric/core/scc	17.988s	coverage: 86.5% of statements{code}  ></body> </Action>
<Action id="45308" issue="28274" author="c0rwin" type="comment" body=" ~sykesm  we do have plans to refactor our tests, however this would be handled within v1.3 time frame." created="2018-05-30 18:41:37.0" updateauthor="c0rwin" updated="2018-05-30 18:41:37.0"/>
<Action id="55296" issue="28274" author="sykesm" type="comment" created="2019-01-04 15:14:21.0" updateauthor="sykesm" updated="2019-01-04 15:14:21.0"> <body><! CDATA Running  on master just after the release of 1.4, here's the output of the tests. There are still a large number that take a significant amount of time.   ^gossip.log    I'll highlight a few in future updates...  ></body> </Action>
<Action id="55319" issue="28274" author="sykesm" type="comment" created="2019-01-04 21:33:02.0" updateauthor="sykesm" updated="2019-01-04 21:33:36.0"> <body><! CDATA {code} ---  PASS:  TestMsgStoreExpirationWithMembershipMessages                 75.01s ---  PASS:  TestMsgStoreExpiration                                       66.03s ---  PASS:  TestLeaderElectionWithRealGossip                             46.05s ---  PASS:  TestLeaderYield                                              42.02s ---  PASS:  TestWithStaticDeliverClientBothStaticAndLeaderElection       32.02s ---  PASS:  TestMembershipConvergence                                    29.05s ---  PASS:  TestConnectToAnchorPeers                                     25.05s ---  PASS:  TestLargeBlockGap                                            20.88s ---  PASS:  TestEndedGoroutines                                          20.02s ---  PASS:  TestAck                                                      16.09s ---  PASS:  TestCertExpiration                                           16.02s ---  PASS:  TestChannelBlockExpiration                                   16.01s ---  PASS:  TestPull                                                     15.01s ---  PASS:  TestPullerRetries                                            15.01s ---  PASS:  TestNewGossipStateProvider_SendingManyMessages               14.15s ---  PASS:  TestLeaderElectionWithDeliverClient                          14.04s ---  PASS:  TestDataLeakage                                              14.03s ---  PASS:  TestIdentityExpiration                                       14.02s ---  PASS:  TestSendByCriteria                                           14.01s ---  PASS:  TestInitiateSync                                             13.51s ---  PASS:  TestHandshake                                                13.07s ---  PASS:  TestAccessControl                                            12.13s ---  PASS:  TestNewGossipStateProvider_BatchingOfStateRequest            11.71s ---  PASS:  TestMembershipRequestSpoofing                                10.04s ---  PASS:  TestCloseConn                                                10.01s ---  PASS:  TestPullerPeerNotEligible                                    10.01s ---  PASS:  TestTransferOfPvtDataBetweenPeers                            10.01s ---  PASS:  TestLedgerHeightFromProperties                               10.00s ---  PASS:  TestDissemination                                            9.54s ---  PASS:  TestConfidentiality                                          9.06s ---  PASS:  TestDisclosurePolicyWithPull                                 9.02s ---  PASS:  TestListInvalidIdentities                                    9.01s ---  PASS:  TestGetFullMembership                                        8.53s ---  PASS:  TestMembership                                               8.03s ---  PASS:  TestExpiration                                               8.01s ---  PASS:  TestConvergence                                              7.52s ---  PASS:  TestCertRevocation                                           7.19s ---  PASS:  TestNoMessagesSelfLoop                                       7.03s ---  PASS:  TestAnchorPeer                                               6.03s ---  PASS:  TestExpiration                                               6.02s ---  PASS:  TestMultipleOrgEndpointLeakage                               6.02s ---  PASS:  TestLeaveChannel                                             6.01s ---  PASS:  TestValidation                                               6.01s ---  PASS:  TestBlockingEnqueue                                          5.48s ---  PASS:  TestConnectUnexpectedPeer                                    5.03s ---  PASS:  TestExpirationConcurrency                                    5.01s ---  PASS:  TestConnectUnexpectedPeer/Unexpected_organization            5.00s ---  PASS:  TestPullerDataNotAvailable                                   5.00s ---  PASS:  TestLeadershipTakeover                                       4.76s ---  PASS:  TestGossipStateProvider_TestStateMessages                    4.71s ---  PASS:  TestChannelPulledBadBlocks                                   4.62s ---  PASS:  TestYieldSinglePeer                                          4.55s ---  PASS:  TestPullEngineAll2AllWithIncrementalSpawning                 4.53s ---  PASS:  TestProbe                                                    4.25s ---  PASS:  TestChannelMsgStoreEviction                                  4.17s ---  PASS:  TestNewPubsub                                                4.02s ---  PASS:  TestChannelPullAccessControl                                 4.01s ---  PASS:  TestPullerNoPeersKnown                                       4.01s ---  PASS:  TestWithStaticDeliverClientLeader                            4.01s ---  PASS:  TestWithStaticDeliverClientNotLeader                         4.01s ---  PASS:  TestChannelPeerNotInChannel                                  4.00s ---  PASS:  TestLeaveChannel                                             4.00s ---  PASS:  TestStop                                                     4.00s ---  PASS:  TestYieldAllPeers                                            3.63s ---  PASS:  TestStop                                                     3.61s ---  PASS:  TestConvergence                                              3.41s ---  PASS:  TestPartition                                                3.41s ---  PASS:  TestAddAndRemove                                             3.36s ---  PASS:  TestYield                                                    3.12s ---  PASS:  TestChannelStop                                              3.01s ---  PASS:  TestConnect                                                  3.01s ---  PASS:  TestInitPeersStartAtIntervals                                3.01s ---  PASS:  TestProceedWithoutPrivateData                                3.01s ---  PASS:  TestConcurrency                                              3.00s ---  PASS:  TestExpiration                                               3.00s ---  PASS:  TestGossipDiscoverySkipConnectingToLocalhostBootstrap        3.00s ---  PASS:  TestMemRespDisclosurePol                                     3.00s ---  PASS:  TestBatchingEmitterCounter                                   2.41s ---  PASS:  TestReConnections                                            2.07s ---  PASS:  TestBootstrapPeerMisConfiguration                            2.02s ---  PASS:  TestInitGossipService                                        2.02s ---  PASS:  TestNonResponsivePing                                        2.01s ---  PASS:  TestPayloadsBufferImpl_Interleave                            2.01s ---  PASS:  TestBiDiUpdates                                              2.00s ---  PASS:  TestFilter                                                   2.00s ---  PASS:  TestLatePeers                                                2.00s ---  PASS:  TestMsgStoreNotExpire                                        2.00s ---  PASS:  TestMultipleInitiators                                       2.00s ---  PASS:  TestPullEngineSelectiveUpdates                               2.00s ---  PASS:  TestSpread                                                   2.00s ---  PASS:  TestPullEngine_Stop                                          1.61s ---  PASS:  TestUpdate                                                   1.51s ---  PASS:  TestValidation/membership_request                            1.50s ---  PASS:  TestValidation/membership_response                           1.50s ---  PASS:  TestOnDemandGossip                                           1.40s ---  PASS:  TestCertStoreBadSignature                                    1.16s ---  PASS:  TestCertStoreMismatchedIdentity                              1.16s ---  PASS:  TestCertStoreShouldSucceed                                   1.16s ---  PASS:  TestChannelPull                                              1.16s ---  PASS:  TestChannelPullWithDigestsFilter                             1.15s ---  PASS:  TestBatchingEmitterStop                                      1.11s ---  PASS:  TestCertificateExtraction                                    1.02s ---  PASS:  TestChannelStateInfoSnapshot                                 1.01s ---  PASS:  TestGossipDiscoveryStopping                                  1.01s ---  PASS:  TestAdapterImpl_Gossip                                       1.00s ---  PASS:  TestBasic                                                    1.00s ---  PASS:  TestByzantineResponder                                       1.00s ---  PASS:  TestChannelAddToMessageStore                                 1.00s ---  PASS:  TestChannelReconfigureChannel                                1.00s ---  PASS:  TestHaltChainProcessing                                      1.00s ---  PASS:  TestInitPeersAtSameTime                                      1.00s ---  PASS:  TestInterceptAcks                                            1.00s ---  PASS:  TestJoinChannelConfig                                        1.00s ---  PASS:  TestProdConstructor                                          1.00s {code}  ></body> </Action>
<Action id="60284" issue="28274" author="ronenschafferibm" type="comment" created="2019-05-23 06:26:47.0" updateauthor="ronenschafferibm" updated="2019-05-23 06:26:47.0"> <body><! CDATA  ~sykesm  I'd like to know if you still have the script that created the sorted by time list of tests  ></body> </Action>
<Action id="60307" issue="28274" author="sykesm" type="comment" created="2019-05-23 15:41:38.0" updateauthor="sykesm" updated="2019-05-23 15:41:38.0"> <body><! CDATA {quote}I'd like to know if you still have the script that created the sorted by time list of tests{quote} No, but this one liner seems to work:  {code} go test -v ./... | grep '^--- PASS:' | sed 's/ () //g' | sort -gr -k 4 {code}  generated this output this morning:  {code} --- PASS: TestMsgStoreExpirationWithMembershipMessages 75.01s --- PASS: TestMsgStoreExpiration 67.53s --- PASS: TestLeaderElectionWithRealGossip 32.06s --- PASS: TestLargeBlockGap 20.70s --- PASS: TestMembershipConvergence 20.30s --- PASS: TestNewGossipStateProvider_SendingManyMessages 16.86s --- PASS: TestAck 16.06s --- PASS: TestCertExpiration 16.01s --- PASS: TestChannelBlockExpiration 16.00s --- PASS: TestAccessControl 14.87s --- PASS: TestInitiateSync 13.52s --- PASS: TestMembershipMetrics 13.10s --- PASS: TestHandshake 13.05s --- PASS: TestWithStaticDeliverClientLeader 12.01s --- PASS: TestNewGossipStateProvider_BatchingOfStateRequest 12.00s --- PASS: TestPull 10.13s --- PASS: TestSendByCriteria 10.12s --- PASS: TestLeaderElectionWithDeliverClient 10.05s --- PASS: TestPullerPeerNotEligible 10.01s --- PASS: TestCloseConn 10.01s --- PASS: TestTransferOfPvtDataBetweenPeers 10.00s --- PASS: TestLedgerHeightFromProperties 10.00s --- PASS: TestListInvalidIdentities 9.00s --- PASS: TestGetFullMembership 8.53s --- PASS: TestLeaderYield 8.52s --- PASS: TestMembershipRequestSpoofing 8.04s --- PASS: TestExpiration 8.00s --- PASS: TestConvergence 7.53s --- PASS: TestValidation 7.52s --- PASS: TestDisclosurePolicyWithPull 7.52s --- PASS: TestCertRevocation 7.17s --- PASS: TestConfidentiality 7.06s --- PASS: TestIdentityExpiration 6.20s --- PASS: TestBlockingEnqueue 5.40s --- PASS: TestDataLeakage 5.07s --- PASS: TestConnectUnexpectedPeer 5.03s --- PASS: TestAnchorPeer 5.03s --- PASS: TestNoMessagesSelfLoop 5.01s --- PASS: TestPullerDataNotAvailable 5.00s --- PASS: TestExpirationConcurrency 5.00s --- PASS: TestLeadershipTakeover 4.77s --- PASS: TestChannelPulledBadBlocks 4.61s --- PASS: TestYieldSinglePeer 4.54s --- PASS: TestPullEngineAll2AllWithIncrementalSpawning 4.52s --- PASS: TestExpiration 4.51s --- PASS: TestMetrics 4.48s --- PASS: TestProbe 4.24s --- PASS: TestChannelMsgStoreEviction 4.17s --- PASS: TestNewPubsub 4.03s --- PASS: TestWithStaticDeliverClientNotLeader 4.01s --- PASS: TestWithStaticDeliverClientBothStaticAndLeaderElection 4.01s --- PASS: TestChannelPeerNotInChannel 4.01s --- PASS: TestStop 4.00s --- PASS: TestPullerNoPeersKnown 4.00s --- PASS: TestLeaveChannel 4.00s --- PASS: TestChannelPullAccessControl 4.00s --- PASS: TestMembership 3.66s --- PASS: TestStop 3.61s --- PASS: TestDissemination 3.52s --- PASS: TestPartition 3.41s --- PASS: TestConvergence 3.41s --- PASS: TestConnectToAnchorPeers 3.12s --- PASS: TestYield 3.11s --- PASS: TestYieldAllPeers 3.03s --- PASS: TestConnect 3.02s --- PASS: TestProceedWithoutPrivateData 3.01s --- PASS: TestMemRespDisclosurePol 3.01s --- PASS: TestInitPeersStartAtIntervals 3.01s --- PASS: TestConcurrency 3.01s --- PASS: TestGossipDiscoverySkipConnectingToLocalhostBootstrap 3.00s --- PASS: TestExpiration 3.00s --- PASS: TestChannelStop 3.00s --- PASS: TestBatchingEmitterCounter 2.40s --- PASS: TestAddAndRemove 2.12s --- PASS: TestLeaveChannel 2.02s --- PASS: TestBootstrapPeerMisConfiguration 2.02s --- PASS: TestPayloadsBufferImpl_Interleave 2.01s --- PASS: TestSpread 2.00s --- PASS: TestPullEngineSelectiveUpdates 2.00s --- PASS: TestMultipleInitiators 2.00s --- PASS: TestMsgStoreNotExpire 2.00s --- PASS: TestLatePeers 2.00s --- PASS: TestInitGossipService 2.00s --- PASS: TestFilter 2.00s --- PASS: TestBiDiUpdates 2.00s --- PASS: TestMultipleOrgEndpointLeakage 1.69s --- PASS: TestPullEngine_Stop 1.61s --- PASS: TestUpdate 1.52s --- PASS: TestOnDemandGossip 1.40s --- PASS: TestCertStoreMismatchedIdentity 1.16s --- PASS: TestCertStoreBadSignature 1.16s --- PASS: TestChannelPullWithDigestsFilter 1.15s --- PASS: TestChannelPull 1.15s --- PASS: TestCertStoreShouldSucceed 1.15s --- PASS: TestBatchingEmitterStop 1.11s --- PASS: TestHaltChainProcessing 1.01s --- PASS: TestGossipDiscoveryStopping 1.01s --- PASS: TestCertificateExtraction 1.01s --- PASS: TestProdConstructor 1.00s --- PASS: TestJoinChannelConfig 1.00s --- PASS: TestInterceptAcks 1.00s --- PASS: TestInitPeersAtSameTime 1.00s --- PASS: TestChannelStateInfoSnapshot 1.00s --- PASS: TestChannelReconfigureChannel 1.00s --- PASS: TestChannelAddToMessageStore 1.00s --- PASS: TestByzantineResponder 1.00s --- PASS: TestBasic 1.00s --- PASS: TestAdapterImpl_Gossip 1.00s {code}    ></body> </Action>
