<Issue id="40822" key="FAB-15827" number="15827" project="10002" reporter="manish-sethi" creator="manish-sethi" type="10004" summary="Blockstorage data file issue in the event of a crash" priority="3" resolution="10203" status="6" created="2019-06-27 21:01:39.0" updated="2019-07-12 15:03:53.0" resolutiondate="2019-07-12 15:03:53.0" votes="0" watches="1" workflowId="53778"> <description><! CDATA There is a corner case bug in the blockstorage code. Though the possibility is of this getting triggered is a rare but this should be fixed because if triggered could cause random behavior. This can get triggered by a situation when a new file is being created and a crash causes the first block in this new file to be partially written.  At startup, this kind of file is detected (if present) during the construction of the info about the last block - in this function https://github.com/hyperledger/fabric/blob/master/common/ledger/blkstorage/fsblkstorage/blockfile_mgr.go#L110  However, this file also need to be deleted which is overlooked in the current code.  ></description> </Issue>
