<Issue id="43466" key="FAB-17152" number="17152" project="10002" reporter="sykesm" assignee="samyuan1990" creator="sykesm" type="10004" summary="Some test(s) that use privacyenabledstate.CouchDBCommonStorageTestEnv are not cleaning up temporary directories" priority="3" resolution="10001" status="6" created="2019-11-26 16:22:05.0" updated="2020-01-16 18:40:14.0" resolutiondate="2020-01-16 18:40:14.0" votes="0" watches="5" workflowId="56580"> <description><! CDATA My tmpfs filled up today. When I looked in the directory, I found hundreds of entries that looked like this: {code} pestate660347830 pestate662698575 pestate664059191 pestate677971184 pestate678516704 pestate680364592 pestate685411140 pestate693618452 pestate694123046 pestate702821191 pestate703138853 pestate703989889 pestate706432447 pestate707826779 pestate708236255 pestate709956924 pestate712969640 pestate726390744 pestate729057548 pestate730679330 pestate745920468 pestate749794677 pestate768789859 pestate777324466 pestate779072981 pestate779695280 pestate781694732 pestate791410355 pestate798968419 pestate813676081 pestate817810128 pestate818452395 pestate825280492 pestate825408654 pestate828090446 pestate856214361 pestate861195848 pestate875184842 pestate893957615 pestate895580659 pestate903649160 pestate903838478 pestate911274602 pestate912757775 {code}  It appears these directories are bing created by the following test helper code in the privacyenabledstate package: {code} // Init implements corresponding function from interface TestEnv func (env *CouchDBCommonStorageTestEnv) Init(t testing.TB) { 	redoPath, err := ioutil.TempDir("", "pestate") 	if err != nil { 		t.Fatalf("Failed to create redo log directory: %s", err) 	} {code}  There is a corresponding {{Cleanup}} method on {{CouchDBCommonStorageTestEnv}} but one or more tests do not appear to be calling it.  The following files reference the helper object: {code} core/ledger/kvledger/txmgmt/validator/statebasedval/state_based_validator_test.go core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/purge_mgr_test.go core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/pkg_test.go core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go core/ledger/kvledger/txmgmt/privacyenabledstate/db_test.go {code}  ></description> </Issue>
