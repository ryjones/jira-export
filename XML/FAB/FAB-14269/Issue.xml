<Issue id="37845" key="FAB-14269" number="14269" project="10002" reporter="dongming" assignee="dongming" creator="dongming" type="10101" summary="Stability of raft network with 27 orderers all in 27 channels" priority="3" resolution="10000" status="6" created="2019-02-20 16:55:58.0" updated="2019-07-23 18:20:36.0" resolutiondate="2019-04-29 20:54:04.0" votes="0" watches="2" workflowId="49471"> <description><! CDATA h2. Objective  This objective of this test is to ensure the stability of a network with large number of orderers under various scenarios. The test consists of a set of test from no traffic/no channel to heavy traffic with 108 orderers and 108 channels (or, at least 20 channels). h2. Setup  Same setup as in FAB-13601, with the following differences: # Use k8s cluster with many small hosts, 2 CPU X 4 GB RAM, each with one pod / container / orderer. # Create a k8s network with 27 orderers in the system channel, and minimum 3 peers with 1 peer/org. # Create 27 channels, with all orderers in all channels, with all the peers joining all channels after each one is created. # default values for batchSize.maxMessageCount(500), PreferredMaxBytes(2 MB), EtcdRaft.Options.MaxInflightBlocks(5),Â EtcdRaft.Options.SnapshotIntervalSize(20MB), and local disk (no PVC) # logging level set to {{info}} # Connect a logDna server, and sysdig server, and run prometheus to monitor fabric metrics  h2. Inputs # bring up network with 27 orderers in the orderersystemchannel only, then examine if the network is stable after 1 hour pause # Orderer admin sends channel config update transactions to one orderer to create 27 channels # medium traffic: send 27 threads with 100 tx per thread to all channels and all orderers: one thread targets one channel and one orderer # heavy traffic: send 108 threads with 10000 tx per thread, total 1,080,000 tx # All transactions will be sent using PTE with Constant mode, i.e. sending next transaction as soon as the previous one is sent to and ACK'd received by the ingress orderer.  h2. Expectations # No errors in the logs of peers and orderers. # No failures or errors reported by PTE. # All transaction events are received by PTE. # TPS (Transactions Per Second) overall rates will be provided for the test with 10000 transactions  ></description> </Issue>
