<Issue id="30197" key="FAB-10062" number="10062" project="10002" reporter="denyeart" creator="denyeart" type="10001" summary="Support LevelDB to CouchDB state database conversion - pre-conversion validation utility" priority="3" status="10000" created="2018-05-15 04:40:14.0" updated="2019-11-27 18:47:50.0" votes="1" watches="2" workflowId="35762"> <description><! CDATA Chaincode written to work against LevelDB will also work against CouchDB, as the CouchDB state database supports a superset of the chaincode APIs – everything LevelDB state database supports plus JSON query (GetQueryResult API).  There is one caveat - chaincode execution on CouchDB state database performs additional validation:  1) Check for reserved fields in the top level of the JSON (FAB-8006): _id, _rev, _deleted, ~version.  2) Ensure keys are valid UTF8, as required by CouchDB.  So when converting a LevelDB state database to CouchDB, the same validation needs to be performed during the conversion. Any occurrences of the above will result in a failed conversion.  The runtime conversion validation is covered by FAB-10061.  This work item will provide a pre-conversion validation utility that will check the block storage for any occurrences of the above. Additionally, starting in v1.2 the utility should also validate private data storage.  Note - upon introduction of private data in v1.2, different peers may have different private data, such that conversion may succeed on one peer but fail on another peer.  ></description> </Issue>
