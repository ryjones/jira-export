<Issue id="31533" key="FAB-10970" number="10970" project="10002" reporter="yacovm" assignee="yacovm" creator="yacovm" type="10001" summary="Don&apos;t refuse peers with unexpected PKI-IDs if they belong to the same org" priority="3" resolution="10000" status="6" created="2018-07-02 13:57:53.0" updated="2018-09-19 16:38:26.0" resolutiondate="2018-07-05 19:24:28.0" votes="0" watches="2" workflowId="42584"> <description><! CDATA The gossip communication layer has an API which allows to send a message to a peer given an endpoint and a PKI-ID.  If the remote peer presents a different PKI-ID from what is given in the Send() method - the connection aborts.  This keeps on until the peer eventually purges the PKI-ID from its memory, however it may take ~ 30 minutes.  This is problematic for cases in which a peer has renewed his certificate and now its PKI-ID has changed. Ideally we could identify if the certificate belongs to the same peer, but there is no API for that in the MSP as GetIdentifier() is implemented as a hash over the raw certificate.   A trivial solution for this problem that I think is good enough is to not abort the connection in case the peer still belongs to the organization that it belonged to beforehand.   ></description> </Issue>
