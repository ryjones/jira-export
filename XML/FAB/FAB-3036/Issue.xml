<Issue id="15616" key="FAB-3036" number="3036" project="10002" reporter="troyronda" creator="troyronda" type="10001" summary="Fabric CA and cert verification - certificate pinning" priority="3" resolution="10001" status="6" created="2017-04-07 12:39:07.0" updated="2020-01-22 19:02:33.0" resolutiondate="2020-01-22 19:02:33.0" votes="0" watches="2" workflowId="35115"> <description><! CDATA As an organization that participates in a channel, I would like the channel to independently confirm the validity certificates issued by a Fabric CA so that I can reduce my trust requirements on the CA.  Currently an organization would need to run its own Fabric CA to control the issuance of certificates. This requirement adds complexity for that organization's participation. There is also a level of sophistication needed to securely run a CA. To mitigate, it would be good to allow certs to be issued by a provider who has the operational controls for issuing certificates and operating a CA, but also allow an organization to independently confirm the validity of those issued certificates (if they wish).  *Goals* * Validate certificate, as usual, against trust root. * Check certificate fingerprint against organization-provided & controlled list (when the organization has opted-in).  *General background information* * OWASP on  Certificate and Public Key Pinning|https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning   *Example Implementations*  The implementation considerations for this ticket have similarities to implementing a revocation list. However, we should try to reduce complexity for the organization where possible. * +Certificate fingerprints hosted by organization+. Have endorsers pull a certificate fingerprint list from a registered domain of that participant. The channel needs to be configured with the root CA list & the optional endpoints of the fingerprint list for each root CA. ** Note: with this mechanism, the fingerprints can only be checked _at endorsement time,_ otherwise there could be non-determinism on commit. FAB-3678 contains a related discussion. ** It is possible that two endorsers have different fingerprint lists (fingerprint list host was down, fingerprint list changed between calls, ...). In these situations, the client could retry if they have sufficient knowledge of the error. ** Seems plausible that this mechanism could be contained into an Auth Handler (FAB-4207) * +Load certificate fingerprint list into the channel+. The participant needs to control a key that signs their fingerprint list. The channel needs to be configured with the root CA list & the optional signing keys of the fingerprint list for each root CA. This implementations similar to revocation lists. ** This mechanism avoids the _endorsement time_ limitation above, but increases the complexity on the participant. In fact, this approach has some of the complexities of running the CA software ... but still allows for dual controls (the CA issues the cert & the org issues the list). ** Need to deal with key rollover and loses.  ></description> </Issue>
