<Issue id="28858" key="FAB-9130" number="9130" project="10002" reporter="sykesm" assignee="skarim" creator="sykesm" type="10003" summary="Data race when running TestStartAndClose" priority="4" resolution="10000" status="6" created="2018-03-26 13:27:08.0" updated="2018-07-20 14:16:07.0" resolutiondate="2018-04-24 14:21:35.0" votes="0" watches="1" workflowId="41637"> <description><! CDATA {code:java} unit-tests_1  | ==================  unit-tests_1  | WARNING: DATA RACE  unit-tests_1  | Write at 0x000000e74de0 by goroutine 18:  unit-tests_1  |   github.com/hyperledger/fabric/common/metrics.Shutdown()  unit-tests_1  |       github.com/hyperledger/fabric/common/metrics/_test/_obj_test/server.go:112 +0xd3  unit-tests_1  |   github.com/hyperledger/fabric/common/metrics.TestStartAndClose()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/common/metrics/server_test.go:173 +0x233  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  |  unit-tests_1  | Previous read at 0x000000e74de0 by goroutine 79:  unit-tests_1  |   github.com/hyperledger/fabric/common/metrics.Start()  unit-tests_1  |       github.com/hyperledger/fabric/common/metrics/_test/_obj_test/server.go:101 +0x96  unit-tests_1  |  unit-tests_1  | Goroutine 18 (running) created at:  unit-tests_1  |   testing.(*T).Run()  unit-tests_1  |       /opt/go/src/testing/testing.go:789 +0x568  unit-tests_1  |   testing.runTests.func1()  unit-tests_1  |       /opt/go/src/testing/testing.go:1004 +0xa7  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  |   testing.runTests()  unit-tests_1  |       /opt/go/src/testing/testing.go:1002 +0x521  unit-tests_1  |   testing.(*M).Run()  unit-tests_1  |       /opt/go/src/testing/testing.go:921 +0x206  unit-tests_1  |   main.main()  unit-tests_1  |       github.com/hyperledger/fabric/common/metrics/_test/_testmain.go:138 +0x2f0  unit-tests_1  |  unit-tests_1  | Goroutine 79 (finished) created at:  unit-tests_1  |   github.com/hyperledger/fabric/common/metrics.TestStartAndClose()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/common/metrics/server_test.go:169 +0x126  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  | =================={code}  ></description> </Issue>
