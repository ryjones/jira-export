<Issue id="37556" key="FAB-14129" number="14129" project="10002" reporter="dongming" assignee="guoger" creator="dongming" type="10004" summary="Raft orderers panic: cannot append block" priority="3" resolution="10000" status="6" created="2019-02-09 21:31:04.0" updated="2019-08-08 15:36:35.0" resolutiondate="2019-02-25 03:42:35.0" votes="0" watches="6" workflowId="49167"> <description><! CDATA The network was created with image from 2/8.  We started the traffic with loop  for (nChan = 1; nChan <=10, nChan++)        for (nThread=3; nThread<=6; nThread=+3)               execute PTE        end nloop  end loop     The 3 orderers panic around 23:39 pm (see attached orderer-CPU-Memory.png) with the message              ^  36m2019-02-09 04:38:38.734 UTC  msp.identity  Sign -> DEBU 34a9cbf^  0m Sign: plaintext: 0AA1060A0A6F7264657265726F726712...17598351D7480466E0494164F4445AB1 ^  36m2019-02-09 04:38:38.734 UTC  msp.identity  Sign -> DEBU 34a9cc0^  0m Sign: digest: 2493D2D21CF8BE5A9B950818EDB52D8E6CA57C524F1AE99750EBA1A901FBB412 ^  35m2019-02-09 04:38:38.734 UTC  orderer.commmon.multichannel  commitBlock -> PANI 34a9cc1^  0m  channel: testorgschannel2  Could not append block: block number should have been 8261 but was 8260 panic:  channel: testorgschannel2  Could not append block: block number should have been 8261 but was 8260  goroutine 3433845  running : github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc00e658000, 0x0, 0x0, 0x0) /go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:229 +0x515 github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc0003e2050, 0x4, 0x14683ec, 0x28, 0xc0ac895f60, 0x2, 0x2, 0x0, 0x0, 0x0) /go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0xf6 github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Panicf(0xc0003e2050, 0x14683ec, 0x28, 0xc0ac895f60, 0x2, 0x2) /go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:159 +0x79 github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Panicf(0xc0003e2058, 0x14683ec, 0x28, 0xc0ac895f60, 0x2, 0x2) /go/src/github.com/hyperledger/fabric/common/flogging/zap.go:74 +0x60 github.com/hyperledger/fabric/orderer/common/multichannel.(*BlockWriter).commitBlock(0xc00078cb40, 0xc07709d800, 0x163d, 0x163d) /go/src/github.com/hyperledger/fabric/orderer/common/multichannel/blockwriter.go:170 +0x2af github.com/hyperledger/fabric/orderer/common/multichannel.(*BlockWriter).WriteBlock.func1(0xc00078cb40, 0xc07709d800, 0x163d, 0x163d) /go/src/github.com/hyperledger/fabric/orderer/common/multichannel/blockwriter.go:154 +0x79 created by github.com/hyperledger/fabric/orderer/common/multichannel.(*BlockWriter).WriteBlock /go/src/github.com/hyperledger/fabric/orderer/common/multichannel/blockwriter.go:152 +0x87     The three orderer log are attached.  If we set the orderer to restart, it will continue to cycle panic, restart, panic, restart.  ></description> </Issue>
