<Issue id="36393" key="FAB-13438" number="13438" project="10002" reporter="yacovm" assignee="guoger" creator="yacovm" type="10004" summary="Chain must communicate to the Deliver that the cluster is failed" priority="3" resolution="10000" status="6" created="2018-12-24 17:57:36.0" updated="2019-03-03 12:58:36.0" resolutiondate="2019-01-20 15:42:37.0" votes="0" watches="3" workflowId="47925"> <description><! CDATA Currently, the deliver loop blocks until 1 of the three events happen:  # The client disconnects # A new block is received by the iterator # The chain's Errored()'s returned channel is closed  However, the etcdraft OSN returns the DoneC channel in the implementation of Errored(), which can only be closed one time.  However, an OSN needs to tell a connected peer that it cannot connect to the cluster.  We need 2 things: * Periodically try and probe the state of the *raft.Node* to see if a leader exists * If a leader doesn't exist, we need to notify all consumers by closing the channel we returned by the *Errored()* method.  ></description> </Issue>
