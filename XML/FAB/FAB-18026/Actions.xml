<Action id="69631" issue="45475" author="denyeart" type="comment" created="2020-07-06 14:00:42.0" updateauthor="denyeart" updated="2020-07-06 14:00:42.0"> <body><! CDATA I'm not able to reproduce the problem.   ~colismit Do your data volumes remain when you restart the peer? That is, do you still see the chaincode in the peer chaincode directory, e.g. /var/hyperledger/production/lifecycle/chaincodes/ after restart?  What does "peer lifecycle chaincode queryinstalled" against the peer return?  ></body> </Action>
<Action id="69642" issue="45475" author="colismit" type="comment" body="I&apos;ll look in more detail at our setup and see if I can make reproduction more specific." created="2020-07-08 09:03:01.0" updateauthor="colismit" updated="2020-07-08 09:03:01.0"/>
<Action id="69643" issue="45475" author="yacovm" type="comment" created="2020-07-08 10:31:07.0" updateauthor="yacovm" updated="2020-07-08 10:31:07.0"> <body><! CDATA You need to look if the peer is in the membership list or not. If it's not, then it's by design.  If you restart the peer, peers will detect this and cease communication and evict the peer from the membership.  They will try to probe it in the next scan but it'll take some time, I think the default sweep interval is 20 seconds.  ></body> </Action>
<Action id="69644" issue="45475" author="colismit" type="comment" created="2020-07-08 14:08:05.0" updateauthor="colismit" updated="2020-07-08 14:08:05.0"> <body><! CDATA The data volumes are there.  However the path differs. {code:java} sh-4.2# ls -l /var/hyperledger/production/lifecycle/chaincodes total 0 sh-4.2# ls -l /var/hyperledger/production/chaincodes total 8 -rw-r--r-- 1 root root 1960 Jul 8 11:40 abac2.v1.0 -rw-r--r-- 1 root root 1960 Jul 8 11:40 abac2.v1.1{code}    And the peer lifecycle command doesn't see it either.    {code:java} sh-4.2# peer lifecycle chaincode queryinstalled Installed chaincodes on peer:   {code} But the peer chaincode command does. {code:java} sh-4.2# peer chaincode list --installed Get installed chaincodes on peer: Name: abac2, Version: v1.0, Path: github.com/hyperledger/fabric-samples/chaincode_example/go/, Id: da6964ea05edf8e16d3998b34f5ac1cfd443acc759c23faac85bdb24c6548b69 Name: abac2, Version: v1.1, Path: github.com/hyperledger/fabric-samples/chaincode_example/go/, Id: 8ef75fe2f7186d552e3cec095999d042babb9bf4a954c760338d088fccaef9fa{code}    This chaincode is installed and tested by some of our test code written in python, using the python SDK.  I take it that discovery requires the new lifecycle?     ></body> </Action>
<Action id="69647" issue="45475" author="yacovm" type="comment" body="Discovery works in both lifecycles since it was implemented in 1.2" created="2020-07-08 14:28:47.0" updateauthor="yacovm" updated="2020-07-08 14:28:47.0"/>
<Action id="70485" issue="45475" author="denyeart" type="comment" body="Fixed in *FAB-18194* in v2.2.1." created="2020-10-12 02:26:07.0" updateauthor="denyeart" updated="2020-10-12 02:26:07.0"/>
