<Issue id="37949" key="FAB-14329" number="14329" project="10002" reporter="fedyiv" creator="fedyiv" type="10004" summary="Incorrect sample configuration file and documentation for  orderer" priority="4" resolution="10002" status="6" created="2019-02-25 09:03:23.0" updated="2019-11-18 18:17:07.0" resolutiondate="2019-11-18 18:17:07.0" votes="1" watches="3" workflowId="49567"> <description><! CDATA Dears,  I was trying to set up gathering prometheus metrics over TLS from orderer and found a bug which prevented  it.     Here it is: From snippet below, one can see that orderer takes *ClientCACertFiles* from *ops.TLS.ClientRootCAs*  *orderer/server/main.go:*  {code} func newOperationsSystem(ops localconfig.Operations, metrics localconfig.Metrics) *operations.System { 	return operations.NewSystem(operations.Options{ 		Logger:        flogging.MustGetLogger("orderer.operations"), 		ListenAddress: ops.ListenAddress, 		Metrics: operations.MetricsOptions{ 			Provider: metrics.Provider, 			Statsd: &operations.Statsd{ 				Network:       metrics.Statsd.Network, 				Address:       metrics.Statsd.Address, 				WriteInterval: metrics.Statsd.WriteInterval, 				Prefix:        metrics.Statsd.Prefix, 			}, 		}, 		TLS: operations.TLS{ 			Enabled:            ops.TLS.Enabled, 			CertFile:           ops.TLS.Certificate, 			KeyFile:            ops.TLS.PrivateKey, 			ClientCertRequired: ops.TLS.ClientAuthRequired, 			ClientCACertFiles:  ops.TLS.ClientRootCAs, 		}, 		Version: metadata.Version, 	}) } {code}  While in documentation and in the sample config file which is shipped with docker image goes *RootCAs* variable.    {code} Operations:     # host and port for the operations server ListenAddress: 127.0.0.1:8443  # TLS configuration for the operations endpoint TLS:         # TLS enabled ...  # Paths to PEM encoded ca certificates to trust for client authentication RootCAs:    {code}    Firstly this is misleading documentation, and secondly it is impossible to override such incorrect config using environment variables.   I suggest to changed it in docs and in configs to  *ClientRootCAs*  to make it in line with peer configuration.  *P.S.:*  The workaround is to use your own *orderer.yaml* with *ClientRootCAs*  configured or just being empty, in which case environmental variables will be working, But it is not very pretty.     ></description> </Issue>
