<Action id="38526" issue="26787" author="wisam.mohammed" type="comment" body="Attached in zip file" created="2018-01-12 21:06:26.0" updateauthor="wisam.mohammed" updated="2018-01-12 21:06:26.0"/>
<Action id="39885" issue="26787" author="kchristidis" type="comment" body="I&apos;m not sure I follow what goes on here. Could you take another crack at describing what goes on here?" created="2018-02-08 20:10:03.0" updateauthor="kchristidis" updated="2018-02-08 20:10:03.0"/>
<Action id="39922" issue="26787" author="clayton sims" type="comment" body="changing state to Monitor / Hold to indicate we are waiting on originator.    ~wisam.mohammed  " created="2018-02-09 16:15:18.0" updateauthor="clayton sims" updated="2018-02-09 16:15:18.0"/>
<Action id="39928" issue="26787" author="wisam.mohammed" type="comment" created="2018-02-09 16:57:52.0" updateauthor="wisam.mohammed" updated="2018-02-09 16:57:52.0"> <body><! CDATA  ~kchristidis  the issue here when you have channel and two member in it and 1st member running invoke using her/his peer.  When 2nd member decided to leave the channel and leave the 1st member alone in that channel. Then any invoke by 1st member will timeout after period of time.   Please let me know if have question.     Thanks  ></body> </Action>
<Action id="39929" issue="26787" author="kchristidis" type="comment" body="What is the endorsement policy for the chaincode in question?" created="2018-02-09 17:00:35.0" updateauthor="kchristidis" updated="2018-02-09 17:00:35.0"/>
<Action id="39941" issue="26787" author="varadatibm" type="comment" created="2018-02-09 18:12:55.0" updateauthor="varadatibm" updated="2018-02-09 18:12:55.0"> <body><! CDATA Hi Kostas,  I don't think there is any endorsement policies passed when instantiating... If there is nothing passed, I believe SDK sets it to be 'one of the orgs from the channel participants need to endorse'   ></body> </Action>
<Action id="39946" issue="26787" author="wisam.mohammed" type="comment" body="Yes,  ~varadatibm  know more endorsement policy. Thanks  ~varadatibm " created="2018-02-09 18:20:05.0" updateauthor="wisam.mohammed" updated="2018-02-09 18:20:05.0"/>
<Action id="40076" issue="26787" author="clayton sims" type="comment" body="What is next step here?" created="2018-02-13 18:25:08.0" updateauthor="clayton sims" updated="2018-02-13 18:25:08.0"/>
<Action id="40171" issue="26787" author="denyeart" type="comment" body=" ~kchristidis  Could you try it out and assess if there is a defect here?" created="2018-02-14 17:07:32.0" updateauthor="denyeart" updated="2018-02-14 17:07:32.0"/>
<Action id="40179" issue="26787" author="kchristidis" type="comment" body="Sure thing. Will have a look this week." created="2018-02-14 17:30:00.0" updateauthor="kchristidis" updated="2018-02-14 17:30:00.0"/>
<Action id="40306" issue="26787" author="kchristidis" type="comment" created="2018-02-16 20:24:47.0" updateauthor="kchristidis" updated="2018-02-16 20:24:47.0"> <body><! CDATA Went through every step of this using the CLI commands and reproduced the scenario locally.  Could not reproduce the bug.  You are referring to a UI - what UI would be this?     ></body> </Action>
<Action id="40309" issue="26787" author="wisam.mohammed" type="comment" created="2018-02-16 21:49:37.0" updateauthor="wisam.mohammed" updated="2018-02-16 21:49:37.0"> <body><! CDATA IBM Blockchain Platform UI  !img2.png!  ></body> </Action>
<Action id="40315" issue="26787" author="kchristidis" type="comment" created="2018-02-17 00:31:53.0" updateauthor="kchristidis" updated="2018-02-17 00:31:53.0"> <body><! CDATA Let's do this right, given that this is not the bug tracker for IBM Blockchain. Here's a few questions: # What version of Fabric is this running on? # In Step 6, is it possible that the SDK is modifying the endorsement policy of the chaincodes in the channel? ( ~harrisob@us.ibm.com ? Seems unlikely.) # You also note some numbers in the original description. e.g. "1000 invoke", "32 invoke". What are these exactly? Numbers of invocation? If so, can you please attempt to trim this problem to the smallest possible set of steps? (Think MWE if this were a StackOverflow thread.) For instance, in Step 12, does the first invocation work?  ></body> </Action>
<Action id="40327" issue="26787" author="harrisob@us.ibm.com" type="comment" created="2018-02-17 14:53:15.0" updateauthor="harrisob@us.ibm.com" updated="2018-02-17 14:53:15.0"> <body><! CDATA NodeSDK does not inject or modify endorsement policies, if the application does not include one, then the system default is used.     When the second peer is added to the channel, is a new organization also added to the channel configuration ?? The system default endorsement policy requires endorsements from a majority of organizations... in this case that would mean both peers. Then when the peer is removed from the channel, is the channel configuration again updated to remove the organization ?? It looks like the organization is still defined the channel configuration as the commit of the invokes are not completing. This could be due to not getting a majority of endorsements from organizations defined on the channel ???  ></body> </Action>
<Action id="40335" issue="26787" author="kchristidis" type="comment" created="2018-02-18 03:49:34.0" updateauthor="kchristidis" updated="2018-02-18 03:49:42.0"> <body><! CDATA {quote}Then when the peer is removed from the channel, is the channel configuration again updated to remove the organization ?? {quote} (This sounds like a good guess.)  ></body> </Action>
<Action id="40348" issue="26787" author="denyeart" type="comment" created="2018-02-18 14:42:51.0" updateauthor="denyeart" updated="2018-02-18 14:42:51.0"> <body><! CDATA Ok, it sounds like no bug in base Fabric.   ~wisam.mohammed  could you close this from Fabric Jira, and open a ticket against the IBM Blockchain service?  ></body> </Action>
<Action id="40398" issue="26787" author="wisam.mohammed" type="comment" created="2018-02-19 21:58:26.0" updateauthor="wisam.mohammed" updated="2018-02-19 21:58:26.0"> <body><! CDATA  ~kchristidis   ~harrisob@us.ibm.com   ~denyeart  Thanks for looking on that. Fabric/ Fabric Ca V1.0.3  Fabric  https://github.com/hyperledger/fabric/releases/tag/v1.0.3    https://github.com/hyperledger/fabric-ca/releases/tag/v1.0.3    And yes, "1000 invoke" mean number of invocation.  In Step 6, if the SDK is modifying the endorsement policy or not.  ~varadatibm Know more about it, I believe yes.   And yes, in Step 12, the first invocation works.        I will closed this issue and open on UI repo. Thanks        ></body> </Action>
<Action id="40521" issue="26787" author="harrisob@us.ibm.com" type="comment" body="Varad and I have discussed and he says this is on 1.0 and I have looked into the code and see that in that release NodeSDK did inject an endorsing policy if the application did not provide one. The NodeSDK builds a policy to include all the current orgs  in a &apos;1 of  org_1, ...org_n &apos; So is it possible that once the org is removed from the channel that the endorsement policy fails due to a missing org ?" created="2018-02-21 16:43:30.0" updateauthor="harrisob@us.ibm.com" updated="2018-02-21 16:43:30.0"/>
<Action id="41466" issue="26787" author="wisam.mohammed" type="comment" body="Based on discussion between Varad and Bret, this issue need to be reopen. I will reopen it. " created="2018-03-12 14:53:04.0" updateauthor="wisam.mohammed" updated="2018-03-12 14:53:04.0"/>
<Action id="41468" issue="26787" author="kchristidis" type="comment" body="Alright. What is the rationale behind re-opening this?" created="2018-03-12 15:09:35.0" updateauthor="kchristidis" updated="2018-03-12 15:09:35.0"/>
<Action id="41478" issue="26787" author="varadatibm" type="comment" created="2018-03-12 16:42:21.0" updateauthor="varadatibm" updated="2018-03-12 16:42:21.0"> <body><! CDATA  ~kchristidis    Based on SDK, the default endorsement policy is '1 of n' based on the orgs at the time of chaincode instantiation. (Bret's comment above)  When an org is removed from a channel, we need to update the endorsement policy by submitting a new chaincode instantiation? Perhaps, Wisam can experiment this and see if that fixes it.  I am not sure if I can explain why it works for about 30 invokes before it times out?  ></body> </Action>
<Action id="41484" issue="26787" author="harrisob@us.ibm.com" type="comment" body="I assume there is an application timeout waiting for an event listener to signal the completion of a transaction (which means the peer has committed the transaction), since the endorsement policy is not meet, the commit will never happen. There is no mechanism in the two phase fabric process  of endorsing a  transaction proposal (maybe what you might call half of an invoke) and the submitting of those endorsed transactions to the orderer (maybe what you are thinking is the other half of the invoke) to know if the whole action was actually successful. The response from the orderer when submitting, only indicates that it has accepted the transaction to be processed. Therefore the application will continue to perform &quot;invokes&quot; until it receives the timeout. This will indicate that a commit has not happened for the transaction on the peer and I believe the application logic will now think that the first &quot;invoke&quot; has failed and stop invoking, however before the timeout the application continues to invoke." created="2018-03-12 18:25:40.0" updateauthor="harrisob@us.ibm.com" updated="2018-03-12 18:25:40.0"/>
