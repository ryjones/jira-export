<Issue id="27452" key="FAB-8080" number="8080" project="10002" reporter="suryalnvs" assignee="jyellick" creator="suryalnvs" type="10004" summary=" Upgrade  logs doesn&apos;t indicate from which config field is causing the panic while validating the config block on the v1.0 peer" priority="3" resolution="10000" status="6" created="2018-02-06 15:03:53.0" updated="2018-07-20 14:15:37.0" resolutiondate="2018-02-24 19:05:59.0" votes="0" watches="6" workflowId="41135"> <description><! CDATA When upgrading the fabric components from v1.0 to v1.1, upgraded orderers and peers except one peer, then enabled v1.1 capabilites results the old peer crash. Here is the log of the crashed peer {code:java}  35m2018-02-05 22:19:17.730 UTC  txvalidator  Validate -> CRIT 674^  0m Error validating config which passed initial validity checks: ConfigEnvelope LastUpdate did not produce the supplied config result ^  36m2018-02-05 22:19:17.731 UTC  txvalidator  Validate -> DEBU 675^  0m END Block Validation ^  31m2018-02-05 22:19:17.731 UTC  gossip/state  commitBlock -> ERRO 676^  0m Got error while committing(Error validating config which passed initial validity checks: ConfigEnvelope LastUpdate did not produce the supplied config result) ^  35m2018-02-05 22:19:17.731 UTC  gossip/state  deliverPayloads -> CRIT 677^  0m Cannot commit block to the ledger due to Error validating config which passed initial validity checks: ConfigEnvelope LastUpdate did not produce the supplied config result panic: Cannot commit block to the ledger due to Error validating config which passed initial validity checks: ConfigEnvelope LastUpdate did not produce the supplied config result  goroutine 227  running : panic(0xc64f00, 0xc421b53aa0)         /opt/go/src/runtime/panic.go:500 +0x1a1 github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc4201fb2f0, 0xdcc9f3, 0x2b, 0xc421b539f0, 0x1, 0x1)         /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x127 github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads(0xc421bceb40)         /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:449 +0x54d created by github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider         /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:228 +0x7d9  {code} *The logs doesn't indicate from which config field is causing the panic while validating the block.*      Expected Result: The logs should indicate which config field is causing the panic after enabling capabilities in v1.1  ></description> </Issue>
