<Issue id="24509" key="FAB-7130" number="7130" project="10002" reporter="denyeart" assignee="denyeart" creator="denyeart" type="10003" summary="Decision Task: Determine CouchDB database naming based on channel and chaincode" priority="3" resolution="10000" status="6" created="2017-11-28 15:59:39.0" updated="2018-07-20 14:15:03.0" resolutiondate="2017-12-07 13:38:17.0" votes="1" watches="2" workflowId="40601"> <description><! CDATA This work item proposes to change max channel name and max chanincode name length to be 118 characters each.  If this is adopted it would make CouchDB database naming a simple concatenation of channel_chaincode. Note that ‘_’ is a valid separator since channel names are not allowed to contain underscore.  In 1.0 channel name was allowed to be 249 characters. channel_chaincode may therefore exceed the 238 characters allowed in CouchDB database names (assuming unix max filename of 255 plus 17 characters overhead). If we can limit channel and chaincode name to be 118 characters each as of 1.1, then channel_chaincode can simply be used for the CouchDB database name.  If there is not agreement to make this change in 1.1 due to 1.0 compatibility reasons (even though it would be extremely rare to have a channel name or chaincode name exceeding 118 characters),  the fallback would be to implement some complex name mapping for CouchDB database names.  Database physical names would need to be derived from the channel and chaincode names (shortened and uniqueified).  The channel_chaincode to physical database name would have to be stored in a global metadata database.  The name mapping algorithm may result in different names on different peers, depending on the channels that have been joined.  It would be preferred to avoid these complications altogether by simply enforcing that channel and chaincode names must be less than 118 characters each.  For reference:   Channel naming rules: " a-z  a-z0-9.- *"  Chaincode naming rules: " A-Za-z0-9_- +"  CouchDB database naming rules: A database must be named with all lowercase letters (a-z), digits (0-9), or any of the _$()+-/ characters and must end with a slash in the URL. The name has to start with a lowercase letter (a-z).  Fabric enforces " a-z  a-z0-9.- *"  ( replace any . in channel name with $ )  Therefore, we would be good with the simple channel_chaincode database naming convention, assuming the length restriction of channel and chaincode name to be 118 characters each is enforced.  A naming restriction change like this can only be made prior to a long-term support release.  A release note would be required to highlight the change for anybody that has been doing a POC or pilot project on Fabric 1.0.  ></description> </Issue>
