<Action id="60793" issue="40485" author="yacovm" type="comment" body="I guess the good news is that the fix is trivial since it crashes at validation so the block is never committed? " created="2019-06-09 09:58:42.0" updateauthor="yacovm" updated="2019-06-09 09:58:42.0"/>
<Action id="60800" issue="40485" author="ales" type="comment" body="Pretty much - peers would be stuck in a crash/restart loop and wouldn&apos;t do anything else.." created="2019-06-09 16:11:38.0" updateauthor="ales" updated="2019-06-09 16:11:38.0"/>
<Action id="61290" issue="40485" author="wenjian" type="comment" created="2019-06-26 21:00:34.0" updateauthor="wenjian" updated="2019-07-01 16:02:05.0"> <body><! CDATA  ~ales  Below is a summary for how different releases handle nil ChaincodeSpec during lscc deployment.  v1.0, 1.1, and 1.2 will cause peer panic due to missing nil pointer check in GetChaincodeDeploymentSpec (e.g,  https://github.com/hyperledger/fabric/blob/release-1.0/protos/utils/proputils.go#L169)   v1.3 and 1.4 (including 1.4.0 and 1.4.1) fixed the bug and correctly caught the error.  v2.0 introduced a new nil pointer bug due to code refactoring. Will be be fixed.         ></body> </Action>
<Action id="61333" issue="40485" author="wenjian" type="comment" created="2019-06-28 12:41:32.0" updateauthor="wenjian" updated="2019-06-28 12:41:32.0"> <body><! CDATA Error messages in test log. Full log files are attached.     ^  91m e ^  35m org1.peer1 ^  0m ^  31m2019-06-27 22:19:13.071 EDT  vscc  Validate -> ERRO 050^  0m VSCC error: ValidateLSCCInvocation failed, err VSCC error: invocation of lscc(deploy) does not have appropriate arguments ^  91m e ^  37m org2.peer1 ^  0m ^  31m2019-06-27 22:19:13.071 EDT  vscc  Validate -> ERRO 041^  0m VSCC error: ValidateLSCCInvocation failed, err VSCC error: invocation of lscc(deploy) does not have appropriate arguments ^  91m e ^  35m org1.peer1 ^  0m ^  31m2019-06-27 22:19:13.071 EDT  committer.txvalidator  validateTx -> ERRO 051^  0m VSCCValidateTx for transaction txId = 2edcb082f22cf21d3fd8b9eeb7a27a7eaec98eded4cea9a4862787a8d372f107 returned error: VSCC error: invocation of lscc(deploy) does not have appropriate arguments ^  91m e ^  91m org2.peer2 ^  0m ^  31m2019-06-27 22:19:13.071 EDT  vscc  Validate -> ERRO 047^  0m VSCC error: ValidateLSCCInvocation failed, err VSCC error: invocation of lscc(deploy) does not have appropriate arguments ^  91m e ^  35m org1.peer1 ^  0m ^  34m2019-06-27 22:19:13.071 EDT  committer.txvalidator  Validate -> INFO 052^  0m  testchannel  Validated block  3  in 1ms ^  91m e ^  35m org1.peer1 ^  0m ^  33m2019-06-27 22:19:13.071 EDT  valimpl  preprocessProtoBlock -> WARN 053^  0m Channel  testchannel : Block  3  Transaction index  0  TxId  2edcb082f22cf21d3fd8b9eeb7a27a7eaec98eded4cea9a4862787a8d372f107  marked as invalid by committer. Reason code  ENDORSEMENT_POLICY_FAILURE  ^  91m e ^  36m org1.peer2 ^  0m ^  31m2019-06-27 22:19:13.071 EDT  vscc  Validate -> ERRO 04e^  0m VSCC error: ValidateLSCCInvocation failed, err VSCC error: invocation of lscc(deploy) does not have appropriate arguments ^  91m e ^  37m org2.peer1 ^  0m ^  31m2019-06-27 22:19:13.071 EDT  committer.txvalidator  validateTx -> ERRO 042^  0m VSCCValidateTx for transaction txId = 2edcb082f22cf21d3fd8b9eeb7a27a7eaec98eded4cea9a4862787a8d372f107 returned error: VSCC error: invocation of lscc(deploy) does not have appropriate arguments ^  91m e ^  91m org2.peer2 ^  0m ^  31m2019-06-27 22:19:13.071 EDT  committer.txvalidator  validateTx -> ERRO 048^  0m VSCCValidateTx for transaction txId = 2edcb082f22cf21d3fd8b9eeb7a27a7eaec98eded4cea9a4862787a8d372f107 returned error: VSCC error: invocation of lscc(deploy) does not have appropriate arguments ^  91m e ^  91m org2.peer2 ^  0m ^  34m2019-06-27 22:19:13.071 EDT  committer.txvalidator  Validate -> INFO 049^  0m  testchannel  Validated block  3  in 1ms ^  91m e ^  36m org1.peer2 ^  0m ^  31m2019-06-27 22:19:13.071 EDT  committer.txvalidator  validateTx -> ERRO 04f^  0m VSCCValidateTx for transaction txId = 2edcb082f22cf21d3fd8b9eeb7a27a7eaec98eded4cea9a4862787a8d372f107 returned error: VSCC error: invocation of lscc(deploy) does not have appropriate arguments ^  91m e ^  36m org1.peer2 ^  0m ^  34m2019-06-27 22:19:13.071 EDT  committer.txvalidator  Validate -> INFO 050^  0m  testchannel  Validated block  3  in 1ms ^  91m e ^  37m org2.peer1 ^  0m ^  34m2019-06-27 22:19:13.071 EDT  committer.txvalidator  Validate -> INFO 043^  0m  testchannel  Validated block  3  in 1ms ^  91m e ^  37m org2.peer1 ^  0m ^  33m2019-06-27 22:19:13.071 EDT  valimpl  preprocessProtoBlock -> WARN 044^  0m Channel  testchannel : Block  3  Transaction index  0  TxId  2edcb082f22cf21d3fd8b9eeb7a27a7eaec98eded4cea9a4862787a8d372f107  marked as invalid by committer. Reason code  ENDORSEMENT_POLICY_FAILURE   ></body> </Action>
<Action id="61342" issue="40485" author="wenjian" type="comment" body="2.0 CR:  https://gerrit.hyperledger.org/r/#/c/fabric/+/32118/ " created="2019-06-28 15:13:45.0" updateauthor="wenjian" updated="2019-06-28 15:13:45.0"/>
<Action id="62699" issue="40485" author="denyeart" type="comment" body="Addressed via FAB-15845" created="2019-08-07 19:43:56.0" updateauthor="denyeart" updated="2019-08-07 19:43:56.0"/>
