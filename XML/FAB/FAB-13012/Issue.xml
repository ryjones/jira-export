<Issue id="35653" key="FAB-13012" number="13012" project="10002" reporter="jonathanlevi" assignee="angelo.decaro" creator="jonathanlevi" type="10002" summary="Robust-ify the latest idemix tests (for Fabric 1.4 onwards) so that they work ALL the TIME" priority="3" resolution="10000" status="6" created="2018-11-28 12:10:15.0" updated="2018-12-03 08:32:59.0" resolutiondate="2018-12-03 08:32:59.0" votes="0" watches="2" workflowId="47127"> <description><! CDATA Some of the new idemix tests may either have a side-effect or have some external "assumptions" that should not be there. When running a clean run of the latest master branch   git rev-parse HEAD *17aae5cb8011c0052463662668b2ec036d43c0eb*  date *Wed Nov 28 04:03:23 PST 2018*  I have been able to get this error thrown (sometimes!):     ok  github.com/hyperledger/fabric/bccsp/idemix|http://github.com/hyperledger/fabric/bccsp/idemix 12.292s coverage: 89.7% of statements Running Suite: Plain Suite ========================== Random Seed: 1543402834 Will run 90 of 90 specs  ••••• ------------------------------ • Failure  0.855 seconds  Idemix Bridge /Users/macuser/go/src/ github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:20|http://github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:20  issuer /Users/macuser/go/src/ github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:37|http://github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:37  public key import /Users/macuser/go/src/ github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:103|http://github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:103  and it is modified /Users/macuser/go/src/ github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:117|http://github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:117  fails to validate invalid issuer public key  It  /Users/macuser/go/src/ github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:129|http://github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:129   Expected an error to have occurred. Got: <nil>: nil  /Users/macuser/go/src/ github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:136|http://github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:136  ------------------------------ ••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••  Summarizing 1 Failure:   Fail  Idemix Bridge issuer public key import and it is modified  It  fails to validate invalid issuer public key /Users/macuser/go/src/ github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:136|http://github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:136   Ran 90 of 90 Specs in 53.070 seconds FAIL! -- 89 Passed | 1 Failed | 0 Pending | 0 Skipped --- FAIL: TestPlain (53.07s) FAIL coverage: 96.5% of statements FAIL  github.com/hyperledger/fabric/bccsp/idemix/bridge|http://github.com/hyperledger/fabric/bccsp/idemix/bridge 53.957s ok  github.com/hyperledger/fabric/bccsp/idemix/handlers|http://github.com/hyperledger/fabric/bccsp/idemix/handlers 0.613s coverage: 97.4% of statements ?  github.com/hyperledger/fabric/bccsp/idemix/handlers/mock |http://github.com/hyperledger/fabric/bccsp/idemix/handlers/mock  no test files      -----  While at the same time, this passed (individually, both for me and for Angelo).  It is worth spending some time tackling this, so that other don't waste as much time on this, in Fabric 1.4 and/or onwards.     ></description> </Issue>
