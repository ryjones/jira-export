<Issue id="40848" key="FAB-15840" number="15840" project="10002" reporter="ronenschafferibm" assignee="ronenschafferibm" creator="ronenschafferibm" type="10004" summary="A peer gets isolated after a long period of disconnection" priority="1" resolution="10000" status="6" created="2019-07-01 13:14:21.0" updated="2019-08-13 11:33:43.0" resolutiondate="2019-07-16 18:42:46.0" votes="0" watches="4" workflowId="53805"> <description><! CDATA A peer might be temporarily disconnected from the other peers network due to various reasons. For example, maintenance work on a router/switch that's in the middle. If the disconnection is long enough, the peer won't get back to the peers network (its view will remain empty)  The reason for the isolation is due to the following facts: 1. A peer will explicitly connect to its bootstrap peers only once at startup  https://github.com/hyperledger/fabric/blob/7d44ebc84a700061483639454f0d5c5e95e4c7eb/gossip/gossip/gossip_impl.go#L143   https://github.com/hyperledger/fabric/blob/7d44ebc84a700061483639454f0d5c5e95e4c7eb/gossip/gossip/gossip_impl.go#L1155-L1179   2. The aliveMsgStore's callback might delete all the records from * deadLastTS * aliveLastTS * id2Member * aliveMembership * deadMembership  https://github.com/hyperledger/fabric/blob/7d44ebc84a700061483639454f0d5c5e95e4c7eb/gossip/discovery/discovery_impl.go#L1019-L1030   A possible simple solution would be to prevent the callback from removing records of a bootstrap peer  Some advanced solutions might include: - Exponentially increment of the time interval between reconnections to dead members in order to save resources - Defining a more complicated membership view rules on when we remove a bootstrap peer from the aliveMsgStore. For example, if our peer sees that a bootstrap peer is dead and there are no more peers in its membership view, it won't remove the bootstrap peer because otherwise, our peer might be isolated. But, if our peer sees that a bootstrap peer is dead and its membership view has a plenty of other peers, it will remove the dead bootstrap peer.  I think the simple solution above is a reasonable tradeoff for now.  Â   ></description> </Issue>
