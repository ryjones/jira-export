<Issue id="27080" key="FAB-7913" number="7913" project="10002" reporter="jyellick" assignee="nishi" creator="jyellick" type="10002" summary="Test Scenario: peer upgrade with vendored chaincode shim" priority="3" resolution="10001" status="6" created="2018-01-25 18:56:53.0" updated="2020-01-22 22:23:57.0" resolutiondate="2020-01-22 22:23:57.0" votes="0" watches="2" workflowId="42728"> <description><! CDATA Some users may have vendored the chaincode shim because they wished to import the protobuf timestamp, or some other structure which is also used in the fabric codebase.  In this case, the user most likely vendored the chaincode shim.  For example: https://github.com/ghaskins/hyperledger-fabric-alpha2-challenge/tree/master/jyellick/plob/  When the chaincode shim is vendored, the peer builds a chaincode image based on the version of the chaincode shim vendored, not based on the version of the peer.  -----  Test case:  Procedure:  # Start a v1.0.x peer # Deploy a chaincode which vendors a v1.0.x chaincode shim. # Shut down the peer # Delete the chaincode image # Upgrade the peer to v1.1.0 # Start up the peer # Attempt to query the chaincode  Expected Results:  The chaincode container will fail to connect to the peer, as the v1.0.x vendored shim fails to do mutual TLS authentication.  Please additionally document:  What does the peer log look like? The chaincode log? Are there any clues for a user to detect this?  ></description> </Issue>
