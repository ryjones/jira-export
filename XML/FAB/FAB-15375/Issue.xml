<Issue id="39660" key="FAB-15375" number="15375" project="10002" reporter="bharadwajambati1" creator="bharadwajambati1" type="10004" summary="Failing daily test cases in peer.feature from fabric-test repo" priority="3" resolution="10001" status="6" created="2019-05-07 06:20:01.0" updated="2019-07-30 01:02:30.0" resolutiondate="2019-07-30 01:02:30.0" votes="0" watches="2" workflowId="52545"> <description><! CDATA Disable test scenarios and tls in peer.feature from fabric-test repo due to IO error while running the svt-daily-behavesuite.     *Scenario: FAB-8379: Test MSP Identity - Happy Path*    {code:java} 01:24:55     Then a user receives a success response of 1000                                                                                                # steps/endorser_impl.py:1183 01:24:55     When a user invokes on the chaincode named "mycc" with args  "invoke","a","b","10"                                                             # steps/endorser_impl.py:702 01:25:00     And I wait "5" seconds                                                                                                                         # steps/basic_impl.py:24 01:25:05     When a user queries on the chaincode named "mycc" with args  "query","a"                                                                       # steps/endorser_impl.py:510 01:25:10     Then a user receives a success response of 990                                                                                                 # steps/endorser_impl.py:1183 01:25:10       Assertion Failed: Expected response was 990; received 1000 {code}       *Scenario: FAB-8380: Test MSP Identity - Malicious Peer*    {code:java} 02:00:51     Then the logs on peer1.org2.example.com contains "VSCCValidateTx for transaction txId " within 10 seconds                                                                                      # steps/basic_impl.py:587 02:01:01       Traceback (most recent call last): 02:01:01         File "/usr/local/lib/python2.7/dist-packages/behave/model.py", line 1329, in run 02:01:01           match.run(runner.context) 02:01:01         File "/usr/local/lib/python2.7/dist-packages/behave/matchers.py", line 98, in run 02:01:01           self.func(context, *args, **kwargs) 02:01:01         File "steps/basic_impl.py", line 590, in step_impl 02:01:01           common_util.wait_until_in_log( component , data) 02:01:01         File "/w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/steps/common_util.py", line 70, in wait_until_in_log 02:01:01           time.sleep(1) 02:01:01         File "/home/jenkins/.local/lib/python2.7/site-packages/interruptingcow/__init__.py", line 74, in handler 02:01:01           raise exception 02:01:01       RuntimeError {code}    *Scenario: FAB-8381: Test MSP Identity - Malicious Peer (Clients set as writers in policy)*    {code:java} 02:45:04     When the admin changes the policy to "OR ('org1.example.com.client','org2.example.com.client')"                                                                                                # steps/endorser_impl.py:910 02:45:15       Traceback (most recent call last): 02:45:15         File "/usr/local/lib/python2.7/dist-packages/behave/model.py", line 1329, in run 02:45:15           match.run(runner.context) 02:45:15         File "/usr/local/lib/python2.7/dist-packages/behave/matchers.py", line 98, in run 02:45:15           self.func(context, *args, **kwargs) 02:45:15         File "steps/endorser_impl.py", line 912, in step_impl 02:45:15           policyChannelUpdate_impl(context, policy, context.interface.TEST_CHANNEL_ID) 02:45:15         File "steps/endorser_impl.py", line 903, in policyChannelUpdate_impl 02:45:15           context.interface.upgrade_chaincode(context, "orderer0.example.com", channel) 02:45:15         File "/w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/steps/endorser_util.py", line 898, in upgrade_chaincode 02:45:15           '{0}/peerOrganizations/{1}/users/{2}@{1}/tls/ca.crt'.format(configDir, org, user)  02:45:15       UnboundLocalError: local variable 'org' referenced before assignment  {code} *Scenario: FAB-8382: Test MSP Identity with inconsistencies*    {code:java} 03:06:00     Then the logs on peer0.org2.example.com contains "VSCCValidateTx for transaction txId " within 10 seconds                                                                                      # steps/basic_impl.py:587 03:06:10       Traceback (most recent call last): 03:06:10         File "/usr/local/lib/python2.7/dist-packages/behave/model.py", line 1329, in run 03:06:10           match.run(runner.context) 03:06:10         File "/usr/local/lib/python2.7/dist-packages/behave/matchers.py", line 98, in run 03:06:10           self.func(context, *args, **kwargs) 03:06:10         File "steps/basic_impl.py", line 590, in step_impl 03:06:10           common_util.wait_until_in_log( component , data) 03:06:10         File "/w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/steps/common_util.py", line 70, in wait_until_in_log 03:06:10           time.sleep(1) 03:06:10         File "/home/jenkins/.local/lib/python2.7/site-packages/interruptingcow/__init__.py", line 74, in handler 03:06:10           raise exception 03:06:10       RuntimeError {code} *Scenario: FAB-8759: Test querying a peer with two different versions of chaincode - values change* {code:java} 03:31:25     And an admin deploys chaincode at path "github.com/hyperledger/fabric-test/chaincodes/example02/go/cmd" with args  "init", "a", "1000" , "b", "2000"  with name "vt" on channel "versioningtest" # steps/endorser_impl.py:143 03:32:19     When a user queries on the channel "versioningtest" using chaincode named "vt" with args  "query","a"  on "peer0.org1.example.com"                                                               # steps/endorser_impl.py:466 03:32:26     Then a user receives a success response of 1000                                                                                                                                                  # steps/endorser_impl.py:1183 03:32:26     When a user invokes on the channel "versioningtest" using chaincode named "vt" with args  "invoke","a","b","10"  on "peer0.org2.example.com"                                                     # steps/endorser_impl.py:634 03:32:32     And I wait "5" seconds                                                                                                                                                                           # steps/basic_impl.py:24 03:32:37     When a user queries on the channel "versioningtest" using chaincode named "vt" with args  "query","a"  on "peer0.org1.example.com"                                                               # steps/endorser_impl.py:466 03:32:44     Then a user receives a success response of 990                                                                                                                                                   # steps/endorser_impl.py:1183 03:32:44       Assertion Failed: Expected response was 990; received 1000 {code} *Scenario: FAB-8759: Test querying a peer that has two different versions of chaincode - no change in data* {code:java} 03:52:20     And an admin deploys chaincode at path "github.com/hyperledger/fabric-test/chaincodes/mapkeys/go" with args  "init"  with name "vt" on channel "versioningtest"   # steps/endorser_impl.py:143 03:52:49     When a user invokes on the channel "versioningtest" using chaincode named "vt" with args  "put","a","1000"  on "peer0.org2.example.com"                           # steps/endorser_impl.py:634 03:52:54     When a user invokes on the channel "versioningtest" using chaincode named "vt" with args  "put","b","2000"  on "peer0.org1.example.com"                           # steps/endorser_impl.py:634 03:52:59     When a user invokes on the channel "versioningtest" using chaincode named "vt" with args  "put","c","3000"  on "peer1.org1.example.com"                           # steps/endorser_impl.py:634 03:53:04     And I wait "5" seconds                                                                                                                                            # steps/basic_impl.py:24 03:53:09     When a user queries on the channel "versioningtest" using chaincode named "vt" with args  "get","a"  on "peer1.org2.example.com"                                  # steps/endorser_impl.py:466 03:53:23     Then a user receives a success response of "1000" from "peer1.org2.example.com"                                                                                   # steps/endorser_impl.py:1170 03:53:23       Assertion Failed: Expected response was "1000"; received ""{code} *Scenario: FAB-7407: Update the channel policies - add an organization* {code:java} 03:59:09 2019-05-07 07:59:09.700 UTC  common.tools.configtxgen  doOutputChannelCreateTx -> INFO 006 Writing new channel tx 03:59:34     And an admin deploys chaincode with args  "init","a","1000","b","2000"                                                                                                         # steps/endorser_impl.py:248 03:59:57     When a user invokes on the chaincode with args  "invoke","a","b","10"                                                                                                          # steps/endorser_impl.py:678 04:00:01     And I wait "5" seconds                                                                                                                                                         # steps/basic_impl.py:24 04:00:06     When a user queries on the chaincode with args  "query","a"                                                                                                                    # steps/endorser_impl.py:550 04:00:10     Then a user receives a success response of 990                                                                                                                                 # steps/endorser_impl.py:1183 04:00:10       Assertion Failed: Expected response was 990; received 1000 04:00:10        {code} **At the end of each test scenarios, found IOError:  Errno 11  Resource temporarily unavailable {code:java} 04:00:10 Traceback (most recent call last): 04:00:10   File "/usr/local/bin/behave", line 11, in <module> 04:00:10     sys.exit(main()) 04:00:10   File "/usr/local/lib/python2.7/dist-packages/behave/__main__.py", line 183, in main 04:00:10     return run_behave(config) 04:00:10   File "/usr/local/lib/python2.7/dist-packages/behave/__main__.py", line 127, in run_behave 04:00:10     failed = runner.run() 04:00:10   File "/usr/local/lib/python2.7/dist-packages/behave/runner.py", line 804, in run 04:00:10     return self.run_with_paths() 04:00:10   File "/usr/local/lib/python2.7/dist-packages/behave/runner.py", line 824, in run_with_paths 04:00:10     return self.run_model() 04:00:10   File "/usr/local/lib/python2.7/dist-packages/behave/runner.py", line 626, in run_model 04:00:10     failed = feature.run(self) 04:00:10   File "/usr/local/lib/python2.7/dist-packages/behave/model.py", line 321, in run 04:00:10     failed = scenario.run(runner) 04:00:10   File "/usr/local/lib/python2.7/dist-packages/behave/model.py", line 711, in run 04:00:10     if not step.run(runner): 04:00:10   File "/usr/local/lib/python2.7/dist-packages/behave/model.py", line 1379, in run 04:00:10     formatter.result(self) 04:00:10   File "/usr/local/lib/python2.7/dist-packages/behave/formatter/pretty.py", line 151, in result 04:00:10     self.stream.write(indent(step.error_message.strip(), u"      ")) 04:00:10   File "/usr/lib/python2.7/codecs.py", line 370, in write 04:00:10     self.stream.write(data) 04:00:10 IOError:  Errno 11  Resource temporarily unavailable {code}          ></description> </Issue>
