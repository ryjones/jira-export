<Action id="29557" issue="20036" author="latitiah" type="comment" created="2017-08-08 16:04:00.0" updateauthor="latitiah" updated="2017-08-08 16:04:00.0"> <body><! CDATA One of the failing scenarios: {code:None} Scenario: FAB-3509: Test chaincode calling chaincode - fabric/examples/chaincode_example04 Given I have a bootstrapped fabric network of type kafka And I wait "60" seconds When a user deploys chaincode at path "github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example04" with  "init","Event","1"  with name "myex04" And I wait "30" seconds Then the chaincode is deployed When a user deploys chaincode at path "github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02" with  "init","a","1000","b","2000"  with name "myex02_a" on channel "channel2" And I wait "30" seconds Then the chaincode is deployed When a user queries on the chaincode named "myex02_a" on channel "channel2" with args  "query","a"  Then a user receives a success response of 1000 When a user queries on the chaincode named "myex04" with args  "query","Event", "myex02_a", "a", "channel2"  Then a user receives a success response of 1000 {code}  (executed using code located in CR: https://gerrit.hyperledger.org/r/#/c/10961/ )  ></body> </Action>
<Action id="29562" issue="20036" author="latitiah" type="comment" created="2017-08-08 17:31:20.0" updateauthor="latitiah" updated="2017-08-08 17:31:20.0"> <body><! CDATA Failing scenarios when executing system behave tests: chaincodes.feature:39  FAB-3509: Test chaincode calling chaincode - fabric/examples/chaincode_example04 chaincodes.feature:55  FAB-3510-1: Test chaincode calling chaincode - fabric/examples/chaincode_example05 chaincodes.feature:71  FAB-3510-2: Test chaincode calling chaincode - fabric/examples/chaincode_example05  Steps:  1. checkout code located in CR https://gerrit.hyperledger.org/r/#/c/10961/  2. go to /path/to/fabric/test/feature 3. type "behave chaincodes.feature" (you must have behave installed using python 2.7 with prereqs - see README in directory)  ></body> </Action>
<Action id="30695" issue="20036" author="muralisr" type="comment" created="2017-09-09 16:17:15.0" updateauthor="muralisr" updated="2017-09-09 16:17:15.0"> <body><! CDATA  ~latitiah  Vendoring example04 and example05 solves this.  so   {code:java} cd examples/chaincode/go/chaincode_example04 govendor init govendor add +external {code}   and  {code:java} cd examples/chaincode/go/chaincode_example05 govendor init govendor add +external {code}  I'll provide a CR with this fix soon.  ></body> </Action>
<Action id="30775" issue="20036" author="muralisr" type="comment" body="Assigning to  ~Nishi  " created="2017-09-12 19:09:28.0" updateauthor="muralisr" updated="2017-09-12 19:09:28.0"/>
<Action id="30777" issue="20036" author="muralisr" type="comment" body="a misunderstanding... assigning it back to self." created="2017-09-12 19:18:16.0" updateauthor="muralisr" updated="2017-09-12 19:18:16.0"/>
<Action id="31118" issue="20036" author="scottz" type="comment" created="2017-09-23 19:49:14.0" updateauthor="scottz" updated="2017-09-23 19:49:14.0"> <body><! CDATA We tagged some Behave tests that are failing in fabric-test repo, so (per Latitia's earlier instructions) we can use them to verify this issue by executing:  behave -n FAB-5663     ></body> </Action>
<Action id="31204" issue="20036" author="ratnakar" type="comment" created="2017-09-27 15:34:25.0" updateauthor="ratnakar" updated="2017-09-27 15:35:32.0"> <body><! CDATA  ~muralisr   I ran this with e2e_cli setup and I do see the following errors in  ^peer-logs.txt  on commit level *42da28ddc897d40804c5c009ebe9c683cdb7a82d*    {code:java} 2017-09-27 15:08:22.152 UTC  chaincode  2 -> ERRO 950  06162488  C-call-C mycc02 on channel mychannel1 failed check ACL  proposal_bytes:"\n\221\007\nc\010\003\032\013\010\346\375\256\316\005\020\351\367\220G\"\004xyz2*@06162488c56d3bac0a2118c9f2f8c5d525742ba06f7edcdcfa1f8d7bd561bd17:\n\022\010\022\006mycc05\022\251\006\n\214\006\n\007Org2MSP\022\200\006-----BEGIN -----\nMIICGjCCAcCgAwIBAgIRAKJMBejdYnNJ3k2+AGK7wTowCgYIKoZIzj0EAwIwczEL\nMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBG\ncmFuY2lzY28xGTAXBgNVBAoTEG9yZzIuZXhhbXBsZS5jb20xHDAaBgNVBAMTE2Nh\nLm9yZzIuZXhhbXBsZS5jb20wHhcNMTcwOTI3MTUwMTI1WhcNMjcwOTI1MTUwMTI1\nWjBbMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMN\nU2FuIEZyYW5jaXNjbzEfMB0GA1UEAwwWQWRtaW5Ab3JnMi5leGFtcGxlLmNvbTBZ\nMBMGByqGSM49AgEGCCqGSM49AwEHA0IABEIADK+B96l1kIpZX1Ad4ai8b3/ezH+N\nmCFP6uPkimXsL6Q+fq1pAS95jBGNnxWHFftV1ycUfEguGXww32OCNq+jTTBLMA4G\nA1UdDwEB/wQEAwIHgDAMBgNVHRMBAf8EAjAAMCsGA1UdIwQkMCKAILHulxpw3DtO\niiCRIUnbB8/X1JDMRmnWyQA8a21CUmrJMAoGCCqGSM49BAMCA0gAMEUCIQCC/VlU\nQyP1NsiqmCVRypuExj1AiI9jTSwnBZXgxgW1OgIgLVxz3DNvb3u+cZhRbCjRQf+D\nfe8RMt9nrOhXlEguSAg=\n-----END -----\n\022\030\253\214\245\366O(U\273\260&\200k\036\356\247\275\220\320K(X*\210M\0222\n0\n.\010\001\022\010\022\006mycc05\032 \n\005query\n\006mycc02\n\003sum\n\nmychannel1" signature:"0D\002 $\313\\\250\257\"c\2430&\021\232\346K\310!\363\\O\\@\210\326\275%O\202\237\202\324\233\375\002 o\260C\240\317\346\007z\025\257\355\360bR5\306\270\234\217`CH\345\231\335\371\023b4\264\\\324"  :  Failed to get policy manager for channel  mychannel1   2017-09-27 15:08:22.152 UTC  chaincode  1 -> DEBU 951  06162488 enterBusyState trigger event ERROR 2017-09-27 15:08:22.152 UTC  chaincode  processStream -> DEBU 952  06162488 Move state message ERROR 2017-09-27 15:08:22.152 UTC  chaincode  HandleMessage -> DEBU 953  06162488 Fabric side Handling ChaincodeMessage of type: ERROR in state ready 2017-09-27 15:08:22.152 UTC  chaincode  HandleMessage -> DEBU 954  06162488c56d3bac0a2118c9f2f8c5d525742ba06f7edcdcfa1f8d7bd561bd17 HandleMessage- COMPLETED. Notify 2017-09-27 15:08:22.153 UTC  chaincode  notify -> DEBU 955 notifying Txid:06162488c56d3bac0a2118c9f2f8c5d525742ba06f7edcdcfa1f8d7bd561bd17 2017-09-27 15:08:22.153 UTC  chaincode  processStream -> DEBU 956  06162488 sending state message ERROR 2017-09-27 15:08:22.153 UTC  chaincode  Execute -> DEBU 957 Exit 2017-09-27 15:08:22.153 UTC  chaincode  ExecuteChaincode -> ERRO 958 Error executing chaincode: transaction returned with failure: Failed to get policy manager for channel  mychannel1  2017-09-27 15:08:22.153 UTC  endorser  callChaincode -> DEBU 959 Exit 2017-09-27 15:08:22.153 UTC  endorser  simulateProposal -> ERRO 95a failed to invoke chaincode name:"mycc05" on transaction 06162488c56d3bac0a2118c9f2f8c5d525742ba06f7edcdcfa1f8d7bd561bd17, error: transaction returned with failure: Failed to get policy manager for channel  mychannel1  github.com/hyperledger/fabric/core/chaincode.Execute /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/exectransaction.go:83 github.com/hyperledger/fabric/core/chaincode.ExecuteChaincode /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincodeexec.go:85 github.com/hyperledger/fabric/core/endorser.(*Endorser).callChaincode /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:125 github.com/hyperledger/fabric/core/endorser.(*Endorser).simulateProposal /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:265 github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:480 github.com/hyperledger/fabric/core/handlers/auth.(*filter).ProcessProposal /opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/auth.go:38 github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler /opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:112 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:781 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:981 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1 /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:551 runtime.goexit /opt/go/src/runtime/asm_amd64.s:2337 error executing chaincode {code}    Do we need to make specific changed to avoid these ACL errors ?  ></body> </Action>
<Action id="31227" issue="20036" author="muralisr" type="comment" created="2017-09-28 11:55:12.0" updateauthor="muralisr" updated="2017-09-28 11:55:12.0"> <body><! CDATA  ~Ratnakar  I believe what you are seeing is the result of Serviceability work from  ~wlahti  where stack traces are dumped with errors.   Not sure what you are running into but the original error - unable to create ex05 and ex04 - is gone I think. If you agree, that takes care of this JIRA.  ></body> </Action>
<Action id="31235" issue="20036" author="ratnakar" type="comment" created="2017-09-28 14:03:11.0" updateauthor="ratnakar" updated="2017-09-28 14:03:11.0"> <body><! CDATA  ~muralisr  Apologies Murali.  This is not the issue described in this bug and seems a different issue.  I will create a new Jira Item for this.  ></body> </Action>
<Action id="31663" issue="20036" author="hangyu_fjh" type="comment" created="2017-10-06 04:01:37.0" updateauthor="hangyu_fjh" updated="2017-10-06 04:01:37.0"> <body><! CDATA Same thing happened with example passthru  I commit a changeSet by referring to  ~muralisr  's fix  https://gerrit.hyperledger.org/r/#/c/14247/  ></body> </Action>
