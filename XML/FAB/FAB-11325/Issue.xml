<Issue id="32232" key="FAB-11325" number="11325" project="10002" reporter="yacovm" assignee="yacovm" creator="yacovm" type="10003" summary="Add VerifyPeerCertificate option to SecureOptions" priority="3" resolution="10000" status="6" created="2018-07-26 13:24:56.0" updated="2018-07-31 15:42:44.0" resolutiondate="2018-07-31 12:13:00.0" votes="0" watches="2" workflowId="43480"> <description><! CDATA The Raft RPC method - Step() sends blocks to remote nodes.  In order to ensure the remote node is who we want it to be via TLS pinning, we need to either extract the TLS certificate from the gRPC context, or enforce the authentication in the TLS connection itself.     Extracting the TLS certificate from the context isn't possible, because the Step() is an RPC, thus the gRPC context isn't populated prior to the invocation of the method itself (and then it's too late because data might have been sent to the wrong node).     Therefore we need to enforce TLS pinning via passing a function to the TLS config at the creation of the connection, which would iterate over the TLS server of the remote node (for all channels) and compare the certificate the remote node sent us (the client) to one of the certificates we have in the config.  ></description> </Issue>
