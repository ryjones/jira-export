<Issue id="26636" key="FAB-7629" number="7629" project="10002" reporter="sykesm" assignee="sykesm" creator="sykesm" type="10004" summary="Tests inadvertently (?) excluded from build" priority="4" resolution="10000" status="6" created="2018-01-06 01:40:17.0" updated="2018-07-20 14:15:22.0" resolutiondate="2018-03-23 18:27:06.0" votes="0" watches="2" workflowId="40897"> <description><! CDATA unitest/run.sh excludes `/test` from the build packages.  1   While the regex was probably intended to cover `github.com/hyperledger/fabric/test/...`, it also excluded `github.com/hyperledger/fabric/core/chaincode/platforms/car/test` and `github.com/hyperledger/fabric/core/chaincode/platforms/java/test`.  When the regex is fixed to only exclude `fabric/test/...`, the tests in `chaincode/platforms/car/test` fail.  {noformat} TEST_PKGS=github.com/hyperledger/fabric/core/chaincode/platforms/car/test make unit-test cd unit-test && docker-compose down The JOB_TYPE variable is not set. Defaulting to a blank string. Removing unittest_unit-tests_1 ...  Removing unittest_unit-tests_1 ... done Removing unittest_vp_1         ... done Removing couchdb               ... done # github.com/hyperledger/fabric/peer /tmp/go-link-025085691/000001.o: In function `pluginOpen': /tmp/workdir/go/src/plugin/plugin_dlopen.go:19: warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking /tmp/go-link-025085691/000000.o: In function `_cgo_b0c710f30cfd_C2func_getaddrinfo': /tmp/go-build/net/_obj/cgo-gcc-prolog:46: warning: Using 'getaddrinfo' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking mkdir -p build/image/peer/payload cp build/docker/bin/peer build/sampleconfig.tar.bz2 build/image/peer/payload Creating build/goshim.tar.bz2 mkdir -p build/image/ccenv/payload cp build/docker/gotools/bin/protoc-gen-go build/bin/chaintool build/goshim.tar.bz2 build/image/ccenv/payload Building build/docker/bin/orderer # github.com/hyperledger/fabric/common/deliver common/deliver/deliver.go:29:2: can't find import: "github.com/hyperledger/fabric/protos/common" make: ***  build/docker/bin/orderer  Error 2 {noformat}  In summary, the regex in `unit-test/run.sh` needs to be updated and the `chaincode/platforms/car` test needs to be fixed.   1 : https://github.com/hyperledger/fabric/blob/90b92697e0698af0ba2ca6e7aadf0cdbb27623ad/unit-test/run.sh#L66  ></description> </Issue>
