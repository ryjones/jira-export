<Action id="20788" issue="14503" author="scottz" type="comment" created="2017-02-09 00:13:18.0" updateauthor="scottz" updated="2017-02-09 00:13:18.0"> <body><! CDATA For example: OTE_TXS=5 ORDERER_GENESIS_ORDERERTYPE=kafka OTE_KAFKABROKERS=3 OTE_ORDERERS=3 For this test with 5 transactions, 1 channel (non-default name) and 3 orderers EXPECT to see:  1 block delivered (the same one should be delivered on all orderers) after 10 secs FAILURE OBSERVED:  transactions sent to different orderers are NOT batched together: Consumer recvd a block, o 2 c 0 blkNum 1 numtrans 1 Consumer recvd a block, o 0 c 0 blkNum 1 numtrans 3 Consumer recvd a block, o 1 c 0 blkNum 1 numtrans 1 in compute(): totalTxRecv  =  3 1 1 , totalBlockRecv  =  1 1 1  This shows that Orderer 0 delivers 3 transactions in 1 block, block number 1. Orderer 1 delivers 1 transaction in a different block number 1. Orderer 2 delivers 1 transaction in yet another different block number 1.  ></body> </Action>
<Action id="20862" issue="14503" author="kchristidis" type="comment" body="Folks, let me know what the progress is on this, and whether you&apos;d like me to help." created="2017-02-13 15:19:23.0" updateauthor="kchristidis" updated="2017-02-13 15:19:23.0"/>
<Action id="21226" issue="14503" author="scottz" type="comment" created="2017-02-28 21:46:35.0" updateauthor="scottz" updated="2017-02-28 21:46:35.0"> <body><! CDATA Still fails using Feb 27th commit # 29d7fc035df697a68d271d628e693c556354486f for a new non-default channel ID name, AND ALSO FAILS using default testchainid.  ></body> </Action>
<Action id="24536" issue="14503" author="christopherferris" type="comment" body=" ~scottz  this says affectedVersion alpha2, yet filed in Feb when alpha hadn&apos;t even been cut. Is this still a verified issue?" created="2017-05-26 22:24:11.0" updateauthor="christopherferris" updated="2017-05-26 22:24:11.0"/>
<Action id="24955" issue="14503" author="suryalnvs" type="comment" created="2017-06-01 15:27:04.0" updateauthor="suryalnvs" updated="2017-06-01 15:27:04.0"> <body><! CDATA +*Pre-req:*+ * Generate certs using the cryptogen tool for the clients and orderer * Launch the network with following configuration: _2 Orderers (with BATCHSIZE=100)_ _3 Kafka brokers (3 zookeepers)_  *_Steps to run the test:_* 1. Create a channel 'mychannel'  2. Start the deliver clients for two orderers *Terminal 1:* {code} /deliver_stdout_msp -server localhost:7050 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer0.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer0.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp -mspID Org1MSP -seek -2 {code}  *Terminal 2:* {code} ./deliver_stdout_msp -server localhost:8050 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer1.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer1.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp -mspID Org1MSP -seek -2 {code}  3. Start broadcast clients     Send 110 transactions to the Orderer0 and Orderer1  *Terminal 3:* {code} ./broadcast_timestamp_msp -server localhost:7050 -chainID mychannel -messages 110 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer0.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer0.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp -mspID Org1MSP {code}  *Terminal 4:* {code} ./broadcast_timestamp_msp -server localhost:8050 -chainID mychannel -messages 110 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer1.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer1.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp -mspID Org1MSP {code}  *OUTPUT:* As a result of the above execution here is the result (seen in Ternminal 1 & 2) {code:java} Total Transactions Received in block 0 :  1 Total Transactions Received in block 1 :  100 Total Transactions Received in block 2 :  100 Total Transactions Received in block 3 :  20 {code} {color:#14892c}*we see the blocks are getting batched up properly and issue is no more reproducible, hence this issue can be closed* {color}  *NOTE:* * Tested on alpha2 based code/commit level * Please refer more details here, https://jira.hyperledger.org/browse/FAB-3993,  https://gerrit.hyperledger.org/r/#/c/9625/  Also attached the source file for broadcast_timestamp_msp (added changes to broadcast_timestamp to read msps of the peers)  ></body> </Action>
<Action id="24966" issue="14503" author="ratnakar" type="comment" created="2017-06-01 16:22:49.0" updateauthor="ratnakar" updated="2017-06-01 16:22:49.0"> <body><! CDATA Verified the issue on Alpha2 commit level with few changes made to the clients to enable TLS.  Closing the issue.  ></body> </Action>
