<Issue id="39299" key="FAB-15173" number="15173" project="10002" reporter="tock" assignee="tock" creator="tock" type="10003" summary="Validate config transitions into, in, and out-of maintenance mode" priority="3" resolution="10000" status="6" created="2019-04-14 10:56:22.0" updated="2019-06-20 04:01:25.0" resolutiondate="2019-06-04 14:29:21.0" votes="0" watches="1" workflowId="52178"> <description><! CDATA Entry into maintenance mode should not be accompanied with additional config changes, because the whole point of maintenance mode it to first create a stable and safe backup point, with a good configuration. In particular, it should not be allowed change the concesus type together with entry or exit from maintenance mode. Changing the consensus type should only be done in maintenance mode.   In addition the type of consensus type transitions should be checked - currently we only support kafka to raft.  * Entry: Prevent transition into maintenance mode, i.e. a change in ConsensusType.State, together with change in ConsensusType.Type * Prevent changes to ConsensusType.Type unless in maintenance mode * Exit: Prevent transition out-of maintenance mode, i.e. a change in ConsensusType.State, together with change in ConsensusType.Type  This is achieved by adding a new filter - the maintenance-filter - which is only evaluated on ProcessesConfigUpdate(). This is unlike all other filters, which are evaluated on both normal and config messages. For that end it is added to a separate  Rule field in the standardchannel.go. This Rule can later be extended to a <configFilters   Rule> array (slice) if we find we need more filters that apply to config only.   ></description> </Issue>
