<Issue id="30422" key="FAB-10238" number="10238" project="10002" reporter="yacovm" assignee="yacovm" creator="yacovm" type="10004" summary="Make collection policies filter peer identities instead of principal sets" priority="3" resolution="10000" status="6" created="2018-05-20 22:58:46.0" updated="2018-07-20 14:16:44.0" resolutiondate="2018-05-21 21:03:27.0" votes="0" watches="1" workflowId="42249"> <description><! CDATA The collection support in the discovery service supports collections by filtering out principal sets that aren't authorized by the principals derived from the policy in the collection config.  This is problematic in cases of when the collection config is defined with principals which have no obvious *IsA* relation with the endorsement policy:  Consider a case where the endorsement policy is defined with principals of Org1.peer or and org2.peer, and the collection is defined with OUs of Org.  Any principal based policy can't accept nor reject such a scenario, since a peer role is based on an OU that is hidden from the principal itself.     Therefore, to support this case - we should move the filtering to the peer identities - instead of filtering the principal sets of the combinations of the endorsement policy, we would simply filter the channel peer membership and remove all peers that the some collection in the invocation chain doesn't authorize.     ></description> </Issue>
