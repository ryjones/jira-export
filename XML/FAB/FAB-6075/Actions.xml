<Action id="30773" issue="20677" author="wlahti" type="comment" body="https://gerrit.hyperledger.org/r/#/c/13257/" created="2017-09-12 17:57:40.0" updateauthor="wlahti" updated="2017-09-12 17:57:40.0"/>
<Action id="31202" issue="20677" author="wlahti" type="comment" body="A few concerns with this approach have been raised. It doesn&apos;t seem to add much in the way of security and only makes it more difficult for legitimate users that might be experiencing network latency. Maybe it would be best to continue with a complete fix that adds information about the recipient of the event registration and avoids timestamps altogether?  ~muralisr  Anything to add?  ~elli-androulaki  Any thoughts?" created="2017-09-27 14:03:55.0" updateauthor="wlahti" updated="2017-09-27 14:03:55.0"/>
<Action id="31229" issue="20677" author="muralisr" type="comment" created="2017-09-28 12:25:08.0" updateauthor="muralisr" updated="2017-09-28 12:25:08.0"> <body><! CDATA  ~wlahti    Right, if I understood it right, if the timestamp is too small it could block legit users, if its large (like it is now - 1 min) it could allow malicious users to get in anyway. I was not sure how much timestamp buys... so with the complete fix, this would be just extra code to maintain for little return ?   On the other hand if we are targeting a larger window (hours, days, etc) to block revoked users, maybe its worth it but the question of whether we really need this is still valid I think.  but can easily defer to  ~elli-androulaki  on this :-)  ></body> </Action>
<Action id="31268" issue="20677" author="elli-androulaki" type="comment" created="2017-09-29 12:56:18.0" updateauthor="elli-androulaki" updated="2017-09-29 12:56:18.0"> <body><! CDATA Hi @muralisr,  Here are my 2c :)    {noformat}  I understood it right, if the timestamp is too small it could block legit users{noformat} Correct {noformat} if its large (like it is now - 1 min) it could allow malicious users to get in anyway{noformat} If it is "too" large, this is indeed the case. But there is a middle ground. I would not expect that peers get compromised always within the hour of users registering to them :) So I would say it still give us some security guarantees, i.e., against an adversary that compromises the peer after the time window the registration request is valid closes. {noformat} so with the complete fix, this would be just extra code to maintain for little return{noformat} True, but it seems to me natural to have timestamps attached to event registration requests. It also allows for an easy check even before do a signature verification if the request has expired.  This would allow someone to avoid (accidental) replays of the registration request to the same peer (though admittedly not so easy for the same request to be replayed), etc...        ></body> </Action>
<Action id="31276" issue="20677" author="muralisr" type="comment" created="2017-09-29 15:09:18.0" updateauthor="muralisr" updated="2017-09-29 15:09:18.0"> <body><! CDATA  ~elli-androulaki   makes sense to me. As long as we don't block legit users and cause more of a problem than otherwise, I suppose we could argue that this does provide another layer of protection.  (and thank you for the detailed response!)  ></body> </Action>
<Action id="31279" issue="20677" author="wlahti" type="comment" body="So what should the plan be here? What time window value seems reasonable?" created="2017-09-29 15:15:45.0" updateauthor="wlahti" updated="2017-09-29 15:15:45.0"/>
<Action id="31280" issue="20677" author="elli-androulaki" type="comment" created="2017-09-29 15:51:51.0" updateauthor="elli-androulaki" updated="2017-09-29 15:51:51.0"> <body><! CDATA  ~muralisr , sure!   ~wlahti , shall we start with half an hour or so? What do you think?  ></body> </Action>
<Action id="31568" issue="20677" author="wlahti" type="comment" body=" ~elli-androulaki  I went with 15 minutes to each side of the peer&apos;s time for a total time window of 30 minutes. " created="2017-10-03 15:59:52.0" updateauthor="wlahti" updated="2017-10-03 15:59:52.0"/>
<Action id="31651" issue="20677" author="yacovm" type="comment" body="Not sure why this is any good if we are going to include the certificate of the peer anyway? Then the signed event becomes none-relayable to anyone but the peer itself." created="2017-10-05 19:05:32.0" updateauthor="yacovm" updated="2017-10-05 19:05:32.0"/>
<Action id="31981" issue="20677" author="elli-androulaki" type="comment" body="Agreed, but it seems to me natural to have timestamps attached to event registration requests. It also allows for an easy check even before do a signature verification if the request has expired (so signature validation would not be needed even). " created="2017-10-10 20:07:58.0" updateauthor="elli-androulaki" updated="2017-10-10 20:07:58.0"/>
<Action id="57384" issue="20677" author="denyeart" type="comment" created="2019-02-20 21:19:50.0" updateauthor="denyeart" updated="2019-02-20 21:19:50.0"> <body><! CDATA Confirmed that this works in the wild... a user has reported error: {code:java}  common.deliver  deliverBlocks -> WARN 07f Rejecting deliver for 172.20.0.1:42306 due to envelope validation error: envelope timestamp 2019-02-20 19:40:45.995 +0000 UTC is more than 15m0s apart from current server time 2019-02-19 15:03:37.2216412 +0000 UTC m=+64547.591463801{code}  ></body> </Action>
