<Issue id="36442" key="FAB-13464" number="13464" project="10002" reporter="akshay.sood" assignee="ashutosh_kumar" creator="akshay.sood" type="10004" summary="peer node start not working when PKCS11 set to BCCSP" priority="3" resolution="10203" status="6" created="2019-01-01 06:30:22.0" updated="2019-08-05 21:21:50.0" resolutiondate="2019-01-05 15:05:20.0" votes="0" watches="6" workflowId="47975"> <description><! CDATA I am trying to run network with SoftHSMv2 enabled. The certificates are generated using _fabric-ca._  *Directory Structure of certs:* {code:java} . ├── channel-artifacts │   ├── channel.tx │   ├── genesis.block │   └── Org1MSPanchors.tx ├── configtx.yaml ├── fabric-ca-client-config.yaml ├── msp │   ├── cacerts │   │   └── localhost-7054.pem │   ├── IssuerPublicKey │   ├── IssuerRevocationPublicKey │   ├── keystore │   ├── signcerts │   │   └── cert.pem │   └── user ├── orderer │   ├── admincerts │   │   └── cert.pem │   ├── cacerts │   │   └── localhost-7054.pem │   ├── IssuerPublicKey │   ├── IssuerRevocationPublicKey │   ├── keystore │   ├── signcerts │   │   └── cert.pem │   └── user └── peer0 ├── admincerts │   └── cert.pem ├── cacerts │   └── localhost-7054.pem ├── config.yaml ├── IssuerPublicKey ├── IssuerRevocationPublicKey ├── keystore ├── signcerts │   └── cert.pem └── user {code}    I installed softHSMv2 and created a token using the following command {code:java} softhsm2-util --init-token --slot 0 --label "Fabric" {code} SO Pin=1234  User Pin=1234     Generate the certs, channel artifacts as directed in *Steps to Reproduce* section. When you try to bootstrap your peer node, you will see the following error:    {code:java} $ peer node start 2019-01-01 12:02:20.520 IST  main  InitCmd -> ERRO 001 Cannot run peer because error when setting up MSP of type bccsp from directory /home/akshay/dev/fabric-ca/client/peer0: KeyMaterial not found in SigningIdentityInfo  {code}    *Version Info:*  _peer version:_ {code:java} $ peer version peer: Version: 1.4.0 Commit SHA: 99959b9 Go version: go1.11.2 OS/Arch: linux/amd64 Chaincode: Base Image Version: 0.4.14 Base Docker Namespace: hyperledger Base Docker Label: org.hyperledger.fabric Docker Namespace: hyperledger {code} _fabric-ca-client version:_ {code:java} $ fabric-ca-client version fabric-ca-client: Version: 1.4.0-snapshot-b191f9c Go version: go1.11.2 OS/Arch: linux/amd64 {code} _fabric-ca-server version:_ {code:java} $ fabric-ca-server version fabric-ca-server: Version: 1.4.0-snapshot-b191f9c Go version: go1.11.2 OS/Arch: linux/amd64 {code}    *How I build the binaries:*  _Fabric-CA:_  1. Clone repo by command: {code:java} git clone -b release-1.4 https://github.com/hyperledger/fabric-ca.git {code} 2.  Create builds {code:java} GO_TAGS=pkcs11 make fabric-ca-server {code} {code:java} GO_TAGS=pkcs11 make fabric-ca-client {code} _Peer, Orderer:_   1. Clone repo by command: {code:java} git clone -b release-1.4 https://github.com/hyperledger/fabric.git {code} 2.  Create builds {code:java} GO_TAGS=pkcs11 make peer {code} {code:java} GO_TAGS=pkcs11 make orderer {code}    The whole ca-server content & ca-client content and certs has been attached.      Please follow the *Steps to Reproduce* section.   EDIT:  Running peer with DEBUG logs available:     Logs =>  https://hastebin.com/irosobayis.sql      ></description> </Issue>
