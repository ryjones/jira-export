<Issue id="31489" key="FAB-10942" number="10942" project="10002" reporter="sykesm" creator="sykesm" type="10003" summary="Data race when running core/committer tests" priority="4" resolution="10000" status="6" created="2018-06-29 13:39:38.0" updated="2018-07-20 14:17:05.0" resolutiondate="2018-07-05 15:02:07.0" votes="0" watches="1" workflowId="42572"> <description><! CDATA {code:java} ================== WARNING: DATA RACE Read at 0x00c4230fcb80 by goroutine 61:   go.(*struct { *github.com/hyperledger/fabric/core/mocks/txvalidator.Support; *github.com/hyperledger/fabric/vendor/golang.org/x/sync/semaphore.Weighted }).Capabilities()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/mocks/txvalidator/support.go:38 +0x68   github.com/hyperledger/fabric/core/committer/txvalidator.(*TxValidator).validateTx()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/committer/txvalidator/validator.go:298 +0x62a   github.com/hyperledger/fabric/core/committer/txvalidator.(*TxValidator).Validate.func1.1()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/committer/txvalidator/validator.go:158 +0x10f  Previous write at 0x00c4230fcb80 by goroutine 60:   go.(*struct { *github.com/hyperledger/fabric/core/mocks/txvalidator.Support; *github.com/hyperledger/fabric/vendor/golang.org/x/sync/semaphore.Weighted }).Capabilities()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/mocks/txvalidator/support.go:38 +0x84   github.com/hyperledger/fabric/core/committer/txvalidator.(*TxValidator).validateTx()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/committer/txvalidator/validator.go:298 +0x62a   github.com/hyperledger/fabric/core/committer/txvalidator.(*TxValidator).Validate.func1.1()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/committer/txvalidator/validator.go:158 +0x10f  Goroutine 61 (running) created at:   github.com/hyperledger/fabric/core/committer/txvalidator.(*TxValidator).Validate.func1()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/committer/txvalidator/validator.go:155 +0x196  Goroutine 60 (running) created at:   github.com/hyperledger/fabric/core/committer/txvalidator.(*TxValidator).Validate.func1()       /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/committer/txvalidator/validator.go:155 +0x196{code} This is due to unlocked update of call count in the mocks  ></description> </Issue>
