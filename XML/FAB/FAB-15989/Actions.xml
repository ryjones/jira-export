<Action id="61947" issue="41256" author="jyellick" type="comment" body="Have you configured the PKCS11 parameters in `core.yaml` for the peer CLI? This should be a similar configuration as for your peer server process." created="2019-07-18 14:00:06.0" updateauthor="jyellick" updated="2019-07-18 14:00:06.0"/>
<Action id="61993" issue="41256" author="mfaisaltariq" type="comment" created="2019-07-19 21:02:50.0" updateauthor="mfaisaltariq" updated="2019-07-19 21:02:50.0"> <body><! CDATA For now I’m not using the CLI Container and I’m running the following command from the *Peer Container*. {code:java} peer channel create -o orderer0.fabric.linuxctl.com:7050 -c linuxctlchannel -f /data/channel-artifacts/linuxctlchannel.tx {code}   We have done the following things to get here.   1- Built our own images for *CA,Orderer* and *Peer* with softhsm installed and built the binaries using *GO_TAGS=PKCS11* config.  2- Changed *BCCSP* configuration to *PKCS11* in the fabric-ca-server-config.yaml, fabric-ca-client-config.yaml, core.yaml and orderer.yaml.  3- Started a network with *1-orderer, 1 org and peer*. The orderer and peer have their own ca-servers. We also start 2 fabric-*ca-client containers* to register orderer and peer and then they exit out. The keys and certificates are stored in docker volumes which are mapped on peer and orderer. We are using scripts from  here|https://github.com/gbolo/dockerfiles/tree/master/hyperledger-fabric/softhsm .  4- We get 2 errors. The logs of first one can be found  here|https://privatebin.net/?0772c9f64a850802#FiA67BCuwrS6LXtfwHf4cJGqHt25epyyaP3aVnAPnn5W   The second one is the error specified in the issue description and we encounter it if we set the MSP config path of the peer to {code:java} export CORE_PEER_MSPCONFIGPATH=/data/adminOrg1MSP/ {code} The logs can be found for the 2nd error  here|https://privatebin.net/?fe18e9518832d9ec#6YMcLXSwSCb8ZvgjiNhDgfCzi41B7mjetyC5dAx7dGzh   I hope now you have a better picture of what we are doing.  ></body> </Action>
<Action id="61994" issue="41256" author="mfaisaltariq" type="comment" body="The GitHub repo built is for HLF1.0 we have modified all the scripts and we use the HLF1.4.2 for building binaries, images and the config files." created="2019-07-19 21:04:32.0" updateauthor="mfaisaltariq" updated="2019-07-19 21:04:32.0"/>
<Action id="61999" issue="41256" author="jyellick" type="comment" created="2019-07-22 01:49:46.0" updateauthor="jyellick" updated="2019-07-22 01:49:46.0"> <body><! CDATA For the first error, what you have attached is the CLI logs.  The error returned by the orderer is deliberately opaque so as to prevent leaking identities of channel participants when an unauthorized user interrogates the channel.  If you could enable debug logging at the orderer and include the output of those logs during the window of the request it would be very helpful.  With respect to the second error, I think your problem lies here:  {code} 2019-07-19 13:18:48.999 UTC  bccsp_p11  getSession -> DEBU 02f Reusing existing pkcs11 session 1 on slot 771398831 2019-07-19 13:18:49.000 UTC  bccsp_p11  getECKey -> DEBU 030 Private key not found  Key not found  00000000  32 08 e9 37 17 b1 1d f7  a0 82 ad 4f f1 45 3f a9  |2..7.......O.E?.| 00000010  f4 34 ac f5 a2 8d 27 58  c2 cf b1 f3 fb e8 83 23  |.4....'X.......#| {code}  The connection to the HSM seems to be fine, but the peer cannot find the private key for the certificate in the HSM.  Are you certain that private key is there? How did you generate your admin user's certficate?  ></body> </Action>
<Action id="62004" issue="41256" author="mfaisaltariq" type="comment" created="2019-07-22 12:56:29.0" updateauthor="mfaisaltariq" updated="2019-07-22 12:56:29.0"> <body><! CDATA Hi Jason, thank you for all your help. Actually the admin certs were not being properly set. The admin certs were being replaced by the Peer Certs. So we fixed that. This  https://github.com/Blockdaemon/fabric-ca/blob/gerrit-pr-29430/docs/source/operations_guide.rst  link helped get to the root cause.  Now we are in a new problem. I'm not sure if I should open a new issue for it or not. But I'll post it here for now.     When we join the peer we get the following error.    {code:java} 2019-07-22 12:10:36.617 UTC  blocksProvider  DeliverBlocks -> ERRO 032  linuxctlchannel  Got error &{FORBIDDEN} 2019-07-22 12:10:36.731 UTC  blocksProvider  DeliverBlocks -> ERRO 033  linuxctlchannel  Got error &{FORBIDDEN} 2019-07-22 12:10:36.957 UTC  blocksProvider  DeliverBlocks -> ERRO 034  linuxctlchannel  Got error &{FORBIDDEN} 2019-07-22 12:10:37.374 UTC  blocksProvider  DeliverBlocks -> ERRO 035  linuxctlchannel  Got error &{FORBIDDEN} 2019-07-22 12:10:38.198 UTC  blocksProvider  DeliverBlocks -> ERRO 036  linuxctlchannel  Got error &{FORBIDDEN} 2019-07-22 12:10:39.809 UTC  blocksProvider  DeliverBlocks -> ERRO 037  linuxctlchannel  Got error &{FORBIDDEN} 2019-07-22 12:10:43.028 UTC  blocksProvider  DeliverBlocks -> ERRO 038  linuxctlchannel  Got error &{FORBIDDEN} 2019-07-22 12:10:49.407 UTC  blocksProvider  DeliverBlocks -> ERRO 039  linuxctlchannel  Got error &{FORBIDDEN} 2019-07-22 12:10:59.433 UTC  blocksProvider  DeliverBlocks -> ERRO 03a  linuxctlchannel  Got error &{FORBIDDEN} 2019-07-22 12:11:09.469 UTC  blocksProvider  DeliverBlocks -> ERRO 03b  linuxctlchannel  Got error &{FORBIDDEN} 2019-07-22 12:11:19.453 UTC  blocksProvider  DeliverBlocks -> ERRO 03c  linuxctlchannel  Got error &{FORBIDDEN} 2019-07-22 12:11:19.453 UTC  blocksProvider  DeliverBlocks -> ERRO 03d  linuxctlchannel  Wrong statuses threshold passed, stopping block provider {code}  Even with this error the chaincode gets installed and on listing installed chaincodes we have the chaincode there.  When we instantiate the chaincode it runs and creates the chaincode container too but on listing instantiated chaincodes we get empty list and obviously on running query and invocation we are getting status:500     ></body> </Action>
<Action id="62050" issue="41256" author="jyellick" type="comment" body=" ~mfaisaltariq  JIRA is intended to be a venue for opening issues for errors which are believed to be bugs in the implementation of Fabric, not for general troubleshooting or help.  If you&apos;d like to post more general questions, I&apos;d recommend using  stack overflow|https://stackoverflow.com/questions/tagged/hyperledger-fabric , the  mailing list|https://lists.hyperledger.org/g/fabric , or  rocket chat|http://chat.hyperledger.org ." created="2019-07-23 17:47:52.0" updateauthor="jyellick" updated="2019-07-23 17:47:52.0"/>
