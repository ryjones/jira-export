<Action id="40712" issue="27978" author="jyellick" type="comment" body="This error would indicate that the user you are performing the operation with is not authorized to read from the channel.  What do the orderer logs say?" created="2018-02-24 15:06:20.0" updateauthor="jyellick" updated="2018-02-24 15:14:11.0"/>
<Action id="40713" issue="27978" author="denyeart" type="comment" created="2018-02-24 15:08:17.0" updateauthor="denyeart" updated="2018-02-24 15:08:17.0"> <body><! CDATA I can reproduce easily in my local dev environment using:  peer channel fetch config -o 127.0.0.1:7050  ></body> </Action>
<Action id="40714" issue="27978" author="jyellick" type="comment" created="2018-02-24 15:12:27.0" updateauthor="jyellick" updated="2018-02-24 15:12:27.0"> <body><! CDATA FWIW:  {noformat} peer channel fetch config foo_config.pb -o 127.0.0.1:7050 -c testchainid {noformat}  works fine on my machine with the latest master.  Are there any more details to reproduce?  ></body> </Action>
<Action id="40715" issue="27978" author="latitiah" type="comment" body="I verified that the Admin user is being used for this command. I will add pointers to the logs in CI for examples of what is being seen." created="2018-02-24 15:16:30.0" updateauthor="latitiah" updated="2018-02-24 15:16:30.0"/>
<Action id="40717" issue="27978" author="jyellick" type="comment" created="2018-02-24 15:43:21.0" updateauthor="jyellick" updated="2018-02-24 15:43:21.0"> <body><! CDATA {quote} I verified that the Admin user is being used for this command. {quote}   ~latitiah  Can please be more specific.  The admin user for what org? And what channel are you targetting?  For instance, if a peer org admin to attempts to read configuration from the orderer system channel, I would expect this error.  ></body> </Action>
<Action id="40718" issue="27978" author="jyellick" type="comment" created="2018-02-24 15:47:32.0" updateauthor="jyellick" updated="2018-02-24 15:47:32.0"> <body><! CDATA From the orderer log  {noformat}  36m2018-02-24 03:04:20.453 UTC  common/deliver  deliverBlocks -> DEBU 2a6 0m Rejecting deliver for 172.18.0.7:36430 because channel behavesystest not found  36m2018-02-24 03:04:20.453 UTC  common/deliver  Handle -> DEBU 2a7 0m Waiting for new SeekInfo from 172.18.0.7:36430  36m2018-02-24 03:04:20.453 UTC  common/deliver  Handle -> DEBU 2a8 0m Attempting to read seek info message from 172.18.0.7:36430  36m2018-02-24 03:04:20.456 UTC  common/deliver  Handle -> DEBU 2a9 0m Received EOF from 172.18.0.7:36430, hangup  36m2018-02-24 03:04:20.456 UTC  orderer/common/server  func1 -> DEBU 2aa 0m Closing Deliver stream {noformat}  This the only rejection I can see, which implies to me that something went wrong earlier with your channel creation.  ></body> </Action>
<Action id="40719" issue="27978" author="muralisr" type="comment" created="2018-02-24 15:48:42.0" updateauthor="muralisr" updated="2018-02-24 15:48:42.0"> <body><! CDATA Worked for me with these steps using a non-testchainid channel  * start orderer ** ORDERER_GENERAL_GENESISPROFILE=SampleSingleMSPSolo ORDERER_GENERAL_LOGLEVEL=debug orderer * generateÂ channel tx ** configtxgen -profile SampleSingleMSPChannel -channelID myc -outputCreateChannelTx myc.tx * create channel ** peer channel create -c myc -f myc.tx -o 127.0.0.1:7050Â  * fetch config block ** peer channel fetch config foo_config.pb -o 127.0.0.1:7050 -c myc  If using wrong channel name, I get NOT_FOUND (and not FORBIDDEN) as expected.  {code:java} peer channel fetch config foo_config.pb -o 127.0.0.1:7050 -c mycwrong 2018-02-24 10:43:14.415 EST  channelCmd  InitCmdFactory -> INFO 001 Endorser and orderer connections initialized Error: can't read the block: &{NOT_FOUND} {code}  If using wrong MSPID, get FORBIDDEN  {code:java} CORE_PEER_LOCALMSPID=BADMSP peer channel fetch config foo_config.pb -o 127.0.0.1:7050 -c myc 2018-02-24 10:41:45.616 EST  channelCmd  InitCmdFactory -> INFO 001 Endorser and orderer connections initialized Error: can't read the block: &{FORBIDDEN} {code}  If using wrong MSP, get FORBIDDEN  {code:java} CORE_PEER_MSPCONFIGPATH=~/fabric_acl/crypto-config/org1/peer1/msp  peer channel fetch config foo_config.pb -o 127.0.0.1:7050 -c myc 2018-02-24 10:45:40.268 EST  msp  getMspConfig -> INFO 001 Loading NodeOUs 2018-02-24 10:45:40.287 EST  channelCmd  InitCmdFactory -> INFO 002 Endorser and orderer connections initialized Error: can't read the block: &{FORBIDDEN} {code}  I'd say the something has changed in the tests that messes up the MSP info.  ></body> </Action>
<Action id="40722" issue="27978" author="denyeart" type="comment" created="2018-02-24 16:10:04.0" updateauthor="denyeart" updated="2018-02-24 16:10:04.0"> <body><! CDATA In my case I forgot to add the -c flag for a channel, and received:  Error: can't read the block: &{NOT_FOUND}  How about if we use this Jira to improve the validation and error message?  ></body> </Action>
<Action id="40724" issue="27978" author="muralisr" type="comment" body=" ~denyeart  in that case the channel name &quot;&quot; is NOT_FOUND. Logically correct as omitting -c defaults to empty chanell ID. We might just want to fix it by insisting on providing a -c parameter. Perhaps for 1.2 ?" created="2018-02-24 17:06:50.0" updateauthor="muralisr" updated="2018-02-24 18:24:03.0"/>
<Action id="40727" issue="27978" author="latitiah" type="comment" body="It&apos;s possible this is due to a workaround change added to get around the FAB-8453 issue. I&apos;ll reinstate that code then test this again." created="2018-02-24 17:42:49.0" updateauthor="latitiah" updated="2018-02-24 17:42:49.0"/>
<Action id="40819" issue="27978" author="mastersingh24" type="comment" body="I can&apos;t reproduce this" created="2018-02-26 15:13:37.0" updateauthor="mastersingh24" updated="2018-02-26 15:13:37.0"/>
<Action id="40835" issue="27978" author="denyeart" type="comment" created="2018-02-26 16:06:21.0" updateauthor="denyeart" updated="2018-02-26 16:06:21.0"> <body><! CDATA Ok, we'll likely defer this to 1.2 and improve the validation and error message at that time.   ~latitiah  any final comments before we defer?  ></body> </Action>
<Action id="40869" issue="27978" author="latitiah" type="comment" created="2018-02-26 20:31:29.0" updateauthor="latitiah" updated="2018-02-26 20:31:29.0"> <body><! CDATA Once the fix for FAB-8453 was merged and the workaround removed, I was able to execute 'peer channel fetch config' successfully. It does seem that this defect was seen due to MSPID inconsistencies.   I'm fine with any changes made under this issue being deferred to a future release.  ></body> </Action>
<Action id="40870" issue="27978" author="denyeart" type="comment" body="Ok, will assess improved validation and error message in 1.2." created="2018-02-26 20:38:31.0" updateauthor="denyeart" updated="2018-02-26 20:38:31.0"/>
<Action id="43855" issue="27978" author="christopherferris" type="comment" body="This is no longer valid, closing" created="2018-05-04 16:28:52.0" updateauthor="christopherferris" updated="2018-05-04 16:28:52.0"/>
