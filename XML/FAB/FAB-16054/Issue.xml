<Issue id="41381" key="FAB-16054" number="16054" project="10002" reporter="nn77" creator="nn77" type="10004" summary="peer crashes" priority="3" resolution="10002" status="6" created="2019-07-24 13:55:56.0" updated="2019-08-19 15:24:28.0" resolutiondate="2019-08-13 18:39:00.0" votes="5" watches="4" workflowId="54388"> <description><! CDATA After problem in FAB-15564 was resolved I decided to update and check peer of 1.4.2.     All of updated peers have crash with following error: {code:java}  panic: runtime error: invalid memory address or nil pointer dereference  signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0xaed020  goroutine 15  running : github.com/hyperledger/fabric/protos/gossip.(*SecretEnvelope).InternalEndpoint(0x0, 0x40c4c3, 0x7fd5180890b8) /opt/gopath/src/github.com/hyperledger/fabric/protos/gossip/extensions.go:480 +0x40 github.com/hyperledger/fabric/gossip/discovery.newAliveMsgStore.func4(0x1243280, 0xc0093dbba0) /opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:1032 +0xfd github.com/hyperledger/fabric/gossip/gossip/msgstore.(*messageStoreImpl).expireMessages(0xc000307580) /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/msgstore/msgs.go:212 +0x34c github.com/hyperledger/fabric/gossip/gossip/msgstore.(*messageStoreImpl).expirationRoutine(0xc000307580) /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/msgstore/msgs.go:253 +0x141 created by github.com/hyperledger/fabric/gossip/gossip/msgstore.NewMessageStoreExpirable /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/msgstore/msgs.go:53 +0xb2 =============================================================================  panic: runtime error: invalid memory address or nil pointer dereference signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0xaed020 goroutine 59  running :github.com/hyperledger/fabric/protos/gossip.(*SecretEnvelope).InternalEndpoint(0x0, 0x40c445, 0x7f6e70118fe8)        /opt/gopath/src/github.com/hyperledger/fabric/protos/gossip/extensions.go:480 +0x40github.com/hyperledger/fabric/gossip/discovery.newAliveMsgStore.func4(0x1243280, 0xc0082ea170)        /opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:1032 +0xfdgithub.com/hyperledger/fabric/gossip/gossip/msgstore.(*messageStoreImpl).expireMessages(0xc000dd3500)        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/msgstore/msgs.go:212 +0x34cgithub.com/hyperledger/fabric/gossip/gossip/msgstore.(*messageStoreImpl).expirationRoutine(0xc000dd3500)        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/msgstore/msgs.go:253 +0x141created by github.com/hyperledger/fabric/gossip/gossip/msgstore.NewMessageStoreExpirable        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/msgstore/msgs.go:53 +0xb2{code}  ></description> </Issue>
