<Issue id="14187" key="FAB-1758" number="1758" project="10002" reporter="denyeart" assignee="denyeart" creator="denyeart" type="10004" summary="CouchDB tests fail when running all ledgers tests at once" priority="2" resolution="10000" status="6" created="2017-01-19 15:36:00.0" updated="2018-07-20 14:11:17.0" resolutiondate="2017-02-02 15:17:47.0" votes="0" watches="1" workflowId="37110"> <description><! CDATA When running tests that include a single couchdb package, all tests pass:  /fabric/core/ledger/kvledger/txmgmt/statedb$ go test ./... -cover ?   	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb	 no test files  ?   	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/commontests	 no test files  ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb	2.830s	coverage: 77.9% of statements ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/stateleveldb	0.078s	coverage: 82.5% of statements   When running tests for multiple packages that hit couchdb, the same tests fails:  /fabric/core/ledger/kvledger$ go test ./... -cover  2017/01/19 15:21:23 Couch DB error  status code=412  error={"error":"file_exists","reason":"The database could not be created, the file already exists."}  FAIL	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb	1.115s  Full log attached.  The tests fail in different places each time they are executed - must be a timing issue.  Perhaps there is a problem using the same chainid/database name and cleanup across tests?  Do the tests run in parallel?  ></description> </Issue>
