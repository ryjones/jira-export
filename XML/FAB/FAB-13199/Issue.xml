<Issue id="36011" key="FAB-13199" number="13199" project="10002" reporter="sykesm" assignee="guoger" creator="sykesm" type="10003" summary="Timeout running etcdraft chain_test" priority="2" resolution="10000" status="6" created="2018-12-09 14:47:50.0" updated="2019-03-19 10:57:44.0" resolutiondate="2019-01-29 03:58:18.0" votes="0" watches="3" workflowId="48796"> <description><! CDATA Onn current master  6f8d4cab7f8b3edb1beb29cae9af33d348964019 :  {code} panic: test timed out after 20m0s  goroutine 277  running : testing.(*M).startAlarm.func1() /usr/local/Cellar/go/1.11.2/libexec/src/testing/testing.go:1296 +0x13a created by time.goFunc /usr/local/Cellar/go/1.11.2/libexec/src/time/sleep.go:172 +0x52  goroutine 1  chan receive, 19 minutes : testing.(*T).Run(0xc0000ee300, 0x4e478cf, 0xc, 0x4e84a50, 0xc000345b01) /usr/local/Cellar/go/1.11.2/libexec/src/testing/testing.go:879 +0x689 testing.runTests.func1(0xc0000ee300) /usr/local/Cellar/go/1.11.2/libexec/src/testing/testing.go:1119 +0xa9 testing.tRunner(0xc0000ee300, 0xc000345d20) /usr/local/Cellar/go/1.11.2/libexec/src/testing/testing.go:827 +0x163 testing.runTests(0xc0000b39e0, 0x57ec080, 0x9, 0x9, 0xc000345dc8) /usr/local/Cellar/go/1.11.2/libexec/src/testing/testing.go:1117 +0x4ef testing.(*M).Run(0xc000460080, 0x0) /usr/local/Cellar/go/1.11.2/libexec/src/testing/testing.go:1034 +0x2ef main.main() _testmain.go:118 +0x333  goroutine 83  semacquire, 16 minutes : sync.runtime_Semacquire(0xc000592258) /usr/local/Cellar/go/1.11.2/libexec/src/runtime/sema.go:56 +0x39 sync.(*WaitGroup).Wait(0xc000592250) /usr/local/Cellar/go/1.11.2/libexec/src/sync/waitgroup.go:130 +0xb5 github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.(*network).start(0xc00047f400, 0xc000402ef0, 0x2, 0x2) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:2281 +0x13f github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.glob..func1.3.3.1() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1174 +0xf9 github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*runner).runSync(0xc000091e60, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/runner.go:110 +0xbe github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*runner).run(0xc000091e60, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/runner.go:64 +0x16b github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*ItNode).Run(0xc0000b3680, 0x4f8cbe0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/it_node.go:26 +0xa3 github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec.(*Spec).runSample(0xc00049b0e0, 0x0, 0x4f8cbe0, 0xc000173890) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec/spec.go:203 +0x767 github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec.(*Spec).Run(0xc00049b0e0, 0x4f8cbe0, 0xc000173890) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec/spec.go:138 +0x146 github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).runSpec(0xc0001e9a40, 0xc00049b0e0, 0x0) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:198 +0x173 github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).runSpecs(0xc0001e9a40, 0x4e85e01) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:168 +0x4ae github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).Run(0xc0001e9a40, 0xe) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:64 +0x10b github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/suite.(*Suite).Run(0xc0000d50e0, 0x92d03c0, 0xc0000eee00, 0x4e48ea1, 0xe, 0xc000567530, 0x1, 0x1, 0x4fa34a0, 0xc000173890, ...) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/suite/suite.go:62 +0x3e2 github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo.RunSpecsWithCustomReporters(0x4f8d660, 0xc0000eee00, 0x4e48ea1, 0xe, 0xc000067f18, 0x1, 0x1, 0x20) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/ginkgo_dsl.go:220 +0x368 github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo.RunSpecs(0x4f8d660, 0xc0000eee00, 0x4e48ea1, 0xe, 0x0) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/ginkgo_dsl.go:201 +0x9a github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.TestEtcdraft(0xc0000eee00) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/etcdraft_suite_test.go:20 +0x120 testing.tRunner(0xc0000eee00, 0x4e84a50) /usr/local/Cellar/go/1.11.2/libexec/src/testing/testing.go:827 +0x163 created by testing.(*T).Run /usr/local/Cellar/go/1.11.2/libexec/src/testing/testing.go:878 +0x651  goroutine 9  syscall, 20 minutes : os/signal.signal_recv(0x40628a1) /usr/local/Cellar/go/1.11.2/libexec/src/runtime/sigqueue.go:139 +0x9f os/signal.loop() /usr/local/Cellar/go/1.11.2/libexec/src/os/signal/signal_unix.go:23 +0x30 created by os/signal.init.0 /usr/local/Cellar/go/1.11.2/libexec/src/os/signal/signal_unix.go:29 +0x4f  goroutine 84  chan receive, 19 minutes : github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).registerForInterrupts(0xc0001e9a40) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:220 +0xe6 created by github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).Run /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:59 +0x89  goroutine 86  select, 19 minutes : github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal.(*filePipeline).run(0xc000502080) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal/file_pipeline.go:89 +0x1ab created by github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal.newFilePipeline /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal/file_pipeline.go:47 +0x1d3  goroutine 87  select : github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/raft.(*node).run(0xc00070e6c0, 0xc0000ef300) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/raft/node.go:313 +0x53a created by github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/raft.StartNode /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/raft/node.go:210 +0x50c  goroutine 88  select : github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).serveRaft(0xc0001806c0) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:624 +0x2c4 created by github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).Start /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:246 +0x5ba  goroutine 89  select, 19 minutes : github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).serveRequest(0xc0001806c0) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:440 +0x58b created by github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).Start /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:247 +0x5df  goroutine 256  select, 17 minutes : github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal.(*filePipeline).run(0xc00047e340) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal/file_pipeline.go:89 +0x1ab created by github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal.newFilePipeline /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal/file_pipeline.go:47 +0x1d3  goroutine 292  select, 16 minutes : github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).serveRaft(0xc0000e4900) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:624 +0x2c4 created by github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).Start /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:246 +0x5ba  goroutine 236  chan send, 17 minutes : github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.glob..func1.2.7.11.3.5.2(0xc000041560, 0xc000205a00) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:854 +0x87 created by github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.glob..func1.2.7.11.3.5 /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:853 +0x6aa  goroutine 306  select, 16 minutes : github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal.(*filePipeline).run(0xc00017e2c0) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal/file_pipeline.go:89 +0x1ab created by github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal.newFilePipeline /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal/file_pipeline.go:47 +0x1d3  goroutine 269  select, 17 minutes : github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal.(*filePipeline).run(0xc00017f580) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal/file_pipeline.go:89 +0x1ab created by github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal.newFilePipeline /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal/file_pipeline.go:47 +0x1d3  goroutine 223  select, 16 minutes : github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/raft.(*node).run(0xc00027c7e0, 0xc00045aa00) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/raft/node.go:313 +0x53a created by github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/raft.StartNode /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/raft/node.go:210 +0x50c  goroutine 225  select, 16 minutes : github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).serveRequest(0xc0000e46c0) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:440 +0x58b created by github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).Start /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:247 +0x5df  goroutine 224  select, 16 minutes : github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).serveRaft(0xc0000e46c0) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:624 +0x2c4 created by github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).Start /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:246 +0x5ba  goroutine 291  select, 16 minutes : github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/raft.(*node).run(0xc000544120, 0xc000205000) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/raft/node.go:313 +0x53a created by github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/raft.StartNode /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/raft/node.go:210 +0x50c  goroutine 276  select, 16 minutes : github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal.(*filePipeline).run(0xc00047e4c0) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal/file_pipeline.go:89 +0x1ab created by github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal.newFilePipeline /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal/file_pipeline.go:47 +0x1d3  goroutine 274  select, 16 minutes : github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal.(*filePipeline).run(0xc0000312c0) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal/file_pipeline.go:89 +0x1ab created by github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal.newFilePipeline /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/coreos/etcd/wal/file_pipeline.go:47 +0x1d3  goroutine 293  select, 16 minutes : github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).serveRequest(0xc0000e4900) /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:440 +0x58b created by github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).Start /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:247 +0x5df FAIL    github.com/hyperledger/fabric/orderer/consensus/etcdraft        1201.230s {code}  /cc  ~kchristidis   ></description> </Issue>
