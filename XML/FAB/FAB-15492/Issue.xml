<Issue id="39962" key="FAB-15492" number="15492" project="10002" reporter="manish-sethi" creator="manish-sethi" type="10002" summary="Reformat private data transient store to v1.4 value encoding (and remove code for supporting old formatting)" priority="3" resolution="10001" status="6" created="2019-05-21 04:59:38.0" updated="2019-10-28 13:39:32.0" resolutiondate="2019-10-28 13:39:32.0" votes="0" watches="2" workflowId="52860"> <description><! CDATA While adding the support for update to private data collection configuration, we needed to persist additional information in the transient store. As a result, the code for transient store happen to maintain both old and new value format - https://github.com/hyperledger/fabric/blob/86f87ebcd8a1819e3832b289f2d94d4a88bb6e05/core/transientstore/store.go.  Unless no block commit has happened in a network for very long after an upgrade to (v1.2 ?) , most likely the old formatted data in transient store should already be purged. Still, for the safety of not hitting into an unmarshaling error, it would require dropping the transient store.   However, this is going to be a bit tricky because we do not want to drop the entire transient store as this may cause the data loss for in flight transactions. So, it would require a special code that runs at startup of transient store and transforms the old formatted entries to new (if found).  ></description> </Issue>
