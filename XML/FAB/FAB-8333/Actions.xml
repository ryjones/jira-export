<Action id="40298" issue="27794" author="jyellick" type="comment" body="It seems like this exposes fabric to some potential DoS style attacks.  Given the usage of this API is so limited, I&apos;d be inclined to lean towards pushing a fix now if it is reasonably simple." created="2018-02-16 16:43:14.0" updateauthor="jyellick" updated="2018-02-16 16:43:14.0"/>
<Action id="40302" issue="27794" author="denyeart" type="comment" body="If we are going to be changing/securing APIs, I would rather do it sooner than later when there are fewer consumers." created="2018-02-16 18:17:39.0" updateauthor="denyeart" updated="2018-02-16 18:17:39.0"/>
<Action id="40311" issue="27794" author="mastersingh24" type="comment" created="2018-02-16 22:24:21.0" updateauthor="mastersingh24" updated="2018-02-16 22:24:21.0"> <body><! CDATA The first thing which should be done is to make the endpoint for the admin service configurable and give it a different default address than the endorser service (e.g. localhost:7055 or something)  There's no reason not to actually just get rid of the current service altogether .... the only useful thing is the ability to get/set logging levels remotely.  I'm not sure about typing this to the MSP structure .... need to give that some thought   ></body> </Action>
<Action id="40313" issue="27794" author="yacovm" type="comment" created="2018-02-17 00:20:17.0" updateauthor="yacovm" updated="2018-02-17 01:05:15.0"> <body><! CDATA {quote}The first thing which should be done is to make the endpoint for the admin service configurable and give it a different default address than the endorser service (e.g. localhost:7055 or something){quote} If the user mis-configures the endpoint by mistake, it leaves its peer completely exposed to denial of service attacks, as Jason correctly said. Just as an example - I can craft a special message and make the peer's CPU usage to spike for a few seconds just by changing a few lines in the peer CLI: {code} PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND 21197 root      20   0 4103184 3.545g  11136 R  66.1 36.4   0:40.35 peer                               {code} I'm sure that if a malicious user does this from several terminals / threads - it effectively chokes the peer's CPU. Also - I think that the system needs to provide a complete solution and not expect users to supply their own defenses in the forms of firewalls, and network interfaces. I thought that people say that if you use blockchain, you're secure, no? ;)  {quote}There's no reason not to actually just get rid of the current service altogether{quote} But then where do we put FAB-8335 ? We don't have any service that provides administrative APIs.  {quote}the only useful thing is the ability to get/set logging levels remotely.{quote} Right, so you want to get rid of it now? Don't we need this capability?  {quote}I'm not sure about typing this to the MSP structure{quote} I think that the local MSP is in fact pretty simple, and is always an x509 one - so what's wrong with using it for evaluating admin signatures? They come with the peer anyway, and this has been used long ago since the start of the project...   Meanwhile, I implemented access control for the admin service and  pushed a CR|https://gerrit.hyperledger.org/r/#/c/17985/  that has 100% code coverage for the server-side code. I'll see where this discussion goes and will finish the client side if needed.  ></body> </Action>
<Action id="40318" issue="27794" author="mastersingh24" type="comment" created="2018-02-17 10:56:46.0" updateauthor="mastersingh24" updated="2018-02-17 10:56:46.0"> <body><! CDATA Chatted with  ~yacovm  on this ... concerns I have are actually orthogonal to this one. I do still think we should run the admin service on a different listener though  ></body> </Action>
<Action id="40319" issue="27794" author="yacovm" type="comment" body="Yes, it makes sense to do that since the 7051 listener&apos;s client TLS CA cert pool is also contaminated by the channel wide TLS client root CA certs" created="2018-02-17 11:06:31.0" updateauthor="yacovm" updated="2018-02-17 11:06:50.0"/>
<Action id="40323" issue="27794" author="yacovm" type="comment" created="2018-02-17 13:23:37.0" updateauthor="yacovm" updated="2018-02-17 15:05:08.0"> <body><! CDATA The CR is ready: https://gerrit.hyperledger.org/r/#/c/17985/  I tested that it works with admin, and doesn't work with none-admin certificates: !Capture2.PNG|thumbnail!   ></body> </Action>
<Action id="40328" issue="27794" author="yacovm" type="comment" created="2018-02-17 14:55:52.0" updateauthor="yacovm" updated="2018-02-17 15:05:48.0"> <body><! CDATA {quote}I do still think we should run the admin service on a different listener though {quote} I pushed a new  change set|https://gerrit.hyperledger.org/r/#/c/18007/  that takes care of that. By  default|https://gerrit.hyperledger.org/r/#/c/18007/1/sampleconfig/core.yaml@351 , the admin server still runs with the endorser's gRPC server, however if defined otherwise it can run with its own listener.  Â   !Capture.PNG|thumbnail!  ></body> </Action>
<Action id="40430" issue="27794" author="yacovm" type="comment" created="2018-02-20 17:34:14.0" updateauthor="yacovm" updated="2018-02-20 17:34:14.0"> <body><! CDATA  ~denyeart  https://gerrit.hyperledger.org/r/#/c/17985/ is based on top of https://gerrit.hyperledger.org/r/#/c/17981/ which I abandoned in light of your comment.  Is there a point in rebasing it on top of the master branch? I'll only do that if it *100% goes in for v1.1*  ></body> </Action>
<Action id="40562" issue="27794" author="yacovm" type="comment" body="I&apos;ll try to re-promote this again for v1.2 after v1.1 is cut " created="2018-02-22 14:03:24.0" updateauthor="yacovm" updated="2018-02-22 14:03:24.0"/>
<Action id="42010" issue="27794" author="denyeart" type="comment" body="Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale." created="2018-03-23 05:07:54.0" updateauthor="denyeart" updated="2018-03-23 05:07:54.0"/>
<Action id="42070" issue="27794" author="jyellick" type="comment" body="As this is a security issue, we should address this in v1.2." created="2018-03-23 14:04:52.0" updateauthor="jyellick" updated="2018-03-23 14:04:52.0"/>
<Action id="42083" issue="27794" author="yacovm" type="comment" body=" ~jyellick  I rebased all 3 change sets (use envelopes + move to separate package + use different listener)" created="2018-03-23 15:26:19.0" updateauthor="yacovm" updated="2018-03-23 15:26:19.0"/>
