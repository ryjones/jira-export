<Issue id="27794" key="FAB-8333" number="8333" project="10002" reporter="yacovm" assignee="yacovm" creator="yacovm" type="10001" summary="Peer admin API should only be usable by admins" priority="3" resolution="10000" status="6" created="2018-02-16 13:13:16.0" updated="2018-07-20 18:47:57.0" resolutiondate="2018-03-31 11:10:29.0" votes="3" watches="6" workflowId="41264" security="10000"> <description><! CDATA The peer has an admin API which performs administrative operations such as: * Faking starting the peer * Returning the peer is up * Returning the log severity of a given module * Setting the log severity of a given module * Setting the log severity of all modules to default  These API methods are exposed on the same port and interface as the endorser service. * When the peer is configured to use TLS without requiring clients to authenticate via mutual TLS, any one that doesn't have any certificate or identity, can invoke these methods. * When the peer is configured to verify client certificates via mutual TLS, any client that has a TLS certificate that is issued by any organization in the channel, can invoke any of these methods.  I think, that only an admin should be able to invoke these methods, specifically - the be able to change the logging level.  The reason is several modules, such as gossip and msp - have high verbosity and log lots of information and that might make the disk space run out eventually, which is bad.  Something related to the topic of the admin API:  I think it makes sense to add to the admin API a method that makes the peer dump its stack trace into the log. This is useful for highly secure and isolated environments where no one can get into, but if there is a problem like a deadlock or something similar, having the stack trace in the log is very useful to troubleshoot.  Therefore, I propose: # To enforce admin authentication in the peer's admin API, meaning - to extend the protobuf message(s) to include credentials and a proof of credentials (a signature + a timestamp, to prevent replay). The signature should be only verifiable by a peer administrator of the local MSP. # To add a new method to the admin gRPC API ( see FAB-8335) that would make the peer dump its stack trace into the stdout.  Attached below an invocation example: !Capture3.PNG|thumbnail!  ></description> </Issue>
