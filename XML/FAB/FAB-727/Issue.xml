<Issue id="13031" key="FAB-727" number="727" project="10002" reporter="nishi" creator="nishi" type="10004" summary="Disk Full when running a longrun test" priority="3" resolution="10000" status="6" created="2016-10-17 15:13:43.0" updated="2018-07-20 14:10:29.0" resolutiondate="2016-10-24 15:36:25.0" votes="0" watches="1" workflowId="36469"> <description><! CDATA Scheduled a longrun test for 3days to find that test exited with following message:  "POST /chaincode returned code =-32002 message=Invocation failure data=Error when invoking chaincode: database or disk is full"  Checked for disk space inside docker container on a peer, and also space on vagrant, it was found that there was enough space on both container inside docker and vagrant systems.  Ran: vagrant@hyperledger-devenv:v0.0.11-a80038d:/opt/gopath/src/github.com/hyperledger/fabric/vendor/release-criteria/svt/longruns$ docker exec -it PEER0 bash  Issued a Query from inside docker container: root@37544e83a44a:/opt/gopath/src/github.com/hyperledger/fabric# peer chaincode query -n -u test_user0 e383d45384dce3722b9e38c07637f0f7a8ac743ce30bb959ff9f5b025ffd9297ab67dbc78e03a165b3059580bfde4e6fafc7856a6484f1f4c5d6c4ed34f2dcf4  Result from above command: 14:38:41.058  chaincodeCmd  getChaincodeSpecification -> INFO 002 Local user 'test_user0' is already logged in. Retrieving login token. 14:38:41.058  chaincodeCmd  getChaincodeSpecification -> INFO 003 Set confidentiality level to CONFIDENTIAL. 14:38:41.202  chaincodeCmd  chaincodeInvokeOrQuery -> INFO 004 Successfully queried transaction: chaincodeSpec:<type:GOLANG chaincodeID:<name:"e383d45384dce3722b9e38c07637f0f7a8ac743ce30bb959ff9f5b025ffd9297ab67dbc78e03a165b3059580bfde4e6fafc7856a6484f1f4c5d6c4ed34f2dcf4" > ctorMsg:<args:"query" args:"counter" > secureContext:"test_user0" confidentialityLevel:CONFIDENTIAL >  Query Result: 8000  Looks like program exited only after 8000 tx in long run, which does not seem right.  Issuing df -h from docker container:  root@37544e83a44a:/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com# df -h Filesystem      Size  Used Avail Use% Mounted on none             39G   11G   27G  29% / tmpfs           2.0G     0  2.0G   0% /dev tmpfs           2.0G     0  2.0G   0% /sys/fs/cgroup /dev/sda1        39G   11G   27G  29% /etc/hosts shm              64M     0   64M   0% /dev/shm  Displayed that there was enough disk space inside docker container:  From outside docker container:  vagrant@hyperledger-devenv:v0.0.11-a80038d:/opt/gopath/src/github.com/hyperledger/fabric/vendor/release-criteria/svt/longruns$ df -h Filesystem      Size  Used Avail Use% Mounted on udev            2.0G  4.0K  2.0G   1% /dev tmpfs           396M  664K  395M   1% /run /dev/sda1        39G   11G   27G  29% / none            4.0K     0  4.0K   0% /sys/fs/cgroup none            5.0M     0  5.0M   0% /run/lock none            2.0G  956K  2.0G   1% /run/shm none            100M     0  100M   0% /run/user none            443G  212G  232G  48% /vagrant none            443G  212G  232G  48% /local-dev none            443G  212G  232G  48% /hyperledger none            443G  212G  232G  48% /opt/gopath/src/github.com/hyperledger/fabric   Not sure how the test program ran into disk space full error.   ></description> </Issue>
