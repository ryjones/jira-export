<Action id="35546" issue="21299" author="rennman" type="comment" created="2017-11-27 23:39:41.0" updateauthor="rennman" updated="2017-11-27 23:39:41.0"> <body><! CDATA Understandably, this cannot be reliably UT'ed given that version information is only set generated for a make build. It makes sense to merely add a checkVersion() function to the CI. Since the CI for fabric-ca is already performing a 'make' for all of the executables, it's trivial to add a check: {code:java} function checkVersion() { awk -v ver=$1 \ -v rc=1 \ '$1=="Version:" && $NF==ver {rc=0} END {exit rc}' }  base_version=$(awk '/^ :blank: *BASE_VERSION/ {print $NF}' Makefile) extra_version="snapshot-$(git rev-parse --short HEAD)" project_version=${base_version}-${extra_version}  $FABRIC_CA/bin/fabric-ca-server version | checkVersion "$project_version" || <FAIL> $FABRIC_CA/bin/fabric-ca-client version | checkVersion "$project_version" || <FAIL>{code} whatever <FAIL> entails  ></body> </Action>
<Action id="35950" issue="21299" author="rennman" type="comment" body=" Version command test|https://gerrit.hyperledger.org/r/#/c/16001/ " created="2017-12-06 19:52:04.0" updateauthor="rennman" updated="2017-12-06 19:52:04.0"/>
<Action id="37013" issue="21299" author="rennman" type="comment" body="Blocked by https://gerrit.hyperledger.org/r/#/c/15999/" created="2017-12-12 22:56:16.0" updateauthor="rennman" updated="2017-12-12 22:56:16.0"/>
<Action id="38921" issue="21299" author="mastersingh24" type="comment" body="This seems like overkill as we can simply do this in unit tests but no harm done" created="2018-01-20 10:13:56.0" updateauthor="mastersingh24" updated="2018-01-20 10:13:56.0"/>
