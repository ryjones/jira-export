<Issue id="43628" key="FAB-17216" number="17216" project="10002" reporter="scottz" assignee="bharadwajambati1" creator="scottz" type="10002" summary="Fine-tune Verify and Daily Jobs in fabric-test for efficiency and more test coverage" priority="2" resolution="10000" status="6" created="2019-12-06 14:26:21.0" updated="2020-03-17 14:45:00.0" resolutiondate="2020-01-21 18:30:29.0" votes="0" watches="1" workflowId="57476"> <description><! CDATA I linked this to the transition epic, as we move to Azure, because it is more important now to reduce the length of time required to run the jobs, since it takes longer in Azure. And we should improve the test coverage too. We may want to break this up into separate tasks...     Reduce time and coverage of verify job in fabric-test. Currently the smoke test executes a test using operator, in regression/smoke/ directory, and one of the tests using NL+PTE from the regression/daily/ directory. The NL+PTE test from the daily directory takes about 15 minutes. We should run a different one, that uses the NL to launch a network and uses PTE to send only a few transactions (5 to 10 per 2 threads, 1 channel). The goal of the verify job is to verify the basic functionality of NL and PTE, not to test fabric.  Also, the smoke test should use raft instead of kafka. And most of the tests in the daily suite should be converted to raft too. Suggest to convert all smoke and daily NL+PTE tests to use raft except for two to remain kafka:  test_FAB3833_2i_FAB3810_2q and test_FAB3808_2i_FAB3811_2q  Change two of the daily NL+PTE tests to use SampleJava chaincode: FAB3832_FAB3834 and FAB3807_FAB3835. Others use go or nodejs language already.  Add a samplejava testcase to the k8s systest suites, probably for raft network.  And (to provide coverage similar to 8384 or 8414), change some existing tests to require multiple endorsements; suggestion is to change one in the NL+PTE daily suite such as test_FAB3808_2i_FAB3811_2q, plus samplejs_2chan in the k8s systest suite (SBE_go_2chan in the systest suite already used 2 endorsements).  And add the SBE test to the k8s raft network-spec test suite. It is currently only run with one kafka network. That way, when we remove the kafka network next year, we won't have to move tests around. Everything in the kafka network test suite should be run in the raft network too.  ></description> </Issue>
