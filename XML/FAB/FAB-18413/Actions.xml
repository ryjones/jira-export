<Action id="71341" issue="46533" author="sykesm" type="comment" created="2021-02-03 15:25:34.0" updateauthor="sykesm" updated="2021-02-03 15:25:34.0"> <body><! CDATA This is related to npm install changes.  {code} ➜  node git:(release-1.4) ✗ docker run --rm -it hyperledger/fabric-baseimage:0.4.22 /bin/bash root@45dc91e60d4b:/# npm install -g npm@latest /usr/local/bin/npm -> /usr/local/lib/node_modules/npm/bin/npm-cli.js /usr/local/bin/npx -> /usr/local/lib/node_modules/npm/bin/npx-cli.js + npm@7.5.2 added 59 packages from 30 contributors, removed 235 packages and updated 195 packages in 5.299s root@45dc91e60d4b:/# npm TypeError: Cannot destructure property `stat` of 'undefined' or 'null'. at Object.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/@npmcli/node-gyp/lib/index.js:2:29) at Module._compile (module.js:653:30) at Object.Module._extensions..js (module.js:664:10) at Module.load (module.js:566:32) at tryModuleLoad (module.js:506:12) at Function.Module._load (module.js:498:3) at Module.require (module.js:597:17) at require (internal/module.js:11:18) at Object.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/run-script-pkg.js:4:55) at Module._compile (module.js:653:30) /usr/local/lib/node_modules/npm/node_modules/@npmcli/config/lib/index.js:163 throw new Error('call config.load() before reading values') ^  Error: call config.load() before reading values at Config.get (/usr/local/lib/node_modules/npm/node_modules/@npmcli/config/lib/index.js:163:13) at process.errorHandler (/usr/local/lib/node_modules/npm/lib/utils/error-handler.js:171:32) at emitOne (events.js:116:13) at process.emit (events.js:211:7) at process._fatalException (bootstrap_node.js:391:26) root@45dc91e60d4b:/# exit ➜  node git:(release-1.4) ✗ {code}   The install is being done by images/ccenv/Dockerfile.in {code} RUN npm install -g npm@latest {code}   ></body> </Action>
<Action id="71342" issue="46533" author="sykesm" type="comment" body="see https://github.com/npm/cli/issues/2599" created="2021-02-03 15:27:13.0" updateauthor="sykesm" updated="2021-02-03 15:27:13.0"/>
<Action id="71343" issue="46533" author="sykesm" type="comment" body="https://github.com/hyperledger/fabric/pull/2350" created="2021-02-03 15:51:13.0" updateauthor="sykesm" updated="2021-02-03 15:51:13.0"/>
<Action id="71351" issue="46533" author="denyeart" type="comment" created="2021-02-04 16:50:07.0" updateauthor="denyeart" updated="2021-02-04 16:50:07.0"> <body><! CDATA Fabric v1.4.x node chaincode build will experience this issue when using ccenv through version 1.4.10.  In peer log it is reported as follows:       {code:java} 2021-02-04 11:44:17.131 EST  endorser  SimulateProposal -> ERRO 03f  mychannel  b0cb7db2  failed to invoke chaincode name:"lscc" , error: Failed to generate platform-specific docker build: Error returned from build: 7 "TypeError: Cannot destructure property `stat` of 'undefined' or 'null'. at Object.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/@npmcli/node-gyp/lib/index.js:2:29) at Module._compile (module.js:653:30) at Object.Module._extensions..js (module.js:664:10) at Module.load (module.js:566:32) at tryModuleLoad (module.js:506:12) at Function.Module._load (module.js:498:3) at Module.require (module.js:597:17) at require (internal/module.js:11:18) at Object.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/run-script-pkg.js:4:55) at Module._compile (module.js:653:30) /usr/local/lib/node_modules/npm/node_modules/@npmcli/config/lib/index.js:163 throw new Error('call config.load() before reading values') ^ Error: call config.load() before reading values at Config.get (/usr/local/lib/node_modules/npm/node_modules/@npmcli/config/lib/index.js:163:13) at process.errorHandler (/usr/local/lib/node_modules/npm/lib/utils/error-handler.js:171:32) at emitOne (events.js:116:13) at process.emit (events.js:211:7) at process._fatalException (bootstrap_node.js:391:26) " error starting container error starting container {code}    ></body> </Action>
