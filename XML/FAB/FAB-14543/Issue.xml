<Issue id="38299" key="FAB-14543" number="14543" project="10002" reporter="guoger" assignee="guoger" creator="guoger" type="10001" summary="When leader is removed from network, it should yield leadership first before stop" priority="3" resolution="10000" status="6" created="2019-03-08 10:05:07.0" updated="2019-07-09 14:06:06.0" resolutiondate="2019-07-09 14:06:06.0" votes="0" watches="1" workflowId="53425"> <description><! CDATA If the removal of leader would cause the loss of quorum, raft protocol requires it to be connected after the removal, until other nodes commit this conf change. For more details, see Raft thesis 4.2.2 section.  when leader is being removed in a 2-node cluster, if communication leader is reconfigured too early before follower commits the config change, the system non-functional, even after reboot (because ex-leader finds it self not among consenters, therefore not started).  We should do following: - On leader: transfer leadership when leader is removed/rotated, this should be retried till success. (It cannot service channel during/after this transition anyway) - On Follower: wait for leadership transfer for a period of time, and configure communication. (it's fine not to wait indefinitely on followers, because at this point, it already picks up the config change - When an orderer is started, it should still start the raft chain even if it's not among consenter set, when the last block is config block and removes itself.  First two are easy, but the third changes bootstrap logic considerably. Short term solution would be tackling FAB-14714  ></description> </Issue>
