<Issue id="36586" key="FAB-13580" number="13580" project="10002" reporter="baohua" assignee="baohua" creator="baohua" type="10002" summary="Peer should not panic when join a higher-capability channel" priority="3" resolution="10000" status="6" created="2019-01-09 02:29:57.0" updated="2019-02-02 10:20:39.0" resolutiondate="2019-02-02 10:20:39.0" votes="0" watches="2" workflowId="48131"> <description><! CDATA Currently, when a old version peer wanna join a newer version channel, the peer will panic and exit.  However, the local ledger structure for that channel has already been created.  Hence, when the peer restarts, it will go into the panic-restart loop again, e.g.,  ```  UTC  peer  capabilitiesSupportedOrPanic -> CRIT 0d2  channel &{ .... incompatible Application capability V1_3 is required but not supported UTC  peer  capabilitiesSupportedOrPanic -> CRIT 051  channel &{ .... incompatible Application capability V1_3 is required but not supported UTC  peer  capabilitiesSupportedOrPanic -> CRIT 051  channel &{ .... incompatible Application capability V1_3 is required but not supported  ```  A potential improvement could be when a peer joins a channel, it first check the channel capabilities requirement.  If cannot meet the requirement, then return reject to the client before creating the local ledger structure.  Overall, we need some graceful reaction instead of the panic considering production usage.  ></description> </Issue>
