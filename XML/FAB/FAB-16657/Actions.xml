<Action id="64133" issue="42421" author="bharadwajambati1" type="comment" created="2019-09-25 18:22:22.0" updateauthor="bharadwajambati1" updated="2019-09-25 18:22:22.0"> <body><! CDATA Tested with the latest changes in fabric-samples/chaincode/abstore/java and observed the following errors while running the JavaSDK interoperability test using Java chaincode shim {code:java} steps/basic_impl.py:24 When a user "scott" queries on the chaincode with args  "query","a"  from "peer0.org2.example.com"                                                                  # steps/endorser_impl.py:546 Exception in thread "main" org.hyperledger.fabric.sdk.exception.InvalidArgumentException: Proposal response is invalid. 	at org.hyperledger.fabric.sdk.ProposalResponse.getChaincodeActionResponsePayload(ProposalResponse.java:272) 	at org.hyperledger.fabric_test.operations.PeerOperations.sendQuery(PeerOperations.java:347) 	at org.hyperledger.fabric_test.operations.PeerOperations.run(PeerOperations.java:179) 	at org.hyperledger.fabric_test.operations.PeerOperations.main(PeerOperations.java:112) Traceback (most recent call last): File "/usr/local/lib/python2.7/dist-packages/behave/model.py", line 1329, in run match.run(runner.context) File "/usr/local/lib/python2.7/dist-packages/behave/matchers.py", line 98, in run self.func(context, *args, **kwargs) File "steps/endorser_impl.py", line 548, in step_impl query_impl(context, context.interface.TEST_CHANNEL_ID, context.chaincode "name" , args, str(peer), user=user) File "steps/endorser_impl.py", line 464, in query_impl context.result = context.interface.query_chaincode(context, chaincode, peer, channel, targs, user=user, opts=opts) File "/w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/steps/endorser_util.py", line 362, in query_chaincode result = self.query_func(chaincode, channelId, user, org,  peer , opts) File "/w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/steps/endorser_util.py", line 487, in query_func answer = subprocess.check_output(query_call, shell=True) File "/usr/lib/python2.7/subprocess.py", line 574, in check_output raise CalledProcessError(retcode, cmd, output=output) subprocess.CalledProcessError: Command 'java -jar /w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/sdk/java/peer-javasdk.jar -o query -n peer0.org2.example.com -i 127.0.0.1 -p 7051 -r org2.example.com -c /w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/configs/87b5d270dfaa11e9847dfa163e612fc8 -a /w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/configs/87b5d270dfaa11e9847dfa163e612fc8/ordererOrganizations/example.com/ca/tls-cert.pem -s /w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/configs/87b5d270dfaa11e9847dfa163e612fc8/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/server.crt -d orderer0.example.com -h behavesystest -m mycc -f query -g  'a'  -u scott -w th3r3' returned non-zero exit status 1{code} *Build Logs:*    https://jenkins.hyperledger.org/sandbox/view/All/job/fabric-test-daily-behave-master-x86_64/ws/gopath/src/github.com/hyperledger/fabric-test/feature/behave_tests.log/*view*/    https://jenkins.hyperledger.org/sandbox/view/All/job/fabric-test-daily-behave-master-x86_64/1/console      ></body> </Action>
<Action id="64394" issue="42421" author="rameshthoomu" type="comment" created="2019-10-08 15:07:06.0" updateauthor="rameshthoomu" updated="2019-10-08 15:07:06.0"> <body><! CDATA Increased the Query timeout to 15 secs in feature/fabric-ca.feature file for java chaincode tests. Tested the same in Jenkins/sandbox with 15 sec and it worked as expected. See the result here  https://jenkins.hyperledger.org/sandbox/view/All/job/fabric-test-daily-behave-master-x86_64/3/consoleFull   Later changed to 10 secs and one test case is failed here  https://jenkins.hyperledger.org/sandbox/view/All/job/fabric-test-daily-behave-master-x86_64/4/   Pushed change here https://gerrit.hyperledger.org/r/#/c/fabric-test/+/33899/  ></body> </Action>
<Action id="64494" issue="42421" author="rameshthoomu" type="comment" body="Patch has been merged and I see the tests are working as expected in the recent build.  ~vijaypunugubati  Please verify this in the latest build and close this." created="2019-10-09 14:23:19.0" updateauthor="rameshthoomu" updated="2019-10-09 14:23:19.0"/>
<Action id="64824" issue="42421" author="scottz" type="comment" body="Today in daily tests results we see trouble downloading the jar file. That happens before we get to the point of running the tests, so it is not clear if this has been fixed. It looks like it is working better (passed a few times this week) but the two java cc tests have not both passed every day consistently yet. Let&apos;s fix the other jar download problem and see if these tests can stay green a few days. When we shut down behave, we can still reference this investigation from the interop tests (FAB-16719, still being developed) that will use a java cc and might possibly encounter the same problem." created="2019-10-21 16:32:55.0" updateauthor="scottz" updated="2019-10-21 16:32:55.0"/>
<Action id="65000" issue="42421" author="scottz" type="comment" body="Tests passed the last 4 days." created="2019-10-25 15:34:53.0" updateauthor="scottz" updated="2019-10-25 15:34:53.0"/>
