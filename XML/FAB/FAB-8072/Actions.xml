<Action id="39692" issue="27431" author="yacovm" type="comment" created="2018-02-05 19:24:59.0" updateauthor="yacovm" updated="2018-02-05 19:25:14.0"> <body><! CDATA {quote}sync /var/hyperledger/production/ledgersData/stateLeveldb/023868.ldb: input/output error{quote}  The output of *dmesg* will be useful here. Also - was the file system full at the time of the crash?  ></body> </Action>
<Action id="39693" issue="27431" author="clayton sims" type="comment" created="2018-02-05 19:26:33.0" updateauthor="clayton sims" updated="2018-02-05 19:26:33.0"> <body><! CDATA i am changing the component to fabric-peer.   fabric-quality should be used for bugs against the qa tooling as opposed to product defect.    I think this product defect as opposed to qa tool   if i misunderstood then let me know     ></body> </Action>
<Action id="39721" issue="27431" author="clayton sims" type="comment" body="Yacov assigning to you, if there is a better person let me know" created="2018-02-06 15:16:52.0" updateauthor="clayton sims" updated="2018-02-06 15:16:52.0"/>
<Action id="39722" issue="27431" author="yacovm" type="comment" created="2018-02-06 15:19:13.0" updateauthor="yacovm" updated="2018-02-06 15:19:13.0"> <body><! CDATA I'm not even sure it's even a bug in Fabric. According to the stack trace, the last fabric component from which the error manifested is the ledger.   ></body> </Action>
<Action id="39724" issue="27431" author="yacovm" type="comment" body="I suggest we get the requested information, and proceed from there before we classify this as a bug." created="2018-02-06 15:28:16.0" updateauthor="yacovm" updated="2018-02-06 15:28:16.0"/>
<Action id="39727" issue="27431" author="dongming" type="comment" body=" ~yacovm  I do not have dmesg information when it occurred.  I attempted to recreate the bug yesterday, but the test passed.  Now I am running it with constant payload, 500k, and see if this will occur sooner.  Once it occurs I will preserve the system and let you look it." created="2018-02-06 16:00:02.0" updateauthor="dongming" updated="2018-02-06 16:00:02.0"/>
<Action id="39784" issue="27431" author="senthil1" type="comment" body="Looks like the disk is failing. Similar issues found on web:  https://github.com/syncthing/syncthing/issues/1483  and  https://github.com/syncthing/syncthing/issues/2796  " created="2018-02-07 13:41:54.0" updateauthor="senthil1" updated="2018-02-07 14:12:50.0"/>
<Action id="39806" issue="27431" author="dongming" type="comment" body="Test with 500k payload stops because of disk full." created="2018-02-07 18:53:09.0" updateauthor="dongming" updated="2018-02-07 18:53:09.0"/>
<Action id="39889" issue="27431" author="dongming" type="comment" created="2018-02-08 21:13:37.0" updateauthor="dongming" updated="2018-02-08 21:13:37.0"> <body><! CDATA The traceback says:  panic: Error during commit to txmgr:sync /var/hyperledger/production/ledgersData/stateLeveldb/023868.ldb: input/output error  But no specific reason about the I/O error is given.  It would be helpful to debug if more detail information related to the error can be provided in the future.  ></body> </Action>
<Action id="39910" issue="27431" author="yacovm" type="comment" created="2018-02-09 09:21:40.0" updateauthor="yacovm" updated="2018-02-09 16:50:17.0"> <body><! CDATA well, what you can do to have more information in the future, is to wrap the peer binary execution command with a script, in your tests. In the script - after the peer exits (due to a crash), just output all kinds of information, such as *dmesg*, *df -h*, etc. etc.  It might work, but it also might not, if the device that the logs write to, is the same one that made that I/O error.  ></body> </Action>
<Action id="39923" issue="27431" author="bmos299" type="comment" created="2018-02-09 16:25:02.0" updateauthor="bmos299" updated="2018-02-09 16:25:02.0"> <body><! CDATA  ~denyeart   ~yacovm    ~manish-sethi  there are several issues out there with  *panic: Error during commit to txmgr:sync /var/hyperledger/production/ledgersData/stateLeveldb/023868.ldb: input/output error .*   **    For the most part this is committing blocks but could also happen when reading in configurations, etc.   Is there a way we can give more information in the log about the i/o error?  I do see there are debug messages that should probably be error level log messages.  There are some good commands above like dmesg, etc. but if running native on different platforms may not work.  What do you guys think?  I just think over the next few years we will see this issue come in time after time and the more information we can provide....the better.  Thanks.  ></body> </Action>
<Action id="39927" issue="27431" author="yacovm" type="comment" created="2018-02-09 16:47:34.0" updateauthor="yacovm" updated="2018-02-09 16:47:34.0"> <body><! CDATA This file is a levelDB file, so that means levelDB is the one that encountered the error and returned it to the upper layer (fabric), and fabric doesn't control the information detail of the file that generated the error.  What information did you have in mind to be added to the log, Barry? Can you give an example?   ></body> </Action>
<Action id="39989" issue="27431" author="bmos299" type="comment" body="Do we know exactly what was passed back from levelDB? What is an EIO from errno.h?   Does leveldb have more options that can be enabled to get more details?  Can we make an attempt to look at a system file?  Things such is insufficient disk space (runtime) or permission errors (at startup) would eliminate over 90% of calls that would come into support.   The message of &apos;insufficient disk space&apos; would be a huge time saver. As you can see several issues have been opened that are most likely due to running out of disk space.   " created="2018-02-11 15:14:04.0" updateauthor="bmos299" updated="2018-02-11 15:14:04.0"/>
<Action id="40022" issue="27431" author="dongming" type="comment" body="I attempted to recreate this in the weekend, but have no luck for 3 attempts." created="2018-02-12 14:34:31.0" updateauthor="dongming" updated="2018-02-12 14:34:31.0"/>
<Action id="40074" issue="27431" author="clayton sims" type="comment" body="ok i will close.  if this happens again you can reopen" created="2018-02-13 18:23:22.0" updateauthor="clayton sims" updated="2018-02-13 18:23:22.0"/>
