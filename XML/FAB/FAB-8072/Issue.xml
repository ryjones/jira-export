<Issue id="27431" key="FAB-8072" number="8072" project="10002" reporter="dongming" creator="dongming" type="10004" summary="peers panic for longrun test" priority="2" resolution="10000" status="6" created="2018-02-05 16:25:43.0" updated="2018-07-20 14:15:37.0" resolutiondate="2018-02-13 18:23:30.0" votes="0" watches="5" workflowId="41133"> <description><! CDATA With fabric commit level 0eb83eb, using PTE to drive transactions with various payload, 1k-500k, with 8 threads, each thread sends 1 transaction per second, i.e., 8 transactions per second, batchsize 1, each transaction followed by a query, after about  4 hours, peers panic with the following traceback:  2018-02-03 02:07:07.061 UTC  kvledger  CommitWithPvtData -> INFO 1159a^  0m Channel  testorgschannel2 : Committed block  33676  with 1 transaction(s) 2018-02-03 02:07:07.083 UTC  kvledger  CommitWithPvtData -> INFO 1159b^  0m Channel  testorgschannel1 : Committed block  33811  with 1 transaction(s) panic: Error during commit to txmgr:sync /var/hyperledger/production/ledgersData/stateLeveldb/023868.ldb: input/output error  goroutine 455  running : github.com/hyperledger/fabric/core/ledger/kvledger.(*kvLedger).CommitWithPvtData(0xc420151540, 0xc4209694d0, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger.go:251 +0x921 github.com/hyperledger/fabric/core/ledger/ledgermgmt.(*closableLedger).CommitWithPvtData(0xc421d13d80, 0xc4209694d0, 0x0, 0x0) <autogenerated>:1 +0x47 github.com/hyperledger/fabric/core/committer.(*LedgerCommitter).CommitWithPvtData(0xc4220133c0, 0xc4209694d0, 0xc427f73cf8, 0xdf8475800) /opt/gopath/src/github.com/hyperledger/fabric/core/committer/committer_impl.go:87 +0x6b github.com/hyperledger/fabric/gossip/privdata.(*coordinator).StoreBlock(0xc421fccbe0, 0xc421ab0360, 0x0, 0x0, 0x0, 0xc421ab0360, 0xc42002f180) /opt/gopath/src/github.com/hyperledger/fabric/gossip/privdata/coordinator.go:223 +0xcf9 github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock(0xc421d15b80, 0xc421ab0360, 0x0, 0x0, 0x0, 0x0, 0x0) /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:781 +0x7d github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads(0xc421d15b80) /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:561 +0x411 created by github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:253 +0x6d3     If reduce transaction rate to 1 transaction per 2 seconds, the test passes.  ></description> </Issue>
