<Issue id="32340" key="FAB-11367" number="11367" project="10002" reporter="sambhavdutt" creator="sambhavdutt" type="10004" summary="Integration tests fail in multiple builds as peer was unable to fetch private data." priority="3" resolution="10002" status="6" created="2018-07-27 14:11:15.0" updated="2019-03-19 11:13:07.0" resolutiondate="2018-07-29 12:39:15.0" votes="0" watches="2" workflowId="43541"> <description><! CDATA The fabric-verify-integration-tests-x86_64 fails several times with similar error in different patchsets,  because the peer could not retrieve private data that was purged. There is also Endorsement fail during query with this error.  *fabric Commit: f660b87*  {code:java} 01:21:48       Error: endorsement failure during query. response: status:500 message:"{\"Error\":\"Failed to get private details for marble1: GET_STATE failed: transaction ID: 88a5a9cd1e7ddd0e29bd4f97890b9042978817d63228313f4c462397b7db4106: private data matching public hash version is not available. Public hash version = &version.Height{BlockNum:0x4, TxNum:0x0}, Private data version = (*version.Height)(nil)\"}"   01:21:48  Fail  PrivateData-EndToEnd collection config BlockToLive is respected  It  verifies private data is purged after BTL has passed and new peer doesn't pull private data that was purged  01:21:48 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/pvtdata/helpers/utils.go:23 01:21:48  01:21:48  Fail  PrivateData-EndToEnd network partition with respect of private data  It  verifies private data not distributed when there is network partition  01:21:48 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/pvtdata/e2e_test.go:446 01:22:46 There were failures detected in the following suites: 01:22:46 	pvtdata ./integration/pvtdata . . . ======================================================================================== 08:49:29  o  query  {"docType":"marblePrivateDetails","name":"marble1","price":99} 08:49:29 â€¢ Failure  46.147 seconds  08:49:29 PrivateData-EndToEnd collection config BlockToLive is respected  It  verifies private data is purged after BTL has passed and new peer doesn't pull private data that was purged  08:49:29 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/pvtdata/e2e_test.go:284 08:49:29  08:49:29   Expected an error to have occurred.  Got: 08:49:29       <nil>: nil 08:49:29  08:49:29   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/pvtdata/e2e_test.go:506 08:49:29 ------------------------------ {code}  *Build Logs*  https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/958/  https://jenkins.hyperledger.org/view/fabric/job/fabric-verify-integration-tests-x86_64/958/consoleFull  ></description> </Issue>
