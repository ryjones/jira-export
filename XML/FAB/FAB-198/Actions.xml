<Action id="22119" issue="12498" author="denyeart" type="comment" body=" ~muralisr  Now that chaincode upgrade is complete, what is your opinion of the additional validation check mentioned in the Description here?" created="2017-04-11 18:38:02.0" updateauthor="denyeart" updated="2017-04-11 18:38:02.0"/>
<Action id="22666" issue="12498" author="binhn" type="comment" body="I hope nothing else is needed, but as we chatted, we might want to look into chaincode version during upgrade to check that the version of a chaincode hasn&apos;t been changed on the transactions when we commit; if version has been changed, the transaction must be invalid." created="2017-04-18 22:13:57.0" updateauthor="binhn" updated="2017-04-18 22:13:57.0"/>
<Action id="22667" issue="12498" author="denyeart" type="comment" created="2017-04-18 23:11:20.0" updateauthor="denyeart" updated="2017-04-18 23:11:20.0"> <body><! CDATA  ~binhn   ~muralisr  Thanks for the pointer to the discussion in https://gerrit.hyperledger.org/r/#/c/7831. I always assumed the chaincode version would have to go into the proposal response somewhere, so that it could be validated to be the same at commit time.  Question - Would the version have to go into the RWSet per se? Or could it simply be a new field in the ChaincodeAction? I think of RWSet as the chaincode data. Metadata about the execution of the chaincode could go in ChaincodeAction couldn't it?  ></body> </Action>
<Action id="22679" issue="12498" author="muralisr" type="comment" created="2017-04-19 02:48:17.0" updateauthor="muralisr" updated="2017-04-19 02:50:07.0"> <body><! CDATA  ~denyeart   ~binhn  there are 3 ways we can do this with # add it to RW set # just set the Version field in ChaincodeHeaderExtension.ChaincodeID at endorsement time # have user set the Version field in ChaincodeHeaderExtension.ChaincodeID at proposal time # add a new version field to ChaincodeAction   2 is out (we cannot modify signed structures)  3 is possible but users have to keep track of version (which is kinda silly given we support only one - the latest)  Its between 1 and 4. Agree with  ~denyeart  that it might be best to handle it as part of chaincode processing as opposed to ledger processing. We have all the chaincode level structures available for processing at the top level instead of relegating to ledger to extract it (or process it later in the validation callpath).  The work is straightforward * add a version field to ChaincodeAction * set the version in endorser (we have all the information) * validate the information at committer (we have all the information)  What do you think  ~jiangyaoguo    ></body> </Action>
<Action id="22681" issue="12498" author="jiangyaoguo" type="comment" body="Agree with 4.  Way 1 needs reserved key in RW-set to save version. it might be overwritten by cc." created="2017-04-19 03:14:10.0" updateauthor="jiangyaoguo" updated="2017-04-19 03:14:10.0"/>
<Action id="22815" issue="12498" author="denyeart" type="comment" body="Ok, since it will be in peer (endorser/committer) logic rather than ledger, I will move to component fabric-peer." created="2017-04-21 12:18:14.0" updateauthor="denyeart" updated="2017-04-21 12:18:14.0"/>
