<Issue id="28890" key="FAB-9161" number="9161" project="10002" reporter="sykesm" creator="sykesm" type="10003" summary="Data races when running TestOrdererCmdEnv" priority="4" resolution="10002" status="6" created="2018-03-26 15:05:52.0" updated="2018-07-20 14:17:34.0" resolutiondate="2018-07-20 14:06:34.0" votes="0" watches="1" workflowId="43107"> <description><! CDATA {code:java} unit-tests_1  | ==================  unit-tests_1  | WARNING: DATA RACE  unit-tests_1  | Write at 0x00c42007aa80 by goroutine 8:  unit-tests_1  |   runtime.mapassign_faststr()  unit-tests_1  |       /opt/go/src/runtime/hashmap_fast.go:598 +0x0  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*moduleLeveled).SetLevel()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/level.go:104 +0x70  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.SetLevel()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/backend.go:33 +0x70  unit-tests_1  |   github.com/hyperledger/fabric/common/flogging.InitFromSpec()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/common/flogging/logging.go:180 +0x78  unit-tests_1  |   github.com/hyperledger/fabric/peer/common.SetOrdererEnv()  unit-tests_1  |       github.com/hyperledger/fabric/peer/common/_test/_obj_test/ordererenv.go:25 +0x77  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:682 +0x3ab  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:783 +0x444  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:736 +0x38  unit-tests_1  |   github.com/hyperledger/fabric/peer/common_test.TestOrdererCmdEnv()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/peer/common/ordererenv_test.go:47 +0x51a  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  |  unit-tests_1  | Previous read at 0x00c42007aa80 by goroutine 37:  unit-tests_1  |   runtime.mapaccess2_faststr()  unit-tests_1  |       /opt/go/src/runtime/hashmap_fast.go:315 +0x0  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*moduleLeveled).IsEnabledFor()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/level.go:91 +0x70  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).IsEnabledFor()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:140 +0x87  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).log()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:144 +0x4c  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Debugf()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:254 +0x98  unit-tests_1  |   github.com/hyperledger/fabric/common/flogging.(*grpclogger).Printf()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/common/flogging/grpclogger.go:56 +0x7e  unit-tests_1  |   github.com/hyperledger/fabric/vendor/google.golang.org/grpc/grpclog.(*loggerWrapper).Infof()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/grpclog/logger.go:53 +0x87  unit-tests_1  |   github.com/hyperledger/fabric/vendor/google.golang.org/grpc/grpclog.Infof()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/grpclog/grpclog.go:45 +0x88  unit-tests_1  |   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*pickfirstBalancer).HandleSubConnStateChange()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/pickfirst.go:71 +0x13b  unit-tests_1  |   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*ccBalancerWrapper).watcher()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/balancer_conn_wrappers.go:131 +0x608  unit-tests_1  |  unit-tests_1  | Goroutine 8 (running) created at:  unit-tests_1  |   testing.(*T).Run()  unit-tests_1  |       /opt/go/src/testing/testing.go:789 +0x568  unit-tests_1  |   testing.runTests.func1()  unit-tests_1  |       /opt/go/src/testing/testing.go:1004 +0xa7  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  |   testing.runTests()  unit-tests_1  |       /opt/go/src/testing/testing.go:1002 +0x521  unit-tests_1  |   testing.(*M).Run()  unit-tests_1  |       /opt/go/src/testing/testing.go:921 +0x206  unit-tests_1  |   main.main()  unit-tests_1  |       github.com/hyperledger/fabric/peer/common/_test/_testmain.go:124 +0x2f0  unit-tests_1  |  unit-tests_1  | Goroutine 37 (running) created at:  unit-tests_1  |   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.newCCBalancerWrapper()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/balancer_conn_wrappers.go:113 +0x2f1  unit-tests_1  |   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*ClientConn).switchBalancer()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:749 +0x44c  unit-tests_1  |   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*ClientConn).handleResolvedAddrs()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:704 +0x2de  unit-tests_1  |   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*ccResolverWrapper).watcher()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/resolver_conn_wrapper.go:116 +0x58e  unit-tests_1  | =================={code}  ></description> </Issue>
