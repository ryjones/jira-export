<Issue id="45005" key="FAB-17844" number="17844" project="10002" reporter="sstone1" assignee="sstone1" creator="sstone1" type="10004" summary="External builder fails to copy symlinks from build output into persistent directory" priority="3" resolution="10000" status="6" created="2020-05-06 12:45:44.0" updated="2020-05-20 16:20:11.0" resolutiondate="2020-05-20 16:18:20.0" votes="0" watches="2" workflowId="58909" archived="N"> <description><! CDATA External builders may write symlinks to the build output directory - for example, an external builder for Node.js chaincode will likely write out symlinks as part of the node_modules tree.  The code in  https://github.com/hyperledger/fabric/blob/392ecda11773cbb616f6c962742c28a71515f80b/core/container/externalbuilder/copy.go#L81  attempts to do a rename when it wants to move the build output from an external builder to the persistent directory, but if this fails (you cannot rename across volumes), then it attempts to do a copy.  However, the copy doesn't check for symlinks, and just copies them as files instead. This can cause failures at runtime - for example, the node_modules/.bin folder should contain symlinks to any Node.js programs, but if these aren't copied as symlinks then those programs fail to execute.  ></description> </Issue>
