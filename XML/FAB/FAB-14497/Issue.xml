<Issue id="38221" key="FAB-14497" number="14497" project="10002" reporter="dongming" creator="dongming" type="10004" summary="RAFT log for heartbeat response should not say ConsensusRequest" priority="3" resolution="10203" status="6" created="2019-03-05 15:14:11.0" updated="2019-03-11 01:48:02.0" resolutiondate="2019-03-11 01:48:02.0" votes="0" watches="2" workflowId="49843"> <description><! CDATA In the RAFT orderer debug log message below, OSN1 is the leader and sends ConsensusRequest to followers, OSN2 and OSN3. Then in the responses from OSN2 and OSN3, ConsensusRequest is used instead of ConsensusResponse. It will be more clear if we print that it is a response, i.e. ConsensusResponse instead of ConsensusRequest.  {{ Feb 27 22:15:26 orderer1st-ordererorg orderer1st-ordererorg 2019-02-28 03:15:16.054 UTC  orderer.common.cluster.step  sendMessage -> DEBU 36f3dbc Send of ConsensusRequest for channel testorgschannel139 with payload of size 28 to orderer2nd-ordererorg.ordererorg(orderer2nd-ordererorg:7050) took 23.335µs }} {{ Feb 27 22:15:26 orderer1st-ordererorg orderer1st-ordererorg 2019-02-28 03:15:26.643 UTC  orderer.consensus.etcdraft  consensusSent -> DEBU 36f4c2e Sending msg of 28 bytes to 2 on channel testorgschannel139 took 4.841µs}} {{ Feb 27 22:15:26 *orderer1st*-ordererorg orderer1st-ordererorg 2019-02-28 03:15:26.643 UTC  orderer.common.cluster.step  sendMessage -> DEBU 36f4c34 Send of ConsensusRequest for channel testorgschannel139 with payload of size 28 to *orderer2nd*-ordererorg.ordererorg(orderer2nd-ordererorg:7050) took 25.995µs }} {{ Feb 27 22:15:26 *orderer2nd*-ordererorg orderer2nd-ordererorg 2019-02-28 03:15:26.642 UTC  orderer.common.cluster.step  handleMessage -> DEBU 3bf28dc *Received message from orderer1st*-ordererorg.ordererorg(172.30.231.76:55060): ConsensusRequest for channel testorgschannel139 with payload of size 28}}  There is no log for orderer2nd sending a response or a request to orderer1st. Should we add one? In any case, it is not clear if this next msg (received in orderer1st from orderer2nd) is a response or if is a new request. All it says is that a ConsensusRequest was received; this was unexpected. We expected it to say "response" somewhere in this log text (or else it is a bigger problem if it is an actual new request).  {{ Feb 27 22:15:26 *orderer1st*-ordererorg orderer1st-ordererorg 2019-02-28 03:15:26.698 UTC  orderer.common.cluster.step  handleMessage -> DEBU 36f50fb *Received message from orderer2nd*-ordererorg.ordererorg(172.30.181.167:54758): _ConsensusRequest_ for channel testorgschannel139 with payload of size 28}} {{ Feb 27 22:15:27 *orderer2nd*-ordererorg orderer2nd-ordererorg 2019-02-28 03:15:27.135 UTC  orderer.common.cluster.step  handleMessage -> DEBU 3bf3c26 *Received message from orderer1st*-ordererorg.ordererorg(172.30.231.76:55060): ConsensusRequest for channel testorgschannel139 with payload of size 28}} {{ Feb 27 22:15:26 *orderer1st*-ordererorg orderer1st-ordererorg 2019-02-28 03:15:26.609 UTC  orderer.common.cluster.step  handleMessage -> DEBU 36f49ed *Received message from orderer2nd*-ordererorg.ordererorg(172.30.181.167:54758): ConsensusRequest for channel testorgschannel139 with payload of size 28}}  ></description> </Issue>
