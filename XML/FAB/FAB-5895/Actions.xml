<Action id="30116" issue="20369" author="jkirke" type="comment" body="Added logs for all components." created="2017-08-23 17:56:32.0" updateauthor="jkirke" updated="2017-08-23 17:56:32.0"/>
<Action id="30642" issue="20369" author="muralisr" type="comment" body=" ~wlahti  part of the serviceability work...assigning to you." created="2017-09-07 19:17:01.0" updateauthor="muralisr" updated="2017-09-07 19:17:01.0"/>
<Action id="30849" issue="20369" author="wlahti" type="comment" body=" ~jkirke  Can you provide more details of the information you&apos;d like to see logged? Just the reason the policy evaluation failed? The name of the policy?" created="2017-09-13 16:32:57.0" updateauthor="wlahti" updated="2017-09-13 16:32:57.0"/>
<Action id="30907" issue="20369" author="jkirke" type="comment" body="In this instance the failure is that an org added late cannot execute in the channel and the logging fails to give specifics about the nature of the failure. As a user I would like additional information on the nature of the failure and the policy name so that it can be modified in needed." created="2017-09-14 22:17:23.0" updateauthor="jkirke" updated="2017-09-14 22:17:23.0"/>
<Action id="33259" issue="20369" author="jeffgarratt" type="comment" body=" ~wlahti  any updates on this one?" created="2017-10-26 19:28:47.0" updateauthor="jeffgarratt" updated="2017-10-26 19:28:47.0"/>
<Action id="34372" issue="20369" author="wlahti" type="comment" body="I&apos;ll start looking into this again today and hopefully have a fix within a day or two." created="2017-11-06 15:11:51.0" updateauthor="wlahti" updated="2017-11-06 15:11:51.0"/>
<Action id="34680" issue="20369" author="wlahti" type="comment" created="2017-11-16 19:01:25.0" updateauthor="wlahti" updated="2017-11-16 20:14:23.0"> <body><! CDATA Looking deeper into the policy code, I think some useful logging is already available in the v1.1 code but it's at the debug level. See common/policies/policy.go, particularly the Evaluate function starting at line 184, in this CR:  https://github.com/hyperledger/fabric/commit/e503a08d79219735d84a9c57f1b3276dd084675f    ~jkirke -, if you are able to, can you try setting CORE_LOGGING_POLICIES=debug in a v1.1 environment and recreate the scenario?- I'll try recreating this myself and post the logging messages here. I think it will provide most if not all of what you're looking for. If so, the solution is likely to wrap the error message with the information from line 192 to ensure the information is more readily available in the logs in the event of a failure.      ></body> </Action>
<Action id="34694" issue="20369" author="wlahti" type="comment" body="Successfully recreated this scenario. The logs from the policies modules are too noisy to really be useful for this situation. I&apos;ll try to determine the best way to provide relevant information to allow an end user to take the necessary action in the event of a policy authentication failure. " created="2017-11-16 21:44:50.0" updateauthor="wlahti" updated="2017-11-16 21:44:50.0"/>
<Action id="39390" issue="20369" author="wlahti" type="comment" created="2018-01-30 21:26:53.0" updateauthor="wlahti" updated="2018-01-30 21:26:53.0"> <body><! CDATA No longer able to reproduce this in master. Previously, I took the e2e_cli network with two orgs, added a third org to the channel, and hit the same policy error when invoking. Now, the invoke goes through successfully, making me think there may have been a bug somewhere else in the policy logic leading to this situation.   I'll see if there are any similar situations I can come up with that or at least try to add in helpful information to the reported error message.   ></body> </Action>
<Action id="39541" issue="20369" author="wlahti" type="comment" created="2018-02-01 20:01:35.0" updateauthor="wlahti" updated="2018-02-01 21:22:00.0"> <body><! CDATA On closer look, I actually can reproduce the issue.   I plan to update the log messages from {code:java} 2018-01-31 03:10:56.323 UTC  committer/txvalidator  VSCCValidateTxForCC -> ERRO b67 VSCC check failed for transaction txid=54fbbb08124f6d0bbeb1c4e451e6db3442d046691fdeff7922fce06ef66f641b, error VSCC error: policy evaluation failed, err Failed to authenticate policy . . . 2018-01-31 03:10:56.323 UTC  committer/txvalidator  validateTx -> ERRO b6b VSCCValidateTx for transaction txId = 54fbbb08124f6d0bbeb1c4e451e6db3442d046691fdeff7922fce06ef66f641b returned error VSCC error: policy evaluation failed, err Failed to authenticate policy{code} to {code:java} 2018-01-31 05:06:44.360 UTC  committer/txvalidator  validateTx -> ERRO 92c VSCCValidateTx for transaction txId = 8e845b946bf120b12ed09a0cdddaf78d6d263cd4d4de1e7a4d8038f9d67733a4 returned error: VSCC error: endorsement policy failure, err: signature set did not satisfy policy{code} which makes it clear that it was the endorsement policy that failed and the reason why it failed ("signature set did not satisfy policy" instead of the vague "Failed to authenticate policy").  ></body> </Action>
<Action id="39547" issue="20369" author="wlahti" type="comment" body="https://gerrit.hyperledger.org/r/c/17451/" created="2018-02-01 21:30:16.0" updateauthor="wlahti" updated="2018-02-01 22:19:57.0"/>
