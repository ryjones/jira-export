<Issue id="39269" key="FAB-15157" number="15157" project="10002" reporter="guoger" assignee="yacovm" creator="guoger" type="10002" summary="Explicit error out when !TLSEnabled &amp;&amp; isClusterType" priority="3" resolution="10000" status="6" created="2019-04-12 07:13:32.0" updated="2019-04-12 19:36:12.0" resolutiondate="2019-04-12 18:25:14.0" votes="0" watches="2" workflowId="52146"> <description><! CDATA Current panic stack is: {code} panic: runtime error: invalid memory address or nil pointer dereference  signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0xacb884   goroutine 1  running : github.com/hyperledger/fabric/core/comm.(*GRPCServer).SetClientRootCAs(0xc00017c000, 0xc000498240, 0x4, 0x6, 0x0, 0x0) 	/opt/gopath/src/github.com/hyperledger/fabric/core/comm/server.go:326 +0x1b4 github.com/hyperledger/fabric/orderer/common/server.updateTrustedRoots(0xc000430c00, 0x11563a0, 0xc000132700, 0xc00000e320, 0x1, 0x1) 	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:752 +0x159a github.com/hyperledger/fabric/orderer/common/server.Start.func1(0xc000132700) 	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:151 +0xf4 github.com/hyperledger/fabric/common/channelconfig.(*BundleSource).Update(0xc0009c0210, 0xc000132700) 	/opt/gopath/src/github.com/hyperledger/fabric/common/channelconfig/bundlesource.go:46 +0x7c github.com/hyperledger/fabric/common/channelconfig.NewBundleSource(0xc000132700, 0xc00000e328, 0x1, 0x1, 0xc00035f020) 	/opt/gopath/src/github.com/hyperledger/fabric/common/channelconfig/bundlesource.go:38 +0x72 github.com/hyperledger/fabric/orderer/common/multichannel.(*Registrar).newLedgerResources(0xc000498480, 0xc000350b90, 0xc000350b90) 	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/multichannel/registrar.go:354 +0x379 github.com/hyperledger/fabric/orderer/common/multichannel.(*Registrar).Initialize(0xc000498480, 0xc00032d230) 	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/multichannel/registrar.go:158 +0x242 github.com/hyperledger/fabric/orderer/common/server.initializeMultichannelRegistrar(0xc00003fe00, 0xc000430300, 0xc00042c1d0, 0x0, 0xc0004982d0, 0x1b25180, 0xc00042c320, 0x2, 0x2, 0xc00042c330, ...) 	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:585 +0x315 github.com/hyperledger/fabric/orderer/common/server.Start(0x1013e09, 0x5, 0xc000540900) 	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:158 +0x7a3 github.com/hyperledger/fabric/orderer/common/server.Main() 	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:91 +0x1ce main.main() 	/opt/gopath/src/github.com/hyperledger/fabric/orderer/main.go:15 +0x20 {code} which is not very friendly.  wdyt  ~yacovm   ></description> </Issue>
