<Issue id="33829" key="FAB-12030" number="12030" project="10002" reporter="ptippett" assignee="denyeart" creator="ptippett" type="10001" summary="Need better info logging of block processing in peer" priority="3" resolution="10000" status="6" created="2018-09-17 16:56:46.0" updated="2018-11-26 20:32:21.0" resolutiondate="2018-11-26 20:32:21.0" votes="0" watches="5" workflowId="45136"> <description><! CDATA When debugging performance problems, it's very important to be able to get more granular times on when a peer is processing a block.  Currently, the only logging at the INFO level is when the peer commits a block.  To get more detail, we have to turn on debug logs which results in a TON of logs and makes debugging difficult.  My understanding is the states are at a high level:    * block arrival via gossip (and orderer if the peer is pulling directly from orderer?) * when it starts to get processed * when validation is complete * when commit is complete to chain * when commit is complete to statedb  And currently all that is logged is when commit is complete to chain.  Can we get a bit more detail at the INFO level.  Here's a couple of specific proposals:  1 - At info level, log the first time the block shows up at the peer via any method and whenever the peer is done with it.  Given that you are currently logging when the commit is complete to chain, that may be sufficient for an end state and you can just add block arrival.  2 - Keep a single info message per block to avoid overwhelming the info logs, but add more granularity to that log line.  Something like:   "Block 298: arrived at x (time), started processing y, completed validation z, committed to to chain, aa, committed to statedb bb"  Obviously this could get long, so you could limit the granularity down to arrival and commit to chain, or some smaller list.     I'm not filing this as a bug, but if it's an easy change, please port it back to 1.1.x and 1.2.x as many customers are still on these versions and are starting to debug performance issues.        ></description> </Issue>
