<Issue id="44024" key="FAB-17413" number="17413" project="10002" reporter="denyeart" creator="denyeart" type="10004" summary="Support for read-only channel members in new lifecycle" priority="3" status="10300" created="2020-01-17 23:39:22.0" updated="2020-11-09 15:16:48.0" votes="0" watches="5" workflowId="57890"> <description><! CDATA To support channel members with read-only privilege (e.g. query chaincode but not submit transactions), you can simply exclude the org from the coarse */Channel/Writers* policy so that they can't submit transactions to ordering service:  https://github.com/hyperledger/fabric/blob/release-1.4/sampleconfig/configtx.yaml#L414-L416|https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_hyperledger_fabric_blob_release-2D1.4_sampleconfig_configtx.yaml-23L414-2DL416&d=DwMFAg&c=jf_iaSHvJObTbx-siA1ZOg&r=FWiwMUSIAq7Ii1KJX8rdZWEsrplZzcrGwWreBa-fmbA&m=DsnpLm0yOBP2JBmkZnxv92Mk-v3x-BhOEd1s5O_7Z18&s=JSmsduYlme0fhuevPOKhveN2jRBZxbbpBH9b0wVZZ_Y&e=   and change *peer/Propose* fine-grained ACL to */Channel/Application/Readers* so that they can invoke chaincode:  https://github.com/hyperledger/fabric/blob/release-1.4/sampleconfig/configtx.yaml#L211|https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_hyperledger_fabric_blob_release-2D1.4_sampleconfig_configtx.yaml-23L211&d=DwMFAg&c=jf_iaSHvJObTbx-siA1ZOg&r=FWiwMUSIAq7Ii1KJX8rdZWEsrplZzcrGwWreBa-fmbA&m=DsnpLm0yOBP2JBmkZnxv92Mk-v3x-BhOEd1s5O_7Z18&s=FDsCjpgdR6vRmPn3CwRMG82aU6_7S3wkYdLw3HCbTME&e=      At least, you could do this in v1.4.  With the v2.0 lifecycle however, in order to query a chaincode, your org must install the chaincode AND ApproveForMyOrg on the chaincode definition. However, a read-only member has no privilege to submit the _lifecycle ApproveForMyOrg transaction to the channel ordering service, and therefore they are not able to query the chaincode.  If you attempt to query chaincode, you will receive error: {code:java} chaincode definition for 'marbles' at sequence 1 on channel 'mychannel' has not yet been approved by this org{code}    If an org has not yet agreed to the chaincode definition, it seems that their peer's endorsements should not be counted towards the endorsement policy for a valid transaction, but it seems that they should be able to query their own local chaincode.  Otherwise, I don't know how we'll support read-only channel members that are not able to submit the ApproveForMyOrg transaction.        ></description> </Issue>
