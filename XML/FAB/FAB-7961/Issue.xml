<Issue id="27224" key="FAB-7961" number="7961" project="10002" reporter="nishi" assignee="nishi" creator="nishi" type="10004" summary="fabric upgrade: ChannelApplication capability config update tx passes with incorrect signatures in envelope " priority="3" resolution="10000" status="6" created="2018-01-29 23:10:51.0" updated="2018-07-20 14:15:34.0" resolutiondate="2018-05-08 15:48:28.0" votes="0" watches="3" workflowId="41084"> <description><! CDATA Currently config update transactions when adding ChannelApplication capability in v1.1  was tested with following combinations of certs when sending an update transaction envelope :  | Developer | Cert Alias | |configAdminOrdererOrg0|config-admin-cert|  | configAdminOrdererOrg1 | config-admin-cert |  or  | configAdminPeerOrg0 | config-admin-cert | |configAdminPeerOrg1|config-admin-cert|  or | peer0Admin | peer-admin-cert | | peer2Admin | peer-admin-cert |  or   a combination any of the two from each one above     *Expected Result:*  Config update tx on ChannelApplication capability to be successful only when   | configAdminPeerOrg0 | config-admin-cert | |configAdminPeerOrg1|config-admin-cert|  signatures are passed  *Actual Result:*  It passed for all the signatures above.     *Sample Piece of Code:* {code:java} ####################################################################################################################### # # orderer config Admin then adds v1.1 capability to /Channel/Application group for channel2 # Channel/Orderer and /Channel capabilities are already defined # ##################################################################################################################### Given user "configAdminOrdererOrg0" retrieves the latest config update "latestPeerConfigForCapabilitiesChangeForChannel2" from orderer "<orderer0>" for channel "com.acme.blockchain.jdoe.channel2" And user "configAdminOrdererOrg0" creates a capabilities config update "capabilitiesV1.1ConfigUpdateForPeerChannelLevel2" using config "latestPeerConfigForCapabilitiesChangeForChannel2" using channel ID "com.acme.blockchain.jdoe.channel2" with mod policy "Admins" to add capabilities: | Group | Capabilities | | /Channel/Application | V1_1 | And the user "configAdminOrdererOrg0" creates a configUpdateEnvelope "capabilitiesV1.1ConfigUpdateEnvelopeForPeerChannelLevel2" using configUpdate "capabilitiesV1.1ConfigUpdateForPeerChannelLevel2"  And the user "configAdminOrdererOrg0" collects signatures for ConfigUpdateEnvelope "capabilitiesV1.1ConfigUpdateEnvelopeForPeerChannelLevel2" from developers: | Developer | Cert Alias | | peer0Admin | peer-admin-cert | | peer2Admin | peer-admin-cert |  And the user "configAdminOrdererOrg0" creates a ConfigUpdate Tx "capabilitiesConfigUpdateForPeerTx2ChannelLevel2" using cert alias "config-admin-cert" using signed ConfigUpdateEnvelope "capabilitiesV1.1ConfigUpdateEnvelopeForPeerChannelLevel2"  And the user "configAdminOrdererOrg0" using cert alias "config-admin-cert" broadcasts ConfigUpdate Tx "capabilitiesConfigUpdateForPeerTx2ChannelLevel2" to orderer "<orderer0>"  {code}  ></description> </Issue>
