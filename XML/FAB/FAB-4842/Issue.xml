<Issue id="18260" key="FAB-4842" number="4842" project="10002" reporter="ratnakar" assignee="mastersingh24" creator="ratnakar" type="10004" summary=" Servicibility issue  When transaction marked as Invalid , warning should include channel, chaincode, version and Reason code details" priority="3" resolution="10000" status="6" created="2017-06-16 21:14:11.0" updated="2018-07-20 14:13:30.0" resolutiondate="2017-11-27 03:27:15.0" votes="0" watches="5" workflowId="39178" security="10001"> <description><! CDATA Refer the testcase details -FAB-4662-     when transactions are marked as Invalid, for instance see the below logs {code:java} 2017-06-16 20:18:19.491 UTC  statevalidator  ValidateAndPrepareBatch -> DEBU 8b4 Block  3  Transaction index  0  TxId  b1c5805af47ccabd1a75973e8b38523bbf549ad4ca0e1e344e5aaffce1035e5e  marked as valid by state validator 2017-06-16 20:18:19.491 UTC  statevalidator  ValidateAndPrepareBatch -> DEBU 8b8 Block  3  Transaction index  1  TxId  7d30e435cf099fc4f35e588d3aaed2c9c885b5121944a38fc565426f7342b7c7  marked as valid by state validator 2017-06-16 20:18:19.491 UTC  statevalidator  ValidateAndPrepareBatch -> WARN 8ba Block  3  Transaction index  2  TxId  3b8b6658ace5f30b02faa82a074de1acc58cded898843ea9538b26085ddb9dec  marked as invalid by state validator. Reason code  11 {code} When transaction is Invalid, the warning log should contain the following details aswell * channel name * chaincode name * Version *  Reason code 11   ---------------------------  In current 1.1 master, ledger logs tran invalidation in two places.  This one logs the txid and the reason code string:  core/ledger/kvledger/txmgmt/validator/statebasedval/state_based_validator.go:            logger.Warningf("Block  %d  Transaction index  %d  TxId  %s  marked as invalid by state validator. Reason code  %s " ...   This one should be improved to return the txid and reason code string rather than the reason code number:  core/ledger/kvledger/txmgmt/validator/valimpl/helper.go:            logger.Warningf("Block  %d  Transaction index  %d  marked as invalid by committer. Reason code  %d " ...     The txid and reason code string will make it much easier to troubleshoot invalidations, in addition to the other fields mentioned above.  ></description> </Issue>
