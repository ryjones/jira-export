<Issue id="33004" key="FAB-11631" number="11631" project="10002" reporter="hellboy_23" assignee="tony12345" creator="hellboy_23" type="10004" summary="GetPrivateDataByRange iterator throws nil pointer panic exception when there are no transactions" priority="1" resolution="10201" status="6" created="2018-08-17 09:17:25.0" updated="2018-12-04 21:23:14.0" resolutiondate="2018-12-04 21:23:14.0" votes="0" watches="5" workflowId="44204"> <description><! CDATA func (t *SimpleChaincode) getAllData(collection string) pb.Response { //_,args:=stub.GetFunctionAndParameters() var stub1 shim.ChaincodeStubInterface *{color:#de350b}//----------> The below line throws panic as the state is empty <----------{color}*  resultsIterator, err := stub1.GetPrivateDataByRange(collection, "", "")  if resultsIterator != nil {  if err != nil  { return shim.Error(err.Error()) }  fmt.Println("resultsIterator") fmt.Println(resultsIterator)  mp := make(map string string)  for i := 0; resultsIterator.HasNext(); i++ { responseRange, err := resultsIterator.Next() if err != nil \{ return shim.Error(err.Error()) }  fmt.Println("Key: " + string(responseRange.Key)) fmt.Println("Value: " + string(responseRange.Value)) mp string(responseRange.Key)  = string(responseRange.Value) } defer resultsIterator.Close() jsonStr, _ := json.Marshal(mp) fmt.Println(jsonStr)  return shim.Success(jsonStr) } else { return shim.Success(  byte(`{}`)) }  }  ></description> </Issue>
