<Action id="52996" issue="34927" author="scottz" type="comment" created="2018-11-02 23:39:53.0" updateauthor="scottz" updated="2018-11-02 23:39:53.0"> <body><! CDATA To get our Linux commands using "sed -i" to work on platform mac OSX (FreeBSD),  we need to provide an extension parameter to the -i option.  Use "-e". It could serve as a file extension string on mac, while  on Linux (GNU) it will be interpreted differently but will end up   producing the same result as we do today without the -e  (as long as we do only one thing within the command string).  On mac, it will create/overwrite a backup file with the extension "-e"   before editing each file, e.g.:  chan1-create-TLS.json-e  Of course you can just ignore those backup files. Or afterwards do a "rm *-e".  So we must insert the -e after the -i.   And, in case you want to rerun runPte.sh to rerun testcases without making too many  backups of backups, we could just remove the "-e" backups after the sed command.   OR, we could restrict our filematching to only the json and txt files, by  appending " nt ". In other words:     Edit runPte.sh (or any other scripts using "sed -i"); replace lines like these:      sed -i "s/a/b/g" *      sed -i "s/testorgschannel$idx1/${Channel $idx }/g" CITest/$tcase/preconfig/channels/*  with:      sed -i -e "s/a/b/g" * nt       sed -i -e "s/testorgschannel$idx1/${Channel $idx }/g" CITest/$tcase/preconfig/channels/* nt       // (leaves a single backup filename-e for each edited txt or json filename)  OR with:      sed -i -e "s/a/b/g" *      sed -i -e "s/testorgschannel$idx1/${Channel $idx }/g" CITest/$tcase/preconfig/channels/*      rm  *-e      rm  CITest/$tcase/preconfig/channels/*-e      // (leaves no backup files, but could remove other files in the directories if they end in "-e")  ></body> </Action>
<Action id="52997" issue="34927" author="scottz" type="comment" created="2018-11-02 23:42:41.0" updateauthor="scottz" updated="2018-11-02 23:42:41.0"> <body><! CDATA For simple language, useful reference:  https://unix.stackexchange.com/questions/13711/differences-between-sed-on-mac-osx-and-other-standard-sed  ></body> </Action>
<Action id="53235" issue="34927" author="scottz" type="comment" body=" https://gerrit.hyperledger.org/r/#/c/27481/  is the solution in branch release-1.2 to make runPTE.sh and any other scripts using &quot;sed -i&quot; to be portable to work on mac and linux." created="2018-11-08 23:36:21.0" updateauthor="scottz" updated="2018-11-08 23:36:21.0"/>
<Action id="53542" issue="34927" author="scottz" type="comment" created="2018-11-16 19:36:17.0" updateauthor="scottz" updated="2018-11-16 19:36:17.0"> <body><! CDATA Prop forward to release-1.3  https://gerrit.hyperledger.org/r/#/c/27607/ Prop forward to master  https://gerrit.hyperledger.org/r/#/c/27606/  ></body> </Action>
