<Issue id="32830" key="FAB-11590" number="11590" project="10002" reporter="kchristidis" assignee="c0rwin" creator="kchristidis" type="10001" summary="As a Fabric user, I want to be able to reconfigure my barebones, single-instance etcd/raft-based ordering service" priority="3" resolution="10000" status="6" created="2018-08-14 17:07:00.0" updated="2019-01-15 23:07:05.0" resolutiondate="2018-10-18 22:06:06.0" votes="0" watches="4" workflowId="44067"> <description><! CDATA N.B. In this story we will work with the following configuration updates: # Type A updates that are _not_ channel creation requests: e.g. a configuration updates that modifies {{BatchSize}}. The channel creation requests will be covered as a sub-task in FAB-11591. # Type B updates that do not expand the consenter set: e.g. a configuration update that modifies {{MaxSizePerMsg}}, or the current consenter's client TLS certificate. The transactions that expand the consenter set should be covered as a sub-task in FAB-11161.  h2. Notation * Type A configuration transaction: a configuration update that modifies anything but the {{ConsensusType.Metadata}} field, where we store the list of Raft consenters. * Type B configuration transaction: The opposite of a Type A configuration.  For more info,  the design doc is your best friend|https://docs.google.com/document/d/138Brlx2BiYJm5bzFk_B0csuEUKYdXXr7Za9V7C76dwo/edit . h2. Acceptance criteria h3. Scenario 1 (Type A gets processed w/o issues) # User edits {{configtx.yaml}} so as to have a network with a single-node etcd/raft-based ordering service and a system channel that is also an application channel. Assume {{BatchSize}} is set to 1. # User launches single-node etcd/raft-based ordering service. # User invokes the Broadcast RPC to send a Type A configuration update, e.g. one that increases {{BatchSize}} to 2. A SUCCESS status is returned. (For now, avoid any channel-creation requests. These are technically Type A as well.) # User invokes the Deliver RPC and receives the genesis block and a configuration block that lists the {{BatchSize}} as having a value of 2.  h3. Scenario 2 (Type B that expands consenter set gets rejected) # User edits {{configtx.yaml}} so as to have a network with a single-node etcd/raft-based ordering service and a system channel that is also an application channel. Assume {{BatchSize}} is set to 1. # User launches single-node etcd/raft-based ordering service. # User invokes the Broadcast RPC to send a Type B configuration update that expands the consenter. This request is rejected.  h3. Scenario 3 (Type B gets processed w/o issues) # User edits {{configtx.yaml}} so as to have a network with a single-node etcd/raft-based ordering service and a system channel that is also an application channel. # User launches single-node etcd/raft-based ordering service. # User invokes the Broadcast RPC to send a Type B configuration update that modifies one of the configuration settings introduced in FAB-11861. A SUCCESS status is returned. # User invokes the Deliver RPC and receives the genesis block and a configuration block that shows that the updated value in Step 3 above.  ></description> </Issue>
