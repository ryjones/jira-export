<Action id="56259" issue="37186" author="guoger" type="comment" created="2019-01-28 12:36:17.0" updateauthor="guoger" updated="2019-01-28 12:36:17.0"> <body><! CDATA I propose to prevent two-node cluster in our integration test (adding a node), so the probability of failure is reduced by 10x  cc  ~kchristidis   ~yacovm   ></body> </Action>
<Action id="56267" issue="37186" author="kchristidis" type="comment" body="How is the 10% probability derived again?" created="2019-01-28 15:50:55.0" updateauthor="kchristidis" updated="2019-01-28 15:50:55.0"/>
<Action id="56309" issue="37186" author="kchristidis" type="comment" created="2019-01-29 05:53:18.0" updateauthor="kchristidis" updated="2019-01-29 05:53:18.0"> <body><! CDATA Via Jay in RC:  {code} r.randomizedElectionTimeout = r.electionTimeout + globalRand.Intn(r.electionTimeout) {code}  So:  * A node will start election at any time between  10-20) (10 slots) * There are 10*10 combinations for two nodes, and 10 out of 100 is they campaigning at the same time  ></body> </Action>
<Action id="56311" issue="37186" author="kchristidis" type="comment" body="Good with not having tests with just two nodes." created="2019-01-29 06:31:00.0" updateauthor="kchristidis" updated="2019-01-29 06:31:00.0"/>
<Action id="56744" issue="37186" author="guoger" type="comment" body="https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/5441/console" created="2019-02-07 13:11:03.0" updateauthor="guoger" updated="2019-02-07 13:11:03.0"/>
<Action id="57119" issue="37186" author="guoger" type="comment" created="2019-02-18 08:12:47.0" updateauthor="guoger" updated="2019-02-18 08:12:47.0"> <body><! CDATA While I was calculating the probability of vote split, I overlooked another factor that contributes to it: *lease-check when {{CheckQuorum}} is enabled*  the issue is described in detail  here|https://github.com/etcd-io/etcd/issues/10483   another fact is, when we have a 4 nodes cluster and 3/4 is alive, if a vote split happens among two nodes, the remaining 1 node doesn't make a quorum still...  We need to have a 5 nodes cluster and crash one of them in our integration test, to gain a certain level of determinism...  ></body> </Action>
<Action id="57280" issue="37186" author="kchristidis" type="comment" body="Roger. Let&apos;s move to 5 nodes then." created="2019-02-19 01:11:49.0" updateauthor="kchristidis" updated="2019-02-19 01:11:49.0"/>
<Action id="57363" issue="37186" author="guoger" type="comment" body="https://gerrit.hyperledger.org/r/c/29412" created="2019-02-20 15:05:33.0" updateauthor="guoger" updated="2019-02-20 15:05:33.0"/>
<Action id="57540" issue="37186" author="guoger" type="comment" body="With raft lib version being bumped, the probability of this happening is fairly low, and we can backlog this for now." created="2019-02-25 13:33:38.0" updateauthor="guoger" updated="2019-02-25 13:33:38.0"/>
