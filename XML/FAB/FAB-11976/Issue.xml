<Issue id="33710" key="FAB-11976" number="11976" project="10002" reporter="sykesm" assignee="ales" creator="sykesm" type="10004" summary="Unfriendly log record and error message from state based validation" priority="4" resolution="10000" status="6" created="2018-09-12 21:55:29.0" updated="2018-09-17 05:35:36.0" resolutiondate="2018-09-17 05:35:21.0" votes="0" watches="2" workflowId="45011"> <description><! CDATA This is related to FAB-11968. When we look at the logs, this is what we get:  {code} 2018-09-12 17:46:06.799 EDT  vscc  GetValidationParameterForKey -> ERRO 010 could not retrieve metadata for mycc:mycollection:WM??)???>\kM?:?(?Ku????{?? ??: collection config not defined for chaincode  mycc , pass the collection configuration upon chaincode definition/instantiation {code}  That's coming from this code:  {code} 	var mdMap map string   byte 	if coll == "" { 		mdMap, err = state.GetStateMetadata(cc, key) 		if err != nil { 			err = errors.WithMessage(err, fmt.Sprintf("could not retrieve metadata for %s:%s:%s", cc, coll, key)) 			logger.Errorf(err.Error()) 			return nil, err 		} 	} else { 		mdMap, err = state.GetPrivateDataMetadata(cc, coll, key) 		if err != nil { 			err = errors.WithMessage(err, fmt.Sprintf("could not retrieve metadata for %s:%s:%s", cc, coll, key)) 			logger.Errorf(err.Error()) 			return nil, err 		} 	} {code}  If keys can contain arbitrary (non-printable) data, we should use hex encoding or similar.  /cc  ~ales   ></description> </Issue>
