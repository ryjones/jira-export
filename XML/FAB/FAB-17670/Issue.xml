<Issue id="44672" key="FAB-17670" number="17670" project="10002" reporter="senthil1" assignee="senthil1" creator="senthil1" type="10003" summary="merge ledgerstorage package to kvledger package" priority="3" resolution="10000" status="6" created="2020-03-26 17:48:33.0" updated="2020-04-18 05:40:41.0" resolutiondate="2020-04-18 05:40:41.0" votes="0" watches="1" workflowId="58590" archived="N"> <description><! CDATA The  ledgerstorage|https://github.com/hyperledger/fabric/tree/master/core/ledger/ledgerstorage  package encapsulates both  pvtdata storage|https://github.com/hyperledger/fabric/tree/master/core/ledger/pvtdatastorage  andÂ   block storage|https://github.com/hyperledger/fabric/tree/master/common/ledger/blkstorage . We needed this package as * we had to have  2-phase commit between pvtdata storage and block storage|https://github.com/hyperledger/fabric/blob/release-1.3/core/ledger/ledgerstorage/store.go#L125 . * we had a  recovery logic|https://github.com/hyperledger/fabric/blob/release-1.3/core/ledger/ledgerstorage/store.go#L230  that was needed after a commit failure or peer crash between pvtdata commit and blockstore commit. * we treated pvtdata store as a pvt blockstore and blockstore as public block store.  After introducing the support for peer rollback, we removed the 2-phase commit between requirement between the pvtdata storage and block storage. As a result, the pvtdata storage can be ahead of blockstore. Hence, the recovery logic was also remoted. Hence, the motivation for having ledgerstorage package became feeble and hence, we remove it.   Further, core/ledger, core/ledger/ledgerstore, core/ledger/ledgermgmt create confusion and provide disinformation.  ></description> </Issue>
