<Issue id="20221" key="FAB-5803" number="5803" project="10002" reporter="yacovm" assignee="yacovm" creator="yacovm" type="10004" summary="Peer crashes when on top of v1.0.1 ledger" priority="2" resolution="10000" status="6" created="2017-08-16 22:33:21.0" updated="2018-07-20 14:14:07.0" resolutiondate="2017-08-19 18:33:28.0" votes="0" watches="2" workflowId="39760"> <description><! CDATA More information TBD {quote} 2017-08-16 21:30:06.519 UTC  gossip/state  NewGossipCoordinatedStateProvider -> INFO 028 Updating node metadata information, current ledger sequence is at = 420136, next expected block is = 420137 2017-08-16 21:30:06.522 UTC  cscc  Init -> INFO 029 Init CSCC 2017-08-16 21:30:06.522 UTC  sccapi  deploySysCC -> INFO 02a system chaincode cscc/channel12-1(github.com/hyperledger/fabric/core/scc/cscc) deployed 2017-08-16 21:30:06.523 UTC  sccapi  deploySysCC -> INFO 02b system chaincode lscc/channel12-1(github.com/hyperledger/fabric/core/scc/lscc) deployed 2017-08-16 21:30:06.523 UTC  escc  Init -> INFO 02c Successfully initialized ESCC 2017-08-16 21:30:06.523 UTC  sccapi  deploySysCC -> INFO 02d system chaincode escc/channel12-1(github.com/hyperledger/fabric/core/scc/escc) deployed 2017-08-16 21:30:06.523 UTC  sccapi  deploySysCC -> INFO 02e system chaincode vscc/channel12-1(github.com/hyperledger/fabric/core/scc/vscc) deployed 2017-08-16 21:30:06.523 UTC  qscc  Init -> INFO 02f Init QSCC 2017-08-16 21:30:06.523 UTC  sccapi  deploySysCC -> INFO 030 system chaincode qscc/channel12-1(github.com/hyperledger/fabric/core/chaincode/qscc) deployed 2017-08-16 21:30:06.523 UTC  sccapi  deploySysCC -> INFO 031 system chaincode (rscc,github.com/hyperledger/fabric/core/chaincode/rscc) disabled 2017-08-16 21:30:06.523 UTC  nodeCmd  serve -> INFO 032 Starting peer with ID= name:"990e677022394afe8b8dc124ea17abbf-fabric-peer-org1-21020a"  , network ID= 990e677022394afe8b8dc124ea17abbf , address= **********  2017-08-16 21:30:06.525 UTC  nodeCmd  serve -> INFO 033 Started peer with ID= name:"990e677022394afe8b8dc124ea17abbf-fabric-peer-org1-21020a"  , network ID= 990e677022394afe8b8dc124ea17abbf , address= ****************  2017-08-16 21:30:09.434 UTC  chaincode  ExecuteChaincode -> ERRO 034 Error executing chaincode: premature execution - chaincode (sample_cc_ch12:v0) launched and waiting for registration 2017-08-16 21:30:09.434 UTC  endorser  simulateProposal -> ERRO 035 failed to invoke chaincode name:"sample_cc_ch12"  on transaction 053fcacb0b4df5ce5b9e9072708e27f447dc282541c7e88449a09a40f173ef9a, error: Error executing chaincode: premature execution - chaincode (sample_cc_ch12:v0) launched and waiting for registration 2017-08-16 21:30:12.905 UTC  gossip/state  commitBlock -> ERRO 036 Got error while committing(Expected block number=0, recived block number=420137) 2017-08-16 21:30:12.906 UTC  gossip/state  deliverPayloads -> CRIT 037 Cannot commit block to the ledger due to Expected block number=0, recived block number=420137 panic: Cannot commit block to the ledger due to Expected block number=0, recived block number=420137  goroutine 147  running : panic(0x2aa35c78640, 0xc421e40350) 	/opt/go/src/runtime/panic.go:500 +0x408 github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc42019cfc0, 0x2aa35def904, 0x2b, 0xc421e40290, 0x1, 0x1) 	/root/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x136 github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads(0xc4230ee500) 	/root/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:490 +0xac8 created by github.com/hyperledger/fabric/gossip/state.NewGossipCoordinatedStateProvider 	/root/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:230 +0xb38{quote}    ></description> </Issue>
