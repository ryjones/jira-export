<Action id="40555" issue="27914" author="denyeart" type="comment" created="2018-02-22 05:15:38.0" updateauthor="denyeart" updated="2018-02-22 05:15:38.0"> <body><! CDATA  ~yacovm  You are wise in this area, could I ask you to review the various core.yaml port bindings and clean up as necessary.   ></body> </Action>
<Action id="40558" issue="27914" author="yacovm" type="comment" created="2018-02-22 08:07:15.0" updateauthor="yacovm" updated="2018-02-22 08:43:32.0"> <body><! CDATA This is aligned with the  code|https://github.com/hyperledger/fabric/blob/master/peer/node/start.go#L350-L375 .    ></body> </Action>
<Action id="40560" issue="27914" author="yacovm" type="comment" created="2018-02-22 08:51:57.0" updateauthor="yacovm" updated="2018-02-22 08:51:57.0"> <body><! CDATA {quote}Instead, I think chaincodeListenAddress should default to peerListenAddress and chaincodeAddress should default to peerAddress.{quote} I don't think it's a good idea to change that now for v1.1.   ~muralisr  what do you think about changing that to v1.2?   ></body> </Action>
<Action id="40676" issue="27914" author="denyeart" type="comment" created="2018-02-23 19:25:58.0" updateauthor="denyeart" updated="2018-02-23 19:25:58.0"> <body><! CDATA I've deferred to v1.2.     ~muralisr  What change (if any) would you recommend in 1.2 timeframe to make this less confusing?  ></body> </Action>
<Action id="44775" issue="27914" author="kchristidis" type="comment" body=" ~muralisr : Can you please update with thoughts and plan of attack (if any) for this? Trying to figure out what goes on in 1.2." created="2018-05-21 18:41:39.0" updateauthor="kchristidis" updated="2018-05-21 18:41:39.0"/>
<Action id="45937" issue="27914" author="kchristidis" type="comment" body="Any updates on this?" created="2018-06-14 16:10:13.0" updateauthor="kchristidis" updated="2018-06-14 16:10:13.0"/>
<Action id="46090" issue="27914" author="denyeart" type="comment" body=" ~muralisr  I&apos;ll defer to v1.3 but would still like your thoughts!" created="2018-06-18 12:01:26.0" updateauthor="denyeart" updated="2018-06-18 12:01:26.0"/>
<Action id="46118" issue="27914" author="muralisr" type="comment" created="2018-06-18 14:00:26.0" updateauthor="muralisr" updated="2018-06-18 14:00:26.0"> <body><! CDATA  ~denyeart  Agree that's the right thing to do at this stage. On the face of it looks like a reasonable change (not quite sure about "chaincodeAddress should default to peerAddress" though) but would need to understand the ripple effect (tests, docs, and user experiance).  Suggest we tee it up early for 1.3 to give users adequate notice if we end up making changes here.  (Apologize for the delay on this one.)     ></body> </Action>
<Action id="53848" issue="27914" author="denyeart" type="comment" body=" ~muralisr  As we are closing down v1.4.0, I&apos;ve deferred to v2.0.0.   ~muralisr  as we keep punting this each release, would you be able to take a look and make suggestions for early in v2.0.0 cycle?" created="2018-11-27 15:26:53.0" updateauthor="denyeart" updated="2018-11-27 15:26:53.0"/>
<Action id="53853" issue="27914" author="muralisr" type="comment" body=" ~denyeart  I will do that. In any case 2.0.0 gives more leeway for things like backwards compat." created="2018-11-27 16:35:06.0" updateauthor="muralisr" updated="2018-11-27 16:35:06.0"/>
<Action id="64074" issue="27914" author="jyellick" type="comment" body=" ~muralisr  are you still planning to make this fix for v2.0?" created="2019-09-24 16:22:15.0" updateauthor="jyellick" updated="2019-09-24 16:22:15.0"/>
<Action id="65832" issue="27914" author="guoger" type="comment" created="2019-11-28 08:44:40.0" updateauthor="guoger" updated="2019-11-28 08:44:40.0"> <body><! CDATA is this to solve name confusion?  i think we probably want to give it more clear names, like - {{AdvertisedChaincodeListenAddress}} - {{ChaincodeListenAddress}} - {{AdvertisedPeerListenAddress}} - {{PeerListenAddress}}  if we simply change the default mapping w/o changing names, i imagine lots of users would complain when they switch to 2.0  ></body> </Action>
<Action id="69231" issue="27914" author="wlahti" type="comment" body=" ~dbshah  Similar to Jay in his comment, I&apos;m just trying to understand the motivation behind this request. Is it naming confusion or something else? What&apos;s the real end goal in your mind for this task? If we&apos;re going to make any changes here, seems like now would be a good time before we hit v2.2.0, which is the next LTS. " created="2020-05-13 15:41:55.0" updateauthor="wlahti" updated="2020-05-13 15:42:55.0"/>
<Action id="69232" issue="27914" author="dbshah" type="comment" body=" ~wlahti  Yup it is for the naming confusion." created="2020-05-13 16:34:03.0" updateauthor="dbshah" updated="2020-05-13 16:34:03.0"/>
<Action id="69319" issue="27914" author="wlahti" type="comment" body=" ~sykesm  Would you mind chiming in here with thoughts on the proper course of action (and when you think is the right time to implement it)? Since this request deals with the defaults for chaincodeAddress and chaincodeListenAddress, we don&apos;t want to just break existing client setups while we&apos;re in between major releases. " created="2020-05-22 15:21:27.0" updateauthor="wlahti" updated="2020-05-22 15:21:27.0"/>
<Action id="69418" issue="27914" author="sykesm" type="comment" created="2020-06-08 22:48:31.0" updateauthor="sykesm" updated="2020-06-08 22:48:31.0"> <body><! CDATA  ~tsharris  just pinged me on this asking me to comment.  IMO, this has been carried for so long it's pretty clear it's not a heavy hitter. With that:  First, changing the names isn't worth the churn. Ensuring the code matches the comments in the sample configuration seems more important.  There are multiple gRPC servers running in the peer. Clients of peer services like gossip, discovery, and the endorser are expected to access the peer through the server that's listening on {{peer.listenAddress}}. Instances of chaincode that are started by the peer are expected to access the chaincode server listening on {{peer.chaincodeListenAddress}}.  Depending on the network topology, the listen addresses may not be accessible to the clients. For example, the default {{peer.listenAddress}} is {{0.0.0.0:7051}}. Clients can't connect to that address since it's not valid. This is what {{peer.address}} is used for. When set, {{peer.address}} is what the peer advertises to clients. If it's not set, the peer will actually enumerate the interfaces and choose the first non-loopback address it finds when {{peer.addressAutoDetect}} is enabled. This doesn't always work as the auto-detected address may not be accessible.  Imagine a multi-home host (like the classic SoftLayer hosts) with an internal and external network. Clients that are not on the local VLAN need to use the external address so this may need to be explicitly configured. Virtual IPs that automatically choose the correct network path are another example of where {{peer.address}} might be needed.  Similarly, chaincode instances need to connect to the peer. The server will listen on the {{chaincodeListenAddress}} (if specified) or the IP from {{listenAddress}} and port 7052 if it's not. And, just like {{peer.address}}, {{chaincodeAddress}} is used to tell the chaincode what to connect to. In a Docker for macOS environment, for example, the {{chaincodeAddress}} can be set to {{docker.host.internal}} to connect to chaincode server in a peer running on the macOS host.  I haven't walked all the code but the one thing that looks wrong to me is this comment:  {code} # The endpoint the chaincode for this peer uses to connect to the peer. # If this is not specified, the chaincodeListenAddress address is selected. # And if chaincodeListenAddress is not specified, address is selected from # peer listenAddress. # chaincodeAddress: 0.0.0.0:7052 {code}  I believe if {{chaincodeListenAddress}} is not specified, the chaincode should be told to connect to {{peer.address}} instead of {{peer.chaincodeListenAddress}}. Once the behavior is verified, I think that's the only thing that needs to change is the comment.  ></body> </Action>
<Action id="69426" issue="27914" author="tsharris" type="comment" body="The behavior is verified in  this|https://github.com/hyperledger/fabric/blob/e137a20c5cdc7433c6faa443d51890b1d99a7c2e/internal/peer/node/start_test.go#L84  unit test. As noted by Matt, this would require updating the comment in the sampleconfig yaml. " created="2020-06-09 17:55:22.0" updateauthor="tsharris" updated="2020-06-09 17:55:22.0"/>
<Action id="69428" issue="27914" author="tsharris" type="comment" body=" https://github.com/hyperledger/fabric/pull/1386 " created="2020-06-10 00:22:14.0" updateauthor="tsharris" updated="2020-06-10 00:22:14.0"/>
