<Issue id="29338" key="FAB-9474" number="9474" project="10002" reporter="sykesm" creator="sykesm" type="10002" summary="TestMain in bccsp/factory/factory_test.go causes package tests to run 4 times" priority="4" resolution="10001" status="6" created="2018-04-11 19:27:27.0" updated="2020-01-22 22:32:21.0" resolutiondate="2020-01-22 22:32:21.0" votes="0" watches="3" workflowId="44274"> <description><! CDATA The TestMain in the bccsp/factory package iterates over 4 configurations and runs the package tests in each of the iterations.  1   It appears the original intent may have been to run all of the tests with each of the configurations. That said, the the InitFactories function used to set the configuration protects the config with a sync.Once. Also, there is an InitFactories call immediately after with nil configuration. Basically, this structure doesn't seem to make any sense and some cleanup or refactoring is needed.  1: https://github.com/hyperledger/fabric/blob/cf7d15d5cae1f503aaec8130a0c2d66f53091c11/bccsp/factory/factory_test.go#L101-L106  ></description> </Issue>
