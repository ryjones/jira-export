<Issue id="37509" key="FAB-14104" number="14104" project="10002" reporter="wlahti" assignee="wlahti" creator="wlahti" type="10004" summary="Attempting to send an install proposal with nonexistent chaincode name results in peer panic" priority="2" resolution="10000" status="6" created="2019-02-07 21:22:21.0" updated="2019-04-05 16:24:14.0" resolutiondate="2019-04-05 16:24:14.0" votes="0" watches="2" workflowId="49120"> <description><! CDATA Sending an invoke proposal to install a chaincode meant for "_lifecycle" with a nonexistent chaincode name (aka the ChaincodeId in the ChaincodeSpec): {code:java} ccInput := &pb.ChaincodeInput{Args:     byte{  byte("InstallChaincode"), installChaincodeArgsBytes}}  cis := &pb.ChaincodeInvocationSpec{  ChaincodeSpec: &pb.ChaincodeSpec{  ChaincodeId: &pb.ChaincodeID{Name: <nonexistent-cc-name>},  Input:       ccInput, }, }{code} Results in a panic on the peer: {code:java}  e  org1.peer1  panic: runtime error: invalid memory address or nil pointer dereference  e  org1.peer1   signal SIGSEGV: segmentation violation code=0x1 addr=0x18 pc=0x49bf11e   e  org1.peer1    e  org1.peer1  goroutine 780  running :  e  org1.peer1  github.com/hyperledger/fabric/core/chaincode/lifecycle.(*SimpleQueryExecutorShim).GetState(0xc00281c960, 0xc002cf78e0, 0x18, 0x4, 0xc002cf78e0, 0x18, 0x2, 0xc00518bde4)  e  org1.peer1  	/Users/wlahti/gopath/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/ledger_shim.go:116 +0x2e  e  org1.peer1  github.com/hyperledger/fabric/core/chaincode/lifecycle.(*Serializer).DeserializeMetadata(0xc00000e4d0, 0x4df0279, 0xa, 0xc0027b4300, 0x4, 0x4f53560, 0xc00281c960, 0x0, 0x0, 0x0, ...)  e  org1.peer1  	/Users/wlahti/gopath/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/serializer.go:308 +0x98  e  org1.peer1  github.com/hyperledger/fabric/core/chaincode/lifecycle.(*Lifecycle).ChaincodeDefinitionIfDefined(0xc0000e6f00, 0xc0027b4300, 0x4, 0x0, 0x0, 0x0, 0x0, 0xc003c0ac58, 0x44e5252)  e  org1.peer1  	/Users/wlahti/gopath/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/deployedcc_infoprovider.go:71 +0x10d  e  org1.peer1  github.com/hyperledger/fabric/core/chaincode/lifecycle.(*Lifecycle).ChaincodeDefinition(0xc0000e6f00, 0xc0027b4300, 0x4, 0x0, 0x0, 0xc003c0acb0, 0x4a04183, 0xc00016fb30, 0xc0027b4300)  e  org1.peer1  	/Users/wlahti/gopath/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/legacy_lifecycle.go:68 +0x74  e  org1.peer1  github.com/hyperledger/fabric/core/endorser.(*SupportImpl).GetChaincodeDefinition(0xc000374c60, 0xc0027b4300, 0x4, 0x0, 0x0, 0xc003c0ae70, 0x2, 0x2, 0xc00015a648)  e  org1.peer1  	/Users/wlahti/gopath/src/github.com/hyperledger/fabric/core/endorser/support.go:154 +0x8e  e  org1.peer1  github.com/hyperledger/fabric/core/endorser.(*Endorser).SimulateProposal(0xc000096f40, 0xc002dd8bd0, 0xc003631a40, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)  e  org1.peer1  	/Users/wlahti/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:233 +0xe21  e  org1.peer1  github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal(0xc000096f40, 0x4f70100, 0xc0031fb470, 0xc0036314a0, 0x0, 0x0, 0x0)  e  org1.peer1  	/Users/wlahti/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:507 +0x3c9 {code}  ></description> </Issue>
