<Issue id="19307" key="FAB-5348" number="5348" project="10002" reporter="jtrayfield" creator="jtrayfield" type="10004" summary="Admin certificate is generated as a CA certificate" priority="3" resolution="10000" status="6" created="2017-07-17 19:07:16.0" updated="2018-07-20 14:13:47.0" resolutiondate="2017-09-04 13:34:18.0" votes="0" watches="3" workflowId="39470"> <description><! CDATA I get this error from the CLI:     Channel name : OATS  Creating channel...  CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/oats.ibm.com/peers/peer0.oats.ibm.com/tls/ca.crt  CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/oats.ibm.com/peers/peer0.oats.ibm.com/tls/server.key  CORE_PEER_LOCALMSPID=OATSMSP  CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock  CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/oats.ibm.com/peers/peer0.oats.ibm.com/tls/server.crt  CORE_PEER_TLS_ENABLED=true  CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/oats.ibm.com/users/Admin@oats.ibm.com/msp  CORE_PEER_ID=cli  CORE_LOGGING_LEVEL=DEBUG  CORE_PEER_ADDRESS=peer0.oats.ibm.com:7051  {color:#ff0000}2017-07-17 18:56:27.429 UTC  main  main -> ERRO 001 Cannot run peer because error when setting up MSP from directory /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/oats.ibm.com/users/Admin@oats.ibm.com/msp: err admin 0 is invalid, validation error Could not obtain certification chain, err A CA certificate cannot be used directly by this MSP{color}  !!!!!!!!!!!!!!! Channel creation failed !!!!!!!!!!!!!!!!  ========= ERROR !!! FAILED to execute End-2-End Scenario ===========     I think the root cause is that the Admin cert is a CA cert:  $ openssl x509 -text -noout -in crypto-config/peerOrganizations/oats.ibm.com/users/Admin\@oats.ibm.com/msp/admincerts/ca.oats.ibm.com-cert.pem   Certificate:      Data:          Version: 3 (0x2)          Serial Number:              31:58:e0:0f:93:51:92:ab:0c:5b:36:77:ac:3c:38:ce      Signature Algorithm: ecdsa-with-SHA256          Issuer: C=US, ST=California, L=San Francisco, O=oats.ibm.com, CN=ca.oats.ibm.com          Validity              Not Before: Jul 17 18:26:27 2017 GMT              Not After : Jul 15 18:26:27 2027 GMT          Subject: C=US, ST=California, L=San Francisco, O=oats.ibm.com, CN=ca.oats.ibm.com          Subject Public Key Info:              Public Key Algorithm: id-ecPublicKey                  Public-Key: (256 bit)                  pub:                       04:1b:48:47:3d:1c:9b:9c:dc:0f:9e:22:5e:cc:4c:                      76:d0:cc:27:23:ea:72:22:74:57:de:7c:84:69:73:                      51:4e:61:bd:d3:34:75:72:a1:8c:89:f0:5e:78:c7:                      5f:0d:34:8c:ba:d9:36:42:37:39:1b:35:78:d7:a3:                      b2:7d:1d:ae:ce                  ASN1 OID: prime256v1                  NIST CURVE: P-256          X509v3 extensions:              X509v3 Key Usage: critical                  Digital Signature, Key Encipherment, Certificate Sign, CRL Sign              X509v3 Extended Key Usage:                   Any Extended Key Usage, TLS Web Server Authentication              X509v3 Basic Constraints: critical                  CA:TRUE     When I replace the admin cert with the admin MSP signcert, I don't get the error anymore.        ></description> </Issue>
