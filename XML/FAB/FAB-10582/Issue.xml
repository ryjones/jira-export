<Issue id="30957" key="FAB-10582" number="10582" project="10002" reporter="rlalgowdar" assignee="c0rwin" creator="rlalgowdar" type="10004" summary="60 seconds delay in peer commit pvt data blocks" priority="2" resolution="10000" status="6" created="2018-06-07 22:54:33.0" updated="2018-07-20 14:16:56.0" resolutiondate="2018-06-20 08:46:35.0" votes="0" watches="7" workflowId="42429"> <description><! CDATA While running PTE tool to run traffic on Fabric network and do invokes on marbles_private chain code, I see 60 seconds delays in committing blocks at peer side. The orderer has already cut all blocks.  From peer logs I can see 60 seconds cycle similar to below log entries (Note: the entries below are from earlier test however same pattern can be seen in attached log)  2018-06-07 19:07:32.421 UTC  kvledger  CommitWithPvtData -> INFO 0fa Channel  testorgschannel1 : Committed block  16  with 10 transaction(s) 2018-06-07 19:08:32.473 UTC  kvledger  CommitWithPvtData -> INFO 106 Channel  testorgschannel1 : Committed block  17  with 10 transaction(s) 2018-06-07 19:09:32.525 UTC  kvledger  CommitWithPvtData -> INFO 112 Channel  testorgschannel1 : Committed block  18  with 10 transaction(s) 2018-06-07 19:10:32.575 UTC  kvledger  CommitWithPvtData -> INFO 11e Channel  testorgschannel1 : Committed block  19  with 10 transaction(s)   Also I see following in logs.   2018-06-07 21:58:04.510 UTC  gossip/privdata  StoreBlock -> WARN 3b02^  0m Could not fetch all missing collection private write sets from remote peers. Will commit block with missing private write sets: txID: 3f4d129c03c939e990aa27fbd71c682bb16ada65f7de85f9b1da0bcc3fc72793, seq: 3, namespace: marbles_cc_priv_ch1, collection: collectionMarbles, hash: d8a27a0f29cce7c12b480818ef5a386f44f6fcda2c834e8d2ccbca0cd061d525 txID: f3cc8080a4c2466ce05bcb72aae9cc59344b3b8f3db2ad857c001becb4745d34, seq: 0, namespace: marbles_cc_priv_ch1, collection: collectionMarbles, hash: cb9bc301436f64286e1a9196f3c4a23102052a226eaddbd31256ab4304fb04e7 # Does the above warning message cause the peer commit delays? # If it is, why does the peer wait 60 seconds?  and why is it not committing other blocks while waiting for that one? Waiting for one block should not halt the committing of every block. Let us know if you want a separate bug to address this issue.  I suspect pullRetryThreshold can be causing this delay however needs to be verified from debug logs attached.     This is blocking SVT runs as the invokes are getting really slow. Let me know if further details needed.     ></description> </Issue>
