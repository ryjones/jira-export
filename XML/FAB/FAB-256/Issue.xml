<Issue id="12557" key="FAB-256" number="256" project="10002" reporter="jjjjibm" assignee="mastersingh24" creator="jjjjibm" type="10004" summary=" node-SDK  chain.addPeer(&quot;www.amazon.com&quot;) crashes SDK" priority="3" resolution="10000" status="6" created="2016-08-27 01:05:26.0" updated="2018-07-20 14:10:05.0" resolutiondate="2016-09-02 19:08:44.0" votes="0" watches="2" workflowId="36136"> <description><! CDATA Description:  I added this code to my test case:  *console.log("Now try to add invalid peer"); chain.addPeer("www.amazon.com"); * Here is the output:  _# Add and get peers Now try to add invalid peer /opt/gopath/src/github.com/hyperledger/fabric/sdk/node/lib/hfc.js:2168 return str.length >= suffix.length && str.substr(str.length - suffix.lengt ^ TypeError: Cannot read property 'length' of null at endsWith (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/lib/hfc.js:2168:15) at parseUrl (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/lib/hfc.js:2137:9) at new Endpoint (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/lib/hfc.js:1775:20) at new Peer (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/lib/hfc.js:1718:19) at Chain.addPeer (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/lib/hfc.js:255:20) at Test.<anonymous> (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/test/unit/chain-tests.js:798:8) at Test.bound  as _cb  (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/node_modules/tape/lib/test.js:63:32) at Test.run (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/node_modules/tape/lib/test.js:82:10) at Test.bound  as run  (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/node_modules/tape/lib/test.js:63:32) at Immediate.next  as _onImmediate  (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/node_modules/tape/lib/results.js:70:15) ERROR running chain-tests!  (1) Entering an invalid url should not crash the SDK.  Instead, it should return an error to the application.  (2) addPeer() probably needs a callback so it can return an err.  The callback could return the peer object when the call succeeds.  _ How to recreate: 1.Edit chain-tests.js and add this code to a test case: console.log("Now try to add invalid peer"); chain.addPeer("www.amazon.com");  2.Run make node-sdk-unit-tests as usual.    ></description> </Issue>
