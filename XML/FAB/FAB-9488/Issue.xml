<Issue id="29359" key="FAB-9488" number="9488" project="10002" reporter="bstasyszyn" assignee="yacovm" creator="bstasyszyn" type="10004" summary="Race condition in Discovery Client Send" priority="3" resolution="10000" status="6" created="2018-04-12 16:27:05.0" updated="2018-07-20 14:16:18.0" resolutiondate="2018-04-16 18:18:15.0" votes="0" watches="2" workflowId="41830"> <description><! CDATA The following race condition was reported when attempting to call discovery.Client.Send concurrently on multiple peers using the same request:  WARNING: DATA RACE Write at 0x00c42000c0e0 by goroutine 11: github.com/hyperledger/fabric-sdk-go/internal/github.com/hyperledger/fabric/discovery/client.(*client).Send() /Users/bob.stasyszyn/go/src/github.com/hyperledger/fabric-sdk-go/internal/github.com/hyperledger/fabric/discovery/client/client.go:117 +0xa7 github.com/hyperledger/fabric-sdk-go/pkg/fab/discover.(*processor).Process() github.com/hyperledger/fabric-sdk-go/pkg/fab/discover/_test/_obj_test/discover.go:161 +0x4e1 github.com/hyperledger/fabric-sdk-go/pkg/fab/discover.(*Client).Send.func1() github.com/hyperledger/fabric-sdk-go/pkg/fab/discover/_test/_obj_test/discover.go:73 +0xf7  Previous write at 0x00c42000c0e0 by goroutine 10: github.com/hyperledger/fabric-sdk-go/internal/github.com/hyperledger/fabric/discovery/client.(*client).Send() /Users/bob.stasyszyn/go/src/github.com/hyperledger/fabric-sdk-go/internal/github.com/hyperledger/fabric/discovery/client/client.go:117 +0xa7 github.com/hyperledger/fabric-sdk-go/pkg/fab/discover.(*processor).Process() github.com/hyperledger/fabric-sdk-go/pkg/fab/discover/_test/_obj_test/discover.go:161 +0x4e1 github.com/hyperledger/fabric-sdk-go/pkg/fab/discover.(*Client).Send.func1() github.com/hyperledger/fabric-sdk-go/pkg/fab/discover/_test/_obj_test/discover.go:73 +0xf7  Looks like Send is modifying the request.   ></description> </Issue>
