<Issue id="38733" key="FAB-14799" number="14799" project="10002" reporter="guoger" assignee="guoger" creator="guoger" type="10003" summary="Add metrics to indicate active nodes for raft" priority="3" resolution="10000" status="6" created="2019-03-26 02:40:54.0" updated="2020-08-15 19:17:48.0" resolutiondate="2019-07-22 16:58:28.0" votes="0" watches="5" workflowId="54200"> <description><! CDATA This task is to add a metrics {{ActiveNodes}} to indicate number of active nodes from leader's pov.  This info is available on leader *only*, but we could disseminate it to followers by piggybacking heartbeat messages (in its context field).  This is particularly useful in a multi-org setup, where Prometheus server in leader org is not always accessible for other orgs. Another benefit is that operators don't need to identify leader before gathering this metrics.  Note that if a node is partitioned, this metrics should be cleared, as it doesn't make any sense. This can be done if node starts election (becomes candidate).  However it does involve adding protobuf message in an extensible way. Design decision at this point of release is scary.  My suggestion is to add this metrics to leader only, and we could always extend it to be shown on followers without breaking compatibility.  pls chime in  ~yacovm   ~jyellick   ~adarshsaraf123   ></description> </Issue>
