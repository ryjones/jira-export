<Issue id="12630" key="FAB-329" number="329" project="10002" reporter="bgorman" creator="bgorman" type="10004" summary="core/comm/connection_test.go TestConnection_Correct fails with TLS enabled" priority="3" resolution="10000" status="6" created="2016-09-09 08:21:42.0" updated="2018-07-20 14:10:08.0" resolutiondate="2017-04-07 12:49:31.0" votes="0" watches="1" workflowId="36187"> <description><! CDATA With peer/core.yaml modified to contain security: enabled: true privacy: true  The unit test core/comm/connection_test.go TestConnection_Correct fails:  2016/09/09 07:58:20 setting Number of procs to -1, was 2 2016/09/09 07:58:21 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = "transport: dial tcp 0.0.0.0:7051: getsockopt: connection refused"; Reconnecting to {"0.0.0.0:7051" <nil>} 2016/09/09 07:58:23 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = "transport: dial tcp 0.0.0.0:7051: getsockopt: connection refused"; Reconnecting to {"0.0.0.0:7051" <nil>} 2016/09/09 07:58:23 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = "transport: dial tcp 0.0.0.0:7051: getsockopt: connection refused"; Reconnecting to {"0.0.0.0:7051" <nil>} --- FAIL: TestConnection_Correct (3.01s) connection_test.go:23: error connection to server at host:port = 0.0.0.0:7051 2016/09/09 07:58:23 setting Number of procs to -1, was 2 2016/09/09 07:58:24 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = "transport: dial tcp 0.0.0.0:7052: getsockopt: connection refused"; Reconnecting to {"0.0.0.0:7052" <nil>} 2016/09/09 07:58:26 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = "transport: dial tcp 0.0.0.0:7052: getsockopt: connection refused"; Reconnecting to {"0.0.0.0:7052" <nil>} FAIL  I find it somewhat concerning that the configuration files affect the unit tests. Typically I'd expect the unit tests to dictate configuration options, testing each in turn.  ></description> </Issue>
