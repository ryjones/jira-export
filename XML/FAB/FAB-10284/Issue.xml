<Issue id="30486" key="FAB-10284" number="10284" project="10002" reporter="sykesm" assignee="sykesm" creator="sykesm" type="10004" summary="Race between sending response and cleaning up active transactions" priority="3" resolution="10000" status="6" created="2018-05-22 14:58:35.0" updated="2018-07-20 14:16:46.0" resolutiondate="2018-05-22 22:39:58.0" votes="0" watches="1" workflowId="42277"> <description><! CDATA Observed inÂ  https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/2167/consoleFull  {code:java} 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.247 UTC  ccprovider  GetChaincodeData -> INFO e0e Putting chaincode data for <cc_go_220972, 0> into cache 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.248 UTC  chaincode  HandleInvokeChaincode -> DEBU e0f  958f886b  launching chaincode cc_go_220972 on channel testchainid 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.248 UTC  chaincode  execute -> DEBU e10 canonical name: cc_go_220972:0 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.248 UTC  chaincode  Execute -> DEBU e11 Entry 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.249 UTC  chaincode  ProcessStream -> DEBU e12  958f886b  Received message GET_STATE from shim 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.249 UTC  chaincode  handleMessage -> DEBU e13  958f886b  Fabric side Handling ChaincodeMessage of type: GET_STATE in state ready 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.249 UTC  chaincode  HandleTransaction -> DEBU e14  958f886b  handling GET_STATE from chaincode 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.249 UTC  chaincode  HandleGetState -> DEBU e15  958f886b  getting state for chaincode cc_go_220972, key a, channel testchainid 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.249 UTC  chaincode  HandleTransaction -> DEBU e16  958f886b  Completed GET_STATE. Sending RESPONSE 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.250 UTC  chaincode  ProcessStream -> DEBU e17  958f886b  Received message GET_STATE from shim 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.250 UTC  chaincode  handleMessage -> DEBU e18  958f886b  Fabric side Handling ChaincodeMessage of type: GET_STATE in state ready 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.250 UTC  chaincode  HandleTransaction -> DEBU e19  958f886b  handling GET_STATE from chaincode 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.250 UTC  chaincode  HandleGetState -> DEBU e1a  958f886b  getting state for chaincode cc_go_220972, key b, channel testchainid 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.250 UTC  chaincode  HandleTransaction -> DEBU e1b  958f886b  Completed GET_STATE. Sending RESPONSE 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.250 UTC  chaincode  ProcessStream -> DEBU e1c  958f886b  Received message PUT_STATE from shim 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.250 UTC  chaincode  handleMessage -> DEBU e1d  958f886b  Fabric side Handling ChaincodeMessage of type: PUT_STATE in state ready 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.251 UTC  chaincode  HandleTransaction -> DEBU e1e  958f886b  handling PUT_STATE from chaincode 13:11:03 unit-tests_1 | 2018-05-22 13:09:05.251 UTC  chaincode  registerTxid -> ERRO e1f  958f886b  Another request pending for this CC: cc_go_220972:0, Txid: 958f886b-6fb3-4fa1-b91f-c5e0fdd7efde, ChannelID: testchainid. Cannot process.{code} ** Based on scheduling, we may want to remove the active transaction before scheduling the response.  ></description> </Issue>
