<Action id="19814" issue="13235" author="sanchezl" type="comment" created="2016-11-21 07:40:42.0" updateauthor="sanchezl" updated="2016-11-21 07:40:42.0"> <body><! CDATA {quote}It may be possible for the orderer to learn these constraints by metadata requests to Kafka.{quote} It is not possible to retrieve any values defined in the `server.properties` file remotely. {quote}... the orderer could take constraints from the config file and reconfigure Kafka based on the constraints {quote} It is not possible to change any values defined in the `server.properties` programmatically. {quote} ... the Kafka orderer should reject blobs that are too big, and be coded in such a way that it will never aggregate blocks that are too big for the current configuration. ... The interaction of the constraints will need to be well-documeted so that clients understand their resonsibility (if any) for creating consistent Kafka/orderer configurations and avoiding issuing blobs that are too big.{quote} This looks like the only available path at the moment. I propose that we: * Add a `config.Kafka.MessageMaxBytes` property to the orderer configuration. ** We can default to the Kafka broker `message.max.bytes` default value of `1000012`. * Cut a block before it reaches a size of `config.Kafka.MessageMaxBytes`. * Document the interaction of the `config.Kafka.MessageMaxBytes` and the various Kafka configuration properties affected: ** `message.max.bytes` – from server.properties ** `replica.fetch.max.bytes` – from server.properties ** `message.max.bytes` – from topic specific entry in ZooKeeper ** `fetch.message.max.bytes` – from consumer properties   ></body> </Action>
<Action id="19823" issue="13235" author="bcbrock" type="comment" body="Please see https://jira.hyperledger.org/browse/FAB-1171. The message size constraint should as least be documented as an optimization tool. For simplicity we could consider removing the number-of-TX-per-block limit." created="2016-11-21 16:28:14.0" updateauthor="bcbrock" updated="2016-11-21 16:28:14.0"/>
<Action id="19897" issue="13235" author="sanchezl" type="comment" body="In leu of  FAB-1171|https://jira.hyperledger.org/browse/FAB-1171 , this issue will be about documenting the relationship between the various kafka {{*.max.bytes}} configuration settings and the configuration settings added in  FAB-1171|https://jira.hyperledger.org/browse/FAB-1171 ." created="2016-11-30 04:44:17.0" updateauthor="sanchezl" updated="2016-11-30 04:44:17.0"/>
<Action id="20405" issue="13235" author="sanchezl" type="comment" body="Draft posted to https://gerrit.hyperledger.org/r/4123" created="2017-01-18 14:58:24.0" updateauthor="sanchezl" updated="2017-01-18 14:58:24.0"/>
<Action id="20441" issue="13235" author="kchristidis" type="comment" created="2017-01-19 17:34:04.0" updateauthor="kchristidis" updated="2017-01-19 17:35:21.0"> <body><! CDATA  ~nickgaski  is on this, and will use Luis's draft when writing documentation for the project.  I'm moving this to the backlog as I don't know when Nick & co. plan to have this ready. Nick feel free correct any of the above, and adjust the sprint accordingly. (Thanks!)  ></body> </Action>
