<Issue id="33122" key="FAB-11683" number="11683" project="10002" reporter="sykesm" assignee="sykesm" creator="sykesm" type="10004" summary="Data race related to GenerateDockerBuild" priority="4" resolution="10000" status="6" created="2018-08-22 12:45:03.0" updated="2018-08-26 12:11:28.0" resolutiondate="2018-08-26 12:11:28.0" votes="0" watches="1" workflowId="44332"> <description><! CDATA {code} ================== WARNING: DATA RACE Read at 0x00c42061c248 by goroutine 101: github.com/hyperledger/fabric/core/chaincode/platforms/util.DockerBuild() /usr/local/Cellar/go/1.10.3/libexec/src/bytes/buffer.go:66 +0x11f8 github.com/hyperledger/fabric/core/chaincode/platforms/golang.(*Platform).GenerateDockerBuild() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:520 +0x74a github.com/hyperledger/fabric/core/chaincode/platforms.(*Registry).StreamDockerBuild() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/chaincode/platforms/platforms.go:171 +0x411 github.com/hyperledger/fabric/core/chaincode/platforms.(*Registry).GenerateDockerBuild.func1() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/chaincode/platforms/platforms.go:201 +0x229  Previous write at 0x00c42061c248 by goroutine 67: bytes.(*Buffer).grow() /usr/local/Cellar/go/1.10.3/libexec/src/bytes/buffer.go:149 +0x276 bytes.(*Buffer).Write() /usr/local/Cellar/go/1.10.3/libexec/src/bytes/buffer.go:174 +0x14f github.com/hyperledger/fabric/vendor/github.com/docker/docker/pkg/stdcopy.StdCopy() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/docker/docker/pkg/stdcopy/stdcopy.go:174 +0x52d github.com/hyperledger/fabric/vendor/github.com/fsouza/go-dockerclient.(*Client).hijack.func1.1() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/fsouza/go-dockerclient/client.go:801 +0x169  Goroutine 101 (running) created at: github.com/hyperledger/fabric/core/chaincode/platforms.(*Registry).GenerateDockerBuild() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/chaincode/platforms/platforms.go:198 +0x50c github.com/hyperledger/fabric/core/container.(*PlatformBuilder).Build() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/container/controller.go:138 +0x130 github.com/hyperledger/fabric/core/container/dockercontroller.(*DockerVM).Start() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/container/dockercontroller/dockercontroller.go:245 +0x1810 github.com/hyperledger/fabric/core/container.StartContainerReq.Do() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/container/controller.go:148 +0x102 github.com/hyperledger/fabric/core/container.(*StartContainerReq).Do() <autogenerated>:1 +0xb9 github.com/hyperledger/fabric/core/container.(*VMController).Process() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/container/controller.go:180 +0x14f github.com/hyperledger/fabric/core/chaincode.(*ContainerRuntime).Start() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/chaincode/container_runtime.go:77 +0x8ee github.com/hyperledger/fabric/core/chaincode.(*RuntimeLauncher).Launch.func1() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/chaincode/runtime_launcher.go:55 +0x181  Goroutine 67 (finished) created at: github.com/hyperledger/fabric/vendor/github.com/fsouza/go-dockerclient.(*Client).hijack.func1() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/fsouza/go-dockerclient/client.go:787 +0x21d ================== {code}  ></description> </Issue>
