<Issue id="13044" key="FAB-740" number="740" project="10002" reporter="swangbj" creator="swangbj" type="10001" summary="Peer-to-Peer TLS communication does not work ? " priority="3" resolution="10000" status="6" created="2016-10-18 09:06:55.0" updated="2018-07-20 18:56:48.0" resolutiondate="2017-05-08 13:15:20.0" votes="0" watches="1" workflowId="36477"> <description><! CDATA h2. Well,I have environmental settings in my docker-compose.yml file to  set up a fabric network which enables tls.  vp0: image: hyperledger/fabric-peer environment: - CORE_PEER_ADDRESSAUTODETECT=true - CORE_VM_ENDPOINT=http://172.17.0.1:2375 - CORE_LOGGING_LEVEL=DEBU #  - CORE_PEER_VALIDATOR_CONSENSUS_PLUGIN=pbft - CORE_PEER_ID=vp0 - CORE_SECURITY_ENABLED=true - CORE_SECURITY_PRIVACY=true - CORE_PEER_PKI_ECA_PADDR=172.17.0.1:50051 - CORE_PEER_PKI_TCA_PADDR=172.17.0.1:50051 - CORE_PEER_PKI_TLSCA_PADDR=172.17.0.1:50051 - CORE_SECURITY_ENROLLID=test_vp0 - CORE_SECURITY_ENROLLSECRET=MwYpmSRjupbT - CORE_PEER_PKI_TLS_ENABLED=true - CORE_PEER_PKI_TLS_ROOTCERT=/var/hyperledger/production/.membersrvc/tlsca.cert - CORE_PEER_TLS_ENABLED=true - CORE_PEER_TLS_CERT_FILE=/var/hyperledger/production/.membersrvc/tlsca.cert - CORE_PEER_TLS_KEY_FILE=/var/hyperledger/production/.membersrvc/tlsca.priv # - CORE_PEER_TLS_CERT_FILE=/var/hyperledger/production/crypto/validator/test_vp0/ks/raw/tls.cert # - CORE_PEER_TLS_KEY_FILE=/var/hyperledger/production/crypto/validator/test_vp0/ks/raw/tls.key volumes: - /var/hyperledger:/var/hyperledger command: sh -c "sleep 5; peer node start" vp4: extends: service: vp0 environment: - CORE_PEER_FILESYSTEMPATH=/var/hyperledger/test_vp4/production - CORE_PEER_ID=vp4 - CORE_PEER_DISCOVERY_ROOTNODE=vp0:30303 - CORE_SECURITY_ENROLLID=test_vp4 - CORE_SECURITY_ENROLLSECRET=Pqh90CEW5juZ - CORE_PEER_PKI_TLS_ROOTCERT=/var/hyperledger/production/.membersrvc/tlsca.cert - CORE_PEER_TLS_CERT_FILE=/var/hyperledger/production/.membersrvc/tlsca.cert - CORE_PEER_TLS_KEY_FILE=/var/hyperledger/production/.membersrvc/tlsca.priv # - CORE_PEER_TLS_CERT_FILE=/var/hyperledger/test_vp4/production/crypto/validator/test_vp4/ks/raw/tls.cert # - CORE_PEER_TLS_KEY_FILE=/var/hyperledger/test_vp4/production/crypto/validator/test_vp4/ks/raw/tls.key links: - vp0  And after I run docker-compose up . I get the following errors. vp0_1 | 2016/10/18 07:44:49 grpc: Server.Serve failed to complete security handshake. vp0_1 | 2016/10/18 07:44:50 grpc: ClientConn.resetTransport failed to create client transport: connection error: desc = "transport: x509: cannot validate certificate for 172.17.0.3 because it doesn't contain any IP SANs"; Reconnecting to "172.17.0.3:30303" vp4_1 | 2016/10/18 07:44:50 grpc: Server.Serve failed to complete security handshake. vp4_1 | 2016/10/18 07:44:50 grpc: ClientConn.resetTransport failed to create client transport: connection error: desc = "transport: x509: cannot validate certificate for 172.17.0.2 because it doesn't contain any IP SANs"; Reconnecting to "172.17.0.2:30303" vp0_1 | 2016/10/18 07:44:50 grpc: Server.Serve failed to complete security handshake. vp4_1 | 2016/10/18 07:44:52 grpc: Server.Serve failed to complete security handshake. vp0_1 | 2016/10/18 07:44:52 grpc: ClientConn.resetTransport failed to create client transport: connection error: desc = "transport: x509: cannot validate certificate for 172.17.0.3 because it doesn't contain any IP SANs"; Reconnecting to "172.17.0.3:30303" vp0_1 | 07:44:52.021  peer  chatWithPeer -> ERRO 0f4 Error creating connection to peer address 172.17.0.3:30303: grpc: timed out trying to connect vp4_1 | 2016/10/18 07:44:52 grpc: ClientConn.resetTransport failed to create client transport: connection error: desc = "transport: x509: cannot validate certificate for 172.17.0.2 because it doesn't contain any IP SANs"; Reconnecting to "172.17.0.2:30303" vp4_1 | 07:44:52.753  peer  chatWithPeer -> ERRO 0f6 Error creating connection to peer address 172.17.0.2:30303: grpc: timed out trying to connect   ></description> </Issue>
