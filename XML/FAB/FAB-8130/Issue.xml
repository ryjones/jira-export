<Issue id="27525" key="FAB-8130" number="8130" project="10002" reporter="nharshita" creator="nharshita" type="10001" summary="testing endorsement policy in v1.0.4 - patch for balance-transfer and policy test document" priority="3" resolution="10001" status="6" created="2018-02-08 10:51:46.0" updated="2019-08-18 11:45:43.0" resolutiondate="2019-08-18 11:45:43.0" votes="0" watches="2" workflowId="35532"> <description><! CDATA We would like to submit a patch for balance-transfer to test endorsement policy.  *Patch details:* Attached  ^endorse_test_code_changes_v1.0.4.txt  is created for fabric-samples/balance-transfer *release* version with git commit level  b99e1b8da2bc4d17f689c152078d96e8f6428a27 to test/understand endorsements policy working on fabric v1.0.4 version.  Patch incorporates code that passes/sends endorsement request to endorsement peers from *all* organizations (which needs to endorse the transaction). Without the patch endorsement request is sent to only 1 organization peer(s) based on the organization pertaining to the JWT token passed.  Details on applying patch and testing are documented in the attached pdf  ^Endorsement_policy_verification_testcases_v1.0.4.pdf   *Need for patch:* From balance-transfer code exploration, it is found that existing helper.js code (for loop, where clients, channels are initialized) maintains separate client objects for each organization, in which channel object is present and to the channel object organization peers are added. Due to which target peers are populated only for that organization.  Events from second organization peers are not considered here, to avoid MSP related error.  p.s: The patch is a tweak for balance-transfer code (b99e1b8da2bc4d17f689c152078d96e8f6428a27) to test endorsements. But, similar changes can be applied to test endorsement policy for fabric v1.0.0 to v1.0.4.  ></description> </Issue>
