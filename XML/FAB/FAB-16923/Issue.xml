<Issue id="42962" key="FAB-16923" number="16923" project="10002" reporter="denyeart" creator="denyeart" type="10004" summary="Rebuild of state database fails" priority="2" resolution="10000" status="6" created="2019-10-23 14:23:10.0" updated="2019-11-04 15:38:45.0" resolutiondate="2019-11-04 15:38:45.0" votes="0" watches="2" workflowId="56064"> <description><! CDATA If state database is dropped, upon next restart of peer the state database attempts to get rebuilt. But for a block that includes a chaincode commit (using new lifecycle), the state fails to get written to state database and the recovery of the channel fails.  {code:java} 2019-10-23 10:12:03.027 EDT  kvledger  recommitLostBlocks -> INFO 10d Recommitting lost blocks - firstBlockNum=0, lastBlockNum=28, recoverables=  kvledger.recoverable{(*lockbasedtxmgr.LockBasedTxMgr)(0xc002dd60a0)} ... 2019-10-23 10:12:03.489 EDT  cceventmgmt  HandleStateUpdates -> INFO 2c5 Channel  mychannel : Handling deploy or update of chaincode  marblesp  2019-10-23 10:12:03.489 EDT  peer  Initialize -> ERRO 2c6 Failed to load ledger mychannel(could not create implicit collections for channel: could not get channelconfig for channel mychannel) 2019-10-23 10:12:03.489 EDT  peer  Initialize -> DEBU 2c7 Error while loading ledger mychannel with message could not create implicit collections for channel: could not get channelconfig for channel mychannel. We continue to the next ledger rather than abort. {code}       ></description> </Issue>
