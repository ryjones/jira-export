<Issue id="41692" key="FAB-16255" number="16255" project="10002" reporter="icarrascol" creator="icarrascol" type="10004" summary="SIGSEV error after stopping 1 peer" priority="1" resolution="10002" status="6" created="2019-08-07 21:20:52.0" updated="2019-08-19 15:25:53.0" resolutiondate="2019-08-13 15:12:59.0" votes="0" watches="2" workflowId="54725"> <description><! CDATA i am using v1.4.2 and raft consensus if a peer is stopped after a couple of minutes the other peers throw this error and dc.  - network consist of 4 orgs with 1 peer each. - stopped peer0.org1.  - this is a log from peer0.org3.Â   {code:java} // 2019-08-07 20:36:15.891 UTC  gossip.comm  func1 -> WARN 297 peer0.org1.autentia-bchain.com:7051, PKIid:d32e5b9141f599861f1bbe12f307d73f3fd52009a906ce6fdca9cd3b2baa2539 isn't responsive: EOF 2019-08-07 20:36:15.891 UTC  gossip.discovery  expireDeadMembers -> WARN 298 Entering  d32e5b9141f599861f1bbe12f307d73f3fd52009a906ce6fdca9cd3b2baa2539  2019-08-07 20:36:15.891 UTC  gossip.discovery  expireDeadMembers -> WARN 299 Closing connection to Endpoint: peer0.org1.autentia-bchain.com:7051, InternalEndpoint: , PKI-ID: d32e5b9141f599861f1bbe12f307d73f3fd52009a906ce6fdca9cd3b2baa2539, Metadata:  2019-08-07 20:36:15.891 UTC  gossip.discovery  expireDeadMembers -> WARN 29a Exiting 2019-08-07 20:36:16.890 UTC  gossip.channel  reportMembershipChanges -> INFO 29b Membership view has changed. peers went offline:    peer0.org1.autentia-bchain.com:7051    , current view:    peer0.org4.autentia-bchain.com:10051    peer0.org2.autentia-bchain.com:8051    panic: runtime error: invalid memory address or nil pointer dereference  signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0xaed020 goroutine 130  running : github.com/hyperledger/fabric/protos/gossip.(*SecretEnvelope).InternalEndpoint(0x0, 0x7fe1d4070530, 0x10) 	/opt/gopath/src/github.com/hyperledger/fabric/protos/gossip/extensions.go:480 +0x40 github.com/hyperledger/fabric/gossip/discovery.newAliveMsgStore.func4(0x1243280, 0xc00479c740) 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:1032 +0xfd github.com/hyperledger/fabric/gossip/gossip/msgstore.(*messageStoreImpl).expireMessages(0xc0005a1f00) 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/msgstore/msgs.go:212 +0x34c github.com/hyperledger/fabric/gossip/gossip/msgstore.(*messageStoreImpl).expirationRoutine(0xc0005a1f00) 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/msgstore/msgs.go:253 +0x141 created by github.com/hyperledger/fabric/gossip/gossip/msgstore.NewMessageStoreExpirable 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/msgstore/msgs.go:53 +0xb2  {code}  ></description> </Issue>
