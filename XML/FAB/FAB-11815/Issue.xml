<Issue id="33381" key="FAB-11815" number="11815" project="10002" reporter="rhegde" assignee="muralisr" creator="rhegde" type="10004" summary="Install on packaged chaincode fails due to invalid couch database index file" priority="3" resolution="10000" status="6" created="2018-08-30 19:16:55.0" updated="2018-09-08 14:54:15.0" resolutiondate="2018-09-07 19:03:57.0" votes="1" watches="5" workflowId="44669"> <description><! CDATA at least fabric v1.2 provides a functionality to define couch database indexes in the chaincode folder. this gets picked up and gets created across the required channel (couch database).  Steps:  1.  add a couch database index file {code:java} Any index in the chaincode’s META-INF/statedb/couchdb/indexes directory will be packaged up with the chaincode for deployment{code}     2. Package the chaincode    command using fabric-tool:peer as cli  peer chaincode package -n " + chaincode_name + -v  + chaincode_version -p chaincode_src_path -s -S -i " + instantiation_policy chaincode_dst_pkg_path     3.  Install chaincode using the package chaincode  Following is the error received from peer CLI  2018-08-30 03:46:03.716 UTC  grpc  Printf -> DEBU 042 pickfirstBalancer: HandleSubConnStateChange: 0xc420173b10, READY 2018-08-30 03:46:03.717 UTC  msp  GetDefaultSigningIdentity -> DEBU 043 Obtaining default signing identity Error: error extracting chaincode deployment spec(illegal file detected in payload: "META-INF/statedb/couchdb/indexes/duplicatecheck.json")     Please note: I have tried installing the chaincode using chaicode source (i.e. w/o using package). This works good. I can see indexes getting created across channels.  ></description> </Issue>
