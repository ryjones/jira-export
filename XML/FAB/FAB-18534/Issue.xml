<Issue id="47113" key="FAB-18534" number="18534" project="10002" reporter="JIRAUSER22085" creator="JIRAUSER22085" type="10004" summary="Proxy is not passed to ccenv for building chaincode" priority="2" resolution="10203" status="6" created="2021-08-02 14:47:42.0" updated="2021-08-18 14:58:06.0" resolutiondate="2021-08-17 02:38:20.0" votes="0" watches="2" workflowId="61014" archived="N"> <description><! CDATA We have a HLF setup running with docker-compose behind a proxy.  peer lifecycle chaincode install CC.tar.gz fails with:  Error: chaincode install failed with status: 500 - failed to invoke backing implementation of 'InstallChaincode': could not build chaincode: docker build failed: docker image build failed: docker build failed: Error returned from build: 1 "go: github.com/golang/protobuf@v1.4.2: Get "https://proxy.golang.org/github.com/golang/protobuf/@v/v1.4.2.mod": dial tcp 142.250.186.81:443: connect: connection refused  As one can see go fails to download dependencies. It tries to reach the proxy.golang.org server without using our corporate proxy. This is most likely due to http_proxy variables not being exported in the started fabric-ccenv container.  ~/.docker/config.json on the host is configured with:  {  "proxies": { "default": { "ftpProxy": "http://XXX:8080", "httpProxy": "http://XXX:8080", "httpsProxy": "http://XXX:8080", }}}  This results in http_proxy, https_proxy, ... being exported on the peer and the fabric-tools which are used to call the lifecycle but unfortunately it is not forwarded to the fabric-ccenv.  ></description> </Issue>
