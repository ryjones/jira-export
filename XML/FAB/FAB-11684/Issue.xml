<Issue id="33126" key="FAB-11684" number="11684" project="10002" reporter="sykesm" assignee="sykesm" creator="sykesm" type="10004" summary="Data race related to blockledger/ram" priority="4" resolution="10000" status="6" created="2018-08-22 13:42:31.0" updated="2018-08-26 12:12:01.0" resolutiondate="2018-08-26 12:12:01.0" votes="0" watches="1" workflowId="44336"> <description><! CDATA {code} ================== WARNING: DATA RACE Write at 0x00c42035a9c0 by goroutine 34: github.com/hyperledger/fabric/common/ledger/blockledger/ram.(*ramLedger).appendBlock() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/common/ledger/blockledger/ram/impl.go:153 +0x148 github.com/hyperledger/fabric/common/ledger/blockledger/ram.(*ramLedger).Append() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/common/ledger/blockledger/ram/impl.go:148 +0x1d5 github.com/hyperledger/fabric/orderer/common/multichannel.(*ChainSupport).Append() <autogenerated>:1 +0x82 github.com/hyperledger/fabric/orderer/common/multichannel.(*BlockWriter).commitBlock() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/common/multichannel/blockwriter.go:169 +0x126 github.com/hyperledger/fabric/orderer/common/multichannel.(*BlockWriter).WriteBlock.func1() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/common/multichannel/blockwriter.go:155 +0x9e  Previous read at 0x00c42035a9c0 by goroutine 32: github.com/hyperledger/fabric/common/ledger/blockledger/ram.(*cursor).Next() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/common/ledger/blockledger/ram/impl.go:47 +0x8b github.com/hyperledger/fabric/orderer/common/multichannel.TestManagerImpl() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/common/multichannel/registrar_test.go:159 +0x758 testing.tRunner() /usr/local/Cellar/go/1.10.3/libexec/src/testing/testing.go:777 +0x16d  Goroutine 34 (running) created at: github.com/hyperledger/fabric/orderer/common/multichannel.(*BlockWriter).WriteBlock() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/common/multichannel/blockwriter.go:153 +0xc4 github.com/hyperledger/fabric/orderer/common/multichannel.(*ChainSupport).WriteBlock() <autogenerated>:1 +0x83 github.com/hyperledger/fabric/orderer/common/multichannel.(*mockChain).Start.func1() /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/common/multichannel/util_test.go:95 +0x790  Goroutine 32 (running) created at: testing.(*T).Run() /usr/local/Cellar/go/1.10.3/libexec/src/testing/testing.go:824 +0x564 testing.runTests.func1() /usr/local/Cellar/go/1.10.3/libexec/src/testing/testing.go:1063 +0xa4 testing.tRunner() /usr/local/Cellar/go/1.10.3/libexec/src/testing/testing.go:777 +0x16d testing.runTests() /usr/local/Cellar/go/1.10.3/libexec/src/testing/testing.go:1061 +0x4e1 testing.(*M).Run() /usr/local/Cellar/go/1.10.3/libexec/src/testing/testing.go:978 +0x2cd main.main() _testmain.go:116 +0x324 ================== {code}  ></description> </Issue>
