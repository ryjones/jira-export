<Issue id="32808" key="FAB-11583" number="11583" project="10002" reporter="rhegde" assignee="jyellick" creator="rhegde" type="10004" summary="Configtxlator adds Anchor Peer for an Organization that omit&apos; Anchor Peer definition" priority="3" resolution="10000" status="6" created="2018-08-14 03:04:51.0" updated="2019-01-18 17:04:30.0" resolutiondate="2018-09-12 13:12:05.0" votes="0" watches="3" workflowId="44045"> <description><! CDATA *Steps to Reproduce* * Define organization that does not contain Anchor Peer definition. * Generate the channel.tx that includes the organization using configtxlator     Now channel creation fails using the same  .tx file    +peer cli logs:+  2018-08-12 23:36:32.785 UTC  msp/identity  Sign -> DEBU 00f Sign: digest: 09F3E67D09442E6B92E78D28D1026E3528E4F502049AD8705B3B81B2F6BC99DD Error: got unexpected status: BAD_REQUEST – error authorizing update: error validating DeltaSet: attempted to set key  Value   /Channel/Application/clsbgb65/AnchorPeers to version 1, but key does not exist Usage:   peer channel create  flags   +orderer logs+ 2018-08-12 23:36:32.796 UTC  orderer/common/broadcast  Handle -> WARN ca2  channel: testbnk  Rejecting broadcast of config message from 172.18.0.11:33734 because of error: error authorizing update: error validating DeltaSet: attempted to set key  Value   /Channel/Application/clsbgb65/AnchorPeers to version 1, but key does not exist 2018-08-12 23:36:32.796 UTC  orderer/common/server  func1 -> DEBU ca3 Closing Broadcast stream 2018-08-12 23:36:32.798 UTC  grpc  Printf -> DEBU ca4 transport: http2Server.HandleStreams failed to read frame: read tcp 172.18.0.18:7050->172.18.0.11:33734: read: connection reset by peer 2018-08-12 23:36:32.798 UTC  common/deliver  Handle -> WARN ca5 Error reading from 172.18.0.11:33732: rpc error: code = Canceled desc = context canceled 2018-08-12 23:36:32.798 UTC  orderer/common/server  func1 -> DEBU ca6 Closing Deliver stream    *Reason and workaround as put by  ~jyellick * Looks like you have discovered a bug in configtxgen introduced in v1.2.  You may work around this problem by adding a (fake) anchor peer section to your org definition.  This will not result in anchor peers being added, but will simply fix the generation of the channel creation transaction.  You can find an example:  https://github.com/hyperledger/fabric/blob/9e9ebe651225104823d228a09e94432592252ca3/sampleconfig/configtx.yaml#L52-L57|https://usmail.prod.local/owa/redir.aspx?C=TJ179BYkKlCJfBugBEh8nWS4J_elgQrYsHpronXW3SsrAPnsjQHWCA..&URL=https%3a%2f%2fgithub.com%2fhyperledger%2ffabric%2fblob%2f9e9ebe651225104823d228a09e94432592252ca3%2fsampleconfig%2fconfigtx.yaml%23L52-L57   ></description> </Issue>
