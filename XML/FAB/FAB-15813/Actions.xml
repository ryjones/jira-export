<Action id="61257" issue="40795" author="sykesm" type="comment" body="I&apos;ll dig into this in the morning but I&apos;m pretty sure it&apos;s because of wiring I added to set a CredentialSupport reference even when TLS is disabled." created="2019-06-26 01:08:39.0" updateauthor="sykesm" updated="2019-06-26 01:08:39.0"/>
<Action id="61274" issue="40795" author="scottz" type="comment" created="2019-06-26 14:10:31.0" updateauthor="scottz" updated="2019-06-26 14:10:31.0"> <body><! CDATA Looking at the new lifecycle tests, they also fail. After the installs, at the approve step.    {code:java} 00:07:46       Error occurred  u'docker exec peer0.org1.example.com sh -c "CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/9ed5d5c097c711e99f99fa163e8fa76a/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer lifecycle chaincode approveformyorg --package-id mycc:3eb8fafd14163f23cd50941bfd68a14c18dd0d34df3959325e8aa7abf6bb9f24 --channelID behavesystest --name mycc --version 0 --peerAddresses peer0.org1.example.com:7051 --peerAddresses peer1.org1.example.com:7051 --sequence 1 --orderer orderer0.example.com:7050 --init-required --signature-policy \\"OR (\'org1.example.com.member\',\'org2.example.com.member\')\\" "' : Error: timed out waiting for txid on all peers 00:07:46        00:07:46       Error occurred  u'docker exec peer0.org2.example.com sh -c "CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/9ed5d5c097c711e99f99fa163e8fa76a/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp CORE_PEER_LOCALMSPID=org2.example.com CORE_PEER_ID=peer0.org2.example.com CORE_PEER_ADDRESS=peer0.org2.example.com:7051 peer lifecycle chaincode approveformyorg --package-id mycc:3eb8fafd14163f23cd50941bfd68a14c18dd0d34df3959325e8aa7abf6bb9f24 --channelID behavesystest --name mycc --version 0 --peerAddresses peer0.org2.example.com:7051 --peerAddresses peer1.org2.example.com:7051 --sequence 1 --orderer orderer0.example.com:7050 --init-required --signature-policy \\"OR (\'org1.example.com.member\',\'org2.example.com.member\')\\" "' : Error: timed out waiting for txid on all peers 00:07:46        00:07:46        sh -c "CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/9ed5d5c097c711e99f99fa163e8fa76a/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp CORE_PEER_LOCALMSPID=org2.example.com CORE_PEER_ID=peer0.org2.example.com CORE_PEER_ADDRESS=peer0.org2.example.com:7051 peer lifecycle chaincode approveformyorg --package-id mycc:3eb8fafd14163f23cd50941bfd68a14c18dd0d34df3959325e8aa7abf6bb9f24 --channelID behavesystest --name mycc --version 0 --peerAddresses peer0.org2.example.com:7051 --peerAddresses peer1.org2.example.com:7051 --sequence 1 --orderer orderer0.example.com:7050 --init-required --signature-policy \"OR ('org1.example.com.member','org2.example.com.member')\" " : {'peer0.org1.example.com': 'Error occurred  u\'docker exec peer0.org1.example.com sh -c "CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/9ed5d5c097c711e99f99fa163e8fa76a/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer lifecycle chaincode approveformyorg --package-id mycc:3eb8fafd14163f23cd50941bfd68a14c18dd0d34df3959325e8aa7abf6bb9f24 --channelID behavesystest --name mycc --version 0 --peerAddresses peer0.org1.example.com:7051 --peerAddresses peer1.org1.example.com:7051 --sequence 1 --orderer orderer0.example.com:7050 --init-required --signature-policy \\\\"OR (\\\'org1.example.com.member\\\',\\\'org2.example.com.member\\\')\\\\" "\' : Error: timed out waiting for txid on all peers\n', 'peer0.org2.example.com': 'Error occurred  u\'docker exec peer0.org2.example.com sh -c "CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/9ed5d5c097c711e99f99fa163e8fa76a/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp CORE_PEER_LOCALMSPID=org2.example.com CORE_PEER_ID=peer0.org2.example.com CORE_PEER_ADDRESS=peer0.org2.example.com:7051 peer lifecycle chaincode approveformyorg --package-id mycc:3eb8fafd14163f23cd50941bfd68a14c18dd0d34df3959325e8aa7abf6bb9f24 --channelID behavesystest --name mycc --version 0 --peerAddresses peer0.org2.example.com:7051 --peerAddresses peer1.org2.example.com:7051 --sequence 1 --orderer orderer0.example.com:7050 --init-required --signature-policy \\\\"OR (\\\'org1.example.com.member\\\',\\\'org2.example.com.member\\\')\\\\" "\' : Error: timed out waiting for txid on all peers\n'} 00:07:46       Error occurred  u'docker exec peer0.org1.example.com sh -c "CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/9ed5d5c097c711e99f99fa163e8fa76a/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer lifecycle chaincode commit --name mycc --channelID behavesystest --version 0 --sequence 1 --peerAddresses peer0.org1.example.com:7051 --peerAddresses peer0.org2.example.com:7051 --init-required --orderer orderer0.example.com:7050 --signature-policy \\"OR (\'org1.example.com.member\',\'org2.example.com.member\')\\" "' : Error: proposal failed with status: 500 - failed to invoke backing implementation of 'CommitChaincodeDefinition': chaincode definition not agreed to by this org (org1.example.com) {code}   ></body> </Action>
<Action id="61277" issue="40795" author="sykesm" type="comment" body="https://gerrit.hyperledger.org/r/c/fabric/+/32099  FAB-15813  propagate TLSenabled to DialerFactory" created="2019-06-26 15:14:15.0" updateauthor="sykesm" updated="2019-06-26 15:14:15.0"/>
<Action id="61278" issue="40795" author="sykesm" type="comment" body="One issue per JIRA, please. Let&apos;s not dilute the focus." created="2019-06-26 15:24:05.0" updateauthor="sykesm" updated="2019-06-26 15:24:05.0"/>
<Action id="61288" issue="40795" author="scottz" type="comment" created="2019-06-26 19:46:50.0" updateauthor="scottz" updated="2019-06-26 19:46:50.0"> <body><! CDATA The new cc lifecycle tests started failing at same time, which is why I mentioned them in my previous comment, as I suspected a common cause.  Using the proposed changeset to propagate TLSenabled... I retested a couple of the new lifecycle tests along with about 10 others using the older lifecycle methods, from 3 different behave feature files, and all passed. I recommend to merge this solution. I expect most of the 93 failing tests (using "no tls") in the behave daily test suite should be fixed and should be able to successfully instantiate again. After seeing the results from the next daily test run, if any tests still fail due to test variations that are not covered by this fix, then we could create new bugs for them.  ></body> </Action>
