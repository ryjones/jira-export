<Action id="40765" issue="28011" author="scottz" type="comment" body="Surya got the test to pass. We will have to update the upgrade doc prereqs/steps. Too busy to do it tonight; he still has 3 more big tests to run, but he captured his notes for updating the doc later. (Maybe he can give them to someone else to update the doc tomorrow.)" created="2018-02-26 03:10:04.0" updateauthor="scottz" updated="2018-02-26 03:10:04.0"/>
<Action id="40868" issue="28011" author="denyeart" type="comment" body=" ~scottz   ~suryalnvs  Could somebody update the upgrade doc? Or at least add comments at the right place? https://gerrit.hyperledger.org/r/#/c/18351/" created="2018-02-26 20:20:20.0" updateauthor="denyeart" updated="2018-02-26 20:20:20.0"/>
<Action id="40878" issue="28011" author="scottz" type="comment" created="2018-02-26 22:05:43.0" updateauthor="scottz" updated="2018-02-26 22:05:43.0"> <body><! CDATA Test steps for FAB-7202: replacing peer binaries (not images) to do the upgrade: # stop 1.0.x peer # replace peer binary in /usr/local/bin with v1.1 binary from outside container # restart docker container  Problem: the peer exits. Thus we created this bug FAB-8524.  Initially we were thinking it is a doc bug. Now we'd like to explore whether we could do something to allow the user to do this without the additional steps (1A and 1B, documented below) and without adding such details to the upgrade documentation.  To get the test to pass, our workaround "solution" was to log into each peer container and update and install the library "libltdl-dev". In other words, insert two steps between 1 and 2: * 1.A. launch each peer container first only in bash * 1.B. log into each peer container and update and install the library "libltdl-dev"  The ideal solution would be something like "adding the library to the peer binary" like we could add artifacts to the images. In lieu of that, hmmm, maybe this is a doc bug afterall and we could document all these manual steps.  Or we just drop support for upgrading binaries directly, instead of images.  Thoughts?  ></body> </Action>
<Action id="40898" issue="28011" author="denyeart" type="comment" created="2018-02-27 03:56:44.0" updateauthor="denyeart" updated="2018-02-27 03:56:44.0"> <body><! CDATA The test scenario here was awkward and not realistic... real deployments would not upgrade binaries within a docker image, so the extra pain you faced around launching containers first only in bash etc, in order to upgrade binaries in a container, I don't see as a real problem to solve.  If a deployment was using native binaries, they would use native binaries exclusively.  They would still hit the problem mentioned here around the libraries.  But we have never documented how to get a new system working using the binaries anyways, let along an upgrade.  I'm thinking what we should do is back off some of the native binary language in the upgrade doc so that we don't give the false impression that we document native binary install/upgrade instructions.  ></body> </Action>
<Action id="40899" issue="28011" author="denyeart" type="comment" body="Since we don&apos;t document/support this scenario, I will go ahead to change to Medium, but leave it open for others to comment." created="2018-02-27 04:03:47.0" updateauthor="denyeart" updated="2018-02-27 04:03:47.0"/>
<Action id="40901" issue="28011" author="jyellick" type="comment" body="+1 for those doing native deployments, this is not at all the sort of pain they would face." created="2018-02-27 04:15:16.0" updateauthor="jyellick" updated="2018-02-27 04:15:16.0"/>
<Action id="40907" issue="28011" author="mastersingh24" type="comment" created="2018-02-27 07:58:37.0" updateauthor="mastersingh24" updated="2018-02-27 07:58:37.0"> <body><! CDATA They should not hit the problem mentioned above at all. We ship the binaries produced by the `make release` command. This will build static binaries with the nopkcs11 tag.  So the real scenario here is to run `make release` with release branch (or pull down the binaries via the bootstrap script) then `make release` with master and replace the binaries created from v1.0.x  ></body> </Action>
<Action id="40917" issue="28011" author="christopherferris" type="comment" body="the use case is completely unrealistic. The test should be abandoned or redesigned such that the image is replaced, not the binaries within." created="2018-02-27 12:31:47.0" updateauthor="christopherferris" updated="2018-02-27 12:31:47.0"/>
<Action id="40958" issue="28011" author="denyeart" type="comment" body="Discussed with testers, removing test case, closing defect." created="2018-02-27 20:38:07.0" updateauthor="denyeart" updated="2018-02-27 20:38:07.0"/>
