<Action id="71870" issue="46958" author="yacovm" type="comment" created="2021-06-18 14:48:07.0" updateauthor="yacovm" updated="2021-06-18 14:48:07.0"> <body><! CDATA You can try and push the image to a different docker namespace so only you will pull it from there.     The Fabric project members can also try and  ask docker to not limit rate|https://www.docker.com/blog/expanded-support-for-open-source-software-projects/  by  submitting a form|https://docs.google.com/forms/d/e/1FAIpQLSd11DjfgeaKSRdqp6Br85MzQQuM4igt-xmn6rmzA2StFGLndQ/viewform .  ></body> </Action>
<Action id="71871" issue="46958" author="raspirepo" type="comment" created="2021-06-18 15:24:35.0" updateauthor="raspirepo" updated="2021-06-18 15:24:35.0"> <body><! CDATA Thanks for reply,  1. Is any recommendation for "_push the image to a different docker namespace_ " ?   2. I saved cc docker image into .tar from other peer (same org) peer1 and copied this docker image to peer0 and load/tagged according to need  it again on peer0. Current list below  kubectl exec peer0-0 -- docker images {code:java} acme-peer0.org1.skuchain.io-tuxedopops-6eee7eca0e22ec0cca0ca2b547bd1b6fa4ba995a07d2117f350ae89512931576-30e97bb6be1b6c6c66e977e6b85ffd00a6a0acb94d727419e852d85a4929d277   latest              2afa5511b96e        3 weeks ago         25MB hyperledger/fabric-ccenv                                                                                                                                                 2.2.0               aac435a5d3f1        11 months ago       586MB hyperledger/fabric-baseos                                                                                                                                                2.2.0               aa2bdf8013af        11 months ago       6.85MB  {code}   if peer has docker images including dependency images (Same chaincode package installed in other peer/orgs) still peer try to connect docker hub and pull images.  Any insight info why peers always try to connect docker hub when docker images locally available inside peer container ?  IS supposed to check locally and use it local images ?  I can push docker images to Azure (ACR/AWS ECR) as private access, if that case is it possible to set docker pull authentication to AWS ECR registry so there wont be any pull limit ?  As of now chaincode development become major blocking issue as a developer keep write update test new functions but unable to deploy chaincode in production environments     Thanks  Mariya  ></body> </Action>
<Action id="71872" issue="46958" author="yacovm" type="comment" created="2021-06-18 15:45:18.0" updateauthor="yacovm" updated="2021-06-18 15:46:46.0"> <body><! CDATA You need to  sign up|https://hub.docker.com/signup  to dockerhub and then push your image to dockerhub, after which you need to change the  docker namespace|https://github.com/hyperledger/fabric/blob/main/sampleconfig/core.yaml#L537-L571  in the peer's configuration. The Fabric peer code simply  replaces|https://github.com/hyperledger/fabric/blob/1147977a810ac58c97bd9429b052cc9b56e496b0/core/chaincode/platforms/util/utils.go#L168-L173  the default with what it is compiled with, so if you replace the placeholder "$DOCKER_NS" with something specific like "mariyak" namespace in dockerhub, I think it will not replace it with hyperledger and  build|https://github.com/hyperledger/fabric/blob/1147977a810ac58c97bd9429b052cc9b56e496b0/core/chaincode/platforms/util/utils.go#L32-L97  the chaincode container from your personal namespace.  To push an image to dockerhub you can follow  this|https://github.com/SmartBFT-Go/fabric/blob/release-1.4-BFT-2/scripts/publish_images.sh  script.  ></body> </Action>
<Action id="71874" issue="46958" author="raspirepo" type="comment" created="2021-06-18 18:19:56.0" updateauthor="raspirepo" updated="2021-06-18 18:19:56.0"> <body><! CDATA Hi,    Have couple of questions   1. Seems to me without docker hub account and push chain code docker image to Docker hub account we can't deploy chain code on peers any more ?  2. We have our own docker registry in AWS and Azure cloud. Is there way to set peer Env's to pull from private registry ? i.e. how to set docker pull secret OR docker login with in peer docker in docker env so (dind-daemon) it can pull from private registry  3. As you mentioned above, need to push docker image to docker hub, which docker image you are referring ?   i.e. "hyperledger/fabric-XXX".  4. Is there any issue or the way implemented in fabric peer is it does not check local docker images ? I can see on the peers fabric cc env containers already there, yet trying to pull from docker hub.    5. Is there way to disable the peer "docker pull from docker hub" ?  i.e We can copy required docker images from externally to peer    Thanks  Mariya    ></body> </Action>
<Action id="71875" issue="46958" author="yacovm" type="comment" created="2021-06-18 19:45:05.0" updateauthor="yacovm" updated="2021-06-18 19:45:05.0"> <body><! CDATA # You can pull from private registries, sure. # Maybe if you change the  VMEndpoint|https://github.com/hyperledger/fabric/blob/main/sampleconfig/core.yaml#L482  ? I am not sure. # I am referring to the images listed  here|https://github.com/hyperledger/fabric/blob/main/sampleconfig/core.yaml#L537-L560 . # Yes you can use the  external builder|https://hyperledger-fabric.readthedocs.io/en/latest/cc_launcher.html  mechanism. It gives you full control on how to deploy chaincode. With external builders you can even deploy the chaincode on the moon. # Read (4).  ></body> </Action>
<Action id="71876" issue="46958" author="raspirepo" type="comment" created="2021-06-18 21:31:01.0" updateauthor="raspirepo" updated="2021-06-18 21:31:01.0"> <body><! CDATA Hi  ~yacovm   Thank you so much for details. One more question on separate topic,  1. Is there way to delete a channels (i.e. removing orgs from channel and then remove the channels from network)?  I wanted setup separate channels for dev/test on HLF network and laster remove that channels (ledger-data, chain code) . 2. If that not allowed is there other recommended methods to clean up older ledger data from the network ?  ></body> </Action>
<Action id="71877" issue="46958" author="yacovm" type="comment" created="2021-06-18 22:19:02.0" updateauthor="yacovm" updated="2021-06-18 22:19:02.0"> <body><! CDATA If your orderers use the channnel participation API (Fabric 2.3 and higher) you can remove the channel from an orderer. You cannot remove the channel from a peer in any version, but this is a  feature|https://jira.hyperledger.org/browse/FAB-11334  that Fabric developers are working on.   If you use the channel participation API you can remove the channel from the orderer, then delete the peers and re-create them without the old channels.   To avoid replicating all the blocks in the peers you can  take a snapshot|https://hyperledger-fabric.readthedocs.io/en/latest/peer_ledger_snapshot.html  on the peer and then bootstrap from that snapshot.   ></body> </Action>
<Action id="71920" issue="46958" author="denyeart" type="comment" body="Since the external builder is the recommended approach for production deployments, and no issue in Fabric itself mentioned here, closing." created="2021-07-04 16:00:21.0" updateauthor="denyeart" updated="2021-07-04 16:00:21.0"/>
