<Issue id="15277" key="FAB-2709" number="2709" project="10002" reporter="denyeart" assignee="chris.elder" creator="denyeart" type="10004" summary="Fix CouchDB retry logic" priority="2" resolution="10000" status="6" created="2017-03-09 00:22:23.0" updated="2018-07-20 14:11:57.0" resolutiondate="2017-04-18 17:41:17.0" votes="0" watches="1" workflowId="37743"> <description><! CDATA FAB-2437 and FAB-2600 added retry logic for CouchDB interactions. To account for cases when peer and couchdb start at same time, 2 minutes of retries are done.  This does not work well for chaincode execution though.  Need to fix it such that peer startup verification retries more times than endorsement/commit interactions with CouchDB, ideally configurable.  Note that invalid index specified in _find API returns 500 error: {"error":"unknown_error","reason":"Unknown Error: mango_idx :: {no_usable_index,no_index_matching_name}"} .  500 errors like this should ideally not be retried more than once, but most 500 errors are for unexpected errors that deserve a retry. There is not a good way to differentiate between the 500 errors that deserve a retry and those that don't, so I think we need to be conservative and retry for any 500 error.  ></description> </Issue>
