<Action id="23637" issue="16536" author="muralisr" type="comment" created="2017-05-10 13:43:58.0" updateauthor="muralisr" updated="2017-05-10 13:43:58.0"> <body><! CDATA though this is "low" this is a good one to clear up as it might help others.  Assigning to self.  ></body> </Action>
<Action id="23837" issue="16536" author="amjadnz" type="comment" created="2017-05-13 13:06:06.0" updateauthor="amjadnz" updated="2017-05-13 13:06:06.0"> <body><! CDATA Hi - I was able to get through it - by using the e2e network scripts. I Updated the configtx.yaml and the crypto-config.yaml       {code:java} OrdererOrgs:   - Name: Orderer     Domain: ttsme.com     Specs:       - Hostname: orderer PeerOrgs:   - Name: Org1     Domain: org1.ttsme.com     Template:       Count: 2     Users:       Count: 2   - Name: Org2     Domain: org2.ttsme.com     Template:       Count: 2     Users:       Count: 2   - Name: Org3     Domain: org3.ttsme.com     Template:       Count: 2     Users:       Count: 2   - Name: Org4     Domain: org4.ttsme.com     Template:       Count: 2     Users:       Count: 2       {code}       ></body> </Action>
<Action id="23838" issue="16536" author="amjadnz" type="comment" created="2017-05-13 13:08:44.0" updateauthor="amjadnz" updated="2017-05-13 13:08:44.0"> <body><! CDATA Add added fabric-ca nodes for each org (original docker-compose-template.yaml) in the attachment.  Generated the NETWORK (by only creating the orderer block , channel transaction file, joining peers, installing on all peers (peer0 and peer1 for org1,2,3 and 4) and instantiating the chaincode on peer1.org1.ttsme.com.  Then tried the NODESDK to query with the following command. {code:java} curl -s -X GET \ "http://localhost:4000/channels/aj001/chaincodes/sc_userole?peer=peer0&args=%5B%27role-1%27%2C%27user-1%27%5D&chaincodeVersion=1" \ -H "authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE0OTQzNjY3MjEsInVzZXJuYW1lIjoiVXNlcjEiLCJvcmdOYW1lIjoib3JnMSIsImlhdCI6MTQ5NDM2MzEyMX0.lo1U2VphDMDBQeoX4-vs5I0sCeJe5NIAaK4qPE5Opm4" \ -H "cache-control: no-cache" \ -H "content-type: application/json" \ -H "x-access-token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE0OTQzNjY3MjEsInVzZXJuYW1lIjoiVXNlcjEiLCJvcmdOYW1lIjoib3JnMSIsImlhdCI6MTQ5NDM2MzEyMX0.lo1U2VphDMDBQeoX4-vs5I0sCeJe5NIAaK4qPE5Opm4"{code}  ></body> </Action>
<Action id="23839" issue="16536" author="amjadnz" type="comment" created="2017-05-13 13:10:00.0" updateauthor="amjadnz" updated="2017-05-13 13:10:00.0"> <body><! CDATA The result I got was this at node-sdk console: {code:java}  2017-05-10 01:19:13.692   INFO  Query - User b now has Error: Incorrect number of arguments. Expecting RoleId and PermissionId of the user to query after the move  2017-05-10 01:20:47.583   DEBUG  SampleWebApp - ==================== QUERY ON CHAINCODE ==================  2017-05-10 01:20:47.585   DEBUG  SampleWebApp - channelName : aj001  2017-05-10 01:20:47.585   DEBUG  SampleWebApp - chaincodeName : sc_userole  2017-05-10 01:20:47.585   DEBUG  SampleWebApp - peer : peer0  2017-05-10 01:20:47.586   DEBUG  SampleWebApp - args :  'role-1','user-1'   2017-05-10 01:20:47.586   DEBUG  SampleWebApp - chaincodeVersion : 1  2017-05-10 01:20:47.586   DEBUG  SampleWebApp -   'role-1', 'user-1'    2017-05-10 01:20:47.587   DEBUG  SampleWebApp - User name : User1  2017-05-10 01:20:47.588   DEBUG  SampleWebApp - Org name : org1 info:  Peer.js : Peer.const - url: grpcs://localhost:7051 options grpc.ssl_target_name_override=peer0.org1.ttsme.com, grpc.default_authority=peer0.org1.ttsme.com  2017-05-10 01:20:47.597   INFO  Query - FunctionName:readItem info:  FabricCAClientImpl.js : Successfully constructed Fabric CA client from options - {"protocol":"https","hostname":"localhost","port":7054,"tlsOptions":{"trustedRoots":  ,"verify":false}} info:  FabricCAClientImpl.js : Successfully constructed Fabric CA service client: endpoint - {"protocol":"https","hostname":"localhost","port":7054} info:  crypto_ecdsa_aes : This class requires a CryptoKeyStore to save keys, using the store: {"opts":{"path":"/root/.hfc-key-store"}} info:  Client.js : Successfully loaded user "User1" from local key value store  2017-05-10 01:20:47.616   INFO  Helper - Successfully loaded member from persistence  2017-05-10 01:20:47.935   INFO  Query - User b now has  {"Key":"a-1", "Record":{"roleId":"role-1","status":"1","userId":"user-1"}} {code}  ></body> </Action>
<Action id="23840" issue="16536" author="muralisr" type="comment" created="2017-05-13 13:47:06.0" updateauthor="muralisr" updated="2017-05-13 13:47:06.0"> <body><! CDATA Thanks  ~Amjadnz  for keeping at it and figuring it out !   Confess I don't understand what went into coming up with the curl command. Can you expand on that please ?   Finally, this discovery process may be a good thing to make a video out of and post to "fabric-playbacks" when you have some time.  What do you think ? If thats reasonable  ~markparz  has helped with that process in the past.  ></body> </Action>
<Action id="23850" issue="16536" author="amjadnz" type="comment" created="2017-05-14 12:25:33.0" updateauthor="amjadnz" updated="2017-05-14 12:25:33.0"> <body><! CDATA Dear muralisr - my idea of development and testing is follows using hyperledger fabric protocol. # Develop the chaincode, # Test using the CLI container (using CURL Commands) # Develop the NODE-SDK (REST Services) - Middleware # Test REST layer with command interface (using CURL Commands) # Test the REST layer with the business ui framework like ExtJS or AngularJS.  I was stuck at Step 4 because - the arguments I was passing to the  CURL Commands wont work for NODE SDK. After verification I found that the arguments needed are different for CURL Command in CLI and CURL command in NODE SDK.  Eg:  For CURL in CLI container - it has to be  'readItem','user-1','role-1'   For CURL using the NODE-SDK - it had to be  'user-1','role-1'  - also the function name I had to pass as "request.functionName" - as per the default it is set to invoke. I had to change it to 'readItem'     ></body> </Action>
<Action id="24916" issue="16536" author="christopherferris" type="comment" body="going to close this as it seems that you have figured it out." created="2017-06-01 12:27:05.0" updateauthor="christopherferris" updated="2017-06-01 12:27:05.0"/>
