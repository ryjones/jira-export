<Issue id="33033" key="FAB-11650" number="11650" project="10002" reporter="yacovm" assignee="hagarm" creator="yacovm" type="10002" summary="Inject gRPC server instance into gossip tests instead of having gossip create it" priority="3" resolution="10000" status="6" created="2018-08-18 17:08:14.0" updated="2019-02-19 12:48:46.0" resolutiondate="2019-02-19 12:48:46.0" votes="0" watches="2" workflowId="44238"> <description><! CDATA Currently, all unit tests of gossip that use a gRPC server - have the gossip's communication layer create the gRPC service on its own by generating a self signed TLS certificates and also setting InsecureSkipVerify in the TLS server/client configuration.  In addition, the port number is passed from the constructor and ripples down to the gRPC server creation function.  This is problematic because: * The port should be ephemeral, to enable concurrent execution of tests * InsecureSkipVerify in the production code should really not be used * There needs to be a single constructor and not one for the production and one for the test.     We need to: # Delete the test constructor NewCommInstanceWithServer and the createGRPCLayer method. # Modify the tests to first create the gRPC server on an ephemeral port, and then pass the port to the gossip instance constructor's endpoint, and pass the gRPC server to the production comm constructor. # ???? # Profit     ></description> </Issue>
