<Issue id="38363" key="FAB-14587" number="14587" project="10002" reporter="latitiah" assignee="ales" creator="latitiah" type="10004" summary="Unable to add new org to existing channel with new lifecycle" priority="3" resolution="10000" status="6" created="2019-03-11 17:55:44.0" updated="2019-03-20 06:15:43.0" resolutiondate="2019-03-20 06:15:43.0" votes="0" watches="1" workflowId="49997"> <description><! CDATA This test was executed using the behave framework in fabric-test.  When adding a new (3rd) org to an existing channel, the new org is failing to endorse the new policy during the approval step. {code}\x1b 34m2019-03-11 13:48:44.880 UTC  chaincodeCmd  ClientWait -> INFO 001\x1b 0m txid  a645a928ff9f5a5b216abdb0cd99fbe544de8193bdbf5a4bdade864511c5376e  committed with status (ENDORSEMENT_POLICY_FAILURE) at peer1.org3.example.com:7051 \x1b 34m2019-03-11 13:48:44.885 UTC  chaincodeCmd  ClientWait -> INFO 002\x1b 0m txid  a645a928ff9f5a5b216abdb0cd99fbe544de8193bdbf5a4bdade864511c5376e  committed with status (ENDORSEMENT_POLICY_FAILURE) at peer0.org3.example.com:7051{code}  This is the command that is failing: {code}peer lifecycle chaincode approveformyorg --name mycc --channelID behavesystest --version 0 --peerAddresses peer0.org3.example.com:7051 --peerAddresses peer1.org3.example.com:7051 --hash 3f808b08421089a4a4fe10ee2cfe9c1a7dfaf4ffd0dff3430182a1e3a78b3a0f --sequence 2 --waitForEvent --orderer orderer0.example.com:7050 --init-required --policy "OutOf(2,'org1.example.com.member','org2.example.com.member','org3.example.member')"{code}  The org1 and org2 approvals were successful executed. The org3 'configtx.yaml' has an'Endorsement' policy defined for the org. The error {code}VSCC error: stateBasedValidator.Validate failed, err validation of endorsement policy for collection _implicit_org_org3.example.com chaincode _lifecycle in tx 8:0 failed: could not create evaluator for channel reference policy: failed to retrieve policy for reference /Channel/Application/Org3ExampleCom/Endorsement{code} is in the log, but the channel config information in the log also shows the endorsement policy info is set.  See the attached peer log file.  ></description> </Issue>
