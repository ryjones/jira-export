<Action id="63216" issue="41948" author="angelo.decaro" type="comment" body=" ~denyeart , the current implementation supports both. In particular, the certificates in the admincerts folder are required to either carry the ClientOU or the AdminOU to be considered valid. Notice that, for MSP version &lt; 1.4.3, it was already enforced that the certificates in admincerts folder had to carry the ClientOU identifier, in the case the Node OU classification was enabled." created="2019-08-23 05:59:26.0" updateauthor="angelo.decaro" updated="2019-08-23 05:59:26.0"/>
<Action id="63217" issue="41948" author="angelo.decaro" type="comment" body="https://gerrit.hyperledger.org/r/#/c/fabric/+/33155/ release-1.4 merged" created="2019-08-23 06:14:05.0" updateauthor="denyeart" updated="2019-08-29 13:22:13.0"/>
<Action id="63399" issue="41948" author="denyeart" type="comment" body="Need CR for master still." created="2019-08-29 13:22:22.0" updateauthor="denyeart" updated="2019-08-29 13:22:22.0"/>
<Action id="63770" issue="41948" author="angelo.decaro" type="comment" body="https://gerrit.hyperledger.org/r/#/c/fabric/+/33527/ - master" created="2019-09-16 06:58:42.0" updateauthor="angelo.decaro" updated="2019-09-16 06:58:42.0"/>
<Action id="63968" issue="41948" author="hakan.eryargi" type="comment" created="2019-09-23 14:30:10.0" updateauthor="hakan.eryargi" updated="2019-09-23 14:30:10.0"> <body><! CDATA With this behavior when _EnableNodeOUs=true_ in _crypto-config.yaml_,  *peer's admincerts* are not copied either and this makes created crypto material unusable by peer.  Peer crashes with the below error. Is this intended? If  so, what is the correct configuration in this case?    {code:java} 2019-09-23 14:22:01.504 UTC  msp  getPemMaterialFromDir -> WARN 001 Failed reading file /etc/hyperledger/fabric/msp/admincerts/cert.pem: no pem content for file /etc/hyperledger/fabric/msp/admincerts/cert.pem 2019-09-23 14:22:01.505 UTC  main  InitCmd -> ERRO 002 Cannot run peer because error when setting up MSP of type bccsp from directory /etc/hyperledger/fabric/msp: administrators must be declared when no admin ou classification is set{code}  ></body> </Action>
<Action id="64142" issue="41948" author="angelo.decaro" type="comment" created="2019-09-26 06:18:13.0" updateauthor="angelo.decaro" updated="2019-09-26 06:18:13.0"> <body><! CDATA Hi  ~hakan.eryargi , the error seems to point to the fact that the MSP configuration does have EnableNodeOUs=true (or the AdminOU classification) cause the errors says that no admin ou classification is set, therefore the admin folder must be populated.   Could you attach the content of the MSP folder that produces the failure, please?  ></body> </Action>
<Action id="64206" issue="41948" author="hakan.eryargi" type="comment" created="2019-09-30 13:22:23.0" updateauthor="hakan.eryargi" updated="2019-09-30 13:23:14.0"> <body><! CDATA Hi  ~angelo.decaro , below are the contents of relevant peer's MSP folder, as can bee seen contents of the _admincerts_ folder is missing    {code:java} $ tree crypto-config/peerOrganizations/aptalkarga.tr/peers/peer0.aptalkarga.tr/msp/ crypto-config/peerOrganizations/aptalkarga.tr/peers/peer0.aptalkarga.tr/msp/ ├── admincerts ├── cacerts │   └── ca.aptalkarga.tr-cert.pem ├── config.yaml ├── keystore │   └── 4e1cac1894b7a44360e4fe956fa8129e389bbea865f2fe57ae88df043de03093_sk ├── signcerts │   └── peer0.aptalkarga.tr-cert.pem └── tlscacerts └── tlsca.aptalkarga.tr-cert.pem 5 directories, 5 files  {code}    ></body> </Action>
<Action id="64252" issue="41948" author="angelo.decaro" type="comment" body=" ~hakan.eryargi , which Fabric branch are you using?" created="2019-10-02 06:12:07.0" updateauthor="angelo.decaro" updated="2019-10-02 06:12:07.0"/>
<Action id="64253" issue="41948" author="hakan.eryargi" type="comment" created="2019-10-02 08:24:14.0" updateauthor="hakan.eryargi" updated="2019-10-02 08:24:14.0"> <body><! CDATA  ~angelo.decaro  not branch but release.  This was working with *cryptogen* 1.4.1 and 1.4.2 but broken at 1.4.3 release.  ></body> </Action>
<Action id="64254" issue="41948" author="angelo.decaro" type="comment" body="alright, would it be possible to get the content of your configuration, please?" created="2019-10-02 08:40:43.0" updateauthor="angelo.decaro" updated="2019-10-02 08:40:43.0"/>
<Action id="64255" issue="41948" author="hakan.eryargi" type="comment" created="2019-10-02 08:43:54.0" updateauthor="hakan.eryargi" updated="2019-10-02 08:43:54.0"> <body><! CDATA you mean the contents of crypto-config.yaml?  here it is| https://github.com/APGGroeiFabriek/PIVT/blob/master/fabric-kube/samples/simple/crypto-config.yaml   and also pasted below:       {code:java} # --------------------------------------------------------------------------- # "OrdererOrgs" - Definition of organizations managing orderer nodes # --------------------------------------------------------------------------- OrdererOrgs: # --------------------------------------------------------------------------- # Orderer # --------------------------------------------------------------------------- - Name: Groeifabriek Domain: groeifabriek.nl Specs: - Hostname: orderer0 # --------------------------------------------------------------------------- # "PeerOrgs" - Definition of organizations managing peer nodes # --------------------------------------------------------------------------- PeerOrgs: - Name: Karga Domain: aptalkarga.tr EnableNodeOUs: true Template: Count: 1 Users: Count: 1  - Name: Nevergreen Domain: nevergreen.nl EnableNodeOUs: true Template: Count: 1 Users: Count: 1 - Name: Atlantis Domain: atlantis.com EnableNodeOUs: true Template: Count: 1 Users: Count: 1 {code}    ></body> </Action>
<Action id="64910" issue="41948" author="siddjain" type="comment" body="Also ran into the bug reported by  ~hakan.eryargi contents of the _admincerts_ folder is missing. It sucks! " created="2019-10-24 00:22:43.0" updateauthor="siddjain" updated="2019-10-24 00:22:43.0"/>
<Action id="64915" issue="41948" author="angelo.decaro" type="comment" body=" ~hakan.eryargi , if you use cryptogen shipped with 1.4.3, you have to enable NodeOUs everywhere, also at the ordering organisations. Could try that and see if it works. please? :)" created="2019-10-24 09:07:54.0" updateauthor="angelo.decaro" updated="2019-10-24 09:07:54.0"/>
<Action id="64916" issue="41948" author="hakan.eryargi" type="comment" body=" ~angelo.decaro  a sample configuration is in the  above comment|#comment-64255 .  _NodeOUs_ is enabled for peer organizations. It&apos;s peer organizations failing, not related to orderer organizations." created="2019-10-24 09:16:06.0" updateauthor="hakan.eryargi" updated="2019-10-24 09:16:06.0"/>
<Action id="64917" issue="41948" author="hakan.eryargi" type="comment" body="I have created a  Jira ticket|FAB-16933  for this one, I guess it needs more visibility" created="2019-10-24 09:33:48.0" updateauthor="hakan.eryargi" updated="2019-10-24 09:33:48.0"/>
<Action id="65023" issue="41948" author="denyeart" type="comment" created="2019-10-28 10:43:11.0" updateauthor="denyeart" updated="2019-10-28 10:43:11.0"> <body><! CDATA Merged in release-1.4 but not yet merged to master.   ~angelo.decaro  I'm a little confused by the Description... it sounds like the Jira intended to change behavior, but the CR is only a test. Can you clarify?  ></body> </Action>
<Action id="65067" issue="41948" author="angelo.decaro" type="comment" body=" ~denyeart , cause, if I&apos;m not wrong, when this Jira Item appeared we had already implemented that behaviour. So, the CR was to produce an integration test (that was missing) to show that the functionality was working as this Jira item also requested." created="2019-10-29 09:05:58.0" updateauthor="angelo.decaro" updated="2019-10-29 09:05:58.0"/>
<Action id="71660" issue="41948" author="JIRAUSER21642" type="comment" body="Is there a solution to this? I&apos;m currently stuck here and it&apos;s not clear what the solution is. thank you!" created="2021-04-02 23:28:00.0" updateauthor="JIRAUSER21642" updated="2021-04-02 23:28:00.0"/>
