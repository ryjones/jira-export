<Issue id="22729" key="FAB-6711" number="6711" project="10002" reporter="holocron" assignee="sunhwei" creator="holocron" type="10004" summary="PTE crashes when attempting to failover orderer" priority="3" resolution="10001" status="6" created="2017-10-20 18:37:22.0" updated="2019-07-30 02:40:42.0" resolutiondate="2019-07-30 02:40:42.0" votes="0" watches="3" workflowId="42946"> <description><! CDATA Attempting to use the {{*"ordererFailover": "TRUE",* option recently added to PTE causes PTE to crash (all node processes exit).}}     {{Error in PTE log shows:}} {code:java} info:  PTE 0 main : stderr: error:  PTE 0 exec :  Nid:chan:org:id=2:channel56:PeerOrg5:0 invoke_move_const  Failed to send transaction due to error: Error: SERVICE_UNAVAILABLE at ClientDuplexStream.<anonymous> (/root/fabric-sdk-node/node_modules/fabric-client/lib/Orderer.js:128:21) at emitOne (events.js:96:13) at ClientDuplexStream.emit (events.js:188:7) at ClientDuplexStream._emitStatusIfDone (/root/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:258:12) at ClientDuplexStream._readsDone (/root/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:221:8) at readCallback (/root/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:283:12){code}     Then: {noformat} info:  PTE 0 main : stderr: (node:1729) UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejection id: 1): TypeError: Cannot read property 'getUrl' of undefined{noformat}    The orderers in the SCFile are configured as such: {code:java} { "test-network": { "orderer": { "fabric-orderer-12121b": { "name": "OrdererOrg", "mspid": "OrdererOrg", "mspPath": "", "adminPath": "", "comName": "", "url": "grpcs://tor-zbc03b.3.secure.blockchain.ibm.com:12121", "server-hostname": "tor-zbc03b.3.secure.blockchain.ibm.com", "tls_cacerts": "/root/cacert.pem" }, "fabric-orderer-12121d": { "name": "OrdererOrg", "mspid": "OrdererOrg", "mspPath": "", "adminPath": "", "comName": "", "url": "grpcs://tor-zbc03d.3.secure.blockchain.ibm.com:12121", "server-hostname": "tor-zbc03d.3.secure.blockchain.ibm.com", "tls_cacerts": "/root/cacert.pem" }, "fabric-orderer-12121e": { "name": "OrdererOrg", "mspid": "OrdererOrg", "mspPath": "", "adminPath": "", "comName": "", "url": "grpcs://tor-zbc03e.3.secure.blockchain.ibm.com:12121", "server-hostname": "tor-zbc03e.3.secure.blockchain.ibm.com", "tls_cacerts": "/root/cacert.pem" } }, ...{code}  ></description> </Issue>
