<Action id="32948" issue="22729" author="dongming" type="comment" created="2017-10-20 19:11:43.0" updateauthor="dongming" updated="2017-10-20 19:11:43.0"> <body><! CDATA Before PTE starts tansactions, PTE builds an orderer list for failover, as below:  info:  PTE 0 main : stdout: info:  PTE 0 exec :  Nid:chan:org:id=0:testorgschannel1:org2:0 assignOrdererList  orderer list:  \{"_options":\{"grpc.ssl_target_name_override":"orderer0.example.com","grpc.default_authority":"orderer0.example.com","grpc.primary_user_agent":"grpc-node/1.6.0"},"_url":"grpcs://localhost:5005","_endpoint":\{"addr":"localhost:5005","creds":\{}},"_request_timeout":45000,"_ordererClient":\{"$channel":\{}}},\{"_options":\{"grpc.ssl_target_name_override":"orderer1.example.com","grpc.default_authority":"orderer1.example.com","grpc.primary_user_agent":"grpc-node/1.6.0"},"_url":"grpcs://localhost:5006","_endpoint":\{"addr":"localhost:5006","creds":\{}},"_request_timeout":45000,"_ordererClient":\{"$channel":\{}}},\{"_options":\{"grpc.ssl_target_name_override":"orderer2.example.com","grpc.default_authority":"orderer2.example.com","grpc.primary_user_agent":"grpc-node/1.6.0"},"_url":"grpcs://localhost:5007","_endpoint":\{"addr":"localhost:5007","creds":\{}},"_request_timeout":45000,"_ordererClient":\{"$channel":\{}}}      When failover occurs, PTE shows the following logs, see Orderer failover and then continue to send transactions:     info:  PTE 0 main : stderr: error:  Orderer.js : sendBroadcast - on error: "Error: Endpoint read failed\n at ClientDuplexStream._emitStatusIfDone (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:255:19)\n at ClientDuplexStream._receiveStatus (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:233:8)\n at /home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:757:12"  info:  PTE 0 main : stderr: error:  PTE 0 exec :  Nid:chan:org:id=0:testorgschannel1:org2:0 invoke_move_const  Failed to send transaction due to error: Error: SERVICE_UNAVAILABLE at ClientDuplexStream.<anonymous> (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/fabric-client/lib/Orderer.js:128:21) at emitOne (events.js:96:13) at ClientDuplexStream.emit (events.js:188:7) at ClientDuplexStream._emitStatusIfDone (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:258:12) at ClientDuplexStream._receiveStatus (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:233:8) at /home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:757:12  info:  PTE 0 main : stdout: info:  PTE 0 exec :  Nid:chan:org:id=0:testorgschannel1:org2:0 ordererFailover  Orderer failover from (grpcs://localhost:5005) to (grpcs://localhost:5006):  info:  PTE 0 main : stderr: error:  Orderer.js : sendBroadcast - on error: "Error: Endpoint read failed\n at ClientDuplexStream._emitStatusIfDone (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:255:19)\n at ClientDuplexStream._receiveStatus (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:233:8)\n at /home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:757:12"  info:  PTE 0 main : stderr: error:  PTE 0 exec :  Nid:chan:org:id=0:testorgschannel1:org1:0 invoke_move_const  Failed to send transaction due to error: Error: SERVICE_UNAVAILABLE at ClientDuplexStream.<anonymous> (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/fabric-client/lib/Orderer.js:128:21) at emitOne (events.js:96:13) at ClientDuplexStream.emit (events.js:188:7) at ClientDuplexStream._emitStatusIfDone (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:258:12) at ClientDuplexStream._receiveStatus (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:233:8) at /home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:757:12  info:  PTE 0 main : stdout: info:  PTE 0 exec :  Nid:chan:org:id=0:testorgschannel1:org1:0 ordererFailover  Orderer failover from (grpcs://localhost:5005) to (grpcs://localhost:5006):  info:  PTE 0 main : stdout: info:  PTE 0 exec :  Nid:chan:org:id=0:testorgschannel1:org2:0 isExecDone  invokes(Move) sent: number=100, evtTimeoutCnt=0, elapsed time= 11133  info:  PTE 1 main : stdout: info:  PTE 1 exec :  Nid:chan:org:id=0:testorgschannel2:org4:0 isExecDone  invokes(Move) sent: number=200, evtTimeoutCnt=0, elapsed time= 17195  info:  PTE 1 main : stdout: info:  PTE 1 exec :  Nid:chan:org:id=0:testorgschannel2:org3:0 isExecDone  invokes(Move) sent: number=200, evtTimeoutCnt=0, elapsed time= 18317  info:  PTE 0 main : stdout: info:  PTE 0 exec :  Nid:chan:org:id=0:testorgschannel1:org1:0 isExecDone  invokes(Move) sent: number=200, evtTimeoutCnt=0, elapsed time= 19528                       ></body> </Action>
<Action id="32955" issue="22729" author="dongming" type="comment" body="what is the fabric-sdk-node commit level in your test?" created="2017-10-20 19:49:22.0" updateauthor="dongming" updated="2017-10-20 19:49:22.0"/>
<Action id="32983" issue="22729" author="holocron" type="comment" created="2017-10-23 14:22:06.0" updateauthor="holocron" updated="2017-10-23 14:22:06.0"> <body><! CDATA 6f7310ccda8648473d0f794e28c5b390ac030480   - this is the 1.0.2 release  ></body> </Action>
<Action id="33212" issue="22729" author="dongming" type="comment" body="I am unable to recreate with v1.0.0, will look v1.0.2" created="2017-10-26 13:53:00.0" updateauthor="dongming" updated="2017-10-26 13:53:00.0"/>
<Action id="34750" issue="22729" author="sunhwei" type="comment" body="I am unable to recreate it with node-sdk V1.0.0 and  fabric v1.1 preview " created="2017-11-20 02:41:14.0" updateauthor="sunhwei" updated="2017-11-20 02:41:14.0"/>
<Action id="38000" issue="22729" author="sunhwei" type="comment" body="Due to we can not re-produce this issue, suggest to close it." created="2018-01-04 14:18:46.0" updateauthor="sunhwei" updated="2018-01-04 14:18:46.0"/>
<Action id="38352" issue="22729" author="holocron" type="comment" body="Agreed. We will reopen if needed." created="2018-01-09 18:40:47.0" updateauthor="holocron" updated="2018-01-09 18:40:47.0"/>
<Action id="62265" issue="22729" author="mastersingh24" type="comment" body="been open over a year with no activity ... time to cleanup" created="2019-07-30 02:40:42.0" updateauthor="mastersingh24" updated="2019-07-30 02:40:42.0"/>
