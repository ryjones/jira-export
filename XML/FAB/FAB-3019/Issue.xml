<Issue id="15599" key="FAB-3019" number="3019" project="10002" reporter="daijianw" creator="daijianw" type="10004" summary="Fail to run chaincode_example05" environment="1.0.0.-alpha" priority="3" resolution="10000" status="6" created="2017-04-06 13:55:09.0" updated="2018-07-20 14:12:08.0" resolutiondate="2017-05-11 23:45:37.0" votes="0" watches="2" workflowId="37916"> <description><! CDATA Based on https://github.com/hyperledger/fabric/blob/master/examples/e2e_cli/end-to-end.rst to setup network,  created the channel "mychannel",  joined the  channel. Install and instantiate chaincode_example02 on all peers, it works fine.  But after install and instantiate chaincode_example05, it failed to do query operation.  1)The command to install the chaincode "chaincode_example05" CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID="Org0MSP" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode install -n mycc2 -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example05  2)The command to instantiate the chaincode "chaincode_example05" CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID="Org0MSP" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode instantiate -o orderer0:7050 --tls true --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/orderer/localMspConfig/cacerts/ordererOrg0.pem  -n mycc2 -v 1.0 -c '{"Args": "init","sum","0" }'   3)The command to query the chaincode "chaincode_example05" CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID="Org0MSP" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode query -C mychannel -n mycc2 -c '{"Args": "query","github.com/hyperledger/fabric/core/example/chaincode/chaincode_example02","sum" }'   4)The error output of the query command 2017-04-05 21:07:54.984 UTC  logging  InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode' 2017-04-05 21:07:54.995 UTC  msp  GetLocalMSP -> DEBU 002 Returning existing local MSP 2017-04-05 21:07:54.995 UTC  msp  GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity 2017-04-05 21:07:54.997 UTC  msp  Sign -> DEBU 004 Sign: plaintext: 0A90050A5A080322096D796368616E6E...655F6578616D706C6530320A0373756D  2017-04-05 21:07:54.997 UTC  msp  Sign -> DEBU 005 Sign: digest: F72CE08E132719D2B9F105CAC15810A873D48CBD19307A0A81809BE0AB0D3C1C  Error: Error endorsing query: rpc error: code = 2 desc = Error executing chaincode: Transaction returned with failure: Failed to find ledger for called channel hyperledger/fabric/core/example/chaincode/chaincode_example02  5)The output of container "dev-peer1-mycc2-1.0"  _2017-04-05 21:07:55.031 UTC  shim  func1 -> DEBU 01a  b41c6178 Received message TRANSACTION from shim 2017-04-05 21:07:55.033 UTC  shim  handleMessage -> DEBU 01b  b41c6178 Handling ChaincodeMessage of type: TRANSACTION(state:ready) 2017-04-05 21:07:55.033 UTC  shim  beforeTransaction -> DEBU 01c  b41c6178 Received TRANSACTION, invoking transaction on chaincode(Src:ready, Dst:ready) 2017-04-05 21:07:55.035 UTC  shim  handleInvokeChaincode -> DEBU 01d  b41c6178 Sending INVOKE_CHAINCODE 2017-04-05 21:07:55.042 UTC  shim  func1 -> DEBU 01e  b41c6178 Received message ERROR from shim 2017-04-05 21:07:55.042 UTC  shim  handleMessage -> DEBU 01f  b41c6178 Handling ChaincodeMessage of type: ERROR(state:ready) 2017-04-05 21:07:55.043 UTC  shim  sendChannel -> DEBU 020  b41c6178 before send 2017-04-05 21:07:55.044 UTC  shim  sendChannel -> DEBU 021  b41c6178 after send 2017-04-05 21:07:55.044 UTC  shim  afterError -> DEBU 022  b41c6178 Error received from validator ERROR, communicated(state:ready) 2017-04-05 21:07:55.044 UTC  shim  handleInvokeChaincode -> ERRO 023  b41c6178 Received ERROR. 2017-04-05 21:07:55.044 UTC  shim  func1 -> DEBU 024  b41c6178 Transaction completed. Sending COMPLETED 2017-04-05 21:07:55.044 UTC  shim  func1 -> DEBU 025  b41c6178 Move state message COMPLETED 2017-04-05 21:07:55.044 UTC  shim  handleMessage -> DEBU 026  b41c6178 Handling ChaincodeMessage of type: COMPLETED(state:ready) 2017-04-05 21:07:55.044 UTC  shim  func1 -> DEBU 027  b41c6178 send state message COMPLETED_  ></description> </Issue>
