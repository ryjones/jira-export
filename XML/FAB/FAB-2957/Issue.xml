<Issue id="15537" key="FAB-2957" number="2957" project="10002" reporter="suryalnvs" assignee="lehors" creator="suryalnvs" type="10001" summary="CLI chaincode invoke and query should return error if chaincode version is passed" environment="Lenovo laptop running Linux, vagrant" priority="3" resolution="10200" status="6" created="2017-03-31 18:44:59.0" updated="2019-01-09 16:05:04.0" resolutiondate="2019-01-09 16:05:04.0" votes="0" watches="5" workflowId="35106"> <description><! CDATA After upgrading to newer version, unable to query the older version of chaincode,  using -v option in "peer chaincode query -v <version>"  Tested on Mar 31 2017 using: commit 430c64d56eddd6365371a83e3b4ac074dbe3671d Date:   Fri Mar 31 14:36:49 2017 +0000  1. Launched the orderer using the orderer binary orderer 2. Launched the peer using the peer binary peer node start -o 127.0.0.1:7050 3. Installed the chaincode_example02  peer chaincode install -o 127.0.0.1:7050 -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 4. Instantiated the chaincode peer chaincode instantiate -o 127.0.0.1:7050 -n mycc -v 1.0 -c '{"Args": "init","a", "100", "b","200" }' 5. Queried the chaincode and obtained the value of a peer chaincode query -o 127.0.0.1:7050 -n mycc -c '{"Args": "query","a" }' 6. Installed the chaincode_example02 for version 2.0  peer chaincode install -o 127.0.0.1:7050 -n mycc -v 2.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 7. Upgraded the chaincode from version 1.0 to version 2.0 peer chaincode upgrade -o 127.0.0.1:7050 -n mycc -v 2.0 -c '{"Args": "init","c", "10", "d","20" }' 8. Queried the chaincode version 2.0 for c value peer chaincode query -o 127.0.0.1:7050 -n mycc -v 2.0 -c '{"Args": "query","c" }' and successfully queried "c" value 9. Now I wanted to query the value of a on version 1.0 peer chaincode query -o 127.0.0.1:7050 -n mycc -v 1.0 -c '{"Args": "query","a" }' and successfully queried "a" value, the query happened on chaincode version 2.0, but not the version I mentioned, version 1.0 in the command.  EXPECTED RESULT: "Peer chaincode query -v 1.0" is expected to query the chaincode version 1.0 in the appropriate container, even after the upgrade to version 2.0. However, it appears the version number option is ignored, and the latest version chaincode container handles the request. 10. Observed the logs of chaincode containers for both the versions 1.0 and 2.0, the query on step 9 is observed in verison 2.0 chaincode container logs, but not in the version 1.0 chaincode container logs.    ></description> </Issue>
