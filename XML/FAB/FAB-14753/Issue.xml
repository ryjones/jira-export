<Issue id="38651" key="FAB-14753" number="14753" project="10002" reporter="scottz" assignee="bharadwajambati1" creator="scottz" type="10101" summary="Remove an OSN, while traffic is running, and onboard same orderer again" priority="3" resolution="10000" status="6" created="2019-03-21 15:41:45.0" updated="2019-07-23 20:50:15.0" resolutiondate="2019-07-23 20:50:15.0" votes="0" watches="1" workflowId="50296"> <description><! CDATA Test similar to that as described in FAB-14357:  With traffic running, do the following variations dynamically with config updates: # Remove an orderer from channel1, then restart the orderer, and then submit a config update to add it again to channel1, using same certs, with ledger and artifacts intact. Use persistent volume claims (PVC) to maintain the data. (And maybe we should repeat this case, in between removal and addition of an orderer, submit a config update to add a DIFFERENT orderer too.) # VOID: Remove an orderer from channel1, then restart it, and then add it again to channel1, using same certs, but fresh without any ledger and artifacts. (We originally thought we could simply restart the pod and skip using any persistent volumes for the data in k8s, as in scenario 4. But then restarting the node would mean losing all the data for all the channels. Thus we will skip this scenario because an operator would not likely have access to remove ledger and wal data for just one application channel. Refer to scenario 4, which encompasses this.) # Remove an orderer from channel1, AND remove it from orderer system channel too;  then add the same orderer to orderer system channel AND to channel1 again, using same certs with ledger and artifacts intact. Fetch the latest block from system channel and then restart the orderer. Use PVCs.  # Remove an orderer from channel1 AND orderer system channel, add it again to orderer system channel AND channel1. After a couple of minutes fetch the latest config block from the system channel and finally restart it fresh using same certs but without any ledger and artifacts; to do this, we will NOT use PVCs for the data in k8s, thus the artifacts will be removed when we restart the pod containing the orderer.  ></description> </Issue>
