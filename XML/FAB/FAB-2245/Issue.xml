<Issue id="14805" key="FAB-2245" number="2245" project="10002" reporter="ratnakar" assignee="ales" creator="ratnakar" type="10004" summary="chaincode instantiate results into peer crash" priority="1" resolution="10000" status="6" created="2017-02-15 14:35:00.0" updated="2018-07-20 14:11:39.0" resolutiondate="2017-02-16 15:19:12.0" votes="0" watches="3" workflowId="37446"> <description><! CDATA Followed the instructions from section *Vagrant Environment using native binaries* of this link here https://github.com/asararatnakar/chaincode_sample/blob/master/README.md#vagrant-environment-using-native-binaries  While *instantiating* the chaincode I see the crash in peer https://github.com/asararatnakar/chaincode_sample/blob/master/README.md#instantiate  instantiate command terminal says peer is dead {code} peer chaincode instantiate -C myc1 -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_sample -c '{"Args": "" }' Error: Error endorsing chaincode: rpc error: code = 13 desc = transport is closing  Usage: peer chaincode instantiate  flags  {code}  A gist of peer logs (attached peer and orderer logs)  {code} 2017-02-15 14:10:23.154 UTC  protoutils  ValidateTransaction -> INFO 03f Header is channel_header:<type:1 timestamp:<seconds:1487167673 > channel_id:"myc1" > signature_header:<creator:"\n\007DEFAULT\022\232\007-----BEGIN -----\nMIICjDCCAjKgAwIBAgIUBEVwsSx0TmqdbzNwleNBBzoIT0wwCgYIKoZIzj0EAwIw\nfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh\nbiBGcmFuY2lzY28xHzAdBgNVBAoTFkludGVybmV0IFdpZGdldHMsIEluYy4xDDAK\nBgNVBAsTA1dXVzEUMBIGA1UEAxMLZXhhbXBsZS5jb20wHhcNMTYxMTExMTcwNzAw\nWhcNMTcxMTExMTcwNzAwWjBjMQswCQYDVQQGEwJVUzEXMBUGA1UECBMOTm9ydGgg\nQ2Fyb2xpbmExEDAOBgNVBAcTB1JhbGVpZ2gxGzAZBgNVBAoTEkh5cGVybGVkZ2Vy\nIEZhYnJpYzEMMAoGA1UECxMDQ09QMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE\nHBuKsAO43hs4JGpFfiGMkB/xsILTsOvmN2WmwpsPHZNL6w8HWe3xCPQtdG/XJJvZ\n+C756KEsUBM3yw5PTfku8qOBpzCBpDAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYw\nFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFOFC\ndcUZ4es3ltiCgAVDoyLfVpPIMB8GA1UdIwQYMBaAFBdnQj2qnoI/xMUdn1vDmdG1\nnEgQMCUGA1UdEQQeMByCCm15aG9zdC5jb22CDnd3dy5teWhvc3QuY29tMAoGCCqG\nSM49BAMCA0gAMEUCIDf9Hbl4xn3z4EwNKmilM9lX2Fq4jWpAaRVB97OmVEeyAiEA\n25aDPQHGGq2AvhKT0wvt08cX1GTGCIbfmuLpMwKQj38=\n-----END -----\n" nonce:"\230\272\330\364N\267\345{,\257\247\025\235\213\232\267\225&\370-\311\227K\037" >  2017-02-15 14:10:23.155 UTC  protoutils  validateChannelHeader -> INFO 040 validateChannelHeader info: header type 1 2017-02-15 14:10:23.155 UTC  protoutils  checkSignatureFromCreator -> INFO 041 checkSignatureFromCreator starts panic: runtime error: invalid memory address or nil pointer dereference  signal SIGSEGV: segmentation violation code=0x1 addr=0x20 pc=0x8cba43   goroutine 149  running : panic(0xafea40, 0xc4200100c0) 	/opt/go/src/runtime/panic.go:500 +0x1a1 github.com/hyperledger/fabric/common/configtx/handlers/msp.(*MSPConfigHandler).DeserializeIdentity(0xc420221a40, 0xc4217b7800, 0x3a6, 0x3a6, 0x0, 0x0, 0xc421861c90, 0x1) 	<autogenerated>:1 +0x43 github.com/hyperledger/fabric/core/common/validation.checkSignatureFromCreator(0xc4217b7800, 0x3a6, 0x3a6, 0xc4217959f0, 0x46, 0x46, 0xc4218b5a00, 0x1939, 0x1939, 0xc421861b10, ...) 	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/msgvalidation.go:129 +0x156 github.com/hyperledger/fabric/core/common/validation.ValidateTransaction(0xc421872840, 0xc421861a20, 0x1, 0x1) 	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/msgvalidation.go:345 +0x2b1 github.com/hyperledger/fabric/core/committer/txvalidator.(*txValidator).Validate(0xc421862540, 0xc421862f80, 0x0, 0x0) 	/opt/gopath/src/github.com/hyperledger/fabric/core/committer/txvalidator/validator.go:116 +0x4a9 github.com/hyperledger/fabric/core/committer.(*LedgerCommitter).Commit(0xc421862560, 0xc421862f80, 0x5, 0x7f7a6a6c5000) 	/opt/gopath/src/github.com/hyperledger/fabric/core/committer/committer_impl.go:58 +0xe8 github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock(0xc4217e0240, 0xc421862f80, 0x0, 0x4, 0xc421861998) 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:397 +0x56 github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads(0xc4217e0240) 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:294 +0x458 created by github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:148 +0x692  {code}  ></description> </Issue>
