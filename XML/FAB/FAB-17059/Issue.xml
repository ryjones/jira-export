<Issue id="43296" key="FAB-17059" number="17059" project="10002" reporter="silveraid" assignee="caod" creator="silveraid" type="10004" summary="Private data reconciliation fails when CA certificates have been rotated" priority="2" resolution="10000" status="6" created="2019-11-12 18:46:30.0" updated="2020-05-28 16:27:43.0" resolutiondate="2020-02-18 21:46:28.0" votes="1" watches="11" workflowId="56403"> <description><! CDATA I have run into an issue which I think it is some form of bug in the private data reconciliation related to new CA certificates introduced on a network. Due to this bug private data created on a network before introducing the new CA certificates is not being synced over to peers which have their MSP created with the new CA certificates and newly joined to the network, however, any private data created after the new CA certificates are in place are syncing over without any problem.  There are only a few cases what I can think of when CA certificates may change, e.g. * the private key gets compromised and we are forced to be changed, or * the certificate just expires so we are forced to create new ones, or * the key is stored in an HSM and the CA needs to be migrated away from the HSM.  Â   When the new peer joins to the network with the MSP id from the new CA the following messages can be observed which are probably related: {noformat} 2019-11-12 15:40:14.234 UTC  committer.txvalidator  Validate -> INFO 3bd7  mychannel  Validated block  67  in 1ms 2019-11-12 15:40:14.234 UTC  cauthdsl  deduplicate -> ERRO 3bd8 Principal deserialization failure (the supplied identity is not valid: x509: certificate signed by unknown authority) for identity 0 2019-11-12 15:40:14.234 UTC  gossip.privdata  listMissingPrivateData -> WARN 3bd9 Removed mycc mycollection hash 188afea30ec6d87091b1900f04a811c1cd4e84d4245ddfd9a4b45347b71b47dd from the data passed to the ledger 2019-11-12 15:40:14.258 UTC  kvledger  CommitWithPvtData -> INFO 3bda  mychannel  Committed block  67  with 1 transaction(s) in 23ms (state_validation=3ms block_and_pvtdata_commit=1ms state_commit=18ms) commitHash= 60fec85779c72be4670c72fe4ccde47b98ed99c4d18481acae155566f08f01fe {noformat}  ></description> </Issue>
