<Issue id="18020" key="FAB-4738" number="4738" project="10002" reporter="shimos" assignee="shimos" creator="shimos" type="10004" summary="PATH and GOROOT should be noted in the doc" environment="fabric commit 97e3ae61168acad6f425cf38dde90b8fc50766af" priority="3" resolution="10000" status="6" created="2017-06-14 22:03:31.0" updated="2018-07-20 14:13:25.0" resolutiondate="2017-06-20 18:00:22.0" votes="0" watches="3" workflowId="39097" security="10001"> <description><! CDATA During behave test(bddtests), I met some errors when PATH and GOROOT are not set properly. Although GOPATH is noted in the documents, as far as I know, PATH and GOROOT are not clearly mentioned in the documents. These should be specified as prerequisites for developers, as this would be the case for new behave tests(test/feature).  Details of errors:  1. PATH not including build/bin  The peer command is called during the behave test, and it is located in build/bin, which usually does not appear in PATH unless you explicitly set it. {noformat} $ behave ...(snip)… And user "peer0Admin" using cert alias "peer-admin-cert" creates a install proposal "installProposal1" for channel "com.acme.blockchain.jdoe.channel1" using chaincode spec "ccSpec" # steps/endorser_impl.py:41 0.009s Traceback (most recent call last): File "/home/ubuntu/Envs/behave_venv/local/lib/python2.7/site-packages/behave/model.py", line 1456, in run match.run(runner.context) File "/home/ubuntu/Envs/behave_venv/local/lib/python2.7/site-packages/behave/model.py", line 1903, in run self.func(context, *args, **kwargs) File "steps/endorser_impl.py", line 49, in step_impl ccDeploymentSpec = endorser_util.createDeploymentSpec(context=context, ccSpec=ccSpec) File "/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/endorser_util.py", line 178, in createDeploymentSpec _createDeploymentSpecAsFile(ccSpec=ccSpec, outputPath=outputPath) File "/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/endorser_util.py", line 166, in _createDeploymentSpecAsFile bdd_test_util.cli_call( "peer","chaincode","package"  + nameArgs + ctorArgs + pathArgs + versionArgs +  outputPath , expect_success=True, env=myEnv) File "/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bdd_test_util.py", line 32, in cli_call p = subprocess.Popen(arg_list, stdout=subprocess.PIPE, stderr=subprocess.PIPE, env=env) File "/usr/lib/python2.7/subprocess.py", line 711, in __init__ errread, errwrite) File "/usr/lib/python2.7/subprocess.py", line 1343, in _execute_child raise child_exception OSError:  Errno 2  No such file or directory {noformat} 2. GOROOT not set  Even if you have GOPATH set but left GOROOT not set, the go command usually works fine. However, when the behave test executes the “peer chaincode package” command to make a package for chaincode to deploy, it fails to find standard packages located under the GOROOT directory. This results in an error in instantiating the chaincode. {noformat} $ behave ...(snip) And user "configAdminPeerOrg0" using cert alias "config-admin-cert" sends proposal "instantiateProposal1" to endorsers with timeout of "90" seconds with proposal responses "instantiateProposalResponses" # steps/endorser_impl.py:109 29.466s | Endorser | | peer0    | | peer2    | Traceback (most recent call last): File "/home/ubuntu/Envs/behave_venv/local/lib/python2.7/site-packages/behave/model.py", line 1456, in run match.run(runner.context) File "/home/ubuntu/Envs/behave_venv/local/lib/python2.7/site-packages/behave/model.py", line 1903, in run self.func(context, *args, **kwargs) File "steps/endorser_impl.py", line 124, in step_impl resultsDict =  dict(zip(endorsers,  respFuture.result() for respFuture in proposalResponseFutures )) File "/home/ubuntu/Envs/behave_venv/local/lib/python2.7/site-packages/grpc/_channel.py", line 294, in result raise self _Rendezvous: <_Rendezvous of RPC that terminated with (StatusCode.UNKNOWN, Error starting container: Failed to generate platform-specific docker build: Error returned from build: 2 "# github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 chaincode/input/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02/chaincode_example02.go:45: cannot use shim.Error("Incorrect number of arguments. Expecting 4") (type "github.com/hyperledger/fabric/protos/peer".Response) as type "github.co m/hyperledger/fabric/examples/chaincode/go/chaincode_example02/vendor/github.com/hyperledger/fabric/protos/peer".Response in return argument chaincode/input/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02/chaincode_example02.go:52: cannot use shim.Error("Expecting integer value for asset holding") (type "github.com/hyperledger/fabric/protos/peer".Response) as type "github.com /hyperledger/fabric/examples/chaincode/go/chaincode_example02/vendor/github.com/hyperledger/fabric/protos/peer".Response in return argument chaincode/input/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02/chaincode_example02.go:57: cannot use shim.Error("Expecting integer value for asset holding") (type "github.com/hyperledger/fabric/protos/peer".Response) as type "github.com /hyperledger/fabric/examples/chaincode/go/chaincode_example02/vendor/github.com/hyperledger/fabric/protos/peer".Response in return argument chaincode/input/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02/chaincode_example02.go:64: cannot use shim.Error(err.Error()) (type "github.com/hyperledger/fabric/protos/peer".Response) as type "github.com/hyperledger/fabric/examples/cha incode/go/chaincode_example02/vendor/github.com/hyperledger/fabric/protos/peer".Response in return argument chaincode/input/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02/chaincode_example02.go:69: cannot use shim.Error(err.Error()) (type "github.com/hyperledger/fabric/protos/peer".Response) as type "github.com/hyperledger/fabric/examples/cha incode/go/chaincode_example02/vendor/github.com/hyperledger/fabric/protos/peer".Response in return argument chaincode/input/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02/chaincode_example02.go:72: cannot use shim.Success(nil) (type "github.com/hyperledger/fabric/protos/peer".Response) as type "github.com/hyperledger/fabric/examples/chaincode /go/chaincode_example02/vendor/github.com/hyperledger/fabric/protos/peer".Response in return argument chaincode/input/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02/chaincode_example02.go:89: cannot use shim.Error("Invalid invoke function name. Expecting "invoke" "delete" "query"") (type "github.com/hyperledger/fabric/protos/peer".Respo nse) as type "github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02/vendor/github.com/hyperledger/fabric/protos/peer".Response in return argument chaincode/input/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02/chaincode_example02.go:100: cannot use shim.Error("Incorrect number of arguments. Expecting 3") (type "github.com/hyperledger/fabric/protos/peer".Response) as type "github.c om/hyperledger/fabric/examples/chaincode/go/chaincode_example02/vendor/github.com/hyperledger/fabric/protos/peer".Response in return argument chaincode/input/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02/chaincode_example02.go:110: cannot use shim.Error("Failed to get state") (type "github.com/hyperledger/fabric/protos/peer".Response) as type "github.com/hyperledger/fabric/e xamples/chaincode/go/chaincode_example02/vendor/github.com/hyperledger/fabric/protos/peer".Response in return argument chaincode/input/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02/chaincode_example02.go:113: cannot use shim.Error("Entity not found") (type "github.com/hyperledger/fabric/protos/peer".Response) as type "github.com/hyperledger/fabric/exam ples/chaincode/go/chaincode_example02/vendor/github.com/hyperledger/fabric/protos/peer".Response in return argument chaincode/input/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02/chaincode_example02.go:113: too many errors {noformat}  ></description> </Issue>
