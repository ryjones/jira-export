<Action id="61361" issue="40838" author="denyeart" type="comment" body=" ~tock   ~guoger " created="2019-06-30 12:01:45.0" updateauthor="denyeart" updated="2019-06-30 12:01:45.0"/>
<Action id="61367" issue="40838" author="denyeart" type="comment" created="2019-07-01 02:51:04.0" updateauthor="denyeart" updated="2019-07-01 02:51:04.0"> <body><! CDATA Seen again in release-1.4: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9929/consoleFull  ></body> </Action>
<Action id="61370" issue="40838" author="denyeart" type="comment" created="2019-07-01 04:12:20.0" updateauthor="denyeart" updated="2019-07-01 04:12:20.0"> <body><! CDATA And again: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9933/consoleFull  ></body> </Action>
<Action id="61371" issue="40838" author="denyeart" type="comment" created="2019-07-01 04:14:01.0" updateauthor="denyeart" updated="2019-07-01 04:14:01.0"> <body><! CDATA  ~tock   ~guoger   ~sykesm   ~jyellick  Hit this flake three times this weekend, increased to High.  ></body> </Action>
<Action id="61374" issue="40838" author="guoger" type="comment" created="2019-07-01 09:46:52.0" updateauthor="guoger" updated="2019-07-01 10:11:15.0"> <body><! CDATA For some reason, SUCCESS is not flushed and appeared during next read, where a block was expected {code:java} 12:16:04  e  peer-channel-fetch  2019-06-29 04:16:03.461 UTC  cli.common  readBlock -> INFO 002 Received block: 4 12:16:04  e  peer-channel-fetch  2019-06-29 04:16:03.461 UTC  cli.common  readBlock -> INFO 003 Got status: &{SUCCESS} 12:16:04  e  peer-channel-fetch  Error: can't read the block: &{SUCCESS} {code}    Any change made in this area recently? (fetch cli, deliver client/server)     Note, this IT is getting blocks from peer  ></body> </Action>
<Action id="61375" issue="40838" author="tock" type="comment" created="2019-07-01 10:27:44.0" updateauthor="tock" updated="2019-07-01 11:16:39.0"> <body><! CDATA {quote}The anomaly that I see in all the logs is: *07:16:04*  e  peer-channel-fetch  2019-06-29 04:16:03.461 UTC  cli.common  readBlock -> INFO 002 Received block: 4  *07:16:04*  e  peer-channel-fetch  2019-06-29 04:16:03.461 UTC  cli.common  readBlock -> INFO 003 Got status: &\{SUCCESS}  *07:16:04*  e  peer-channel-fetch  Error: can't read the block: &\{SUCCESS}   {quote} This maps to peer/common/deliverclient.go L75, where `readBlock()` is expecting a DeliverResponse_Block but getting DeliverResponse_Status.  The problem occurs after the ordering service exits Maintenance-mode, which means that the peers are just getting the newer config blocks (3 of them, blocks 4,5,6 on testchannel1) after they were blocked during migration. it seems that the peers are getting the blocks delivered to them OK. The peer cli was asked to get the latest config block, and the session ended with a 1 rather than 0.   As  ~guoger  indicated above, it seems that the success message following block 4 is not flushed.   The call to d.Service.Recv() on L78 does not check for an error; maybe an error was returned and it ignored it? maybe there is delay in getting the SUCCESS and we need to wrap that in a loop?  Any ideas?  ~wlahti    ~guoger   ~jyellick   ></body> </Action>
<Action id="61732" issue="40838" author="guoger" type="comment" body="are we still bumping into this?" created="2019-07-12 14:47:15.0" updateauthor="guoger" updated="2019-07-12 14:47:15.0"/>
<Action id="61837" issue="40838" author="denyeart" type="comment" created="2019-07-16 00:22:11.0" updateauthor="denyeart" updated="2019-07-16 00:22:11.0"> <body><! CDATA  ~guoger  Yes, hit this twice today in this CR: https://gerrit.hyperledger.org/r/#/c/fabric/+/32343/  ></body> </Action>
<Action id="62410" issue="40838" author="denyeart" type="comment" body=" ~guoger  Is this still in progress?" created="2019-07-30 17:50:57.0" updateauthor="denyeart" updated="2019-07-30 17:50:57.0"/>
<Action id="62569" issue="40838" author="guoger" type="comment" created="2019-08-04 17:05:22.0" updateauthor="guoger" updated="2019-08-04 17:05:22.0"> <body><! CDATA  ~denyeart  sorry, just saw this.. it's still on my tab, although the reason of this flake is still unclear to me.  I tried to add error check into code and ran tests repeatedly in CI. The flake _seems_ to go away. But I'm hesitating to call it a solution w/o fully understanding it.  I'm gonna timebox this for a week and come up with a decision.  ></body> </Action>
<Action id="62758" issue="40838" author="guoger" type="comment" body="https://gerrit.hyperledger.org/r/c/fabric/+/32812 would hopefully make this more investigable." created="2019-08-09 13:56:28.0" updateauthor="guoger" updated="2019-08-09 13:56:28.0"/>
<Action id="63190" issue="40838" author="denyeart" type="comment" body="Above CR is merged to clarify error messages. I haven&apos;t seen the flake recently, reducing to Medium again." created="2019-08-22 14:52:14.0" updateauthor="denyeart" updated="2019-08-22 14:52:14.0"/>
<Action id="63664" issue="40838" author="sykesm" type="comment" body="Been a few weeks and nobody has pointed to a recurrence of this issue. Closing. If it becomes an issue, it can be reopened." created="2019-09-10 19:22:53.0" updateauthor="sykesm" updated="2019-09-10 19:22:53.0"/>
