<Issue id="32204" key="FAB-11309" number="11309" project="10002" reporter="nileshdeotale" assignee="dongming" creator="nileshdeotale" type="10004" summary="PTE: FAB-3832-4i CC Install failed due to ssl_transport_security.cc:989  Handshake failed with fatal error SSL_ERROR_SSL: error:14094418:SSL routines:ssl3_read_bytes:tlsv1 alert unknown ca." priority="3" resolution="10203" status="6" created="2018-07-25 17:34:10.0" updated="2018-07-27 14:39:03.0" resolutiondate="2018-07-27 14:39:03.0" votes="0" watches="1" workflowId="43451"> <description><! CDATA ./pte_driver.sh inFile= CITest/FAB-3832-4i/preconfig/samplecc/runCases-samplecc-install-TLS.txt      hfrd-starter-test   	4.a)Connection Profile retrieved. Network ID = n073ffa959cda4806bc3847fd733374a4 ____    _____   _____           _____ _    ____       _____  ___ _________ |  _ \  |_   _| | ____|         |  ___/ \  | __ )     |___ / ( _ )___ /___ \ | |_) |   | |   |  _|    _____  | |_ / _ \ |  _ \ _____ |_ \ / _ \ |_ \ __) | |  __/    | |   | |___  |_____| |  _/ ___ \| |_) |_____|__) | (_) |__) / __/ |_|       |_|   |_____|         |_|/_/   \_\____/     |____/ \___/____/_____|  PTE-FAB-3832   Enrolling admin user for org1. 2018/07/12 15:16:24  INFO  Created a default configuration file at /home/testuser/creds/org1admin/fabric-ca-client-config.yaml 2018/07/12 15:16:24  INFO  TLS Enabled 2018/07/12 15:16:24  INFO  generating key: &\{A:ecdsa S:256} 2018/07/12 15:16:24  INFO  encoded CSR 2018/07/12 15:16:28  INFO  Stored client certificate at /home/testuser/creds/org1admin/msp/signcerts/cert.pem 2018/07/12 15:16:28  INFO  Stored root CA certificate at /home/testuser/creds/org1admin/msp/cacerts/n073ffa959cda4806bc3847fd733374a4-org1-ca-stage-blockchain-ibm-com-31011.pem 2018/07/12 15:16:28  INFO  Stored intermediate CA certificates at /home/testuser/creds/org1admin/msp/intermediatecerts/n073ffa959cda4806bc3847fd733374a4-org1-ca-stage-blockchain-ibm-com-31011.pem  PTE-FAB-3832   Uploading admin certificate for org 1. \{"message":"ok"} PTE-FAB-3832   Enrolling admin user for org2. 2018/07/12 15:16:30  INFO  Created a default configuration file at /home/testuser/creds/org2admin/fabric-ca-client-config.yaml 2018/07/12 15:16:30  INFO  TLS Enabled 2018/07/12 15:16:30  INFO  generating key: &\{A:ecdsa S:256} 2018/07/12 15:16:30  INFO  encoded CSR 2018/07/12 15:16:34  INFO  Stored client certificate at /home/testuser/creds/org2admin/msp/signcerts/cert.pem 2018/07/12 15:16:34  INFO  Stored root CA certificate at /home/testuser/creds/org2admin/msp/cacerts/n073ffa959cda4806bc3847fd733374a4-org2-ca-stage-blockchain-ibm-com-31011.pem 2018/07/12 15:16:34  INFO  Stored intermediate CA certificates at /home/testuser/creds/org2admin/msp/intermediatecerts/n073ffa959cda4806bc3847fd733374a4-org2-ca-stage-blockchain-ibm-com-31011.pem  PTE-FAB-3832   Uploading admin certificate for org 2. \{"message":"ok"} PTE-FAB-3832   Stoping org1-peer1 \{"message":"ok"} PTE-FAB-3832   Waiting for org1-peer1 to stop...  PTE-FAB-3832   exited  PTE-FAB-3832   Starting org1-peer1 \{"message":"ok"} PTE-FAB-3832   Waiting for org1-peer1 to start...  PTE-FAB-3832   running  PTE-FAB-3832   Stoping org2-peer1 \{"message":"ok"} PTE-FAB-3832   Waiting for org2-peer1 to stop...  PTE-FAB-3832   exited  PTE-FAB-3832   Starting org2-peer1 \{"message":"ok"} PTE-FAB-3832   Waiting for org2-peer1 to start...  PTE-FAB-3832   running  PTE-FAB-3832   Syncing the channel. \{"message":"ok"} PTE-FAB-3832   Generating PTE SCFile and userInputs.  PTE-FAB-3832   ---------------------------------  PTE-FAB-3832   ---------------------------------  PTE-FAB-3832   Installing PTE Chaincode.  PTE-FAB-3832   ---------------------------------  PTE-FAB-3832   --------------------------------- ./pte_driver.sh inFile= CITest/FAB-3832-4i/preconfig/samplecc/runCases-samplecc-install-TLS.txt, tStart=0 iPTE=0  sdk type supported: sdk=node sdk type supported: sdk=node Node Array: CITest/FAB-3832-4i/preconfig/samplecc/samplecc-chan1-install1-TLS.json CITest/FAB-3832-4i/preconfig/samplecc/samplecc-chan1-install2-TLS.json executing 2 node requests iPTE: 0, nInstances: 2, tStart: 1531408659551 execution: CITest/FAB-3832-4i/preconfig/samplecc/samplecc-chan1-install1-TLS.json execution: CITest/FAB-3832-4i/preconfig/samplecc/samplecc-chan1-install2-TLS.json no python requests no java requests  32minfo 39m:  PTE 0 main : input parameters: Nid=1, uiFile=CITest/FAB-3832-4i/preconfig/samplecc/samplecc-chan1-install2-TLS.json, tStart=1531408659551 PTEid=0  32minfo 39m:  PTE 0 util :  setTLS  TLSin: ENABLED, TLS: 1  32minfo 39m:  PTE 0 main :  Nid=1 pte-main  TLS= 1  32minfo 39m:  PTE 0 main : channelName: defaultchannel  32minfo 39m:  PTE 0 main : channelOrgName.length: 1, channelOrgName: org2  32minfo 39m:  PTE 0 main : svcFile;  CITest/CISCFiles/config-chan1-TLS.json  32minfo 39m:  PTE 0 main : GOPATH:    32minfo 39m:  PTE 0 main : main - cfgTimeout: 200000  32minfo 39m:  PTE 0 main :  performance_main  org= org2, org Name= org2  32minfo 39m:  PTE 0 main : chaincode language: golang, path: github.com/hyperledger/fabric-test/chaincodes/samplecc/go  32minfo 39m:  PTE 0 main :  performance_main  Deploy: user= admin, secret= 06684bd0d4  32minfo 39m:  PTE 0 util :  >>>> getting the org admin  32minfo 39m:  PTE 0 util :  org2 admin_cert defined  32minfo 39m:  PTE 0 main : input parameters: Nid=0, uiFile=CITest/FAB-3832-4i/preconfig/samplecc/samplecc-chan1-install1-TLS.json, tStart=1531408659551 PTEid=0  32minfo 39m:  PTE 0 util :  setTLS  TLSin: ENABLED, TLS: 1  32minfo 39m:  PTE 0 main :  Nid=0 pte-main  TLS= 1  32minfo 39m:  PTE 0 main : channelName: defaultchannel  32minfo 39m:  PTE 0 main : channelOrgName.length: 1, channelOrgName: org1  32minfo 39m:  PTE 0 main : svcFile;  CITest/CISCFiles/config-chan1-TLS.json  32minfo 39m:  PTE 0 main : GOPATH:    32minfo 39m:  PTE 0 main : main - cfgTimeout: 200000  32minfo 39m:  PTE 0 main :  performance_main  org= org1, org Name= org1  32minfo 39m:  PTE 0 main : chaincode language: golang, path: github.com/hyperledger/fabric-test/chaincodes/samplecc/go  32minfo 39m:  PTE 0 main :  performance_main  Deploy: user= admin, secret= 752b37a3a2  32minfo 39m:  PTE 0 util :  >>>> getting the org admin  32minfo 39m:  PTE 0 util :  org1 admin_cert defined  32minfo 39m:  PTE 0 main :  performance_main:Nid=0  Successfully enrolled user 'admin'  32minfo 39m:  PTE 0 main :  performance_main:Nid=1  Successfully enrolled user 'admin'  32minfo 39m:  PTE 0 main :  chaincodeInstall  org: org1, org Name: org1, channel name: defaultchannel  32minfo 39m:  PTE 0 main :  chaincodeInstall  org: org2, org Name: org2, channel name: defaultchannel  32minfo 39m:  PTE 0 main :  chainAddOrderer  channel name:  defaultchannel  32minfo 39m:  PTE 0 util :  getTLSCert  key: orderer, subkey: orderer0  32minfo 39m:  PTE 0 main :  chainAddOrderer  channel name:  defaultchannel  32minfo 39m:  PTE 0 util :  getTLSCert  key: orderer, subkey: orderer0  32minfo 39m:  PTE 0 main :  channelAddPeer  channel name:  defaultchannel  32minfo 39m:  PTE 0 util :  getTLSCert  key: org2, subkey: org2-peer1  32minfo 39m:  PTE 0 main :  getCCID  Nid: 1, chaincode_id: sample_cc_ch1, chaincode_ver: v0  32minfo 39m:  PTE 0 main :  channelAddPeer  channel name:  defaultchannel  32minfo 39m:  PTE 0 util :  getTLSCert  key: org1, subkey: org1-peer1  32minfo 39m:  PTE 0 main :  getCCID  Nid: 0, chaincode_id: sample_cc_ch1, chaincode_ver: v0 E0712 15:17:23.448205370     345 ssl_transport_security.cc:188  ssl_info_callback: error occured.  E0712 15:17:23.448359038     345 ssl_transport_security.cc:989  Handshake failed with fatal error SSL_ERROR_SSL: error:14094418:SSL routines:ssl3_read_bytes:tlsv1 alert unknown ca. E0712 15:17:24.482267013     345 ssl_transport_security.cc:188  ssl_info_callback: error occured.  E0712 15:17:24.482678578     345 ssl_transport_security.cc:989  Handshake failed with fatal error SSL_ERROR_SSL: error:14094418:SSL routines:ssl3_read_bytes:tlsv1 alert unknown ca.  31merror 39m:  Remote.js : Error: Failed to connect before the deadline  31merror 39m:  client-utils.js : sendPeersProposal - Promise is rejected: Error: Failed to connect before the deadline at checkState (/home/testuser/go/src/github.com/hyperledger/fabric-test/tools/PTE/node_modules/grpc/src/client.js:838:16)  31merror 39m:  PTE 0 main :  chaincodeInstall  org(org1): install proposal was bad  31merror 39m:  PTE 0 main :  chaincodeInstall  Failed to send install Proposal in (defaultchannel:org1) or receive valid response. Response null or status is not 200. exiting...  31merror 39m:  Remote.js : Error: Failed to connect before the deadline  31merror 39m:  client-utils.js : sendPeersProposal - Promise is rejected: Error: Failed to connect before the deadline at checkState (/home/testuser/go/src/github.com/hyperledger/fabric-test/tools/PTE/node_modules/grpc/src/client.js:838:16)  31merror 39m:  PTE 0 main :  chaincodeInstall  org(org2): install proposal was bad  31merror 39m:  PTE 0 main :  chaincodeInstall  Failed to send install Proposal in (defaultchannel:org2) or receive valid response. Response null or status is not 200. exiting... 0 --- Install Done  PTE-FAB-3832   ---------------------------------  PTE-FAB-3832   ---------------------------------  PTE-FAB-3832   Instantiating PTE Chaincode.  PTE-FAB-3832   ---------------------------------  PTE-FAB-3832   --------------------------------- ./pte_driver.sh inFile= CITest/FAB-3832-4i/preconfig/samplecc/runCases-samplecc-instantiate-TLS.txt, tStart=0 iPTE=0  sdk type supported: sdk=node Node Array: CITest/FAB-3832-4i/preconfig/samplecc/samplecc-chan1-instantiate-TLS.json executing 1 node requests iPTE: 0, nInstances: 1, tStart: 1531408665155 execution: CITest/FAB-3832-4i/preconfig/samplecc/samplecc-chan1-instantiate-TLS.json no python requests no java requests  32minfo 39m:  PTE 0 main : input parameters: Nid=0, uiFile=CITest/FAB-3832-4i/preconfig/samplecc/samplecc-chan1-instantiate-TLS.json, tStart=1531408665155 PTEid=0  32minfo 39m:  PTE 0 util :  setTLS  TLSin: ENABLED, TLS: 1  32minfo 39m:  PTE 0 main :  Nid=0 pte-main  TLS= 1  32minfo 39m:  PTE 0 main : channelName: defaultchannel  32minfo 39m:  PTE 0 main : channelOrgName.length: 1, channelOrgName: org1  32minfo 39m:  PTE 0 main : svcFile;  CITest/CISCFiles/config-chan1-TLS.json  32minfo 39m:  PTE 0 main : GOPATH:    32minfo 39m:  PTE 0 main : main - cfgTimeout: 200000  32minfo 39m:  PTE 0 main :  performance_main  org= org1, org Name= org1  32minfo 39m:  PTE 0 main : chaincode language: golang, path: github.com/hyperledger/fabric-test/chaincodes/samplecc/go  32minfo 39m:  PTE 0 main :  performance_main  instantiate: user= admin, secret= 752b37a3a2  32minfo 39m:  PTE 0 util :  >>>> getting the org admin  32minfo 39m:  PTE 0 util :  org1 admin_cert defined  32minfo 39m:  PTE 0 main :  performance_main:Nid=0  Successfully enrolled user 'admin'  32minfo 39m:  PTE 0 main :  chaincodeInstantiate  org= org1, org name=undefined, channel name=defaultchannel  32minfo 39m:  PTE 0 main :  chainAddOrderer  channel name:  defaultchannel  32minfo 39m:  PTE 0 util :  getTLSCert  key: orderer, subkey: orderer0  32minfo 39m:  PTE 0 main :  channelAddPeer1  channel name: defaultchannel, org: org1  32minfo 39m:  PTE 0 util :  getTLSCert  key: org1, subkey: org1-peer1  32minfo 39m:  PTE 0 main :  chaincodeInstantiate:Nid=0  ready to initialize channel defaultchannel  E0712 15:17:32.952969886     395 ssl_transport_security.cc:188  ssl_info_callback: error occured.  E0712 15:17:32.953045169     395 ssl_transport_security.cc:989  Handshake failed with fatal error SSL_ERROR_SSL: error:14094418:SSL routines:ssl3_read_bytes:tlsv1 alert unknown ca. E0712 15:17:33.956643661     395 ssl_transport_security.cc:188  ssl_info_callback: error occured.  E0712 15:17:33.956692485     395 ssl_transport_security.cc:989  Handshake failed with fatal error SSL_ERROR_SSL: error:14094418:SSL routines:ssl3_read_bytes:tlsv1 alert unknown ca.  31merror 39m:  Remote.js : Error: Failed to connect before the deadline  31merror 39m:  client-utils.js : sendPeersProposal - Promise is rejected: Error: Failed to connect before the deadline at checkState (/home/testuser/go/src/github.com/hyperledger/fabric-test/tools/PTE/node_modules/grpc/src/client.js:838:16)  31merror 39m:  Channel.js : getChannelConfig - Failed getting channel config. Error: Error: Failed to connect before the deadline at checkState (/home/testuser/go/src/github.com/hyperledger/fabric-test/tools/PTE/node_modules/grpc/src/client.js:838:16)  31merror 39m:  Channel.js : Error: Failed to connect before the deadline at checkState (/home/testuser/go/src/github.com/hyperledger/fabric-test/tools/PTE/node_modules/grpc/src/client.js:838:16)  31merror 39m:  PTE 0 main :  chaincodeInstantiate:Nid=0  Failed to initialize channel defaultchannel  due to error:  Error: Error: Failed to connect before the deadline at getChannelConfig.then.catch (/home/testuser/go/src/github.com/hyperledger/fabric-test/tools/PTE/node_modules/fabric-client/lib/Channel.js:356:27) at <anonymous> at process._tickCallback (internal/process/next_tick.js:188:7) 0 --- Instantiation Done  ></description> </Issue>
