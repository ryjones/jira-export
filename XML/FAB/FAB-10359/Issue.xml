<Issue id="30591" key="FAB-10359" number="10359" project="10002" reporter="sambhavdutt" assignee="scottz" creator="sambhavdutt" type="10004" summary="Orderer_ote tests failed in CI jobs for fabric-test-daily due to Assertion error." priority="2" resolution="10000" status="6" created="2018-05-24 14:25:49.0" updated="2019-03-19 11:13:27.0" resolutiondate="2018-06-01 13:34:35.0" votes="0" watches="2" workflowId="42324"> <description><! CDATA The OTE test is failing in the fabric-test-daily starting from test case FAB-7078, Observed the following errors,  *fabric-test Commit: 80f4747*  {code:java} AssertionError: 'RESULT=PASSED' not found in '====================Starting FAB-7078 test with OTE====================\nnumber of orderers: 6\nordererLogLevel:  INFO\nnumber of CA: 0\nnumber of organizations: 1\nnumber of peers: 1\nnumber of channels: 1\nnumber of kafka: 5\nnumber of zookeeper: 3\norderer service type: kafka\nPROFILE_STRING: test\nHostIP1:  localhost\nTLSEnabled: enabled\n PROFILE_STRING=test, ordServType=kafka, nKafka=5, nOrderer=6, nZoo=3\n nOrg=1, nPeersPerOrg=1, ledgerDB=goleveldb, hashType=SHA2, secType=256, comName=example.com\ncurrent working directory: /w/workspace/fabric-test-daily-x86_64/gopath/src/github.com/hyperledger/fabric-test/tools/NL\nGOPATH=/w/workspace/fabric-test-daily-x86_64/gopath\n \n        ####################################################### \n        #                generate crypto-config.yaml          # \n        ####################################################### \ngenerate crypto-config.yaml ...\n./gen_crypto_cfg.sh -o 6 -r 1 -p 1 -C example.com\nnOrderer:  6\nnOrg:  1\npeersPerOrg: 1\ncomName:  example.com\nnOrderer=6, peersPerOrg=1, nOrg=1\ncfgOutFile=/w/workspace/fabric-test-daily-x86_64/gopath/src/github.com/hyperledger/fabric-test/tools/NL/crypto-config.yaml\n \n    . . CONSUMERS   OrdererIdx  ChannelIdx ChannelID                    TXs     Batches 0           0 testorgschannel1            6890         689 1           0 testorgschannel1            6970         697 2           0 testorgschannel1            6970         697 3           0 testorgschannel1            6930         693 4           0 testorgschannel1            6920         692 5           0 testorgschannel1            6920         692 !!!!! Num TXs Delivered is not same on all orderers!!!!! !!!!! Num Blocks Delivered is not same on all orderers!!!!! Error: Unexpected Block count 689 (expected 1500) on ordIndx=0 channelIDs 0 =testorgschannel1, chanSentTxTotal=15000 BatchSize=10 Error: Unexpected Block count 697 (expected 1500) on ordIndx=1 channelIDs 0 =testorgschannel1, chanSentTxTotal=15000 BatchSize=10 Error: Unexpected Block count 697 (expected 1500) on ordIndx=2 channelIDs 0 =testorgschannel1, chanSentTxTotal=15000 BatchSize=10 Error: Unexpected Block count 693 (expected 1500) on ordIndx=3 channelIDs 0 =testorgschannel1, chanSentTxTotal=15000 BatchSize=10 Error: Unexpected Block count 692 (expected 1500) on ordIndx=4 channelIDs 0 =testorgschannel1, chanSentTxTotal=15000 BatchSize=10 Error: Unexpected Block count 692 (expected 1500) on ordIndx=5 channelIDs 0 =testorgschannel1, chanSentTxTotal=15000 BatchSize=10 Not counting genesis blks (1 per chan)        1 Total TX broadcasts Requested to Send     15000 Total TX broadcasts send success ACK      15000 Total TX broadcasts sendFailed - NACK         0 Total Send-LOST TX (Not Ack or Nack))         0 Total Recv-LOST TX (Ack but not Recvd)     8110 (on ordIndx 0  - but see all actuals below) Total deliveries received TX on each ordrr         6890    6970    6970    6930    6920    6920  Total deliveries received Blocks on each ordrr      689     697     697     693     692     692  THROUGHPUT TPS = 365 , FAB-7078 using batchSize=10 numChannels=1 numOrdsInNtwk=6 ordType=kafka numKafkaBrokers=5 TPS - Overall Transactions per second       365 TPS per channel                             365 TPS per orderer                              60 BPS - Overall Blocks per second              16 BPS per channel                              16 BPS per orderer                               2 TEST FAB-7078 Orderers were INCONSISTENT! BAD! Some ACKed TX were LOST by orderer service! RESULT=FAILED: TX Req=15000 BrdcstACK=15000 NACK=0 DelivBlk= 689 697 697 693 692 692  DelivTX= 6890 6970 6970 6930 6920 6920  numChannels=1 batchSize=10 TPS=365 Removing the Network Consumers Consumer-o0-c0 CLOSING. Totals received numtrans=6891 numBlocks=690, 2018-05-24 12:33:38.42825479 +0000 UTC m=+90.954599341 --- FAIL: Test_FAB7078_1ch_6ord_5kb_10kpayload (90.92s) 	ote_test.go:424: TEST FAB-7078 Orderers were INCONSISTENT! BAD! Some ACKed TX were LOST by orderer service! RESULT=FAILED: TX Req=15000 BrdcstACK=15000 NACK=0 DelivBlk= 689 697 697 693 692 692  DelivTX= 6890 6970 6970 6930 6920 6920  numChannels=1 batchSize=10 TPS=365 FAIL exit status 1 FAIL	github.com/hyperledger/fabric/OTE	90.958s ====== OTE test execution finished. Save OTE test logs. {code}  *Build Logs*  https://jenkins.hyperledger.org/view/Daily/job/fabric-test-daily-x86_64/361/testReport/orderer_ote/perf_orderer/test_FAB_7078_6ord_kafka_1ch_10kpayload/  ></description> </Issue>
