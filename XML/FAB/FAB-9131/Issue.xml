<Issue id="28859" key="FAB-9131" number="9131" project="10002" reporter="sykesm" assignee="sykesm" creator="sykesm" type="10001" summary="Move to new logging library (was Multiple data races when running TestConcurrencyNotFail)" priority="2" resolution="10000" status="6" created="2018-03-26 13:28:21.0" updated="2018-08-26 12:09:12.0" resolutiondate="2018-08-26 12:09:12.0" votes="1" watches="4" workflowId="35649"> <description><! CDATA {code:java} unit-tests_1  | ==================  unit-tests_1  | WARNING: DATA RACE  unit-tests_1  | Write at 0x00c420010ab0 by goroutine 22:  unit-tests_1  |   runtime.mapassign_faststr()  unit-tests_1  |       /opt/go/src/runtime/hashmap_fast.go:598 +0x0  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*moduleLeveled).SetLevel()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/level.go:104 +0x70  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.SetLevel()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/backend.go:33 +0x70  unit-tests_1  |   github.com/hyperledger/fabric/common/util.TestConcurrencyNotFail.func1()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/common/util/utils_test.go:165 +0x55  unit-tests_1  |  unit-tests_1  | Previous read at 0x00c420010ab0 by goroutine 21:  unit-tests_1  |   runtime.mapaccess2_faststr()  unit-tests_1  |       /opt/go/src/runtime/hashmap_fast.go:315 +0x0  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*moduleLeveled).Log()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/level.go:91 +0x9f  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).log()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:170 +0x363  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Info()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:239 +0x68  unit-tests_1  |   github.com/hyperledger/fabric/common/util.TestConcurrencyNotFail()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/common/util/utils_test.go:170 +0x92  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  |  unit-tests_1  | Goroutine 22 (running) created at:  unit-tests_1  |   github.com/hyperledger/fabric/common/util.TestConcurrencyNotFail()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/common/util/utils_test.go:163 +0x69  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  |  unit-tests_1  | Goroutine 21 (running) created at:  unit-tests_1  |   testing.(*T).Run()  unit-tests_1  |       /opt/go/src/testing/testing.go:789 +0x568  unit-tests_1  |   testing.runTests.func1()  unit-tests_1  |       /opt/go/src/testing/testing.go:1004 +0xa7  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  |   testing.runTests()  unit-tests_1  |       /opt/go/src/testing/testing.go:1002 +0x521  unit-tests_1  |   testing.(*M).Run()  unit-tests_1  |       /opt/go/src/testing/testing.go:921 +0x206  unit-tests_1  |   main.main()  unit-tests_1  |       github.com/hyperledger/fabric/common/util/_test/_testmain.go:126 +0x2f0  unit-tests_1  | ==================  unit-tests_1  | ==================  unit-tests_1  | WARNING: DATA RACE  unit-tests_1  | Read at 0x00c420010ab0 by goroutine 21:  unit-tests_1  |   runtime.mapaccess2_faststr()  unit-tests_1  |       /opt/go/src/runtime/hashmap_fast.go:315 +0x0  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*moduleLeveled).IsEnabledFor()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/level.go:91 +0x70  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).IsEnabledFor()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:140 +0x87  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).log()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:144 +0x4c  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Info()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:239 +0x68  unit-tests_1  |   github.com/hyperledger/fabric/common/util.TestConcurrencyNotFail()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/common/util/utils_test.go:170 +0x92  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  |  unit-tests_1  | Previous write at 0x00c420010ab0 by goroutine 22:  unit-tests_1  |   runtime.mapassign_faststr()  unit-tests_1  |       /opt/go/src/runtime/hashmap_fast.go:598 +0x0  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*moduleLeveled).SetLevel()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/level.go:104 +0x70  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.SetLevel()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/backend.go:33 +0x70  unit-tests_1  |   github.com/hyperledger/fabric/common/util.TestConcurrencyNotFail.func1()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/common/util/utils_test.go:165 +0x55  unit-tests_1  |  unit-tests_1  | Goroutine 21 (running) created at:  unit-tests_1  |   testing.(*T).Run()  unit-tests_1  |       /opt/go/src/testing/testing.go:789 +0x568  unit-tests_1  |   testing.runTests.func1()  unit-tests_1  |       /opt/go/src/testing/testing.go:1004 +0xa7  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  |   testing.runTests()  unit-tests_1  |       /opt/go/src/testing/testing.go:1002 +0x521  unit-tests_1  |   testing.(*M).Run()  unit-tests_1  |       /opt/go/src/testing/testing.go:921 +0x206  unit-tests_1  |   main.main()  unit-tests_1  |       github.com/hyperledger/fabric/common/util/_test/_testmain.go:126 +0x2f0  unit-tests_1  |  unit-tests_1  | Goroutine 22 (finished) created at:  unit-tests_1  |   github.com/hyperledger/fabric/common/util.TestConcurrencyNotFail()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/common/util/utils_test.go:163 +0x69  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  | ==================  unit-tests_1  | ==================  unit-tests_1  | WARNING: DATA RACE  unit-tests_1  | Read at 0x00c420072a50 by goroutine 21:  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*moduleLeveled).IsEnabledFor()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/level.go:91 +0x8f  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).IsEnabledFor()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:140 +0x87  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).log()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:144 +0x4c  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Info()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:239 +0x68  unit-tests_1  |   github.com/hyperledger/fabric/common/util.TestConcurrencyNotFail()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/common/util/utils_test.go:170 +0x92  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  |  unit-tests_1  | Previous write at 0x00c420072a50 by goroutine 22:  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*moduleLeveled).SetLevel()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/level.go:104 +0x86  unit-tests_1  |   github.com/hyperledger/fabric/vendor/github.com/op/go-logging.SetLevel()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/backend.go:33 +0x70  unit-tests_1  |   github.com/hyperledger/fabric/common/util.TestConcurrencyNotFail.func1()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/common/util/utils_test.go:165 +0x55  unit-tests_1  |  unit-tests_1  | Goroutine 21 (running) created at:  unit-tests_1  |   testing.(*T).Run()  unit-tests_1  |       /opt/go/src/testing/testing.go:789 +0x568  unit-tests_1  |   testing.runTests.func1()  unit-tests_1  |       /opt/go/src/testing/testing.go:1004 +0xa7  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  |   testing.runTests()  unit-tests_1  |       /opt/go/src/testing/testing.go:1002 +0x521  unit-tests_1  |   testing.(*M).Run()  unit-tests_1  |       /opt/go/src/testing/testing.go:921 +0x206  unit-tests_1  |   main.main()  unit-tests_1  |       github.com/hyperledger/fabric/common/util/_test/_testmain.go:126 +0x2f0  unit-tests_1  |  unit-tests_1  | Goroutine 22 (finished) created at:  unit-tests_1  |   github.com/hyperledger/fabric/common/util.TestConcurrencyNotFail()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/common/util/utils_test.go:163 +0x69  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  | =================={code}  ></description> </Issue>
