<Action id="57793" issue="38138" author="yacovm" type="comment" body=" ~guoger   ~kchristidis " created="2019-03-01 22:23:03.0" updateauthor="yacovm" updated="2019-03-01 22:23:03.0"/>
<Action id="57794" issue="38138" author="yacovm" type="comment" body="My suspicion is that it has something to do with the 2 tmp files (1 of them is not cleaned, or both)." created="2019-03-01 22:23:50.0" updateauthor="yacovm" updated="2019-03-01 22:23:50.0"/>
<Action id="57801" issue="38138" author="guoger" type="comment" created="2019-03-02 13:17:57.0" updateauthor="guoger" updated="2019-03-02 13:17:57.0"> <body><! CDATA I think the temp file handling  ~yacovm  described in chat channel is correct. However, {{ExpectedEOF}} was thrown if an entry written to wal file is corrupted and cannot be decoded, due to interrupt of write (orderer pod was shutdown *not* gracefully i believe).  we should call {{wal.Repair}} to truncate this entry in this case. I'll take on this. Should be hard, {{etcd/wal}} pkg comes with this util.  ></body> </Action>
<Action id="57802" issue="38138" author="bmos299" type="comment" body=" ~guoger   ~yacovm Is there any hope to recover the orderer once in this state?" created="2019-03-02 13:53:54.0" updateauthor="bmos299" updated="2019-03-02 13:53:54.0"/>
<Action id="57803" issue="38138" author="yacovm" type="comment" created="2019-03-02 14:50:47.0" updateauthor="yacovm" updated="2019-03-02 14:50:47.0"> <body><! CDATA With manual intervention - yes, you can always wipe out the WAL and what has been committed is inside the ledger, and what hasn'tÂ  - well, that's too bad and the clients need to re-send it. But we need not rely on manual intervention, hence Jay will add a repairing of the WAL and I hope this fixes it.   Please save the files, so it can be tested whether an OSN recovers from this state or not.  ></body> </Action>
<Action id="57879" issue="38138" author="bmos299" type="comment" created="2019-03-05 15:08:28.0" updateauthor="bmos299" updated="2019-03-05 15:08:28.0"> <body><! CDATA  ~yacovm  Thanks.  That makes total sense.    ></body> </Action>
<Action id="57915" issue="38138" author="guoger" type="comment" body="https://gerrit.hyperledger.org/r/c/29815/" created="2019-03-06 06:14:13.0" updateauthor="guoger" updated="2019-03-06 06:14:13.0"/>
