<Issue id="28877" key="FAB-9149" number="9149" project="10002" reporter="sykesm" creator="sykesm" type="10003" summary="Multiple data races when running TestRegister_MutualTLS" priority="4" resolution="10000" status="6" created="2018-03-26 13:59:32.0" updated="2018-07-20 14:16:07.0" resolutiondate="2018-07-05 15:10:41.0" votes="0" watches="1" workflowId="41647"> <description><! CDATA {code:java} unit-tests_1  | ==================  unit-tests_1  | WARNING: DATA RACE  unit-tests_1  | Write at 0x00c420339738 by goroutine 58:  unit-tests_1  |   github.com/hyperledger/fabric/events/producer.resetEventProcessor()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/events/producer/producer_test.go:553 +0x90  unit-tests_1  |   github.com/hyperledger/fabric/events/producer.TestRegister_MutualTLS()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/events/producer/producer_test.go:482 +0x8a9  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  |  unit-tests_1  | Previous read at 0x00c420339738 by goroutine 59:  unit-tests_1  |   github.com/hyperledger/fabric/events/producer.(*handler).validateEventMessage()  unit-tests_1  |       github.com/hyperledger/fabric/events/producer/_test/_obj_test/handler.go:198 +0x59a  unit-tests_1  |   github.com/hyperledger/fabric/events/producer.(*handler).HandleMessage()  unit-tests_1  |       github.com/hyperledger/fabric/events/producer/_test/_obj_test/handler.go:115 +0x78  unit-tests_1  |   github.com/hyperledger/fabric/events/producer.(*EventsServer).Chat()  unit-tests_1  |       github.com/hyperledger/fabric/events/producer/_test/_obj_test/producer.go:62 +0x185  unit-tests_1  |  unit-tests_1  | Goroutine 58 (running) created at:  unit-tests_1  |   testing.(*T).Run()  unit-tests_1  |       /opt/go/src/testing/testing.go:789 +0x568  unit-tests_1  |   testing.runTests.func1()  unit-tests_1  |       /opt/go/src/testing/testing.go:1004 +0xa7  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  |   testing.runTests()  unit-tests_1  |       /opt/go/src/testing/testing.go:1002 +0x521  unit-tests_1  |   testing.(*M).Run()  unit-tests_1  |       /opt/go/src/testing/testing.go:921 +0x206  unit-tests_1  |   github.com/hyperledger/fabric/events/producer.TestMain()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/events/producer/producer_test.go:725 +0x9ce  unit-tests_1  |   main.main()  unit-tests_1  |       github.com/hyperledger/fabric/events/producer/_test/_testmain.go:128 +0x2f0  unit-tests_1  |  unit-tests_1  | Goroutine 59 (finished) created at:  unit-tests_1  |   github.com/hyperledger/fabric/events/producer.TestRegister_MutualTLS()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/events/producer/producer_test.go:445 +0x1a4  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  | ==================  unit-tests_1  | ==================  unit-tests_1  | WARNING: DATA RACE  unit-tests_1  | Write at 0x00c42037ed98 by goroutine 58:  unit-tests_1  |   github.com/hyperledger/fabric/events/producer.resetEventProcessor()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/events/producer/producer_test.go:556 +0x111  unit-tests_1  |   github.com/hyperledger/fabric/events/producer.TestRegister_MutualTLS()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/events/producer/producer_test.go:482 +0x8a9  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  |  unit-tests_1  | Previous read at 0x00c42037ed98 by goroutine 59:  unit-tests_1  |   github.com/hyperledger/fabric/events/producer.deRegisterHandler()  unit-tests_1  |       github.com/hyperledger/fabric/events/producer/_test/_obj_test/events.go:340 +0x1dc  unit-tests_1  |   github.com/hyperledger/fabric/events/producer.(*handler).deregisterAll()  unit-tests_1  |       github.com/hyperledger/fabric/events/producer/_test/_obj_test/handler.go:103 +0x14e  unit-tests_1  |   github.com/hyperledger/fabric/events/producer.(*handler).Stop()  unit-tests_1  |       github.com/hyperledger/fabric/events/producer/_test/_obj_test/handler.go:35 +0x54  unit-tests_1  |   github.com/hyperledger/fabric/events/producer.(*EventsServer).Chat()  unit-tests_1  |       github.com/hyperledger/fabric/events/producer/_test/_obj_test/producer.go:66 +0x296  unit-tests_1  |  unit-tests_1  | Goroutine 58 (running) created at:  unit-tests_1  |   testing.(*T).Run()  unit-tests_1  |       /opt/go/src/testing/testing.go:789 +0x568  unit-tests_1  |   testing.runTests.func1()  unit-tests_1  |       /opt/go/src/testing/testing.go:1004 +0xa7  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  |   testing.runTests()  unit-tests_1  |       /opt/go/src/testing/testing.go:1002 +0x521  unit-tests_1  |   testing.(*M).Run()  unit-tests_1  |       /opt/go/src/testing/testing.go:921 +0x206  unit-tests_1  |   github.com/hyperledger/fabric/events/producer.TestMain()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/events/producer/producer_test.go:725 +0x9ce  unit-tests_1  |   main.main()  unit-tests_1  |       github.com/hyperledger/fabric/events/producer/_test/_testmain.go:128 +0x2f0  unit-tests_1  |  unit-tests_1  | Goroutine 59 (finished) created at:  unit-tests_1  |   github.com/hyperledger/fabric/events/producer.TestRegister_MutualTLS()  unit-tests_1  |       /opt/gopath/src/github.com/hyperledger/fabric/events/producer/producer_test.go:445 +0x1a4  unit-tests_1  |   testing.tRunner()  unit-tests_1  |       /opt/go/src/testing/testing.go:746 +0x16c  unit-tests_1  | =================={code}  ></description> </Issue>
