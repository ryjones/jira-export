<Issue id="37973" key="FAB-14346" number="14346" project="10002" reporter="suryalnvs" assignee="guoger" creator="suryalnvs" type="10004" summary="Orderer gets removed from orderer system channel when created application channel without including it in consenters list" priority="2" resolution="10000" status="6" created="2019-02-25 19:30:48.0" updated="2019-03-06 18:47:12.0" resolutiondate="2019-03-06 18:47:12.0" votes="0" watches="4" workflowId="49591"> <description><! CDATA h2. Observed:  After launching network with 4 orderers in the orderersystemchannel, created channel "testorgschannel2" without orderer4 in the consenters list, then orderer4 was removed from orderersystemchannel (automatically, NOT part of the test) and the following was seen in orderer4 logs  {code:java} Feb 25 13:15:39 orderer4th-ordererorg-7fdfb59d94-6gdds orderer4th-ordererorg 2019-02-25 18:15:39.191 UTC  orderer.consensus.etcdraft  apply -> INFO 7f7e Applied config change to remove node 4, current nodes in channel:  1 2 3  channel=orderersystemchannel node=4 {code} Noted below are  ~jyellick 's observations(from slack): * What I strongly suspect is going on above, is that the orderer is treating the channel creation tx as a config update (which it is, but to another channel). Likely we have not noticed this before as the updates have not modified the consenter config. I had  ~suryalnvs  check the orderer system channel and its config is in fact unchanged. * I'm coming at this from the outside, but I _suspect_ that based on the way that the blockwriter was written, that Raft categorizes transactions as either "normal" or "config", and that channel creation transactions are being classified as "config" (good, they should be). However, because they are categorized as a config transaction, the Raft code is inspecting the config contained here and realizing that the update made to the template config removed an orderer and is inappropriately applying it as an update to the orderer system channel. I expect that the fix is essentially to detect when the config update is being done to the template and not to the real orderer system channel and ignore it. Of course this is 90+% speculation based on the symptoms * Based on the fact that when  ~suryalnvs  pulled the orderer system channel config and the set of consenters still contained all four (while the log indicates the fourth was removed), I do not believe this is a `configtxgen` related bug     Attached orderer4th log : orderer4th-FAB-13702.log      ></description> </Issue>
