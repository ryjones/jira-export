<Issue id="12914" key="FAB-612" number="612" project="10002" reporter="kchristidis" assignee="kchristidis" creator="kchristidis" type="10004" summary="Need to wait more before broadcasting in BDD orderer tests" priority="3" resolution="10000" status="6" created="2016-10-06 00:22:13.0" updated="2018-07-20 14:10:24.0" resolutiondate="2016-10-10 13:53:25.0" votes="0" watches="2" workflowId="36395"> <description><! CDATA The Docker Compose file for the BDD tests for Kafka brings up two containers:  # The Kafka orderer and # The Kafka broker + ZK ensemble.  The orderer process in container 1 always comes up faster than the Kafka process in container 2, so I have added logic that attempts to establish a connection between the two every 3 seconds. (This reconnection period is configurable, and it usually takes just 1 or 2 efforts for a proper link to be established.)  As things stand today, the BDD tests wait for .5 seconds ("And I wait .5 seconds"), then an attempt is made to start broadcasting.  However, given that the orderer hasn't been set up yet (remember that the connection with the broker is still pending), the tests fails with an error of type "AbortionError (service unavailable)".  The problem can be solved if we have each BDD test wait for, say, 5 seconds.  This seems rather flaky though. I am wondering whether we can change something in the code, whether that's on the orderer's side or the BDD implementation side (orderer_util.py or orderer_impl.py) to fix it.  ></description> </Issue>
