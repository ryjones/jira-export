<Issue id="21321" key="FAB-6462" number="6462" project="10002" reporter="yacovm" assignee="yacovm" creator="yacovm" type="10004" summary="Properly compute PKI-ID" priority="3" resolution="10000" status="6" created="2017-10-04 22:05:08.0" updated="2018-07-20 14:14:35.0" resolutiondate="2017-10-14 13:33:32.0" votes="0" watches="1" workflowId="40186"> <description><! CDATA It's more accurate to compute the PKI-ID on the actual raw bytes of the cert than the PEM bytes. Alternatively, we can use the IdentityIdentifier() method as an input instead of the PEM bytes.  However, instead of enforcing explicit sanitation of input for GetPKIidOfCert(), We will just make identities that have the wrong PEM type - invalid. This is much more efficient because the GetPKIidOfCert is called many times in the code, and sanitizing its input is therefore costly, while if we just make identities that have the wrong type - invalid, it would implicitly force sanitation of identities. Another argument for doing so, would be that the Validate() is costly anyway and is rarely performed in the peer's life cycle, therefore - adding an additional slight overhead to it doesn't affect much the cost of validating an identity. The BCCSP-MSP Serialize() method already puts the right PEM type as of an earlier commit that is targeted for v1.1 and isn't in v1.0.x  ></description> </Issue>
