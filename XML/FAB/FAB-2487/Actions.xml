<Action id="25888" issue="15054" author="clayton sims" type="comment" created="2017-06-09 17:37:38.0" updateauthor="clayton sims" updated="2017-06-09 17:37:38.0"> <body><! CDATA this one is medium.  is that because it is a low likelihood of collisions? or some other reason?     ></body> </Action>
<Action id="25953" issue="15054" author="denyeart" type="comment" created="2017-06-10 13:22:30.0" updateauthor="denyeart" updated="2017-06-10 13:22:30.0"> <body><! CDATA  ~Clayton Sims  Yes, this is Medium because the likelihood of encountering this in a real world deployment is low.  That being said, it will be easier to deal with pre-1.0 release than post-1.0 release, therefore I still think the fix should be targeted for 1.0.  ></body> </Action>
<Action id="26088" issue="15054" author="christopherferris" type="comment" created="2017-06-12 23:34:24.0" updateauthor="christopherferris" updated="2017-06-12 23:34:24.0"> <body><! CDATA What makes us believe that the collision likelihood will be low? There isn't necessarily going to be a central authority for channel names. It could be completely decentralized. This also creates a security vulnerability because the collision would not necessarily be spotted before someone exploited by snarfing someone else's data.  I think it should be targeted for 1.0 as well, and to track suggest we mark this as High.  ></body> </Action>
<Action id="26098" issue="15054" author="manish-sethi" type="comment" body="Submitted a CR for fixing this - https://gerrit.hyperledger.org/r/#/c/10501" created="2017-06-13 01:49:27.0" updateauthor="manish-sethi" updated="2017-06-13 01:49:27.0"/>
<Action id="26145" issue="15054" author="jyellick" type="comment" created="2017-06-13 13:58:24.0" updateauthor="jyellick" updated="2017-06-13 13:58:24.0"> <body><! CDATA The orderer also enforces channel names to comply with Kafka topic semantics.  The following is from {{fabric/common/configtx/manager.go}}  {noformat} // validateChainID makes sure that proposed chain IDs (i.e. channel names) // comply with the following restrictions: //      1. Contain only ASCII alphanumerics, dots '.', dashes '-' //      2. Are shorter than 250 characters. //      3. Are not the strings "." or "..". // // Our hand here is forced by: // https://github.com/apache/kafka/blob/trunk/core/src/main/scala/kafka/common/Topic.scala#L29 {noformat}  So, the example given with underscores is not an allowable name.  It seems like the question is the conversion between {{.}} and {{-}}?  ></body> </Action>
<Action id="26150" issue="15054" author="manish-sethi" type="comment" created="2017-06-13 14:41:47.0" updateauthor="manish-sethi" updated="2017-06-13 14:41:47.0"> <body><! CDATA  ~jyellick  - Couch puts more limitations on this. For instance, it allows only small caps  a-z  within alphanumerics. Also, the first char cannot be a number. In the current impl, everything always changed to lower-case.  Are kafka channel names case sensitive?  ></body> </Action>
<Action id="26151" issue="15054" author="binhn" type="comment" created="2017-06-13 14:42:51.0" updateauthor="binhn" updated="2017-06-13 14:42:51.0"> <body><! CDATA Given the info from  ~jyellick  above, and if the orderer could also eliminate period "." and uppercase from the channel name then we would be able to use channel name the same as db name without any needs from transformation.  However, discussed with  ~jyellick  about eliminating uppercase from orderer seems more pervasive, and not what we want to take on at this point, so I am voting for doing db name transformation.  ></body> </Action>
<Action id="26152" issue="15054" author="jyellick" type="comment" created="2017-06-13 14:46:49.0" updateauthor="jyellick" updated="2017-06-13 14:46:49.0"> <body><! CDATA Yes, the Kafka topic names are case sensitive.  The link from above appears to have broken, but here is one that works.   https://github.com/apache/kafka/blob/ad3dfc6ab25c3f80d2425e24e72ae732b850dc60/core/src/main/scala/kafka/common/Topic.scala  I would suggest updating the {{validateChainID}} method referenced above, but there are other consumers of this method which rely on the case sensitivity, so I'm not sure it's a great idea for v1.  Seems like we need this to go in on the ledger side.  ></body> </Action>
<Action id="26153" issue="15054" author="manish-sethi" type="comment" created="2017-06-13 14:51:51.0" updateauthor="manish-sethi" updated="2017-06-13 15:04:33.0"> <body><! CDATA For simplicity, I would be in the favor of  modifying `validateChainID` such that it imposes the naming limitations from the ledger as well. In other words, allow chain names only from the intersection of kafka and couch valid names sets.  Otherwise, there could always be a situation where the channel get created but the db could not got created (e.g., transformed named got longer than allowed by couch etc.). The channel could finally lead to an unusable state.  ></body> </Action>
<Action id="26154" issue="15054" author="christopherferris" type="comment" body="This has reached the threshold of five votes and may be merged following review." created="2017-06-13 14:57:53.0" updateauthor="christopherferris" updated="2017-06-13 14:57:53.0"/>
<Action id="26156" issue="15054" author="kchristidis" type="comment" created="2017-06-13 14:59:36.0" updateauthor="kchristidis" updated="2017-06-13 14:59:36.0"> <body><! CDATA I am fine with that. Please tag me as a reviewer when you submit this.  Q: What makes eliminating uppercase pervasive?  ></body> </Action>
<Action id="26158" issue="15054" author="jyellick" type="comment" created="2017-06-13 15:08:42.0" updateauthor="jyellick" updated="2017-06-13 15:08:42.0"> <body><! CDATA > For simplicity, I would be in the favor of  modifying `validateChainID` such that it imposes the naming limitations from the ledger as well. In other words, allow chain names only from the intersection of kafka and couch valid names sets.  Agreed this is simpler.  > Q: What makes eliminating uppercase pervasive?  We rely on mixed case names for our config keys, and validate them using this same function.  I thought this was used in more places, but it appears to be largely test code, so this is less invasive than I expected.  I can put together a CR if we agree this is the right approach.     ></body> </Action>
<Action id="26160" issue="15054" author="manish-sethi" type="comment" body="I am good with this (modifying `validateChainID`)" created="2017-06-13 15:12:42.0" updateauthor="manish-sethi" updated="2017-06-13 15:13:35.0"/>
<Action id="26165" issue="15054" author="jyellick" type="comment" body="Proposed fix in: https://gerrit.hyperledger.org/r/10535" created="2017-06-13 15:31:14.0" updateauthor="jyellick" updated="2017-06-13 15:31:14.0"/>
<Action id="26194" issue="15054" author="manish-sethi" type="comment" body="Pushed a dependent CR  https://gerrit.hyperledger.org/r/#/c/10541.  Though this clean up does not change the behavior in any manner as long as the names follow the restriction imposed by the change in the parent CR ( https://gerrit.hyperledger.org/r/10535 ) and most of the code would behave a noop. Still, better to clean up to reflect the current reality." created="2017-06-13 20:04:34.0" updateauthor="manish-sethi" updated="2017-06-13 20:04:34.0"/>
