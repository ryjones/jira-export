<Issue id="39766" key="FAB-15425" number="15425" project="10002" reporter="mhbauer" assignee="mhbauer" creator="mhbauer" type="10004" summary="discovery test" priority="3" resolution="10000" status="6" created="2019-05-10 00:40:51.0" updated="2019-05-11 22:11:27.0" resolutiondate="2019-05-11 22:11:27.0" votes="0" watches="1" workflowId="52660"> <description><! CDATA DATA RACE  === RUN   TestUpdate === PAUSE TestUpdate === CONT  TestUpdate ================== WARNING: DATA RACE Write at 0x00c00011b690 by goroutine 160: github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).UpdateEndpoint() /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:956 +0xb1 github.com/hyperledger/fabric/gossip/discovery.TestUpdate() /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_test.go:738 +0x74a testing.tRunner() /Users/mhb/.go/src/testing/testing.go:865 +0x163  Previous read at 0x00c00011b690 by goroutine 39: github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).isSentByMe() /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:553 +0x298 github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMsgFromComm() /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:354 +0x9c3 github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMessages() /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:304 +0x162  Goroutine 160 (running) created at: testing.(*T).Run() /Users/mhb/.go/src/testing/testing.go:916 +0x65a testing.runTests.func1() /Users/mhb/.go/src/testing/testing.go:1157 +0xa8 testing.tRunner() /Users/mhb/.go/src/testing/testing.go:865 +0x163 testing.runTests() /Users/mhb/.go/src/testing/testing.go:1155 +0x523 testing.(*M).Run() /Users/mhb/.go/src/testing/testing.go:1072 +0x2eb main.main() _testmain.go:86 +0x222  Goroutine 39 (running) created at: github.com/hyperledger/fabric/gossip/discovery.NewDiscoveryService() /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:120 +0x85d github.com/hyperledger/fabric/gossip/discovery.createDiscoveryInstanceThatGossipsWithInterceptors() /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_test.go:388 +0x735 github.com/hyperledger/fabric/gossip/discovery.createDiscoveryInstanceThatGossips() /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_test.go:357 +0x9c github.com/hyperledger/fabric/gossip/discovery.TestUpdate() /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_test.go:345 +0x4a6 testing.tRunner() /Users/mhb/.go/src/testing/testing.go:865 +0x163 ==================  ></description> </Issue>
