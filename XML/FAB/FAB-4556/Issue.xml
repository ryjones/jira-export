<Issue id="17759" key="FAB-4556" number="4556" project="10002" reporter="yacovm" assignee="yacovm" creator="yacovm" type="10004" summary="Fix panic in gossip_test TestEndedGoroutines" priority="3" resolution="10000" status="6" created="2017-06-11 10:26:27.0" updated="2018-07-20 14:13:16.0" resolutiondate="2017-06-11 10:27:39.0" votes="0" watches="1" workflowId="38958" security="10001"> <description><! CDATA The following is a panic from parsing the stack in one of the goroutines that the test came across:  {code} 04:23:26 unit-tests_1  | --- FAIL: TestEndedGoroutines (174.15s) 04:23:26 unit-tests_1  | panic: runtime error: index out of range  recovered  04:23:26 unit-tests_1  | 	panic: runtime error: index out of range 04:23:26 unit-tests_1  |  04:23:26 unit-tests_1  | goroutine 269  running : 04:23:26 unit-tests_1  | panic(0x8066a1a0, 0xc4200160a0) 04:23:26 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x408 04:23:26 unit-tests_1  | testing.tRunner.func1(0xc420474000) 04:23:26 unit-tests_1  | 	/opt/go/src/testing/testing.go:579 +0x1a2 04:23:26 unit-tests_1  | panic(0x8066a1a0, 0xc4200160a0) 04:23:26 unit-tests_1  | 	/opt/go/src/runtime/panic.go:458 +0x53c 04:23:26 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.glob..func8(0x1a114, 0x80a1fcb0, 0x0, 0x0, 0x806858c0) 04:23:26 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:1117 +0x52 04:23:26 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.anyOfPredicates.func1(0x1a114, 0x80a1fcb0, 0x0, 0x0, 0x58) 04:23:26 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:1123 +0xb0 04:23:26 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.shouldNotBeRunningAtEnd(0x1a114, 0x80a1fcb0, 0x0, 0x0, 0x10000008003a986) 04:23:26 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:1133 +0x1fa 04:23:26 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.ensureGoroutineExit(0xc420474000) 04:23:26 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:1141 +0x138 04:23:26 unit-tests_1  | github.com/hyperledger/fabric/gossip/gossip.TestEndedGoroutines(0xc420474000) 04:23:26 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:1047 +0x4e 04:23:26 unit-tests_1  | testing.tRunner(0xc420474000, 0x80776190) 04:23:26 unit-tests_1  | 	/opt/go/src/testing/testing.go:610 +0xd8 04:23:26 unit-tests_1  | created by testing.(*T).Run 04:23:26 unit-tests_1  | 	/opt/go/src/testing/testing.go:646 +0x376 04:23:26 unit-tests_1  | FAIL	github.com/hyperledger/fabric/gossip/gossip	214.413s 04:23:26 unit-tests_1  | error: exit status 1 04:23:26 unit-tests_1  | panic: EOF 04:23:26 unit-tests_1  |  04:23:26 unit-tests_1  | goroutine 1  running : 04:23:26 unit-tests_1  | panic(0x11ae00, 0xc42000a0f0) 04:23:26 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x408 {code}  ></description> </Issue>
