<Action id="34419" issue="19205" author="jtclark" type="comment" created="2017-11-07 15:01:26.0" updateauthor="jtclark" updated="2017-11-07 15:01:26.0"> <body><! CDATA +Status Update+  Currently there a couple streams of work happening in relationship to this effort. With this JIRA task, the effort is to get our fabric-smoke-tests-verify Jenkins job to run the required PTE tests.  fabric-smoke-tests-verify is running the runSmokeTestSuite.sh script to execute the Behave feature and system tests, followed by this PTE script:  {{py.test -v --junitxml results_systest_pte.xml systest_pte.py}}  Inside this systest_pte.py script is where we want to ensure that all of the required PTE test cases are being executed from this script.  ></body> </Action>
<Action id="34422" issue="19205" author="jtclark" type="comment" created="2017-11-07 15:31:55.0" updateauthor="jtclark" updated="2017-11-07 15:31:55.0"> <body><! CDATA  ^CINotes   Attached is the list of test cases and the commands required to run these test cases as part of the runSmokeTestSuite script.  ></body> </Action>
<Action id="40424" issue="19205" author="jtclark" type="comment" created="2018-02-20 15:51:21.0" updateauthor="jtclark" updated="2018-02-20 15:51:21.0"> <body><! CDATA *Status Update*  Talked with  ~scottz  about this task. Right now, the PTE tests work in local environments (which I will validate), but when the PTE tests run as part of the daily, or smoke tests, they do not work.  The plan is to begin with validating that the PTE tests run in a local environment. Once that's complete, then I will submit a `-1` WIP patch to allow the Jenkins sandbox to attempt to run the verification tests, which will execute the PTE tests in the sandbox. I'll observe what happens with the verification test and go from there.  ></body> </Action>
<Action id="40533" issue="19205" author="jtclark" type="comment" created="2018-02-21 19:30:43.0" updateauthor="jtclark" updated="2018-02-21 19:35:29.0"> <body><! CDATA *Status Update*  The *fabric-test* project is installed on my development vlaunch machine at *endor.rtp.raleigh.ibm.com*. I'm using this box as my local dev environment. In order to get the {{make ci-smoke}} target to work properly, a number of pre-reqs were required (go1.9, the {{libltdl-dev}} pkg, and running {{install_behave.sh}}).     I'm at the point where running the smoke tests end with this failure:  {{orderer_ote.py::OTE_Orderer_Traffic_Engine::test_FAB7936_100tx_3ch_3ord_3kb FAILED}}     Working on figuring out the fix.  ></body> </Action>
<Action id="40937" issue="19205" author="jtclark" type="comment" created="2018-02-27 16:13:58.0" updateauthor="jtclark" updated="2018-02-27 16:14:14.0"> <body><! CDATA *Status Update*  After speaking with  ~rameshthoomu , we discovered that the daily test suite is more important to get PTE tests running from than the smoke test suite.  I've uncommented (and added) the following lines from the runDailyTestSuite.sh script to test PTE:  {code:java} echo "========== System Test Performance Stress tests driven by PTE tool..." cp -r ../../tools/PTE $WORKSPACE/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/test/ cd $WORKSPACE/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node ./../pre_setup.sh && npm config set prefix ~/npm && npm install && npm install -g gulp gulp ca || exit 1 ls cd ../regression/daily echo "==========PY Test============" py.test -v --junitxml results_systest_pte.xml systest_pte.py {code} After this change, I modified the fabric-test-daily job on the Jenkins sandbox to point to my local dev environment that has this change. Upon running the job, the test HALTS at the PTE testing step.   ~rameshthoomu  has confirmed that this is the behavior that they had seen before, and in order to resolve this, we need to capture output logs and debug msgs to determine why it's failing.  This is my next step.  ></body> </Action>
<Action id="41366" issue="19205" author="jtclark" type="comment" created="2018-03-08 15:02:47.0" updateauthor="jtclark" updated="2018-03-08 15:02:47.0"> <body><! CDATA Still trying to determine why the test scenarios cause the Jenkins job to just "halt".   Here's how we are +currently+ attempting to get PTE tests to run, and/or capture any output from the success/failure of the PTE script invocation:  0 - The Jenkins sandbox job that is triggering PTE is *fabric-test-daily-s390x*, which runs the runDailyTestSuite.sh script that calls systest_pte.py script.  1 - I removed the *@unittest.skip("skipping; WIP")* decorator from *ONE* of the PTE test scenarios located inside the systest_pte.py file. The test scenario that should run is: FAB-3833 and FAB-3810.  2- Using my  local dev copy of fabric-test,|https://github.com/jasontclark/fabric-test-localdev  we've tried to capture the output from the FAB-3833 scenario script using the following redirection: {code:java} ./test_driver.sh -n -m FAB-3833-2i -p -c samplecc -t FAB-3810-2q >% 3833.log {code} 3 - When I trigger the build from the sandbox, the trailing output is as follows: {code:java} .... 14:59:54 + go version 14:59:54 /tmp/jenkins2480226777102142441.sh: line 8: go: command not found 14:59:54 Build step 'Execute shell' marked build as failure 14:59:54 $ ssh-agent -k 14:59:54 unset SSH_AUTH_SOCK; 14:59:54 unset SSH_AGENT_PID; 14:59:54 echo Agent pid 65333 killed; 14:59:55  ssh-agent  Stopped. 14:59:55 Archiving artifacts 14:59:55 Finished: FAILURE {code}  ></body> </Action>
<Action id="41413" issue="19205" author="jtclark" type="comment" created="2018-03-09 16:15:20.0" updateauthor="jtclark" updated="2018-03-09 16:15:20.0"> <body><! CDATA Worked with  ~rameshthoomu  to fix this gopath issue, and dongming to redirect the output of the 3833 PTE test scenario to a log file.  The results are found here:   https://jenkins.hyperledger.org/sandbox/job/fabric-test-daily-s390x/18/artifact/gopath/src/github.com/hyperledger/fabric-test/fabric-sdk-node/test/PTE/CITest/scripts/3833.log   Sharing this with dongming to see if he can help us figure out why the tests are not completing.  ></body> </Action>
<Action id="42189" issue="19205" author="scottz" type="comment" body="https://gerrit.hyperledger.org/r/#/c/19755/" created="2018-03-26 22:45:09.0" updateauthor="scottz" updated="2018-03-26 22:45:09.0"/>
<Action id="42260" issue="19205" author="jtclark" type="comment" created="2018-03-28 16:44:11.0" updateauthor="jtclark" updated="2018-03-28 16:44:11.0"> <body><! CDATA The patch is currently *IN REVIEW*: https://gerrit.hyperledger.org/r/#/c/19755/.  Talked with  ~scottz ,  ~dongming , and  ~rameshthoomu  about the next steps on this task.  As discussed:  1. The initial focus will be on getting the test scenarios working as part of the DAILY test suite.   2. The FAB-3833 PTE test scenario works on the Jenkins sandbox, but as  ~dongming  discovered, a number of modifications to the runDailyTestSuite.sh script has to be added, as well as a hardcoded GOPATH in the sample chaincode create JSON file.    3. The patch that has been submitted refers to the GOPATH in an environment variable, but  ~dongming  expresses concerns with this approach, and is looking for an alternative way to dynamically inject the correct GOPATH to use.  Next Steps:  - Waiting to hear back from @dongming to see how we can rectify the GOPATH issue - Test what @dongming comes up with by *temporarily* adding it as a smoke test to validate that the 3833 PTE test scenario successfully runs on the Jenkins host. - Re-submit the patch (to include this test as a DAILY test)   ></body> </Action>
<Action id="44041" issue="19205" author="jtclark" type="comment" body=" https://gerrit.hyperledger.org/r/#/c/19755/  has been *MERGED.*" created="2018-05-08 10:28:04.0" updateauthor="jtclark" updated="2018-05-08 10:28:04.0"/>
