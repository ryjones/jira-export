<Issue id="37097" key="FAB-13860" number="13860" project="10002" reporter="manish-sethi" creator="manish-sethi" type="10004" summary="Test flake in &quot;fabric/core/cclifecycle/lifecycle_test.go&quot; - TestMetadata" priority="3" resolution="10002" status="6" created="2019-01-24 01:06:33.0" updated="2019-01-28 18:15:09.0" resolutiondate="2019-01-28 18:15:09.0" votes="0" watches="1" workflowId="48674"> <description><! CDATA Package level logger is getting accessed by a background goroutine and being set to a new logger by test.  https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8290/console  {code} 16:10:17 ================== 16:10:17 WARNING: DATA RACE 16:10:17 Write at 0x000001d3e110 by goroutine 26: 16:10:17   github.com/hyperledger/fabric/core/cclifecycle_test.newLogRecorder() 16:10:17       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/lifecycle_test.go:464 +0x99 16:10:17   github.com/hyperledger/fabric/core/cclifecycle_test.TestMetadata() 16:10:17       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/lifecycle_test.go:344 +0x53 16:10:17   testing.tRunner() 16:10:17       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:827 +0x162 16:10:17  16:10:17 Previous read at 0x000001d3e110 by goroutine 25: 16:10:17   github.com/hyperledger/fabric/core/cclifecycle.(*Lifecycle).fireChangeListeners() 16:10:17       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/lifecycle.go:188 +0x2a4 16:10:17   github.com/hyperledger/fabric/core/cclifecycle.(*Subscription).processPendingUpdate() 16:10:17       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/subscription.go:57 +0x6e5 16:10:17   github.com/hyperledger/fabric/core/cclifecycle.(*Subscription).ChaincodeDeployDone.func1() 16:10:17       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/subscription.go:79 +0x131 16:10:17  16:10:17 Goroutine 26 (running) created at: 16:10:17   testing.(*T).Run() 16:10:17       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:878 +0x650 16:10:17   testing.runTests.func1() 16:10:17       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1119 +0xa8 16:10:17   testing.tRunner() 16:10:17       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:827 +0x162 16:10:17   testing.runTests() 16:10:17       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1117 +0x4ee 16:10:17   testing.(*M).Run() 16:10:17       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1034 +0x2ee 16:10:17   main.main() 16:10:17       _testmain.go:112 +0x332 16:10:17  16:10:17 Goroutine 25 (finished) created at: 16:10:17   github.com/hyperledger/fabric/core/cclifecycle.(*Subscription).ChaincodeDeployDone() 16:10:17       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/subscription.go:68 +0x7d 16:10:17   github.com/hyperledger/fabric/core/cclifecycle_test.TestMultipleUpdates() 16:10:17       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/lifecycle_test.go:320 +0x1399 16:10:17   testing.tRunner() 16:10:17       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:827 +0x162 16:10:17 ================== 16:10:17 --- FAIL: TestMetadata (0.02s) {code}  ></description> </Issue>
