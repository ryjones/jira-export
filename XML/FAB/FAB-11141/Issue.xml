<Issue id="31848" key="FAB-11141" number="11141" project="10002" reporter="yuki-kon" assignee="ales" creator="yuki-kon" type="10001" summary="Collection level endorsement policy to restrict collection non-member peers from endorsing private data writes" environment="commit 7893ab37e4c2e8c6ae2a382c3e248ba840d77014" priority="2" resolution="10002" status="6" created="2018-07-13 02:52:11.0" updated="2020-06-11 15:30:47.0" resolutiondate="2019-11-06 14:44:51.0" votes="1" watches="8" workflowId="35943"> <description><! CDATA According to the concept, private data collection allows a defined subset of organizations on a channel the ability to endorse, commit, or query private data without having to create a separate channel. However, the unauthorized organization can endorse a transaction to put private data and the proposed transaction is stored on the ledger.  Steps to reproduce  -------------------------- I tried a tutorial for private data (http://hyperledger-fabric.readthedocs.io/en/latest/private_data_tutorial.html) with fabric v1.2.0. I changed test steps a little to see that the unauthorized organization (= org2) can’t put private data collection `collectionMarblePrivateDetails`.  After switching the test user to org2, I invoked `initMarble`.  Expected Results -------------------------- The peer on org2 returns a proposal error at endorsement time because the peer is not allowed to access to a private collection. There is no update on private data collections.  Actual Results -------------------------- The peer on org2 returned success as a proposal response. There was update on private data collection `collectionMarblePrivateDetails`. The physical file is located under /var/hyperledger/production/ledgersData/pvtdataStore. - Org1’s peer has private data. Org1 can get this data when calling `readMarblePrivateDetails`. - Org2’s peer doesn’t have private data. Org2 fails to get this data when calling `readMarblePrivateDetails`.  Issue  -------------------------- The namespace under private data collection can be consumed by unauthorized organizations. As a result, the authorized organizations can read incorrect data produced by unauthorized organizations.   ></description> </Issue>
