<Action id="71643" issue="46670" author="denyeart" type="comment" created="2021-03-31 05:23:20.0" updateauthor="denyeart" updated="2021-03-31 05:24:00.0"> <body><! CDATA Are you using the latest fabric-samples from main branch? I'm not seeing the issue.  The network was recently hardcoded to fabric_test:   https://github.com/hyperledger/fabric-samples/blob/main/test-network/docker/docker-compose-test-net.yaml#L69      ></body> </Action>
<Action id="71648" issue="46670" author="JIRAUSER21494" type="comment" created="2021-04-01 12:07:51.0" updateauthor="JIRAUSER21494" updated="2021-04-01 12:07:51.0"> <body><! CDATA I can't reproduce this problem either using the latest fabric-samples from main branch.  Is there any more detailed information about "CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE is set to "_test""?  ></body> </Action>
<Action id="71650" issue="46670" author="denyeart" type="comment" created="2021-04-01 13:58:46.0" updateauthor="denyeart" updated="2021-04-01 13:58:46.0"> <body><! CDATA It is set to fabric_test now:  https://github.com/hyperledger/fabric-samples/blob/main/test-network/docker/docker-compose-test-net.yaml#L69  ></body> </Action>
<Action id="71659" issue="46670" author="denyeart" type="comment" body="Since we can&apos;t reproduce, closing as fixed." created="2021-04-02 12:53:29.0" updateauthor="denyeart" updated="2021-04-02 12:53:29.0"/>
<Action id="71662" issue="46670" author="JIRAUSER21321" type="comment" created="2021-04-06 13:11:03.0" updateauthor="JIRAUSER21321" updated="2021-04-06 13:11:03.0"> <body><! CDATA As I wrote in the description, I was using version 2.2 because I thought it is the LTS and should be supported the best.   https://github.com/hyperledger/fabric-samples/blob/v2.2.2/test-network/docker/docker-compose-test-net.yaml   There the network name is set in the script and in the bug I descibed the script variable ${COMPOSE_PROJECT_NAME} is not set. Hence the resulting network name is just "_test"  ></body> </Action>
<Action id="71664" issue="46670" author="denyeart" type="comment" body="Ah, right, the fix was made after fabric-samples was tagged for v2.2.x.  I&apos;ll re-open and think about a solution." created="2021-04-07 01:52:35.0" updateauthor="denyeart" updated="2021-04-07 01:52:35.0"/>
<Action id="71667" issue="46670" author="JIRAUSER21494" type="comment" body="Can we always set the script variable ${COMPOSE_PROJECT_NAME} to &quot;fabric_test&quot; on v2.2.x?" created="2021-04-08 01:46:28.0" updateauthor="JIRAUSER21494" updated="2021-04-08 01:46:28.0"/>
<Action id="71742" issue="46670" author="denyeart" type="comment" created="2021-05-06 03:08:10.0" updateauthor="denyeart" updated="2021-05-14 14:06:03.0"> <body><! CDATA Ok, finally looked at this some more... so in v2.2.x the network is set to ${COMPOSE_PROJECT_NAME}_test. COMPOSE_PROJECT_NAME is set in docker .env file as "net", therefore the full network name becomes "net_test". This works in my version of docker-compose, but if I recall the issue is that the .env file approach does not work consistently in docker-compose, that is why it was changed to hardcode to "fabric_test" more recently in main branch.   ~tschonnycache   ~wuqiaomin   can you see if it works for you on v2.2.x if you explicitly set environment variable COMPOSE_PROJECT_NAME to "net" in your environment?  There is no release branch for release-2.2 in fabric-samples where the issue can be fixed like it is in main, so I'm hoping this workaround resolves the issue (we could create a release-2.2 branch for v2.2.x specific fixes, but that adds maintenance so would be the last resort).  ></body> </Action>
<Action id="71757" issue="46670" author="btl5037" type="comment" body="Dave is correct, at some point COMPOSE changed the way they read .env file, to prevent it from breaking across version I simply hardcoded it in newer Fabric versions. You should be able to set the variable Dave mentioned and have it work." created="2021-05-14 01:57:24.0" updateauthor="btl5037" updated="2021-05-14 01:57:24.0"/>
<Action id="71840" issue="46670" author="JIRAUSER21321" type="comment" created="2021-06-10 11:33:45.0" updateauthor="JIRAUSER21321" updated="2021-06-10 11:33:45.0"> <body><! CDATA  ~denyeart  what do you mean with "set environment vairable COMPOSE_PROJECT_NAME to "net" in MY environment"?  When i download 2.2.3 anew the .env file allready contains that line, as you described. how else would i set environment variables?  The docker docu states, that a variable can be passed as a cli but the calls to docker are comming from inside your network.sh script so i don't know where to manipulate them.  Anyway this would only fix it for me right? If you make 2.2.x your LTS you should have a release branch for it and maintain it, right?  ></body> </Action>
