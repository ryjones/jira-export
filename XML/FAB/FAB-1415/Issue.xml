<Issue id="13824" key="FAB-1415" number="1415" project="10002" reporter="muralisr" assignee="c0rwin" creator="muralisr" type="10004" summary="peer crashes at commit time if block&apos;s metadata is nil" priority="2" resolution="10000" status="6" created="2016-12-15 16:09:46.0" updated="2018-07-20 14:11:03.0" resolutiondate="2016-12-15 22:28:54.0" votes="0" watches="2" workflowId="36894"> <description><! CDATA Peer crashes with   panic: runtime error: index out of range  goroutine 69  running : panic(0xa6f740, 0xc42000e100) 	/opt/go/src/runtime/panic.go:500 +0x1a1 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/validator/statebasedval.(*Validator).ValidateAndPrepareBatch(0xc4203122e0, 0xc420294140, 0x1, 0xc4202d41b0, 0x1, 0x1) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/validator/statebasedval/state_based_validator.go:48 +0xba5 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.(*LockBasedTxMgr).ValidateAndPrepare(0xc42029c140, 0xc420294140, 0x1, 0x0, 0x0) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/lockbased_txmgr.go:77 +0xfb github.com/hyperledger/fabric/core/ledger/kvledger.(*KVLedger).Commit(0xc420317440, 0xc420294140, 0x48afc2, 0xc420080dc0) 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger.go:219 +0x8a github.com/hyperledger/fabric/core/committer.(*LedgerCommitter).CommitBlock(0xc420312990, 0xc420294140, 0x0, 0x21776bb3202c9c00) 	/opt/gopath/src/github.com/hyperledger/fabric/core/committer/committer_impl.go:51 +0x3d github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock(0xc420086000, 0xc420294140, 0x1, 0x4, 0xc4202d40d8) 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:388 +0x56 github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads(0xc420086000) 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:285 +0x458 created by github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider   ></description> </Issue>
