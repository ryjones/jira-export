<Action id="20132" issue="13824" author="c0rwin" type="comment" created="2016-12-15 17:09:05.0" updateauthor="c0rwin" updated="2016-12-15 17:09:05.0"> <body><! CDATA The block arrives from ordering service with metadata field underlined for transaction filter bit array not initialized, whereas later validator tries access that field and fails due to null pointer deference. Providing a fix which will take care to properly initialize metadata field and copy metadata fields it got from the orderer.  {code} block.Metadata = t.Block.Metadata if block.Metadata == nil { block.Metadata = &common.BlockMetadata{ Metadata:     byte{  byte{},   byte{},   byte{}}} } else if len(block.Metadata.Metadata) < int(common.BlockMetadataIndex_TRANSACTIONS_FILTER+1) { for i := int(len(block.Metadata.Metadata));  i <= int(common.BlockMetadataIndex_TRANSACTIONS_FILTER); i++ { block.Metadata.Metadata = append(block.Metadata.Metadata,   byte{}) } } {code}  ></body> </Action>
