<Issue id="37536" key="FAB-14117" number="14117" project="10002" reporter="sykesm" creator="sykesm" type="10004" summary="Intermittent integration test failure in e2e/cft_test" priority="3" resolution="10001" status="6" created="2019-02-08 15:06:27.0" updated="2019-03-19 10:57:40.0" resolutiondate="2019-02-25 14:05:31.0" votes="0" watches="3" workflowId="49147"> <description><! CDATA Encountered in CR build https://gerrit.hyperledger.org/r/c/29174/  {code} 0:30:11  e  peer-channel-create  Error: got unexpected status: BAD_REQUEST -- error authorizing update: error validating ReadSet: readset expected key  Group   /Channel/Application at version 0, but got version 1 20:30:11  e  OrdererOrg.orderer2  2019-02-07 20:30:10.415 UTC  common.deliver  Handle -> WARN 607 Error reading from 127.0.0.1:53614: rpc error: code = Canceled desc = context canceled 20:30:11  e  OrdererOrg.orderer2  2019-02-07 20:30:10.415 UTC  comm.grpc.server  1 -> INFO 608 streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Deliver grpc.peer_address=127.0.0.1:53614 error="rpc error: code = Canceled desc = context canceled" grpc.code=Canceled grpc.call_duration=12.289257ms 20:30:11  e  peer-channel-create  2019-02-07 20:30:10.596 UTC  channelCmd  InitCmdFactory -> INFO 001 Endorser and orderer connections initialized 20:30:11  e  OrdererOrg.orderer2  2019-02-07 20:30:10.605 UTC  orderer.common.broadcast  ProcessMessage -> WARN 609  channel: testchannel  Rejecting broadcast of config message from 127.0.0.1:53620 because of error: error authorizing update: error validating ReadSet: readset expected key  Group   /Channel/Application at version 0, but got version 1 20:30:11  e  OrdererOrg.orderer2  2019-02-07 20:30:10.605 UTC  comm.grpc.server  1 -> INFO 60a streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Broadcast grpc.peer_address=127.0.0.1:53620 grpc.code=OK grpc.call_duration=2.758305ms 20:30:11  e  peer-channel-create  Error: got unexpected status: BAD_REQUEST -- error authorizing update: error validating ReadSet: readset expected key  Group   /Channel/Application at version 0, but got version 1 20:30:11  e  OrdererOrg.orderer2  2019-02-07 20:30:10.609 UTC  common.deliver  Handle -> WARN 60b Error reading from 127.0.0.1:53618: rpc error: code = Canceled desc = context canceled 20:30:11  e  OrdererOrg.orderer2  2019-02-07 20:30:10.609 UTC  comm.grpc.server  1 -> INFO 60c streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Deliver grpc.peer_address=127.0.0.1:53618 error="rpc error: code = Canceled desc = context canceled" grpc.code=Canceled grpc.call_duration=12.661326ms 20:30:11  e  OrdererOrg.orderer3  2019-02-07 20:30:10.628 UTC  orderer.common.server  handleSignals -> INFO 05a Received signal: 15 (terminated) 20:30:11  e  OrdererOrg.orderer2  2019-02-07 20:30:10.628 UTC  orderer.common.server  handleSignals -> INFO 60d Received signal: 15 (terminated) 20:30:11  e  OrdererOrg.orderer2  2019-02-07 20:30:10.629 UTC  orderer.common.cluster  handleMessage -> WARN 60e Stream read from 127.0.0.1:52132 failed: rpc error: code = Canceled desc = context canceled 20:30:11  e  OrdererOrg.orderer2  2019-02-07 20:30:10.629 UTC  orderer.common.cluster  handleMessage -> WARN 60f Stream read from 127.0.0.1:52132 failed: rpc error: code = Canceled desc = context canceled 20:30:11  e  OrdererOrg.orderer2  2019-02-07 20:30:10.629 UTC  comm.grpc.server  1 -> INFO 610 streaming call completed grpc.service=orderer.Cluster grpc.method=Step grpc.peer_address=127.0.0.1:52132 grpc.peer_subject="CN=orderer3.example.com,L=San Francisco,ST=California,C=US" error="rpc error: code = Canceled desc = context canceled" grpc.code=Canceled grpc.call_duration=46.458761282s 20:30:11  e  OrdererOrg.orderer2  2019-02-07 20:30:10.629 UTC  comm.grpc.server  1 -> INFO 611 streaming call completed grpc.service=orderer.Cluster grpc.method=Step grpc.peer_address=127.0.0.1:52132 grpc.peer_subject="CN=orderer3.example.com,L=San Francisco,ST=California,C=US" error="rpc error: code = Canceled desc = context canceled" grpc.code=Canceled grpc.call_duration=54.283762335s 20:30:11  e  Org2.peer0  2019-02-07 20:30:10.638 UTC  nodeCmd  handleSignals -> INFO 01f Received signal: 15 (terminated) 20:30:11  e  Org2.peer0  2019-02-07 20:30:10.639 UTC  gossip.gossip  Stop -> INFO 020 Stopping gossip 20:30:11  e  Org2.peer0  2019-02-07 20:30:10.639 UTC  gossip.discovery  Stop -> INFO 021 Stopping 20:30:11  e  Org2.peer0  2019-02-07 20:30:10.639 UTC  gossip.discovery  Stop -> INFO 022 Stopped 20:30:11  e  Org2.peer0  2019-02-07 20:30:10.639 UTC  gossip.comm  Stop -> INFO 023 Stopping 20:30:11  e  Org2.peer0  2019-02-07 20:30:10.640 UTC  gossip.comm  Stop -> INFO 024 Stopped 20:30:11  e  Org1.peer0  2019-02-07 20:30:10.638 UTC  nodeCmd  handleSignals -> INFO 01f Received signal: 15 (terminated) 20:30:11  e  Org1.peer0  2019-02-07 20:30:10.639 UTC  gossip.gossip  Stop -> INFO 020 Stopping gossip 20:30:11  e  Org1.peer0  2019-02-07 20:30:10.639 UTC  gossip.discovery  Stop -> INFO 021 Stopping 20:30:11  e  Org1.peer0  2019-02-07 20:30:10.639 UTC  gossip.discovery  Stop -> INFO 022 Stopped 20:30:11  e  Org1.peer0  2019-02-07 20:30:10.639 UTC  gossip.comm  Stop -> INFO 023 Stopping 20:30:11  e  Org1.peer0  2019-02-07 20:30:10.640 UTC  gossip.comm  Stop -> INFO 024 Stopped 20:30:11  e  Org1.peer1  2019-02-07 20:30:10.638 UTC  nodeCmd  handleSignals -> INFO 01f Received signal: 15 (terminated) 20:30:11  e  Org1.peer1  2019-02-07 20:30:10.639 UTC  gossip.gossip  Stop -> INFO 020 Stopping gossip 20:30:11  e  Org1.peer1  2019-02-07 20:30:10.639 UTC  gossip.discovery  Stop -> INFO 021 Stopping 20:30:11  e  Org1.peer1  2019-02-07 20:30:10.639 UTC  gossip.discovery  Stop -> INFO 022 Stopped 20:30:11  e  Org1.peer1  2019-02-07 20:30:10.639 UTC  gossip.comm  Stop -> INFO 023 Stopping 20:30:11  e  Org1.peer1  2019-02-07 20:30:10.640 UTC  gossip.comm  Stop -> INFO 024 Stopped 20:30:11  e  Org2.peer1  2019-02-07 20:30:10.639 UTC  nodeCmd  handleSignals -> INFO 01f Received signal: 15 (terminated) 20:30:11  e  Org2.peer1  2019-02-07 20:30:10.639 UTC  gossip.gossip  Stop -> INFO 020 Stopping gossip 20:30:11  e  Org2.peer1  2019-02-07 20:30:10.639 UTC  gossip.discovery  Stop -> INFO 021 Stopping 20:30:11  e  Org2.peer1  2019-02-07 20:30:10.639 UTC  gossip.discovery  Stop -> INFO 022 Stopped 20:30:11  e  Org2.peer1  2019-02-07 20:30:10.640 UTC  gossip.comm  Stop -> INFO 023 Stopping 20:30:11  e  Org2.peer1  2019-02-07 20:30:10.640 UTC  gossip.comm  Stop -> INFO 024 Stopped 20:30:11 â€¢ Failure  62.222 seconds  20:30:11 EndToEnd Crash Fault Tolerance when an orderer is behind the latest snapshot on leader  It  catches up using the block stored in snapshot  20:30:11 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:151 20:30:11  20:30:11   Timed out after 60.148s. 20:30:11   Expected 20:30:11       <int>: 1 20:30:11   to equal 20:30:11       <int>: 0 20:30:11  20:30:11   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/nwo/network.go:732 {code}  I'm sorry I did not investigate the root cause. This is one of several flakes that I hit in my CR stack so I'm just trying to capture them...  Logs are attached  ></description> </Issue>
