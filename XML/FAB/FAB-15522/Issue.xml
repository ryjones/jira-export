<Issue id="40097" key="FAB-15522" number="15522" project="10002" reporter="muralisr" creator="muralisr" type="10004" summary="chaincode discovery not working with new lifecycle 2.0 model" priority="3" resolution="10002" status="6" created="2019-05-23 11:05:26.0" updated="2019-05-23 18:38:23.0" resolutiondate="2019-05-23 18:38:23.0" votes="0" watches="3" workflowId="52998"> <description><! CDATA This could be a work in progress or user error ... still opening a bug to faciliate discussion  Went through the package-install-approve-commit-instantiate process of the new cycle successfully. *Note: this was done through CLI.*  Using the go SDK to query the chaincode I see discovery of the chaincode prior to doing the query. This results in an error from Fabric which is unable to find the deployed chaincode.   Peer log: {code:java} 2019-05-22 11:28:54.513 UTC  lockbasedtxmgr  newQueryExecutor -> DEBU 15c1^  0m constructing new query executor txid =  857911fe-e45a-47b3-a4d2-4395e9640dca  2019-05-22 11:28:54.513 UTC  stateleveldb  GetState -> DEBU 15c2^  0m GetState(). ns=lscc, key=mycc 2019-05-22 11:28:54.513 UTC  discovery.lifecycle  DeployedChaincodes -> INFO 15c3^  0m Chaincode mycc isn't instantiated 2019-05-22 11:28:54.514 UTC  discovery.lifecycle  DeployedChaincodes -> DEBU 15c4^  0m Returning    2019-05-22 11:28:54.514 UTC  lockbasedtxmgr  Done -> DEBU 15c5^  0m Done with transaction simulation / query execution  857911fe-e45a-47b3-a4d2-4395e9640dca  2019-05-22 11:28:54.514 UTC  discovery.lifecycle  Metadata -> INFO 15c6^  0m Chaincode mycc isn't defined in channel myc 2019-05-22 11:28:54.514 UTC  discovery  chaincodeQuery -> ERRO 15c7^  0m Failed constructing descriptor for chaincode chaincodes:<name:"mycc" > ,: No metadata was found for chaincode mycc in channel myc 2019-05-22 11:28:54.514 UTC  discovery  Discover -> DEBU 15c8^  0m Returning to 172.17.0.10:40588 a response containing:  error:<content:"failed constructing descriptor for chaincodes:<name:\"mycc\" > " >  {code} This comes from  https://github.com/hyperledger/fabric/blob/master/core/cclifecycle/util.go#L33  querying the lscc for the chaincode (which I think is no longer the keeper of 2.0 lifecycle based CCs ?)  If this a work in progress, do we have an ETA for fix ?   If user error, could do with some hints on what I'm running into.      ~ales   ~yacovm   ~denyeart   ></description> </Issue>
