<Issue id="31330" key="FAB-10840" number="10840" project="10002" reporter="scottz" creator="scottz" type="10004" summary="fabric-test pte daily test failed once: EXTRA transaction delivered" priority="3" resolution="10203" status="6" created="2018-06-22 22:22:42.0" updated="2019-03-19 11:13:28.0" resolutiondate="2018-10-02 18:29:19.0" votes="0" watches="3" workflowId="35888"> <environment><! CDATA This test was run as part of a CI jenkins job, the daily SVT PTE job. The network configuration data is:      ./test_nl.sh  bring up network  number of orderers: 3  number of CA: 2  number of organizations: 2  number of peers: 2  number of kafka: 4  number of zookeeper: 3  number of channels: 1  orderer service type: kafka  PROFILE_STRING: test  HostIP1: localhost  TLSEnabled: enabled  ledger state database type: couchdb  batchTimeOut: 2s  coreLogLevel: INFO  batchSize: 500  TLSEnabled enabled, MutualTLSEnabled disabled  ></environment> <description><! CDATA The testcase sends a total of 20000 transactions (10,000 in each of 2 threads), but we see that an extra transaction is delivered. This is the first time seen during a PTE test, but we have seen this a few times during OTE tests, the latest incident being https://jira.hyperledger.org/browse/FAB-10550 - which send transactions through the orderers without any peers in the network - so we can say the problem is in the ordering system somewhere.  No nodes were restarted during this test.  Job 17 report from June 22 shows the failure.  https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-pte-x86_64/17/testReport/systest_pte/Perf_Stress_CouchDB/test_FAB3833_2i_FAB3810_2q/   Here is the Peer Log Data Summary Report, which shows that we received 20001 transactions delivered (to a peer in both orgs in the channel).     Note the script that counts the transactions in the PTE test is:   fabric-test/tools/PTE/CITest/scripts/get_peerStats.sh        Peer Log Data Summary Report  Peer: peer0.org1.example.com Channel: all, start time: 03:03:13:729, end time: 03:09:38:878, total time: 385149 ms Channel: all, blk Num: 212, BPS: 0.55 Channel: all, tx Num: 20001, TPS: 51.93   Peer: peer0.org1.example.com Channel: testorgschannel1, start time: 03:03:13:729, end time: 03:09:38:878, total time: 385149 ms Channel: testorgschannel1, blk Num: 212, BPS: 0.55 Channel: testorgschannel1, tx Num: 20001, TPS: 51.93   Peer: peer0.org2.example.com Channel: all, start time: 03:03:13:681, end time: 03:09:38:878, total time: 385197 ms Channel: all, blk Num: 212, BPS: 0.55 Channel: all, tx Num: 20001, TPS: 51.92   Peer: peer0.org2.example.com Channel: testorgschannel1, start time: 03:03:13:681, end time: 03:09:38:878, total time: 385197 ms Channel: testorgschannel1, blk Num: 212, BPS: 0.55 Channel: testorgschannel1, tx Num: 20001, TPS: 51.92       PTE 0 main : Test Summary 0 :  Nid:chan:org:id=0:testorgschannel1:org1:0 invoke_query_const  pte-exec:completed 10000 transaction INVOKE(QUERY) in 195803 ms, timestamp: start 1529637125617 end 1529637321420,Throughput=51.07 TPS   PTE 0 main : Test Summary (sample_cc_ch1):Total QUERY transaction=10000, the Min duration is 195803 ms,the Max duration is 195803 ms,Avg duration=195803 ms, total throughput=51.07 TPS   PTE 0 main : Aggregate Test Summary (sample_cc_ch1):Total QUERY transaction 10000, start 1529637125617 end 1529637321420 duration is 195803 ms, TPS 51.07   PTE 1 main : Test Summary 0 :  Nid:chan:org:id=0:testorgschannel1:org2:0 invoke_query_const  pte-exec:completed 10000 transaction INVOKE(QUERY) in 197457 ms, timestamp: start 1529637125597 end 1529637323054,Throughput=50.64 TPS   PTE 1 main : Test Summary (sample_cc_ch1):Total QUERY transaction=10000, the Min duration is 197457 ms,the Max duration is 197457 ms,Avg duration=197457 ms, total throughput=50.64 TPS   PTE 1 main : Aggregate Test Summary (sample_cc_ch1):Total QUERY transaction 10000, start 1529637125597 end 1529637323054 duration is 197457 ms, TPS 50.64     ></description> </Issue>
