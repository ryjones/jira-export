<Issue id="30196" key="FAB-10061" number="10061" project="10002" reporter="denyeart" creator="denyeart" type="10001" summary="Support LevelDB to CouchDB state database conversion - conversion validation" priority="3" status="10000" created="2018-05-15 04:35:50.0" updated="2019-11-27 18:47:50.0" votes="1" watches="2" workflowId="35761"> <description><! CDATA Chaincode written to work against LevelDB will also work against CouchDB, as the CouchDB state database supports a superset of the chaincode APIs â€“ everything LevelDB state database supports plus JSON query (GetQueryResult API).  There is one caveat - chaincode execution on CouchDB state database performs additional validation:  1) Check for reserved fields in the top level of the JSON (FAB-8006): _id, _rev, _deleted, ~version.  2) Ensure keys are valid UTF8, and do not start with underscore, as required by CouchDB.  So when converting a LevelDB state database to CouchDB, the same validation needs to be performed during the conversion. Any occurrences of the above will result in a failed conversion.  Note - upon introduction of private data in v1.2, different peers may have different private data, such that conversion may succeed on one peer but fail on another peer.  Conversion of peer from CouchDB to LevelDB (or adding a new LevelDB peer) is possible , however chaincode JSON queries will obviously not work anymore. Conversion of peer from LevelDB to CouchDB (or adding a new CouchDB peer) requires checking all transactions for existence of invalid data.   ></description> </Issue>
