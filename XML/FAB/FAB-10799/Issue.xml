<Issue id="31273" key="FAB-10799" number="10799" project="10002" reporter="mlishok" assignee="jyellick" creator="mlishok" type="10004" summary="common/deliver package blocks waiting for new blocks to commit, but does not abort on connection closure" priority="2" resolution="10000" status="6" created="2018-06-21 15:41:43.0" updated="2018-07-20 14:17:01.0" resolutiondate="2018-06-22 13:15:56.0" votes="0" watches="4" workflowId="42519"> <description><! CDATA 1.1 event service does not seem to abort on connection closure.  Mainly affects misbehaving client connections but symptoms would be a block committed/delivered.. Clients connect, disconnect in the meantime.  Â   next block delivered...then deliver service will try to deliver messages to all previous registrations.  Â   2018-06-19 11:06:55.674 UTC  kvledger  CommitWithPvtData -> INFO 06e 0m Channel  testchannel : Committed block  26  with 1 transaction(s)    33m2018-06-19 11:07:02.163 UTC  common/deliver  deliverBlocks -> WARN 06f 0m  channel: testchannel  Error sending to 158.177.123.56:60888: rpc error: code = Unknown desc = the stream has been done  33m2018-06-19 11:07:02.163 UTC  common/deliver  deliverBlocks -> WARN 070 0m  channel: testchannel  Error sending to 158.177.123.56:42716: rpc error: code = Unknown desc = the stream has been done  33m2018-06-19 11:07:02.163 UTC  common/deliver  deliverBlocks -> WARN 071 0m  channel: testchannel  Error sending to 158.177.123.56:44342: rpc error: code = Unknown desc = the stream has been done  33m2018-06-19 11:07:02.163 UTC  common/deliver  deliverBlocks -> WARN 072 0m  channel: testchannel  Error sending to 158.177.123.56:44360: rpc error: code = Unknown desc = the stream has been done  33m2018-06-19 11:07:02.163 UTC  common/deliver  deliverBlocks -> WARN 073 0m  channel: testchannel  Error sending to 158.177.123.52:42468: rpc error: code = Unknown desc = the stream has been done  33m2018-06-19 11:07:02.163 UTC  common/deliver  deliverBlocks -> WARN 074 0m  channel: testchannel  Error sending to 158.177.123.56:42732: rpc error: code = Unknown desc = the stream has been done  33m2018-06-19 11:07:02.163 UTC  common/deliver  deliverBlocks -> WARN 075 0m  channel: testchannel  Error sending to 158.177.123.54:52536: rpc error: code = Unknown desc = the stream has been done  33m2018-06-19 11:07:02.163 UTC  common/deliver  deliverBlocks -> WARN 076 0m  channel: testchannel  Error sending to 158.177.123.56:60898: rpc error: code = Unknown desc = the stream has been done  ...... can be many thousands here.  ></description> </Issue>
