<Action id="68416" issue="43614" author="sykesm" type="comment" created="2020-03-18 21:06:46.0" updateauthor="sykesm" updated="2020-03-18 21:06:46.0"> <body><! CDATA This log has many failures and some odd comments...  {code} 2019-12-05T19:30:08.5816196Z --- FAIL: TestDBRequestTimeout (0.37s) 2019-12-05T19:30:08.5816253Z     couchdb_test.go:634:  2019-12-05T19:30:08.5816305Z         	Error Trace:	couchdb_test.go:634 2019-12-05T19:30:08.5816375Z         	Error:      	An error is expected but got nil. 2019-12-05T19:30:08.5816430Z         	Test:       	TestDBRequestTimeout 2019-12-05T19:30:08.5816492Z         	Messages:   	Error should have been thown while trying to create a couchdb instance with a connection timeout ... 2019-12-05T19:30:08.8721602Z FAIL 2019-12-05T19:30:08.8721812Z coverage: 82.6% of statements 2019-12-05T19:30:08.8721863Z FAIL	github.com/hyperledger/fabric/core/ledger/util/couchdb	30.738s {code}  {code} 2019-12-05T19:34:49.3732493Z --- FAIL: TestParticipant (0.01s) 2019-12-05T19:34:49.3732769Z     --- FAIL: TestParticipant/Pulled_block's_metadata_is_malformed (0.00s) 2019-12-05T19:34:49.3732825Z         replication_test.go:818:  2019-12-05T19:34:49.3732969Z             	Error Trace:	replication_test.go:818 2019-12-05T19:34:49.3733036Z             	Error:      	Error message not equal: 2019-12-05T19:34:49.3733097Z             	            	expected: "error unmarshaling metadata from block at index  LAST_CONFIG : proto: common.Metadata: illegal tag 0 (wire type 1)" 2019-12-05T19:34:49.3733170Z             	            	actual  : "failed to get signatures: error unmarshaling metadata from block at index  SIGNATURES : proto: common.Metadata: illegal tag 0 (wire type 1)" 2019-12-05T19:34:49.3733481Z             	Test:       	TestParticipant/Pulled_block's_metadata_is_malformed 2019-12-05T19:34:49.3733759Z     --- FAIL: TestParticipant/Pulled_block's_metadata_is_valid_and_has_a_last_config (0.00s) 2019-12-05T19:34:49.3733814Z         replication_test.go:821:  2019-12-05T19:34:49.3733887Z             	Error Trace:	replication_test.go:821 2019-12-05T19:34:49.3733942Z             	Error:      	"%!s(chan *common.Block=0xc00044c720)" should have 1 item(s), but has 0 2019-12-05T19:34:49.3734234Z             	Test:       	TestParticipant/Pulled_block's_metadata_is_valid_and_has_a_last_config 2019-12-05T19:34:49.3734305Z         replication_test.go:822:  2019-12-05T19:34:49.3734352Z             	Error Trace:	replication_test.go:822 2019-12-05T19:34:49.3734398Z             	Error:      	Not equal:  2019-12-05T19:34:49.3734484Z             	            	expected: *errors.withStack(failed to get signatures: error unmarshaling metadata from block at index  SIGNATURES : proto: common.Metadata: illegal tag 0 (wire type 1)) 2019-12-05T19:34:49.3734552Z             	            	actual  : *errors.fundamental(not in the channel) 2019-12-05T19:34:49.3734852Z             	Test:       	TestParticipant/Pulled_block's_metadata_is_valid_and_has_a_last_config 2019-12-05T19:34:49.3735129Z     --- FAIL: TestParticipant/Failed_pulling_last_config_block (0.00s) 2019-12-05T19:34:49.3735185Z         replication_test.go:818:  2019-12-05T19:34:49.3735248Z             	Error Trace:	replication_test.go:818 2019-12-05T19:34:49.3735305Z             	Error:      	Error message not equal: 2019-12-05T19:34:49.3735355Z             	            	expected: "retry attempts exhausted" 2019-12-05T19:34:49.3735435Z             	            	actual  : "failed to get signatures: error unmarshaling metadata from block at index  SIGNATURES : proto: common.Metadata: illegal tag 0 (wire type 1)" 2019-12-05T19:34:49.3735499Z             	Test:       	TestParticipant/Failed_pulling_last_config_block ... 2019-12-05T19:34:49.3770162Z !!!WTL falling back 2019-12-05T19:34:49.3770360Z !!!WTL falling back 2019-12-05T19:34:49.3770405Z !!!WTL falling back 2019-12-05T19:34:49.3770663Z --- FAIL: TestLastConfigBlock (0.00s) 2019-12-05T19:34:49.3770927Z     --- FAIL: TestLastConfigBlock/bad_metadata_in_block (0.00s) 2019-12-05T19:34:49.3770979Z         util_test.go:951:  2019-12-05T19:34:49.3771025Z             	Error Trace:	util_test.go:951 2019-12-05T19:34:49.3771088Z             	Error:      	Error message not equal: 2019-12-05T19:34:49.3771150Z             	            	expected: "error unmarshaling metadata from block at index  LAST_CONFIG : proto: common.Metadata: illegal tag 0 (wire type 1)" 2019-12-05T19:34:49.3771222Z             	            	actual  : "failed to get last config: error unmarshaling metadata from block at index  LAST_CONFIG : proto: common.Metadata: illegal tag 0 (wire type 1)" 2019-12-05T19:34:49.3771308Z             	Test:       	TestLastConfigBlock/bad_metadata_in_block ... 2019-12-05T19:34:49.5111250Z coverage: 95.1% of statements 2019-12-05T19:34:49.5111305Z FAIL	github.com/hyperledger/fabric/orderer/common/cluster	44.825s {code}  The WTL statements, for example, imply someone was debugging something.  ></body> </Action>
<Action id="68418" issue="43614" author="sykesm" type="comment" created="2020-03-18 21:25:37.0" updateauthor="sykesm" updated="2020-03-18 21:25:37.0"> <body><! CDATA So, I don't know that I trust the logs given the debug info that's in them and the mismatched error types getting called out.  Additionally, FAB-15817 / PR #363 made many changes to {{TestParticipant}} after this issue was opened..  ></body> </Action>
<Action id="68419" issue="43614" author="sykesm" type="comment" body="This package has many issues but I&apos;m not sure we can rely on the information in the attached logs. Closing for now. if we see failures in {{TestParticpant}} in the future, hindsight will tell us that I made the wrong decision." created="2020-03-18 21:27:32.0" updateauthor="sykesm" updated="2020-03-18 21:27:32.0"/>
