<Issue id="45191" key="FAB-17951" number="17951" project="10002" reporter="guoger" assignee="guoger" creator="guoger" type="10004" summary="Raft config update should be validated against correct IDs" priority="3" resolution="10000" status="6" created="2020-06-02 17:41:41.0" updated="2020-07-01 11:36:51.0" resolutiondate="2020-07-01 11:36:51.0" votes="0" watches="3" workflowId="59102" archived="N"> <description><! CDATA When a config update is submitted to node, it runs through  this check|https://github.com/hyperledger/fabric/blob/450ba3ae2e6434bdc0a99c4f3ebf77498d05e2ba/orderer/consensus/etcdraft/chain.go#L1304 , which uses *dummy node IDs* (always starting from 1). This prevents validation from making correct decision based on current IDs in consenter set. For example, when we have  2, 3, 4  in cluster, and attempts to remove 4, this part of validation logic would believe that 3 is being removed.  In most of cases we are fine, since after all we are removing correct node with the certificate. However, if 4 happens to be offline, we would get rejected with error "config will result in quorum loss"  ></description> </Issue>
