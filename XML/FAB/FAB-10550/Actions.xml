<Action id="45602" issue="30894" author="sambhavdutt" type="comment" created="2018-06-06 15:19:15.0" updateauthor="sambhavdutt" updated="2018-06-06 15:28:35.0"> <body><! CDATA OTE test failed as one extra TX was received( CI-Build #374|https://jenkins.hyperledger.org/view/Daily/job/fabric-test-daily-x86_64/374/consoleFull ) *orderer_ote.perf_orderer.test_FAB_7037_3ord_kafka_1ch_500batchsize*  *fabric-test Commit: 70271dc*  {code:java} PRODUCERS   OrdererIdx  ChannelIdx ChannelID              TX Target         ACK        NACK 0           0 testorgschannel1           10000       10000           0 1           0 testorgschannel1           10000       10000           0 2           0 testorgschannel1           10000       10000           0 CONSUMERS   OrdererIdx  ChannelIdx ChannelID                    TXs     Batches 0           0 testorgschannel1           30001          64 1           0 testorgschannel1           30001          64 2           0 testorgschannel1           30001          64 GOOD block count received 64 (expected 60) on ordIndx=0 channelIDs 0 =testorgschannel1 chanSentTxTotal=30000 BatchSize=500 GOOD block count received 64 (expected 60) on ordIndx=1 channelIDs 0 =testorgschannel1 chanSentTxTotal=30000 BatchSize=500 GOOD block count received 64 (expected 60) on ordIndx=2 channelIDs 0 =testorgschannel1 chanSentTxTotal=30000 BatchSize=500 Not counting genesis blks (1 per chan)        1 Total TX broadcasts Requested to Send     30000 Total TX broadcasts send success ACK      30000 Total TX broadcasts sendFailed - NACK         0 Total Send-LOST TX (Not Ack or Nack))         0 Total Recv-LOST TX (Ack but not Recvd)       -1  Total deliveries received TX on each ordrr        30001   30001   30001  Total deliveries received Blocks on each ordrr       64      64      64  THROUGHPUT TPS = 260 , FAB-7037 using batchSize=500 numChannels=1 numOrdsInNtwk=3 ordType=kafka numKafkaBrokers=5 TPS - Overall Transactions per second       260 TPS per channel                             260 TPS per orderer                              86 BPS - Overall Blocks per second               0 BPS per channel                               0 BPS per orderer                               0 TEST FAB-7037 BAD! Some EXTRA TX were delivered by orderer service! RESULT=FAILED: TX Req=30000 BrdcstACK=30000 NACK=0 DelivBlk= 64 64 64  DelivTX= 30001 30001 30001  numChannels=1 batchSize=500 TPS=260 Removing the Network Consumers Consumer-o2-c0 CLOSING. Totals received numtrans=30002 numBlocks=65, 2018-06-06 12:49:10.952300865 +0000 UTC m=+432.451570698 Consumer-o1-c0 CLOSING. Totals received numtrans=30002 numBlocks=65, 2018-06-06 12:49:10.952360014 +0000 UTC m=+432.451629907 --- FAIL: Test_FAB7037_1ch_3ord_5kb_500batchsize (432.37s) 	ote_test.go:382: TEST FAB-7037 BAD! Some EXTRA TX were delivered by orderer service! RESULT=FAILED: TX Req=30000 BrdcstACK=30000 NACK=0 DelivBlk= 64 64 64  DelivTX= 30001 30001 30001  numChannels=1 batchSize=500 TPS=260 Consumer-o0-c0 CLOSING. Totals received numtrans=30002 numBlocks=65, 2018-06-06 12:49:10.952490427 +0000 UTC m=+432.451760203 FAIL exit status 1 FAIL	github.com/hyperledger/fabric/OTE	432.460s {code}  *Build Log*  https://jenkins.hyperledger.org/view/Daily/job/fabric-test-daily-x86_64/374/testReport/orderer_ote/perf_orderer/test_FAB_7037_3ord_kafka_1ch_500batchsize/  https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-x86_64/374/   ></body> </Action>
<Action id="45713" issue="30894" author="scottz" type="comment" created="2018-06-08 14:41:53.0" updateauthor="scottz" updated="2018-06-08 14:58:39.0"> <body><! CDATA This only happens rarely - but it has happened before. We should turn on debug logs in the orderer (and sarama/kafka) and try a test many times toÂ reproduce it and capture logs.  Or add some code to the OTE to examine the receive TX IDs, and look to identify duplicates.  And/or add another orderer (spy) to retrieve all the transactions at the end of the test, and see if there are exactly 15000 or if an extra one is seen.  ></body> </Action>
