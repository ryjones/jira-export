<Action id="38853" issue="26927" author="jeffgarratt" type="comment" created="2018-01-18 15:09:13.0" updateauthor="jeffgarratt" updated="2018-01-18 15:09:13.0"> <body><! CDATA  ~mffrench  to give yourself some confidence you could create a new peer and join the channel and verify that it syncs up.  Once it does, you could consider backing up your existing peer's file store (while it is stopped) and removing the directory from the chain file store, which in your case appears to be...   <file_store>/ledgersData/chains/chains/elixir-channel  Then have that peer join the channel once more and verify it also syncs up.  ></body> </Action>
<Action id="38929" issue="26927" author="mastersingh24" type="comment" body=" ~mffrench  - Which version are you starting with and to which version are you trying to upgrade?  If you are actually on v1.0.0-alpha2 and trying to upgrade to v1.0.x there is no guarantee that this is going to work as it is not even supported" created="2018-01-20 22:21:31.0" updateauthor="mastersingh24" updated="2018-01-20 22:21:31.0"/>
<Action id="38944" issue="26927" author="mffrench" type="comment" created="2018-01-21 22:41:13.0" updateauthor="mffrench" updated="2018-01-21 22:41:13.0"> <body><! CDATA  ~jeffgarratt  and  ~mastersingh24  : first thank you both for your answers.  I've been able to restart a fresh peer and ledger resync from other peers has been successful. So I'm downgrading the priority of this issue to low as this is an issue on old Hyperledger Fabric and this is no more a prod issue.   ~mastersingh24  : I didn't try to upgrade the peer but I was just restarting it.  I kept the data from the older peer instance with the ledger with I can reproduce the issue. I would like to try understand what happened even if this is in a old version.  ~jeffgarratt  gave me some test todo to get the config block with some `peer fetch...` command but I'm not sure of my test as the fetch I did was against the orderer and not the local peer ledger as the peer is trying to do before it raise me this error. If you have other idea please let me know.  Best,     ></body> </Action>
<Action id="38945" issue="26927" author="mffrench" type="comment" created="2018-01-21 22:57:25.0" updateauthor="mffrench" updated="2018-01-21 22:57:25.0"> <body><! CDATA Some other questions just in case you may have some answers :  + Is there a HLF Peer backup best practices ? I think this could be interesting to reduce resync time but I'm not sure if such solution is supported and how. + Can you tell me since HLF version upgrade are supported ? I guess upgrade from v1.0 to v1.1 will be supported ? Is there some operation best practices to follow for such operation ?  Thank you again !  ></body> </Action>
<Action id="39160" issue="26927" author="mffrench" type="comment" created="2018-01-26 08:13:19.0" updateauthor="mffrench" updated="2018-01-26 08:13:19.0"> <body><! CDATA Hi,  as I get the issue back on another peer on the network, I raise the issue again to high. If we can have some help to understand the root cause of this chain configuration problem on the peer that would be great.  Best,  ></body> </Action>
<Action id="39174" issue="26927" author="muralisr" type="comment" created="2018-01-26 15:13:48.0" updateauthor="muralisr" updated="2018-01-26 15:13:48.0"> <body><! CDATA The error `Failed to load chain elixir-channel(Bad envelope: Not a tx of type CONFIG)` comes when loading in the ledger for the channel at peer startup time.   I wonder if the hard stopping of the peers causes the ledger to get out of whack ? Can you provide the exact steps to recreate this issue  ~mffrench   ></body> </Action>
<Action id="39176" issue="26927" author="mffrench" type="comment" created="2018-01-26 15:34:54.0" updateauthor="mffrench" updated="2018-01-26 15:34:54.0"> <body><! CDATA Hi Srinivasan,  I've the impression this issue is related to this one : https://jira.hyperledger.org/browse/FAB-5286. After the VMs patching campaign we also had to restart the orderer (which is a solo orderer in our conf as we didn't get enough resources to deploy a kafka one) and this issue could be a side effect of FAB-5286.  It's currently hard for me to provide step to reproduce the error as I reproduce it with the client ledger and I can't it share publicly. Also I'm not sure yet on how to reproduce it from scratch. However I think I may have some idea on that and I will try to give you some env for that next week.  Best,  ></body> </Action>
<Action id="39187" issue="26927" author="muralisr" type="comment" created="2018-01-26 16:21:30.0" updateauthor="muralisr" updated="2018-01-26 16:21:30.0"> <body><! CDATA Thank you for the quick response  ~mffrench .  One thing would be interesting to do a high level comparison of at the ledger files on working peers with the non-working peer to if we can spot anything odd.  ></body> </Action>
<Action id="39192" issue="26927" author="mffrench" type="comment" body="Is there some tool for such comparison ? I mean the ledger has more than 25000 blocks and I don&apos;t know yet how to do such thing efficiently..." created="2018-01-26 17:09:25.0" updateauthor="mffrench" updated="2018-01-26 17:09:25.0"/>
<Action id="39222" issue="26927" author="muralisr" type="comment" body=" ~mffrench  Right. No, I just meant looking at the ledger externally (file sizes for example) first to see if you could spot some anomalies. But looking at the logs it did find the current config block (just couldn&apos;t locate the config TX in there for some reason), so please ignore that suggestion." created="2018-01-27 14:49:38.0" updateauthor="muralisr" updated="2018-01-27 14:49:38.0"/>
<Action id="39341" issue="26927" author="denyeart" type="comment" created="2018-01-30 02:47:56.0" updateauthor="denyeart" updated="2018-01-30 02:47:56.0"> <body><! CDATA  ~mffrench  Can you provide the same debug snippet for a peer that can start and a peer that cannot start.  We'll want to compare the block info in debug for the last config block, which in your case is block  26847 .  For both peers, please ensure the config block number is the same for both peers, in the debug message: "Got config block"  ></body> </Action>
<Action id="39796" issue="26927" author="clayton sims" type="comment" body="Move to monitor / hold.  waiting on info from originator." created="2018-02-07 17:26:38.0" updateauthor="clayton sims" updated="2018-02-07 17:26:38.0"/>
<Action id="40238" issue="26927" author="mffrench" type="comment" created="2018-02-15 10:32:47.0" updateauthor="mffrench" updated="2018-02-15 10:32:47.0"> <body><! CDATA Hi,  I tried to reproduce the issue on 1.0.1 but I failed. On the other hands we were able to resync the peers on the network. So I will minor the issue severity again.  Best,  ></body> </Action>
<Action id="40240" issue="26927" author="denyeart" type="comment" created="2018-02-15 11:32:18.0" updateauthor="denyeart" updated="2018-02-15 11:32:18.0"> <body><! CDATA Ok, let's leave this open for now with a Future fix date so that we can investigate potential causes in more detail after 1.1.   ~dongming  I know you are adding additional peer crash and recovery system tests.  Here is one problem that you can try to model as part of those tests.  ></body> </Action>
<Action id="54125" issue="26927" author="denyeart" type="comment" body="Unable to reproduce, closing." created="2018-12-01 11:33:29.0" updateauthor="denyeart" updated="2018-12-01 11:33:29.0"/>
