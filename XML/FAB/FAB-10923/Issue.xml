<Issue id="31462" key="FAB-10923" number="10923" project="10002" reporter="sykesm" creator="sykesm" type="10004" summary="event server can panic during shutdown" priority="3" resolution="10001" status="6" created="2018-06-28 19:37:11.0" updated="2018-09-12 15:37:32.0" resolutiondate="2018-09-12 15:37:32.0" votes="0" watches="2" workflowId="43069"> <description><! CDATA Recent changes in the event producer can cause a panic.   https://github.com/hyperledger/fabric/blob/63b1abe4eec5863a1c60f02b2f116168a3474377/events/producer/events.go#L91  ranges over the event processor's eventChannel. That keeps the loop running as long as the channel remains open.  As soon as the channel closes, the deferred function at  https://github.com/hyperledger/fabric/blob/63b1abe4eec5863a1c60f02b2f116168a3474377/events/producer/events.go#L89  will then close the eventChannel  https://github.com/hyperledger/fabric/blob/63b1abe4eec5863a1c60f02b2f116168a3474377/events/producer/events.go#L166-L168 .  Closing a closed channel will panic.  /cc  ~wlahti   ></description> </Issue>
