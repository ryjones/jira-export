<Issue id="29703" key="FAB-9713" number="9713" project="10002" reporter="kchristidis" creator="kchristidis" type="10004" summary="Config parsing logic for Kafka TLS should just read the files" priority="3" resolution="10001" status="6" created="2018-04-25 21:16:37.0" updated="2019-04-25 10:20:23.0" resolutiondate="2019-04-25 10:20:23.0" votes="0" watches="3" workflowId="35719"> <description><! CDATA What happens today:Â If you set the {{Kafka.TLS}} part of the configuration in {{orderer.yaml}} by using the {{File:}} keys (i.e. by pointing to where the certs are stored), then for each of those values, the config parsing mechanism: # reads the file # decodes its contents into a {{pem.Block}} # encodes the PEM block as {{  byte}} in memory # converts this encoding into a string  (See {{pemBlocksFromFileDecodeHook}} in {{viperutil/config_util.go}}.)  This series of steps is redundant.  What we need ultimately is a TLS certificate (type {{tls.Certificate}}) for the client's key pair, and X509 certificates (type {{x509.Certificate}}) for the certificates of the root CAs.  It should be sufficient then to just read the files in the config parsing logic (think {{ioutil.ReadFile()}}), then parse those byte slices accordingly in {{newBrokerConfig)) in \{\{kafka/config.go}}.  ></description> </Issue>
