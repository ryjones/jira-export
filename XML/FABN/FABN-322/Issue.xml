<Issue id="31214" key="FABN-322" number="322" project="10604" reporter="dongming" assignee="harrisob@us.ibm.com" creator="dongming" type="10004" summary="SDK a.ledger_height.compare is not a function" priority="1" resolution="10000" status="6" created="2018-06-20 13:42:48.0" updated="2018-07-19 00:53:38.0" resolutiondate="2018-06-22 22:53:21.0" votes="0" watches="1" workflowId="34053"> <description><! CDATA All proposals PTE sent thru SDK and get back the error from SDK when using service discovery along with fabric-ca-client@1.2.0-snapshot.67 and fabric-client@1.2.0-snapshot.67, encounter this error from SDK  ^  32minfo^  39m:  PTE 0 main : stderr: ^  34mdebug^  39m:  DiscoveryEndorsementHandler : _modify_groups - chaincode_plan:\{"groups":\{"G0":\{"peers": \{"mspid":"PeerOrg2","endpoint":"peer1.org2.example.com:7064","ledger_height":\{"low":2,"high":0,"unsigned":true},"chaincodes": \\{"name":"sample_cc_ch1","version":"v0"} ,"name":"peer1.org2.example.com:7064"},\{"mspid":"PeerOrg2","endpoint":"peer0.org2.example.com:7063","ledger_height":\{"low":2,"high":0,"unsigned":true},"chaincodes": \\{"name":"sample_cc_ch1","version":"v0"} ,"name":"localhost:7063"} }},"layouts": \\{"G0":1} ,"endorsements":\{}}  ^  32minfo^  39m:  PTE 0 main : stderr: ^  31merror^  39m:  Channel.js : sendTransactionProposal - Failed Proposal. Error: TypeError: a.ledger_height.compare is not a function at un_sorted.sort (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/tools/PTE/node_modules/fabric-client/lib/impl/DiscoveryEndorsementHandler.js:276:33) at Array.sort (native) at DiscoveryEndorsementHandler._modify_groups (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/tools/PTE/node_modules/fabric-client/lib/impl/DiscoveryEndorsementHandler.js:275:29) at DiscoveryEndorsementHandler._endorse (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/tools/PTE/node_modules/fabric-client/lib/impl/DiscoveryEndorsementHandler.js:130:9) at DiscoveryEndorsementHandler.endorse (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/tools/PTE/node_modules/fabric-client/lib/impl/DiscoveryEndorsementHandler.js:109:16) at <anonymous> at process._tickCallback (internal/process/next_tick.js:188:7)  ^  32minfo^  39m:  PTE 0 main : stderr: ^  31merror^  39m:  PTE 0 exec :  Nid:chan:org:id=0:testorgschannel1:org2:0 invoke_move_const_evtBlock  Failed to send transaction proposal due to error: TypeError: a.ledger_height.compare is not a function  Â   ></description> </Issue>
