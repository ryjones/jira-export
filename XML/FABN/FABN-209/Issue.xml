<Issue id="23906" key="FABN-209" number="209" project="10604" reporter="dainliff" creator="dainliff" type="10004" summary="Importing fabric-ca-client before fabric-client causes different behaviour" priority="3" resolution="10000" status="6" created="2017-11-10 05:13:02.0" updated="2018-07-19 00:53:14.0" resolutiondate="2017-11-27 18:46:01.0" votes="0" watches="2" workflowId="33940"> <description><! CDATA Importing fabric-ca-client before fabric-client causes different behaviour, and in my experience has always caused application errors. I think this is likely due to the default global fabric configuration being different between fabric-client and fabric-ca-client.  To replicate * go to  https://github.com/hyperledger/fabric-samples/tree/v1.1.0-preview/balance-transfer  * Install "fabric-ca-client:1.1.0-preview" * In config.js import fabric-ca-client before fabric-client like so  {code:java} var util = require('util'); var path = require('path'); require('fabric-ca-client'); var hfc = require('fabric-client');{code} * run application and tests, and you should receive the following errors  {code:java}  2017-11-10 16:08:41.604   INFO  SampleWebApp - ****************** SERVER STARTED ************************  2017-11-10 16:08:41.606   INFO  SampleWebApp - *************** http://localhost:4000 ******************  2017-11-10 16:08:43.939   DEBUG  SampleWebApp - ------>>>>>> new request for /users  2017-11-10 16:08:43.940   DEBUG  SampleWebApp - End point : /users  2017-11-10 16:08:43.940   DEBUG  SampleWebApp - User name : Jim  2017-11-10 16:08:43.940   DEBUG  SampleWebApp - Org name : Org1  2017-11-10 16:08:43.942   DEBUG  Helper - getClientForOrg - ****** START Org1 undefined error:  Client.js : Invalid network configuration due to missing "network-config-schema" configuration setting  2017-11-10 16:08:43.949   ERROR  Helper - Failed to get registered user: Jim with error: Error: Invalid network configuration due to missing "network-config-schema" configuration setting  2017-11-10 16:08:43.949   DEBUG  SampleWebApp - Successfully returned from registering the username Jim for organization Org1  2017-11-10 16:08:43.971   DEBUG  SampleWebApp - ------>>>>>> new request for /users  2017-11-10 16:08:43.971   DEBUG  SampleWebApp - End point : /users  2017-11-10 16:08:43.971   DEBUG  SampleWebApp - User name : Barry  2017-11-10 16:08:43.971   DEBUG  SampleWebApp - Org name : Org2  2017-11-10 16:08:43.971   DEBUG  Helper - getClientForOrg - ****** START Org2 undefined error:  Client.js : Invalid network configuration due to missing "network-config-schema" configuration setting  2017-11-10 16:08:43.975   ERROR  Helper - Failed to get registered user: Barry with error: Error: Invalid network configuration due to missing "network-config-schema" configuration setting  2017-11-10 16:08:43.975   DEBUG  SampleWebApp - Successfully returned from registering the username Barry for organization Org2{code}    I believe that the import order of the two packages should not make a difference, as it's pretty unexpected behaviour. However, In the meantime the documentation should reflect that fabric-ca-client must be imported after fabric-client.  ></description> </Issue>
