<Action id="40408" issue="27806" author="denyeart" type="comment" created="2018-02-20 12:59:27.0" updateauthor="denyeart" updated="2018-02-20 13:04:45.0"> <body><! CDATA Chaincode authors add any couchdb indexes as *.json metadata files in <chaincode_directory>/META-INF/statedb/couchdb/indexes.  Here is what the client packaging logic should do:  Add *.json to the list of files that are packaged.  If there is a META-INF directory at the chaincode top level directory, package it including all subdirectories at the top level of the chaincode tar (NOT within the "src" directory).     For example, for go chaincode (fabric-client/lib/packager/Golang.js) the packaged tar would include: * src/github.com/hyperledger/fabric/examples/chaincode/go/marbles02/marbles_chaincode.go * META-INF/statedb/couchdb/indexes/indexOwner.json     For example, for node chaincode (fabric-client/lib/packager/Node.js) the packaged tar would include: * src/marbles_chaincode.js * META-INF/statedb/couchdb/indexes/indexOwner.json  Chaincode installation on peer side (LSCC) will do validation on the JSON content.  See full go and node chaincode examples with indexes in fabric-samples/chaincode/marbles02.  ></body> </Action>
<Action id="40594" issue="27806" author="clayton sims" type="comment" body="Gari - From today&apos;s discussion I understand you are the proud owner of this one now. " created="2018-02-22 20:04:39.0" updateauthor="clayton sims" updated="2018-02-22 20:04:39.0"/>
<Action id="40762" issue="27806" author="mastersingh24" type="comment" body="https://gerrit.hyperledger.org/r/18385" created="2018-02-25 17:14:13.0" updateauthor="mastersingh24" updated="2018-02-25 17:14:13.0"/>
<Action id="40883" issue="27806" author="adnanchoudhury" type="comment" created="2018-02-26 23:32:16.0" updateauthor="adnanchoudhury" updated="2018-02-26 23:32:16.0"> <body><! CDATA  ~mastersingh24  verifying this fix failed for me, this bug is still reproducable following the steps mentioned above. the test used latest fabric-client that has the changes from the CR.  ></body> </Action>
<Action id="40884" issue="27806" author="ratnakar" type="comment" created="2018-02-26 23:57:52.0" updateauthor="ratnakar" updated="2018-02-27 00:15:37.0"> <body><! CDATA  ~mastersingh24   ~denyeart  I would like to add couple of my observations here. * For chaincode install, metadata path is not passed from "__getChaincodePackageData_" of *Client.js* class to *Packager.package()*, hence there is no provision for the application developer/ tester to pass this metadata path causes the problem  * while debugging the issue, It is also observed that *logger* is used without importing the module.    Making the API changes as described above works for me ie., I could see the index gets created.     ></body> </Action>
<Action id="40893" issue="27806" author="ratnakar" type="comment" body="Raised another issue to address this  FAB-8550|https://jira.hyperledger.org/browse/FAB-8550 " created="2018-02-27 02:47:50.0" updateauthor="ratnakar" updated="2018-02-27 02:47:50.0"/>
