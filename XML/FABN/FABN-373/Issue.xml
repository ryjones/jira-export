<Issue id="28623" key="FABN-373" number="373" project="10604" reporter="shimos" assignee="zhaochy" creator="shimos" type="10004" summary="Type information is broken in fabric-client/fabric-ca-client" environment="fabric-sdk-node v1.1.0" priority="3" resolution="10000" status="6" created="2018-03-17 00:15:12.0" updated="2018-08-24 21:23:19.0" resolutiondate="2018-03-23 10:45:02.0" votes="0" watches="2" workflowId="34104"> <description><! CDATA Type information in v.1.1.0 is broken and not compilable with tsc.  With the following test files,  *package.json:* {code:java} { "dependencies": { "fabric-ca-client": "^1.1.0", "fabric-client": "^1.1.0" }, "devDependencies": { "@types/bytebuffer": "^5.0.36", "@types/node": "^9.4.7" } } {code} *test.ts:* {code:java} import Client = require("fabric-client");  const client = Client.loadFromConfig("profile.yaml"); {code} The following errors are produced: {noformat} $ tsc --version Version 2.7.2  $ tsc test.ts node_modules/fabric-ca-client/index.d.ts(17,10): error TS2305: Module '"/home/testuser/tstest/node_modules/fabric-client/index"' has no exported member 'BaseClient'. node_modules/fabric-ca-client/index.d.ts(17,22): error TS2305: Module '"/home/testuser/tstest/node_modules/fabric-client/index"' has no exported member 'ICryptoSuite'. node_modules/fabric-ca-client/index.d.ts(17,36): error TS2305: Module '"/home/testuser/tstest/node_modules/fabric-client/index"' has no exported member 'User'. node_modules/fabric-ca-client/index.d.ts(17,48): error TS2497: Module '"/home/testuser/tstest/node_modules/fabric-client/index"' resolves to a non-module entity and cannot be imported using this construct. node_modules/fabric-ca-client/index.d.ts(153,5): error TS2666: Exports and export assignments are not permitted in module augmentations. node_modules/fabric-client/index.d.ts(17,10): error TS2305: Module '"/home/testuser/tstest/node_modules/fabric-ca-client/index"' has no exported member 'FabricCAServices'. node_modules/fabric-client/index.d.ts(17,34): error TS2497: Module '"/home/testuser/tstest/node_modules/fabric-ca-client/index"' resolves to a non-module entity and cannot be imported using this construct. node_modules/fabric-client/index.d.ts(461,3): error TS2666: Exports and export assignments are not permitted in module augmentations. {noformat} With the version of some days before v1.1.0 (using 1.1.0-snapshot.95), it worked: {noformat} $ tsc test.ts $ cat test.js "use strict"; exports.__esModule = true; var Client = require("fabric-client"); var client = Client.loadFromConfig("profile.yaml"); {noformat} This may be due to the new type definition for fabric-ca-client in -FAB-8879-, and it seems that definitions in both fabric-client and fabric-ca-client should be fixed.  ></description> </Issue>
