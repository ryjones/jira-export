<Action id="70803" issue="46341" author="harrisob@us.ibm.com" type="comment" created="2020-11-24 14:19:30.0" updateauthor="harrisob@us.ibm.com" updated="2020-11-24 14:19:30.0"> <body><! CDATA I do not understand why there are two different URL's for your peer, in the connection profile I see grpcs://10.96.69.124:3000, however in the error message I see grpcs://peer1.acme.com:3000 ?  Could we get a full debug trace, set the following before kicking off your node application, you may also log to a file by placing it's name instead of  console export HFC_LOGGING='{"debug":"console"}'   ></body> </Action>
<Action id="70819" issue="46341" author="JIRAUSER21110" type="comment" created="2020-11-25 07:02:05.0" updateauthor="JIRAUSER21110" updated="2020-11-25 07:02:05.0"> <body><! CDATA Hello Bret,   Below are the logs  2020-11-25T06:56:23.241Z - debug: Successfully constructed a winston logger with configurations debug=console 2020-11-25T06:56:23.467Z - debug:  crypto_ecdsa_aes : Hash algorithm: SHA2, hash output size: 256 2020-11-25T06:56:23.738Z - debug:  Gateway : in Gateway constructor 2020-11-25T06:56:23.738Z - debug:  Gateway : connect - start 2020-11-25T06:56:23.739Z - debug:  Gateway : connection options: \{"wallet":{"providerRegistry":{"providers":{}},"store":\{"storePath":"/home/webwerks/Documents/blockchain-neo/DSG-Hyperledger/dsg/javascript/wallet"}},"identity":"user1","discovery":\{"enabled":true,"asLocalhost":true}} 2020-11-25T06:56:23.739Z - debug:  Client : Client.constructor gateway client  - start  2020-11-25T06:56:23.739Z - debug:  Gateway : connect - setting identity from wallet 2020-11-25T06:56:23.740Z - debug:  crypto_ecdsa_aes : createKeyFromRaw - start 2020-11-25T06:56:23.743Z - debug:  crypto_ecdsa_aes : createKeyFromRaw - have the key  Circular  2020-11-25T06:56:23.743Z - debug:  crypto_ecdsa_aes : createKeyFromRaw - start 2020-11-25T06:56:23.746Z - debug:  crypto_ecdsa_aes : createKeyFromRaw - have the key  Circular  2020-11-25T06:56:23.747Z - debug:  Gateway : connect - using self signed setting for tls 2020-11-25T06:56:23.747Z - debug:  Client : setTlsClientCertAndKey: gateway client - start 2020-11-25T06:56:23.747Z - debug:  Client : setTlsClientCertAndKey: gateway client - generating self-signed TLS client certificate 2020-11-25T06:56:23.747Z - debug:  crypto_ecdsa_aes : Hash algorithm: SHA2, hash output size: 256 2020-11-25T06:56:23.993Z - debug:  Gateway : connect - NetworkConfig loading client from ccp 2020-11-25T06:56:23.993Z - debug:  NetworkConfig : loadFromConfig - start 2020-11-25T06:56:23.994Z - debug:  NetworkConfig : buildPeer - start - peer1.acme.com 2020-11-25T06:56:23.994Z - debug:  NetworkConfig : findPeerMspid - start for peer1.acme.com 2020-11-25T06:56:23.994Z - debug:  NetworkConfig : findPeerMspid - checking peer peer1.acme.com in org AcmeMSP 2020-11-25T06:56:23.994Z - debug:  NetworkConfig : findPeerMspid - found mspid AcmeMSP for peer1.acme.com 2020-11-25T06:56:23.994Z - debug:  NetworkConfig : buildOptions - start 2020-11-25T06:56:23.995Z - debug:  Client : newEndpoint: gateway client - start 2020-11-25T06:56:23.995Z - debug:  Client : getConnectionOptions: gateway client - start 2020-11-25T06:56:23.995Z - debug:  Client : newEndpoint: gateway client grpc-wait-for-ready-timeout set to 3000 2020-11-25T06:56:23.995Z - debug:  Client : newEndpoint: gateway client - ssl_target_name_override: peer1.acme.com 2020-11-25T06:56:23.996Z - debug:  Endpoint : Endpoint.constructor - start  2020-11-25T06:56:24.000Z - debug:  Client : new endpoint url: grpcs://10.96.69.124:3000 2020-11-25T06:56:24.001Z - debug:  NetworkConfig : buildPeer - about to connect to endorser peer1.acme.com url:grpcs://10.96.69.124:3000 mspid:AcmeMSP 2020-11-25T06:56:24.001Z - debug:  Client : getEndorser: gateway client start name:peer1.acme.com 2020-11-25T06:56:24.001Z - debug:  Client : getEndorser: gateway client create endorser name:peer1.acme.com 2020-11-25T06:56:24.001Z - debug:  Endorser : Endorser.constructor peer1.acme.com  - start  2020-11-25T06:56:24.001Z - debug:  Client : getEndorser: gateway client return endorser name:peer1.acme.com 2020-11-25T06:56:24.002Z - debug:  ServiceEndpoint : connect Endorser-peer1.acme.com  - start  2020-11-25T06:56:24.002Z - debug:  ServiceEndpoint : connect Endorser-peer1.acme.com  - create the grpc service for peer1.acme.com 2020-11-25T06:56:24.005Z - debug:  ServiceEndpoint : waitForReady - start Endorser-peer1.acme.com - grpcs://10.96.69.124:3000 2020-11-25T06:56:24.005Z - debug:  ServiceEndpoint : waitForReady - promise running peer1.acme.com - grpcs://10.96.69.124:3000 2020-11-25T06:56:27.007Z - error:  ServiceEndpoint : Error: Failed to connect before the deadline on Endorser- name: peer1.acme.com, url:grpcs://10.96.69.124:3000, connected:false, connectAttempted:true 2020-11-25T06:56:27.008Z - error:  ServiceEndpoint : waitForReady - Failed to connect to remote gRPC server peer1.acme.com url:grpcs://10.96.69.124:3000 timeout:3000 2020-11-25T06:56:27.012Z - debug:  NetworkConfig : loadFromConfig - end 2020-11-25T06:56:27.012Z - debug:  Gateway : connect - end 2020-11-25T06:56:27.012Z - debug:  Gateway : getNetwork - start 2020-11-25T06:56:27.012Z - debug:  Gateway : getNetwork - create network object and initialize 2020-11-25T06:56:27.013Z - debug:  Client : getChannel: gateway client start name:airlinechannel 2020-11-25T06:56:27.013Z - debug:  Client : getChannel: gateway client create channel name:airlinechannel 2020-11-25T06:56:27.013Z - debug:  Channel : Channel.constructor airlinechannel  - start 2020-11-25T06:56:27.013Z - debug:  Channel : Channel.constructor airlinechannel  - channel name is good airlinechannel 2020-11-25T06:56:27.014Z - debug:  Channel : Constructed Channel instance: name - airlinechannel 2020-11-25T06:56:27.014Z - debug:  Client : getChannel: gateway client return channel name:airlinechannel 2020-11-25T06:56:27.014Z - debug:  Network : constructor - start 2020-11-25T06:56:27.014Z - debug:  EventSourceManager : constructor - network:airlinechannel 2020-11-25T06:56:27.014Z - debug:  BlockEventSource : constructor - blockType:filtered 2020-11-25T06:56:27.015Z - debug:  BlockEventSource : constructor - blockType:full 2020-11-25T06:56:27.015Z - debug:  BlockEventSource : constructor - blockType:private 2020-11-25T06:56:27.015Z - debug:  Network : _initialize - start 2020-11-25T06:56:27.015Z - debug:  Network : _initializeInternalChannel - start 2020-11-25T06:56:27.015Z - debug:  Network : _initializeInternalChannel - initialize with discovery 2020-11-25T06:56:27.015Z - debug:  Network : _initializeInternalChannel - user has not specified discovery targets, check channel and client 2020-11-25T06:56:27.015Z - debug:  Channel : getEndorsers airlinechannel  - start 2020-11-25T06:56:27.015Z - debug:  Channel : _getServiceEndpoints - start - AcmeMSP 2020-11-25T06:56:27.015Z - debug:  Client : getEndorsers gateway client  - start 2020-11-25T06:56:27.015Z - debug:  Channel : _getServiceEndpoints - start - AcmeMSP 2020-11-25T06:56:27.015Z - debug:  Channel : _getServiceEndpoints - Endorser mspid matched, added peer1.acme.com connected: false 2020-11-25T06:56:27.016Z - debug:  Network : _initializeInternalChannel - using channel/client targets 2020-11-25T06:56:27.016Z - debug:  Client : newDiscoverer: gateway client start name:peer1.acme.com 2020-11-25T06:56:27.016Z - debug:  Discoverer : Discoverer.constructor peer1.acme.com  - start  2020-11-25T06:56:27.016Z - debug:  Client : newDiscoverer: gateway client return new Discoverer name:peer1.acme.com 2020-11-25T06:56:27.016Z - debug:  ServiceEndpoint : setEndpoint Discoverer-peer1.acme.com  - start  2020-11-25T06:56:27.016Z - debug:  ServiceEndpoint : setEndpoint Discoverer-peer1.acme.com  - endpoint has been set for peer1.acme.com-grpcs://10.96.69.124:3000 2020-11-25T06:56:27.016Z - debug:  Channel : newDiscoveryService airlinechannel  - start 2020-11-25T06:56:27.016Z - debug:  DiscoveryService : DiscoveryService.constructor airlinechannel  - start  2020-11-25T06:56:27.016Z - debug:  ServiceAction : ServiceAction.constructor - start  airlinechannel  2020-11-25T06:56:27.017Z - debug:  DiscoveryService : build airlinechannel  - start 2020-11-25T06:56:27.017Z - debug:  IdentityContext : serializeIdentity - start 2020-11-25T06:56:27.017Z - debug:  Client : getClientCertHash: gateway client - start 2020-11-25T06:56:27.017Z - debug:  Client : getClientCertHash: gateway client - using clientCert -----BEGIN CERTIFICATE----- MIIBUzCB+6ADAgECAgEEMAoGCCqGSM49BAMCMBgxFjAUBgNVBAMMDWZhYnJpYy1j b21tb24wIhgPMjAyMDExMjUwNTMzMDNaGA8yMDIwMTEyNTIzMzYyM1owGDEWMBQG A1UEAwwNZmFicmljLWNvbW1vbjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABJnT XNg9vhVpuSYoG5RP1xyr+dwzGOJwaSDQTnzDe2CVc+o3y1xSHGnRKDEespNUmB53 lFywuw7uJa5pXdb4Fj+jMjAwMAwGA1UdEwEB/wQCMAAwCwYDVR0PBAQDAgbAMBMG A1UdJQQMMAoGCCsGAQUFBwMCMAoGCCqGSM49BAMCA0cAMEQCIAUFxaSbTWCBayX3 qysGOQAb0sm0SeHx3YvWltEMo9GWAiAqtSsn6T0o/FvJFDsT6/5N0VYyDFw3zsEs qt12cMtnwg== -----END CERTIFICATE-----  2020-11-25T06:56:27.018Z - debug:  DiscoveryService : build airlinechannel  - adding config query 2020-11-25T06:56:27.018Z - debug:  DiscoveryService : build airlinechannel  - adding peer membership query 2020-11-25T06:56:27.019Z - debug:  ServiceAction : sign DiscoveryService:airlinechannel  - start 2020-11-25T06:56:27.019Z - debug:  IdentityContext : sign - start 2020-11-25T06:56:27.037Z - debug:  crypto_ecdsa_aes : ecdsa signature: negative=0, words= 43651062, 66657223, 63043513, 15151915, 52949924, 56292551, 11045802, 51996085, 44103507, 1250047, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 , length=10, red=null, negative=0, words= 31386929, 26945985, 12323406, 25831117, 45109099, 29143198, 6919410, 36305250, 26953139, 1803338 , length=10, red=null, recoveryParam=1 2020-11-25T06:56:27.037Z - debug:  IdentityContext : sign - end 2020-11-25T06:56:27.037Z - debug:  ServiceAction : sign DiscoveryService:airlinechannel  - end 2020-11-25T06:56:27.037Z - debug:  Network : _initializeInternalChannel - will discover asLocalhost:true 2020-11-25T06:56:27.038Z - debug:  DiscoveryService : send airlinechannel  - start 2020-11-25T06:56:27.038Z - debug:  ServiceAction : getSignedEnvelope DiscoveryService:airlinechannel  - start 2020-11-25T06:56:27.038Z - debug:  DiscoveryService : send airlinechannel  - about to discover on grpcs://10.96.69.124:3000 2020-11-25T06:56:27.038Z - debug:  ServiceEndpoint : checkConnection Discoverer-peer1.acme.com  - start - connected:false 2020-11-25T06:56:27.038Z - debug:  ServiceEndpoint : isConnectable Discoverer-peer1.acme.com  - start  2020-11-25T06:56:27.038Z - debug:  ServiceEndpoint : isConnectable Discoverer-peer1.acme.com  - this service endpoint has been assigned an endpoint, connect may be run 2020-11-25T06:56:27.038Z - debug:  ServiceEndpoint : resetConnection Discoverer-peer1.acme.com  - start - connected:false 2020-11-25T06:56:27.038Z - debug:  ServiceEndpoint : disconnect Discoverer-peer1.acme.com  - start on ServiceEndpoint 2020-11-25T06:56:27.038Z - debug:  ServiceEndpoint : disconnect Discoverer-peer1.acme.com  - end on ServiceEndpoint 2020-11-25T06:56:27.038Z - debug:  ServiceEndpoint : resetConnection Discoverer-peer1.acme.com  - create the grpc service for peer1.acme.com 2020-11-25T06:56:27.039Z - debug:  ServiceEndpoint : waitForReady - start Discoverer-peer1.acme.com - grpcs://10.96.69.124:3000 2020-11-25T06:56:27.039Z - debug:  ServiceEndpoint : waitForReady - promise running peer1.acme.com - grpcs://10.96.69.124:3000 2020-11-25T06:56:30.040Z - error:  ServiceEndpoint : Error: Failed to connect before the deadline on Discoverer- name: peer1.acme.com, url:grpcs://10.96.69.124:3000, connected:false, connectAttempted:true 2020-11-25T06:56:30.040Z - error:  ServiceEndpoint : waitForReady - Failed to connect to remote gRPC server peer1.acme.com url:grpcs://10.96.69.124:3000 timeout:3000 2020-11-25T06:56:30.040Z - error:  ServiceEndpoint : ServiceEndpoint grpcs://10.96.69.124:3000 reset connection failed :: Error: Failed to connect before the deadline on Discoverer- name: peer1.acme.com, url:grpcs://10.96.69.124:3000, connected:false, connectAttempted:true 2020-11-25T06:56:30.041Z - debug:  ServiceEndpoint : checkConnection Discoverer-peer1.acme.com  - end - connected:false 2020-11-25T06:56:30.041Z - debug:  DiscoveryService : send airlinechannel  - processing discovery response 2020-11-25T06:56:30.041Z - error:  DiscoveryService : send airlinechannel  - no discovery results Failed to evaluate transaction: Error: DiscoveryService has failed to return results  ></body> </Action>
<Action id="70823" issue="46341" author="harrisob@us.ibm.com" type="comment" created="2020-11-25 16:32:37.0" updateauthor="harrisob@us.ibm.com" updated="2020-11-25 16:32:37.0"> <body><! CDATA Looks like you are using a self signed cert for the gateway's mutual TLS client cert. You may wish to enroll a TLS identity with your CA to pass to the gateway.connect().   // enroll a userid to get a TLS certificate / key  to be used by the gateway const tlsOptions: any = { 		trustedRoots:   , 		verify: false, 	}; 	const caService: FabricCAServices = new FabricCAServices(fabricCAEndpoint, tlsOptions as any, caName); 	const req: any = { 		enrollmentID: 'admin', // using admin because it is already registered with the CA 		enrollmentSecret: 'adminpw', 		profile: 'tls', // THIS IS REALLY IMPORTANT 	};  	const enrollment: any = await caService.enroll(req); 	enrollment.key = enrollment.key.toBytes();  // now store the TLS identity in the wallet so the gateway will have access to it 	const tlsIdentity: any = { 		credentials: { 		    certificate: enrollment.certificate, 		    privateKey: enrollment.key, 	        }, 		mspId: 'Org1MSP', 		type: 'X509', 	}; 	await wallet.put('tlsId', tlsIdentity); 	const enrollment: any = await caService.enroll(req); 	enrollment.key = enrollment.key.toBytes();  await wallet.put('tlsId', tlsIdentity); 	  // now tell the gateway about the TLS identity that we stored above, this will be used on mutual TLS connections made by this gateway to peers and orderers const opts: GatewayOptions = { 		clientTlsIdentity: 'tlsId', 		discovery: { 			asLocalhost: true, 			enabled: true, 		}, 		identity: userId, 		wallet, 	};   ></body> </Action>
<Action id="71674" issue="46341" author="JIRAUSER21679" type="comment" created="2021-04-12 14:48:01.0" updateauthor="JIRAUSER21679" updated="2021-04-12 14:48:01.0"> <body><! CDATA  ~piyushap   Could you help me with this question too? I have close problem, hyperledger fabric instance is deployed on AWS EC2. I can enroll and register users from my local machine, but when I want to invoke, evaluate chaincode I get the next:     2021-04-12T14:32:47.700Z - debug:  Remote.js : ** Remote instance url: grpcs://3.15.206.177:8051, name: 3.15.206.177:8051, options loaded are:: \{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"name":"3.15.206.177:8051","grpc.ssl_target_name_override":"3.15.206.177","grpc.default_authority":"3.15.206.177"} 2021-04-12T14:32:47.700Z - debug:  Peer.js : Peer.const - url: grpcs://3.15.206.177:8051 timeout: 45000 name:3.15.206.177:8051 2021-04-12T14:32:47.700Z - debug:  Peer.js : _createClients - create peer endorser connection 3.15.206.177:8051 2021-04-12T14:32:47.700Z - debug:  Peer.js : _createClients - create peer discovery connection 3.15.206.177:8051 2021-04-12T14:32:47.700Z - debug:  Remote.js : getUrl::grpcs://3.15.206.177:8051 2021-04-12T14:32:47.700Z - debug:  Channel.js : /n adding a new peer --name: 3.15.206.177:8051 --URL: grpcs://3.15.206.177:8051 2021-04-12T14:32:47.702Z - debug:  Remote.js : getUrl::grpcs://3.15.206.177:8051 2021-04-12T14:32:47.702Z - debug:  Channel.js : ChannelPeer.const - url: grpcs://3.15.206.177:8051 2021-04-12T14:32:47.702Z - debug:  Channel.js : _buildDiscoveryPeers - peer:\{"mspid":"Org1MSP","endpoint":"3.15.206.177:8051","ledger_height":{"low":5,"high":0,"unsigned":true},"chaincodes":  ,"name":"3.15.206.177:8051"} 2021-04-12T14:32:47.702Z - debug:  Channel.js : _initialize - have interest of:\{"chaincodes": {"name":"fabcar"} } 2021-04-12T14:32:47.702Z - debug:  Channel.js : _discover - start 2021-04-12T14:32:47.702Z - debug:  Client.js : _getSigningIdentity - admin parameter is boolean :true 2021-04-12T14:32:47.702Z - debug:  Client.js : getClientCertHash - start 2021-04-12T14:32:47.702Z - debug:  Channel.js : _discover - adding chaincodes/collection query 2021-04-12T14:32:47.706Z - debug:  crypto_ecdsa_aes : ecdsa signature: negative=0, words= 7301449, 40218557, 41817664, 8252654, 62322359, 26455203, 49378057, 23880675, 19986208, 3618770, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 , length=10, red=null, negative=0, words= 35295392, 2200225, 7938154, 55968711, 29126720, 11104011, 27223761, 41921029, 31083175, 638055 , length=10, red=null, recoveryParam=1 2021-04-12T14:32:47.706Z - debug:  Peer.js : sendDiscovery - Start 2021-04-12T14:32:47.832Z - debug:  Peer.js : sendDiscovery - Received discovery response from peer "grpcs://3.15.206.177:7051" 2021-04-12T14:32:47.832Z - debug:  Channel.js : _discover - processing discovery response 2021-04-12T14:32:47.832Z - debug:  Channel.js : _discover - parse discovery response 2021-04-12T14:32:47.832Z - debug:  Channel.js : _discover - process results 2021-04-12T14:32:47.833Z - debug:  Channel.js : _processDiscoveryChaincodeResults - start 2021-04-12T14:32:47.833Z - debug:  Channel.js : _processDiscoveryChaincodeResults - found group: G0 2021-04-12T14:32:47.833Z - debug:  Channel.js : _processPeers - found peer :3.15.206.177:7051 2021-04-12T14:32:47.833Z - debug:  Channel.js : _processPeers - found ledger_height :5 2021-04-12T14:32:47.833Z - debug:  Channel.js : _processPeers - found chaincode :\{"name":"fabcar","version":"1.0"} 2021-04-12T14:32:47.833Z - debug:  Channel.js : _processDiscoveryChaincodeResults - found group: G1 2021-04-12T14:32:47.834Z - debug:  Channel.js : _processPeers - found peer :3.15.206.177:9051 2021-04-12T14:32:47.834Z - debug:  Channel.js : _processPeers - found ledger_height :5 2021-04-12T14:32:47.834Z - debug:  Channel.js : _processPeers - found chaincode :\{"name":"fabcar","version":"1.0"} 2021-04-12T14:32:47.834Z - debug:  Channel.js : _processDiscoveryChaincodeResults - layout :\{"G0":1,"G1":1} 2021-04-12T14:32:47.834Z - debug:  Channel.js : _discover - completed processing results 2021-04-12T14:32:47.834Z - debug:  Channel.js : _buildDiscoveryEndorsementPlan - build endorsement plan for \{"chaincodes": {"name":"fabcar"} } 2021-04-12T14:32:47.834Z - debug:  Channel.js : _buildDiscoveryEndorsementPlan - endorsing peer group G0 2021-04-12T14:32:47.834Z - debug:  Channel.js : _buildPeerName - start 2021-04-12T14:32:47.834Z - debug:  Channel.js : _buildUrl - start 2021-04-12T14:32:47.834Z - debug:  Remote.js : getUrl::grpcs://3.15.206.177:9051 2021-04-12T14:32:47.835Z - debug:  Remote.js : getUrl::grpcs://3.15.206.177:10051 2021-04-12T14:32:47.835Z - debug:  Remote.js : getUrl::grpcs://3.15.206.177:7051 2021-04-12T14:32:47.835Z - debug:  Channel.js : _buildPeerName - found existing peer grpcs://3.15.206.177:7051 2021-04-12T14:32:47.835Z - debug:  Remote.js : getUrl::grpcs://3.15.206.177:8051 2021-04-12T14:32:47.835Z - debug:  Channel.js : _buildDiscoveryEndorsementPlan - peer:\{"mspid":"Org1MSP","endpoint":"3.15.206.177:7051","ledger_height":{"low":5,"high":0,"unsigned":true},"chaincodes": \{"name":"fabcar","version":"1.0"} ,"name":"3.15.206.177:7051"} 2021-04-12T14:32:47.835Z - debug:  Channel.js : _buildDiscoveryEndorsementPlan - endorsing peer group G1 2021-04-12T14:32:47.835Z - debug:  Channel.js : _buildPeerName - start 2021-04-12T14:32:47.835Z - debug:  Channel.js : _buildUrl - start 2021-04-12T14:32:47.835Z - debug:  Remote.js : getUrl::grpcs://3.15.206.177:9051 2021-04-12T14:32:47.835Z - debug:  Channel.js : _buildPeerName - found existing peer grpcs://3.15.206.177:9051 2021-04-12T14:32:47.835Z - debug:  Remote.js : getUrl::grpcs://3.15.206.177:10051 2021-04-12T14:32:47.835Z - debug:  Remote.js : getUrl::grpcs://3.15.206.177:7051 2021-04-12T14:32:47.835Z - debug:  Remote.js : getUrl::grpcs://3.15.206.177:8051 2021-04-12T14:32:47.835Z - debug:  Channel.js : _buildDiscoveryEndorsementPlan - peer:\{"mspid":"Org2MSP","endpoint":"3.15.206.177:9051","ledger_height":{"low":5,"high":0,"unsigned":true},"chaincodes": \{"name":"fabcar","version":"1.0"} ,"name":"3.15.206.177:9051"} 2021-04-12T14:32:47.835Z - debug:  Channel.js : _initialize - Added an endorsement plan for \{"chaincodes": {"name":"fabcar"} } 2021-04-12T14:32:47.835Z - debug:  Gateway : in getOptions 2021-04-12T14:32:47.835Z - debug:  Channel.js : getPeersForOrg - starting - using client mspid: Org1MSP 2021-04-12T14:32:47.836Z - debug:  SingleQueryHandler : constructor: peers= "3.15.206.177:7051","3.15.206.177:8051"  2021-04-12T14:32:47.836Z - debug:  Gateway : in getOptions 2021-04-12T14:32:47.836Z - debug:  Gateway : in getOptions 2021-04-12T14:32:47.836Z - debug:  Channel.js : getPeersForOrg - starting - using client mspid: Org1MSP 2021-04-12T14:32:47.836Z - debug:  EventHubFactory : constructor: mychannel 2021-04-12T14:32:47.836Z - debug:  Network : in getContract 2021-04-12T14:32:47.836Z - debug:  Contract : in Contract constructor 2021-04-12T14:32:47.836Z - debug:  Gateway : in getClient 2021-04-12T14:32:47.837Z - debug:  Client.js : newTransactionID - no admin parameter, returning non admin TransactionID 2021-04-12T14:32:47.837Z - debug:  Client.js : _getSigningIdentity - admin parameter is boolean :false 2021-04-12T14:32:47.837Z - debug:  TransactionID.js : constructor - start 2021-04-12T14:32:47.837Z - debug:  TransactionID.js : const - transaction_id 363666a4e969d27a11c26f91b3cad32a866c4dac87b4339297accdd0b6e05060 2021-04-12T14:32:47.837Z - debug:  Gateway : in getOptions 2021-04-12T14:32:47.838Z - debug:  Gateway : in getOptions 2021-04-12T14:32:47.838Z - debug:  Channel.js : getPeersForOrg - starting - using client mspid: Org1MSP 2021-04-12T14:32:47.838Z - debug:  EventHubManager : Factory Event Hubs: 0/0 2021-04-12T14:32:47.838Z - debug:  EventHubManager : Replay Event Hubs: 0/0 2021-04-12T14:32:47.838Z - debug:  ChannelEventHub.js : const  2021-04-12T14:32:47.838Z - debug:  ChannelEventHub.js : const  2021-04-12T14:32:47.839Z - debug:  TransactionEventHandler : constructor: transactionId = 363666a4e969d27a11c26f91b3cad32a866c4dac87b4339297accdd0b6e05060, options = \{"commitTimeout":300} 2021-04-12T14:32:47.839Z - debug:  Gateway : in getClient 2021-04-12T14:32:47.839Z - debug:  Channel.js : sendTransactionProposal - start 2021-04-12T14:32:47.839Z - debug:  Channel.js : %s - discovery is on and no targets 2021-04-12T14:32:47.839Z - debug:  Channel.js : sendTransactionProposal - running with endorsement handler 2021-04-12T14:32:47.839Z - debug:  Channel.js : _buildSignedProposal - start 2021-04-12T14:32:47.839Z - debug:  Channel.js : _buildSignedProposal - adding function arg:createCar 2021-04-12T14:32:47.839Z - debug:  Channel.js : _buildSignedProposal - adding arg 2021-04-12T14:32:47.839Z - debug:  Channel.js : _buildSignedProposal - adding arg 2021-04-12T14:32:47.839Z - debug:  Channel.js : _buildSignedProposal - adding arg 2021-04-12T14:32:47.840Z - debug:  Channel.js : _buildSignedProposal - adding arg 2021-04-12T14:32:47.840Z - debug:  Channel.js : _buildSignedProposal - adding arg 2021-04-12T14:32:47.840Z - debug:  Channel.js : _buildSignedProposal - not adding the argument :: argbytes 2021-04-12T14:32:47.840Z - debug:  Channel.js : _buildSignedProposal - chaincode ID:fabcar 2021-04-12T14:32:47.840Z - debug:  Client.js : _getSigningIdentity - admin parameter is boolean :false 2021-04-12T14:32:47.840Z - debug:  Client.js : getClientCertHash - start 2021-04-12T14:32:47.840Z - debug:  client-utils.js : buildChannelHeader - type 3 channel_id mychannel tx_id NaN epoch null chaincode_id fabcar 2021-04-12T14:32:47.842Z - debug:  client-utils.js : buildProposal - not adding a transientMap 2021-04-12T14:32:47.845Z - debug:  crypto_ecdsa_aes : ecdsa signature: negative=0, words= 50468411, 63121665, 4371808, 57332992, 22912459, 48696630, 14398202, 25394426, 16721460, 715077, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 , length=10, red=null, negative=0, words= 52562118, 55918761, 13474781, 62062772, 57700057, 63681475, 47748777, 31780166, 46884469, 1758747, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 , length=10, red=null, recoveryParam=0 2021-04-12T14:32:47.846Z - debug:  Channel.js : sendTransactionProposal - endorse with hint \{"chaincodes": {"name":"fabcar"} } 2021-04-12T14:32:47.846Z - debug:  DiscoveryEndorsementHandler : endorse - start 2021-04-12T14:32:47.846Z - debug:  DiscoveryEndorsementHandler : endorse - get endorsement plans for \{"chaincodes": {"name":"fabcar"} } 2021-04-12T14:32:47.846Z - debug:  Channel.js : getEndorsementPlan - start - \{"chaincodes": {"name":"fabcar"} } 2021-04-12T14:32:47.846Z - debug:  Channel.js : getDiscoveryResults - start 2021-04-12T14:32:47.846Z - debug:  Channel.js : _merge_hints - key \{"chaincodes": {"name":"fabcar"} } 2021-04-12T14:32:47.846Z - debug:  Channel.js : _merge_hints - found interest exist \{"chaincodes": {"name":"fabcar"} } 2021-04-12T14:32:47.846Z - debug:  Channel.js : getDiscoveryResults - returning results 2021-04-12T14:32:47.846Z - debug:  Channel.js : getEndorsementPlan - looking at plan_id of \{"chaincodes": {"name":"fabcar"} } 2021-04-12T14:32:47.846Z - debug:  Channel.js : getEndorsementPlan - found plan in known plans ::\{"chaincodes": {"name":"fabcar"} } 2021-04-12T14:32:47.847Z - debug:  DiscoveryEndorsementHandler : _endorse - start 2021-04-12T14:32:47.847Z - debug:  DiscoveryEndorsementHandler : _endorse - starting discovery endorsement plan 2021-04-12T14:32:47.847Z - debug:  DiscoveryEndorsementHandler : _create_map - start for required 2021-04-12T14:32:47.847Z - debug:  DiscoveryEndorsementHandler : _create_map - start for preferred 2021-04-12T14:32:47.847Z - debug:  DiscoveryEndorsementHandler : _create_map - start for ignored 2021-04-12T14:32:47.847Z - debug:  DiscoveryEndorsementHandler : _create_map - start for requiredOrgs 2021-04-12T14:32:47.847Z - debug:  DiscoveryEndorsementHandler : _create_map - start for preferredOrgs 2021-04-12T14:32:47.847Z - debug:  DiscoveryEndorsementHandler : _create_map - start for ignoredOrgs 2021-04-12T14:32:47.847Z - debug:  DiscoveryEndorsementHandler : _endorse - preferred_height_gap setting is not a number 2021-04-12T14:32:47.847Z - debug:  DiscoveryEndorsementHandler : _modify_groups - start 2021-04-12T14:32:47.847Z - debug:  DiscoveryEndorsementHandler : _modify_groups - required:{} 2021-04-12T14:32:47.847Z - debug:  DiscoveryEndorsementHandler : _modify_groups - preferred:{} 2021-04-12T14:32:47.847Z - debug:  DiscoveryEndorsementHandler : _modify_groups - ignored:{} 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _modify_groups - required_orgs:{} 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _modify_groups - preferred_orgs:{} 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _modify_groups - ignored_orgs:{} 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _modify_groups - sort: default 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _modify_groups - endorsement_plan:\{"chaincode":"fabcar","groups":{"G0":{"peers": {"mspid":"Org1MSP","endpoint":"3.15.206.177:7051","ledger_height":{"low":5,"high":0,"unsigned":true},"chaincodes": \{"name":"fabcar","version":"1.0"} ,"name":"3.15.206.177:7051"} },"G1":\{"peers": {"mspid":"Org2MSP","endpoint":"3.15.206.177:9051","ledger_height":{"low":5,"high":0,"unsigned":true},"chaincodes": \{"name":"fabcar","version":"1.0"} ,"name":"3.15.206.177:9051"} }},"layouts": \{"G0":1,"G1":1} ,"plan_id":"\{\"chaincodes\": {\"name\":\"fabcar\"} }","endorsements":{}} 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _modify_groups starting - group: G0 - size: 1 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _removePeers - start size:1 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _removePeers - not found in ignored list - peer:3.15.206.177:7051 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _removePeers - keeping peer:3.15.206.177:7051 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _removePeers - end size:1 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _modify_groups removed - group: G0 - size: 1 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _sortPeerList - start - sort:default - size:1 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _modify_groups sorted - group: G0 - size: 1 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _splitList - start size:1 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _splitList - peer 3.15.206.177:7051 not found on preferred org list 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _splitList - not checking the preferred height gap 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _splitList - end - priority:0 - non_priority:1 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _modify_groups reordered - group: G0 - size: 1 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _modify_groups starting - group: G1 - size: 1 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _removePeers - start size:1 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _removePeers - not found in ignored list - peer:3.15.206.177:9051 2021-04-12T14:32:47.848Z - debug:  DiscoveryEndorsementHandler : _removePeers - keeping peer:3.15.206.177:9051 2021-04-12T14:32:47.849Z - debug:  DiscoveryEndorsementHandler : _removePeers - end size:1 2021-04-12T14:32:47.849Z - debug:  DiscoveryEndorsementHandler : _modify_groups removed - group: G1 - size: 1 2021-04-12T14:32:47.849Z - debug:  DiscoveryEndorsementHandler : _sortPeerList - start - sort:default - size:1 2021-04-12T14:32:47.849Z - debug:  DiscoveryEndorsementHandler : _modify_groups sorted - group: G1 - size: 1 2021-04-12T14:32:47.849Z - debug:  DiscoveryEndorsementHandler : _splitList - start size:1 2021-04-12T14:32:47.849Z - debug:  DiscoveryEndorsementHandler : _splitList - peer 3.15.206.177:9051 not found on preferred org list 2021-04-12T14:32:47.849Z - debug:  DiscoveryEndorsementHandler : _splitList - not checking the preferred height gap 2021-04-12T14:32:47.849Z - debug:  DiscoveryEndorsementHandler : _splitList - end - priority:0 - non_priority:1 2021-04-12T14:32:47.849Z - debug:  DiscoveryEndorsementHandler : _modify_groups reordered - group: G1 - size: 1 2021-04-12T14:32:47.849Z - debug:  DiscoveryEndorsementHandler : _modify_groups - updated endorsement_plan:\{"chaincode":"fabcar","groups":{"G0":{"peers": {"mspid":"Org1MSP","endpoint":"3.15.206.177:7051","ledger_height":{"low":5,"high":0,"unsigned":false},"chaincodes": \{"name":"fabcar","version":"1.0"} ,"name":"3.15.206.177:7051"} },"G1":\{"peers": {"mspid":"Org2MSP","endpoint":"3.15.206.177:9051","ledger_height":{"low":5,"high":0,"unsigned":false},"chaincodes": \{"name":"fabcar","version":"1.0"} ,"name":"3.15.206.177:9051"} }},"layouts": \{"G0":1,"G1":1} ,"plan_id":"\{\"chaincodes\": {\"name\":\"fabcar\"} }","endorsements":{}} 2021-04-12T14:32:47.849Z - debug:  DiscoveryEndorsementHandler : _endorse - starting layout plan 0 2021-04-12T14:32:47.849Z - debug:  DiscoveryEndorsementHandler : _endorse_layout - start 2021-04-12T14:32:47.849Z - debug:  DiscoveryEndorsementHandler : _build_endorse_group_member >> G0:0 - start 2021-04-12T14:32:47.850Z - debug:  DiscoveryEndorsementHandler : _build_endorse_group_member >> G0:0 - send endorsement to 3.15.206.177:7051 2021-04-12T14:32:47.850Z - debug:  Remote.js : getUrl::grpcs://3.15.206.177:7051 2021-04-12T14:32:47.850Z - debug:  Peer.js : sendProposal - Start ----3.15.206.177:7051 grpcs://3.15.206.177:7051 2021-04-12T14:32:47.850Z - debug:  DiscoveryEndorsementHandler : _build_endorse_group_member >> G1:1 - start 2021-04-12T14:32:47.850Z - debug:  DiscoveryEndorsementHandler : _build_endorse_group_member >> G1:1 - send endorsement to 3.15.206.177:9051 2021-04-12T14:32:47.850Z - debug:  Remote.js : getUrl::grpcs://3.15.206.177:9051 2021-04-12T14:32:47.850Z - debug:  Peer.js : sendProposal - Start ----3.15.206.177:9051 grpcs://3.15.206.177:9051 2021-04-12T14:32:48.362Z - debug:  Peer.js : sendProposal - Received proposal response from: grpcs://3.15.206.177:9051 status: Error: 14 UNAVAILABLE: failed to connect to all addresses at Object.exports.createStatusError (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/common.js:91:15) at Object.onReceiveStatus (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/client_interceptors.js:1209:28) at InterceptingListener._callNext (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/client_interceptors.js:568:42) at InterceptingListener.onReceiveStatus (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/client_interceptors.js:618:8) at callback (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/client_interceptors.js:847:24) { code: 14, metadata:  Metadata , details: 'failed to connect to all addresses' } 2021-04-12T14:32:48.362Z - warn:  DiscoveryEndorsementHandler : _build_endorse_group_member >> G1:1 - endorsement failed - Error: 14 UNAVAILABLE: failed to connect to all addresses 2021-04-12T14:32:48.362Z - debug:  DiscoveryEndorsementHandler : _build_endorse_group_member >> G1:1 - not able to get a completed endorsement 2021-04-12T14:32:48.363Z - debug:  Peer.js : sendProposal - Received proposal response from: grpcs://3.15.206.177:7051 status: Error: 14 UNAVAILABLE: failed to connect to all addresses at Object.exports.createStatusError (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/common.js:91:15) at Object.onReceiveStatus (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/client_interceptors.js:1209:28) at InterceptingListener._callNext (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/client_interceptors.js:568:42) at InterceptingListener.onReceiveStatus (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/client_interceptors.js:618:8) at callback (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/client_interceptors.js:847:24) { code: 14, metadata:  Metadata , details: 'failed to connect to all addresses' } 2021-04-12T14:32:48.369Z - warn:  DiscoveryEndorsementHandler : _build_endorse_group_member >> G0:0 - endorsement failed - Error: 14 UNAVAILABLE: failed to connect to all addresses 2021-04-12T14:32:48.369Z - debug:  DiscoveryEndorsementHandler : _build_endorse_group_member >> G0:0 - not able to get a completed endorsement 2021-04-12T14:32:48.370Z - debug:  DiscoveryEndorsementHandler : _execute_endorsements - endorsement failed: Error: 14 UNAVAILABLE: failed to connect to all addresses at Object.exports.createStatusError (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/common.js:91:15) at Object.onReceiveStatus (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/client_interceptors.js:1209:28) at InterceptingListener._callNext (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/client_interceptors.js:568:42) at InterceptingListener.onReceiveStatus (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/client_interceptors.js:618:8) at callback (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/client_interceptors.js:847:24) { code: 14, metadata:  Metadata , details: 'failed to connect to all addresses' } 2021-04-12T14:32:48.372Z - debug:  DiscoveryEndorsementHandler : _execute_endorsements - endorsement failed: Error: 14 UNAVAILABLE: failed to connect to all addresses at Object.exports.createStatusError (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/common.js:91:15) at Object.onReceiveStatus (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/client_interceptors.js:1209:28) at InterceptingListener._callNext (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/client_interceptors.js:568:42) at InterceptingListener.onReceiveStatus (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/client_interceptors.js:618:8) at callback (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/grpc/src/client_interceptors.js:847:24) { code: 14, metadata:  Metadata , details: 'failed to connect to all addresses' } 2021-04-12T14:32:48.372Z - debug:  DiscoveryEndorsementHandler : _endorse - layout plan 0 did not complete successfully, try another layout plan 2021-04-12T14:32:48.373Z - error:  DiscoveryEndorsementHandler : _endorse - endorsement failed::Error: Endorsement has failed at DiscoveryEndorsementHandler._endorse (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/fabric-client/lib/impl/DiscoveryEndorsementHandler.js:188:19) at processTicksAndRejections (internal/process/task_queues.js:97:5) at async Channel.sendTransactionProposal (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/fabric-client/lib/Channel.js:2835:22) at async Transaction.submit (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/node_modules/fabric-network/lib/transaction.js:185:19) at async main (/Users/ykh2k/github/fabric-init-1.4.9/fabric-samples/fabcar/javascript/javascript/invoke.js:41:9) Failed to submit transaction: Error: Endorsement has failed  I also set up in my docker-compose-base.yaml file all vars  - CORE_PEER_GOSSIP_EXTERNALENDPOINT  -> 3.15.206.177:10051 (appropriate port)  ></body> </Action>
