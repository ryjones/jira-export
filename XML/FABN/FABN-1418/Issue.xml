<Issue id="43308" key="FABN-1418" number="1418" project="10604" reporter="vijaypunugubati" assignee="heatherp" creator="vijaypunugubati" type="10004" summary="fabric-merge-end-2-end job: integration/fabric-ca-services-tests fail with missing Authority Key Identifier in Parsed certificate to revoke" priority="2" resolution="10000" status="6" created="2019-11-13 16:22:06.0" updated="2019-11-21 16:24:18.0" resolutiondate="2019-11-21 16:24:18.0" votes="0" watches="3" workflowId="56416"> <description><! CDATA fabric-merge-end-2-end job: integration/fabric-ca-services-tests fail with missing Authority Key Identifier in Parsed certificate to revoke.  *Branch:*Â release-1.4  *Platform:* x86_64  *Error Snippet:* {code:java} /00:30:26.911 not ok 89 Subject should be /CN=admin 00m 00m 2m 38;5;66m 00:30:26.912   --- 00m 00:30:26.912     operator: equal 00:30:26.912     expected: 'admin' 00:30:26.912     actual:   undefined 00:30:26.912     at: caService.enroll.then (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/fabric-ca-services-tests.js:83:6) 00:30:26.912     stack: |- 00:30:26.912       Error: Subject should be /CN=admin 00:30:26.913           at Test.assert  as _assert  (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:225:54) 00:30:26.913           at Test.bound  as _assert  (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:77:32) 00:30:26.913           at Test.equal (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:385:10) 00:30:26.913           at Test.bound  as equal  (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:77:32) 00:30:26.913           at caService.enroll.then (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/fabric-ca-services-tests.js:83:6) 00:30:26.913           at <anonymous> 00:30:26.913           at process._tickCallback (internal/process/next_tick.js:188:7) 00m 2m 38;5;66m 00:30:26.914   ... 00m 00m 1m 38;5;2m 00:30:26.916 ok 90 Successfully imported public key from the resulting enrollment certificate 00m 00m 1m 38;5;2m 00:30:26.916 ok/ code placeholder {code} {code:java} /00:30:35.508 not ok 102 Parsed certificate does not contain Authority Key Identifier needed for revoke(): {"exports":{"version":2,"subject":{"organizationalUnitName":"department1","commonName":"testUserY"},"issuer":{"countryName":"US","stateOrProvinceName":"California","localityName":"San Francisco","organizationName":"org1.example.com","commonName":"ca.org1.example.com"},"serial":"47B0D619C8D97FDB2F119D23CDE6974F1FD38D50","notBefore":"2019-11-13T15:56:00.000Z","notAfter":"2020-11-12T16:01:00.000Z","subjectHash":"af5b6f1a","signatureAlgorithm":"ecdsa-with-SHA256","fingerPrint":"72:11:24:B0:9A:59:45:C9:D3:D9:16:3A:73:3F:E4:09:29:02:A2:64","publicKey":{"algorithm":"id-ecPublicKey"},"altNames":  ,"extensions":{"X509v3 Key Usage":"Digital Signature","X509v3 Basic Constraints":"CA:FALSE","X509v3 Subject Key Identifier":"5A:53:04:78:C8:6B:43:38:CD:A8:21:78:18:43:82:F0:81:16:AA:DE","X509v3 Authority Key Identifier":"keyid:91:6B:AF:F8:EF:1B:6B:30:18:20:0A:B3:A2:5B:9D:5F:EF:8D:E3:BC:BF:E0:92:0E:B8:A9:40:73:86:8D:B3:78","1.2.3.4.5.6.7.8.1":"{\"attrs\":{\"hf.Affiliation\":\"org2.department1\",\"hf.EnrollmentID\":\"testUserY\",\"hf.Type\":\"client\"}}"}},"extensions":{}} 00m 00m 2m 38;5;66m 00:30:35.508   --- 00m 00:30:35.508     operator: fail 00:30:35.508     at: caService.enroll.then.then.then.then.then.then.then.then.then.then.then.then (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/fabric-ca-services-tests.js:171:7) 00:30:35.508     stack: |- 00:30:35.509       Error: Parsed certificate does not contain Authority Key Identifier needed for revoke(): {"exports":{"version":2,"subject":{"organizationalUnitName":"department1","commonName":"testUserY"},"issuer":{"countryName":"US","stateOrProvinceName":"California","localityName":"San Francisco","organizationName":"org1.example.com","commonName":"ca.org1.example.com"},"serial":"47B0D619C8D97FDB2F119D23CDE6974F1FD38D50","notBefore":"2019-11-13T15:56:00.000Z","notAfter":"2020-11-12T16:01:00.000Z","subjectHash":"af5b6f1a","signatureAlgorithm":"ecdsa-with-SHA256","fingerPrint":"72:11:24:B0:9A:59:45:C9:D3:D9:16:3A:73:3F:E4:09:29:02:A2:64","publicKey":{"algorithm":"id-ecPublicKey"},"altNames":  ,"extensions":{"X509v3 Key Usage":"Digital Signature","X509v3 Basic Constraints":"CA:FALSE","X509v3 Subject Key Identifier":"5A:53:04:78:C8:6B:43:38:CD:A8:21:78:18:43:82:F0:81:16:AA:DE","X509v3 Authority Key Identifier":"keyid:91:6B:AF:F8:EF:1B:6B:30:18:20:0A:B3:A2:5B:9D:5F:EF:8D:E3:BC:BF:E0:92:0E:B8:A9:40:73:86:8D:B3:78","1.2.3.4.5.6.7.8.1":"{\"attrs\":{\"hf.Affiliation\":\"org2.department1\",\"hf.EnrollmentID\":\"testUserY\",\"hf.Type\":\"client\"}}"}},"extensions":{}} 00:30:35.509           at Test.assert  as _assert  (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:225:54) 00:30:35.509           at Test.bound  as _assert  (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:77:32) 00:30:35.509           at Test.fail (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:318:10) 00:30:35.509           at Test.bound  as fail  (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:77:32) 00:30:35.509           at caService.enroll.then.then.then.then.then.then.then.then.then.then.then.then (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/fabric-ca-services-tests.js:171:7) 00:30:35.510           at <anonymous> 00:30:35.510           at process._tickCallback (internal/process/next_tick.js:188:7) 00m 2m 38;5;66m 00:30:35.510   ... 00m 00m 1m 38;5;196m 00:30:35.510 not ok 103 TypeError: Cannot read property 'split' of undefined at caService.enroll.then.then.then.then.then.then.then.then.then.then.then.then (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/fabric-ca-services-tests.js:176:26) at <anonymous> at process._tickCallback (internal/process/next_tick.js:188:7) 00m 00m 2m 38;5;66m 00:30:35.510   --- 00m/ code placeholder {code} Â   *Build Logs:*Â   ></description> </Issue>
