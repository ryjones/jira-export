<Action id="28257" issue="18843" author="jimthematrix" type="comment" body=" ~latitiah  I&apos;m changing the target to fabric-peer because the error messages come directly from the peer. the SDK is simply displaying what the peer returns" created="2017-07-12 16:38:20.0" updateauthor="jimthematrix" updated="2017-07-12 16:38:20.0"/>
<Action id="28851" issue="18843" author="blw" type="comment" body=" ~latitiah  I don&apos;t see a &quot;test&quot; chaincode in github.com/hyperledger/fabric/examples/chaincode/go/. Has the name been changed, or is there another chaincode that can be used to repro?" created="2017-07-23 00:16:36.0" updateauthor="blw" updated="2017-07-23 00:16:36.0"/>
<Action id="28921" issue="18843" author="latitiah" type="comment" body="I believe you can try the same test using the &quot;hyperledger/fabric/examples/chaincode/go/map&quot; chaincode." created="2017-07-24 19:01:18.0" updateauthor="latitiah" updated="2017-07-24 19:01:18.0"/>
<Action id="29361" issue="18843" author="blw" type="comment" body=" ~latitiah  Could you share the SDK client code you used to invoke large message payloads?" created="2017-08-02 16:37:27.0" updateauthor="blw" updated="2017-08-02 16:37:27.0"/>
<Action id="29565" issue="18843" author="latitiah" type="comment" created="2017-08-08 19:15:54.0" updateauthor="latitiah" updated="2017-08-08 19:15:54.0"> <body><! CDATA Hi  ~blw  Here is a link to the setup that I used when I ran into this issue. https://gerrit.hyperledger.org/r/12261 Thanks!  ></body> </Action>
<Action id="30631" issue="18843" author="muralisr" type="comment" body=" ~blw  any update on the recreate please ?" created="2017-09-07 18:03:45.0" updateauthor="muralisr" updated="2017-09-07 18:03:45.0"/>
<Action id="30853" issue="18843" author="blw" type="comment" body="No updates right now, still trying to reproduce." created="2017-09-13 16:49:34.0" updateauthor="blw" updated="2017-09-13 16:49:34.0"/>
<Action id="33249" issue="18843" author="jeffgarratt" type="comment" body="Hey  ~blw , is this still an issue or can we close this? " created="2017-10-26 19:12:01.0" updateauthor="jeffgarratt" updated="2017-10-26 19:12:01.0"/>
<Action id="33267" issue="18843" author="latitiah" type="comment" created="2017-10-26 20:26:05.0" updateauthor="latitiah" updated="2017-10-26 20:27:48.0"> <body><! CDATA There is a CR that contains a behave test that reproduces this problem. (Please see the readme in the fabric-test repo for setting up your environment for executing this test.) https://gerrit.hyperledger.org/r/#/c/14157/  {code} behave -n "FAB-3851: Message Payloads More than 1MB" -k {code}  I'm going to abandon the CR which contains the previous test.  ></body> </Action>
<Action id="33904" issue="18843" author="jeffgarratt" type="comment" created="2017-11-01 15:12:00.0" updateauthor="jeffgarratt" updated="2017-11-01 15:12:00.0"> <body><! CDATA  ~latitiah  ~blw  ~muralisr   This appears to be a limit from the node GRPC client lib, not the peer.  The peer is defaulted per https://github.com/hyperledger/fabric/blob/master/core/comm/config.go#L23-L24  Going to reassign to fabric-sdk-node.  ></body> </Action>
<Action id="34217" issue="18843" author="muralisr" type="comment" body=" ~jeffgarratt  One thing (should have caught this earlier)... I think the limits were changed post 1.0.0 (more recently, basically). Worth checking if the problem occurs in master ? Or has that been done already ?" created="2017-11-01 21:08:50.0" updateauthor="muralisr" updated="2017-11-01 21:09:29.0"/>
<Action id="34464" issue="18843" author="harrisob@us.ibm.com" type="comment" created="2017-11-08 17:12:30.0" updateauthor="harrisob@us.ibm.com" updated="2017-11-08 17:12:30.0"> <body><! CDATA Setting the NodeSDK default grpc send and receive sizes to unlimited, thereby letting the size be controlled by the fabric size.   ~muralisr   ~jeffgarratt  Do you think we should be setting a limit on the send from the NodeSDK size to somewhat protect the fabric network.   ></body> </Action>
<Action id="34465" issue="18843" author="harrisob@us.ibm.com" type="comment" body="https://gerrit.hyperledger.org/r/#/c/15309/" created="2017-11-08 17:21:21.0" updateauthor="harrisob@us.ibm.com" updated="2017-11-08 17:21:21.0"/>
<Action id="34600" issue="18843" author="scottz" type="comment" created="2017-11-13 23:35:40.0" updateauthor="scottz" updated="2017-11-13 23:35:40.0"> <body><! CDATA The test still fails in the same place. Notice the returned length (4195328) is double+1024.  ```  ubuntu@hyperledger-devenv:a454d61:/opt/gopath/src/github.com/hyperledger/fabric-test/feature$ behave -n FAB-3851  Feature: Orderer Service # orderer.feature:7 As a user I want to be able to have my transactions ordered correctly @skip @daily Scenario Outline: FAB-3851: Message Payloads More than 1MB, for solo orderer -- @1.1   ...  When a user invokes on the chaincode named "mycc" with random args  "put","i","\{random_value}"  of length 2097152 And I wait "7" seconds   And a user queries on the chaincode named "mycc" with args  "get","i"   Then a user receives a response containing a value of length 2097152 Assertion Failed: Expected response to be of length 2097152; received length 62; Result: Error: Received message larger than max (4195328 vs. 4194304)  ```  And so I tried again with some other lengths, and got these results:  if I use length 2096000, the test passes  if I use length 2097150, the test fails with the following error message (and the returned length 4195320 is double+1016):  `Assertion Failed: Expected response to be of length 2097150; received length 62; Result: Error: Received message larger than max (4195320 vs. 4194304)`  ></body> </Action>
<Action id="35400" issue="18843" author="mastersingh24" type="comment" body="https://gerrit.hyperledger.org/r/15499" created="2017-11-24 20:07:18.0" updateauthor="mastersingh24" updated="2017-11-24 20:07:18.0"/>
<Action id="38692" issue="18843" author="latitiah" type="comment" created="2018-01-16 16:21:39.0" updateauthor="latitiah" updated="2018-01-16 16:21:39.0"> <body><! CDATA Verified as passing. This test was added back into the CI test suite with the CR: https://gerrit.hyperledger.org/r/#/c/16853/   ></body> </Action>
