<Issue id="44231" key="FABN-1479" number="1479" project="10604" reporter="harrisob@us.ibm.com" creator="harrisob@us.ibm.com" type="10004" summary="Using an HSM fails to initialize the crypto suite" priority="3" resolution="10000" status="6" created="2020-02-03 17:13:27.0" updated="2020-02-05 14:26:51.0" resolutiondate="2020-02-05 14:26:51.0" votes="0" watches="1" workflowId="58132" archived="N"> <description><! CDATA Seeing these errors: # ****** Network End-to-end flow: import identity into wallet using hsm *****  not ok 1 TypeError: Parameter 1 MUST be Buffer --- operator: error expected: |- undefined actual: |-  TypeError: Parameter 1 MUST be Buffer  at: bound (/anodesdk/jan29-2020/fabric-sdk-node/node_modules/tape-promise/node_modules/onetime/index.js:30:12) stack: |- TypeError: Parameter 1 MUST be Buffer at CryptoSuite_PKCS11._pkcs11OpenSession (/anodesdk/jan29-2020/fabric-sdk-node/node_modules/fabric-client/node_modules/fabric-common/lib/impl/bccsp_pkcs11.js:334:12) at new CryptoSuite_PKCS11 (/anodesdk/jan29-2020/fabric-sdk-node/node_modules/fabric-client/node_modules/fabric-common/lib/impl/bccsp_pkcs11.js:230:8) at Object.module.exports.newCryptoSuite (/anodesdk/jan29-2020/fabric-sdk-node/node_modules/fabric-client/node_modules/fabric-common/lib/Utils.js:82:9) at Function.newCryptoSuite (/anodesdk/jan29-2020/fabric-sdk-node/node_modules/fabric-client/node_modules/fabric-common/lib/BaseClient.js:39:19) at IDManager.initialize (/anodesdk/jan29-2020/fabric-sdk-node/test/integration/network-e2e/idmanager.js:22:33) at process._tickCallback (internal/process/next_tick.js:68:7) at Function.Module.runMain (internal/modules/cjs/loader.js:834:11) at startup (internal/bootstrap/node.js:283:19) at bootstrapNodeJSCore (internal/bootstrap/node.js:623:3) ...  (node:46673) UnhandledPromiseRejectionWarning: Error: CKR_TOKEN_NOT_RECOGNIZED:225  at Error (native) C_OpenSession:329 { at CryptoSuite_PKCS11._pkcs11OpenSession (/anodesdk/jan29-2020/fabric-sdk-node/node_modules/fabric-client/node_modules/fabric-common/lib/impl/bccsp_pkcs11.js:316:33) at new CryptoSuite_PKCS11 (/anodesdk/jan29-2020/fabric-sdk-node/node_modules/fabric-client/node_modules/fabric-common/lib/impl/bccsp_pkcs11.js:230:8)  at Object.module.exports.newCryptoSuite (/anodesdk/jan29-2020/fabric-sdk-node/node_modules/fabric-client/node_modules/fabric-common/lib/Utils.js:82:9) at Function.newCryptoSuite (/anodesdk/jan29-2020/fabric-sdk-node/node_modules/fabric-client/node_modules/fabric-common/lib/BaseClient.js:39:19)  at IDManager.initialize (/anodesdk/jan29-2020/fabric-sdk-node/test/integration/network-e2e/idmanager.js:22:33) at process._tickCallback (internal/process/next_tick.js:68:7)  at Function.Module.runMain (internal/modules/cjs/loader.js:834:11) at startup (internal/bootstrap/node.js:283:19)  at bootstrapNodeJSCore (internal/bootstrap/node.js:623:3)  Â   ></description> </Issue>
