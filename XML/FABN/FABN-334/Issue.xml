<Issue id="14945" key="FABN-334" number="334" project="10604" reporter="jjjjibm" assignee="jimthematrix" creator="jjjjibm" type="10004" summary=" node-SDK   cloudant-fabricca-tests.js  not ok 1 AssertionError: url is not valid" priority="2" resolution="10000" status="6" created="2017-02-20 18:35:09.0" updated="2018-07-19 00:53:41.0" resolutiondate="2017-03-08 05:10:44.0" votes="0" watches="2" workflowId="34065"> <environment><! CDATA ├─┬ cloudant@1.7.1 │ ├── cloudant-nano@6.4.1  fabric-sdk-node: commit 084d3b591532881d7cb3c4641f09a4d53609ce00 fabric commit e829d2ecfd9a2bfc378a08a9364215f241a0a09b fabric-ca : commit 37b897b3cd723568b38026acdf85a1d168a4cbf1  Vlaunch VM is running Ubuntu    ></environment> <description><! CDATA Running fabric-sdk-node with the levels indicated in Environment, the test fails:  # Use FabricCAServices wih a Cloudant CouchDB KeyValueStore {color:#59afe1}self = { getCloudantClient:  Function , destroy:  Function , _url: { config: { url: 'https://1421acc7-6faa-491a-8e10-951e2e190684-bluemix:7179ef7a72602189243deeabe207889bde1c2fada173ae1022b5592e5a79dacc@1421acc7-6faa-491a-8e10-951e2e190684-bluemix.cloudant.com', request: null, requestDefaults: { headers: { 'User-agent': 'nodejs-cloudant/1.7.1 (Node.js v6.3.1)' }, gzip: true, agent: Agent { domain: null, _events: { free:  Function  }, _eventsCount: 1, _maxListeners: undefined, defaultPort: 443, protocol: 'https:', options: { keepAlive: true, path: null }, requests: {}, sockets: {}, freeSockets: {}, keepAliveMsecs: 1000, keepAlive: true, maxSockets: Infinity, maxFreeSockets: 256, maxCachedSessions: 100, _sessionCache: { map: {}, list:    } } }, cookie: undefined, log: {  Function: disabled  enabled: false, namespace: 'nano' } }, db: { create:  Function: createDb , get:  Function: getDb , destroy:  Function: destroyDb , list:  Function: listDbs , use:  Function , scope:  Function: docModule , compact:  Function: compactDb , replicate:  Function: replicateDb , changes:  Function: changesDb , follow:  Function: followDb , followUpdates:  Function: followUpdates , updates:  Function: updates  }, use:  Function , scope:  Function: docModule , request:  Function: relax , relax:  Function: relax , dinosaur:  Function: relax , auth:  Function: auth , session:  Function: session , updates:  Function: updates , followUpdates:  Function: followUpdates , uuids:  Function: uuids , _use:  Function: docModule , ping:  Function: ping , get_cors:  Function , set_cors:  Function , set_permissions:  Function , generate_api_key:  Function , get_virtual_hosts:  Function , add_virtual_host:  Function , delete_virtual_host:  Function  }, _name: 'member_db' } {color}not ok 1 AssertionError: url is not valid --- operator: error expected: |- undefined actual: |- { actual: false, expected: true, generatedMessage: false, message: 'url is not valid', name: 'AssertionError', operator: '==' } at: process.onetime (/home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/onetime/index.js:22:12) stack: |- AssertionError: url is not valid at dbScope (/home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/nano/lib/nano.js:35:10) at /home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/test/integration/couchdb-util.js:39:18 at Object.module.exports.destroy (/home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/test/integration/couchdb-util.js:37:9) at /home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/test/integration/cloudant-fabricca-tests.js:52:14 at Test.<anonymous> (/home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape-promise/index.es5.js:21:13) at Test.bound  as _cb  (/home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:66:32) at Test.run (/home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:85:10) at Test.bound  as run  (/home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:66:32) at Immediate.next (/home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/results.js:71:15) at runCallback (timers.js:570:20) ...  1..1 # tests 1 # pass  0 # fail  1 The text in {color:#59afe1}blue font {color}is a trace I added to echo 'self' on entry to the failing function.  The point of failure is in couchdb-util.js, method destroy().   See attachment Node inspector  point Of failure.png for a display of local variables when the assertion fails.      ></description> </Issue>
