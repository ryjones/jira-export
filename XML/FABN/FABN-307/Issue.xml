<Issue id="12621" key="FABN-307" number="307" project="10604" reporter="ratnakar" assignee="angrbrd" creator="ratnakar" type="10004" summary="node unit tests fails on V0.6 branch" priority="1" resolution="10000" status="6" created="2016-09-08 16:46:25.0" updated="2018-07-19 00:53:35.0" resolutiondate="2016-09-20 19:32:04.0" votes="0" watches="3" workflowId="34038"> <description><! CDATA 1. Downloaded the code from gerrit   {code:java} git clone http://gerrit.hyperledger.org/r/fabric {code}  2. switched v0.6 branch  {code:java} git checkout v0.6 {code}  3. vagrant up && vagrant ssh 4. *make all* passes (Unit and behave tests are passing) 5. *make node-sdk-unit-tests* fails with below error (logs: node_unit_test_failures.txt)  {code:java}  npm WARN locking Error: EACCES, open '/home/vagrant/.npm/_locks/debug-b66ad9a0837e9304.lock' npm WARN locking     at Error (native) npm WARN locking  /home/vagrant/.npm/_locks/debug-b66ad9a0837e9304.lock failed {  Error: EACCES, open '/home/vagrant/.npm/_locks/debug-b66ad9a0837e9304.lock'  npm WARN locking   errno: -13, npm WARN locking   code: 'EACCES', npm WARN locking   path: '/home/vagrant/.npm/_locks/debug-b66ad9a0837e9304.lock' } {code}   6. Tried with sudo *sudo make node-sdk-unit-tests* and fails with below error (logs: node_unit_tests_with_sudo.txt )   {code:java} tsc make 1 : tsc: Command not found make 1 : ***  hfc  Error 127 make 1 : Leaving directory `/opt/gopath/src/github.com/hyperledger/fabric/sdk/node' make: ***  node-sdk-unit-tests  Error 2  {code}   After cherry picking the patch from https://gerrit.hyperledger.org/r/#/c/949/1/sdk/node/Makefile, I see some of the tests are passing. However I see *chain-tests* are still failing (see logs : Failure_After_patch.txt)  {code:java}  BEGIN running chain-tests ... /opt/gopath/src/github.com/chaincode_example02 already exists $DEPLOY_MODE: net TAP version 13 # Set Invalid security level and hash algorithm. not ok 1 Setting an invalid security level should fail. Allowed security levels are '256' and '384'. --- operator: fail at: Test.<anonymous> (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/test/unit/chain-tests.js:143:11) ... ERROR running chain-tests! finished chaincode_example02 END running chain-tests  {code}   ></description> </Issue>
