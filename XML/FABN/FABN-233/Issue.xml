<Issue id="29072" key="FABN-233" number="233" project="10604" reporter="jyg" assignee="zhaochy" creator="jyg" type="10004" summary=" Node-SDK  Loss of custom event" priority="3" resolution="10000" status="6" created="2018-04-01 19:07:52.0" updated="2018-07-19 00:53:19.0" resolutiondate="2018-04-04 01:12:36.0" votes="0" watches="2" workflowId="33964"> <environment><! CDATA Hyperledger Fabric 1.1  Fabric node-sdk 1.1  ></environment> <description><! CDATA I happened to lose some custom events (SetEvent) when running a multi-user concurrency test. As the blocklistener was catching the event, I investigated the issue in EventHub.js.  In _{color:#59afe1}processChainCodeOnEvents(block){color} , I modified the following piece of code:   if (!cbtable) \{                         return;                     }   cbtable.forEach(function(cbe) \{           if (cbe.eventNameFilter.test(ccEvent.event_name)) \{                          cbe.onEvent(ccEvent);                   }      });  The return occured and exited the block and consequently, the rest of events could not be processed.   That is why I could not get the events in my code.     ccEvent.chaincode_id was apparently undefined when this happens.  I replaced the code by the following to make it work:  if (cbtable) \{           cbtable.forEach(function(cbe) \{             if (cbe.eventNameFilter.test(ccEvent.event_name)) \{               cbe.onEvent(ccEvent);             }      }); }  not sure if this is correct behavior.  But at least, the rest of events in the block can be properly processed.    Would appreciate expert point of view on this.        ></description> </Issue>
