<Action id="40867" issue="28028" author="denyeart" type="comment" body=" ~harrisob@us.ibm.com  What&apos;s your opinion?" created="2018-02-26 20:17:11.0" updateauthor="denyeart" updated="2018-02-26 20:17:11.0"/>
<Action id="40872" issue="28028" author="harrisob@us.ibm.com" type="comment" body="We are using a much newer version of Node and NPM ... 6.9.5 / 3.10.10 or 8.9.4 / 5.6.0" created="2018-02-26 21:04:37.0" updateauthor="harrisob@us.ibm.com" updated="2018-02-26 21:04:37.0"/>
<Action id="40874" issue="28028" author="denyeart" type="comment" body="Ok, closing." created="2018-02-26 21:15:55.0" updateauthor="denyeart" updated="2018-02-26 21:15:55.0"/>
<Action id="41100" issue="28028" author="mariuslp" type="comment" created="2018-03-01 18:57:24.0" updateauthor="mariuslp" updated="2018-03-01 18:57:24.0"> <body><! CDATA I have exactly the same problem.  I started with node 8.9.4/NPM 5.6.0, then downgraded to Node 6.13/NPM 3.10.10 to match the doc requirements ( http://hyperledger-fabric.readthedocs.io/en/release/prereqs.html#node-js-runtime-and-npm ), but I was not more successful. Manually downloading pkcs11js in `node_modules/` did not solve the issue either.  I'm on Windows 10, using Docker tools 18.02.0-ce. Here's the error message when using NPM 8.9 {noformat} gyp ERR! build error gyp ERR! stack Error: `C:\Program Files (x86)\MSBuild\14.0\bin\msbuild.exe` failed with exit code: 1 gyp ERR! stack     at ChildProcess.onExit (C:\Users\Marius\AppData\Roaming\npm\node_modules\npm\node_modules\node-gyp\lib\build.js:258:23) gyp ERR! stack     at emitTwo (events.js:126:13) gyp ERR! stack     at ChildProcess.emit (events.js:214:7) gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:198:12) gyp ERR! System Windows_NT 10.0.16299 gyp ERR! command "C:\\Program Files\\nodejs\\node.exe" "C:\\Users\\Marius\\AppData\\Roaming\\npm\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js" "rebuild" gyp ERR! cwd C:\Users\Marius\fabric-samples\fabcar\node_modules\pkcs11js gyp ERR! node -v v8.9.4 gyp ERR! node-gyp -v v3.6.2 gyp ERR! not ok npm WARN fabcar@1.0.0 No repository field.  npm ERR! code ELIFECYCLE npm ERR! errno 1 npm ERR! pkcs11js@1.0.13 install: `node-gyp rebuild` npm ERR! Exit status 1 npm ERR! npm ERR! Failed at the pkcs11js@1.0.13 install script. npm ERR! This is probably not a problem with npm. There is likely additional logging output above.  npm ERR! A complete log of this run can be found in: npm ERR!     C:\Users\Marius\AppData\Roaming\npm-cache\_logs\2018-03-01T18_44_38_344Z-debug.log  {noformat} During the install, error messages where saying that files where missing all looking like: {noformat} C:\Program Files (x86)\Windows Kits\10\Include\10.0.10240.0\ucrt\corecrt.h(10): fa tal error C1083: Impossible d'ouvrir le fichier include : 'vcruntime.h' : No such file or directory (..\src\const.cpp)  C:\Users\Marius\fabric-samples\fabcar\node_m odules\pkcs11js\build\pkcs11.vcxproj  {noformat} I can't reproduce exactly the solution provided in the first post given I'm on windows, but the first part did not solve it for me.  ></body> </Action>
<Action id="41117" issue="28028" author="thejibz" type="comment" created="2018-03-01 21:20:03.0" updateauthor="thejibz" updated="2018-03-01 21:20:48.0"> <body><! CDATA Marius, I think that in my case the most important action was the "yum install gcc-c++ " in order to compile the pkcs11 module, thanks to the gcc compiler. Your case seems very similar regarding the issue of compiling a C+ module.  In your place, I would double check my install of C++ compiler for Windows (Visual Studio C++ ?). If it still fail, maybe going as far as to install a tool like  mobaXterm|https://mobaxterm.mobatek.net/  and installing the  gcc plugin|https://mobaxterm.mobatek.net/plugins.html  ! (I like mobaxterm very much and there is a free version).  ></body> </Action>
<Action id="41175" issue="28028" author="mariuslp" type="comment" created="2018-03-04 23:13:54.0" updateauthor="mariuslp" updated="2018-03-04 23:15:58.0"> <body><! CDATA Thanks for you help Jean-Baptiste.  I think my compiler is up to date and working well (C/C++ version 19.12.25835).  However, I noticed that the build failed when I was using {{npm install}}, but when I clone {{pkcs11js}} in {{node_modules}}, remove the {{.git/}} subfolder and launch {{node-gyp configure}} (or rebuild) in pkcs11js folder, everything works fine. I have no problem when using yarn in place of npm also. So it's more of a node bug?  Now however I can't run {{node enrollAdmin.js}} for some reason ({{Error: Calling enrollment endpoint failed with error  Error: connect ECONNREFUSED 127.0.0.1:7054 }}), so I'm not sure everything is actually settled for this problem... Plus, I sometimes get the output {{npm WARN fabcar@1.0.0 No repository field.}} when running npm install. Don't really know what this means.  I think I'll just give up and start again in a Linux VM tomorrow.  ></body> </Action>
<Action id="41245" issue="28028" author="mariuslp" type="comment" created="2018-03-06 13:12:11.0" updateauthor="mariuslp" updated="2018-03-06 13:12:51.0"> <body><! CDATA I started again on Linux, and indeed I needed (even with node8/npm5) to install a compiler ({{apt-get install g++}} being on Debian). Thanks Jean-Baptiste!  I still have no idea about what was wrong with my Windows install though, but oh well.  ></body> </Action>
<Action id="41249" issue="28028" author="thejibz" type="comment" created="2018-03-06 13:38:55.0" updateauthor="thejibz" updated="2018-03-06 13:38:55.0"> <body><! CDATA Great news ! Happy to help.  PS: In case you are french too, "il faut se serrer les coudes ;)"  ></body> </Action>
