<Action id="21272" issue="15160" author="davidkel" type="comment" created="2017-03-02 11:47:34.0" updateauthor="davidkel" updated="2017-03-02 11:48:09.0"> <body><! CDATA With the latest (downloaded today 2nd March) I get the following error if I try to define a keystore path other than ~/.hfc-key-store  {code} 2017-03-02T10:11:04.963Z ERROR   HLFConnection            :login()                   {"message":"Private key missing from key store. Can not establish the signing identity for user admin","stack":"Error: Private key missing from key store. Can not establish the signing identity for user admin\n    at cryptoPrimitives.importKey.then.then (/home/vagrant/src/fabric-sdk-node/fabric-client/lib/User.js:234:11)"}$ Error: Private key missing from key store. Can not establish the signing identity for user admin {code} The only solution is to define the keystore path to be .hfc-key-store.  ></body> </Action>
<Action id="21542" issue="15160" author="davidkel" type="comment" created="2017-03-16 17:08:06.0" updateauthor="davidkel" updated="2017-03-16 17:09:06.0"> <body><! CDATA As of 16th March, using the fabric-client and fabric-ca-client 0.2.3 I still cannot define a keystore other than .hfc-key-store. To clarify our code does the following {code} result = Client.newDefaultKeyValueStore({ path: connectOptions.keyValStore }) {code} and {code} static createCAClient(ca, keyValStore) { return new FabricCAClientImpl(ca, keyValStore); } const caClient = HLFConnectionManager.createCAClient(connectOptions.ca, { path: connectOptions.keyValStore }); {code} so I think I am setting everything up correctly, but things still fail. The error I get now is {code} 2017-03-16T15:50:11.465Z ERROR   HLFConnection            :login()                   {"message":"Invalid parameter. Must have a valid mspId.","stack":"Error: Invalid parameter. Must have a valid mspId.\n    at User.setEnrollment (/home/vagrant/src/fabric-composer/packages/composer-connector-hlfv1/node_modules/fabric-client/lib/User.js:162:10)\n    at caClient.enroll.then (/home/vagrant/src/fabric-composer/packages/composer-connector-hlfv1/lib/hlfconnection.js:156:29)\n    at process._tickCallback (internal/process/next_tick.js:103:7)"}$ {code}  If I use .hfc-key-store as my connectOptions.keyValStore then everything works fine.   ></body> </Action>
<Action id="21550" issue="15160" author="davidkel" type="comment" created="2017-03-17 08:48:04.0" updateauthor="davidkel" updated="2017-03-17 08:48:04.0"> <body><! CDATA Ahh, I see the api has changed and that if you are the actual code to enroll then you must provide an MSPid. If already enrolled then you don't. made changes for that and now it's working as required.  I've changed code to accomodate and now tests pass. Many thanks  ></body> </Action>
