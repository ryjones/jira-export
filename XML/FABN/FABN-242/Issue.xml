<Issue id="14137" key="FABN-242" number="242" project="10604" reporter="jjjjibm" creator="jjjjibm" type="10004" summary=" node-SDK  end-to-end.js not ok 1 Error: Calling enrollment endpoint failed with error  Error: Parse Error  at ClientRequest.&lt;anonymous&gt; (/home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/hfc-cop/lib/FabricCOPImpl.js:304:12) " priority="1" resolution="10000" status="6" created="2017-01-17 19:52:37.0" updated="2018-07-19 00:53:21.0" resolutiondate="2017-02-08 03:47:29.0" votes="0" watches="2" workflowId="33973"> <environment><! CDATA Vlaunch VM running Ubuntu.  The VM runs fabric, COP, and end-to-end.js.  Attaching latest.sh which creates directories and starts everything.  ></environment> <description><! CDATA Running  node end-to-end.js  after running latest.sh to clone directories and start network. This is the first test case I run.  Test 1 fails with these messages:   2017-01-17 14:13:49.216   INFO  E2E - Executing step1 info:  Client.js : Failed to load user "admin" from local key value store  2017-01-17 14:13:49.223   INFO  E2E -  crypto_ecdsa_aes : This class requires a KeyValueStore to save keys, no store was passed in, using the default store  2017-01-17 14:13:49.225   DEBUG  E2E -  crypto_ecdsa_aes : Hash algorithm: SHA2, hash output size: 256  2017-01-17 14:13:49.225   INFO  E2E -  FabricCOPImpl.js : Successfully constructed Fabric COP service client: endpoint - {"protocol":"http","hostname":"localhost","port":8888}  2017-01-17 14:13:49.295   DEBUG  E2E -  ecdsa/key.js : ECDSA curve param X: 93b3e1870099383a7050da28a34b024520cae3353c0325f9282d583662276d33  2017-01-17 14:13:49.296   DEBUG  E2E -  ecdsa/key.js : ECDSA curve param Y: 2c026141e4511682cfbf0bdbe525137741d0effa17e505d7747d29d284a97523   not ok 1 Error: Calling enrollment endpoint failed with error  Error: Parse Error  at ClientRequest.<anonymous> (/home/ibmadmin/work/src/github.com/hyperledger/fabric-sdk-node/node_modules/hfc-cop/lib/FabricCOPImpl.js:304:12) at emitOne (events.js:96:13) at ClientRequest.emit (events.js:188:7) at Socket.socketOnData (_http_client.js:366:9) at emitOne (events.js:96:13) at Socket.emit (events.js:188:7) at readableAddChunk (_stream_readable.js:176:18) at Socket.Readable.push (_stream_readable.js:134:10) at TCP.onread (net.js:543:20)   --- operator: fail at: process._tickCallback (internal/process/next_tick.js:103:7) ...  Here is line 304 of hfc-cop/lib/FabricCOPImpl.js  reject(new Error(util.format('Calling enrollment endpoint failed with error  %s ', err)));  and here is some context:  util.format('Enrollment failed with errors  %s ', JSON.stringify(enrollResponse.errors)))); }  } catch (err) { reject(new Error( util.format('Could not parse enrollment response  %s  as JSON due to error  %s ', payload, err))); } });  });  request.on('error', function (err) { reject(new Error(util.format('Calling enrollment endpoint failed with error  %s ', err))); });  request.write(JSON.stringify(enrollRequest)); request.end();  });  }  /** * Convert a PEM encoded certificate to DER format * @param {string) pem PEM encoded public or private key * @returns {string} hex Hex-encoded DER bytes * @throws Will throw an error if the conversation fails       ></description> </Issue>
