<Issue id="15572" key="FABN-304" number="304" project="10604" reporter="dshuffma" assignee="cdaughtr" creator="dshuffma" type="10004" summary="Constantly see warning - The primary peer must be on this chain&apos;s peer list " priority="3" resolution="10000" status="6" created="2017-04-04 20:45:39.0" updated="2019-10-12 07:28:07.0" resolutiondate="2017-05-27 06:01:51.0" votes="0" watches="1" workflowId="34035"> <description><! CDATA So I constantly get this message "The primary peer must be on this chain\'s peer list".  I don't think this check is right!  Here is the SDK code.  {code:javascript} setPrimaryPeer(peer) { 		if(peer) { 			for (let i = 0; i < this._peers.length; i++) { 				if (this._peers i  === peer) {               //<---- not what we want 					this._primary_peer = this._peers i ; 					return; 				} 			} 		} 		throw new Error('The primary peer must be on this chain\'s peer list'); 	} {code}  You are comparing 1 object to another... This isn't going to work out. You could change it to the peer's url and that would be enough for most things.  If we are super paranoid that the TLS settings have changed then the url check will miss that...  If this matters, you can JSON.stringify the objects and compare the strings, but order can be tricky. In practice order of the keys should be kept, but it may reshuffle in some bizarre scenario.  Therefore another idea would be to just concat all the fields that are important into 1 string and compare each string.  ie:  {code:javascript} setPrimaryPeer(peer) { 		if(peer) { 			for (let i = 0; i < this._peers.length; i++) { 				if (buildStr(this._peers i ) === buildStr(peer)) { 					this._primary_peer = this._peers i ; 					return; 				} 			} 		} 		throw new Error('The primary peer must be on this chain\'s peer list'); 	} function buildStr(obj){ return obj.getUrl() + obj.mythicalGetPemAsStr(); } {code}  I would think comparing URLs is good enough, but you guys might know better.  Currently its not a huge problem b/c it will throw the error and then default to peer 0  and that's the one I want anyway. But its in the logs. and not ideal.     ></description> </Issue>
