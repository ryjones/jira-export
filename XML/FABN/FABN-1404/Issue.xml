<Issue id="42780" key="FABN-1404" number="1404" project="10604" reporter="vijaypunugubati" assignee="heatherp" creator="vijaypunugubati" type="10004" summary="fabric-merge-end-2-end job: install chaincode fail intermittently in run-test:ts-cucumber" priority="2" resolution="10203" status="6" created="2019-10-17 00:15:28.0" updated="2019-10-24 00:31:04.0" resolutiondate="2019-10-24 00:31:04.0" votes="0" watches="3" workflowId="55860"> <description><! CDATA fabric-merge-end-2-end job: install chaincode failed in run-test:ts-cucumber with error to install chaincode using deprecated API Error.  *Branch:*Â Master  *Platform:* x86_64  *Error Snippet:* {code:java} /00:45:14.860 Using deprecated API to install chaincode with ID fabcar@2.0.0 on organization Org2 peers  peer0.org2.example.com  ... 00:45:44.923 Failed to install chaincode using deprecated API Error: Failed to send install Proposal or receive valid response when using deprecated API:  {"message":"error in simulation: failed to execute transaction 2d70b824dae0c1d99c4c133a3c0a498457dc78250c1a7b2eca622496fa00a5a0: error sending: timeout expired while executing transaction","stack":"Error: error in simulation: failed to execute transaction 2d70b824dae0c1d99c4c133a3c0a498457dc78250c1a7b2eca622496fa00a5a0: error sending: timeout expired while executing transaction\n    at self._endorserClient.processProposal (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/fabric-client/lib/Peer.js:137:36)\n    at Object.onReceiveStatus (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/client_interceptors.js:1207:9)\n    at InterceptingListener._callNext (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/client_interceptors.js:568:42)\n    at InterceptingListener.onReceiveStatus (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/client_interceptors.js:618:8)\n    at callback (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/client_interceptors.js:845:24)","status":500,"payload":{"type":"Buffer","data":  },"peer":{"url":"grpcs://localhost:8051","name":"localhost:8051","options":{"grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1,"grpc.keepalive_time_ms":120000,"grpc.http2.min_time_between_pings_ms":120000,"grpc.keepalive_timeout_ms":20000,"grpc.http2.max_pings_without_data":0,"grpc.keepalive_permit_without_calls":1,"clientCert":"-----BEGIN CERTIFICATE-----\nMIICIzCCAcmgAwIBAgIUV104kLSBW9wwTyLpdbxj6oe3lb8wCgYIKoZIzj0EAwIw\nczELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh\nbiBGcmFuY2lzY28xGTAXBgNVBAoTEG9yZzIuZXhhbXBsZS5jb20xHDAaBgNVBAMT\nE2NhLm9yZzIuZXhhbXBsZS5jb20wHhcNMTkxMDE2MTYwMzAwWhcNMjAxMDE1MTYw\nODAwWjAhMQ8wDQYDVQQLEwZjbGllbnQxDjAMBgNVBAMTBWFkbWluMFkwEwYHKoZI\nzj0CAQYIKoZIzj0DAQcDQgAEVjyvcZRknvco+tsIFQU0wEWs73afrJ1NOQiqVqs3\ntYZ4EGjvipya/Rytv/3F1UX+NxiF7rl13f1z3kPi/uQevKOBjDCBiTAOBgNVHQ8B\nAf8EBAMCA6gwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAwGA1UdEwEB\n/wQCMAAwHQYDVR0OBBYEFH9ZRVOSnLDAywawntb2uOJFmIPuMCsGA1UdIwQkMCKA\nIC0MzA3rtmWHYjt1FexLTzlmTKVvH6cCD3xFbfeUx3zdMAoGCCqGSM49BAMCA0gA\nMEUCIQCFOXvj485YZQkrZYXkL4HmIA07XVYVN3Hd0ixnfIHEcAIgNMsXWcCRBx3E\n12+WDcVaqxTD6OM2Nc4GHJs6YqcvbA0=\n-----END CERTIFICATE-----\n","grpc.ssl_target_name_override":"peer0.org2.example.com","grpc.default_authority":"peer0.org2.example.com"}},"isProposalResponse":true}  00:45:44.923     at Object.<anonymous> (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/ts-scenario/steps/lib/deprecatedSDK.ts:112:10) 00:45:44.923     at step (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/ts-scenario/steps/lib/deprecatedSDK.ts:35:23) 00:45:44.923     at Object.next (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/ts-scenario/steps/lib/deprecatedSDK.ts:16:53) 00:45:44.923     at fulfilled (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/ts-scenario/steps/lib/deprecatedSDK.ts:7:58) 00:45:44.923     at process._tickCallback (internal/process/next_tick.js:68:7) 00:45:44.932 Disconnecting from all gateways ... 00:45:44.942 TypeError: this.stream.clearLine is not a function 00:45:44.942     at ProgressBar.interrupt (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/progress/lib/node-progress.js:210:15) 00:45:44.972 npm ERR! code ELIFECYCLE 00:45:44.972 npm ERR! errno 1 00:45:44.976 npm ERR! fabric-sdk-node@2.0.0-snapshot test:ts-cucumber: `cucumber-js ./test/ts-scenario/features/*.feature --require './test/ts-scenario/steps/**/*.ts' --require './test/ts-scenario/support/**/*.ts' --require-module ts-node/register --format progress-bar` 00:45:44.976 npm ERR! Exit status 1 00:45:44.976 npm ERR!  00:45:44.976 npm ERR! Failed at the fabric-sdk-node@2.0.0-snapshot test:ts-cucumber script. 00:45:44.976 npm ERR! This is probably not a problem with npm. There is likely additional logging output above. 00:45:45.030  00:45:45.030 npm ERR! A complete log of this run can be found in: 00:45:45.030 npm ERR!     /home/jenkins/.npm/_logs/2019-10-16T16_08_08_365Z-debug.log 00:45:45.045  16:08:08  'run-test:ts-cucumber' errored after 2.73 min 00:45:45.046  16:08:08   31mError 39m in plugin " 36mgulp-shell 39m" 00:45:45.046 Message: 00:45:45.046     Command `export HFC_LOGGING='{"debug":"/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/temp/debugc.log"}'; npm run test:ts-cucumber` failed with exit code 1 00:45:45.047  16:08:08  'run-test-merge' errored after 11 min 00:45:45.048  16:08:08   31mError 39m in plugin " 36mrun-sequence(run-test:ts-cucumber) 39m" 00:45:45.048 Error 00:45:45.048     at finish (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/run-sequence/index.js:82:12) 00:45:45.048     at Gulp.onError (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/run-sequence/index.js:93:3) 00:45:45.048     at Gulp.emit (events.js:194:15) 00:45:45.048     at Gulp.Orchestrator._emitTaskDone (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/orchestrator/index.js:264:8) 00:45:45.048     at /w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/orchestrator/index.js:275:23 00:45:45.048     at finish (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/orchestrator/lib/runTask.js:21:8) 00:45:45.048     at cb (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/orchestrator/lib/runTask.js:29:3) 00:45:45.048     at /w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/gulp-shell/node_modules/async/dist/async.js:473:16 00:45:45.048     at iterateeCallback (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/gulp-shell/node_modules/async/dist/async.js:988:17) 00:45:45.048     at /w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/gulp-shell/node_modules/async/dist/async.js:969:16 00:45:45.048     at ChildProcess.child.on (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/gulp-shell/index.js:72:7) 00:45:45.048     at ChildProcess.emit (events.js:189:13) 00:45:45.048     at Process.ChildProcess._handle.onexit (internal/child_process.js:248:12)/ code placeholder {code} *Build Logs:*Â  https://jenkins.hyperledger.org/view/Merge/job/fabric-merge-end-2-end-x86_64/6561/console   Â *Debug logs:*   https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-end-2-end-x86_64/6561/artifact/gopath/src/github.com/hyperledger/fabric-sdk-node/   ></description> </Issue>
