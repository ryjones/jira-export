<Issue id="40754" key="FABN-1282" number="1282" project="10604" reporter="hengming-zhang" assignee="hengming-zhang" creator="hengming-zhang" type="10101" summary="Release-1.4: Fix the integration test part by improving the README and code." priority="4" resolution="10000" status="6" created="2019-06-23 11:14:00.0" updated="2019-07-25 02:53:08.0" resolutiondate="2019-07-25 02:53:08.0" votes="0" watches="1" workflowId="53708"> <description><! CDATA This issue fixes two parts of integration test:    # Remove --with-default-names for macOS in README. Reference:  https://stackoverflow.com/questions/30003570/how-to-use-gnu-sed-on-mac-os-x . # Fix on logger.js and contracteventlistener.js warnings caused by no-console. Reference:  {noformat}  15:48:44   /usr/local/Cellar/go/1.11.1/src/github.com/hyperledger/fabric-sdk-node/test/unit/logger.js    28:1  warning  Unexpected console statement  no-console    32:2  warning  Unexpected console statement  no-console    63:2  warning  Unexpected console statement  no-console    73:2  warning  Unexpected console statement  no-console   190:2  warning  Unexpected console statement  no-console   192:2  warning  Unexpected console statement  no-console   237:2  warning  Unexpected console statement  no-console   247:2  warning  Unexpected console statement  no-console   258:2  warning  Unexpected console statement  no-console   287:2  warning  Unexpected console statement  no-console ✖ 10 problems (0 errors, 10 warnings) {noformat} 3. Fix on AssertionError in Peer.js.  {noformat} 1. Before:   MacBook-Pro:fabric-sdk-node 5swind$ node_modules/.bin/mocha fabric-client/test/Peer.js --grep="should log function entry"        Peer     #sendProposal       ✓ should log function entry (node:11068) UnhandledPromiseRejectionWarning: AssertionError: expected   Array(1)   to deeply equal   Array(4)       at obj.sendProposal.then.catch (/Users/5swind/Downloads/gerrit/hyperledger/fabric-sdk-node/fabric-client/test/Peer.js:108:44)     at <anonymous>     at runMicrotasksCallback (internal/process/next_tick.js:122:5)     at _combinedTickCallback (internal/process/next_tick.js:132:7)     at process._tickCallback (internal/process/next_tick.js:181:9) (node:11068) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 2) (node:11068)  DEP0018  DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.       1 passing (21ms)   After:   MacBook-Pro:fabric-sdk-node 5swind$ node_modules/.bin/mocha fabric-client/test/Peer.js --grep="should log function entry"        Peer     #sendProposal       ✓ should log function entry       1 passing (23ms)   2. Before:   MacBook-Pro:fabric-sdk-node 5swind$ node_modules/.bin/mocha fabric-client/test/Peer.js --grep="should log on entry"        Peer     #sendDiscovery       ✓ should log on entry (node:12675) UnhandledPromiseRejectionWarning: AssertionError: expected   Array(1)   to deeply equal   '%s - Start', 'sendDiscovery'       at obj.sendDiscovery.then.catch (/Users/5swind/Downloads/gerrit/hyperledger/fabric-sdk-node/fabric-client/test/Peer.js:389:44)     at <anonymous>     at runMicrotasksCallback (internal/process/next_tick.js:122:5)     at _combinedTickCallback (internal/process/next_tick.js:132:7)     at process._tickCallback (internal/process/next_tick.js:181:9) (node:12675) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 2) (node:12675)  DEP0018  DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.       1 passing (22ms)   After:   MacBook-Pro:fabric-sdk-node 5swind$ node_modules/.bin/mocha fabric-client/test/Peer.js --grep="should log on entry"        Peer     #sendDiscovery       ✓ should log on entry       1 passing (17ms) {noformat}       ></description> </Issue>
