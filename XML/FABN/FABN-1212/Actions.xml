<Action id="59334" issue="39399" author="xuchenhao001" type="comment" created="2019-04-19 07:53:56.0" updateauthor="xuchenhao001" updated="2019-04-19 09:57:28.0"> <body><! CDATA After query installed chaincode on peer, the result shows that there is no chaincode installed: {code:java} {"chaincodes":  } {code} But how could this happen? Since that chaincode has already been installed on my peer successfully: {code:java} # docker exec -ti peer0.org1.example.com sh /opt/gopath/src/github.com/hyperledger/fabric/peer # cd /var/hyperledger/production/chaincodes/ /var/hyperledger/production/chaincodes # ls examplecc:v1.0:7d9d39f879b466ecfdf9e947ad410c77363dafd67b1a93ad18b3885be28ce3ef.bin {code} And here is how I install my chaincode with node sdk: {code:java} // get the chaincode instance associated with the client chaincode = client.newChaincode(chaincodeName, chaincodeVersion); chaincode.setEndorsementPolicyDefinition(endorsementPolicy); chaincode.setInitRequired(true); chaincode.setSequence(1);  // package the source code let package_request = { chaincodeType: 'golang', goPath: gopath, chaincodePath: chaincodePath }; let cc_package = await chaincode.package(package_request); chaincode.setPackage(cc_package);  let peer = client.getPeer(peerName); let install_request = { target: peer, request_timeout: 10000 // give the peers some extra time }; let package_id = await chaincode.install(install_request); logger.info('chaincode has been successfully installed on peer: ' + peerName + ' with chaincode package id: ' + package_id); {code}    ></body> </Action>
<Action id="59335" issue="39399" author="xuchenhao001" type="comment" created="2019-04-19 10:06:43.0" updateauthor="xuchenhao001" updated="2019-04-19 10:08:57.0"> <body><! CDATA Problem solved, that's because chaincode approve need parameter *_package_id* in chaincode instance: {code:java} let request = { targets: peers, // This chaincode instance needs four parameters:  // _name, _version, _sequence, and _package_id chaincode: chaincode, txId: tx_id }; // send to the peer to be endorsed let approveResponse = await channel.approveChaincodeForOrg(request); {code} So why my chaincode is not installed on my peers according to fabric sdk? After read the sdk's source code, I found that:  *fabric- client/lib/Client.js, queryInstalledChaincodes*: {code:java} const request = { targets: targets, chaincodeId: Constants.LSCC, // Here, the LSCC is defined as 'lscc' txId: txId, signer: signer, fcn: 'getinstalledchaincodes', args:    }; {code} while new lifecycle using a newer chaincode name: *_lifecycle*  So, addition to this question, the function  {code:java} client.queryInstalledChaincodes(){code} needs to be updated to new lifecycle too.     ></body> </Action>
