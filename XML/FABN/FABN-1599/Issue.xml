<Issue id="45615" key="FABN-1599" number="1599" project="10604" reporter="icarrascol" assignee="harrisob@us.ibm.com" creator="icarrascol" type="10004" summary="discovery service not working" priority="1" resolution="10203" status="6" created="2020-07-15 22:41:17.0" updated="2020-07-28 13:50:44.0" resolutiondate="2020-07-28 13:50:44.0" votes="0" watches="2" workflowId="59518" archived="N"> <description><! CDATA Hello everyone, i have a test network proved and working with node sdk v1.4, discovery works fine as it generates possible combinations to endorse, i am currently trying to move to sdk v2.1 and i am having 2 problems 1) With service discovery enabled, a network with 2 endorsing peers and a chaincode with endorsing policy of 1 out of 2, stop 1 peer and try to do an invoke, discovery service doesnt do anything and the connection fails as it is waiting for the 2 peers to be online.  The expected behavior is that discovery generates a new valid combination, that is one with the peer that is online and execute a successful invoke.  2) to enable discovery it is specified that the ports(internal and external) of the peers in the docker compose file should be the same, for some reason this doesnt work as the gateway fails connecting to the peers, so ive been using different ports(internal and external) for the peers. discovery doesnt raise any error about this, it does not work as explained before if you have a peer down but it success in the invokes if you have all the peers working.  Â Peer image version ive used to test this are v2.1 and v2.2  Attached some info on my chaincode commit and invoke being successfull using the cli, also attached the error that is being thrown by the sdk with discovery enabled and 1 peer down and my peer2 config file for peer v2.2, as it is shown in the screenshot the container ports arent the same because as i said it doesnt work if i configure it like that.  ></description> </Issue>
