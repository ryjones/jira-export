<Issue id="45537" key="FABN-1590" number="1590" project="10604" reporter="thienbuinguyen" assignee="harrisob@us.ibm.com" creator="thienbuinguyen" type="10004" summary="No key with SKI error on Node.js restart when using HSM/PKCS11" priority="3" resolution="10002" status="6" created="2020-07-03 01:39:52.0" updated="2020-11-24 13:56:57.0" resolutiondate="2020-11-24 13:56:57.0" votes="0" watches="3" workflowId="59439" archived="N"> <description><! CDATA *Description*  When using the newÂ CryptoSuite_PKCS11 cryptosuite (for HSM storage of private keys), an in-memory SKI to key cache is used. This cache does not appear to be reinitialized on a new PKCS11 session. Hence, whenever the Node.js server is restarted (which can be common when running the HF SDK as a Docker container), all subsequent blockchain calls requiring a user context will throw a "no key with SKI" error.  *Expected Results*  The SKI to key cache is reinitialized on PKCS11 session login and a user context can be retrieved (i.e. `getUserContext` function).  *Actual Results*  A "no key with SKI" error is thrown when attempting to get the user context for a user that has their private key stored in the HSM. Main example is with Gateway connections (`gateway.connect()`).  ></description> </Issue>
