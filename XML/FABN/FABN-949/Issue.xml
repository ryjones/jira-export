<Issue id="34252" key="FABN-949" number="949" project="10604" reporter="adnanchoudhury" assignee="harrisob@us.ibm.com" creator="adnanchoudhury" type="10004" summary="CouchDB index installation not working via node SDK due to path issues" priority="2" resolution="10000" status="6" created="2018-10-01 19:11:10.0" updated="2018-10-03 16:33:10.0" resolutiondate="2018-10-03 16:32:43.0" votes="0" watches="5" workflowId="45579"> <description><! CDATA test: FAB-8692  Expected: As specified in the testcase, the chaincode installation should also install the index, and index can be visible in the Fauxton interface and mentioned in peer log.  Actual result : index is not installed, not visible in Fauxton and not mentioned in the peer log.  More details: It looks like the node SDK is  not consuming the metaDataPath properly---The PTE test tool sends it but Node SDK finds it undefined (see last line of code below):  {code:java} ^  32minfo^  39m:  PTE 0 main : request_install: {"targets": {"_options":{"clientCert":"-----BEGIN CERTIFICATE-----\r\nMIIBVDCB+6ADAgECAgEEMAoGCCqGSM49BAMCMBgxFjAUBgNVBAMMDXBlZXJvcmcx\r\nQWRtaW4wIhgPMjAxODEwMDIxMzE2NTBaGA8yMDE4MTAwMzA3MjAxMFowGDEWMBQG\r\nA1UEAwwNcGVlcm9yZzFBZG1pbjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABFtd\r\nfMNpebmrnPTBqw6yGdKai8DzdVfsuXnDkWN+M6T1H/QPXzVfpO8JpoGAGh6qspwd\r\nmp8huOdvfu4MrHC5rwajMjAwMAwGA1UdEwEB/wQCMAAwCwYDVR0PBAQDAgbAMBMG\r\nA1UdJQQMMAoGCCsGAQUFBwMCMAoGCCqGSM49BAMCA0gAMEUCIQCRVhk4WZdKD1Xu\r\nOg3Mqn8iHtbsalLmbbjax5ERgCbT8AIgWhXzhYlI12sVFWxplMA3yfC5wGl2nI1u\r\nz8fseH8y3iM=\r\n-----END CERTIFICATE-----\r\n","clientKey":"-----BEGIN PRIVATE KEY-----\r\nMIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQgZqL4v6NjCDJ6xKT3\r\nQbJdgk0/uyQQkal0NFxjLnR44AihRANCAARbXXzDaXm5q5z0wasOshnSmovA83VX\r\n7Ll5w5FjfjOk9R/0D181X6TvCaaBgBoeqrKcHZqfIbjnb37uDKxwua8G\r\n-----END PRIVATE KEY-----\r\n","grpc.ssl_target_name_override":"peer0.org1.example.com","grpc.default_authority":"peer0.org1.example.com","grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1},"clientCert":"-----BEGIN CERTIFICATE-----\r\nMIIBVDCB+6ADAgECAgEEMAoGCCqGSM49BAMCMBgxFjAUBgNVBAMMDXBlZXJvcmcx\r\nQWRtaW4wIhgPMjAxODEwMDIxMzE2NTBaGA8yMDE4MTAwMzA3MjAxMFowGDEWMBQG\r\nA1UEAwwNcGVlcm9yZzFBZG1pbjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABFtd\r\nfMNpebmrnPTBqw6yGdKai8DzdVfsuXnDkWN+M6T1H/QPXzVfpO8JpoGAGh6qspwd\r\nmp8huOdvfu4MrHC5rwajMjAwMAwGA1UdEwEB/wQCMAAwCwYDVR0PBAQDAgbAMBMG\r\nA1UdJQQMMAoGCCsGAQUFBwMCMAoGCCqGSM49BAMCA0gAMEUCIQCRVhk4WZdKD1Xu\r\nOg3Mqn8iHtbsalLmbbjax5ERgCbT8AIgWhXzhYlI12sVFWxplMA3yfC5wGl2nI1u\r\nz8fseH8y3iM=\r\n-----END CERTIFICATE-----\r\n","_url":"grpcs://localhost:7061","_endpoint":{"creds":{},"addr":"localhost:7061"},"_name":"localhost:7061","_request_timeout":200000,"_grpc_wait_for_ready_timeout":3000,"_endorserClient":{"$interceptors":  ,"$interceptor_providers":  ,"$channel":{}},"_discoveryClient":{"$interceptors":  ,"$interceptor_providers":  ,"$channel":{}}},{"_options":{"clientCert":"-----BEGIN CERTIFICATE-----\r\nMIIBVDCB+6ADAgECAgEEMAoGCCqGSM49BAMCMBgxFjAUBgNVBAMMDXBlZXJvcmcx\r\nQWRtaW4wIhgPMjAxODEwMDIxMzE2NTBaGA8yMDE4MTAwMzA3MjAxMFowGDEWMBQG\r\nA1UEAwwNcGVlcm9yZzFBZG1pbjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABFtd\r\nfMNpebmrnPTBqw6yGdKai8DzdVfsuXnDkWN+M6T1H/QPXzVfpO8JpoGAGh6qspwd\r\nmp8huOdvfu4MrHC5rwajMjAwMAwGA1UdEwEB/wQCMAAwCwYDVR0PBAQDAgbAMBMG\r\nA1UdJQQMMAoGCCsGAQUFBwMCMAoGCCqGSM49BAMCA0gAMEUCIQCRVhk4WZdKD1Xu\r\nOg3Mqn8iHtbsalLmbbjax5ERgCbT8AIgWhXzhYlI12sVFWxplMA3yfC5wGl2nI1u\r\nz8fseH8y3iM=\r\n-----END CERTIFICATE-----\r\n","clientKey":"-----BEGIN PRIVATE KEY-----\r\nMIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQgZqL4v6NjCDJ6xKT3\r\nQbJdgk0/uyQQkal0NFxjLnR44AihRANCAARbXXzDaXm5q5z0wasOshnSmovA83VX\r\n7Ll5w5FjfjOk9R/0D181X6TvCaaBgBoeqrKcHZqfIbjnb37uDKxwua8G\r\n-----END PRIVATE KEY-----\r\n","grpc.ssl_target_name_override":"peer1.org1.example.com","grpc.default_authority":"peer1.org1.example.com","grpc.max_receive_message_length":-1,"grpc.max_send_message_length":-1},"clientCert":"-----BEGIN CERTIFICATE-----\r\nMIIBVDCB+6ADAgECAgEEMAoGCCqGSM49BAMCMBgxFjAUBgNVBAMMDXBlZXJvcmcx\r\nQWRtaW4wIhgPMjAxODEwMDIxMzE2NTBaGA8yMDE4MTAwMzA3MjAxMFowGDEWMBQG\r\nA1UEAwwNcGVlcm9yZzFBZG1pbjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABFtd\r\nfMNpebmrnPTBqw6yGdKai8DzdVfsuXnDkWN+M6T1H/QPXzVfpO8JpoGAGh6qspwd\r\nmp8huOdvfu4MrHC5rwajMjAwMAwGA1UdEwEB/wQCMAAwCwYDVR0PBAQDAgbAMBMG\r\nA1UdJQQMMAoGCCsGAQUFBwMCMAoGCCqGSM49BAMCA0gAMEUCIQCRVhk4WZdKD1Xu\r\nOg3Mqn8iHtbsalLmbbjax5ERgCbT8AIgWhXzhYlI12sVFWxplMA3yfC5wGl2nI1u\r\nz8fseH8y3iM=\r\n-----END CERTIFICATE-----\r\n","_url":"grpcs://localhost:7062","_endpoint":{"creds":{},"addr":"localhost:7062"},"_name":"localhost:7062","_request_timeout":200000,"_grpc_wait_for_ready_timeout":3000,"_endorserClient":{"$interceptors":  ,"$interceptor_providers":  ,"$channel":{}},"_discoveryClient":{"$interceptors":  ,"$interceptor_providers":  ,"$channel":{}}} ,"chaincodePath":"github.com/hyperledger/fabric-test/fabric/examples/chaincode/go/marbles02","metadataPath":"/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/fabric/examples/chaincode/go/marbles02/META-INF","chaincodeId":"marbles_cc_ch1","chaincodeType":"golang","chaincodeVersion":"v0"} ^  34mdebug^  39m:  Client.js : installChaincode - start ^  34mdebug^  39m:  Client.js : getTargetPeers - start ^  34mdebug^  39m:  Client.js : installChaincode - found peers ::2 ^  34mdebug^  39m:  packager : packager: chaincodePath: github.com/hyperledger/fabric-test/fabric/examples/chaincode/go/marbles02, chaincodeType: golang, devmode: false, metadataPath: undefined{code}      ></description> </Issue>
