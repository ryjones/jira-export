<Issue id="44971" key="FABN-1551" number="1551" project="10604" reporter="JIRAUSER20122" assignee="harrisob@us.ibm.com" creator="JIRAUSER20122" type="10004" summary="bug fix for _findHighest in DiscoveryEndorsementHandler" priority="4" resolution="10002" status="6" created="2020-04-29 03:27:12.0" updated="2020-05-05 13:54:07.0" resolutiondate="2020-05-05 13:54:07.0" votes="0" watches="1" workflowId="58874" archived="N"> <description><! CDATA sdk version: 1.4.8  peer.ledger_height should be a Long type object However, it lost the type during deep copy (JSON.parse(JSON.stringfy()). Because peer.ledger_height lost the type, it cannot use a compare function. it always logs when `preferred_height_gap` is provided and return Long(0) for the highest  Â   2020-04-28T12:02:59.094Z - warn:  DiscoveryEndorsementHandler : problem finding highest block:TypeError: peer.ledger_height.greaterThan is not a function at DiscoveryEndorsementHandler._findHighest (/app/src/node_modules/fabric-client/lib/impl/DiscoveryEndorsementHandler.js:443 :28) at DiscoveryEndorsementHandler._modify_groups (/app/src/node_modules/fabric-client/lib/impl/DiscoveryEndorsementHandler.js:3 63:20) at DiscoveryEndorsementHandler._endorse (/app/src/node_modules/fabric-client/lib/impl/DiscoveryEndorsementHandler.js:162:9) at DiscoveryEndorsementHandler.endorse (/app/src/node_modules/fabric-client/lib/impl/DiscoveryEndorsementHandler.js:120:16) at async Channel.sendTransactionProposal (/app/src/node_modules/fabric-client/lib/Channel.js:2801:22) at async Fabric.propose (/app/src/app/fabric/index.js:167:23) at async TransactionInvoker._invokeTransaction (/app/src/app/services/transaction-invoker/index.js:28:23)  ></description> </Issue>
