<Issue id="13895" key="FABN-284" number="284" project="10604" reporter="inatatsu" creator="inatatsu" type="10004" summary="end-to-end.js fails due to duplicated transaction" priority="3" resolution="10000" status="6" created="2016-12-29 12:11:44.0" updated="2018-07-19 00:53:30.0" resolutiondate="2017-01-10 01:45:39.0" votes="0" watches="1" workflowId="34015"> <description><! CDATA end-to-end.js fails at step2 with the following GRPC error: {code:java}  2016-12-29 11:44:46.672   INFO  E2E - Executing step2 debug:  Chain.js : Chain.sendTransactionProposal - start debug:  Chain.js : Chain.sendTransactionProposal - adding function arg:invoke debug:  Chain.js : Chain.sendTransactionProposal - adding arg:move debug:  Chain.js : Chain.sendTransactionProposal - adding arg:a debug:  Chain.js : Chain.sendTransactionProposal - adding arg:b debug:  Chain.js : Chain.sendTransactionProposal - adding arg:100  2016-12-29 11:44:46.679   DEBUG  E2E -  crypto_ecdsa_aes : ecdsa signature:  Signature { r: <BN: f163b5aa4d91abd33a24a116b52610123624ee2b2a346c07b714556b6a6bec03>, s: <BN: e8ef01bf336b37e52bb32bf8becac1be7bee5e3e61a72557c6390297908201d7>, recoveryParam: 0 } debug:  Chain.js : _signProposal - signature::{"type":"Buffer","data": 48,70,2,33,0,241,99,181,170,77,145,171,211,58,36,161,22,181,38,16,18,54,36,238,43,42,52,108,7,183,20,85,107,106,107,236,3,2,33,0,232,239,1,191,51,107,55,229,43,179,43,248,190,202,193,190,123,238,94,62,97,167,37,87,198,57,2,151,144,130,1,215 } debug:  Peer.js : Peer.sendProposal - Start debug:  Peer.js : Peer.sendProposal - Start debug:  Peer.js : Peer.sendProposal - Start debug:  Peer.js : Peer.sendProposal - Start error:  Peer.js : GRPC client got an error response from the peer. Error: failed to obtain cds for mycc - Error executing chaincode: Failed to execute transaction (Error sending TRANSACTION: txid:%EF%BF%BD%EF%BF%BD%07%EF%BF%BD%1F8%EF%BF%BD%EF%BF%BD%EF%BF%BDx exists) at /fabric-sdk-node/node_modules/grpc/src/node/src/client.js:417:17 error:  Chain.js : Chain-sendPeersProposal - Promise is rejected: Error: Error: failed to obtain cds for mycc - Error executing chaincode: Failed to execute transaction (Error sending TRANSACTION: txid:%EF%BF%BD%EF%BF%BD%07%EF%BF%BD%1F8%EF%BF%BD%EF%BF%BD%EF%BF%BDx exists) at Object.callback (/fabric-sdk-node/node_modules/hfc/lib/Peer.js:191:13) at /fabric-sdk-node/node_modules/grpc/src/node/src/client.js:420:14 {code}  While the direct problem is a duplicated transaction, the root cause is that peer0 and peer1 are added to the chain multiple times since both step1 and step2 call chain.addPeer() for the validating peers.  ></description> </Issue>
