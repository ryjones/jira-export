<Issue id="35876" key="FABN-1050" number="1050" project="10604" reporter="mariwade" assignee="bestbeforetoday" creator="mariwade" type="10004" summary="ChannelEventHub.js, _processBlockEvents does not handle errors being thrown from call back" priority="2" resolution="10000" status="6" created="2018-12-04 19:15:22.0" updated="2018-12-06 13:30:28.0" resolutiondate="2018-12-06 13:30:28.0" votes="0" watches="1" workflowId="47378"> <description><! CDATA When handling received blocks, if the code throws an error (Not Fabric related), the sdk code in _processBlockEvents and _processTxEvents do not handle the error.  ```  (node:21314) UnhandledPromiseRejectionWarning: RabbitError: rabbitMQ.publish exchange: bds.request.event.exchange, routing: channel.mychannel IllegalOperationError: Channel closed at new RabbitError (/Users/mariwade/Developer/PBSA/bc-event-listener/build/components/common/errors-custom.js:53:1) at OutboundExchange.publish (/Users/mariwade/Developer/PBSA/bc-event-listener/build/components/messaging/rabbitMQ.js:150:19) at EventListener.processBlock (/Users/mariwade/Developer/PBSA/bc-event-listener/build/components/eventHub/eventHubListener.js:614:36) at EventRegistration.channelEventHub.registerBlockEvent  as onEvent  (/Users/mariwade/Developer/PBSA/bc-event-listener/build/components/eventHub/eventHubListener.js:566:32) *at /Users/mariwade/Developer/PBSA/bc-event-listener/node_modules/fabric-client/lib/ChannelEventHub.js:1027:14* at Array.forEach (<anonymous>) at ChannelEventHub._processBlockEvents (/Users/mariwade/Developer/PBSA/bc-event-listener/node_modules/fabric-client/lib/ChannelEventHub.js:1024:41) at ClientDuplexStream.<anonymous> (/Users/mariwade/Developer/PBSA/bc-event-listener/node_modules/fabric-client/lib/ChannelEventHub.js:357:11) at emitOne (events.js:116:13) at ClientDuplexStream.emit (events.js:211:7) at addChunk (_stream_readable.js:263:12) at readableAddChunk (_stream_readable.js:250:11) at ClientDuplexStream.Readable.push (_stream_readable.js:208:10) at Object.onReceiveMessage (/Users/mariwade/Developer/PBSA/bc-event-listener/node_modules/grpc/src/client_interceptors.js:1276:19) at InterceptingListener.recvMessageWithContext (/Users/mariwade/Developer/PBSA/bc-event-listener/node_modules/grpc/src/client_interceptors.js:603:19) at /Users/mariwade/Developer/PBSA/bc-event-listener/node_modules/grpc/src/client_interceptors.js:702:14 (node:21314) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 33)  ```  ></description> </Issue>
