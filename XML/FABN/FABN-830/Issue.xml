<Issue id="32135" key="FABN-830" number="830" project="10604" reporter="davidkel" creator="davidkel" type="10004" summary="Using HSM results in error of toBytes call on undefined" priority="2" resolution="10000" status="6" created="2018-07-23 15:58:20.0" updated="2018-08-17 10:34:28.0" resolutiondate="2018-07-31 07:17:19.0" votes="0" watches="2" workflowId="43364"> <description><! CDATA If HSM is being employed and a user context is set on a client before something like initializeChannel is called, then in addTlsClientCertAndKey, a call to get ephemeralKey goes to the PKCS implementation which throws an error and results in the key being `undefined`, of no cert info is provided.  If no cert info is provided then addTlsClientCertAndKey should create a self signed cert using the default cryptoSuite, not the HSM suite associated with the Clients current cryptosuite context  ></description> </Issue>
