<Issue id="22022" key="FABN-328" number="328" project="10604" reporter="lehors" assignee="lehors" creator="lehors" type="10004" summary="Node-SDK test fails to handle Windows tempdir used for HFC_LOGGING" priority="4" resolution="10000" status="6" created="2017-10-13 15:38:55.0" updated="2018-07-19 00:53:39.0" resolutiondate="2017-10-20 16:31:42.0" votes="0" watches="1" workflowId="34059"> <environment><! CDATA Windows 7, node 6.9.5, npm 4.3.0  Â   ></environment> <description><! CDATA Â Running the tests on Windows generate the following error: {code:java} $ gulp test-headless  #################################################### # debug log: C:\Users\lehors\AppData\Local\Temp\hfc\test-log\debug.log ####################################################   17:15:25  Using gulpfile ~\Projects\Go\src\github.com\hyperledger\fabric-sdk-node\gulpfile.js  17:15:25  Starting 'clean-up'... ...  17:15:43  Starting 'test-headless'... warn: Failed to parse environment variable "HFC_LOGGING". Returned a winston logger with default configurations. Error: SyntaxError: Unexpected token U in JSON at position 13 Â Â Â  at Object.parse (native) Â Â Â  at Object.module.exports.getLogger (C:\Users\lehors\Projects\Go\src\github.com\hyperledger\fabric-sdk-node\node_modules\fabric-client\lib\utils.js:176:19) Â Â Â  at Object.<anonymous> (C:\Users\lehors\Projects\Go\src\github.com\hyperledger\fabric-sdk-node\test\unit\block.js:34:20) Â Â Â  at Module._compile (module.js:570:32) Â Â Â  at Object.Module._extensions..js (module.js:579:10) Â Â Â  at Object.Module._extensions.(anonymous function)  as .js  (C:\Users\lehors\Projects\Go\src\github.com\hyperledger\fabric-sdk-node\node_modules\istanbul\lib\hook.js:109:37) Â Â Â  at Module.load (module.js:487:32) Â Â Â  at tryModuleLoad (module.js:446:12) Â Â Â  at Function.Module._load (module.js:438:3) Â Â Â  at Module.require (module.js:497:17) Â Â Â  at require (internal/module.js:20:19) Â Â Â  at module.exports (C:\Users\lehors\Projects\Go\src\github.com\hyperledger\fabric-sdk-node\node_modules\require-uncached\index.js:28:9) Â Â Â  at C:\Users\lehors\Projects\Go\src\github.com\hyperledger\fabric-sdk-node\node_modules\gulp-tape\index.js:36:9 Â Â Â  at Array.forEach (native) Â Â Â  at DestroyableTransform.flush  as _flush  (C:\Users\lehors\Projects\Go\src\github.com\hyperledger\fabric-sdk-node\node_modules\gulp-tape\index.js:35:13) Â Â Â  at DestroyableTransform.<anonymous> (C:\Users\lehors\Projects\Go\src\github.com\hyperledger\fabric-sdk-node\node_modules\readable-stream\lib\_stream_transform.js:138:49)  ...{code} This leads to an empty debug log:  Â  {code:java} $ ll ~/AppData/Local/Temp/hfc/test-log/debug.log -rwx------+ 1 lehors None 0 Oct 13 17:15 /home/lehors/AppData/Local/Temp/hfc/test-log/debug.log{code} Â   Â   Â   Â   ></description> </Issue>
