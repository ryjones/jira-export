<Issue id="30882" key="FABN-178" number="178" project="10604" reporter="jamesruan" creator="jamesruan" type="10004" summary="Node SDK: channel.getGenisisBlock() has uncatched Promise" priority="3" resolution="10000" status="6" created="2018-06-05 10:45:24.0" updated="2018-07-19 00:53:07.0" resolutiondate="2018-06-11 14:55:13.0" votes="0" watches="3" workflowId="33909"> <description><! CDATA    I'm modifying the fabric-samples/balance-transfer to see how to know the new channel has been created. The current API doc for client.createChannel has following description: {code:java} Returns: Promise for a result object with status on the acceptance of the create request by the orderer. Note that this is not the confirmation of successful creation of the channel. The client application must poll the orderer to discover whether the channel has been created completely or not.{code} I've looked at the code in the golang peer cmd tool. It calls getGenesisBlock() right after the createChannel() has returned. So I tried similar with the node sdk. However, I've got the following  error complaining about the reason why the genesis block can not be fetched. {code:java} error:  Orderer.js : sendDeliver - rejecting - status:NOT_FOUND   2018-06-05 18:24:51.583   ERROR  Create-Channel - Error: Invalid results returned ::NOT_FOUND      at ClientDuplexStream.<anonymous> (/Users/rbh/git/fabric-samples/balance-transfer/node_modules/fabric-client/lib/Orderer.js:229:22)      at emitOne (events.js:116:13)      at ClientDuplexStream.emit (events.js:211:7)      at addChunk (_stream_readable.js:263:12)      at readableAddChunk (_stream_readable.js:250:11)      at ClientDuplexStream.Readable.push (_stream_readable.js:208:10)      at readCallback (/Users/rbh/git/fabric-samples/balance-transfer/node_modules/grpc/src/client.js:312:14)  (node:25358) UnhandledPromiseRejectionWarning: Error: Failed to initialize the channel: Error: Invalid results returned ::NOT_FOUND      at Object.createChannel (/Users/rbh/git/fabric-samples/balance-transfer/app/create-channel.js:71:9)      at <anonymous>      at process._tickCallback (internal/process/next_tick.js:188:7)  (node:25358) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)  (node:25358)  DEP0018  DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.{code} I want to know: # Why there's no error handle for the getGenesisBlock? A bug? # Why sendDeliver() with SeekBehaviour: BLOCK_UNTIL_READY will fail? (I'd dug into the getGenesisBlock()'s code) #  # Is there a way to be notified that the channel has been created with node SDK?     ></description> </Issue>
