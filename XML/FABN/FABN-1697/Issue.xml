<Issue id="46532" key="FABN-1697" number="1697" project="10604" reporter="JIRAUSER21374" creator="JIRAUSER21374" type="10001" summary="Discovery service error acces denied" priority="1" resolution="10001" status="6" created="2021-02-02 14:14:15.0" updated="2021-02-24 14:10:49.0" resolutiondate="2021-02-24 14:10:49.0" votes="0" watches="2" workflowId="60475" archived="N"> <description><! CDATA i have a network deployed in kubernetes and trying to connect with node js sdk with fabric ca client so i have forwrded the port to local and trying to test the peer node but when going through logs i foundout these errors in fabric-peer node, not sure with what is causing the issue so please help with this  error:  DiscoveryService : send allorgs  - Channel:allorgs received discovery error:access denied Failed to submit transaction: Error: DiscoveryService: allorgs error: access denied  PeerLogs:  WARN 058 principal deserialization failure (MSP swapMSP is unknown) for identity 0a07737761704d535012df062d2d2d2d2d424547494e2043455254494649434154452d2d2d2..   2021-02-02 13:49:24.394 UTC  discovery  processQuery -> WARN 059 got query for channel allorgs from 127.0.0.1:60644 but it isn't eligible: implicit policy evaluation failed - 0 sub-policies were satisfied, but this policy requires 1 of the 'Writers' sub-policies to be satisfied 2021-02-02 13:49:24.394 UTC  discovery  processQuery -> WARN 05a got query for channel allorgs from 127.0.0.1:60644 but it isn't eligible: implicit policy evaluation failed - 0 sub-policies were satisfied, but this policy requires 1 of the 'Writers' sub-policies to be satisfied     Configtx.yaml   --- Organizations:      - &OrdererOrg         Name: OrdererOrg         ID: OrdererMSP         MSPDir: crypto-config/ordererOrganizations/msp         Policies:             Readers:                 Type: Signature                 Rule: "OR('OrdererMSP.member')"             Writers:                 Type: Signature                 Rule: "OR('OrdererMSP.member')"             Admins:                 Type: Signature                 Rule: "OR('OrdererMSP.admin')"  #Insert1     - &Swap           Name: SwapMSP           ID: SwapMSP           MSPDir: crypto-config/peerOrganizations/swap/msp          Policies:               Readers:                  Type: Signature                  Rule: "OR('SwapMSP.admin','SwapMSP.peer','SwapMSP.client')"              Writers:                   Type: Signature                  Rule: "OR('SwapMSP.admin','SwapMSP.client')"              Admins:                    Type: Signature                  Rule: "OR('SwapMSP.admin')"              Endorsement:                    Type: Signature                  Rule: "OR('SwapMSP.peer')"          AnchorPeers:              - Host: peer0.swap              Port: 7051   Capabilities:     Channel: &ChannelCapabilities         V2_0: true      Orderer: &OrdererCapabilities         V2_0: true      Application: &ApplicationCapabilities         V2_0: true  Application: &ApplicationDefaults      Organizations:     Policies:         Readers:             Type: ImplicitMeta             Rule: "ANY Readers"         Writers:             Type: ImplicitMeta             Rule: "ANY Writers"         Admins:             Type: ImplicitMeta             Rule: "ANY Admins"         LifecycleEndorsement:             Type: ImplicitMeta             Rule: "ANY Endorsement"         Endorsement:             Type: ImplicitMeta             Rule: "ANY Endorsement"      Capabilities:         <<: *ApplicationCapabilities  Orderer: &OrdererDefaults      OrdererType: etcdraft      Addresses:     BatchTimeout: 2s     BatchSize:         MaxMessageCount: 10         AbsoluteMaxBytes: 99 MB         PreferredMaxBytes: 512 KB     Organizations:     Policies:         Readers:             Type: ImplicitMeta             Rule: "ANY Readers"         Writers:             Type: ImplicitMeta             Rule: "ANY Writers"         Admins:             Type: ImplicitMeta             Rule: "MAJORITY Admins"         BlockValidation:             Type: ImplicitMeta             Rule: "ANY Writers"   Channel: &ChannelDefaults      Policies:         Readers:             Type: ImplicitMeta             Rule: "ANY Readers"         Writers:             Type: ImplicitMeta             Rule: "ANY Writers"         Admins:             Type: ImplicitMeta             Rule: "ANY Admins"      Capabilities:         <<: *ChannelCapabilities  Profiles:     AllOrgsChannel:         Consortium: AllOrgsConsortium         <<: *ChannelDefaults         Application:             <<: *ApplicationDefaults             Organizations:                 #Insert5                 - *Swap                  Capabilities:                 <<: *ApplicationCapabilities     EtcdRaftOrdererGenesis:         <<: *ChannelDefaults         Capabilities:             <<: *ChannelCapabilities         Orderer:             <<: *OrdererDefaults             OrdererType: etcdraft             EtcdRaft:                 Consenters:                 #Insert7                 - Host: orderer.swap                    Port: 7050                    ClientTLSCert: crypto-config/ordererOrganizations/orderers/orderer.swap/tls/server.crt                      ServerTLSCert: crypto-config/ordererOrganizations/orderers/orderer.swap/tls/server.crt                      - Host: orderer.swap2                    Port: 7050                    ClientTLSCert: crypto-config/ordererOrganizations/orderers/orderer.swap2/tls/server.crt                      ServerTLSCert: crypto-config/ordererOrganizations/orderers/orderer.swap2/tls/server.crt                      - Host: orderer.swap3                    Port: 7050                    ClientTLSCert: crypto-config/ordererOrganizations/orderers/orderer.swap3/tls/server.crt                      ServerTLSCert: crypto-config/ordererOrganizations/orderers/orderer.swap3/tls/server.crt                      - Host: orderer.swap4                    Port: 7050                    ClientTLSCert: crypto-config/ordererOrganizations/orderers/orderer.swap4/tls/server.crt                      ServerTLSCert: crypto-config/ordererOrganizations/orderers/orderer.swap4/tls/server.crt                      - Host: orderer.swap5                    Port: 7050                    ClientTLSCert: crypto-config/ordererOrganizations/orderers/orderer.swap5/tls/server.crt                      ServerTLSCert: crypto-config/ordererOrganizations/orderers/orderer.swap5/tls/server.crt                  Addresses:                 #Insert8                 - orderer.swap:7050                  - orderer.swap2:7050                  - orderer.swap3:7050                  - orderer.swap4:7050                  - orderer.swap5:7050               Organizations:             - *OrdererOrg             Capabilities:                 <<: *OrdererCapabilities         Application:             <<: *ApplicationDefaults             Organizations:             - <<: *OrdererOrg         Consortiums:             AllOrgsConsortium:                 Organizations:                 #Insert6                 - *Swap      crypto-config.yaml   CA:   OrganizationalUnit: admin OrdererOrgs:   - Name: Orderer     Domain: ""     Specs:       #Insert1     - CommonName: orderer.swap      - CommonName: orderer.swap2      - CommonName: orderer.swap3      - CommonName: orderer.swap4      - CommonName: orderer.swap5   PeerOrgs:  #Insert2   - Name: Swap      Domain: swap      EnableNodeOUs: true       Template:         Count: 1      Users:        Count: 1   ></description> </Issue>
