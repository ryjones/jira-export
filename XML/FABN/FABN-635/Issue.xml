<Issue id="20296" key="FABN-635" number="635" project="10604" reporter="davidkhala" assignee="davidkhala" creator="davidkhala" type="10001" summary="typo and deadcode in fabric-client/../FileKeyValueStore.js" priority="4" resolution="10000" status="6" created="2017-08-19 02:43:18.0" updated="2018-07-20 19:17:36.0" resolutiondate="2017-08-31 06:00:27.0" votes="0" watches="1" workflowId="34366"> <description><! CDATA Dear Jim,  I tested and find some flaws in fabric-sdk-node/fabric-client/lib/impl/FileKeyValueStore.js from  line 54:     {color:#458383}fs{color}.mkdirs({color:#458383}self{color}.{color:#660e7a}_dir{color}, {color:#000080}function {color}(err) \{ {color:#000080}if {color}(err) \{ {color:#458383}logger{color}.{color:#7a7a43}debug{color}({color:#008000}'FileKeyValueStore.js - constructor, error creating directory, code: ' {color}+ err.{color:#660e7a}code{color}); {color:#000080}if {color}(err.{color:#660e7a}code {color}== {color:#008000}'EEXIST'{color}) \{ {color:#000080}return {color}resolve({color:#458383}self{color}); } {color:#000080}else {color}\{ {color:#000080}return {color}reject(err.{color:#660e7a}code{color}); } } {color:#000080}return {color}resolve({color:#458383}self{color}); });     As my test case show, if directory DOES exist, there is no error and thus the checking of err.code=='EEXIST' is "deadcode" , making the typo of 'EEXIST' swallowed.  my suggestion is  {color:#458383}fs{color}.mkdirs({color:#458383}self{color}.{color:#660e7a}_dir{color}, {color:#000080}function {color}(err) \{ {color:#000080}if {color}(err) \{ {color:#458383}logger{color}.{color:#7a7a43}debug{color}({color:#008000}'constructor, error creating directory, code: ' {color}+ err.{color:#660e7a}code{color}); {color:#000080}return {color}reject(err); } {color:#000080}return {color}resolve({color:#458383}self{color}); });     ></description> </Issue>
