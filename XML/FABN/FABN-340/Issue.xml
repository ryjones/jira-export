<Issue id="17063" key="FABN-340" number="340" project="10604" reporter="jimthematrix" assignee="jimthematrix" creator="jimthematrix" type="10004" summary="Intermittent end2end failure during chaincode upgrade" priority="3" resolution="10000" status="6" created="2017-05-24 16:26:29.0" updated="2018-07-19 00:53:42.0" resolutiondate="2017-05-26 02:16:51.0" votes="0" watches="1" workflowId="34071" security="10001"> <description><! CDATA the following happens once a while during fabric's end2end verify build:  12:45:08 ***** U P G R A D E flow: upgrade chaincode ***** 12:45:08  >>>> getting the org admin 12:45:08  looking at file ::/w/workspace/fabric-verify-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/fixtures/channel/crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/keystore/9022d671ceedbb24af3ea69b5a8136cc64203df6b9920e26f48123fcfcb1d2e9_sk 12:45:08  looking at file ::/w/workspace/fabric-verify-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/fixtures/channel/crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/signcerts/Admin@org1.example.com-cert.pem 12:45:08 info:  Client.js : loading user from files 12:45:08 info:  utils.CryptoKeyStore : This class requires a CryptoKeyStore to save keys, using the store: {"opts":{"path":"/tmp/hfc/hfc-test-kvs_peerOrg1"}} 12:45:08 ok 57 Successfully enrolled user 'admin' 12:45:08 info:  E2E testing :  create new peer grpcs://localhost:7051 12:45:08 info:  E2E testing :  create new peer grpcs://localhost:8051 12:45:08 info:  E2E testing :  create new eventhub grpcs://localhost:7053 12:45:33 not ok 58 Error: Failed to test for bad transient map. The chaincode should have rejected the upgrade proposal. at channel.sendUpgradeProposal.then (/w/workspace/fabric-verify-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:281:12) 12:45:33   --- 12:45:33     operator: fail 12:45:33     at: Client.newDefaultKeyValueStore.then.then.then.then (/w/workspace/fabric-verify-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:370:5) 12:45:33   ... 12:45:33 not ok 59 Error: Error: Failed to test for bad transient map. The chaincode should have rejected the upgrade proposal. at channel.sendUpgradeProposal.then (/w/workspace/fabric-verify-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:281:12) at Client.newDefaultKeyValueStore.then.then.then.then (/w/workspace/fabric-verify-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:371:9) 12:45:33   --- 12:45:33     operator: fail 12:45:33     at: Client.newDefaultKeyValueStore.then.then.then.then.then (/w/workspace/fabric-verify-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:384:5) 12:45:33   ... 12:45:33 not ok 60 Failed to upgrade chaincode  12:45:33   --- 12:45:33     operator: fail 12:45:33     at: e2eUtils.instantiateChaincode.then (/w/workspace/fabric-verify-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/upgrade.js:57:6) 12:45:33   ... 12:45:33 info:  E2E testing : Disconnecting the event hub  ></description> </Issue>
