<Issue id="46012" key="FABN-1635" number="1635" project="10604" reporter="lesleyannj" assignee="harrisob@us.ibm.com" creator="lesleyannj" type="10004" summary="Improve SDK load balancing and fail-over for endorsing peers" priority="3" resolution="10002" status="6" created="2020-09-09 14:57:08.0" updated="2020-09-11 17:59:13.0" resolutiondate="2020-09-11 17:59:13.0" votes="0" watches="1" workflowId="59923" archived="N"> <description><! CDATA This is coming out of reported issue in mailing list https://lists.hyperledger.org/g/fabric/topic/76692756#8986  Network following configuration.  Org 1 having 2 peers (both peers are endorsing) Org 2 having 2 Peer(both peers are endorsing) Endorsement  Policy: MAJORITY Endorsement Fabric Version: 2.0  For high availability, both of the peers in each org are endorsing peers.  When invoke tx with all peers up and running, the network is working as expected.  When stop one peer(peer0.org1), the Transaction is not getting submitted as SDK is not able to connect with peer0.org1.   But peer1.org1 is already up and running, it can endorse transaction. The purpose of having multiple endorsing peers is high availability(In case if one peer is down, other can endorse tx). In this case, the transaction should have committed successfully, but it gave an error.  Error: Failed to connect before the deadline on Endorser- name: peer0.org1.example.com, url:grpcs://localhost:7051  CCP for org 1 as below:  "peers":   "peer0.org1.example.com", "peer1.org1.example.com"    Work-around: Remove peer0.org1.example.com from CCP(Common Connection Profile ) of org1, submit transaction successfully.  Confirmed: Service discovery is being used. Still same error restarting the API server.  Expectation: When some endorsing peer fails in between and there are multiple endorsing peers in organizations, expect be able to submit transactions successfully.    Sounds like it might be an issue with the SDK, that is only querying the first peer to retrieve the discovery information and not attempting to query other peers in the event the first one fails.  Is it possible to target a specific peer when multiple are available in the CCP with which to query the discovery information.?  Is the onus on the client to failover to another peer for discovery information?    ></description> </Issue>
