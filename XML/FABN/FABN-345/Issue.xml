<Issue id="31486" key="FABN-345" number="345" project="10604" reporter="davidkel" assignee="davidkel" creator="davidkel" type="10004" summary="node-sdk chaincode install doesn&apos;t restrict to installing only on client organisation" priority="3" resolution="10000" status="6" created="2018-06-29 07:39:23.0" updated="2018-07-19 00:53:43.0" resolutiondate="2018-06-29 15:12:50.0" votes="0" watches="1" workflowId="34076"> <description><! CDATA Looking at the code for chaincodeInstall has the following :-  {code:java} const channel = this.getChannel(channel_names i ); let org_name = null; if (this._network_config.hasClient()) { 	const client = this._network_config.getClientConfig(); 	org_name = client.organization; } const channel_peers = channel.getPeersForOrg(); 	for (let j in channel_peers) { 	    const peer = channel_peers j ; 	    temp_peers peer.getName()  = peer; // will remove duplicates 	} } {code} The call to channel.getPeersForOrg is missing the org_name parameter  The proposal is to extract this back out into a utility method getPeersForOrgOnChannel which will restore an api which had been assumed to be public in the 1.1 release and to fix the issue. It's also noted that it is supposed to restrict to the EndorsingPeer and ChaincodeQuery roles but this cannot be implemented until  https://gerrit.hyperledger.org/r/#/c/23853/ is merged. However being able to restrict to these roles is a very low issue compared to this one so a cr without the role checking will be sumitted first and the role checking retro-fitted later.  ></description> </Issue>
