<Issue id="41302" key="FABN-1316" number="1316" project="10604" reporter="vijaypunugubati" creator="vijaypunugubati" type="10004" summary="Sdk-node tests fail intermittently on fabric end2end testing with Gradle build failure. " priority="2" resolution="10201" status="6" created="2019-07-18 14:30:01.0" updated="2019-07-24 16:00:11.0" resolutiondate="2019-07-24 16:00:11.0" votes="0" watches="4" workflowId="54307"> <description><! CDATA Sdk-node tests fail intermittently on fabric end2end testing with Gradle build failure to create image and fallowed by sdk-node test failures.  *Branch:* Master**  *Platform:* ** x86_64  *Error Snippet:*  {code:java} /00:56:48.009 #  ***** Java-Chaincode U P G R A D E flow: instantiate chaincode *****  00:56:48.016 ok 1014 Successfully retrieved TLS certificate 00:56:48.044 ok 1015 Successfully enrolled user 'admin' (e2eUtil 2) 00:57:20.812 ok 1016 Successfully initialized Channel 00:57:20.812 # Proposal failed to example_java :: Error: error starting container: error building image: docker image build failed: docker build failed: Error returned from build: 1 "Gradle build 00:57:20.812 # Starting a Gradle Daemon (subsequent builds will be faster) 00:57:20.812 # Download https://plugins.gradle.org/m2/com/github/johnrengelman/shadow/com.github.johnrengelman.shadow.gradle.plugin/2.0.3/com.github.johnrengelman.shadow.gradle.plugin-2.0.3.pom 00:57:20.812 # Download https://plugins.gradle.org/m2/com/github/jengelman/gradle/plugins/shadow/2.0.3/shadow-2.0.3.pom 00:57:20.812 # Download https://plugins.gradle.org/m2/org/ow2/asm/asm-commons/6.1/asm-commons-6.1.pom 00:57:20.812 # Download https://plugins.gradle.org/m2/org/apache/ant/ant/1.9.7/ant-1.9.7.pom 00:57:20.812 # Download https://plugins.gradle.org/m2/org/jdom/jdom2/2.0.6/jdom2-2.0.6.pom 00:57:20.812 # Download https://plugins.gradle.org/m2/org/apache/ant/ant-parent/1.9.7/ant-parent-1.9.7.pom 00:57:20.812 # Download https://plugins.gradle.org/m2/org/ow2/asm/asm/6.1/asm-6.1.pom 00:57:20.812 # Download https://plugins.gradle.org/m2/org/ow2/asm/asm-tree/6.1/asm-tree-6.1.pom 00:57:20.812 # Download https://plugins.gradle.org/m2/org/ow2/asm/asm-analysis/6.1/asm-analysis-6.1.pom 00:57:20.812 # Download https://plugins.gradle.org/m2/org/apache/ant/ant-launcher/1.9.7/ant-launcher-1.9.7.pom 00:57:20.813 # Download https://plugins.gradle.org/m2/com/github/jengelman/gradle/plugins/shadow/2.0.3/shadow-2.0.3.jar 00:57:20.813 # Download https://plugins.gradle.org/m2/org/ow2/asm/asm-commons/6.1/asm-commons-6.1.jar 00:57:20.814 # Download https://plugins.gradle.org/m2/org/ow2/asm/asm-analysis/6.1/asm-analysis-6.1.jar 00:57:20.814 # Download https://plugins.gradle.org/m2/org/jdom/jdom2/2.0.6/jdom2-2.0.6.jar 00:57:20.814 # Download https://plugins.gradle.org/m2/org/ow2/asm/asm/6.1/asm-6.1.jar 00:57:20.814 # Download https://plugins.gradle.org/m2/org/apache/ant/ant/1.9.7/ant-1.9.7.jar 00:57:20.814 # Download https://plugins.gradle.org/m2/org/apache/ant/ant-launcher/1.9.7/ant-launcher-1.9.7.jar 00:57:20.814 # Download https://plugins.gradle.org/m2/org/ow2/asm/asm-tree/6.1/asm-tree-6.1.jar 00:57:20.814 #  00:57:20.814 # FAILURE: Build failed with an exception. 00:57:20.814 #  00:57:20.814 # * What went wrong: 00:57:20.814 # A problem occurred configuring root project 'fabric-chaincode-example-gradle'. 00:57:20.815 # > Could not resolve all artifacts for configuration ':classpath'. 00:57:20.815 # > Could not download shadow.jar (com.github.jengelman.gradle.plugins:shadow:2.0.3) 00:57:20.815 # > Could not get resource 'https://plugins.gradle.org/m2/com/github/jengelman/gradle/plugins/shadow/2.0.3/shadow-2.0.3.jar'. 00:57:20.815 # > Connection reset 00:57:20.815 # > Could not download ant.jar (org.apache.ant:ant:1.9.7) 00:57:20.816 # > Could not get resource 'https://plugins.gradle.org/m2/org/apache/ant/ant/1.9.7/ant-1.9.7.jar'. 00:57:20.816 # > Connection reset 00:57:20.816 #  00:57:20.816 # * Try: 00:57:20.817 # Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights. 00:57:20.818 #  00:57:20.818 # * Get more help at https://help.gradle.org 00:57:20.818 #  00:57:20.818 # BUILD FAILED in 11s 00:57:20.825 # "/ code placeholder {code}    And sdk-node tests failures:    {code:java} /00:57:20.825 not ok 1017 Error: All proposals were not good at e2eUtils.tlsEnroll.then.then.then.then.then (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:363:11) at process._tickCallback (internal/process/next_tick.js:68:7) 00:57:20.826   --- 00:57:20.826     operator: fail 00:57:20.826     at: e2eUtils.tlsEnroll.then.then.then.then.then.then.catch (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:411:6) 00:57:20.826     stack: |- 00:57:20.826       Error: Error: All proposals were not good 00:57:20.827           at e2eUtils.tlsEnroll.then.then.then.then.then (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:363:11) 00:57:20.827           at process._tickCallback (internal/process/next_tick.js:68:7) 00:57:20.827           at Test.assert  as _assert  (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:225:54) 00:57:20.827           at Test.bound  as _assert  (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:77:32) 00:57:20.827           at Test.fail (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:318:10) 00:57:20.828           at Test.bound  as fail  (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:77:32) 00:57:20.828           at e2eUtils.tlsEnroll.then.then.then.then.then.then.catch (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:411:6) 00:57:20.828           at process._tickCallback (internal/process/next_tick.js:68:7) 00:57:20.828   .../ code placeholder {code} {code:java} /00:57:22.374 not ok 1039 checking query results are correct that value is 110 00:57:22.374   --- 00:57:22.374     operator: equal 00:57:22.374     expected: '110' 00:57:22.374     actual:   '100' 00:57:22.374     at: e2eUtils.tlsEnroll.then.then.then.then (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:831:10) 00:57:22.374     stack: |- 00:57:22.374       Error: checking query results are correct that value is 110 00:57:22.375           at Test.assert  as _assert  (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:225:54) 00:57:22.375           at Test.bound  as _assert  (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:77:32) 00:57:22.375           at Test.equal (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:385:10) 00:57:22.375           at Test.bound  as equal  (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:77:32) 00:57:22.376           at e2eUtils.tlsEnroll.then.then.then.then (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:831:10) 00:57:22.376           at process._tickCallback (internal/process/next_tick.js:68:7) 00:57:22.376   .../ code placeholder {code} same error on test number   {color:#de350b}*not ok 1040 checking query results are correct that value is 110*{color} {code:java} /00:57:22.645 not ok 1045 Checking the result has the transientMap value returned by the chaincode 00:57:22.645   --- 00:57:22.645     operator: equal 00:57:22.645     expected: |- 00:57:22.645       'value' 00:57:22.645     actual: |- 00:57:22.645       'Error: transaction returned with failure: Invalid invoke function name. Expecting one of:  "move", "delete", "query"  but found::testTransient' 00:57:22.645     at: e2eUtils.tlsEnroll.then.then.then.then (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:821:9) 00:57:22.645     stack: |- 00:57:22.645       Error: Checking the result has the transientMap value returned by the chaincode 00:57:22.645           at Test.assert  as _assert  (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:225:54) 00:57:22.645           at Test.bound  as _assert  (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:77:32) 00:57:22.645           at Test.equal (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:385:10) 00:57:22.645           at Test.bound  as equal  (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/tape/lib/test.js:77:32) 00:57:22.645           at e2eUtils.tlsEnroll.then.then.then.then (/w/workspace/fabric-end-2-end-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/e2e/e2eUtils.js:821:9) 00:57:22.645           at process._tickCallback (internal/process/next_tick.js:68:7) 00:57/ code placeholder {code} {color:#172b4d}same on test number {color}  {color:#de350b}*not ok 1046 Checking the result has the transientMap value returned by the chaincode*{color}           *Build Logs:*  https://jenkins.hyperledger.org/view/Daily/job/fabric-end-2-end-daily-master-x86_64/170/consoleFull    https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-end-2-end-x86_64/5867/console      ></description> </Issue>
