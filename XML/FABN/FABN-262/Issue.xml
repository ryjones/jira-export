<Issue id="20182" key="FABN-262" number="262" project="10604" reporter="ldfreema" assignee="jimthematrix" creator="ldfreema" type="10004" summary="Invoke never disconnects from eventhub when Orderer is down" priority="3" resolution="10000" status="6" created="2017-08-14 19:16:32.0" updated="2018-07-19 00:53:25.0" resolutiondate="2017-10-25 16:27:25.0" votes="0" watches="2" workflowId="33993"> <description><! CDATA When performing Invokes when the orderer is unavailable, the following error is displayed, but the invoke never completes due to the eventhub never being disconnected...     ***** invoke transaction to move money ***** ok 1 Successfully enrolled user 'admin' info:  invoke-chaincode : create new peer grpcs://tor-zbc01c.3.secure.blockchain.ibm.com:28000 info:  invoke-chaincode : create new eventhub grpcs://tor-zbc01c.3.secure.blockchain.ibm.com:12093 info:  EventHub.js : _connect - options \{} error:  Orderer.js : sendDeliver - on error code 14: "Error: Connect Failed\n at ClientDuplexStream._emitStatusIfDone (/ctc/keeper/node_modules/grpc/src/node/src/client.js:201:19)\n at ClientDuplexStream._readsDone (/ctc/keeper/node_modules/grpc/src/node/src/client.js:169:8)\n at readCallback (/ctc/keeper/node_modules/grpc/src/node/src/client.js:229:12)" error:  Channel.js : getChannelConfig - Failed Proposal. Error: Error: SERVICE_UNAVAILABLE at ClientDuplexStream.<anonymous> (/ctc/keeper/node_modules/fabric-client/lib/Orderer.js:258:23) at emitOne (events.js:96:13) at ClientDuplexStream.emit (events.js:188:7) at ClientDuplexStream._emitStatusIfDone (/ctc/keeper/node_modules/grpc/src/node/src/client.js:204:12) at ClientDuplexStream._readsDone (/ctc/keeper/node_modules/grpc/src/node/src/client.js:169:8) at readCallback (/ctc/keeper/node_modules/grpc/src/node/src/client.js:229:12) error:  Channel.js : Error: SERVICE_UNAVAILABLE at ClientDuplexStream.<anonymous> (/ctc/keeper/node_modules/fabric-client/lib/Orderer.js:258:23) at emitOne (events.js:96:13) at ClientDuplexStream.emit (events.js:188:7) at ClientDuplexStream._emitStatusIfDone (/ctc/keeper/node_modules/grpc/src/node/src/client.js:204:12) at ClientDuplexStream._readsDone (/ctc/keeper/node_modules/grpc/src/node/src/client.js:169:8) at readCallback (/ctc/keeper/node_modules/grpc/src/node/src/client.js:229:12) not ok 2 Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE --- operator: fail at: process._tickCallback (internal/process/next_tick.js:103:7) stack: |- Error: Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE at Test.assert  as _assert  (/ctc/keeper/node_modules/tape/lib/test.js:212:54) at Test.bound  as _assert  (/ctc/keeper/node_modules/tape/lib/test.js:64:32) at Test.fail (/ctc/keeper/node_modules/tape/lib/test.js:277:10) at Test.bound  as fail  (/ctc/keeper/node_modules/tape/lib/test.js:64:32) at /ctc/keeper/node_sdk/tests.js:899:15 at process._tickCallback (internal/process/next_tick.js:103:7) ... not ok 3 Error: Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE at /ctc/keeper/node_sdk/tests.js:900:19 at process._tickCallback (internal/process/next_tick.js:103:7) --- operator: fail at: process._tickCallback (internal/process/next_tick.js:103:7) stack: |- Error: Error: Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE at /ctc/keeper/node_sdk/tests.js:900:19 at process._tickCallback (internal/process/next_tick.js:103:7) at Test.assert  as _assert  (/ctc/keeper/node_modules/tape/lib/test.js:212:54) at Test.bound  as _assert  (/ctc/keeper/node_modules/tape/lib/test.js:64:32) at Test.fail (/ctc/keeper/node_modules/tape/lib/test.js:277:10) at Test.bound  as fail  (/ctc/keeper/node_modules/tape/lib/test.js:64:32) at /ctc/keeper/node_sdk/tests.js:1009:15 at process._tickCallback (internal/process/next_tick.js:103:7) ... not ok 4 Error: Error: Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE at /ctc/keeper/node_sdk/tests.js:900:19 at process._tickCallback (internal/process/next_tick.js:103:7) at /ctc/keeper/node_sdk/tests.js:1010:19 at process._tickCallback (internal/process/next_tick.js:103:7) --- operator: fail at: process._tickCallback (internal/process/next_tick.js:103:7) stack: |- Error: Error: Error: Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE at /ctc/keeper/node_sdk/tests.js:900:19 at process._tickCallback (internal/process/next_tick.js:103:7) at /ctc/keeper/node_sdk/tests.js:1010:19 at process._tickCallback (internal/process/next_tick.js:103:7) at Test.assert  as _assert  (/ctc/keeper/node_modules/tape/lib/test.js:212:54) at Test.bound  as _assert  (/ctc/keeper/node_modules/tape/lib/test.js:64:32) at Test.fail (/ctc/keeper/node_modules/tape/lib/test.js:277:10) at Test.bound  as fail  (/ctc/keeper/node_modules/tape/lib/test.js:64:32) at /ctc/keeper/node_sdk/tests.js:1027:15 at process._tickCallback (internal/process/next_tick.js:103:7) ... not ok 5 Error: Error: Error: Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE at /ctc/keeper/node_sdk/tests.js:900:19 at process._tickCallback (internal/process/next_tick.js:103:7) at /ctc/keeper/node_sdk/tests.js:1010:19 at process._tickCallback (internal/process/next_tick.js:103:7) --- operator: error expected: |- undefined actual: |-  Error: Error: Error: Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE at /ctc/keeper/node_sdk/tests.js:900:19 at process._tickCallback (internal/process/next_tick.js:103:7) at /ctc/keeper/node_sdk/tests.js:1010:19 at process._tickCallback (internal/process/next_tick.js:103:7)  at: Test.onetime (/ctc/keeper/node_modules/onetime/index.js:22:12) stack: |- Error: Error: Error: Failed to enroll user 'admin'. Error: Error: SERVICE_UNAVAILABLE at /ctc/keeper/node_sdk/tests.js:900:19 at process._tickCallback (internal/process/next_tick.js:103:7) at /ctc/keeper/node_sdk/tests.js:1010:19 at process._tickCallback (internal/process/next_tick.js:103:7) at /ctc/keeper/node_sdk/tests.js:1028:19 at process._tickCallback (internal/process/next_tick.js:103:7) ...     ></description> </Issue>
