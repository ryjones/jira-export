<Issue id="12888" key="FABN-8" number="8" project="10604" reporter="jimthematrix" assignee="harrisob@us.ibm.com" creator="jimthematrix" type="10001" summary="Update the starter kit to support network mode" priority="3" resolution="10000" status="6" created="2016-10-03 20:23:03.0" updated="2018-07-20 19:16:37.0" resolutiondate="2017-02-08 15:34:37.0" votes="0" watches="1" workflowId="33739"> <description><! CDATA  ~ghaskins  has been working on the fabric-ccenv image as the runtime dependency for chaincode deployment. This will make it possible, among other things, to have a pure-docker based set up, without vagrant, that supports chaincode deployment in network mode. Previously this was not possible unless you perform a local build that produces the full fabric-baseimage image.  My conversation with Greg below as reference:  jzhang  3:43 PM    @ghaskins sorry if this question has been asked before, I saw “hyperledger/fabric-baseimage-sandbox” is now published to docker hub, it’s a great enhancement! solves a long-time gnarly error when trying to use docker to set up a network outside of vagrant, where the “network” mode doesn’t work when you try to deploy chaincode, because the hyperledger/fabric-baseimage is missing a bunch of content.  ghaskins  3:43 PM    oh, actually thats not what that is for, heh  jzhang  3:43 PM    I just tested pulling the baseimage-sandbox and tag it as baseimage:latest, now everything works like a charm!  ghaskins  3:43 PM    that image was created so we could debug our baseimage CI pipeline, it really should go away   3:44    but its interesting you were using it like that  jzhang  3:44 PM    yeah that’s why i’m asking   3:44    can i count on it being there?   3:44    sounds like answer is no :wink:  ghaskins  3:44 PM    no, i really should delete it   3:44    but lets talk about the real problem   3:45    the whole “baseimage:latest” thing has been a source of great confusion, and its in the process of being addressed  jzhang  3:45 PM    so going back to my original requirement: we need to have a way for app developers to set up a local network with docker only (without vagrant)  ghaskins  3:45 PM    yep   3:45    understood (I actually want the same!)   3:45    the short answer is: its not ready for that use case quite yet   3:45    the long answer is: being actively worked on  jzhang  3:45 PM    ok great  ghaskins  3:46 PM    i hope to have it all squared away in the next few weeks  jzhang  3:46 PM    is the plan to have fabric-baseimage itself be fully built?   3:46    (read through your google doc proposal, thought that was the plan…)   3:46    (just confirming…)  ghaskins  3:46 PM    well, the plan is that “baseimage” will become what it was always intended: a build-time optimization and not a runtime resource   3:47    right now, its kind of both   3:47    which, as you have discovered, is a problem   3:47    going forward, no runtime references to “baseimage” anything will be made  jzhang  3:48 PM    ok, so then for the runtime resource, where peer needs a base image to spin up instances for running chaincode, it’ll ask for a different image?  ghaskins  3:48 PM    historically, the primary issue is that chaincode deployment depended on baseimage:latest being present  jzhang  3:48 PM    yep  ghaskins  3:48 PM    yes, exactly  jzhang  3:48 PM    ok  ghaskins  3:48 PM    so hyperledger/fabric-ccenv will primarily fill this role  jzhang  3:48 PM    ah  ghaskins  3:48 PM    but we arent publishing it yet, so it acts kind of like baseimage:latest does   3:48    that is, it only works if you build fabric locally   3:49    we will be fixing this  jzhang  3:49 PM    i see  ghaskins  3:49 PM    theres a new templating engine that is in master   3:49    you can get a sense of the direction if you study this:   3:49    https://github.com/hyperledger/fabric/blob/master/peer/core.yaml#L285 GitHub hyperledger/fabric Read-only mirror of https://gerrit.hyperledger.org/r/#/admin/projects/fabric     jzhang  3:50 PM    do you have the FAB # for track this handy?  ghaskins  3:50 PM    that allows us to, for example, pin the ccenv to the same release as the peer  jzhang  3:50 PM    ok will take a look  ghaskins  3:50 PM    its actually pretty close to ready at this point, we just arent pushing the images out yet   3:50    I cant recall if there is a FAB, there might be  jzhang  3:50 PM    got it  ghaskins  3:50 PM    (sorry, too many balls in the air right now)   3:51    couple of caveats: this only applies to master  jzhang  3:51 PM    don’t worry about it then, i assume you’ll send out a notification once it starts publishing...  ghaskins  3:51 PM    v0.6 still works with the old system  jzhang  3:51 PM    that’s ok  ghaskins  3:51 PM    (and actually, features/* like features/convergence are lagging merges   3:51    yeah, ill send out an email/slack when its ready   3:52    long story short, right now things only work if you build locally first (unless you hand massage the system)   3:52    but soon, it will work in a pure docker flow  jzhang  3:52 PM    perfect  ></description> </Issue>
