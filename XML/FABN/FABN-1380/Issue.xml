<Issue id="42360" key="FABN-1380" number="1380" project="10604" reporter="denyeart" assignee="andrew-coleman" creator="denyeart" type="10004" summary="fabric-merge-end-2-end job: Fail to run node.js sdk scenarios on test cucumber test/scenario/features/steps/network_steps.js" priority="2" resolution="10000" status="6" created="2019-09-14 13:14:57.0" updated="2019-09-19 09:36:46.0" resolutiondate="2019-09-19 09:36:46.0" votes="0" watches="3" workflowId="55416"> <description><! CDATA The recent fabric-merge-end-2-end jobs are failing in node.js cucumber tests:  https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/6323/consoleFull  https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/6324/consoleFull   {code:java} 03:42:51     32mâœ” When I use the gateway named test_gateway to submit 5 transactions with args  createValue  for chaincode events01 instantiated on channel mychannel 39m #  90mtest/scenario/features/steps/network_steps.js:72 39m 03:42:51     31mâœ– Then I receive 5 events from the listener unfilteredListener 39m #  90mtest/scenario/features/steps/network_steps.js:110 39m 03:42:51         31mError: Expected unfilteredListener to be called 5 times, but called 0 times 39m 90m 39m 03:42:51         90m    at World.Then (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/scenario/features/steps/network_steps.js:128:10) 39m 03:42:51     32mâœ” After 39m #  90mtest/scenario/features/support/hooks.js:25 39m 03:42:51  03:42:51 8 scenarios ( 31m3 failed 39m,  32m5 passed 39m) 03:42:51 102 steps ( 31m3 failed 39m,  36m17 skipped 39m,  32m82 passed 39m) 03:42:51 12m09.964s 03:42:51 npm ERR! code ELIFECYCLE 03:42:51 npm ERR! errno 1 03:42:51 npm ERR! fabric-sdk-node@2.0.0-snapshot test:cucumber: `cucumber-js ./test/scenario/features/*.feature` 03:42:51 npm ERR! Exit status 1 03:42:51 npm ERR!  03:42:51 npm ERR! Failed at the fabric-sdk-node@2.0.0-snapshot test:cucumber script. 03:42:51 npm ERR! This is probably not a problem with npm. There is likely additional logging output above. 03:42:51  03:42:51 npm ERR! A complete log of this run can be found in: 03:42:51 npm ERR!     /home/jenkins/.npm/_logs/2019-09-14T07_42_51_888Z-debug.log 03:42:51  07:42:51  'run-test-cucumber' errored after 12 min 03:42:51  07:42:51   31mError 39m in plugin " 36mgulp-shell 39m" 03:42:51 Message: 03:42:51     Command `export HFC_LOGGING='{"debug":"/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/temp/debugc.log"}'; npm run test:cucumber` failed with exit code 1 03:42:51  07:42:51  'run-test-merge' errored after 12 min 03:42:51  07:42:51   31mError 39m in plugin " 36mrun-sequence(run-test-cucumber) 39m" 03:42:51 Error 03:42:51     at finish (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/run-sequence/index.js:82:12) 03:42:51     at Gulp.onError (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/run-sequence/index.js:93:3) 03:42:51     at Gulp.emit (events.js:194:15) 03:42:51     at Gulp.Orchestrator._emitTaskDone (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/orchestrator/index.js:264:8) 03:42:51     at /w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/orchestrator/index.js:275:23 03:42:51     at finish (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/orchestrator/lib/runTask.js:21:8) 03:42:51     at cb (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/orchestrator/lib/runTask.js:29:3) 03:42:51     at /w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/gulp-shell/node_modules/async/dist/async.js:473:16 03:42:51     at iterateeCallback (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/gulp-shell/node_modules/async/dist/async.js:988:17) 03:42:51     at /w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/gulp-shell/node_modules/async/dist/async.js:969:16 03:42:51     at ChildProcess.child.on (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/gulp-shell/index.js:72:7) 03:42:51     at ChildProcess.emit (events.js:189:13) 03:42:51     at Process.ChildProcess._handle.onexit (internal/child_process.js:248:12) 03:42:52  31mERROR!!! gulp end-2-end tests failed  0m 03:42:56 Build step 'Execute shell' marked build as failure {code}   ></description> </Issue>
