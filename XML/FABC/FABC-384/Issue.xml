<Issue id="16378" key="FABC-384" number="384" project="10607" reporter="rennman" assignee="skarim" creator="rennman" type="10004" summary="fabric-ca empty certfiles for mysql connection SIGSEGV" priority="3" resolution="10000" status="6" created="2017-05-05 16:58:01.0" updated="2018-07-18 22:04:30.0" resolutiondate="2017-05-31 18:47:14.0" votes="0" watches="2" workflowId="32564"> <description><! CDATA If the db.tls.certfiles setting is emtpy, we segfault:   {code:java} 2017/05/05 16:56:21  DEBUG  Connection String: root:mysql@tcp(localhost:3306)/?parseTime=true&tls=custom panic: runtime error: invalid memory address or nil pointer dereference  signal SIGSEGV: segmentation violation code=0x1 addr=0x68 pc=0x5504ef   goroutine 1  running : panic(0xadd160, 0xc4200140d0) 	/opt/go/src/runtime/panic.go:500 +0x1a1 github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql.parseDSNParams(0xc4203a9380, 0xc4202eb3e0, 0x19, 0xc420091050, 0x0) 	/opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql/dsn.go:492 +0x4ff github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql.ParseDSN(0xc4202eb3c0, 0x39, 0x5202f4, 0x51d5b5, 0x1) 	/opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql/dsn.go:315 +0x5dc github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql.MySQLDriver.Open(0xc4202eb3c0, 0x39, 0x0, 0x28, 0x4, 0xbc5513) 	/opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql/driver.go:56 +0xb9 github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql.(*MySQLDriver).Open(0x10b70a8, 0xc4202eb3c0, 0x39, 0xc42013f630, 0x41391e, 0xc4203c4450, 0x30) 	<autogenerated>:6 +0x60 database/sql.(*DB).conn(0xc420113970, 0x1, 0xc420113970, 0xc4203c4450, 0xc4203c4420) 	/opt/go/src/database/sql/sql.go:824 +0x24e database/sql.(*DB).Ping(0xc420113970, 0x5, 0xc4202eb3c0) 	/opt/go/src/database/sql/sql.go:503 +0x34 github.com/hyperledger/fabric-ca/lib/dbutil.NewUserRegistryMySQL(0xc42014e820, 0x42, 0xc420160988, 0x5, 0x1, 0x0, 0x0) 	/opt/gopath/src/github.com/hyperledger/fabric-ca/lib/dbutil/dbutil.go:227 +0x39a github.com/hyperledger/fabric-ca/lib.(*CA).initDB(0xc42000c4c8, 0x7ffefb647500, 0x0)  {code}   ></description> </Issue>
