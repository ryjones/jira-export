<Action id="24906" issue="17238" author="christopherferris" type="comment" body=" ~weichongli  can you please provide a means of reproducing? Thanks." created="2017-06-01 10:34:54.0" updateauthor="christopherferris" updated="2017-06-01 10:34:54.0"/>
<Action id="24974" issue="17238" author="smithbk" type="comment" created="2017-06-01 17:33:44.0" updateauthor="smithbk" updated="2017-06-01 17:33:44.0"> <body><! CDATA Yes, showing how to reproduce would be most helpful, but if you can show the exact error 1st, that would also help. How have you configured your server wrt to timestamp format? This is the code in which we execute SQL.  MySQL requires a non-empty timestamp, so a default value must be provided. The problem may be related to that somehow.  if _, err := database.Exec("CREATE TABLE certificates (id VARCHAR(64), serial_number varbinary(128) NOT NULL, authority_key_identifier varbinary(128) NOT NULL, ca_label varbinary(128), status varbinary(128) NOT NULL, reason int, expiry timestamp DEFAULT '1970-01-01 00:00:01', revoked_at timestamp DEFAULT '1970-01-01 00:00:01', pem varbinary(4096) NOT NULL, PRIMARY KEY(serial_number, authority_key_identifier)) DEFAULT CHARSET=utf8 COLLATE utf8_bin"); err != nil {   ></body> </Action>
<Action id="25248" issue="17238" author="weichongli" type="comment" created="2017-06-04 05:16:58.0" updateauthor="weichongli" updated="2017-06-04 05:16:58.0"> <body><! CDATA  ~ChristopherFerris   ~smithbk  # a linux server, using CST(GMT+8) as timezone. # deploy mysql server (with default config) # run fabric-ca-server init -c ca-server-config.yaml  {panel:title=ca-server-config.yaml} ......  db:     type: mysql     datasource: dbuser:dbpass@tcp(127.0.0.1:3306)/fabric_ca?parseTime=true  ...... {panel}    #  error occurred while creating mysql table 'certificates'  #  so i changed the sql in 'lib/dbutil/dbutil.go:createMySQLTables()' as following, and it works. {panel:title=new sql:} CREATE TABLE certificates (id VARCHAR(64), serial_number varbinary(128) NOT NULL, authority_key_identifier varbinary(128) NOT NULL, ca_label varbinary(128), status varbinary(128) NOT NULL, reason int, expiry timestamp DEFAULT *{color:#d04437}0{color}*, revoked_at timestamp DEFAULT *{color:#d04437}0{color}*, pem varbinary(4096) NOT NULL, PRIMARY KEY(serial_number, authority_key_identifier)) DEFAULT CHARSET=utf8 COLLATE utf8_bin") {panel}    ></body> </Action>
<Action id="25560" issue="17238" author="smithbk" type="comment" body="Thanks Wei.  Can you tell us what version of MySQL server you are using?  According to @skarim, the version he was using required some non-default configuration to allow 0 dates, but perhaps they have changed the defaults in a later version of MySQL." created="2017-06-06 18:09:02.0" updateauthor="smithbk" updated="2017-06-06 18:09:02.0"/>
<Action id="25783" issue="17238" author="skarim" type="comment" body="https://gerrit.hyperledger.org/r/#/c/10369/" created="2017-06-08 19:18:17.0" updateauthor="skarim" updated="2017-06-08 19:18:17.0"/>
<Action id="26015" issue="17238" author="weichongli" type="comment" created="2017-06-12 12:39:55.0" updateauthor="weichongli" updated="2017-06-12 12:39:55.0"> <body><! CDATA mariadb-server-5.5.52-1.el7.x86_64(centos 7.3)   ~smithbk   ></body> </Action>
<Action id="60240" issue="17238" author="nyet" type="comment" body="{{timestamp DEFAULT 0}} now results in &quot;*Invalid default value*&quot; when mysql server is configured with {{NO_ZERO_DATE}}" created="2019-05-22 06:34:07.0" updateauthor="nyet" updated="2019-05-22 06:35:20.0"/>
<Action id="60241" issue="17238" author="nyet" type="comment" created="2019-05-22 06:43:25.0" updateauthor="nyet" updated="2019-05-22 06:43:25.0"> <body><! CDATA  https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html#sqlmode_no_zero_date   {{NO_ZERO_DATE}} is deprecated as of 2.7.22, so likely strict mode has to be disabled in newer mysql servers, or the schema should be changed to {{timestamp DEFAULT CURRENT_TIMESTAMP}} or {{datetime DEFAULT '1970-01-01 00:00:01'}}  ></body> </Action>
