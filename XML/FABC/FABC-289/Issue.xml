<Issue id="29393" key="FABC-289" number="289" project="10607" reporter="dbshah" creator="dbshah" type="10004" summary="fabric-ca-client enroll call makes an empty intermediatecerts file" priority="4" resolution="10000" status="6" created="2018-04-13 18:39:37.0" updated="2018-07-18 22:04:10.0" resolutiondate="2018-05-21 19:11:38.0" votes="0" watches="3" workflowId="32469"> <description><! CDATA When enrolling a user on CA, the CA not being an intermediate CA, the intermediatecerts folder creates a file for intermediatecert which is blank (has no PEM content). There should be a check, and if the intermediate cert does not exist, the file should not be created.     Steps to reproduce: * Pull `hyperledger/fabric-ca:x86_64-1.1.0` image * Run the container and start `fabric-ca-server` in background.  ```  $ docker run -it hyperledger/fabric-ca:x86_64-1.1.0 bash  root@d772e7231ee8:/# fabric-ca-server start -b admin:adminpw  ```     * Enroll admin user using `fabric-ca-client`  ```  # fabric-ca-client enroll -u http://admin:adminpw@localhost:7054  2018/04/13 18:35:59  INFO  Created a default configuration file at /etc/hyperledger/fabric-ca-server/fabric-ca-client-config.yaml  2018/04/13 18:35:59  INFO  generating key: &\{A:ecdsa S:256}  2018/04/13 18:35:59  INFO  encoded CSR  2018/04/13 18:35:59  INFO  signed certificate with serial number 336793439273262704411331469422228046746825411057  2018/04/13 18:35:59  INFO  127.0.0.1:60988 POST /enroll 201 0 "OK"  2018/04/13 18:35:59  INFO  Stored client certificate at /etc/hyperledger/fabric-ca-server/msp/signcerts/cert.pem  2018/04/13 18:35:59  INFO  Stored root CA certificate at /etc/hyperledger/fabric-ca-server/msp/cacerts/localhost-7054.pem  2018/04/13 18:35:59  INFO  Stored intermediate CA certificates at /etc/hyperledger/fabric-ca-server/msp/intermediatecerts/localhost-7054.pem  ```    * Check the intermediatecerts folder  ```  /# ls -al /etc/hyperledger/fabric-ca-server/msp/intermediatecerts/                    total 8  drwxr-xr-x 2 root root 4096 Apr 13 18:35 *.*  drwxr-xr-x 6 root root 4096 Apr 13 18:35 *..*  -rw-r--r-- 1 root root    0 Apr 13 18:35 localhost-7054.pem  ```  The pem file is empty.           ></description> </Issue>
