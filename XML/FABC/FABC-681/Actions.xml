<Action id="18928" issue="12693" author="mastersingh24" type="comment" body="Looks like communication with the ACA from the other CAs is hard-coded to use insecure GRPC transport:   https://gerrit.hyperledger.org/r/gitweb?p=fabric.git;a=blob;f=membersrvc/ca/client_grpc.go;hb=HEAD" created="2016-09-17 10:04:08.0" updateauthor="mastersingh24" updated="2016-09-17 10:04:08.0"/>
<Action id="19028" issue="12693" author="mastersingh24" type="comment" body=" ~keithsmith  - can you assign someone to fix this?   if not, let me know and I&apos;ll fix it" created="2016-09-28 11:13:09.0" updateauthor="mastersingh24" updated="2016-09-28 11:13:09.0"/>
<Action id="19030" issue="12693" author="smithbk" type="comment" body="Pho, pls take a look.  We can discuss if you want.  Thanks" created="2016-09-28 11:54:01.0" updateauthor="smithbk" updated="2016-09-28 11:54:01.0"/>
<Action id="19049" issue="12693" author="bmos299" type="comment" body="Added .6 Label.  Yea, this one would cause us grief. " created="2016-09-29 18:23:49.0" updateauthor="bmos299" updated="2016-09-29 18:23:49.0"/>
<Action id="19068" issue="12693" author="clayton sims" type="comment" body="Pho what is the outlook to fix this?" created="2016-09-30 14:30:44.0" updateauthor="clayton sims" updated="2016-09-30 14:30:44.0"/>
<Action id="19069" issue="12693" author="ashutosh_kumar" type="comment" body="made change to code to incorporate TLS on Client side. Handshake failing with Bad Certificate error. Investigating the issue. " created="2016-09-30 15:01:56.0" updateauthor="ashutosh_kumar" updated="2016-09-30 15:01:56.0"/>
<Action id="19071" issue="12693" author="ple8lf" type="comment" created="2016-09-30 15:13:11.0" updateauthor="ple8lf" updated="2016-09-30 15:13:11.0"> <body><! CDATA  ~Clayton Sims  I am working with Ash Kumar to create a client side TLS connection to ACA. We are encountering the following error and working to resolve it. We will update the status. Thanks.  transport: http2Server.HandleStreams received bogus greeting from client: "\x16\x03\x01\x00\x9a\x01\x00\x00\x96\x03\x03Y\xc3\x14Xè¼‰\xcf \xfe\x97e\xf3" under acap:  rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure 2016/09/30 15:08:28 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = "transport: tls: first record does not look like a TLS handshake"; Reconnecting to {"localhost:7054" <nil>}  ></body> </Action>
<Action id="19072" issue="12693" author="ashutosh_kumar" type="comment" body="Pho is looking into the error and I am going to create standalone GRPC client and Server running on TLS to mimic the problem that we are getting. Will post update here." created="2016-09-30 15:17:55.0" updateauthor="ashutosh_kumar" updated="2016-09-30 15:17:55.0"/>
<Action id="19079" issue="12693" author="ashutosh_kumar" type="comment" body="I wrote GRPC client and server on TLS  , outside of fabric and tried to connect using same code base that we have it fabric. And it worked. It tells me that there is something wrong in fabric. Going to debug that. Will keep posted." created="2016-09-30 18:27:44.0" updateauthor="ashutosh_kumar" updated="2016-09-30 18:27:44.0"/>
<Action id="19080" issue="12693" author="ple8lf" type="comment" created="2016-09-30 19:06:59.0" updateauthor="ple8lf" updated="2016-09-30 19:06:59.0"> <body><! CDATA It appears that TLS connection was established, but on different version: TLS1.2(server) vs SSLv2(client): -------------- grpc: Server.Serve failed to complete security handshake from "10.0.2.2:50805": tls: unsupported SSLv2 handshake received -------------  ></body> </Action>
<Action id="19081" issue="12693" author="ashutosh_kumar" type="comment" body="The request goes from ECA to ACA in vagrant and they use same go runtime. I am confused as to why there is TLS/SSL version mismatch between two. I&apos;ll try to force using TLS 1.2 from TLS client code. " created="2016-09-30 19:12:55.0" updateauthor="ashutosh_kumar" updated="2016-09-30 19:12:55.0"/>
<Action id="19082" issue="12693" author="ashutosh_kumar" type="comment" body="After forcing TLS client to send traffic on TLS 1.0 and above , the  TLS/SSL version mismatch was gone. We thought : Client sending bogus greeting(which was there from beginning)  might be related to key and cert that is being generated by TLSCA  ,and we created our own key pair and referred that from code. That made peers fail to start. We reverted back code to use TLSCA key material to be used and the PEER startup problem went away. We are going to work through the problem." created="2016-09-30 22:39:29.0" updateauthor="ashutosh_kumar" updated="2016-09-30 22:40:25.0"/>
<Action id="19083" issue="12693" author="ple8lf" type="comment" body="I will continue to work on it this weekend and reach out to Ash if needed." created="2016-09-30 22:41:37.0" updateauthor="ple8lf" updated="2016-09-30 22:41:37.0"/>
<Action id="19091" issue="12693" author="ple8lf" type="comment" created="2016-10-03 04:27:00.0" updateauthor="ple8lf" updated="2016-10-03 04:28:31.0"> <body><! CDATA We have been able to resolve the TLS version mismatch issue: server (TLS1.2) vs. client (SSLv2). The "bogus greeting" error is resolved. ------------- grpc: Server.Serve failed to complete security handshake from "10.0.2.2:50805": tls: unsupported SSLv2 handshake received ------------  We are looking into these two errors: --------- from membersrvc.log grpc: Server.Serve failed to complete security handshake from "127.0.0.1:54009": EOF  from peer.log: Server.Serve failed to create ServerTransport:  connection error: desc = "transport: write tcp 127.0.0.1:7051->127.0.0.1:60604: write: broken pipe" ---------  ></body> </Action>
<Action id="19104" issue="12693" author="clayton sims" type="comment" body="What is the ETA for this fix?   This is the last defect issue for V0.6" created="2016-10-04 13:55:39.0" updateauthor="clayton sims" updated="2016-10-04 13:55:39.0"/>
<Action id="19105" issue="12693" author="ashutosh_kumar" type="comment" body="We do not have solution to TLS yet. Will update end of day today." created="2016-10-04 14:34:51.0" updateauthor="ashutosh_kumar" updated="2016-10-04 14:34:51.0"/>
<Action id="19186" issue="12693" author="christopherferris" type="comment" body="this is the gerrit review https://gerrit.hyperledger.org/r/#/c/1607/ and this apparently are the corresponding tests https://gerrit.hyperledger.org/r/#/c/1655/1 but there is a conflict. Why isn&apos;t this either two serialized patchsets or one?" created="2016-10-10 16:19:15.0" updateauthor="christopherferris" updated="2016-10-10 16:19:15.0"/>
