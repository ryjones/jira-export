<Issue id="20193" key="FABC-363" number="363" project="10607" reporter="keysjrw" assignee="skarim" creator="keysjrw" type="10004" summary="FABRIC CA init not correctly initializing remote postgres" environment="Ubuntu 16.04. IBM BM VMs. Fabric ca cloned form github a week ago." priority="3" resolution="10000" status="6" created="2017-08-15 11:59:34.0" updated="2018-07-18 22:04:25.0" resolutiondate="2017-10-28 09:38:51.0" votes="0" watches="2" workflowId="32543"> <description><! CDATA PostgreSQL always expects to connect to a database, it does not allow establishing a connection just to the server itself. This causes issues when you specify a database in the connection string that does not exist. Fabric-ca-server is capable of creating the database if it does not exist. However, Postgres will complain if you established a connection with a database that did not exist and then try to create a new database. It should be noted that if in the connection string has no database is specified, it uses the username for the database name.   The solution to this is multiple attempts at establishing a connection. A default PostgresSQL installation comes with two default database that can be used to establish a connection - "template1" and "postgres". The retry logic would work as follows:  1. Connect to database specified in connection string 2. If 1 fails, connect to "postgres" database 3. If 2 fails, connect to "template1" database 4. If 1-3 fail, throw an error indicating database initialization failed and that database needs to be created manually. The server will continue to start but will try to reinitialize the database on the next request the server receives.   *Original Description:* FABRIC Ca on 1 server and postgres on another. No docker. init does not create the database or tables or insert rows. No errors from init (or start). I've tried as root and as me. I've rebuilt the ca server many times. A set of representative logs included.  ></description> </Issue>
