<Action id="21987" issue="15591" author="mastersingh24" type="comment" created="2017-04-09 13:22:34.0" updateauthor="mastersingh24" updated="2017-04-09 13:22:34.0"> <body><! CDATA I don't actually understand the reasoning behind the logic written above.  I believe we want things to work in the following manner:  1) At the CA level, there is a max enrollments setting  2) The CA max enrollments setting has the following possible values:  -1 - no limit on the number of enrollments 0 - no enrollments (although I am not sure what this would be for other than to say that by default users are not able to enroll) >= 1 - the maximum number of enrollments for a user  3) We have the ability to set per user max enrollments  4) The following policies apply for per user max enrollments:  - if the register user request does not contain max enrollments, the CA max enrollment value should be used  - if the CA max enrollments is >=1, then the max enrollments for a user must be <= CA max enrollments - if the CA max enrollments = 0, then it follows that user max enrollments must be 0  Questions / Comments:  1) I'm not sure why one would set CA max enrollments to 0 nor why someone would set user max enrollments to 0.  Do we really need this case? 2) I do not believe that we "calculate" the user max enrollments based on CA max enrollments.  We should simply return an error if the user request enrollment is not in line with the CA max enrollments setting, for example:  - if  CA max enrollments >= 1 and user max enrollment > CA max enrollments, return error stating the max enrollment for the CA has been exceeded (we can decide whether or not we should return the actual CA max enrollment value or not)  - if CA max enrollments = 0 and user max enrollments != 0, return an error  3) are we allowing unlimited enrollments per user (it's a nice development setting)?  ></body> </Action>
<Action id="22038" issue="15591" author="smithbk" type="comment" created="2017-04-10 13:59:05.0" updateauthor="smithbk" updated="2017-04-10 13:59:05.0"> <body><! CDATA 1) A user max enrollment of 0 does not make sense, but a CA max enrollment of 0 simply means we disable enrollment for some period of time, which I think is a valid use case.   For example, an open enrollment period comes to an end.  2) I agree with both of your examples and that is the way that the code should work.  Another use case is as follows: * If user A is registered with max enrollments of 3 and CA max enrollments is later changed to 2, then the user should be limited to 2 enrollments. * Continuing the above example, if CA max enrollments is later changed to -1 (unlimited), then user A has max enrollments of 3.  3) Yes, we are allowing max enrollments per user as long as the CA max enrollments is unlimited.  ></body> </Action>
<Action id="22099" issue="15591" author="mastersingh24" type="comment" body="I think we should make sure that when someone register&apos;s a user that the enrollment limits match the CA setting and if not reject the register request.  This keeps things much simpler IMHO rather than allowing people to THINK they registered a user with one value and have another enforced" created="2017-04-11 16:21:58.0" updateauthor="mastersingh24" updated="2017-04-11 16:21:58.0"/>
<Action id="22729" issue="15591" author="smithbk" type="comment" created="2017-04-19 21:54:35.0" updateauthor="smithbk" updated="2017-04-19 21:54:35.0"> <body><! CDATA Gari, we do exactly this.  That is, we do reject a register request that does not match the CA setting.  If we do not do this, it is a bug.  But we also want to reject an enrollment request if it exceeds either the per-user max_enrollments setting OR the current CA's max_enrollment settings, where "current" means at the time the enroll request is received.  ></body> </Action>
<Action id="22868" issue="15591" author="christopherferris" type="comment" body="https://gerrit.hyperledger.org/r/#/c/7741/" created="2017-04-22 19:00:26.0" updateauthor="christopherferris" updated="2017-04-22 19:00:26.0"/>
<Action id="24197" issue="15591" author="christopherferris" type="comment" body="I&apos;m trying to understand the impact of leaving this post 1.0, if any." created="2017-05-23 20:00:05.0" updateauthor="christopherferris" updated="2017-05-23 20:00:05.0"/>
<Action id="24262" issue="15591" author="mastersingh24" type="comment" body="The logic is currently flawed and will not work the way users expect.  I don&apos;t see any risk in doing this given that what we have does not work correctly anyway" created="2017-05-24 19:39:49.0" updateauthor="mastersingh24" updated="2017-05-24 19:39:49.0"/>
<Action id="24289" issue="15591" author="baohua" type="comment" created="2017-05-25 01:37:36.0" updateauthor="baohua" updated="2017-05-25 01:37:36.0"> <body><! CDATA Would like to suggest switch the meaning of the enrollment number value between -1 and 0.  The following seems more natural for me :) 0: Infinite number of enrollments (i.e. no limit) -1: Enrollments disabled globally  ></body> </Action>
<Action id="24427" issue="15591" author="mastersingh24" type="comment" body=" ~baohua  I&apos;ve seen things done both ways (which I agree is odd) but I tend to think the current way is the way to go (basically -1 means we are not honoring limits which means unlimited)" created="2017-05-26 10:25:24.0" updateauthor="mastersingh24" updated="2017-05-26 10:25:24.0"/>
<Action id="24540" issue="15591" author="baohua" type="comment" created="2017-05-27 00:32:40.0" updateauthor="baohua" updated="2017-05-27 00:32:40.0"> <body><! CDATA Thanks gari!  I agree, however, still try to post a comment here, to indicate that the configuration semantic  inconsistency between fabric and fabric-ca if we keep unchanged.  e.g., in configtx.yaml, we use 0 means unlimited for the Orderer.MaxChannels.  I guess it would be better if we use the same style in future :)  ></body> </Action>
<Action id="24541" issue="15591" author="christopherferris" type="comment" body="https://gerrit.hyperledger.org/r/#/c/7741/" created="2017-05-27 00:33:36.0" updateauthor="christopherferris" updated="2017-05-27 00:33:36.0"/>
<Action id="25022" issue="15591" author="weeds" type="comment" created="2017-06-01 22:06:41.0" updateauthor="weeds" updated="2017-06-01 22:06:41.0"> <body><! CDATA any  more votes for this one?     ></body> </Action>
<Action id="25051" issue="15591" author="christopherferris" type="comment" body="This now has the requisite number of votes and can be merged" created="2017-06-02 00:16:49.0" updateauthor="christopherferris" updated="2017-06-02 00:16:49.0"/>
