<Issue id="14107" key="FABC-362" number="362" project="10607" reporter="skarim" assignee="skarim" creator="skarim" type="10004" summary="Server throws stack trace when enrolling user with sign endpoint disabled" priority="3" resolution="10000" status="6" created="2017-01-16 21:04:26.0" updated="2018-07-18 22:04:25.0" resolutiondate="2017-03-10 15:55:16.0" votes="0" watches="1" timeoriginalestimate="28800" timeestimate="28800" workflowId="32542"> <description><! CDATA Need to more gracefully handle error case where COP server was started with no certificate and key, and thus the CFSSL sign endpoint is not disabled. In the scenario, if an enroll is attempted the follow stack trace is seen on the server:  2017/01/16 15:33:51  DEBUG  Received request for endpoint enroll 2017/01/16 15:33:51 http: panic serving 127.0.0.1:63301: runtime error: invalid memory address or nil pointer dereference goroutine 36  running : net/http.(*conn).serve.func1(0xc420691a80) 	/usr/local/go/src/net/http/server.go:1491 +0x12a panic(0x4717fe0, 0xc4200140c0) 	/usr/local/go/src/runtime/panic.go:458 +0x243 github.com/hyperledger/fabric-cop/cli/server.(*signHandler).Handle(0xc42073d170, 0x4ab51a0, 0xc420244750, 0xc420734c30, 0xc42073e601, 0xc4202f8dc0) 	/Users/saadkarim/Development/src/github.com/hyperledger/fabric-cop/cli/server/enroll.go:76 +0x20d github.com/hyperledger/fabric-cop/vendor/github.com/cloudflare/cfssl/api.HTTPHandler.ServeHTTP(0x4aacb20, 0xc42073d170, 0xc42073d180, 0x1, 0x1, 0x4ab51a0, 0xc420244750, 0xc420734c30) 	/Users/saadkarim/Development/src/github.com/hyperledger/fabric-cop/vendor/github.com/cloudflare/cfssl/api/api.go:85 +0x3e4 github.com/hyperledger/fabric-cop/vendor/github.com/cloudflare/cfssl/api.(*HTTPHandler).ServeHTTP(0xc4207319e0, 0x4ab51a0, 0xc420244750, 0xc420734c30) 	<autogenerated>:4 +0x8c github.com/hyperledger/fabric-cop/cli/server.(*copAuthHandler).ServeHTTP(0xc42073e680, 0x4ab51a0, 0xc420244750, 0xc420734c30) 	/Users/saadkarim/Development/src/github.com/hyperledger/fabric-cop/cli/server/auth.go:82 +0x91 net/http.(*ServeMux).ServeHTTP(0x4aebe40, 0x4ab51a0, 0xc420244750, 0xc420734c30) 	/usr/local/go/src/net/http/server.go:2022 +0x7f net/http.serverHandler.ServeHTTP(0xc420691880, 0x4ab51a0, 0xc420244750, 0xc420734c30) 	/usr/local/go/src/net/http/server.go:2202 +0x7d net/http.(*conn).serve(0xc420691a80, 0x4ab5aa0, 0xc420241cc0) 	/usr/local/go/src/net/http/server.go:1579 +0x4b7 created by net/http.(*Server).Serve 	/usr/local/go/src/net/http/server.go:2293 +0x44d  Need to provide more meaningful error.  ></description> </Issue>
