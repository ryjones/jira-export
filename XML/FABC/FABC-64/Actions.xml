<Action id="28822" issue="19422" author="rennman" type="comment" created="2017-07-21 20:52:22.0" updateauthor="rennman" updated="2017-07-21 20:52:22.0"> <body><! CDATA Steps to re-create.  1) Add the softhsm install script to the fvt-image's Dockerfile.  From the fabric repo, copy    images/testenv/install-softhsm2.sh to the fabric-ca:    images/fabric-ca-fvt/payload/install-softhsm2.sh    2) Modify the bccsp setup in scripts/fvt/fabric-ca_utils. {code:java} BCCSP: Default: PKCS11 PKCS11: Library: /usr/lib/x86_64-linux-gnu/softhsm/libsofthsm2.so Pin: '98765432' Label: 'ForFabric' Hash: SHA2 Security: 256 FileKeyStore: KeyStore: msp/keystore{code} 3) Build the fvt-image using dynamically linked glibc {code:java} FABRIC_CA_DYNAMIC_LINK make docker-fvt {code}  4) Start the container: {code:java} docker run -v ${GOPATH}/src/github.com/hyperledger/fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca -ti hyperledger/fabric-ca-fvt bash {code}  5) Run the intermediate_ca test using TLS: {code:java} root@b23f01e05e7d:/opt/gopath/src/github.com/hyperledger/fabric-ca# FABRIC_TLS=true ./scripts/fvt/intermediateca_test.sh {code}  ></body> </Action>
<Action id="29242" issue="19422" author="jamesgua" type="comment" created="2017-07-31 14:37:45.0" updateauthor="jamesgua" updated="2017-07-31 14:37:45.0"> <body><! CDATA It fails because currently it can't find private key, to bypass, add line in file signer.go line 48 after "return nil, errors.New("key must be asymmetric.")"  if !key.Private() \{ return nil, errors.New("key must be private.") }  file location:  ./vendor/github.com/hyperledger/fabric/bccsp/signer/signer.go  Another issue when tried on Ubuntu-s390x: docker image created OS type is Debian but not Ubuntu so libsofthsm2.so location is not at /usr/lib/s390x-linux-gnu/softhsm, modify to fit the condition set in script then test would pass   ></body> </Action>
<Action id="42278" issue="19422" author="aambati" type="comment" body=" ~rennman  is this still a problem? Can this be closed?" created="2018-03-28 20:02:37.0" updateauthor="aambati" updated="2018-03-28 20:02:37.0"/>
<Action id="42869" issue="19422" author="mastersingh24" type="comment" body="I&apos;m pretty sure this is no longer an issue  ~aambati " created="2018-04-12 13:24:40.0" updateauthor="mastersingh24" updated="2018-04-12 13:24:40.0"/>
