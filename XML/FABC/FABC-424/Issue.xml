<Issue id="30651" key="FABC-424" number="424" project="10607" reporter="skarim" creator="skarim" type="10001" summary="Enhance fabric-ca-client to retry failures caused by outdated CRI" priority="3" status="10000" created="2018-05-25 18:05:12.0" updated="2019-12-03 00:15:41.0" votes="0" watches="2" workflowId="32606"> <description><! CDATA The way the revocation handle works is that once the RHPool has been exhausted, a new setÂ  of revocation handles (RH) are generated. This means that any identities that were previously enrolled and received a SignerConfig, now have an outdated CRI. All credentials with an old CRI will no longer be valid, and requests made to the server will get rejected with the following message: {code:java} Failed to verify the token: signature is based on an invalid revocation epoch public key: EpochPKSig invalid {code} When a user encounters this message they will have to get a new CRI. Currently, this is a manual process. Once the user sees this error they have go invoke the *getcri* command to update their CRI in their SignerConfig and then re-invoke their original requests. This logic can be made smarter  The the client can detect the reason for failure based upon the error code, and if its because of an old CRI the client on behalf of the user can make a request to update the CRI in the SignerConfig and then reissue the original request. This will improve the usability of the Fabric CA client.  ></description> </Issue>
