<Action id="23083" issue="16053" author="aambati" type="comment" body=" ~dbshah quick question, so, *db.datasource *and *db.type *are not being read from the configuration file? " created="2017-04-27 17:33:21.0" updateauthor="aambati" updated="2017-04-27 17:33:21.0"/>
<Action id="23084" issue="16053" author="dbshah" type="comment" body="Yes." created="2017-04-27 17:40:49.0" updateauthor="dbshah" updated="2017-04-27 17:40:49.0"/>
<Action id="23699" issue="16053" author="aambati" type="comment" created="2017-05-10 20:43:29.0" updateauthor="aambati" updated="2017-05-10 20:43:29.0"> <body><! CDATA  ~dbshah  Can you please update the affected version field. I tried to reproduce the problem with v.1.0.0 but could not. If db.datasource and db.type values are not being read from the config file, fabric-ca-server should default to sqllite , is that what you are seeing?     i ran the server like this:  {{bin/fabric-ca-server start -c config/config.yml}}     my config.yml has this:   {quote}db:    type: mysql    datasource: root:mysql@tcp(localhost:8003)/fabric-ca?parseTime=true    tls:        enabled: false        certfiles:          - db-server-cert.pem        client:          certfile: db-client-cert.pem          keyfile: db-client-key.pem {quote}    the output of the server is : {quote}2017/05/10 16:39:33  INFO  Configuration file location: /Users/aambati/Blockchain/fabric/src/github.com/hyperledger/fabric-ca/config/config.yml  2017/05/10 16:39:33  INFO  Starting server in home directory: /Users/aambati/Blockchain/fabric/src/github.com/hyperledger/fabric-ca/config  2017/05/10 16:39:33  INFO  CA Home Directory: /Users/aambati/Blockchain/fabric/src/github.com/hyperledger/fabric-ca/config  2017/05/10 16:39:33  INFO  The CA key and certificate already exist  2017/05/10 16:39:33  INFO  The key is stored by BCCSP provider 'SW'  2017/05/10 16:39:33  INFO  The certificate is at: /Users/aambati/Blockchain/fabric/src/github.com/hyperledger/fabric-ca/config/ca-cert.pem  *2017/05/10 16:39:33  ERROR  Failed to connect to MySQL database  error: dial tcp  ::1 :8003: getsockopt: connection refused *  Error: Failed to query 'INFORMATION_SCHEMA.SCHEMATA table: dial tcp  ::1 :8003: getsockopt: connection refused {quote} i don't have mysql on my machine but as you can see it read the db.datasource and db.type fields from the error  ></body> </Action>
<Action id="23701" issue="16053" author="dbshah" type="comment" created="2017-05-10 21:10:43.0" updateauthor="dbshah" updated="2017-05-10 21:10:43.0"> <body><! CDATA {quote}root@tm-02:~# docker logs -f net_fabric-ca-0a_1   2017-05-10 21:04:31,914 CRIT Supervisor running as root (no user in config file)  2017-05-10 21:04:31,923 CRIT Server 'unix_http_server' running without any HTTP authentication checking  2017/05/10 21:04:32  INFO  Configuration file location: /mnt/fabric-ca-0a/ca.yaml  2017/05/10 21:04:33 Initialize BCCSP  SW   2017/05/10 21:04:33  DEBUG  Init with home /mnt/fabric-ca-0a and config \{Port:7054 Address:0.0.0.0 Debug:true TLS:\{Enabled:false CertFile:/mnt/tls-certs/cert.pem KeyFile:/mnt/tls-certs/key.pem} CSP:<nil> CA:\{Name: Keyfile:/mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-key.pem Certfile:/mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-cert.pem Chainfile:ca-chain.pem} Signing:0xc4201e52e0 CSR:\{CN:fabric-ca-server Names: \{C:US ST:North Carolina L: O:Hyperledger OU:Fabric SerialNumber:}  Hosts: fed70d0e0b40  KeyRequest:<nil> CA:<nil> SerialNumber:} Registry:\{MaxEnrollments:0 Identities: \{Name:admin Pass:adminpw Type:client Affiliation:group1 MaxEnrollments:0 Attrs:map hf.Revoker:1 hf.IntermediateCA:1 hf.Registrar.DelegateRoles:client,user,validator,auditor hf.Registrar.Roles:client,user,peer,validator,auditor,ca } } Affiliations:map org1: department1 department2  org2: department1   LDAP:\{Enabled:false URL:ldap://<adminDN>:<adminPassword>@<host>:<port>/<base> UserFilter:(uid=%s) GroupFilter:(memberUid=%s)} DB:\{Type:sqlite3 Datasource:fabric-ca-server.db TLS:\{Enabled:false CertFiles: CertFilesList:   Client:\{KeyFile: CertFile:}}} Remote: Client:<nil>}  2017/05/10 21:04:33  INFO  The CA key and certificate files already exist  2017/05/10 21:04:33  INFO  Key file location: /mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-key.pem  2017/05/10 21:04:33  INFO  Certificate file location: /mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-cert.pem  2017/05/10 21:04:33  DEBUG  Initializing 'sqlite3' data base at '/mnt/fabric-ca-0a/fabric-ca-server.db'  2017/05/10 21:04:33  DEBUG  Using sqlite database, connect to database in home (/mnt/fabric-ca-0a/fabric-ca-server.db) directory {quote}            {quote}root@tm-02:~# docker exec -it net_fabric-ca-0a_1 cat /mnt/fabric-ca-0a/ca.yaml  affiliations:    org1:    - department1    - department2    org2:    - department1  ca:    certfile: /mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-cert.pem    keyfile: /mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-key.pem  crypto:    software:      ephemeral: false      hash_family: SHA2      key_store_dir: keys      security_level: 256  csr:    ca:      expiry: null      pathlen: null      pathlenzero: null    cn: fabric-ca-server    hosts:    - fed70d0e0b40    names:    - C: US      L: null      O: Hyperledger      OU: Fabric      ST: North Carolina  database:    type: mysql    datasource: root:rootpw@tcp(mysql-server.net_blockchain.com:3306)/fabricca?parseTime=true&tls=custom    tls:      certfiles:      - db-server-cert.pem {quote}    This is after the alpha release, so probably that's the problem. I understand that it has changed a lot since.  Commit level: bad8552.  ></body> </Action>
<Action id="23911" issue="16053" author="smithbk" type="comment" body="So is this fixed in the v1.0.0-alpha2 drop or is this still a problem?" created="2017-05-16 20:16:44.0" updateauthor="smithbk" updated="2017-05-16 20:16:44.0"/>
<Action id="24015" issue="16053" author="dbshah" type="comment" body="Seems to be fixed in later versions. Closing this." created="2017-05-18 13:14:53.0" updateauthor="dbshah" updated="2017-05-18 13:14:53.0"/>
