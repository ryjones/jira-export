<Action id="23910" issue="16749" author="smithbk" type="comment" created="2017-05-16 20:02:34.0" updateauthor="smithbk" updated="2017-05-16 20:02:34.0"> <body><! CDATA First, I assume you meant to say "whether or not a fabric-ca-server was healthy" rather than "whether or not an orderer was healthy" above.  Next, the following returns info for the default CA, or you could pass a "?ca=<caname>" query parm to get info for a non-default CA name. {code:java} # curl http://localhost:7054/api/v1/cainfo {"success":true,"result":{"CAName":"","CAChain":"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNFekNDQWJxZ0F3SUJBZ0lVRWdyVXZyczFDaDNXZjBrSjdEaGtRQkZNUGdrd0NnWUlLb1pJemowRUF3SXcKYURFTE1Ba0dBMVVFQmhNQ1ZWTXhGekFWQmdOVkJBZ1REazV2Y25Sb0lFTmhjbTlzYVc1aE1SUXdFZ1lEVlFRSwpFd3RJZVhCbGNteGxaR2RsY2pFUE1BMEdBMVVFQ3hNR1JtRmljbWxqTVJrd0Z3WURWUVFERXhCbVlXSnlhV010ClkyRXRjMlZ5ZG1WeU1CNFhEVEUzTURVeE5qRTVOREl3TUZvWERUSXlNRFV4TlRFNU5ESXdNRm93YURFTE1Ba0cKQTFVRUJoTUNWVk14RnpBVkJnTlZCQWdURGs1dmNuUm9JRU5oY205c2FXNWhNUlF3RWdZRFZRUUtFd3RJZVhCbApjbXhsWkdkbGNqRVBNQTBHQTFVRUN4TUdSbUZpY21sak1Sa3dGd1lEVlFRREV4Qm1ZV0p5YVdNdFkyRXRjMlZ5CmRtVnlNRmt3RXdZSEtvWkl6ajBDQVFZSUtvWkl6ajBEQVFjRFFnQUUxa1ZGSXYxeEdUZ0VtSnF4bndqZDRjeC8KYWl6aUplMHVpakxhbW1HN05iKzhldSt2OTBEU0ZsMVA0SXBUUmNIck1HbnQrVDJaRmtjQmxZTVV4M3QzbGFOQwpNRUF3RGdZRFZSMFBBUUgvQkFRREFnRUdNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUVGTGNJCkFwaGUwRm16bU4zZlMrTFZEUlJWKzVmT01Bb0dDQ3FHU000OUJBTUNBMGNBTUVRQ0lGT2dHMVhmSkJLV1ovdEIKemtKUDJOcWNwaVR4TkN4US9td2xXeUY1VVhhWUFpQkQzMUtjTzNmd0RuRjBkSWpEbnpWSjIwWCs2NFV1ejZNUQoveXpUZWlRcDhRPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="},"errors":  ,"messages":  }{code} Is this sufficient?  Just wondering what is required here.  Two thoughts for enhancments, but only as needed:  1) Also keep track of connection status or total errors to the backend DB and LDAP (if configured).  2) A single "GET /api/v1/info" route which returns info on all CAs hosted by the server.     ></body> </Action>
<Action id="23913" issue="16749" author="ptippett" type="comment" created="2017-05-16 21:40:14.0" updateauthor="ptippett" updated="2017-05-16 21:40:14.0"> <body><! CDATA Hi Keith, yeah you caught my cut-paste error...I meant fabric-ca.  This looks sufficient to me.  The requirement was a simple API to let us know the fabric-ca was running and healthy on one node so we could restart a 2nd node or just in general tell if fabric CA is running.    I do think 1 especially is a worthwhile enhancement, but I don't think it's critical to rush into 1.0.  ></body> </Action>
<Action id="23968" issue="16749" author="smithbk" type="comment" created="2017-05-17 21:38:56.0" updateauthor="smithbk" updated="2017-05-17 21:38:56.0"> <body><! CDATA OK, so I suggest for v1 that we add a simple "HEAD /" API which I believe is the typical health check URL.  This is a trivial change and is keeping with the standard HAProxy check as described at  http://www.serverlab.ca/tutorials/linux/network-services/how-to-configure-haproxy-health-checks/      But since there is already a URL to use, can you set severity to medium?  ></body> </Action>
<Action id="24346" issue="16749" author="smithbk" type="comment" created="2017-05-25 16:19:41.0" updateauthor="smithbk" updated="2017-06-07 15:38:25.0"> <body><! CDATA Since there is already a way to do a health check as shown in the 1st comment, and adding a "HEAD /" API is adding a new feature which is too late for v1,  I'm changing the description of this jira item, changed to an improvement, setting the priority to low, and moving to v1.  ></body> </Action>
<Action id="25842" issue="16749" author="ptippett" type="comment" created="2017-06-09 12:32:39.0" updateauthor="ptippett" updated="2017-06-09 12:32:39.0"> <body><! CDATA Hi Keith.  I've learned 2 things that make me think we do want the HEAD request for 1.0.     1 - the GRPC endpoints on the orderer and peer both respond to HTTPs HEAD requests.  2 - The status API we originally discussed generates an info level log message.  I don't want to fill up the logs with status check messages and confuse users and maybe hide important messages.  Changing the log level of that message may be an option as well.  ></body> </Action>
<Action id="25845" issue="16749" author="smithbk" type="comment" body="Paul, while I agree it would be nice to have, you can work around #1 and #2 (filling up the logs) is going to be a problem anyway since we log an info message for each request received.  True, it will fill up a bit sooner but I think we need to support rolling logs in v1.1 more importantly.  At that time, we can support the HEAD request also." created="2017-06-09 12:43:58.0" updateauthor="smithbk" updated="2017-06-09 12:43:58.0"/>
<Action id="29066" issue="16749" author="ptippett" type="comment" body="Hi Keith.  Is this going to be in 1.1?" created="2017-07-27 00:14:04.0" updateauthor="ptippett" updated="2017-07-27 00:14:04.0"/>
<Action id="29456" issue="16749" author="mastersingh24" type="comment" body="https://gerrit.hyperledger.org/r/12143" created="2017-08-04 14:11:25.0" updateauthor="mastersingh24" updated="2017-08-04 14:11:25.0"/>
<Action id="29842" issue="16749" author="mastersingh24" type="comment" body="Updated:    https://gerrit.hyperledger.org/r/#/c/12471/" created="2017-08-15 11:13:13.0" updateauthor="mastersingh24" updated="2017-08-15 11:13:13.0"/>
<Action id="30015" issue="16749" author="mastersingh24" type="comment" body="https://gerrit.hyperledger.org/r/#/c/12567/" created="2017-08-19 12:35:32.0" updateauthor="mastersingh24" updated="2017-08-19 12:35:32.0"/>
