<Action id="27537" issue="18034" author="aambati" type="comment" body=" ~l1nux  what database did you use in your test? Are you using fabric-ca-client or SDK? It would be good if you can provide us the repro steps. Thanks" created="2017-06-28 17:05:48.0" updateauthor="aambati" updated="2017-06-28 17:05:48.0"/>
<Action id="27545" issue="18034" author="l1nux" type="comment" created="2017-06-28 17:59:35.0" updateauthor="l1nux" updated="2017-06-28 17:59:35.0"> <body><! CDATA Not sure what you meant by 'repro' steps, can you be very specific.  We use node sdk (not command lines) on the client site to create and delete user (I will have to assume you know how to set up node sdk environment).  Also the problem was with the CA sqllite db, we didn't change the db type, we used it as it is.  ></body> </Action>
<Action id="27558" issue="18034" author="aambati" type="comment" created="2017-06-28 19:51:03.0" updateauthor="aambati" updated="2017-06-28 21:26:56.0"> <body><! CDATA By repro steps i meant, exact steps to reproduce the problem, which makes it easy for us to reproduce the problem. In any case, based on our chat , I did write a node app that uses node sdk and tried to reproduce the problem, but could not.  I did get "  {color:#d04437}Error: fabric-ca request revoke failed with errors   \\\\{"code":10003,"message":"Failed to retrieve certificate for the provided serial number and AKI: sql: no rows in result set"}|file://%7B/  " {color}  when i used aki with colons (eg. keyid:28:38:46:DD:92:EC:DD:20:9C:C7:45:A8:8A:03:AF:C9:6A:E8:F4:86)  Here is the sample app, i wrote: {color:#8eb021}'use strict';{color} {color:#8eb021}var log4js = require('log4js');{color} {color:#8eb021}var caClient = require('fabric-ca-client');{color} {color:#8eb021}var User = require('fabric-client/lib/User.js');{color} {color:#8eb021}var X509 = require('x509');{color}  {color:#8eb021}var caservice = new caClient("http://localhost:7054", null, "", null){color} {color:#8eb021}caservice.enroll(\{ enrollmentID: "admin", enrollmentSecret: "admin" }).then(function (enrollResponse) \{{color} {color:#8eb021}console.log("successfully enrolled", enrollResponse);{color} {color:#8eb021}varuser=newUser(\{ enrollmentID:"admin" });{color} {color:#8eb021}user.setEnrollment(enrollResponse.key, enrollResponse.certificate, "blah").then(function () \{{color} {color:#8eb021}varcert=X509.parseCert(caClient.normalizeX509(enrollResponse.certificate));{color} {color:#8eb021}varakiString=cert.extensions.authorityKeyIdentifier;{color} {color:#8eb021}vararr=akiString.split(':');{color} {color:#8eb021}if (arr 0  !=='keyid') \{{color} {color:#8eb021}console.log('Found an Autheority Key Identifier we do not understand: first segment is not "keyid": %s', akiString);{color} {color:#8eb021}arr.shift(); // remove the 'keyid'{color} {color:#8eb021}varaki=arr.join('');{color} {color:#8eb021}console.log("Serial: %s, aki: %s", cert.serial, aki);{color} {color:#8eb021}returncaservice.revoke(\{ serial:cert.serial, aki:aki }, user).then(function (revokeresponse) \{{color} {color:#8eb021}console.log("successfully revoked", revokeresponse);{color}  ></body> </Action>
<Action id="27562" issue="18034" author="markparz" type="comment" body=" ~aambati  Good to recreate, but should also see if this can be recreated on the Release Candidate, this is using Alpha 2, which is really pretty old at this point." created="2017-06-28 20:49:36.0" updateauthor="markparz" updated="2017-06-28 20:49:36.0"/>
<Action id="27572" issue="18034" author="aambati" type="comment" body=" ~markparz  i was not able to reproduce the problem with either RC1 or alpha2 " created="2017-06-28 21:30:38.0" updateauthor="aambati" updated="2017-06-28 21:30:38.0"/>
<Action id="27592" issue="18034" author="l1nux" type="comment" body="A work session has been scheduled (Jun 29)  with AnilKumar  to reproduce the problem." created="2017-06-29 11:52:21.0" updateauthor="l1nux" updated="2017-06-29 11:52:21.0"/>
<Action id="27659" issue="18034" author="l1nux" type="comment" created="2017-06-29 20:32:40.0" updateauthor="l1nux" updated="2017-06-29 20:32:40.0"> <body><! CDATA Thanks to Anil for pointing out there could be a linefeed at the end of aki string.  I double checked and indeed there was linefeed at the end of aki string.  Guess I have to find out what happened at my end.      This ticket can be closed now  ></body> </Action>
