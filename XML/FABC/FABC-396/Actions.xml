<Action id="37581" issue="24834" author="tsrb" type="comment" body="https://gerrit.hyperledger.org/r/16291" created="2017-12-18 13:53:25.0" updateauthor="tsrb" updated="2017-12-18 13:53:25.0"/>
<Action id="38391" issue="24834" author="nishi" type="comment" created="2018-01-10 15:49:16.0" updateauthor="nishi" updated="2018-01-10 15:50:32.0"> <body><! CDATA Verified successfully on postgres and mysql db to verify that a user cannot be enrolled beyond "maxenrollments" during register.  Fabric-Ca commit level: *ebfc050baee7ea222edc64637741f406fa9c54b0*  Registered a user on 1.0.4 fabric-ca-server using following attributes: {code:java} FABRIC_CA_CLIENT_HOME=~/hyperledger/fabric-ca/clients/admin ca-binaries-x104/fabric-ca-client register --id.maxenrollments 3 --id.name userTest3 --id.secret userTest3pw --id.affiliation org1.department1 --id.type user{code}    Then when I tried to enroll userTest3  after upgrading fabric-ca-server to 1.1: {code:java} FABRIC_CA_CLIENT_HOME=~/hyperledger/fabric-ca/clients/userTest3 fabric-ca-client enroll -u http://userTest3:userTest3pw@localhost:7054{code}    after a third time got the following message: {code:java} 2018/01/10 15:44:57  DEBUG  DB: Getting identity userTest3 2018/01/10 15:44:57  DEBUG  DB: Login user userTest3 with max enrollments of 3 and state of 3 2018/01/10 15:44:57  INFO  127.0.0.1:52878 POST /enroll 401 24 "Login failure: The identity userTest3 has already enrolled 3 times, it has reached its maximum enrollment allowance" Error: Response from server: Error Code: 20 - Authorization failure {code}    Tested with tls enabled and disabled successfully.     ></body> </Action>
