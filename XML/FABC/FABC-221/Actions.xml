<Action id="26049" issue="17770" author="smithbk" type="comment" body="Will this security hole be fixed if we return an error on an enroll request when the enrollment ID and the CSR&apos;s CN are not equal?  It seems that the CN could  not be spoofed then." created="2017-06-12 18:05:42.0" updateauthor="smithbk" updated="2017-06-12 18:05:42.0"/>
<Action id="26064" issue="17770" author="jonathanlevi" type="comment" body="Where is the design doc for this feature?" created="2017-06-12 19:53:39.0" updateauthor="jonathanlevi" updated="2017-06-12 19:53:39.0"/>
<Action id="26075" issue="17770" author="smithbk" type="comment" body="http://gerrit.hyperledger.org/r/10503" created="2017-06-12 21:23:22.0" updateauthor="smithbk" updated="2017-06-12 21:23:22.0"/>
<Action id="26091" issue="17770" author="smithbk" type="comment" body="See http://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#revoking-a-certificate-or-identity for doc describing the permissions required for revocation" created="2017-06-12 23:53:25.0" updateauthor="smithbk" updated="2017-06-12 23:53:25.0"/>
<Action id="26105" issue="17770" author="jonathanlevi" type="comment" created="2017-06-13 02:39:56.0" updateauthor="jonathanlevi" updated="2017-06-13 02:40:41.0"> <body><! CDATA Keith, I am well aware of the user-guide, and how it suggests that one can revoke a certificate. Thank you.  To repeat, is there/was there a *design document* for the feature? Can we please see a design doc/sequence diagram that explains how the system works (e.g., register/enroll, obtaining an EnrollmentID,  all the way to not being able to abuse the design) ?  Thank you  ></body> </Action>
<Action id="26106" issue="17770" author="baohua" type="comment" body="By the way, suggest mark this as a security bug." created="2017-06-13 02:55:18.0" updateauthor="baohua" updated="2017-06-13 02:55:18.0"/>
<Action id="26108" issue="17770" author="jonathanlevi" type="comment" created="2017-06-13 02:59:54.0" updateauthor="jonathanlevi" updated="2017-06-13 02:59:54.0"> <body><! CDATA I agree with you  ~baohua  that this is a security issue, though that JIRA flag is currently used for something else. I can't tell yet if this is just a "bug" or a serious design issue.  Relying on the "client" to always do what the server expects, is certainly not secure.  It is very difficult to understand and evaluate what's really going one without a diagram, at least for me.  ></body> </Action>
<Action id="26109" issue="17770" author="baohua" type="comment" created="2017-06-13 03:02:24.0" updateauthor="baohua" updated="2017-06-13 03:02:24.0"> <body><! CDATA Agree, jonathan, we cannot rely on client at any time.   This will also help bring some lessons on our SDK design.  And if we think this is a security bug, then should follow the progress at  https://docs.google.com/document/d/1gne57E4XEAxETZh_pmyVVWyI7FgXkmD72U3HfG193D8/edit,  which was accepted last week?  ></body> </Action>
<Action id="26110" issue="17770" author="jonathanlevi" type="comment" created="2017-06-13 03:08:23.0" updateauthor="jonathanlevi" updated="2017-06-13 03:08:23.0"> <body><! CDATA # I can't access that Google doc for some reason. # Just to be clear: I don't think. This is 100% a severe security issue, as I have highlighted in the title. # I can't assess if the "fix" fixes it, or whether it's another quick patch.  I need the requested info from  ~smithbk  for assessing the fix.  ></body> </Action>
<Action id="26138" issue="17770" author="smithbk" type="comment" created="2017-06-13 12:38:10.0" updateauthor="smithbk" updated="2017-06-13 12:38:10.0"> <body><! CDATA Jonathan, Yang, I'm working on some documentation.  I will post ASAP ... at least some time today. I also can't access the google doc above.  ></body> </Action>
<Action id="26182" issue="17770" author="smithbk" type="comment" created="2017-06-13 18:03:37.0" updateauthor="smithbk" updated="2017-06-13 18:03:37.0"> <body><! CDATA For design doc with a focus on security, see https://docs.google.com/document/d/1x7bbSkLt3VLexNMECJXbOYJ3xX8Ck9Q6O6W1dmnVaRQ It is a WIP, so let me know what is missing.  ></body> </Action>
<Action id="26183" issue="17770" author="jonathanlevi" type="comment" created="2017-06-13 18:10:23.0" updateauthor="jonathanlevi" updated="2017-06-13 18:10:23.0"> <body><! CDATA Thank you Keith (and sorry if I come across as being too prudent). I believe the easiest way for us to evaluate the "workflow" or "state" is by taking a look at a sequence diagram. See for example, a screenshot I quickly took from an old version of the SDK Design Spec ( https://docs.google.com/document/d/1R5RtIBMW9fZpli37E5Li5_Q9ve3BnQ4q3gWmGZj6Sv4/edit)  !2017-06-13_SequenceDiagram.png|width=743,height=499!  ></body> </Action>
<Action id="26184" issue="17770" author="jonathanlevi" type="comment" body="To be clear, it does not really have to be this pretty, etc. I mainly want to take a look at the higher level of &quot;what is happening&quot;, in terms of what logic/checks are in place and when. If you see what I mean?" created="2017-06-13 18:10:29.0" updateauthor="jonathanlevi" updated="2017-06-13 18:10:29.0"/>
<Action id="26209" issue="17770" author="smithbk" type="comment" body="Jonathan, I added web sequence diagrams to the doc" created="2017-06-13 22:47:39.0" updateauthor="smithbk" updated="2017-06-14 00:56:44.0"/>
<Action id="26333" issue="17770" author="clayton sims" type="comment" body="Jonathan - any update on reviewing this?" created="2017-06-14 20:34:45.0" updateauthor="clayton sims" updated="2017-06-14 20:34:45.0"/>
<Action id="26336" issue="17770" author="jonathanlevi" type="comment" body="Yes, there is, while a few of us are looking into this (including  ~mastersingh24  and  ~dhuseby ) - we should have an update about this today... " created="2017-06-14 20:36:49.0" updateauthor="jonathanlevi" updated="2017-06-14 20:36:49.0"/>
<Action id="26576" issue="17770" author="dhuseby" type="comment" body="Doesn&apos;t this nerf common names then?  They can only match the CSR? " created="2017-06-16 15:53:25.0" updateauthor="dhuseby" updated="2017-06-16 15:53:25.0"/>
