<Action id="40570" issue="27925" author="aambati" type="comment" body=" ~zamrokk   i think this problem was fixed in 1.1. Can you try to reproduce this problem in 1.1? Also, it would help if you can provide detailed steps to reproduce this problem." created="2018-02-22 15:16:46.0" updateauthor="aambati" updated="2018-02-22 15:16:46.0"/>
<Action id="40571" issue="27925" author="zamrokk" type="comment" created="2018-02-22 15:24:32.0" updateauthor="zamrokk" updated="2018-02-22 15:24:32.0"> <body><! CDATA Here is my configuration on ca.yaml     ########################################################################### # Certificate Signing Request section for generating the CA certificate ########################################################################### csr: cn: ca.byomc.com names: - C: FR ST: L: O: byomc OU: france hosts: - ca.byomc.com ca: pathlen: pathlenzero: expiry:        Then just do an enroll for PeerAdmin and a new user, display what is stored on each certificates on .pem files   Can go here to display info about certs : https://www.sslshopper.com/certificate-decoder.html  ></body> </Action>
<Action id="40619" issue="27925" author="aambati" type="comment" body=" ~zamrokk  i could not reproduce this in 1.1. I was right that this problem is fixed in 1.1. Would be able to update your CA server to 1.1?" created="2018-02-23 04:44:06.0" updateauthor="aambati" updated="2018-02-23 04:44:06.0"/>
<Action id="40627" issue="27925" author="zamrokk" type="comment" created="2018-02-23 09:40:19.0" updateauthor="zamrokk" updated="2018-02-23 09:40:19.0"> <body><! CDATA I just tested it on V1.1.0-alpha     Got same issues  ></body> </Action>
<Action id="40631" issue="27925" author="aambati" type="comment" created="2018-02-23 12:31:06.0" updateauthor="aambati" updated="2018-02-23 12:36:52.0"> <body><! CDATA this problem was fixed by  https://gerrit.hyperledger.org/r/c/16085/  , which went in on Dec 13th. I think this should be in alpha. This is what i did to reproduce:  *fabric-ca-server start -b admin:admin -c config/config.yaml -d*  config.yaml has this section:  {{csr:}} {{  cn: ca.byomc.com}} {{  names:}} {{    - C: FR}} {{      ST:}} {{      L:}} {{      O: byomc}} {{      OU: france}} {{  hosts:}} {{    - ca.byomc.com}} {{    - localhost}} {{  ca:}} {{    expiry:}} {{    pathlenzero:}} {{    pathlen:}}  and my ca cert looks like this:  {{Data:}} {{Version: 3 (0x2)}} {{Serial Number:}} {{29:a2:c9:0b:a6:f2:b2:17:74:0c:b9:bf:2c:d0:bd:cc:b7:55:79:c7}} {{Signature Algorithm: ecdsa-with-SHA256}} {{Issuer: C=FR, O=byomc, OU=france, CN=ca.byomc.com}} {{Validity}} {{Not Before: Feb 23 04:36:00 2018 GMT}} {{Not After : Feb 19 04:36:00 2033 GMT}}     ></body> </Action>
<Action id="40634" issue="27925" author="zamrokk" type="comment" body="Which image do you use ?" created="2018-02-23 13:26:07.0" updateauthor="zamrokk" updated="2018-02-23 13:26:07.0"/>
<Action id="40653" issue="27925" author="aambati" type="comment" body="i built my image based on the latest code from master branch" created="2018-02-23 15:07:54.0" updateauthor="aambati" updated="2018-02-23 15:55:16.0"/>
<Action id="40654" issue="27925" author="zamrokk" type="comment" body="Have you tried on image V1.1.0-alpha ?" created="2018-02-23 15:10:27.0" updateauthor="zamrokk" updated="2018-02-23 15:10:27.0"/>
<Action id="40661" issue="27925" author="aambati" type="comment" created="2018-02-23 16:13:12.0" updateauthor="aambati" updated="2018-02-23 16:13:12.0"> <body><! CDATA I tried with v1.1.0-alpha as well. I am not able to reproduce problem.  before i ran bin/fabric-ca-server start -b admin:admin -c configs/config11/config.yml, there was nothing in the configs/config11 directory except for config.yml  ></body> </Action>
<Action id="40680" issue="27925" author="aambati" type="comment" body=" ~zamrokk  can you pls tell me if you are able to get this working" created="2018-02-23 20:16:22.0" updateauthor="aambati" updated="2018-02-23 20:16:22.0"/>
<Action id="40805" issue="27925" author="smithbk" type="comment" body="What is the status of this?  Please update." created="2018-02-26 13:53:54.0" updateauthor="smithbk" updated="2018-02-26 13:53:54.0"/>
<Action id="40817" issue="27925" author="zamrokk" type="comment" created="2018-02-26 15:08:00.0" updateauthor="zamrokk" updated="2018-02-26 15:08:00.0"> <body><! CDATA I think I understand more or less why we have theses differences.     1/ the peer admin certificate is created when we build the orderer block and all the certificates for the network using this command "cryptogen generate --config crypto-config.yaml"   This uses default values country=US etc ...     2/ THEN when we start the ca , we can point to a ca.yaml file like this "fabric-ca-server start -c /shared/ca.yaml" where the csr block can be defined as below {quote}csr: cn: ca.org1.byomc.com names: - C: FR ST: L: O: byomc OU: france hosts: - ca.org1.byomc.com {quote} so all certificates for new users will follow this structure. But as we see on printscreen, still values like country are not displayed  ></body> </Action>
<Action id="40822" issue="27925" author="aambati" type="comment" body=" ~zamrokk  i don&apos;t completely understand your last comment. So, you generate one set of certs using cryptogen and others using fabric ca. Are you bootstrapping CA server to use same root cert that cryptogen used to generate certs? I guess that aside, certificates generate by the CA server with the CSR you specified should have those values as well. When I try to reproduce this problem, enrollment cert did indeed have C=FR in the Issuer." created="2018-02-26 15:19:57.0" updateauthor="aambati" updated="2018-02-26 15:19:57.0"/>
<Action id="40890" issue="27925" author="aambati" type="comment" created="2018-02-27 01:07:03.0" updateauthor="aambati" updated="2018-02-27 01:07:16.0"> <body><! CDATA Based on my conversation with  ~zamrokk  , this does not seem to be Fabric CA issue. CA server has been bootstrapped with the cryptogen generated CA cert , so server will not use the csr section defined in the server config. Also, enrollment certificate issued by the server was indeed signed by this CA cert. From that perspective, it looks ok to me. But he is seeing the following error when he tries to fetch config block using Java SDK:  ```Caused by: org.hyperledger.fabric.sdk.exception.ProposalException: getConfigBlock for channel channel1 failed with peer  peer-sn.byomc.com|http://peer-sn.byomc.com/ . Status FAILURE, details: Sending proposal to  peer-sn.byomc.com|http://peer-sn.byomc.com/  failed because of: gRPC failure=Status\{code=UNKNOWN, description=Failed to deserialize creator identity, err the supplied identity is not valid: x509: certificate signed by unknown authority (possibly because of "x509: ECDSA verification failure" while trying to verify candidate authority certificate " ca.org1.byomc.com|http://ca.org1.byomc.com/ "), cause=null}  ```  ></body> </Action>
<Action id="40951" issue="27925" author="aambati" type="comment" body="problem was resolved by following the solution outlined in the troubleshooting section in the CA userdocs: https://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#troubleshooting" created="2018-02-27 18:31:33.0" updateauthor="aambati" updated="2018-02-27 18:31:33.0"/>
