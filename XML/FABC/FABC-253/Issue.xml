<Issue id="20692" key="FABC-253" number="253" project="10607" reporter="lehors" assignee="lehors" creator="lehors" type="10004" summary="CA DBs aren&apos;t properly managed and left open" environment="This problem is not platform dependent but the consequences are primarily seen on Windows platforms." priority="3" resolution="10000" status="6" created="2017-09-08 12:57:16.0" updated="2018-07-18 22:04:02.0" resolutiondate="2017-09-27 18:49:47.0" votes="0" watches="1" workflowId="32433"> <description><! CDATA The DBs associated with the CA server aren't being properly managed in that they are left open. This leads to various failures exhibited by the unit-tests on Windows where files are locked until they are properly closed or the associated process exits.  A few related bug reports were open against the unit tests but having been looking at this issue for a while I've become convinced that this deserves more careful consideration because trying to fix this on a case by case basis isn't good enough.  Indeed, while this problem can be easily fixed for the most common case by ensuring that the server Stop() function closes its DB(s) there actually are many corner cases that this fails to address. So, for this problem to be properly addressed a general policy on when the DB(s) are to be closed and by whom needs to be developed.  I'm opening this ticket for this issue to be looked at. Unlike the related JIRA tickets that all focus on various unit-tests failing this is meant to highlight the fact that there is a problem with the code itself and not just the tests.  ></description> </Issue>
