<Issue id="16812" key="FABC-195" number="195" project="10607" reporter="rickr" creator="rickr" type="10004" summary=" SECURITY  Fabric CA not handling valid Certificate Signing Request." priority="2" resolution="10001" status="6" created="2017-05-17 12:17:21.0" updated="2019-07-27 14:42:42.0" resolutiondate="2019-07-27 14:39:46.0" votes="0" watches="4" workflowId="32375"> <environment><! CDATA Fabric CA level  commit ed5ed51ac75b5006c827704aa589f335ac723d8e Merge: 92aec7f 34ec53e Author: Srinivasan Muralidharan <muralisr@us.ibm.com> Date:   Tue May 9 19:01:55 2017 +0000  ></environment> <description><! CDATA  Bouncy Castle produce CSR and IBMJCE providers create CSRs that work.  IBMPKCS11 provider needed for HSM produces a different CSR  but I think is also valid fails     2017/05/17 12:13:15  DEBUG  Received request POST /api/v1/enroll Authorization: Basic YWRtaW46YWRtaW5wdw== \{"certificate_request":"-----BEGIN CERTIFICATE REQUEST-----\nMIIBqDCCAU4CAQAwEDEOMAwGA1UEAxMFYWRtaW4wggEzMIHsBgcqhkjOPQIBMIHg\nAgEBMCwGByqGSM49AQECIQD/////AAAAAQAAAAAAAAAAAAAAAP//////////////\n/zBEBCD/////AAAAAQAAAAAAAAAAAAAAAP///////////////AQgWsY12Ko6k+ez\n671VdpiGvGUdBrDMU7D2O848PifSYEsEQQRrF9Hy4SxCR/i85uVjpEDydwN9gS3r\nM6D0oTlF2JjClk/jQuL+Gn+bjufrSnwPnhYrzjNXazFezsu2QGg3v1H1AiEA////\n/wAAAAD//////////7zm+q2nF56E87nKwvxjJVECAQEDQgAE80dMWkLUc1JHRBcr\nEcpBVUkBfLiJ2NPY56anGU19ZRSE1w7DZIybcTLbz6UqCKZHPYzr+SrMA8wdY7qH\n3C/VxKAAMAoGCCqGSM49BAMCA0gAMEUCIQD+YcWlMUFV21EA4JnxyxmWXk6R6f0u\n2eMlEQ3FdS///QIgO6zWfKzEg359t9fhsYeNZUG4EHPbk0ZNXCwe1spn3vg=\n-----END CERTIFICATE REQUEST-----\n"} 2017/05/17 12:13:15  DEBUG  Directing traffic to default CA 2017/05/17 12:13:15  DEBUG  DB: Getting identity admin 2017/05/17 12:13:15  DEBUG  DB: Login identity admin with max enrollments of 0 and state of 0 2017/05/17 12:13:15  DEBUGAutomatic  DB: Successfully incremented state for identity admin to 1 2017/05/17 12:13:15  DEBUG  DB: identity admin successfully logged in 2017/05/17 12:13:15  DEBUG  Identity/Pass was correct 2017/05/17 12:13:15  DEBUG  Received request for endpoint enroll 2017/05/17 12:13:15  DEBUG  Enrollment request: \{SignRequest:\{Hosts:   Request:-----BEGIN CERTIFICATE REQUEST----- MIIBqDCCAU4CAQAwEDEOMAwGA1UEAxMFYWRtaW4wggEzMIHsBgcqhkjOPQIBMIHg AgEBMCwGByqGSM49AQECIQD/////AAAAAQAAAAAAAAAAAAAAAP////////////// /zBEBCD/////AAAAAQAAAAAAAAAAAAAAAP///////////////AQgWsY12Ko6k+ez 671VdpiGvGUdBrDMU7D2O848PifSYEsEQQRrF9Hy4SxCR/i85uVjpEDydwN9gS3r M6D0oTlF2JjClk/jQuL+Gn+bjufrSnwPnhYrzjNXazFezsu2QGg3v1H1AiEA//// /wAAAAD//////////7zm+q2nF56E87nKwvxjJVECAQEDQgAE80dMWkLUc1JHRBcr EcpBVUkBfLiJ2NPY56anGU19ZRSE1w7DZIybcTLbz6UqCKZHPYzr+SrMA8wdY7qH 3C/VxKAAMAoGCCqGSM49BAMCA0gAMEUCIQD+YcWlMUFV21EA4JnxyxmWXk6R6f0u 2eMlEQ3FdS///QIgO6zWfKzEg359t9fhsYeNZUG4EHPbk0ZNXCwe1spn3vg= -----END CERTIFICATE REQUEST-----  Subject:<nil> Profile: CRLOverride: Label: Serial:<nil> Extensions:  } CAName:} 2017/05/17 12:13:15  INFO  172.18.0.1:44966 - "POST /api/v1/enroll" 0        "success":false,"result":null,"errors": \\{"code":0,"message":"asn1: structure error: tags don't match (6 vs \\{class:0 tag:16 length:224 isCompound:true}) \\{optional:false explicit:false application:false defaultValue:\u003cnil\u003e tag:\u003cnil\u003e stringType:0 timeType:0 set:false omitEmpty:false} ObjectIdentifier @3"} ,"messages":   I wrote the pems sent to a file and attached them.  the bouncycastle is BC.pem  The IBM pkcs10 produced is ibm.pem  Both of these runt though openssl  just fine. I think both are valid CSRs  ></description> </Issue>
