<Issue id="21244" key="FABC-284" number="284" project="10607" reporter="rennman" assignee="smithbk" creator="rennman" type="10004" summary="fabric-ca-server does not handle absolute cert/key paths with --cacount" priority="3" resolution="10000" status="6" created="2017-10-02 21:19:28.0" updated="2018-07-18 22:04:09.0" resolutiondate="2017-11-26 15:49:52.0" votes="0" watches="2" workflowId="32464"> <description><! CDATA If I use --cacount and absolute pathnames for ca certificate, the DN compare check fails, since the certificate for the top-level and the spawned CA is identical:   {code:java} // /usr/local/bin/fabric-ca-server start -b admin:adminpw \ --ca.certfile /tmp/fabric-ca/fabric-ca-cert.pem \ --ca.keyfile /tmp/fabric-ca/fabric-ca-key.pem  \ --cacount -2  2017/10/02 21:17:19  DEBUG  Comparing DNs from certificates: /tmp/fabric-ca/fabric-ca-cert.pem and /tmp/fabric-ca/fabric-ca-cert.pem 2017/10/02 21:17:19  DEBUG  Loading DNs from certificate /tmp/fabric-ca/fabric-ca-cert.pem 2017/10/02 21:17:19  DEBUG  Loading DNs from certificate /tmp/fabric-ca/fabric-ca-cert.pem 2017/10/02 21:17:19  DEBUG  Check to see if two DNs are equal - &{issuer:/C=US/ST=North Carolina/O=Hyperledger/OU=Fabric/CN=fabric-ca-server-ca2 subject:/C=US/ST=North Carolina/O=Hyperledger/OU=Fabric/CN=fabric-ca-server-ca2} and &{issuer:/C=US/ST=North Carolina/O=Hyperledger/OU=Fabric/CN=fabric-ca-server-ca2 subject:/C=US/ST=North Carolina/O=Hyperledger/OU=Fabric/CN=fabric-ca-server-ca2} 2017/10/02 21:17:19  DEBUG  Issuer distinguished name already in use, checking for unique subject distinguished name 2017/10/02 21:17:19  DEBUG  Closing server DBs Error: Please modify CSR in /tmp/fabric-ca/fabric-ca-cert.pem and try adding CA again: Both issuer and subject distinguished name are already in use {code}    However, if I use a relative pathname, it works: {code:java} /usr/local/bin/fabric-ca-server start -b admin:adminpw \ --ca.certfile fabric-ca-cert.pem \ --ca.keyfile fabric-ca-key.pem \ --cacount 2 {code}  ></description> </Issue>
