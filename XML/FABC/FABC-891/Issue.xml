<Issue id="43780" key="FABC-891" number="891" project="10607" reporter="james.han" creator="james.han" type="10004" summary="Users id index doesn&apos;t exists on postgres db, causing register and modify bottlenecks" priority="1" resolution="10000" status="6" created="2019-12-20 07:43:46.0" updated="2020-03-02 04:52:33.0" resolutiondate="2020-01-14 14:27:55.0" votes="0" watches="2" workflowId="57633"> <description><! CDATA Our group have tested on AWS aurora r5.4xlarge and got only 100 registers per second on a c5.12xlarge ec2 instance.  However, even though the CPU utilization for both database and instance was below 30% we were getting more than 10-sec delays for register and modify for 100 requests per second.  So we thought there was a bottleneck somewhere. We found that the select * from users where id = ? was taking more than 700ms. There we asked ourselves, is there no index in users table?  There it was. In hyperledger/fabric-ca repository, lib/server/db/postgres/postgres.go, no primary key or index was in the users table compared to the MySQL version which explicitly had a primary key in id.  We created a pull request on Github that creates a primary key on id and an index if there isn't one.  ></description> </Issue>
