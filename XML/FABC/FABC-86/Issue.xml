<Issue id="13818" key="FABC-86" number="86" project="10607" reporter="skarim" creator="skarim" type="10002" summary="Gracefully handle multiple server trying to create database at start up" priority="3" resolution="10000" status="6" created="2016-12-14 22:28:58.0" updated="2019-07-27 15:00:02.0" resolutiondate="2018-02-28 14:58:38.0" votes="0" watches="1" workflowId="32266"> <description><! CDATA When bringing up a network, if two cop server come up at the same time when no database has been initialized they will both try to create a database. However, only one will succeed and the other gets an error from the database. The server that received the error crashes. If the error occurs it should try to reconnect to the database.   cop1       | 2016/12/14 21:35:38  DEBUG  Creating Tables... db              | ERROR:  duplicate key value violates unique constraint "pg_database_datname_index" db              | DETAIL:  Key (datname)=(cop) already exists. db              | STATEMENT:  CREATE DATABASE cop db              | ERROR:  duplicate key value violates unique constraint "pg_database_datname_index" db              | DETAIL:  Key (datname)=(cop) already exists. db              | STATEMENT:  CREATE DATABASE cop cop0            | 2016/12/14 21:35:38  ERROR  Failed to create new user registery  error: 100020: Failed to create Postgres database%!(EXTRA   interface {}=  )  pq: duplicate key value violates unique constraint "pg_database_datname_index"   cop0          | 100020: Failed to create Postgres database%!(EXTRA   interface {}=  )  pq: duplicate key value violates unique constraint "pg_database_datname_index"   ></description> </Issue>
