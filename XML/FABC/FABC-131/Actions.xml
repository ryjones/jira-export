<Action id="50306" issue="31474" author="denyeart" type="comment" created="2018-09-11 20:16:49.0" updateauthor="denyeart" updated="2018-09-11 20:16:49.0"> <body><! CDATA  ~skarim   ~smithbk   Is my option B feasible?  If not, can we do option A in the short term?   ~mastersingh24   ~ChristopherFerris  Got any other ideas?  ></body> </Action>
<Action id="50361" issue="31474" author="latitiah" type="comment" created="2018-09-12 14:14:55.0" updateauthor="latitiah" updated="2018-09-12 14:14:55.0"> <body><! CDATA I have made a change to the fabric-ca Makefile (https://gerrit.hyperledger.org/r/#/c/26226/) that allows us to use the latest fabric builds to build the fabric-ca builds. If there are "latest" tagged fabric builds locally, fabric-ca will use those images; if there are not, we should execute a script that will pull the images so that there are local "latest" tagged fabric builds.  From my understanding, using a script to pull missing images is what has been proposed for other repos as well. So this seems to be the accepted (consistent) process.  ></body> </Action>
<Action id="50363" issue="31474" author="rameshthoomu" type="comment" created="2018-09-12 15:02:44.0" updateauthor="rameshthoomu" updated="2018-09-12 15:02:44.0"> <body><! CDATA  ~denyeart   ~latitiah  I have pushed similar change 7 weeks ago to pull the fabric latest images into fabric-ca..But based on Gari's comment I have abandon this change.. Please look at this change here  https://gerrit.hyperledger.org/r/#/c/23513/      ></body> </Action>
<Action id="50377" issue="31474" author="smithbk" type="comment" created="2018-09-12 18:41:22.0" updateauthor="smithbk" updated="2018-09-12 18:41:22.0"> <body><! CDATA  ~denyeart  I thought publishing the images was simpler and easier to consume.   That said, since we are no longer doing this for some reason, we must either: a) require the user to build images containing fabric-ca-client/orderer and fabric-ca-client/peer, or b) the test dynamically builds and installs.  Since "go install" always uses the default branch (i.e. the release branch), we would have to do "git clone -> git checkout -> git build" to make this work pre-release from the master branch. I would definitely vote for "a".  ></body> </Action>
<Action id="50381" issue="31474" author="denyeart" type="comment" body=" ~mastersingh24  Did you intend for option A or option B?  Regardless, would option A be acceptable, at least in the short term?" created="2018-09-12 19:26:17.0" updateauthor="denyeart" updated="2018-09-12 19:26:17.0"/>
<Action id="50382" issue="31474" author="smithbk" type="comment" body="To clarify, option A means that to run the fabric-ca sample, you need to first clone the fabric-ca repo and type `make images`." created="2018-09-12 19:57:58.0" updateauthor="smithbk" updated="2018-09-12 19:57:58.0"/>
<Action id="50489" issue="31474" author="mastersingh24" type="comment" created="2018-09-15 11:41:37.0" updateauthor="mastersingh24" updated="2018-09-15 11:45:46.0"> <body><! CDATA There is also no reason to actually need to clone or build the fabric-ca-client ... we actually build binaries and post them to Nexus now.  So the Dockerfile should be a simple from "hyperledger/fabric-\{peer|orderer}:1.2.0" and then just use curl/wget to fetch the fabric-ca-client binary.  And if you really want to simplify things, you can actually build the images when starting things up via docker-compose.  Once 1.3.0 images are published, you can update to 1.3.0 and then create a 1.3 tag for the samples.  ></body> </Action>
<Action id="50493" issue="31474" author="denyeart" type="comment" body=" ~latitiah   ~skarim   ~smithbk  Which approach do you want to take?" created="2018-09-15 13:21:12.0" updateauthor="denyeart" updated="2018-09-15 13:21:12.0"/>
<Action id="50496" issue="31474" author="smithbk" type="comment" created="2018-09-15 17:51:22.0" updateauthor="smithbk" updated="2018-09-15 17:51:22.0"> <body><! CDATA The daily builds are not currently publishing the fabric-ca-client to nexus.  So in order to do as Gari said.  1) Ramesh starts publishing fabric-ca-client binary to nexus nightly. Then let me know the URL of both the 1.2 and the nightly fabric-ca-client binaries.  2) I pushed the following CR: https://gerrit.hyperledger.org/r/26326 It depends upon Ramesh doing #1, so for now it will not work and will need testing/debugging, but it should be a small update to the wget command. Actually, I'm assuming wget is in the image ... and if not, will need to add that also.  See the comments in start.sh for how to use.  ></body> </Action>
<Action id="50497" issue="31474" author="mastersingh24" type="comment" body="Why would we ever use the nightly builds?  The sample should always be using the latest GA code.  So master will basically always match the latest release branch as well.  I see no to ever use the nightly builds?" created="2018-09-15 21:58:48.0" updateauthor="mastersingh24" updated="2018-09-15 21:58:48.0"/>
<Action id="50498" issue="31474" author="smithbk" type="comment" body="You&apos;re right, we don&apos;t need to use the nightly builds.  But don&apos;t we also need a way to run the fabric-ca sample against local images built from the master branch so we know when it breaks?  It is my understanding that this is done nightly.  " created="2018-09-16 01:45:14.0" updateauthor="smithbk" updated="2018-09-16 01:45:14.0"/>
<Action id="50544" issue="31474" author="latitiah" type="comment" body="Yes, we also need nightly/local builds for interop and integration testing between the fabric and fabric-ca repos. We want to get this all of this automated instead of waiting for a release." created="2018-09-17 14:16:06.0" updateauthor="latitiah" updated="2018-09-17 14:16:06.0"/>
<Action id="50623" issue="31474" author="mastersingh24" type="comment" created="2018-09-18 20:10:37.0" updateauthor="mastersingh24" updated="2018-09-18 20:11:27.0"> <body><! CDATA There is no integration between fabric and fabric-ca .... this was intentional.  And I really do not understand what that has to do with this sample?  Samples are not suppose to be used for integration tests.   ~ChristopherFerris   ~sykesm  - we need a better CI strategy here.  (tagging Matt as I know he has some thoughts on this although to date we have not leveraged his knowledge on these types of things)  ></body> </Action>
<Action id="50651" issue="31474" author="christopherferris" type="comment" created="2018-09-19 11:57:00.0" updateauthor="christopherferris" updated="2018-09-19 11:57:00.0"> <body><! CDATA This has nothing to do with CI strategy, really. There is no reason that we cannot either a) create this image on the fly in the nightly/etc runs or b) just use the published fabric-ca image.     As for the sample, I just looked closely at this. It is in serious need of rework. I would recommend we nuke it and do a less Rube Goldbergian version post 1.3.  ></body> </Action>
<Action id="50846" issue="31474" author="smithbk" type="comment" created="2018-09-20 14:36:48.0" updateauthor="smithbk" updated="2018-09-20 14:36:48.0"> <body><! CDATA Given the changes in https://gerrit.hyperledger.org/r/#/c/26326, the fabric-ca sample does not depend upon pre-built fabric-ca-peer, fabric-ca-orderer, and/or fabric-ca-tools images.  It builds them on the fly as Gari said to do.   As per my latest comments to the CR and as I discussed with Chris late yesterday, the build-images.sh script will be deleted.  This was just an oversight and the README had already been updated to no longer reference this script.  I propose that post v1.3, we create a tutorial of how to use fabric CA with fabric end-to-end which basically takes everything from this sample and presents it in a tutorial fashion.  There are a lot of people who have contacted me and who have used this sample effectively as an end-to-end sample.  Otherwise, it would be helpful to know specifically what things need to be reworked.  ></body> </Action>
