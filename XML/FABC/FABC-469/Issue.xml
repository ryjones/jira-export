<Issue id="14515" key="FABC-469" number="469" project="10607" reporter="smithbk" assignee="smithbk" creator="smithbk" type="10001" summary="Update fabric-ca CLI to use cobra &amp; viper" priority="3" resolution="10000" status="6" created="2017-02-02 16:29:44.0" updated="2018-07-20 19:16:33.0" resolutiondate="2017-03-10 18:48:44.0" votes="0" watches="2" workflowId="32651"> <description><! CDATA We need to stop using the cfssl cli package because it is too inflexible and has caused problems. For example, when we needed to simply change the default port from 8888 to 7054, it was way too hard.  The goal is to improve usability by using cobra and viper. The design is as follows ....  Build two new commands using cobra/viper named fabric-ca-server and fabric-ca-client. fabric-ca-server will be roughly equivalent to the current "fabric-ca server" command and fabric-ca-client to the current "fabric-ca client" command.  These commands will be at fabric-ca/cmd/fabric-ca-server and fabric-ca/cmd/fabric-ca-client, respectively.  So "go get ..." can be used to install the server and/or the client.  Both commands will read yaml config files and support optional args (and env variables) to specify any value in the yaml file.   The precedence (highest to lowest) will be: 1) command line arg 2) env variable 3) config file 4) default value  I will be dropping several change sets for this improvement, roughly as follows:  0) Vendor cobra  Change sets for the server: 1) fabric-ca-server command plumbing with cobra/viper 2,3) implement server commands one change set at a time using existing logic (init, start)  Change sets for the client: 4) fabric-ca-client command plumbing with cobra/viper 5,6,7,8) implement client commands one change set at a time using existing logic (register, enroll, renew, revoke)  From a code organization perspective, we will create fabric-ca/cmd/fabric-ca-client and fabric-ca/cmd/fabric-ca-server directories for the corresponding commands.  The fabric-ca/cli directory will eventually go away once the separate client and server commands are stable.   ></description> </Issue>
