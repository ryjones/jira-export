<Issue id="41817" key="FABCJ-175" number="175" project="11208" reporter="nkl199" assignee="mbwhite" creator="nkl199" type="10000" summary="Java Chaincode Failure Under Load" priority="2" resolution="10000" status="6" created="2019-08-15 15:34:25.0" updated="2019-11-30 21:10:42.0" resolutiondate="2019-11-05 09:29:28.0" votes="0" watches="5" workflowId="56790"> <description><! CDATA Found when stress testing Java Chaincode using Caliper.  Test involved basic 2org1peer network (couchDB), flexing a "getState" operation, and increasing the driving TPS to achieve a set backlog of pending transactions.Â   When placed under load (1.5k pending transactions), the java chaincode terminates somewhat un-gracefully with:  ``` SEVERE org.hyperledger.fabric.Logger error Error during contract method executionorg.hyperledger.fabric.contract.ContractRuntimeException: Error during contract method execution at org.hyperledger.fabric.contract.execution.impl.ContractExecutionService.executeRequest(ContractExecutionService.java:75) at org.hyperledger.fabric.contract.ContractRouter.processRequest(ContractRouter.java:87) at org.hyperledger.fabric.contract.ContractRouter.invoke(ContractRouter.java:98) at org.hyperledger.fabric.shim.impl.Handler.lambda$handleTransaction$1(Handler.java:290) at java.lang.Thread.run(Thread.java:748) Caused by: java.lang.RuntimeException:  fca2d822 Unsuccessful response received. at org.hyperledger.fabric.shim.impl.Handler.invokeChaincodeSupport(Handler.java:431) at org.hyperledger.fabric.shim.impl.Handler.getState(Handler.java:316) at org.hyperledger.fabric.shim.impl.ChaincodeStubImpl.getState(ChaincodeStubImpl.java:165) at org.example.FixedAssetContract.getAsset(FixedAssetContract.java:115) at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.hyperledger.fabric.contract.execution.impl.ContractExecutionService.executeRequest(ContractExecutionService.java:57) ... 4 more .. caused by .. fca2d822 Unsuccessful response received.java.lang.RuntimeException:  fca2d822 Unsuccessful response received. at org.hyperledger.fabric.shim.impl.Handler.invokeChaincodeSupport(Handler.java:431) at org.hyperledger.fabric.shim.impl.Handler.getState(Handler.java:316) at org.hyperledger.fabric.shim.impl.ChaincodeStubImpl.getState(ChaincodeStubImpl.java:165) at org.example.FixedAssetContract.getAsset(FixedAssetContract.java:115) at sun.reflect.GeneratedMethodAccessor7.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.hyperledger.fabric.contract.execution.impl.ContractExecutionService.executeRequest(ContractExecutionService.java:57) at org.hyperledger.fabric.contract.ContractRouter.processRequest(ContractRouter.java:87) at org.hyperledger.fabric.contract.ContractRouter.invoke(ContractRouter.java:98) at org.hyperledger.fabric.shim.impl.Handler.lambda$handleTransaction$1(Handler.java:290) at java.lang.Thread.run(Thread.java:748) ```    I'm uncertain what the underlying issue is at the moment, though I can confirm that at the time of failure, docker stats show: - memory is running at 500MB of an available 2GB - cpu running at around 150%  I will look into modifying the chaincode to track threads/memory as observed from the chaincode ... it would be nice to connect the Java Healthcenter to see exactly what is going on too  ></description> </Issue>
