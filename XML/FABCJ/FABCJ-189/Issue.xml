<Issue id="38585" key="FABCJ-189" number="189" project="11208" reporter="mcoblenz" assignee="mbwhite" creator="mcoblenz" type="10000" summary="Error handling generates NullPointerException" priority="3" resolution="10002" status="6" created="2019-03-20 01:21:04.0" updated="2019-11-30 21:10:45.0" resolutiondate="2019-05-20 09:59:03.0" votes="0" watches="1" workflowId="56804"> <description><! CDATA ChaincodeBase includes the following: {code:java} protected static Response newErrorResponse(Throwable throwable) { return newErrorResponse(throwable.getMessage(), printStackTrace(throwable)); } {code} But getMessage() may return null, as is documented here:    https://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html      This results in a NullPointerException:    {noformat} Error: endorsement failure during invoke. response: status:500 message:"transaction returned with failure: java.lang.NullPointerException\n\tat com.google.protobuf.ByteString.copyFromUtf8(ByteString.java:400)\n\tat org.hyperledger.fabric.shim.impl.Handler.newErrorEventMessage(Handler.java:538)\n\tat org.hyperledger.fabric.shim.impl.Handler.lambda$handleTransaction$1(Handler.java:295)\n\tat java.lang.Thread.run(Thread.java:748)\n"  {noformat} ChaincodeBase should guard against null, or the recipient of the null string needs to handle it appropriately.  ></description> </Issue>
