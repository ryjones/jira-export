<Issue id="46678" key="FABGW-18" number="18" project="11600" reporter="sykesm" assignee="bestbeforetoday" creator="sykesm" type="10004" summary="Intermittent test failure from TestFinder/returns_error_when_notification_supplier_falis" priority="4" resolution="10000" status="10801" created="2021-03-25 19:09:00.0" updated="2021-05-18 16:07:23.0" resolutiondate="2021-05-18 16:07:23.0" votes="0" watches="2" workflowId="60624" archived="N"> <description><! CDATA Hit a test failure locally. Can be recreated by running the test in a loop.  {{go test -race -count 100 -run TestFinder/returns_error_when_notification_supplier_fails ./internal/pkg/gateway/commit}}  {code:java} --- FAIL: TestFinder (0.00s) --- FAIL: TestFinder/returns_error_when_notification_supplier_fails (0.00s) panic: assignment to entry in nil map  recovered  panic: assignment to entry in nil mapgoroutine 109  running : testing.tRunner.func1.2(0xdb78c0, 0xf58ed0) /usr/local/go/src/testing/testing.go:1144 +0x49f testing.tRunner.func1(0xc000336900) /usr/local/go/src/testing/testing.go:1147 +0x695 panic(0xdb78c0, 0xf58ed0) /usr/local/go/src/runtime/panic.go:971 +0x499 github.com/hyperledger/fabric/internal/pkg/gateway/commit.(*channelLevelNotifier).registerListener(0xc0003acdb0, 0xc0004846c0, 0xe8afda, 0x5, 0x0) /home/sykesm/fabric/internal/pkg/gateway/commit/channelnotifier.go:109 +0x2c5 github.com/hyperledger/fabric/internal/pkg/gateway/commit.(*Notifier).notify(0xc0003a4980, 0xc0004846c0, 0xe8cb21, 0x7, 0xe8afda, 0x5, 0x4293eb, 0x4293eb, 0xd011b0) /home/sykesm/fabric/internal/pkg/gateway/commit/notifier.go:54 +0xd1 github.com/hyperledger/fabric/internal/pkg/gateway/commit.(*Finder).TransactionStatus(0xc000285ea8, 0xf6f370, 0xc0000360e8, 0xe8cb21, 0x7, 0xe8afda, 0x5, 0x0, 0x0, 0x0) /home/sykesm/fabric/internal/pkg/gateway/commit/finder.go:37 +0x125 github.com/hyperledger/fabric/internal/pkg/gateway/commit.TestFinder.func9(0xc000336900) /home/sykesm/fabric/internal/pkg/gateway/commit/finder_test.go:169 +0x3e5 testing.tRunner(0xc000336900, 0xeb8050) /usr/local/go/src/testing/testing.go:1194 +0x203 created by testing.(*T).Run /usr/local/go/src/testing/testing.go:1239 +0x5d8 FAIL    github.com/hyperledger/fabric/internal/pkg/gateway/commit       0.239s {code}  ></description> </Issue>
