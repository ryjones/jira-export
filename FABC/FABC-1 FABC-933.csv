Summary,Issue key,Issue id,Parent id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project description,Project url,Priority,Resolution,Assignee,Reporter,Creator,Created,Updated,Last Viewed,Resolved,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Fix Version/s,Fix Version/s,Fix Version/s,Component/s,Component/s,Due Date,Votes,Labels,Labels,Labels,Labels,Labels,Description,Environment,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Log Work,Log Work,Original Estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Inward issue link (Cloners),Inward issue link (Cloners),Outward issue link (Cloners),Inward issue link (Duplicate),Inward issue link (Duplicate),Outward issue link (Duplicate),Outward issue link (Issue split),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Custom field (Authorized Watchers),Custom field (Authorized Watchers),Custom field (Business Value),Custom field (Commit Levels),Custom field (Current Status),Custom field (Design),Custom field (Design Status),Custom field (Documentation Impact),Custom field (Documentation Status),Custom field (Epic Color),Custom field (Epic Link),Custom field (Epic Name),Custom field (Epic Status),Custom field (Executed),Custom field (Found in Commit),Custom field (Function Test Status),Custom field (Must Fix),Custom field (Original story points),Custom field (Parent Link),Custom field (Rank),Custom field (Release Note),Custom field (Release Note Required),Custom field (Root Cause Analysis),Custom field (SDK Impact),Custom field (Sample/Tutorial),Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Custom field (Steps to Reproduce),Custom field (Story Points),Custom field (System Test Impact),Custom field (Target end),Custom field (Target start),Custom field (Team),Custom field (Team),Custom field (Test Plan),Custom field (Test Result),Custom field (Test Result Details),Custom field (Test Type),Custom field (Triaged),Custom field (Usage),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Workaround),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitCommitsReferenced),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment
I want to use the fabric-ca client and server library independently,FABC-1,20859,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,smithbk,smithbk,16/Sep/17 5:29 AM,22/Sep/19 5:55 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"The client and server code is currently in the same package (fabric-ca/lib).
We need to split into lib/server, lib/client, and lib/common so that in particular it does not
bloat the go-SDK which only wants to pull in the lib/client.",,aambati,smithbk,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-141,,,,,FABG-503,FABC-840,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6r3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,smithbk,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Sep/17 5:31 AM;troyronda;Yes - We would like to remove the need for patches like this:

[https://gerrit.hyperledger.org/r/#/c/13517/3/scripts/vendorhl/fabric-ca/patches/0001-Decouple-server-structs-needed-for-client-compilatio.patch]

 ;;;","23/Feb/18 7:43 AM;aambati;When we restructure the code we need to remove the need for `caclient` build tag, which was added so fabric-ca-client is built without pulling in sqlite3 code;;;",,,,,,,,,,,,,,,,,,
"As an administrator, I want to update user info such as password, affiliation, and attributes",FABC-2,19013,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,,smithbk,smithbk,07/Jul/17 8:27 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"As an administrator, I want to update user profile information such as password,
affiliation, attributes, etc.",,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzy72v:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Mar/18 11:45 PM;skarim;Duplicate of https://jira.hyperledger.org/browse/FAB-5726;;;",,,,,,,,,,,,,,,,,,,
Dynamically add fabric-ca server,FABC-3,13980,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,markparz,markparz,10/Jan/17 5:04 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,26/Mar/19 8:41 PM,,,,,,,,,,,,,0,,,,,,As a network administrator I want the ability to dynamically add a new COP server so that the network can handle extra load as it gets larger or if choose to have different configurations/options for the COP services to meet certain network / channel requirements.,,markparz,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6n3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,markparz,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jan/17 5:12 AM;smithbk;We need to test this out of course, but it should be possible today given two assumptions:
1) You must manually copy the key materials to the new COP server and start it;
2) The load balancer (e.g. haproxy) must support dynamically adding a new server to a cluster.
Assigning to Saad to investigate, test, and doc with haproxy.;;;","10/Jan/17 7:21 AM;smithbk;I should add that if we were to implement https://jira.hyperledger.org/browse/FAB-1465, you would not need to manually distribute keys as mentioned in #1 above.  This would enable having a cluster of COP intermediate servers.  When you needed to add new COP servers to the cluster, you would issue the ""cop server init -remote <root-COP-server>"" command with an enrollment ID and secret, and the new cluster members would dynamically get an intermediate signer certificate.

That said, we are currently beginning to focus on documentation and more testing for what we have already implemented, so work on FAB-1465 is not currently progressing.;;;","26/Mar/19 8:41 PM;mastersingh24;This is outside the scope of Fabric CA.  It's possible to deploy this way today.  But we are not going to provide anything special for this.;;;",,,,,,,,,,,,,,,,,
"As a peer administrator, I need a CLI to disable membership services in the peer or orderer",FABC-4,12760,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Won't Do,,Clayton Sims,Clayton Sims,27/Sep/16 6:52 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:40 PM,,,,,,,,,,,,,0,,,,,,"peer/orderer cop disable

Disable membership services in this peer or orderer.",,Clayton Sims,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-589,,,,,,,,,"1|hzx9e7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,Clayton Sims,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Oct/16 9:33 PM;smithbk;cop will not run inside a peer or orderer, so this work is not needed;;;","15/Apr/17 2:27 AM;mastersingh24;no longer relevant;;;",,,,,,,,,,,,,,,,,,
As a user I want to be able to set maps/list configurations through environment variable,FABC-5,28993,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,30/Mar/18 12:04 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,As a user I want to be able to set maps/list configurations through environment variable,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx3pj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update the Fabric CA documentation,FABC-6,15305,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,nickgaski,bmos299,bmos299,11/Mar/17 4:19 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:40 PM,,,,,,,,,,,,,0,,,,,,The README looks like it needs a lot of work.  It is referring to .json files which no longer exist. ,,bmos299,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx3mn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,bmos299,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jul/17 12:45 AM;smithbk;We have updated the README many times since Mar, so I'm closing this.  If it is still a problem, please reopen.;;;",,,,,,,,,,,,,,,,,,,
Fabric 1.0 should be able to specify minimum requirements in terms of resources for clients to use Membership Services,FABC-7,12532,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,dulcep,dulcep,23/Aug/16 4:32 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,15/Apr/17 3:01 AM,,,,,,,v1.0.0,v1.0.0-alpha1,,,,,0,MembershipServices,,,,,"Use-case (for intuition): 
To support thin-clients, devices with more limited capability, and IoT devices.",,dulcep,mastersingh24,matingwei,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxbi7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,dulcep,mastersingh24,matingwei,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Apr/17 3:00 AM;mastersingh24;I am going to mark this as done given we moved to fabric-ca and support REST APIs with simplified username/password and token mechanisms;;;",,,,,,,,,,,,,,,,,,,
I want fabric-ca to provide audit tools,FABC-8,13562,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,smithbk,smithbk,30/Nov/16 5:57 AM,28/Jul/19 12:00 AM,28/Oct/23 2:21 AM,04/Jul/19 8:34 PM,,,,,,,,,,,,,1,MembershipServices,,,,,"The fabric-ca-server will support tcerts which means transactions are anonymous and unlinkable, unless revealed to an auditor.  This story is to provide tools which can be used to reveal such information to an auditor.

The following is my 1st pass at the info that COP could reveal, in priority order.  I am looking for feedback on this list and the priority.  Please comment.

# Let auditor see everything related to a single transaction
# Let auditor see all transactions for a specific enrollment ID
# Let auditor see all transactions for a specific instance of COP.  Assuming a 1-1 relationship between COP servers and participants/organizations, this is equivalent to auditing an entire company or organization.
# Let auditor see all transactions for all users in a specific affiliation group.  Each COP can have a hierarchy of affiliation groups.  An auditor can see all transactions for all users in any group of this hierarchy.
# Let auditor see a specific attribute in a specific transaction.  Attributes can be encrypted with separate keys, so this means the auditor may be allowed to see one attribute of a transaction but not another.",,KhutPidor,mastersingh24,nitingaur,smithbk,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-105,,,,,,,,,"1|hzx3rz:",,,,Unset,,Sprint 8 - Membership Services,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,,,,,,,Unset,,,,,,,,,,,KhutPidor,mastersingh24,nitingaur,smithbk,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/May/17 1:33 PM;KhutPidor;Excuse me
Whether it solve or not, related to Auditor API (v0.6 or later);;;","04/Jul/19 8:34 PM;mastersingh24;tcerts are not supported and all code will be removed in 2.0.0;;;",,,,,,,,,,,,,,,,,,
"A developer should be able to just ""make cop"" from Vagrant",FABC-9,14008,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,JonathanLevi,JonathanLevi,11/Jan/17 10:55 PM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,14/Feb/17 9:54 PM,,,,,,,v1.0.0,,,,,,0,,,,,,"Issue has been continuously reported... we cannot *make cop* from within Vagrant
For some reason, I can't copy and paste from Slack anymore.



",,JonathanLevi,lehors,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/17 10:54 PM;JonathanLevi;Aranud_Building COP using Vagrant.png;https://jira.hyperledger.org/secure/attachment/10374/Aranud_Building+COP+using+Vagrant.png",,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxguv:",,,,Unset,,Sprint 9 - Membership Services,,,,,,,,,,,,,Unset,,,,,,,,,,,JonathanLevi,lehors,smithbk,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Jan/17 2:20 PM;smithbk;See http://gerrit.hyperledger.org/r/3921

The problem was that the CGO_LDFLAGS still referenced rocksdb.
If you want to build COP in vagrant prior to this change set being merged, do the following in vagrant:

# export CGO_LDFLAGS=""-lstdc++ -lm -lz"";;;","13/Jan/17 8:15 PM;smithbk; http://gerrit.hyperledger.org/r/3921/2 removes CGO_LDFLAGS altogether as it appears that it is not needed.;;;",,,,,,,,,,,,,,,,,,
"I want identity-related APIs defined for client, peer, and chaincode",FABC-10,13252,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,02/Nov/16 12:16 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,10/May/17 10:44 PM,,,,,,,,,,,,,0,,,,,,,,ChristopherFerris,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxdtj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Apr/17 10:17 PM;ChristopherFerris;[~smithbk] [~Clayton Sims] I am guessing that this can be considered Done. If so, please close.;;;",,,,,,,,,,,,,,,,,,,
fabric-ca cannot be built on Raspberry Pi 3 B+,FABC-11,31769,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,SashaPESIC,sang,sang,11/Jul/18 2:15 PM,14/Aug/18 9:47 AM,28/Oct/23 2:21 AM,14/Aug/18 9:47 AM,v1.2.1,,,,,,,,,,,,0,,,,,,"I am trying to install Fabric on Raspberry Pi 3 B+ and I installed a 64-bit system on the Pi. I was able to build fabric-baseimage and fabric successfully by modifying the Makefile and scripts a little bit. But when I was building fabric-ca, it reports the following error:

Building docker fabric-ca-orderer image
docker build  -t hyperledger/fabric-ca-orderer --build-arg FABRIC_CA_DYNAMIC_LINK= build/image/fabric-ca-orderer
Sending build context to Docker daemon  18.06MB
Step 1/6 : FROM nexus3.hyperledger.org:10001/hyperledger/fabric-orderer:arm64-1.2.1-stable
manifest for nexus3.hyperledger.org:10001/hyperledger/fabric-orderer:arm64-1.2.1-stable not found
Makefile:130: recipe for target 'build/image/fabric-ca-orderer/.dummy-arm64-1.2.1-snapshot-3bcdbb2' failed
make: *** [build/image/fabric-ca-orderer/.dummy-arm64-1.2.1-snapshot-3bcdbb2] Error 1

Any thoughts on how to solve this?

 ",,sang,SashaPESIC,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzzi9z:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,sang,SashaPESIC,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Aug/18 9:47 AM;SashaPESIC;Hello [~sang],
This can be solved quite easily - in the fabric-ca/images/fabric-ca-orderer there is a Dockerfile.in. 

Change the line: 
FROM _NEXUS_REPO_/fabric-orderer:_STABLE_TAG_
to point to the fabric-orderer you have priosly built and exists locally on your machine, such as: 
FROM hyperledger/fabric-orderer:latest


From that point the fabric-ca-orderer should build. I have successfully built it on my RP and am marking this as solved. ;;;",,,,,,,,,,,,,,,,,,,
"As an organization participating in Fabric network, I need the ability to selectively audit transactions",FABC-12,12417,,Story,Closed,FABC,Fabric CA,software,denyeart,,,High,Invalid,,Clayton Sims,Clayton Sims,17/Aug/16 3:30 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,04/Jul/19 8:29 PM,,,,,,,,,,,,,0,,,,,,"While anonymity and unlinkability are desired qualities for the overall blockchain, certain industries / consortiums have and/or will have audit requirements which actually require full traceability of transactions all the way to the ""real"" identity of the transactor",,Clayton Sims,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3166,,,,,,,,,"1|hzx6gv:",,,,Unset,,,,,,,,,,,,,,2.0,Unset,,,,,,,,,,,Clayton Sims,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Jul/19 8:29 PM;mastersingh24;This really does not make sense given the architecture of Fabric;;;",,,,,,,,,,,,,,,,,,,
As a user i want ability to get Fabric CA's  idemix public key,FABC-13,29014,,Story,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,aambati,aambati,aambati,30/Mar/18 12:00 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,18/May/18 1:44 AM,,,,,,,v1.3.0,,,,,,0,,,,,,"Users need ability to get Fabric CA server's (issuer) idemix public key inorder to request idemix credentials. 


Users could use fabric-ca-client or REST API to get the the CA's public key",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-592,,,,,,,,,"1|hzz3pz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Mar/18 12:08 PM;aambati;Design doc:

[https://docs.google.com/document/d/1iqCHtX-bG3Ey7bZmm9_b-oqu30jtlDJO9HhccVtekEE/edit#|https://docs.google.com/document/d/1iqCHtX-bG3Ey7bZmm9_b-oqu30jtlDJO9HhccVtekEE/edit];;;",,,,,,,,,,,,,,,,,,,
Fabric-CA Use Cases,FABC-14,27867,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,aambati,bmos299,bmos299,21/Feb/18 1:00 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,3,Documentation,,,,,"To put together several HowTo's/Tutorials for the Fabric-CA.   A few of the use cases that would greatly aid Fabric Users are:

 
* Interactions with CRL and Attribute Based Access Control. I talked with [~nickgaski] and it could resemble the following:*
 ##  reg/enroll with attributes for barry.
 ##  i want to drop barry's access so i have to revoke/gencrl his cert.
 ## the attribute is removed by the fabric-ca admin.
 ## to show that access is denied in fabric CA and fabric with the revoked cert 
 ## barry enrolls again to get a new ecert and now the options is off

* Bootstrapping with the Fabric-CA, multi-layered and clustered CA architecture (root, intermediate, issuing authority)
## Show the bootstrapping
##  show the issuing process
##  show clustering strategy
##  show deployment to the fabric
## show application using sdk or composer utilizing the fabric",,bmos299,denyeart,nyet,seyday,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx04n:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,bmos299,denyeart,nyet,seyday,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;",,,,,,,,,,,,,,,,,,,
"As a fabric user, I need a CLI to initialize the cryptographic identity for a peer or orderer ",FABC-15,12757,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,Clayton Sims,Clayton Sims,27/Sep/16 6:47 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,25/Oct/16 1:49 AM,,,,,,,v1.0.0,,,,,,0,MembershipServices,,,,,"cop client enroll <enrollmentID> <enrollmentSecret> <cop-server-address>

Enroll a peer with the cop server
",,Clayton Sims,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzxa87:",,,,Unset,,Sprint 2,,,,,,,,,,,,4.0,Unset,,,,,,,,,,,Clayton Sims,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Oct/16 9:30 PM;smithbk;Complete via https://gerrit.hyperledger.org/r/#/c/1893/1;;;",,,,,,,,,,,,,,,,,,,
As a user I want ability to get idemix credential from Fabric CA server,FABC-16,29015,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,30/Mar/18 12:05 PM,21/Jul/18 4:15 AM,28/Oct/23 2:21 AM,19/May/18 3:55 AM,,,,,,,v1.3.0,,,,,,0,,,,,,"Users want ability to get an idemix credential from the fabric CA server. Users could be new (just registered) or already have enrolled and obtained X509 certificate from the server. Users should be able to use basic auth (userid , password returned by the registration request) or oauth token based on X509 certificate",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-592,,,,,,,,,"1|hzz3q7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Apr/18 5:19 AM;aambati;https://gerrit.hyperledger.org/r/c/20887/;;;","11/May/18 1:14 AM;aambati;[https://gerrit.hyperledger.org/r/c/21343/]

[https://gerrit.hyperledger.org/r/c/21353/]

[https://gerrit.hyperledger.org/r/c/21409/]

[https://gerrit.hyperledger.org/r/c/21513/]

https://gerrit.hyperledger.org/r/c/21357/;;;",,,,,,,,,,,,,,,,,,
I want the fabric-ca-server to support PKCS11 for HSM,FABC-17,13169,,Story,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,vpaprots,smithbk,smithbk,26/Oct/16 12:39 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,28/Apr/17 10:50 PM,,,,,,,v1.0.0,,,,,,0,,,,,,"See https://github.com/letsencrypt/pkcs11key, which implements the crypto/Signer interface using PCKS11 interfaces.
How to plug these into CFSSL?
See the following in CFSSL's main README.md:
You now have all the information you need to use your PKCS#11 token with CFSSL.
CFSSL supports PKCS#11 for certificate signing and OCSP signing. To create a
Signer (for certificate signing), import `signer/universal` and call NewSigner
with a Root object containing the module, pin, token label and private label
from above, plus a path to your certificate. The structure of the Root object is
documented in universal.go.

Alternately, you can construct a pkcs11key.Key or pkcs11key.Pool yourself, and
pass it to ocsp.NewSigner (for OCSP) or local.NewSigner (for certificate
signing). This will be necessary, for example, if you are using a single-session
token like the Yubikey and need both OCSP signing and certificate signing at the
same time.
",,ChristopherFerris,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx4d3:",,,,Unset,,Sprint 7 - Memship Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,Sprint 10 - Membership Service,Sprint 16 - Membership Service,,,,,,,,3.0,Unset,,,,,,,,,,,ChristopherFerris,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Apr/17 10:24 PM;smithbk;This is being done with BCCSP integration.
See https://gerrit.hyperledger.org/r/6727;;;","28/Apr/17 9:22 PM;ChristopherFerris;Is this done now? [~smithbk];;;",,,,,,,,,,,,,,,,,,
I need to be able to set expiration times on certificates.,FABC-18,12414,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,Clayton Sims,Clayton Sims,17/Aug/16 3:26 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,06/Apr/17 10:59 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"An administrator must be able to set a max expiration for ECerts and TCerts separately via GRPC.
A user (via the client node SDK) must be able to request an ECert and TCerts with a lower expiration time, but not greater than the max expiration.",,ChristopherFerris,Clayton Sims,JonathanLevi,smithbk,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-593,,,,,,,,,"1|hzxb1b:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,Clayton Sims,JonathanLevi,smithbk,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Aug/16 4:29 PM;JonathanLevi;A question, ""I need to be able to set expiration times on certificates."" as an ""end-user"" ?;;;","22/Aug/16 8:20 AM;ChristopherFerris;This should be two stories;;;","06/Apr/17 10:59 AM;smithbk;This is done in fabric-ca;;;",,,,,,,,,,,,,,,,,
"As a revoker, I need to revoke a user with Idemix credentials",FABC-19,31789,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,aambati,aambati,12/Jul/18 1:10 AM,03/Dec/19 9:15 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,idemix,,,,,A revoker must have ability to revoke a user's Idemix credentials. A user must also have ability to revoke his/her own Idemix credentials. All X509 certificate revocation access control mechanisms must apply when revoking Idemix credentials. Authentication token based on either x509 or Idemix credential must be accepted.,,aambati,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Yes,,,FABC-588,,,,,,,,,"1|hzzibz:",,,,No,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Jul/18 4:25 AM;aambati;https://gerrit.hyperledger.org/r/c/23405/;;;","02/Aug/18 7:25 AM;Clayton Sims;Assigning to Saad;;;","25/Aug/18 7:04 AM;denyeart;Moved to the Revocation epic.;;;",,,,,,,,,,,,,,,,,
As a user I want to be able to delete expired certificates from the database,FABC-20,28997,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,JonathanLevi,skarim,skarim,30/Mar/18 12:35 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"As a user I want to be able to delete expired certificates from the database

Design: https://docs.google.com/document/d/1WqT1BfZ2YdrDnqHe52UA9Z9SIp4I2mIbL2W5MY92A2I/edit#heading=h.6tgp6a2gjc8d",,skarim,,,,,,,,,,,,,,,,,,,,,,288000,288000,,0%,288000,288000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-587,,,,,,,,,"1|hzx01z:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/May/18 10:15 AM;Clayton Sims;per maintainer meeting, deferring from v1.2;;;",,,,,,,,,,,,,,,,,,,
"Improve ""packageabilty""",FABC-21,15679,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,greg.haskins,greg.haskins,11/Apr/17 11:31 PM,26/Mar/19 8:46 PM,28/Oct/23 2:21 AM,26/Mar/19 8:46 PM,,,,,,,,,,,,,0,,,,,,"We should ensure that the code is constructed in a way that makes it conducive to packaging.  This may include both traditional OS distro (RPM/DEB) packages, as well as containerized formats like Docker.

Considerations may include trying to create sensible defaults with standards such as FHS (https://wiki.debian.org/FilesystemHierarchyStandard) in mind, or how a docker container is customized (volume mounts, secrets, configuration, etc).",,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3095,,,,,,,,,"1|hzx6nr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As an Identity Mixer ""user/consumer"", I need to be able to also retrieve the revocation public key as part of the returned CAInfo (in v1)",FABC-22,30541,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,23/May/18 11:56 PM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,25/May/18 10:56 AM,v1.2.0,,,,,,v1.3.0,,,,,,0,,,,,,"Idemix issuer revocation public key is needed for verifiers to verify signatures/zero knowledge proofs. Currently /api/v1/cainfo endpoint returns CA's certificate chain, Idemix issuer public key. It should be change to return issuer revocation public key as well.",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-592,,,,,,,,,"1|hzzbvb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/May/18 3:54 AM;aambati;https://gerrit.hyperledger.org/r/c/22195/;;;",,,,,,,,,,,,,,,,,,,
"As an administrator, I want to control the maximum amount of time for which a TCert is valid from time of issuance",FABC-23,12475,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,smithbk,smithbk,19/Aug/16 1:58 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,MembershipServices,,,,,"This must minimally be configurable via the membersrvc.yaml.
It may also be configurable by an administrator via GRPC.
",,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-506,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3166,,,,,,,,,"1|hzxbaf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/18 12:06 AM;skarim;Closing out, TCerts will no longer be implemented;;;",,,,,,,,,,,,,,,,,,,
"As a blockchain participate, I need a CLI to enable membership service service manually by setting specified keys",FABC-24,12752,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Duplicate,,Clayton Sims,Clayton Sims,27/Sep/16 6:16 AM,27/Jul/19 11:46 PM,28/Oct/23 2:21 AM,27/Jul/19 11:45 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"cop server init manual <ecaKeyFile> <tcaKeyFile> <tlsKeyFile>

Enables the membership service server manually by setting the specified keys.
This is the option you should choose when you have your own CA.
",,Clayton Sims,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-589,,,,,,,,,"1|hzx9cf:",,,,Unset,,Sprint 3,,,,,,,,,,,,,Unset,,,,,,,,,,,Clayton Sims,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a blockchain participant, I need a CLI to get a certificate from Let's Encrypt",FABC-25,12751,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Won't Do,,Clayton Sims,Clayton Sims,27/Sep/16 6:13 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:40 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"Enables the membership services server by getting certificate(s) issued by Let’s Encrypt, where “lego” stands for “Let’s Encrypt GO client”.  This requires running as root because Let’s Encrypt requires that the caller prove “ownership” of the host by listening on ports 80 and 443 to respond to a query from Let’s Encrypt.  This uses the ACME protocol.
This command is used when you do not have your own CA and want membership services to function as your intermediate CA.  This is the preferred option in a production environment when you don’t have your own CA.
NOTE: In the future, we may also support “cop server init scep …” to use the SCEP protocol to get certificates.
",,ChristopherFerris,Clayton Sims,joaquimpedrooliveira,mastersingh24,,,,,,,,,,,,,,,,,,,600,600,,0%,600,600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-589,,,,,,,,,"1|hzxcnz:",,,,Unset,,Sprint 2,Sprint 3,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,Clayton Sims,joaquimpedrooliveira,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 10:14 PM;ChristopherFerris;I'm going out on a limb and thinking this is a duplicate and already handled. If so, please mark DUPLICATE and close. [~smithbk] [~Clayton Sims];;;","15/Apr/17 2:28 AM;mastersingh24;no longer relevant - we opted to base things on cfssl directly rather than LetsEncrypt;;;",,,,,,,,,,,,,,,,,,
"As business owner, I need the ability to have key rotation",FABC-26,12418,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,Clayton Sims,Clayton Sims,17/Aug/16 3:32 AM,26/Mar/19 8:39 PM,28/Oct/23 2:21 AM,26/Mar/19 8:39 PM,,,,,,,,,,,,,0,,,,,,"This refers to keys used to authenticate users (Signature key-pairs), and keys used for encryption (if encryption capabilities are to be part of chaincode library/fabric).

This item is strongly related with the identity expiration enablement.",,Clayton Sims,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3167,,,,,,,,,"1|hzx6mn:",,,,Unset,,,,,,,,,,,,,,2.0,Unset,,,,,,,,,,,Clayton Sims,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[SECURITY] Passwords will NOT be stored in DB in cleartext,FABC-27,19009,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,smithbk,smithbk,smithbk,07/Jul/17 12:38 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,07/Jul/17 6:47 PM,v1.0.0-rc1,,,,,,v1.0.0,,,,,,0,security,Security,,,,"The hash of the password (i.e. enrollment secret) rather than the actual password should be stored in the DB.
During enrollment, password checking is done by comparing the hashes rather than actual password for equality.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-4546,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzy71z:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Jul/17 12:42 PM;smithbk;See https://gerrit.hyperledger.org/r/11429;;;",,,,,,,,,,,,,,,,,,,
"As business owner, I need to make sure private data such banking id is not visible to external parties",FABC-28,12413,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,Clayton Sims,Clayton Sims,17/Aug/16 3:24 AM,26/Aug/19 7:15 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,tcerts,,,,,"This involves encrypting attributes without revealing to the peer, only to the chaincode.
The problem is there is no known way to distribute a key to all chaincode instances which can be used to encrypt. ",,Clayton Sims,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3166,,,,,,,,,"1|hzxb0v:",,,,Unset,,,,,,,,,,,,,,4.0,Unset,,,,,,,,,,,Clayton Sims,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
I want to rollover the root or intermediate CA signing cert,FABC-29,27328,,Story,Closed,FABC,Fabric CA,software,denyeart,,,High,Won't Do,,smithbk,smithbk,02/Feb/18 2:36 AM,26/Aug/19 8:14 AM,28/Oct/23 2:21 AM,26/Aug/19 8:14 AM,,,,,,,,,,,,,0,,,,,,"The following is a first pass at the commands which would allow rolling over a CA signing key:

{code}
1) fabric-ca-client cacertificate create <name> [--parent-cacertficate <parentName>]
    Simply creates a new signing certificate and tags it with <name> but doesn't start using it,
   at least not by default.  We could provide a non-default option to sign with this new cacert also.
2) fabric-ca-client cacertificate list
    List all CA certificates and which one is currently being used to sign.
3) fabric-ca-client cacertificate setcur <name>
    Change the current certificate used to sign.
4) fabric-ca-client cacertificate delete <name>
    Delete a CA signing certificate.  Do not allow deleting the current one.
{code}
The name of the first CA cert is named ""default"" by default.

To rollover a CA cert:
{code}
1) fabric-ca-client cacertificate create 2018
    Using the year for the name.  This will return the new CA cert.
2) Push the new CA cert to the appropriate channel MSPs and local MSPs.
3) fabric-ca-client cacertificate setcur 2018
    The CA will now start issuing certs with the new CA cert
4) fabric-ca-client cacertificate delete default
    This really isn't necessary and is probably better to leave for history purpose, but could be done if you want
{code}

NOTE: If we need to rollover root and intermediate CA cert at the same time, the process would be as follows:
{code}
1) fabric-ca-client cacertificate create 2018   // while logged into root CA
2) fabric-ca-client cacertificate create 2018 --parent-cacertificate 2018 //  While logged into intermediate CA.
3) Push the new root and intermediate CA cert to the appropriate channel MSPs and local MSPs.
4) fabric-ca-client cacertificate setcur 2018 // do this for both root and  intermediate CA
5) fabric-ca-client cacertificate delete default  // optionally do for both root and intermediate CA
{code}

All of these commands would require a new `hf.CAAdmin=true' attribute.",,denyeart,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-32,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6vb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Feb/18 9:52 PM;mastersingh24;I'm not sure I understand the ""root"" of this requirement.  I think it would be better to actually define the API on the fabric-ca server rather than showing the fabric-ca-client syntax.

CA certs are supposed to be long-term .... I understand that one might need to eventually need to create a new root CA keypair .... but not sure why we necessarily need to have an API for this?

I guess the bigger question is why we need to add anything special for this?  If someone really wants to change / update the root signing pair, they can do so.  I tend to think having this as a manual process is more in line with the significance of actually making a change like this.

That being said, maybe we should actually have a config setting for fabric-ca server to allow rotation of the key pair at some  interval.  Of course we could also expose that function as an API.  I guess we'd need something similar when running as an intermediate CA as well.;;;","23/Mar/18 2:08 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","26/Aug/19 8:14 AM;mastersingh24;We should not be doing this (as my original comment states), but in any case this is highly unlikely to get any attention;;;",,,,,,,,,,,,,,,,,
"As a fabric deployer, I need to encrypt sensitive information stored in config files",FABC-30,16716,,Story,To Do,FABC,Fabric CA,software,denyeart,,,High,,,mastersingh24,mastersingh24,14/May/17 1:57 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,v1.0.0,,,,,,,,,,,,0,,,,,,"We should provide a mechanism to encrypt sensitive information that is correctly stored within the various configuration files.  This would definitely include passwords (and perhaps even usernames).

There are a couple of ways to do this:

1) Initial config is in clear text but encrypt on first use

2) Provide an encryption format for people to use to encrypt config items (i.e. use some type of tagging around text entries to indicate that they are encrypted)

 

Of course we need a way to actually encrypt/decrypt without leaking the encryption key",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3535,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx3rj:",,,,Unset,,,,,,,,,,,,,,2.0,Unset,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert configuration files to be more user friendly and easy to understand,FABC-31,14149,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,18/Jan/17 1:05 PM,21/Jul/18 4:15 AM,28/Oct/23 2:21 AM,11/Mar/17 12:55 AM,,,,,,,,,,,,,0,membershipservices,,,,,"Currently configuration files for COP on both server and client side lack clarity and definition as to what each property means. Configuration files are currently stored as JSON format because that is what CFSSL uses, but then fabric is using yaml.

The goal is to convert configuration files to be more user friendly and easy to understand, also to maintain consistency in configuration files through out all the components (fabric-ca and fabric). Both JSON and YAML files will be supported, with YAML being the default and preferred format.

Users can put configuration in the YAML or JSON config file and override any of these with an environment variable.  We will continue to support the same command line arguments that cfssl supports, but generally folks will not need to use these ... well, except for the ""-config"" option to locate the config file in the 1st place.  But this is optional, because we will look in the home directory for a well-known config file name by default (server-config.yaml/json for server and client-config.yaml/json for the client).

In a bit more detail ...

The config/cli is a bit clumsy and not as consistent as it should be.   The reason is that until now we have had to make our config file compatible with the one that cfssl expects, but we are going to break that link so that we can convert from the fabric-ca config file format to the format that cfssl expects.   This gives us flexibility we need.  We can then use viper to read the server or client config file.  We can then convert it to the format expected by cfssl and call the cli/cli.go's LoadConfig function with the converted bytes.  Since we are then using viper for the client and server config, we get the use of env variables for free and can also support yaml and json format easily.

The proposed layout of the YAML files for both server and client are below.

TODO: Define which ones are required vs optional and specify default values.

*Server:*

{code:none}
#####################################
#    CA Certificate and Key Section
#####################################
ca:
  
    cert: ec.pem
    key: ec-key.pem

#####################################
#    Database section
#####################################
database:

    type: sqlite3
    datasource: cop.db

tls:
    enabled: false
    ca:
       file: root.pem
    cert:
       file: tls-cert.pem
    key:
       file: tls-key.pem

#####################################
#    TLS section
#####################################
tls:

    disable: false
    ca:
       file: root.pem
    cert:
       file: tls-cert.pem
    key:
       file: tls-key.pem

#####################################
#    Users section
#####################################
Users:

    admin:
        pass: ""adminpw""
        type: ""client""
        affiliation: ""bank_a""
        attrs:
            name: ""hf.Registrar.DelegateRoles""
              value: ""client,user,validator,auditor""
            name: ""hf.Revoker""
              value: ""true""

#####################################
#    Affiliation section
#####################################
affiliations:

   banks_and_institutions:
      banks:
          - bank_a
          - bank_b
          - bank_c
      institutions:
          - institution_a

#####################################
#    Signing section
#####################################
signing:

    default:
       usages:
         - cert
         - sign
       expiry: 8000h

    expiry:
       usages:
         - cert
         - sign
       expiry: 1s

#####################################
#    Crypto section
#    Specifies crypto primitives used for:
#    1) Authorization header verification
#    2) TCert generation (key derivation)
#    3) Others are TBD
#####################################
crypto:
    software:
          hash_family: SHA2
          security_level: 256
          ephemeral: false
          key_store_dir: keys
{code}

*client:*
{code:none}
#####################################
# Client Configuration
#####################################

serverURL: https://localhost:8888

#####################################
#    TLS section
#####################################
tls:
        cert:
          file: tls-cert.pem
        key:
          file: tls-key.pem
        ca:
          file: root.pem

#####################################
#    Crypto section
#    Specifies crypto primitives used for:
#    1) Authorization header signing
#    2) Others are TBD
#####################################
crypto:
    software:
          hash_family: SHA2
          security_level: 256
          ephemeral: false
          key_store_dir: keys
{code}",,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,115200,115200,,0%,115200,115200,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx7ov:",,,,Unset,,Sprint 10 - Membership Service,,,,,,,,,,,,4.0,Unset,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Jan/17 4:54 AM;smithbk;Let's remove the 'homeDir' from the client config as the home directory will always be the directory of the config file.;;;",,,,,,,,,,,,,,,,,,,
I want to rotate the root and intermediate CA key gracefully,FABC-32,18750,,Story,In Progress,FABC,Fabric CA,software,denyeart,,,Medium,,aambati,skarim,skarim,28/Jun/17 11:56 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,v1.0.0-rc1,,,,,,,,,,,,0,,,,,,See the design at https://docs.google.com/document/d/13v6rVhw0wcCe5k-P1LqES-O6XlNrVzKitIZYsygcXEQ,,skarim,wutongtree,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-531,FABC-532,,,,FABC-29,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx3r3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,wutongtree,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a user, I would like to use the same EnrollmentID in more than one device",FABC-33,12524,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,dulcep,dulcep,23/Aug/16 3:24 AM,22/Apr/19 8:08 AM,28/Oct/23 2:21 AM,15/Apr/17 3:10 AM,,,,,,,v1.0.0,,,,,,0,MembershipServices,,,,,"Story: It is common for users to work from multiple devices and to expect seamless operation/interaction when transitioning from one device to another.  For example, as a user on a business trip I would like to use the same EnrollmentID on my mobile phone/tablet/etc that I use in my laptop. ",,dulcep,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxbgf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,dulcep,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Apr/17 3:09 AM;mastersingh24;marking this as done as fabric-ca actually supports multiple enrollments based on the max enrollments parameter / settings;;;",,,,,,,,,,,,,,,,,,,
"As developer, I need membership services to perform and scale.",FABC-34,12416,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,Clayton Sims,Clayton Sims,17/Aug/16 3:28 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,01/Oct/18 11:02 PM,,,,,,,,,,,,,0,MembershipServices,,,,,,,ChristopherFerris,Clayton Sims,grapebaba,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxb1j:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,Clayton Sims,grapebaba,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Jul/18 9:52 PM;ChristopherFerris;removed from usability epic.;;;",,,,,,,,,,,,,,,,,,,
Dockerfile build setup for fabric-ca v1.0,FABC-35,13745,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,10/Dec/16 4:05 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,22/Apr/17 3:05 AM,,,,,,,v1.0.0,,,,,,0,MembershipServices,,,,,A developer should have the capability to bring up a cluster of cop servers using haproxy and postgres using a build from their local environment.,,ishihara.shun,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-86,,,,,,,,,,,,,,,,,,,,,,,,FABC-664,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx34f:",,,,Unset,,Sprint 7 - Quality,Sprint 8 - Quality,Sprint 9 - Quality,Sprint 10 - Quality,Sprint 11 - Quality,Sprint 12 - Quality,Sprint 13 - Quality,Sprint 14 - Quality,Sprint 15 - Quality,Sprint 16 - Quality,,,,Unset,,,,,,,,,,,ishihara.shun,latitiah,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Dec/16 5:42 AM;latitiah;I will revisit and make sure that all 3 cop servers connect successfully after the completion of FAB-1409.

Currently, only 1 cop server is able to connect successfully to the postgres database in a clustering environment.

;;;",,,,,,,,,,,,,,,,,,,
"As a developer, I need membership services packaged as a library with a user friendly api. ",FABC-36,12411,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,Clayton Sims,Clayton Sims,17/Aug/16 3:22 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,06/Apr/17 10:59 AM,,,,,,,,,,,,,0,MembershipServices,,,,,,,Clayton Sims,grapebaba,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-590,,,,,,,,,"1|hzxb0n:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,Clayton Sims,grapebaba,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhance fabric-ca to support self-signed tcerts,FABC-37,15498,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,smithbk,smithbk,29/Mar/17 11:50 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"The overall epic for self-signed tcerts is at https://jira.hyperledger.org/browse/FAB-2441
This story adds support to the fabric-ca client library so that it can be used in a golang SDK.

In particular, the fabric-ca/lib/Identity object will have the following functions:
{code}
func (i *Identity) GetTCertFactory(req *api.GetTCertFactoryRequest) (*TcertFactory, error) {

func (i *TcertFactory) GetTCert() (*TCert, error) {
{code}
The api.GetTCertFactoryRequest will be the same as the previous api.GetTCertBatchRequest except that it has a new boolean field specifying that the tcertFactory object is to generate self-signed tcerts.  In this case, the numTCerts field is ignored; it is up to the client how many tcerts will be generated by the client, subject to the expiration/revocation of the associated ecert of course.",,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2441,,,,,,,,,,,,,,,,,FAB-2447,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx7af:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Apr/17 10:17 PM;smithbk;See https://gerrit.hyperledger.org/r/#/c/7643/;;;","30/Mar/18 12:09 AM;skarim;Closing out, TCerts will no longer be implemented;;;",,,,,,,,,,,,,,,,,,
Document fabric-ca REST APIs,FABC-38,13068,,Story,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,,binhn,binhn,20/Oct/16 7:31 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,06/Apr/17 10:51 AM,,,,,,,v1.0.0,,,,,,0,MembershipServices,,,,,"Provide Swagger documentation for the fabric-ca REST APIs.

This looks like a good place to start: https://goswagger.io/generate/spec.html

Note that this allows you to generate the swagger doc from code annotations, which is what we would like to do.",,aliblackwell,binhn,JonathanLevi,ple8LF,smithbk,warm3snow,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-754,,,,,,,,,"1|hzx7yf:",,,,Unset,,Sprint 8 - Membership Services,Sprint 9 - Membership Services,,,,,,,,,,,,Unset,,,,,,,,,,,aliblackwell,binhn,JonathanLevi,ple8LF,smithbk,warm3snow,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Oct/16 10:27 PM;smithbk;See description;;;","24/Dec/16 6:10 AM;ple8LF;I am working on FAB-1465 and FAB-1464 and will not be able to get to FAB-763 in Sprint 8.;;;","24/Dec/16 6:15 AM;JonathanLevi;[~pvle@us.ibm.com] NP. Will update as requested.;;;","24/Dec/16 6:20 AM;JonathanLevi;This story should probably move to ""Sprint 9"", when [~keithsmith] is back.;;;","25/Jan/17 12:07 AM;smithbk;See https://gerrit.hyperledger.org/r/#/c/4705/
;;;",,,,,,,,,,,,,,,
"Include affiliation, identity, and certificate sub-commands in fabric CA doc",FABC-39,29953,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,04/May/18 10:41 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,01/Jun/18 10:20 PM,,,,,,,v1.2.0,,,,,,0,,,,,,"The fabric CA doc currently includes only an automatically generated version of the main usage message.  It should also include the usage message for the main sub-commands for affiliation, identity, and certificate",,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzz8rz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/May/18 12:40 AM;skarim;https://gerrit.hyperledger.org/r/c/21625/;;;",,,,,,,,,,,,,,,,,,,
Add unit-tests cases for the lib/dbutil package,FABC-40,26783,,Task,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,13/Jan/18 4:18 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,Unit-tests are needed for the lib/dbutil package,,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx6tj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;",,,,,,,,,,,,,,,,,,,
Update swagger to add version,FABC-41,27316,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,skarim,skarim,02/Feb/18 1:15 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,19/Jun/18 1:22 AM,v1.1.0,,,,,,,,,,,,0,,,,,,Update swagger to add version to the get info api,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx6v3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Jun/18 1:22 AM;skarim;This has already been done.;;;",,,,,,,,,,,,,,,,,,,
Refactor the fabric-ca-client CLI code to support integration tests,FABC-42,29231,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,07/Apr/18 1:37 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,28/Apr/18 4:00 AM,,,,,,,v1.2.0,,,,,,0,,,,,,"Refactor the fabric-ca-client CLI code to support integration tests. Currently all the CLI related code lives in the ""main"" package. However, it is desired that integration test be a self contained package. To be able to do this requires moving the ""RunMain"" function outside of the main package into a package of its own so that it can be referenced and integration package can call to it. ",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzz553:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Apr/18 1:53 AM;skarim;https://gerrit.hyperledger.org/r/#/c/20247/;;;",,,,,,,,,,,,,,,,,,,
Add more documentation regarding multiple intermediate and parent CAs,FABC-43,16975,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,skarim,skarim,22/May/17 10:59 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,20/Jul/17 3:36 AM,,,,,,,v1.0.0,,,,,,0,,,,,,Add more documentation regarding multiple intermediate and parent CAs,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxwfr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update BASE_VERSION for fabric-ca to 1.1.0,FABC-44,22471,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,18/Oct/17 2:46 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,28/Mar/18 11:50 PM,,,,,,,v1.2.0,,,,,,0,,,,,,Update BASE_VERSION for fabric-ca to 1.1.0 in Makefile,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyjxz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Oct/17 2:48 AM;smithbk;https://gerrit.hyperledger.org/r/14599 [FAB-6661] Update version to 1.1.0;;;",,,,,,,,,,,,,,,,,,,
Streamer for fabric-ca client to read JSON response,FABC-45,25750,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,15/Dec/17 3:21 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,21/Dec/17 9:34 PM,v1.1.0,,,,,,v1.1.1,,,,,,0,,,,,,"A streamer for reading in chunks in JSON format as they are sent by the fabric-ca server. This is to prevent OOM issues on the client by reading the response as it comes in rather than at the end. 

This is only handles array elements inside the JSON object.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyqxz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Fabric-ca docs needs to be updated,FABC-46,28344,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,09/Mar/18 11:50 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,13/Mar/18 5:50 PM,,,,,,,v1.1.0,v1.2.0,,,,,0,,,,,,Fabric-ca doc currently refers to an older CLI and config structure. Need to update.,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzz0g7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Mar/18 3:15 AM;skarim;https://gerrit.hyperledger.org/r/#/c/18935/;;;",,,,,,,,,,,,,,,,,,,
Add migration support for sqlite,FABC-47,26672,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,09/Jan/18 6:42 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,13/Jan/18 4:47 AM,,,,,,,v1.1.0-alpha,,,,,,0,Release-planning-1.1,,,,,"In order to support upgrade from v1.0 to v1.1 for sqlite, we need to support migration for sqlite3.
This is currently only supported for the other DBs (MySQL and Postgres).",,Nishi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzysrj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Nishi,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Jan/18 12:06 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/16709/;;;","13/Jan/18 6:31 AM;Nishi;Tested migration using sqllite3 as DB on commit level: *12adae3f7c5d27ccfeb06e9d819694e1d1c1df64* successfully.;;;",,,,,,,,,,,,,,,,,,
Enrollment info part of client config,FABC-48,14996,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,23/Feb/17 4:01 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,06/Mar/17 11:50 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"Updat the client config template to include enrollment
information. Simplify reenroll command to not require
optional CSR file, it will now be read from client config.

Enroll command will now be the only command that can be executed first.
Once client has successfully enrolled and enrollment information
exists then other client commands can be executed",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx5zb:",,,,,,Sprint 12 - Membership Service,Sprint 13 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Remove references to cop from README,FABC-49,14365,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,27/Jan/17 1:02 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,29/Apr/17 4:38 AM,,,,,,,,,,,,,0,,,,,,The README still has references to COP.  Remove all of them and replace with fabric-ca.,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxj5z:",,,,,,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Jan/17 1:05 AM;smithbk;See http://gerrit.hyperledger.org/r/4873;;;",,,,,,,,,,,,,,,,,,,
Add multi-ca test to fvt bucket,FABC-50,19199,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,12/Jul/17 5:40 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,01/Dec/17 2:28 AM,,,,,,,,,,,,,0,,,,,,"Include basic configuration parsing, registration, enroll, reenroll, revocation, multiple backend DBs, haproxy, and TLS.",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy82f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Restructure client/server commands to be more object oriented,FABC-51,23858,,Task,To Do,FABC,Fabric CA,software,denyeart,,,Low,,,aambati,aambati,09/Nov/17 1:55 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Currently, all the sub commands related variables are put in the ClientCmd/ServerCmd because sub commands are not types. This task is to make each sub command a class (a subclass of ClientCmd/ServerCmd) and move sub command related variables to corresponding class.",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx6s7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Registrar registering a user should be able to set max enrollment for user,FABC-52,13955,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,07/Jan/17 12:59 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,07/Mar/17 11:55 PM,,,,,,,,,,,,,0,,,,,,Registrar registering a user should be able to set max enrollment for user. The max enrollment value that the registrar can set for a new user will be less than or equal to the max enrollment value defined in the COP server configuration file. ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx7mf:",,,,,,Sprint 9 - Membership Services,Sprint 10 - Membership Service,Sprint 13 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Use branch specific CI properties,FABC-53,22451,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,17/Oct/17 6:33 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,27/Oct/17 7:51 PM,,,,,,,v1.0.4,v1.1.0,,,,,0,,,,,,Need to add a ci.properties files to each fabric-ca branch in order to support branch-specific CI behaviors (e.g. supporting different versions of Go),,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyjtr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Oct/17 6:41 PM;mastersingh24;https://gerrit.hyperledger.org/r/14581
https://gerrit.hyperledger.org/r/14583;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-server --count option uses same DB for all servers,FABC-55,19385,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,21/Jul/17 12:48 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,19/Jan/18 1:59 AM,,,,,,,,,,,,,0,,,,,,"When using the --count option of the fabric-ca-sever, the intent is to start CAs with unique databases. However, all of the spawned CAs use the same DB, if either

the DB type is postgres or myslql, 
 or
 (the DB type is sqlite3) AND (the CA_CFG_PATH, or presumably FABRIC_CA_SEVER_HOME path is set)",,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy993:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Jan/18 1:59 AM;skarim;https://gerrit.hyperledger.org/r/#/c/14715/;;;",,,,,,,,,,,,,,,,,,,
Rename COP to fabric-ca,FABC-56,14141,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,18/Jan/17 7:01 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,05/Feb/17 12:00 AM,,,,,,,,,,,,,0,,,,,,"Rename fabric-cop repository to fabric-ca
               fabric-cop images to fabric-ca
               cop executable to fabric-ca
This means all imports in source need to be renamed and all occurrences of COP should be updated in source.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxie7:",,,,,,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jan/17 10:42 AM;smithbk;Change set http://gerrit.hyperledger.org/r/4803 ;;;",,,,,,,,,,,,,,,,,,,
Add fabric-ca-server config option to whitelist enabled endpoints,FABC-57,13965,,Task,To Do,FABC,Fabric CA,software,denyeart,,,Lowest,,,smithbk,smithbk,09/Jan/17 8:05 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,help-wanted,,,,,"lib/server.go has a list of endpoints that the fabric-ca-server provides.
Allow a user to configure a new field in the fabric-ca-server's configuration file similar to the following:
   endpoints: 
       - register
         enroll
         reenroll
         tcert
This is a white list of endpoints which the server will enable.

To implement, add the following field to the Config struct in lib/serverconfig.go:
    Endpoints []string `json:""endpoints,omitempty""`

In lib/server.go, update the registerHandlers function to check Endpoints if not nil before registering the handler for an endpoint.",,denyeart,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxgnb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;",,,,,,,,,,,,,,,,,,,
fabric-ca db integrate clustering and intermediate ca environment,FABC-58,22709,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,20/Oct/17 6:00 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,11/Nov/17 3:19 AM,,,,,,,v1.1.0,,,,,,0,,,,,,"Add a test that includes multi-ca capability in conjunction with intermediate CAs in a cluster, with database sharing, with a proxy front-end.",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6863,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzykc7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Update documentation with instructions on configuring TLS,FABC-59,17477,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,05/Jun/17 10:22 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,29/Jun/17 2:22 AM,v1.0.0-alpha1,v1.0.0-alpha2,,,,,v1.0.0,,,,,,0,,,,,,Add instructions on how to get self-signed certificate/key using openSSL to be used for TLS on both client and server side.,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3q7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jun/17 2:22 AM;skarim;Going to be handled via FAB-4936;;;",,,,,,,,,,,,,,,,,,,
Document how to get and renew TLS certs for and from fabric-ca-server,FABC-60,18573,,Task,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,smithbk,smithbk,23/Jun/17 12:57 AM,17/Jul/19 11:49 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,3,,,,,,"The method for getting TLS certs for and from fabric-ca-server needs documenting and validation.  This method should be to minimize admin overhead of certificate renewal due to expiration or key compromise.   Using self-signed TLS certs is not recommended because of the admin overhead can be large of having to distribute the new certificate to all clients upon renewal.

Specifically, the following tasks need to be documented/validated:
1) How to generate and renew a TLS cert for a root CA
2) How to generate and renew a TLS cert for an intermediate CA
3) How to configure a client which connects to a root CA over TLS
4) How to configure a client which connects to an intermediate CA over TLS

Others?

For example, the following script can be used to perform #1 currently.  All clients need to trust the root CA certificate which has a default expiration of 15 years.  The TLS certificate has a 1 year expiration by default but can be renewed without affecting clients, thus the advantage of this over using self-signed certificates.

{code}
fabric-ca-server start -b admin:adminpw > http-server.out 2>&1&
PID=$?
echo $PID
sleep 1
fabric-ca-client enroll -u http://admin:adminpw@localhost:7054 -c tls/config.yaml -m localhost,127.0.0.1,`hostname`
cp tls/msp/signcerts/* tls-cert.pem
cp tls/msp/keystore/* tls-key.pem
{ kill $PID && wait $PID; } 2>/dev/null
rm -rf tls
sleep 1
fabric-ca-server start --tls.enabled --tls.certfile tls-cert.pem --tls.keyfile tls-key.pem
{code}
",,gregnotso,joaquimpedrooliveira,mastersingh24,nyet,qiang0723,siddjain,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx02f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,gregnotso,joaquimpedrooliveira,mastersingh24,nyet,qiang0723,siddjain,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Feb/19 2:54 AM;nyet;The problem is the keystore contains (potentially) more than a few private keys. The TLS private cert should probably not be saved in keystore at all - it takes a few more steps to figure out which file in the keystore belongs to the tls cert in `signcerts`

 ;;;","21/Feb/19 3:17 AM;nyet;Even worse, the CA server can only sign using `FABRIC_CA_SERVER_CA_KEYFILE` since `FABRIC_CA_SERVER_TLS_KEYFILE` is only used as the TLS server endpoint.

So having a separate TLSCA is best practice,e but the ca-server does not support it.

https://lists.hyperledger.org/g/fabric/topic/29938289;;;","21/Feb/19 3:44 AM;mastersingh24;[~nyet] 

{quote}So having a separate TLSCA is best practice,e but the ca-server does not support it.{quote}

You can run multiple physical Fabric CA servers or you can use the multi-root capability if you want a single process:  https://hyperledger-fabric-ca.readthedocs.io/en/release-1.4/users-guide.html#setting-up-multiple-cas;;;","08/Mar/19 2:48 AM;nyet;Is there a way to derive the _sk name from the public cert, so we know which _sk file to copy to tls-key.pem?

The exhaustive way is to extract the public key from each private key and compare it with tls-crt.pem but that seems like the long way around;;;","08/Mar/19 4:30 AM;nyet;{code:java}
$ openssl x509 -pubkey -noout -in cert.pem | openssl ec -pubin -outform DER | openssl dgst -sha1
read EC key
writing EC key
(stdin)= 19966dcc83a5c2629db0c5499b5e2c2af96a5546
$ openssl x509 -noout -text -in cert.pem
....
            X509v3 Subject Key Identifier:
                8C:03:4E:5F:2A:50:0E:19:8E:F3:32:DE:8B:47:37:69:B5:28:2F:01
            X509v3 Authority Key Identifier:
                keyid:75:90:C3:22:6D:DE:A9:3B:AA:E1:F5:D2:AE:6E:FE:3D:80:15:C0:8E
{code}
{code:java}
$ ls -1 keystore/
5dae05ed804b89c6b1331ca80a4b5b6ada56638717d32ba5aff6a20b830d54c8_sk
{code}
[http://certificateerror.blogspot.com/2011/02/how-to-validate-subject-key-identifier.html]
[https://security.stackexchange.com/questions/128944/generate-subject-key-identifier-by-hand-using-openssl-command-sequence]
{code:java}
$ openssl x509 -pubkey -noout -in cert.pem | openssl ec -pubin -outform DER | openssl dgst -sha1
read EC key
writing EC key
(stdin)= 19966dcc83a5c2629db0c5499b5e2c2af96a5546
{code}
{code:java}
$ openssl x509 -pubkey -noout -in cert.pem | openssl ec -pubin -outform DER | openssl dgst -sha256
read EC key
writing EC key
(stdin)= 527d94807515a71e0bff631101491271a82ebb09209ecb440056263bf2bde10c
{code};;;","13/Apr/19 8:01 AM;nyet;Well this works but has an error that I guess can be ignored:
{code}
$ ls -1 keystore
5dae05ed804b89c6b1331ca80a4b5b6ada56638717d32ba5aff6a20b830d54c8_sk
$ openssl x509 -noout -in cert.pem -pubkey | openssl asn1parse
    0:d=0  hl=2 l=  89 cons: SEQUENCE
    2:d=1  hl=2 l=  19 cons: SEQUENCE
    4:d=2  hl=2 l=   7 prim: OBJECT            :id-ecPublicKey
   13:d=2  hl=2 l=   8 prim: OBJECT            :prime256v1
   23:d=1  hl=2 l=  66 prim: BIT STRING
$ openssl x509 -noout -in cert.pem -pubkey | openssl asn1parse -strparse 23 -out pub.der; openssl dgst -r pub.der | cut -f 1 -d "" ""
    0:d=0  hl=2 l=  12 prim: OCTET STRING      [HEX DUMP]:620A8A6BA03AD06D2C78387D
   14:d=0  hl=4 l=  32 prim: appl [ 9218 ]
Error in encoding
140718717883456:error:0D07207B:asn1 encoding routines:ASN1_get_object:header too long:../crypto/asn1/asn1_lib.c:101:
5dae05ed804b89c6b1331ca80a4b5b6ada56638717d32ba5aff6a20b830d54c8
{code};;;","15/Apr/19 2:25 PM;nyet;Specifying hl + l with {{-length}} seems to work, interestingly:
{code:sh}
openssl x509 -noout -in cert.pem -pubkey | openssl asn1parse -strparse 23 -length 34 -out pub.der
{code}
Or
{code:sh}
openssl x509 -noout -pubkey -in cert.pem | openssl ec -pubin -outform d | dd ibs=26 skip=1 | openssl dgst -sha256
{code}

[https://github.com/openssl/openssl/issues/1381];;;",,,,,,,,,,,,,
Improvement to TLS configurations,FABC-61,15139,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,02/Mar/17 4:04 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,04/Apr/17 1:25 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"*Server*
Currently the ServerTLSConfig does not have an option for mutual TLS (client TLS authentication). The configuration needs to be extended to support different various client authentication by incorporation the different TLS client authentication types the TLS go package provides.

[https://golang.org/pkg/crypto/tls/#ClientAuthType]
type ClientAuthType int
const (
        NoClientCert ClientAuthType = iota
        RequestClientCert
        RequireAnyClientCert
        VerifyClientCertIfGiven
        RequireAndVerifyClientCert
)

*Client*
On client side need to remove enabled option from client TLS configuration. Whether TLS is enabled on client side will depend on the protocol of the URL that is provided for connecting to server. Using ""https"" will enable TLS, ""http"" will disable TLS. ",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx547:",,,,,,Sprint 13 - Membership Service,Sprint 14 - Membership Service,Sprint 15 - Membership Service,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Store root prekey in DB persistently,FABC-62,15483,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,smithbk,smithbk,29/Mar/17 2:01 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,v1.0.0,,,,,,,,,,,,0,,,,,,"This is a task which needs to be completed as part of tcert support.

See FIXME in fabric-ca/lib/servertcert.go around line 58 as follows:

// FIXME: The root prekey must be stored persistently in DB and retrieved here if not found
rootKey, err := genRootKey(server.csp)

The logic should be as follows:
{code:java}
get root key from DB
if not found
     gen root key and store in DB
fi
{code}",,aambati,chaibaoyang,denyeart,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx79j:",,,,,,Sprint 15 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,aambati,chaibaoyang,denyeart,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/May/17 3:01 AM;aambati;Moved it to 1.1 as tcerts are not supported in 1.0;;;","06/Dec/17 11:44 AM;chaibaoyang;then how to change the rootkey?;;;","23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","30/Mar/18 12:10 AM;skarim;Closing out, TCerts will no longer be implemented;;;",,,,,,,,,,,,,,,,
Create load tester for the fabric ca server,FABC-63,15593,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,06/Apr/17 12:26 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,29/Aug/17 4:55 AM,,,,,,,v1.1.0,,,,,,0,Release-planning-1.1,,,,,Create a simple load tester for the fabric ca server,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpb3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Apr/17 4:15 AM;aambati;https://gerrit.hyperledger.org/r/7793;;;","20/Jul/17 3:00 AM;aambati;[https://gerrit.hyperledger.org/r/11621]

[https://gerrit.hyperledger.org/r/1162|https://gerrit.hyperledger.org/r/11621]3

[https://gerrit.hyperledger.org/r/1162|https://gerrit.hyperledger.org/r/11621]7

https://gerrit.hyperledger.org/r/11641;;;",,,,,,,,,,,,,,,,,,
fabric-ca server intermediate CA +TLS + BCCSP fails with panic,FABC-64,19422,,Task,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,rennman,rennman,22/Jul/17 5:41 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Using the following bccsp config:
BCCSP:
   Default: PKCS11
  PKCS11:
    Library: /usr/lib/x86_64-linux-gnu/softhsm/libsofthsm2.so
    Pin: '98765432'
    Label: 'ForFabric'
    Hash: SHA2
    Security: 256
    FileKeyStore:
        # The directory used for the software file-based keystore
        KeyStore: msp/keystore

An intermediate CA attempting to connect via TLS to a root CA encounters a fatal error:


2017/07/21 20:38:06 http: panic serving 127.0.0.1:60342: Key type not recognized - [&\{ski:[79 159 26 253 154 53 190 250 107 159 119 178 16 43 144 66 124 163 150 138 41 154 88 120 66 162 202 194 193 154 158 241] pub:0xc420411240}] [&pkcs11.ecdsaPublicKey\{ski:[]uint8\{0x4f, 0x9f, 0x1a, 0xfd, 0x9a, 0x35, 0xbe, 0xfa, 0x6b, 0x9f, 0x77, 0xb2, 0x10, 0x2b, 0x90, 0x42, 0x7c, 0xa3, 0x96, 0x8a, 0x29, 0x9a, 0x58, 0x78, 0x42, 0xa2, 0xca, 0xc2, 0xc1, 0x9a, 0x9e, 0xf1}, pub:(*ecdsa.PublicKey)(0xc420411240)}] [*pkcs11.ecdsaPublicKey] [*pkcs11.ecdsaPublicKey]
goroutine 21 [running]:
net/http.(*conn).serve.func1(0xc42040c480)
 /opt/go/src/net/http/server.go:1491 +0x12a
panic(0xa40de0, 0xc4204130b0)
 /opt/go/src/runtime/panic.go:458 +0x243
github.com/hyperledger/fabric-ca/vendor/github.com/hyperledger/fabric/bccsp/pkcs11.(*impl).Sign(0xc4201c16d0, 0xfd7d60, 0xc420411260, 0xc420411dc0, 0x20, 0x20, 0x7ff3174ad108, 0xc420413068, 0xc420413068, 0xc42003a708, ...)
 /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/hyperledger/fabric/bccsp/pkcs11/impl.go:722 +0x4df
github.com/hyperledger/fabric-ca/vendor/github.com/hyperledger/fabric/bccsp/signer.(*bccspCryptoSigner).Sign(0xc4203fb7d0, 0xfcdfa0, 0xc420018330, 0xc420411dc0, 0x20, 0x20, 0xfd0020, 0xc420413068, 0x0, 0x0, ...)
 /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/hyperledger/fabric/bccsp/signer/signer.go:88 +0xd0
crypto/tls.(*ecdheKeyAgreement).generateServerKeyExchange(0xc420351e40, 0xc420296160, 0xc42035eae0, 0xc42040a640, 0xc420404b60, 0x32a, 0x0, 0x0)
 /opt/go/src/crypto/tls/key_agreement.go:255 +0x67c
crypto/tls.(*serverHandshakeState).doFullHandshake(0xc42004bbd8, 0xc42003ab00, 0x0)
 /opt/go/src/crypto/tls/handshake_server.go:397 +0x3de
crypto/tls.(*Conn).serverHandshake(0xc42031fc00, 0xb49be8, 0xc42031fd08)
 /opt/go/src/crypto/tls/handshake_server.go:86 +0x316
crypto/tls.(*Conn).Handshake(0xc42031fc00, 0x0, 0x0)
 /opt/go/src/crypto/tls/conn.go:1262 +0x2c3
net/http.(*conn).serve(0xc42040c480, 0xfd68e0, 0xc4203fbe00)
 /opt/go/src/net/http/server.go:1507 +0x121
created by net/http.(*Server).Serve
 /opt/go/src/net/http/server.go:2293 +0x44d
Error: POST failure [Post https://localhost:17054/enroll: EOF]; not sending
POST https://localhost:17054/enroll",,aambati,hamza113,jamesgua,mastersingh24,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy9ef:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,hamza113,jamesgua,mastersingh24,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jul/17 5:52 AM;rennman;Steps to re-create.

1) Add the softhsm install script to the fvt-image's Dockerfile. 
 From the fabric repo, copy
    images/testenv/install-softhsm2.sh
 to the fabric-ca:
    images/fabric-ca-fvt/payload/install-softhsm2.sh



2) Modify the bccsp setup in scripts/fvt/fabric-ca_utils.
{code:java}
BCCSP:
  Default: PKCS11
  PKCS11:
    Library: /usr/lib/x86_64-linux-gnu/softhsm/libsofthsm2.so
    Pin: '98765432'
    Label: 'ForFabric'
    Hash: SHA2
    Security: 256
    FileKeyStore:
       KeyStore: msp/keystore{code}
3) Build the fvt-image using dynamically linked glibc
{code:java}
   FABRIC_CA_DYNAMIC_LINK make docker-fvt
{code}

4) Start the container:
{code:java}
   docker run -v ${GOPATH}/src/github.com/hyperledger/fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca -ti hyperledger/fabric-ca-fvt bash
{code}

5) Run the intermediate_ca test using TLS:
{code:java}
root@b23f01e05e7d:/opt/gopath/src/github.com/hyperledger/fabric-ca# FABRIC_TLS=true ./scripts/fvt/intermediateca_test.sh
{code};;;","31/Jul/17 11:37 PM;jamesgua;It fails because currently it can't find private key, to bypass, add line in file signer.go line 48 after ""return nil, errors.New(""key must be asymmetric."")""

if !key.Private() \{
 return nil, errors.New(""key must be private."")
}

file location:

./vendor/github.com/hyperledger/fabric/bccsp/signer/signer.go

Another issue when tried on Ubuntu-s390x: docker image created OS type is Debian but not Ubuntu so libsofthsm2.so location is not at /usr/lib/s390x-linux-gnu/softhsm, modify to fit the condition set in script then test would pass ;;;","29/Mar/18 5:02 AM;aambati;[~rennman] is this still a problem? Can this be closed?;;;","12/Apr/18 10:24 PM;mastersingh24;I'm pretty sure this is no longer an issue [~aambati];;;",,,,,,,,,,,,,,,,
Use same error package as fabric,FABC-65,20099,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,10/Aug/17 10:35 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,24/Aug/17 10:39 PM,,,,,,,v1.1.0,,,,,,0,Release-planning-1.1,,,,,"The following is from Binh.  This should be done on top of our ""Improve error handling"" change set to ensure we are consistent with fabric.

FYI - on the scrum today, (#fabric-scum channel) we have decided to rework
our errors handling by using the available package here
https://github.com/pkg/errors, which has been vendored into the code base.
Even though this package lacks of error codes, it provides the critical
feature that we need -- stacktrace -- for serviceability. Using this
package is 1 less thing that we have to maintain.

Please follow the readme in the package to get the stacktrace for every
original error in our code. If we re throw an error from our code in a
different go-routine (thread), we should wrap the original error with our
own error+stacktrace; otherwise, no needs to regenerate the stacktrace.

",,smithbk,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-5762,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzycnj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,weeds,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Aug/17 3:19 AM;weeds;probably a couple of days of work.;;;","15/Aug/17 3:45 PM;smithbk;https://gerrit.hyperledger.org/r/12463 [FAB-5707] Vendoring github.com/pkg/errors
https://gerrit.hyperledger.org/r/12565 [FAB-5707] Use pkg/errors to create
https://gerrit.hyperledger.org/r/12567 [FAB-5707] Integrate pkg/errors with httpErr;;;",,,,,,,,,,,,,,,,,,
Improve test coverage for fabric-ca,FABC-66,16732,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,15/May/17 8:33 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,29/Mar/18 12:20 AM,v1.0.0-alpha2,v1.0.0-rc1,,,,,v1.2.0,,,,,,0,,,,,,"Increase test coverage to 85% or more for all fabric-ca packages.

This will be achieved by first vendoring testify, a test framework used in fabric, that simplify test writing. In more details the following new packages are needed:
* vendor/github.com/stretchr/testify/assert
* vendor/github.com/stretchr/testify/mock
and their dependencies:
* vendor/github.com/davecgh/go-spew/spew
* vendor/github.com/pmezard/go-difflib
* vendor/github.com/stretchr/objx
Notice that also fabric vendors the same packages.

Then, packages with test coverage under 85% will be touched to increase the coverage.",,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3n3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/May/17 7:07 PM;JonathanLevi;Gerrit CR: [https://gerrit.hyperledger.org/r/#/c/9355];;;","05/Jul/17 7:29 PM;JonathanLevi;Have just noticed that this ticket is being re-used here: https://gerrit.hyperledger.org/r/#/c/9407/;;;",,,,,,,,,,,,,,,,,,
Integration testing of new Certificate API with MySQL,FABC-67,30537,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,23/May/18 10:42 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,06/Jun/18 10:43 PM,,,,,,,v1.2.0,,,,,,0,e2e-test,,,,,"New database query added to support the new Certificates API, that retrieves certificates from the database based on certain filters. The goal of this task is to test to make sure that query properly executes against MySQL database and the correct results are returned back to user.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-103,,,,,FAB-10164,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-587,,,,,,,,,"1|hzzbun:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/May/18 2:21 AM;skarim;https://gerrit.hyperledger.org/r/c/22207/;;;",,,,,,,,,,,,,,,,,,,
Fabric-CA Default Start Up,FABC-68,14400,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,28/Jan/17 4:51 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,06/Mar/17 11:53 PM,,,,,,,,,,,,,0,,,,,,"If no CLI or Config file is provided when starting Fabric-CA the server will revert to using default settings. The server home directory will be set to ../fabric-ca/cli/server/config. The server during default start up will look in this directory for configuration to boot server. 

It will also create cert and key that will be used during server start up if non exist. The default cert and key will be based on the csr.json in ../fabric-ca/cli/server/config.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzxjbz:",,,,,,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improvement Fabric CA document on configuring TLS,FABC-69,24668,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,,skarim,skarim,02/Dec/17 1:49 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,v1.0.4,v1.1.0-preview,,,,,,,,,,,0,,,,,,Improve the document regarding TLS for fabric CA. Provide instructions for both the client and server side on TLS configuration. ,,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyp3j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","29/Mar/18 5:25 AM;skarim;Duplicate of FAB-4936;;;",,,,,,,,,,,,,,,,,,
Change ECDSA key begin line,FABC-70,13531,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,jiangyaoguo,jiangyaoguo,25/Nov/16 12:25 PM,26/Mar/19 8:45 PM,28/Oct/23 2:21 AM,26/Mar/19 8:44 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"Currently, fabric save ECDSA key to file with begin line like `
{code:java}
-----BEGIN ECDSA PRIVATE KEY-----
{code}
`. Though the RF5919 don't make begin line standardized, openssl forced ECDSA key file begin with `
{code:java}
-----BEGIN EC PRIVATE KEY-----
{code}
`, and x509 package of golang examples use `
{code:java}
-----BEGIN EC PRIVATE KEY-----
{code}
`, too. So it's better to keep fabric being compatible with openssl.
",,jiangyaoguo,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx6mv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jiangyaoguo,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Mar/19 8:45 PM;mastersingh24;This was really bccsp issue .. we've been using
{noformat}
BEGIN PRIVATE KEY{noformat}
for a while now;;;",,,,,,,,,,,,,,,,,,,
Improve Readme to be more user friendly,FABC-71,13928,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,05/Jan/17 6:28 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,15/Mar/17 4:51 AM,,,,,,,,,,,,,0,MembershipServices,,,,,Improve README to be more user friendly and easy to follow. Make it as clear as possible on how to install and start using the COP server.,,ishihara.shun,markparz,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx7m7:",,,,,,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,,,,,,,4.0,,,,,,,,,,,,ishihara.shun,markparz,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Feb/17 1:04 AM;markparz;This is a great topic, are there any specific suggestions you can provide? Would be happy to work with you on doing some updates to the docs as well.;;;",,,,,,,,,,,,,,,,,,,
Update fabric-ca FVT testing for independent client/server executables and new configuration,FABC-72,15138,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,02/Mar/17 3:32 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,24/Apr/17 12:37 AM,,,,,,,,,,,,,0,,,,,,,,JonathanLevi,rennman,smithbk,,,,,,,,,,,,,,,,,,,,240,240,,0%,240,240,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmgf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JonathanLevi,rennman,smithbk,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/17 9:35 AM;smithbk;Allen, is this still needed?  What exactly does it mean?  If already done, pls mark it so.  Thanks;;;","07/Apr/17 2:50 AM;JonathanLevi;https://gerrit.hyperledger.org/r/#/c/7757;;;","07/Apr/17 4:51 AM;rennman;when these change sets are integrated, I'll close this out:
7747 7749 7751 7753 7755 7757 7759 7761 7763 7765 7767 7769 7771 7799;;;",,,,,,,,,,,,,,,,,
Architecture - Fabric-ca,FABC-73,14895,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,keithsmith,markparz,markparz,18/Feb/17 1:17 AM,26/Aug/19 7:48 AM,28/Oct/23 2:21 AM,26/Aug/19 7:48 AM,,,,,,,,,,,,,0,Documentation,,,,,Need a deep dive on the fabric-ca,,chrisconway,ChristopherFerris,markparz,mastersingh24,TiantianGao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2317,,,,,,,,,"1|hzx3s7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,chrisconway,ChristopherFerris,markparz,mastersingh24,TiantianGao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Aug/17 1:57 AM;ChristopherFerris;more important that we have some working examples of how to use the fabric-ca components. The docs we have now are not useful to someone actually using the service. [~keithsmith] [~markparz];;;","26/Aug/19 7:48 AM;mastersingh24;Operators guide underway;;;",,,,,,,,,,,,,,,,,,
Create an errors package,FABC-74,31978,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,18/Jul/18 12:53 AM,17/Aug/18 5:11 AM,28/Oct/23 2:21 AM,17/Aug/18 5:11 AM,,,,,,,v1.3.0,,,,,,0,,,,,,"Currently all the CA error codes and error related functions reside the lib package. As we are moving towards more modular packages, referencing these error codes and functions causes circular dependencies.

Error related code should be move to its own separate package that can then be referenced from different packages.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,Unset,Unset,,,,,No,,,No,,,"1|hzziy7:",,,,Unset,Unset,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jul/18 1:29 AM;skarim;https://gerrit.hyperledger.org/r/c/24495/;;;",,,,,,,,,,,,,,,,,,,
Add a section on HSM to the fabric CA user guide,FABC-75,20855,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,16/Sep/17 3:54 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,28/Sep/17 1:00 AM,v1.0.2,,,,,,,,,,,,0,,,,,,Add a section on HSM to the fabric CA user guide,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzygjz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Sep/17 1:40 PM;aambati;https://gerrit.hyperledger.org/r/c/13529/;;;",,,,,,,,,,,,,,,,,,,
Remove global variables in fabric-ca-client and fabric-ca-server packages,FABC-76,16054,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,27/Apr/17 11:46 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,28/Aug/17 10:44 PM,,,,,,,v1.1.0,,,,,,1,Release-planning-1.1,,,,,Global variables in general is not a good idea . In case of fabric-ca-client and fabric-ca-server global variables are causing issues with unit test cases. We should remove the global variables and encapsulate them in a server/client command structure.,,aambati,JonathanLevi,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxrhr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,JonathanLevi,weeds,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Aug/17 3:28 AM;weeds;this helps us with test cases. this is 1 day of work.;;;","16/Aug/17 2:33 AM;JonathanLevi;This is a great JIRA ticket. We should have pushed for this back in April already. I will try to get this in soon/right away.

Thank you [~aambati]

 ;;;","16/Aug/17 5:56 AM;aambati;[https://gerrit.hyperledger.org/r/c/12443/]

[https://gerrit.hyperledger.org/r/c/12485/]

https://gerrit.hyperledger.org/r/c/12489/;;;",,,,,,,,,,,,,,,,,
Return correct HTTP code for DB errors,FABC-77,23899,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,,skarim,skarim,10/Nov/17 6:29 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,v1.1.0,,,,,,,,,,,,0,,,,,,"Should return a 500 error if a DB error occurs, and a 400 error if no DB error
but the user was not found. ",,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzymvr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","28/Mar/18 11:54 PM;skarim;This is a duplicate, this has already been addressed;;;",,,,,,,,,,,,,,,,,,
fabric-ca create mechanism for generating TLS certificates that don't expire,FABC-78,16816,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,18/May/17 12:38 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,01/Dec/17 2:28 AM,v1.0.0-alpha2,,,,,,,,,,,,0,,,,,,"The testdata directory is populated with TLS certificates for various servers. For convenience the server/client certificates/keys are generally shared for testing purposes.

The are some problems with this approach:
 - some of which have pending expiration (months, nor years)
 - the keys are ec keys. Some servers (notably mysql) do not support ecdsa. Consequently, we need rsa, or both rsa and ecdsa.--
 - a more real-world scenario would support mutiple roots, not just one
 - a more real-world scenario would also support a more complex CA hierarchy, including a longer pathlength to root
 - we should be testing with mutliple key lengths and signing algorithms, not just one
 - we should be error-testing with unsupported certificates (the current fvt test already do some degree of this
 - lastly, introducing some measure of randomness for test purposes is always preferred

Hence it makes sense to develop a dynamic mechanism for generating TLS certificates that will be made available to all infrastructure components in the fabric-ca-fvt image.  Likely this will be accomplished by creating a script that will run as part of the Dockerfile that builds the image. There is an existing pki tool that provides the ability to create complex multi-level CA hierarchies with a full complement of X.509 v3 extensions.

 ",,ChristopherFerris,rennman,smithbk,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxvrz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,rennman,smithbk,troyronda,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/May/17 7:37 PM;smithbk;For places that supports ecdsa, we only need to support ecdsa/256 for v1.

Randomness in testing is OK if/when you can't reasonably test all permutations with each run.  However, if we have this randomness, we must also have a way of replaying a particular test run without randomness in order to reproduce a problem that has occurred.  We can't have it fail once and then just reverify and have it pass because it chose a different random setting.  If there were a way to base the randomness on change set number, that would be ideal from my perspective, but don't know how that would be possible.  Can you think of other ways of accomplishing this?;;;","22/May/17 11:55 PM;rennman;The idea of randomness is not as all-encompassing as may be implied, e.g. the configuration will not change in a random fashion.

However, there is some. A perfect example of this is the defect that was uncovered by a particular class of serial number that was shorter than average and was prefixed by a leading '0'. In that case, we failed to find a match in the DB due to treating the int as a string.

As an aid to debugging, the log files that are generated in the CI tests always have debugging turned on, so that should help some.

Lastly, each test defines its own CA_CFG directory. As an additional aid to debugging, I could omit the line that deletes this testcase directory at the end of each test (which it does currently). Then, during post-processing done in jenkins, we could tar up the results (also and even including the /etc/hyperledger/fabric-ca and /var/lib/mysql and /var/lib/postgres directories).;;;","01/Jun/17 9:46 PM;ChristopherFerris;[~smithbk] assume that the fixVersion should be Future? [~rennman] please complete issues when creating them, including affectedVersion, fixVersion (bugs should default to 1.0 others should default to Future at this point), component and for improvements choose Improvement rather than Task. ;;;",,,,,,,,,,,,,,,,,
Replace 'Role' with 'Type',FABC-79,23847,,Task,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,08/Nov/17 6:46 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,v1.1.0,,,,,,,,,,,,0,,,,,,"Using 'type' instead of 'roles' in fabric-ca. This means changing the ""hf.Registrar.Roles""
attribute to ""hf.Registrar.Types"". But for backwards compatibility. need to create a function to get this attribute which looks up ""hf.Registrar.Types"" first and if does not find it, it looks up
""hf.Registrar.Roles"".  However, when we storing this attribute, store the
new name ""hf.Registrar.Types"".  Documentation will need to be updated to reflect this change.",,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx6rz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;",,,,,,,,,,,,,,,,,,,
Convert Group to Affiliation Path,FABC-80,13920,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,04/Jan/17 5:45 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,11/Mar/17 12:54 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Currently the group is stored as a single value in the database for a user. Want to convert group to ""affiliation"" in the database that will have the whole tree represented in the column. It will be seperated by '/'. For example, the following tree:

- banks_and_institutions
-- banks
--- bank_a

will be represented as ""banks_and_institutions/banks/bank_a"" for a user associated with this group hierarchy. 

This is being proposed cause an ecert will now have the affiliation path instead of just the group name. When it comes time for tcert generation, the affiliation path can be easily used to find the root group and the corresponding root pre key that will then be used to generate the child group's prekey.",,JonathanLevi,mastersingh24,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx79z:",,,,,,Sprint 7 - Memship Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,JonathanLevi,mastersingh24,skarim,smithbk,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Jan/17 11:58 PM;JonathanLevi;Can we elaborate/say a few words on why is the proposal to store the entire path is good/better?

BTW: The Gerrit code submission (https://gerrit.hyperledger.org/r/#/c/3669) isn't linked.;;;","09/Jan/17 11:36 PM;skarim;Jonathon, I've update the description on why this is being proposed. ;;;","28/Jan/17 12:40 AM;smithbk;There are two reasons that storing a path is preferable to storing just a group name.
1) We can regenerate a group's prekey given only the root prekey + the pathname.  If we stored only the group name, we would have to access the path to that group name or to get the prekey of the parent.  Anyway, it would require that the group hierarchy be stored persistently in a separate table.
2) If we store only the group name, then the group names must be globally unique.  Since we store the path, we can reuse a group name in different parts of the hierarchy.
   For example, ""/a/b/d"" and ""/a/c/d"" are 2 paths and the group name ""d"" is reused.;;;","28/Jan/17 1:01 AM;smithbk;See https://jira.hyperledger.org/browse/FAB-1894;;;","28/Jan/17 9:23 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/4447/;;;",,,,,,,,,,,,,,,
Affiliation/group table needs cleaning up with terminology and storage,FABC-81,14915,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,19/Feb/17 12:29 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,07/Mar/17 11:55 PM,,,,,,,,,,,,,0,,,,,,"There is a mixture of terminology used in fabric-ca for affiliation groups.  It is called group and affiliation.  The code needs to be changed to use affiliation throughout.  The term ""group"" would be confusing because users can be a member of multiple groups, but a user can only be associated with a single affiliation, thus the name affiliation is better.

Change the name of the table from ""groups"" to ""affiliations"".  This table has two columns: path and prekey.  We really only need to store the root prekey but doesn't hurt to store all of them.  The root prekey is the row with path equal to the empty string.

That said, another approach is to have a separate table with a single row which contains columns for multiple ""singleton"" type information.  For now, the table would have only two columns: name which is always ""fabric-ca-server"" and prekey which is the value of the root prekey.  We could add columns as needed.

",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5z3:",,,,,,Sprint 12 - Membership Service,Sprint 13 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Build release packages for fabric-ca-client and fabric-ca-server,FABC-82,24693,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,smithbk,smithbk,03/Dec/17 12:29 AM,22/Sep/19 5:56 PM,28/Oct/23 2:21 AM,22/Sep/19 5:56 PM,,,,,,,,,,,,,0,,,,,,"The fabric-ca/Makefile needs to be enhanced to build release packages for fabric-ca-client and fabric-ca-server.   See the 'release' and 'release-all' targets in fabric/Makefile.  For example, for the configtxlator binary see 

release/%/bin/configtxlator: $(PROJECT_FILES)",,aambati,denyeart,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-141,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx6on:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,denyeart,smithbk,,,,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,true,"23/Mar/18 2:08 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","29/Mar/18 5:25 AM;aambati;This is partially done. We have make release and release-all targets that creates fabric-ca-client executables;;;",,,,,,,,,,,,,,,,,,
ca client can't register user under golang 1.9,FABC-83,20567,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,codestone,codestone,01/Sep/17 2:05 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,05/Oct/17 4:54 AM,v1.0.0,v1.0.1,v1.0.5,,,,v1.1.0,,,,,,0,fabric-ca,,,,,"download fabric-ca v1.0.1 and v1.0.0 and golang 1.9
 compile fabric-ca-server and fabric-ca-client
 when fabric-ca-server start and use fabric-ca-client register a user or peer ,then client print
{code:java}
Error: Error response from server was: Authorization failure
{code}
and server print 
{code}
2017/09/01 11:39:22 [ERROR] No certificates found for provided serial and aki
{code}","*system:*   openSUSE 42.2 x86_64
*golang:  * 1.9
*fabric-ca:* v1.0.1 and v1.0.0
",codestone,harsha544,mastersingh24,smithbk,steveruckdashel,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-5461,,,,,FAB-5925,,,,,,,"01/Sep/17 2:03 PM;codestone;20170901130204.png;https://jira.hyperledger.org/secure/attachment/12009/20170901130204.png","01/Sep/17 2:03 PM;codestone;20170901130215.png;https://jira.hyperledger.org/secure/attachment/12011/20170901130215.png","01/Sep/17 2:03 PM;codestone;20170901130255.png;https://jira.hyperledger.org/secure/attachment/12010/20170901130255.png",,,,,,,,,,,,,,,,,,,,,,,,"1|hzyf1r:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,codestone,harsha544,mastersingh24,smithbk,steveruckdashel,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Sep/17 8:34 PM;mastersingh24;So I figured out the issue here -  the current cfssl code is not actually compatible with Go 1.9.

cfssl passes an X509 certificate template [here|https://github.com/cloudflare/cfssl/blob/master/signer/local/local.go#L385]     and then assumes that X509.CreateCertificate will fill in the AKI in the template and sets the AKI with this assumption [here|https://github.com/cloudflare/cfssl/blob/master/signer/local/local.go#L395]

Unfortunately, Go 1.9 no longer fills in the AKI in the template passed to X509.CreateCertificate.  You can see that [here|https://golang.org/src/crypto/x509/x509.go?s=19833:23432#L1786]

Of course we'll need a fix from cfssl, but in the interim we could solve this ourselves as well by extracting the AKI from the signed cert bytes;;;","11/Sep/17 9:08 PM;mastersingh24;cfssl issue opened:   https://github.com/cloudflare/cfssl/issues/801

cfssl PR submitted:   https://github.com/cloudflare/cfssl/pull/807;;;","05/Oct/17 4:55 AM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/13407/;;;","09/Dec/17 5:52 AM;steveruckdashel;Updated this to add v1.0.5 being affected. ;;;","09/Dec/17 7:18 AM;smithbk;https://gerrit.hyperledger.org/r/16063 Revendor cfssl for release branch;;;",,,,,,,,,,,,,,,
COP Client Configuration file,FABC-84,14037,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,13/Jan/17 1:21 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,11/Mar/17 12:55 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"COP client will now make use of a configuration file. The configuration will contain the following properties. 

serverURL - URL of the server                                            
ca_certfiles - File path to root certificate of which server certificate is signed by    
keyfile - File path to client TLS key on file system                    
certfile - File path to client TLS certificate on file system            

The config file will be passed in using -config file.

Example:
cop client enroll -config ../testdata/cop_client.json admin adminpw
",,arun17,skarim,,,,,,,,,,,,,,,,,,,,,115200,115200,,0%,115200,115200,,,FABC-269,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx7tz:",,,,,,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,,,,,,,4.0,,,,,,,,,,,,arun17,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Revendor Idemix Library,FABC-85,30769,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,31/May/18 10:58 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,10/Jul/18 1:06 AM,v1.2.0,,,,,,v1.3.0,,,,,,0,,,,,,The Idemix library in Fabric has been updated. The vendored code in Fabric CA needs to be updated to have latest idemix library.,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzdfj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Jun/18 1:56 AM;skarim;https://gerrit.hyperledger.org/r/c/22487/;;;",,,,,,,,,,,,,,,,,,,
Gracefully handle multiple server trying to create database at start up,FABC-86,13818,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,skarim,skarim,15/Dec/16 7:28 AM,28/Jul/19 12:00 AM,28/Oct/23 2:21 AM,28/Feb/18 11:58 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"When bringing up a network, if two cop server come up at the same time when no database has been initialized they will both try to create a database. However, only one will succeed and the other gets an error from the database. The server that received the error crashes. If the error occurs it should try to reconnect to the database. 

cop1       | 2016/12/14 21:35:38 [DEBUG] Creating Tables...
db              | ERROR:  duplicate key value violates unique constraint ""pg_database_datname_index""
db              | DETAIL:  Key (datname)=(cop) already exists.
db              | STATEMENT:  CREATE DATABASE cop
db              | ERROR:  duplicate key value violates unique constraint ""pg_database_datname_index""
db              | DETAIL:  Key (datname)=(cop) already exists.
db              | STATEMENT:  CREATE DATABASE cop
cop0            | 2016/12/14 21:35:38 [ERROR] Failed to create new user registery [error: 100020: Failed to create Postgres database%!(EXTRA []interface {}=[]) [pq: duplicate key value violates unique constraint ""pg_database_datname_index""]]
cop0          | 100020: Failed to create Postgres database%!(EXTRA []interface {}=[]) [pq: duplicate key value violates unique constraint ""pg_database_datname_index""]",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-35,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7n3:",,,,,,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Sep/17 11:14 PM;skarim;This should get resolved by FAB-5786 - https://gerrit.hyperledger.org/r/#/c/12611/;;;",,,,,,,,,,,,,,,,,,,
FVT: Idemix for Fabric CA (local using fabric-ca-client),FABC-87,30533,,Test Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,dubovitskaya,dubovitskaya,23/May/18 10:22 PM,14/Aug/18 6:24 PM,28/Oct/23 2:21 AM,14/Aug/18 6:24 PM,,,,,,,v1.3.0,,,,,,0,manual-test,,,,,"E2E testing of Idemix function in Fabric CA.

Fabric-ca-client will be used to drive the tests against Fabric CA server in cluster and standalone topology with postgres/mysql databases.",,dubovitskaya,latitiah,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-119,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-592,,,No,,,,,,"1|hzzbtz:",,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Integration Test,,,dubovitskaya,latitiah,skarim,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Jun/18 2:34 AM;skarim;[https://gerrit.hyperledger.org/r/c/23205/]

https://gerrit.hyperledger.org/r/c/22489/;;;",,,,,,,,,,,,,,,,,,,
"Change HTTP success return code for /register, /enroll and /reenroll endpoints to 201",FABC-88,23230,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,01/Nov/17 5:01 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,29/Nov/17 6:31 AM,,,,,,,v1.1.0,,,,,,0,,,,,,"The HTTP success return code for /register, /enroll and
/reenroll API endpoints should be 201 as they create an artifact
for the identity being registered, enrolled, re-enrolled, respectively.
Currently, a 200 is returned.",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzym1r:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Nov/17 1:38 AM;aambati;https://gerrit.hyperledger.org/r/c/15025/;;;",,,,,,,,,,,,,,,,,,,
increase default timeout for fabric-ca-fvt tests,FABC-89,23706,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,02/Nov/17 7:29 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,09/Nov/17 4:43 AM,,,,,,,v1.1.1,,,,,,0,,,,,,"The default timeout for server start is 10 seconds.

Some of the tests in the fvt bucket actually are waiting 60 secs.

 

Due to poor performance in CI on x86, some tests are timing out.

 

This CR will change set the default to 3 minutes.",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzym6n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Create interface to write better unit test for fabric-ca-client commands,FABC-90,29044,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,31/Mar/18 4:55 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,10/May/18 12:55 AM,,,,,,,v1.2.0,,,,,,0,,,,,,Create interface to write better unit test for fabric-ca-client commands,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzz40f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Apr/18 1:53 AM;skarim;https://gerrit.hyperledger.org/r/#/c/20001/1;;;",,,,,,,,,,,,,,,,,,,
Support Role-Based Access Control (RBAC),FABC-91,22484,,Task,In Progress,FABC,Fabric CA,software,denyeart,,,Medium,,,smithbk,smithbk,19/Oct/17 12:34 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,3,,,,,,"Role-Based Access Control, or RBAC for short, must work with multiple types of identities:
 1) x509 certificates issued by fabric CA and based on attributes
 2) x509 certificates issued by a 3rd party CA
 3) idemix credentials
 4) others in the future

For both chaincode, we need a flexible and extensible mechanism which allows a single role to be defined which includes identities from multiple categories. For example, suppose we want to define an admin role which includes all of the following identities:
 1) x509 certificates issued by a fabric-ca-server CA with an attribute named ""admin"" and a value of ""true""
 2) x509 certificates issued by a 3rd party CA with an OU hierarchy of ""OU=adwin,OU=finance,O=org1""
 3) idemix credentials with an attribute named ""admin"" and a value of ""true""

From a configuration perspective, this is represented as a boolean expression similar to the following:
{code:java}
""attr('admin') == 'true' || dn =~ '.*,OU=admin,OU=finance,O=org1,.*""
{code}
which reads as ""attribute 'admin' equals 'true' OR distinquished name matches the regular expression pattern denoting OU=admin,OU=finance,O=org1.
 The 'attr' function knows how to retrieve an attribute from identities of type #1 and #3 above. The part of the expression after the OR includes identities of type #2.

The mapping of a role name to a boolean expression may be assigned to a deployer, while the decision of which roles are needed and where to check these roles is a developer's job.
 This is helpful and allows the same code to be deployed multiple times with different role semantics, depending on the needs.

The boolean expression language is built on top of govaluate to prevent from having to reinvent the wheel.

A RBAC library API is as follows, where *expression* is an expression of the form described above.
{code:java}
// Mgr is an RBAC manager
type Mgr interface {

	// AddRole adds a role to the RBAC manager
	AddRole(roleName, expression string) error

	// HasRole determines if 'identity' has role 'roleName'
	HasRole(identity *langid.Identity, roleName string) (bool, error)
}

// Identity represents an arbitrary identity
type Identity struct {
	// MSPType is the MSP type associated with this identity
	MSPType string
	// MSPID is the MSP ID associated with this identity.
	MSPID string
	// Object is an object that is specific to the MSP type.
	// If MSPType is X509, this is of type *x509.Certificate.
	Object interface{}
}
{code}
----------------- Some additional thoughts -------------
 Roles may not be the correct way to view this from a chaincode API perspective.
 For example, the well-known idemix example is that chaincode may want to verify that the user is >= 21 years old. The current mechanism proposed above would require that the actual age be put in the ecert as an attribute and the chaincode would manually verify that it is >= 21, thus revealing the actual age to chaincode.
 However, it would be possible for the user to send an expression similar to:
{code:java}
attr('age') >= 21
{code}
in an enrollment request. The expression is evaluated by fabric-ca-server, and the expression and result are placed in the ecert, thus not revealing the actual age. The chaincode then accesses the key being the expression, and verifies that the value is true.

Looking at this another way, there are 3 actors to consider in the flow: the CA (fabric-ca-server), the user (e.g. an SDK), and chaincode. The question is, where do we create the boolean expression which is to be evaluated by chaincode.
 1) Create the expression in chaincode. This is fine, but it reveals the actual attribute values to chaincode.
 2) The user creates the expression. This is what idemix does (the expression is called ""presentation policy""), and binds it to the CA by creating a zero-knowledge proof which chaincode can verify.
 3) The user requests the CA to create the expression and put it into the certificate before signing. This is what I mentioned above that could be done.

In both cases 2 and 3, it seems that rather than having an RBAC API for chaincode as presented above, we should have one in which the key for chaincode is an expression rather than a role name. Maybe we could call this EBAC (Expression-Based Access Control). So basically, the chaincode would call this API similar to:
{code:java}
   if ebac.Satisfies(""attr('age') >= 21"") {
   }
{code}
This does mean that either the user needs to be aware of which expressions/conditions the chaincode will require
 so that it could include it in its certificate or credential. Or it would be better if there is some recommended best practice so that this prior knowledge is not required. Two options are:

a) Expose an API on the chaincode to return all expressions/conditions requested by the chaincode. The advantage of this is that multiple conditions could be discovered all at once and put into a single certificate/credential. The disadvantage is that you may not need all (or any) of them, depending on which operation and code path is taken through the chaincode.

b) Another option is to have a standard error format which includes the expression/condition which was not found in the certificate/credential. The user application could capture this error and then reissue the request with a new certificate/credential which includes the expression/condition. For example, an application invokes chaincode which returns an error including the ""attr('age') >= 21"" condition which failed. The user application captures this error and automatically gets another certificate with this condition and its result (assuming it is true) ... or generates a new idemix proof for the condition ... and then reissues the request to chaincode.",,C0rnelius,ChristopherFerris,kchristidis,nyet,smithbk,Vishal3152,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx6rr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,C0rnelius,ChristopherFerris,kchristidis,nyet,smithbk,Vishal3152,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/18 1:12 AM;ChristopherFerris;chatted with [~mastersingh24] and he things we should abandon this course as it is not aligned with the strategic direction.;;;",,,,,,,,,,,,,,,,,,,
Enhance readthedocs for revocation,FABC-92,15409,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,smithbk,smithbk,21/Mar/17 3:59 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,21/Apr/17 10:37 PM,,,,,,,,,,,,,0,,,,,,"Give an example of how to revoke a specific certificate, including how to print out the AKI and serial number using openssl
Be sure to include the ""keyid"" prefix for the AKI value.",,aambati,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4ef:",,,,,,Sprint 14 - Membership Service,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,aambati,smithbk,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Apr/17 4:14 AM;aambati;https://gerrit.hyperledger.org/r/7733;;;",,,,,,,,,,,,,,,,,,,
Vendor GREP11 BCCSP into fabric-ca,FABC-93,23820,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,harrijk,harrijk,harrijk,07/Nov/17 2:58 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,07/Nov/17 4:16 AM,,,,,,,,,,,,,0,,,,,,This will be used for special builds.,,harrijk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzymfb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,harrijk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Reenable idemix routes,FABC-94,31114,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,16/Jun/18 10:08 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,04/Jul/18 4:00 AM,,,,,,,v1.3.0,,,,,,0,,,,,,Undo the changes made in FAB-10517 to re-enable Idemix routes before merging other Idemix related changesets.,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzf1r:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Jun/18 3:11 AM;aambati;https://gerrit.hyperledger.org/r/c/23261/;;;",,,,,,,,,,,,,,,,,,,
Allow duration values for all timestamp flags of gencrl command,FABC-95,21343,,Task,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,aambati,aambati,06/Oct/17 8:30 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,v1.1.0,,,,,,,,,,,,0,,,,,,"We should allow them to enter a duration relative to the current time. For example, ""+30d"" means 30 days in the
future, and ""-10s"" means 10 seconds in the past.
This should only affect the client side when you are 
translating the CLI arguments to the absolute timestamps.
The presence of a leading + or - are required for
a relative time.",,aambati,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx6rj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Oct/17 12:31 AM;mastersingh24;I personally don't think we should do this.  This would be a very, very low priority in my book;;;",,,,,,,,,,,,,,,,,,,
Add a fabric-ca based sample to fabric-samples,FABC-96,20643,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,06/Sep/17 10:51 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,18/Oct/17 11:29 PM,,,,,,,v1.1.0,,,,,,0,,,,,,"This sample is particularly aimed at demonstrating ABAC (Attribute-Based Access Control), but will also show how to use fabric and fabric CA together end-to-end. ",,C0rnelius,harsha544,JonathanLevi,qiang0723,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6648,FAB-6649,,,,,,FABC-539,FAB-6588,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyfhb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,C0rnelius,harsha544,JonathanLevi,qiang0723,smithbk,,,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,main,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Sep/17 1:15 PM;smithbk;https://gerrit.hyperledger.org/r/13213;;;","10/Nov/17 1:32 AM;JonathanLevi;BTW: ""Add a fabric-ca based sample to fabric-samples"" is a horrible and not informative/descriptive title.;;;",,,,,,,,,,,,,,,,,,
Update fabric-ca doc to point to new link,FABC-97,17240,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,30/May/17 10:59 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,02/Jun/17 9:23 AM,v1.0.0,v1.0.0-alpha2,,,,,v1.0.0,,,,,,0,,,,,,The documentation for fabric-ca was moved over from the fabric repository to the fabric-ca repository. A new readthedocs page was setup. The doc in fabric repo needs to be updated with a link that points to the new location for the fabric-ca documentation.,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxxf3:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/May/17 11:42 PM;skarim;https://gerrit.hyperledger.org/r/#/c/9921/;;;",,,,,,,,,,,,,,,,,,,
Add SW BCCSP Support to fabric-ca,FABC-98,15168,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,vpaprots,vpaprots,vpaprots,03/Mar/17 1:07 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,28/Apr/17 9:20 PM,,,,,,,,,,,,,0,,,,,,,,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-744,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmlr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,vpaprots,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
FVT: Idemix for Fabric CA (integration with SDK),FABC-99,30534,,Test Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,dubovitskaya,dubovitskaya,23/May/18 10:23 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,24/Jul/18 9:32 PM,,,,,,,v1.3.0,,,,,,0,manual-test,,,,,E2E: IdentityMixer Client(SDK) attempts to get an Idemix enrolment certificate from Fabric CA.,,dubovitskaya,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-119,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABJ-327,,,No,,,,,,"1|hzzbu7:",,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Integration Test,,,dubovitskaya,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/May/18 9:42 PM;dubovitskaya;https://gerrit.hyperledger.org/r/#/c/22189/;;;",,,,,,,,,,,,,,,,,,,
Remove tcert from fabric CA doc and disable tcert endpoint,FABC-100,20141,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,12/Aug/17 3:35 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,15/Sep/17 2:53 AM,,,,,,,,,,,,,0,Release-planning-1.1,,,,,"Since none of the SDKs support tcerts, it makes no sense for fabric CA to continue to document it and to have this endpoint enabled.
Remove this from the documentation so folks are not confused thinking that it is currently supported.
And also disable the endpoint for now.
The future direction is to use idemix to do this anyway, which does not require talking to the server but does require some integration
for ecert issuance.",,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzycvz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Aug/17 1:48 AM;smithbk;https://gerrit.hyperledger.org/r/12573 [FAB-5740] Disable tcert and remove from doc;;;","18/Aug/17 4:16 AM;JonathanLevi;We have kept procrastinating the TCerts feature... it's pretty straight-forward to add it to any of the SDKs.;;;","19/Aug/17 10:20 PM;smithbk;Yes, I agree Jonathan that it is taking a long time.   In the interest of moving this forward, here is a suggestion.

1) There has been confusion from folks that TCerts are currently usable because of the fabric-ca documentation.  Since there is currently no way to use TCerts since the SDKs don't support it, temporarily remove references to it from the documentation ... or at least make it clear that the capability is not functional in the SDKs and so it is not yet usable.  I would push a new patch set which does NOT disable the tcert endpoint for now.

2) We need to then decide how to move forward with the implementation.
    There are currently two implementations of TCerts with which we could move forward:
    a) the x509-based version
    b) the idemix version - see fabric/idemix (based on zero-knowledge proofs)
   Which do we support going forward, or both?
   I think it is preferable to only support one.
   A couple of advantages of ""b"" are:
   - does not require going back to the fabric-ca-server to get a batch of tcerts.  They can be generated locally in the client.  I was trying to do this with ""self-signed TCerts"", but still had issues to work through.
   - allows more limited disclosure of info.  For example, if one of the attributes is a person's birthdate, we could reveal that the person is over 21 without revealing their actual birthdate.

;;;","29/Aug/17 7:56 AM;smithbk;Just removing tcerts from the documentation in order to avoid confusion.
https://gerrit.hyperledger.org/r/#/c/12891/;;;","15/Sep/17 2:53 AM;Clayton Sims;CR merged so marking done;;;",,,,,,,,,,,,,,,
Update/feedback for the FABRIC_CFG_HOME suggestion from Baohua,FABC-101,14745,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,baohua,JonathanLevi,JonathanLevi,11/Feb/17 6:01 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,11/Feb/17 7:43 PM,,,,,,,,,,,,13/Feb/17 12:00 AM,0,,,,,,"https://gerrit.hyperledger.org/r/#/c/5831/

Fix the config path env variable

The config path env is now named a `FABRIC_CA_HOME`, rename it to
`CA_CFG_PATH` to keep aligned with fabric (PEER_CFG_PATH and
ORDERER_CFG_PATH).

",,baohua,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2118,,,,FAB-2118,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkqn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,baohua,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Feb/17 6:02 AM;JonathanLevi;Hi Baohua!

First, that's a great change/suggestion (to have this consistently aligned).
As history has shown over an over, naming environment variables, repos and sub-directories has always been one of the hottest topics in the project! ;-)

Just quickly: I'm totally with you on CFG_HOME -> CFG_PATH suffix. My suggestion is to change from *CA_CFG_PATH* -> *FABRIC_CA_CFG_PATH*

While {color:red}FABRIC-CA{color}_CFG_PATH is more ""correct"" due to the capitalization of ""fabric-ca"", I believe it's very error prone... and does not feel right.

Let me quickly run it by the teams?;;;","11/Feb/17 6:56 AM;smithbk;Instead of a single fabric-ca executable, we will soon have separate fabric-ca-server and fabric-ca-client executables and fabric-ca will go away.
Although I'm not wild about long names to start with, I think there is some consistency in that the new env var prefixes will be FABRIC_CA_SERVER and FABRIC_CA_CLIENT, respectively.  That is, the prefix for ""peer"" is ""PEER_"", so the env var prefixes should be the same as the executable name, changing ""-"" to ""_"".

Anyway, the exec name to env var prefix seems consistent.
If we changed the name of the executables to ""ca-server"" and ""ca-client"", then we could change the env variable prefix accordingly.
;;;","11/Feb/17 10:19 AM;baohua;Thanks, and I've updated the https://jira.hyperledger.org/browse/FAB-2118, to include all these comments.

Thanks!;;;","11/Feb/17 7:41 PM;JonathanLevi;Closing this, as this is a duplicate of https://jira.hyperledger.org/browse/FAB-2118 (which I wasn't aware of). Thank you [~baohua];;;",,,,,,,,,,,,,,,,
Enhance the fabric-ca Makefile to fail builds if it isn't vendored with the latest fabric of the same release,FABC-102,29486,,Task,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,smithbk,smithbk,19/Apr/18 3:11 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Investigate enhancing the fabric-ca Makefile to fail the build if a more recent version
of a dependent fabric package has been merged.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzz6db:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration testing of new Certificate API with Postgres,FABC-103,30407,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,19/May/18 6:58 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,06/Jun/18 10:43 PM,,,,,,,v1.2.0,,,,,,0,e2e-test,,,,,"New database query added to support the new Certificates API, that retrieves certificates from the database based on certain filters. The goal of this task is to test to make sure that query properly executes against PostgreSQL database and the correct results are returned back to user.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-67,,,,,,,FAB-10164,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-587,,,,,,,,,"1|hzzb8v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/May/18 7:05 AM;skarim;https://gerrit.hyperledger.org/r/#/c/22021/;;;",,,,,,,,,,,,,,,,,,,
Finalize Specification for Idemix integration with fabric-ca (both issuance and revocation support),FABC-104,28591,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,dubovitskaya,dubovitskaya,dubovitskaya,16/Mar/18 9:09 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,24/Apr/18 1:18 AM,,,,,,,,,,,,,0,idemix,,,,,https://docs.google.com/document/d/1iqCHtX-bG3Ey7bZmm9_b-oqu30jtlDJO9HhccVtekEE/edit#,,dubovitskaya,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-528,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-592,,,,,,,,,"1|hzx2m7:",,,,,,Sprint 7 - Security,,,,,,,,,,,,,,,,,,,,,,,,dubovitskaya,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve fabric-ca server password mask test,FABC-105,19632,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,01/Aug/17 4:24 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,01/Dec/17 2:29 AM,,,,,,,v1.1.0,,,,,,0,,,,,,"Currently, the mask password test will pass even when the result is inconclusive, should the log file be missing or empty.

The test will be updated with the following improvements:
 * fail if expected passwd value is the null string
 * fail if expected passwd value contains any character other than '*'
 * log both to STDOUT (visible in jenkins CI) and to logfile
 * follow the scheme that creates disjoint test directories for each fvt test
 * test both the bootstrap init, as well as a registry defined in a pre-exsiting config file",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzya9b:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Affiliation table clean up is needed for fabric-ca-server's DB,FABC-106,15140,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,02/Mar/17 4:11 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,14/Mar/17 10:47 PM,,,,,,,,,,,,,0,,,,,,"The affiliation table in fabric-ca-server's DB should contain two columns: name and prekey.
The name is like a FQDN (Fully Qualified Domain Name) of the form ""a.b.c"", so the name uniquely identifies the node in the affiliation hierarchy.
The prekey field is the prekey associated with the affiliation. 
The root prekey is the one associated with the affiliation with the empty string, which is the root affiliation.  This must also be stored in the DB.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmnr:",,,,,,Sprint 13 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Add SubCommand interface,FABC-107,29160,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,aambati,aambati,05/Apr/18 7:21 AM,22/Sep/19 5:57 PM,28/Oct/23 2:21 AM,22/Sep/19 5:57 PM,,,,,,,,,,,,,0,,,,,,"Add SubCommand interface with following functions:

type SubCommand interface \{

   ShouldCreateDefaultConfig() bool

   RequiresEnrollment() bool

   RequiresUser() bool

}

 

Let all sub commands like enroll, revoke implement these functions based on the logic in the

shouldCreateDefaultConfig, requiresEnrollment and requiresUser functions in the ClientCmd


Change ConfigInit function of ClientCmd to take SubCommand as a parameter:
// Command interface initializes client command and loads an identity
type Command interface \{
   // Initializes the client command configuration
   *ConfigInit(subCmd SubCommand) error*
   // Returns the name of the configuration file
   GetCfgFileName() string
   // Loads the credentials of an identity that are in the msp directory specified to this command
   LoadMyIdentity() (*lib.Identity, error)
   // Returns lib.ClientCfg instance associated with this comamnd
   GetClientCfg() *lib.ClientConfig
   // Returns viper instance associated with this comamnd
   GetViper() *viper.Viper
}
 
In the ConfigInit implementation, use these SubCommand functions instead of corresponding private functions of the ClientCmd.
 
Finally, remove the private functions from ClientCmd
 ",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzz4lr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Define message formats for Idemix interactive issuance,FABC-108,28489,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,dubovitskaya,dubovitskaya,dubovitskaya,13/Mar/18 11:21 PM,12/Jun/20 12:31 AM,28/Oct/23 2:21 AM,12/Apr/18 10:37 PM,,,,,,,v1.3.0,,,,,14/Mar/18 12:00 AM,0,idemix,,,,,https://docs.google.com/document/d/1iqCHtX-bG3Ey7bZmm9_b-oqu30jtlDJO9HhccVtekEE/edit#,,dubovitskaya,,,,,,,,,,,,,,,,,,,,,,10800,10800,,0%,10800,10800,,,,,,,,,,FABC-528,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-592,,,,,,,,,"1|hzwqfp:s",,,,,,To Do,,,,,,,,,,,,,,,,,,,,,,,,dubovitskaya,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca fvt test redirect error creates false negative,FABC-109,16866,,Task,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,rennman,rennman,rennman,19/May/17 2:14 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,24/May/17 10:07 PM,,,,,,,,,,,,,0,,,,,,"Some of the fvt tests are recording false positives due to a synchronization issue writing to the log file. Currently the rc is out of scope of the main script due to the fact that when the shell opens a pipe to 'tee' it operates in a new subshell environment, replete with it's own I/O stream and variable set. The run_fvt_tests script will be re-written using process substitution to simplify the return code logic. ",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxw0f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
"Check if CA cert has ""crl sign"" usage",FABC-110,23100,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,31/Oct/17 12:53 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,21/Nov/17 6:59 AM,v1.1.0,,,,,,v1.1.0,,,,,,0,,,,,,Check if CA cert has 'crl sign' key usage before generating a CRL. If the CA cert does not have 'crl sign' usage then return an error. Log a warning message at startup if the CA cert does not have 'crl sign' key usage.,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzylvr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Create docker-compose for fabric-ca-server cluster with mariadb failover,FABC-111,15221,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Won't Do,,smithbk,smithbk,06/Mar/17 10:45 PM,26/Mar/19 8:45 PM,28/Oct/23 2:21 AM,26/Mar/19 8:45 PM,,,,,,,,,,,,,0,,,,,,"Create a fabric-ca/docker/cluster/docker-compose.yml file which using Gong Su's instructions below.   This uses mariadb as a transparent failover mechanism for the DB.

See  https://mariadb.com/kb/en/mariadb/mariadb-vs-mysql-features/

Here are Gong Su's instructions:


OK I have setup and tested the 2-host HA for mariadb using haproxy+keepalived described in the link in the previous note. The machines (zLinux Debian 9 guests) are configured with the following external and internal hostnames/IPs. A single ca-ha.pok.ibm.com/192.168.2.1 is used by clients (e.g., CAs) to connect to the mariadb. The setup requires a fair amount of configuration. But once setup, it does work.

external hostname external IP internal hostname internal IP
host1: obc01.pok.ibm.com 9.47.152.79 obc-ca01.pok.ibm.com 192.168.1.1
host2: obc02.pok.ibm.com 9.47.152.80 obc-ca02.pok.ibm.com 192.168.1.2
exposed: ca-ha.pok.ibm.com 192.168.1.10

Steps that I went through to setup the whole thing:

1. Install mariadb, haproxy, and keepalived. Enable nonlocal IP binding by creating /etc/sysctl.d/local.conf with the following line:

net.ipv4.ip_nonlocal_bind=1

And run sysctl net.ipv4.ip_nonlocal_bind=1 to set immediately without rebooting.

2. Add the following to /etc/hosts on both host1 and host2 for internal hostname and IP resolving:

192.168.1.1 obc-ca01.pok.ibm.com obc-ca01
192.168.1.2 obc-ca02.pok.ibm.com obc-ca02
192.168.1.10 ca-ha.pok.ibm.com ca-ha

3. Create IP aliases on host1 and host2:

ip addr add 192.168.1.1/24 dev eth0 (on host1)
ip addr add 192.168.1.2/24 dev eth0 (on host2)

Note do NOT create ip alias for 192.168.1.10. That's managed by keepalived.

4. Shutdown and configure mariadb with galera on both host1 and host2 by modifying /etc/mysql/mariadb.conf.d/50-server.cnf (showing for host1, change blue lines for host2 accordingly):

modify

{color:#205081}bind-address = 192.168.1.1{color}
append

[galera]
# Mandatory settings
wsrep_on=ON
wsrep_provider=/usr/lib/galera/libgalera_smm.so
wsrep_cluster_address=gcomm://192.168.1.1,192.168.1.2
{color:#205081}wsrep_node_address=192.168.1.1{color}
{color:#205081}wsrep_node_name=obc-ca01.pok.ibm.com{color}
binlog_format=row
default_storage_engine=InnoDB
innodb_autoinc_lock_mode=2
# Custom settings
wsrep_cluster_name=""ca_galera""
wsrep_sst_method=rsync

5. To start mariadb with galera, you must run galera_new_cluster then followed by systemctl start mariadb on the first host. On the rest of the hosts you just need to run systemctl start mariadb. To verify galera is working, run the command

mysql -u root -e 'SELECT VARIABLE_VALUE as ""cluster size"" FROM INFORMATION_SCHEMA.GLOBAL_STATUS WHERE VARIABLE_NAME=""wsrep_cluster_size""'

and you should see cluster size 2. After you shutdown the cluster and next time when you start the cluster, you must run galera_new_cluster first from the LAST host on which you shutdown mariadb.

6. Add mariadb users to allow haproxy to connect to mariadb for health check. Connect to mariadb and run the following on either host1 or host2 (changes get sync-ed to the other host by galera, another way to check galera is working):

mysql -u root -e 'CREATE USER ""haproxy""@""obc-ca01.pok.ibm.com""'
mysql -u root -e 'CREATE USER ""haproxy""@""obc-ca02.pok.ibm.com""'

7. Shutdown and configure haproxy on both host1 and host2 by appending to /etc/haproxy/haproxy.cfg (same for both hosts):

frontend mariadb
bind 192.168.1.10:3306
mode tcp
option tcplog
default_backend mariadb_galera

backend mariadb_galera
balance source
mode tcp
option tcpka
option mysql-check user haproxy
server mariadb1 192.168.1.1:3306 check weight 1
server mariadb2 192.168.1.2:3306 check weight 1

Start haproxy with systemctl start haproxy.

8. Configure keepalived on both host1 and host2 by creating /etc/keepalived/keepalived.conf (showing for host1, change blue line for host2 accordingly):

vrrp_script haproxy {
script ""/usr/bin/killall -0 haproxy""
interval 2
fall 2
rise 2
}
vrrp_instance haproxy_1 {
virtual_router_id 1
advert_int 1
nopreempt
state BACKUP
interface eth0
virtual_ipaddress {
192.168.1.10 dev eth0
}
track_script {
haproxy
}
}

and start keepalved with systemctl start keepalived.

If all goes well, now you should be able to connect to mariadb by telling your client that mariadb is at ca-ha.pok.ibm.com (which resolves to 192.168.1.10).

You can kill one instance of mariadb, haproxy, and keepalived from either host1 or host2, in any order, and you should still be able to reach mariadb going to ca-ha.pok.ibm.com from either host1 or host2.
",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx54f:",,,,,,Sprint 13 - Membership Service,Sprint 14 - Membership Service,Sprint 15 - Membership Service,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make VerifyToken Method of fabric-ca bccp driven,FABC-112,14517,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,03/Feb/17 1:52 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,17/Apr/17 11:00 PM,,,,,,,v1.0.0,,,,,,0,MembershipServices,,,,,"The verifyToken method is using hardcoded algorithm , which requires client code to make change. This fix will be first step towards making signature validation automated. Aim of the implementation is to provide server ",,ashutosh_kumar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABJ-50,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx4dj:",,,,,,Sprint 11 - Membership Service,Sprint 12 - Membership Service,Sprint 13 - Membership Service,Sprint 14 - Membership Service,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,ashutosh_kumar,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Intermediate server fails to start with --cacount param ,FABC-113,27518,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,08/Feb/18 6:24 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,16/Jun/18 11:10 AM,v1.0.0,v1.1.0,,,,,v1.2.0,,,,,,0,info-needed,,,,,"Intermediate server fails to start with this error message when started with --cacount command line argument:

Error: CN 'fabric-ca-server-ca1' cannot be specified for an intermediate CA. Remove CN from CSR section for enrollment of intermediate CA to be successful",,aambati,jyellick,skarim,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx03b:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,jyellick,skarim,sykesm,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Feb/18 4:26 AM;sykesm;There's not enough information in this bug. Please add some details.;;;","05/May/18 2:54 AM;jyellick;[~aambati] is this still an issue? More info was requested above.;;;","15/May/18 11:10 PM;skarim;The --cacount flag was never intended for this use case, the --cafiles flag is available for this scenario. Using the --cafiles one can specify the parent URL for each of the CA's.;;;","16/May/18 5:09 AM;skarim;After talking with Anil, we just need to document this behavior. The --cacount flag is not intended for complicated configurations. I am changing it from a bug to a task. ;;;","01/Jun/18 5:11 AM;aambati;https://gerrit.hyperledger.org/r/c/22405/;;;",,,,,,,,,,,,,,,
Update fabric-ca's pkcs11 package to the same version in fabric,FABC-114,27920,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,baohua,baohua,baohua,22/Feb/18 1:35 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,24/Feb/18 11:35 AM,,,,,,,,,,,,,0,fabric-ca,,,,,"Update fabric-ca's pkcs11 package to the same version in fabric.

The new version is compatible with latest golang 1.9.",,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyygv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,baohua,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Feb/18 1:37 PM;baohua;https://gerrit.hyperledger.org/r/#/c/18197/;;;",,,,,,,,,,,,,,,,,,,
"Enhance the ""fabric-ca-server init"" command to support intermediate fabric-ca-server initialization",FABC-115,13874,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,21/Dec/16 11:44 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,15/Apr/17 12:52 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"This allows an intermediate fabric-ca-server to initialize itself by sending an enroll request to the root (or parent) fabric-ca server.  So in this case, the ""fabric-ca server init"" command becomes a client to another fabric-ca server. 
The differences from a normal enroll command are:
1) The caller associated with the basic auth credentials must have the 'hf.IntermediateCA"" attribute.  We can't allow any registered user to get a CA certificate; otherwise, we'd have a security hole.
2) The issued certificate must have the CA flag set.
3) The default names of the key and cert files that are produced are the same as those created by the ""cop server init"" command (e.g. server-cert.pem and server-key.pem), not those of the enroll command.

So why use an intermediate fabric-ca-server?   What are the benefits or use cases?
1) *Increased security* 
It is more secure because you can take the root fabric-ca-server off-line when not needed.  It is only needed when issuing intermediate CA certs, which is only needed when initializing an intermediate fabric-ca-server.  You can also run the root fabric-ca-server on a more secure network which is only reachable via intermediate servers.
2) *Lower administrative overhead when key is compromised*
If the private key of an intermediate fabric-ca-server is compromised, the administrative overhead is much less.  You can revoke the compromised certificate and simply get another intermediate CA cert.  Since endpoints trust the certificate associated with the root fabric-ca-server, there is no need to have all endpoints update their root of trust.
3) *Bootstrapping cluster members*
It makes it easier to bootstrap a cluster of intermediate servers by giving each member of a cluster the same or a different enrollment ID and secret to get it's CA cert.  If the same enrollment ID and secret is used, then the number of times the secret can be used is configured on the root fabric-ca-server to allow at least that many members to occur.  The connection from the intermediate to the root server may be over TLS to prevent the secret from being stolen.",,JonathanLevi,ple8LF,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx79r:",,,,,,Sprint 7 - Memship Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,JonathanLevi,ple8LF,smithbk,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Dec/16 7:36 AM;ple8LF;Code checked in for review as WIP.;;;","21/Feb/17 7:42 AM;JonathanLevi;Can we describe the use-case? (E.g., Why and when is it needed?);;;",,,,,,,,,,,,,,,,,,
"Add support for TLS connection between client, server, and databases",FABC-116,13792,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,14/Dec/16 1:14 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,07/Jan/17 12:57 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Add support for TLS connection between client, server, and databases",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx7wv:",,,,,,Sprint 7 - Memship Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,,,,,,,,,,3.0,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Prevent registration of duplicate attrs,FABC-117,27282,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,01/Feb/18 4:41 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,14/Feb/18 2:56 AM,v1.1.0,,,,,,v1.1.0,,,,,,0,,,,,,"Currently, identities can be registered with multiple attributes that have the same name and could have varying values.",,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyvbb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Feb/18 4:47 AM;skarim;https://gerrit.hyperledger.org/r/#/c/17387/;;;","08/Feb/18 9:49 PM;smithbk;Is there a present bug or problem that we are trying to solve?  Supporting multi-valued attributes is I think a good thing, which is what we already do.  Folks could always implement by making the value a comma-separated string for example, but then adding to the list atomically becomes impossible because it requires reading the current value, appending to it, and writing the new value.  There is no way to handle collisions in this case, but by supporting multi-valued attributes, we make it possible to atomically add to a list.

That said, I agree there are holes in the current implementation and we should consider exactly what we support now and how and document it well and what we support in the future.

Consider the following attribute types: single value, list value (which allows duplicate values), or set value (does not allow duplicate values).
Then consider how we specify how to add, modify, or delete an attribute of each type.
We could allow them to specify the attribute type, or I think perhaps we could do so with modifying only the structure that is passed into the identity modify operation.
For example, it could have the following fields for an attribute: name, old_value, new_value, allow_duplicates.
If only name and new_value are specified, remove all values for the attribute and add the new_value.
If name, old_value and new_value are specified, find the old_value and replace with new_value.
if only name and old_value are specified, find the old_value and delete it.

This needs more thought, but hopefully this spurs conversation.

Again, I think we could consider simply documenting the current behavior now and supporting others in the future, unless there is an urgent problem for us to address now.;;;","09/Feb/18 6:42 AM;skarim;After talking in person, it was decided that this is not a bug and should be allowed. This behavior will be documented instead. ;;;",,,,,,,,,,,,,,,,,
[SECURITY] fabric-ca-server does not correctly instantiate intermediate CA CSR,FABC-118,17832,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,rennman,rennman,rennman,14/Jun/17 12:20 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,23/Jun/17 3:30 AM,v1.0.0-beta,,,,,,,,,,,,0,,,,,,"When acting as an intermediate CA, fabric ca server is allocating an empty CSR and essentially setting it to not nil if it is nil. Then the later check in clientconfig.go which checks for nil; if it is nil, then the assignment to the client config CSR never happens. So an empty CSR gets passed around rather than the correct CSR that comes from client config. Consequently, the root server does not recognize this as an intermediate ca request. This has repercussions for later checks in the code (e.g. is the hf.IntermediateCA flag set) Fix is to delete these three lines in lib/ca.go:
{code:java}
if clientCfg.Enrollment.CSR == nil {
    clientCfg.Enrollment.CSR = &api.CSRInfo{}
}
{code}",,JonathanLevi,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,FAB-4546,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy1lj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JonathanLevi,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Jun/17 12:23 AM;rennman;http://gerrit.hyperledger.org/r/10533;;;","23/Jun/17 2:58 AM;smithbk;This bug is not reproducible with what is in master currently.
I validated manually and we also have unit test cases which make sure the IsCA bit is set when starting an intermediate CA; otherwise, it would fail to start.
I just spoke with Allen and he agrees and will cancel this jira item and will abandon the change set.;;;","23/Jun/17 3:02 AM;JonathanLevi;First, this is great new [~smithbk] and [~rennman] - thanks for the update!

Please can either of you advise how do you suggest we treat the [http://gerrit.hyperledger.org/r/10533] CR then?;;;","23/Jun/17 3:29 AM;rennman;This change was precedented on a change in lib/clientconfig.go that is not (and presumably will not be) merged. Consequently, this CR is unnecessary.

I have tested the current iteration of intermediateca_test.sh and the test succeeds.;;;","23/Jun/17 3:31 AM;smithbk; http://gerrit.hyperledger.org/r/10533 has been abandoned ... and [~rennman] said he is canceling this jira item;;;",,,,,,,,,,,,,,,
TEST PLAN: Idemix for Fabric CA,FABC-119,30332,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,dubovitskaya,mdr,mdr,17/May/18 5:56 PM,12/Sep/18 8:57 PM,28/Oct/23 2:21 AM,24/Jul/18 9:22 PM,,,,,,,v1.3.0,,,,,,0,test-plan,,,,,"Orchestrate the tests associated to the code the CRs of this epic include.

Before closing this testplan task, this must be reviewed and approved by this epic feature owner and the Test Prime (identified below), to agree on appropriate coverage for each test phase.

+*Location / Description of*+ docs, APIs, config vars, system configuration (fabric, SDKs, fabric-samples) :

 

+*Unit Test (UT) leader*+: [~aambati]

Unit test cases are delivered together with the code

Unit test coverage: ~95%.

 

+*Function Test (FVT) leader*+: [~skarim]
 # Existing FVT framework (based on bash scripts) will be used to perform e2e testing of Idemix function in Fabric CA. Fabric-ca-client will be used to drive the tests against Fabric CA server in cluster and standalone topology with postgres/mysql databases.
 # E2E with SDK (issuance): IdentityMixer Client(SDK) attempts to get an Idemix enrolment certificate from Fabric CA.

+*System Verification Test (SVT) leader*+:  ???",,latitiah,mdr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-87,FABC-99,,,,,,,,,,,,,,,,,,,,,,,FABC-592,,,,,,,,,"1|hzzavj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,latitiah,mdr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Need separate docker images for fabric-ca-server and fabric-ca-client,FABC-120,14925,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,19/Feb/17 10:27 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,28/Feb/17 3:53 AM,,,,,,,,,,,,,0,,,,,,"Now that we have separate fabric-ca-server and fabric-ca-client commands, we need separate docker images for each.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlh3:",,,,,,Sprint 12 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Feb/17 10:31 PM;smithbk;http://gerrit.hyperledger.org/r/6243 Docker images for client and server commands;;;",,,,,,,,,,,,,,,,,,,
"Better coverage, restructure/simplification of fabric-ca CLI UT",FABC-121,14942,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,21/Feb/17 2:13 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,29/Mar/18 1:20 AM,,,,,,,,,,,,,0,quality,,,,,,,chrisconway,rennman,smithbk,,,,,,,,,,,,,,,,,,,,420,300,,0%,420,300,,,,,,,,,,,,,,,,,,,,,,FABC-469,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxljz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,chrisconway,rennman,smithbk,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/17 9:39 AM;smithbk;Allen, is this still needed, or already done?;;;",,,,,,,,,,,,,,,,,,,
Generate and persistently store root pre-key in groups table,FABC-122,13971,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,,skarim,skarim,09/Jan/17 11:38 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,fabric-ca,,,,,"At server start up and database bootstrap time, the root prekey will be generate and stored persistently for the root group in DB in the groups table.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx7mn:",,,,,,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,,,,,,,2.0,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Mar/18 11:31 PM;skarim;Duplicate of FAB-2907;;;",,,,,,,,,,,,,,,,,,,
GetUserInfo should be removed,FABC-123,22728,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,21/Oct/17 2:53 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,20/Nov/17 12:40 PM,v1.1.0,,,,,,v1.1.0,,,,,,0,,,,,,"The GetUser and GetUserInfo functions do nearly the same thing.
The GetUser call provides a proper object-oriented abstraction, so the GetUserInfo function should be removed
and the current calls replaced with calls to GetUser.
This is just clean up work to prevent having to do more work in the future.",,luomin,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-184,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzykfb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,luomin,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Oct/17 4:01 PM;luomin;[~skarim], hi Saad, may I get your issue clear?

Does what you mean here is to 
 # to make userInfo be included in the User object struct // @ client.go
 # thus, GetUser function returns the User object which contains the userInfo
 # switch the calls to GetUserInfo with GetUser function and specify the member value ""userInfo"" (eg. ""User.userInfo"") as the output arguments.

Thanks;;;","27/Oct/17 10:48 PM;skarim;[~luomin]

Take a look at this work in progress changeset that I had started. https://gerrit.hyperledger.org/r/#/c/14741/0

The GetUserInfo function in dbaccessor.go needs to be removed. Once we remove this function, anywhere in the code that called GetUserInfo needs to be replaced with GetUser. This might require expanding on the User interface defined in lib/spi/userregistry.go and adding any new functions to get GetUser to do all the things that GetUserInfo was used for. GetUser function should still continue to return the User interface.;;;","08/Nov/17 8:19 AM;skarim;https://gerrit.hyperledger.org/r/#/c/14741/;;;",,,,,,,,,,,,,,,,,
Update read the docs for fabric-ca,FABC-124,15177,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,03/Mar/17 5:36 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,14/Mar/17 10:47 PM,,,,,,,,,,,,,0,,,,,,"Documentation for fabric-ca updated to reflect the new command
line that was added for server and client. Also, documents
new YAML configuration files that are now being used.
",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmnj:",,,,,,Sprint 13 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Incorporate Registration Request into Client Config file,FABC-125,14793,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,15/Feb/17 3:02 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,06/Mar/17 11:50 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"Currently user is required to provide a separate file contain registration information for the user through the register command line. This is going to be eliminated and the process is going to be simplified by incorporating registration information in the overall config file for the client. 

Registrar will update this config file with any relevant user information before calling the register request from the command line. ",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx5yv:",,,,,,Sprint 11 - Membership Service,Sprint 12 - Membership Service,Sprint 13 - Membership Service,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Document fabric-ca in readthedocs,FABC-126,14385,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,27/Jan/17 4:34 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,08/Feb/17 2:03 AM,,,,,,,,,,,,,0,,,,,,Add readthedocs documentation for fabric-ca,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxj9b:",,,,,,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Jan/17 4:37 PM;smithbk;http://gerrit.hyperledger.org/r/4909;;;",,,,,,,,,,,,,,,,,,,
Add functional tests for fabric-ca CI testing,FABC-127,14393,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,28/Jan/17 12:05 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,06/May/17 4:27 AM,,,,,,,,,,,,,0,quality,Security,,,,Create a component-level regression test for fabric-ca to be run in continuous integration.,,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1017,,,,,,,,,"1|hzxjan:",,,,,,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,rennman,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/17 10:11 AM;smithbk;Allen, I'm guessing that this is done?  If so, pls mark as done;;;","06/May/17 4:26 AM;rennman;Merge ""[ FAB-3554 ] Add make target for local CI tests"" master

Done.;;;",,,,,,,,,,,,,,,,,,
Store attributes efficiently in the database,FABC-128,27960,,Task,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,aambati,aambati,24/Feb/18 1:42 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Currently, attribute a=b is stored as [\{""name"": ""a"",""value"":""b""}], which is lot of characters to just store a=b. This needs to be optimized.

 

Also, affiliations table can be optimized as well. Currently, prekey field is not being used. We should think about removing it  , if it is not going to be used in the future.",,aambati,denyeart,luomin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx6wv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,denyeart,luomin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:08 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;",,,,,,,,,,,,,,,,,,,
remove openldap tarball from fabric-ca/images/openldap,FABC-129,17010,,Task,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,smithbk,ChristopherFerris,ChristopherFerris,23/May/17 5:02 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,26/May/17 11:26 PM,v1.0.0-alpha2,,,,,,v1.0.0,,,,,,0,build-system,,,,,We should not be including tar balls of external dependencies for images in SCM,,ChristopherFerris,smithbk,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,Not a security issue,,,,,,,,FAB-3963,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxwjb:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,ChristopherFerris,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/May/17 5:56 AM;smithbk;http://gerrit.hyperledger.org/r/9663;;;",,,,,,,,,,,,,,,,,,,
fabric-ca error handling,FABC-130,16141,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,smithbk,smithbk,02/May/17 2:27 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,03/May/17 8:24 PM,,,,,,,,,,,,,0,,,,,,"See the following for background
https://jira.hyperledger.org/browse/FAB-3142
https://github.com/hyperledger/fabric/blob/master/docs/source/error-handling.rst",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxrvr:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/May/17 8:23 PM;smithbk;This is a dup of FAB-3581, so closing this one;;;",,,,,,,,,,,,,,,,,,,
"fabric-ca-peer, fabric-ca-orderer, fabric-ca-tools not available for fabric-ca sample use",FABC-131,31474,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,skarim,denyeart,denyeart,29/Jun/18 7:32 AM,24/Sep/18 4:25 AM,28/Oct/23 2:21 AM,24/Sep/18 4:25 AM,,,,,,,v1.3.0,,,,,,0,,,,,,"FABCI-24 has stopped the publishing of fabric-ca-peer, fabric-ca-orderer and fabric-ca-tools to dockerhub.

However, the instructions at:

[https://github.com/hyperledger/fabric-samples/blob/master/fabric-ca/README.md#running-this-sample]

says to pull these images using script:

[https://github.com/hyperledger/fabric-samples/blob/master/fabric-ca/bootstrap.sh]

 

Background:

fabric-ca-peer, fabric-ca-orderer, fabric-ca-tools were added in [https://gerrit.hyperledger.org/r/#/c/13195/] so that fabric-ca-client and fabric would be available in the same containers for ease of certificate sharing.

These images were later published to dockerhub and nexus in https://jira.hyperledger.org/browse/FAB-6648 and https://jira.hyperledger.org/browse/FAB-6649 .

 

Options:

With the images no longer pushed to dockerhub, I see two options:

A) The sample instructions need to change, to have the user build the images (question, how would this be tested pre-release, as *make docker* always pulls the latest released fabric).

B) The sample could be updated to not require the images at all.",,ChristopherFerris,denyeart,latitiah,mastersingh24,rameshthoomu,sambhavdutt,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-716,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzgmv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,latitiah,mastersingh24,rameshthoomu,sambhavdutt,smithbk,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Sep/18 5:16 AM;denyeart;[~skarim] [~smithbk]  Is my option B feasible?  If not, can we do option A in the short term?

[~mastersingh24] [~ChristopherFerris] Got any other ideas?;;;","12/Sep/18 11:14 PM;latitiah;I have made a change to the fabric-ca Makefile (https://gerrit.hyperledger.org/r/#/c/26226/) that allows us to use the latest fabric builds to build the fabric-ca builds. If there are ""latest"" tagged fabric builds locally, fabric-ca will use those images; if there are not, we should execute a script that will pull the images so that there are local ""latest"" tagged fabric builds.

From my understanding, using a script to pull missing images is what has been proposed for other repos as well. So this seems to be the accepted (consistent) process.;;;","13/Sep/18 12:02 AM;rameshthoomu;[~denyeart] [~latitiah] I have pushed similar change 7 weeks ago to pull the fabric latest images into fabric-ca..But based on Gari's comment I have abandon this change.. Please look at this change here [https://gerrit.hyperledger.org/r/#/c/23513/]

 ;;;","13/Sep/18 3:41 AM;smithbk;[~denyeart] I thought publishing the images was simpler and easier to consume.   That said, since we are no longer doing this for some reason, we must either:
a) require the user to build images containing fabric-ca-client/orderer and fabric-ca-client/peer, or
b) the test dynamically builds and installs.  Since ""go install"" always uses the default branch (i.e. the release branch), we would have to do ""git clone -> git checkout -> git build"" to make this work pre-release from the master branch.
I would definitely vote for ""a"".;;;","13/Sep/18 4:26 AM;denyeart;[~mastersingh24] Did you intend for option A or option B?  Regardless, would option A be acceptable, at least in the short term?;;;","13/Sep/18 4:57 AM;smithbk;To clarify, option A means that to run the fabric-ca sample, you need to first clone the fabric-ca repo and type `make images`.;;;","15/Sep/18 8:41 PM;mastersingh24;There is also no reason to actually need to clone or build the fabric-ca-client ... we actually build binaries and post them to Nexus now.  So the Dockerfile should be a simple from ""hyperledger/fabric-\{peer|orderer}:1.2.0"" and then just use curl/wget to fetch the fabric-ca-client binary.

And if you really want to simplify things, you can actually build the images when starting things up via docker-compose.

Once 1.3.0 images are published, you can update to 1.3.0 and then create a 1.3 tag for the samples.;;;","15/Sep/18 10:21 PM;denyeart;[~latitiah] [~skarim] [~smithbk] Which approach do you want to take?;;;","16/Sep/18 2:51 AM;smithbk;The daily builds are not currently publishing the fabric-ca-client to nexus.  So in order to do as Gari said.

1) Ramesh starts publishing fabric-ca-client binary to nexus nightly.
   Then let me know the URL of both the 1.2 and the nightly fabric-ca-client binaries.

2) I pushed the following CR: https://gerrit.hyperledger.org/r/26326
    It depends upon Ramesh doing #1, so for now it will not work and will need testing/debugging,
    but it should be a small update to the wget command.
    Actually, I'm assuming wget is in the image ... and if not, will need to add that also.

See the comments in start.sh for how to use.;;;","16/Sep/18 6:58 AM;mastersingh24;Why would we ever use the nightly builds?  The sample should always be using the latest GA code.  So master will basically always match the latest release branch as well.  I see no to ever use the nightly builds?;;;","16/Sep/18 10:45 AM;smithbk;You're right, we don't need to use the nightly builds.  But don't we also need a way to run the fabric-ca sample against local images built from the master branch so we know when it breaks?  It is my understanding that this is done nightly.  ;;;","17/Sep/18 11:16 PM;latitiah;Yes, we also need nightly/local builds for interop and integration testing between the fabric and fabric-ca repos. We want to get this all of this automated instead of waiting for a release.;;;","19/Sep/18 5:10 AM;mastersingh24;There is no integration between fabric and fabric-ca .... this was intentional.  And I really do not understand what that has to do with this sample?  Samples are not suppose to be used for integration tests.

[~ChristopherFerris] [~sykesm] - we need a better CI strategy here.  (tagging Matt as I know he has some thoughts on this although to date we have not leveraged his knowledge on these types of things);;;","19/Sep/18 8:57 PM;ChristopherFerris;This has nothing to do with CI strategy, really. There is no reason that we cannot either a) create this image on the fly in the nightly/etc runs or b) just use the published fabric-ca image.

 

As for the sample, I just looked closely at this. It is in serious need of rework. I would recommend we nuke it and do a less Rube Goldbergian version post 1.3.;;;","20/Sep/18 11:36 PM;smithbk;Given the changes in https://gerrit.hyperledger.org/r/#/c/26326, the fabric-ca sample does not depend upon pre-built fabric-ca-peer, fabric-ca-orderer, and/or fabric-ca-tools images.  It builds them on the fly as Gari said to do.   As per my latest comments to the CR and as I discussed with Chris late yesterday, the build-images.sh script will be deleted.  This was just an oversight and the README had already been updated to no longer reference this script.

I propose that post v1.3, we create a tutorial of how to use fabric CA with fabric end-to-end which basically takes everything from this sample and presents it in a tutorial fashion.  There are a lot of people who have contacted me and who have used this sample effectively as an end-to-end sample.

Otherwise, it would be helpful to know specifically what things need to be reworked.;;;",,,,,
Add scripts to dynamically generate CLI flags and Config template for Readme,FABC-132,17642,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,08/Jun/17 10:55 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,05/Sep/17 10:47 PM,v1.0.0,,,,,,v1.1.1,,,,,,0,Release-planning-1.1,,,,,"Currently, we have to manually update the fabric-ca doc everytime a new configuration option is added to fabric-ca. 

A script to help automate this would make it easier to maintain the readme. The script would pull in CLI flags from client and server and create a file, the same would also be done for configuration file templates. The main fabric-ca readme would then point to these files as appropriate. ",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3pr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
"Implement ""cop server init self-sign""",FABC-133,12748,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Done,smithbk,smithbk,smithbk,27/Sep/16 1:55 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,15/Apr/17 2:55 AM,,,,,,,v1.0.0-alpha1,,,,,,0,MembershipServices,,,,,"See section 1.1.1 of 
https://docs.google.com/document/d/1TRYHcaT8yMn8MZlDtreqzkDcXx0WI50AV2JpAcvAM5w

The command is:
    cop server init self-sign <domain>
      
This should use CFSSL library to generate the self-signed eca, tca, and tls certs.  It should store these in the CFSSL persistent store.  It should not require starting another process.  It should just call the CFSSL library API in process to do this.",,beauson45,ChristopherFerris,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxca7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,beauson45,ChristopherFerris,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 10:05 AM;ChristopherFerris;[~smithbk] if this is no longer relevant, please mark WONTFIX and close thx;;;",,,,,,,,,,,,,,,,,,,
Move certdbaccessor.go into lib/server/db,FABC-134,29954,,Task,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,04/May/18 10:41 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"All db related code should be moved in lib/server/db, and within this folder there could be different packages for the 3 supported databases.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzz8s7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change group to affiliation path in fabric-ca API,FABC-135,14395,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,28/Jan/17 1:00 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,08/Mar/17 12:30 AM,,,,,,,,,,,,,0,,,,,,"In fabric-ca/api/client.go, change the ""Group"" field name to ""AffiliationPath"".
The name ""group"" is confusing because typically a user can be in multiple groups.
Also, this will make the code simpler and more flexible to allow a group name to be reused in multiple nodes in the affiliation group tree.

Part of this work was done in https://jira.hyperledger.org/browse/FAB-1511, but we need to finish it with this task.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-80,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjb3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tutorial - How to use the fabric-ca,FABC-136,14896,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,guhaihua,markparz,markparz,18/Feb/17 1:18 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,27/Jun/17 2:24 PM,,,,,,,,,,,,,0,Documentation,MembershipServices,,,,Need a document to understand how to setup  and use the fabric-ca for the turorial section,,chrisconway,ChristopherFerris,markparz,petroccoC,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2300,,,,,,,,,"1|hzxld3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,chrisconway,ChristopherFerris,markparz,petroccoC,smithbk,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/17 9:44 AM;smithbk;See http://hyperledger-fabric.readthedocs.io/en/latest/Setup/ca-setup.html
We will be updating this with more info, but is this the type of info you're looking for?;;;","13/Apr/17 2:59 AM;ChristopherFerris;[~smithbk] LGTM, yes;;;",,,,,,,,,,,,,,,,,,
Fabric-CA: Update vendor for Fabric flogging,FABC-137,16874,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,troyronda,troyronda,troyronda,19/May/17 5:33 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,24/May/17 10:15 PM,,,,,,,,,,,,,0,,,,,,The vendor for the fabric flogging dependency should be updated to the latest tag (alpha2).,,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxw1z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,troyronda,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Update fabric-ca vendor for BCCSP,FABC-138,16780,,Task,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,,aleksandar.likic,aleksandar.likic,17/May/17 4:11 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,17/May/17 8:21 PM,,,,,,,,,,,,,0,,,,,,"fabric-sdk-go uses (vendors) fabric-ca and fabric client code for communication with fabric-ca and fabric. It also vendors bccsp from fabric. fabric-ca v1.0.0-alpha2 is still using bccsp from fabric v1.0.0-alpha. The consequence is that fabric-sdk-go fails compilation with fabric-ca v1.0.0-alpha2 and fabric v1.0.0-alpha2 as dependencies.

This issue is blocking migration of fabric-sdk-go to v1.0.0-alpha2.",,aleksandar.likic,troyronda,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABG-485,,,,,,,,,,,,,,,,,FABC-155,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxvnj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aleksandar.likic,troyronda,vpaprots,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/May/17 5:53 AM;troyronda;Note: ---FAB-3441--- bccsp/signer test coverage ( [https://github.com/hyperledger/fabric/commit/9a33854eb9a6b3302b2c8f1169d019f19417260d] / [https://gerrit.hyperledger.org/r/#/c/8629/12/bccsp/signer/signer.go] ) changed the interface  for CryptoSigner

 

 ;;;","17/May/17 6:47 AM;troyronda;The change is small - update lib/tcert/tcert.go and util/csp.go to use the New method & update the vendor entry for github.com/hyperledger/fabric/bccsp

.;;;","17/May/17 7:02 AM;troyronda;https://gerrit.hyperledger.org/r/#/c/9427/;;;",,,,,,,,,,,,,,,,,
Provide script to use fabric-ca to generate crypto for end-to-end example,FABC-139,18444,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,smithbk,smithbk,smithbk,21/Jun/17 6:47 AM,26/Aug/19 7:47 AM,28/Oct/23 2:21 AM,26/Aug/19 7:47 AM,,,,,,,,,,,,,1,,,,,,"There have been many questions about how to use fabric-ca with fabric.
Provide an enhancement to the examples/e2e_cli example to allow use of fabric-ca rather than cryptogen
to demonstrate how it is to be used.",,aambati,Claude-ZHENG,mastersingh24,nyet,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,FABC-814,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy53z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,Claude-ZHENG,mastersingh24,nyet,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/18 4:57 AM;aambati;[~smithbk]now that we have fabric-ca sample, can we close this?;;;","26/Aug/19 7:47 AM;mastersingh24;These types of things don't help; there is actually a CA operator guide underway;;;",,,,,,,,,,,,,,,,,,
Remove Attr attribute from RegistrationRequest ,FABC-140,15991,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,aambati,aambati,26/Apr/17 4:44 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Remove Attr attribute from RegistrationRequest and make Attributes an array of strings. This will  reduce the confusion that comes with having two attributes for same input and improves the usability. Also, consider a scenario where user has specified two attributes (a=b, x=y) in the configuration file and issues register command with --id.attr c=d, the identity is registered with c=d and x=y ",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr5r:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Publish fabric-ca-client binaries for users ,FABC-141,22483,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,sstone1,sstone1,18/Oct/17 11:57 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,24/Feb/18 3:45 AM,,,,,,,v1.1.0,,,,,,0,,,,,,"Please can the fabric-ca-client be published as a downloadable binary?

We would like this so that users can use it to interact with the Fabric CA, without having to either:
 * Compile it from source
 * Use the Docker image or HTTP API

 ",,aambati,denyeart,rameshthoomu,smithbk,sstone1,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-82,FABC-1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyk0n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,denyeart,rameshthoomu,smithbk,sstone1,weeds,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Oct/17 3:10 AM;smithbk;Hyperledger Fabric does not provide binaries as we would need to do so for many platforms.
This is easy to build if you want to run natively and we are now publishing more docker images with fabric-ca-client.
This is our current plan.;;;","21/Oct/17 3:55 AM;sstone1;[~smithbk] I discussed this with [~mastersingh24] before raising it, adding a bit more reasoning behind this request:

Composer users are coming to the Composer team and asking for a command line utility for performing Fabric operational tasks like enrolling IDs, registering new IDs, etc outside of a Composer business network. These are tasks that do not actually have anything to do with Composer.

We really don't want get into the situation where we end up building a duplicate of the existing Fabric CA client. Is publishing binaries really that hard, given that Fabric are already publishing binaries of the other CLI applications?;;;","21/Oct/17 3:59 AM;sstone1;Would be interested in more information about the new Docker images though. I assume volume mounts are required to perform enrolment operations so the Docker image can write the certificates? Is there anything we could try yet?;;;","03/Nov/17 11:35 PM;smithbk;I just spoke with Ramesh and am assigning to him.
We should publish both fabric-ca-client and fabric-ca-server binaries as we are publishing the others.
Ramesh, to build, simply:
# make fabric-ca-client
  And the resulting binary is at fabric-ca/bin/fabric-ca-client
# make fabric-ca-server
  And the resulting binary is at fabric-ca/bin/fabric-ca-server
;;;","07/Nov/17 5:09 AM;rameshthoomu;[~smithbk] seems some more work is pending on *Makefile* (building fabric-ca-client and fabric-ca-server binaries on multiple platforms (darwin, linux (x86_64, s390x and ppc64le), windows). Please see the fabric cross compiler reference https://github.com/hyperledger/fabric/blob/release/Makefile#L306;;;","12/Feb/18 5:06 PM;sstone1;[~rameshthoomu] this still isn't done, is there any outlook for this? ;;;","12/Feb/18 11:00 PM;rameshthoomu;[~sstone1], [~smithbk] is working on this.. Once Makefile is ready to build binaries will integrate in CI to publish..;;;","15/Feb/18 3:06 AM;denyeart;[~rameshthoomu] [~smithbk] Is this planned for 1.1 still?  I've add Fix Version of 1.1, please update to 1.2 if you don't think this will be contained in 1.1 timeframe.;;;","16/Feb/18 1:39 AM;aambati;https://gerrit.hyperledger.org/r/c/17951/;;;","16/Feb/18 1:40 AM;aambati;[~rameshthoomu] [~sstone1] i have made changes to Fabric CA makefile to add release, dist and native targets. Please try the changes and let me know if you have any issues.;;;","19/Feb/18 10:31 AM;rameshthoomu;[~aambati] added comments in gerrit patchset.. Please check.. thanks!!;;;","22/Feb/18 6:58 AM;weeds;[~aambati] hi- have you made changes requested and resubmitted?;;;","22/Feb/18 12:44 PM;aambati;[~weeds] Hi Sharon, Fabric CA uses couple of libraries that use C code. This is complicating cross compiling Fabric CA client on Linux (which is the OS used in our builds) to create binaries for different architectures and operating systems. For 1.1 Simon wants binaries for Linux and Mac. So far I have not been able to build Mac binaries on Linux. I have tried multiple tools, with out any success.  I am continuing my investigation. Hopefully will have a solution soon.;;;","23/Feb/18 4:40 AM;aambati;https://gerrit.hyperledger.org/r/c/18215/;;;","24/Feb/18 3:48 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/18283/;;;",,,,,
Database initialization should be more resilient,FABC-142,24066,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,21/Nov/17 5:24 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,25/Nov/17 5:53 PM,v1.0.4,,,,,,v1.0.5,,,,,,0,,,,,,Back-port [FAB-5786] to Fabric CA Release,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzynmf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Nov/17 6:20 AM;skarim;https://gerrit.hyperledger.org/r/#/c/15613/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca need input validation CBCPKCS7Encrypt() in lib/tcert/util.go,FABC-143,17068,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,rennman,rennman,25/May/17 4:41 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,01/Oct/18 11:07 PM,,,,,,,,,,,,,0,,,,,,"We do not validate the length of the byte slice passed into
CBCEncrypt()
PKCS7Padding()
CBCDecrypt()
PKCS7UnPadding()


I was able to create a panic in CBCPKCS7Encrypt()  by passing a huge array:
TestCBCEncrypt()
{code:java}
   //_, err = CBCPKCS7Encrypt(make([]byte, 16), make([]byte, math.MaxInt64))
    //t.Logf(""CBCPKCS7Encrypt error:  %v\n"", err)
    //if err == nil {
    //    t.Fatalf(""CBCPKCS7Encrypt should have failed with invalid index length\n"")
    //}{code}


I was able to create a panic in CBCPKCS7Dencrypt merely by passing in a slice with length 16:
TestCBCPKCS7Decrypt()
{code:java}
//_, err = CBCPKCS7Decrypt(make([]byte, 16), make([]byte, 16))
//t.Logf(""CBCPKCS7Decrypt error: %v"", err)
//if err == nil {
//t.Fatalf(""CBCPKCS7Decrypt should have failed: invalid padding\n"")
//}{code}

These tests should be re-enabled in lib/tcert/util_test.go when the issue is addressed:",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxwtb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add changelog script to fabric-ca,FABC-144,16695,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,13/May/17 12:34 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,01/Jun/17 12:41 AM,v1.0.0-alpha1,,,,,,v1.0.0-alpha2,,,,,,0,build-system,,,,,add scripts/changelog.sh as with fabric repo,,ChristopherFerris,Clayton Sims,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxv47:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,ChristopherFerris,Clayton Sims,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/May/17 12:35 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/9291/;;;","23/May/17 2:29 AM;Clayton Sims;should this be closed now that it is merged?;;;",,,,,,,,,,,,,,,,,,
Should be able to revoke one's own certificate,FABC-145,28304,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,09/Mar/18 2:09 AM,17/Aug/18 5:11 AM,28/Oct/23 2:21 AM,17/Aug/18 5:11 AM,,,,,,,v1.3.0,,,,,,0,,,,,,"Should be able to revoke one's own certificate. Currently, only identities with the hf.Revoker attribute are allowed to revoke certificates. But, this attribute should not be required if I am revoking one of my own certificates. ",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx6xz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jun/18 12:26 AM;skarim;https://gerrit.hyperledger.org/r/c/23325/;;;",,,,,,,,,,,,,,,,,,,
Make the fabric-ca-server auth type an enum since they are mutually exclusive,FABC-146,15165,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,smithbk,smithbk,02/Mar/17 11:49 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,16/Mar/17 12:50 AM,,,,,,,,,,,,,0,,,,,,"In lib/serverauth.go, there are separate booleans for basic and token based authentication.
Make an enum type for since they are mutually exclusive.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5b3:",,,,,,Sprint 13 - Membership Service,Sprint 14 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Vendor gorilla/mux,FABC-147,23845,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,08/Nov/17 6:05 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,20/Nov/17 12:40 PM,v1.1.0,,,,,,v1.1.0,,,,,,0,,,,,,Vendor gorilla/mux to allow for supporting of URL path parameters. This is needed to handle REST calls for dynamic config updates for identities and affiliations.,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzymjj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Nov/17 8:19 AM;skarim;https://gerrit.hyperledger.org/r/#/c/15267/;;;",,,,,,,,,,,,,,,,,,,
Script to check if need to vendor bccsp,FABC-148,28227,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,,skarim,skarim,06/Mar/18 5:01 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,13/Dec/18 11:53 PM,,,,,,,,,,,,,0,,,,,,Need to have a script that will result in failure if the vendor bccsp in fabric-ca is out of sync with bsscp package in fabric,,denyeart,mastersingh24,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx6xj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,mastersingh24,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:08 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","12/Apr/18 10:15 PM;mastersingh24;we should move to using dep to vendor our dependencies and periodically check for updates;;;","13/Dec/18 11:53 PM;skarim;Closing this out in favor of https://jira.hyperledger.org/browse/FABC-738;;;",,,,,,,,,,,,,,,,,
fabric-ca create makefile target to run all CI tests locally,FABC-149,16151,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,02/May/17 7:04 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,06/May/17 4:27 AM,,,,,,,,,,,,,0,,,,,,"As a convenience to development, and as a sanity-check for pushing code, it would be desirable to have a make target that builds and runs all of the associated continuous integration tests on a local branch. 

make ci-tests

would run all unit and fvt tests directly in the local development environment.",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxrxj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Add CLI support for revoking Idemix credential,FABC-150,32038,,Task,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,JonathanLevi,skarim,skarim,19/Jul/18 3:51 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,The revoke command on the fabric-ca-client CLI should be enhanced to be able to revoke Idemix credentials based on enrollment ID or revocation handle.,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,Unset,Unset,,,,,No,(Please edit issue to document commit found in),Unset,No,,,"1|hzzj53:",,,,Unset,Unset,,,,,,,,,,,,(Please edit issue to document steps to reproduce),,Unset,,,,,(Please edit the issue to enter your test plan),,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Jan/19 5:34 AM;skarim;https://gerrit.hyperledger.org/r/c/24535/;;;","04/Jan/19 5:34 AM;skarim;[~JonathanLevi] I assigned this to you, its looks like you will be working on the remaining Idemix work.;;;",,,,,,,,,,,,,,,,,,
Make some correction and reformatting to doc,FABC-151,17692,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,09/Jun/17 11:21 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,23/Jun/17 10:53 PM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,Make some correction and reformatting to doc,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxzuv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Jun/17 10:54 PM;skarim;https://gerrit.hyperledger.org/r/#/c/10397/;;;",,,,,,,,,,,,,,,,,,,
CA should not allow issued certificates to outlive itself,FABC-152,20914,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,dnguyenv,rennman,rennman,20/Sep/17 5:14 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,29/Mar/18 1:20 AM,,,,,,,,,,,,,0,,,,,,"Currently the CA does not constrain lifetime of certificates that it issues to be within its own expiry. The notAfter date of any issued certificate should not postdate the notAfter date of the issuer.
So if the intermediate CA's signing certificate expires at time T, then the notAfter date of the any certificate that it issues should not be after time T.
The same goes for a certificate issued by a root CA.",,aambati,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzygun:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jan/18 4:31 AM;aambati;this was fixed by JIRA fab-7646...[~rennman] pls close this if the problem is fixed.;;;",,,,,,,,,,,,,,,,,,,
Revocation Placeholder: Implement Revocation Authority support in Idemix crypto library (Go),FABC-153,28593,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mdr,dubovitskaya,dubovitskaya,16/Mar/18 9:40 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,22/May/18 10:16 PM,,,,,,,v1.3.0,,,,,,0,idemix,,,,,"This Issue only creates a placeholder for revocation for backward compatibility (photo changes, dummy revocation functionality, RA interfaces).

The actual revocation implementation will be added in 1.3

Implement a privacy-preserving revocation scheme (signature-based) with methods that include:
 # GenerateRAKeys() -> skRA, pkRA; // long term ECDSA signing key for RA
 # CreateCRI(pkRA, epoch, <rh>_valid); // generates an epoch-specific signature list based on the list of the revocation handles for the specified epoch",,dubovitskaya,mdr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-528,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-592,,,,,,,,,"1|hzx2jr:",,,,,,May2018 - Security,,,,,,,,,,,,,,,,,,,,,,,,dubovitskaya,mdr,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Apr/18 5:18 AM;mdr;CRs: [https://gerrit.hyperledger.org/r/#/c/21153/,] [https://gerrit.hyperledger.org/r/#/c/21155/,] [https://gerrit.hyperledger.org/r/#/c/21157/,] [https://gerrit.hyperledger.org/r/#/c/21159/,] https://gerrit.hyperledger.org/r/#/c/21161/;;;","22/May/18 10:16 PM;dubovitskaya;[https://gerrit.hyperledger.org/r/#/c/21161/] implementing revocation is moved to another issue (for 1.3);;;",,,,,,,,,,,,,,,,,,
Add TLS support to fabric-ca-server's LDAP client,FABC-154,13872,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,21/Dec/16 11:29 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,29/Apr/17 5:17 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"TLS configuration support is needed for the LDAP client of the fabric-ca-server 
It should use the lib/tls package as is already done for DB clients for the fabric-ca-server",,ashutosh_kumar,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx4db:",,,,,,Sprint 9 - Membership Services,Sprint 10 - Membership Service,Sprint 11 - Membership Service,Sprint 12 - Membership Service,Sprint 13 - Membership Service,Sprint 14 - Membership Service,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,ashutosh_kumar,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Dec/16 6:15 AM;ashutosh_kumar;I cannot contain this item within Sprint 8 because of FAB 1372. Moving to Sprint 9 , hence.;;;","06/Apr/17 10:27 PM;smithbk;See https://gerrit.hyperledger.org/r/#/c/7471/;;;",,,,,,,,,,,,,,,,,,
Update flogging vendor to latest tag (alpha2),FABC-155,16791,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,troyronda,troyronda,17/May/17 7:42 AM,27/Jul/19 11:51 PM,28/Oct/23 2:21 AM,27/Jul/19 11:51 PM,,,,,,,,,,,,,0,,,,,,Old ticket - abandoning.,,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxvo7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Fabric-CA documentation to state database version support,FABC-156,16327,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,04/May/17 11:32 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,25/Jul/17 9:31 PM,,,,,,,v1.0.1,,,,,,0,MembershipServices,,,,,"Fabric-ca documentation needs to be updated to state what versions of the databases are supported. Fabric-ca has been tested with the following database versions:

PostgreSQL: 9.5.5
MySQL: 5.7.16

It should be stated in the documentation that the versions listed above and later are supported. ",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3mv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Jul/17 12:54 AM;skarim;https://gerrit.hyperledger.org/r/#/c/11817/;;;",,,,,,,,,,,,,,,,,,,
Revendor BCCSP,FABC-157,31275,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,skarim,skarim,skarim,22/Jun/18 1:03 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,28/Aug/18 11:07 PM,v1.2.0,,,,,,,,,,,,0,,,,,,Revendor BCCSP in fabric ca,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-708,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzftj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jun/18 1:04 AM;skarim;https://gerrit.hyperledger.org/r/23453;;;",,,,,,,,,,,,,,,,,,,
Fix the feature/ca branch,FABC-158,13224,,Task,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,,JonathanLevi,JonathanLevi,28/Oct/16 5:10 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,15/Apr/17 2:25 AM,,,,,,,,,,,,,0,,,,,,"1. For starters, the feature/ca branch is broken and all the below submitted changesets cannot build.

* Add README, Makefile, test cases, fixes ...		Keith Smith
* Defining Enroll Request in API and CLI.		Saad Karim
* TCERT Library Partial implementation		Ashutosh Kumar
* FAB-836/809 revisited: CreateToken and VerifyToken		Pho Le
* Fix changeset 1971 - DB Bootstrapping & Register		Saad Karim			
* Partial work for supporting the register command		Keith Smith
* Database API Implementation		Saad Karim
* Bootstrap DB and update DB when registering user		Saad Karim
* Moved DB API Implementation into COP code		Saad Karim

2. Tracing back we spotted two commits (from Oct 12, and the latest fix, from Oct 18): https://gerrit.hyperledger.org/r/gitweb?p=fabric.git;a=commit;h=64f7111eedf6838ad0b4fe534b9aab2230ee180b
which may have broken it.

3. The break happens early on at the `vagrant up` stage (which triggers a make call that fails with):

default: update-java-alternatives: plugin alternative does not exist: /usr/lib/jvm/java-8-openjdk-amd64/jre/lib/amd64/IcedTeaPlugin.so
*`==> default: Makefile:145: *** multiple target patterns.  Stop.`*

4. We are considering options - either to strip down the build process of the feature/ca branch, or to simply merge the latest version of master (which also upgrades to Ubuntu 16.04, etc.)

Noting that at the time of writing this, feature/ca is *554 commits behind* the master branch (which builds!)
",,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxdp3:",,,,,,Sprint 4 - Membership Services,,,,,,,,,,,,,,,,,,,,,,,,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca server intermediate CA - add TLS and multiple DB fvt test,FABC-159,18679,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,27/Jun/17 2:08 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,31/Jul/17 5:52 PM,v1.0.0,v1.0.0-rc1,,,,,v1.0.1,,,,,,0,,,,,,"The current intermediate test does not test using TLS, nor does it test multiple backend DBs. This adds that support, as well and add enroll/reenroll testing.",,mastersingh24,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy5tb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,rennman,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jul/17 2:41 AM;mastersingh24;https://gerrit.hyperledger.org/r/11157;;;",,,,,,,,,,,,,,,,,,,
Remove default affiliations from the server configuration template,FABC-160,28089,,Task,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,aambati,aambati,01/Mar/18 2:14 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,2,,,,,,"Remove default affiliations from the server configuration template. Currently, config template has the following in the affiliations section:


{{affiliations:}}
{{  org1:}}
{{    - department1}}
{{    - department2}}
{{  org2:}}
{{    - department1}}
 
Just does not make sense to have these defaults, especially the use of ""org1"" and ""org2"". Typically, a CA is for an organization, so having org1 and org2 in the template, confuses users.
 
Removing the defaults causes e2e test as it depends on these default affiliations. So, it needs to be fixed when we remove the defaults.",,aambati,denyeart,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-381,,,,,FABC-436,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx6xb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,denyeart,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","19/Mar/19 3:33 PM;nyet;We are at 1.4 and this has still not been addressed.;;;",,,,,,,,,,,,,,,,,,
Revendor bccsp package in fabric-ca,FABC-161,28225,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,aambati,aambati,aambati,06/Mar/18 4:24 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,07/Mar/18 9:40 PM,v1.1.0,,,,,,v1.1.0,,,,,,0,must-fix,,,,,Revendor bccsp package in fabric-ca to bring it up to date,,aambati,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyzwv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,denyeart,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Mar/18 3:30 AM;denyeart;[~aambati] Fix Version is where the fix is targeted.  It cannot be targeted to a version already released (rc1). I've changed Fix Version to v1.1.;;;","07/Mar/18 5:37 AM;aambati;https://gerrit.hyperledger.org/r/c/18791/;;;",,,,,,,,,,,,,,,,,,
The UpdateNextAndLastHandle SQL statement has incorrect syntax,FABC-162,30792,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,skarim,skarim,01/Jun/18 3:46 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,10/Jul/18 5:44 AM,v1.2.0,,,,,,v1.3.0,,,,,,0,,,,,,"The UpdateNextAndLastHandle SQL statement has incorrect syntax. When the RHPoolSize has been exhausted, and the Revocation Handle needs to be updated the UpdateNextAndLastHandle SQL statement is executed. But, the SQL has incorrect syntax and results in the following error: 
{code:java}
Failed to insert credential into datastore: UNIQUE constraint failed: credentials.revocation_handle
{code}",,aambati,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzdiv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Jun/18 4:00 AM;skarim;https://gerrit.hyperledger.org/r/c/22647/;;;","08/Jun/18 11:08 PM;aambati;This is Idemix related, since Idemix support is not being moved to post 1.2, i am marking this for 1.3;;;",,,,,,,,,,,,,,,,,,
fabric-ca-server needs to implement/document pathlen usage,FABC-163,15817,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,smithbk,rennman,rennman,19/Apr/17 3:19 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,06/Jun/17 3:08 AM,v1.0.0-alpha1,,,,,,v1.0.0,,,,,,0,,,,,,"We don't document the pathlen option. Moreover, it appears that we aren't doing anything with it either. Regardless of what I explicitly code for pathlength, e.g.
   ca:
      pathlen: 2
      pathlenzero: false
      expiry:
I don't see that we're actually adding the extension that includes the pathlength constraint. The generated certificate looks the same either way.

Now we have the ability to create resource authority hierarchies, we actually have a use for this. We should be inserting the pathLenConstraint into the BasicConstraints extension.",,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqb3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Jun/17 1:33 AM;smithbk;http://gerrit.hyperledger.org/r/9987;;;",,,,,,,,,,,,,,,,,,,
Implemented APIs conflict with swagger.json,FABC-164,26949,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,skarim,zhaochy,zhaochy,19/Jan/18 7:55 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,26/Jan/18 2:15 AM,v1.1.0,,,,,,v1.1.0,v1.1.0-alpha,,,,,0,Documentation,,,,,"branch: master,

commit:  ddd74093bb6828b84d9730ceef7d7783da3594ad

 

the api *_/api/v1/identities_* has a implementation that does not work with the doc (swagger.json)

data schema changed in *api/client.go*, and the swagger doc need to be updated too
 for instance, *AddIdentityRequest* has a filed *IdentityInfo*
 the implements wants
{code:javascript}
{
  info: {
    id,
    type,
    affiliation,
    attrs,
    max_enrollments,
  },
  secret,
  caname,
}
{code}
but the document is
{code:javascript}
{
  id,
  type,
  affiliation,
  attrs,
  max_enrollments,
  secret,
  caname,
}
{code}",,denyeart,skarim,smithbk,zhaochy,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyu1j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,skarim,smithbk,zhaochy,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jan/18 11:16 PM;smithbk;The doc is correct here, so the code is wrong.;;;","25/Jan/18 3:07 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/17107/;;;","26/Jan/18 12:03 AM;skarim;[~zhaochy] Please see the new swagger at: https://gerrit.hyperledger.org/r/#/c/17107/5/swagger/swagger-fabric-ca.json;;;",,,,,,,,,,,,,,,,,
The fabric-ca cli/client unit tests fail when /tmp (or TMPDIR) and the fabric-ca codebase reside on different disk partitions or filesystem boundaries,FABC-165,14451,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,harrijk,harrijk,31/Jan/17 8:56 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,19/Apr/17 10:05 AM,,,,,,,v1.0.0,,,,,,0,MembershipServices,,,,,"Prior to issuing an enroll operation within the TestEnrollCLI test, a configuration file is setup within a temporary directory -- /tmp/client<random-number>.  The configuration file within the temporary directory is intended to be a hard link that is created using the *os.Link(""../../testdata/client-config2.json"", clientConfig)* statement.

If the testdata/client-config2.json file and intended hard link (value of clientConfig) are on different filesystem boundaries or span disk partitions, the hard link will NOT be created.

This will result in a cli/client unit test failure (TestEnrollCLI) and the following error messages are displayed:

13:59:45 --- FAIL: TestEnrollCLI (10.00s)
13:59:45 	client_test.go:62: Failed to register, err:  Failed to load client config file [open /tmp/client619326020/client-config.json: no such file or directory]; not sending

Perhaps symbolic links could be used instead of hard links.",,harrijk,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjkn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,harrijk,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Feb/17 5:41 AM;harrijk;The commit associated with this issue is intended to be a ""workaround"" until the unit test code is changed to utilize symlinks instead of hard links. Theoretically, this issue could occur on x or p if the Jenkins workers have the cloned repos and /tmp on separate physical disks (or cross file system boundaries).;;;","19/Apr/17 10:05 AM;smithbk;Closing this because there are no longer any occurrences of os.Link anywhere in fabric-ca code or test cases.;;;",,,,,,,,,,,,,,,,,,
make unit-tests fails on Windows 7 TestMaxEnrollmentLimited,FABC-166,19242,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,lehors,lehors,lehors,14/Jul/17 4:36 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,28/Sep/17 3:51 AM,v1.0.0,,,,,,v1.1.0,,,,,,0,,,,,,"This is with vagrant on a Windows 7 box. I get the following error:
{code:java}
2017/07/12 00:59:58 [DEBUG] Directing traffic to default CA
2017/07/12 00:59:58 [DEBUG] DB: Getting identity admin
2017/07/12 00:59:58 [DEBUG] DB: Login user admin with max enrollments of -1 and state of 8
2017/07/12 00:59:58 [DEBUG] Max enrollment value (-1) of identity is greater than allowed by CA, using CA max enrollment value of 1
2017/07/12 00:59:58 [DEBUG] Failed to login 'admin': The identity admin has already enrolled 1 times, it has reached its maximum enrollment allowance
2017/07/12 00:59:58 [DEBUG] Received response
statusCode=400 (400 Bad Request)
--- FAIL: TestMaxEnrollmentLimited (0.55s)
server_test.go:986: Test max enrollment limited
server_test.go:999: Enrollment failed, error: Error response from server was: Authorization failure
panic: runtime error: invalid memory address or nil pointer dereference [recovered]
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x4cb657]

goroutine 754 [running]:
panic(0xaa1440, 0xc42000e0f0)
/opt/go/src/runtime/panic.go:500 +0x1a1
testing.tRunner.func1(0xc42007a600)
/opt/go/src/testing/testing.go:579 +0x25d
panic(0xaa1440, 0xc42000e0f0)
/opt/go/src/runtime/panic.go:458 +0x243
github.com/hyperledger/fabric-ca/lib_test.TestMaxEnrollmentLimited(0xc42007a600)
/opt/gopath/src/github.com/hyperledger/fabric-ca/lib/server_test.go:1001 +0x247
testing.tRunner(0xc42007a600, 0xb98208)
/opt/go/src/testing/testing.go:610 +0x81
created by testing.(*T).Run
/opt/go/src/testing/testing.go:646 +0x2ec
FAIL	github.com/hyperledger/fabric-ca/lib	117.907s
error: exit status 1
panic: EOF

goroutine 1 [running]:
panic(0x4daca0, 0xc42000a180)
/opt/go/src/runtime/panic.go:500 +0x1a1
main.main()
/opt/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x15fd
*** END FAILURES ***
Makefile:148: recipe for target 'unit-tests' failed
make: *** [unit-tests] Error 1
{code}",,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-253,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3nb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,lehors,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Jul/17 5:00 AM;lehors;Digging into that one I found that the problem has to do with the test itself. The call to os.RemoveAll(rootDir) fails with: remove rootDir/fabric-ca-server.db: text file busy

Then because the database isn't cleaned up properly the test picks up a dirty db which leads to a failure.

When run alone the test passes all right.

Then the code assumes enrollment will succeed and proceed to dereferencing id without any precaution. Unfortunately in this case it is nil, which leads to the segmentation violation.

I'm not completely sure why os.RemoveAll fails. It might be a timing issue. This needs to be investigated further.;;;","14/Jul/17 7:53 AM;lehors;Actually, upon further investigation I have found that the problem comes from trying to delete the db file without ever closing the db. As a matter of fact I don't see any code about closing the CA db. A quick test adding some code to close the db makes the test run successfully. I will put a CR together.;;;",,,,,,,,,,,,,,,,,,
Mask DB credentials in debug messages,FABC-167,20208,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,16/Aug/17 10:56 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,28/Aug/17 7:43 PM,v1.0.0,v1.0.1,,,,,v1.0.2,v1.1.0,,,,,0,,,,,,"While this would generally not have been an issue, in the case where fabric-ca is being hosted / managed by 3rd party operators need to ensure that credentials are masked as the people monitoring the service may not be the same people who have administrative rights",,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyd9j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Aug/17 11:03 AM;smithbk;[https://gerrit.hyperledger.org/r/12501] for 1.1+;;;","25/Aug/17 7:05 PM;mastersingh24;https://gerrit.hyperledger.org/r/12779 for 1.0.2;;;",,,,,,,,,,,,,,,,,,
Confusing errors during cop server startup,FABC-168,14120,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,keithsmith,kenzhang,kenzhang,17/Jan/17 10:56 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,06/Apr/17 10:33 AM,,,,,,,,,,,,,0,,,,,,"The following errors are shown during the cop server startup:

2017/01/16 20:10:46 [INFO] Initializing signer
2017/01/16 20:10:46 [WARNING] couldn't initialize signer: {""code"":2000,""message"":""Unknown private key error""}
2017/01/16 20:10:46 [WARNING] couldn't initialize ocsp signer: open : no such file or directory

Opening defect based on reply:
keithsmith [2:49 AM] 
@kenzhang You can ignore those warnings pertaining to OCSP.  They come from cfssl and are ""normal"" but agree are confusing.  Pls open a Jira item and assign to me for clean up.",,kenzhang,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxi9j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,kenzhang,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Apr/17 10:33 AM;smithbk;This has been fixed for a while now, but forgot to mark so earlier.;;;",,,,,,,,,,,,,,,,,,,
[node-SDK] Command init is not defined.,FABC-169,13618,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,,jjjjibm,jjjjibm,06/Dec/16 3:12 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,06/Apr/17 10:51 AM,v1.0.0,,,,,,,,,,,,0,,,,,,"This README.md here https://github.com/hyperledger/fabric-cop

and this design doc: https://docs.google.com/document/d/1TRYHcaT8yMn8MZlDtreqzkDcXx0WI50AV2JpAcvAM5w/edit  (See section 1.1.1) 

cause me to believe this is a valid and required command: cop server init ../testdata/csr_dsa.json

However, the actual result is: 

fabric-cop/bin$ ./cop server init ../testdata/csr_dsa.json
Command init is not defined.
Usage:
Available commands:
        start
Top-level flags:
  -allow_verification_with_non_compliant_keys
        Allow a SignatureVerifier to use keys which are technically non-compliant with RFC6962.
vagrant@hyperledger-devenv:v0.2.1-f09b5da:/opt/gopath/src/github.com/hyperledger/fabric-cop/bin$


",windows -> virtualbox -> vagrant -> ubuntu,jjjjibm,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxfjr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jjjjibm,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Apr/17 10:51 AM;smithbk;No longer an issue;;;",,,,,,,,,,,,,,,,,,,
"fabric-ca-sever should return 401, not 500 for restricted operations",FABC-170,15441,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,24/Mar/17 2:43 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,27/Apr/17 2:42 AM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"Currently, if the client violates the rule regarding who can revoke, based on affiliation, the server returns HTTP status code 500:

2017/03/23 14:58:00 [DEBUG] Received response
statusCode=500 (500 Internal Server Error)
Error: Error response from server was: Revoker admin does not have proper affiliation to revoke user

It should return status code 401.",,ChristopherFerris,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxofz:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,rennman,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/17 8:39 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8145/;;;",,,,,,,,,,,,,,,,,,,
[fabric-ca] Cannot clone or checkout fabric-ca  -- error: unable to create file <filename> (invalid argument),FABC-171,15339,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,mastersingh24,jjjjibm,jjjjibm,14/Mar/17 5:33 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:39 PM,v1.0.0,,,,,,,,,,,,0,,,,,,"Today, I cannot clone or update fabric-ca.

First attempt: git pull 
$ git pull
Already up-to-date.

Windows Account@IBM-TGGEOH4VC1O MINGW64 /c/go/src/github.com/hyperledger/fabric-ca (master)
$ git status
On branch master
Your branch is up-to-date with 'origin/master'.
Changes not staged for commit:
  (use ""git add/rm <file>..."" to update what will be committed)
  (use ""git checkout -- <file>..."" to discard changes in working directory)

        deleted:    vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA.crt
        deleted:    vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA_2.crt

Untracked files:
  (use ""git add <file>..."" to include in what will be committed)

        vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/S-TRUSTAuthenticationandEncryptionRootCA2005
        vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/http


Seeing missing files, I tried git checkout:

{color:#654982}Windows Account@IBM-TGGEOH4VC1O MINGW64 /c/go/src/github.com/hyperledger/fabric-ca (master)
$ git checkout vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/S-TRUSTAuthenticationandEncryptionRootCA2005
error: pathspec 'vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/S-TRUSTAuthenticationandEncryptionRootCA2005' did not match any file(s) known to git.

Windows Account@IBM-TGGEOH4VC1O MINGW64 /c/go/src/github.com/hyperledger/fabric-ca (master)
$ git checkout vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/http
error: pathspec 'vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/http' did not match any file(s) known to git.
{color}
Checkout didn't work, so I decided to remove the directory and clone a new one: 
{color:#654982}$ rm -rf fabric-ca

Windows Account@IBM-TGGEOH4VC1O MINGW64 /c/go/src/github.com/hyperledger
$ git clone http://gerrit.hyperledger.org/r/fabric-ca
Cloning into 'fabric-ca'...
remote: Counting objects: 2969, done
remote: Finding sources: 100% (13/13)
remote: Total 4714 (delta 0), reused 4705 (delta 0)
Receiving objects: 100% (4714/4714), 19.39 MiB | 2.64 MiB/s, done.
Resolving deltas: 100% (1244/1244), done.
Checking connectivity... done.
{color:#654982}error: unable to create file {color}vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA.crt (Invalid argument)
{color:#654982}error: unable to create file {color}vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA_2.crt (Invalid argument)
Checking out files: 100% (4039/4039), done.
fatal: unable to checkout working tree
warning: Clone succeeded, but checkout failed.
You can inspect what was checked out with 'git status'
and retry the checkout with 'git checkout -f HEAD'
{color}

I decided to follow the suggestion in the error message: 

{color:#654982}$ cd fabric-ca

Windows Account@IBM-TGGEOH4VC1O MINGW64 /c/go/src/github.com/hyperledger/fabric-ca (master)
$ git checkout -f HEAD
error: unable to create file vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA.crt (Invalid argument)
error: unable to create file vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA_2.crt (Invalid argument)
Checking out files: 100% (4039/4039), done.
Your branch is up-to-date with 'origin/master'.{color}

git status = same as before



","Vagrant VM for Win7
fabric-ca commit c73ce65eaa9732dcf51930e75ed99adfb4edce85
fabric: commit 77760ef1c420816bd6984c33bd3d3f97323ffa71

",aambati,chrisconway,jjjjibm,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnzr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,chrisconway,jjjjibm,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Mar/17 12:25 AM;aambati;[~jjjjibm] https://github.com/hyperledger/fabric-ca is the correct github URL for fabric-ca. 

You can try _go get github.com/hyperledger/fabric-ca/cmd/…_
;;;","02/Apr/17 9:15 PM;mastersingh24;[~jjjjibm] - the issue is that one of the files used by the vendored cfssl packages uses illegal Windows characters.  There's not much that can be done about that but if should not actually cause you any issues.  If built the fabric-ca directly on Windows before as well as submitted changes.  So I'm going to close this because there's really nothing that can be done about it and I don't believe this actually affects anything;;;","02/Apr/17 9:16 PM;mastersingh24;marking as WON'T FIX;;;",,,,,,,,,,,,,,,,,
path names in COP config file are not processed correctly,FABC-172,13959,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,08/Jan/17 7:39 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,11/Mar/17 12:54 AM,,,,,,,v1.0.0,,,,,,0,,,,,,"All non-absolute file names or path names listed in the COP config file should be made into absolute file paths by looking relative to the location of the config file itself, not relative to the current working directory.
For example, the following is currently in fabric-cop/testdata/testconfig.json:
{code}
""ca_cert"":""../testdata/ec.pem"",
{code}
This should simply be:
{code}
""ca_cert"": ""ec.pem"",
{code}
and since ""ec.pem"" is not an absolute path, it is located by looking relative to the location of the config file; therefore, it will be found in the fabric-cop/testdata also, not matter which directory you invoke ""cop server start -config ..."" from.

Note that file names listed on the command line via arguments are different and must continue to be process relative to the current working directory.   For example, if the -ca option is used as shown below from the fabric-cop directory, then the ec.pem file must be located in the fabric-cop directory, which is the current working directory.
{code}
cop server start -ca ec.pem -config testdata/testconfig.json
{code}

",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxgmn:",,,,,,Sprint 9 - Membership Services,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Jan/17 2:44 AM;smithbk;See http://gerrit.hyperledger.org/r/3749;;;","09/Jan/17 2:51 AM;smithbk;Saad, I've fixed this for the server config file.  I'm assigning to you to fix for the client file which you introduced for TLS configuration.   See cop_client.json and cop_client2.json in testdata.  We should only need a cop_client.json and can delete cop_client2.json once that is done.  See  http://gerrit.hyperledger.org/r/3749 for how this is solved for the server.  You can reuse the util.MakeFileAbs function for this.;;;",,,,,,,,,,,,,,,,,,
fabric-ca-client enroll -u option ignored when config file already exists,FABC-173,31031,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,skarim,smithbk,smithbk,13/Jun/18 10:19 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,15/Nov/18 4:31 AM,,,,,,,,,,,,,0,,,,,,"Run the ""fabric-ca-client enroll -u <URL>"" command twice with two different <URL> values.  The first one creates the config file with the 1st URL.
When you run the command with a different URL on the command line, it uses the
<URL> stored in the config file rather than the one from the command line arg.

The command line arg should override what is in the config file.",,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzeof:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Jun/18 11:16 PM;skarim;[~smithbk] I tried to reproduce this but I did not see the symptom you are reporting. The URL is always getting picked up from the -u flag for me. I am trying to reproduce this on the release branch, with this commit: fe2fd4fb1ffcac22910caebf13511445483f646b;;;",,,,,,,,,,,,,,,,,,,
many commands can be manipulated to delete identities or affiliations,FABC-174,30024,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,dhuseby,dhuseby,08/May/18 7:08 AM,11/Dec/18 9:57 AM,28/Oct/23 2:21 AM,10/Nov/18 4:04 AM,,,,,,,v1.4.0,,,,,,0,fabric-ca,fabric-ca-client,security,,,"The Faric-ca data in http body and authorization header for many commands that send from client to server are protected by signature.

But I find the identity and affiliation commands still have the risk to be manipulated. Hacker can manipulate most other commands to delete identities or affiliations in a server (server start with –cfg.identities.allowremove and –cfg.affiliations.allowremove).

Example 1: Manipulating list an identity command to delete any identity or affiliation. 

!identities_list.png!

normal list identity command

you can manipulate it:

!identitie_list_delete.png!

Manipulate the list command to delete command

If a hacker gets the request http data (maybe by sniffer), he can manipulate the GET method to DELETE method, and change the admin3 identity to any other valid identity in the server, he can delete it.

Example 2: Manipulating add an identity command to delete an identity or affiliation.

!identities_add.png!

normal add an identity command

you can manipulated:

!identities_add_delete.png!

 

Manipulate the add identity command to delete an identity

or you can manipulated as:

!identities_add_delete_affi.png!

Manipulate the add identity command as delete an affiliation command

Actually, you can also manipulate other commands by this way. Such as: enroll, revoke,register… and so on.

*Analysis:*

The authentication and authorization checking just covers the Authorization header and body, 
but the code for deleting identity and affiliation gets the identity value and affiliation value from *url path*. They are not protected by signature. And you can manipulate the method from other to DELETE.

*DELETE* /affiliations/*org1.dep2*?force=true HTTP/1.1
*DELETE* /identities/*admin2* HTTP/1.1
h2. Impact

If a hacker get any of the normal request data by some way (maybe by network sniffer), he can delete all identities or affiliations.

 ",,aambati,ChristopherFerris,dhuseby,mastersingh24,siddjain,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABJ-371,FABP-169,FABG-766,FABN-943,FABC-774,,,"08/May/18 7:01 AM;dhuseby;identitie_list_delete.png;https://jira.hyperledger.org/secure/attachment/14957/identitie_list_delete.png","08/May/18 7:02 AM;dhuseby;identities_add.png;https://jira.hyperledger.org/secure/attachment/14956/identities_add.png","08/May/18 7:04 AM;dhuseby;identities_add_delete.png;https://jira.hyperledger.org/secure/attachment/14955/identities_add_delete.png","08/May/18 7:04 AM;dhuseby;identities_add_delete_affi.png;https://jira.hyperledger.org/secure/attachment/14954/identities_add_delete_affi.png","08/May/18 7:00 AM;dhuseby;identities_list.png;https://jira.hyperledger.org/secure/attachment/14958/identities_list.png",,,,,,,,,,,,,,,,,,,,,,"1|hzz95j:","The token authentication mechanism was improved to prevent token reuse. After upgrading to 1.4, a more secure authentication method is used. To enable both the old and new authentication mechanism, the following environment should be set to true::

FABRIC_CA_SERVER_COMPATIBILITY_MODE_V1_3=true

All clients should be updated to release 1.4, clients in 1.4 version will generate tokens that are more secure. Once all the clients have been updated, the above environment variable should be set to 'false'.
",Yes,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,ChristopherFerris,dhuseby,mastersingh24,siddjain,skarim,smithbk,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/May/18 7:14 AM;ChristopherFerris;I tagged [~smithbk];;;","11/May/18 6:14 AM;smithbk;I just looked at it and understand the issue and how to fix.  Working on it.;;;","18/May/18 10:33 AM;dhuseby;[~smithbk] what's the ETA? Is the severity still critical? I think this bug deserves a CVE since Fabric is being used in the wild.;;;","18/May/18 10:36 AM;dhuseby;[~smithbk] it's important that we know what the severity is because we're going to pay a bug bounty on this.;;;","19/May/18 11:58 PM;smithbk;[~dhuseby] The severity depends on whether you can get someone else's authorization header.  This should not be possible when using HTTPS unless there is a proxy involved which logs the traffic.  In this case, someone with access to the proxy would be able to steal someone else's authorization header.  We do not log the authorization header even at debug level of trace, so they can't get the authorization header from the logs.  Since proxies are pretty standard, I would say the likelihood of a breach is moderate, and the severity of the harm they could do is severe (since they could delete identities which someone else lists).

The following change set was merged into master which fixes this issue:  https://gerrit.hyperledger.org/r/#/c/21743/
However, it breaks compatibility with SDKs.  See https://jira.hyperledger.org/browse/FAB-10205
Another change set is underway to fix this incompatibility as described below.   See https://gerrit.hyperledger.org/r/#/c/22025/.

The plan is to:
1) Add support for a FABRIC_CA_SERVER_AUTHHDR_COMPATIBILITY env variable which when set to true, accepts both an old and new token format, and when set to false, accepts only the new token format (which fixes this issue).  Initially however, the default value will be ""true"".
2) Update all SDKs to send the new token format.
3) Change the default value FABRIC_CA_SERVER_AUTHHDR_COMPATIBILITY to false.

This will allow someone to upgrade the server and start it with FABRIC_CA_SERVER_AUTHHDR_COMPATIBILITY set to true, upgrade all clients, and then restart the server with FABRIC_CA_SERVER_AUTHHDR_COMPATIBILITY set to false (or just remove it).  Of course this is only necessary if they need to upgrade the fabric-ca-server to without an outage of its clients.

I'll be attaching sub-tasks to this jira for each of the SDKs.;;;","20/May/18 7:39 PM;smithbk;[~dhuseby] I would like to change my response regarding the severity of this issue.  I do NOT think it is a real issue and is therefore NOT severe.  As I stated before, it really depends on whether or not it is possible to see someone else's authorization header.  But it should not be possible to see someone else's authorization header, or that indicates an issue in whatever exposes that authorization header.  

For example, if there is a proxy which terminates a TLS connection is used AND that proxy logs the authorization header, the security issue would be with the proxy which logs the authorization header which it should not be doing.

Furthermore, if you are able to see a user's authorization header, then you could masquerade as that user by using their Basic authorization header which is on the ""POST /api/v1/enroll"" request and then enrolling as that user (assuming their max_enrollment setting has not been exceeded).;;;","21/May/18 4:05 AM;smithbk;[~dhuseby] [~mastersingh24] [~ChristopherFerris] If everyone agrees that this is not a real issue (any more so than using a Basic auth header), I propose that:

1) For v1.2, we submit a change set which reverts  https://gerrit.hyperledger.org/r/#/c/21743/ and therefore fixes https://jira.hyperledger.org/browse/FAB-10205 and abandon https://gerrit.hyperledger.org/r/#/c/22025/.

2) For v1.3, we re-evaluate the importance of guarding against theft of authorization headers ... and if so, we change the token format only once.

Pls comment.;;;","22/May/18 12:15 AM;mastersingh24;[~smithbk] - I agree with your assessment and believe that this is going to cause a lot of unnecessary work and confusion.;;;","22/May/18 1:33 AM;ChristopherFerris;I agree with the assessment, Keith, and with the approach to resolve.;;;","22/May/18 2:40 AM;smithbk;ok, we are proceeding with a change set to revert https://gerrit.hyperledger.org/r/#/c/21743/ ;;;","25/May/18 5:13 AM;dhuseby;[~mastersingh24] [~ChristopherFerris]

I have a couple of questions:

1) Can Fabric be deployed without TLS link layer confidentiality?

2) What is the default deploy? 

3) What does a user have when they follow the ""getting started"" documentations?

Our ""default deploys"" have to be secure as well as what the user gets when following the ""getting started"" documentation.  I really don't like that the server authentication relies on link layer confidentiality.  There's a reason why basic auth isn't ever used in the wild.  This needs to be fixed for sure, but it needs to be done in a smart way.;;;","01/Jun/18 6:58 AM;dhuseby;[~smithbk] can you answer these? ^^^;;;","21/Jun/18 4:05 AM;ChristopherFerris;[~dhuseby] - 1. We're talking now about Fabric-ca, not Fabric. 2. There is no ""default deploy"" because we do not deal with production deployment in the project at this time. That is an exercise for the implementer. 3. Getting Started is not intended for production, it is a configuration for running on your laptop and the use of the CA is only an option. As configured, it would use TLS.

 ;;;","07/Jul/18 9:04 AM;dhuseby;[~ChristopherFerris] ok, just checking.  I still don't like relying on TLS when there is a way to do this without that dependency. I just closed out the H1 report and the bounty has been paid.;;;","08/Sep/18 12:18 PM;skarim;Since fixing this has SDK impacts, this needs to address early in a release cycle. Changing fix version to 1.4;;;","27/Sep/18 11:09 PM;skarim;https://gerrit.hyperledger.org/r/c/26614/;;;",,,,
User attributes are not populated when LDAP is enabled,FABC-175,16010,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,smithbk,rennman,rennman,26/Apr/17 6:13 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,06/Jan/18 2:59 AM,v1.0.0-alpha1,,,,,,,,,,,,0,,,,,,"When ldap is enabled, there is currently no mechanism to populate the user's data (attributes, identity type, maxenrollments, etc.)

This cripples any functions that relies on this data.

--------------------------------------
NOTE: In order to uncripple this function, as mentioned in my last comment, we will support the following:",,Hangyu_FJH,leonlov,OBrezhniev,rennman,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3qv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Hangyu_FJH,leonlov,OBrezhniev,rennman,skarim,smithbk,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/May/17 9:04 AM;smithbk;The bug appears to be that the lib/spi/userregistry.go API is polluted a bit.
I think the GetUserInfo function should be removed from the UserRegistry interface.
All places which currently use this call via this interface (lib/ca.go and lib/serverrevoke.go)
should use GetUser instead.
There is no need to support both and the GetUser API is the higher level abstraction that
we intended to be used.
Of course GetUserInfo can still be used in the DB implementation of UserRegistry, but it
should not be used outside of DB specific code.

Also note that maxenrollments is not supported for LDAP.  The reason is that in order to support this, we would either need to write to the LDAP registry to keep track of the current number of enrollments for the user, or we would need to keep parallel information in fabric-ca-server's DB for the users in LDAP.  I don't think either of these is desirable, so we choose for now to not support this for LDAP.   So maxenrollments is only something that is checked in the DB implementation of the UserRegistry.Login call, not in LDAP's implementation of this function.;;;","18/May/17 9:11 AM;smithbk;For attributes, see [https://godoc.org/gopkg.in/ldap.v2#NewSearchRequest]

I pass the names of attributes and the response contains [https://godoc.org/gopkg.in/ldap.v2#EntryAttribute]  which are associated with the user.;;;","26/May/17 1:51 AM;smithbk;I'm marking as v1.1 because there is currently no support for attributes in certificates in v1.

Also note that the code is already there for LDAP to retrieve attributes, but this JIRA item should be used to provide documentation and test cases. ;;;","24/Jun/17 12:58 AM;rennman;It's slightly more complicated, I think. Although we do have a mechanism to retrieve attributes from the LDAP server (I believe ink the original test did include a retrieval of the user's email),  we have not yet defined a schema that would accommodate the fields that we actually use, e.g.
  hf.Registrar.Roles
  hf.Registrar.DelegateRoles
  hf.Revoker
  hf.IntermediateCA

We currently rely on the structural object class of inetOrgPerson, which doesn't contain these attributes. We would need to get registered OIDs from IANA, associate with the custom attributes, then create auxiliary object classes that would be added to the user entry.;;;","13/Jul/17 8:31 PM;smithbk;I don't think we need to register OIDs with IANA.  We can simply provide an example.
That is, we can create an object class, say ""hfInetOrgPerson"" which extends ""inetOrgPerson"" and adds these attributes.   See http://www.yolinux.com/TUTORIALS/LinuxTutorialLDAP-DefineObjectsAndAttributes.html for an example of how to do this.;;;","13/Jul/17 8:38 PM;smithbk;On 2nd thought, in order to allow existing LDAP repositories to be used without modification (i.e. without extending the schema), we should consider providing a way to map the ""hf.*"" attributes to other LDAP attributes.  I'll give this some thought.;;;","14/Jul/17 2:44 AM;skarim;Proposing the following on how to tackle fabric-ca attributes with LDAP. With LDAP enabled the only attributes that come into play are hf.Revoker and hf.IntermediateCA. Attributes hf.Registrar.Roles and hf.Registrar.DelegateRoles only come into play during user registration and registration via fabric-ca is not supported with LDAP enabled.

To indicate if a user in the LDAP directory has one of these fabric-ca attributes, we will use the 'ou' LDAP attribute. In the LDAP configuration section of the fabric-ca server, two new configuration parameters will be added.  The configuration section may look like:

{code:none}
LDAP:
   hf.Revoker: revoker # OU name for identities with revocation privileges
   hf.IntermediateCA: intermediateCA # OU name for intermediate CA identities
{code}

With the configuration above, if a user in LDAP has an 'ou' of 'revoker' then they can revoke a specific certificate or revoke all the certificates of a specific user. But, they cannot revoke the user itself only all its associated certificates. Affiliation hierarchy is not going to be supported with LDAP, thus no affiliation check will be performed. The same approach will be taken for hf.IntermediateCA attribute. ;;;","26/Aug/17 2:07 AM;smithbk;A single OU will not be sufficient.  OUs are arranged hierarchically, are order dependent, and need not be unique.
For example, the Admin OU is not unique below, and the order of OUs is significant.
{code}
C=US, O=Org1, OU=Finance, OU=Admin, CN=Alice
C=US, O=Org1, OU=Engineering, OU=Admin, CN=Bob
{code}

The following should work though:
{code}
LDAP:
   attributes:
      hf.Revoker: DN like 'C=US, O=Org1, OU=Finance, OU=Admin, CN=*'
{code}

So in this example, Alice is a revoker but Bob is not.
Obviously the ""DN like"" part depends on the expr framework, so unless someone is really pushing to get this, should wait until post v1.1.;;;","07/Oct/17 4:05 AM;smithbk;https://gerrit.hyperledger.org/r/14275 [FAB-3416] Vendoring govaluate
https://gerrit.hyperledger.org/r/14279 [FAB-3416] Map LDAP attrs to fabric CA attrs;;;","16/Nov/17 6:14 AM;rennman;[https://gerrit.hyperledger.org/r/#/c/15455/]  Enhance fvt image LDAP attributes

 

In order to exploit the new function, the fvt environment will be updated to include the following:
 # Enable the memberOf overlay for the slapd server
 # Create groups that infer access control and can be used to correlate with native fabric-ca server attributes:
|Attr|Group|
|hf.Revoker|cn=Revoker,ou=groups,dc=example,dc=com|
|hf.GenCrl|cn=Gencrl,ou=groups,dc=example,dc=com|
|hf.Revoker
 hf.GenCrl|cn=pkiAdmin,ou=groups,dc=example,dc=com|
|hf.IntermediateCa|cn=Ca,ou=groups,dc=example,dc=com|
 # Create groups that be used to correlate with user 'type' as defined by native fabric-ca server attribute hf.Type:
|Type|Group|
|peer|cn=Peer,ou=groups,dc=example,dc=com|
|client|cn=Client,ou=groups,dc=example,dc=com|
|user|cn=User,ou=groups,dc=example,dc=com|
|app|cn=App,ou=groups,dc=example,dc=com|
|auditor|cn=Auditor,ou=groups,dc=example,dc=com|
|validator|cn=Validator,ou=groups,dc=example,dc=com|
 # Create new organizational hierarchies that correspond to existing fabric-ca test artifacts and samples:
 ## ou=department1,ou=bank_a,dc=hyperledeger,dc=example,dc=com
 ## ou=department1,ou=bank_b,dc=hyperledeger,dc=example,dc=com
 ## ou=department1,ou=bank_c,dc=hyperledeger,dc=example,dc=com
 ## ou=department1,ou=org1,dc=hyperledeger,dc=example,dc=com
 ## ou=department2,ou=org1,dc=hyperledeger,dc=example,dc=com
 ## ou=department1,ou=org2,dc=hyperledeger,dc=example,dc=com
 ## ou=department2,ou=org2,dc=hyperledeger,dc=example,dc=com
 # Create new user groups with divergent affiliation paths:
 ## dn: ou=dev,ou=fabric,dc=hyperledeger,dc=example,dc=com
 ## dn: ou=users,ou=dev,ou=fabric,dc=hyperledeger,dc=example,dc=com
 ## dn: ou=peers,ou=dev,ou=fabric,dc=hyperledeger,dc=example,dc=com
 ## dn: ou=tst,ou=fabric,dc=hyperledeger,dc=example,dc=com
 ## dn: ou=users,ou=tst,ou=fabric,dc=hyperledeger,dc=example,dc=com
 ## dn: ou=peers,ou=tst,ou=fabric,dc=hyperledeger,dc=example,dc=com
 # Create new admins that have affiliation authority only with their domain scope:
 ## uid=devadmin,ou=dev,ou=fabric,dc=hyperledeger,dc=example,dc=com
 ## uid=tstadmin,ou=dev,ou=fabric,dc=hyperledeger,dc=example,dc=com
 # Create a new admin that hangs off of the LDAP root hierarchy and has implicit authority to all sub-nodes: uid=rootadmin,dc=example,dc=com
 # Create converters to map LDAP groups to fabric-ca attributes
{code:java}
    converters:
      - name: hf.GenCRL
        value: attr(""memberOf"") =~ ""cn=Gencrl,ou=groups,dc=example,dc=com"" || attr(""memberOf"") =~ ""cn=pkiAdmin,ou=groups,dc=example,dc=com""
      - name: hf.Revoker 
        value: attr(""memberOf"") =~ ""cn=Revoker,ou=groups,dc=example,dc=com"" || attr(""memberOf"") =~ ""cn=pkiAdmin,ou=groups,dc=example,dc=com""
      - name: hf.IntermediateCA
        value: attr(""memberOf"") =~ ""cn=Ca,ou=groups,dc=example,dc=com""
      - name: hf.Registrar.Roles
        value: map(attr(""memberOf""),""roles"")
    maps:
      ROLES:
         - name: cn=Client,ou=groups,dc=example,dc=com
           value: client
         - name: cn=User,ou=groups,dc=example,dc=com
           value: user
         - name: cn=Peer,ou=groups,dc=example,dc=com
           value: peer
         - name: cn=App,ou=groups,dc=example,dc=com
           value: app
         - name: cn=Auditor,ou=groups,dc=example,dc=com
           value: auditor
         - name: cn=Validator,ou=groups,dc=example,dc=com
           value: validator
         - name: cn=pkiAdmin,ou=groups,dc=example,dc=com
           value: pkiadmin
{code}
# Update the fvt ldap_test to check access control equivalent to
## hf.Revoker ( both + and - )
## hf.GenCrl  ( both + and - )
## proper affiliation path for revocation
# Fix a bug in lib/ldap/client.go that does not account for case sensitivity when calculating affiliation path from DN
# Fix a debug print bug in lib/serverrequestcontext.go
# scripts/fvt/intermediateca_test.sh is updated to use LDAP instead of the fabric-ca native registry in order to test hf.intermediateCa for LDAP identities;;;",,,,,,,,,,
Fix failing TestGetCertificatesDB test case,FABC-176,31431,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,skarim,skarim,skarim,28/Jun/18 5:43 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,29/Jun/18 2:49 AM,v1.2.0,v1.3.0,,,,,v1.2.0,v1.3.0,,,,,0,,,,,,"Test started failing because a static date is used, but a dynamically generated date is need for this particular assertion. Updated the test case to generate a future date dynamically based on current date.",,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzggf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Jun/18 5:50 AM;skarim;[https://gerrit.hyperledger.org/r/c/23765/] - release 1.2 (merged)
 [https://gerrit.hyperledger.org/r/c/23763/] - master (1.3);;;","28/Jun/18 6:27 AM;denyeart;Marked as must-fix since the problem was causing tests to fail.;;;","29/Jun/18 2:07 AM;denyeart;Removed must-fix since this has been merged on release-1.2.;;;","29/Jun/18 2:49 AM;denyeart;Merged in master as well, closing.;;;",,,,,,,,,,,,,,,,
CA DB is left open in error case,FABC-177,21752,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,lehors,lehors,lehors,10/Oct/17 6:28 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,21/Oct/17 1:32 AM,v1.0.3,,,,,,v1.1.0,v1.1.1,,,,,0,,,,,,"In case an error occurs NewCA returns an error and nil, leaving the CA DB open with no way to access it anymore.
{code:java}
func NewCA(caFile string, config *CAConfig, server *Server, renew bool) (*CA, error) {
  ca := new(CA)
  ca.ConfigFilePath = caFile
  err := initCA(ca, filepath.Dir(caFile), config, server, renew)
  if err != nil {
    return nil, err
  }
  return ca, nil
}
{code}
This makes it impossible to delete the DB file on Windows (file is ""busy""), which then makes TestCAloadUsersTable fail:
{code:java}
--- FAIL: TestCAloadUsersTable (0.25s)
ca_test.go:708: ca.newCA error: Failed to load identity table: Code: 34 - Configuration Error: Max enrollment in registration request may not be less than -1, but was -10
ca_test.go:722: Remove failed: remove ../testdata/fabric-ca-server.db: text file busy
FAIL
exit status 1
FAIL github.com/hyperledger/fabric-ca/lib 0.088s

{code}",vagrant 1.9.5 / Windows 7,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-251,,,,,,,,,,,,,,,,,FABC-523,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyj0n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,lehors,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Fix max enrollment checking logic,FABC-178,15591,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,06/Apr/17 6:46 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,02/Jun/17 9:17 AM,v1.0.0-alpha2,,,,,,v1.0.0,,,,,,5,,,,,,"The max enrollment configuration setting is not implemented correctly.  It should work as follows.

Let *ca**MaxEnrollments* be the globally configured max enrollments for the CA, and *user**MaxEnrollments* be the per-user/identity max enrollments setting.  The userMaxEnrollments setting is part of the registration request for a user/identity.**

The valid values (and semantics) for *ca**MaxEnrollments* are:
{code:java}
-1: Infinite number of enrollments (i.e. no limit)
0: Enrollments disabled globally
>0: Maximum number of enrollments allowed globally{code}
The valid values (and semantics) for *user**MaxEnrollments* are:
{code:java}
-1: Infinite number of enrollments (i.e. no limit)
0: Use the caMaxEnrollments value
>0: Maximum number of enrollments{code}
 

When a registration request is received which contains a userMaxEnrollments setting, an error is returned if:

1) userMaxEnrollments is -1 (infinite) and caMaxEnrollments is not -1

2) userMaxEnrollments > 0 and userMaxEnrollments > caMaxEnrollments

If userMaxEnrollments is 0 (the default value), the userMaxEnrollments value is set to the current value of caMaxEnrollments.

 

Keep in mind that the caMaxEnrollments setting may change between the time that a user is registered and when that user enrolls (multiple times).

 

When an enrollment request is received for a particular user/identity, the current max enrollment ** setting for that user which is enforced is calculated as the minimum of the current caMaxEnrollments setting (if not -1) and the userMaxEnrollments setting for that user.

 

This allows the caMaxEnrollment setting to always act as a backstop for max enrollments.

For example, the following scenarios are supported:

1) caMaxEnrollments set to 0 means enrollment is temporarily disabled for the CA

2) caMaxEnrollments set to 1 means all passwords are treated as a OTP (One-Time Password)

3) caMaxEnrollments set to -1 means registrars are in *complete* control of managing the max enrollments settings on a per user basis.

4) caMaxEnrollments > 1 means registrars have *partial* control of managing the max enrollments setting on a per user basis.

 ",,baohua,ChristopherFerris,mastersingh24,skarim,smithbk,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-200,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4fb:",,,,,,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,baohua,ChristopherFerris,mastersingh24,skarim,smithbk,weeds,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Apr/17 10:22 PM;mastersingh24;I don't actually understand the reasoning behind the logic written above.

I believe we want things to work in the following manner:

1) At the CA level, there is a max enrollments setting

2) The CA max enrollments setting has the following possible values:

-1 - no limit on the number of enrollments
0 - no enrollments (although I am not sure what this would be for other than to say that by default users are not able to enroll)
>= 1 - the maximum number of enrollments for a user

3) We have the ability to set per user max enrollments

4) The following policies apply for per user max enrollments:

- if the register user request does not contain max enrollments, the CA max enrollment value should be used 
- if the CA max enrollments is >=1, then the max enrollments for a user must be <= CA max enrollments
- if the CA max enrollments = 0, then it follows that user max enrollments must be 0

Questions / Comments:

1) I'm not sure why one would set CA max enrollments to 0 nor why someone would set user max enrollments to 0.  Do we really need this case?
2) I do not believe that we ""calculate"" the user max enrollments based on CA max enrollments.  We should simply return an error if the user request enrollment is not in line with the CA max enrollments setting, for example:

- if  CA max enrollments >= 1 and user max enrollment > CA max enrollments, return error stating the max enrollment for the CA has been exceeded (we can decide whether or not we should return the actual CA max enrollment value or not)

- if CA max enrollments = 0 and user max enrollments != 0, return an error

3) are we allowing unlimited enrollments per user (it's a nice development setting)?;;;","10/Apr/17 10:59 PM;smithbk;1) A user max enrollment of 0 does not make sense, but a CA max enrollment of 0 simply means we disable enrollment for some period of time, which I think is a valid use case.   For example, an open enrollment period comes to an end.

2) I agree with both of your examples and that is the way that the code should work.  Another use case is as follows:
* If user A is registered with max enrollments of 3 and CA max enrollments is later changed to 2, then the user should be limited to 2 enrollments.
* Continuing the above example, if CA max enrollments is later changed to -1 (unlimited), then user A has max enrollments of 3.

3) Yes, we are allowing max enrollments per user as long as the CA max enrollments is unlimited.;;;","12/Apr/17 1:21 AM;mastersingh24;I think we should make sure that when someone register's a user that the enrollment limits match the CA setting and if not reject the register request.  This keeps things much simpler IMHO rather than allowing people to THINK they registered a user with one value and have another enforced;;;","20/Apr/17 6:54 AM;smithbk;Gari, we do exactly this.  That is, we do reject a register request that does not match the CA setting.  If we do not do this, it is a bug.

But we also want to reject an enrollment request if it exceeds either the per-user max_enrollments setting OR the current CA's max_enrollment settings, where ""current"" means at the time the enroll request is received.;;;","23/Apr/17 4:00 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/7741/;;;","24/May/17 5:00 AM;ChristopherFerris;I'm trying to understand the impact of leaving this post 1.0, if any.;;;","25/May/17 4:39 AM;mastersingh24;The logic is currently flawed and will not work the way users expect.  I don't see any risk in doing this given that what we have does not work correctly anyway;;;","25/May/17 10:37 AM;baohua;Would like to suggest switch the meaning of the enrollment number value between -1 and 0.

The following seems more natural for me :)
0: Infinite number of enrollments (i.e. no limit)
-1: Enrollments disabled globally;;;","26/May/17 7:25 PM;mastersingh24;[~baohua] I've seen things done both ways (which I agree is odd) but I tend to think the current way is the way to go (basically -1 means we are not honoring limits which means unlimited);;;","27/May/17 9:32 AM;baohua;Thanks gari!

I agree, however, still try to post a comment here, to indicate that the configuration semantic  inconsistency between fabric and fabric-ca if we keep unchanged.

e.g., in configtx.yaml, we use 0 means unlimited for the Orderer.MaxChannels.

I guess it would be better if we use the same style in future :);;;","27/May/17 9:33 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/7741/;;;","02/Jun/17 7:06 AM;weeds;any  more votes for this one?

 ;;;","02/Jun/17 9:16 AM;ChristopherFerris;This now has the requisite number of votes and can be merged;;;",,,,,,,
"Fabric-CA uses ""0000-00-00"" as date in the column ""revoked_at"" on enroll ",FABC-179,16474,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,keithsmith,mrshah-ibm,mrshah-ibm,09/May/17 3:36 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,09/May/17 4:11 AM,,,,,,,,,,,,,1,,,,,,"How to reproduce:
 # Start a mysql server
 # Set the fabric-ca to use mysql as its back-end database
 # Start fabric-ca server
 # Use fabric-ca client to enroll a user

Log snippet:
{quote}2017/05/08 15:33:46 [DEBUG] CSR request received
2017/05/08 15:33:46 [INFO] signed certificate with serial number 83832083040004885348960292800618452284244628736
2017/05/08 15:33:46 [DEBUG] DB: Insert Certificate
2017/05/08 15:33:46 [DEBUG] Saved serial number as hex eaf291e13f646515bbf90a9cf13d10ecfee1500
2017/05/08 15:33:46 [ERROR] Failed signing for endpoint enroll: Failed to insert record into database: Error 1292: Incorrect datetime value: '0000-00-00' for column 'revoked_at' at row 1
2017/05/08 15:33:46 [INFO] 172.20.0.1:52678 - ""POST /api/v1/cfssl/enroll"" 0
{quote}
 ",,mrshah-ibm,ptippett,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxu7j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mrshah-ibm,ptippett,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/May/17 3:53 AM;smithbk;See [https://hyperledger-fabric.readthedocs.io/en/latest/Setup/ca-setup.html#mysql-ssl-configuration] which points to https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html

Bottom line is you need to start with this option:

--sql-mode=STRICT_TRANS_TABLES;;;","09/May/17 4:11 AM;mrshah-ibm;[~keithsmith] thanks a lot! it works.;;;",,,,,,,,,,,,,,,,,,
fabric-ca-server should allow config files with any valid filename,FABC-180,15037,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,rennman,rennman,25/Feb/17 4:30 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,16/Mar/17 9:05 PM,,,,,,,,,,,,,0,Usability,,,,,"Currently, fabric-ca-server enforces that the input <filename> passed to the -config arg ends with .json, .yml, or .yaml (there may be others, but I can confirm these)

It will not accept filenames without an extension, nor with extensions it does not recognize.

This does not appear to be a restriction for the fabric-ca-client command.

I propose that the command accept any valid filename, for both consistency and convenience to the user.",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlzz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
fabric-ca ldap attributes that are missing cause error,FABC-181,26670,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,09/Jan/18 6:14 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,20/Jan/18 5:46 AM,,,,,,,v1.1.0,,,,,,0,,,,,,"Even though the comment to (u *user) GetAttribute() indicates
""GetAttribute returns the value of an attribute, or """" if not found""
if actually returns an error if not found.

This is causing the attribute LDAP retrieval to fail in cases where a particular user does not have an attribute defined. However, if the function is changed to return and empty string array, and not an error, things start working again:


{code:java}
@@ -403,7 +403,8 @@ func (u *user) GetAttribute(name string) (*api.Attribute, error) {
                log.Debugf(""Getting attribute '%s' from LDAP user '%s'"", name, u.name)
                vals := u.entry.GetAttributeValues(name)
                if len(vals) == 0 {
-                       return nil, fmt.Errorf(""No value for attribute '%s'"", name)
+                       //return nil, fmt.Errorf(""No value for attribute '%s'"", name)
+                       vals = make([]string,0)
                }
                return &api.Attribute{Name: name, Value: strings.Join(vals, "","")}, nil
        }
@@ -553,7 +554,8 @@ func (ue *userExpr) attrFunction(args ...interface{}) (interface{}, error) {
        vals := ue.user.entry.GetAttributeValues(attrName)
        log.Debugf(""Values for LDAP attribute '%s' are '%+v'"", attrName, vals)
        if len(vals) == 0 {
-               return nil, fmt.Errorf(""No value for attribute '%s'"", attrName)
+               //return nil, fmt.Errorf(""No value for attribute '%s'"", attrName)
+               vals = make([]string,0)
        }
        return strings.Join(vals, sep), nil
 }

{code}",,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzysr3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Jan/18 11:46 PM;skarim;https://gerrit.hyperledger.org/r/#/c/16987/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-server outputs mangled message on startup,FABC-182,20150,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,13/Aug/17 3:51 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,19/Aug/17 7:50 PM,v1.0.1,v1.1.0,,,,,v1.1.0,,,,,,0,,,,,,"fabric-ca-server outputs
{noformat}
Listening on %!s(int=7054)%!(EXTRA string=http://0.0.0.0:7054){noformat}
Should be
{noformat}
Listening on http://0.0.0.0:7054{noformat}",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzycxz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Aug/17 8:13 PM;mastersingh24;[https://gerrit.hyperledger.org/r/#/c/12469/]

 ;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-server.db is written on / in stead of /etc/hyperledger/fabric-ca-server,FABC-183,15126,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,ibmamnt,ibmamnt,01/Mar/17 3:03 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,19/Apr/17 10:27 AM,,,,,,,v1.0.0,,,,,,0,,,,,,"Description:
 The sqlite DB (fabric-ca-server.db) is written on / in stead of FABRIC_CA_HOME=/etc/hyperledger/fabric-ca-server . 

Detail:
When I run exec on fabric-ca-server (ca here) to run ""ls /"" command, I got this.

$ docker-compose exec ca ls /
bin   dev  fabric-ca-server.db	lib    media  opt   root  sbin	sys  usr
boot  etc  home			lib64  mnt    proc  run   srv	tmp  var

This is the listing of ${FABRIC_CA_HOME} is this:
$ docker-compose exec ca ls /etc/hyperledger/fabric-ca-server
ca-cert.pem  ca-key.pem  fabric-ca-server-config.yaml

Impact:
Can not backup the DB, since it is impossible to mount ""/"" from local file system.

Expected Fix:
Store the DB to $(FABRIC_CA_HOME}
",,aambati,ibmamnt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmef:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,ibmamnt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Mar/17 9:33 PM;aambati;I think this is a duplicate of FAB-2502. This was fixed on March 09. [~amnt] can you please try with latest code, it should be fixed;;;",,,,,,,,,,,,,,,,,,,
Maintain Backwards Compatibility of Newly Added Attributes,FABC-184,22455,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,17/Oct/17 10:45 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,08/Dec/17 9:07 PM,v1.1.0,,,,,,v1.1.0,,,,,,0,,,,,,"Need to make sure that backwards compatibility is maintained for identities, if any new attributes are added that affect current functionality. An example of this is the newly introduced 'hf.Registrar.Attributes' attribute that defines what attributes a registrar is allowed to register for a new identity. If the registrar does not have this attribute they will not be allowed to register an identity that is requesting attributes. Currently, registrar identities won't possess this newly added 'hf.Registrar.Attribute' attribute and will start to break when they try to register new identities.

*Proposal:*

Introduce versions on both the server configuration file and the database. During server startup, the version of the configuration file and database will be examined. If an older version is being used, actions will be taken on the identities to add any newly introduced attributes as appropriate. After a successful update, the version of the configuration file and database will be updated to the current version. ",,Nishi,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyjun:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Nishi,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Oct/17 8:04 AM;skarim;https://gerrit.hyperledger.org/r/#/c/14933/
https://gerrit.hyperledger.org/r/#/c/14935/;;;",,,,,,,,,,,,,,,,,,,
Update Fabric-Samples for CA,FABC-185,27850,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,bmos299,bmos299,20/Feb/18 6:34 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,23/Feb/18 2:17 AM,v1.1.0,,,,,,v1.1.1,,,,,,0,Security,,,,,"Working in the fabric-samples repository I can see the the fabric-ca the following example:

/master/fabric-ca/scripts/run-fabric.sh
 # Revoke the user and generate CRL using admin's credentials
 revokeFabricUser|
 generateCRL

With fabric-ca 1.1 we can combine the underlying calls (fabric-ca-client revoke and fabric-ca-client fabric-ca-client gencrl) into one where we do the revoke and generate crl.  I think it would be good to show both in the underlying env.sh script, maybe even one of them as a comment.  The reason is as I went through it I thought, 'wow I wish the revoke generated the crl'.  Allen then told me it does in 1.1.  On the other hand, it is great to see samples of both calls in env.sh.

Let me know and we can talk about it.

Thanks,

Barry",,bmos299,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyy4v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,skarim,,,,,,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Feb/18 5:19 AM;skarim;https://gerrit.hyperledger.org/r/#/c/18155/;;;",,,,,,,,,,,,,,,,,,,
Incorrect attribute name in error message when attribute given during enroll found missing during registration,FABC-186,22602,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,Nishi,Nishi,20/Oct/17 2:06 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,20/Oct/17 5:18 AM,v1.0.3,,,,,,,,,,,,0,quality,,,,,"Used balance-transfer node sample program under github.com/hyperledger/fabric-samples/balance-transfer to test attributes:

Steps to Reproduce:

--------------------------

In github.com/hyperledger/fabric-samples/balance-transfer/app/helper.js

1. Have following attributes were defined during client registration:
{code:java}
attrs: [
{name: 'hf.Registrar.Roles', value: 'client'},
{name:'ibm',value:'raleigh', ecert:true},
{name:'test1attr',value:'1234', ecert:true},
{name:'test3attr',value:'0000', ecert:true}
]{code}
 

2. During enrollment had the following attributes:
{code:java}
attr_reqs: [
{name:'ibm', optional:false},
{name:'test1attr', optional:false},
{name:'test2attr', optional:false}
] {code}
 

3. Launch network from github.com/hyperledger/fabric-samples/balance-transfer/ ./runApp.sh

4. Test API from github.com/hyperledger/fabric-samples/balance-transfer ./testAPIs.sh

 

Expected Result: 

Error: chaincode error (status: 500, message: Attribute 'test2attr' was not found)

 

Actual Result:

Error: chaincode error (status: 500, message: Attribute 'ibm' was not found)",,aambati,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Oct/17 2:16 AM;Nishi;ca1.log;https://jira.hyperledger.org/secure/attachment/12600/ca1.log",,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyk9z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Oct/17 5:20 AM;aambati;this is working as expected. Looking at the test case, I see that enrollment fails, so trying to access any attributes in the chaincode is going to fail. Nishi needs to modify the test case so enrollment succeeds before invoking the chaincode.;;;",,,,,,,,,,,,,,,,,,,
Simultaneous enroll calls to CA with same identity gives auth failure,FABC-187,17714,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,dbshah,dbshah,10/Jun/17 6:21 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,12/Jun/17 12:43 AM,v1.0.0-beta,,,,,,v1.0.0,v1.0.0-rc1,,,,,0,,,,,,"I understand that most of people won't have this usecase, but making same call to the ca-server for enrolling same identity gives auth failure.

 

server logs:

```

 Subject:<nil> Profile: CRLOverride: Label: Serial:<nil> Extensions:[]} CAName:OrdererCA}

2017/06/09 21:19:46 [DEBUG] CSR request received

2017/06/09 21:19:46 [INFO] signed certificate with serial number 647958746413884118987967127947150263520187116627

2017/06/09 21:19:46 [DEBUG] DB: Insert Certificate

2017/06/09 21:19:46 [DEBUG] Saved serial number as hex 717f799ef0437d70c17287653c34b65ce6bfec53

2017/06/09 21:19:46 [DEBUG] DB: Login user adminOrderer with max enrollments of -1 and state of 29

2017/06/09 21:19:46 [DEBUG] Failed to login 'adminOrderer': No rows were affected when updating the state of identity adminOrderer

2017/06/09 21:19:46 [DEBUG] DB: Login user adminOrderer with max enrollments of -1 and state of 29

2017/06/09 21:19:46 [DEBUG] saved certificate with serial number 647958746413884118987967127947150263520187116627

2017/06/09 21:19:46 [INFO] 172.21.0.16:35696 - ""POST /enroll"" 200

2017/06/09 21:19:46 [DEBUG] Successfully incremented state for identity adminOrderer to 30

2017/06/09 21:19:46 [DEBUG] DB: identity adminOrderer successfully logged in

2017/06/09 21:19:46 [DEBUG] Identity/Pass was correct

2017/06/09 21:19:46 [DEBUG] Received request for endpoint enroll

2017/06/09 21:19:46 [DEBUG] Enrollment request: \{SignRequest:\{Hosts:[orderer-0a] Request:-----BEGIN CERTIFICATE REQUEST-----

MIIBRjCB7gIBADBkMQswCQYDVQQGEwJVUzEXMBUGA1UECBMOTm9ydGggQ2Fyb2xp

bmExFDASBgNVBAoTC0h5cGVybGVkZ2VyMQ8wDQYDVQQLEwZGYWJyaWMxFTATBgNV

BAMTDGFkbWluT3JkZXJlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABGQ8s0Tc

UWc+vYmY/jJDPDDGWIz3CIQF4zdqf3onl4WsslE7cvDJkB8wIUBy5uigaUcDSO/D

g8UtFxsdMlqhiWGgKDAmBgkqhkiG9w0BCQ4xGTAXMBUGA1UdEQQOMAyCCm9yZGVy

ZXItMGEwCgYIKoZIzj0EAwIDRwAwRAIgBy7TZqLpHSZ/vPqSTCCO0s8giwfoEDHF

THzQmoDv42gCIGYTgwxmeKMUlIvvdfkgcsOWgBSEjWALFhpDKYE/cqWH

-----END CERTIFICATE REQUEST-----

 Subject:<nil> Profile: CRLOverride: Label: Serial:<nil> Extensions:[]} CAName:OrdererCA}

2017/06/09 21:19:46 [DEBUG] CSR request received

2017/06/09 21:19:46 [INFO] signed certificate with serial number 43592689707977878056505920289569209744596843305

2017/06/09 21:19:46 [DEBUG] DB: Insert Certificate

2017/06/09 21:19:46 [DEBUG] Saved serial number as hex 7a2c38938e1961a8a3bbb49bf25ed7e1546bb29

2017/06/09 21:19:46 [DEBUG] Failed to login 'adminOrderer': No rows were affected when updating the state of identity adminOrderer

2017/06/09 21:19:47 [DEBUG] saved certificate with serial number 43592689707977878056505920289569209744596843305

2017/06/09 21:19:47 [INFO] 172.21.0.16:35698 - ""POST /enroll"" 200

```

 

client logs:

```

2017/06/09 21:19:46 [INFO] User provided config file: /root/.fabric-ca-client/fabric-ca-client-config.yaml

2017/06/09 21:19:46 [INFO] generating key: &\{A:ecdsa S:256}

2017/06/09 21:19:46 [INFO] User provided config file: /root/.fabric-ca-client/fabric-ca-client-config.yaml

2017/06/09 21:19:46 [INFO] generating key: &\{A:ecdsa S:256}

2017/06/09 21:19:46 [INFO] User provided config file: /root/.fabric-ca-client/fabric-ca-client-config.yaml

2017/06/09 21:19:46 [INFO] User provided config file: /root/.fabric-ca-client/fabric-ca-client-config.yaml

2017/06/09 21:19:46 [INFO] generating key: &\{A:ecdsa S:256}

2017/06/09 21:19:46 [INFO] generating key: &\{A:ecdsa S:256}

2017/06/09 21:19:46 [INFO] encoded CSR

2017/06/09 21:19:46 [INFO] TLS Enabled

2017/06/09 21:19:46 [INFO] encoded CSR

2017/06/09 21:19:46 [INFO] TLS Enabled

2017/06/09 21:19:46 [INFO] encoded CSR

2017/06/09 21:19:46 [INFO] TLS Enabled

2017/06/09 21:19:46 [INFO] encoded CSR

2017/06/09 21:19:46 [INFO] TLS Enabled

Error: Error response from server was: Authorization failure

2017/06/09 21:19:46 [INFO] Stored client certificate at /root/.fabric-ca-client/msp/signcerts/cert.pem

2017/06/09 21:19:46 [INFO] Stored CA certificate chain at /root/.fabric-ca-client/msp/cacerts/fabric-ca-0a-net_blockchain-com-7054-OrdererCA.pem

Error: Error response from server was: Authorization failure

```

 

Note: we are using mysql as database.

 

The error should not be auth failure.

 ",,dbshah,mastersingh24,,,,,,,,,,,,,,,,,,,";11/Jun/17 7:40 AM;mastersingh24;14400",";12/Jun/17 1:04 AM;mastersingh24;3600",28800,0,18000,62%,28800,0,18000,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxzyf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dbshah,mastersingh24,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jun/17 6:44 AM;mastersingh24;Not quite sure understand exactly what you are doing here.  Are you trying to run fabric-ca-client in parallel with the same config?
[~dbshah];;;","10/Jun/17 4:00 PM;dbshah;I am running this command:

 

fabric-ca-client enroll -u https://adminOrderer:adminOrdererpw@fabric-ca-0a.net_blockchain.com:7054 --caname OrdererCA& 

fabric-ca-client enroll -u https://adminOrderer:adminOrdererpw@fabric-ca-0a.net_blockchain.com:7054 --caname OrdererCA

 

To make simultaneous enroll call to CA. So the second call happens before the server has replied on the first one.;;;","10/Jun/17 9:29 PM;mastersingh24;Assigning to myself to take a look;;;","11/Jun/17 3:21 AM;mastersingh24;So this issue is actually a bit more interesting than it seems at first glance.  If you use sqlite as the database, it's actually possible to enroll at least 1 more time than max enrollments if you submit two enroll requests at just the right time (you can basically use the same commands as in the comment above from [~dbshah].

It looks like in the case of MySQL that attempting to make the exact same update to a row is fine but does not result in the row actually changing.  So it turns out that it's actually the desired result else you would have 2 successful enrollments but the enrollment count would only be incremented by 1.

But need to look more into what we should do if anything in the near term;;;","11/Jun/17 7:28 AM;mastersingh24;While we could try transactions and locks, looks like adjust the SQL to

{code}
UPDATE users SET state = state + 1 WHERE (id = ? AND state < ?)
{code}

will do the trick.  It will allow concurrent updates since it does state = state + 1 while at the same time still honoring max enrollments;;;","11/Jun/17 8:48 PM;mastersingh24;http://gerrit.hyperledger.org/r/10453;;;","12/Jun/17 1:04 AM;mastersingh24;[~dbshah] - we should have a release candidate later this week which will include this fix (but feel free to pull it down and give it a try as well);;;",,,,,,,,,,,,,
Register call fails with fabric-ca using mysql as database,FABC-188,18257,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,mastersingh24,dbshah,dbshah,17/Jun/17 5:47 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,19/Jun/17 12:03 AM,,,,,,,v1.0.0,,,,,,0,HSBN,,,,,"Client:

=======================================================

fabric-ca-client enroll -u http://adminOrderer:adminOrdererpw@fabric-ca-0a.net_blockchain.com:7054 --caname OrdererCA -d

 

2017/06/16 20:45:01 [INFO] User provided config file: /mnt/crypto/orderer/orderer-0a/fabric-ca-client-config.yaml

2017/06/16 20:45:01 [DEBUG] Client configuration settings: &\{Debug:true URL:http://adminOrderer:adminOrdererpw@fabric-ca-0a.net_blockchain.com:7054 MSPDir:msp TLS:\{Enabled:false CertFiles:[] Client:\{KeyFile: CertFile:}} Enrollment:\{Name: Secret: Profile: Label: CSR:<nil> CAName:} CSR:\{CN:adminOrderer Names:[\{C:US ST:North Carolina L: O:Hyperledger OU:Fabric SerialNumber:}] Hosts:[orderer-0a] KeyRequest:<nil> CA:<nil> SerialNumber:} ID:\{Name: Type: Secret: MaxEnrollments:-1 Affiliation: Attributes:[\{Name: Value:}] CAName:} Revoke:\{Name: Serial: AKI: Reason: CAName:} CAInfo:\{CAName:} CAName:OrdererCA CSP:0xc4201f67c0}

2017/06/16 20:45:01 [DEBUG] Entered runEnroll

2017/06/16 20:45:01 [DEBUG] Enrolling &\{Name:adminOrderer Secret:adminOrdererpw Profile: Label: CSR:0xc4201ac300 CAName:OrdererCA}

2017/06/16 20:45:01 [DEBUG] Initializing BCCSP: &\{ProviderName:SW SwOpts:0xc4201eec30 Pkcs11Opts:<nil>}

2017/06/16 20:45:01 [DEBUG] Initializing BCCSP with software options &\{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:0xc4201fa430 DummyKeystore:<nil>}

2017/06/16 20:45:01 [DEBUG] GenCSR &\{CN:adminOrderer Names:[\{C:US ST:North Carolina L: O:Hyperledger OU:Fabric SerialNumber:}] Hosts:[orderer-0a] KeyRequest:<nil> CA:<nil> SerialNumber:}

2017/06/16 20:45:01 [INFO] generating key: &\{A:ecdsa S:256}

2017/06/16 20:45:01 [DEBUG] generate key from request: algo=ecdsa, size=256

2017/06/16 20:45:01 [INFO] encoded CSR

2017/06/16 20:45:01 [DEBUG] Sending request

POST http://fabric-ca-0a.net_blockchain.com:7054/enroll

Authorization: Basic YWRtaW5PcmRlcmVyOmFkbWluT3JkZXJlcnB3

\{""hosts"":[""orderer-0a""],""certificate_request"":""-----BEGIN CERTIFICATE REQUEST-----\nMIIBRjCB7gIBADBkMQswCQYDVQQGEwJVUzEXMBUGA1UECBMOTm9ydGggQ2Fyb2xp\nbmExFDASBgNVBAoTC0h5cGVybGVkZ2VyMQ8wDQYDVQQLEwZGYWJyaWMxFTATBgNV\nBAMTDGFkbWluT3JkZXJlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABNquOsid\nLn8GS2eYMnlmblNl9jt1SvyQPkxVSodPCCItp2QM0VeohxYTzBMmnuY73CHQOlFl\nnzI4RgM5zp7MD6CgKDAmBgkqhkiG9w0BCQ4xGTAXMBUGA1UdEQQOMAyCCm9yZGVy\nZXItMGEwCgYIKoZIzj0EAwIDRwAwRAIgCnnwrsl7wCq4YBh8KsM3PFTvmy/M6GkY\nmgblcCoEsd0CICF5B8aReavqxH7SjF6He7z0uVEavVliEphd+hdVk2mo\n-----END CERTIFICATE REQUEST-----\n"",""profile"":"""",""crl_override"":"""",""label"":"""",""CAName"":""OrdererCA""}

2017/06/16 20:45:01 [DEBUG] Received response

statusCode=200 (200 OK)

2017/06/16 20:45:01 [DEBUG] Response body result: map[Cert:LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNSRENDQWVxZ0F3SUJBZ0lVY0szV2xLdlBzbjZEbGEwUUtTR3FwRm1QdGZFd0NnWUlLb1pJemowRUF3SXcKWnpFTE1Ba0dBMVVFQmhNQ1ZWTXhGekFWQmdOVkJBZ1REazV2Y25Sb0lFTmhjbTlzYVc1aE1SUXdFZ1lEVlFRSwpFd3RJZVhCbGNteGxaR2RsY2pFUE1BMEdBMVVFQ3hNR1JtRmljbWxqTVJnd0ZnWURWUVFERXc5aFpHMXBiazl5ClpHVnlaWEpEUVRFd0hoY05NVGN3TmpFMk1qQTBNREF3V2hjTk1UZ3dOakUyTWpBME1EQXdXakJrTVFzd0NRWUQKVlFRR0V3SlZVekVYTUJVR0ExVUVDQk1PVG05eWRHZ2dRMkZ5YjJ4cGJtRXhGREFTQmdOVkJBb1RDMGg1Y0dWeQpiR1ZrWjJWeU1ROHdEUVlEVlFRTEV3WkdZV0p5YVdNeEZUQVRCZ05WQkFNVERHRmtiV2x1VDNKa1pYSmxjakJaCk1CTUdCeXFHU000OUFnRUdDQ3FHU000OUF3RUhBMElBQk5xdU9zaWRMbjhHUzJlWU1ubG1ibE5sOWp0MVN2eVEKUGt4VlNvZFBDQ0l0cDJRTTBWZW9oeFlUekJNbW51WTczQ0hRT2xGbG56STRSZ001enA3TUQ2Q2pkekIxTUE0RwpBMVVkRHdFQi93UUVBd0lDQkRBTUJnTlZIUk1CQWY4RUFqQUFNQjBHQTFVZERnUVdCQlJzKzAvTG1ZSWIzcEUrCkxpWlZXNFlLWkFZa3RUQWZCZ05WSFNNRUdEQVdnQlJZNFErb0Z6aUhYZUk5OUlYWnVOckNvcEhaUERBVkJnTlYKSFJFRURqQU1nZ3B2Y21SbGNtVnlMVEJoTUFvR0NDcUdTTTQ5QkFNQ0EwZ0FNRVVDSVFEQWNUQnR1Zkk3eEUwRwpKL2l1eTRsaVQzcENCNkZkbFUzZCtLd3lrM2h5WGdJZ0sreGdYZ1Z6MWZZelV0WURGSHlRbFByeUFSU1pzSkZTCllENTNnSlEyemcwPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg== ServerInfo:map[CAName:OrdererCA CAChain:LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNCVENDQWF5Z0F3SUJBZ0lVTXF5YjVNRExMOEtyZWNkVHBlZlAwQVFYNWpnd0NnWUlLb1pJemowRUF3SXcKWVRFTE1Ba0dBMVVFQmhNQ1ZWTXhGekFWQmdOVkJBZ1REazV2Y25Sb0lFTmhjbTlzYVc1aE1SUXdFZ1lEVlFRSwpFd3RJZVhCbGNteGxaR2RsY2pFUE1BMEdBMVVFQ3hNR1JtRmljbWxqTVJJd0VBWURWUVFERXdsUGNtUmxjbVZ5ClEwRXdIaGNOTVRjd05qRTJNakF6TXpBd1doY05Nekl3TmpFeU1qQXpNekF3V2pCaE1Rc3dDUVlEVlFRR0V3SlYKVXpFWE1CVUdBMVVFQ0JNT1RtOXlkR2dnUTJGeWIyeHBibUV4RkRBU0JnTlZCQW9UQzBoNWNHVnliR1ZrWjJWeQpNUTh3RFFZRFZRUUxFd1pHWVdKeWFXTXhFakFRQmdOVkJBTVRDVTl5WkdWeVpYSkRRVEJaTUJNR0J5cUdTTTQ5CkFnRUdDQ3FHU000OUF3RUhBMElBQkx5OHNhRkdyeWFnNFFJRjRQUjlUaU1BYTd3TVFuOTlBcHhqV1NqQWh4MVAKTmtRS0lVeFRTVFhBLzhPWEtsMlh5WEZpZUY2aWU2cnJrS3psTHlNbGpvbWpRakJBTUE0R0ExVWREd0VCL3dRRQpBd0lCQmpBUEJnTlZIUk1CQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJSTG5TUVVQaG5sNm9qckpZZTFWc0tICjFkOTJ4REFLQmdncWhrak9QUVFEQWdOSEFEQkVBaUE3YzNkQkF6U3VWcm5QbG4xeC9Yci96VkFwZUhGeStGVVkKZzVmZjJYWmtFd0lnQ0FjNUNJcm9WcjJyTit5ZFkwamhBblhXd2dJOVgvVWdGSFMwa2hzbHVBbz0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQotLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS0KTUlJQ0xUQ0NBZE9nQXdJQkFnSVVGNWsrMVdwcDdDL0FsR2kzQmlKcW1YSnhJV1V3Q2dZSUtvWkl6ajBFQXdJdwpZVEVMTUFrR0ExVUVCaE1DVlZNeEZ6QVZCZ05WQkFnVERrNXZjblJvSUVOaGNtOXNhVzVoTVJRd0VnWURWUVFLCkV3dEllWEJsY214bFpHZGxjakVQTUEwR0ExVUVDeE1HUm1GaWNtbGpNUkl3RUFZRFZRUURFd2xQY21SbGNtVnkKUTBFd0hoY05NVGN3TmpFMk1qQXpNekF3V2hjTk1qSXdOakUxTWpBek16QXdXakJuTVFzd0NRWURWUVFHRXdKVgpVekVYTUJVR0ExVUVDQk1PVG05eWRHZ2dRMkZ5YjJ4cGJtRXhGREFTQmdOVkJBb1RDMGg1Y0dWeWJHVmtaMlZ5Ck1ROHdEUVlEVlFRTEV3WkdZV0p5YVdNeEdEQVdCZ05WQkFNVEQyRmtiV2x1VDNKa1pYSmxja05CTVRCWk1CTUcKQnlxR1NNNDlBZ0VHQ0NxR1NNNDlBd0VIQTBJQUJEaHAwWUFib1g5d040Z0kyV1hMRnpGVmN3ZlFRdm1PUDJEdwpab1RsRWR6emJEeDZrdDh2MmZpeEdiQ3pvU0Y4a214d0J3V3A5R3BZNWUycGtDSE5MT1NqWXpCaE1BNEdBMVVkCkR3RUIvd1FFQXdJQ0JEQVBCZ05WSFJNQkFmOEVCVEFEQVFIL01CMEdBMVVkRGdRV0JCUlk0UStvRnppSFhlSTkKOUlYWnVOckNvcEhaUERBZkJnTlZIU01FR0RBV2dCUkxuU1FVUGhubDZvanJKWWUxVnNLSDFkOTJ4REFLQmdncQpoa2pPUFFRREFnTklBREJGQWlFQWhEZUI3MHBidGhrNFlxbDlta2F3cTk0T0xndXNBMEJPTjIyVHgxYXFqMWNDCklFUU1XWFlzb21Ma3lMd05VN2s3eGFSdHYxQ3o3cHB6cXdpTWRWZHJJMHNkCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K]]

2017/06/16 20:45:01 [DEBUG] newEnrollmentResponse adminOrderer

2017/06/16 20:45:01 [INFO] Stored client certificate at /mnt/crypto/orderer/orderer-0a/msp/signcerts/cert.pem

2017/06/16 20:45:01 [INFO] Stored CA certificate chain at /mnt/crypto/orderer/orderer-0a/msp/cacerts/fabric-ca-0a-net_blockchain-com-7054-OrdererCA.pem

 

fabric-ca-client register --id.name orderer0a --id.affiliation org1 --id.secret orderer0apw --id.type orderer --caname OrdererCA -d

 

 

2017/06/16 20:45:01 [INFO] User provided config file: /mnt/crypto/orderer/orderer-0a/fabric-ca-client-config.yaml

2017/06/16 20:45:01 [DEBUG] Checking for enrollment

2017/06/16 20:45:01 [DEBUG] Initializing BCCSP: &\{ProviderName:SW SwOpts:0xc4201887e0 Pkcs11Opts:<nil>}

2017/06/16 20:45:01 [DEBUG] Initializing BCCSP with software options &\{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:0xc42018bdb0 DummyKeystore:<nil>}

2017/06/16 20:45:01 [INFO] Configuration file location: /mnt/crypto/orderer/orderer-0a/fabric-ca-client-config.yaml

2017/06/16 20:45:01 [DEBUG] Client configuration settings: &\{Debug:true URL:http://fabric-ca-0a.net_blockchain.com:7054 MSPDir:/mnt/crypto/orderer/orderer-0a/msp TLS:\{Enabled:false CertFiles:[] Client:\{KeyFile: CertFile:}} Enrollment:\{Name: Secret: Profile: Label: CSR:<nil> CAName:} CSR:\{CN:adminOrderer Names:[\{C:US ST:North Carolina L: O:Hyperledger OU:Fabric SerialNumber:}] Hosts:[orderer-0a] KeyRequest:<nil> CA:<nil> SerialNumber:} ID:\{Name:orderer0a Type:orderer Secret:orderer0apw MaxEnrollments:-1 Affiliation:org1 Attributes:[\{Name: Value:}] CAName:} Revoke:\{Name: Serial: AKI: Reason: CAName:} CAInfo:\{CAName:} CAName:OrdererCA CSP:0xc420285960}

2017/06/16 20:45:01 [DEBUG] Entered Register

2017/06/16 20:45:01 [DEBUG] Initializing BCCSP: &\{ProviderName:SW SwOpts:0xc420283530 Pkcs11Opts:<nil>}

2017/06/16 20:45:01 [DEBUG] Initializing BCCSP with software options &\{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:0xc42028fdb0 DummyKeystore:<nil>}

2017/06/16 20:45:01 [DEBUG] Register &\{Name:orderer0a Type:orderer Secret:orderer0apw MaxEnrollments:-1 Affiliation:org1 Attributes:[\{Name: Value:}] CAName:OrdererCA}

2017/06/16 20:45:01 [DEBUG] adding token-based authorization header

2017/06/16 20:45:01 [DEBUG] Sending request

POST http://fabric-ca-0a.net_blockchain.com:7054/register

Authorization: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNSRENDQWVxZ0F3SUJBZ0lVY0szV2xLdlBzbjZEbGEwUUtTR3FwRm1QdGZFd0NnWUlLb1pJemowRUF3SXcKWnpFTE1Ba0dBMVVFQmhNQ1ZWTXhGekFWQmdOVkJBZ1REazV2Y25Sb0lFTmhjbTlzYVc1aE1SUXdFZ1lEVlFRSwpFd3RJZVhCbGNteGxaR2RsY2pFUE1BMEdBMVVFQ3hNR1JtRmljbWxqTVJnd0ZnWURWUVFERXc5aFpHMXBiazl5ClpHVnlaWEpEUVRFd0hoY05NVGN3TmpFMk1qQTBNREF3V2hjTk1UZ3dOakUyTWpBME1EQXdXakJrTVFzd0NRWUQKVlFRR0V3SlZVekVYTUJVR0ExVUVDQk1PVG05eWRHZ2dRMkZ5YjJ4cGJtRXhGREFTQmdOVkJBb1RDMGg1Y0dWeQpiR1ZrWjJWeU1ROHdEUVlEVlFRTEV3WkdZV0p5YVdNeEZUQVRCZ05WQkFNVERHRmtiV2x1VDNKa1pYSmxjakJaCk1CTUdCeXFHU000OUFnRUdDQ3FHU000OUF3RUhBMElBQk5xdU9zaWRMbjhHUzJlWU1ubG1ibE5sOWp0MVN2eVEKUGt4VlNvZFBDQ0l0cDJRTTBWZW9oeFlUekJNbW51WTczQ0hRT2xGbG56STRSZ001enA3TUQ2Q2pkekIxTUE0RwpBMVVkRHdFQi93UUVBd0lDQkRBTUJnTlZIUk1CQWY4RUFqQUFNQjBHQTFVZERnUVdCQlJzKzAvTG1ZSWIzcEUrCkxpWlZXNFlLWkFZa3RUQWZCZ05WSFNNRUdEQVdnQlJZNFErb0Z6aUhYZUk5OUlYWnVOckNvcEhaUERBVkJnTlYKSFJFRURqQU1nZ3B2Y21SbGNtVnlMVEJoTUFvR0NDcUdTTTQ5QkFNQ0EwZ0FNRVVDSVFEQWNUQnR1Zkk3eEUwRwpKL2l1eTRsaVQzcENCNkZkbFUzZCtLd3lrM2h5WGdJZ0sreGdYZ1Z6MWZZelV0WURGSHlRbFByeUFSU1pzSkZTCllENTNnSlEyemcwPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==.MEQCIB3FRiBWqQcL0JTvepgcabVL25iC/Px8WraAnogiO20lAiAtLl6crlvHnKbKX0VN8fmTIB+60fM8f4sOdbxMIw747Q==

\{""id"":""orderer0a"",""type"":""orderer"",""secret"":""orderer0apw"",""max_enrollments"":-1,""affiliation"":""org1"",""attrs"":[\{""name"":"""",""value"":""""}],""caname"":""OrdererCA""}

 

=======================================================

 

Server:

=======================================================

2017/06/16 20:47:13 [DEBUG] Received request

POST /enroll

Authorization: Basic YWRtaW5PcmRlcmVyOmFkbWluT3JkZXJlcnB3

\{""hosts"":[""orderer-0a""],""certificate_request"":""-----BEGIN CERTIFICATE REQUEST-----\nMIIBRzCB7gIBADBkMQswCQYDVQQGEwJVUzEXMBUGA1UECBMOTm9ydGggQ2Fyb2xp\nbmExFDASBgNVBAoTC0h5cGVybGVkZ2VyMQ8wDQYDVQQLEwZGYWJyaWMxFTATBgNV\nBAMTDGFkbWluT3JkZXJlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABHwl9avB\nzXEINd6fFTrayXF0EC158VBhLBXOHIni1fqZXDEf4QL9h0XsA/thw3JAUuLW87dq\nDFVeg5rmqWmSK4SgKDAmBgkqhkiG9w0BCQ4xGTAXMBUGA1UdEQQOMAyCCm9yZGVy\nZXItMGEwCgYIKoZIzj0EAwIDSAAwRQIhAKeodzIgVqB6SEf6pWWecKEVNnMKaKat\nnpe2mP5GO+SIAiBduCeWRX5pKx0+QBBVas2HA88ww5lEowpe5xdafejjWQ==\n-----END CERTIFICATE REQUEST-----\n"",""profile"":"""",""crl_override"":"""",""label"":"""",""CAName"":""OrdererCA""}

2017/06/16 20:47:13 [DEBUG] Directing traffic to CA OrdererCA

2017/06/16 20:47:13 [DEBUG] DB: Getting identity adminOrderer

2017/06/16 20:47:13 [DEBUG] DB: Login user adminOrderer with max enrollments of -1 and state of 4

2017/06/16 20:47:14 [DEBUG] Successfully incremented state for identity adminOrderer to 5

2017/06/16 20:47:14 [DEBUG] DB: identity adminOrderer successfully logged in

2017/06/16 20:47:14 [DEBUG] Identity/Pass was correct

2017/06/16 20:47:14 [DEBUG] Received request for endpoint enroll

2017/06/16 20:47:14 [DEBUG] Enrollment request: \{SignRequest:\{Hosts:[orderer-0a] Request:-----BEGIN CERTIFICATE REQUEST-----

MIIBRzCB7gIBADBkMQswCQYDVQQGEwJVUzEXMBUGA1UECBMOTm9ydGggQ2Fyb2xp

bmExFDASBgNVBAoTC0h5cGVybGVkZ2VyMQ8wDQYDVQQLEwZGYWJyaWMxFTATBgNV

BAMTDGFkbWluT3JkZXJlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABHwl9avB

zXEINd6fFTrayXF0EC158VBhLBXOHIni1fqZXDEf4QL9h0XsA/thw3JAUuLW87dq

DFVeg5rmqWmSK4SgKDAmBgkqhkiG9w0BCQ4xGTAXMBUGA1UdEQQOMAyCCm9yZGVy

ZXItMGEwCgYIKoZIzj0EAwIDSAAwRQIhAKeodzIgVqB6SEf6pWWecKEVNnMKaKat

npe2mP5GO+SIAiBduCeWRX5pKx0+QBBVas2HA88ww5lEowpe5xdafejjWQ==

-----END CERTIFICATE REQUEST-----

 Subject:<nil> Profile: CRLOverride: Label: Serial:<nil> Extensions:[]} CAName:OrdererCA}

2017/06/16 20:47:14 [DEBUG] csrAuthCheck: enrollment ID=adminOrderer, CommonName=adminOrderer, Subject=<nil>

2017/06/16 20:47:14 [DEBUG] CSR request received

2017/06/16 20:47:14 [INFO] signed certificate with serial number 401706665009437592003288932645069929865240717643

2017/06/16 20:47:14 [DEBUG] DB: Insert Certificate

2017/06/16 20:47:14 [DEBUG] Saved serial number as hex 465d265c8400cffa5fd3fc032ef9bbbc9e51294b

2017/06/16 20:47:14 [DEBUG] saved certificate with serial number 401706665009437592003288932645069929865240717643

2017/06/16 20:47:14 [INFO] 172.21.0.14:47316 - ""POST /enroll"" 200

2017/06/16 20:47:14 [DEBUG] Received request

POST /register

Authorization: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNRekNDQWVxZ0F3SUJBZ0lVUmwwbVhJUUF6L3BmMC93REx2bTd2SjVSS1Vzd0NnWUlLb1pJemowRUF3SXcKWnpFTE1Ba0dBMVVFQmhNQ1ZWTXhGekFWQmdOVkJBZ1REazV2Y25Sb0lFTmhjbTlzYVc1aE1SUXdFZ1lEVlFRSwpFd3RJZVhCbGNteGxaR2RsY2pFUE1BMEdBMVVFQ3hNR1JtRmljbWxqTVJnd0ZnWURWUVFERXc5aFpHMXBiazl5ClpHVnlaWEpEUVRFd0hoY05NVGN3TmpFMk1qQTBNakF3V2hjTk1UZ3dOakUyTWpBME1qQXdXakJrTVFzd0NRWUQKVlFRR0V3SlZVekVYTUJVR0ExVUVDQk1PVG05eWRHZ2dRMkZ5YjJ4cGJtRXhGREFTQmdOVkJBb1RDMGg1Y0dWeQpiR1ZrWjJWeU1ROHdEUVlEVlFRTEV3WkdZV0p5YVdNeEZUQVRCZ05WQkFNVERHRmtiV2x1VDNKa1pYSmxjakJaCk1CTUdCeXFHU000OUFnRUdDQ3FHU000OUF3RUhBMElBQkh3bDlhdkJ6WEVJTmQ2ZkZUcmF5WEYwRUMxNThWQmgKTEJYT0hJbmkxZnFaWERFZjRRTDloMFhzQS90aHczSkFVdUxXODdkcURGVmVnNXJtcVdtU0s0U2pkekIxTUE0RwpBMVVkRHdFQi93UUVBd0lDQkRBTUJnTlZIUk1CQWY4RUFqQUFNQjBHQTFVZERnUVdCQlNNUTI1WGxDb0FqY0F4CnFkd2hUajUvM2QrTmx6QWZCZ05WSFNNRUdEQVdnQlJZNFErb0Z6aUhYZUk5OUlYWnVOckNvcEhaUERBVkJnTlYKSFJFRURqQU1nZ3B2Y21SbGNtVnlMVEJoTUFvR0NDcUdTTTQ5QkFNQ0EwY0FNRVFDSUZOWkg2Tm1jRWNEcWxGeAo4ZzhienU1bTZsb1BnaEh5NFFDeDlockFsallaQWlBZzZDdHpXU1dxdktycFppMGdtZnFLTnNZc2Q0TnlXMCtwCk00UW4vT1p2TFE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==.MEQCIERznRgdgOQWW1/190AkTXmTokCZtFRaxEdaRHYBVxE9AiBhy3p89ilT5vVv12lxAutcZ6VCF64B7FZ+vXjCmpNgjw==

\{""id"":""orderer0a"",""type"":""orderer"",""secret"":""orderer0apw"",""max_enrollments"":-1,""affiliation"":""org1"",""attrs"":[\{""name"":"""",""value"":""""}],""caname"":""OrdererCA""}

2017/06/16 20:47:14 [DEBUG] Directing traffic to CA OrdererCA

 

(gets stuck here)=======================================================",,dbshah,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy4kf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dbshah,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Jun/17 5:52 AM;dbshah;Using: rc1-snapshot-5180ce7 ;;;","17/Jun/17 9:30 PM;mastersingh24;[~dbshah] Did you happen to set the parseTime parameter in the connection string for mysql per https://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#mysql ?;;;","17/Jun/17 9:56 PM;mastersingh24;Looks like https://gerrit.hyperledger.org/r/#/c/10705/  should solve this

[~dbshah] if you can pull down the latest and try again that would be great;;;","19/Jun/17 12:02 AM;dbshah;Yup, with the fix in 10705, this looks to be solved. Thanks, closing this.;;;",,,,,,,,,,,,,,,,
fabric-ca cluster test increase default timeout,FABC-189,23930,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,rennman,rennman,14/Nov/17 2:34 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,16/Nov/17 6:10 AM,,,,,,,,,,,,,0,,,,,,"The cluster test pre-dated the default timeout change, and has an inconsistent value (30s). This is causing some intermittent failures in CI, so eliminating the explicit timeout (-o 30) and taking the new default.",,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyn1z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Nov/17 6:10 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/15441/;;;",,,,,,,,,,,,,,,,,,,
Registry information will not be written to fabric-ca-server.db,FABC-190,14909,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,guhaihua,guhaihua,guhaihua,18/Feb/17 9:18 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,21/Feb/17 5:25 PM,,,,,,,,,,,,,0,MembershipServices,,,,,Registry init information in cmd/fabric-ca-server/config.go:122-136 will not be written to fabric-ca-server.db. ,,guhaihua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlev:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,guhaihua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca Inconsistent treatment of case in ldap converter/maps,FABC-191,26625,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,06/Jan/18 2:37 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,18/Jan/18 12:02 PM,,,,,,,v1.1.0-alpha,,,,,,0,,,,,,"ldap:
  attribute:
    names: [
             ""memberOf""
           ]
    converters:
      - name: hf.Registrar.Roles
        value: map(attr(""memberOf""),""Roles"")  <--- ""Roles"" is case-sensitive
    maps:
      Roles: <--- ""Roles"" is not case-sensitive
         - name: cn=Client,ou=groups,dc=example,dc=com
           value: client

yields:
2018/01/04 18:38:02 [DEBUG] Error evaluating expression for attribute 'hf.Registrar.Roles'; parms: map[DN:uid=admin,ou=users,ou=fabric,dc=hyperledeger,dc=example,dc=com affiliation:[fabric users]]; error: Unknown map name: 'Roles'
when any user attempts to enroll",,rennman,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzysin:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,skarim,smithbk,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Jan/18 1:48 AM;Clayton Sims;The fixed version field indicates this is must fix for alpha.   please confirm.  

 

[~smithbk]  if required for alpha what is your eta?;;;","17/Jan/18 2:37 AM;smithbk;yes ... CR submitted today;;;","17/Jan/18 2:44 AM;skarim;https://gerrit.hyperledger.org/r/#/c/16871/;;;",,,,,,,,,,,,,,,,,
fabric-ca fvt tests need make target to build in docker,FABC-192,15950,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,rennman,ChristopherFerris,ChristopherFerris,24/Apr/17 1:48 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,26/Apr/17 1:48 AM,v1.0.0,v1.0.0-alpha1,,,,,v1.0.0,,,,,,0,build-system,quality,,,,"fabric-ca fvt tests need make target to build in docker

The README.md in scripts/fvt seems either dated or was never merged. There is no make target for docker-fvt. As a developer or maintainer, I should be able to simply run the tests without any secret handshaking necessary. Anyone randomly pulling the source should be able to build and run all tests from the Makefile.",,ChristopherFerris,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqxz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Apr/17 1:50 AM;ChristopherFerris;[~bmos299] [~smithbk] I would like this addressed please;;;","25/Apr/17 3:28 AM;rennman;Ok, I don't understand this requirement, since the docker-fvt target was added to the Makefile in commit d10fd42 on Apr 5, and it there now on master.;;;","25/Apr/17 3:42 AM;rennman;fyi,  https://gerrit.hyperledger.org/r/#/c/8485/ fixes all of the the remaining CI issues and is net < 50 LOC;;;","25/Apr/17 4:20 AM;rennman;Considered done when 8485 is merged.;;;",,,,,,,,,,,,,,,,
Failed to start server using RSA key and certificate,FABC-193,16600,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,doublechaintech,skarim,skarim,11/May/17 5:40 AM,20/Feb/19 1:05 PM,28/Oct/23 2:21 AM,20/May/17 11:15 AM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"1. Server fails to start if an RSA key and certificate are provided to the fabric-ca server.

The following errors are seen:
Error: Could not find the private key in BCCSP keystore nor in keyfile rsa-key.pem: Failed to import RSA key from rsa-key.pem; RSA private key import is not supported

*Reproduction steps:*
1. Make sure that you don't have an existing certificate or key file that server has used. Clean up keystore and any certificate.
2. Run the following command: 
fabric-ca-server start --ca.certfile testdata/rsa.pem --ca.keyfile testdata/rsa-key.pem -d -b a:b

The rsa.pem and rsa-key.pem are under the fabric-ca/testdata directory 

2. Server ends up overriding an exisiting certifcate file and create a new key. Using an PKCS8 version of the an rsa key with and rsa certificate, caused the fabric-ca server to override the exisiting rsa certificate and create a new key in the key store.

*Reproduction steps:*
1. Run the following command:
fabric-ca-server start --ca.certfile testdata/rsa.pem --ca.keyfile testdata/rsa-key.pcks8.pem -d -b a:b

rsa-key.pcks8.pem is attached to this work item",,skarim,smithbk,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/May/17 5:41 AM;skarim;rsa-key.pkcs8.pem;https://jira.hyperledger.org/secure/attachment/10811/rsa-key.pkcs8.pem",,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxupj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,smithbk,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/May/17 6:41 AM;smithbk;Vlad, I believe I fixed this earlier today in https://gerrit.hyperledger.org/r/#/c/9453/;;;","20/May/17 11:14 AM;vpaprots;Just for history's sake, regarding above comment. We traced this with Keith, CA will fail to start with an explicit RSA key. As a workaround, if somebody ablsolutely needs it, I believe one can stick RSA pem key into BCCSP keystore,

 

It was agreed by Keith and Gari not to pursue more RSA support work. If it is to be resurected, see:

[https://gerrit.hyperledger.org/r/#/c/9437/]

[https://gerrit.hyperledger.org/r/#/c/9433/];;;",,,,,,,,,,,,,,,,,,
getcacert call from fabric-ca-client fails with tls enabled,FABC-194,17145,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,skarim,dbshah,dbshah,26/May/17 12:32 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,01/Jun/17 2:29 AM,v1.0.0,v1.0.0-alpha2,,,,,v1.0.0,,,,,,0,Duplicate,,,,,"This is seen in alpha2 as well as alpha3-ee71b0a. When making an enroll call with fabric-ca-client with tls enabled it goes through, but getcacert fails.

 

Failed getcacert request:

```

FABRIC_CA_CLIENT_HOME=/client/ca1 fabric-ca-client getcacert -u https://fabric-ca-0a.net_blockchain.com:7054 --caname OrdererCA -d

2017/05/25 15:25:58 [DEBUG] Entered runGetCACert

2017/05/25 15:25:58 [DEBUG] Initializing BCCSP: &\{ProviderName:SW SwOpts:0xc420149230 Pkcs11Opts:<nil>}

2017/05/25 15:25:58 [DEBUG] Initializing BCCSP with software options &\{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:0xc4201a1af0 DummyKeystore:<nil>}

2017/05/25 15:25:58 [DEBUG] Sending request

POST https://fabric-ca-0a.net_blockchain.com:7054/cainfo

Authorization: 

\{""caname"":""OrdererCA""}

Error: POST failure [Post https://fabric-ca-0a.net_blockchain.com:7054/cainfo: x509: certificate signed by unknown authority]; not sending

POST https://fabric-ca-0a.net_blockchain.com:7054/cainfo

Authorization: 

\{""caname"":""OrdererCA""}

```

 

enroll request:

```

fabric-ca-client enroll -u https://orderer0a:orderer0apw@fabric-ca-0a.net_blockchain.com:7054 --caname OrdererCA -d

2017/05/25 15:31:19 [DEBUG] Entered runEnroll

2017/05/25 15:31:19 [INFO] User provided config file: /mnt/crypto/orderer/orderer-0a/fabric-ca-client-config.yaml

2017/05/25 15:31:19 [INFO] Configuration file location: /mnt/crypto/orderer/orderer-0a/fabric-ca-client-config.yaml

2017/05/25 15:31:19 [DEBUG] Enrolling &\{Name:orderer0a Secret:orderer0apw Profile: Label: CSR:0xc4200a7080 CAName:OrdererCA}

2017/05/25 15:31:19 [DEBUG] Initializing BCCSP: &\{ProviderName:SW SwOpts:0xc4201d3740 Pkcs11Opts:<nil>}

2017/05/25 15:31:19 [DEBUG] Initializing BCCSP with software options &\{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:0xc4201e8c80 DummyKeystore:<nil>}

2017/05/25 15:31:19 [DEBUG] GenCSR &\{CN:adminOrderer Names:[\{C:US ST:North Carolina L: O:Hyperledger OU:Fabric SerialNumber:}] Hosts:[orderer-0a] KeyRequest:<nil> CA:<nil> SerialNumber:}

2017/05/25 15:31:19 [INFO] generating key: &\{A:ecdsa S:256}

2017/05/25 15:31:19 [DEBUG] generate key from request: algo=ecdsa, size=256

2017/05/25 15:31:19 [INFO] encoded CSR

2017/05/25 15:31:19 [DEBUG] Sending request

POST https://fabric-ca-0a.net_blockchain.com:7054/enroll

Authorization: Basic b3JkZXJlcjBhOm9yZGVyZXIwYXB3

\{""hosts"":[""orderer-0a""],""certificate_request"":""-----BEGIN CERTIFICATE REQUEST-----\nMIIBQzCB6wIBADBhMQswCQYDVQQGEwJVUzEXMBUGA1UECBMOTm9ydGggQ2Fyb2xp\nbmExFDASBgNVBAoTC0h5cGVybGVkZ2VyMQ8wDQYDVQQLEwZGYWJyaWMxEjAQBgNV\nBAMTCW9yZGVyZXIwYTBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABP0XN1+Q8Fih\nHxvWdYTWOjYZniXnmXy47ZJMM5kyKYm6vZpvyvl/Jy/XR1VGLOqJD2dzDbfiLQng\nsynl91qR5t6gKDAmBgkqhkiG9w0BCQ4xGTAXMBUGA1UdEQQOMAyCCm9yZGVyZXIt\nMGEwCgYIKoZIzj0EAwIDRwAwRAIgOuao1PpUsFlgn9CEM+KlMqHZkqxFD5nP+jHo\n4qk6i7ACIDIu5N6Sq7ysKoEKDZD6u2eBFPL0pL2/uqkPs8w6P5w9\n-----END CERTIFICATE REQUEST-----\n"",""profile"":"""",""crl_override"":"""",""label"":"""",""CAName"":""OrdererCA""}

2017/05/25 15:31:19 [INFO] TLS Enabled

2017/05/25 15:31:19 [DEBUG] CA Files: [/certs/cacert.pem]

2017/05/25 15:31:19 [DEBUG] Client Cert File: /certs/orderer0a-cert.pem

2017/05/25 15:31:19 [DEBUG] Client Key File: /certs/orderer0a-key.pem

2017/05/25 15:31:19 [DEBUG] Check client TLS certificate for valid dates

2017/05/25 15:31:19 [DEBUG] Received response

statusCode=200 (200 OK)

2017/05/25 15:31:19 [DEBUG] Response body result: map[Cert:LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNPakNDQWVHZ0F3SUJBZ0lVSG00RjJQUW1Pa1BHUkNka3dyOCtxRzdjRFBFd0NnWUlLb1pJemowRUF3SXcKWVRFTE1Ba0dBMVVFQmhNQ1ZWTXhGekFWQmdOVkJBZ1REazV2Y25Sb0lFTmhjbTlzYVc1aE1SUXdFZ1lEVlFRSwpFd3RJZVhCbGNteGxaR2RsY2pFUE1BMEdBMVVFQ3hNR1JtRmljbWxqTVJJd0VBWURWUVFERXdsUGNtUmxjbVZ5ClEwRXdIaGNOTVRjd05USTFNVFV5TmpBd1doY05NVGd3TkRJek1qTXlOakF3V2pCaE1Rc3dDUVlEVlFRR0V3SlYKVXpFWE1CVUdBMVVFQ0JNT1RtOXlkR2dnUTJGeWIyeHBibUV4RkRBU0JnTlZCQW9UQzBoNWNHVnliR1ZrWjJWeQpNUTh3RFFZRFZRUUxFd1pHWVdKeWFXTXhFakFRQmdOVkJBTVRDVzl5WkdWeVpYSXdZVEJaTUJNR0J5cUdTTTQ5CkFnRUdDQ3FHU000OUF3RUhBMElBQlAwWE4xK1E4RmloSHh2V2RZVFdPallabmlYbm1YeTQ3WkpNTTVreUtZbTYKdlpwdnl2bC9KeS9YUjFWR0xPcUpEMmR6RGJmaUxRbmdzeW5sOTFxUjV0NmpkekIxTUE0R0ExVWREd0VCL3dRRQpBd0lDQkRBTUJnTlZIUk1CQWY4RUFqQUFNQjBHQTFVZERnUVdCQlQ0TFlCTXZ3WHBuUkZKVTRDbGF2dVBrb3pPCjZ6QWZCZ05WSFNNRUdEQVdnQlFsb2UwVUhQbnFKV05jT1Q1cjEwalFFWmVXR0RBVkJnTlZIUkVFRGpBTWdncHYKY21SbGNtVnlMVEJoTUFvR0NDcUdTTTQ5QkFNQ0EwY0FNRVFDSUhia3ppeHFKNFhTbVpBbElkeHNwT2pDSnRiMwpmOEVlUHVvem9wRGt6N24xQWlCY2hvMmEwYjhkM2xBT3ZnUFR2K0ozQWVDNjlWOS9pa05BbXQxZWNtMXZQUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K ServerInfo:map[CAName:OrdererCA CAChain:LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNCVENDQWF5Z0F3SUJBZ0lVZW9DVTh6UytCcTZtRldvU3BNN3ozRDk0SG1Bd0NnWUlLb1pJemowRUF3SXcKWVRFTE1Ba0dBMVVFQmhNQ1ZWTXhGekFWQmdOVkJBZ1REazV2Y25Sb0lFTmhjbTlzYVc1aE1SUXdFZ1lEVlFRSwpFd3RJZVhCbGNteGxaR2RsY2pFUE1BMEdBMVVFQ3hNR1JtRmljbWxqTVJJd0VBWURWUVFERXdsUGNtUmxjbVZ5ClEwRXdIaGNOTVRjd05USTFNVFV5TmpBd1doY05Nakl3TlRJME1UVXlOakF3V2pCaE1Rc3dDUVlEVlFRR0V3SlYKVXpFWE1CVUdBMVVFQ0JNT1RtOXlkR2dnUTJGeWIyeHBibUV4RkRBU0JnTlZCQW9UQzBoNWNHVnliR1ZrWjJWeQpNUTh3RFFZRFZRUUxFd1pHWVdKeWFXTXhFakFRQmdOVkJBTVRDVTl5WkdWeVpYSkRRVEJaTUJNR0J5cUdTTTQ5CkFnRUdDQ3FHU000OUF3RUhBMElBQkQ3a0QrdytmRTRhQXBYSmJXZTRtTVNlY2xma3h5cmFNbEpSd3oxNmpsaEcKNnM2UEQ1eTA2eGxiQ3d6WFRsb0tKTmRYMmp2SERrZTB6bm9KZnhZVWVEQ2pRakJBTUE0R0ExVWREd0VCL3dRRQpBd0lCQmpBUEJnTlZIUk1CQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJRbG9lMFVIUG5xSldOY09UNXIxMGpRCkVaZVdHREFLQmdncWhrak9QUVFEQWdOSEFEQkVBaUFDU3d1UjhiUEpGejVybkZpN0ZFVXQ1c2kyYWt1bU9MWW0KQm55QWtzekNud0lnTGZhaXBEblQrTHF6NEdzazdKZDM1N0hOUHlyS0VCNmN3L1dpamMycXJHQT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=]]

2017/05/25 15:31:19 [DEBUG] newEnrollmentResponse orderer0a

2017/05/25 15:31:19 [INFO] Stored client certificate at /mnt/crypto/orderer/orderer-0a/msp/signcerts/cert.pem

2017/05/25 15:31:19 [INFO] Stored CA certificate chain at /mnt/crypto/orderer/orderer-0a/msp/cacerts/fabric-ca-0a-net_blockchain-com-7054-OrdererCA.pem

```

 

 

 ",,dbshah,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxx33:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,dbshah,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/May/17 2:09 AM;smithbk;This is fixed in [https://gerrit.hyperledger.org/r/#/c/9725/] ... which is not yet merged;;;","26/May/17 9:27 PM;mastersingh24;duplicate of https://jira.hyperledger.org/browse/FAB-4097;;;",,,,,,,,,,,,,,,,,,
[SECURITY] Fabric CA not handling valid Certificate Signing Request.,FABC-195,16812,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Won't Do,,rickr,rickr,17/May/17 9:17 PM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:39 PM,v1.0.0-rc1,,,,,,,,,,,,0,,,,,," Bouncy Castle produce CSR and IBMJCE providers create CSRs that work.  IBMPKCS11 provider needed for HSM produces a different CSR  but I think is also valid fails

 

2017/05/17 12:13:15 [DEBUG] Received request
 POST /api/v1/enroll
 Authorization: Basic YWRtaW46YWRtaW5wdw==
 \{""certificate_request"":""-----BEGIN CERTIFICATE REQUEST-----\nMIIBqDCCAU4CAQAwEDEOMAwGA1UEAxMFYWRtaW4wggEzMIHsBgcqhkjOPQIBMIHg\nAgEBMCwGByqGSM49AQECIQD/////AAAAAQAAAAAAAAAAAAAAAP//////////////\n/zBEBCD/////AAAAAQAAAAAAAAAAAAAAAP///////////////AQgWsY12Ko6k+ez\n671VdpiGvGUdBrDMU7D2O848PifSYEsEQQRrF9Hy4SxCR/i85uVjpEDydwN9gS3r\nM6D0oTlF2JjClk/jQuL+Gn+bjufrSnwPnhYrzjNXazFezsu2QGg3v1H1AiEA////\n/wAAAAD//////////7zm+q2nF56E87nKwvxjJVECAQEDQgAE80dMWkLUc1JHRBcr\nEcpBVUkBfLiJ2NPY56anGU19ZRSE1w7DZIybcTLbz6UqCKZHPYzr+SrMA8wdY7qH\n3C/VxKAAMAoGCCqGSM49BAMCA0gAMEUCIQD+YcWlMUFV21EA4JnxyxmWXk6R6f0u\n2eMlEQ3FdS///QIgO6zWfKzEg359t9fhsYeNZUG4EHPbk0ZNXCwe1spn3vg=\n-----END CERTIFICATE REQUEST-----\n""}
 2017/05/17 12:13:15 [DEBUG] Directing traffic to default CA
 2017/05/17 12:13:15 [DEBUG] DB: Getting identity admin
 2017/05/17 12:13:15 [DEBUG] DB: Login identity admin with max enrollments of 0 and state of 0
 2017/05/17 12:13:15 [DEBUGAutomatic] DB: Successfully incremented state for identity admin to 1
 2017/05/17 12:13:15 [DEBUG] DB: identity admin successfully logged in
 2017/05/17 12:13:15 [DEBUG] Identity/Pass was correct
 2017/05/17 12:13:15 [DEBUG] Received request for endpoint enroll
 2017/05/17 12:13:15 [DEBUG] Enrollment request: \{SignRequest:\{Hosts:[] Request:-----BEGIN CERTIFICATE REQUEST-----
 MIIBqDCCAU4CAQAwEDEOMAwGA1UEAxMFYWRtaW4wggEzMIHsBgcqhkjOPQIBMIHg
 AgEBMCwGByqGSM49AQECIQD/////AAAAAQAAAAAAAAAAAAAAAP//////////////
 /zBEBCD/////AAAAAQAAAAAAAAAAAAAAAP///////////////AQgWsY12Ko6k+ez
 671VdpiGvGUdBrDMU7D2O848PifSYEsEQQRrF9Hy4SxCR/i85uVjpEDydwN9gS3r
 M6D0oTlF2JjClk/jQuL+Gn+bjufrSnwPnhYrzjNXazFezsu2QGg3v1H1AiEA////
 /wAAAAD//////////7zm+q2nF56E87nKwvxjJVECAQEDQgAE80dMWkLUc1JHRBcr
 EcpBVUkBfLiJ2NPY56anGU19ZRSE1w7DZIybcTLbz6UqCKZHPYzr+SrMA8wdY7qH
 3C/VxKAAMAoGCCqGSM49BAMCA0gAMEUCIQD+YcWlMUFV21EA4JnxyxmWXk6R6f0u
 2eMlEQ3FdS///QIgO6zWfKzEg359t9fhsYeNZUG4EHPbk0ZNXCwe1spn3vg=
 -----END CERTIFICATE REQUEST-----
  Subject:<nil> Profile: CRLOverride: Label: Serial:<nil> Extensions:[]} CAName:}
 2017/05/17 12:13:15 [INFO] 172.18.0.1:44966 - ""POST /api/v1/enroll"" 0

 

 

""success"":false,""result"":null,""errors"":[\\{""code"":0,""message"":""asn1: structure error: tags don't match (6 vs \\{class:0 tag:16 length:224 isCompound:true}) \\{optional:false explicit:false application:false defaultValue:\u003cnil\u003e tag:\u003cnil\u003e stringType:0 timeType:0 set:false omitEmpty:false} ObjectIdentifier @3""}],""messages"":[

I wrote the pems sent to a file and attached them.  the bouncycastle is BC.pem 
 The IBM pkcs10 produced is ibm.pem

Both of these runt though openssl  just fine. I think both are valid CSRs","Fabric CA level

commit ed5ed51ac75b5006c827704aa589f335ac723d8e
Merge: 92aec7f 34ec53e
Author: Srinivasan Muralidharan <muralisr@us.ibm.com>
Date:   Tue May 9 19:01:55 2017 +0000",mastersingh24,rickr,smithbk,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABJ-308,FAB-4546,,,,,,,,,,,,,,,,,,,,,,,"17/May/17 9:01 PM;rickr;bc.pem;https://jira.hyperledger.org/secure/attachment/10825/bc.pem","17/May/17 9:01 PM;rickr;ibm.pem;https://jira.hyperledger.org/secure/attachment/10824/ibm.pem",,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3sf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,rickr,smithbk,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/May/17 6:52 AM;smithbk;So the CSRs in bc.pem and ibm.pem work correctly, but the CSR shown in the trace does not work.  Is that correct? 

I properly formatted the CSR from the trace and placed it in a file named `csr.pem` as shown below.
{code:java}
----BEGIN CERTIFICATE REQUEST---
MIIBqDCCAU4CAQAwEDEOMAwGA1UEAxMFYWRtaW4wggEzMIHsBgcqhkjOPQIBMIHg
AgEBMCwGByqGSM49AQECIQD/////AAAAAQAAAAAAAAAAAAAAAP//////////////
/zBEBCD/////AAAAAQAAAAAAAAAAAAAAAP///////////////AQgWsY12Ko6k+ez
671VdpiGvGUdBrDMU7D2O848PifSYEsEQQRrF9Hy4SxCR/i85uVjpEDydwN9gS3r
M6D0oTlF2JjClk/jQuL+Gn+bjufrSnwPnhYrzjNXazFezsu2QGg3v1H1AiEA////
/wAAAAD//////////7zm+q2nF56E87nKwvxjJVECAQEDQgAE80dMWkLUc1JHRBcr
EcpBVUkBfLiJ2NPY56anGU19ZRSE1w7DZIybcTLbz6UqCKZHPYzr+SrMA8wdY7qH
3C/VxKAAMAoGCCqGSM49BAMCA0gAMEUCIQD+YcWlMUFV21EA4JnxyxmWXk6R6f0u
2eMlEQ3FdS///QIgO6zWfKzEg359t9fhsYeNZUG4EHPbk0ZNXCwe1spn3vg=
---END CERTIFICATE REQUEST----{code}
And then try to parse it as follows, I get an error from openssl:
{code:java}
$ openssl req -in csr.pem -noout -text
unable to load X509 request
85197:error:0906D06C:PEM routines:PEM_read_bio:no start line:/BuildRoot/Library/Caches/com.apple.xbs/Sources/OpenSSL098/OpenSSL098-64.30.2/src/crypto/pem/pem_lib.c:648:Expecting: CERTIFICATE REQUEST{code}
 ;;;","18/May/17 6:57 AM;rickr;openssl req -in bc.pem -noout -text
Certificate Request:
 Data:
 Version: 0 (0x0)
 Subject: CN=admin
 Subject Public Key Info:
 Public Key Algorithm: id-ecPublicKey
 Public-Key: (256 bit)
 pub: 
 04:64:df:ce:bc:a3:34:1f:96:d4:6a:9d:aa:12:7a:
 b5:3c:98:40:26:b3:e3:13:f3:64:0d:be:10:5c:a2:
 86:d0:81:33:ac:92:5f:43:a8:f2:91:c0:b6:75:23:
 49:52:fd:e9:7d:01:98:39:50:d4:11:fb:54:f2:78:
 f0:98:b0:cb:fd
 ASN1 OID: prime256v1
 NIST CURVE: P-256
 Attributes:
 a0:00
 Signature Algorithm: ecdsa-with-SHA256
 30:44:02:20:79:6b:34:26:f4:fb:60:c6:69:93:67:07:9e:c3:
 a7:c2:b8:52:37:20:c2:ad:6c:c1:c5:5a:e0:24:05:32:e7:37:
 02:20:49:73:bd:f7:f5:14:55:16:11:7f:70:9d:2c:fa:2c:40:
 1b:92:e9:f4:0a:b3:86:c5:78:71:a9:1d:a0:d5:91:15;;;","18/May/17 6:58 AM;rickr;openssl req -in ibm.pem -noout -text
Certificate Request:
 Data:
 Version: 0 (0x0)
 Subject: CN=admin
 Subject Public Key Info:
 Public Key Algorithm: id-ecPublicKey
 Public-Key: (256 bit)
 pub: 
 04:cf:28:1f:f7:70:70:45:d7:e3:36:1a:dd:68:b6:
 8e:6d:92:24:bb:3d:cc:45:c5:39:f0:9f:40:a6:56:
 47:5c:4d:07:0b:80:f8:9d:d3:fe:b3:e7:2c:25:50:
 8b:19:f5:30:67:b6:91:fb:3a:9e:a9:a3:5c:c8:56:
 86:13:f1:48:b0
 Field Type: prime-field
 Prime:
 00:ff:ff:ff:ff:00:00:00:01:00:00:00:00:00:00:
 00:00:00:00:00:00:ff:ff:ff:ff:ff:ff:ff:ff:ff:
 ff:ff:ff
 A: 
 00:ff:ff:ff:ff:00:00:00:01:00:00:00:00:00:00:
 00:00:00:00:00:00:ff:ff:ff:ff:ff:ff:ff:ff:ff:
 ff:ff:fc
 B: 
 5a:c6:35:d8:aa:3a:93:e7:b3:eb:bd:55:76:98:86:
 bc:65:1d:06:b0:cc:53:b0:f6:3b:ce:3c:3e:27:d2:
 60:4b
 Generator (uncompressed):
 04:6b:17:d1:f2:e1:2c:42:47:f8:bc:e6:e5:63:a4:
 40:f2:77:03:7d:81:2d:eb:33:a0:f4:a1:39:45:d8:
 98:c2:96:4f:e3:42:e2:fe:1a:7f:9b:8e:e7:eb:4a:
 7c:0f:9e:16:2b:ce:33:57:6b:31:5e:ce:cb:b6:40:
 68:37:bf:51:f5
 Order: 
 00:ff:ff:ff:ff:00:00:00:00:ff:ff:ff:ff:ff:ff:
 ff:ff:bc:e6:fa:ad:a7:17:9e:84:f3:b9:ca:c2:fc:
 63:25:51
 Cofactor: 1 (0x1)
 Attributes:
 Requested Extensions:
 X509v3 Subject Key Identifier: 
 94:D9:6A:5E:22:2D:0D:90:94:91:ED:80:91:74:D2:75:BB:4D:AD:02
 Signature Algorithm: ecdsa-with-SHA256
 30:45:02:20:11:bb:04:5f:05:91:2e:ce:65:ef:bc:8c:25:39:
 23:e2:50:3f:3b:49:e0:18:0c:93:62:32:2e:4e:03:2a:f5:9a:
 02:21:00:8f:b4:0e:88:03:9c:8c:c1:0d:8c:ec:29:fc:63:1e:
 d5:77:57:ed:8b:45:53:08:d2:ac:e5:0c:09:d0:8d:c3:16;;;","18/May/17 6:59 AM;rickr;Down loaded both .. see results above.

 

No bc.pem IS accepted by FabricCA
ibm.pem is NOT;;;","18/May/17 7:27 AM;smithbk;Given the BCCSP integration, fabric-ca-server now uses BCCSP to sign a CSR, so the error is occurring there.

Note the error ""asn1: structure error: tags don't match"" in the trace.

Unfortunately, BCCSP doesn't prepend context to an error so we don't know for sure what path it took to return this error.

My guess would be that the call to ""ecdsa.Sign"" below in fabric/bccsp/sw is returning the error, but without any debug logging or adding context to errors, it is difficult to tell for sure.  Anyway, hopefully Vlad will know off the top of his head.  If not, we will need to be able to reproduce and add more logging to debug.
{code:java}
func signECDSA(k *ecdsa.PrivateKey, digest []byte, opts bccsp.SignerOpts) (signature []byte, err error) {
        r, s, err := ecdsa.Sign(rand.Reader, k, digest)
        if err != nil {
                return nil, err
        }

        s, _, err = ToLowS(&k.PublicKey, s)
        if err != nil {
                return nil, err
        }

        return MarshalECDSASignature(r, s)
}
{code}
 

 ;;;","18/May/17 7:30 AM;rickr;Was told that CSSFL was doing the parsing. Are you using the latest CSSFL ? ;;;","18/May/17 9:30 PM;smithbk;The problem is not in CFSSL nor in BCCSP.  It is in the x509.ParseCertificateRequest function apparently.

I was able to reproduce the error with the code below.  One thing I don't yet understand is why I had to add some extra dash characters to the csr string below in the code in order to reproduce; otherwise, pem.Decode fails since it expects 5 dash characters.   Without these characters in the original request in the description, I'm still not sure why we don't get a ""PEM block not found"" error instead, which makes me think that we may be losing some characters in the process of logging some how???

Anyway, next to dig into the x509.ParseCertificateRequest method.  I'm wondering if the inner encoding may be BER instead of DER for example.  BER is a superset of DER.  Continuing to investigate.
{code:java}
package main

import (
  ""fmt""
  ""encoding/pem""
  ""crypto/x509""
)

func main() {
   csr := `
-----BEGIN CERTIFICATE REQUEST-----
MIIBqDCCAU4CAQAwEDEOMAwGA1UEAxMFYWRtaW4wggEzMIHsBgcqhkjOPQIBMIHg
AgEBMCwGByqGSM49AQECIQD/////AAAAAQAAAAAAAAAAAAAAAP//////////////
/zBEBCD/////AAAAAQAAAAAAAAAAAAAAAP///////////////AQgWsY12Ko6k+ez
671VdpiGvGUdBrDMU7D2O848PifSYEsEQQRrF9Hy4SxCR/i85uVjpEDydwN9gS3r
M6D0oTlF2JjClk/jQuL+Gn+bjufrSnwPnhYrzjNXazFezsu2QGg3v1H1AiEA////
/wAAAAD//////////7zm+q2nF56E87nKwvxjJVECAQEDQgAE80dMWkLUc1JHRBcr
EcpBVUkBfLiJ2NPY56anGU19ZRSE1w7DZIybcTLbz6UqCKZHPYzr+SrMA8wdY7qH
3C/VxKAAMAoGCCqGSM49BAMCA0gAMEUCIQD+YcWlMUFV21EA4JnxyxmWXk6R6f0u
2eMlEQ3FdS///QIgO6zWfKzEg359t9fhsYeNZUG4EHPbk0ZNXCwe1spn3vg=
-----END CERTIFICATE REQUEST-----
   `
   block, _ := pem.Decode([]byte(csr))
   if block == nil {
      panic(""PEM block not found"")
   }
   if block.Type != ""NEW CERTIFICATE REQUEST"" && block.Type != ""CERTIFICATE REQUEST"" {
      panic(""Invalid PEM block type: ""+block.Type)
   }
   req, err := x509.ParseCertificateRequest(block.Bytes)
   if err != nil {
      panic(""Failed to parse request: ""+err.Error())
   }
   fmt.Printf(""OK: %+v\n"", req)
}
{code}
 

 

 ;;;","19/May/17 1:21 AM;smithbk;OK, I've taken this as far as I can for now, until we get more info from the provider.   Here is a modified version of the program above which they can use to both reproduce and verify if/when they are able to support this other format which the golang x509.ParseCertificateRequest supports.   To use it, just compile and run with the filename as the argument to see if it works.
{code:java}
package main

import (
    ""crypto/x509""
    ""encoding/pem""
    ""fmt""
    ""io/ioutil""
    ""os""
)

func main() {
    if len(os.Args) != 2 {
        fmt.Printf(""Usage: %s <CSR-file>\n"", os.Args[0])
        os.Exit(1)
    }
    buf, err := ioutil.ReadFile(os.Args[1])
    if err != nil {
        fmt.Printf(""Failed to read file: %s\n"", err)
        os.Exit(1)
    }
    block, _ := pem.Decode(buf)
    if block == nil {
        fmt.Printf(""Failed to find PEM block: %s\n"", err)
        os.Exit(1)
    }
    if block.Type != ""NEW CERTIFICATE REQUEST"" && block.Type != ""CERTIFICATE REQUEST"" {
        fmt.Printf(""Invalid PEM block type: %s\n"", block.Type)
        os.Exit(1)
    }
    _, err = x509.ParseCertificateRequest(block.Bytes)
    if err != nil {
        fmt.Printf(""Failed to parse CSR: %s\n"", err)
        os.Exit(1)
    }
    fmt.Printf(""Successfully parsed CSR\n"")
}
{code}
 ;;;","02/Jun/17 7:47 PM;rickr;Has this been reported to the _provider_?  Issue/ticket # ?;;;","03/Jun/17 6:50 PM;mastersingh24;I'm adding fabric-sdk-java as a component as well;;;","03/Jun/17 9:17 PM;rickr;The issue/fix is with fabric_ca any other user of ca could generate valid certificates as those and hit the same issue.;;;","08/Jun/17 12:35 AM;smithbk;Vlad, I'm assigning to you so that you can paste the link for the issue opened against the provider.  IIRC, you opened one.
We decided to wait until hearing from the provider before proceeding with writing our own code to handle this format.

This is the issue in which the ecdsa public key in the CSR was stored with A & B values directly, but the golang ParseCertificate doesn't recognize that format.
;;;","20/Jul/17 2:19 AM;vpaprots;[~rickr] can you confirm that you got the fix from IBMJCE team and it works please?

That said, even if the fix is there, do we want to handle this case regardless? (somebody that did not apply the above ifix.. or some other library that specifies the curve via A&B.. we could include the ifix as part of the dependency lists)

I looked through the Golang code, no A or B specified..

 
{quote}// See FIPS 186-3, section D.2.3

p256Params = &CurveParams\{Name: ""P-256""}

p256Params.P, _ = new(big.Int).SetString(""115792089210356248762697446949407573530086143415290314195533631308867097853951"", 10)

p256Params.N, _ = new(big.Int).SetString(""115792089210356248762697446949407573529996955224135760342422259061068512044369"", 10)

p256Params.B, _ = new(big.Int).SetString(""5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"", 16)

p256Params.Gx, _ = new(big.Int).SetString(""6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"", 16)

p256Params.Gy, _ = new(big.Int).SetString(""4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"", 16)

p256Params.BitSize = 256

 

p256RInverse, _ = new(big.Int).SetString(""7fffffff00000001fffffffe8000000100000000ffffffff0000000180000000"", 16)
{quote}

 so we would have to hardcode our own A&B, to match it to the right curve..;;;","20/Jul/17 2:25 AM;rickr;Yes I got a fix and it worked.  However still see this as an issue as the certificate was valid even without the _fix._;;;","05/Sep/17 10:43 PM;smithbk;Is this really a highest priority?;;;","05/Sep/17 10:52 PM;rickr;Given that it's not been addressed in over 3 months guess not. ;;;","04/Nov/17 10:34 PM;mastersingh24;I'm closing this as WON'T FIX as there is no requirement to support every possible format, especially formats that don't appear to be in widespread use.  Unless I'm missing something, fabric-ca (via Golang) supports PKCS10 using RFC5480 for EC Subject Public Key Info.  

And FWIW - openssl generates CSRs in the above format as well;;;",,,
fabric-ca client should not use defaults for modify,FABC-196,27093,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,rennman,rennman,26/Jan/18 8:24 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,10/Feb/18 6:57 PM,,,,,,,v1.1.0,,,,,,0,,,,,,"modify should not use defaults ... if nothing is passed, it should either be a no-op, or an error.


e.g., consider
{code:java}
Name         Type     Affiliation    max_enrollments Attributes
testUser  | apple  | org1        |   42            | null
fabric-ca-client identity modify testUser --secret 12345
{code}

results in

{code:java}
testUser  | user  | org1 | -1  | [{Name:hf.EnrollmentID Value:Z ECert:true}
                                   {Name:hf.Type Value:user ECert:true}
                                   {Name:hf.Affiliation Value: ECert:true}]
{code}
which modifies not only secret, but
Type, max_enrollments, and Attributes

Even if I specify nothing, it still changes the user record to reflect defaults:
fabric-ca-client identity modify testUser
Successfully modified identity - Name: testUser ...

Unless it just so happens the user entry is 100% consistent with the defaults, in which it errors out:
Error: Response from server: Error Code: 0 - Failed to update any identity records
",,aambati,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyurb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,rennman,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Jan/18 8:48 AM;aambati;https://gerrit.hyperledger.org/r/c/17319/;;;",,,,,,,,,,,,,,,,,,,
Duplicate flags registered for 'Hosts',FABC-197,16867,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,19/May/17 2:58 AM,27/Mar/19 12:36 AM,28/Oct/23 2:21 AM,25/May/17 5:40 AM,v1.0.0,v1.0.0-alpha1,,,,,v1.0.0,,,,,,0,,,,,,"Currently there are two places you can specify 'hosts' when performing an enrollment. One place is to specify it as part of the CSR API and the second place is in the Enrollment Request API. For example, you can see duplicate hosts flags:

--csr.*hosts* stringSlice        A list of space-separated host names in a certificate signing request
--csr.serialnumber string      The serial number in a certificate signing request, which becomes part of the DN (Distinquished Name)
-d, --debug                        Enable debug level logging
--enrollment.*hosts* string      Comma-separated host list

It is unclear to a user as to which one to use or which one will take precedence. Currently the hosts that is part of the Enrollment API will only take affect and the host from the CSR API will get ignored. Need to only have one place to specify hosts and it should be part of the CSR API. 

*Reproduction:*
1. Enroll user: fabric-ca-client enroll -u http://admin:adminpw@localhost:7054 --csr.hosts host1 --enrollment.hosts host2
2. Examine ecert and will only see host2 and not host1",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-831,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxw0n:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Reopen connections closed by LDAP server due to inactivity,FABC-198,19128,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,11/Jul/17 6:16 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,26/Jul/17 2:35 AM,v1.0.0,,,,,,v1.0.1,,,,,,0,,,,,,"If the LDAP server is configured to close inactive connections, the fabric-ca-server can fail as follows when enrolling a user:
{code}
2017/06/28 15:21:39 [DEBUG] Failed to get user 'user1': LDAP search failure: LDAP Result Code 200 """": ldap: connection closed; search request: &{BaseDN: Scope:2 DerefAliases:0 SizeLimit:0 TimeLimit:0 TypesOnly:false Filter:(sAMAccountName=XBR_us_po) Attributes:[] Controls:[]}
{code}
Note the ""ldap: connection closed"" part of the error message above.  This happens because
the fabric-ca-server caches a connection to the server in order to perform an LDAP search
to map a user name to a DN during enrollment; however, if the server has closed the
connection on its side, the fabric-ca-server which is acting as the LDAP client will fail.

The fix is to create a new connection when this error occurs.

There are two work-arounds:
1) Restarting the fabric-ca-server
2) Configuring the LDAP server to not close inactivity connections

",,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3kv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Jul/17 12:35 PM;smithbk;https://gerrit.hyperledger.org/r/#/c/11487/;;;","19/Jul/17 7:11 PM;mastersingh24;This seems small enough and worth including in a patch release so setting to 1.0.1 for now;;;",,,,,,,,,,,,,,,,,,
Test scripts 'passwordsInLog_test.sh' not in correct location,FABC-199,22482,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,skarim,skarim,18/Oct/17 10:59 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,21/Oct/17 12:08 AM,v1.1.0,,,,,,v1.1.0,,,,,,0,,,,,,"The test script 'passwordsInLog_test.sh' is currently located in 'fabric_ca/passwordsInLog_test.sh', which is not the appropriate location. The correct location for this fvt test is in the 'fabric_ca/scripts/' folder for this test case to get executed.",,aambati,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyk0f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Oct/17 9:21 AM;aambati;https://gerrit.hyperledger.org/r/c/14675/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-client register: argument maxEnrollments not respected,FABC-200,16086,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aietcn,aietcn,aietcn,28/Apr/17 7:01 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,02/Jun/17 11:51 PM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"* given default maxenrollments in fabric-ca-server config set to 0

* when executing the following command:

{code}
fabric-ca-client register --id.name test --id.secret test --id.affiliation 'org1' --id.maxenrollments 5
{code}

* then query the sqlite db:

{code:sql}
select * from users where id='test';
{code}

result:

{code}
test|test|user|org1|[{""name"":"""",""value"":""""}]|0|0
{code}

The maxEnrollments in the argument is not respected.
","latest commit:
    * fabric-ca-server #commit-c131944
    * fabric-ca-client #commit-d35648a

installed by:

{code}
go get -u github.com/hyperledger/fabric-ca/cmd/fabric-ca-client
go get -u github.com/hyperledger/fabric-ca/cmd/fabric-ca-server
{code}
",aietcn,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-178,,,,,,,,,,,,,,"28/Apr/17 7:00 PM;aietcn;fabric-ca-server-config.yaml;https://jira.hyperledger.org/secure/attachment/10686/fabric-ca-server-config.yaml",,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxrmv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aietcn,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Apr/17 8:46 PM;aietcn;fix committed: https://gerrit.hyperledger.org/r/#/c/8721/;;;","17/May/17 11:06 AM;aietcn;#FAB-3011 should fix this.;;;","02/Jun/17 10:55 PM;smithbk;Tian, please verify if this is fixed and close if it is.   Thanks.;;;","02/Jun/17 11:50 PM;aietcn;[~smithbk] - verified by the fix commit of #FAB-3011. I'm closing this one.;;;",,,,,,,,,,,,,,,,
Error: Validation of certificate and key failed: Invalid certificate and/or key in files,FABC-201,18259,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid: Works as Expected,smithbk,pvrbharg,pvrbharg,17/Jun/17 6:01 AM,15/Jul/20 12:01 PM,28/Oct/23 2:21 AM,27/Jul/19 11:49 PM,v1.0.0-beta,,,,,,,,,,,,0,Documentation,MembershipServices,,,,"Getting the following error when trying to provide the custom private key in fabric-ca-server configuration file. 

Setup is OK if we do not specifiy the root private key in the configuration of fabric-ca-server.

Error: Validation of certificate and key failed: Invalid certificate and/or key in files '/root/go/src/github.com/hyperledger/fabric-ca/TrustedRoot.pem' and '/root/go/src/github.com/hyperledger/fabric-ca/privateKey.key': Failed parsing EC private key: x509: failed to parse EC private key: asn1: structure error: tags don't match (2 vs \{class:0 tag:16 length:64 isCompound:true}) \{optional:false explicit:false application:false defaultValue:<nil> tag:<nil> stringType:0 timeType:0 set:false omitEmpty:false} int @2",,adarshaJha,binhn,markparz,mastersingh24,pvrbharg,smithbk,weeds,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Jun/17 6:05 AM;pvrbharg;CorrectlyRunningConsoleOutput.txt;https://jira.hyperledger.org/secure/attachment/11193/CorrectlyRunningConsoleOutput.txt","17/Jun/17 6:05 AM;pvrbharg;blockchainctp.csr;https://jira.hyperledger.org/secure/attachment/11192/blockchainctp.csr","17/Jun/17 6:05 AM;pvrbharg;key validation error.txt;https://jira.hyperledger.org/secure/attachment/11194/key+validation+error.txt","17/Jun/17 6:05 AM;pvrbharg;privateKey.key;https://jira.hyperledger.org/secure/attachment/11195/privateKey.key",,,,,,,,,,,,,,,,,,,,,,,"1|hzy4kv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,adarshaJha,binhn,markparz,mastersingh24,pvrbharg,smithbk,weeds,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Jun/17 6:08 AM;pvrbharg;This is Bhargav from a customer pilot. This occurs only when customer tries to use create customer private key to configure. This issue not an issue if we create prirvate key with openssl tooling.

We can explain the problem more clearly in a phone call if you need. Thanks.

 

 ;;;","18/Jun/17 4:27 AM;mastersingh24;[~pvrbharg] fabric-ca does not support PKCS8 encrypted private keys;;;","18/Jun/17 5:11 AM;pvrbharg;Hi Gari,

 

Thank you for your update.

Where would I find information in our fabric-ca documentation which tells us the supported or recommended Private-Key Information Syntax Standard to be used? This way we would know which Private-Key Information Syntax Standard to be used or to be not used when private keys are being created.

 

My apologies if this information is already documented and I missed finding it. Thanks.;;;","19/Jun/17 12:20 AM;weeds;Given the question on documentation, I assigned to Mark Parzygnat, but also left membership services and documentation as components. ;;;","19/Jun/17 2:32 AM;smithbk;Bharghav,  I'll use this jira item to update the doc and the comments in the default configuration file to state that encrypted key files are not supported.  More specifically, the ""ca.keyfile"" must be a PEM-encoded ECDSA key and must not be encrypted.  That is, it must start with
{code}
-----BEGIN PRIVATE KEY-----
{code}
and not be encrypted as the following indicates
{code}
-----BEGIN ENCRYPTED PRIVATE KEY-----
{code};;;","19/Jun/17 3:01 AM;pvrbharg;Keith,

Great, thank you.;;;","19/Jun/17 3:18 AM;pvrbharg;Dear Keith,

Per doc this is what I found:

Algorithms and key sizes

The CSR can be customized to generate X.509 certificates and keys that support both RSA and Elliptic Curve (ECDSA). The following setting is an example of the implementation of Elliptic Curve Digital Signature Algorithm (ECDSA) with curve prime256v1 and signature algorithm ecdsa-with-SHA256:

key:
   algo: ecdsa
   size: 256
The choice of algorithm and key size are based on security needs.

Elliptic Curve (ECDSA) offers the following key size options:

size	ASN1 OID	Signature Algorithm
256	prime256v1	ecdsa-with-SHA256
384	secp384r1	ecdsa-with-SHA384
521	secp521r1	ecdsa-with-SHA512
RSA offers the following key size options:

size	Modulus (bits)	Signature Algorithm
2048	2048	sha256WithRSAEncryption
4096	4096	sha512WithRSAEncryption

;;;","19/Jun/17 3:22 AM;pvrbharg;Keith,

I would wait for your guidance and convey instructions  to our customer security team members. I could use them to setup an instance on my ibm laptop as well.

Thx.;;;","19/Jun/17 7:08 PM;mastersingh24;reducing priority to medium as this will be addressed via doc;;;","19/Jun/17 10:24 PM;markparz;I also added a line in read the docs in msp.rst [https://gerrit.hyperledger.org/r/#/c/10773/]

and moved to you [~smithbk];;;","21/Jun/17 3:11 AM;binhn;This looks like an important piece of info.

[~markparz] [~smithbk],  can we just add what Keith typed #above and be done with it?;;;","21/Jun/17 10:57 PM;smithbk;I'm working on the doc update now;;;","21/Jun/17 11:26 PM;smithbk;See https://gerrit.hyperledger.org/r/10911 [FAB-4841] Doc no support for encrypted keys;;;","15/Jul/20 3:06 AM;adarshaJha;i am also getting the same error after my vm is restarted .;;;","15/Jul/20 12:00 PM;adarshaJha;[~smithbk] can you please help us ??;;;",,,,,
ca server is crashing on latest fabric-ca commits,FABC-202,16807,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,smithbk,rameshthoomu,rameshthoomu,17/May/17 8:27 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,18/May/17 1:19 AM,v1.0.0-alpha2,,,,,,v1.0.0,,,,,,0,node-SDK,quality,,,,"ca server is crashing consistently while spinning up fabric network using node-sdk e2e docker-compose file. Java sdk e2e tests are currently pointing to alpha2 docker images so don't see any issue with ca server.

All e2e builds are failing with this error.  Below is the docker log file

https://jenkins.hyperledger.org/sandbox/job/e2e_FIT_x86_64/7/artifact/gopath/src/github.com/hyperledger/fabric-sdk-node/test/fixtures/dockerlogfile.log","Jenkins CI x86_64, s390x",rameshthoomu,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxvqn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/May/17 8:35 PM;rameshthoomu;Trace down to fabric-ca commits and suspecting below is the commit causing this issue

4d657bcfaba041ddf36bc2591219ef00a3bce9d4

[https://github.com/hyperledger/fabric-ca/commit/4d657bcfaba041ddf36bc2591219ef00a3bce9d4]

Jenkins build log:

https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-end-2-end-x86_64/501/;;;","17/May/17 10:02 PM;smithbk;Pertinent trace is below.   Investigating
{code:java}
[33mca_peerOrg1               |[0m 2017/05/17 11:11:44 [INFO] The CA key and certificate files already exist
[33mca_peerOrg1               |[0m 2017/05/17 11:11:44 [INFO] Key file location: /etc/hyperledger/fabric-ca-server-config/a22daf356b2aab5792ea53e35f66fccef1d7f1aa2b3a2b92dbfbf96a448ea26a_sk
[33mca_peerOrg1               |[0m 2017/05/17 11:11:44 [INFO] Certificate file location: /etc/hyperledger/fabric-ca-server-config/org1.example.com-cert.pem
[33mca_peerOrg1               |[0m 2017/05/17 11:11:44 [DEBUG] Validating the CA certificate and key
[33mca_peerOrg1               |[0m 2017/05/17 11:11:44 [DEBUG] Check CA certificate for valid dates
[33mca_peerOrg1               |[0m 2017/05/17 11:11:44 [DEBUG] Check CA certificate for valid usages
[33mca_peerOrg1               |[0m 2017/05/17 11:11:44 [DEBUG] Check CA certificate for valid IsCA value
[33mca_peerOrg1               |[0m 2017/05/17 11:11:44 [DEBUG] Check that key type is supported
[33mca_peerOrg1               |[0m 2017/05/17 11:11:44 [DEBUG] Check that key size is of appropriate length
[33mca_peerOrg1               |[0m 2017/05/17 11:11:44 [DEBUG] Check that public key and private key match
[33mca_peerOrg1               |[0m Error: Validation of certificate and key failed: Invalid certificate and/or key in files '/etc/hyperledger/fabric-ca-server-config/org1.example.com-cert.pem' and '/etc/hyperledger/fabric-ca-server-config/a22daf356b2aab5792ea53e35f66fccef1d7f1aa2b3a2b92dbfbf96a448ea26a_sk': x509.ParseECPrivateKey failed: x509: failed to parse EC private key: asn1: structure error: tags don't match (4 vs {class:0 tag:16 length:19 isCompound:true}) {optional:false explicit:false application:false defaultValue:<nil> tag:<nil> stringType:0 timeType:0 set:false omitEmpty:false}  @5{code};;;","18/May/17 12:39 AM;smithbk;http://gerrit.hyperledger.org/r/9453 [FAB-3974] Fix server crash on PKCS8 private key;;;",,,,,,,,,,,,,,,,,
fatal error: ltdl.h: no such file or directory,FABC-203,15251,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,rennman,jjjjibm,jjjjibm,08/Mar/17 11:25 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,21/Mar/17 11:44 PM,,,,,,,v1.0.0,,,,,,0,,,,,,"Error occurs building fabric-ca:
Command is:  make ca 
make ca

Building fabric-ca in bin directory ...
# github.com/hyperledger/fabric-ca/vendor/github.com/miekg/pkcs11
vendor/github.com/miekg/pkcs11/pkcs11.go:29:18: fatal error: ltdl.h: No such file or directory
 #include <ltdl.h>
                  ^
compilation terminated.

How to recreate:
1.Clone or git checkout to build fabric-ca
2.cd fabric-ca
3.make docker
4.make ca

Another method:
1.Clone or git pull to build fabric-ca
2.cd fabric-ca
3.make: ","fabric-ca: commit cd8802b89a5e471e8b7fa08616621791c213d747
fabric: commit 24dc7d9eb037e337993c726a273a6970c6c6d06d

go version go1.8 linux/amd64
",jjjjibm,mastersingh24,rennman,smithbk,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2731,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxn1j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jjjjibm,mastersingh24,rennman,smithbk,vpaprots,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Mar/17 2:32 AM;smithbk;This is an issue in bccsp in fabric due to Vlad's change.

I suggest we handle as initially handled by cfssl as described at https://github.com/cloudflare/cfssl/pull/281/commits/df0f4fb436edacc03bde50ba5e9c8d53d111398d
That is, we document the libtool dependency by default and add support for ""-tags nopkcs11"" for the go build.
Either that or reverse it and build w/o pcks11 support by default and add support for ""-tags pkcs11"" support, noting the libtool dependency.;;;","09/Mar/17 3:18 AM;mastersingh24;I agree with using tags as well as documenting the dependency.
I'd say that for the fabric-ca-server the default should be PKCS11 and for fabric-ca-client the default should be NOPKCS11 but if we want to have a single default, then I'd go with PKCS11;;;","09/Mar/17 4:18 PM;vpaprots;fabric-ca-client I believe is to be used with -M option? need pkcs11 there as well.. I much rather have the 'document' approach. I don't think this is bias speaking, but let me explain..

Interesting about tags.. I would had thought that -tags option would download a specific git tag, but its actually documented as ""a list of build tags to consider satisfied during the build"". That was exactly what I was reaching for.

I was originally looking at things like here: http://blog.ralch.com/tutorial/golang-conditional-compilation/ (and I wouldnt want anything at ALL like that in our code! C preprocessor macros!? just no!)

That said.. conditional builds are evil. executable with pkcs11.. executable without pkcs11.. just doubled what dockers we need to push out!? test cases to run?

(Another 'too clever alternative' is to see if we can just copy the contents of the header into fabric.. whats in there? a C specification for dlopen() and other dll support functions? will look);;;","09/Mar/17 9:25 PM;smithbk;Copying the C header may cause the compile to succeed but would then fail to link I believe. Also, when it is compiled with the ""-tags nopkcs11"" option, we would need it to build in a mock version of miekg/pkcs11 which returns a nice error saying something like ""PKCS11 is not supported in this build.  You must reinstall without the '-tags nopkcs11' flag to add PKCS11 support.""

With regard to doubling test coverage, I'm thinking that we could create a main wrapper around the pkcs11 tests only and automate the testing both with and without the ""-tags nopkcs11"" within a single test run.  I don't think we need to run every test twice.  But that's a thought.



;;;","10/Mar/17 5:14 PM;smithbk;See https://github.com/miekg/pkcs11/pull/47
If this pull request is accepted quickly, then revendoring will work.
If this pull request takes a while, the nopkcs11.go in the pull request could be used in bccsp as the basis for a solution.;;;","11/Mar/17 12:34 AM;vpaprots;[~mastersingh24], I think I misinterpreted ""I agree with using tags as well as documenting the dependency.""
You want us to:
1. ""use tags AND documenting the dependency.""
2. ""use tags OR documenting the dependency.""

I interpreted that we just needed to 'document the dependency', no code involved. 

Is the priority set to highest correct? Libtool header files are missing, we already installed them on the build machines. Things appear working.

NOTE: This dependency does also exist for fabric, so documentation needs an update there too
NOTE2: If tags is to be the solution, I would rather see this done via BCCSP. PKCS11 Bindings are too low level for this.. Though I do wonder how we would do it for fabric build.. havent yet found tags option for `go build`;;;","11/Mar/17 1:42 AM;smithbk;I'm dividing this into 2 jira items: one high priority and one normal.

1) High priority is to update docs to note this as a prereq with instructions of how to install.  Using this jira item for this one and I've assigned this to Allen since he has some experience with installing on various platforms. 
The fabric-ca readthe docs that needs to be updated is in the prereqs section at the beginning of fabric/docs/source/Setup/ca-setup.rst.   I'm not sure where to update for fabric, but suggest grepping for ""prereq"" in docs.

2) Lower priority is to add build tag support to allow someone to build without PKCS11.   This is split off to jira item https://jira.hyperledger.org/browse/FAB-2731;;;","21/Mar/17 11:42 PM;rennman;Addressed in Change 7167 with documentation updates.;;;",,,,,,,,,,,,
fix fabric-ca doc formatting issues,FABC-204,18299,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,19/Jun/17 3:51 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,20/Jun/17 6:46 AM,v1.0.0-beta,,,,,,v1.0.0,,,,,,0,Documentation,,,,,fix various fabric-ca doc formatting issues,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy4ov:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Make client ID library work on a v1.0 node,FABC-205,21324,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,05/Oct/17 5:48 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,08/Nov/17 3:32 AM,,,,,,,,,,,,,0,,,,,,"In v1.0, an x509 identity does not tag the PEM as a ""CERTIFICATE"", so remove this restriction
to allow this library to work from a v1.0 peer.  The following x509.ParseCertificate will fail if
it is not a certificate anyway, so it is safe.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyien:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Oct/17 5:57 PM;smithbk;https://gerrit.hyperledger.org/r/14223;;;",,,,,,,,,,,,,,,,,,,
"[Interoperability testing] Org1 registrar can registar users with affiliation ""org2.department1""",FABC-206,27945,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,harrisob@us.ibm.com,Ratnakar,Ratnakar,23/Feb/18 11:26 PM,15/Jul/19 8:51 PM,28/Oct/23 2:21 AM,25/Feb/18 1:22 AM,v1.0.6,,,,,,Unscheduled,,,,,,0,,,,,,"Org1 admin is able to register new users with affiliation ""org2.department1""  in Fabric-CA V1.0.x

This behavior is not correct and the same is fixed in Fabric-ca V1.1 but not in V1.0

To run compatibility tests using 1.0 SDK against 1.1 Fabric CA, we propose to fix this in Fabric-CA v1.0.x and also change the SDK integration test suit to reflect the same in release branch.

 

_Gist of failure logs from SDK_
{code:java}
not ok 775 Error: fabric-ca request register failed with errors [[\{""code"":0,""message"":""Registration of 'auditor' failed in affiliation validation: : scode: 401, local code: 44, local msg: Caller does not have authority to act on affiliation 'org2.department1', remote code: 20, remote msg: Authorization failure""}]] at IncomingMessage.<anonymous> (/root/Go/src/github.com/hyperledger/fabric-sdk-node/fabric-ca-client/lib/FabricCAClientImpl.js:592:22) at emitNone (events.js:111:20) at IncomingMessage.emit (events.js:208:7) at endReadableNT (_stream_readable.js:1055:12) at _combinedTickCallback (internal/process/next_tick.js:138:11) at process._tickDomainCallback (internal/process/next_tick.js:218:9)

...

Error: Error: fabric-ca request register failed with errors [[\{""code"":0,""message"":""Registration of 'auditor' failed in affiliation validation: : scode: 401, local code: 44, local msg: Caller does not have authority to act on affiliation 'org2.department1', remote code: 20, remote msg: Authorization failure""}]]

{code}
 

_CA Error logs:_
{code:java}
018/02/22 20:51:51 [DEBUG] Validate Affiliation
2018/02/22 20:51:51 [DEBUG] Checking to see if affiliation 'org2.department1' contains caller's affiliation 'org1.department2'
2018/02/22 20:51:51 [DEBUG] Registration of 'auditor' failed: Registration of 'auditor' failed in affiliation validation: : scode: 401, local code: 44, local msg: Caller does not have authority to act on affiliation 'org2.department1', remote code: 20, remote msg: Authorization failure

{code}
 ",,denyeart,harrisob@us.ibm.com,Ratnakar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-518,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyylb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,harrisob@us.ibm.com,Ratnakar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Feb/18 11:46 PM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/18311/;;;","25/Feb/18 3:41 AM;Ratnakar;[~skarim] Do you have any update from Fabric-CA side ?;;;","27/Feb/18 12:11 AM;skarim;Working on it today should have a CR soon. ;;;","27/Feb/18 2:23 AM;skarim;https://gerrit.hyperledger.org/r/#/c/18427/;;;","14/Mar/18 4:31 AM;denyeart;fabric-ca release-1.0 fix: https://gerrit.hyperledger.org/r/#/c/18939/;;;",,,,,,,,,,,,,,,
"Fabric-CA: When using postgres as DB, Serial and AKI values are in non-hex, not usable in commands like revoke",FABC-207,26749,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,Nishi,Nishi,12/Jan/18 12:27 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,12/Jan/18 1:49 AM,,,,,,,,,,,,,0,,,,,,"Currently the way Serial, AKI values are stored when using postgres DB are not consumable directly to use in commands like revoke.

Commit level: *ebfc050baee7ea222edc64637741f406fa9c54b0*

For examples comparing values (for different users though) in postgres and mysql we have:
{code:java}
Serial# postgres: \x35346461653064643335663737353036316664383666383030336439346330336362313935366462

mysql:  721e1a8eda83525bdd7f6a2093122720b420545c{code}
 
{code:java}
AKI: 

postgres: \x35333739363238353333356436323264636433356235363331363262643966633934626232343665

mysql:7901c8c18a48063ff43e9cb7727d230961fd71{code}
 

 

Could we have Serial and AKI values directly in hex format in postgres DB like in mysql?",,Nishi,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyt47:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Nishi,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Jan/18 1:49 AM;skarim;This is not really a bug, it is just how Postgres chooses to display binary data. We derive the certificates table schema from CFSSL and we can't really change the schema, otherwise, we risk being incompatible with CFSSL. Both Serial and AKI are stored as hex. The right way to retrieve column data in hex format is to do a SQL query rather than just inspecting the table directly. 

For example, you can query the Serial number in hex format with:

SELECT convert_from(serial_number, 'SQL_ASCII') FROM certificates;

I am marking this as Done, please open back up if you don't agree. ;;;",,,,,,,,,,,,,,,,,,,
make unit-tests fails on Windows 7,FABC-208,19425,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,lehors,lehors,lehors,22/Jul/17 7:05 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,29/Sep/17 11:09 PM,v1.0.0,,,,,,v1.1.0,,,,,,0,,,,,,"This is a follow-up to FAB-5305.

Looking at the problem more broadly it has become apparent that we need to be more careful about not leaving CA databases open all over the place. On Windows this translates in files remaining locked, which prevents the deletion of those files, after which all sorts of errors occur as a consequence. While unit-tests exacerbate the problem by repeatedly creating databases, doing some test, and deleting them, which is probably not frequently done in a normally running system this still exhibits a problem that ought to be addressed.

To fix this problem, we need to:
 # check that os.RemoveAll doesn't return any error and act on them if there is any
 # consistently close any open CA database when done

 ",,lehors,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-253,FABC-327,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy9ev:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,lehors,mastersingh24,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Jul/17 5:11 AM;mastersingh24;this is not needed for a patch release;;;",,,,,,,,,,,,,,,,,,,
Fix compile error in tls.go,FABC-209,15761,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,16/Apr/17 3:03 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,16/Apr/17 11:04 PM,,,,,,,v1.0.0,,,,,,0,,,,,,"There is compile error in tls.go as follows:

# github.com/hyperledger/fabric-ca/lib/tls
lib/tls/tls.go:62: cfg.CertFilesList undefined (type *ClientTLSConfig has no field or method CertFilesList)

",,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq1r:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Apr/17 3:05 AM;smithbk;See http://gerrit.hyperledger.org/r/8073;;;","16/Apr/17 11:04 PM;mastersingh24;make sure you assign things you are working on to yourself;;;",,,,,,,,,,,,,,,,,,
CI is failing frequently at client_whitebox_test.go:124,FABC-210,18524,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,22/Jun/17 4:22 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,28/Jul/17 4:55 AM,v1.0.0,,,,,,v1.0.1,,,,,,0,,,,,,"The following failure is occurring more and more frequently in CI:

14:57:10 --- FAIL: TestTLSClientAuth (5.61s)
14:57:10 	client_whitebox_test.go:124: Failed to reenroll over HTTPS: POST failure [Post https://localhost:7058/reenroll: dial tcp 127.0.0.1:7058: getsockopt: connection refused]; not sending

The unit tests start and stop servers rapidly and has exposed a timing window in server close.
This is not a problem that can occur when using the fabric-ca-server CLI, but only when using the library APIs as is done by the unit tests.

The Server object is defined in lib/server.go.  Here is how server.Stop is supposed to work.
1) The server.Stop function closes the listener file descriptor.  (I refer to the ""stop thread"" as the thread which calls server.Stop.)
    The stop thread then waits by reading from a channel associated with the server object.
2) The listener thread detects an error because the file descriptor was closed in #1 by the server thread.
     The listener thread then releases the listening port and writes true to the channel from which the stop thread is reading.
3) The stop thread reads from the channel and returns without error.
4) We are now safe to start the Server again because the port is now unbound.

The main problem was that the listener thread was writing true to the channel before checking to see if it needed to close the
listener file descriptor.  The listener thread needs to try to close the file descriptor because it is possible that the listen will return for another reason other than Stop being called.
Another problem is that the listener thread was also calling the logic to wait for the listener to finish.  This of course should have only been called by the stop thread.
And finally, there was also a small timing window in closeListener that required a mutex.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3kn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Jun/17 7:19 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/10953/;;;",,,,,,,,,,,,,,,,,,,
Error response has body twice,FABC-211,15412,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,21/Mar/17 6:34 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,30/Mar/17 11:01 PM,,,,,,,,,,,,,0,,,,,,"To reproduce:
1) fabric-ca-server start -b admin:adminpw
2) fabric-ca-client revoke -a foo -s bar

The server returns a response with two bodies as follows:
{code}
{""success"":false,""result"":null,""errors"":[{""code"":10003,""message"":""sql: no rows in result set""}],""messages"":[]}
{""success"":false,""result"":null,""errors"":[{""code"":10003,""message"":""sql: no rows in result set""}],""messages"":[]}
{code}

The server has the following error:
{code}
2017/03/20 17:30:06 http: multiple response.WriteHeader calls
{code}

Apparently it is writing the error twice and the 2nd one is trying to explicitly write the headers again.  This is probably something to do with cfssl's handler's that are registered in lib/server.go's registerHandler func.  It isn't obvious though.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx54v:",,,,,,Sprint 14 - Membership Service,Sprint 15 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
fabric-ca golang 1.8 dependency breaks postgres driver,FABC-212,28944,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,rennman,rennman,28/Mar/18 5:07 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,17/May/18 4:41 AM,v1.0.0,,,,,,v1.0.6,,,,,,0,,,,,,"The go postgres driver 
[https://github.com/lib/pq]
was recently updated to require goloang>=1.8.  This essentially breaks fabric-ca 1.0, since go1.7.2 is in the baseimage.

To compensate, it requires 'locking' in a previous commit of pq that does not require go1.8.
To effect this, the Dockerfile will be updated to eliminate the 'go get' command that installs pq and manually clone, checkout, build and install the pq driver.",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx047:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-server started successfully with wrong cert file path,FABC-213,28043,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,nnao,nnao,nnao,27/Feb/18 8:06 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,18/Jun/18 9:03 PM,v1.1.0-alpha,,,,,,v1.2.0,,,,,,0,,,,,,"Although CA cert file was specified in arguments and it was the wrong path, key and certification files were generated and fabric-ca-server starts successfully
In this situation, I think it should stop the generation of keys and result in failure.
 
{code:java}
root@28b0de0580f5:/# fabric-ca-server start -b admin:admin --ca.keyfile <correct path>/ec-key.pem --ca.certfile <wring path>/ec.pem
2018/02/26 19:59:56 [INFO] Created default configuration file at /etc/hyperledger/fabric-ca-server/fabric-ca-server-config.yaml
2018/02/26 19:59:56 [INFO] Starting server in home directory: /etc/hyperledger/fabric-ca-server
2018/02/26 19:59:56 [INFO] Server Version: 1.1.0-beta-snapshot-680960e
2018/02/26 19:59:56 [INFO] Server Levels: &{Identity:1 Affiliation:1 Certificate:1}
2018/02/26 19:59:56 [INFO] generating key: &{A:ecdsa S:256}
2018/02/26 19:59:56 [INFO] encoded CSR
2018/02/26 19:59:56 [INFO] signed certificate with serial number 451130967267412479206304574486390166605202983091
2018/02/26 19:59:56 [INFO] The CA key and certificate were generated for CA
2018/02/26 19:59:56 [INFO] The key was stored by BCCSP provider 'SW'
2018/02/26 19:59:56 [INFO] The certificate is at: /tmp/test/ec.pem
2018/02/26 19:59:57 [INFO] Initialized sqlite3 database at /etc/hyperledger/fabric-ca-server/fabric-ca-server.db
2018/02/26 19:59:57 [INFO] Home directory for default CA: /etc/hyperledger/fabric-ca-server
2018/02/26 19:59:57 [INFO] Listening on http://0.0.0.0:7054
{code}
",,aambati,denyeart,kchristidis,nnao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx03z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,denyeart,kchristidis,nnao,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Feb/18 10:02 AM;aambati;my immediate thought is that it won't be possible to distinguish between the case where --ca.keyfile and --ca.certfile are specified and the case where they are not specified and defaults are used

May be if the certfile value is not default value, then if the file does not exist , we could error out.;;;","27/Feb/18 12:01 PM;nnao;In following code, if cert file value does not default and it does not exist(certFileExists is false), we couldn't get an error.

[https://github.com/hyperledger/fabric-ca/blob/680960ef5b701a177d8acfc5676eda0d83104100/lib/ca.go#L236-L253]

I suppose fabric-ca-server will return an error if certFileExists is false.;;;","27/Feb/18 12:03 PM;denyeart;Let's consider for 1.2.;;;","28/Feb/18 3:15 AM;nnao;There is no problem to move target v1.2.

https://gerrit.hyperledger.org/r/#/c/18479/;;;","22/May/18 3:46 AM;kchristidis;[~aambati], [~smithbk]: Can you please review the CR? Let's try to get this in for 1.2.;;;","22/May/18 5:22 AM;aambati;[~kchristidis] i will look
;;;","27/May/18 6:20 AM;aambati;[~nnao]After thinking about this problem some more, I think best way to handle this problem with out breaking existing behavior is to print a warning message when user specified CA certificate is not found, if the name and path of the specified cert does not match defaults. For example, 
if user specified cert file is /tmp/ca-cert.pem or <serverhome>/myca-cert.pem and file does not exist a warning message is printed.

But if the specified file is <serverHome>ca-cer.pem then no warning message is printed as the server won't be able to distinguish between user supplied vs default cert.;;;","30/May/18 9:46 AM;nnao;[~aambati] Thank you. I think that there is no problem even If the specified file is default cert name. First, the specified file had checked exist or not(L214, L234). Then if the file does not exist, CA makes default cert file(L255).

https://github.com/hyperledger/fabric-ca/blob/db9ecd382bc520c9b8ba0ca7bfd0a1f054fe41c1/lib/ca.go#L214
https://github.com/hyperledger/fabric-ca/blob/db9ecd382bc520c9b8ba0ca7bfd0a1f054fe41c1/lib/ca.go#L234
https://github.com/hyperledger/fabric-ca/blob/db9ecd382bc520c9b8ba0ca7bfd0a1f054fe41c1/lib/ca.go#L255

Is it good to show only the warning message? or show the warning message and stop the process?
My patch shows the warning message and stops the process.
https://gerrit.hyperledger.org/r/c/18479/;;;","08/Jun/18 11:10 PM;aambati;[~nnao]Stopping the process is going to change the behavior. I think best way forward is to log a warning message and you can look for it in your scripts to stop the server;;;","09/Jun/18 12:09 AM;nnao;[~aambati] I got it. I had updated my patch.
https://gerrit.hyperledger.org/r/c/18479/;;;","09/Jun/18 12:23 AM;aambati;[~nnao]Thanks for taking time to fix this problem. Added a comment to the change set.  Pls see.;;;",,,,,,,,,
Revendor cfssl - cannot clone successfully fabric-ca from Gerrit to Windows based platform,FABC-214,17548,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,philippe06guerton,philippe06guerton,06/Jun/17 6:10 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,28/Jul/17 5:07 AM,v1.0.0-alpha1,v1.0.0-alpha2,,,,,v1.0.1,,,,,07/Jun/17 12:00 AM,0,build-system,,,,,"When using cloning command:

git clone ssh://LFID@gerrit.hyperledger.org:29418/fabric-ca && scp -p -P 29418 LFID@gerrit.hyperledger.org:hooks/commit-msg fabric-ca/.git/hooks/

with LDIF set to my Linux Foundation ID, Windows issues the following message:

error: unable to create file vendor/github.com/cloudflare/cfssl/vendor/github.co
m/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26
_SHA1WithRSA.crt: Invalid argument
error: unable to create file vendor/github.com/cloudflare/cfssl/vendor/github.co
m/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26
_SHA1WithRSA_2.crt: Invalid argument
Checking out files: 100% (4140/4140), done.
fatal: unable to checkout working tree
warning: Clone succeeded, but checkout failed.

 

It appears that the filename is not valid for Windows as it contains ':'.","Windows Server 2012 R2 Standard

64-bit Operating System, x64-based processor

Intel(R) Xeon(R) CPU E5-2690 0 @ 2.90 GHz (8 processors)

RAM 16 GB

 ",aambati,ChristopherFerris,mastersingh24,philippe06guerton,skarim,smithbk,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-4179,,,,,,,,,"1|hzx3kf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,ChristopherFerris,mastersingh24,philippe06guerton,skarim,smithbk,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Jun/17 8:53 PM;ChristopherFerris;It is unclear what we can do about this as these files are included in vendor/ and are not ours to rename. Suggest that you take this up with Cloud Flare or install fabric-ca into a virtualized context (we have the fabric-buildenv docker container that could be used for this purpose).

Apologies for the inconvenience. I have lowered the priority as again, there isn't much we can do to address this issue presently.;;;","08/Jun/17 9:54 PM;smithbk;Looks like this is now fixed in cfssl, so it should work once we revendor

See https://github.com/cloudflare/cfssl_trust/issues/26;;;","26/Jun/17 8:37 PM;philippe06guerton;Opened issue #780 with Cloud Fare https://github.com/cloudflare/cfssl/issues/780;;;","26/Jun/17 8:42 PM;philippe06guerton;Closed issue with Cloud Fare as it is the same [https://github.com/cloudflare/cfssl_trust/issues/26]. ;))

Waiting 'revendoring'...In the meanwhile I went on for Christopher Ferris alternative with fabric-devenv;;;","15/Jul/17 6:56 PM;mastersingh24;BTW - this really is not an issue.  The missing files are not used by fabric-ca and you can still build fabric-ca fine on Windows;;;","15/Jul/17 6:57 PM;mastersingh24;Also - we should not revendor anything in a patch release unless we need it for a bug.  This should be moved to 1.1 or future ;;;","20/Jul/17 5:03 AM;aambati;[~smithbk] [~skarim] pls see Gari's comment;;;","20/Jul/17 6:32 AM;skarim;[~mastersingh24] Gari, I think we should revendor CFSSL for 1.0.1, there is a bug [FAB-3026] that we are trying to get out for 1.0.1 that needs some latest changes that went into CFSSL. This is the change that went in to CFSSL https://github.com/cloudflare/cfssl/pull/776;;;","21/Jul/17 8:03 AM;aambati;https://gerrit.hyperledger.org/r/#/c/11793/;;;",,,,,,,,,,,
Add short name for revoke commands,FABC-215,16130,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,01/May/17 10:39 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,03/May/17 9:24 PM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"Add short names for flags for revoke specific commands. Revoke command can use -e (enrollment id), -a (aki), -s (serial) to specify flags. ",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxruv:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Copy relative paths and deep copy pointers from default CA,FABC-216,16176,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,skarim,skarim,skarim,03/May/17 5:42 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,12/May/17 9:29 AM,v1.0.0,,,,,,v1.0.0-alpha2,,,,,,0,MembershipServices,,,,,"Missing values in configuration of additional CA must be replaced with values from the default CA configuration. If relative paths are specified in the default CA configuration, the same relative paths must copied over to additional CAs if missing before the paths are made absolute.

If absolute paths are specified in the default CA, then the entire absolute path should also be copied over to additional CAs if missing.

Also, need to do a deep copy of any pointers that exist in the default CA. Otherwise, it creates conflicts with additional CAs and values get overwritten.

For example, assume the default CA and one non-default CA (CA1), with two files as follows:

1) fabric-ca-server-config.yaml (for the default CA)

This is the main config file which contains among other things, the following two relative filenames.

keystore: msp/keystore cafiles: cas/ca1/config.yaml

The cafiles property points to the file below.

2) cas/ca1/config.yaml (for CA1)

This is a sparse file which contains the name of the CA but need not contain anything else since it inherits values from the default CA; obviously you can override any of the values that you want.

Consider where CA1 gets its ""keystore"" value. It should be at ""msp/keystore"" relative to the ""cas/ca1/config.yaml"" file. In order to make this work, we are supposed to do the following: a) read CA1's sparse config b) copy the missing values from the default CA's config, doing a deep copy

There are two problems with the current code: 1) Not doing a deep copy, so the keystore wasn't copied because it wasn't at the top level. And a lot of other info was missing of course. This is fixed by [https://gerrit.hyperledger.org/r/#/c/8853] 2) The filenames in the default CA's config were being made absolute before the copy rather than after, which meant they pointed to the same path as the default CA.

 

This also fixes some problems with intermediate CA support.

For example, this fixes the following error when starting an intermediate CA:

Start the root CA as follows:
{code:java}
# fabric-ca-server start -c root/config.yaml -b a:b -p 7055
2017/05/09 09:24:17 [INFO] Created default configuration file at /Users/keith/go/src/github.com/hyperledger/fabric-ca/bin/root/config.yaml
2017/05/09 09:24:17 [INFO] Starting server in home directory: /Users/keith/go/src/github.com/hyperledger/fabric-ca/bin/root
2017/05/09 09:24:17 [INFO] generating key: &{A:ecdsa S:256}
2017/05/09 09:24:17 [INFO] encoded CSR
2017/05/09 09:24:17 [INFO] signed certificate with serial number 501629925030367703483356481723098271810642071467
2017/05/09 09:24:17 [INFO] The CA key and certificate were generated for CA
2017/05/09 09:24:17 [INFO] The key was stored by BCCSP provider 'SW'
2017/05/09 09:24:17 [INFO] The certificate is at: /Users/keith/go/src/github.com/hyperledger/fabric-ca/bin/root/ca-cert.pem
2017/05/09 09:24:17 [INFO] Initialized sqlite3 database at /Users/keith/go/src/github.com/hyperledger/fabric-ca/bin/root/fabric-ca-server.db
2017/05/09 09:24:17 [INFO] Home directory for default CA: /Users/keith/go/src/github.com/hyperledger/fabric-ca/bin/root
2017/05/09 09:24:17 [INFO] Listening at http://0.0.0.0:7055
2017/05/09 09:24:41 [INFO] signed certificate with serial number 669469741261274226287810516031688469970869826451
2017/05/09 09:24:41 [INFO] [::1]:60832 - ""POST /enroll"" 200{code}
 

Attempt to start the intermediate CA as follows:
{code:java}
# fabric-ca-server start -c intermediate/config.yaml -b c:d -u http://a:b@localhost:7055
2017/05/09 09:18:19 [INFO] Created default configuration file at /Users/keith/go/src/github.com/hyperledger/fabric-ca/bin/intermediate/config.yaml
2017/05/09 09:18:19 [INFO] Starting server in home directory: /Users/keith/go/src/github.com/hyperledger/fabric-ca/bin/intermediate
2017/05/09 09:18:19 [INFO] CA Home Directory: /Users/keith/go/src/github.com/hyperledger/fabric-ca/bin/intermediate
2017/05/09 09:18:19 [INFO] generating key: &{A:ecdsa S:256}
2017/05/09 09:18:19 [INFO] encoded CSR
2017/05/09 09:18:19 [INFO] The CA key and certificate were generated for CA
2017/05/09 09:18:19 [INFO] The key was stored by BCCSP provider 'SW'
2017/05/09 09:18:19 [INFO] The certificate is at: /Users/keith/go/src/github.com/hyperledger/fabric-ca/bin/intermediate/ca-cert.pem
2017/05/09 09:18:19 [INFO] Initialized sqlite3 database at /Users/keith/go/src/github.com/hyperledger/fabric-ca/bin/intermediate/fabric-ca-server.db
Error: Could not find the private key in BCCSP keystore nor in keyfile /Users/keith/go/src/github.com/hyperledger/fabric-ca/bin/intermediate/ca-key.pem: open /Users/keith/go/src/github.com/hyperledger/fabric-ca/bin/intermediate/ca-key.pem: no such file or directory{code}
 ",,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3040,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3040,,,,,,,,,"1|hzxsfz:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/May/17 5:54 AM;smithbk;See http://gerrit.hyperledger.org/r/8853;;;","09/May/17 4:19 AM;smithbk;[https://gerrit.hyperledger.org/r/#/c/8944];;;","11/May/17 12:42 AM;skarim;https://gerrit.hyperledger.org/r/#/c/8909;;;",,,,,,,,,,,,,,,,,
Calling Client function LoadIdentity results in NPE,FABC-217,18328,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,20/Jun/17 12:26 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,21/Jun/17 2:59 AM,v1.0.0,v1.0.0-alpha1,v1.0.0-alpha2,,,,v1.0.0,v1.0.0-rc1,,,,,0,,,,,,"Making a call to public function LoadIdentity(keyFile, certFile string) results in an NPE if client object has not been initialized. The following error is seen:

{code:java}
panic: runtime error: invalid memory address or nil pointer dereference [recovered]
	panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x58 pc=0x44950a7]

goroutine 7 [running]:
testing.tRunner.func1(0xc4201ca0d0)
	/usr/local/go/src/testing/testing.go:622 +0x29d
panic(0x472dae0, 0x4af4a50)
	/usr/local/go/src/runtime/panic.go:489 +0x2cf
github.com/hyperledger/fabric-ca/util.ImportBCCSPKeyFromPEM(0x47db39a, 0x16, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0xc420295680)
	/Users/saadkarim/Development/src/github.com/hyperledger/fabric-ca/util/csp.go:283 +0x257
github.com/hyperledger/fabric-ca/lib.(*Client).LoadIdentity(0xc4201dbc20, 0x47db39a, 0x16, 0x47d73b8, 0x12, 0x0, 0x4abab80, 0xc42029bd50)
	/Users/saadkarim/Development/src/github.com/hyperledger/fabric-ca/lib/client.go:319 +0x2fd
github.com/hyperledger/fabric-ca/lib_test.testLoadIdentity(0xc4201dbc20, 0xc4201ca0d0)
	/Users/saadkarim/Development/src/github.com/hyperledger/fabric-ca/lib/client_test.go:541 +0xfc
github.com/hyperledger/fabric-ca/lib_test.TestCLIClient(0xc4201ca0d0)
	/Users/saadkarim/Development/src/github.com/hyperledger/fabric-ca/lib/client_test.go:148 +0x193
testing.tRunner(0xc4201ca0d0, 0x47fe480)
	/usr/local/go/src/testing/testing.go:657 +0x96
created by testing.(*T).Run
	/usr/local/go/src/testing/testing.go:697 +0x2ca
exit status 2
{code}

Need to make sure that the initializing is performed as the first step inside the LoadIdentity function.
",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy4r3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jun/17 10:25 PM;skarim;https://gerrit.hyperledger.org/r/#/c/10783/;;;",,,,,,,,,,,,,,,,,,,
"The ""affiliations"" table by fabric-ca doesn't have a primary key",FABC-218,27237,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,mrshah-ibm,mrshah-ibm,30/Jan/18 10:15 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,10/Feb/18 1:07 AM,v1.1.0-alpha,,,,,,,,,,,,0,,,,,,"The affiliations table created by fabric-ca in mysql db does not have a primary key. Thus group replication for HA mysql db fails.

Following is the error on mysql db:

{{{{2018-01-30T13:01:34.674707Z 41 [ERROR] Plugin group_replication reported: 'Table affiliations does not have any PRIMARY KEY. This is not compatible with Group Replication' 2018-01-30T13:01:34.675379Z 41 [ERROR] Plugin group_replication reported: 'Table affiliations does not have any PRIMARY KEY. This is not compatible with Group Replication' 2018-01-30T13:01:34.675906Z 41 [ERROR] Plugin group_replication reported: 'Table affiliations does not have any PRIMARY KEY. This is not compatible with Group Replication' 2018-01-30T13:01:34.676452Z 41 [ERROR] Plugin group_replication reported: 'Table affiliations does not have any PRIMARY KEY. This is not compatible with Group Replication' 2018-01-30T13:01:34.676962Z 41 [ERROR] Plugin group_replication reported: 'Table affiliations does not have any PRIMARY KEY. This is not compatible with Group Replication'}}}}

 

Because of this issue, the registration/enrollment starts failing on fabric-ca. The error as below:

{{2018/01/30 13:04:28 [DEBUG] Registration of 'orderer0b' failed: Registration of 'orderer0b' to validate: Failed getting affiliation 'org1': : scode: 404, code: 63, msg: Failed to get Affiliation: sql: no rows in result set}}

 ",,aambati,mrshah-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyv3r:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,mrshah-ibm,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jan/18 6:26 AM;aambati;https://gerrit.hyperledger.org/r/c/17349/;;;","31/Jan/18 6:48 AM;mrshah-ibm;[https://gerrit.hyperledger.org/r/#/c/17349/] Correcting the link in the comment;;;",,,,,,,,,,,,,,,,,,
fabric-ca-client -M option does not work for the MSP keystore,FABC-219,16865,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,smithbk,smithbk,smithbk,19/May/17 1:40 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,26/May/17 10:51 AM,,,,,,,v1.0.0,v1.0.0-alpha2,,,,,0,,,,,,"To reproduce the problem, issue the following command.
{code:java}
# fabric-ca-client enroll -u http://admin:adminpw@localhost:7054 -M /tmp/msp{code}
The keystore directory is created at /tmp/msp/keystore but the key is stored incorrectly in the $HOME/.fabric-ca-client/msp/keystore directory.

This means that when the -M option is used to enroll an orderer or peer, the key is not accessible to the orderer or peer.",,Clayton Sims,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxw07:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/May/17 7:27 AM;smithbk;http://gerrit.hyperledger.org/r/9553 [FAB-4015] Fix -M option of fabric-ca-client;;;","22/May/17 11:20 PM;Clayton Sims;did this make it into alpha 2?  should we remove alpha2 tag?;;;",,,,,,,,,,,,,,,,,,
-b should not be required when LDAP is enabled,FABC-220,28268,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,aambati,aambati,08/Mar/18 12:10 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,08/Mar/18 12:34 AM,v1.1.0,,,,,,v1.2.0,,,,,,0,,,,,,"When starting /initializing the server for the first time with LDAP enabled, user should not be required to specify -b option.

Currently, it is forcing the user to specify -b (bootstrap ID and password) option. This should not be the case because when LDAP is enabled, LDAP acts as the user registry. so, there is really no need for a bootstrap ID.",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzz04v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Mar/18 12:34 AM;aambati;This problem was fixed in 1.1-rc1;;;",,,,,,,,,,,,,,,,,,,
SECURITY fabric-ca allows anyone to request a certificate of any name/EnrollmentID (e.g. an hf.Revoker),FABC-221,17770,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,smithbk,angelo.decaro,angelo.decaro,12/Jun/17 11:05 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,15/Jun/17 10:19 PM,v1.0.0-alpha2,v1.0.0-beta,,,,,v1.0.0-rc1,,,,,14/Jun/17 12:00 AM,0,Security,,,,,"If Alice wants to revoke Bob, Alice needs to be a fabric-ca revoker.
This is implemented in the following way: Fabric-ca associates to certificates' common names a set of attributes. Then, if an identity has attribute hf.Revoker set to true, then that identity can revoke other identities.

The mechanism described above is subject to a privileges escalation attack. In a nutshell, Alice can spoof the common name of a fabric-ca revoker and asks the fabric-ca to issue a certificate for her with that common name. Alice can then use that certificate to revoke Bob and more.

The issue comes from the fact that attributes are bound to common names instead of certificates. In addition, a malicious client can force fabric-ca to generate a certificate for any common-name it wants despite the fabric-ca API.
",,angelo.decaro,baohua,dhuseby,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,FAB-4546,,,,,,,,,,,,,,,,,,,,,,,,"14/Jun/17 3:07 AM;JonathanLevi;2017-06-13_SequenceDiagram.png;https://jira.hyperledger.org/secure/attachment/11048/2017-06-13_SequenceDiagram.png",,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy09z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,angelo.decaro,baohua,dhuseby,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Jun/17 3:05 AM;smithbk;Will this security hole be fixed if we return an error on an enroll request when the enrollment ID and the CSR's CN are not equal?  It seems that the CN could  not be spoofed then.;;;","13/Jun/17 4:53 AM;JonathanLevi;Where is the design doc for this feature?;;;","13/Jun/17 6:23 AM;smithbk;http://gerrit.hyperledger.org/r/10503;;;","13/Jun/17 8:53 AM;smithbk;See http://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#revoking-a-certificate-or-identity for doc describing the permissions required for revocation;;;","13/Jun/17 11:39 AM;JonathanLevi;Keith, I am well aware of the user-guide, and how it suggests that one can revoke a certificate. Thank you.

To repeat, is there/was there a *design document* for the feature? Can we please see a design doc/sequence diagram that explains how the system works (e.g., register/enroll, obtaining an EnrollmentID,  all the way to not being able to abuse the design) ?

Thank you;;;","13/Jun/17 11:55 AM;baohua;By the way, suggest mark this as a security bug.;;;","13/Jun/17 11:59 AM;JonathanLevi;I agree with you [~baohua] that this is a security issue, though that JIRA flag is currently used for something else. I can't tell yet if this is just a ""bug"" or a serious design issue.

Relying on the ""client"" to always do what the server expects, is certainly not secure.

It is very difficult to understand and evaluate what's really going one without a diagram, at least for me.;;;","13/Jun/17 12:02 PM;baohua;Agree, jonathan, we cannot rely on client at any time. 

This will also help bring some lessons on our SDK design.

And if we think this is a security bug, then should follow the progress at [https://docs.google.com/document/d/1gne57E4XEAxETZh_pmyVVWyI7FgXkmD72U3HfG193D8/edit,] which was accepted last week?;;;","13/Jun/17 12:08 PM;JonathanLevi;# I can't access that Google doc for some reason.
 # Just to be clear: I don't think. This is 100% a severe security issue, as I have highlighted in the title.
 # I can't assess if the ""fix"" fixes it, or whether it's another quick patch.

I need the requested info from [~smithbk] for assessing the fix.;;;","13/Jun/17 9:38 PM;smithbk;Jonathan, Yang, I'm working on some documentation.  I will post ASAP ... at least some time today.
I also can't access the google doc above.;;;","14/Jun/17 3:03 AM;smithbk;For design doc with a focus on security, see https://docs.google.com/document/d/1x7bbSkLt3VLexNMECJXbOYJ3xX8Ck9Q6O6W1dmnVaRQ
It is a WIP, so let me know what is missing.;;;","14/Jun/17 3:10 AM;JonathanLevi;Thank you Keith (and sorry if I come across as being too prudent). I believe the easiest way for us to evaluate the ""workflow"" or ""state"" is by taking a look at a sequence diagram. See for example, a screenshot I quickly took from an old version of the SDK Design Spec ([https://docs.google.com/document/d/1R5RtIBMW9fZpli37E5Li5_Q9ve3BnQ4q3gWmGZj6Sv4/edit)]
!2017-06-13_SequenceDiagram.png|width=743,height=499!;;;","14/Jun/17 3:10 AM;JonathanLevi;To be clear, it does not really have to be this pretty, etc. I mainly want to take a look at the higher level of ""what is happening"", in terms of what logic/checks are in place and when. If you see what I mean?;;;","14/Jun/17 7:47 AM;smithbk;Jonathan, I added web sequence diagrams to the doc;;;","15/Jun/17 5:34 AM;Clayton Sims;Jonathan - any update on reviewing this?;;;","15/Jun/17 5:36 AM;JonathanLevi;Yes, there is, while a few of us are looking into this (including [~mastersingh24] and [~dhuseby]) - we should have an update about this today... ;;;","17/Jun/17 12:53 AM;dhuseby;Doesn't this nerf common names then?  They can only match the CSR? ;;;",,,
fabric-ca readthedocs update to match current features for alpha,FABC-222,15378,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,16/Mar/17 11:48 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,14/Apr/17 9:30 AM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,This is an update for the fabric-ca's readthedocs to match the current features for alpha.,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4fj:",,,,,,Sprint 14 - Membership Service,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
fabric-ca-server index out of range for serverregister,FABC-223,21005,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,27/Sep/17 2:26 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,20/Oct/17 4:28 AM,,,,,,,v1.1.0,,,,,,0,,,,,,"When handling register request, we aren't checking that hf.Registrar.Roles exists, only that no error is returned from ctx.GetUserInfo() :
 registrarRolesAttr, registrarAffiliation, err := ctx.GetUserInfo([]string\{""hf.Registrar.Roles""})
 if err != nil \{
 return """", fmt.Errorf(""Failed to get user info for registrar: %s"", err)
 }

Consequently, if hf.Registrar.Roles is not defined for the ID making the request, the servers panics:



2017/09/26 17:15:40 http: panic serving 127.0.0.1:57152: runtime error: index out of range
goroutine 20 [running]:
net/http.(*conn).serve.func1(0xc42041e500)
    /opt/go/src/net/http/server.go:1491 +0x12a
panic(0xab8d20, 0xc420016110)
    /opt/go/src/runtime/panic.go:458 +0x243
github.com/hyperledger/fabric-ca/lib.registerHandler(0xc42041e700, 0xc42041e700, 0x0, 0x0, 0x1)
    /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/serverregister.go:65 +0x445
github.com/hyperledger/fabric-ca/lib.(*serverEndpoint).ServeHTTP(0xc42042a0f0, 0x10777c0, 0xc4203fcf70, 0xc42041a1e0)
    /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/serverendpoint.go:44 +0xc93
net/http.(*ServeMux).ServeHTTP(0xc42042a030, 0x10777c0, 0xc4203fcf70, 0xc42041a1e0)
    /opt/go/src/net/http/server.go:2022 +0x7f
net/http.serverHandler.ServeHTTP(0xc42041e480, 0x10777c0, 0xc4203fcf70, 0xc42041a1e0)
    /opt/go/src/net/http/server.go:2202 +0x7d
net/http.(*conn).serve(0xc42041e500, 0x1078180, 0xc420426300)
    /opt/go/src/net/http/server.go:1579 +0x4b7
created by net/http.(*Server).Serve
    /opt/go/src/net/http/server.go:2293 +0x44d

 

A potential fix is to check that registrarRolesAttr isn't nil before using it:

 registrarRolesAttr, registrarAffiliation, err := ctx.GetUserInfo([]string\{""hf.Registrar.Roles""})
...

+ if len(registrarRolesAttr) >=0 \{
+ return """", fmt.Errorf(""Failed to get roles info for registrar: %s"", callerID)
+ }",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyhaf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermediate CA does not copy CSP config from server to client,FABC-224,19289,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,vpaprots,vpaprots,vpaprots,17/Jul/17 12:19 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,21/Jul/17 7:59 PM,v1.0.0,,,,,,v1.0.1,,,,,,0,,,,,,"Intermediate-CA internally creates a client, and sends a CSR to the parent CA. This client must use the same CSP config as the server, so that the server can later access the keys generated by the client.",,mastersingh24,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3lz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,vpaprots,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Jul/17 5:11 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/11475/;;;",,,,,,,,,,,,,,,,,,,
An intermediate CA should not be able specify CN in CSR,FABC-225,16667,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,12/May/17 8:56 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,24/May/17 10:22 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,,,,0,,,,,,"When starting up a CA, in the CSR section a CN can be specified that will be used to generate a self-signed certificate if a root CA. However, when a CA is acting like an intermediate it should not be able to specify CN. An intermediate CA, acting like a client, will enroll with the root CA by providing its enrollment ID and password. The enrollment ID will take place of the CN in the certificate. An error should be thrown if an intermediate CA tries to specify a CN.

*Reproduction:*

1. On intermediate CA, execute the following: fabric-ca-server start -u http://admin:adminpw@localhost:7054 -b admin:adminpw --csr.CN notadmin

No error is thrown",,Clayton Sims,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxv13:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/May/17 11:17 PM;Clayton Sims;The fix version is marked alpha2.   Did this make it into alpha2 or should we change flag to v1.0.0 now?;;;","22/May/17 11:52 PM;skarim;Didn't make it into alpha2, changed flag accordingly. ;;;",,,,,,,,,,,,,,,,,,
[fabric-cop]Makefile check docker only when necessary,FABC-226,13876,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,tcz001,tcz001,22/Dec/16 7:34 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,22/Apr/17 2:39 AM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"The latest makefile require to have docker in path. It will block the task if we just need to run `make cop`.
It will be good to make this check only when necessary.",,smithbk,tcz001,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxg8v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,tcz001,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/17 10:46 AM;smithbk;Hi, is this still a problem?  Thanks.;;;","14/Apr/17 1:24 AM;smithbk;http://gerrit.hyperledger.org/r/8017;;;",,,,,,,,,,,,,,,,,,
remove test file in vendored package that has MPL1.1/LGPL license,FABC-227,17042,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,24/May/17 6:06 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,25/May/17 5:06 AM,v1.0.0-alpha2,,,,,,v1.0.0,,,,,,0,release,,,,,vendor/github.com/cloudflare/cfssl/testdata/roots/httplib2_cacerts.txt,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,Not a security issue,,,,,,,,FAB-3040,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxwpj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/May/17 6:25 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/9733/;;;",,,,,,,,,,,,,,,,,,,
Update readthedocs to work around fabric-ca bug,FABC-228,14444,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,31/Jan/17 3:42 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,06/Apr/17 10:10 AM,,,,,,,,,,,,,0,,,,,,"Updating the readthedocs to work around a bug which requires that we always specify a csr.json file on the enroll command.

The enroll command returns the following error when the csr.json argument (last optional argument) is omitted.
{code}
# fabric-ca client enroll -config client-config.json admin adminpw https://localhost:7054
open -port: no such file or directory
{code}
",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjjb:",,,,,,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jan/17 4:42 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/5035/;;;",,,,,,,,,,,,,,,,,,,
Revendor fabric's bccsp into fabric-ca due to bccsp move,FABC-229,14226,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,21/Jan/17 10:25 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,14/Apr/17 8:27 AM,,,,,,,v1.0.0,,,,,,0,,,,,,"The bccsp component moved in fabric, so we need to revendor and update code references in fabric-ca accordingly.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxiuf:",,,,,,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Jan/17 10:45 PM;smithbk;See http://gerrit.hyperledger.org/r/4665;;;",,,,,,,,,,,,,,,,,,,
Server start creates unused MSP directory,FABC-230,18431,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,21/Jun/17 12:10 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,22/Jun/17 7:39 AM,v1.0.0,v1.0.0-alpha1,v1.0.0-alpha2,,,,v1.0.0,v1.0.0-rc1,,,,,0,,,,,,"Starting the fabric-ca server creates an additional, unused MSP directory in the location of where the server was started from and then another one inside the server's home directory. The first MSP directory described is incorrectly created and no certificates/keys get stored there.

*Reproduction steps:*
1. cd /tmp
2. fabric-ca-server start -b a:b -c /tmp/server/server.yaml -d

There will be an MSP directory at /tmp/msp and /tmp/server/msp",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy52f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Jun/17 5:26 AM;skarim;https://gerrit.hyperledger.org/r/#/c/10855/;;;",,,,,,,,,,,,,,,,,,,
Admin enrollment issue via HFC client,FABC-231,12618,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Won't Do,,nhrishi,nhrishi,07/Sep/16 7:10 PM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:39 PM,v0.6,,,,,,,,,,,,0,,,,,,"I'm trying to enroll admin user from nodejs script on the hyperledger network but getting below errors- 
-----------------------------------------------------------------------------
root@be16b3e72515:/opt/gopath/src/github.com/hyperledger/fabric/sdk/node# export DEPLOY_MODE='net'
root@be16b3e72515:/opt/gopath/src/github.com/hyperledger/fabric/sdk/node# node test/unit/referencedata.js
I0907 07:33:45.439377037      35 ev_epoll_linux.c:84]        epoll engine will be using signal: 36
D0907 07:33:45.439468148      35 ev_posix.c:106]             Using polling engine: epoll
TAP version 13
# registrar test
not ok 1 Failure: [registrarTest]: [Error]
  ---
    operator: fail
    at: fail (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/test/unit/referencedata.js:63:7)
  ...
not ok 2 Error
  ---
    operator: error
    expected: |-
      undefined
    actual: |-
      { [Error] code: 14, metadata: { _internal_repr: {} } }
    at: fail (/opt/gopath/src/github.com/hyperledger/fabric/sdk/node/test/unit/referencedata.js:64:7)
    stack: |-
      Error
          at /usr/local/lib/node_modules/hfc/node_modules/grpc/src/node/src/client.js:417:17
  ...
---------------------------------------------------------------------------------------------------------------
On the membership service log - 
membersrvc0_1 | 2016/09/07 07:16:31 grpc: Server.Serve failed to complete security handshake.

-----------------------------------------------------------------------------------------------------------------
Membersrvc.yaml -

 admin: 1 Xurw3yU9zI0l broadridge '{""registrar"":{""roles"":[""client"",""peer"",""validator"",""auditor""],""delegateRoles"":[""client""]}}'
                WebAppAdmin: 1 DJY27pEnl16d broadridge '{""registrar"":{""roles"":[""client""]}}'
                jpm_us_user: 1 NPKYL39uKbkj jpm_us
                system_chaincode_invoker: 1 DRJ20pEql15a broadridge
                jpm_ln_user: 1 DRJ23pEQl16a jpm_ln
                jim: 1 6avZQLwcUe9b jpm_hk
                jpm_hk_user: 1 7avZQLwcUe9q jpm_hk

                # Users for asset transfer with roles test located at
                # sdk/node/test/unit/asset-mgmt-with-roles.js
                #alice: 1 CMS10pEQlB16 bank_a
                #bob: 1 NOE63pEQbL25 bank_a
                #assigner: 1 Tc43PeqBl11 bank_a

                vp: 4 f3489fy98ghf

                test_vp0: 4 MwYpmSRjupbT
                test_vp1: 4 5wgHK9qqYaPy
-----------------------------------------------------------------------------------------------------------------
Nodejs script -


",,binhn,ChristopherFerris,mastersingh24,nhrishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Sep/16 7:09 PM;nhrishi;referencedata.js;https://jira.hyperledger.org/secure/attachment/10065/referencedata.js",,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxbun:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,ChristopherFerris,mastersingh24,nhrishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Sep/16 8:36 PM;mastersingh24;It cannot connect to the URL you provided for membersrvcs

What environment are you running on?  Vagrant?

;;;","07/Sep/16 8:40 PM;nhrishi;Thanks Gari, Yes, running on vagrant and nodes in docker containers. Sorry but what could be reasons for not able to connect.
;;;","07/Sep/16 8:58 PM;mastersingh24;It's possible that membership services is not actually bound to that IP address.  How are you starting membership services and peer containers?

The typical things to look at:

{{ping 172.17.0.2}}  - make sure you can actually access this

{{docker ps}}    - should show which containers are running and if they are exposing any ports.  If you see membership services container with ports exposed, then you can use ""localhost:7054"" rather than ""172.17.0.2:7054""

From the `docker ps` command you'll get the ID and / or name of the membership services container - you can then run
{{docker inspect $NAME}} where $NAME is the name of the container.  This will give you the IP that the container is listening on

;;;","07/Sep/16 9:28 PM;nhrishi;okay. We manage ping the IP address successfully. but I see ports are not exposed. is there anyway to do? We also tried using localhost but had same issue.

-------------------------------
vagrant@hyperledger-devenv:v0.0.10-0581047:~$ docker ps -a
CONTAINER ID        IMAGE                    COMMAND                  CREATED             STATUS              PORTS               NAMES
b5a1b2e60fe1        refdata-poc-peer         ""sh -c 'sleep 15; pee""   5 hours ago         Up 5 hours                              bddtests_vp2_1
1556cd4670f9        refdata-poc-peer         ""sh -c 'sleep 15; pee""   5 hours ago         Up 5 hours                              bddtests_vp1_1
be16b3e72515        refdata-poc-peer         ""sh -c 'sleep 15; pee""   5 hours ago         Up 5 hours                              bddtests_vp0_1
0cdafe57073c        refdata-poc-membersrvc   ""membersrvc""             5 hours ago         Up 5 hours                              bddtests_membersrvc0_1
---------------------------------------

Btw we also tried to enroll using curl command but gives same error.;;;","08/Apr/17 6:00 AM;binhn;I assume this is resolved or no longer valid as v1.0.0-alpha has been out;;;","14/Apr/17 8:46 AM;ChristopherFerris;closed as no longer relevant v0.6 is deprecated;;;",,,,,,,,,,,,,,
Fix formatting issues with new Fabric-CA content,FABC-232,30784,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,pandrejko,pandrejko,01/Jun/18 2:33 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,06/Jun/18 11:57 PM,,,,,,,v1.2.0,,,,,,0,Documentation,,,,,"[https://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#manage-certificates]

In the source use double back tics ``x`` to surround text instead of single  or double quotes and it will format. better. For example change:

If the caller possesses the 'hf.Registrar.Roles’ attribute or the ‘hf.Revoker’ attribute with a value of ‘true’, all certificates which belong to identities in and below the caller’s affiliation. For example, if the client’s affiliation is “a.b”, the client may get certificates for identities who’s affiliation is “a.b” or “a.b.c” but not “a” or “a.c""

-to-

If the caller possesses the ``hf.Registrar.Roles`` attribute or the ``hf.Revoker’attribute`` with a value of ``true``, all certificates which belong to identities in and below the caller’s affiliation. For example, if the client’s affiliation is ``a.b``, the client may get certificates for identities who’s affiliation is ``a.b`` or ``a.b.c`` but not ``a`` or ``a.c``

 

The following information needs to be formatted into a list

ID: List certificates for this enrollment ID Serial Number: List certificates that have this serial number AKI: List certificates that have this AKI Expiration Time: List certificates that have expiration dates that fall within this expiration time Revocation Time: List certificates that were revoked within this revocation time

Suggest adding an asterisk at the beginning (to get a bulletized list):
 * ``ID``: List certificates for this enrollment ID

 * ``Serial Number``: List certificates that have this serial number

 * ``AKI``: List certificates that have this AKI

 * ``Expiration Time`` : List certificates that have expiration dates that fall within this expiration time

 * ``Revocation Time``: List certificates that were revoked within this revocation time

 

Change:

*There are two other filters that will further filter your results.*

to

There are other filters on the certificate status that will further filter your results: ``expiration `` , ``

notrevoked`` and `` notexpired``.

And maybe say a few words about  usage for each one like you did above.

 

For the following line, you need a blank line between

(admin):

and

.. code:: bash

And make sure there is a blank line after .. code:: bash

*List all certificates that have not been revoked for an id (admin): .. code:: bash*

 

Change

A CA name can be specified on the command line of a client command as follows:

to

_A CA name can be specified on the command line of a client command using the_

_``caname`` filter as follows:_

 

And when they specify the CA name does it have to be in quotes of any kind? (Not sure if a CA name can have spaces or special characters in it? Probably not.)

 ",,pandrejko,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzdhr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,pandrejko,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Jun/18 11:00 PM;skarim;https://gerrit.hyperledger.org/r/c/22677/;;;",,,,,,,,,,,,,,,,,,,
FVT tests broken due to upgrade of mysql package,FABC-233,19434,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,mastersingh24,mastersingh24,mastersingh24,23/Jul/17 7:51 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,31/Jul/17 5:52 PM,v1.0.0,,,,,,v1.0.1,v1.1.0,,,,,0,,,,,,"Ubuntu 16.04.1 recently updated the mysql package to version 5.7.19.

It's hard to track down exactly what changed between this version and the prior version that was installed by default, but something has changed in the install / config process.

I've taken a look at the updated mysql image on Dockerhub and will try to apply similar changes to the start script.

Of course we test on both x86_64 and s390x and unfortunately s390x is based on Debian Jessie which provides mysql 5.5.55.",,mastersingh24,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy9gn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,rennman,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Jul/17 10:25 PM;mastersingh24;https://gerrit.hyperledger.org/r/11847;;;","28/Jul/17 12:24 AM;rennman;[Fix mysql internal_DB permissions|[https://gerrit.hyperledger.org/r/#/c/11961/]] 

It turns out that the previous fix is incompatible with the mysql TLS setup, so I had to regroup. The previous fix also blows away the database every time the image is run, which is not really ideal for testing various states of the system.

Bottom-line, it turns out to be a permissions problem. More specifically, this problem is only seen on the CI build machines. I don't know if it is some timing bug in mysql, or something weird about the build machine environment, but this problem does *not* exist in a comparable environment, e.g. the mysql 5.7.19 upgrade on a different x86 machine running Ubuntu 16 – in Vlaunch for example. In other words, the 5.7.* initialization routines are unrelated to the problem.

When analyzing the problem in multiple iterations of the server's initialization, I saw each iteration fail on the same operation to a different internal table:

[ERROR] Fatal error: Can't open and lock privilege tables: Table storage engine for '%s' doesn't have this option

where %s is 'user', 'db', 'priv', etc.

The error is issued *exactly* twice for each table. Finally after about 14 iterations, the server starts, but issues an error message about a corrupt db and failure to find 'mysql.func', and suggests running mysql_upgrade. After running 'mysql_upgrade', we're back to the original starting point.

 

I found that the file to which the server writes between each iteration is this file:

/var/lib/mysql/ibdata1

There doesn't appear to be any permissions issues:

-rw-r----- 1 mysql mysql

As a matter of fact, all of the files under /var/lib/mysql are owned by mysql:
{code:java}
find /var/lib/mysql/ -exec ls -l {} \;|awk '$3!=""mysql"" || $4!=""mysql""'{code}
shows 0 files.

However this command fixes everything
{code:java}
chown -R mysql.mysql /var/lib/mysql{code}
Again this *only* happens on the build machine. There is something distinctly different about that environment that I haven't identified. I tried researching the way in which docker handles file permissions, but so far, I haven't come ups with anything.

The one thing I know for sure is that the build machine roughly one order of magnitude slower than any other system I test on. Whereas Vlaunch takes less than 2 minutes to build and image, the build machines took 12 or more when I tested manually;;;","31/Jul/17 2:39 AM;mastersingh24;[https://gerrit.hyperledger.org/r/11847]

[https://gerrit.hyperledger.org/r/#/c/11961/];;;",,,,,,,,,,,,,,,,,
fabric-ca swagger doc should use recursive reference for affiliation info,FABC-234,27058,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,skarim,smithbk,smithbk,25/Jan/18 10:19 PM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,09/Feb/18 8:44 PM,,,,,,,v1.1.0,,,,,,0,,,,,,"Since affiliation responses are recursive, the swagger doc needs to use references.
This is also useful to remove duplication and so the swagger doc could be cleaned up considerably.

See http://docs.reprezen.com/swagger_normalizer/#recursive-references and https://swagger.io/docs/specification/using-ref/ as a start",,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyujb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Feb/18 12:39 AM;Clayton Sims;eta 2/5;;;","06/Feb/18 7:36 AM;skarim;https://gerrit.hyperledger.org/r/#/c/17563/

I think there is an issue with Swagger editor, it does not resolve recursive references correctly and displays 'undefined'.

https://stackoverflow.com/questions/36866035/how-to-refer-to-enclosing-type-definition-recursively-in-yaml-swagger-io;;;",,,,,,,,,,,,,,,,,,
fabric-ca-fvt CI image builds failing on x86,FABC-235,19560,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,29/Jul/17 1:58 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,04/Sep/17 10:19 PM,,,,,,,v1.1.1,,,,,,0,,,,,,"The builds on x85 are now so slow that ldap isn't initializing before the first invocation of an ldap utility.

To address this, the ldap setup script will now add polling after ldap startup to ensure that there is a listener on the ldap port before attempting to contact the server.",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzya0v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
swagger doc is incorrect for /api/v1/cainfo request,FABC-236,30664,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,26/May/18 11:54 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,01/Jun/18 5:12 AM,,,,,,,v1.2.0,,,,,,0,,,,,,The response properties for /api/v1/cainfo request must be camel cased.,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzctz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/May/18 12:47 PM;aambati;https://gerrit.hyperledger.org/r/c/22393/;;;",,,,,,,,,,,,,,,,,,,
Revoked certificate incorrectly reported as not revoked,FABC-237,14354,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,rennman,rennman,26/Jan/17 2:03 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,06/Apr/17 10:28 AM,,,,,,,,,,,,,0,MembershipServices,Security,,,,"I revoked an admin certificate, but the admin was still able to register users.
     2017/01/25 11:11:07 [DEBUG] Revoke request: {RevocationRequest:{Name:admin Serial:17176555878820730978701962264948070847709639544 AKI:c7be28d6d6795edf28db1fa53d307d74f8930270 Reason:0}}
     2017/01/25 11:11:07 [DEBUG] Revoke was successful: %+v{{admin 17176555878820730978701962264948070847709639544 c7be28d6d6795edf28db1fa53d307d74f8930270 0}}
     2017/01/25 11:11:07 [INFO] 127.0.0.1:52444 - ""POST /api/v1/cfssl/revoke"" 200


revoke.VerifyCertificate is returning
  revokedOrExpired: false
  checked: true
indicating that cfssl considers the certificate non-revoked.

However, an inspection of the sqlite DB shows revoked:
admin|1.71765558788207e+46|c7be28d6d6795edf28db1fa53d307d74f8930270||revoked|0|2017-11-28 08:00:00+00:00|2017-01-25 16:11:07|-----BEGIN CERTIFICATE-----
",,aambati,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxj3r:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,rennman,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Mar/17 2:31 AM;aambati;[~rennman]This problem will be resolved by the change set: https://gerrit.hyperledger.org/r/#/c/6955;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-client should check TLS cert expiration,FABC-238,15367,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,16/Mar/17 3:46 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,13/Apr/17 11:59 PM,v1.0.0,v1.0.0-alpha1,,,,,v1.0.0,,,,,,0,,,,,,"The fabric-ca-client (via the golang SSL layer) dis-allows the use of an unsupported certificate. These include
  - a cert with an inappropriate KeyUsage extension
  - a cert with an unsupported key type (e.g. DSA)

However, the underlying secure socket code doesn't seem to care about certificate expiration.

To be consistent, we should check the certificates expiration and reject it.

Even better, it would be nice if any and all of these errors get logged. As it stands, e.g. for an unsupported extension, we quietly drop the cert and send the request anyway. Depending on the server's configuration this can fail on the server side, with 
  'client didn't provide a certificate'
It seems odd to me that the the client may be blissfully unaware, thinking that he did send a cert, until the server says he didn't... all because the bad cert is ignored without warning on the client side.",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo4v:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
"fabric-ca client [identity|affiliation] list --debug flag inoperable",FABC-239,27278,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,01/Feb/18 4:10 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,09/Feb/18 12:21 AM,,,,,,,v1.1.0,,,,,,0,,,,,,"Specifying '–debug | -d' on 
fabric-ca client [identity|affiliation] list 
has no effect.",,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyvan:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Feb/18 1:28 AM;skarim;https://gerrit.hyperledger.org/r/#/c/17419/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca intermediate CA 1.0 -> 1.1 fails to migrate DB,FABC-240,27651,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Low,Won't Do,rennman,rennman,rennman,13/Feb/18 4:54 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:39 PM,,,,,,,,,,,,,0,,,,,,"I have v1.0 clustering setup like the following:
{code:java}
        haproxy:7054   haproxy:8054
       /            \   /         \
      /              \ /           \
     /               /\             \
    /               /  \             \
  RootCA:1<===InterCA:1 RootCA:2<===InterCA:2
  |    |      |      |  |    |      |     |
 ca1   ca2    ca1   ca2 ca1  ca2    ca1   ca2
 \     \      \      \ /    /      /      /
  \     \      \     /\    /      /      /
   \     \      \   /  \  /      /      /
    \     \      \ /    \/      /      /
     \     \      \     / \    /      /
      \     \    / \   /   \  /      /
       \     \  /   \ /     \/      /
        \     \/     \      /\     /
         \___/ \___ / \___ /  \___/
         |Rt | |Rt |  |Int|   |Int|
         |DB | |DB |  |DB |   |DB |
         | 1 | | 2 |  | 1 |   | 2 |
         |___| |___|  |___|   |___|
{code}
I start the servers and register/enroll/revoke a number of users.
 I then re-start one of the intermediate CAs as a 1.1 server:
{code:java}
16544 pts/2 Sl 0:00 /usr/local/bin/fabric-ca-server start --address 0.0.0.0 --port 18055 --config /tmp/cluster/int/runFabricCaFvt.yaml --cafiles /tmp/cluster/int/ca/ca1/fabric-ca-config.yaml,/tmp/cluster/int/ca/ca2/fabric-ca-config.yaml

kill  16544

/usr/local/bin/fabric-ca-server start --address 0.0.0.0 --port 18055 --config /tmp/cluster/int/runFabricCaFvt.yaml --cafiles /tmp/cluster/int/ca/ca1/fabric-ca-config.yaml,/tmp/cluster/int/ca/ca2/fabric-ca-config.yaml

{code}
Though the log hints at an attempt at migration:
{code:java}
2018/02/12 19:37:15 [DEBUG] Update MySQL schema if using outdated schema
2018/02/12 19:37:16 [DEBUG] Initializing identity registry
2018/02/12 19:37:16 [DEBUG] Initialized DB identity registry
2018/02/12 19:37:16 [DEBUG] DB: Get properties [identity.level affiliation.level certificate.level]
2018/02/12 19:37:16 [DEBUG] Checking database levels 'map[affiliation.level:0 certificate.level:0 identity.level:0]' against server levels '&{Identity:1 Affiliation:1 Certificate:1}'
...
2018/02/12 19:37:16 [DEBUG] Migrating user 'admin' to level 1
{code}
The DB is unchanged:
{code:java}
Users
id|type|affiliation|attributes|state|max_enrollments|
admin|client|[{""name"":""hf.Registrar.DelegateRoles"",""value"":""client,user,validator,auditor""},{""name"":""hf.Revoker"",""value"":""1""},{""name"":""hf.GenCRL"",""value"":""1""},{""name"":""hf.Registrar.Roles"",""value"":""client,user,peer,validator,auditor,ca""}]|1|-1||

Affiliations:
name|prekey||
bank_a.department1|bank_a||

{code}
If I restart one of the RootCA servers as 1.1, then the DB is actually migrated:
{code:java}
2018/02/12 19:39:22 [DEBUG] DB: Get properties [identity.level affiliation.level certificate.level]
2018/02/12 19:39:22 [DEBUG] Checking database levels 'map[affiliation.level:0 certificate.level:0 identity.level:0]' against server levels '&{Identity:1 Affiliation:1 Certificate:1}'
...
2018/02/12 19:39:22 [DEBUG] Migrating user 'admin' to level 1
2018/02/12 19:39:22 [DEBUG] Modify Attributes: [{Name:hf.Registrar.Attributes Value:* ECert:false}]
2018/02/12 19:39:22 [DEBUG] Attribute request: {Name:hf.Registrar.Attributes Value:* ECert:false}
2018/02/12 19:39:22 [DEBUG] Adding '{Name:hf.Registrar.Attributes Value:* ECert:false}' as new attribute


id|type|affiliation|attributes|state|max_enrollments|level
admin|client|[{""name"":""hf.Revoker"",""value"":""1""},{""name"":""hf.GenCRL"",""value"":""1""},{""name"":""hf.Registrar.Roles"",""value"":""client,user,peer,validator,auditor,ca""},{""name"":""hf.Registrar.DelegateRoles"",""value"":""client,user,validator,auditor""},{""name"":""hf.Registrar.Attributes"",""value"":""*""}]|1|-1|1|

Affiliations:
id|name|prekey|level
2|bank_a.department1|bank_a|0
{code}",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Feb/18 4:54 AM;rennman;intMig.log;https://jira.hyperledger.org/secure/attachment/14574/intMig.log","13/Feb/18 4:54 AM;rennman;rootMig.log;https://jira.hyperledger.org/secure/attachment/14573/rootMig.log",,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyx6n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/18 2:07 AM;rennman;The script was inspecting the root DB twice, instead of checking each DB once, so closing this as user error.;;;",,,,,,,,,,,,,,,,,,,
fabric-ca sample fails with TLS error,FABC-241,24830,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,07/Dec/17 1:55 AM,19/Jul/18 7:03 AM,28/Oct/23 2:21 AM,05/Jan/18 5:21 AM,,,,,,,v1.1.0,,,,,,1,,,,,,"Following is the relevant log entries from the rca-org0.log:

 

```

2017/12/04 21:05:32 [DEBUG] DB: Add affiliation org1
2017/12/04 21:05:32 [DEBUG] Affiliation 'org1' already exists
2017/12/04 21:05:32 [DEBUG] DB: Add affiliation org1.department1
2017/12/04 21:05:32 [DEBUG] Affiliation 'org1.department1' already exists
2017/12/04 21:05:32 [DEBUG] DB: Add affiliation org1.department2
2017/12/04 21:05:32 [DEBUG] Affiliation 'org1.department2' already exists
2017/12/04 21:05:32 [DEBUG] Successfully loaded affiliations table
2017/12/04 21:05:32 [INFO] Initialized sqlite3 database at /etc/hyperledger/fabric-ca/fabric-ca-server.db
2017/12/04 21:05:32 [DEBUG] Initializing enrollment signer
2017/12/04 21:05:33 [DEBUG] validating configuration
2017/12/04 21:05:33 [DEBUG] validate local profile
2017/12/04 21:05:33 [DEBUG] profile is valid
2017/12/04 21:05:33 [DEBUG] validate local profile
2017/12/04 21:05:33 [DEBUG] profile is valid
2017/12/04 21:05:33 [DEBUG] validate local profile
2017/12/04 21:05:33 [DEBUG] profile is valid
2017/12/04 21:05:33 [DEBUG] CA initialization successful
2017/12/04 21:05:33 [INFO] Home directory for default CA: /etc/hyperledger/fabric-ca
2017/12/04 21:05:33 [DEBUG] 1 CA instance(s) running on server
2017/12/04 21:05:33 [DEBUG] TLS is enabled
2017/12/04 21:05:33 [DEBUG] Closing server DBs
Error: TLS is enabled but no TLS certificate provided

```",,aambati,jtracey,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyq5z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,jtracey,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Dec/17 8:50 PM;jtracey;I have the same problem. 

Tried adding:

FABRIC_CA_SERVER_TLS_CERTFILE=$ROOT_CA_CERTFILE

to makeDocker.sh but this did not resolve the issue;;;","08/Dec/17 11:42 PM;aambati;https://gerrit.hyperledger.org/r/c/16035/;;;","13/Dec/17 2:43 AM;jtracey; 

Hi 

I can't find anything at the link posted. Any more info?;;;",,,,,,,,,,,,,,,,,
Some fields in the config.yaml are not read,FABC-242,16053,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,dbshah,dbshah,27/Apr/17 10:44 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,18/May/17 10:15 PM,,,,,,,,,,,,,0,,,,,,"Recently I was trying changing the db arguments:

{noformat}
db:
  type: mysql
  datasource: *URL*
  tls:
      enabled: false
      certfiles: db-server-cert.pem
      client:
        certfile: db-client-cert.pem
        keyfile: db-client-key.pem
{noformat}

Even after changing the values in the config yaml and giving the right paths for the fabric-ca-server to start with that config, it takes other values like the tls part but not the db args.

Although, when i pass the args using the command line arguments it worked.
{noformat}
     --db.datasource string            Data source which is database specific (default ""fabric-ca-server.db"")
      --db.tls.certfiles string         PEM-encoded comma separated list of trusted certificate files (e.g. root1.pem, root2.pem)
      --db.tls.client.certfile string   PEM-encoded certificate file when mutual authentication is enabled
      --db.tls.client.keyfile string    PEM-encoded key file when mutual authentication is enabled
      --db.tls.enabled                  Enable TLS for client connection
      --db.type string                  Type of database; one of: sqlite3, postgres, mysql (default ""sqlite3"")
{noformat}
",,aambati,dbshah,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxrhj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,dbshah,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Apr/17 2:33 AM;aambati;[~dbshah]quick question, so, *db.datasource *and *db.type *are not being read from the configuration file? ;;;","28/Apr/17 2:40 AM;dbshah;Yes.;;;","11/May/17 5:43 AM;aambati;[~dbshah] Can you please update the affected version field. I tried to reproduce the problem with v.1.0.0 but could not. If db.datasource and db.type values are not being read from the config file, fabric-ca-server should default to sqllite , is that what you are seeing?

 

i ran the server like this:

{{bin/fabric-ca-server start -c config/config.yml}}

 

my config.yml has this:


{quote}db:

  type: mysql

  datasource: root:mysql@tcp(localhost:8003)/fabric-ca?parseTime=true

  tls:

      enabled: false

      certfiles:

        - db-server-cert.pem

      client:

        certfile: db-client-cert.pem

        keyfile: db-client-key.pem
{quote}
 

the output of the server is :
{quote}2017/05/10 16:39:33 [INFO] Configuration file location: /Users/aambati/Blockchain/fabric/src/github.com/hyperledger/fabric-ca/config/config.yml

2017/05/10 16:39:33 [INFO] Starting server in home directory: /Users/aambati/Blockchain/fabric/src/github.com/hyperledger/fabric-ca/config

2017/05/10 16:39:33 [INFO] CA Home Directory: /Users/aambati/Blockchain/fabric/src/github.com/hyperledger/fabric-ca/config

2017/05/10 16:39:33 [INFO] The CA key and certificate already exist

2017/05/10 16:39:33 [INFO] The key is stored by BCCSP provider 'SW'

2017/05/10 16:39:33 [INFO] The certificate is at: /Users/aambati/Blockchain/fabric/src/github.com/hyperledger/fabric-ca/config/ca-cert.pem

*2017/05/10 16:39:33 [ERROR] Failed to connect to MySQL database [error: dial tcp [::1]:8003: getsockopt: connection refused]*

Error: Failed to query 'INFORMATION_SCHEMA.SCHEMATA table: dial tcp [::1]:8003: getsockopt: connection refused
{quote}
i don't have mysql on my machine but as you can see it read the db.datasource and db.type fields from the error;;;","11/May/17 6:10 AM;dbshah;{quote}root@tm-02:~# docker logs -f net_fabric-ca-0a_1 

2017-05-10 21:04:31,914 CRIT Supervisor running as root (no user in config file)

2017-05-10 21:04:31,923 CRIT Server 'unix_http_server' running without any HTTP authentication checking

2017/05/10 21:04:32 [INFO] Configuration file location: /mnt/fabric-ca-0a/ca.yaml

2017/05/10 21:04:33 Initialize BCCSP [SW]

2017/05/10 21:04:33 [DEBUG] Init with home /mnt/fabric-ca-0a and config \{Port:7054 Address:0.0.0.0 Debug:true TLS:\{Enabled:false CertFile:/mnt/tls-certs/cert.pem KeyFile:/mnt/tls-certs/key.pem} CSP:<nil> CA:\{Name: Keyfile:/mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-key.pem Certfile:/mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-cert.pem Chainfile:ca-chain.pem} Signing:0xc4201e52e0 CSR:\{CN:fabric-ca-server Names:[\{C:US ST:North Carolina L: O:Hyperledger OU:Fabric SerialNumber:}] Hosts:[fed70d0e0b40] KeyRequest:<nil> CA:<nil> SerialNumber:} Registry:\{MaxEnrollments:0 Identities:[\{Name:admin Pass:adminpw Type:client Affiliation:group1 MaxEnrollments:0 Attrs:map[hf.Revoker:1 hf.IntermediateCA:1 hf.Registrar.DelegateRoles:client,user,validator,auditor hf.Registrar.Roles:client,user,peer,validator,auditor,ca]}]} Affiliations:map[org1:[department1 department2] org2:[department1]] LDAP:\{Enabled:false URL:ldap://<adminDN>:<adminPassword>@<host>:<port>/<base> UserFilter:(uid=%s) GroupFilter:(memberUid=%s)} DB:\{Type:sqlite3 Datasource:fabric-ca-server.db TLS:\{Enabled:false CertFiles: CertFilesList:[] Client:\{KeyFile: CertFile:}}} Remote: Client:<nil>}

2017/05/10 21:04:33 [INFO] The CA key and certificate files already exist

2017/05/10 21:04:33 [INFO] Key file location: /mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-key.pem

2017/05/10 21:04:33 [INFO] Certificate file location: /mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-cert.pem

2017/05/10 21:04:33 [DEBUG] Initializing 'sqlite3' data base at '/mnt/fabric-ca-0a/fabric-ca-server.db'

2017/05/10 21:04:33 [DEBUG] Using sqlite database, connect to database in home (/mnt/fabric-ca-0a/fabric-ca-server.db) directory
{quote}
 

 

 

 
{quote}root@tm-02:~# docker exec -it net_fabric-ca-0a_1 cat /mnt/fabric-ca-0a/ca.yaml

affiliations:

  org1:

  - department1

  - department2

  org2:

  - department1

ca:

  certfile: /mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-cert.pem

  keyfile: /mnt/crypto-config/ordererOrganizations/ordererOrg1/ca/ca-key.pem

crypto:

  software:

    ephemeral: false

    hash_family: SHA2

    key_store_dir: keys

    security_level: 256

csr:

  ca:

    expiry: null

    pathlen: null

    pathlenzero: null

  cn: fabric-ca-server

  hosts:

  - fed70d0e0b40

  names:

  - C: US

    L: null

    O: Hyperledger

    OU: Fabric

    ST: North Carolina

database:

  type: mysql

  datasource: root:rootpw@tcp(mysql-server.net_blockchain.com:3306)/fabricca?parseTime=true&tls=custom

  tls:

    certfiles:

    - db-server-cert.pem
{quote}
 

This is after the alpha release, so probably that's the problem. I understand that it has changed a lot since.

Commit level: bad8552.;;;","17/May/17 5:16 AM;smithbk;So is this fixed in the v1.0.0-alpha2 drop or is this still a problem?;;;","18/May/17 10:14 PM;dbshah;Seems to be fixed in later versions. Closing this.;;;",,,,,,,,,,,,,,
[SECURITY] Out-of-memory condition - need defensive code for CRL/OSCP retrieval,FABC-243,15606,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,skarim,rennman,rennman,07/Apr/17 4:00 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,28/Jul/17 5:07 AM,v1.0.0-rc1,,,,,,v1.0.1,,,,,,0,security,Security,,,,"There are other cases where we aren't defending against this (reading a config file comes to mind) but in those cases the server administrator is in control.

In this case, we are at the mercy of bad actors sending requests to an active server.

Given the enrollment of an admin, and the following structure:
{code:java}
/tmp/fabric-ca
├── admin
│   ├── enroll.yaml
│   ├── fabric-ca-client-config.yaml
│   └── msp
│       ├── cacerts
│       ├── keystore
│       │   ├── key.pem
│       │   └── key.pem.old
│       └── signcerts
│           ├── cert.pem
│           └── cert.pem.old
{code}

cert.pem.old and key.pem.old represent the original enrollment authentication data.
Trudy has replaced them with cert.pem that contains a CDP with a vaule of
http://mal-server/10G.file

We just keep reading until we choke:

{code:java}
fatal error: runtime: out of memory
          runtime stack:
     runtime.throw(0xaaeca9, 0x16)
     	/usr/local/go/src/runtime/panic.go:566 +0x95
     runtime.sysMap(0xc820500000, 0x400000000, 0x0, 0xfbcd78)
     	/usr/local/go/src/runtime/mem_linux.go:219 +0x1d0
     runtime.(*mheap).sysAlloc(0xfa3100, 0x400000000, 0x41a600)
     	/usr/local/go/src/runtime/malloc.go:407 +0x37a
....
{code}

traceable back to here:
{code:java}
vendor/github.com/cloudflare/cfssl/revoke/revoke.go:105
{code}

",,ChristopherFerris,rennman,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-4546,,,,,,,,,,,,,,,,,,,,,,,,"09/May/17 4:12 AM;rennman;cdp_exploit.sh;https://jira.hyperledger.org/secure/attachment/10805/cdp_exploit.sh","09/May/17 4:08 AM;rennman;cdp_exploit.sh;https://jira.hyperledger.org/secure/attachment/10804/cdp_exploit.sh",,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3lr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,rennman,skarim,smithbk,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Apr/17 9:54 PM;ChristopherFerris;This appears to present a DoS opportunity... should be fixed for v1.0;;;","01/May/17 11:35 PM;smithbk;Allen, I'm not sure that this is still possible.  Please provide instructions on how to reproduce and reopen if this is still a problem.;;;","09/May/17 4:13 AM;rennman;Yes, it is still possible to recreate. Fortunately, that's easier now that the ci tests are checked in.

Beware that you should be prepared to kill the container. It will eventually lock up your workstation.

 

On the host machine cd to fabric-ca src root and place this file there:

[^cdp_exploit.sh]

make it executable:
{code:java}
chmod +x ./cdp_exploit.sh{code}
build the test image
{code:java}
make docker-fvt{code}
run the test inside the container
{code:java}
docker run -v $PWD:/opt/gopath/src/github.com/hyperledger/fabric-ca -ti hyperledger/fabric-ca-fvt ./cdp_exploit.sh{code}




 

 

 ;;;","27/May/17 3:16 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/9817/;;;","01/Jun/17 11:18 PM;smithbk;The only way to really fix this is in CFSSL code.
So rather than doing a partial solution in fabric-ca code, I suggest abandoning 9817 and just pushing a solution into CFSSL.
I've opened an issue against cfssl at https://github.com/cloudflare/cfssl/issues/775.
The place to fix this is going to be in cfssl/revoke/revoke.go.   All calls to ioutil.ReadAll should be changed to read into a fixed size buffer.
There may be other places which require this as well.

;;;","03/Jun/17 12:42 AM;skarim;Based on Keith's comment above, I am marking the fix version to be 'Future' as we need changes to be made in CFSSL to correctly handle this.;;;","03/Jun/17 12:55 AM;skarim;CFSSL Pull Request: https://github.com/cloudflare/cfssl/pull/776;;;","22/Jul/17 12:28 AM;skarim;https://gerrit.hyperledger.org/r/#/c/11815/;;;",,,,,,,,,,,,
COP createMySQLTables creates too small serial_number column,FABC-244,13836,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,dknochen,dknochen,16/Dec/16 9:37 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,01/May/17 11:12 PM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"In MySQL there are two columns {{serial_number varbinary(20)}} which are too small. When enrolling I get:

{{Error 1406: Data too long for column 'serial_number' at row 1}}

The columns are created here:

https://github.com/hyperledger/fabric-cop/blob/35ee241d7dca2e5d71b8891c72013aab99a14331/cli/server/dbutil/dbutil.go#L247
and
https://github.com/hyperledger/fabric-cop/blob/35ee241d7dca2e5d71b8891c72013aab99a14331/cli/server/dbutil/dbutil.go#L255

changing it to varbinary(128) fixes the issue.",,dknochen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxg4f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dknochen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermediate CA gives error that Common name cannot be reused.,FABC-245,17537,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,skarim,dbshah,dbshah,06/Jun/17 5:17 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,07/Jun/17 8:17 AM,v1.0.0,,,,,,v1.0.0,,,,,,0,HSBN,,,,,"Steps to reproduce:
 # Start fabric-ca-server with 2 instances.
 # Start intermediate fabric-ca-server with parent as the (1). Use the same identity in both the intermediate ca instances to talk to parent.

for example:
intermediate:
parentserver:
url: http://adminCA:adminCApw@fabric-ca-parent.net_blockchain.com:7054
caname: PeerOrg1CA
 
intermediate:
parentserver:
url: http://adminCA:adminCApw@fabric-ca-parent.net_blockchain.com:7054
caname: PeerOrg12CA
 

Error: Common name 'adminCA' is used in '' and ''

[https://github.com/hyperledger/fabric-ca/blob/efd537e5085a3cf3704a29d6d0a9e4170722259b/lib/server.go#L312]

I am using alpha3:e4e0a0d snapshot.",,dbshah,skarim,smithbk,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxz7r:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,dbshah,skarim,smithbk,weeds,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Jun/17 2:57 AM;smithbk;The code is overly restrictive which is why this is happening.
It should make sure that the <subjectDN, issuerDN> is unique for all CAs in a server, but it is currently looking at only the subject's CN.
In your case, the CN of the issuer would be different because you are going to different CAs in the parent server, so this error would not occur.
That said, in order to work around this, you simply need to use different enrollment IDs in each root CA and then use that name in each intermediate CA to enroll.
I suggest using the name of the CA as part of the enrollment ID.

Since there is a work around for this and we don't want to rush this fix, we will wait until early next week before pushing the fix so we don't risk any instability.;;;","07/Jun/17 4:56 AM;weeds;please don't forget to add the gerrit number- thanks!

 ;;;","07/Jun/17 5:27 AM;skarim;https://gerrit.hyperledger.org/r/#/c/10229/;;;","10/Jun/17 3:40 AM;dbshah;I have checked this in beta code and it seems to have been fixed. You guys can close it.;;;",,,,,,,,,,,,,,,,
Fix duplicated fabric-ca config item,FABC-246,17388,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,baohua,baohua,baohua,02/Jun/17 10:55 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,03/Jun/17 10:18 AM,v1.0.0,,,,,,v1.0.0,,,,,,0,fabric-ca,fabric-ca-client,,,," 

[https://gerrit.hyperledger.org/r/#/c/7741] introduce a duplicated maxenrollments config item into cmd/fabric-ca-client/config.go.

 

```

id:
 name:
 type:
 {color:#ff0000}maxenrollments:{color}
 affiliation:
 {color:#ff0000}maxenrollments: -1{color}
 attributes:
 - name:
 value:

```

 

Need to fix it.",,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxy9j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,baohua,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Jun/17 11:20 AM;baohua;https://gerrit.hyperledger.org/r/#/c/10053/;;;",,,,,,,,,,,,,,,,,,,
Unable to configure Intermediate CA via CLI,FABC-247,16622,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,11/May/17 11:35 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,20/May/17 4:00 AM,,,,,,,v1.0.0,,,,,,0,,,,,,"An intermediate CA acts like a client when contacting the root CA to get it's certificate. There are certain configuration that can be set for an intermediate CA, such as TLS parameters. These parameters are currently missing from the command line and prevent users from correctly configuring an intermediate CA from the command line. 

*Reproduction:*
 # Enable TLS on Root CA
 # Start an Intermediate CA using 'https' ([https://localhost:7054)|https://localhost:7054)/] as the protocol to connect to secure socket on Root CA. This will fail as TLS was not configured for intermediate CA. A flag similar to --intermediate.tls.certfiles is missing from the command line

 ",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxut3:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Need more robust certificate validation,FABC-248,14324,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,25/Jan/17 1:30 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,17/May/17 4:23 AM,v1.0.0,v1.0.0-alpha1,,,,,v1.0.0,,,,,,0,MembershipServices,security,,,,"At fabric-ca startup, when the server is passed a cert and key, the following tests fail -- certificate checks need to be beefed up.

1) Server should not accept expired CA certificate
        - past end date
        - future start date

     Currently, this is issued in both of the above cases:
     2017/01/18 17:21:44 [ERROR] Certificate expired
     2017/01/18 17:21:44 [WARNING] endpoint 'tcert' is disabled: Failed to initialize TCert handler: Certificate 
     expired
     2017/01/18 17:25:22 [INFO] 127.0.0.1:32822 - ""POST /api/v1/cfssl/enroll"" 200

     but we still use the cert for enrollment
     2017/01/18 17:25:22 [INFO] enrollment information was successfully stored in /root/cop/key.pem and 
     /root/cop/cert.pem

2) Server should not accept CA certificate with incorrect usage (must include at least 'Certificate Sign')
3) Server should not accept CA certificate with basicConstraint CA:false
4) Server should not accept CA RSA cert/key pair of < 2048 bits (this is consistent with the cfssl restriction)
5) Server should not accept CA certificate with non-matching private key
6) Server should gracefully handle the case of an unsupported key type (e.g. DSA)

",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxglz:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
fabric-ca should use base 64 encoding with padding,FABC-249,15058,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,27/Feb/17 4:03 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,11/Mar/17 3:49 AM,,,,,,,,,,,,,0,,,,,,"fabric-ca 64 encodes and decodes w/o padding, but the standard is to use padding.
So we need to change fabric-ca to encode with padding and handle decoding both with and w/o padding.

This problem became apparent when coding the register command for the java SDK.  The standard base 64 encoding was not recognized in the authorization header, so the request failed.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5zj:",,,,,,Sprint 12 - Membership Service,Sprint 13 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Feb/17 4:31 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/6547/;;;",,,,,,,,,,,,,,,,,,,
Revendor cfssl for go 1.9 compatibility,FABC-250,24899,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,smithbk,smithbk,09/Dec/17 7:20 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,06/Jan/18 4:54 AM,,,,,,,,,,,,,0,,,,,,See https://jira.hyperledger.org/browse/FAB-6003 for details,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyqj3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Jan/18 4:54 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/13407/;;;",,,,,,,,,,,,,,,,,,,
New fabric-ca tests fail on vagrant/Windows,FABC-251,21713,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,lehors,lehors,lehors,09/Oct/17 10:29 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,21/Oct/17 1:30 AM,v1.0.3,,,,,,v1.1.1,,,,,,0,,,,,," 
{code:java}
$ go test -v
...
2017/10/09 13:22:28 [INFO] Initialized sqlite3 database at /opt/gopath/src/github.com/hyperledger/fabric-ca/testdata/fabric-ca-server.db
--- FAIL: TestCAloadUsersTable (0.25s)
ca_test.go:708: ca.NewCA error: Failed to load identity table: Code: 34 - Configuration Error: Max enrollment in registration request may not be less than -1, but was -10
ca_test.go:748: ca.loadUsersTable error: <nil>
ca_test.go:750: ca.loadUsersTable should have failed due to DB error <nil>
2017/10/09 13:23:40 [DEBUG] Closing server DBs
...
2017/10/09 13:23:40 [DEBUG] Closing server DBs
--- FAIL: TestSRVDefaultDatabase (10.14s)
server_test.go:2487: RemoveAll failed: remove ../testdata/fabric-ca-server.db: text file busy
...
2017/10/09 13:23:41 [DEBUG] Stop: successful stop on port 7054
--- FAIL: TestSRVDefaultAddrPort (1.16s)
server_test.go:2487: RemoveAll failed: remove ../testdata/fabric-ca-server.db: text file busy
server_test.go:2297: Empty bootstrap id: Empty identity name and/or pass not allowed
server_test.go:690: srv.Start err: <nil>
server_test.go:2297: Empty bootstrap id: Empty identity name and/or pass not allowed
server_test.go:706: srv.Start err: TCP listen failed for http://0.0.0.0:7054: listen tcp 0.0.0.0:7054: bind: address already in use
server_test.go:2297: Empty bootstrap id: Empty identity name and/or pass not allowed
server_test.go:726: srv.Start err: TLS listen failed for https://0.0.0.0:7054: listen tcp 0.0.0.0:7054: bind: address already in use
...
2017/10/09 13:23:55 [DEBUG] Stop: successful stop on port 7075
--- FAIL: TestSRVTLSAuthClient (12.70s)
server_test.go:2487: RemoveAll failed: remove ../testdata/fabric-ca-server.db: text file busy
...

{code}
 ","Vagrant 1.9.5 on Windows 7

 ",lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-177,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyiuf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,lehors,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
fabric-ca-server init error while creating mysql table 'certificates',FABC-252,17238,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,weichongli,weichongli,30/May/17 10:11 PM,04/Jul/19 8:33 PM,28/Oct/23 2:21 AM,04/Jul/19 8:33 PM,v1.0.0-alpha2,,,,,,v1.0.0,,,,,,0,,,,,,"{color:#24292e}If the server timezone is not GMT, it will cause SQL syntax errors while creating table 'certificates' on mysql server.
{color}",,ChristopherFerris,nyet,skarim,smithbk,weichongli,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3lb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,nyet,skarim,smithbk,weichongli,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Jun/17 7:34 PM;ChristopherFerris;[~weichongli] can you please provide a means of reproducing? Thanks.;;;","02/Jun/17 2:33 AM;smithbk;Yes, showing how to reproduce would be most helpful, but if you can show the exact error 1st, that would also help.
How have you configured your server wrt to timestamp format?
This is the code in which we execute SQL.  MySQL requires a non-empty timestamp, so a default value must be provided.
The problem may be related to that somehow.

if _, err := database.Exec(""CREATE TABLE certificates (id VARCHAR(64), serial_number varbinary(128) NOT NULL, authority_key_identifier varbinary(128) NOT NULL, ca_label varbinary(128), status varbinary(128) NOT NULL, reason int, expiry timestamp DEFAULT '1970-01-01 00:00:01', revoked_at timestamp DEFAULT '1970-01-01 00:00:01', pem varbinary(4096) NOT NULL, PRIMARY KEY(serial_number, authority_key_identifier)) DEFAULT CHARSET=utf8 COLLATE utf8_bin""); err != nil {
;;;","04/Jun/17 2:16 PM;weichongli;[~ChristopherFerris] [~smithbk]
 # a linux server, using CST(GMT+8) as timezone.
 # deploy mysql server (with default config)
 # run fabric-ca-server init -c ca-server-config.yaml

{panel:title=ca-server-config.yaml}
......

db:
    type: mysql
    datasource: dbuser:dbpass@tcp(127.0.0.1:3306)/fabric_ca?parseTime=true

......
{panel}
 

 #  error occurred while creating mysql table 'certificates'

 #  so i changed the sql in 'lib/dbutil/dbutil.go:createMySQLTables()' as following, and it works.
{panel:title=new sql:}
CREATE TABLE certificates (id VARCHAR(64), serial_number varbinary(128) NOT NULL, authority_key_identifier varbinary(128) NOT NULL, ca_label varbinary(128), status varbinary(128) NOT NULL, reason int, expiry timestamp DEFAULT *{color:#d04437}0{color}*, revoked_at timestamp DEFAULT *{color:#d04437}0{color}*, pem varbinary(4096) NOT NULL, PRIMARY KEY(serial_number, authority_key_identifier)) DEFAULT CHARSET=utf8 COLLATE utf8_bin"")
{panel}
 ;;;","07/Jun/17 3:09 AM;smithbk;Thanks Wei.  Can you tell us what version of MySQL server you are using?  According to @skarim, the version he was using required some non-default configuration to allow 0 dates, but perhaps they have changed the defaults in a later version of MySQL.;;;","09/Jun/17 4:18 AM;skarim;https://gerrit.hyperledger.org/r/#/c/10369/;;;","12/Jun/17 9:39 PM;weichongli;mariadb-server-5.5.52-1.el7.x86_64(centos 7.3)

[~smithbk];;;","22/May/19 3:34 PM;nyet;{{timestamp DEFAULT 0}} now results in ""*Invalid default value*"" when mysql server is configured with {{NO_ZERO_DATE}};;;","22/May/19 3:43 PM;nyet;[https://dev.mysql.com/doc/refman/5.7/en/sql-mode.html#sqlmode_no_zero_date]

{{NO_ZERO_DATE}} is deprecated as of 2.7.22, so likely strict mode has to be disabled in newer mysql servers, or the schema should be changed to {{timestamp DEFAULT CURRENT_TIMESTAMP}} or {{datetime DEFAULT '1970-01-01 00:00:01'}};;;",,,,,,,,,,,,
CA DBs aren't properly managed and left open,FABC-253,20692,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,lehors,lehors,lehors,08/Sep/17 9:57 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,28/Sep/17 3:49 AM,v1.0.2,,,,,,v1.1.0,,,,,,0,,,,,,"The DBs associated with the CA server aren't being properly managed in that they are left open. This leads to various failures exhibited by the unit-tests on Windows where files are locked until they are properly closed or the associated process exits.

A few related bug reports were open against the unit tests but having been looking at this issue for a while I've become convinced that this deserves more careful consideration because trying to fix this on a case by case basis isn't good enough.

Indeed, while this problem can be easily fixed for the most common case by ensuring that the server Stop() function closes its DB(s) there actually are many corner cases that this fails to address. So, for this problem to be properly addressed a general policy on when the DB(s) are to be closed and by whom needs to be developed.

I'm opening this ticket for this issue to be looked at. Unlike the related JIRA tickets that all focus on various unit-tests failing this is meant to highlight the fact that there is a problem with the code itself and not just the tests.",This problem is not platform dependent but the consequences are primarily seen on Windows platforms.,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-166,FABC-342,FABC-208,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyfrj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,lehors,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Sep/17 10:19 PM;lehors;The main issue has to do with opening DBs and never explicitly closing them. server.Init() opens the DB (there actually are more than one in case of a mutli-CA server but the problem is the same) and nothing/nobody closes it.

This problem can mostly be addressed by adding a server function to close its DB. The question is who should be responsible for calling this function and when?

server.Stop() can call it but in the case where server.Start() hasn't been called this isn't appropriate (server.Stop() will actually raise an error). So, one would need to call it after calling server.Init() if server.Start() is not called.

[~keithsmith] in a chat exchange ([https://chat.hyperledger.org/channel/fabric-pr-review?msg=CiELHAAL53ZFSA5Tv]) mentioned that Init shouldn't leave the DB open. However, closing it makes every subsequent operation, such as GetUser(), fails because they all assume that the DB is open. Should Init really close the DB then? If so when should it be reopened? When Start is called?

Besides, there are many error cases that have to be dealt with which raises again the question of when the DB should be closed. For instance, should server.Init() close the DB if it's returning an error? What about server.Start()?;;;","09/Sep/17 3:48 AM;lehors;So here are two possible approaches that seem reasonable:

Approach #1:
 * Let Init() open the DB and leave it open unless an error is raised (if any error is returned the DB is closed if it ever were opened).
 * Add a public function called CloseDB() that must be explicitly called if Init() was called and didn't return any error, and Start() is never called.
 * Have Stop() call CloseDB() 

Approach #2:
 * Add a private function called closeDB()
 * Let Init() open the DB and close it before returning.
 * Have Start() reopen the DB and leave it open unless an error is raised ((if any error is returned the DB is closed)
 * Have Stop() call closeDB() 

The advantage of the latter is that it keeps this whole business away from the application. The disadvantage is that it requires closing and reopening the DB(s) (there are several of them in case of a multiCA server).

For what it's worth approach #1 is the easiest to implement because it is closer to how the code works today.;;;","12/Sep/17 4:56 AM;lehors;I investigated both approaches and I'm now leaning towards #2 because it leaves the server API unchanged and keeps this DB management business internal to the server.

This does come at a cost in that the DB is closed and reopened if one explicitly calls Init() and then Start() as described above but this can be avoided in case Start() is called directly. So, all in all, this seems a reasonable trade-off.

 ;;;",,,,,,,,,,,,,,,,,
Missing json tag for attribute on enrollment request,FABC-254,21006,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,27/Sep/17 3:55 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,05/Oct/17 6:00 PM,,,,,,,v1.1.0,,,,,,0,,,,,,"The enrollment request is not recognizing the ""attr_reqs"" field of the enrollment request.
This is because there is no json tag on the struct that is deserialized by the server.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyhan:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Sep/17 4:11 AM;smithbk;https://gerrit.hyperledger.org/r/13853;;;",,,,,,,,,,,,,,,,,,,
Identity password is being logged in clear text,FABC-255,15285,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,aambati,aambati,aambati,10/Mar/17 4:50 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,14/Mar/17 10:34 PM,,,,,,,,,,,,,0,Security,,,,,"_Pass_ attribute of *_ServerConfigIdentity_* that has password of an identity is logged in clear text, it must be masked",,aambati,,,,,,,,,,,,,,,,,,,,,,288000,288000,,0%,288000,288000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnpb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
index out of range error when registering a user,FABC-256,15990,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,aambati,aambati,aambati,26/Apr/17 4:35 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,28/Apr/17 1:35 AM,,,,,,,,,,,,,0,,,,,,"fabric-ca-client register throws ""index out of range"" error when register command is invoked with ""--id.attr foo:bar"" command line option:

aambati@anils-mbp:~/Blockchain/fabric-ca/src/github.com/hyperledger/fabric-ca$bin/fabric-ca-client register --id.name anil --id.type user --id.affiliation org1 --id.attr foo=bar --id.attr foo1=bar1
2017/04/25 15:10:25 [INFO] User provided config file: /Users/aambati/Blockchain/fabric-ca/server/fabric-ca-client-config.yaml
2017/04/25 15:10:25 Initialize BCCSP [SW]
2017/04/25 15:10:25 [INFO] Configuration file location: /Users/aambati/Blockchain/fabric-ca/server/fabric-ca-client-config.yaml
panic: runtime error: index out of range

goroutine 1 [running]:
panic(0x45a6d60, 0xc420016140)
	/usr/local/Cellar/go/1.7.3/libexec/src/runtime/panic.go:500 +0x1a1
main.processAttributes()
	/Users/aambati/Blockchain/fabric-ca/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-client/config.go:258 +0x187
main.configInit(0x461f74e, 0x8, 0x8, 0x461c365)
	/Users/aambati/Blockchain/fabric-ca/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-client/config.go:216 +0x323
main.glob..func6(0x4893d40, 0xc420131e00, 0x0, 0xa, 0x0, 0x0)
	/Users/aambati/Blockchain/fabric-ca/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-client/register.go:34 +0x47
github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra.(*Command).execute(0x4893d40, 0xc420131a40, 0xa, 0xa, 0x4893d40, 0xc420131a40)
	/Users/aambati/Blockchain/fabric-ca/src/github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra/command.go:635 +0x4a3
github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x4893900, 0xc4200200b8, 0x1, 0x0)
	/Users/aambati/Blockchain/fabric-ca/src/github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra/command.go:734 +0x367
github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra.(*Command).Execute(0x4893900, 0xc42012bf28, 0x400a2db)
	/Users/aambati/Blockchain/fabric-ca/src/github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra/command.go:692 +0x2b
main.RunMain(0xc42000c0c0, 0xc, 0xc, 0x463c91c, 0x43)
	/Users/aambati/Blockchain/fabric-ca/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-client/main.go:96 +0x87
main.main()
	/Users/aambati/Blockchain/fabric-ca/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-client/main.go:83 +0x49

This is happening because of recent change set that changed id.attributes to id.attrs in the client config template. This problem will also happen if the user specified a custom config file with out id.attributes property.",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr5j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Inconsistent treatment of executable paths in fabric-ca go tool scripts,FABC-257,19538,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,28/Jul/17 4:44 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/Sep/17 2:04 AM,,,,,,,v1.1.1,,,,,,0,,,,,,"Two of the go tools script files that run as part of the unit tests do not use the absolute path of the executables consistently, resulting in failure on some systems:
{code:java}
./scripts/check_imports
Installing goimports ...
Checking imports ...
./scripts/check_imports: line 13: goimports: command not found

./scripts/check_lint
Installing golint ...
Running lint ...
./scripts/check_lint: line 15: golint: command not found{code}
The check for the exec uses the absolute path:


{code:java}
if [ ! -f $GOPATH/bin/golint ]; then
 echo ""Installing golint ...""
 go get -u github.com/golang/lint/golint
fi{code}
but the invocation does not:
{code:java}
golint $dir/...{code}
Consequently, if $GOPATH/bin is not in the users PATH envar, the scripts fail.

 

This fixes the scripts to user the absolute path in each case.",,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Sep/17 2:02 AM;rennman;image-2017-09-26-13-02-44-295.png;https://jira.hyperledger.org/secure/attachment/12143/image-2017-09-26-13-02-44-295.png","27/Sep/17 2:03 AM;rennman;image-2017-09-26-13-03-03-158.png;https://jira.hyperledger.org/secure/attachment/12144/image-2017-09-26-13-03-03-158.png",,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy9xj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Sep/17 6:10 AM;smithbk;Allen, pls update status.  Is there a change set?;;;","27/Sep/17 2:04 AM;rennman;Fixed as part of CR 9407, [FAB-3924] Improve test coverage of lib
  
 
 
 
 
 
 ;;;",,,,,,,,,,,,,,,,,,
"block-listener example error creating event client, default signing identity error",FABC-258,15989,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,nya1,nya1,26/Apr/17 3:20 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,07/Jun/17 5:47 AM,v1.0.0-alpha1,,,,,,v1.0.0,,,,,,0,,,,,,"Hi,
I'm getting this error when i run the block-listener example on 1.0-alpha with 1 peer.

{code:none}
./block-listener -events-address=""localhost:7050"" -events-from-chaincode=""chancode_id""
{code}

{code:none}
Event Address: localhost:7050
2017/04/21 14:58:48 Initialize BCCSP [SW]
2017/04/21 14:58:48 Creating BCCSP-based MSP instance
2017/04/21 14:58:48 Created new local MSP
2017/04/21 14:58:48 Obtaining default signing identity
error on Register send could not obtain the default signing identity, err This MSP does not possess a valid default signing identity
could not start chat could not obtain the default signing identity, err This MSP does not possess a valid default signing identity
Error creating event client
{code}

peer1 is running and i'm able to deploy any chaincode, I just can't listen to events.","Ubuntu 16.04
Docker version 17.04.0-ce, build 4845c56
",nya1,skarim,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr5b:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,nya1,skarim,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Jun/17 11:48 PM;wlahti;This issue is being worked on the peer side via: https://jira.hyperledger.org/browse/FAB-3282. The CR in progress is: [https://gerrit.hyperledger.org/r/#/c/10063]

I believe resolution of that JIRA should also resolve this one. ;;;","07/Jun/17 5:47 AM;skarim;With FAB-3282 merged, this issue is no longer reproducible. I am marking this item as done. ;;;",,,,,,,,,,,,,,,,,,
Failed parsing RSA private key,FABC-259,18680,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid: Works as Expected,doublechaintech,pvrbharg,pvrbharg,27/Jun/17 2:21 AM,27/Jul/19 11:50 PM,28/Oct/23 2:21 AM,27/Jul/19 11:49 PM,v1.0.0-rc1,,,,,,,,,,,,0,v1.0,,,,,Failed parsing RSA private key: asn1: structure error: tags don't match (2 vs \{class:0 tag:16 length:13 isCompound:true}) \{optional:false explicit:false application:false defaultValue:<nil> tag:<nil> stringType:0 timeType:0 set:false omitEmpty:false}  @5,"Team,

Trying to configure fabric-ca with customer provisioned crypto material and getting the above issue. Keith has been helping me till date and I want you to let us know what needs to be done and what we have been doing wrong (if any).

 

This is a blocking issue for us at this customer deliverable. Thanks.

 ",doublechaintech,Jai_Kiran,mastersingh24,pvrbharg,rennman,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Jun/17 2:19 AM;pvrbharg;CSR.csr;https://jira.hyperledger.org/secure/attachment/11382/CSR.csr","27/Jun/17 2:19 AM;pvrbharg;DigiCertCA2.pem;https://jira.hyperledger.org/secure/attachment/11381/DigiCertCA2.pem","27/Jun/17 2:19 AM;pvrbharg;TrustedRoot.pem;https://jira.hyperledger.org/secure/attachment/11378/TrustedRoot.pem","27/Jun/17 2:19 AM;pvrbharg;ca-chain.cert.pem;https://jira.hyperledger.org/secure/attachment/11384/ca-chain.cert.pem","27/Jun/17 2:19 AM;pvrbharg;ca-key.pem;https://jira.hyperledger.org/secure/attachment/11383/ca-key.pem","27/Jun/17 2:19 AM;pvrbharg;error_log.rtf;https://jira.hyperledger.org/secure/attachment/11380/error_log.rtf","27/Jun/17 2:19 AM;pvrbharg;fabric-ca-server-config.yaml;https://jira.hyperledger.org/secure/attachment/11379/fabric-ca-server-config.yaml",,,,,,,,,,,,,,,,,,,,"1|hzy5tj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,doublechaintech,Jai_Kiran,mastersingh24,pvrbharg,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Jun/17 3:32 AM;pvrbharg;Dear Saad, Anil and Keith,

Apologies for not stating how to re-create the issue. Here are the steps:

Platform is Ubuntu - 16.04 - latest patches 

[http://hyperledger-fabric-ca.readthedocs.io/en/latest/]

[http://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#getting-started]

 

sudo apt install libtool libltdl-dev

go get -u github.com/hyperledger/fabric-ca/cmd/…

fabric-ca-server start -b admin:adminpw &

fg CTRL+C

 

Customize fabric-ca-server-config.yaml  created by replacing the customer provisioned cryto files [per guidance from Keith - using openssl and making sure private key is not encrypted)

 

Convert files to .pem format

Create the certificate chain file

 

# cat intermediate/certs/intermediate.cert.pem \

      certs/ca.cert.pem > intermediate/certs/ca-chain.cert.pem

# chmod 444 intermediate/certs/ca-chain.cert.pem

 

Update the sections for debug and CA in config file as shown:

 

# Enables debug logging (default: false)

debug: true

 

ca:

  # Name of this CA

  name: ubuntu.ibm.com-fabric-ca-server

  # Key file (default: ca-key.pem)

  keyfile: ca.key.pem

  # Certificate file (default: ca-cert.pem)

  certfile: ca.cert.pem

  # Chain file (default: chain-cert.pem)

  chainfile: ca-chain.cert.pem

 

fabric-ca-server start -b admin:adminpw

At this point Fabric-ca-server is supposed to be coming up with customer provisioned crypto versus IBM provided self signed crypto material.

We have attached all the items for you to review. I can be available on Rocket Chat or direct phone. Thanks. 

 ;;;","27/Jun/17 4:16 AM;Jai_Kiran;I tried to generate ecdsa private key, but I am getting below error ,

root@lpqblockchainca:/data/amex_certs/new_certs# openssl req -out newcsr.csr -new -newkey ecdsa:256 -nodes -keyout newca.key.pem
Unknown algorithm ecdsa;;;","27/Jun/17 4:20 AM;pvrbharg;Hi Saad,

 

We actually need correct openssl command syntax to create a CSR with supported encryption algorithm of ECDSA - so we can get customer to provision correct set of certs.

 

Please let me know if we need to connect on phone.

 
 The following is what we got from Keith:
 
1) Use openssl to generate the CSR *similar* to the following and adhering to the AMEX requirements for the CSR as you are prompted. 
openssl req -out CSR.csr -new -newkey rsa:2048 -nodes -keyout ca-key.pem2) Base 64 encode contents of CSR.csr and paste to AMEX.
 
3) Once you get the certificate, name it ""ca-cert.pem"" and you already have the matching ""ca-key.pem"" from #1 above.

-------------------------------------------------------------------------------
Keith Smith


 ;;;","27/Jun/17 4:24 AM;rennman;There are two issues here.

1)  The RSA key is in a format we don't support.

To convert the key to the correct format:

{code:java}
openssl rsa -in ca-key.pem -out ca-key-rsa.pem
{code}

2) The EE certificate for the fabric-ca server is missing from the configuration.

In the attached fabric-ca-server-config.yaml file, CA_CERTFILE is configured as TrustedRoot.pem (which is the 'DigiCert High Assurance EV Root CA' cert).

Rather, CA_CERTFILE should point to the certificate that contains the public key matching CA_KEYFILE -- ca-key.pem in this case


{code:java}
ca:
  name: lpqblockchainca.phx.aexp.com
  keyfile: ca-key.pem
  certfile: <certificate containing lpqblockchainca.phx.aexp.com's public key>
  chainfile: ca-chain.cert.pem

{code}
;;;","27/Jun/17 4:28 AM;mastersingh24;It is very unclear what you are trying to accomplish with this configuration.  As [~rennman] mentions, the following is not correct as the certfile does not match the keyfile.  And the certfile and chainfile are both from DigiCert
  
{noformat}
ca:
  # Name of this CA
  name: lpqblockchainca.phx.aexp.com
  # Key file (default: ca-key.pem)
  keyfile: ca-key.pem 
  # Certificate file (default: ca-cert.pem)
  certfile: TrustedRoot.pem 
  # Chain file (default: chain-cert.pem)
  chainfile: ca-chain.cert.pem 
{noformat}
 ;;;","27/Jun/17 4:31 AM;mastersingh24;I'm also reducing this to medium as this is not a bug;;;","27/Jun/17 4:44 AM;pvrbharg;Hi Gari,

We need clear instructions - VERY CLEAR instructions - for AMEX to provision their custom certificates - signed by DigiCert (both for intermediate and root). I would not mind someone walking us thru in a web session. This issue is going on for weeks and AMEX would not use IBM self signed certificates. If you want to know what we are trying to do - so you can quickly help us - let us know when we can call you, please

THANK YOU

 ;;;","27/Jun/17 6:50 AM;pvrbharg;Team,

Thank you for our team call and I am grateful you understand what we are trying to do.

I got the required content from Jai and I sent you the content - thru IBM internal mail.

Thanks.;;;","27/Jun/17 8:24 AM;mastersingh24;[~pvrbharg] - I assume you meant they don't want to use self-signed certs?  The certs generated by fabric-ca have nothing to do with IBM.;;;","27/Jun/17 9:24 AM;pvrbharg;Hi Gari,

 

My customer does not want to use cryptogen created IBM self signed certs - that gets created in crypto-config folder when we run the e2e use case per getting started guide. They would like to generate crypto-config folder contents with certs created by fabric-ca-server that they want to standup and this fabric-ca-server would have their own custom provisioned root, intermediate certs - signed by *real* root and intermediate signer such as DigiCert or VeriSign or both.

 

Hope this helps or let me know and a phone call can help (or you can connect with Bobbie Cochrane). Thanks.;;;","02/Jul/17 6:58 AM;mastersingh24;This is not a bug - might need some additional documentation - will raise a new doc issue if required;;;","20/Feb/19 1:11 PM;doublechaintech;[~pvrbharg] , we (Double Chain Tech) has a went-live project using RSA certification, we implemented RSA bccsp and Java SDK, we want to contribute this to hypperledger fabric.

 ;;;",,,,,,,,
fabric-ca-server does not surface fatal errors for ldap,FABC-260,16011,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,rennman,rennman,26/Apr/17 6:19 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,26/May/17 4:05 AM,v1.0.0-alpha1,,,,,,v1.0.0,,,,,,0,,,,,,"There is an entire class of errors, for which nothing is surfaced to the user, even in the event of initialization failure. Among these are:

failure to code a URL
invalid URL scheme
any failure due to bad identity lookup (which we should not be doing at initialization anyway --  see https://jira.hyperledger.org/browse/FAB-3415)",,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr9j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/May/17 8:50 AM;smithbk;Allen, this may be fixed by https://gerrit.hyperledger.org/r/#/c/9341/

which is not yet merged.  I'm not sure though unless you provide specific instructions on how to reproduce the problem or problems.

I suggest that you pull down 9341 and try to reproduce one or more problems and if they still exist, giving the exact commands.

 ;;;","26/May/17 4:05 AM;rennman;There has been some error code restructuring that has fixed this along the way, so I'm ok to close this.;;;",,,,,,,,,,,,,,,,,,
Fabric CA needs to restrict OUs in ecerts,FABC-261,23713,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,02/Nov/17 11:20 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,06/Jan/18 4:50 AM,,,,,,,v1.1.1,,,,,,0,,,,,,"Now that access control decisions are being made by fabric based on OUs, we must restrict OUs in ecerts.

For example, Alice registers Bob to be a client with the fabric-ca-server;
however, Bob enrolls and specifies the OU for a peer in the CSR.
This means Bob is authorized as a peer by MSP even though Alice intended Bob
to have a client identity with no peer authorization.
So this means the fabric-ca-server must have a way of limiting what Bob can specify
in the CSR.

OUs will be derived from the type and affiliation which is already restricted.
For example, if an identity is registered as type ""peer"" and affiliation ""a.b"",
the OUs would be ""OU=b,OU=a,OU=peer"" (where ""peer"" is the root of the OU hierarchy).
This means any OUs in the enrollment request will be ignored.",,denyeart,JonathanLevi,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzym87:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,JonathanLevi,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Nov/17 12:33 AM;mastersingh24;[~smithbk] - oddly enough, this is exactly what I was thinking as well.  It makes sense, uses existing ""access controls"" which are already in place as well.

The only thing I was thinking about is whether or not we would have to have a common base DN that would be prepended to the OU piece, but I think that would be a future requirement that we could look at if anyone asks;;;","03/Nov/17 2:17 AM;smithbk;https://gerrit.hyperledger.org/r/15139 [FAB-6871] Set OUs in ecerts;;;","07/Nov/17 5:04 AM;JonathanLevi;What's the Fix Version here? 1.0.5 or for 1.1 ?;;;","07/Nov/17 5:30 AM;smithbk;I set Fix Version field to 1.1;;;","17/Nov/17 12:36 AM;smithbk;There is an issue in cfssl related to this though it is still usable in many/most scenarios.
See https://github.com/cloudflare/cfssl/issues/824 for information.
I plan to fix this in cfssl prior to v1.1, but am subject to response time from cfssl folks.;;;","27/Nov/17 2:00 PM;denyeart;[~smithbk] https://gerrit.hyperledger.org/r/#/c/15139/ is Merged.  Can this be marked Done or something else is needed?;;;",,,,,,,,,,,,,,
getcacert command does not work with TLS-enabled fabric-ca,FABC-262,17011,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,skarim,mastersingh24,mastersingh24,23/May/17 5:19 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,01/Jun/17 1:56 AM,v1.0.0,v1.0.0-alpha2,,,,,v1.0.0,,,,,,1,,,,,,"When running the getcacert command, the fabric-ca-client does not set TLS enabled when there is an https endpoint nor does it honor the config or environment setting",,ChristopherFerris,denyeart,mastersingh24,skarim,,,,,,,,,,,,,,,,,,,7200,7200,,0%,7200,7200,,Not a security issue,,,,,,,,FAB-4212,FAB-4379,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxwjj:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,mastersingh24,skarim,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/May/17 5:49 AM;skarim;https://gerrit.hyperledger.org/r/#/c/9725/;;;","31/May/17 12:29 AM;mastersingh24;This bug is definitely real - it just depends on how far we want to go in terms of fixing it in the near term versus a longer term fix.
A quick fix is to  modify https://github.com/hyperledger/fabric-ca/blob/master/lib/tls/tls.go#L47 by removing the skip tag.  This will make it possible for this command to work with TLS but will not support config files nor environment variables  - just command line options;;;","31/May/17 1:41 PM;denyeart;[~skarim] Could you net out the discussion in the CR here, so that maintainers understand the scope of the change required?;;;","31/May/17 10:45 PM;skarim;The main issue is that there in no way to enable TLS for the getcacert command. The way TLS is enabled is by looking at the URL the client provides, if the client uses https as the protocol then TLS gets enabled. This logic is executed in a function called configInit(), all other commands call into this function however getcacert command does not. Besides just enabling TLS, configInit() also contains the necessary viper logic to enable reading configuration settings from the a config file or environment variables. Calling configInit() for the getcacert is the ideal fix to this issue.

However, there is a simpler fix of just enabling TLS for getcacert by exposing a CLI flag (currently hidden) that will allow user to enable TLS be setting this flag. However, this introduces a difference in behavior when compared to other commands that don't require setting this flag to enable TLS. Also, no support for config file or environment variable would exist for getcacert. ;;;","01/Jun/17 12:53 AM;ChristopherFerris;I've discussed with Gari and the more elaborate fix makes sense to me.;;;","01/Jun/17 1:55 AM;ChristopherFerris;oh nuts, my bad... merged this when I thought it had already been approved.;;;",,,,,,,,,,,,,,
fabric-ca-client inserts leading zero in DB entry for serial number,FABC-263,15415,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,skarim,rennman,rennman,21/Mar/17 8:09 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,11/Apr/17 10:51 PM,,,,,,,v1.0.0,,,,,,0,,,,,,"My enrollment certificates tend to have a serial # with 40 hex chars, e.g.

7b07302b35cf4dcf3a368d26d8eeeb9e48e5a61d

However, the DB entries have a leading 0:


VALUES('admin','07b07302b35cf4dcf3a368d26d8eeeb9e48e5a61d','1b88a307e17c118ad9ea5d8ffaf88f73be522b96' ...

Consequently, a revoke invocation fails with 404 not found.

If I supply the leading 0 to the --serial value, it succeeds.

Whether or not the leading is either in the DB, or part of the command-line argument for that matter, it should be recognized as a number. (Ideally, the command should allow hex or decimcal, but I can live with requiring hex, provided it's documented.)",,rennman,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxoc7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Mar/17 12:15 AM;smithbk;I agree with making this more user-friendly by:
1) handling with or without the leading 0.  If it is difficult to determine exactly when to prepend the leading 0, you may consider using the LIKE operator with a pattern match, obviously being careful to not match something we shouldn't.  This may be more applicable to other DBs also.  This is just a consideration.
2) I think allowing decimal is good.  The rule could be that we assume hex if there is a non-decimal character; otherwise, we assume decimal.  We also look for a leading ""0x"" and strip it off if present.;;;","22/Mar/17 1:01 AM;rennman;1 - I think the basic user assumption is that the SN is treated as an integer up to but not exceeding 160 bits and treated accordingly, not as a string. Consequently, if wildcarding produces the intended result, that's fine. I will test with all the DB's we support.

2 - As a user I don't find it to be overly burdensome to even go so far as to require '0x' to explicitly indicate hexadecimal to eliminate any ambiguity.;;;","01/Apr/17 1:34 AM;rennman;Since the revoke code has been merged, this is a serious issue. All operations (register, revoke, reenroll) fail intermittently. I thought I was seeing things, but a basic loop:

{code:java}
while ./scripts/fvt/reregister_test.sh;do :; done

{code}
in a script file, and run in the fabric-fvt container

{code:java}
docker run -ti -v $PWD:/opt/gopath/src/github.com/hyperledger/fabric-ca hyperledger/fabric-ca-fvt ./repeat.sh
{code}

will show that occasionally, a certificate is issued that causes us to add the leading 0 --
     2017/03/31 15:37:45 [DEBUG] Checking for revocation/expiration of certificate owned by 'admin'
     2017/03/31 15:37:45 [DEBUG] DB: Get certificate by serial (20e246b27fe0e2b18d4ccf4d77da47b482d5983b) and aki (062d7886188106355e299ee6d97c44dad8aecb18)
Error: Error response from server was: Authorization failure

but the DB shows
admin|20e246b27fe0e2b18d4ccf4d77da47b482d5983b|62d7886188106355e299ee6d97c44dad8aecb18||good|0|
...

I reaffirm my insistence that SN is a 20 octet, non-negative number, regardless of it's encoding and should treated as such. I understand that few, if any SQL implementations have native support for huge integers, so a little massaging of the data is necessary.;;;","01/Apr/17 1:54 AM;rennman;Just a clarification that the above failure was due to the inability to find the cert via AKI, so I suppose a similar logic applies.;;;","04/Apr/17 2:19 AM;skarim;So if I understand correctly, that database does not store any zeros in front of serial or aki. If we were to remove any leading zeros in user input of serial and/or aki then the database lookup of certificate should succeed. ;;;","04/Apr/17 2:46 AM;rennman;Evidently. When I display the DB with the cmd-line tool, the leading zeros do not appear.;;;","11/Apr/17 10:51 PM;skarim;This has already been fixed, leading zeros are not stored in DB. However, this caused the certificate lookup issue which I opened https://jira.hyperledger.org/browse/FAB-3038 to address. I am marking this as done. ;;;",,,,,,,,,,,,,
fabric-ca update to enrollment profile,FABC-264,24647,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,smithbk,rennman,rennman,01/Dec/17 3:11 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,17/Jan/18 10:03 PM,v1.1.0,,,,,,v1.1.0-alpha,,,,,,0,,,,,,Need to synchronize the requested CSR and the CSR that is generated on behalf of the client.,,mastersingh24,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyp0n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,rennman,smithbk,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Dec/17 10:03 PM;smithbk;https://gerrit.hyperledger.org/r/15859 [FAB-7235] Check profile for isCA;;;","07/Jan/18 11:19 PM;mastersingh24;[~smithbk] - would you mind adding a little more detail to the description above?;;;",,,,,,,,,,,,,,,,,,
Fabric CA should report resource issue not auth failure,FABC-265,21347,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,harrisob@us.ibm.com,harrisob@us.ibm.com,06/Oct/17 10:09 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,10/Nov/17 1:24 AM,,,,,,,v1.1.0,,,,,,0,MembershipServices,,,,,"When the CA runs out of disk space, new enrollments fail with a \{{color:#444444}""code"":400,""message"":""Authorization failure""}{color}, it would be helpful to the client apps if they knew this was a resource issue not an authorization issue.",,harrisob@us.ibm.com,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyikn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,harrisob@us.ibm.com,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Nov/17 3:43 AM;smithbk;Bret, do you have server logs from this failure?  Or exactly what disk was running out of space?
The server's home directory?  This would help to reproduce, as it is not clear from the code how
this could happen.  It should be returning a 500 with an appropriate message for these kinds of errors.;;;","10/Nov/17 1:20 AM;harrisob@us.ibm.com;This was an issue from rocketchat, no traces and the user solved it themselves.

 Sorry I do not have anything to help. If you feel that you can not reproduce, I will close it.;;;","10/Nov/17 1:23 AM;smithbk;I don't have enough info to reproduce.  Yes, pls close.;;;",,,,,,,,,,,,,,,,,
fabric-ca-server build failure,FABC-266,16115,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,smithbk,smithbk,smithbk,29/Apr/17 8:35 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,02/May/17 12:10 AM,,,,,,,,,,,,,0,,,,,,"Need to investigate why CI didn't catch this.  I'm stumped currently.

The build failure is as follows:

{code}
Keiths-MBP:fabric-ca keith$ make fabric-ca-server
Building fabric-ca-server in bin directory ...
# github.com/hyperledger/fabric-ca/cmd/fabric-ca-server
cmd/fabric-ca-server/config.go:325: serverCfg.DB undefined (type *lib.ServerConfig has no field or method DB)
cmd/fabric-ca-server/config.go:330: serverCfg.LDAP undefined (type *lib.ServerConfig has no field or method LDAP)
make: *** [bin/fabric-ca-server] Error 2
{code}
",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxrrr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
fabric CA DB initialization should be more resilient,FABC-267,20198,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,16/Aug/17 1:35 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,20/Sep/17 4:48 AM,v1.0.0,,,,,,v1.1.0,,,,,,0,Release-planning-1.1,,,,,"Handle the following scenarios:
1) DB exists but tables have not been created
2) DB exists and table exists but table is empty
3) DB exists, table exists, is non-empty but identity is not found, then add it

Basically, it should work as follows:
For each CA in the server, try to initialize the DB at server startup and when each request is received thereafter,
until it successfully initializes.   If it fails during startup and again when a request is received, the DB initialization error is logged and returned to the client.  Each attempt to initialize does the following:
1) Try to create the DB.  If it fails for any other reason than it already exists, fail initialization and return the error.
2) Try to create each table (certificate, user, affiliation).  If any fails for any other reason than it already exists, fail initialization and return the error.
3) For each affiliation in the affiliations section, try to insert the affiliation into the affiliations table.  If it fails for any other reason than it already exists, fail initialization and return the error.
4) If LDAP is not enabled, for each identity in the register.identities section of the config file, try to insert the identity into the users table.
    If it fails for any other reason than it already exists, fail initialization and return the error.

If it makes it thru all of these steps without error, then initialization was successful and we don't try to initialize the DB again, until the server is restarted.

NOTE: This means that you can register new identities or affiliations by adding them to the config file and restarting the server.  If you are running in a cluster, you only need to do this for one cluster member.  Removing an identity from the config file does NOT remove it from the database.",,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyd7r:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Aug/17 4:30 AM;skarim;https://gerrit.hyperledger.org/r/#/c/12611/;;;",,,,,,,,,,,,,,,,,,,
Registration of the empty string affiliation should not return an error,FABC-268,20065,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,09/Aug/17 10:54 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,05/Sep/17 10:47 PM,,,,,,,v1.1.0,,,,,,0,,,,,,"The empty string is the root of the affiliation hierarchy.
The empty string affiliation should be recognized as an affiliation on the following command, and assuming the user is authorized to register an identity with this affiliation, it should not return an error as shown below.

{code}
# fabric-ca-client enroll -u http://admin:adminpw@localhost:7054
# fabric-ca-client register --id.name foo --id.type peer --id.affiliation """"
2017/08/09 09:37:38 [INFO] User provided config file: /Users/keith/.fabric-ca-client/fabric-ca-client-config.yaml
2017/08/09 09:37:38 [INFO] Configuration file location: /Users/keith/.fabric-ca-client/fabric-ca-client-config.yaml
Error: Registration request does not have an affiliation
{code}

The easiest work-around is to use the bootstrap username and password to enroll since this identity has the empty string as it's affiliation.",,denyeart,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzych3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,skarim,smithbk,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Aug/17 10:25 PM;skarim;https://gerrit.hyperledger.org/r/#/c/12363/;;;","12/Sep/17 10:58 PM;denyeart;Bugs don't need a release planning label, removed.;;;",,,,,,,,,,,,,,,,,,
facing issues while enrolling the user by using fabric cop configuration,FABC-269,15722,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,arun17,arun17,13/Apr/17 4:32 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,01/May/17 11:49 PM,v1.0.0,,,,,,v1.0.0,,,,,,0,MembershipServices,v1.0,,,,i am trying to configure cop server file after initializing and starting the server while enrolling the user i m facing issues...u can view the issue in the attatchment...,,arun17,mastersingh24,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-84,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 4:28 PM;arun17;Screenshot (6).png;https://jira.hyperledger.org/secure/attachment/10659/Screenshot+%286%29.png",,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpvr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,arun17,mastersingh24,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Apr/17 9:00 PM;mastersingh24;[~skarim] Please have a look at this;;;","18/Apr/17 11:40 PM;skarim;[~arun17] You are using an outdated version (fabric-cop), please get the latest version (fabric-ca). See links below.

https://github.com/hyperledger/fabric-ca
http://hyperledger-fabric.readthedocs.io/en/latest/Setup/ca-setup.html;;;","01/May/17 11:49 PM;smithbk;Given that this was using a COP configuration file and that is no longer used, closing this.  Pls reopen if this is still a problem with the latest fabric-ca;;;",,,,,,,,,,,,,,,,,
"""make ldap-tests"" fails due to test code bug",FABC-270,13956,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,yuki-kon,yuki-kon,yuki-kon,07/Jan/17 4:43 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,23/Apr/17 10:20 PM,v1.0.0,,,,,,v1.0.0,,,,,,0,MembershipServices,,,,,"The following error occurs when running ""make ldap-tests"".
In detail, runnning ""fabric-cop/cli/server/ldap/client_test.go"" fails.
The reason is that data type doesn't meet the requirement.
Data type shoud be changed from string to []srting.

{noformat}Downloading and starting openldap-cop ...
openldap-cop has been started
adding new entry ""cn=jsmith,dc=example,dc=org""

adding new entry ""uid=jsmith,dc=example,dc=org""

Running LDAP test cases ...
# github.com/hyperledger/fabric-cop/cli/server/ldap
./client_test.go:48: cannot use ""mail"" (type string) as type []string in argument to c.GetUser
FAIL    github.com/hyperledger/fabric-cop/cli/server/ldap [build failed]
LDAP test cases are complete
Stopping openldap-cop ...
10fb1fc6d5ec
10fb1fc6d5ec
Stopped openldap-cop
*** BEGIN FAILURES ***
FAIL    github.com/hyperledger/fabric-cop/cli/server/ldap [build failed]
*** END FAILURES ***
Makefile:134: recipe for target 'ldap-tests' failed
make: *** [ldap-tests] Error 1{noformat}",,harsha544,smithbk,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxglr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,harsha544,smithbk,yuki-kon,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/17 10:43 AM;smithbk;Yuki, this works for me.  Are you still able to reproduce?   Thanks;;;","06/Apr/17 11:21 AM;yuki-kon;Smith, this issue is resolved by this patch, https://gerrit.hyperledger.org/r/#/c/4431/ . Thanks.;;;",,,,,,,,,,,,,,,,,,
Fix compilation error,FABC-271,23980,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,aambati,aambati,aambati,17/Nov/17 1:58 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/Nov/17 11:56 AM,,,,,,,v1.1.0,,,,,,0,,,,,,Fix compilation error in the cmd/fabric-ca-client/main_test.go. The error was caused by the changes introduced by [https://gerrit.hyperledger.org/r/c/14741/] and [https://gerrit.hyperledger.org/r/c/15025/] and gerrit did not complain as the changes did not conflict.,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzynbr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Nov/17 12:34 PM;aambati;https://gerrit.hyperledger.org/r/c/15533/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca binary data in log file,FABC-272,23915,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,11/Nov/17 1:45 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,25/Nov/17 12:40 AM,,,,,,,v1.1.1,,,,,,0,,,,,,"From a debug statement in genCRLHandler() from  lib/servergencrl.go, the crl is printed in raw binary. This change would print the standard string representation of a []byte stream:
- log.Debugf(""Successfully generated CRL: %s\n"", crl)
+ log.Debugf(""Successfully generated CRL: %v\n"", crl)

Also, there are a couple of debugging statements in 
lib/client.go
lib/ca.go
where the string substitution is not happening properly (the '%s' is printed, and not the value). This would fix those instances.",,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzymyn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Nov/17 1:48 AM;rennman;link to change set;;;","16/Nov/17 6:12 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/15375/;;;",,,,,,,,,,,,,,,,,,
Cannot verify signature. Error is: Wrong key usage using Java SDK,FABC-273,20083,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ptippett,ptippett,ptippett,10/Aug/17 4:57 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,19/Oct/17 3:00 AM,,,,,,,,,,,,,0,HSBN,,,,,"From everything I'm seeing it's looking like Java isn't having a good time with the certs it's getting from the fabric CA. The ""Wrong key usage"" is thrown in the `Signature.initVerify()` method in the JDK which apparently complains if the certificate is marked as not being appropriate for signing (see line 473 of http://www.atetric.com/atetric/javadoc/openjdk/jdk/7u79/src-html/java/security/Signature.html). I'm getting this error on both a Linux VM using OpenJDK and on my Mac with the IBM JDK.

I managed to get the info of the certificate the SDK was erroring on. (I had to do a little fiddling with it because the cert as displayed in the Java exception was giving me `-----BEGIN -----` instead of `-----BEGIN CERTIFICATE-----`, like wise for `END`). It's looking like the cert I'm getting from the Bluemix instance of the ledger when trying to send a transaction proposal in fact does not support digital signatures (though it supports certificate signing).

 

Here's the stack trace from Java:

ERROR 2017-08-09 14:12:19,717 7222 org.hyperledger.fabric.sdk.security.CryptoPrimitives [main] Cannot verify signature. Error is: Wrong key usage
Certificate: 2D2D...2D0A
org.hyperledger.fabric.sdk.exception.CryptoException: Cannot verify signature. Error is: Wrong key usage
Certificate: 2D2D...2D0A
 at org.hyperledger.fabric.sdk.security.CryptoPrimitives.verify(CryptoPrimitives.java:187)
 at org.hyperledger.fabric.sdk.ProposalResponse.verify(ProposalResponse.java:106)
 at org.hyperledger.fabric.sdk.Channel.sendProposalToPeers(Channel.java:2040)
 at org.hyperledger.fabric.sdk.Channel.sendProposal(Channel.java:1955)
 at org.hyperledger.fabric.sdk.Channel.sendTransactionProposal(Channel.java:1889)
 at com.ibm.hyperledger.HyperledgerClient.storeDocument(HyperledgerClient.java:134)
 at com.ibm.hyperledger.Main.testCommunications(Main.java:72)
 at com.ibm.hyperledger.Main.main(Main.java:22)
Caused by: java.security.InvalidKeyException: Wrong key usage
 at java.security.Signature.initVerify(Signature.java:501)
 at org.hyperledger.fabric.sdk.security.CryptoPrimitives.verify(CryptoPrimitives.java:180)
 ... 7 more
ERROR 2017-08-09 14:12:19,718 7223 org.hyperledger.fabric.sdk.ProposalResponse [main] verify: Cannot retrieve peer identity from ProposalResponse. Error is: Cannot verify signature. Error is: Wrong key usage
Certificate: 2D2D...2D0A
org.hyperledger.fabric.sdk.exception.CryptoException: Cannot verify signature. Error is: Wrong key usage
Certificate: 2D2D...2D0A
 at org.hyperledger.fabric.sdk.security.CryptoPrimitives.verify(CryptoPrimitives.java:187)
 at org.hyperledger.fabric.sdk.ProposalResponse.verify(ProposalResponse.java:106)
 at org.hyperledger.fabric.sdk.Channel.sendProposalToPeers(Channel.java:2040)
 at org.hyperledger.fabric.sdk.Channel.sendProposal(Channel.java:1955)
 at org.hyperledger.fabric.sdk.Channel.sendTransactionProposal(Channel.java:1889)
 at com.ibm.hyperledger.HyperledgerClient.storeDocument(HyperledgerClient.java:134)
 at com.ibm.hyperledger.Main.testCommunications(Main.java:72)
 at com.ibm.hyperledger.Main.main(Main.java:22)
Caused by: java.security.InvalidKeyException: Wrong key usage
 at java.security.Signature.initVerify(Signature.java:501)
 at org.hyperledger.fabric.sdk.security.CryptoPrimitives.verify(CryptoPrimitives.java:180)
 ... 7 more
ERROR 2017-08-09 14:12:19,719 7224 main [main] Main errored.
java.lang.Exception: Invoke transaction proposal failed
 at com.ibm.hyperledger.HyperledgerClient.storeDocument(HyperledgerClient.java:143)
 at com.ibm.hyperledger.Main.testCommunications(Main.java:72)
 at com.ibm.hyperledger.Main.main(Main.java:22)

 ",,ashutosh_kumar,ptippett,rickr,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyckn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,ptippett,rickr,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Aug/17 5:12 AM;rickr;How is this different when running the Integration suite that passes with using the fabricca ?;;;","10/Aug/17 5:19 AM;rickr;Did you follow the README.md and the java defines needed for IBM JDK?

Those are for TLS .. should not apply but make sure they're set;;;","10/Aug/17 5:45 AM;jimthematrix;had a discussion with [~ashku], this is the problem with the certificate:
{code}
X509v3 extensions:
            X509v3 Key Usage: critical
                Certificate Sign
            X509v3 Basic Constraints: critical
                CA:FALSE
{code}

If the key usage is ""Certificate Sign"" then the next field must be ""CA:TRUE"". Or the key usage should have been ""Digital Signature"".

Essentially Java is pointing out a legitimate problem with the certificate. Please have the developer double check on the certificate and how it got generated.;;;","10/Aug/17 5:45 AM;rickr;Talking to [~jimthematrix]  and [~ashku] this certificate which you did no include in the defect is not valid for signing.  Assigning defect to you;;;","10/Aug/17 6:07 AM;ashutosh_kumar;For signature validation , the Key Usage should be Digital Signature and CA should be false.Java is unforgiving , unfortunately.;;;","10/Aug/17 9:48 AM;ptippett;[~smithbk] Hi Keith.  Is this something we can control in the CA template or does it need a fix in the CA? ;;;","11/Aug/17 12:30 AM;smithbk;How was this cert created?  The default usage should be ""digital signature"" (see below).  Did you add new profiles or pass in a different profile name to your enroll request?

signing:
    default:
      usage:
        - digital signature
      expiry: 8760h
    profiles:
      ca:
         usage:
           - cert sign
         expiry: 43800h
         caconstraint:
           isca: true
           maxpathlen: 0
      tls:
         usage:
            - signing
            - key encipherment
            - server auth
            - client auth
            - key agreement
         expiry: 8760h
;;;","11/Aug/17 2:53 AM;smithbk;Will just showed me your config and it is not what we generate by default.
The value of ""signing.default.usage"" should be ""digital signature"" not ""cert sign"".;;;","15/Aug/17 3:30 AM;rickr;Moved to fabric-ca – update if it turns out to be sdk issue;;;","27/Sep/17 1:41 AM;smithbk;Paul, can you provide an update?  Is this problem resolved?  Was your fabric-ca-server-config.yaml incorrect?;;;","19/Oct/17 3:00 AM;smithbk;Closed because of no response.  Pls reopen if there is still a problem;;;",,,,,,,,,
[SECURITY] fabric-ca server certificate should verify keyCertSign usage,FABC-274,18335,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,20/Jun/17 2:28 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,22/Jun/17 8:33 AM,v1.0.0-beta,,,,,,v1.0.0-rc1,,,,,,0,,,,,,"The validateUsage check in to verify the fabric-ca server certificate in lib/ca.go merely verifies the existence of the key usage extension. However, the check really should be verifying the value; at a minimum we should ensure that the keyCertSign is among the listed usages.",,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,FAB-4546,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy4rz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Jun/17 12:01 AM;skarim;https://gerrit.hyperledger.org/r/#/c/10839/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca expects certificate chains in the wrong order,FABC-275,21032,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,vdods,vdods,28/Sep/17 9:46 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,29/Nov/17 11:59 PM,,,,,,,v1.1.0,,,,,,0,,,,,,"TLS 1.2 RFC (see links below) specifies that a cert chain must come host-first, and that each successive cert must be the issuer of the previous.  See ""certificate_list"" and surrounding paragraphs on page 47/48
{noformat}
certificate_list
      This is a sequence (chain) of certificates.  The sender's
      certificate MUST come first in the list.  Each following
      certificate MUST directly certify the one preceding it.  Because
      certificate validation requires that root keys be distributed
      independently, the self-signed certificate that specifies the root
      certificate authority MAY be omitted from the chain, under the
      assumption that the remote end must already possess it in order to
      validate it in any case.{noformat}
This ordering is expected by golang's http package where, for example in mutual TLS, the https server would load the server's cert chain (server's cert first in the chain) and key when calling ListenAndServeTLS, e.g.
{code:java}
server.ListenAndServeTLS(""server-cert-chain.pem"", ""server-key.pem"")
{code}
and the client (also using golang's http package) would configure TLS by loading its cert chain (the client's cert first in the chain) and key, e.g.
{code:java}
tls.LoadX509KeyPair(""client-cert-chain.pem"", ""client-key.pem"")
{code}
However, the `ca.chainfile` config var in fabric-ca apparently requires the chain to come host-last, which directly contradicts the TLS RFC.  I recommend switching the order to what's expected by the RFC.

 

[http://www.rfc-base.org/rfc-5246.html]

[http://www.rfc-base.org/txt/rfc-5246.txt]

 ",,smithbk,vdods,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyhgv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,vdods,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Nov/17 3:36 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/14841/;;;",,,,,,,,,,,,,,,,,,,
Fix affiliation hierarchy checking during revocation,FABC-276,15655,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,11/Apr/17 5:09 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,22/Apr/17 2:38 AM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"Affiliation hierarchy checking currently will some with an affiliation of ""hyperledger"" to revoke someone with an affiliation of ""hyperledger2"". Currently a prefix comparison is done, so in this scenario ""hyperledger"" is a prefix of ""hyperledger2"". Whole word comparison needs to be done. ",,ChristopherFerris,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxplj:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Apr/17 2:39 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/7903/
;;;",,,,,,,,,,,,,,,,,,,
[fabric-ca] Auhentication -> Authetication,FABC-277,14396,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,,jjjjibm,jjjjibm,28/Jan/17 1:17 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,28/Feb/17 3:08 AM,,,,,,,,,,,,,0,,,,,,"I selected component = fabric-cop because I don't see 'fabric-ca' in the pulldown menu.  This is actually against fabric-ca.

In the readme at https://github.com/hyperledger/fabric-ca    
this sentence appears: 

{color:red}{color:#59afe1}Auhe{color}{color:#59afe1}ntication is added by fabric-ca since CFSSL does not perform authentication{color}.
{color}
Probably should be 

+Authentication +_added by fabric-ca since CFSSL does not perform authentication_.

How to recreate: 
1.Enter this in your web browser navigation bar: https://github.com/hyperledger/fabric-ca 

2.Scroll as needed to view the text starting with Start the fabric-ca server and locate the sentence in the problem description.   
-or- 
  Use the browser's 'Find on this page' function to  locate the text. 
",Not applicable. ,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjbb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Don't print usage message for non-usage errors,FABC-278,15408,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,21/Mar/17 3:53 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,30/Mar/17 11:01 PM,,,,,,,,,,,,,0,,,,,,"This is more general, but here is one case

1) Enroll admin
2) As admin, revoke admin's ecert
3) fabric-ca-client revoke -a foo -s bar

It will print the usage message along with an authorization failure, but should just print an auth failure ERROR message",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx54n:",,,,,,Sprint 14 - Membership Service,Sprint 15 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Revoked identity using Idemix Cred should not be able complete requests,FABC-279,30633,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,25/May/18 11:06 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,10/Jul/18 5:42 AM,v1.2.0,,,,,,v1.3.0,,,,,,0,,,,,,"A revoked identity with an Idemix credential is able to successfully complete requests to the Fabric CA server. If an identity has been revoked, it should no longer be able authorized to make requests to the Fabric CA Server.

If a client/identity makes a request using an Idemix credential, a check should be made to see if the identity has not been revoked.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzchz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/May/18 11:18 PM;skarim;https://gerrit.hyperledger.org/r/22355;;;",,,,,,,,,,,,,,,,,,,
SECURITY: fabric-ca does not verify x509 certificates against the issuing CA,FABC-280,17705,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,smithbk,smithbk,smithbk,10/Jun/17 3:11 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,11/Jun/17 5:58 AM,v1.0.0-alpha2,v1.0.0-beta,,,,,v1.0.0-rc1,,,,,14/Jun/17 12:00 AM,0,,,,,,"The token-based authentication mechanism in fabric-ca-server does not verify the certificate was issued by the CA.

The token-based authentication attack is subject to a privileges escalation attack. In a nutshell, the attack allows anyone to fake the identity of another user and gain her access rights.
In more details, let’s say Alice is an high-privileged user of fabric-ca and Bob gets Alice’s ECert in some way (notice that ECerts are supposed to be public, of course). Then Bob, can generate a self-signed certificate copying Alice’s certificate SN and AKI. (This is already enough to be authenticated by the system). Bob can copy additional information (i.e. the CommonName) as needed.
As can be seen in Figure 2.1, the server says that the fake certificate for CommonName ’test.example.com’ has been authenticated. Changing the common name to that of Alice, would give to Bob the ability to perform any operation that Alice is allowed to. The reason why this happens is that fabric-ca does a weak check on the certificate. It only checks that the certificate is not revoked but it does not check that the certificate has been signed by the proper authority.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,FAB-4518,FAB-4546,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxzwn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jun/17 7:58 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/10425;;;",,,,,,,,,,,,,,,,,,,
Doing a server stop right after a server start returns error,FABC-281,15687,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,skarim,skarim,12/Apr/17 4:06 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,18/May/17 5:13 AM,v1.0.0,v1.0.0-alpha1,,,,,v1.0.0-alpha2,,,,,,0,,,,,,"Starting a server and then immediately stopping it results in the error below. This is only seems to manifest itself during CI and not able to reproduce on a local machine. 

panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x654f12]

A simple test case ran in CI that simply starts and stop server will cause this error to occur. ",,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxppz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/May/17 2:55 AM;smithbk;The panic is as follows:

goroutine 80 [running]:
panic(0x4687ae0, 0xc420016100)
   /usr/local/Cellar/go/1.7.3/libexec/src/runtime/panic.go:500 +0x1a1
net/http.(*Server).Serve(0xc4202ca380, 0x0, 0x0, 0x0, 0x0)
   /usr/local/Cellar/go/1.7.3/libexec/src/net/http/server.go:2257 +0x62
net/http.Serve(0x0, 0x0, 0x49c0400, 0xc4203c8a20, 0x0, 0x0)
   /usr/local/Cellar/go/1.7.3/libexec/src/net/http/server.go:2091 +0x99
github.com/hyperledger/fabric-ca/lib.(*Server).serve(0xc420314320, 0x1, 0x1)
   github.com/hyperledger/fabric-ca/lib/_test/_obj_test/server.go:704 +0x5e
created by github.com/hyperledger/fabric-ca/lib.(*Server).listenAndServe
   github.com/hyperledger/fabric-ca/lib/_test/_obj_test/server.go:698 +0x732
FAIL  github.com/hyperledger/fabric-ca/lib   0.135s
error: exit status 1
panic: EOF;;;","05/May/17 3:01 AM;smithbk;http://gerrit.hyperledger.org/r/8975 [FAB-3100] Fix panic in server start;;;","11/May/17 11:27 AM;smithbk;The problem is that when starting the server in non-blocking mode (which is only done for tests), the tests which start and stop servers very quickly may stop it (and thus make the listener nil) before the go routine runs and passes the listener into http.Serve.

The fix is to add this code snippet to the beginning of the serve function in lib/server.go.

    listener := s.listener
    if listener == nil \{
        // It's already been closed
        return nil
    }

    http.Serve(listener, ...)

This prevents us from passing a nil listener into http.Serve;;;",,,,,,,,,,,,,,,,,
Hyperledger Fabric “Error when deploying chaincode: Failed loading TCerts from TCA”,FABC-282,15325,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,aambati,KhutPidor,KhutPidor,13/Mar/17 6:18 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,01/May/17 11:21 PM,v0.6,,,,,,v0.6,,,,,,0,Security,,,,,"I have 1 membersrvc and 2 validating peers with security enable. I run 1 validating peer and membersrvc together in 1 vm (1st peer) and another 1 validating peer (2nd peer) in other vm. I successful from a network and connect the peers together. While I try to use the 2nd validating to login with user in membersrvc.yaml of 1st peer. It's fine. The status is ""OK ...."" After register sample chaincode (chaincode_example02) of fabric defualt v0.6, I tried to init the chaincode with the help of Postman and it load error

{ ""jsonrpc"": ""2.0"",
""error"":
{ ""code"": -32001,
""message"": ""Deployment failure"",
""data"": ""Error when deploying chaincode: Failed loading TCerts from TCA"" },
""id"": 1
}

Again, while I disable the security in core.yaml of each peer, start the peers again without membersrvc start. I tried to init the 2nd peers. I am able to make it. SO I think the problem is causing from security enable, but in my scenario to used membersrvc is needed.

I try to surf around about TCerts & TCA, but I couldn't find any clear explanation and how to did it.
I found one, I follow ,but I cannot find certificate.crt, what about to overwrite CN. I think it's not work I try to follow other,
it ask me to set the root certificate and it's path ""tlsca.cert"". I know it locate at --/var/hyperledger/production/.membersrvc, when I try to put it in membersrvc.yaml with the path and tlsca.cert (""/var/hyperledger/production/.membersrvc/tlsca.cert""), and start membersrvc, it loads, cannot file any directory or file

Any suggestions toward this problems ?

*Note I am not using vagrant or docker. I install Fabric directly to separate VM",,aambati,KhutPidor,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-690,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnwf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,KhutPidor,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Mar/17 11:58 PM;aambati;[~KhutPidor]Can you pls share membership svc log messages? Also, I suggest trying Fabric 1.0 version;;;","18/Mar/17 12:53 AM;aambati;[~KhutPidor]I have few queries:
1. Which peer did you send the  login request to ? Did you send the chaincode init request to the same peer?
2. Can you please share the ""chaincode init"" request details
3. Again, please share any log messages (from peer, membershipsvc) you have;;;","01/May/17 11:19 PM;smithbk;Hi, marking as done since no reply to questions.  Please reopen with info on how to reproduce if it is still a problem.;;;",,,,,,,,,,,,,,,,,
Fabric CA Client fails to execute commands if only Idemix Credential Present,FABC-283,30559,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,24/May/18 3:51 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,30/May/18 5:52 PM,v1.2.0,,,,,,v1.3.0,,,,,,0,,,,,,"After using Fabric CA client to enroll an Identity to get back an Idemix Credential, the identity could not be used to invoke other Fabric CA commands (e.g. register, revoke, etc.). This is because the logic that loads the indentity fails if it does not find any x509 credential.

This should be revised to check for both x509 and Idemix credential. If both credentials, are not found then it should return a failure.",,kchristidis,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzbzb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,kchristidis,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/May/18 5:50 AM;kchristidis;https://gerrit.hyperledger.org/r/c/22227/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-server does not handle absolute cert/key paths with --cacount,FABC-284,21244,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,rennman,rennman,03/Oct/17 6:19 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/Nov/17 12:49 AM,v1.1.0,,,,,,v1.1.0,,,,,,0,,,,,,"If I use --cacount and absolute pathnames for ca certificate, the DN compare check fails, since the certificate for the top-level and the spawned CA is identical:


{code:java}
// /usr/local/bin/fabric-ca-server start -b admin:adminpw \
    --ca.certfile /tmp/fabric-ca/fabric-ca-cert.pem \
    --ca.keyfile /tmp/fabric-ca/fabric-ca-key.pem  \
    --cacount -2

2017/10/02 21:17:19 [DEBUG] Comparing DNs from certificates: /tmp/fabric-ca/fabric-ca-cert.pem and /tmp/fabric-ca/fabric-ca-cert.pem
2017/10/02 21:17:19 [DEBUG] Loading DNs from certificate /tmp/fabric-ca/fabric-ca-cert.pem
2017/10/02 21:17:19 [DEBUG] Loading DNs from certificate /tmp/fabric-ca/fabric-ca-cert.pem
2017/10/02 21:17:19 [DEBUG] Check to see if two DNs are equal - &{issuer:/C=US/ST=North Carolina/O=Hyperledger/OU=Fabric/CN=fabric-ca-server-ca2 subject:/C=US/ST=North Carolina/O=Hyperledger/OU=Fabric/CN=fabric-ca-server-ca2} and &{issuer:/C=US/ST=North Carolina/O=Hyperledger/OU=Fabric/CN=fabric-ca-server-ca2 subject:/C=US/ST=North Carolina/O=Hyperledger/OU=Fabric/CN=fabric-ca-server-ca2}
2017/10/02 21:17:19 [DEBUG] Issuer distinguished name already in use, checking for unique subject distinguished name
2017/10/02 21:17:19 [DEBUG] Closing server DBs
Error: Please modify CSR in /tmp/fabric-ca/fabric-ca-cert.pem and try adding CA again: Both issuer and subject distinguished name are already in use
{code}
 

However, if I use a relative pathname, it works:
{code:java}
/usr/local/bin/fabric-ca-server start -b admin:adminpw \
 --ca.certfile fabric-ca-cert.pem \
   --ca.keyfile fabric-ca-key.pem \
   --cacount 2
{code}",,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyi4v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Nov/17 2:35 AM;smithbk;https://gerrit.hyperledger.org/r/15439 [FAB-6405] Fix cert/key paths with --cacount;;;",,,,,,,,,,,,,,,,,,,
Default TLS unable to find key for TLS handshake,FABC-285,16599,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,vpaprots@ca.ibm.com,skarim,skarim,11/May/17 5:30 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,26/May/17 9:34 PM,,,,,,,v1.0.0,,,,,,0,,,,,,"If TLS is enabled on fabric-ca server, but no TLS certificate and key is provided the default behavior is to use the CA certificate and key that were used to start the server for TLS purposes. 

With BCCSP in place, the key gets stored in a keystore and a function call is made by passing in the cert file that looks up and returns the key. However, BCCSP imposes restrictions so that they information of the key is not exposed to the caller. This makes it difficult to initialize TLS as TLS require a key pair to be load, which will get used for the handshake.

Currently using default TLS behavior is currently broken. BCCSP needs to be extended to call TLS within to allow for TLS initialization. 

Reproduction steps:
1. Run the following command: *fabric-ca-server start -d -b a:b --tls.enabled*

The following error will be seen:
Error: open .../src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-server/ca-key.pem: no such file or directory",,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxupb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/May/17 10:55 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/9235/;;;",,,,,,,,,,,,,,,,,,,
cleanup files with suspicious permissions in fabric,FABC-286,15049,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,26/Feb/17 5:27 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,26/Feb/17 2:11 PM,,,,,,,,,,,,,0,quality,,,,,"When trying to deploy chain code, I see get errors due to *Illegal file mode detected for file ...* .

This is for cleanup of the suspicious files in fabric:

{noformat}
Firehawk:fabric sanchezl$ find . -name ""*.go"" -perm 755
./core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb.go
{noformat}",,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-294,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm1r:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Change default private key format to PKCS#8,FABC-287,16494,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,baohua,baohua,baohua,09/May/17 9:00 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,03/Jun/17 6:02 PM,v1.0.0-alpha2,,,,,,v1.0.0-beta,,,,,,0,MembershipServices,,,,,"Existing private key is using the old PKCS#1 format, need to change to PKCS#8 format to avoid confusing.",,baohua,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxuav:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,baohua,JonathanLevi,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/May/17 9:04 PM;baohua;https://gerrit.hyperledger.org/r/#/c/9121/;;;","04/Jun/17 3:18 AM;JonathanLevi;Just to clarify (yesterday I have approved the CR from my mobile), this +{color:#ff0000}needed{color}+ fixing not just because PKCS#8 is less confusing... we could not have used PKCS#1 (which was made for RSA keys), for EC. See: [https://gerrit.hyperledger.org/r/#/c/9121/1/images/fabric-ca/payload/ca-key.pem]

While reading and parsing the PKCS#8 is a bit slower (not that the bottleneck here is reading the private key) - it is the correct way in this case.

As I wrote before approving, I hope this is well tested... otherwise we should add tests for this.;;;","04/Jun/17 9:59 AM;baohua;[~JonathanLevi]

Sure, the key was used in the e2e test cases, also the sdk-py project.

So if we do not break existing ones, then it will be fine.

We will add more test cases in the sdk-py project, too.;;;",,,,,,,,,,,,,,,,,
[SECURITY] Incorrect 'Key Usage' in Fabric CA certificates (by default),FABC-288,18653,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,25/Jun/17 3:12 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/Jun/17 4:57 AM,v1.0.0-rc1,,,,,,v1.0.0,,,,,,0,fabric-ca,Security,,,,The default server config for fabric ca issues certificates with the key usage of certificate signing but for enrollment certs key usage should be digital signature.,,JonathanLevi,mastersingh24,,,,,,,,,,,,,,,,,,,,,1800,1800,,0%,1800,1800,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy5ov:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JonathanLevi,mastersingh24,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jun/17 3:43 AM;JonathanLevi;Quick assessment: Low complexity, pretty straight forward, important to fix.;;;","25/Jun/17 5:47 AM;mastersingh24;https://gerrit.hyperledger.org/r/11129;;;",,,,,,,,,,,,,,,,,,
fabric-ca-client enroll call makes an empty intermediatecerts file,FABC-289,29393,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,,dbshah,dbshah,14/Apr/18 3:39 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,22/May/18 4:11 AM,v1.1.0,,,,,,v1.2.0,,,,,,0,fabric-ca-client,,,,,"When enrolling a user on CA, the CA not being an intermediate CA, the intermediatecerts folder creates a file for intermediatecert which is blank (has no PEM content). There should be a check, and if the intermediate cert does not exist, the file should not be created.

 

Steps to reproduce:
 * Pull `hyperledger/fabric-ca:x86_64-1.1.0` image
 * Run the container and start `fabric-ca-server` in background.

```

$ docker run -it hyperledger/fabric-ca:x86_64-1.1.0 bash

root@d772e7231ee8:/# fabric-ca-server start -b admin:adminpw

``` 

 
 * Enroll admin user using `fabric-ca-client`

```

# fabric-ca-client enroll -u http://admin:adminpw@localhost:7054

2018/04/13 18:35:59 [INFO] Created a default configuration file at /etc/hyperledger/fabric-ca-server/fabric-ca-client-config.yaml

2018/04/13 18:35:59 [INFO] generating key: &\{A:ecdsa S:256}

2018/04/13 18:35:59 [INFO] encoded CSR

2018/04/13 18:35:59 [INFO] signed certificate with serial number 336793439273262704411331469422228046746825411057

2018/04/13 18:35:59 [INFO] 127.0.0.1:60988 POST /enroll 201 0 ""OK""

2018/04/13 18:35:59 [INFO] Stored client certificate at /etc/hyperledger/fabric-ca-server/msp/signcerts/cert.pem

2018/04/13 18:35:59 [INFO] Stored root CA certificate at /etc/hyperledger/fabric-ca-server/msp/cacerts/localhost-7054.pem

2018/04/13 18:35:59 [INFO] Stored intermediate CA certificates at /etc/hyperledger/fabric-ca-server/msp/intermediatecerts/localhost-7054.pem

```

 
 * Check the intermediatecerts folder

```

/# ls -al /etc/hyperledger/fabric-ca-server/msp/intermediatecerts/                  

total 8

drwxr-xr-x 2 root root 4096 Apr 13 18:35 *.*

drwxr-xr-x 6 root root 4096 Apr 13 18:35 *..*

-rw-r--r-- 1 root root    0 Apr 13 18:35 localhost-7054.pem

```

The pem file is empty.

 

 

 ",,aambati,dbshah,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzz5vz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,dbshah,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/May/18 12:40 AM;kchristidis;[~aambati]: Sounds like something that can be done in time for the 1.2 cut - WDYT?;;;","18/May/18 7:26 AM;aambati;[~kchristidis] This problem is not reproducible in 1.2.

[~dbshah]if you can live with it until 1.2, we can just close this one. Please let us know.;;;","18/May/18 7:32 AM;kchristidis;Not sure I follow. You meant it's not reproducible _in the master_?;;;","18/May/18 10:01 PM;dbshah;If its fixed in the next release, go ahead and close it.;;;",,,,,,,,,,,,,,,,
Weekly Job: fabric-ca-goast-weekly-x86_64 has failed.,FABC-290,32017,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,keithsmith,jtclark,jtclark,18/Jul/18 10:26 PM,19/Mar/19 8:12 PM,28/Oct/23 2:21 AM,20/Sep/18 4:57 AM,v1.2.0,,,,,,v1.2.0,,,,,,0,ci-failure,,,,,"*fabric-ca-goast-weekly-x86_64* fails with the following error:

{code:java}
...
/w/workspace/fabric-ca-goast-weekly-x86_64/gopath/src/github.com/hyperledger/fabric-ca/vendor1/gopkg.in/ldap.v2/bind.go:103:75: undeclared name: ber
...
{code}

*FABRIC_COMMIT =========> be1b7d*

*Console output:* https://jenkins.hyperledger.org/view/fabric-ca/job/fabric-ca-goast-weekly-x86_64/11/consoleFull

*Build Logs:*

Current Log: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-goast-weekly-x86_64/11

Previous Log: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-goast-weekly-x86_64/10",,jtclark,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzj3j:",,,,Unset,Unset,,,,,,,,,,,,,,Unset,,,,,,,,,,,jtclark,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Sep/18 11:00 PM;skarim;[~jtclark] Is this still an issue?;;;","20/Sep/18 4:57 AM;skarim;Closing this out for now, if confirmed as still being an issue will reopen back up.;;;",,,,,,,,,,,,,,,,,,
Make attributes case insensitive,FABC-291,26990,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,23/Jan/18 2:29 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,01/Feb/18 7:53 PM,v1.1.0-alpha,,,,,,v1.1.0,,,,,,0,,,,,,"Additional checks were put in places to make sure registrar can only register attributes that it is authorized for. The implementation enforced case sensitivity for reserved attributes (hf.). Even though, attributes names were originally intended to be case sensitive that check was never really enforced. Since this might break SDKs and users as they might have already registered using lower cases or upper case for these attributes. Attribute name lookup will be case insensitive to prevent breaking users.",,denyeart,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-330,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyu93:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/18 7:31 AM;skarim;https://gerrit.hyperledger.org/r/#/c/17077/;;;","25/Jan/18 1:51 PM;denyeart;Per discussion with [~skarim] and [~smithbk] , this bug is not strictly required for 1.1 alpha inclusion.  But we'll keep it tagged as v1.1.0-alpha in case a fix is available in time.;;;","01/Feb/18 7:52 PM;smithbk;Unless convinced otherwise, I think attribute names should remain case sensitive.
The reason this was considered is because some test cases were written with for example ""hf.revoker"" rather than ""hf.Revoker"" and in the latest release we had to add additional security checks which fail if someone had ""hf.revoker"".  Rather than making it case-insensitive, the tests should be changed to use ""hf.Revoker"".  If this is an issue with registered identities, the fix is to use the APIs to remove and add the attribute with the proper case.;;;",,,,,,,,,,,,,,,,,
fabric-ca registrar 'leaks' authority to delegates,FABC-292,14491,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,rennman,rennman,02/Feb/17 2:28 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/May/17 8:32 AM,,,,,,,v1.0.0,,,,,,1,MembershipServices,Security,,,,"In reference to 'Added test for registrar delegation'
https://gerrit.hyperledger.org/r/#/c/5025/

I think the mis-spelling is actually a degenerate case of a larger problem, in which 'hf.Registrar.DelegateRoles' is not set

I'm basically working of the premise that:
  -admin may register users
  -admin may register registrars
  -delegate may register users
  -delegate may register registrars
  -registrar may register users
  -registrar may not register registrars
  -users may not register anyone

Registrar role is set/Delegate not set
 User is allowed to register user of only the type specified:
   Fail case works as expected: [{""name"":""hf.Registrar.Roles"",""value"":""peer,validator,auditor""}]
      Error response from server was 'User 'A_client' may not register type 'client'' for request:

   However, in the successful case, the potential proagated authority is too broad.
   An admin that can only register 'clients' is allowed to delagate anything:
      {""id"":""A_client"",""type"":""client"",""group"":""bank_a"",""attrs"":[{""name"":""hf.Registrar.Roles"",""value"":""client""}]}

     Received request to register user with id: D_clientclient, group: bank_a, attributes: [{hf.Registrar.Roles client,peer,validator,auditor} {hf.Registrar.DelegateRoles client,peer,validator,auditor}], registrar: A_client
     canRegister - Check to see if user A_client can register
     User D_clientclient inserted into database successfully

   D_clientclient may now surpass (and propagate) 'A_client's authority
     Received request to register user with id: E_clientclientclient, group: bank_a, attributes: [{hf.Registrar.Roles client,peer,validator,auditor}], registrar: D_clientclient
     canRegister - Check to see if user D_clientclient can register
     User E_clientclientclient inserted into database successfully

Registrar role is not set/Delegate set
  User is not allowed to register anyone
  Fail case Works as expected:
      Error response from server was 'User 'A_client' may not register type 'client'' for request:

   Similar to above, the proagated authority is too broad.
      A_client|HbaYvYqQrYrU|client|bank_a|[{""name"":""hf.Registrar.Roles"",""value"":""client""}]|1|1

   A_client may register delegate, who in turn *should* only reigster client; however, A_client registers:
      D_clientclient|xRBPwVjaziqI|client|bank_a|[{""name"":""hf.Registrar.Roles"",""value"":""client""},{""name"":""hf.Registrar.DelegateRoles"",""value"":""client""}]|1|1

   Who in turn, registers a client with very broad authority indeed
      E_clientclientclient|hWDkNNWSAAyI|client|bank_a|[{""name"":""hf.Registrar.Roles"",""value"":""client,peer,validator,auditor""},{""name"":""hf.Registrar.DelegateRoles"",""value"":""client,peer,validator,auditor""}]|1|1
",,binhn,ChristopherFerris,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4g7:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,binhn,ChristopherFerris,rennman,smithbk,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/17 10:04 AM;smithbk;Allen, I'm having a hard time parsing this to understand the problem.  Consider using {code} code brackets {code} as I think the formatting makes it harder to follow.  But some clarification is needed here regarding how to reproduce.  Maybe even a test case that fails.;;;","07/Apr/17 3:43 AM;rennman;More simply stated:
when admin(A), 
    registers delegate(D) (who in turn is authorized to registers clients *only*)
D can turn around and register enduser(E) and also give delegate authority (*for any and all types*) to E. 

enduser(E) can now register clients, peers, auditors and validators. Not only does this exceed the authority of 'D', but also that of 'A'.

I don't think this is what was intended.;;;","12/May/17 4:53 AM;ChristopherFerris;[~rennman] I think that the best way to address this is to write a test that tests your hypothesis (and results in failure).;;;","12/May/17 6:12 AM;rennman;Actually, this is based on empirical data from a failed test.

Consequently, the test was disabled.;;;","12/May/17 8:21 AM;ChristopherFerris;[~rennman] which test, please?;;;","19/May/17 1:49 AM;rennman;Sorry, there's a somewhat convoluted history to this.

Originally, it was delegation_test.sh ( now in the staging directory ).

After the split of the fabric client/server executables, we lost the ability to specify multiple attributes at registration time, thereby also losing the ability to drive the test. When I made mention of this, I was informed that multiple attributes was an advanced feature that would be deferred. Hence, I did not rework delegation_test.sh when I reworked the other tests.

Good timing on the comment though, since the feature is now sitting in a change set:
[https://gerrit.hyperledger.org/r/#/c/9479/]
ready to be tested.

I'll revisit delegation_test.sh and retest. I'm confident it's still broken because I hacked up a driver about a month ago and it failed.;;;","26/May/17 9:50 AM;smithbk;http://gerrit.hyperledger.org/r/9847;;;","27/May/17 4:11 AM;binhn;+1;;;",,,,,,,,,,,,
fabric-ca compareDN method incomplete,FABC-293,21002,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,27/Sep/17 1:55 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,25/May/18 10:02 PM,,,,,,,v1.2.0,,,,,,0,,,,,,"The getDNFromCert() method from lib/server.go does not account for all of the potential RDNs that may be present in the certificate. The code currently iterates over the list returned by
(Name) [ToRDNSequence|https://golang.org/src/crypto/x509/pkix/pkix.go?s=3835:3882#L122]

However, this is only a subset of the potential RDN fields contained in the certificate, namely
Country
Province
Locality
StreetAddress
PostalCode
Organization
OrganizationalUnit
CommonName
SerialNumber

+ whatever happens to be in the ExtraNames list structure.
By iterating over all of the Names:
  for _, i := range namespace.Names 

the list will contain all of the RDNs in []Names",,ChristopherFerris,kchristidis,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx04f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,kchristidis,rennman,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Nov/17 6:14 AM;rennman;[https://gerrit.hyperledger.org/r/#/c/13845/] – Update getDNFromCert() method;;;","06/Apr/18 2:38 AM;ChristopherFerris;[~rennman] are you still pursuing this? [~smithbk] left some comments in the CR but has not been touched since.;;;","07/Apr/18 2:14 AM;rennman;There's been a difference of interpretation regarding the display of DNs.  Notwithstanding the dispute, this is actually good timing since I've been investigating the go1.10 release documentation including updates to crypto/x509/pkix. It now implements a String() method that formats the X.509 distinguished name in the standard RFC 2253 format. The fact still remains that the RDNs displayed are limited to those returned by toRDNSequence(), which apparently by design *only include the common elements* of a DN. While all elements stored in Names (including those which are non-standard) *are available* in the pkix.Name object, and  *can* be extracted from there, we chose not to. So it makes sense to exploit the pkix package-provided 
h3. func (Name) [String|https://golang.org/src/crypto/x509/pkix/pkix.go?s=6060:6089#L216]

method for simplicity and consistency. I've updated the CR accordingly.;;;","22/May/18 2:52 AM;kchristidis;Setting fix-version target to 1.2. Let's get this in, looks like we're close.;;;",,,,,,,,,,,,,,,,
cleanup files with suspicious permissions in fabric-ca,FABC-294,15048,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,26/Feb/17 5:19 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,26/Feb/17 2:12 PM,,,,,,,,,,,,,0,quality,,,,,"When trying to deploy chain code, I see get errors due to *Illegal file mode detected for file ...* .

This is for cleanup of the suspicious files in fabric-ca:

{noformat}
Firehawk:fabric-ca sanchezl$ find . -name ""*.go"" -perm 755
./cli/server/init.go
./cli/server/init_test.go
./vendor/github.com/google/certificate-transparency/go/asn1/asn1.go
./vendor/github.com/google/certificate-transparency/go/asn1/common.go
./vendor/github.com/google/certificate-transparency/go/asn1/marshal.go
./vendor/github.com/google/certificate-transparency/go/x509/cert_pool.go
./vendor/github.com/google/certificate-transparency/go/x509/pem_decrypt.go
./vendor/github.com/google/certificate-transparency/go/x509/pkcs1.go
./vendor/github.com/google/certificate-transparency/go/x509/pkcs8.go
./vendor/github.com/google/certificate-transparency/go/x509/pkix/pkix.go
./vendor/github.com/google/certificate-transparency/go/x509/root.go
./vendor/github.com/google/certificate-transparency/go/x509/root_darwin.go
./vendor/github.com/google/certificate-transparency/go/x509/root_plan9.go
./vendor/github.com/google/certificate-transparency/go/x509/root_stub.go
./vendor/github.com/google/certificate-transparency/go/x509/root_unix.go
./vendor/github.com/google/certificate-transparency/go/x509/root_windows.go
./vendor/github.com/google/certificate-transparency/go/x509/sec1.go
./vendor/github.com/google/certificate-transparency/go/x509/verify.go
./vendor/github.com/google/certificate-transparency/go/x509/x509.go
Firehawk:fabric-ca sanchezl$ find . -name ""*.json"" -perm 755
./testdata/csr_dsa.json
{noformat}",,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-286,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm1j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
fabric-ca permits registration of users with affiliations that do not exist,FABC-295,15604,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,skarim,rennman,rennman,07/Apr/17 12:02 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,03/May/17 5:23 AM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"Although we check to ensure a user registration includes a group affiliation, we do not validate against the affiliations that are defined in the DB.  I am able to register with virtually any random string for 'affiliation' attribute.",,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpcv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/May/17 5:23 AM;skarim;Issue has been resolved;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-server ldap should supersede registry configuration,FABC-296,16009,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,rennman,rennman,26/Apr/17 6:10 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,07/Jun/17 5:20 AM,v1.0.0-alpha1,,,,,,v1.0.0,,,,,,0,,,,,,"The LDAP server should obviate the need for the registry entry. The enablement of LDAP should disable the local registry. Moreover, it can cause the server to crash unexpectedly at startup, and without warning.

There is an entire class of errors that could cause this to happen.

e.g., presuming the ldap server is non-responsive, and the config is as follows:
{code:java}
ldap:
  enabled: true
  url: ldap://CN=admin@localhost:389/dc=example,dc=com
registry:
    identities:
       - name: admin
       - pass: adminpw
{code}
and the ldap server is down for some reason. We attempt to retrieve the userid:
 2017/04/25 21:07:42 [DEBUG] Loading identity 'admin'
 2017/04/25 21:07:42 [DEBUG] Getting user 'admin'
 2017/04/25 21:07:42 [DEBUG] Connecting to LDAP server over TCP

and then exit without ever logging the error. If debugging is disabled, it is even more cryptic:
{code:java}
2017/04/25 21:04:05 [INFO] Configuration file location: /tmp/fabric-ca/runFabricCaFvt.yaml
2017/04/25 21:04:05 Initialize BCCSP [SW]
2017/04/25 21:04:05 [INFO] The CA key and certificate files already exist
2017/04/25 21:04:05 [INFO] Key file location: /tmp/fabric-ca/fabric-ca-key.pem
2017/04/25 21:04:05 [INFO] Certificate file location: /tmp/fabric-ca/fabric-ca-cert.pem
{code}
There's no indication of an error, but the server never starts.

 

------------------------------------------------
Fixes include the following changes
------------------------------------------------

1) Do not try to load users into the DB when LDAP is enabled.

2) Don't require the -b option when LDAP is enabled.

Specifically, changes are as follows:

a) cmd/fabric-ca-server/config.go Added some comments (per Yang's request). Require the '--boot' option only if LDAP is disabled.

b) cmd/fabric-ca-server/main.go Change server usage message to denote that ""--boot"" is required only if ldap.enabled is false.

c) cmd/fabric-ca-server/main_test.go Added test case

d) doc/source/users-guide.rst Updated doc to indicate that ""-b"" (or ""--boot"") is required only if ldap.enabled is false.

e) lib/ca.go Load the user's table into the DB only if LDAP is disabled.

f) lib/client_test.go Remove test directories that weren't being cleaned up.",,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr9b:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/May/17 3:36 AM;rennman;Also of note:  if it's determined that when LDAP is enabled it should supplant the registry, we need to remove the requirement for the bootstrap user.

e.g. If I pass 

{code:java}
fabric-ca-server start --ldap.url ""url: ldap://CN=admin,dc=example,dc=com:adminpw@localhost:389/dc=example,dc=com"" --ldap.enabled
{code}

I should not have to also add the bootstrap user.;;;","17/May/17 8:56 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/9423/;;;","01/Jun/17 3:40 AM;smithbk;To reproduce:
fabric-ca-server init -b a:b -c ldap/config.yaml --ldap.enabled --ldap.url ldap://CN=admin@localhost:389/dc=example,dc=com;;;",,,,,,,,,,,,,,,,,
swagger doc for enroll request body is wrong,FABC-297,14509,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,02/Feb/17 11:29 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,14/Apr/17 8:28 AM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"The swagger doc for the enroll request body is wrong.
It should match what is in the SignRequest struct of cfssl/signer/signer.go.
See fabric-ca/swagger/fabric-ca-swagger.json",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjvb:",,,,,,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Feb/17 3:22 AM;smithbk;See https://gerrit.hyperledger.org/r/#/c/5851/;;;",,,,,,,,,,,,,,,,,,,
Negative test cases failing on vagrant,FABC-298,15485,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,rennman,smithbk,smithbk,29/Mar/17 3:18 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,23/Apr/17 7:56 PM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"The negative test cases which check for specific error messages fail on vagrant.
The reason appears to be that vagrant translates error messages from host OS.
For example, instead of ""filename too long"", there is a ""protocol error"" message.
The attachment test.out shows the failures.",,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/17 3:17 AM;smithbk;test.out;https://jira.hyperledger.org/secure/attachment/10628/test.out",,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4fz:",,,,,,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,rennman,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/17 4:40 AM;rennman;Apparently, this is a one-off.  Filesystem errors generated by attempted operations on synced directories are presumed to be OS-specific, hence the generic 'Protocol error'. Only one test case falls into this category -- the server's attempt to write a file with a name that is too long (which is in fact, OS-specific). 

The solution is to change the config file name in the test to be absolute, and to select a directory which is internal to the vagrant machine, not shared with the host OS.;;;","19/Apr/17 1:57 AM;rennman;[https://gerrit.hyperledger.org/r/#/c/8015/];;;",,,,,,,,,,,,,,,,,,
Mismatch between how the :ecert suffix is parsed when a user registered through fabric-ca-client or fabric-ca-server-config.yaml,FABC-299,30240,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,silveraid,silveraid,silveraid,16/May/18 9:05 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,16/Jun/18 1:30 AM,v1.1.0,,,,,,v1.2.0,,,,,,0,,,,,,"When users are registered with attributes using fabric-ca-client tool an ”:ecert” suffix can be appended to the end of the attributes which means that the attribute and its value will be inserted into the user’s enrollment certificate, which can then be used to make access control decisions. 

If users are registered through the fabric-ca-server's configuration file this suffix is not parsed and becomes the part of the value of the attribute.",,aambati,kchristidis,silveraid,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzaf3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,kchristidis,silveraid,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/May/18 11:46 AM;silveraid;Back ported the change from fabric-ca-client the same way as it was done there.;;;","18/May/18 12:12 AM;kchristidis;https://gerrit.hyperledger.org/r/c/21843/;;;","13/Jun/18 11:50 AM;silveraid;Hi [~aambati], I have completed the change what you have asked for. I hope you will like the proposed solution and merge it. It would be nice to have this fix in by v1.2.;;;","13/Jun/18 1:22 PM;aambati;[~silveraid]i +1ed the change set. I don't have merge authority.;;;","14/Jun/18 2:53 AM;silveraid;Hi [~mastersingh24], wondering if you would have some time to merge my change. It seems like passed all of the required reviews, have multiple test cases, etc. I was hoping that it can make it to v1.2.;;;",,,,,,,,,,,,,,,
Sanitize debug messages,FABC-300,20938,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,21/Sep/17 5:23 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,11/Oct/17 1:09 AM,,,,,,,v1.0.3,v1.1.0,,,,,0,,,,,,"Sanitize debug messages, make sure no sensitive information",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzygzb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Sep/17 5:24 AM;aambati;https://gerrit.hyperledger.org/r/c/13659/;;;","06/Oct/17 12:42 AM;aambati;https://gerrit.hyperledger.org/r/c/14207/;;;",,,,,,,,,,,,,,,,,,
fix misspell in fabric-ca index.rst ,FABC-301,17186,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ChristopherFerris,rameshthoomu,rameshthoomu,27/May/17 2:52 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/May/17 3:11 PM,v1.0.0-alpha2,,,,,,v1.0.0,,,,,,0,Documentation,,,,,fix misspell in fabric-ca index.rst. Welcome to Hyperledger Fabric CA (Certificate Authority).. certificate spelling is misspelled.,,ChristopherFerris,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxx8n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,rameshthoomu,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/May/17 9:48 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/9885/;;;",,,,,,,,,,,,,,,,,,,
authorization failure for 1.1 ca client using latest ca server,FABC-302,30380,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,aambati,troyronda,troyronda,18/May/18 7:37 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,22/May/18 11:22 PM,,,,,,,v1.2.0,,,,,,0,,,,,,"After FAB-9938 (https://gerrit.hyperledger.org/r/c/21743/), the Go SDK 1.1 client breaks when communicating to the latest CA server. This issue is due to the token modification in the merged CR.

The failure can be seen in: https://gerrit.hyperledger.org/r/c/21905/ (an unrelated change, but x86 CI includes tests of the SDK against latest.

[~sudeshrshetty] looked into an SDK fix but has the issue that he now needs to know whether to produce a 1.2 token or a pre 1.2 token. ie need to switch the code based on the ca version. 

This issue seems to be a backwards incompatibility.
",,aambati,denyeart,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzb4v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,denyeart,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/May/18 7:41 PM;denyeart;[~aambati] Could you take a look?;;;","18/May/18 8:00 PM;troyronda;log snippet from one of the the Go SDK failed tests
(https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2694/console)

19:27:55 integration-tests_1  | --- FAIL: TestRegisterEnroll (2.86s)
19:27:55 integration-tests_1  | 	enrollment_test.go:90: Registration failed: failed to register user: failed to register user: Response from server: Error Code: 20 - Authorization failure

;;;","18/May/18 8:37 PM;troyronda;looks like java SDK tests may now have similar failure:
https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/1825/console

11:33:42 Stacktrace was: org.hyperledger.fabric_ca.sdk.exception.RegistrationException: Error while registering the user org.hyperledger.fabric.sdkintegration.SampleUser@53bc6492 url: https://localhost:7054  POST request to https://localhost:7054 failed request body {""id"":""user1526643208_6"",""type"":""client"",""secret"":""password"",""affiliation"":""org1.department1"",""attrs"":[]}. Response: {""result"":"""",""errors"":[{""code"":20,""message"":""Authorization failure""}
11:33:42 ],""messages"":[],""success"":false} ;;;","19/May/18 11:20 AM;aambati;
https://gerrit.hyperledger.org/r/c/22067/;;;",,,,,,,,,,,,,,,,
Duplicate affiliations are created in the db every time fabric-ca server is started,FABC-303,15556,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,04/Apr/17 12:59 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,23/May/17 3:07 AM,v1.0.0,,,,,,,,,,,,0,,,,,,Duplicate affiliations are created in the Affiliations table every time fabric-ca server is started. It does not check if an affiliation already exists before add it to the db.  This is a problem because the DB will infinitely grow until it finally fails from running out of disk space.,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp4v:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Apr/17 4:13 AM;aambati;https://gerrit.hyperledger.org/r/7725;;;",,,,,,,,,,,,,,,,,,,
fabric-ca client enroll/reenroll/revoke broken after commit a569df9 Change the default port to 7054,FABC-304,14493,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,rennman,rennman,02/Feb/17 4:18 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,06/Apr/17 9:59 AM,,,,,,,v1.0.0,,,,,,0,,,,,,"After a little experimentation I see that after
   a569df9 Change the default port to 7054
enroll/reenroll/revoke isn't parsing correctly.

The results are consistent up through 
6294c57 Remove the fabric-ca docker directory

After 
5105f60 COP Client Configuration File
the results are slightly different, but still incorrect.

commit a569df9 through 6294c57
eabailey@amphion:~/gopath/src/github.com/hyperledger/fabric-ca$ /home/eabailey/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca client enroll -loglevel=0 admin adminpw http://127.0.0.1:7054
2017/02/01 14:08:46 [DEBUG] Entering cli/client/enrollMain
open -port: no such file or directory

eabailey@amphion:~/gopath/src/github.com/hyperledger/fabric-ca$ /home/eabailey/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca client reenroll -loglevel=0 http://127.0.0.1:7054
2017/02/01 14:09:05 [DEBUG] Entering cli/client/reenrollMain
open -port: no such file or directory

Revoke appears to work, but ""id"" is set to ""-port""
/home/eabailey/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca client revoke http://127.0.0.1:7054

eabailey@amphion:~/gopath/src/github.com/hyperledger/fabric-ca/scripts$ /home/eabailey/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca client revoke http://127.0.0.1:7054
POST http://127.0.0.1:7054/api/v1/cfssl/revoke
Authorization: 
  ...
{""id"":""-port""}


***********
commit 5105f60


eabailey@amphion:~/gopath/src/github.com/hyperledger/fabric-ca$ /home/eabailey/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca client enroll -loglevel=0 admin adminpw http://127.0.0.1:7054
2017/02/01 14:15:51 [DEBUG] Entering cli/client/enrollMain
2017/02/01 14:15:51 [INFO] Fabric-ca Client Configuration File: /home/eabailey/fabric-ca/client-config.json
open http://127.0.0.1:7054: no such file or directory

eabailey@amphion:~/gopath/src/github.com/hyperledger/fabric-ca$ /home/eabailey/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca client reenroll -loglevel=0 http://127.0.0.1:7054
2017/02/01 14:16:24 [DEBUG] Entering cli/client/reenrollMain
2017/02/01 14:16:24 [INFO] Fabric-ca Client Configuration File: /home/eabailey/fabric-ca/client-config.json
open http://127.0.0.1:7054: no such file or directory

eabailey@amphion:~/gopath/src/github.com/hyperledger/fabric-ca$ /home/eabailey/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca client revoke http://127.0.0.1:7054
2017/02/01 14:17:02 [INFO] Fabric-ca Client Configuration File: /home/eabailey/fabric-ca/client-config.json
POST https://localhost:7054/api/v1/cfssl/revoke
Authorization: 
....
{""id"":""http://127.0.0.1:7054""}
",,harsha544,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-464,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjsn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,harsha544,rennman,smithbk,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/17 10:00 AM;smithbk;Allen, closing this as I assume it was fixed long ago.  If not, please reopen.;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-client - typo in error message,FABC-305,16020,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,smithbk,rennman,rennman,27/Apr/17 1:16 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,26/May/17 11:29 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,,,,0,,,,,,"Minor, but externalized:

Error response from server was: Unlimited enrollments not allowed, value must be equal to or less {color:#d04437}then{color} 1",,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxrb3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/May/17 10:02 AM;smithbk;http://gerrit.hyperledger.org/r/9849;;;",,,,,,,,,,,,,,,,,,,
"api PUT /identities/{id} always return secret, even if the secret does not changed",FABC-306,27007,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,skarim,zhaochy,zhaochy,23/Jan/18 12:49 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/Jan/18 3:11 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"api PUT /identities/\{id} always return secret, even if the secret does not changed

while the swagger doc for this field is :

""description"": ""The enrollment secret which is only present if the secret was updated in this request.""",,skarim,zhaochy,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyubb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,zhaochy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jan/18 1:21 AM;skarim;[~zhaochy] Are you saying that 'secret' field is always present in the response from the server or is it actually populated with a value regardless of whether you modified the secret?;;;","24/Jan/18 11:19 AM;zhaochy;the 'secret' field is always populated with a value regardless of whether I modified the secret;;;","27/Jan/18 3:11 AM;skarim;Fixed in: https://gerrit.hyperledger.org/r/#/c/17107/;;;",,,,,,,,,,,,,,,,,
FABRIC-CA User's Guide Does Not Exist,FABC-307,17673,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,bmos299,bmos299,09/Jun/17 4:44 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,09/Jun/17 9:17 PM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"I want to use the User's Guide link in the Fabric CA README.  https://github.com/hyperledger/fabric-ca/blob/master/README.md.  The link is trying to go to: https://hyperledger-fabric.readthedocs.io/en/latest/Setup/ca-setup.html.  However, I end you in an RTD page that tells me the page does not exist. ",,bmos299,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxzrj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,mastersingh24,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Jun/17 8:42 AM;mastersingh24;http://gerrit.hyperledger.org/r/10375;;;","09/Jun/17 9:17 PM;bmos299;Thanks [~mastersingh24].;;;",,,,,,,,,,,,,,,,,,
fabric-ca-client --id.attr accept only one attribute,FABC-308,16804,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,aietcn,aietcn,17/May/17 5:22 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/May/17 12:48 AM,v1.0.0-alpha2,,,,,,v1.0.0,,,,,,0,fabric-ca-client,v1.0,,,,"when specifying more than one id.attr command line arguments, only the last one is accepted and saved in the database.
{code:java}
fabric-ca-client --id.attr hf.Registraar.Roles=""user,peer,auditor"" --id.attr hf.Revoker=true ...
{code}
Neither does the following works:
{code:java}
fabric-ca-client --id.attr hf.Registraar.Roles=""user,peer,auditor"",hf.Revoker=true ...

fabric-ca-client --id.attr hf.Registraar.Roles=""user,peer,auditor"";hf.Revoker=true ...
{code}
maybe fixes can go around these lines: [https://github.com/hyperledger/fabric-ca/blob/master/cmd/fabric-ca-client/config.go#L287]",,aietcn,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-375,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxvpz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aietcn,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/May/17 6:15 AM;smithbk;See http://gerrit.hyperledger.org/r/9479 [FAB-3971] Register id with multiple attrs

With this change set, the 1st form above is supported in which you may specify multiple --id.attr flags and each of the specified name/value pairs are added to the list of attributes for the registered user.;;;","18/May/17 10:55 AM;aietcn;[~smithbk] Looks solid. Thanks for the quick response.;;;",,,,,,,,,,,,,,,,,,
Authorization failures returning wrong HTTP status code,FABC-309,27467,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,smithbk,smithbk,07/Feb/18 7:34 AM,06/Sep/18 4:55 AM,28/Oct/23 2:21 AM,06/Sep/18 4:55 AM,,,,,,,v1.3.0,,,,,,0,,,,,,"fabric-ca-server should return 401 for authentication failures and 403 for authorization failures.  It is currently returning 401 HTTP status code for both.
We should rename newAuthErr to newAuthenticationErr and add a newAuthorizationErr function.",,aambati,jyellick,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-542,FABC-521,,,,FABC-521,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx033:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,jyellick,smithbk,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/May/18 2:54 AM;jyellick;[~smithbk] any updates here?;;;","18/May/18 12:29 PM;aambati;https://gerrit.hyperledger.org/r/c/21977/;;;","08/Jun/18 11:05 PM;aambati;Keith has suggested that we move this to 1.3. He has a -2 on the change set for this reason. Moving this to 1.3.;;;",,,,,,,,,,,,,,,,,
TLS enroll command should not replace cert.pem file in the msp signcerts folder,FABC-310,22025,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,14/Oct/17 2:52 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,05/Jan/18 12:01 PM,v1.0.2,,,,,,v1.1.0,,,,,,1,,,,,,"fabric-ca-client enroll command for TLS profile overwrites cert.pem file (if one exists) in the msp signcerts folder.

One option is to write certificate as tls-cert.pem in to signcerts folder. But MSP does not support multiple certs in the signcerts folder. Also, it does not have equivalent to signcerts folder for tls.

Other option is to write the certificate and key to a location specified by the user. This probably will not work for HSM.

A work around for this problem is to use different MSP directory using -M option when invoking TLS enroll fabric-ca-client command.",,aambati,fredbi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyjj3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,fredbi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Oct/17 12:21 AM;aambati;https://gerrit.hyperledger.org/r/c/14679/;;;","22/Oct/17 1:13 AM;fredbi;I confirm this behavior in rel 1.0.2: it is very annoying when simulating registration/enrollment uses cases mixing interactions with fabric-ca-client (CLI) and fabric-ca-client from fabric-node-sdk (TLS enabled)

For instance, an attempt to register a user from the CLI then enrolling it from a nodejs client is a messy process (overwrite breaks the config) although it works like a charm when performing both operations from the node client.;;;","05/Jan/18 12:01 PM;aambati;After trying different solutions to fix this problem user friendly way, we decided that best way to fix this problem is to change MSP to support tlscerts and change peer to use the msp to get tls cert and key for TLS communication. Until then, best way to get around this problem is to use different MSP directory using -M option when invoking TLS enroll fabric-ca-client command;;;",,,,,,,,,,,,,,,,,
The inbuilt default profile for fabric-ca stops the ability to specify max-enrollments when registering users ,FABC-311,23957,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,davidkel,davidkel,15/Nov/17 10:58 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/Nov/17 2:28 PM,v1.0.3,v1.0.4,v1.1.0,,,,v1.0.5,v1.1.0,v1.1.1,,,,0,fabric-ca,,,,,"For the composer dev environment we build a simple fabric with a fabric ca server without a config file and just use admin:adminpw. 

We want to then use this fabric-ca server to provide identities that can only be enrolled once, so as part of the registration of a new identity we specify maxenrollments of 1. However the fabric-ca server overrides this and sets the user to -1 ignoring our request.

I have tried to set the maxenrollments value for the server using environment variables so that I set maxenrollments to a large value. This works but then the server fails with an error because the default bootstrap id of admin has a maxenrollments set to -1 and is not allowed.",,davidkel,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyn6v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,davidkel,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Nov/17 7:02 AM;smithbk;https://gerrit.hyperledger.org/r/15503 (master);;;","04/Dec/17 8:49 PM;mastersingh24;https://gerrit.hyperledger.org/r/15895  (release);;;",,,,,,,,,,,,,,,,,,
TLS test certificates are expired,FABC-312,26123,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,mastersingh24,mastersingh24,mastersingh24,17/Dec/17 11:03 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,19/Dec/17 11:17 PM,,,,,,,v1.0.6,v1.1.0,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyr3z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Dec/17 6:48 PM;mastersingh24;https://gerrit.hyperledger.org/r/16285 (master)
https://gerrit.hyperledger.org/r/16287 (release);;;",,,,,,,,,,,,,,,,,,,
Build warnings indicate statically-linked builds potentially non-portable,FABC-313,21242,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,aambati,rennman,rennman,03/Oct/17 5:12 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,15/Feb/18 3:50 AM,,,,,,,v1.2.0,,,,,,0,,,,,,"After upgrading to golang 1.9,  build warning messages are issued (not new, just newly unmasked). The warnings imply limited portability of the statically-linked executable.

make peer-docker
{code:java}
14:39:29 /usr/lib/gcc/x86_64-linux-gnu/5/../../../x86_64-linux-gnu/libltdl.a(dlopen.o): In function `vm_open':
14:39:29 (.text+0x5e): warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
14:39:29 /tmp/go-link-176411200/000000.o: In function `_cgo_b0c710f30cfd_C2func_getaddrinfo':
14:39:29 /tmp/go-build/net/_obj/cgo-gcc-prolog:46: warning: Using 'getaddrinfo' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
{code}

make orderer-docker:
{code:java}
14:41:00 /usr/lib/gcc/x86_64-linux-gnu/5/../../../x86_64-linux-gnu/libltdl.a(dlopen.o): In function `vm_open':
14:41:00 (.text+0x5e): warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
14:41:00 /tmp/go-link-344798825/000000.o: In function `_cgo_b0c710f30cfd_C2func_getaddrinfo':
14:41:00 /tmp/go-build/net/_obj/cgo-gcc-prolog:46: warning: Using 'getaddrinfo' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
{code}



The warnings for fabric ca client and server are ever more profuse:
{code:java}
15:38:51  # github.com/hyperledger/fabric-ca/cmd/fabric-ca-client
15:38:51  /tmp/go-link-521788677/000000.o: In function `unixDlOpen':
15:38:51  /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/mattn/go-sqlite3/sqlite3-binding.c:35414: warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
15:38:51  /tmp/go-link-521788677/000002.o: In function `mygetgrouplist':
15:38:51  /tmp/workdir/go/src/os/user/getgrouplist_unix.go:15: warning: Using 'getgrouplist' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
15:38:51  /tmp/go-link-521788677/000002.o: In function `mygetgrgid_r':
15:38:51  /tmp/workdir/go/src/os/user/cgo_lookup_unix.go:38: warning: Using 'getgrgid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
15:38:51  /tmp/go-link-521788677/000002.o: In function `mygetgrnam_r':
15:38:51  /tmp/workdir/go/src/os/user/cgo_lookup_unix.go:43: warning: Using 'getgrnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
15:38:51  /tmp/go-link-521788677/000002.o: In function `mygetpwnam_r':
15:38:51  /tmp/workdir/go/src/os/user/cgo_lookup_unix.go:33: warning: Using 'getpwnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
15:38:51  /tmp/go-link-521788677/000002.o: In function `mygetpwuid_r':
15:38:51  /tmp/workdir/go/src/os/user/cgo_lookup_unix.go:28: warning: Using 'getpwuid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
15:38:51  /tmp/go-link-521788677/000001.o: In function `_cgo_b0c710f30cfd_C2func_getaddrinfo':
15:38:51  /tmp/go-build/net/_obj/cgo-gcc-prolog:46: warning: Using 'getaddrinfo' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
15:38:52  Building build/docker/bin/fabric-ca-server
15:39:37  # github.com/hyperledger/fabric-ca/cmd/fabric-ca-server
15:39:37  /tmp/go-link-759930536/000000.o: In function `unixDlOpen':
15:39:37  /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/mattn/go-sqlite3/sqlite3-binding.c:35414: warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
15:39:37  /tmp/go-link-759930536/000002.o: In function `mygetgrouplist':
15:39:37  /tmp/workdir/go/src/os/user/getgrouplist_unix.go:15: warning: Using 'getgrouplist' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
15:39:37  /tmp/go-link-759930536/000002.o: In function `mygetgrgid_r':
15:39:37  /tmp/workdir/go/src/os/user/cgo_lookup_unix.go:38: warning: Using 'getgrgid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
15:39:37  /tmp/go-link-759930536/000002.o: In function `mygetgrnam_r':
15:39:37  /tmp/workdir/go/src/os/user/cgo_lookup_unix.go:43: warning: Using 'getgrnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
15:39:37  /tmp/go-link-759930536/000002.o: In function `mygetpwnam_r':
15:39:37  /tmp/workdir/go/src/os/user/cgo_lookup_unix.go:33: warning: Using 'getpwnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
15:39:37  /tmp/go-link-759930536/000002.o: In function `mygetpwuid_r':
15:39:37  /tmp/workdir/go/src/os/user/cgo_lookup_unix.go:28: warning: Using 'getpwuid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
15:39:37  /tmp/go-link-759930536/000001.o: In function `_cgo_b0c710f30cfd_C2func_getaddrinfo':
15:39:37  /tmp/go-build/net/_obj/cgo-gcc-prolog:46: warning: Using 'getaddrinfo' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
{code}
",,aambati,rennman,smithbk,wutongtree,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyi4f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,rennman,smithbk,wutongtree,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Feb/18 7:10 AM;aambati;According to this [https://github.com/golang/go/issues/21421] , this is expected behavior. 

From [https://github.com/zeromq/libzmq/issues/2849] :

You cannot statically link to glibc - it uses runtime plugins for things like DNS resolution.
Also it's licensed under the LGPL, which means you can do dynamic linking, but static linking means your program's source code also has to be released under the LGPL.

Besides that, it looks like a problem with Golang, by searching for that error on google this is the second result:

[golang/go#21421|https://github.com/golang/go/issues/21421];;;","09/Feb/18 7:13 AM;aambati;Is this really a problem when the program was built in the same docker container that it will run in? [~mastersingh24] [~smithbk] can you pls weigh in on this

 ;;;","15/Feb/18 3:49 AM;smithbk;I agree that this is happening because as Anil said, go1.9 changed to correctly display the warnings.  See the final comment of https://github.com/golang/go/issues/21421.  That said, it is just a warning.  If you set FABRIC_CA_DYNAMIC_LINK=true, there are no warnings.  So I'm going to close.;;;",,,,,,,,,,,,,,,,,
SECURITY enforce that TLSv1.0 is not used,FABC-314,18282,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,mastersingh24,ales,mastersingh24,19/Jun/17 5:43 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,20/Jun/17 12:26 AM,,,,,,,v1.0.0,v1.0.0-rc1,,,,,0,security,Security,,,,"TLS version 1.0 is broken since years, there's a ton of literature showing why and how it's insecure. Unfortunately, fabric will accept to talk TLSv1.0, as shown here

{{// MinVersion contains the minimum SSL/TLS version that is acceptable.}}
{{// If zero, then TLS 1.0 is taken as the minimum.}}
{{MinVersion uint16}}

The fix should be that we set MinVersion to be TLSv1.2.

_FWIW: this is a stopship for most proprietary products._",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,Not a security issue,,,,,,,,,,,,,,,FAB-4848,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy4nb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Jun/17 6:01 AM;mastersingh24;We should be consistent and do this for the fabric-ca similar to FAB-4848 for the fabric runtime(s);;;","19/Jun/17 10:35 PM;mastersingh24;https://gerrit.hyperledger.org/r/10775;;;",,,,,,,,,,,,,,,,,,
fabric-ca mysql database name does not allow for digits,FABC-315,22026,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,skarim,rennman,rennman,14/Oct/17 3:05 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,26/Oct/17 4:48 AM,v1.1.0,,,,,,v1.1.0,,,,,,0,,,,,,"According to the mysql doc, Section 9.2, Schema Object Names, the following characters are allowed:

[0-9,a-z,A-Z$_]

However the parsing code in NewUserRegistryMySQL() in ./lib/dbutil/dbutil.go defines the regexp

[a-zA-z]

 which discounts both digits and the underscore.",,mastersingh24,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyjjb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Oct/17 7:39 PM;mastersingh24;[~rennman] - Why exactly do we care?  ;;;","17/Oct/17 2:58 AM;rennman;I would think we want to honor what the user configured, but at any rate it's more convoluted.

We have three relevant vars:
{code:java}
datasource
dbName
connStr{code}


datasource is the raw value taken straight from the configuration.
dbName is extracted from datasource.

In NewUserRegistryMySQL(), we instantiate the DB obejct by making a call to DB.Open() using a generic connection string, which *should* be the datasource minus the dbName. e.g., if
{code:java}
   datasource: root:mysql@tcp(localhost:3306)/fabric_ca2?parseTime=true{code}

then it follows that
{code:java}
   dbName=""fabric_ca2""
   connStr=""root:mysql@tcp(localhost:3306)/?parseTime=true""{code}


We do extract the DB name correctly (correctly, in the sense that we allow literally anything that is not forward slash '/', or colon ':'). However, because we are inconsistent with the rules that build the initial connStr, in the current code we essentially stop when we  see any character that is not in the set the set [a-zA-z], so datasource is transmuted into:
   connStr=""root:mysql@tcp(localhost:3306)/{color:#ff0000}*2*{color}?parseTime=true""


Consequently, when we attempt to instantiate the DB object, we try to connect to a database that doesn't (or with extremely high probability) exist:
{code:java}
2017/10/16 17:10:20 [DEBUG] Connecting to MySQL server, using connection string: ****:****@tcp(localhost:3306)/2?parseTime=true
2017/10/16 17:10:20 [ERROR] Error occurred initializing database: Failed to create user registry for MySQL: Failed to connect to MySQL database: Error 1049: Unknown database '2'{code}
Because we return immediately with an error, we skip the call to createMySQLDatabase() altogether (which ironically, probably would have succeeded since the call to createMySQLDatabase() is made with the raw datasource)

At a minimum, we should allow the same character set for the DB name when building the connStr, as we allow in getDBName, namely
   anything not in the set [/:].
Ideally, we would use the restrictions from the documentation:
   [0-9,a-z,A-Z$_];;;","20/Oct/17 5:18 AM;skarim;This will be resolved in [FAB-6508]. https://gerrit.hyperledger.org/r/#/c/14715/;;;",,,,,,,,,,,,,,,,,
Revoked user should not be able to make requests,FABC-316,15235,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,07/Mar/17 5:05 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/Mar/17 11:43 PM,,,,,,,,,,,,,0,,,,,,"Once a user has been revoked or if it's certificate has 
been revoked, it should not be able to continue to make requests
such as requesting tcert batch or registering a new user.

This will add the necessary logic to check the status of the
certificate in the token in the authorization header 
to make sure that it is not revoked. ",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5bb:",,,,,,Sprint 13 - Membership Service,Sprint 14 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
fabric-ca-client enroll doesn't store msp/intermediatecerts,FABC-317,18262,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,17/Jun/17 6:50 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,29/Jul/17 4:17 AM,v1.0.0,v1.0.0-beta,,,,,v1.0.1,,,,,,0,,,,,,"The ""fabric-ca-client enroll"" command stores certs in MSP format, except it does not store intermediatecerts appropriately when there is a certificate chain of more than one certificate.
It stores the cacerts, signedcerts, and keystore correctly.
It should also store the intermediatecerts when there is a chain of more than one certificate.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3m7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Jun/17 6:53 AM;smithbk;http://gerrit.hyperledger.org/r/10717;;;",,,,,,,,,,,,,,,,,,,
Client home has incorrect path when environment variables specified,FABC-318,15368,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,16/Mar/17 3:51 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,20/Mar/17 11:45 PM,,,,,,,,,,,,,0,,,,,,If you specify either FABRIC_CA_CLIENT_HOME or FABRIC_CA_HOME environment variables it will create a hidden folder for client home (.fabric-ca-client). The hidden folder should only get created when no location for the client home directory has been specified. ,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo53:",,,,,,Sprint 14 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
fabric-ca-client affiliation remove should require force option,FABC-319,27057,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,lehors,smithbk,smithbk,25/Jan/18 9:34 PM,30/Nov/18 8:34 AM,28/Oct/23 2:21 AM,07/Feb/18 8:30 PM,,,,,,,v1.1.0,,,,,,0,,,,,,"With affiliations ""foo.bar"", I tried the following 

{code}
fabric-ca-client affiliation remove foo
2018/01/25 07:25:34 [INFO] Configuration file location: /Users/keith/.fabric-ca-client/fabric-ca-client-config.yaml
Successfully removed affiliation: &{AffiliationInfo:{Name:foo Affiliations:[{Name:foo.bar Affiliations:[] Identities:[]}] Identities:[]} CAName:}
{code}

It should require the --force option since it has a child affiliation",,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyuj3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jan/18 11:45 PM;skarim;https://gerrit.hyperledger.org/r/#/c/17333/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-client prints error twice,FABC-320,15853,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,20/Apr/17 4:15 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,01/May/17 11:53 PM,,,,,,,v1.0.0,,,,,,0,,,,,,"fabric-ca-client Enroll -h
Error: unknown command ""Enroll"" for ""fabric-ca-client""

Did you mean this?
	enroll
	reenroll

Run 'fabric-ca-client --help' for usage.
2017/04/19 15:12:27 [FATAL] unknown command ""Enroll"" for ""fabric-ca-client""

Did you mean this?
	enroll
	reenroll
",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqin:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric-ca dependent images should always get the latest fabric images,FABC-321,31282,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,rameshthoomu,rameshthoomu,rameshthoomu,22/Jun/18 8:29 AM,19/Mar/19 8:13 PM,28/Oct/23 2:21 AM,02/Jul/18 11:08 PM,v1.2.0,,,,,,v1.2.0,,,,,,0,ci-failure,,,,,"Fabric-ca dependent images should always get the latest fabric images while building.

In fabric-ca, *images/fabric-ca-peer/Dockerfile.in* below lines are fetching the PREV_VERSION of the fabric images
{code:java}
FROM _NS_/fabric-peer:_FABRIC_TAG_{code}
{code:java}
PROJECT_NAME = fabric-ca
BASE_VERSION = 1.2.0
PREV_VERSION = 1.1.0
IS_RELEASE = false

ARCH=$(shell go env GOARCH)
MARCH=$(shell go env GOOS)-$(shell go env GOARCH)
ifneq ($(IS_RELEASE),true)
EXTRA_VERSION ?= snapshot-$(shell git rev-parse --short HEAD)
PROJECT_VERSION=$(BASE_VERSION)-$(EXTRA_VERSION)
FABRIC_TAG ?= $(ARCH)-$(PREV_VERSION)
else
PROJECT_VERSION=$(BASE_VERSION)
FABRIC_TAG ?= $(ARCH)-$(BASE_VERSION)
endif{code}
While building fabric-ca dependent images like (fabric-ca-peer, fabric-ca-orderer, fabric-ca-tools) images, the images are building on top of the PREV_VERSION which is 1.1.0 instead of the latest fabric images.",,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyktz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jun/18 12:43 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/23749/;;;","28/Jun/18 7:29 PM;denyeart;[https://gerrit.hyperledger.org/r/#/c/23749/] - release-1.2

[https://gerrit.hyperledger.org/r/#/c/23513/] - master;;;","13/Sep/18 1:05 AM;rameshthoomu;Abandon the master branch patch set based on Gari;s comments. Closed this;;;",,,,,,,,,,,,,,,,,
fabric-ca serialnumber for CSR not documented,FABC-322,15631,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,rennman,rennman,09/Apr/17 3:10 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,09/May/17 7:48 AM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"Whether this optional parameter is useful is debatable.  Either way, it's intended use is unclear, since the sample does not include it, nor does the help text adequately describe it's use. I'm not advocating either way for the elimination, nor retention of this field; if we keep it, it needs to honor the syntax rules defined by the OID, and is well-documented.

The expected use of the Serial Number attribute type defined by the LDAP schema (2.5.4.5 - id-at-serialNumber) would used as a qualifier RDN of the certificate subject, e.g.
CN=admin,serialNumber=<number>, ...

The cfssl implementation violates the syntax of the the ASN.1 definition, since the printable string's 'ub-serial-number' restricts the length from 1-64. cfssl apparently has no upper limit for this field as I was able to stuff well over 8K chars into the cert.

This is apparently raises a separate issue since we should restrict the DN's length to a reasonable value. I'll open a separate defect for that.",,mastersingh24,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpdr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,rennman,smithbk,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Apr/17 11:51 PM;mastersingh24;I can't think of any reason why we would need to allow the client to specify the serial number of the certificate.  I believe we can disable that functionality in the signing profile for the server.

Not sure how high a priority this is but we can keep tracking it;;;","19/Apr/17 2:08 AM;rennman;This has nothing whatever to do with the serial number of the certificate.

It is one of the RDN's contained in the distinguished name, as per above:
CN=admin,serialNumber=<number>, ...

It is a user-defined field.
;;;","02/May/17 1:51 AM;smithbk;See http://gerrit.hyperledger.org/r/8803 [FAB-3050] Document serial number of CSR;;;",,,,,,,,,,,,,,,,,
Idemix credential should not be allowed reenroll,FABC-323,30606,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,25/May/18 2:14 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,01/Jun/18 1:30 AM,v1.2.0,,,,,,v1.3.0,,,,,,0,,,,,,"If a client/identity uses an Idemix credential to send a reenroll request, this request should not be honored by the Fabric CA Server. Currently, if you send a reenroll request using Idemix credential than an x509 certificate ends up getting generated even though this identity never posses an x509 certificate to begin with.

A check should be made to see what type of credential is being used when handling a reenroll request, if a Idemix credential was used and appropriate error message should be returned back to user and the request should fail.

 ",,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzcd3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/May/18 2:19 AM;skarim;https://gerrit.hyperledger.org/r/22273;;;","27/May/18 12:37 AM;smithbk;Why do we not allow an idemix cred to be used on reenroll?  If this is something we aren't supporting for v1.2, that is fine, but am trying to understand why we would limit it.

Just a quick thought ... 

For a future release, we should  consider something more generic than enroll/reenroll now that we have two types of credentials, like a
   fabric-ca-client getcredential
which allows two options:
1) type of input authentication data to use (user/pass, x509, or idemix)
2) type of output/credential to produce (x509 or idemix) and where to store the credential

We would keep enroll and reenroll for backwards compatibility, but getcredential would be more generic and I think less confusing?;;;","27/May/18 2:41 AM;skarim;[~smithbk] Talking with Anil there is no concept of reenrollment for an idemix credential. Currently, if an identity issues a reenroll request when they *only* posses an Idemix credential they end up getting an x509 certificate. Talking with Anil, this seems like an odd behavior so a check was added that makes sure a re-enrollment is issued only if caller is using an x509 certificate. 

Also, the the approach going forward of adding an new command sounds good and I can open a JIRA to track this.;;;","27/May/18 3:15 PM;smithbk;I don't see a reason to make this restriction.;;;","29/May/18 11:08 PM;skarim;Based on above discussion, I am cancelling this.;;;",,,,,,,,,,,,,,,
Token-based authentication failure to intermediate server with cert chain,FABC-324,18143,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,smithbk,smithbk,smithbk,16/Jun/17 10:26 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,17/Jun/17 7:05 AM,,,,,,,,,,,,,0,,,,,,The server can go into an infinite loop when using token-based authentication to an intermediate server with cert chain of depth more than 1.,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy3fr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Jun/17 10:48 PM;smithbk;http://gerrit.hyperledger.org/r/10705;;;",,,,,,,,,,,,,,,,,,,
Save revocation public/private keys on the file system,FABC-325,30612,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,25/May/18 4:03 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,01/Jun/18 5:13 AM,,,,,,,v1.3.0,,,,,,0,,,,,,"Currently, Idemix issuer revocation public and private keys are stored in the database. This is not how issuer public/private keys are stored, which are stored on the file system. Later when Idemix supports BCCSP APIs, BCCSP will be used to manage the private keys.  For the sake of consistency and to support future release of BCCSP that has support for managing Idemix keys, we should store the revocation keys on the disk.",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-592,,,,,,,,,"1|hzzcef:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/May/18 5:09 AM;aambati;https://gerrit.hyperledger.org/r/c/22305/;;;",,,,,,,,,,,,,,,,,,,
Running fabric-ca-server that was built with go get command fails,FABC-326,30671,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,27/May/18 3:06 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,16/Jun/18 5:26 PM,,,,,,,v1.2.0,,,,,,0,,,,,,"Running fabric-ca-server command that was buit using go get command exits with the following error:

""Version is not set for fabric-ca library""

Reproduce steps:
1. export GOPATH=/tmp/fabric
2. go get -u github.com/hyperledger/fabric-ca/cmd/...
2. fabric-ca-server init -b admin:admin",,aambati,cnusri,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzcvj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,cnusri,JonathanLevi,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/May/18 5:56 AM;aambati;https://gerrit.hyperledger.org/r/c/22407/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca unit-tests leave crums all over,FABC-327,21043,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,lehors,lehors,lehors,28/Sep/17 9:34 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,09/Jan/18 12:12 AM,v1.0.2,,,,,,v1.1.0-alpha,,,,,,0,quality,,,,,"The unit-tests are not independent from one another and don't clean up after themselves. A lot of temporary files are left behind, not just in /tmp but in the source hierarchy.

FAB-5426 moves us in the right direction but more needs to be done.

This can be demonstrated by doing the following for instance:

fabric-ca/lib $ go test -run CLIClient >log 2>&1

fabric-ca/lib $ git status

On branch master
Your branch is up-to-date with 'origin/master'.
Untracked files:
  (use ""git add <file>..."" to include in what will be committed)

    log
    testservers/
    ../testdata/msp/

nothing added to commit but untracked files present (use ""git add"" to track)

fabric-ca/lib $ go test >log 2>&1

fabric-ca/lib $ ls -l /tmp
total 44
drwxr-xr-x 2 lehors lehors 4096 Sep 28 14:36 dbtesting
drwx------ 2 lehors lehors 4096 Sep 28 14:35 keystore
drwxr-xr-x 2 lehors lehors 4096 Sep 28 14:35 signcerts
...",This is independent of the environment.,lehors,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-208,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyhi7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,lehors,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Nov/17 3:34 AM;smithbk;Arnaud, is this already merged?  If yes, please mark as done; otherwise, please paste the change set here.;;;","10/Nov/17 1:38 AM;lehors;Sorry, I submitted a CR a while ago for this but it became out of sync with master while waiting to be merged and I have not had a chance to fix it.

Unfortunately as new tests with similar flaws get added to the repo the situation gets worse making this effort a bit like a never ending chasing game.

I will try to get to it early next week. Here is the related CR:

https://gerrit.hyperledger.org/r/c/14191/;;;",,,,,,,,,,,,,,,,,,
fabric-ca-server incorrectly sets default for db.tls.certfiles,FABC-328,16002,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,26/Apr/17 5:36 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,25/May/17 11:07 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,,,,0,,,,,,"Omitting the tls portion section of the db: block in the config file produces a parsing error:

config contents (omitting optional TLS info)
db:
  type: sqlite3
  datasource: fabric-ca-server.db

result:

{code:java}
$GOPATH/src/github.com/hyperledger/fabric-ca/bin/fabric-ca-server \
start --address 127.0.0.1 --port 7054 \
--config /tmp/fabric-ca/runFabricCaFvt.yaml
2017/04/25 16:32:59 [INFO] Configuration file location: /tmp/fabric-ca/runFabricCaFvt.yaml
Error: Incorrect format in file '/tmp/fabric-ca/runFabricCaFvt.yaml': 1 error(s) decoding:
* 'DB.TLS.CertFiles': source data must be an array or slice, got string
{code}



",,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr7z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/May/17 11:07 PM;skarim;This is no longer an issue and has been fixed already;;;",,,,,,,,,,,,,,,,,,,
fabric CA base image version should be the same as fabric,FABC-329,30109,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,smithbk,smithbk,11/May/18 12:07 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,19/May/18 9:29 PM,,,,,,,v1.2.0,,,,,,0,,,,,,"The fabric-ca/Makefile has
      BASEIMAGE_RELEASE = 0.4.6
but it should be kept in sync with the base release of fabric which is
     BASEIMAGE_RELEASE = 0.4.8

This should be added to the manual list of things to check for each release until some way of automating this can be figured out and implemented.",,denyeart,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzz9nb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/May/18 12:17 AM;denyeart;[~smithbk] [~aambati] Right, go ahead and update it now... but to put your mind at ease, in the release process google doc we do have a pre-release check to ensure that all the references to base image are up to date and consistent, see 2nd page:  [https://docs.google.com/document/d/12IpQnREUoJEUj2pF2z-0Up55geItFd94fcsbAkPacTg/edit#|https://docs.google.com/document/d/12IpQnREUoJEUj2pF2z-0Up55geItFd94fcsbAkPacTg/edit]

 ;;;","13/May/18 9:05 PM;mastersingh24;https://gerrit.hyperledger.org/r/21733;;;",,,,,,,,,,,,,,,,,,
Built-in attribute checks should not be case sensitive,FABC-330,26984,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Duplicate,,mastersingh24,mastersingh24,22/Jan/18 10:01 PM,27/Jul/19 11:46 PM,28/Oct/23 2:21 AM,27/Jul/19 11:44 PM,,,,,,,,,,,,,0,,,,,,"FAB-7465 tightened up the controls on attributes but inadvertently make checks for built-in ""hf.*"" attributes case sensitive.  Since case sensitivity is / was not documented, it's possible that this change will break existing clients  (for example this currently breaks Java SDK tests) ",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-291,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyu87:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
certs should expire before issuing cert expires,FABC-331,26655,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,09/Jan/18 12:36 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,14/Jan/18 8:15 AM,v1.1.0-alpha,,,,,,v1.1.0,v1.1.0-alpha,,,,,0,,,,,,Enrollment and intermediate certs should expire before issuing certificate expires,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyson:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Jan/18 6:27 AM;aambati;https://gerrit.hyperledger.org/r/c/16671/;;;",,,,,,,,,,,,,,,,,,,
TLS on client fails if TLS certificate issued by BCCSP,FABC-332,17004,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,skarim,skarim,23/May/17 3:46 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,06/Jun/17 3:07 AM,v1.0.0-alpha1,v1.0.0-alpha2,,,,,v1.0.0,,,,,,0,,,,,,Loading TLS certificate and key pair fails on the client side if certificate was issued by BCCSP. The key look up logic is missing from fabric-ca/lib/tls/tls.go in the GetClientTLSConfig() function. A similar change as made in https://gerrit.hyperledger.org/r/#/c/9235/ for server TLS configuration is needed for fabric-ca client TLS as well. ,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxwi7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/May/17 3:49 AM;smithbk;http://gerrit.hyperledger.org/r/9939;;;",,,,,,,,,,,,,,,,,,,
goAST security tests are failing in CI,FABC-333,18986,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,jtclark,rameshthoomu,rameshthoomu,06/Jul/17 4:00 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:39 PM,v1.0.0-rc1,,,,,,,,,,,,0,Security,,,,,"Observed goAST security tests are failing in CI consistently. Below is the daily goAST build status and result.

[https://jenkins.hyperledger.org/view/Daily/job/fabric-goast-daily-x86_64/52/artifact/gopath/src/github.com/hyperledger/fabric/results.json/*view*/]

[https://jenkins.hyperledger.org/view/Daily/job/fabric-goast-daily-x86_64/52/consoleFull]

*Below are the steps to execute goAST scans:*

1) clone fabric repository

2) go get github.com/GoASTScanner/gas

3) gas -fmt=json -out=results.json ./...",,ashutosh_kumar,ChristopherFerris,jtclark,nnao,rameshthoomu,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy6yn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,ChristopherFerris,jtclark,nnao,rameshthoomu,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Jul/17 12:10 AM;ashutosh_kumar;We are not required to scan Vendor package and other directory , e.g. *bddtest ,* that is not part of Fabric and fabric-ca mage. Also , the output should be in HTML format.

Here is the command that I used for my scanning :

*gas -skip=/Users/ash/go/src/github.com/hyperledger/fabric/vendor/* -skip=/Users/ash/go/src/github.com/hyperledger/fabric/bddtests/* -fmt=html -out=scanresult.html ./...*

These scans should be run fabric-ca repository also.

The output of scan should be retained somewhere on some server and in the event of scan failing , an email should go to mailing list consisting of squad leads :

Srinivasan Muralidharan

David Eneyeart

Jim Zhang

Kostas

Keith Smith

Barry

Ashutosh Kumar

Binh Nguyen

Gari Singh

There is no way the scan not to throw error. There will be false positives , which will make scan fail. Team will fix vulnerabilities identified , but currently , there is no way to eliminate false positives.

 

 

 

 

 

 ;;;","14/Jul/17 12:16 AM;rameshthoomu;Thanks [~ashutosh_kumar]. Will work on these requirements.;;;","18/Aug/17 11:17 PM;rameshthoomu;[~jtclark] Any update on this?;;;","03/Nov/17 8:21 PM;smithbk;This tool reports lots of ""undeclared name"" errors for things that are actually defined.
See https://github.com/GoASTScanner/gas/issues/113 which currently says a fix may be in the experimental branch.
[~jtclark] I think this tool is unusable until we get a version of gas with this fix.  I suggest trying the experimental branch.;;;","11/Nov/17 12:35 AM;smithbk;[~jtclark] Hi Jason, could you provide an update?;;;","04/Jan/18 9:48 PM;ChristopherFerris;[~jtclark] can you please update on the status of this?;;;","24/Jan/18 9:27 PM;jtclark;[~ChristopherFerris] - This JIRA task has been duplicated. The updated JIRA task capturing the latest work on this issue is FAB-7011. This issue can be closed.;;;",,,,,,,,,,,,,
"placeholder for viper bug when decoding a slice, but currently working around this",FABC-334,15746,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Done,mastersingh24,smithbk,smithbk,14/Apr/17 11:56 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,19/Dec/17 8:13 PM,v1.0.0-alpha1,,,,,,v1.1.1,,,,,,0,,,,,,"This is a placeholder for viper bug https://github.com/spf13/viper/issues/327.
fabric-ca currently has a workaround for this, but once the viper bug is fixed and viper is revendored in fabric-ca, then search the fabric-ca source for the string ""viperIssue327WorkAround"" and remove the work around code.",,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpzj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/May/17 1:59 AM;smithbk;Moving to v1.1.  It is a place holder to reference a viper issue for which there is a fix but is not yet merged.   We have worked around this issue, so no one will see a problem.;;;","18/Dec/17 7:16 PM;mastersingh24;https://gerrit.hyperledger.org/r/16289;;;",,,,,,,,,,,,,,,,,,
typos for config and document files,FABC-335,18661,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,mochechan,mochechan,26/Jun/17 3:17 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/Jun/17 6:48 AM,v1.0.0-rc1,,,,,,v1.0.0,,,,,,0,Documentation,quality,,,,"There are two typos in the fabric-ca repository. 

cmd/fabric-ca-server/config.go#L91

docs/source/users-guide.rst#L367

The incorrect text: 

# RequestClientCert, RequireAnyClientCert, _+*Verfiy*+_ClientCertIfGiven,

should be: 

# RequestClientCert, RequireAnyClientCert, +_*Verify*_+ClientCertIfGiven,",,mastersingh24,mochechan,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy5qf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,mochechan,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Jun/17 7:15 PM;mastersingh24;https://gerrit.hyperledger.org/r/11145;;;",,,,,,,,,,,,,,,,,,,
fabric-ca should not allow multiple revocation of same certificate,FABC-336,26626,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,rennman,rennman,06/Jan/18 2:43 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,20/Jan/18 5:46 AM,,,,,,,v1.1.0,,,,,,0,,,,,,"Currently, we do not check the status of a certificate being revoked, and unconditionally revoke it again. The effect of this is to update the revocation time.

This creates a potential ambiguity if one were to query the status of the certificate at a specific point in the past. We need to dis-allow multiple revocations of the same certificate.",,aambati,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzysiv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,rennman,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jan/18 3:29 AM;aambati;https://gerrit.hyperledger.org/r/c/16915/;;;",,,,,,,,,,,,,,,,,,,
Error in running a dynamically built fabric-ca container with the flag FABRIC_CA_DYNAMIC_LINK,FABC-337,26103,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,aambati,antoniovassell,antoniovassell,16/Dec/17 1:01 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,10/Jan/18 3:52 AM,v1.1.0-preview,,,,,,v1.1.0-alpha,,,,,,0,,,,,,"When we attempt to run a dynamically built container, it errors out with the error:

 
{code:java}
fabric-ca-server | fabric-ca-server: error while loading shared libraries: libltdl.so.7: cannot open shared object file: No such file or directory
fabric-ca-server exited with code 127{code}
Below are steps to reproduce using latest fabric 1.1.0 preview. 

Please note we tried this on both branches, release and master.

 
{code:java}
cd $GOPATH/src/github.com/hyperledger/fabric-ca
FABRIC_CA_DYNAMIC_LINK=true make docker
cd docker/server
docker-compose up{code}
 

Essentially we are trying build fabric-ca dynamically so we can link PKCS11 libraries.

 

 ",,aambati,antoniovassell,denyeart,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyr0v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,antoniovassell,denyeart,smithbk,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Jan/18 4:39 AM;smithbk;You have to install libtool and of course how you install depends on the OS.
For macos, *brew install libtool*;;;","06/Jan/18 5:21 AM;antoniovassell;[~smithbk] Correct, however this needs to be done in the docker images that are built, such as hyperledger/fabric-ca

For example it could go here: [https://github.com/hyperledger/fabric-ca/blob/master/images/fabric-ca/Dockerfile.in#L13]

Not sure if its possible to make use of this flag here to know when to install libtool in docker. [https://github.com/hyperledger/fabric-ca/blob/release/docker-env.mk#L55]

 

Of course we could build a custom image base off of the built fabric-ca image and install libtool, however i assume it would be better if it was installed from that Dockerfile.in The issue  is even more apparent if one is using hyperledger/fabric-ca, hyperledger/fabric-ca-peer and hyperledger/fabric-ca-orderer in one docker-compose file as all of them will error out and require installation of the libtool when dynamic linking is turned on.

 ;;;","06/Jan/18 6:05 AM;smithbk;The design for images has so far been to only include what is required in the default case in order to not make the image any larger than necessary, and this isn't the default.
However, since HSMs are not uncommon and this is required for HSMs, I agree that  we should make an exception.
But aren't you going to have the same problem for peer, orderer, etc?
Which implies that it should be in the base image;;;","06/Jan/18 6:39 AM;smithbk;Since you have to build the image manually anyway without the -static, I agree that it does make sense to go ahead and do this in the fabric-ca make so it is only in the images that need it.;;;","06/Jan/18 6:41 AM;antoniovassell;Noted;;;","08/Jan/18 12:23 PM;denyeart;[~smithbk] [~antoniovassell] Could you clarify next steps and timing for this one?;;;","09/Jan/18 3:55 AM;antoniovassell;[~smithbk] [~aambati] [~denyeart] 

Essentially the next steps would be, when the dynamic flag is specified 


{code} FABRIC_CA_DYNAMIC_LINK=true make docker {code}, it could be used to conditionally run  
{code:java}
apt-get install libltdl-dev y
{code} in the build process in each image that is created: fabric-ca, fabric-ca-orderer, fabric-ca-peer. 
This would prevented captioned error to occur and requiring developer to manually install library in each container. ;;;","09/Jan/18 2:15 PM;aambati;https://gerrit.hyperledger.org/r/c/16691/;;;",,,,,,,,,,,,
[SECURITY] Query not rejected after an Org is removed from the channel,FABC-338,18767,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,sandp125,sandp125,29/Jun/17 7:23 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,30/Jun/17 4:41 AM,v1.0.0-rc1,,,,,,v1.0.0,,,,,,1,quality,security,Security,,,"I am able to query a peer from an Org that was removed from the channel. The query returns data from the last state when it was still part of the channel.

Note: I am not able to do any invokes (Transaction proposal gives an error ""Org3MSP is unknown"").

I expected the query to fail similar to the invoke.

Following are steps to recreate this scenario.
 # Create a network with 3 Orgs, 2 Peers per Org, 3 CA, 3 Orderers, 4 KF, 3 ZK.
 # Create a Channel with 2 Orgs.
 # Join 2 Peers per Org into the Channel.
 # Install chaincode on all peers.
 # Instantiate chaincode.
 # Invoke on peer0 Org 1 (put value : 10)
 # Add Org3 to channel (configtxlator and channel update)
 # Invoke on peer0 Org 3 (put value : 20)
 # Query on peer0 Org 3  (20)
 # Remove Org3 from channel (configtxlator and channel update)
 # Invoke on peer1 Org 1 (put value : 30)
 # Query on peer1 Org 1 (30)
 # Query on peer1 Org 2 (30)
 # {color:#ff0000}Query on peer1 Org 3 (20) (We are getting the old value){color}
 # {color:#14892c}Invoke on peer0 Org1 by a user from Org3 Fails. {color}

{color:#14892c}I also tried a scenario where Org3 was never added to channel. Both the invokes and queries are failing in this case as expected. {color}",,AdnanChoudhury,binhn,bmos299,ChristopherFerris,sandp125,xixuejia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jun/17 7:22 AM;sandp125;2017_06_28_18_18_49-logs.tar.gz;https://jira.hyperledger.org/secure/attachment/11394/2017_06_28_18_18_49-logs.tar.gz","29/Jun/17 7:20 AM;sandp125;node_app.log;https://jira.hyperledger.org/secure/attachment/11395/node_app.log",,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy64f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,AdnanChoudhury,binhn,bmos299,ChristopherFerris,sandp125,xixuejia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jun/17 8:19 PM;xixuejia;I think it makes sense that *query* still succeeds even if the org is removed from the channel. A better solution would be adding a new field indicating that the org is removed from the channel so that the client is aware that the query result might not be the latest state;;;","29/Jun/17 9:18 PM;ChristopherFerris;Does the query only return state from when the org was a member of the channel? It isn't clear to me that they should have access. ;;;","29/Jun/17 11:11 PM;sandp125;[~ChristopherFerris]. Yes. The query returns state for when org was still part of the channel. If you see Step 14. I am getting the value as 20 instead of the new value 30.;;;","29/Jun/17 11:20 PM;bmos299;[~xixuejia] this could be a security issue.  If you have any org that was removed for any reason, they could be using functionality for a DDOS type attack as this call is using cpu cycles.   Also, depending on how the query data is used, it could cause general misunderstanding of state.  What do you think?;;;","30/Jun/17 1:18 AM;binhn;This is as expected: members of org3 can't  access the network; they can certainly access their peers and query data that they have on their peers, but they don't receive any more update from the network.

Please close.;;;","30/Jun/17 2:34 AM;bmos299;What if the client (node sdk) goes to a peer in a different org?;;;","30/Jun/17 3:55 AM;binhn;[~bmos299] as I commented above ""members of org3 can't  access the network""; that is, they no longer have permission to the channel on any other org. If org3 belonged to other channels, then its members can continue to work as normal on other channels.;;;","30/Jun/17 4:41 AM;sandp125;[~bmos299] [~binhn]. A peer from an org no longer part of the channel is not able to query a peer in a different org. I have tested this scenario and I am getting an error ""Org3MSP is unknown"". I am closing this issue as everything is working as expected.

 

 ;;;","30/Jun/17 5:06 AM;binhn;[~sandp125] thanks.;;;",,,,,,,,,,,
fabric-ca db lock errors in sqlite3,FABC-340,22485,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,rennman,rennman,19/Oct/17 12:38 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,01/Nov/17 4:48 AM,,,,,,,,,,,,,0,,,,,,"When sending multiple parallel requests to a fabric_ca server cluster that uses shared sqlite3 databases, the server occasionally returns a 'database locked' error.  This should be considered a transient failure, and not a fatal error. Although the code does attempt to account for this in NewUserRegistrySQLLite3() --
{code:java}
// Set maximum open connections to one. This is to share one connection
 // across multiple go routines. This will serialize database operations
 // with in a single server there by preventing ""database is locked""
 // error under load. The ""Database is locked"" error is still expected
 // when multiple servers are accessing the same database (but mitigated
 // by specifying _busy_timeout to 5 seconds).{code}
-- data from fvt test suggests that the timeout is insufficient for the load generated by the clustering fvt test.

The recommendation is to increase the timeout to 10 seconds:
{code:java}
@@ -43,7 +43,7 @@ func NewUserRegistrySQLLite3(datasource string) (*sqlx.DB, error) {
 return nil, errors.WithMessage(err, ""Failed to create SQLite3 database"")
 }
 
- db, err := sqlx.Open(""sqlite3"", datasource+""?_busy_timeout=5000"")
+ db, err := sqlx.Open(""sqlite3"", datasource+""?_busy_timeout=10000"")
 if err != nil {
 return nil, errors.Wrap(err, ""Failed to open sqlite3 DB"")
 } {code}
 

This has been empirically proven to work for the purposes of the test.

 

From the sqlite3 documentation:

int sqlite3_busy_timeout(sqlite3*, int ms);

This routine sets a [busy handler|https://sqlite.org/c3ref/busy_handler.html] that sleeps for a specified amount of time when a table is locked. The handler will sleep multiple times until at least ""ms"" milliseconds of sleeping have accumulated. After at least ""ms"" milliseconds of sleeping, the handler returns 0 which causes [sqlite3_step()|https://sqlite.org/c3ref/step.html] to return [SQLITE_BUSY|https://sqlite.org/rescode.html#busy].

 ",,aambati,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyk0v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,rennman,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Oct/17 9:05 AM;aambati;https://gerrit.hyperledger.org/r/c/14673/;;;",,,,,,,,,,,,,,,,,,,
The default CA cert should have a long expiration,FABC-341,16478,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,09/May/17 4:00 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,26/May/17 11:29 PM,,,,,,,v1.0.0,,,,,,0,,,,,,"The current default expiration for all certificates created by the fabric-ca-server is approximately 1 year.

After searching, there is no standard expiration for CA certs; however, I did find the following values were in line with what was generally recommended.

1) CA root certificate expiration: approximately 15 years
2) CA intermediate certificate expiration:  approximately 5 years
3) Issued enrollment certificates expiration: approximately 1 year

Change the fabric-ca-server's to these values.

 ",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxu7z:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/May/17 9:13 PM;smithbk;http://gerrit.hyperledger.org/r/9563 [FAB-3734] Change default expiration times;;;",,,,,,,,,,,,,,,,,,,
make unit-tests fails TestNewUserRegistryMySQL on vagrant,FABC-342,19426,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,lehors,lehors,lehors,22/Jul/17 7:11 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,14/Sep/17 11:09 PM,v1.0.0,,,,,,v1.1.0,,,,,,0,,,,,,"TestNewUserRegistryMySQL relies on being able to change a file access mode to be readonly. Unfortunately on vagrant this doesn't work because, at least on Windows, all files on shared volumes appear with a 777 mode which cannot be changed.

This makes the test fail.

A simple fix is to use a file on a local volume so that its access control can effectively be changed as desired.

 
{code:java}
$ go test -v -run TestNewUserRegistryMySQL
=== RUN TestNewUserRegistryMySQL
2017-07-21 21:47:33.845 UTC [bccsp] GetDefault -> WARN 001 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
--- FAIL: TestNewUserRegistryMySQL (0.00s)
 Error Trace: server_test.go:1318
 Error: ""Failed to connect to MySQL database: dial tcp 127.0.0.1:3306: getsockopt: connection refused"" does not contain ""permission denied""
FAIL
{code}
 

 ",,lehors,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-398,FABC-253,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy9f3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,lehors,mastersingh24,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Jul/17 5:10 AM;mastersingh24;This is not needed for a patch release;;;",,,,,,,,,,,,,,,,,,,
Fix garbled listen message on startup,FABC-343,22716,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,20/Oct/17 8:23 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/Oct/17 7:51 PM,,,,,,,v1.0.4,,,,,,0,,,,,,"
{noformat}
Listening on %!s(int=7054)%!(EXTRA string=http://0.0.0.0:7054) 
{noformat}
should be  
{noformat}
Listening on http://0.0.0.0:7054
{noformat}
",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzykdr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Oct/17 8:31 PM;mastersingh24;https://gerrit.hyperledger.org/r/14729;;;",,,,,,,,,,,,,,,,,,,
fabric-ca UT failing,FABC-344,22849,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,harsha544,harsha544,harsha544,26/Oct/17 10:44 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,03/Nov/17 8:55 PM,,,,,,,v1.1.0,,,,,,0,,,,,,"fabric-ca UT are inconsistently passing on ppc64le. Enclosing a portion of failure section :-

 

2017/10/26 01:36:39 [DEBUG] Initializing BCCSP with software options &\{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:0xc4202f64c0 DummyKeystore:<nil>}
Error: Enrollment information does not exist. Please execute enroll command first. Example: fabric-ca-client enroll -u http://user:userpw@serverAddr:serverPort
fabric-ca-client:
 Version: development build
 Go version: go1.9
 OS/Arch: linux/ppc64le
FAIL
coverage: 89.9% of statements
{color:#ff0000}FAIL    github.com/hyperledger/fabric-ca/cmd/fabric-ca-client    128.930s{color}
error: exit status 1
panic: EOF

goroutine 1 [running]:
main.main()
    /w/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x1164
*** END FAILURES ***

For further debugging enclosed the complete log.",,bsmita,harsha544,rennman,smithbk,SriramaSharma,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Oct/17 1:31 AM;harsha544;Fabric-CA-UT-Node2-Run1.rtf;https://jira.hyperledger.org/secure/attachment/12826/Fabric-CA-UT-Node2-Run1.rtf","26/Oct/17 10:45 AM;harsha544;Fabric-CA_UT_Logs.rtf;https://jira.hyperledger.org/secure/attachment/12822/Fabric-CA_UT_Logs.rtf","29/Oct/17 1:31 AM;harsha544;Node5-Fabric-Ca-Run.zip;https://jira.hyperledger.org/secure/attachment/12825/Node5-Fabric-Ca-Run.zip",,,,,,,,,,,,,,,,,,,,,,,,"1|hzyl3j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bsmita,harsha544,rennman,smithbk,SriramaSharma,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Oct/17 10:48 AM;harsha544;Per [~rennman]'s Suggestion tried increasing the overall wait time by *{color:#333333}gocov test -timeout 15m $PKGS | gocov-xml > coverage.xml{color}* (from a default of 10 mins) to 15 mins. However the UT were still not passing on every run.;;;","26/Oct/17 10:51 AM;harsha544;^^^ [~rameshthoomu] request you to kindly re-run some more fabric-ca UT in sandbox. And advice on the same.;;;","27/Oct/17 3:31 AM;rennman;This still appears to be a permissions problem:
 {{main_test.go:540: Enroll command invoked with -c /tmp/client-config.json failed: Failed to store TLS root certificate at '/tmp/msp/tlscacerts/tls-localhost-7090.pem': open /tmp/msp/tlscacerts/tls-localhost-7090.pem: permission denied}}

The failing test creates the directory with appropriate permissions before writing the file:
{{os.MkdirAll(dir, 0755)}}
 where
 {{dir=/tmp/msp/tlscacerts/}}

The error is returned from {{ioutil.WriteFile()}}, where the filename is {{tls-localhost-7090.pem}}

This ought to work, since the '7' in '0755' is sufficient for the creator of the dir to cd, ls, and create a file in that dir.

Does this fail consistently? What is the umask setting for the host machine? Are there any extended acls defined? Under what user/group id is the test being run? Is the sticky bit set anywhere? Are there any other security products installed/configured on the host machine (selinux, etc....) I'm grasping at straws, but it's an environment issue.;;;","28/Oct/17 2:57 AM;smithbk;[~harsha544] What release is this against?  master or v1.0.3?  If this is against v1.0.3, then you should be using go 1.7;;;","28/Oct/17 1:38 PM;harsha544;[~smithbk] This is against master head code of fabric-ca hence we are using go1.9
[~rennman] Sorry for being late, I will get required details and come back to you.;;;","28/Oct/17 11:49 PM;harsha544;[~rennman] Here's the requested information :-

jenkins@blockchain-5:~$ getenforce 
 *Disabled*
 jenkins@blockchain-5:~$ umask 
 *0002*
 jenkins@blockchain-5:~$ id
 uid=1001(jenkins) gid=1001(jenkins) groups=1001(*jenkins*),27(*sudo*),116(*docker*)
 jenkins@blockchain-5:~$ ls -ld /tmp
 *drwxrwxrw*t 18 root root 16384 Oct 28 14:46 /tmp
 jenkins@blockchain-5:~$

 

Will do multiple runs on above node to see if it consistently fails or passes.;;;","29/Oct/17 1:31 AM;harsha544;[~rennman] Enclosed multiple run data for Node5 which consistently fails.
Also enclosing run data from node2 where Fabric-CA  UT is passing.
Here are selinux,umask details from node2 :- 
jenkins@blockchain-2:~$ getenforce
*Disabled*
jenkins@blockchain-2:~$ umask
*0002*
jenkins@blockchain-2:~$ id
uid=1001(jenkins) gid=1001(jenkins) groups=1001(*jenkins*),27(*sudo*),110(*lxd*),116(*docker*)
jenkins@blockchain-2:~$ ls -ld /tmp
*drwxrwxrwt* 20 root root 266240 Oct 28 16:29 /tmp
jenkins@blockchain-2:~$;;;","01/Nov/17 3:32 AM;harsha544;[~rennman] [~smithbk] Any suggestions/thoughts please ?;;;","01/Nov/17 4:54 AM;rennman;[~harsha544] Nothing stands out based on the info provided. There is only one failure from one operation in one test. If you can give me access to blockchain-5, I can try to do some runtime troubleshooting.;;;","02/Nov/17 4:58 AM;rennman;It turns out that we are leaving some data lying around in /tmp. In and of itself, that's not a bad thing, but
1 - the data storage on the power systems is persistent
2 - In late Sep, the UT was run under the 'root' user
Consequently, two of the tests – testInsertAndGetUser() from lib/dasqlite_test.go, and TestClientCommandsNoTLS() from ./cmd/fabric-ca-client/main_test.go – were failing due to permissions issues with the leftover data from the old test run.

I deleted the problem files, and all of the UT ran successfully.;;;","02/Nov/17 5:59 PM;harsha544;[~rennman]  I ran multiple fabric-ca UTs on blockchain-5, ensured I cleaned up /tmp before I executed UT, however at times I encounter this failure :- 

**** Test killed with quit: ran too long (10m0s).*
FAIL    github.com/hyperledger/fabric-ca/lib    600.103s
error: exit status 1
panic: EOF

Do you think there's more obvious fix as opposed to increasing overall wait time to 15 mins. **;;;","03/Nov/17 1:04 AM;rennman;[~harsha544] Other than figuring out where the bottleneck is, no. From my experience, the performance on ppc is terrible. The most likely culprit is poor I/O performance.;;;",,,,,,,,
[SECURITY] Fabric CA has issues verifying some passwords containing the letter 'e',FABC-345,18987,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,keithsmith,ptippett,ptippett,06/Jul/17 4:06 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,07/Jul/17 9:09 PM,v1.0.0-rc1,,,,,,v1.0.0,,,,,,0,HSBN,security,Security,,,"When bootstrapping a new network or peer, we sometimes end up in a state where the fabric CA telling us our password is invalid when it doesn't appear to be.

Our automation for bootstrapping is the same for each network and peer and this works most of the time.  And as you'll see from the attachment, if we decode the basic auth header that is getting sent, it does match the ID/PW configured for that user.


See attachment for more details.  Unfortunately, the last network we saw this on was deleted, so I don't have a live network to debug with, but we've seen this a few times, so I can update when we see this again.  I would like this looked at to make sure it isn't something that should be fixed in 1.0, but I've listed the fix version as 1.1 for now.

[^ca_issue_details.txt]

 

 ",,JonathanLevi,mastersingh24,mrshah-ibm,ptippett,smithbk,tkuhrt,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-4546,,,,,,,,,,,,,,,,,,,,,,,,"07/Jul/17 2:29 AM;mrshah-ibm;ca_issue.zip;https://jira.hyperledger.org/secure/attachment/11602/ca_issue.zip","06/Jul/17 4:05 AM;ptippett;ca_issue_details.txt;https://jira.hyperledger.org/secure/attachment/11590/ca_issue_details.txt",,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy6yv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JonathanLevi,mastersingh24,mrshah-ibm,ptippett,smithbk,tkuhrt,yacovm,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Jul/17 4:21 AM;smithbk;I can't think of anything to even investigate here.  We will need to know how to reproduce to make progress on this.;;;","06/Jul/17 4:51 AM;ptippett;OK.  Not surprised.  As soon as we see this again, I'll update the JIRA with a live network you can look at.;;;","07/Jul/17 1:09 AM;ptippett;Hi Keith. Moving this to fabric 1.0 since we were able to reproduce and through further debug with Mihir, agreed this should be fixed for Fabric V1.;;;","07/Jul/17 2:30 AM;mrshah-ibm;Uploaded all the debug info [^ca_issue.zip];;;","07/Jul/17 2:52 AM;smithbk;Some notes from debugging this.  It seems this is happening with two different users logging in concurrently to the same CA.
We call the DB to get the password for each user.  The 1st one is failing because the 2nd ""DB: Getting identity"" is perhaps overwriting the result of the 1st before it can check the password of the 1st.

{code}
2017/07/05 22:04:05 [INFO] Listening on https://0.0.0.0:7054
2017/07/05 22:04:11 [DEBUG] Received request
POST /enroll
Authorization: Basic YWRtaW5QZWVyT3JnMUNBMjowMzRlMjIwNzk2
{""hosts"":null,""certificate_request"":""-----BEGIN CERTIFICATE REQUEST-----\nMIIBETCBuQIBADAbMRkwFwYDVQQDExBhZG1pblBlZXJPcmcxQ0EyMFkwEwYHKoZI\nzj0CAQYIKoZIzj0DAQcDQgAE8IBRqVpzhLm05YnHTxKxXE3Nb3lGtyzwYcvq/5P4\nV+JnkSER8JtHYLg2SHWRNFrSLkJgyGIAApBx8HAUESZ2LaA8MDoGCSqGSIb3DQEJ\nDjEtMCswGwYDVR0RBBQwEoIQZmFicmljLWNhLTE5MTAyYzAMBgNVHRMEBTADAQH/\nMAoGCCqGSM49BAMCA0cAMEQCIGmrrwxTM2WXiyYhRKFoNFRJqQRp2kxec+FgPWDA\n94nVAiAhTG15FkRRedAGo9zMe8uqCD8lOm7xJaxPuX3eulD3yA==\n-----END CERTIFICATE REQUEST-----\n"",""profile"":""ca"",""crl_override"":"""",""label"":"""",""CAName"":""PeerOrg1CA""}
2017/07/05 22:04:11 [DEBUG] Directing traffic to CA PeerOrg1CA
2017/07/05 22:04:11 [DEBUG] DB: Getting identity adminPeerOrg1CA2
2017/07/05 22:04:12 [DEBUG] Received request
POST /enroll
Authorization: Basic YWRtaW5QZWVyT3JnMUNBMTo2ZDZmNDA3OWZj
{""hosts"":null,""certificate_request"":""-----BEGIN CERTIFICATE REQUEST-----\nMIIBEjCBuQIBADAbMRkwFwYDVQQDExBhZG1pblBlZXJPcmcxQ0ExMFkwEwYHKoZI\nzj0CAQYIKoZIzj0DAQcDQgAEJN/sktMmSXi/WdXaeKDabU/NbrProOD/OfalbfY8\nKYhHvrnAc43bfUvK5sNQISewKdKf+HfAjk5NWRse68I5raA8MDoGCSqGSIb3DQEJ\nDjEtMCswGwYDVR0RBBQwEoIQZmFicmljLWNhLTE5MTAyYTAMBgNVHRMEBTADAQH/\nMAoGCCqGSM49BAMCA0gAMEUCIQDaurY91jpZjN51O4avU8gIp7buWk/md3G67MJA\n5u6GoQIgOxOblKuFWRuI4kDiUYO12NM45v5vRwR1W9ZAfnsRehg=\n-----END CERTIFICATE REQUEST-----\n"",""profile"":""ca"",""crl_override"":"""",""label"":"""",""CAName"":""PeerOrg1CA""}
2017/07/05 22:04:12 [DEBUG] Directing traffic to CA PeerOrg1CA
2017/07/05 22:04:12 [DEBUG] DB: Getting identity adminPeerOrg1CA1
2017/07/05 22:04:12 [DEBUG] DB: Login user adminPeerOrg1CA2 with max enrollments of -1 and state of 0
2017/07/05 22:04:12 [DEBUG] Failed to login 'adminPeerOrg1CA2': Incorrect password
2017/07/05 22:04:12 [DEBUG] DB: Login user adminPeerOrg1CA1 with max enrollments of -1 and state of 0
2017/07/05 22:04:14 [DEBUG] Successfully incremented state for identity adminPeerOrg1CA1 to 1
2017/07/05 22:04:14 [DEBUG] DB: identity adminPeerOrg1CA1 successfully logged in
2017/07/05 22:04:14 [DEBUG] Identity/Pass was correct
{code}

The following code is suspicious and wondering if I could be misunderstanding how Go handles memory allocation of stack variables, but don't think so:
{code}
// GetUser gets user from database
func (d *Accessor) GetUser(id string, attrs []string) (spi.User, error) {
	log.Debugf(""DB: Getting identity %s"", id)

	err := d.checkDB()
	if err != nil {
		return nil, err
	}

	var userRec UserRecord
	err = d.db.Get(&userRec, d.db.Rebind(getUser), id)
	if err != nil {
		return nil, err
	}

	return d.newDBUser(&userRec), nil
}
{code}

This also doesn't explain how the wrong password is in the actual DB, but it is still very suspicious that this happens 10% of the time and the concurrent login requests seem to fit that pattern.
;;;","07/Jul/17 3:13 AM;smithbk;I submitted https://gerrit.hyperledger.org/r/11417 to include the passwords just to debug this, so narrow down where the password is going wrong.;;;","07/Jul/17 3:45 AM;mastersingh24;Is the wrong password the same as the password for the other user?;;;","07/Jul/17 5:13 AM;mrshah-ibm;[~mastersingh24] no, it is not.. It is either partial or complete junk value.

 
{quote}sqlite> select * from users;
admin|2773800200000|client||[\{""name"":""hf.IntermediateCA"",""value"":""1""},\{""name"":""hf.Registrar.Roles"",""value"":""client,user,peer,validator,auditor,ca""},\{""name"":""hf.Registrar.DelegateRoles"",""value"":""client,user,validator,auditor""},\{""name"":""hf.Revoker"",""value"":""1""}]|0|-1
WebAppAdmin|37df13dae2|client||[\{""name"":""hf.Registrar.DelegateRoles"",""value"":""client,user,validator,auditor""},\{""name"":""hf.Revoker"",""value"":""1""},\{""name"":""hf.IntermediateCA"",""value"":""1""},\{""name"":""hf.Registrar.Roles"",""value"":""client,user,peer,validator,auditor,ca""}]|0|-1
adminmanager|e26c580b48|client||[\{""name"":""hf.Registrar.Roles"",""value"":""client,user,peer,validator,auditor,ca""},\{""name"":""hf.Registrar.DelegateRoles"",""value"":""client,user,validator,auditor""},\{""name"":""hf.Revoker"",""value"":""1""},\{""name"":""hf.IntermediateCA"",""value"":""1""}]|0|-1
adminPeerOrg1CA1|6d6f4079fc|client||[\{""name"":""hf.IntermediateCA"",""value"":""1""},\{""name"":""hf.Registrar.Roles"",""value"":""client,user,peer,validator,auditor,ca""},\{""name"":""hf.Registrar.DelegateRoles"",""value"":""client,user,validator,auditor""},\{""name"":""hf.Revoker"",""value"":""1""}]|1|-1
adminPeerOrg1CA2|Inf|client||[\{""name"":""hf.Revoker"",""value"":""1""},\{""name"":""hf.IntermediateCA"",""value"":""1""},\{""name"":""hf.Registrar.Roles"",""value"":""client,user,peer,validator,auditor,ca""},\{""name"":""hf.Registrar.DelegateRoles"",""value"":""client,user,validator,auditor""}]|0|-1
adminCA|adminCApw|client||[\{""name"":""hf.IntermediateCA"",""value"":""1""},\{""name"":""hf.Registrar.Roles"",""value"":""client,user,peer,validator,auditor,ca""},\{""name"":""hf.Registrar.DelegateRoles"",""value"":""client,user,validator,auditor""},\{""name"":""hf.Revoker"",""value"":""1""}]|0|-1
adminOrderer|adminOrdererpw|client||[\{""name"":""hf.Revoker"",""value"":""1""},\{""name"":""hf.IntermediateCA"",""value"":""1""},\{""name"":""hf.Registrar.Roles"",""value"":""client,user,peer,validator,auditor,ca,orderer""},\{""name"":""hf.Registrar.DelegateRoles"",""value"":""client,user,validator,auditor,orderer""}]|0|-1
adminPeer|adminPeerpw|client||[\{""name"":""hf.Registrar.Roles"",""value"":""client,user,peer,validator,auditor,ca""},\{""name"":""hf.Registrar.DelegateRoles"",""value"":""client,user,validator,auditor""},\{""name"":""hf.Revoker"",""value"":""1""},\{""name"":""hf.IntermediateCA"",""value"":""1""}]|0|-1
{quote}
 

admin|2773800200000 should be admin|27738002e5

adminPeerOrg1CA2|Inf should be adminPeerOrg1CA2|034e220796

as per the config below
{quote}\{
 ""name"": ""admin"",
 ""pass"": ""27738002e5"",
 ""type"": ""client"",
 ""maxEnrollments"": 0,
 ""affiliation"": """",
 ""attrs"": \{
 ""hf.Registrar.Roles"": ""client,user,peer,validator,auditor,ca"",
 ""hf.Registrar.DelegateRoles"": ""client,user,validator,auditor"",
 ""hf.Revoker"": true,
 ""hf.IntermediateCA"": true
 }
 },
{quote}
 
{quote}\{
 ""name"": ""adminPeerOrg1CA2"",
 ""pass"": ""034e220796"",
 ""type"": ""client"",
 ""maxEnrollments"": 0,
 ""affiliation"": """",
 ""attrs"": \{
 ""hf.Registrar.Roles"": ""client,user,peer,validator,auditor,ca"",
 ""hf.Registrar.DelegateRoles"": ""client,user,validator,auditor"",
 ""hf.Revoker"": true,
 ""hf.IntermediateCA"": true
 }
 },
{quote};;;","07/Jul/17 5:21 AM;smithbk;There is a conversion problem for passwords with a lowercase “e” down in the sqlx library code.
We can work around this by changing the type of the password field to []byte and casting ourselves
before storing in the DB.  I have the fix but am working on a test case now.;;;","07/Jul/17 5:25 AM;JonathanLevi;Hi all, [~smithbk] ""*There is a conversion problem for passwords with a lowercase “e” down in the sqlx library code.""*

What is the issue please and why do we believe that it is only with a lowercase ""e"" ? ** I would like to identify the issue before we evaluate e quick workaround, please... Thanks.

 ;;;","07/Jul/17 5:30 AM;JonathanLevi;Also, ״by *changing the type of the password field* to []byte and casting ourselves *before storing in the DB*.״

1. What type is the password field now?

2. Are you/we still storing passwords in cleartext in the DB?;;;","07/Jul/17 6:00 AM;mastersingh24;I don't think this is a ""bug"" with sqlx - it appears that it is treating this as numbers and evaluating ""e"" as an exponent.

I'm sure if the database field type was a char / varchar rather than bytes / blobs this would likley not happen;;;","07/Jul/17 6:04 AM;JonathanLevi;I'm 100% sure it's not a bug in sqlx. Can we please get a few samples of the ""breaking stuff"" ? Sorry, trying to assist...;;;","07/Jul/17 6:19 AM;smithbk;Right, I assume it is a sqlx feature to do this conversion ... not one that I was aware of.
1) The type of the password field is now []byte in UserRecord.  It was previously string.
     I didn't change the SQL type.  It is still ""bytea"".
     I could have made the type varchar and then limit the password length, but thought it was easier to store as bytes.
2) Yes, we are storing in cleartext in the DB, though I don't recall this being flagged earlier.
    We should store the hash and compare hashes.
    Is this another change for v1?

     ;;;","07/Jul/17 6:34 AM;smithbk;See https://gerrit.hyperledger.org/r/#/c/11417/3/lib/server_test.go for a test case;;;","07/Jul/17 6:37 AM;JonathanLevi;I see, one use-case. So it's not the sqlx, Gari is right above... 

Please can you answer the above 3 questions? Also, does the test case fail without the fix?

 ;;;","07/Jul/17 6:42 AM;JonathanLevi;OK, so instead of waiting - just quickly, I remember us ([~mastersingh24], [~JonathanLevi]) merging it, ""temporarily"", 6 months ago, during the ""COP"" days: [https://gerrit.hyperledger.org/r/#/c/4387]

But it seems like still, until now: passwords are stored, passed around and compared in the clear :(
[https://github.com/hyperledger/fabric-ca/blob/f013d54aa432a67bb5398369afb8b1572ad02e7f/lib/dbaccessor.go#L350-L352]

So [~smithbk] suggests to start comparing a []byte to a []byte of passwords in the clear above.

What are we going to do? I'm open to suggestions.;;;","07/Jul/17 7:14 AM;smithbk;Jonathan, I thought I had responded to all questions.   Could you point out which ones I missed?  Thanks

Yes, the test case fails without the fix and it passes with the fix.

;;;","07/Jul/17 7:15 AM;yacovm;{code:java}
CREATE TABLE users (id VARCHAR(64) NOT NULL, token blob, type VARCHAR(64), affiliation VARCHAR(64), attributes VARCHAR(256), state INTEGER, max_enrollments INTEGER, PRIMARY KEY (id)) DEFAULT CHARSET=utf8 COLLATE utf8_bin{code}
This is the code that creates the users table, right?

My suggestion (in case we want not to store passwords as they are stored now) is that we store the hash of the password the user provided and upon login, we compare the hash.

We also can use a randomly generated salt for each user record.

In order to be backward compatible we can do the following:

Make a patch that upon startup of the fabric-CA, it checks if the table has the salt column and:
 * If yes- means database was upgraded before, so proceeds without doing anything.
 * If not - means the database needs to be upgraded. So it copies the users table to a temporary table, drops the user table, creates it anew with the salt column, and then copies the data where the token is hashed and then put into the token column of the new table (I guess we can maybe use ALTER TABLE but not sure if all RDBMS providers of fabric-CA have this statement)

 *Note: Of course, this is only a suggestion to a circumstance in which we decide to change the way the users table is saved in the database.*

 ;;;","07/Jul/17 12:45 PM;smithbk;I created a separate jira item for storing the hash of the password in the DB.
See https://jira.hyperledger.org/browse/FAB-5203.
If this is merged for v1, we shouldn't have to worry about backwards compatibility.
The bcrypt library generates a random salt for each hash under the covers.;;;"
fabric-ca individual multicas should have unique DB names,FABC-346,21375,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,07/Oct/17 4:12 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,26/Oct/17 4:48 AM,v1.1.0,,,,,,v1.1.0,,,,,,0,,,,,,"When starting fabric-ca with the --cacount option, the DB config is inherited by each CA in the pool. Consequently they all end up writing to the same DB. This doesn't fit with the design. Each CA should have a unique DB name.",,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyiq7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Oct/17 5:18 AM;skarim;https://gerrit.hyperledger.org/r/#/c/14715/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-load-tester compilation fails due to change in Revoke API,FABC-347,23916,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,Ratnakar,Ratnakar,Ratnakar,11/Nov/17 2:10 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,14/Nov/17 2:21 AM,,,,,,,v1.1.1,,,,,,0,quality,,,,,"Unable to compile *fabric-ca-load-tester* tool on master branch  commit id: {color:#205081}_236ae62d862ec2f650ccf236418706f2fd8ca982_{color}
{panel}
go build -o fabric-ca-load-tester testClient.go main.go
{panel}
*compilation failure:*
{code:java}
# command-line-arguments
./testClient.go:268:25: multiple-value c.Identity.Revoke() in single-value context{code}
Included this as part of our custome Docker image to use in an automation test, where Docker build fails (with the same above error) on latest master branch
{code:java}
# command-line-arguments
./testClient.go:268:25: multiple-value c.Identity.Revoke() in single-value context
The command '/bin/sh -c git clone https://github.com/hyperledger/fabric-ca && cd fabric-ca && git checkout master && cd test/fabric-ca-load-tester/ && go build -o fabric-ca-load-tester main.go testClient.go' returned a non-zero code: 2{code}",,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzymyv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Ratnakar,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Nov/17 3:27 AM;Ratnakar;https://gerrit.hyperledger.org/r/#/c/15377/;;;",,,,,,,,,,,,,,,,,,,
Make docs not run as part of CI,FABC-348,20939,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,skarim,skarim,21/Sep/17 5:26 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,21/Mar/18 11:39 PM,v1.0.0,,,,,,v1.2.0,,,,,,0,,,,,,Make docs is not being run as part of CI. The CI does not error out if the docs are out of sync. ,,rameshthoomu,sambhavdutt,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzygzj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,sambhavdutt,skarim,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Mar/18 5:17 AM;skarim;[~rameshthoomu] Hey Ramesh, in our makefile as part of ci-test we run make docs. When I run 'make ci-tests' locally I see that it executes make doc. However, in Jenkins this does not seem to be happening. I see failures locally related to make docs, I would expect to see the same failures in Jenkins. Do you know why this might be happening?;;;","06/Mar/18 9:12 AM;sambhavdutt;Tried to execute the 
{code:java}
make ci-tests
{code}
in x86_ 64 platform for the fabric-ca, Observed the following errors,

{code:java}
21:05:54 ERROR: New readme files generated, commit changes before doing push
21:05:54 Makefile:114: recipe for target 'docs' failed
21:05:54 make: *** [docs] Error 1
21:05:54 Build step 'Execute shell' marked build as failure
{code}
;;;","12/Mar/18 11:04 PM;skarim;Since the docs are out of sync in master, that error is expected when running 'make ci-tests'. There is a CR out there that is going to get the docs up to date. https://gerrit.hyperledger.org/r/#/c/18935/;;;","21/Mar/18 11:39 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/19307/;;;",,,,,,,,,,,,,,,,
Store root and intermediate certs for TLS in proper directory,FABC-349,20834,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,15/Sep/17 3:03 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,20/Sep/17 4:50 AM,v1.0.0,,,,,,v1.1.0,,,,,,0,,,,,,"Currently, the root and intermediate certs that are used to sign TLS certificates are not stored properly in the tlscacerts and tlsintermediatecerts folders properly. ",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzygh3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Sep/17 4:50 AM;skarim;https://gerrit.hyperledger.org/r/#/c/13481/;;;",,,,,,,,,,,,,,,,,,,
BCCSP factories aren't initialized in fabric-ca-client,FABC-350,15371,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,smithbk,smithbk,16/Mar/17 5:46 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,06/Apr/17 9:29 AM,,,,,,,,,,,,,0,,,,,,"The following error message is printed for every fabric-ca-client command:

2017/03/15 15:56:24 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.

The fix is to call InitFactories with nil explicitly.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo5j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/17 9:29 AM;smithbk;This is fixed;;;",,,,,,,,,,,,,,,,,,,
Wrong HTTP status code reported in logs for invalid body of request,FABC-351,16064,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,rickr,rickr,28/Apr/17 2:28 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,01/Oct/17 3:25 AM,v1.0.0,,,,,,v1.1.0,,,,,,0,,,,,,"SDK POST:
http://localhost:7054/api/v1/revoke
body:
{""serial"":""04372551502DA6EFF9E9C2AF25F08DAF3CBD16035"",""aki"":""D8A5B3CAC1B821F6E4B487CEAF1FD239CDCFC310894150908B90F05E9179556A"",""reason"":1}

what sdk is getting back 
{""success"":false,""result"":null,""errors"":[{""code"":10001,""message"":""json: cannot unmarshal number into Go value of type string""}],""messages"":[]}

fabric-ca log:
2017/04/27 17:15:38 [DEBUG] Received request
POST /api/v1/revoke
Authorization: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUIzekNDQVlTZ0F3SUJBZ0lVTkdNTFJoZzduazVoU0lTWHVWRm1ZU2FOcnFRd0NnWUlLb1pJemowRUF3SXcKWURFTE1Ba0dBMVVFQmhNQ1ZWTXhFekFSQmdOVkJBZ1RDa05oYkdsbWIzSnVhV0V4RmpBVUJnTlZCQWNURFZOaApiaUJHY21GdVkybHpZMjh4RVRBUEJnTlZCQW9UQ0hCbFpYSlBjbWN4TVJFd0R3WURWUVFERXdod1pXVnlUM0puCk1UQWVGdzB4TnpBME1qY3hOekE1TURCYUZ3MHhPREF6TWpjd01UQTVNREJhTUJBeERqQU1CZ05WQkFNVEJXRmsKYldsdU1Ga3dFd1lIS29aSXpqMENBUVlJS29aSXpqMERBUWNEUWdBRUdyTnlvZE12VWpibGlSVWdzay8wc3NtQwpZa1RjK0N6VmxrQ2w3NTFOMGltUW96Tkoybnd6eHJuODVOTGhLcXd3akxOa1JzRTJ5L2tzVEtyTmR5b2hwcU5zCk1Hb3dEZ1lEVlIwUEFRSC9CQVFEQWdJRU1Bd0dBMVVkRXdFQi93UUNNQUF3SFFZRFZSME9CQllFRkphUGg2YXIKcXJmTHI5UlREZ0w2REVnTFpmRTlNQ3NHQTFVZEl3UWtNQ0tBSU5pbHM4ckJ1Q0gyNUxTSHpxOGYwam5OejhNUQppVUZRa0l1UThGNlJlVlZxTUFvR0NDcUdTTTQ5QkFNQ0Ewa0FNRVlDSVFDM2g0NjBJcTVycVNNc29KTmsySmxtClpTWENmRm5FQ04wUmErbnZBSkNSOEFJaEFQNy9yQ3ZyeGlnMkNsbjJkSUd2ZndpOEFzTmpHeHdTQXpxNnkzdGcKWG1DMAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==.MEQCIB44Ubfi976iaGQu087skhJwORzfSljULus7PLav8xhWAiAiHds2W7DceMqXthnMTszUstEg2hlDKR3YFmmo1pJp6Q==
{""serial"":""04372551502DA6EFF9E9C2AF25F08DAF3CBD16035"",""aki"":""D8A5B3CAC1B821F6E4B487CEAF1FD239CDCFC310894150908B90F05E9179556A"",""reason"":1}
2017/04/27 17:15:38 [DEBUG] Checking for revocation/expiration of certificate owned by 'admin'
2017/04/27 17:15:38 [DEBUG] DB: Get certificate by serial (34630b46183b9e4e61488497b9516661268daea4) and aki (d8a5b3cac1b821f6e4b487ceaf1fd239cdcfc310894150908b90f05e9179556a)
2017/04/27 17:15:38 [DEBUG] Successful authentication of 'admin'
2017/04/27 17:15:38 [DEBUG] Revoke request received
2017/04/27 17:15:38 [INFO] 10.0.2.2:39518 - ""POST /api/v1/revoke"" 200


fabric-ca level
commit d35648a9e79d55ca879c22b91a4ac4bf8077d70b
Merge: d9a1c61 c131944
Author: Christopher Ferris <chris.ferris@gmail.com>
Date: Thu Apr 27 15:23:40 2017 +0000




",,rickr,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-442,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3on:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rickr,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Apr/17 6:44 AM;smithbk;The reason must be a string.

                ""reason"": {
                  ""type"": [
                    ""string"",
                    ""null""
                  ],
                  ""description"": ""The reason for revocation.   \nSee https://godoc.org/golang.org/x/crypto/ocsp for valid values.   \nThe default value is 0 (ocsp.Unspecified).""
                }
;;;","02/May/17 12:04 AM;rickr;ok so I send reason as a string and it works. 
I went back a week or so and we were sending it as an integer and it worked fine. Then switched on that build so it was a String and it failed. 
 So this had to  be a change.
At any case sending it as a integer seems to work except the client gets back a 400 but on the faba-ca logs its a  200 which is still an issue.;;;","13/May/17 4:07 PM;smithbk;The problem turned out to be in CFSSL code, and there are actually multiple problems as I dove into it:

1) logging the wrong message

2) returning the wrong HTTP status code

3) doesn't allow using our own error codes

The bottom line is that CFSSL's error handling code is not extensible and just not very good.  So we're going to stop using CFSSL for error handling and fixing this will be part of the overall improvement for error handling in FAB-3581.   See that FAB for more info on the design.

 

 

 ;;;","13/May/17 5:13 PM;smithbk;See https://gerrit.hyperledger.org/r/#/c/9341/;;;","26/May/17 10:41 AM;smithbk;Since this only affected SDK writers really and thus is a low severity bug ... AND because the fix is more intrusive and introduces more risk compared to the gain for v1, this is being deferred until v1.1.  ;;;","20/Jul/17 2:29 AM;smithbk;This is fixed by https://gerrit.hyperledger.org/r/#/c/11571/ which is for https://jira.hyperledger.org/browse/FAB-3581 (and this one);;;","22/Jul/17 12:31 AM;smithbk;Since FAB-3581 is v1.1, so is this;;;",,,,,,,,,,,,,
Removing leading zeros from serial and aki in database lookup of certificate,FABC-352,15618,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,07/Apr/17 10:53 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,12/Apr/17 11:56 PM,v1.0.0,v1.0.0-alpha1,,,,,v1.0.0,,,,,,0,,,,,,"AKI and serial are stored in the database with no leading zeros. However, when using openSSL command line to get serial or AKI from a certificate there are times when these might contain a leading zero. 

Need to make lookup logic more robust to accept a leading zero or not when doing a look up against the certificate table using serial or AKI. ",,mastersingh24,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4gf:",,,,,,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Apr/17 7:42 PM;mastersingh24;[~skarim] - Make sure to use fabric-ca as the component and please make sure to fill in affects version and fixed version fields.  I took care of this already, but please make sure to do so in the future so we can track / target releases and fixes / features;;;",,,,,,,,,,,,,,,,,,,
fabric-ca sample is creating orderer and peer identities with wrong type,FABC-353,27669,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,luomin,smithbk,smithbk,13/Feb/18 11:19 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,15/Feb/18 3:58 AM,,,,,,,v1.1.1,,,,,,0,,,,,,"The fabric-samples/fabric-ca/scripts/setup-fabric.sh script needs two small changes so that orderers and peers are registered with the correct type.  They are currently defaulting to type 'client'.
Change
{code}
fabric-ca-client register -d --id.name $ORDERER_NAME --id.secret $ORDERER_PASS
{code}
to
{code}
fabric-ca-client register -d --id.name $ORDERER_NAME --id.secret $ORDERER_PASS --id.type orderer
{code}

and change
Change
{code}
fabric-ca-client register -d --id.name $PEER_NAME --id.secret $PEER_PASS
{code}
to
{code}
fabric-ca-client register -d --id.name $PEER_NAME --id.secret $PEER_PASS --id.type peer
{code}
",,luomin,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyxa7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,luomin,smithbk,,,,,,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Feb/18 1:43 PM;luomin;https://gerrit.hyperledger.org/r/#/c/17887/;;;",,,,,,,,,,,,,,,,,,,
back to register enroll unroll seem to fail - timing related.,FABC-354,15535,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,aambati,rickr,rickr,01/Apr/17 12:51 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/Apr/17 8:35 PM,,,,,,,v1.0.0,,,,,,0,,,,,,"The Java SDK makes some Fabric ca calls register enroll reenroll and revoke during it integration tests.  Most of the time these don't fail.  But every 10th run or so a failure 500 returns.  Putting in sleeps seems to have solved this.

There is no specific scenario by which I can say makes this happens. Best advise is to do stress testing of the api to try and reproduce.",,aambati,rennman,rickr,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp0v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,rennman,rickr,smithbk,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Apr/17 1:34 AM;smithbk;Anil, hopefully you'll be able to reproduce this with your stress testing;;;","01/Apr/17 2:37 AM;rennman;
[~aambati] Given the fact that a sleep provides a work-around for this, it may be a different issue.  However, I did want to make you aware of another intermittent fail situation regarding auth errors as described by Fab-2842. With this awareness, at a minimum you can filter out any auth failures due to certificate verification if it's not related to this defect (FAB-2955.);;;","19/Apr/17 4:14 AM;aambati;https://gerrit.hyperledger.org/r/7955;;;",,,,,,,,,,,,,,,,,
Fabric CA Server fails to start if bccsp is pkcs11,FABC-355,30622,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ping40,ping40,ping40,25/May/18 11:39 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,25/May/18 5:16 PM,,,,,,,,,,,,,0,,,,,,"when bccsp is pkcs11, fabric ca server fails to start, because the key store directory forget to change to absolute directory.

the error :


2018/05/25 10:16:17 [ERROR] Failed to store CA's Idemix secret key: open /gp/learn/ca-pkcs11/msp/keystore/IssuerSecretKey: no such file or directory in 

in  lib/server/issuercredential.go func (ic *caIdemixCredential) Store()",,aambati,ping40,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/May/18 11:38 AM;ping40;fabric-ca-server-config.yaml;https://jira.hyperledger.org/secure/attachment/15017/fabric-ca-server-config.yaml",,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzcgn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,ping40,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/May/18 1:12 PM;aambati;[~ping40]this is assigned to you, are you working on it? If so, pls change the status to ""inprogress"";;;","25/May/18 3:22 PM;ping40;[~aambati] , I am working on it, later, I will submit the patchset.;;;","25/May/18 5:03 PM;ping40;https://gerrit.hyperledger.org/r/#/c/22343/;;;",,,,,,,,,,,,,,,,,
fabric-ca bad merge causing CI failures,FABC-356,27511,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,08/Feb/18 4:55 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,09/Feb/18 12:24 AM,,,,,,,,,,,,,0,,,,,,"A new check for affiliation went which was inconsistent with the affiliations test.
Need to use 'force' to remove affiliation and sub-affiliations""

Since the test and code were merged simultaneously the CI integration caught the error.

The test will be updated to expect and to test the new restriction.
[Fix bad merge causing CI failure|https://gerrit.hyperledger.org/r/17637] 

",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzywhz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Incorrect error message when missing TLS cert files,FABC-357,16510,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,smithbk,smithbk,10/May/17 3:40 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/May/17 3:06 PM,v1.0.0-alpha1,,,,,,v1.0.0,,,,,,1,,,,,,"In fabric-ca/lib/tls/tls.go, see the following:

        if len(cfg.CertFiles) == 0 \{
                return nil, errors.New(""No CA certificate files provided"")
        }

The message should be ""No TLS certificate files were provided""

This error occurs when starting an intermediate CA as follows:

    fabric-ca-server start -b a:b -c int/config.yaml -u [https://a:b@localhost:7055|https://a:b@localhost:7055/]

This is because ""https"" is used but the client TLS cert file option wasn't specified and was not in the config file.  In this case and probably other places in the client, it would be good to also return a more user-friendly error message telling them which arg to specify.",,ChristopherFerris,dhwang,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxudj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,dhwang,smithbk,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/May/17 10:37 PM;dhwang;I think TLS configuration for MariaDB is somehow messed up by the CA configuration for intermediate CA.    My db configuration is the following:

 
{code:java}
db:
  type: mysql
  datasource: 'root:password@tcp(mariadb:3306)/fabricca?parseTime=true&tls=skip-verify'
  tls:
    enabled: true
    certfiles: /etc/hyperledger/fabric-ca-server-tls/server-cert.pem
    certfileslist: [/etc/hyperledger/fabric-ca-server-tls/server-cert.pem]
    ca_certfiles: /etc/hyperledger/fabric-ca-server-tls/ca-cert.pem
    client:
    certfile: /etc/hyperledger/fabric-ca-server-tls/client-cert.pem
keyfile: /etc/hyperledger/fabric-ca-server-tls/client-key.pem
{code}
---------------------------------------------------------------------------------------------

Test #1:  Without  either ""client:""   or ""ca:"" specified in my yaml file: I start int ca with:
fabric-ca-server start -c /etc/hyperledger/fabric-ca/int-ca.yaml -b admin:password --url [https://admin:password@root_ca_ip:7054|https://admin:password@root_ca_ip:7054/]

I got the following error:

2017/05/11 13:30:23 [INFO] TLS Enabled
2017/05/11 13:30:23 [DEBUG] CA Files:
2017/05/11 13:30:23 [DEBUG] Client Cert File:
2017/05/11 13:30:23 [DEBUG] Client Key File:
2017/05/11 13:30:23 [DEBUG] Client Cert or Key not provided, if server requires mutual TLS, the connection will fail: open : no such file or directory
Error: Failed to initialize CA: Failed to get client TLS config: No CA certificate files provided

----------------------------------------------------------------------------------------------------

Test # 2:  Adding just ""ca:"" and start int ca with the same command as #1
{code:java}
ca:
  certfile: certificate.pem
  keyfile: key.pem
{code}
I got the following error:  Notice the database name and the user in the url is incorrect in the DEBUG message.

2017/05/11 13:31:25 [DEBUG] Using MySQL database, connecting to database...
2017/05/11 13:31:25 [DEBUG] Database Name: etc
2017/05/11 13:31:25 [DEBUG] CA Files: /etc/hyperledger/fabric-ca-server-tls/server-cert.pem
2017/05/11 13:31:25 [DEBUG] Client Cert File: /etc/hyperledger/fabric-ca-server-tls/client-cert.pem
2017/05/11 13:31:25 [DEBUG] Client Key File: /etc/hyperledger/fabric-ca-server-tls/client-key.pem
2017/05/11 13:31:25 [DEBUG] Connection String: ///-ca/:mypass@tcp(mariadb:3306)/?parseTime=true&tls=skip-verify
2017/05/11 13:31:25 [ERROR] Failed to connect to MySQL database [error: Error 1045: Access denied for user '///-ca/'@'172.18.0.3' (using password: YES)]
Error: Failed to query 'INFORMATION_SCHEMA.SCHEMATA table: Error 1045: Access denied for user '///-ca/'@'172.18.0.3' (using password: YES);;;","27/May/17 3:05 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/9859/;;;",,,,,,,,,,,,,,,,,,
Version test fails when IS_RELEASE is true,FABC-358,27110,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,27/Jan/18 3:58 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/Jan/18 5:47 AM,,,,,,,v1.1.0-alpha,,,,,,0,,,,,,The version test fails when IS_RELEASE is true because it was not setting project version correctly.,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyuu7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Jan/18 4:07 AM;smithbk;https://gerrit.hyperledger.org/r/17253 [FAB-7932] Version test failure for release;;;",,,,,,,,,,,,,,,,,,,
fabric-ca init creates hidden file by writing emtpy filename for ca certificate,FABC-359,15587,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,rennman,rennman,06/Apr/17 5:43 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,22/Apr/17 12:02 AM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"When the fabric-ca init command is run, I end up with a hidden file in 
$ENROLLMENT_DIR/msp/cacerts/.pem

This is evidently taken from 
fabric-ca-server-config.yaml
ca.name

The default is to use the domain name of the local system by parsing the result of os.Hostname(). 

However, os.Hostname() is not guaranteed to return a domain name, so it can end up <nul>

",,aambati,JonathanLevi,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpaf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,JonathanLevi,rennman,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/17 6:49 AM;JonathanLevi;Why do we need two tickets for this? ( https://jira.hyperledger.org/browse/FAB-3061 )
That is, are we going to end up submitting two Gerrit CRs for these?;;;","19/Apr/17 12:34 AM;aambati;[~jonathan]Sorry I missed your comment. fab-3007 is to make sure server errors out if ca.name is empty and fab-3061 is to make sure --ca.name value is stored in the default config file that is generated. Yes, I have two change sets in gerrit.;;;","19/Apr/17 4:13 AM;aambati;https://gerrit.hyperledger.org/r/7739;;;",,,,,,,,,,,,,,,,,
COP server throws NPE on enrollment when starting w/o -ca and -ca-key options,FABC-360,14007,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,skarim,smithbk,smithbk,11/Jan/17 8:57 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,11/Mar/17 12:54 AM,,,,,,,v1.0.0,,,,,,1,MembershipServices,Security,Usability,,,"[EDITED BY JONATHAN:]

*Background/Context*
We have spent some time (Mon/Tue) trying to figure out why the COP server/executable throws NPE when an enrollment request is received, please see more details here https://jira.hyperledger.org/browse/FAB-1591

*Synopsis*
Apparently, we have learned that if/when the cop server was initially launched without having the ca_cert and the ca_key in the json config file.
, 
*How to Reproduce*
Build the latest cop from the master branch (v1), start it with the default (the 0.0.0.0:8888 binding, etc.) and try to make an enrollment request.

[Greg Haskins] wrote a simple script that does that, I [Jonathan Levi], could reproduce using the node test/unit/end-to-end.js.

*Known Workaround*
When initially starting the *cop* server, you currently have to use the use the *-ca* and *-ca-key* command line options - otherwise, the server throws NPE when it receives an enroll request.
",,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7tr:",,,,,,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Jan/17 9:42 PM;JonathanLevi;I have set this to a higher priority even though Keith provided us with a workaround last night on Slack. Indeed the *cop* executable stopped crashing on the first request, when we took the advice on Slack to call the below:

{{COP/bin/cop server start -address 0.0.0.0 -ca TD/ec.pem -ca-key TD/ec-key.pem -config TD/testconfig.json}}

TD being the testdata location;;;",,,,,,,,,,,,,,,,,,,
Value of attributes hf.IntermediateCA and hf.Revoker are ignored,FABC-361,17501,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,06/Jun/17 1:21 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,10/Jun/17 12:40 AM,v1.0.0,v1.0.0-alpha1,v1.0.0-alpha2,v1.0.0-beta,,,v1.0.0,v1.0.0-rc1,,,,,0,,,,,,"There are areas where decisions are made based on attributes of a registered identity. However, the current logic only checks to see if the identity has a specific attribute. There was no check being made as to the actual value of the attribute. This was allowing certain execution of code that should have been prevented if the attribute had a value of false. For example, I can start a root server and register an identity with ""hf.IntermediateCA=false"", however I am still able to register this identity as an intermediate CA.

*Reproduction steps:*
1. Start a root server: ./fabric-ca-server start -b a:b -d -c root/root.yaml
2. Delete the root db created and modify root.yaml to set ""hf.IntermediateCA = false""
3. Start the root server again
4. Start an intermediate server: ./fabric-ca-server start -b c:d -d -u http://a:b@localhost:7054 -c inter/inter.yaml -p 7055
5. Server will fail to start, go to inter.yaml and remove CN field and then run command in step 4 again. The intermediate CA will be able to enroll.

",,Clayton Sims,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3l3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Jun/17 12:56 AM;Clayton Sims;adding cr   https://gerrit.hyperledger.org/r/#/c/10177/;;;",,,,,,,,,,,,,,,,,,,
Server throws stack trace when enrolling user with sign endpoint disabled,FABC-362,14107,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,17/Jan/17 6:04 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,11/Mar/17 12:55 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Need to more gracefully handle error case where COP server was started with no certificate and key, and thus the CFSSL sign endpoint is not disabled. In the scenario, if an enroll is attempted the follow stack trace is seen on the server:

2017/01/16 15:33:51 [DEBUG] Received request for endpoint enroll
2017/01/16 15:33:51 http: panic serving 127.0.0.1:63301: runtime error: invalid memory address or nil pointer dereference
goroutine 36 [running]:
net/http.(*conn).serve.func1(0xc420691a80)
	/usr/local/go/src/net/http/server.go:1491 +0x12a
panic(0x4717fe0, 0xc4200140c0)
	/usr/local/go/src/runtime/panic.go:458 +0x243
github.com/hyperledger/fabric-cop/cli/server.(*signHandler).Handle(0xc42073d170, 0x4ab51a0, 0xc420244750, 0xc420734c30, 0xc42073e601, 0xc4202f8dc0)
	/Users/saadkarim/Development/src/github.com/hyperledger/fabric-cop/cli/server/enroll.go:76 +0x20d
github.com/hyperledger/fabric-cop/vendor/github.com/cloudflare/cfssl/api.HTTPHandler.ServeHTTP(0x4aacb20, 0xc42073d170, 0xc42073d180, 0x1, 0x1, 0x4ab51a0, 0xc420244750, 0xc420734c30)
	/Users/saadkarim/Development/src/github.com/hyperledger/fabric-cop/vendor/github.com/cloudflare/cfssl/api/api.go:85 +0x3e4
github.com/hyperledger/fabric-cop/vendor/github.com/cloudflare/cfssl/api.(*HTTPHandler).ServeHTTP(0xc4207319e0, 0x4ab51a0, 0xc420244750, 0xc420734c30)
	<autogenerated>:4 +0x8c
github.com/hyperledger/fabric-cop/cli/server.(*copAuthHandler).ServeHTTP(0xc42073e680, 0x4ab51a0, 0xc420244750, 0xc420734c30)
	/Users/saadkarim/Development/src/github.com/hyperledger/fabric-cop/cli/server/auth.go:82 +0x91
net/http.(*ServeMux).ServeHTTP(0x4aebe40, 0x4ab51a0, 0xc420244750, 0xc420734c30)
	/usr/local/go/src/net/http/server.go:2022 +0x7f
net/http.serverHandler.ServeHTTP(0xc420691880, 0x4ab51a0, 0xc420244750, 0xc420734c30)
	/usr/local/go/src/net/http/server.go:2202 +0x7d
net/http.(*conn).serve(0xc420691a80, 0x4ab5aa0, 0xc420241cc0)
	/usr/local/go/src/net/http/server.go:1579 +0x4b7
created by net/http.(*Server).Serve
	/usr/local/go/src/net/http/server.go:2293 +0x44d

Need to provide more meaningful error.",,skarim,,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7mv:",,,,,,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
FABRIC CA init not correctly initializing remote postgres,FABC-363,20193,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,keysjrw,keysjrw,15/Aug/17 8:59 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,28/Oct/17 6:38 PM,v1.1.0,,,,,,v1.1.0,,,,,,0,fabric-ca,,,,,"PostgreSQL always expects to connect to a database, it does not allow establishing a connection just to the server itself. This causes issues when you specify a database in the connection string that does not exist. Fabric-ca-server is capable of creating the database if it does not exist. However, Postgres will complain if you established a connection with a database that did not exist and then try to create a new database. It should be noted that if in the connection string has no database is specified, it uses the username for the database name. 

The solution to this is multiple attempts at establishing a connection. A default PostgresSQL installation comes with two default database that can be used to establish a connection - ""template1"" and ""postgres"". The retry logic would work as follows:

1. Connect to database specified in connection string
2. If 1 fails, connect to ""postgres"" database
3. If 2 fails, connect to ""template1"" database
4. If 1-3 fail, throw an error indicating database initialization failed and that database needs to be created manually. The server will continue to start but will try to reinitialize the database on the next request the server receives. 

*Original Description:*
FABRIC Ca on 1 server and postgres on another. No docker. init does not create the database or tables or insert rows. No errors from init (or start). I've tried as root and as me. I've rebuilt the ca server many times. A set of representative logs included.",Ubuntu 16.04. IBM BM VMs. Fabric ca cloned form github a week ago.,keysjrw,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Aug/17 8:58 PM;keysjrw;fabric-ca-init.txt;https://jira.hyperledger.org/secure/attachment/11886/fabric-ca-init.txt",,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyd6v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,keysjrw,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Aug/17 6:18 PM;keysjrw;Experienced the same issue with a local postgres. Identified that it works when using user postgress with a password. Also works remotely with user postgres. I assigned full access to a custom username in postgres, but it would not work. Either I failed to properly assign rights to this custom user or something is hard-coded to user postgres. I could not identify which. Init, start, register, and enroll now work using 2 CA VMs with a third VM running postgres for both with username postgres and a password. If it can be shown that a custom username works then this issue should be closed. Else it should be noted why user postgres is required or modified to allow custom user names in postgres.;;;","23/Oct/17 7:48 AM;skarim;https://gerrit.hyperledger.org/r/#/c/14763/;;;",,,,,,,,,,,,,,,,,,
revoked user still can enroll,FABC-364,16087,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aietcn,aietcn,aietcn,28/Apr/17 8:00 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,18/May/17 8:03 PM,,,,,,,,,,,,,0,Security,,,,,"given:
    * user admin with hf.Revoker role
    * user test registered

when admin revoked user test:

{code}
fabric-ca-client revoke --revoke.name test --revoke.reason 'unspecified'
{code}

then test still can enroll successfully, which is not as expected.","latest commit:
    * fabric-ca-server #commit-c131944
    * fabric-ca-client #commit-d35648a

installed by:

{code}
go get -u github.com/hyperledger/fabric-ca/cmd/fabric-ca-client
go get -u github.com/hyperledger/fabric-ca/cmd/fabric-ca-server
{code}",aietcn,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxrn3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aietcn,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Apr/17 8:49 PM;aietcn;User's state is set to -1 while revoking, but the revoked state is not checked while in login process.;;;","28/Apr/17 8:54 PM;aietcn;fixed in https://gerrit.hyperledger.org/r/#/c/8723/;;;","18/May/17 5:03 PM;aietcn;[~smithbk] - I noticed that in the latest tag v1.0.0-alpha2 this still hasn't been fixed, so I rebased on v1.0.0-alpha2. Now the Jobbuilder has verified the patch. 

Should I add more reviewers? Who should I append to the reviewer list then?

Also, In the fvt test scripts `scripts/fvt/revoke_test.sh` I find that only the cert revocation action was tested, but the identity revocation is not tested. Maybe someone else can help add relevant tests to the script file.;;;",,,,,,,,,,,,,,,,,
Channel reconfig to add a new MSP but MSP unknown during instantiate-chaincode,FABC-365,20690,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,davidkhala,davidkhala,08/Sep/17 7:44 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/Oct/17 4:59 PM,v1.0.1,,,,,,,,,,,,0,fabric-ca,,,,,"create channel with org1,org2
join-channel for all peers under org1, org2
channel update: add new MSP with id AMMSP for org: orgAM
join-channel for peer: peer0AM under orgAM
install-chaincode on peer0AM
instantiate using admin identity on peer0AM
then we can get


{code:java}
error: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: Failed to deserialize creator identity, err MSP AMMSP is unknown
    at /home/david/Documents/delphi-fabric/node_modules/grpc/src/node/src/client.js:434:17
[2017-09-08 18:39:59.433] [ERROR] instantiate-chaincode - instantiate was bad for [0] { Error: Failed to deserialize creator identity, err MSP AMMSP is unknown
    at /home/david/Documents/delphi-fabric/node_modules/grpc/src/node/src/client.js:434:17 code: 2, metadata: Metadata { _internal_repr: {} } }
(node:22267) UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejection id: 2): Error: Failed to deserialize creator identity, err MSP AMMSP is unknown
{code}
","
https://github.com/davidkhala/delphi-fabric

./docker.sh to restart containers
node app/testChannel.js to create-channel and join-channel for org1,org2
./testNewPeer.sh to create new org, create new peer, update channel and do the rest",davidkhala,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyfqf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,davidkhala,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Oct/17 4:58 PM;davidkhala;Solved: 
In my previous setting, property 'anchor peer' is not set in the temp crypto-config.yaml for generating the new MSP, So I have to set CORE_PEER_GOSSIP_ORGLEADER=true for the new container for the new organization.;;;",,,,,,,,,,,,,,,,,,,
CA name is not persisted correctly,FABC-366,15642,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,smithbk,smithbk,10/Apr/17 10:29 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,23/Apr/17 4:01 AM,,,,,,,v1.0.0,,,,,,0,,,,,,"The following should persist the CA name to the fabric-ca-server-config.yaml but does not.  The default CA name (which is the domain name) is used.
{code}
fabric-ca-server init -b admin:adminpw --ca.name MYCA
{code}",,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpjr:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/17 6:49 AM;JonathanLevi;Why do we need two tickets for this? https://jira.hyperledger.org/browse/FAB-3007
That is, are we going to end up submitting two Gerrit CRs for these?;;;","20/Apr/17 5:57 AM;smithbk;This is a different problem from FAB-3007, so yes, different CRs;;;",,,,,,,,,,,,,,,,,,
fabric-ca CRL with revoke command does not include revoked cert,FABC-367,25757,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,rennman,rennman,15/Dec/17 6:00 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,20/Jan/18 6:42 AM,,,,,,,v1.1.1,,,,,,0,,,,,,"Presumably, one of the purposes of having a --gencrl flag on the revoke cmd is to get a cRL that includes the newly-revoked certificate. However, because of a timing issue, the CRL that is generated by the revoke cmd with the --gencrl flag does not always include the cert being revoked. In particular on the s390 build machines, this is nearly always the case. It is because the 'revokedbefore' time that is passed in to generate the CRL is just slightly behind the actual revoke time, and misses the newly-revoked cert.

",,aambati,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-7207,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyqzb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,rennman,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Jan/18 9:03 AM;aambati;https://gerrit.hyperledger.org/r/c/16759/;;;",,,,,,,,,,,,,,,,,,,
Various entries in generated fabric-ca-server-config.yaml don't point to real files,FABC-368,19480,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,vdods,vdods,26/Jul/17 5:48 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,29/Nov/17 11:58 PM,,,,,,,v1.1.1,,,,,,0,,,,,,"Run `fabric-ca-server init -b admin:adminpw` and it will create several files within the FABRIC_CA_HOME directory, and a corresponding fabric-ca-server-config.yaml file, but several of the entries in that config file point to non-existent files, including (but not limited to):

ca.keyfile

ca.chainfile

tls.keyfile

 

The generated config file should point those entries to the actual files (e.g. ca.keyfile would point to msp/keystore/XYZ_sk, or whatever the actual filename is).",,smithbk,vdods,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy9n3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,vdods,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Nov/17 1:08 AM;smithbk;https://gerrit.hyperledger.org/r/15373 [FAB-5462] Remove non-existent files from yaml;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-server panic when statically linking against pthread lib,FABC-369,15496,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,smithbk,rennman,rennman,29/Mar/17 11:12 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,26/Oct/17 5:39 AM,v1.0.0-alpha2,,,,,,v1.0.0-alpha2,,,,,,0,,,,,,"While attempting TLS-protected connections to a postgres DB, it was discovered that the fabric-ca-server is subject to panic as a consequence of a C system call to get the current DB user, user.Current() from the golang os package -- more specifically exploiting embedded c code in the user package via getpwuid_r().

An analysis shows that the code is victim to a bug in glibc, and is exposed when the app is statically linked against the pthread lib. An in-depth discussion can be found here:
https://tschottdorf.github.io/golang-static-linking-bug

The simplest solution is just to build the docker execs without the -static flag. In docker-env.mk:
#DOCKER_GO_LDFLAGS += -linkmode external -extldflags '-static -lpthread'
DOCKER_GO_LDFLAGS += -linkmode external -extldflags '-lpthread'

I have verified this solution in my environment. By making this change and re-building both the exec and docker images, the problem is resolved. However, I don't have enough information to understand the genesis of this flag, and although I'm sure it merely propagated from the original fabric source tree, it warrants feedback from someone who understands the ramifications of such a base change, and whether it should be generally applied in other projects.
",,greg.haskins,JonathanLevi,mastersingh24,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/17 11:15 PM;rennman;debug.txt;https://jira.hyperledger.org/secure/attachment/10632/debug.txt","29/Mar/17 11:15 PM;rennman;pg_hba.conf;https://jira.hyperledger.org/secure/attachment/10631/pg_hba.conf","29/Mar/17 11:15 PM;rennman;postgresql.conf;https://jira.hyperledger.org/secure/attachment/10629/postgresql.conf","29/Mar/17 11:15 PM;rennman;runFabricCaFvt.yaml;https://jira.hyperledger.org/secure/attachment/10630/runFabricCaFvt.yaml",,,,,,,,,,,,,,,,,,,,,,,"1|hzxnwv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,greg.haskins,JonathanLevi,mastersingh24,rennman,smithbk,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/17 11:18 PM;rennman;Note that I acknowledge that there may be other solutions; I'm not lobbying for any fix in particular, just registering my observations about the most expedient.;;;","03/May/17 8:59 PM;smithbk;From reading https://tschottdorf.github.io/golang-static-linking-bug, I didn't see any other solution.  Did I miss it?  In particular, they said the underlying problem in glibc was unlikely to ever be fixed and should not use static linking.;;;","03/May/17 11:46 PM;rennman;I don't know if there are any *existing* solutions, I'm just guessing there may be other *potential* solutions.  I had a brief chat with Jonathan around the time I opened this, and he did not agree with using dynamic linking, so ... ? I'm not sure where that leaves us.;;;","05/May/17 12:17 AM;smithbk;From reading https://tschottdorf.github.io/golang-static-linking-bug, I only see two solutions:
1) musl libc which would be risky given that it is at version 1.0.0.   See http://www.musl-libc.org/manual.html
2) dynamic linking

See this section in particular at the end of the article

{code}
Summing up a comment by Carlos O’Donell, the bug is likely to live forever and hard to fix; while you can link statically against glibc, it’s really nothing you should ever find yourself doing. At least not if you’re using threads.
Conclusion

Linking statically against glibc has proven to be an insane idea, but it’s surprising that this was apparently news for everyone up to (but not including) the glibc bug tracker.

We figured out that we can get a less obviously ludicrous static build by substituting glibc for musl-libc, but that needs careful benchmarking and testing (in particular, we instantly had issues with the DNS resolver).

At the end of the day, we decided that there were only diminishing returns to be had by linking a completely static binary. What really matters to us is not having non-standard dependencies - having glibc available is a bit of a drag when deploying on minimal systems (think containers) but is otherwise standard. So, at least for the time being, we’ll distributed an image that only links against glibc dynamically.

In a recent post about the cost and complexity of cgo we warned that cgo comes with a more intricate build process and the occasional need to take debugging beyond the realms Go. This bug sure goes out of its way to prove these points.
{code};;;","06/May/17 7:46 PM;mastersingh24;Does this only happen with Postgres? The static binaries are also a problem when doing PKCS11 according to some work [~vpaprots@ca.ibm.com] has done as well.

[~greg.haskins] preference has been to continue publishing static binaries as the default and then require people to build dynamically linked binaries / images themselves for a variety of reasons but mainly to ensure we can decouple the binaries from the underlying baseos used in our images.  I tend to agree that the default should continue to build with the -static flag (minimally to stay consistent with the core fabric images).

The in between solution would be to add support for an environment variable in the Makefile to allow building non-static binaries but may want to hold off on that for now and just document what is needed for Postgres TLS support

;;;","07/May/17 11:31 AM;greg.haskins;A few points of clarity on my position.  

1) -static is currently a critical component of our two-phased docker build because we build the binary in one container and inject the result into another (minimal) container.  Doing this with -dynamic _may_ work today because of a design decision we made, but it's not always guaranteed to work because doing so makes assumptions about the minimal runtime environment that may or may not be true in the future.  For instance, if someone were to re-add rocksdb, only -static would include rocksdb in the ELF without carefully coordinating the runtime container.  If we are facing an insurmountable issue because of -static, we will need to revisit this design, but we will need to do so in the context of the full stack impact w.r.t. two-phasing the build.

2) It's not that I think people should build -dynamic binaries themselves.  Merely, I think docker containers are a poor fit for the PKCS11/HSM conversation.  Since I think they are a poor fit, I didn't want to see -static turned off for that reason alone (due to point (1)).  What I was suggesting is that a better fit for HSM is native packaging (RPM/DEB/BREW), which incidentally is also a better fit for -dynamic.  In that model, I can, for example, foresee an RPM spec file that pulls in libtool, turns on pkcs11 support, and links dynamically in a manner that is not just compatible with PKCS11, it's how it was precisely designed to work. ;;;","07/May/17 11:42 AM;greg.haskins;I should also add, my preference here would be to run the entire container chain on ""FROM alpine"", which would imply musl and thus not glibc, thereby eliminating the problems noted.  However, the challenge there is that we also need to support the ppc64le/s390x architectures.  Therefore, the current implementation uses ubuntu/deb and the default glibc, apparent warts and all.  Alternatives to finding a multi-arch Alpine could include linking against the musl-dev packages available on those platforms, dropping two-phased build, or just coordinating the baseos with all needs going forward (note that it's consumed in multiple projects at this point, so it needs to be a super-set or made more granular).;;;","09/May/17 12:40 AM;smithbk;Greg, do you know that musl is stable?  I see that it is only at version 1.0.0.
Is there no way to dynamically link only libc with go, but continue to statically link everything else?
I see the -static-libgo option to statically link the go packages.  Assuming this is the only granularity of control over linking that we get with go, then what about using -static-libgo and then your last option for non-go dependencies (""coordinating the baseos will all needs going forward)?  Or as Gari said, just add a build option.;;;","25/May/17 10:02 PM;smithbk;Unless I hear otherwise, for v1 I'm going to pursue the Makefile option which Gari suggested, and then document how to build for Postgres with TLS support.   Pls speak up if you disagree.;;;","25/May/17 10:05 PM;greg.haskins;Hi Keith, That's probably fine. I can review the CR once it is complete.;;;","26/May/17 1:04 AM;smithbk;See http://gerrit.hyperledger.org/r/9805;;;","02/Sep/17 3:21 AM;rennman;Firstly, the recommended fix to ""set the FABRIC_CA_DYNAMIC_LINK environment variable"" isn't working. This is because the hyperledger/fabric-baseos image is missing some libraries.

Secondly, although this is definitely related to the postgres driver, it is not exclusively a problem with TLS, in which case the doc _could_ be updated to reflect this. The affected code comes from the pq driver in 
 ./vendor/github.com/lib/pq/conn.go, which calls user.Current(), which ultimately calls

lookupUnixUid(syscall.Getuid()) -->

  return syscall.Errno(C.mygetpwuid_r(C.int(uid), &pwd, (*C.char)(buf.ptr), C.size_t(buf.size), &result))

which is the call that precedes the panic.

There are two places where user.Current() is called in ./vendor/github.com/lib/pq/conn.go:
 1) attempting to set the auth credentials for the postgress db in handlePgpass()

2) setting up TLS in setupSSLClientCertificates()

 

To recreate the problem:

1) unset FABRIC_CA_DYNAMIC_LINK

2) make docker-clean

3) make docker

4) Delete the database:
{code:java}
    /usr/bin/dropdb ""fabric_ca"" -U postgres -h localhost -w{code}
5) Start the server:
{code:java}
docker run -e PGUSER=postgres \
   -ti hyperledger/fabric-ca:x86_64-1.0.1-snapshot-5a5b061 \
  /usr/local/bin/fabric-ca-server start b admin:adminpw -d \
  --db.datasource ""dbname=fabric_ca host=172.17.0.1 port=5432"" \
  --db.type postgres
...
fatal error: unexpected signal during runtime execution
[signal SIGSEGV: segmentation violation code=0x1 addr=0xe5 pc=0x7f2b54b883f8]

runtime stack:
runtime.throw(0xbd3feb, 0x2a)
/opt/go/src/runtime/panic.go:566 +0x95
runtime.sigpanic()
/opt/go/src/runtime/sigpanic_unix.go:12 +0x2cc

goroutine 1 [syscall, locked to thread]:
runtime.cgocall(0x9c5920, 0xc4203b89c0, 0x0)
/opt/go/src/runtime/cgocall.go:131 +0x110 fp=0xc4203b8970 sp=0xc4203b8930
os/user._Cfunc_mygetpwuid_r(0x0, 0xc42039b020, 0x7f2b480008c0, 0x400, 0xc42018e350, 0x0)
??:0 +0x4d fp=0xc4203b89c0 sp=0xc4203b8970
os/user.lookupUnixUid.func1(0x42eb52)
/opt/go/src/os/user/lookup_unix.go:103 +0x1f7 fp=0xc4203b8a50 sp=0xc4203b89c0

{code}
 

After implementing the solution:

export FABRIC_CA_DYNAMIC_LINK=true

make docker
{code:java}
docker run -e PGUSER=postgres -ti hyperledger/fabric-ca:x86_64-1.0.1-snapshot-5a5b061 /usr/local/bin/fabric-ca-server start --db.datasource ""dbname=fabric_ca host=172.17.0.1 port=5432"" --db.type postgres -b admin:adminpw -d
/usr/local/bin/fabric-ca-server: error while loading shared libraries: libltdl.so.7: cannot open shared object file: No such file or directory{code}
 ;;;","02/Sep/17 4:39 AM;rennman;In the meantime, after looking at the conn.co code, it appears that there may be a much simpler work-around for now:

#1 do not rely on the ~/.pgpass mechanism. Either 
    a )always set the user:password in the connection string, or
    b )set *both* the PGUSER and PGPASSWORD environment variables
 #2) alway set the PGSSLCERT and PGSSLKEY environment variables, even if they are not used, e.g.
{code:java}
    PGSSLCERT=dummy
     PGSSLKEY=dummy{code}
will work, as long are they are *not null*. The code in setupSSLClientCertificates() in ./vendor/github.com/lib/pq/conn.go does not call user.Current() if these are set.
Of course if TLS is _actually_ being used, then the files pointed to by PGSSLCERT and PGSSLKEY *must* exist. 

 

This solution does not require the exec to be re-built.;;;",,,,,,,
Files containing colons in filename block Windows users from checking out repo,FABC-370,14355,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ryjones,ryjones,ryjones,26/Jan/17 3:14 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,07/Apr/17 1:57 AM,,,,,,,,,,,,,0,,,,,,"[Original report|https://github.com/hyperledger/fabric-ca/issues/1]

bq. hova0 commented 5 days ago
bq. When attempting to clone or fetch the current repository at commit 8894989
bq. the following files fail to download due to "":"" being in the filename which is illegal on Windows based filesystems:
bq. 
bq. vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA.crt
bq. vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA_2.crt

Repro on Windows:
{{git clone http://gerrit.hyperledger.org/r/fabric-ca}}",Any version of Windows,lehors,ryjones,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxj3z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,lehors,ryjones,smithbk,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Jan/17 5:04 AM;lehors;As far as I can tell this it not actually a problem with the files or Windows but with the Windows git command.
Running the same command with cygwin git works just fine:

With Cygwin git:
{code:java}
$ git clone http://gerrit.hyperledger.org/r/fabric-ca
Cloning into 'fabric-ca'...
remote: Counting objects: 2852, done
remote: Finding sources: 100% (5/5)
remote: Total 3852 (delta 0), reused 3849 (delta 0)
Receiving objects: 100% (3852/3852), 18.92 MiB | 322.00 KiB/s, done.
Resolving deltas: 100% (830/830), done.
Checking connectivity... done.
Checking out files: 100% (3987/3987), done.

$ ls fabric-ca/vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA*
'fabric-ca/vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA.crt'
'fabric-ca/vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA_2.crt'

$ which git
/usr/bin/git

$ git --version
git version 2.8.3
{code}

With Windows git:
{code:java}
C:\tmp>git clone http://gerrit.hyperledger.org/r/fabric-ca
Cloning into 'fabric-ca'...
remote: Counting objects: 2852, done
remote: Finding sources: 100% (5/5)
remote: Total 3852 (delta 0), reused 3849 (delta 0)
Receiving objects: 100% (3852/3852), 18.92 MiB | 1.65 MiB/s, done.
Resolving deltas: 100% (830/830), done.
error: unable to create file vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA.crt: Invalid argument
error: unable to create file vendor/github.com/cloudflare/cfssl/vendor/github.com/cloudflare/cfssl_trust/ca-bundle/SwissSignCA(RSAIKMay6199918:00:58)_2000-11-26_SHA1WithRSA_2.crt: Invalid argument
Checking out files: 100% (3987/3987), done.
fatal: unable to checkout working tree
warning: Clone succeeded, but checkout failed.
You can inspect what was checked out with 'git status'
and retry the checkout with 'git checkout -f HEAD'

C:\tmp>where git
C:\Program Files (x86)\Git\cmd\git.exe

C:\tmp>git version
git version 2.11.0.windows.3
{code}
;;;","06/Apr/17 10:27 AM;smithbk;Hi Ry, if this is really an issue that needs to be fixed, then it would require opening a bug against github.com/cloudflare/cfssl since the file names with colons are there.
;;;","11/Apr/17 10:01 AM;smithbk;See http://gerrit.hyperledger.org/r/7913;;;",,,,,,,,,,,,,,,,,
fabric-ca-server should require user:pass@ in URL scheme for -u option,FABC-371,15708,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,rennman,rennman,13/Apr/17 1:47 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,26/May/17 10:52 AM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"I think this is really two issues, depending on whether or not I mis-understand how it's supposed to be configured.

At any rate the certificate that is created on behalf of a delegate/subordinate registration authority is created with the Basic Constrains extension flagged 'critical' and set to CA:FALSE. It should be CA:TRUE.

Secondly, I could not figure out how to populate the data for the CSR (the potential 2nd issue). It seems that it comes from an instantiation of the ServerConfig.Client.ClientConfig object, but I don't know where this data is coming from. In order to create the certificate, I coded the CSR data manually in getCACertAndKey(). The documentation should make this explicit.",,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxptr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Apr/17 3:12 AM;rennman;Changing the focus of this defect. Ultimately, I think still requires both a code change and a doc change. The bottom-line is that I should have specified user:pass as part of the URL scheme.

1 - 
The instructions for starting a registration authority (child CA) in the ""Fabric CA User’s Guide"" should also specify that the 'user' and 'passwd' are part of the URL for the -u option. Here is the current text:

""The fabric-ca-server init command generates a self-signed CA certificate unless the -u <parent-fabric-ca-server-URL> option is specified. If the -u is specified, the server’s CA certificate is signed by the parent fabric-ca-server. The fabric-ca-server init command also generates a default configuration file named fabric-ca-server-config.yaml in the server’s home directory.""


2 -
This URL scheme should be enforced. Currently the command proceeds w/o it, but is doomed to fail with an 'Authentication error';;;","17/May/17 8:57 AM;smithbk;http://gerrit.hyperledger.org/r/9429;;;",,,,,,,,,,,,,,,,,,
Swagger doc has JSON error,FABC-372,17235,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,30/May/17 3:56 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,30/May/17 9:59 PM,,,,,,,v1.0.0,,,,,,0,,,,,,"The swagger doc has a JSON error in it and so can't be pasted in the swagger editor at http://swagger.io/swagger-editor.  To check for JSON errors:

# cd fabric-ca/swagger
# jq . swagger-fabric-ca.json > /dev/null


",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxxen:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/May/17 3:58 PM;smithbk;http://gerrit.hyperledger.org/r/9913;;;",,,,,,,,,,,,,,,,,,,
Fix fabric-ca enroll command with no csr file arg,FABC-373,14420,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,smithbk,smithbk,smithbk,29/Jan/17 3:47 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,08/Mar/17 12:24 AM,,,,,,,,,,,,,0,,,,,,"The enroll command returns the following error ...
{code}
# fabric-ca client enroll -config client-config.json admin adminpw https://localhost:7054
open -port: no such file or directory
{code}

This is a very confusing error and users will be lost as to why we are trying to open a file named ""-port"".
This is because there is a bug in how the enroll command checks to see if there is an optional argument
when it uses ""len(args)"" because it does not take into account optional args.
",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjg7:",,,,,,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jan/17 3:55 AM;smithbk;See http://gerrit.hyperledger.org/r/4973 ;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-client -M option is ignored,FABC-374,18264,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid: Environment Issue,skarim,smithbk,smithbk,17/Jun/17 7:19 AM,28/Jul/19 12:03 AM,28/Oct/23 2:21 AM,28/Jul/19 12:03 AM,v1.0.0,v1.0.0-alpha1,v1.0.0-alpha2,,,,v1.0.0,,,,,,0,,,,,,"The -M option is ignored for both the following commands.  The MSP directory is stored in the default home directory instead.

# fabric-ca-client enroll -M <dir> -u http://admin:adminpw@localhost:7054
# fabric-ca-client getcacert -M <dir> -u http://localhost:7054",,mastersingh24,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy4lj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Jun/17 6:43 PM;mastersingh24;[~smithbk] Are you sure about this? I just ran this and it seems to work for me

 

 
{noformat}
Garis-MBP:fabric-ca gsingh$ ./bin/fabric-ca-client enroll -u http://admin:adminpwd@localhost:7054 -M /tmp/mymsp
2017/06/20 05:41:01 [INFO] User provided config file: /Users/gsingh/.fabric-ca-client/fabric-ca-client-config.yaml
2017/06/20 05:41:01 [INFO] generating key: &{A:ecdsa S:256}
2017/06/20 05:41:01 [INFO] encoded CSR
2017/06/20 05:41:01 [INFO] Stored client certificate at /tmp/mymsp/signcerts/cert.pem
2017/06/20 05:41:01 [INFO] Stored CA certificate chain at /tmp/mymsp/cacerts/localhost-7054.pem
Garis-MBP:fabric-ca gsingh$ ls -l /tmp/mymsp
total 0
drwxr-xr-x  3 gsingh  wheel  102 Jun 20 05:40 cacerts
drwx------  4 gsingh  wheel  136 Jun 20 05:41 keystore
drwxr-xr-x  3 gsingh  wheel  102 Jun 20 05:40 signcerts
Garis-MBP:fabric-ca gsingh$ ls -l ~/.fabric-ca-client/
total 16
-rwxr-xr-x  1 gsingh  staff  6042 Jun 20 05:41 fabric-ca-client-config.yaml

Garis-MBP:fabric-ca gsingh$ ./bin/fabric-ca-client getcacert -M /tmp/mymsp2 -u http://localhost:7054 
2017/06/20 05:37:23 [INFO] User provided config file: /Users/gsingh/.fabric-ca-client/fabric-ca-client-config.yaml
2017/06/20 05:37:23 [INFO] Configuration file location: /Users/gsingh/.fabric-ca-client/fabric-ca-client-config.yaml
2017/06/20 05:37:23 [INFO] Stored CA certificate chain at /tmp/mymsp2/cacerts/localhost-7054.pem
Garis-MBP:fabric-ca gsingh$ ls -l ~/.fabric-ca-client/
total 16
-rwxr-xr-x  1 gsingh  staff  6042 Jun 20 05:35 fabric-ca-client-config.yaml
Garis-MBP:fabric-ca gsingh$ ls -l /tmp/mymsp2
total 0
drwxr-xr-x  3 gsingh  wheel  102 Jun 20 05:37 cacerts
drwx------  2 gsingh  wheel   68 Jun 20 05:37 keystore
drwxr-xr-x  2 gsingh  wheel   68 Jun 20 05:37 signcerts
Garis-MBP:fabric-ca gsingh$ 
{noformat};;;","20/Jun/17 10:34 PM;skarim;Yeah, I also verified this and was not able to reproduce the issue. I talked to Keith about this. I will mark this item as done. ;;;",,,,,,,,,,,,,,,,,,
fabric-ca-client --id.attrs attributes parsing wrong,FABC-375,17195,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,aietcn,aietcn,27/May/17 5:56 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,02/Jun/17 9:24 AM,v1.0.0,v1.0.0-alpha2,,,,,v1.0.0,,,,,,0,,,,,,"after patching the commits of issue #FAB-3971 when specifying the attributes like the following:
{code:java}
fabric-ca-client register --id.name org1admin --id.type client --id.affiliation org1 --id.secret admin --id.attrs ""hf.Registrar.Roles=peer,user hf.Revoker=true"" -M org1boot --caname Org1CA{code}
we get some wired parsing result (check the database, table users):
{code:java}
org1admin|admin|client|org1|[{""name"":""hf.Registrar.Roles"",""value"":""peer""},{""name"":""user hf.Revoker"",""value"":""true""}]|0|0{code}
 ",,aietcn,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,FABC-308,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxxaf:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,aietcn,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/May/17 4:46 AM;skarim;https://gerrit.hyperledger.org/r/#/c/9943/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca server and client directs all output to stderr instead of stdout,FABC-376,13936,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Won't Do,smithbk,jjjjibm,jjjjibm,06/Jan/17 4:25 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:39 PM,,,,,,,,,,,,,0,,,,,,"Whether I start the cop server from a shell script or manually, all the server output is directed to stderr, even messages that are not errors. 

Sample output:
ibmadmin@jcwNodeSDK:/tmp$ cd $COP
ibmadmin@jcwNodeSDK:~/work/src/github.com/hyperledger/fabric-cop$ bin/*cop server _parameters_ >cop.out*
2017/01/05 14:07:01 [ERROR] Group already registered
2017/01/05 14:07:01 [ERROR] Group already registered
2017/01/05 14:07:01 [ERROR] Group already registered
2017/01/05 14:07:01 [ERROR] Group already registered
2017/01/05 14:07:01 [ERROR] Group already registered
2017/01/05 14:07:01 [ERROR] Group already registered
2017/01/05 14:07:01 [ERROR] Group already registered
2017/01/05 14:07:01 [ERROR] User is already registered
2017/01/05 14:07:01 [ERROR] User is already registered
2017/01/05 14:07:01 [ERROR] User is already registered
2017/01/05 14:07:01 [ERROR] User is already registered
2017/01/05 14:07:01 [ERROR] User is already registered
2017/01/05 14:07:01 [ERROR] User is already registered
2017/01/05 14:07:01 [INFO] Initializing signer
2017/01/05 14:07:01 [WARNING] couldn't initialize ocsp signer: open : no such file or directory
2017/01/05 14:07:01 [INFO] endpoint '/api/v1/cfssl/info' is enabled
2017/01/05 14:07:01 [INFO] endpoint '/api/v1/cfssl/gencrl' is enabled
2017/01/05 14:07:01 [INFO] endpoint '/api/v1/cfssl/enroll' is enabled
2017/01/05 14:07:01 [INFO] endpoint '/api/v1/cfssl/newcert' is enabled
2017/01/05 14:07:01 [INFO] bundler API ready
2017/01/05 14:07:01 [INFO] endpoint '/api/v1/cfssl/bundle' is enabled
2017/01/05 14:07:01 [INFO] setting up key / CSR generator
2017/01/05 14:07:01 [INFO] endpoint '/api/v1/cfssl/newkey' is enabled
2017/01/05 14:07:01 [INFO] endpoint '/api/v1/cfssl/init_ca' is enabled
2017/01/05 14:07:01 [INFO] endpoint '/api/v1/cfssl//' is enabled
2017/01/05 14:07:01 [WARNING] endpoint 'authsign' is disabled: {""code"":5200,""message"":""Invalid or unknown policy""}
2017/01/05 14:07:01 [WARNING] endpoint 'ocspsign' is disabled: signer not initialized
2017/01/05 14:07:01 [INFO] endpoint '/api/v1/cfssl/sign' is enabled
2017/01/05 14:07:01 [INFO] endpoint '/api/v1/cfssl/scan' is enabled
2017/01/05 14:07:01 [INFO] endpoint '/api/v1/cfssl/scaninfo' is enabled
2017/01/05 14:07:01 [INFO] endpoint '/api/v1/cfssl/certinfo' is enabled
2017/01/05 14:07:01 [INFO] endpoint '/api/v1/cfssl/revoke' is enabled
2017/01/05 14:07:01 [INFO] endpoint '/api/v1/cfssl/register' is enabled
2017/01/05 14:07:01 [INFO] endpoint '/api/v1/cfssl/reenroll' is enabled
2017/01/05 14:07:01 [INFO] Handler set up complete.
2017/01/05 14:07:01 [INFO] Now listening on :8888
^C

Notice that even though I was directing stdout this way :  >cop.out
all output still appeared on my screen.   I captured the output this way:
cop server start _parameters_ 2>cop.out

It's OK to direct actual error messages to stderr, but regular messages should go to stdout. 

*How to recreate:
*clone fabric-cop, then git log which gives thsi commit:
commit 
Author: Keith Smith <bksmith@us.ibm.com>
Date:   Mon Nov 28 13:32:55 2016 -0500

    Add support for certificate revocation

git checkout -b sprint7a ffb4fc22b84775769c755c5c3db53f6911ba4835

clone fabric-sdk-node then git log which gives this commit:
commit 662135eedefd43e0d249362b991cf04e2b423783
Author: Yuki Kondo <yuki.kondo@hal.hitachi.com>
Date:   Thu Dec 22 10:00:55 2016 -0800

    Fix docker-compose.yml for Test

git checkout -b sprint7a 662135eedefd43e0d249362b991cf04e2b423783

clone fabric, then  git log --author=YACOVM --after ""2016-12-01""  which gives this commit:
commit d26b8b4aa8e382555f3e6b518a3ef9d5bbfc8091
Author: YACOVM <YACOVM@il.ibm.com>
Date:   Mon Dec 19 18:06:06 2016 +0200

    [FAB-1449] Add getPkiID to the commReceivedMsg

git checkout -b sprint7a d26b8b4aa8e382555f3e6b518a3ef9d5bbfc8091

Build the COP server as directed in the readme, and start it as described above. 



","Ubuntu server running on a VM. 

Commit levels: 
",aambati,jjjjibm,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxgif:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,aambati,jjjjibm,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/May/17 12:26 AM;aambati;cfssl logger uses default go's default logger which outputs to stderr by default. So, in the main.go of cmd/fabric-ca-client and cmd/fabric-ca-server, we can call log.SetOutput(os.Stdout) to make default logger to output to stdout instead. But with this change all log messages are output to stdout except for bccsp log messages.;;;","04/May/17 11:53 PM;smithbk;See http://gerrit.hyperledger.org/r/8959;;;","05/May/17 12:36 AM;jjjjibm;https://gerrit.hyperledger.org/r/#/c/8959/;;;","06/May/17 7:32 PM;mastersingh24;sorry I missed this earlier - we should mark this as won't fix as it seems to be industry standard to log to stderr and this what what core fabric does as well - https://github.com/hyperledger/fabric/blob/master/common/flogging/logging.go#L58;;;",,,,,,,,,,,,,,,,
query filters not work when get certificates from fabric-ca,FABC-377,30682,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,zhaochy,zhaochy,28/May/18 5:46 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,07/Jun/18 5:21 AM,,,,,,,v1.2.0,,,,,,0,,,,,,"from the swagger doc, fabric-ca supports query filters when the client do a ""GET"" request for certificates.

However, it seems the filters does not work, fabric-ca still returned all the certificates that this identity can view.

Here is a debug log for fabric-ca, please see the last two query, one with 'id' and another with 'aki', both query should return only one particular certificate.
",,skarim,zhaochy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Jun/18 1:50 PM;zhaochy;debug.log;https://jira.hyperledger.org/secure/attachment/15036/debug.log","01/Jun/18 1:53 PM;zhaochy;fabric-ca-certificate-service-tests.js;https://jira.hyperledger.org/secure/attachment/15037/fabric-ca-certificate-service-tests.js","01/Jun/18 1:50 PM;zhaochy;fabric-ca-server.db;https://jira.hyperledger.org/secure/attachment/15035/fabric-ca-server.db",,,,,,,,,,,,,,,FABC-587,,,,,,,,,"1|hzzd1z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,zhaochy,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Jun/18 1:45 AM;skarim;[~zhaochy] From your testing, are you using SQLite database with the Fabric CA server? If so, can you post the db file here?;;;","01/Jun/18 1:52 PM;zhaochy;yes, I tested with the default sqlite db, I uploaded a new debug.log and db file. If I query by the admin identity, it seems ok, if I query by some other identity, it will response all the certificates that can be viewed. You may put this test script to folder
{code:java}
fabric-sdk-node/test/integration/
{code}
and try it
;;;","01/Jun/18 10:19 PM;skarim;https://gerrit.hyperledger.org/r/22675;;;","01/Jun/18 10:19 PM;skarim;[~zhaochy] Please try again with the above fix;;;",,,,,,,,,,,,,,,,
Some log messages including format verbs are not properly printed,FABC-378,27349,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,nnao,nnao,nnao,02/Feb/18 6:36 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,15/Feb/18 3:09 AM,v1.1.0-alpha,,,,,,v1.1.0,,,,,,0,quality,,,,,"Some log messages including format verbs are printed by log.Debug, not by log.Debugf.
In lib/attr/attribute.go
{code:java}
log.Debug(""Checking if registrar can register attribute: %s"", requestedAttrName)
{code}
Hence the log messages have garbage “%s” as below:
{code:java}
Checking if registrar can register attribute: %sadmin
{code}",,nnao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyvpj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,nnao,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Feb/18 9:31 AM;nnao;https://gerrit.hyperledger.org/r/#/c/17461/;;;",,,,,,,,,,,,,,,,,,,
Certificate revocation fails to update user state in DB,FABC-379,14329,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,25/Jan/17 4:54 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,18/Apr/17 11:35 PM,v1.0.0,,,,,,v1.0.0,,,,,,0,MembershipServices,Security,,,,"1) Start fabric-ca
# ./scripts/fabric-ca_setup.sh -I -S -X

2) Enroll admin
# ./scripts/enroll.sh
     2017/01/24 14:31:45 [DEBUG] Getting user admin from the database
     2017/01/24 14:31:45 [DEBUG] DB: Login user admin with max enrollments of 1 and state of 0
     2017/01/24 14:31:45 [DEBUG] Successfully incremented state for user admin to 1
     2017/01/24 14:31:45 [DEBUG] DB: user admin successfully logged in
     2017/01/24 14:31:45 [DEBUG] User/Pass was correct
     2017/01/24 14:31:45 [DEBUG] Received request for endpoint enroll
     2017/01/24 14:31:45 [INFO] signed certificate with serial number 144790095028100641934921797894228565652597329902
     2017/01/24 14:31:45 [DEBUG] DB: Insert Certificate
     2017/01/24 14:31:45 [DEBUG] saved certificate with serial number 144790095028100641934921797894228565652597329902
     2017/01/24 14:31:45 [INFO] 127.0.0.1:51542 - ""POST /api/v1/cfssl/enroll"" 200
2017/01/24 14:31:45 [INFO] enrollment information was successfully stored in /home/ibmadmin/fabric-ca/key.pem and /home/ibmadmin/fabric-ca/cert.pem

3) Database contents of user and cert after enrollment (user status: '1' and cert status good, revoke date not set)
# sqlite3 ./testdata/fabric_ca.db ""SELECT * FROM users WHERE (id='admin');""
admin|adminpw|client|bank_a|[{""name"":""hf.Registrar.Roles"",""value"":""client,user,peer,validator,auditor""},{""name"":""hf.Registrar.DelegateRoles"",""value"":""client,user,validator,auditor""},{""name"":""hf.Revoker"",""value"":""true""}]|1|1

sqlite3 ./testdata/fabric_ca.db ""SELECT * FROM certificates WHERE (id='admin');""
admin|1.44790095028101e+47|54a784b1639c88b38b3111e80057233520940422||good|0|2017-11-28 08:00:00+00:00|0001-01-01 00:00:00+00:00|-----BEGIN CERTIFICATE-----

4) Revoke admin cert:
# ./bin/fabric-ca client revoke '127.0.0.1:8888' admin
     2017/01/24 14:33:43 [DEBUG] Revoke request received
     2017/01/24 14:33:43 [DEBUG] getUserAttrValue user=admin, attr=hf.Revoker
     2017/01/24 14:33:43 [DEBUG] Getting user admin from the database
     2017/01/24 14:33:43 [DEBUG] getUserAttrValue user=admin, name=hf.Revoker, value=true
     2017/01/24 14:33:43 [DEBUG] Revoke request: {RevocationRequest:{Name:admin Serial: AKI: Reason:0}}
     2017/01/24 14:33:43 [DEBUG] Getting user admin from the database
     2017/01/24 14:33:43 [DEBUG] Getting user admin information from the database
     2017/01/24 14:33:43 [DEBUG] userInfo: {admin adminpw client bank_a [{hf.Registrar.Roles client,user,peer,validator,auditor} {hf.Registrar.DelegateRoles client,user,validator,auditor} {hf.Revoker true}] 1 1}
     2017/01/24 14:33:43 [DEBUG] DB: Update User (admin) in database
     2017/01/24 14:33:43 [DEBUG] Revoke was successful: %+v{{admin   0}}
     2017/01/24 14:33:43 [INFO] 127.0.0.1:51546 - ""POST /api/v1/cfssl/revoke"" 200

5) Database contents of user and cert after revoke (user status: '1' and cert status good, revoke date not set):
sqlite3 ./testdata/fabric_ca.db ""SELECT * FROM users WHERE (id='admin');""
admin|adminpw|client|bank_a|[{""name"":""hf.Registrar.Roles"",""value"":""client,user,peer,validator,auditor""},{""name"":""hf.Registrar.DelegateRoles"",""value"":""client,user,validator,auditor""},{""name"":""hf.Revoker"",""value"":""true""}]|1|1

sqlite3 ./testdata/fabric_ca.db ""SELECT * FROM certificates WHERE (id='admin');""
admin|1.44790095028101e+47|54a784b1639c88b38b3111e80057233520940422||good|0|2017-11-28 08:00:00+00:00|0001-01-01 00:00:00+00:00|-----BEGIN CERTIFICATE-----
",,mastersingh24,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxizj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Apr/17 11:57 PM;mastersingh24;[~skarim] - I'm pretty sure this is not longer the case but can you please verify and close (or fix)?;;;","18/Apr/17 11:34 PM;skarim;I can no longer reproduce this issue. I'm marking this as done. ;;;",,,,,,,,,,,,,,,,,,
msp keystore directory is not relative to the config file,FABC-380,16100,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,smithbk,smithbk,smithbk,29/Apr/17 3:46 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,29/Apr/17 8:33 PM,,,,,,,v1.0.0,,,,,,0,MembershipServices,,,,,"The client keystore is put in the wrong location, which has the side effect that it breaks the reenroll command.  The problem is that it was not being made absolute relative to the config file.

To reproduce the problem:
1) fabric-ca-server start -b a:b
Switch to another terminal
2) fabric-ca-client enroll http://a:b@localhost:7054
3) fabric-ca-client reenroll
The final command fails saying that it is not enrolled.  This is because it can't find the msp and keystore directory.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxrp3:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Apr/17 3:53 AM;smithbk;http://gerrit.hyperledger.org/r/8735;;;",,,,,,,,,,,,,,,,,,,
fabric-ca inconsistent treatment of case for affiliation,FABC-381,27980,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,rennman,rennman,24/Feb/18 9:49 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,01/Mar/18 2:56 AM,,,,,,,v1.1.1,,,,,,0,must-fix,,,,,"Apparently, affiliations are not treated consistently w/r/t case. if I code:
{code:java}
         affiliations:
            EU: []
            FR: []
            IT: []
            GE: []
{code}
then any attempt to enroll with an affiliations in UC will fail, since:
 * when we create the table, we translate all affiliations to LC
 * the register request comes in with the affiliation in UC
 * when we search the DB, the search is case-sensitive, and we fail.",,aambati,denyeart,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-160,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyyqn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,denyeart,rennman,smithbk,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Feb/18 8:33 PM;denyeart;[~smithbk] [~aambati] Do you think this is must-fix for 1.1 release?;;;","26/Feb/18 10:55 PM;smithbk;Moved to 1.2;;;","26/Feb/18 11:12 PM;denyeart;[~smithbk] [~aambati] If it is deferred, then won't a fix in 1.2 be even more difficult?  That is, you'd have a mix of cases already in the DB.  Isn't the 1.1 fix simply a matter of lowercasing (or uppercasing) values as they are persisted, to ensure they are all the same?

I've put back into 1.1 until this question is answered.;;;","27/Feb/18 12:21 AM;aambati;[~denyeart] I think we should try to get it in 1.1. Fix is simple, i am working on it.;;;","27/Feb/18 4:26 AM;aambati;https://gerrit.hyperledger.org/r/c/18437/;;;","28/Feb/18 1:49 AM;Clayton Sims;Keith Smith
Patch Set 4: Code-Review-1

There are more changes than I expected, and thinking more about this, I don't like that everything would be case sensitive (user name, type, attribute names) except affiliation. For consistency, everything should be case sensitive. 

For 1.1, we should 1) document that all non-leaf affiliations in the config file are made lower-case by golang yaml, and 2) not generate any affiliations in the default config file as this has just confused users, and now that we have APIs for dynamically adding affiliations, this is the recommended way anyway.

 ;;;","28/Feb/18 1:49 AM;Clayton Sims;refactoring a bit.  anil to add small change plus doc.   ;;;",,,,,,,,,,,,,
Need a way to configure key lengths/algorithm for CSR,FABC-382,23865,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,rennman,rennman,09/Nov/17 5:41 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,14/Dec/17 12:21 AM,,,,,,,v1.1.0,v1.1.1,,,,,0,,,,,,"The users guide explicitly indicates a choice between three well-known ECDSA curves:
   prime256v1
   secp384r1
  secp521r1
by configuring
{code:java}
key:
   algo: ecdsa
   size: 256|384|521{code}

as part of the ca.csr section. However, this apparently has no effect. RSA is not mentioned, but it is a reasonable assumption that it is supported, given the 'algo:' keyword, but that apparently isn't supported either.

The presumed alternative (not described in the document) is to configure in BSSCP (inferring the 'security' parm):
{code:java}
bccsp:
   default: SW
   sw:
      hash: SHA2
      security: 256|384|521{code}
 but this has no effect as well, and there is no obvious way to code the required algorithm.


Lastly, there is an indication in the bccsp code in getBCCSPKeyOpts() that RSA actually *is* supported, as well as multiple key sizes, though secp521r1 is still apparently a TBD:
{code:java}
case ""rsa"":
   switch kr.Size() {
      case 2048: ...
      case 3072: ...
      case 4096: ...
      default:
      // Need to add a way to specify arbitrary RSA key size to bccsp
      return nil, errors.Errorf(""Invalid RSA key size: %d"", kr.Size())
}
case ""ecdsa"":
   switch kr.Size() {
      case 256: ...
      case 384: ...
      case 521: ...
   // Need to add curve P521 to bccsp
   // return &bccsp.ECDSAP512KeyGenOpts{Temporary: false}, nil
     return nil, errors.New(""Unsupported ECDSA key size: 521"")
{code}",,aambati,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-520,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzymmn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,rennman,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Dec/17 11:06 PM;aambati;https://gerrit.hyperledger.org/r/c/16085/;;;","16/Dec/17 8:22 AM;rennman;[Change16241-Unstage key variation test|http://example.com];;;",,,,,,,,,,,,,,,,,,
User state should only be incremented after all checks are performed,FABC-383,20670,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,07/Sep/17 11:45 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,20/Sep/17 4:50 AM,v1.0.0,,,,,,v1.1.0,,,,,,0,,,,,,"Currently, the user state gets updated if the user provides the correct username and password, this happens when the basic authorization is performed. However, there are subsequent enrollment checks that are performed after the username and password have been validated. If one of these enrollment checks fail the enrollment of the user will not succeed but the state would have been updated. Need to increment state only after all the appropriate checks have succeeded. ",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyfmn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Sep/17 11:16 PM;skarim;https://gerrit.hyperledger.org/r/#/c/13293/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca empty certfiles for mysql connection SIGSEGV,FABC-384,16378,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,06/May/17 1:58 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,01/Jun/17 3:47 AM,v1.0.0-alpha1,,,,,,v1.0.0,,,,,,0,,,,,,"If the db.tls.certfiles setting is emtpy, we segfault:


{code:java}
     2017/05/05 16:56:21 [DEBUG] Connection String: root:mysql@tcp(localhost:3306)/?parseTime=true&tls=custom
     panic: runtime error: invalid memory address or nil pointer dereference
     [signal SIGSEGV: segmentation violation code=0x1 addr=0x68 pc=0x5504ef]
     
     goroutine 1 [running]:
     panic(0xadd160, 0xc4200140d0)
     	/opt/go/src/runtime/panic.go:500 +0x1a1
     github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql.parseDSNParams(0xc4203a9380, 0xc4202eb3e0, 0x19, 0xc420091050, 0x0)
     	/opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql/dsn.go:492 +0x4ff
     github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql.ParseDSN(0xc4202eb3c0, 0x39, 0x5202f4, 0x51d5b5, 0x1)
     	/opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql/dsn.go:315 +0x5dc
     github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql.MySQLDriver.Open(0xc4202eb3c0, 0x39, 0x0, 0x28, 0x4, 0xbc5513)
     	/opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql/driver.go:56 +0xb9
     github.com/hyperledger/fabric-ca/vendor/github.com/go-sql-driver/mysql.(*MySQLDriver).Open(0x10b70a8, 0xc4202eb3c0, 0x39, 0xc42013f630, 0x41391e, 0xc4203c4450, 0x30)
     	<autogenerated>:6 +0x60
     database/sql.(*DB).conn(0xc420113970, 0x1, 0xc420113970, 0xc4203c4450, 0xc4203c4420)
     	/opt/go/src/database/sql/sql.go:824 +0x24e
     database/sql.(*DB).Ping(0xc420113970, 0x5, 0xc4202eb3c0)
     	/opt/go/src/database/sql/sql.go:503 +0x34
     github.com/hyperledger/fabric-ca/lib/dbutil.NewUserRegistryMySQL(0xc42014e820, 0x42, 0xc420160988, 0x5, 0x1, 0x0, 0x0)
     	/opt/gopath/src/github.com/hyperledger/fabric-ca/lib/dbutil/dbutil.go:227 +0x39a
     github.com/hyperledger/fabric-ca/lib.(*CA).initDB(0xc42000c4c8, 0x7ffefb647500, 0x0)

{code}
",,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxtnr:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,rennman,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/May/17 2:09 AM;rennman;Just to clarify, this can happen if
-the parm is null
-the file doesn't exist
-the file does not have read permission
-the file is not a well-formed certificate;;;","30/May/17 11:27 PM;smithbk;https://gerrit.hyperledger.org/r/#/c/9907/;;;",,,,,,,,,,,,,,,,,,
Case sensitivity should be consistent across multiple backend DBs,FABC-385,15288,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,10/Mar/17 6:23 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,29/Mar/17 10:49 PM,,,,,,,,,,,,,0,,,,,,"I noticed during testing that different databases exhibit different behaviors regarding case-sensitivity.

Notably, the values that populate the USERS 'name' field is case-sensitive in postgres, but case-insensitive in mysql. Case sensitive makes the most sense in this case.

However, tables names *are* case-sensitive in mysql. I could live with this, but this feels weird. Case insensitive makes more sense here.

The lager issue is that the rules governing the data in any of the DBs should be consistent.",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnpz:",,,,,,Sprint 15 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
fabric-ca-client enroll command should recognize URL in config file and env variable,FABC-386,26361,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,smithbk,smithbk,04/Jan/18 10:53 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,17/Jan/18 3:31 AM,,,,,,,v1.0.6,v1.1.0-alpha,,,,,0,,,,,,"Rather than using the ""-u"" option of the *fabric-ca-client enroll* command, it should also recognize the FABRIC_CA_CLIENT_URL env variable and the URL setting in the fabric-ca-client-config.yaml file; however, it currently recognizes neither of these.

The fix is simple.  In fabric-ca/cmd/fabric-ca-client/enroll.go, change

{code}
			_, _, err := util.GetUser(c.myViper)
			if err != nil {
				return err
			}

			err = c.configInit()
			if err != nil {
				return err
			}
{code}

to

{code}
			err := c.configInit()
			if err != nil {
				return err
			}

			_, _, err = util.GetUser(c.myViper)
			if err != nil {
				return err
			}
{code}

By calling configInit first, it will now recognize the config file and env variable.
But we also need a test case for this.",,aambati,smithbk,vdods,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyscv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,smithbk,vdods,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Jan/18 2:15 AM;aambati;[~smithbk] enroll command requires user id and password as part of the URL. But the URL stored in the config file will not have the userid and password. so, either -u option or FABRIC_CA_CLIENT_URL env property must be specified for enroll command to work. ;;;","05/Jan/18 3:25 AM;smithbk;You are correct that we do not store it in the config file, but the URL in the config file may have the user/pass if they manually put it there.;;;","05/Jan/18 3:11 PM;vdods;Is this slated for v1.0.x (I hope)?;;;","06/Jan/18 12:13 AM;aambati;[~vdods] I was not thinking of backporting it 1.0.x. But if you need it in 1.0.x, i will.;;;","06/Jan/18 2:56 AM;vdods;I would most appreciate that, AnilKumar, thank you!;;;","09/Jan/18 4:25 AM;smithbk;This is already merged in alpha but this will remain open until it is backported to v1.;;;","17/Jan/18 2:18 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/16585/ (master)
https://gerrit.hyperledger.org/r/#/c/16749/ (release)  - this is the backport to master;;;",,,,,,,,,,,,,
Disable Idemix function in 1.2,FABC-387,30840,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,02/Jun/18 4:04 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,16/Jun/18 4:42 AM,,,,,,,v1.2.0,,,,,,0,,,,,,"It has been decided by the commiters that Idemix function be disabled until SDKs support Idemix

Following need to be done:
1. Remove idemix routes from the Fabric CA server
2. Remove idemix routes from swagger doc
3. Remove idemix related sections from the user doc
4. Remove idemix related options from server config and fabric-ca-server command line
5. Comment idemix related debug/info messages that are printed during server initialization",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzdtb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Jun/18 4:27 AM;aambati;https://gerrit.hyperledger.org/r/c/22687/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-server has an intractable requirement for the case of affiliation strings,FABC-388,29737,,Bug,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,vdods,vdods,27/Apr/18 3:37 AM,20/Oct/20 6:44 AM,28/Oct/23 2:21 AM,,v1.1.0,v1.4.6,,,,,,,,fabric-ca-server,,,0,ipm,,,,,"At the bottom of [http://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#registering-a-new-identity] it says the following:

 

Note that affiliations are case sensitive except for the non-leaf affiliations that are specified in the server configuration file, which are always stored in lower case. For example, if the affiliations section of the server configuration file looks like this:
affiliations:
  BU1:
    Department1:
    - Team1
  BU2:
  - Department2
  - Department3
??BU1??, ??Department1??, ??BU2?? are stored in lower case. This is because Fabric CA uses Viper to read configuration. Viper treats map keys as case insensitive and always returns lowercase value. To register an identity with ??Team1?? affiliation, ??bu1.department1.Team1?? would need to be specified to the ??–id.affiliation?? flag as shown below:

<cut>

 

Say I want to register an identity with an affiliation string of ""BU1.Department2"".  In order to follow the ridiculous case-insensitive-then-sensitive requirements of the affiliation string, I have to know which affiliation IDs are leaf IDs.  In this case, Department2 is a leaf, so I would then have to lower-case BU1, but leave Department2 as it is.  In the above example, Department1 is NOT a leaf ID, so it would have to be lowercased.

I have some calls to fabric-ca-client register that has to supply the correct affiliation string, and this absurd requirement forces my automation to do the hard work of

1) having its own model of the affiliation tree

2) parsing a given affiliation string before registration and lowercasing based on the affiliation tree

The strange case requirement also violates the principle of least surprise (fabric-ca-server-config.yaml happily accepts an affiliation tree that doesn't conform to the rules, but when I go to register, I'm suddenly subject to hidden, nontrivial rules), and worse yet, the documentation attempts to justify this based on a particular implementation choice (Viper) that is of zero concern to the user, and is an example of the Leaky Abstraction anti-pattern.

 

Possible different ways to resolve this flaw:

1) Just have everything be case sensitive like all reasonable programming constructs are anyway.

2) If the Viper-based case restrictions are to be kept, then enforce those case restrictions at the fabric-ca-server-config.yaml, so that the error occurs as soon as possible (i.e. during configuration, as opposed to minutes, hours, or days later in production)",,denyeart,joaquimpedrooliveira,jyellick,mastersingh24,silveraid,skarim,vdods,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00n2e:8zs001i",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,joaquimpedrooliveira,jyellick,mastersingh24,silveraid,skarim,vdods,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Apr/18 7:37 PM;mastersingh24;[~vdods] - Forgetting about how/why things work today, why would we want affiliations to be case sensitive in the first place?  I personally think it is a disaster to treat ""Affiliation1"" and being different from ""affiliation1"".

Would you be fine with everything being case-insensitive?;;;","11/May/18 4:54 AM;vdods;Yeah, all fields being case-insensitive would be fine.;;;","23/May/18 6:13 AM;kchristidis;[~mastersingh24]: On track for 1.2, or defer?;;;","18/Jun/18 6:25 PM;mastersingh24;Sorry [~kchristidis] - deferring to 1.3 makes sense;;;","11/Sep/18 12:58 PM;denyeart;[~smithbk] [~skarim] [~mastersingh24] What do you want to do with this one? Defer again?;;;","14/Sep/18 3:12 AM;skarim;If we can't to get to it in 1.3, I am okay with deferring to 1.4.;;;","28/Nov/18 12:31 AM;denyeart;[~skarim] How is this looking for v1.4?;;;","25/Sep/19 1:17 AM;jyellick;[~elli-androulaki] is this in plan for v2.0?;;;","28/Jul/20 2:04 AM;silveraid;Just run into the same, was surprised that this bug have not been fixed yet ...;;;",,,,,,,,,,,
"fabric-ca-client revoke should allow combination of SN,AKI, as well as EID",FABC-389,15414,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,rennman,rennman,21/Mar/17 8:01 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,23/Apr/17 3:05 AM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"The revoke command requires (SN && AKI) || EID

It should allow (SN && AKI) && EID
",,aambati,ChristopherFerris,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnwn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,ChristopherFerris,rennman,smithbk,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Mar/17 11:45 PM;smithbk;If they provide both and the cert with the matching SN && AKI doesn't belong to the EID, we would need to return an error.
I'm trying to see the value in doing this.
I guess it could provide an extra layer of sanity checking before revoking a cert, but not sure how valuable it is.
Allen, is this what you were thinking?
;;;","21/Mar/17 11:56 PM;rennman;1 - For one, yes, it's just a sanity check. Granted, the chances of having two certs with the same SN, AKI and owner are small, minuscule perhaps (and if compliant with the PKI specifications, impossible), but it would give me as a user, a higher degree of confidence that I had targeted the correct user.

2 - In reviewing previous operations it is more clearly apparent on inspection, just which user was intended to be targeted.

3 - Then there's just the argument from the purist perspective. The input is logically consistent and it is confusing when it's rejected. ;;;","22/Mar/17 12:17 AM;smithbk;Agreed ... thanks;;;","07/Apr/17 1:20 AM;aambati;[~rennman] is this still happening? Looking at the code it seems to look for aki and serial , if provided then it will try to revoke the cert associated with them. If aki/serial is not provided, then it will look for identity name, if there it will try to revoke the identity. If neither name or aki/serial is provided, an error is returned.;;;","14/Apr/17 8:44 AM;ChristopherFerris;please link gerrit CR thanks;;;","19/Apr/17 1:43 AM;rennman;[https://gerrit.hyperledger.org/r/#/c/7815/];;;",,,,,,,,,,,,,,
Delete cop.db after running COP unit tests,FABC-390,14104,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,17/Jan/17 4:07 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,14/Apr/17 8:26 AM,,,,,,,v1.0.0,,,,,,0,,,,,,"If you try to run the unit-tests twice in a row, the 2nd run will fail because the test cases require that you start with a clean DB.  The fix is to remove the cop.db after running the unit tests.  The unit tests should themselves do this.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxi73:",,,,,,Sprint 9 - Membership Services,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Identity password is printed in clear when server is run with debug,FABC-391,19542,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,28/Jul/17 7:28 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,31/Jul/17 5:52 PM,v1.0.1,,,,,,v1.0.1,,,,,,0,,,,,,"Identity password is printed in clear when ca config is printed to the log. For example in the ""Init CA with home"" debug statement",,aambati,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy9xz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,JonathanLevi,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Jul/17 7:47 AM;aambati;https://gerrit.hyperledger.org/r/#/c/11995/;;;","28/Jul/17 10:36 AM;JonathanLevi;Thanks for this. Can we outline here the proposed solution?;;;","28/Jul/17 11:49 AM;aambati;[~JonathanLevi]  The root cause of the problem is that String method was defined for CAConfigIdentity as pointer receiver instead of non-pointer receiver. Because _CAConfig.Register.Identities_ is an array of CAConfigIdentity, when CAConfig is logged, String method of CAConfigIdentity is not being used. After I changed String method to non-pointer receiver, it started using String method when CAConfig is logged. String method of CAConfigIdentity will mask the field that is tagged 'secret';;;",,,,,,,,,,,,,,,,,
Setting home directory using config flag does not create database in specified location,FABC-392,15069,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,skarim,skarim,28/Feb/17 12:47 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,14/Mar/17 10:34 PM,,,,,,,,,,,,,0,membershipservices,,,,,"Starting the server using ""fabric-ca-server start -c location/of/config/test.yaml"" will create the config file in location/of/config but the database will not get created here. Database should also be created in the same location that the configuration file gets created. ",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm4f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
swagger doc is missing the ecert field,FABC-393,21296,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,05/Oct/17 12:04 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,05/Oct/17 5:58 PM,,,,,,,v1.1.0,,,,,,0,,,,,,"The swagger doc needs to be updated to include the ""ecert"" field indicating that
an attribute is to be included in an ecert by default.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyicn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
"devenv Vagrant on Windows - Fabric-ca: ""Error: The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority""",FABC-394,15194,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,2020Nishi,mrkiouak,mrkiouak,04/Mar/17 6:02 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,26/May/17 1:25 AM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"From windows git bash:
{code:bash}
git clone http://gerrit.hyperledger.org/r/fabric
cd fabric/devenv
vagrant up
vagrant ssh
cd ..
git clone http://gerrit.hyperledger.org/r/fabric-ca
git clone http://gerrit.hyperledger.org/r/fabric-chaintool
cd fabric
make clean
make docker
cd ../fabric-ca
make clean
make docker
cd ../fabric-chaintool/examples/example02/src/app
chaintool build
chaintool package
cd ../client/nodejs
npm install (with cding to tmp, creating a folder with appropriate permissions, and soft symlinking to this dir if issues with path length)
node client.js -p ../../app/build/org.hyperledger.chaincode.example02-0.1-SNAPSHOT.car
{code:bash}

{code:bash}
info: Returning a new winston logger with default configurations
info: [Chain.js]: Constructed Chain instance: name - chaintool-demo, securityEnabled: true, TCert download batch size: 10, network mode: true
info: [Peer.js]: Peer.const - url: grpc://localhost:7051 options  grpc.ssl_target_name_override=tlsca, grpc.default_authority=tlsca
info: [FabricCAClientImpl.js]: Successfully constructed Fabric CA service client: endpoint - {""protocol"":""http"",""hostname"":""localhost"",""port"":7054}
info: [crypto_ecdsa_aes]: This class requires a CryptoKeyStore to save keys, using the store: {""opts"":{""path"":""/home/vagrant/.hfc-key-store""}}
info: [Client.js]: Successfully loaded user ""admin"" from local key value store
[Function]
info: [packager/Car.js]: Packaging CAR file from ../../app/build/org.hyperledger.chaincode.example02-0.1-SNAPSHOT.car
error: [Peer.js]: GRPC client got an error response from the peer. Error: The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority
    at /chaintool-node_modules/nest/node_modules/grpc/src/node/src/client.js:434:17
error: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority
    at Object.callback (/chaintool-node_modules/nest/node_modules/fabric-client/lib/Peer.js:191:13)
    at /chaintool-node_modules/nest/node_modules/grpc/src/node/src/client.js:437:14

{code}

Additionally, in some instances after image/container creation, ca-cert.pem in test_ca_1 container does not match vagrant or windows file system md5sum.

Even when hash does match, above error occurs.","Windows 10 64 Bit
Vagrant + VirtualBox
fabric/devenv",bmos299,mrkiouak,Nishi,smithbk,YingShi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnw7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,mrkiouak,Nishi,smithbk,YingShi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Mar/17 6:30 AM;bmos299;I'll work on reproducing in the lab. ;;;","10/Mar/17 11:48 AM;YingShi;Run into the same issue in Win7 node SDK, no matter peers are in vagrant VM or Ubuntu OS.

error[39m: [Peer.js]: GRPC client got an error response from the peer ""grpc://localhost:7051"". Error: The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority;;;","18/Apr/17 1:22 AM;Nishi;On following commit levels:
fabric: *a076bbada80cbcda4825c62233f16290edb1d1b1*
fabric-ca: *de5f4bdc49f63fd4f9f48acf99689fc131313ec6*
fabric-chaintool: *b8f8a5c23ba97f5034a19bbefb1730e31739a564*

Installed prereq JDK 1.8.0_121 as in http://fabric-chaintool.readthedocs.io/en/latest/getting-started/
$ git clone https://github.com/hyperledger/fabric-chaintool.git
$ cd fabric-chaintool && make install

cd /fabric-chaintool/examples/example02/app
@step 
_chaintool build_ 
it failed with following message:
{code}
ubuntu@hyperledger-devenv:a076bba:/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app$ chaintool build
Build using configuration for  ./
[CCI] parse org.hyperledger.chaincode.example02
[CCI] parse appinit
[PB] protoc --go_out=/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaincode/example02 --proto_path=/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaincode/example02 /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaincode/example02/interface.proto
Exception in thread ""main"" java.io.IOException: Cannot run program ""protoc"": error=2, No such file or directory
	at java.lang.ProcessBuilder.start(ProcessBuilder.java:1048)
	at me.raynes.conch.low_level$proc.invokeStatic(low_level.clj:33)
	at me.raynes.conch.low_level$proc.doInvoke(low_level.clj:7)
	at clojure.lang.RestFn.applyTo(RestFn.java:137)
	at clojure.core$apply.invokeStatic(core.clj:648)
	at clojure.core$apply.invoke(core.clj:641)
	at me.raynes.conch$run_command.invokeStatic(conch.clj:197)
	at me.raynes.conch$run_command.invoke(conch.clj:196)
	at me.raynes.conch$execute.invokeStatic(conch.clj:245)
	at me.raynes.conch$execute.doInvoke(conch.clj:236)
	at clojure.lang.RestFn.applyTo(RestFn.java:139)
	at clojure.core$apply.invokeStatic(core.clj:648)
	at clojure.core$apply.invoke(core.clj:641)
	at chaintool.platforms.golang.core$protoc.invokeStatic(core.clj:29)
	at chaintool.platforms.golang.core$protoc.doInvoke(core.clj:29)
	at clojure.lang.RestFn.invoke(RestFn.java:457)
	at chaintool.platforms.golang.core$protoc_cmd.invokeStatic(core.clj:73)
	at chaintool.platforms.golang.core$protoc_cmd.invoke(core.clj:66)
	at chaintool.platforms.golang.core$emit_proto.invokeStatic(core.clj:203)
	at chaintool.platforms.golang.core$emit_proto.invoke(core.clj:195)
	at chaintool.platforms.golang.core$generate$iter__2280__2284$fn__2285.invoke(core.clj:230)
	at clojure.lang.LazySeq.sval(LazySeq.java:40)
	at clojure.lang.LazySeq.seq(LazySeq.java:49)
	at clojure.lang.RT.seq(RT.java:521)
	at clojure.core$seq__4357.invokeStatic(core.clj:137)
	at clojure.core$dorun.invokeStatic(core.clj:3024)
	at clojure.core$dorun.invoke(core.clj:3024)
	at chaintool.platforms.golang.core$generate.invokeStatic(core.clj:229)
	at chaintool.platforms.golang.core$generate.invoke(core.clj:225)
	at chaintool.platforms.golang.userspace.GolangUserspacePlatform.build(userspace.clj:47)
	at chaintool.platforms.api$fn__76$G__55__79.invoke(api.clj:17)
	at chaintool.platforms.api$fn__76$G__54__83.invoke(api.clj:17)
	at chaintool.build.core$run.invokeStatic(core.clj:22)
	at chaintool.build.core$run.invoke(core.clj:20)
	at chaintool.build.core$compile.invokeStatic(core.clj:26)
	at chaintool.build.core$compile.invoke(core.clj:25)
	at chaintool.subcommands.build$run.invokeStatic(build.clj:28)
	at chaintool.subcommands.build$run.invoke(build.clj:24)
	at chaintool.core$_app.invokeStatic(core.clj:175)
	at chaintool.core$_app.doInvoke(core.clj:143)
	at clojure.lang.RestFn.applyTo(RestFn.java:137)
	at clojure.core$apply.invokeStatic(core.clj:646)
	at clojure.core$apply.invoke(core.clj:641)
	at chaintool.core$_main.invokeStatic(core.clj:184)
	at chaintool.core$_main.doInvoke(core.clj:183)
	at clojure.lang.RestFn.applyTo(RestFn.java:137)
	at chaintool.core.main(Unknown Source)
Caused by: java.io.IOException: error=2, No such file or directory
	at java.lang.UNIXProcess.forkAndExec(Native Method)
	at java.lang.UNIXProcess.<init>(UNIXProcess.java:247)
	at java.lang.ProcessImpl.start(ProcessImpl.java:134)
	at java.lang.ProcessBuilder.start(ProcessBuilder.java:1029)
	... 46 more
{code}
;;;","19/Apr/17 9:25 AM;Nishi;protoc compiler which was required to execute ""chaintool build"" was missing on my system.
Extracted from  https://github.com/google/protobuf/releases/download/v3.2.0/protoc-3.2.0-linux-x86_64.zip protoc binary and placed it under /usr/local/bin.

Then *chaintool build*  completed successfully with following messages:

{code}
ubuntu@hyperledger-devenv:a076bba:/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app$ chaintool build
Build using configuration for  ./
[CCI] parse org.hyperledger.chaincode.example02
[CCI] parse appinit
[PB] protoc --go_out=/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaincode/example02 --proto_path=/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaincode/example02 /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaincode/example02/interface.proto

[PB] protoc --go_out=/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/appinit --proto_path=/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/appinit /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/appinit/interface.proto

[PB] protoc --go_out=/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaintool/meta --proto_path=/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaintool/meta /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/src/hyperledger/cci/org/hyperledger/chaintool/meta/interface.proto

[GO] go get -d -v chaincode
	Using GOPATH /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/deps:/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build:/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app:/opt/gopath
github.com/golang/protobuf (download)

[GO] go build -o /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/bin/org.hyperledger.chaincode.example02-0.1-SNAPSHOT -ldflags -linkmode external -extldflags '-static' chaincode
	Using GOPATH /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/deps:/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build:/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app:/opt/gopath

Compilation complete
{code}

After that ran *chaintool package* successfully as follows

{code}
ubuntu@hyperledger-devenv:a076bba:/opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app$ chaintool package
Writing CAR to: /opt/gopath/src/github.com/hyperledger/fabric-chaintool/examples/example02/app/build/org.hyperledger.chaincode.example02-0.1-SNAPSHOT.car
Using path ./ [""src"" ""chaincode.yaml""]
|------+------------------------------------------+--------------------------------------------------------|
| Size |                   SHA1                   |                          Path                          |
|------+------------------------------------------+--------------------------------------------------------|
| 438  | d28b22c7c30506af926dcb5bc8b946ac35ddac7f | chaincode.yaml                                         |
| 3904 | 71d7b7253158c006d2b619e192fd04812e812514 | src/chaincode/chaincode_example02.go                   |
| 143  | 7305f65e18e4aab860b201d40916bb7adf97544f | src/interfaces/appinit.cci                             |
| 360  | 5000028a491f27946e76f0ec4dfd05a293223fad | src/interfaces/org.hyperledger.chaincode.example02.cci |
|------+------------------------------------------+--------------------------------------------------------|
Platform:            org.hyperledger.chaincode.golang version 1
Digital Signature:   none
Raw Data Size:       4845 bytes
Archive Size:        2366 bytes
Compression Alg:     gzip
Chaincode SHA3:      1f23c4ab60c1e47d9efb3728e5d3f2922cf7d79fdce359281b26d72f979ad223c8bea18366fc92bd08eca0ee9e7db9a57899560b8cffa4267eae3e34cf5ac48f
{code};;;","01/May/17 11:17 PM;smithbk;Hi Nishi, just checking on the status of this.  Any progress?;;;","15/May/17 9:51 PM;Nishi;Keith.

Successfully built and ran chaintool package. Comments posted above.

Thanks!

 ;;;","17/May/17 7:06 AM;smithbk;[~mrkiouak] can you close this if you agree that it is fixed?

Thanks;;;","26/May/17 1:25 AM;smithbk;Marked done as I believe that it is fixed.  If not, pls reopen.;;;",,,,,,,,,,,,
server auth debug print wrongly without formating,FABC-395,13560,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,tcz001,tcz001,tcz001,30/Nov/16 3:12 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,01/Jan/17 5:21 AM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"The debug print of server/auth in fabric-cop is not using Debugf in log,
2016/11/28 23:34:16 [DEBUG] Incorrect password for '%s'; received %s but expected %sadminadminpwVzMhqeWZBMqG

Fix here https://gerrit.hyperledger.org/r/#/c/2845/",,tcz001,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx8d3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,tcz001,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric-Ca : Max Enrollments number not accounted for a user during enrollment,FABC-396,24834,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,tsrb,Nishi,Nishi,07/Dec/17 6:14 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,06/Jan/18 7:51 AM,,,,,,,v1.1.0,v1.1.0-alpha,,,,,0,,,,,,"Fabric-CA commit level: * d365e506186e6291f2a0b0512360462bad4bc4b0*

Steps to Reproduce:

-----------------------

1. Set maxenrollments to 4 while registering a user
{code:java}
FABRIC_CA_CLIENT_HOME=~/hyperledger/fabric-ca/clients/admin fabric-ca-client register --id.maxenrollments 4 --id.name userTest --id.secret userTestpw --id.affiliation org1.department1 --id.type user
{code}
2. Now try to enroll user 5 times
{code:java}
FABRIC_CA_CLIENT_HOME=~/hyperledger/fabric-ca/clients/userTest fabric-ca-client enroll -u http://userTest:userTestpw@localhost:7054{code}
Expected Result:

fabric-ca-client to report an error that user has reached his maxenrollments

Actual Result:

Enrollment succeeds even for a 5th attempt and for subsequent enrolments.

Message during enrollment:

--------------------------------------
{code:java}
2017/12/06 20:58:51 [DEBUG] DB: Getting identity userTest200
2017/12/06 20:58:51 [DEBUG] DB: Login user userTest200 with max enrollments of 3 and state of 3
2017/12/06 20:58:51 [DEBUG] Max enrollment value (3) of identity is greater than allowed by CA, using CA max enrollment value of -1
2017/12/06 20:58:51 [DEBUG] DB: identity userTest200 successfully logged in
2017/12/06 20:58:51 [DEBUG] Processing sign request: id=userTest200, CommonName=userTest200, Subject=<nil>
2017/12/06 20:58:51 [DEBUG] Checking CSR fields to make sure that they do not exceed maximum character limits
2017/12/06 20:58:51 [DEBUG] DB: Getting identity userTest200
2017/12/06 20:58:51 [DEBUG] Finished processing sign request
2017/12/06 20:58:51 [DEBUG] DB: Getting identity userTest200
2017/12/06 20:58:51 [INFO] signed certificate with serial number 196990544392883754706432797384407312383469496202
2017/12/06 20:58:51 [DEBUG] DB: Insert Certificate
2017/12/06 20:58:51 [DEBUG] Saved serial number as hex 22815c8c3f83cae29aee7ab5ab2defdb9771278a
2017/12/06 20:58:51 [DEBUG] saved certificate with serial number 196990544392883754706432797384407312383469496202
2017/12/06 20:58:51 [DEBUG] Successfully incremented state for identity userTest200 to 4
2017/12/06 20:58:51 [INFO] 127.0.0.1:58430 POST /enroll 201 0 ""OK""
2017/12/06 20:58:51 [INFO] Stored client certificate at /root/hyperledger/fabric-ca/clients/userTest200/msp/signcerts/cert.pem
2017/12/06 20:58:51 [INFO] Stored root CA certificate at /root/hyperledger/fabric-ca/clients/userTest200/msp/cacerts/localhost-7054.pem
2017/12/06 20:58:51 [INFO] Stored intermediate CA certificates at /root/hyperledger/fabric-ca/clients/userTest200/msp/intermediatecerts/localhost-7054.pem
{code}",,Nishi,tsrb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-7116,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyq6n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Nishi,tsrb,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Dec/17 10:53 PM;tsrb;https://gerrit.hyperledger.org/r/16291;;;","11/Jan/18 12:49 AM;Nishi;Verified successfully on postgres and mysql db to verify that a user cannot be enrolled beyond ""maxenrollments"" during register.

Fabric-Ca commit level: *ebfc050baee7ea222edc64637741f406fa9c54b0*

Registered a user on 1.0.4 fabric-ca-server using following attributes:
{code:java}
FABRIC_CA_CLIENT_HOME=~/hyperledger/fabric-ca/clients/admin ca-binaries-x104/fabric-ca-client register --id.maxenrollments 3 --id.name userTest3 --id.secret userTest3pw --id.affiliation org1.department1 --id.type user{code}
 

Then when I tried to enroll userTest3  after upgrading fabric-ca-server to 1.1:
{code:java}
FABRIC_CA_CLIENT_HOME=~/hyperledger/fabric-ca/clients/userTest3 fabric-ca-client enroll -u http://userTest3:userTest3pw@localhost:7054{code}
 

after a third time got the following message:
{code:java}
2018/01/10 15:44:57 [DEBUG] DB: Getting identity userTest3
2018/01/10 15:44:57 [DEBUG] DB: Login user userTest3 with max enrollments of 3 and state of 3
2018/01/10 15:44:57 [INFO] 127.0.0.1:52878 POST /enroll 401 24 ""Login failure: The identity userTest3 has already enrolled 3 times, it has reached its maximum enrollment allowance""
Error: Response from server: Error Code: 20 - Authorization failure
{code}
 

Tested with tls enabled and disabled successfully.

 ;;;",,,,,,,,,,,,,,,,,,
fabric-ca-client should not require the user to specify -M option when msp is not in client home,FABC-397,21047,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,29/Sep/17 12:18 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,26/Oct/17 12:12 AM,v1.0.2,,,,,,v1.1.0,,,,,,0,,,,,,"fabric-ca-client should not require the user to specify -M option when msp is not in client home

If msp directory (/tmp/msp) is not in the client home (~/caclient) when the bootstrap user was enrolled, then fabric-ca-client requires -M option to be specified every time another command is invoked. ",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyhj3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Oct/17 4:30 AM;aambati;https://gerrit.hyperledger.org/r/c/14023/;;;",,,,,,,,,,,,,,,,,,,
make unit-tests fails TestSRVServerInit on vagrant,FABC-398,20461,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,lehors,lehors,lehors,28/Aug/17 10:27 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,15/Sep/17 6:38 AM,v1.0.1,,,,,,v1.1.0,,,,,,0,,,,,,"Similar to FAB-5427, TestSRVServerInit relies on being able to change a file access mode. Unfortunately on vagrant this doesn't work because, at least on Windows, all files on shared volumes appear with a 777 mode which cannot be changed.

This makes the test fail.

A simple fix is to use a directory on a local volume so that its access control can effectively be changed as desired.
{code:java}
$ go test -v -run TestSRVServerInit
=== RUN TestSRVServerInit
2017/08/28 13:04:32 [DEBUG] CA Home Directory: /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/rootDir
...
--- FAIL: TestSRVServerInit (0.33s)
server_test.go:111: Current dir: .
server_test.go:112: Current curd: /opt/gopath/src/github.com/hyperledger/fabric-ca/testdata/ServerInitStat216613874
server_test.go:119: Server.Init error: <nil>
server_test.go:121: Server init should have failed (permission error)
FAIL
{code}",,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-342,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyekn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,lehors,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
COP returns 500 rather than appropriate http error code,FABC-399,14103,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,17/Jan/17 3:48 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,06/Apr/17 10:34 AM,,,,,,,,,,,,,0,,,,,,"To reproduce, try to enroll with an invalid enrollment ID or secret.",,lehors,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxi6v:",,,,,,Sprint 9 - Membership Services,,,,,,,,,,,,,,,,,,,,,,,,lehors,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jan/17 4:55 AM;lehors;One simple way to reproduce the problem is to add the following test to cli/client/client_test.go after TextEnrollCLI:


{code:java}
// do it again!
func TestEnrollCLI2(t *testing.T) {

    c := new(cli.Config)

    args := []string{""admin"", ""adminpw"", ""https://localhost:8888""}

    err := enrollMain(args, *c)
    if err != nil {
        t.Error(""Failed to register, err: "", err)
    }

}

{code}

Then run ""go test -v github.com/hyperledger/fabric-cop/cli/client -run EnrollCLI"", it will give:
...
2017/01/17 19:15:33 [DEBUG] Getting user admin from the database
2017/01/17 19:15:33 [DEBUG] DB: Login user admin with max enrollments of 1 and state of 1
2017/01/17 19:15:33 [DEBUG] Received response
statusCode=500 (500 Internal Server Error)
--- FAIL: TestEnrollCLI2 (0.01s)
       client_test.go:80: Failed to register, err:  Error response from server was 'The maximum number of enrollments is 1' for request:
               POST https://localhost:8888/api/v1/cfssl/enroll
               Authorization: Basic YWRtaW46YWRtaW5wdw==
...;;;","06/Apr/17 10:34 AM;smithbk;This was fixed more than a month ago.;;;",,,,,,,,,,,,,,,,,,
Fix ldap debug messages,FABC-400,20171,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,15/Aug/17 1:36 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,16/Aug/17 4:12 AM,,,,,,,,,,,,,0,,,,,,Some LDAP messages need fixing,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyd2f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Aug/17 1:39 AM;smithbk;https://gerrit.hyperledger.org/r/12433 [FAB-5761] Fix a couple of debug messages;;;",,,,,,,,,,,,,,,,,,,
DNS lookups fail within runtime/busybox based docker containers,FABC-401,14079,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,greg.haskins,greg.haskins,greg.haskins,14/Jan/17 11:20 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,28/Jan/17 6:33 PM,,,,,,,,,,,,,0,,,,,,"DNS lookups based on gethostbyname() fail for static assets (peer, orderer, cop, busybox), such as those employed in our docker containers such as hyperledger/fabric-peer.

It was observed that a docker-composition between orderer and peer was failing to form a connection.  After investigating, it was determined that:

* No DNS names could be resolved, regardless of internal composition link or external service (e.g. www.cnn.com).
* Docker/compose were not to blame, as loading other images (such as ubuntu:xenial and alpine) could resolve names just fine.

The root cause is that binaries such as peer/busybox were compiled under fabric-baseimage (ubuntu:xenial on x86) which utilizes glibc.  This library is notoriously difficult to utlize in a -static build, in part because of its architecture surround dlopen() for NSS.

We will need to find an alternate strategy for building out minimal containers.",,greg.haskins,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxi2v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,greg.haskins,mastersingh24,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Jan/17 8:59 AM;mastersingh24;Why not just copy the official busybox images?  I'd say just use them but we do build on multiple platforms so probably better to copy them.

I'd suggest https://github.com/docker-library/busybox/blob/master/uclibc/Dockerfile.builder   - which uses ulibc and does not require any of the libnss* stuff used by glibc.  

There is also a nice glibc version as well if we are inclined to stay on that path;;;","18/Jan/17 12:45 PM;greg.haskins;Pasted from slack;

The problem is build environment neutral.  We compile both busybox and the golang code in our baseimage container.  The glibc in question is therefore picked up in our Debian/Ubuntu ecosystem.  I explain the rationale for not using the official busybox here: https://github.com/hyperledger/fabric/commit/b61723f9ddcc91cafd4f3a8c3634bd8d32388b32

One complication here is the multiarch stuff as you noted.  Another is that it's not only busybox that is broken:  Our golang apps pick up the bad dns functions too

There are numerous ways to solve this but most of them are probably untenable from either a support and/or licensing perspective.  I think I have a workable solution being tested right now though.;;;","18/Jan/17 1:04 PM;greg.haskins;https://gerrit.hyperledger.org/r/#/c/4107/;;;",,,,,,,,,,,,,,,,,
Using FABRIC_CA_CLIENT_HOME env var messes up the ORDERER_GENERAL_TLS_ROOTCAS setup,FABC-402,23863,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,latitiah,latitiah,09/Nov/17 4:43 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,10/Nov/17 7:17 PM,,,,,,,,,,,,,0,,,,,,"*commit sha*: 5b815c8

{code}
    orderer0.example.com:
        image: hyperledger/fabric-ca-orderer
        environment:
            - FABRIC_CA_CLIENT_HOME=/var/hyperledger/orderer
            - ORDERER_HOME=/var/hyperledger/orderer
            - ENROLLMENT_URL=https://orderer0:orderer0pw@ca.org0:7054
            - BOOTSTRAP_USER_PASS=orderer0:orderer0pw
            - ORDERER_GENERAL_TLS_PRIVATEKEY=/var/hyperledger/tls/keystore/server.key
            - ORDERER_GENERAL_TLS_CERTIFICATE=/var/hyperledger/tls/signcerts/server.crt
            - ORDERER_GENERAL_TLS_ROOTCAS=[/var/hyperledger/configs/ca.org0-cert.pem,/var/hyperledger/configs/ca.org1-cert.pem,/var/hyperledger/configs/ca.org2-cert.pem]
{code}
causes the following error:
{code}
2017/11/08 17:02:51 [DEBUG] CA Files: [/var/hyperledger/orderer/[/var/hyperledger/configs/ca.org0-cert.pem /var/hyperledger/configs/ca.org1-cert.pem /var/hyperledger/configs/ca.org2-cert.pem]]
2017/11/08 17:02:51 [DEBUG] Client Cert File: 
2017/11/08 17:02:51 [DEBUG] Client Key File: 
2017/11/08 17:02:51 [DEBUG] Client TLS certificate and/or key file not provided
Error: Failed to get client TLS config: Failed to read '/var/hyperledger/orderer/[/var/hyperledger/configs/ca.org0-cert.pem': open /var/hyperledger/orderer/[/var/hyperledger/configs/ca.org0-cert.pem: no such file or directory
{code}

It seems as though the Root CAs list is prefaced with the HOME env var.
The expected CA list would look exactly like the env var setting.",,latitiah,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzymm7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,latitiah,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Nov/17 4:44 AM;latitiah;Workaround docker-compose stanza that made this work as expected:
{code}
    orderer0.example.com:
        image: hyperledger/fabric-ca-orderer
        environment:
            - FABRIC_CA_CLIENT_HOME=/var/hyperledger/orderer
            - ORDERER_HOME=/var/hyperledger/orderer
            - ENROLLMENT_URL=https://orderer0:orderer0pw@ca.org0:7054
            - BOOTSTRAP_USER_PASS=orderer0:orderer0pw
            - ORDERER_GENERAL_TLS_PRIVATEKEY=/var/hyperledger/tls/server.key
            - ORDERER_GENERAL_TLS_CERTIFICATE=/var/hyperledger/tls/server.crt
            - ORDERER_GENERAL_TLS_ROOTCAS=[/var/hyperledger/configs/ca.org0-cert.pem,/var/hyperledger/configs/ca.org1-cert.pem,/var/hyperledger/configs/ca.org2-cert.pem]
            - FABRIC_CA_CLIENT_TLS_CERTFILES=/var/hyperledger/configs/ca.org0-cert.pem,/var/hyperledger/configs/ca.org1-cert.pem,/var/hyperledger/configs/ca.org2-cert.pem
            - ORG_ADMIN_CERT=/var/hyperledger/configs/org0/msp/admincerts/cert.pem
        command: /bin/bash -c 'sleep 10; fabric-ca-client enroll -d --enrollment.profile tls -u $${ENROLLMENT_URL} -M /var/hyperledger/tls --csr.hosts $${ORDERER_HOST}; fabric-ca-client enroll -d -u $${ENROLLMENT_URL} -M $${ORDERER_GENERAL_LOCALMSPDIR}; orderer'
{code}
;;;","10/Nov/17 1:38 AM;smithbk;Latitia, this is really working as designed.  All of the command line arguments which can take a comma-separated list of strings do not expect the ""[]"" brackets surrounding the list.

That said, I'll make a change to make this work as you expect it to, allow ""[]"" brackets to make it more user-friendly.;;;","10/Nov/17 2:23 AM;smithbk;https://gerrit.hyperledger.org/r/15347 [FAB-6930] Permit lists with brackets;;;",,,,,,,,,,,,,,,,,
ACL Happy Path test Fails,FABC-403,22817,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,latitiah,latitiah,25/Oct/17 12:12 AM,26/Nov/20 6:20 PM,28/Oct/23 2:21 AM,10/Nov/17 1:19 AM,v1.1.0,,,,,,,,,,,,0,ci-failure,,,,,"The attribute-based ACL test fails with the error: 
{code}
FATAL: Failed waiting for the 'setup' container to finish registering identities, creating the genesis block and other artifacts
{code}

Logs for this run are located in jenkins: https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/100/artifact/gopath/src/github.com/hyperledger/fabric-test/fabric-samples/fabric-ca/data/logs/",,latitiah,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyko7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,latitiah,smithbk,,,,,,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,purge-pd,main-emeritius,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,main,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,release-2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,correct-nodeenv-version,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Oct/17 1:12 AM;smithbk;Yes, this is a problem in the sample.  It is a timing issue.  The intermediate CA for org0 started listening on the port 1 second after the setup container tried to connect.
The correct fix for this is to add a loop to try to connect to the listening port using ""nc -z <host> <port>"" before trying to enroll.;;;","26/Oct/17 5:43 AM;smithbk;https://gerrit.hyperledger.org/r/14855
https://gerrit.hyperledger.org/r/15089 [FAB-6745] Add netcat to fabric-ca images;;;",,,,,,,,,,,,,,,,,,
fabric-ca a user with hf.Registrar.Attributes '*' can grant too much authority,FABC-404,25758,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,15/Dec/17 6:08 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,20/Jan/18 7:08 PM,v1.1.0,,,,,,v1.1.0-alpha,,,,,,0,,,,,,"A user with 'hf.Registrar.Attributes' set to '*' (the default) is allowed to raise his own level of access and/or delegate greater access than he himself has.

An example:
A user with only the following definition (restricted admin):
{code:java}
   {
      ""type"": ""user"",
      ""affiliation"": ""."",
      ""attrs"": [
         {""name"": ""hf.Registrar.Roles"", ""value"": ""user""},
         {""name"": ""hf.Registrar.Attributes"", ""value"": ""*""}
       ]
   }
{code}

Presumably, this admin can only register type 'user' and nothing more, especially given the fact that in most cases, we specifically check to ensure that such an admin may not delegate anything other than type 'user'

However, with hf.Registrar.Attributes '*', he can register a user with much more authority, e.g.

{code:java}
  {
      ""type"": ""user"",
      ""affiliation"": ""."",
      ""max_enrollments"": -1,
      ""attrs"": [
         {""name"": ""hf.Registrar.Roles"", ""value"": ""superUser,client,user,peer,validator,auditor,ca,apple,orange""},
         {""name"": ""hf.Registrar.DelegateRoles"", ""value"": ""superUser,client,user,peer,validator,auditor,ca,apple,orange""},
         {""name"": ""hf.Revoker"", ""value"": ""true""},
         {""name"": ""hf.IntermediateCA"", ""value"": ""true""},
         {""name"": ""hf.GenCRL"", ""value"": ""true""},
         {""name"": ""hf.Registrar.Attributes"", ""value"": ""*""}
      ]
   }
{code}

  This is likely not the intention, and since it is the default, also insecure.",,mastersingh24,rennman,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyqzj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,rennman,skarim,smithbk,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Dec/17 7:34 PM;mastersingh24;Maybe we need to make sure that * hf.Registrar.Roles* is treated as a special attribute?;;;","04/Jan/18 1:28 AM;smithbk;There would still be problems with other attributes such as hf.Revoker.
To fix this, the ""hf.Registrar.Attributes"" will be an additional check made, but the registrar will still be required to own an ""hf.*"" attribute before registering another identity with that attribute.
More specifically, the following checks will be made during registration of an attribute:
1) For ALL attributes, the name of the attribute being registered must match the value of registrar's hf.Registrar.Attributes attribute
2) For hf.* attributes, the registrar must own the attribute and if the attribute is a boolean attribute (such as ""hf.Revoker""), the registrar's value for the attribute must be true.
    The other special cases for checking the value of ""hf.Registrar.Roles"" and ""hf.Registrar.DelegateRoles"" will continue to be made.
    The special case for checking the value of ""hf.Registrar.Attributes"" is that the registree's value must be equal to or a subset of the registrar's value.  This is why we only support the trailing ""*"" for pattern matching here, to make it easy to perform the subset operation.;;;","17/Jan/18 2:43 AM;skarim;https://gerrit.hyperledger.org/r/#/c/16559/;;;",,,,,,,,,,,,,,,,,
Crash during basic enrollment: POST /api/v1/cfssl/enroll,FABC-405,14002,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,JonathanLevi,greg.haskins,greg.haskins,11/Jan/17 2:55 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,15/Mar/17 10:12 AM,,,,,,,,,,,,,0,,,,,,"Working on trying to get basic e2e environment in the v1.0 branch with Jonathan Levi

Versions:

* fabric-cop.git f32a17caef (Tue Jan 10 14:17:43 2017 +0000)
* fabric-sdk-node.git a4dd2b69 (Fri Jan 6 18:18:45 2017 +0000)

Basic enrollment operation causes the cop backend to crash with following log

cop_1      | 2017/01/10 17:22:36 [INFO] Received request
cop_1      | POST /api/v1/cfssl/enroll
cop_1      | Authorization: Basic YWRtaW46YWRtaW5wdw==
cop_1      | {""certificate_request"":""-----BEGIN CERTIFICATE REQUEST-----\r\nMIHLMHICAQAwEDEOMAwGA1UEAwwFYWRtaW4wWTATBgcqhkjOPQIBBggqhkjOPQMB\r\nBwNCAAQNLnhMx1XAa7ed8GV5BpdByG8ygyMswejUonB3IDZNfOJjQkPhstZHNSPW\r\nMm6qAA+s6ytW2fulZapFHpeaL+wRoAAwDAYIKoZIzj0EAwIFAANHADBEAiBBWJq9\r\nFUwKt9TWzFEfFE+gSQodxhMJKdo/XAVpq+6CkgIgcGrkIq/9LCDoYBCc5o01zrop\r\ngo665TTDxBG7et1Ti44=\r\n-----END CERTIFICATE REQUEST-----\r\n""}
cop_1      | 2017/01/10 17:22:37 http: panic serving 10.0.2.2:59518: runtime error: invalid memory address or nil pointer dereference
cop_1      | goroutine 7 [running]:
cop_1      | net/http.(*conn).serve.func1(0xc42043e480)
cop_1      | 	/opt/go/src/net/http/server.go:1491 +0x12a
cop_1      | panic(0xb6a8a0, 0xc420012050)
cop_1      | 	/opt/go/src/runtime/panic.go:458 +0x243
cop_1      | github.com/hyperledger/fabric-cop/cli/server.(*signHandler).Handle(0xc420440060, 0x115d4e0, 0xc420431860, 0xc4200bd590, 0xc4202bdd01, 0xc420442460)
cop_1      | 	/opt/gopath/src/github.com/hyperledger/fabric-cop/cli/server/enroll.go:76 +0x231
cop_1      | github.com/hyperledger/fabric-cop/vendor/github.com/cloudflare/cfssl/api.HTTPHandler.ServeHTTP(0x1155020, 0xc420440060, 0xc420440070, 0x1, 0x1, 0x115d4e0, 0xc420431860, 0xc4200bd590)
cop_1      | 	/opt/gopath/src/github.com/hyperledger/fabric-cop/vendor/github.com/cloudflare/cfssl/api/api.go:85 +0x3e4
cop_1      | github.com/hyperledger/fabric-cop/vendor/github.com/cloudflare/cfssl/api.(*HTTPHandler).ServeHTTP(0xc42043c4e0, 0x115d4e0, 0xc420431860, 0xc4200bd590)
cop_1      | 	<autogenerated>:4 +0x8c
cop_1      | github.com/hyperledger/fabric-cop/cli/server.(*copAuthHandler).ServeHTTP(0xc4202bdd80, 0x115d4e0, 0xc420431860, 0xc4200bd590)
cop_1      | 	/opt/gopath/src/github.com/hyperledger/fabric-cop/cli/server/auth.go:82 +0x91
cop_1      | net/http.(*ServeMux).ServeHTTP(0x1181680, 0x115d4e0, 0xc420431860, 0xc4200bd590)
cop_1      | 	/opt/go/src/net/http/server.go:2022 +0x7f
cop_1      | net/http.serverHandler.ServeHTTP(0xc42043e400, 0x115d4e0, 0xc420431860, 0xc4200bd590)
cop_1      | 	/opt/go/src/net/http/server.go:2202 +0x7d
cop_1      | net/http.(*conn).serve(0xc42043e480, 0x115dde0, 0xc42042ba80)
cop_1      | 	/opt/go/src/net/http/server.go:1579 +0x4b7
cop_1      | created by net/http.(*Server).Serve
cop_1      | 	/opt/go/src/net/http/server.go:2293 +0x44d
",,greg.haskins,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxgtj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,greg.haskins,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/17 11:38 PM;greg.haskins;Work-around submitted as https://gerrit.hyperledger.org/r/#/c/3843/;;;","15/Mar/17 4:31 AM;smithbk;Greg, fabric-ca has been reworked quite a bit since this since I see ""fabric-ca/cli"" in the stack.  It must be using the fabric-ca executable before we broke it up into separate fabric-ca-server and fabric-ca-client executable.
Anyway, I don't think this is a problem any longer.;;;","15/Mar/17 10:11 AM;JonathanLevi;[~keithsmith] Certainly!;;;",,,,,,,,,,,,,,,,,
[SECURITY] fabric-ca does not check/enforce maximum length for DNs,FABC-406,15632,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,09/Apr/17 3:45 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,27/Jul/17 10:56 PM,v1.0.0,v1.0.0-rc1,,,,,v1.0.1,,,,,,0,security,Security,,,,"There are no checks on length of RDN, nor total DN for a CSR. This causes an issue for authentication, since a DN of > approx. 3700 chars causes an error related to the authentication token (presumably, since that's the most likely thing to be affected):


{code:java}
2017/04/08 14:42:59 [DEBUG] Received response
statusCode=400 (400 Bad request)
<html><body><h1>400 Bad request</h1>
Your browser sent an invalid request.
</body></html>
{code}

We should define a maximum length for the DN.
Although the LDAP specifications do not define a maximum length for DNs, the industry standards range from approximately 255-2048. Even for multiple products within the same company, there are often no consistent rules, e.g. 

||Product|IBM® Tivoli® Directory Server|IBM z/OS® Security Server|Novell eDirectory Server|Sun Java™ System Directory Server|Microsoft® Active Directory Server|Lotus® Domino® Server|Active Directory Application Mode (ADAM)|Optimal length||
||Max allowed|1024|1024|1024|1024|2048|255|1024|255||
",,mastersingh24,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-4546,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3lj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,rennman,skarim,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Apr/17 5:13 AM;rennman;Unless contraindicated, I submit that we follow the X.520 recommendations of the ITU:

||attribute|upper bound||
||commonName|ub-common-name INTEGER ::= 64||
||serialNumber|ub-serial-number INTEGER ::= 64||
||organizationalUnitName|ub-organizational-unit-name INTEGER ::= 64||
||organizationName|ub-organization-name INTEGER ::= 64||
||localityName|ub-locality-name INTEGER ::= 128||
||stateOrProvinceName|ub-state-name INTEGER ::= 128||
||countryName|ub-country-code INTEGER ::= 4||;;;","15/Jul/17 3:04 AM;skarim;https://gerrit.hyperledger.org/r/11657;;;","16/Jul/17 6:23 PM;mastersingh24;I think this should be OK for a patch release as well so setting target to 1.0.1;;;","21/Jul/17 7:58 PM;mastersingh24;[~skarim] -  We can't include this in the 1.0.1 unless you unstack it from the other changes as they will not go into 1.0.1;;;",,,,,,,,,,,,,,,,
Change type of IsAdmin attribute sent in the idemix/credential response to bool,FABC-407,30758,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,31/May/18 4:43 AM,14/Aug/18 6:31 PM,28/Oct/23 2:21 AM,14/Aug/18 6:31 PM,,,,,,,v1.3.0,,,,,,0,,,,,,"Change type of IsAdmin attribute sent in the idemix/credential response to bool and change swagger doc accordingly.

IsAdmin is an attribute given to all users requesting Idemix credential. The response to the idemix/credential request contains a map of attribute name and value. Currently, all values are converted to strings and sent as strings in the map. With this change map is changed to
accept any type of value. So, a boolean value will be stored in the map for the IsAdmin attribute.",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-592,,,,,,,,,"1|hzzddj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/May/18 11:22 AM;aambati;https://gerrit.hyperledger.org/r/c/22569/;;;",,,,,,,,,,,,,,,,,,,
CORS not enabled on fabric-ca,FABC-408,31645,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,Tecnalia,Tecnalia,04/Jul/18 4:29 PM,07/Apr/19 10:10 PM,28/Oct/23 2:21 AM,04/Apr/19 9:59 PM,,,,,,,v1.4.1,v2.0.0,,,,,0,,,,,,"We have been working for a while with fabric-ca and we realize that fabric-ca cannot work with *Cross Domain* request. This is not an issue if *CA* and *REST* server are in same server located but for other cases, in where for example, web browsers want to directly connect with fabric-ca for registration/enroll purposes, this action is rejected.

The generated error, is the typical *preflight request* not supported message due to missing *CORS* policy on server side HTTP responses

!cors.png!

We should have a configuration option (via yml, env variable, etc) in CA for setting a custom value in response HTTP headers for key {{Access-Control-Allow-Origin.}}

As an example (in *fabric-ca-server-config.yaml*) it can be:
 # Server's listening port (default: 7054)

port: 7054
 # Enables cors origin (default: disabled)

origin: *
 # Enables debug logging (default: false)

debug: false

...

Which will become as {{Access-Control-Allow-Origin: * in all HTTP CA Responses}}

Obviously a more fine tuned configuration can be applied using {{Access-Control-Allow-Header and Access-Control-Allow-Method headers}}

 ",,aambati,ashutosh_kumar,denyeart,mastersingh24,Tecnalia,vladyslavmunin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11019,,,,,,,,,,,,,,,,,,,,,,,,"04/Jul/18 4:21 PM;Tecnalia;cors.png;https://jira.hyperledger.org/secure/attachment/15250/cors.png",,,,,,,,,,,,,,Yes,,,,,,,,,,,,"1|hzzhk7:",CORS can be enabled in Fabric CA server as of v1.4.1.,Yes,,No,,,,,,,,,,,,,,,No,,,,,,,,,,,aambati,ashutosh_kumar,denyeart,mastersingh24,Tecnalia,vladyslavmunin,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Jul/18 11:22 PM;ashutosh_kumar;Please confirm my understanding [~Tecnalia] : You are hosting Fabric CA in your data center and exposing its end point to your customers ?;;;","16/Jul/18 4:47 PM;mastersingh24;Looks like there is middleware we can use for this:    http://www.gorillatoolkit.org/pkg/handlers#CORS;;;","31/Jul/18 5:21 PM;vladyslavmunin;Also in CORS case , browser will send OPTIONS requests , so they should be proccessed. 
 It can be done like 
    
{code:java}
 s.mux.Methods(""OPTIONS"").HandlerFunc(
         func(w http.ResponseWriter, r *http.Request)
{                w.Header().Set(""Access-Control-Allow-Headers"", ""Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With"")                w.Header().Set(""Access-Control-Allow-Origin"", ""http://localhost:4200"") // TODO : HERE WE SHOULD DEFINE DOMAIN (use config)                 w.Header().Set(""Access-Control-Allow-Methods"",""POST, GET, OPTIONS"")                  w.Header().Set(""Access-Control-Allow-Credentials"",""true"")                 w.Header().Set(""Access-Control-Max-Age"", ""3600"");                 w.WriteHeader(http.StatusOK)                                return             }
)
{code}
I did it locally and it works quite well;;;","20/Sep/18 5:29 AM;denyeart;[~smithbk] [~skarim] I'll move to Future.  Please update if there is any plan in v1.3.0 or v1.4.0 timeframe, or if this should be changed to new Story rather than a Bug (use More-->Move).;;;","01/Apr/19 8:45 PM;mastersingh24;I don't think we are going to get too fancy here and process options ... I think we can allow people to enable CORS and specify valid origin domains.;;;","02/Apr/19 3:36 AM;mastersingh24;https://gerrit.hyperledger.org/r/30603 (release-1.4);;;",,,,,,,,,,,,,,
base 64 decoding in auth header should handle padding,FABC-409,14502,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,smithbk,smithbk,02/Feb/17 7:51 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,14/Mar/17 11:54 PM,,,,,,,v1.0.0,,,,,,1,,,,,,"The B64Decode function in fabric-ca/util/util.go uses RawStdEncoding which doesn't handle padding.  It should use StdEncoding so it handles padding.  I'm not sure if StdEncoding also handles w/o padding, so it may be safer to try StdEncoding 1st and if it fails, try RawStdEncoding.",,rickr,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjtz:",,,,,,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,rickr,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Mar/17 11:55 PM;smithbk;This was already changed.   See util/util.go's B64Encode/Decode functions.;;;",,,,,,,,,,,,,,,,,,,
Default CA lookup fails when specifying CA name,FABC-410,17059,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,24/May/17 11:59 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,26/May/17 9:05 PM,v1.0.0,v1.0.0-alpha2,,,,,v1.0.0,,,,,,0,,,,,,"By default, the default CA in a server has no CA name it is an empty string. However, the default CA can be started up with a ca name specified, but if this done then client traffic does not get routed to it appropriately. So if the client does not specify a CA name (empty string) the server will not correctly direct traffic to the default CA, if the default CA has been given a specific name. 

*Reproduction:*
 1. Start server as
{code:java}
fabric-ca-server start -b a:b -d -ca.name defaultCA{code}

2. On client execute
{code:java}
fabric-ca-client enroll -d -u http://a:b@localhost:7054{code}

You will see the following:
{code:java}
Error: Error response from server was: CA '' does not exist{code}",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxwrz:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
[java-e2e] java e2e tests (testRegisterAttribute..)  are failing while registering user,FABC-411,21770,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,skarim,rameshthoomu,rameshthoomu,11/Oct/17 7:22 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,16/Oct/17 10:34 PM,v1.0.3,,,,,,v1.0.4,,,,,,0,fabric-ca,,,,," 

*Description: [https://localhost:7054/api/v1/register] failed*

Java e2e registrar tests are failing with the below error
{code:java}
00:19:44.286 Caused by: java.lang.Exception: POST request to https://localhost:7054/api/v1/register failed request body {""id"":""user1507716196_7"",""type"":""user"",""secret"":""testUserRevoke"",""max_enrollments"":0,""affiliation"":""org1.department1"",""attrs"":[{""name"":""user.role"",""value"":""department lead""},{""name"":""hf.revoker"",""value"":""true""}]} with status code: 401. Response: {""success"":false,""result"":null,""errors"":[{""code"":43,""message"":""Registrar does not have any values for 'hf.Registrar.Attributes' thus can't register any attributes""}],""messages"":[]}{code}
Below are the tests are failing:
{code:java}
00:19:44.286 Tests in error: 
00:19:44.287   HFCAClientIT.testRegisterAttributes:130 » Registration Error while registering...
00:19:44.287   HFCAClientIT.testRegisterAttributesDefault:172 » Registration Error while regi...
00:19:44.287   HFCAClientIT.testRegisterAttributesNONE:209 » Registration Error while registe...
00:19:44.287 
00:19:44.287 Tests run: 21, Failures: 1, Errors: 3, Skipped: 2
{code}
Observed same tests are failed on latest fabric merge job

[https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-end-2-end-x86_64/1387/consoleFull]

*fabric patchset:* [https://gerrit.hyperledger.org/r/#/c/13397/]

*fabric commit:* *fe125bd* https://github.com/hyperledger/fabric/commit/fe125bd3f3a2b6ce8b9fc1d664fc4b14e5f2f223

 *fabric-ca Commit: aa10999* [https://gerrit.hyperledger.org/r/#/c/13215/]",,rameshthoomu,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyj3z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,rickr,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Oct/17 11:13 PM;rickr;Talked to the fabric-ca maintainers and they think the issue is on their side.;;;",,,,,,,,,,,,,,,,,,,
Duplicate descriptions in users-guide.rst,FABC-412,28077,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,nnao,nnao,nnao,28/Feb/18 9:43 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,28/Feb/18 9:43 PM,v1.1.0-alpha,,,,,,v1.1.0,,,,,,0,Documentation,,,,,L621-L632 and L634-L645 in docs/source/users-guide.rst are a duplicate.,,nnao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyz5r:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,nnao,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/18 11:10 AM;nnao;https://gerrit.hyperledger.org/r/#/c/18503/;;;",,,,,,,,,,,,,,,,,,,
Add support for all array type configuration options,FABC-413,15962,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,skarim,skarim,skarim,24/Apr/17 10:05 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,29/Apr/17 7:13 AM,v1.0.0,v1.0.0-alpha1,,,,,v1.0.0,,,,,,0,,,,,,"All array type configuration options should be supported from configuration file. Currently, there certain types that cause an error if missing from configuration file. The following error is seen:

* 'DB.TLS.CertFiles': source data must be an array or slice, got string

Also adds check in the viperunmarshal function to only do assertion on slices that are present in the configuration file, otherwise nil related errors seen.

panic: interface conversion: interface {} is nil, not map[string]interface {} [recovered]
	panic: interface conversion: interface {} is nil, not map[string]interface {}",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr07:",,,,,,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Apr/17 10:27 PM;skarim;https://gerrit.hyperledger.org/r/#/c/8475/;;;",,,,,,,,,,,,,,,,,,,
DB TLS CertFiles parameter ignored in server config ,FABC-414,15418,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Won't Do,skarim,passkit,passkit,21/Mar/17 8:43 PM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:39 PM,v1.0.0,,,,,,,,,,,,0,,,,,,"`processCertFiles()` is not called in the server `configInit()` or at any time before connection is initiated. 

The config below will fail when connecting to a database with a self signed certificate.

{code}
db:
  type: postgres
  datasource: host=example.com port=5432 user=postgres dbname=fabric_ca sslmode=verify-full
  tls:
      enabled: true
      certfiles: ca.cert.pem	  # Comma Separated (e.g. root.pem, root2.pem)
      client:
        certfile: client.cert.pem
        keyfile: client.key.pem
{code}

{code}
2017/03/21 18:59:00 [DEBUG] Initializing 'postgres' data base at 'host=example.com port=5432 user=postgres dbname=fabric_ca sslmode=verify-full'
2017/03/21 18:59:00 [DEBUG] Using postgres database, connecting to database...
2017/03/21 18:59:00 [DEBUG] Database Name: fabric_ca
2017/03/21 18:59:00 [DEBUG] Connection String: host=example.com port=5432 user=postgres dbname=fabric_ca sslmode=verify-full sslcert=client.cert.pem sslkey=client.key.pem
2017/03/21 18:59:00 [ERROR] Failed to connect to Postgres database [error: x509: certificate signed by unknown authority]
Error: x509: certificate signed by unknown authority
{code}

If specified as an array then it connects as expected:

{code}
db:
  type: postgres
  datasource: host=example.com port=5432 user=postgres dbname=fabric_ca sslmode=verify-full
  tls:
      enabled: true
      certfileslist: 
        - ca.cert.pem			
      client:
        certfile: client.cert.pem
        keyfile: client.key.pem
{code}",,ChristopherFerris,mastersingh24,passkit,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxgin:",,,,,,Sprint 14 - Membership Service,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,mastersingh24,passkit,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Mar/17 9:31 PM;mastersingh24;what's the use case which requires us to support an array of root certificates?
and if we need to support an array, then we should use an array and not a comma-separated list;;;","27/Mar/17 10:16 PM;passkit;I don't think there is one.  Postgres only requires a single root _or_ intermediate.  Problem is that currently the `certfiles` value is not being processed at all.  I guess we have an array because because that's what the tls package wants.;;;","27/Mar/17 11:06 PM;smithbk;Yes, the reason we allow multiple is because the package allows multiple certs.  I don't know for certain why it allows multiple, but one use case I could image is to handle a server side key rotation.  The server would generate a new key/cert, distribute the new cert so for a period of time all clients would need to trust both, until the server did the actual switch over to the new cert.

The reason we chose to make it a comma-separated list rather than a real list is because we can't handle specifying lists through an env variable or command line option currently ... well, that and also the fact that most times it is going to be a single element anyway.;;;","27/Mar/17 11:17 PM;skarim;[~mastersingh24] I have not seen a specific use case but the TLS package uses a cert pool for root CA certs which allow you to specify more than one certificate. This was one of the reasons to use an array. The fabric-ca client could have multiple roots that it trust for a TLS connection. The TLS client side struct that is used from fabric-ca client is also used for the database TLS connection as well. We could create a separate struct for TLS client on the DB side if we want to only support specifying one root cert. 

The reason not to support an array directly through the config file is due to the command line behavior. Viper/Cobra currently would not allow us to provide array input from the command line. Thus, we decided to use comma separate string to provide more than one value for a flag through the command line. Wanting to have consistent behavior, the same comma separated string in the config file was also used. ;;;","27/Mar/17 11:18 PM;passkit;In the case of an certificate signed by an intermediate ca, multiple ca certs are normally required.  But for Postgres, it doesn't validate down the chain if you supply an intermediate ca cert.  This behaviour is more an exception than the general rule of validating the chain to the root ca.  ;;;","28/Mar/17 5:00 AM;mastersingh24;[~skarim] - we don't use comma separated lists in any of the other config files.  I don't like putting a comma-separated list as a YAML entry when we can use arrays.  I understand that maybe the command line might be different from the config file or from env variables.  BTW - for environment variables I believe that you can use the ""[cert1.pem,cert2.pem,cert3.pem]"" array format (this is valid in YAML as well) and things should still work;;;","28/Mar/17 2:57 PM;passkit;Can confirm that you can set arrays in environment variables. 

{code}
ORDERER_GENERAL_TLS_ROOTCAS=[""${ORDERER_CFG_PATH}/ssl/ca.cert.pem"",""${ORDERER_CFG_PATH}/ssl/intermediate.cert.pem""]
ORDERER_GENERAL_TLS_CLIENTROOTCAS=[""${ORDERER_CFG_PATH}/ssl/ca.cert.pem"",""${ORDERER_CFG_PATH}/ssl/intermediate.cert.pem"",""${ORDERER_CFG_PATH}/ssl/bc-intermediate.cert.pem"",""${ORDERER_CFG_PATH}/ssl/ll-intermediate.cert.pem""]
{code}

This is my current orderer config.;;;","30/Mar/17 12:05 AM;skarim;[~passkit] Hi Nick, I wanted to see if you tried using an array with Fabric-ca environment variables and got it to work? I am doing some testing and can't seem to specify an array as an environment variable without viper complaining about it. For example, with the code you have right now you can could test it with the env var FABRIC_CA_CLIENT_TLS_CERTFILESLIST;;;","22/Apr/17 3:56 AM;ChristopherFerris;[~skarim] [~smithbk] [~mastersingh24] this says in review yet I cannot for the life of me find the CR. Is it still in review? Done?;;;","23/Apr/17 8:09 AM;skarim;[~ChristopherFerris] This is no longer relevant, the underlying issue as to why we needed this was resolved via https://jira.hyperledger.org/browse/FAB-2993. So the change set got abandoned. I don't see an option to cancel the work item, should it be marked done?
;;;",,,,,,,,,,
fabric-ca GetCertificate in lib/tcert/util.go should not return fatal error,FABC-415,17041,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,rennman,rennman,24/May/17 5:47 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,28/Jul/17 5:05 AM,,,,,,,v1.0.1,,,,,,0,,,,,,"In GetCertificate(), there are 4 potential errors returned. One of them is classified as fatal and causes the process to exit:
                certificates, err = x509.ParseCertificates(block.Bytes)
                if err != nil \{
                        log.Fatal(""PEM Certificatre Parse failed"")
                        return nil, errors.New(""PEM  Certificate Parse failed"")
                } //else \{

This should be the caller's decision. The log.Fatal should be log.Error.",,aambati,ChristopherFerris,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3mf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,ChristopherFerris,rennman,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/May/17 3:29 AM;rennman;FYI, this test has been removed from TestGetBadCertificate() in lib/tcert/util_test.go until this item is addressed:
{code:java}
// pem file, not a certificate
buf, err = ioutil.ReadFile(""../../testdata/ec-key.pem"")
if err != nil {
   t.Fatalf(""Cannot read certificate from file system"")
}
_, err = GetCertificate([]byte(buf))
t.Logf(""GetCertitificate error %v\n"", err)
if err == nil {
   t.Fatalf(""Should have failed since file is keyfile"")
}{code}
As an aside, there's a small typo in the Fatal error message in util.go ({color:#d04437}Certificatre{color}):
{code:java}
if err != nil {
   log.Fatal(""PEM Certificatre Parse failed"")
   return nil, errors.New(""PEM Certificate Parse failed"")
} //else {
{code};;;","01/Jun/17 7:42 PM;ChristopherFerris;[~rennman] this suggests it is a bug?;;;","21/Jul/17 8:04 AM;aambati;https://gerrit.hyperledger.org/r/#/c/11761/;;;",,,,,,,,,,,,,,,,,
ca.keyfile arguments typo in documents.,FABC-416,28042,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,nnao,nnao,nnao,27/Feb/18 8:01 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,28/Feb/18 9:00 AM,v1.1.0-alpha,,,,,,v1.1.0,v1.1.1,,,,,0,,,,,,"It needs to be ca.keyfile instead of ca-keyfile.
- docs/source/serverconfig.rst
- docs/source/users-guide.rst
- cmd/fabric-ca-server/config.go

{code:java}
vagrant@ubuntu-xenial:/opt/gopath/src/github.com/hyperledger/fabric-ca$ grep -r ""ca-keyfile"" ./
./docs/source/serverconfig.rst:    #      b) --ca-keyfile ../mykey.pem
./docs/source/users-guide.rst:file, delete the files specified by the ``ca.certfile`` and ``ca-keyfile``
./cmd/fabric-ca-server/config.go:#      b) --ca-keyfile ../mykey.pem
{code}",,aambati,denyeart,nnao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyz13:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,denyeart,nnao,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Feb/18 9:41 AM;aambati;https://gerrit.hyperledger.org/r/c/18451/;;;","27/Feb/18 10:02 AM;nnao;https://gerrit.hyperledger.org/r/#/c/18453/;;;","27/Feb/18 11:59 AM;denyeart;[https://gerrit.hyperledger.org/r/#/c/18453/] looks like the more comprehensive fix.;;;",,,,,,,,,,,,,,,,,
fabric-ca client add should defaul to '0' for maxenrollments,FABC-417,27245,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,31/Jan/18 1:24 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,09/Feb/18 12:22 AM,,,,,,,v1.1.0,,,,,,0,,,,,,"Currently, the behavior (an cmd-line help) for fabric-ca-client add is to default to '-1' for maxenrollments.  The correct behavior is to default to the server setting, i.e. '0'",,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyv4n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Feb/18 4:02 AM;skarim;https://gerrit.hyperledger.org/r/#/c/17377/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca key type and size configuration not working properly,FABC-418,28533,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,15/Mar/18 3:52 AM,17/Aug/18 5:12 AM,28/Oct/23 2:21 AM,17/Aug/18 5:12 AM,,,,,,,v1.3.0,,,,,,0,,,,,,"This is a symptom of a more systematic issue, but for the immediate purpose:
 We document under ""Algorithms and key sizes"", that ""The CSR can be customized"" and provide an example:
{code:java}
csr:
  key:
    algo: ecdsa
    size: 256
{code}
However, {{'key'}} is incorrect. It should read {{'keyrequest'}}

Furthermore when initializing or starting server, the environment variables have no effect (regardless of which version I use):
    {{FABRIC_CA_SERVER_CSR_KEYREQUEST_ALGO=ecdsa}}
    {{FABRIC_CA_SERVER_CSR_KEYREQUEST_SIZE=512}}
This still results in fabric-ca server using the default values of {{'ecdsa'}} and {{'256'}}

*However –*  if I actually include the above csr: key block configuration in my server's yaml file, we *do* honor the environment variables (which operationally is not very useful).

So the general issue: we do not honor environment variables for configuration elements which are not explicitly written to the config file. Since the default elements in {{cmd/fabric-ca-server/config.go}} are somewhat arbitrary, it turns out that we *cannot easily customize certain config options*. Key type and size are only one example – but it is a particularly thorny one for automation – once the server is initialized and the key is created, we cannot change it without:
 * artificially deleting the key and cert
 * adding the relevant config to the yaml file (with arbitrary, or even no values)
 * optionally setting the ENV variables
 * restarting the server

One solution would be to add all supported configuration elements to the generated server config file in {{cmd/fabric-ca-server/config.go}}

As an additional benefit, the user would have a ready, explicit, visual reference which documents our selected default values without resorting to <**gasp**> reading the documentation.",,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx03j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/May/18 2:56 AM;skarim;https://gerrit.hyperledger.org/r/21825;;;",,,,,,,,,,,,,,,,,,,
Generated ca certificate does not correspond to configuration,FABC-419,27925,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,zamrokk,zamrokk,22/Feb/18 11:01 PM,27/Jul/19 11:50 PM,28/Oct/23 2:21 AM,28/Feb/18 3:32 AM,v1.0.5,,,,,,v1.0.5,,,,,,0,,,,,,"I am using the ca-fabric-server on v1.0.5 , then when I change the configuration, the generated certificates have unwanted overridden and default values 
 * Country is overriden
 * State & locality are set to default values

 

For the CA :

 

!image-2018-02-22-14-58-09-819.png!

 

For the peerAdmin :

 

!image-2018-02-22-14-54-18-302.png!

 

For a lambda user :

 

!image-2018-02-22-14-57-32-142.png!

I have problem later when the enrolled lambda user is trying to get blocks asking the peer. The signature does not macth. No idea if this above is the root cause of all

 

Error : org.hyperledger.fabric.sdk.exception.ProposalException: getConfigBlock for channel channel1 failed with peer peer-sn.byomc.com.  Status FAILURE, details: Sending proposal to peer-sn.byomc.com failed because of: gRPC failure=Status\{code=UNKNOWN, description=Failed to deserialize creator identity, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority (possibly because of ""x509: ECDSA verification failure"" while trying to verify candidate authority certificate ""ca.byomc.com""), cause=null}

 ",,aambati,smithbk,zamrokk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Feb/18 10:54 PM;zamrokk;image-2018-02-22-14-54-18-302.png;https://jira.hyperledger.org/secure/attachment/14670/image-2018-02-22-14-54-18-302.png","22/Feb/18 10:54 PM;zamrokk;image-2018-02-22-14-54-33-115.png;https://jira.hyperledger.org/secure/attachment/14669/image-2018-02-22-14-54-33-115.png","22/Feb/18 10:54 PM;zamrokk;image-2018-02-22-14-54-44-572.png;https://jira.hyperledger.org/secure/attachment/14668/image-2018-02-22-14-54-44-572.png","22/Feb/18 10:57 PM;zamrokk;image-2018-02-22-14-57-32-142.png;https://jira.hyperledger.org/secure/attachment/14667/image-2018-02-22-14-57-32-142.png","22/Feb/18 10:58 PM;zamrokk;image-2018-02-22-14-58-09-819.png;https://jira.hyperledger.org/secure/attachment/14666/image-2018-02-22-14-58-09-819.png",,,,,,,,,,,,,,,,,,,,,,"1|hzyyhz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,smithbk,zamrokk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Feb/18 12:16 AM;aambati;[~zamrokk]  i think this problem was fixed in 1.1. Can you try to reproduce this problem in 1.1? Also, it would help if you can provide detailed steps to reproduce this problem.;;;","23/Feb/18 12:24 AM;zamrokk;Here is my configuration on ca.yaml

 

###########################################################################
# Certificate Signing Request section for generating the CA certificate
###########################################################################
csr:
 cn: ca.byomc.com
 names:
 - C: FR
 ST:
 L:
 O: byomc
 OU: france
 hosts:
 - ca.byomc.com
 ca:
 pathlen:
 pathlenzero:
 expiry:

 

 

Then just do an enroll for PeerAdmin and a new user, display what is stored on each certificates on .pem files 

Can go here to display info about certs : https://www.sslshopper.com/certificate-decoder.html;;;","23/Feb/18 1:44 PM;aambati;[~zamrokk] i could not reproduce this in 1.1. I was right that this problem is fixed in 1.1. Would be able to update your CA server to 1.1?;;;","23/Feb/18 6:40 PM;zamrokk;I just tested it on V1.1.0-alpha

 

Got same issues;;;","23/Feb/18 9:31 PM;aambati;this problem was fixed by [https://gerrit.hyperledger.org/r/c/16085/] , which went in on Dec 13th. I think this should be in alpha. This is what i did to reproduce:

*fabric-ca-server start -b admin:admin -c config/config.yaml -d*

config.yaml has this section:

{{csr:}}
 {{  cn: ca.byomc.com}}
 {{  names:}}
 {{    - C: FR}}
 {{      ST:}}
 {{      L:}}
 {{      O: byomc}}
 {{      OU: france}}
 {{  hosts:}}
 {{    - ca.byomc.com}}
 {{    - localhost}}
 {{  ca:}}
 {{    expiry:}}
 {{    pathlenzero:}}
 {{    pathlen:}}

and my ca cert looks like this:

{{Data:}}
 {{Version: 3 (0x2)}}
 {{Serial Number:}}
 {{29:a2:c9:0b:a6:f2:b2:17:74:0c:b9:bf:2c:d0:bd:cc:b7:55:79:c7}}
 {{Signature Algorithm: ecdsa-with-SHA256}}
 {{Issuer: C=FR, O=byomc, OU=france, CN=ca.byomc.com}}
 {{Validity}}
 {{Not Before: Feb 23 04:36:00 2018 GMT}}
 {{Not After : Feb 19 04:36:00 2033 GMT}}

 ;;;","23/Feb/18 10:26 PM;zamrokk;Which image do you use ?;;;","24/Feb/18 12:07 AM;aambati;i built my image based on the latest code from master branch;;;","24/Feb/18 12:10 AM;zamrokk;Have you tried on image V1.1.0-alpha ?;;;","24/Feb/18 1:13 AM;aambati;I tried with v1.1.0-alpha as well. I am not able to reproduce problem.

before i ran bin/fabric-ca-server start -b admin:admin -c configs/config11/config.yml, there was nothing in the configs/config11 directory except for config.yml;;;","24/Feb/18 5:16 AM;aambati;[~zamrokk] can you pls tell me if you are able to get this working;;;","26/Feb/18 10:53 PM;smithbk;What is the status of this?  Please update.;;;","27/Feb/18 12:08 AM;zamrokk;I think I understand more or less why we have theses differences.

 

1/ the peer admin certificate is created when we build the orderer block and all the certificates for the network using this command ""cryptogen generate --config crypto-config.yaml"" 

This uses default values country=US etc ...

 

2/ THEN when we start the ca , we can point to a ca.yaml file like this ""fabric-ca-server start -c /shared/ca.yaml"" where the csr block can be defined as below
{quote}csr:
 cn: ca.org1.byomc.com
 names:
 - C: FR
 ST:
 L:
 O: byomc
 OU: france
 hosts:
 - ca.org1.byomc.com
{quote}
so all certificates for new users will follow this structure. But as we see on printscreen, still values like country are not displayed;;;","27/Feb/18 12:19 AM;aambati;[~zamrokk] i don't completely understand your last comment. So, you generate one set of certs using cryptogen and others using fabric ca. Are you bootstrapping CA server to use same root cert that cryptogen used to generate certs? I guess that aside, certificates generate by the CA server with the CSR you specified should have those values as well. When I try to reproduce this problem, enrollment cert did indeed have C=FR in the Issuer.;;;","27/Feb/18 10:07 AM;aambati;Based on my conversation with [~zamrokk] , this does not seem to be Fabric CA issue. CA server has been bootstrapped with the cryptogen generated CA cert , so server will not use the csr section defined in the server config. Also, enrollment certificate issued by the server was indeed signed by this CA cert. From that perspective, it looks ok to me. But he is seeing the following error when he tries to fetch config block using Java SDK:

```Caused by: org.hyperledger.fabric.sdk.exception.ProposalException: getConfigBlock for channel channel1 failed with peer [peer-sn.byomc.com|http://peer-sn.byomc.com/]. Status FAILURE, details: Sending proposal to [peer-sn.byomc.com|http://peer-sn.byomc.com/] failed because of: gRPC failure=Status\{code=UNKNOWN, description=Failed to deserialize creator identity, err the supplied identity is not valid: x509: certificate signed by unknown authority (possibly because of ""x509: ECDSA verification failure"" while trying to verify candidate authority certificate ""[ca.org1.byomc.com|http://ca.org1.byomc.com/]""), cause=null}

```;;;","28/Feb/18 3:31 AM;aambati;problem was resolved by following the solution outlined in the troubleshooting section in the CA userdocs: https://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#troubleshooting;;;",,,,,
Improve GetID function of chaincode client library to return a unique ID across MSPs,FABC-420,21325,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,05/Oct/17 6:33 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,22/Feb/18 5:28 AM,,,,,,,v1.1.0,,,,,,0,,,,,,"The GetID function currently returns:
{code}
base64 encoding of ""x509::<subjectDN>::<issuerDN>""
{code}
However, it is possible for a rogue MSP to create both a subjectDN and issuerDN to match that of an identity from another MSP.

In order to prevent this, the GetID function will be changed to return:
{code}
based 64 encoding of ""<MSPID>::<subjectDN>""
{code}
The <subjectDN> is unique within an MSP and the MSPID makes it unique across MSPs.
Since the MSPID is part of the serialized identity and is used to verify signature, it is impossible
for a rogue MSP to forge an ID which matches an ID of an identity in another MSP.
Also, use of the MSPID means we do not need to include the issuer's DN.",,denyeart,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyiev:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,smithbk,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Oct/17 6:44 PM;smithbk;https://gerrit.hyperledger.org/r/14225
https://gerrit.hyperledger.org/r/15353;;;","20/Feb/18 3:51 AM;denyeart;Keith, if an API is going to change, it should be done before 1.1 gets released.  I've changed to 1.1 Bug so that this remains on the radar.;;;","22/Feb/18 5:29 AM;smithbk;No API would change.  This is not needed for v1.1;;;",,,,,,,,,,,,,,,,,
fix fabric-ca document typo (docker/examples/client-server-flow/README.md),FABC-421,15600,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,hanhzf,hanhzf,hanhzf,06/Apr/17 11:12 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,23/Apr/17 9:51 PM,,,,,,,v1.0.0,,,,,,0,,,,,,"in files *docker/examples/client-server-flow/README.md*, 

```
If you are using certificates or config files outside of the default values,
be sure to save the desired files to the developer's local directories. The
certificates should be saved to the `/var/hyperledger/fabric/.fabric-ca` directory
and the config files should be saved to the `{color:#d04437}var/hyperledger/fabric_ca_config{color}`
directory.
```

I think we have missed the preceding '/' in the {color:#d04437}RED{color} part, that should be {color:#59afe1}""/var/hyperledger/fabric_ca_config""{color}",,hanhzf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpcf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,hanhzf,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/17 11:15 PM;hanhzf;fix submitted: http://gerrit.hyperledger.org/r/7795;;;",,,,,,,,,,,,,,,,,,,
Revoke user with long cert serial and aki # failed : string len limitation???,FABC-422,18034,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,aambati,l1nux,l1nux,15/Jun/17 9:36 PM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,30/Jun/17 6:12 AM,v1.0.0-alpha2,,,,,,v1.0.0-alpha2,,,,,,0,MembershipServices,,,,,"This is for fabric-ca alpha2 (server) version.

 

GetCertificateWithID()  function in certdbaccessorgo.go file, in d.dd.Get(...), the sql  statement ,string, for some reasons get chopped off (max length limitation?) then db query return a  misleading error message : ""no rows in result set"".  I suspected your test cases do not include test case with long serial and aki number.  The tested failed serial number was 5af3c074e596618a9f79be8bf44e17feebb9a202  and aki was 2a7a722ad8c14a2f26dd0986eabd73cdd995f794{color:#dcdcaa}
{color}

Also the sql query needs the single quote to enclose the serial and aki numbers else your sql query will fail (at least my test failed without the single quote)

You definitely need to check all your go statements which are doing such sql queries formation... I make fabric server to go further and it also failed at further statement which was related to the similar situation (sql statement, string, get chopped off).

 ","Tested on Mac OX X EI v10.11.6

Fabric ca server :

Tested with docker image version x86_64-1.0.0-alpha2

Also tested with non-docker image, build own fabric-ca executable, alpha 2 build

 

Client :

Tested locally using sdk version
 {color:#ce9178}1.0.0-snapshot.18{color}",aambati,l1nux,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,FAB-5065,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzy2xz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,l1nux,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jun/17 2:05 AM;aambati;[~l1nux] what database did you use in your test? Are you using fabric-ca-client or SDK? It would be good if you can provide us the repro steps. Thanks;;;","29/Jun/17 2:59 AM;l1nux;Not sure what you meant by 'repro' steps, can you be very specific.

We use node sdk (not command lines) on the client site to create and delete user (I will have to assume you know how to set up node sdk environment).

Also the problem was with the CA sqllite db, we didn't change the db type, we used it as it is.;;;","29/Jun/17 4:51 AM;aambati;By repro steps i meant, exact steps to reproduce the problem, which makes it easy for us to reproduce the problem. In any case, based on our chat , I did write a node app that uses node sdk and tried to reproduce the problem, but could not.  I did get ""

{color:#d04437}Error: fabric-ca request revoke failed with errors [[\\\\{""code"":10003,""message"":""Failed to retrieve certificate for the provided serial number and AKI: sql: no rows in result set""}|file://%7B/]]"" {color}

when i used aki with colons (eg. keyid:28:38:46:DD:92:EC:DD:20:9C:C7:45:A8:8A:03:AF:C9:6A:E8:F4:86)

Here is the sample app, i wrote:
 {color:#8eb021}'use strict';{color}
 {color:#8eb021}var log4js = require('log4js');{color}
 {color:#8eb021}var caClient = require('fabric-ca-client');{color}
 {color:#8eb021}var User = require('fabric-client/lib/User.js');{color}
 {color:#8eb021}var X509 = require('x509');{color}

{color:#8eb021}var caservice = new caClient(""http://localhost:7054"", null, """", null){color}
 {color:#8eb021}caservice.enroll(\{ enrollmentID: ""admin"", enrollmentSecret: ""admin"" }).then(function (enrollResponse) \{{color}
 {color:#8eb021}console.log(""successfully enrolled"", enrollResponse);{color}
 {color:#8eb021}varuser=newUser(\{ enrollmentID:""admin"" });{color}
 {color:#8eb021}user.setEnrollment(enrollResponse.key, enrollResponse.certificate, ""blah"").then(function () \{{color}
 {color:#8eb021}varcert=X509.parseCert(caClient.normalizeX509(enrollResponse.certificate));{color}
 {color:#8eb021}varakiString=cert.extensions.authorityKeyIdentifier;{color}
 {color:#8eb021}vararr=akiString.split(':');{color}
 {color:#8eb021}if (arr[0] !=='keyid') \{{color}
 {color:#8eb021}console.log('Found an Autheority Key Identifier we do not understand: first segment is not ""keyid"": %s', akiString);{color}
 {color:#8eb021}arr.shift(); // remove the 'keyid'{color}
 {color:#8eb021}varaki=arr.join('');{color}
 {color:#8eb021}console.log(""Serial: %s, aki: %s"", cert.serial, aki);{color}
 {color:#8eb021}returncaservice.revoke(\{ serial:cert.serial, aki:aki }, user).then(function (revokeresponse) \{{color}
 {color:#8eb021}console.log(""successfully revoked"", revokeresponse);{color};;;","29/Jun/17 5:49 AM;markparz;[~aambati] Good to recreate, but should also see if this can be recreated on the Release Candidate, this is using Alpha 2, which is really pretty old at this point.;;;","29/Jun/17 6:30 AM;aambati;[~markparz] i was not able to reproduce the problem with either RC1 or alpha2 ;;;","29/Jun/17 8:52 PM;l1nux;A work session has been scheduled (Jun 29)  with AnilKumar  to reproduce the problem.;;;","30/Jun/17 5:32 AM;l1nux;Thanks to Anil for pointing out there could be a linefeed at the end of aki string.  I double checked and indeed there was linefeed at the end of aki string.  Guess I have to find out what happened at my end. 

 

This ticket can be closed now;;;",,,,,,,,,,,,,
Remove fabric-ca-server extraneous command-specific flags,FABC-423,15584,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,06/Apr/17 3:42 AM,19/Jul/18 7:04 AM,28/Oct/23 2:21 AM,21/Apr/17 10:39 PM,v1.0.0,,,,,,v1.0.0,,,,,,0,,,,,,"There are extra flags that can be seen as follows which should not be present.
All fabric-ca-server flags are global flags, and all that are in the ""Flags"" section should be removed.

{code}
# fabric-ca-server init -h

Generate the key material needed by the server if it doesn't already exist

Usage:
  fabric-ca-server init [flags]

Flags:
      --ca.certfile string    PEM-encoded certificate file used for certificate issuance (default ""cert.pem"")
      --ca.keyfile string     PEM-encoded key file for certificate issuance (default ""key.pem"")
      --tls.certfile string   PEM-encoded certificate file used for TLS (default ""cert.pem"")
      --tls.keyfile string    PEM-encoded key file used for TLS (default ""key.pem"")

Global Flags:
      --address string                         Listening address of fabric-ca-server (default ""0.0.0.0"")
  -b, --boot string                            The user:pass for bootstrap admin which is required to build default config file
      --ca.chainfile string                    PEM-encoded CA chain file (default ""ca-chain.pem"")
  -n, --ca.name string                         Certificate Authority name
  -c, --config string                          Configuration file (default ""fabric-ca-server-config.yaml"")
      --csr.cn string                          The common name field of the certificate signing request to a parent fabric-ca-server
      --csr.hosts stringSlice                  A host name in a certificate signing request to a parent fabric-ca-server
      --csr.serialnumber string                The serial number in a certificate signing request to a parent fabric-ca-server
      --db.datasource string                   Data source which is database specific (default ""fabric-ca-server.db"")
      --db.tls.certfiles stringSlice           PEM-encoded list of trusted certificate files
      --db.tls.client.certfile string          PEM-encoded certificate file when mutual authenticate is enabled
      --db.tls.client.keyfile string           PEM-encoded key file when mutual authentication is enabled
      --db.type string                         Type of database; one of: sqlite3, postgres, mysql (default ""sqlite3"")
  -d, --debug                                  Enable debug level logging
      --ldap.enabled                           Enable the LDAP client for authentication and attributes
      --ldap.groupfilter string                The LDAP group filter for a single affiliation group (default ""(memberUid=%s)"")
      --ldap.url string                        LDAP client URL of form ldap://adminDN:adminPassword@host[:port]/base
      --ldap.userfilter string                 The LDAP user filter to use when searching for users (default ""(uid=%s)"")
  -p, --port int                               Listening port of fabric-ca-server (default 7054)
      --registry.maxenrollments int            Maximum number of enrollments; valid if LDAP not enabled
      --tls.clientauth.certfiles stringSlice   PEM-encoded list of trusted certificate files
      --tls.clientauth.type string             Policy the server will follow for TLS Client Authentication. (default ""noclientcert"")
      --tls.enabled                            Enable TLS on the listening port
  -u, --url string                             URL of the parent fabric-ca-server

{code}

{code}
# fabric-ca-server start -h

Start the fabric-ca server

Usage:
  fabric-ca-server start [flags]

Flags:
  -a, --addr string           Listening address (default ""0.0.0.0"")
      --ca.certfile string    PEM-encoded certificate file used for certificate issuance (default ""cert.pem"")
      --ca.keyfile string     PEM-encoded key file for certificate issuance (default ""key.pem"")
  -p, --port int              Listening port (default 7054)
      --tls.certfile string   PEM-encoded certificate file used for TLS (default ""cert.pem"")
      --tls.keyfile string    PEM-encoded key file used for TLS (default ""key.pem"")

Global Flags:
      --address string                         Listening address of fabric-ca-server (default ""0.0.0.0"")
  -b, --boot string                            The user:pass for bootstrap admin which is required to build default config file
      --ca.chainfile string                    PEM-encoded CA chain file (default ""ca-chain.pem"")
  -n, --ca.name string                         Certificate Authority name
  -c, --config string                          Configuration file (default ""fabric-ca-server-config.yaml"")
      --csr.cn string                          The common name field of the certificate signing request to a parent fabric-ca-server
      --csr.hosts stringSlice                  A host name in a certificate signing request to a parent fabric-ca-server
      --csr.serialnumber string                The serial number in a certificate signing request to a parent fabric-ca-server
      --db.datasource string                   Data source which is database specific (default ""fabric-ca-server.db"")
      --db.tls.certfiles stringSlice           PEM-encoded list of trusted certificate files
      --db.tls.client.certfile string          PEM-encoded certificate file when mutual authenticate is enabled
      --db.tls.client.keyfile string           PEM-encoded key file when mutual authentication is enabled
      --db.type string                         Type of database; one of: sqlite3, postgres, mysql (default ""sqlite3"")
  -d, --debug                                  Enable debug level logging
      --ldap.enabled                           Enable the LDAP client for authentication and attributes
      --ldap.groupfilter string                The LDAP group filter for a single affiliation group (default ""(memberUid=%s)"")
      --ldap.url string                        LDAP client URL of form ldap://adminDN:adminPassword@host[:port]/base
      --ldap.userfilter string                 The LDAP user filter to use when searching for users (default ""(uid=%s)"")
      --registry.maxenrollments int            Maximum number of enrollments; valid if LDAP not enabled
      --tls.clientauth.certfiles stringSlice   PEM-encoded list of trusted certificate files
      --tls.clientauth.type string             Policy the server will follow for TLS Client Authentication. (default ""noclientcert"")
      --tls.enabled                            Enable TLS on the listening port
  -u, --url string                             URL of the parent fabric-ca-server

{code}",,baohua,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4fr:",,,,,,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,baohua,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Apr/17 9:10 AM;smithbk;See http://gerrit.hyperledger.org/r/7911;;;","11/Apr/17 10:19 AM;smithbk;posted to wrong jira item ... deleting this comment;;;","11/Apr/17 12:26 PM;baohua;So why would the `git clone` issue affect this?;;;","14/Apr/17 11:27 PM;smithbk;Ooppss ... the 2nd comment should have been posted to another jira item, not this one.  I updated the comment.;;;",,,,,,,,,,,,,,,,
Enhance fabric-ca-client to retry failures caused by outdated CRI,FABC-424,30651,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,26/May/18 3:05 AM,03/Dec/19 9:15 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,idemix,,,,,"The way the revocation handle works is that once the RHPool has been exhausted, a new set  of revocation handles (RH) are generated. This means that any identities that were previously enrolled and received a SignerConfig, now have an outdated CRI. All credentials with an old CRI will no longer be valid, and requests made to the server will get rejected with the following message:
{code:java}
Failed to verify the token: signature is based on an invalid revocation epoch public key: EpochPKSig invalid
{code}
When a user encounters this message they will have to get a new CRI. Currently, this is a manual process. Once the user sees this error they have go invoke the *getcri* command to update their CRI in their SignerConfig and then re-invoke their original requests. This logic can be made smarter

The the client can detect the reason for failure based upon the error code, and if its because of an old CRI the client on behalf of the user can make a request to update the CRI in the SignerConfig and then reissue the original request. This will improve the usability of the Fabric CA client.",,dubovitskaya,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-588,,,,,,,,,"1|hzzcrb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,dubovitskaya,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Aug/18 7:23 AM;Clayton Sims;Is this required for v1.3 or does it wait for 1.4 [~smithbk] [~denyeart];;;","28/Aug/18 1:28 AM;dubovitskaya;This belongs to the Revocation epic - changed it (and therefore to 1.4 since revocation is deferred);;;",,,,,,,,,,,,,,,,,,
Configuration management for fabric-ca,FABC-425,14316,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,keithsmith,baohua,baohua,24/Jan/17 4:07 PM,21/Jul/18 4:15 AM,28/Oct/23 2:21 AM,06/Apr/17 10:30 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Currently there are several (default) configuration path/files in the code and documentation, e.g., {{/var/hyperledger/fabric/.ca}}, {{/etc/hyperledger/fabric-ca}} and {{~/.ca}}. 

This is a little confusing, as discussed with [~greg.haskins] and [~JonathanLevi].

IMHO, it would be better to solve soon.

3 steps can be taken:

1. Use unique configuration path/files by default, e.g., /etc/hyperledger/fabric-ca.
2. Write clear documentation describing where are the configurations, what they are used.
3. Support passing configuration variables through environment variables and config params.",,baohua,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxiwv:",,,,Unset,,Sprint 10 - Membership Service,,,,,,,,,,,,,Unset,,,,,,,,,,,baohua,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jan/17 4:13 PM;JonathanLevi;Thank you [~baohua] for opening this ticket. Adding [~lehors] as well to this. We had a chat about this the other day (last week) on Slack, and I, too, believe that at this point we should probably use *fabric-ca* across the board.

(Other) suggestions welcome.

;;;","24/Jan/17 9:07 PM;smithbk;I'd like to make the server and client different as I think it makes the most sense.

For server, the default home directory is /etc/hyperledger/fabric-ca and the default config file name in that directory is server-config.json (or we may soon support yaml, in which case it would be server-config.yaml).

For client, the default home directory is $HOME/.fabric-ca and the default config file name in that directory is client-config.json (or client-config.yaml).

Thoughts?;;;","28/Jan/17 3:12 AM;smithbk;I'm about to begin working on this per my previous comment.
I think this is consistent with the market.;;;","28/Jan/17 6:48 AM;JonathanLevi;[~keithsmith] Sure thing - thanks for picking this up!;;;","06/Apr/17 10:32 AM;smithbk;The new config work based on cobra/viper took care of this.  The readthedocs now specifies clearly where config files are, and we also support config through env vars and command line parms.
;;;",,,,,,,,,,,,,,,
Allow logging level for components to be reset dynamically in CAs,FABC-426,18249,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,hancockp,hancockp,17/Jun/17 2:52 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,fabric-ca,Logging,SRE,,,"As an SRE I want to be able to reset the logging level for components in a CA to the initial value (as at end of start up) in a similar way to how I can reset the level for components on a Peer using the
{code:java}
peer logging revertLevels{code}
command. The values should be reset without having to restart the CA.",,hancockp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6pz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,hancockp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca update fabric-ca_setup.sh to use pollSever,FABC-427,21071,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,29/Sep/17 4:51 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,05/Oct/17 5:59 PM,,,,,,,v1.1.0,,,,,,0,,,,,,"For consistency, and also to coordinate the standard polling interval, fabric-ca_setup.sh is updated to pollSever.",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyhov:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Accept OAuth or other token in fabric-ca enrollment request,FABC-428,29331,,Story,To Do,FABC,Fabric CA,software,denyeart,,,High,,,toddinpal,toddinpal,12/Apr/18 2:44 AM,26/Aug/19 8:04 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,3,,,,,,"In an enterprise environment, fabric SDK or fabric application would not have access to user credentials. The User would authenticate against Identity Provider or Authentication Provider and will pass some form of token to the fabric SDK application. The SDK application can pass through the token down to fabric-ca and fabric-ca should be able to authenticate the user based on the token and enroll the user. We should support OAuth tokens at a minimum, although ideally the API change would support any form of token and leave it to the fabric-ca plug-in to deal with it.",,aambati,bram209,kiranthakkar,marija.popovic,mastersingh24,nao,nyet,toddinpal,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzz5kf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,bram209,kiranthakkar,marija.popovic,mastersingh24,nao,nyet,toddinpal,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/May/19 11:54 PM;bram209;Any update on this?;;;","26/Aug/19 8:04 AM;mastersingh24;Personally, I think fabric-ca needs to shed it's user store completely.;;;",,,,,,,,,,,,,,,,,,
provide switch/option for configuration file location,FABC-429,13040,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,,gbolo,gbolo,18/Oct/16 12:08 PM,28/Jul/19 12:00 AM,28/Oct/23 2:21 AM,04/Dec/17 2:05 AM,,,,,,,,,,,,,0,,,,,,"It would be nice to have the option of specifying full path of configuration file like:

peer node start -c /path/to/core.yaml

I am aware that we can manipulate where the peer looks for configs with GOPATH and simply in its pwd. Also aware that we can override options with ENV VARS. However specifying the default config location as a parameter seems like a more natural way of accomplishing this.",,gbolo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxd4v:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,gbolo,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Dec/17 2:07 AM;gbolo;env var *FABRIC_CFG_PATH* addresses this issue;;;",,,,,,,,,,,,,,,,,,,
Implement Validity Period in ECerts (using the standard X.509 v3 fields),FABC-430,12441,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,JonathanLevi,JonathanLevi,17/Aug/16 3:33 PM,26/Mar/19 8:38 PM,28/Oct/23 2:21 AM,26/Mar/19 8:38 PM,,,,,,,v1.0.0,,,,,,0,MembershipServices,,,,,"Please see also an earlier item discussing this requirement in [issue-474|https://github.com/hyperledger/fabric/issues/474]

Signed certificates are used to verify identities, affiliations and/or other attributes. ECerts in Fabric (MS) are used after successful enrollment (at the early steps on the on-boarding of users to the permissioned chain). Currently ECerts do not expire.

Users can change jobs, businesses may change ownership, private keys get leaked, and other events might warrant a revocation of a certificate. However, while a certificate has not been actively revoked ""ahead of time"", Fabric (Membership Services) should not provide certificates that do not expire on one hand. Similarly, we should be careful enough as to not leak sensitive information relating to a certificate's creation time.

A certificate validity period is the time interval during which the issuer/signer warrants that one should respect the certificate between the standard *Not Before* and *Not After* X.509 v3 fields.",,elli-androulaki,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-598,,,,,,,,,,,,,,,,,FAB-4138,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-594,,,,,,,,,"1|hzxb53:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Feb/17 5:58 PM;elli-androulaki;Hi [~jonathan], is this something we would use a real time for or a logical clock? Related discussion is the one in FAB-145, which I believe we have not yet concluded :(;;;","06/Apr/17 10:57 AM;smithbk;fabric-ca supports a configurable validity period and revocation, and MSP in fabric checks Not Before and Not After fields.
Is this requirement met?  Not sure about the leaking sensitive info about cert creation time, since Not Before will be the creation time ...
unless we obfuscate that by choosing a random earlier Not Before time, a random amount of time prior to the current time.
Is this needed?;;;",,,,,,,,,,,,,,,,,,
Persist flags and env variables to config file when creating it,FABC-431,24695,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,smithbk,smithbk,03/Dec/17 12:36 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,1,,,,,,"We should be able to use our struct introspection code to write out the config file with comments defined in tags.  This means we can delete the server and client template files in the code and will be easier to maintain.  But the bigger change is to support options to save flags and env variables to the config file when creating it, or with an option to modify it after it is created.  Something like:

   fabric-ca-server cfg update --ca.name foo",,nyet,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-763,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6ov:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,nyet,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Automatically generate TLS certificate for fabric-ca-server,FABC-432,18636,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,smithbk,smithbk,24/Jun/17 5:26 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,30/Aug/17 3:31 AM,,,,,,,v1.1.0,,,,,,0,Release-planning-1.1,,,,,"A fabric CA server (both root and intermediate) should automatically generate a TLS certificate for itself by doing the functional equivalent of a ""fabric-ca-client enroll --enrollment.profile tls"" to itself; however, it should not need to send an HTTP request but should be done internally.  The default expiration should be the same as for the CA cert of the server.",,mplisov,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,FABC-512,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx3pz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mplisov,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
REST APIs for managing CAs and profiles,FABC-433,26886,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,smithbk,smithbk,18/Jan/18 4:51 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Fabric CA should expose the following to read CA and profile info.
It is read-only currently, but the APIs position us well to support write in the future if needed.

1) GET /api/v1/ca
    Returns a list of all CAs managed by the server, and the profiles for each CA.  Similar to:
{code}
     {
        ""ca"": {
           ""default"": {
                 ""profile"": {
                      ""default"": {
                            ...
                      }
                 }
            }
     }
{code}

2) GET /api/v1/ca/<CAName>
    Returns info for a single CA named <CAName>

3) GET /api/v1/ca/<CAName>/profile
     Returns all profile info for a single CA name <CAName>

4) GET /api/v1/ca/<CAName>/profile/<profileName>
     Returns only info for profile <profileName> of CA <CAName>
    ",,roybox,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6tz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,roybox,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"fabric-ca ""make unit-tests"" failure with too many file descriptors",FABC-434,18313,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,19/Jun/17 10:29 PM,21/Jul/18 4:15 AM,28/Oct/23 2:21 AM,24/Jun/17 2:00 AM,,,,,,,,,,,,,0,,,,,,"fabric-ca's ""make unit-tests"" now fails with OSX defaults max file descriptor settings of 256.
The README.md should be updated to warn users of this and tell them to increase the
max file descriptor setting.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzy4pj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Fabric_CA upgrade: Nice to document expected behavior to changes to user details in configuration file,FABC-435,25500,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,Nishi,Nishi,13/Dec/17 12:22 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"During migration from 1.0.4 to 1.1:

-------------------------------------------
 # Start 1.0.4 fabric_ca_server & fabric_ca_client
 # Load users from configuration file.
 # Stop 1.0.4 fabric_ca_server & fabric_ca_client
 # Now user can choose to modify(update, remove) or add a new user in configuration file before migrating to 1.1 fabric_ca_server and 1.1 fabric_ca_client.

    5.   Output/Result for step4 above:

    When a new user is added, this user gets added to DB.

    Where as modifications have no impact on CA database.

   since the behavior is not as expected during modify it would be nice to document for customers what to expect during a modification and addition of user details via a configuration file (before migration of fabric_ca_servers). 

     ",,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6pb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca bare root affiliations in config require empty list,FABC-436,27981,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,luomin,rennman,rennman,24/Feb/18 9:53 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,1,,,,,,"I'll tag this as an improvement, but honestly, I think it's a bug.

Coding a root affiliation in the fabric-ca-server's configuration file require you to code an empty list of child nodes in order to be recognized, e.g. this:
{code:java}
affiliations:
   bacteria:
   archaea:
   eukaryota:{code}
      does not work. This does:
{code:java}
affiliations:
   bacteria: []
   archaea: []
   eukaryota: []
{code}",,denyeart,luomin,nyet,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-160,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6x3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,luomin,nyet,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Feb/18 7:10 PM;luomin;hi [~rennman]   do you want this be mentioned in some docs, or any expected 'improvement' you are thinking about?;;;","27/Feb/18 1:13 AM;rennman;Ideally, I would prefer that it not require the user to code the {{'[]'}} for consistency.

For example, when using the 'affiliations add' command, the {{'[]'}} is not required.;;;","23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;",,,,,,,,,,,,,,,,,
 There is no way to change the CN for server's default tls certificate,FABC-437,27037,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,vieiramanoel,vieiramanoel,24/Jan/18 12:10 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,3,should,,,,,"When starting fabric-ca-server with tls and letting it to generate tls cert files the tls cn is the docker container id, not the cn set in csr on [^fabric-ca-config.yaml]

and starting it
{code:java}
fabric-ca-server start -b ""admin:adminpw"" -d -H ""/etc/hyperledger/fabric-ca-server/""
{code}
Then decoding tls-ca.pem
{code:java}
openssl x509 -in tls-cert.pem -text
{code}
I get
{code:java}
Certificate:
Data:
Version: 3 (0x2)
Serial Number:
46:5f:f1:3b:ac:7f:4c:d7:c3:2f:c8:6b:2a:71:74:d9:f7:5f:d4:b7
Signature Algorithm: ecdsa-with-SHA256
Issuer: C=BR, ST=Distrito Federal, L=Brasilia, O=GoLedger, CN=ca.goledger.com
Validity
Not Before: Jan 23 21:27:00 2018 GMT
Not After : Jan 23 21:27:00 2019 GMT
Subject: C=BR, ST=Distrito Federal, L=Brasilia, O=GoLedger, CN=ea95d1d2d8c9
Subject Public Key Info:
Public Key Algorithm: id-ecPublicKey
Public-Key: (256 bit)
pub:
04:07:bb:48:f7:c2:f7:75:02:69:82:b7:d4:d4:a0:
a6:2a:74:2d:3c:f1:44:a4:6b:69:9b:e8:01:7a:d4:
ab:e5:d1:15:ad:83:c7:27:c5:e2:1d:74:b0:d1:17:
5a:09:fc:0f:8b:f2:a4:1c:e8:2b:73:90:66:5f:0c:
de:55:7b:58:f1
ASN1 OID: prime256v1
NIST CURVE: P-256
X509v3 extensions:
X509v3 Key Usage: critical
Digital Signature, Key Encipherment, Key Agreement
X509v3 Extended Key Usage:
TLS Web Server Authentication, TLS Web Client Authentication
X509v3 Basic Constraints: critical
CA:TRUE
X509v3 Subject Key Identifier:
BE:19:96:94:A5:43:93:04:7B:87:DA:8A:3A:9C:6C:2F:1A:97:E6:12
X509v3 Authority Key Identifier:
keyid:1F:E0:57:F1:9D:CD:6A:B9:3B:4A:EF:C8:B8:31:A5:55:D0:30:C3:44

Signature Algorithm: ecdsa-with-SHA256
30:45:02:21:00:91:61:c1:eb:3a:f1:70:17:a4:76:1d:38:93:
47:2e:2d:4f:88:3b:93:00:7a:c0:5d:9a:96:21:db:9a:1c:55:
ab:02:20:64:f7:e5:0e:ff:95:16:5d:54:dd:7e:cf:d0:6e:e9:
47:bd:da:58:03:f2:53:a3:d2:f1:63:d9:ac:41:06:fe:f
{code}
where
{code:java}
Subject: C=BR, ST=Distrito Federal, L=Brasilia, O=GoLedger, CN=ea95d1d2d8c9{code}
should be 
{code:java}
Subject: C=BR, ST=Distrito Federal, L=Brasilia, O=GoLedger, CN=ca.goledger.com{code}
""ea95d1d2d8c9"" is the docker container ID, instead of cn set in CSR inside [^fabric-ca-config.yaml]

 ",,denyeart,nyet,SimonOberzan,vieiramanoel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jan/18 12:12 PM;vieiramanoel;fabric-ca-config.yaml;https://jira.hyperledger.org/secure/attachment/14395/fabric-ca-config.yaml",,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6uf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,nyet,SimonOberzan,vieiramanoel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;",,,,,,,,,,,,,,,,,,,
Add troubleshooting section to fabric-ca user's guide,FABC-438,20863,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,16/Sep/17 10:08 PM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,28/Mar/18 11:48 PM,,,,,,,,,,,,,0,,,,,,Starting a troubleshooting section,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzygkv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Sep/17 10:10 PM;smithbk;https://gerrit.hyperledger.org/r/13547;;;",,,,,,,,,,,,,,,,,,,
"Automatically add attributes for enrollment ID, type, and affiliation",FABC-439,21335,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,06/Oct/17 4:12 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,08/Nov/17 12:31 AM,,,,,,,v1.1.0,,,,,,0,,,,,,"For convenience, automatically add the following 3 well-known attributes to a user at
registration time:
1) hf.EnrollmentID - the enrollment ID
2) hf.Type - the type of the identity (""user"", ""peer"", etc)
3) hf.Affiliation - the affiliation of the identity",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyigv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Oct/17 4:15 AM;smithbk;https://gerrit.hyperledger.org/r/14241 [FAB-6475] Add well-known attributes to identities;;;",,,,,,,,,,,,,,,,,,,
broken link,FABC-440,29915,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,03/May/18 8:45 PM,21/Jul/18 4:15 AM,28/Oct/23 2:21 AM,09/May/18 8:04 AM,,,,,,,,,,,,,0,,,,,,"[https://github.com/hyperledger/fabric/tree/release/core/chaincode/lib/cid/README.md]

should be

 

[https://github.com/hyperledger/fabric/tree/release-1.1/core/chaincode/lib/cid/README.md|https://github.com/hyperledger/fabric/tree/release/core/chaincode/lib/cid/README.md]",,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzz8mv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Have flag and env var for log level,FABC-441,24833,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,07/Dec/17 5:07 AM,28/Oct/18 12:13 AM,28/Oct/23 2:21 AM,28/Oct/18 12:13 AM,,,,,,,v1.4.0,,,,,,0,serviceability,,,,,Should have a flag and environment variable for setting the log level,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzzu87:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Jun/18 11:13 PM;skarim;https://gerrit.hyperledger.org/r/c/23449/;;;",,,,,,,,,,,,,,,,,,,
Fix/improve CA error handling and logging,FABC-442,16192,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,Clayton Sims,Clayton Sims,03/May/17 6:35 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,15/Aug/17 3:44 PM,,,,,,,v1.1.0,,,,,,0,Release-planning-1.1,Serviceability,,,,"In the process of fixing bug FAB-3468, I discovered that the problem was more systemic to many errors and was also impossible to fix without either changing code in CFSSL or by perfoming the error handling ourself.  The CFSSL code is a relatively small amount of code and is honestly overly complex and restrictive anyway, so I think the easiest and best way is to just do the error handling ourself.

The design points for error handling in the server are as follows.  This includes the logging of errors in the server, errors sent back to the client from the server, and generating an access log in the server.

1) Create our own http.Server so we can create an HTTP access log as well as logging of each request received and response sent very easily, i.e. in one place in the code.  This code is currently in CFSSL and can not be changed (or at least not very easily).

2) Don't log errors deep in the request handling path, but rather return back to our http.Server object and log the error associated with the response there.  This ensures that we log an error in one place rather than split across multiple logging statements.

3) Create our own augmented error class which contains both an HTTP status code and an error code, allowing us to easily convey which HTTP status code to log at the top level.

4) Simplify the server handler interface to return a response body object or an error.  If a non-augmented error is returned, translate it to a 500 error.  This allows us to easily return any HTTP status code.  Given the way CFSSL code was structured, it was only possible to return 400 and 500 errors, not a 401 for example.

5) Create a context object to represent a request in the server to which the handlers have access.  This allows us to share logic between handlers more easily and thus be more consistent in error handling.  Because of this object, we no longer have to pass information between handlers via HTTP headers; instead, there is a real object to represent the request and response context, so we are able to add additional fields to it.  It also prevents us from having to read the request body multiple times, which we were doing previously; instead, we read it once and store it in this context object.

Also note that the bug described in FAB-3468 was because of CFSSL's error handling.  As already stated, it only allows us to return 400 and 500 HTTP status code errors and is just not very good and is way to complex to follow.  So I am copying and modifying (simplifying) the CFSSL error handling code, including where the access log was being written.",,ChristopherFerris,Clayton Sims,denyeart,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-351,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx3nj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,Clayton Sims,denyeart,rennman,smithbk,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/May/17 5:14 PM;smithbk;https://gerrit.hyperledger.org/r/#/c/9339/

https://gerrit.hyperledger.org/r/#/c/9341/;;;","23/May/17 2:36 AM;Clayton Sims;I don't think this made alpha2 - should we change fix version to v1.0.0?;;;","24/May/17 10:28 PM;ChristopherFerris;I don't think these should be merged for 1.0.;;;","25/May/17 10:58 AM;denyeart;[~smithbk] Could you comment on why you think this must go into 1.0?  Is there a reason deferral to 1.1 would not be recommended?;;;","12/Jul/17 6:51 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/11567
https://gerrit.hyperledger.org/r/#/c/11569
https://gerrit.hyperledger.org/r/#/c/11571;;;","16/Aug/17 1:38 AM;rennman;Message should have been updated as part of multica test

https://gerrit.hyperledger.org/r/#/c/12479/;;;",,,,,,,,,,,,,,
Fabric CA doc review/improvements,FABC-443,17424,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,smithbk,smithbk,03/Jun/17 5:40 PM,17/Jul/19 11:49 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"The fabric-ca docs need a general review for accuracy and improvements.
This includes fabric-ca/docs/source/users-guide.rst, as well as comments in the server and client config files which are automatically generated.
Each section in the config files should clearly define how the section and field is used, etc.

Specific improvements include:
1) A description of how the CSR section is used in both the server and client config.
2) In the overview section, describe the cardinality relationships between server, CA, and root/intermediate CA and how/when to use each.
3) Describe the process by which to:
    a) Rotate the root CA signing cert, similar to:
{code}
(1) Use ""fabric-ca-server init"" to generate a new root CA cert, doing in another directory so as not to overwrite the existing one (2) Push the new root CA cert to fabric so that fabric trusts the new and the old equally for some period of time (3) Restart the root CA with the new root CA cert. (4) Enroll intermediate CAs with new root CA. (5) Enroll orderers, peers, and clients as needed with the intermediate CA. (6) Update fabric to forget the old root CA.
{code}
   b) Rotate an intermediate CA signing cert.",,denyeart,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx3p3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Feb/19 1:49 PM;denyeart;[~mastersingh24] I see you moved this to v1.4.1. Did you have specific actions in mind?  I know [~skarim] is working on operational doc for how to utilize Fabric CA to setup channel/peer/orderer config.  Are you also expecting to see items 1-3 addressed there?;;;",,,,,,,,,,,,,,,,,,,
Provide a fabric-ca version of cryptogen,FABC-444,19252,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,smithbk,smithbk,smithbk,14/Jul/17 12:37 PM,26/Aug/19 7:47 AM,28/Oct/23 2:21 AM,26/Aug/19 7:47 AM,,,,,,,,,,,,,4,,,,,,"This is currently done as a script which has the topology hard-coded.
See https://gerrit.hyperledger.org/r/#/c/10871/
But it needs to also support reading crypto-config.yaml more generally.
",,Claude-ZHENG,denyeart,Hangyu_FJH,joaquimpedrooliveira,noyonthe1,nyet,pvrbharg,qiang0723,smithbk,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-814,,,,,,,,,,,,"18/Jul/17 2:26 AM;pvrbharg;Brian K (Keith) Smith-20170714-1121.html;https://jira.hyperledger.org/secure/attachment/11692/Brian+K+%28Keith%29+Smith-20170714-1121.html","23/Aug/17 5:32 PM;Claude-ZHENG;byfn.sh;https://jira.hyperledger.org/secure/attachment/11923/byfn.sh","23/Aug/17 5:32 PM;Claude-ZHENG;fabric-ca-cryptogen-tls.sh;https://jira.hyperledger.org/secure/attachment/11924/fabric-ca-cryptogen-tls.sh","18/Jul/17 2:23 AM;pvrbharg;fabric-ca-cryptogen_consoleoutput_V1.log;https://jira.hyperledger.org/secure/attachment/11691/fabric-ca-cryptogen_consoleoutput_V1.log",,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzy8hj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,Claude-ZHENG,denyeart,Hangyu_FJH,joaquimpedrooliveira,noyonthe1,nyet,pvrbharg,qiang0723,smithbk,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jul/17 2:27 AM;pvrbharg;This is Bhargav and I tried getting this running in my SKYTAP hosted cloud and in a locally running VM on my laptop.

I did not succeed in being able to run this script. 

Attached is failure log and Keith knows this issue per our emails and sametime chats.

[^fabric-ca-cryptogen_consoleoutput_V1.log]

I am posting this comment in order to see this *not working issue* slip thru' the cracks.

 

Thanks.

 

 ;;;","12/Aug/17 3:22 AM;weeds;Talked with Gari/Keith,.. this seems like this requires more discussion.  This probably needs to not go into 1.1.;;;","12/Aug/17 3:23 AM;weeds;we probably need to put something like this over in samples.;;;","14/Aug/17 10:53 PM;noyonthe1;We are using hyperledger/fabric 1.0.0 to go into production in 15 days. We are not able to generate certificates with crypto-gen that is CA compatible, with our topology. The success of our project depends on this feature. We request you to move this implementation to a higher priority. ;;;","21/Aug/17 4:02 PM;Claude-ZHENG;hi, thanks for this script about using ca instead of crytogen. and i run it locally with the fabric1.0.1  I found there is no tls cert created but all other cets and keys seemed to be fine.

Ah, it works, i forget to change the ca path in the top of this scripts. Thanks. And i'll check its validity by using those certs and keys to create a network.;;;","23/Aug/17 5:35 PM;Claude-ZHENG;I just make some change with the sript and that runs well with tls enable. And i have uploaded the scrip named fabric-ca-cryptogen-tls.sh and the relevant byfn.sh

You could download that two files and place it in the fabric-samples/fist-network

And then as usual use the byfn.sh to generate up and down. 

It works with fabric1.0.1 and fabric-ca1.0.1;;;","23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;",,,,,,,,,,,,,
Store revocation information in Idemix MSP Config and Signer Config to support privacy-preserving revocation,FABC-445,28612,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mdr,dubovitskaya,dubovitskaya,16/Mar/18 11:29 PM,26/Sep/18 4:57 PM,28/Oct/23 2:21 AM,05/Jun/18 8:42 PM,,,,,,,v1.4.0,,,,,,0,idemix,,,,,"CRI for verifier will contain:

 - Long-term public key of the RA

 - Epoch number

 

CRI of the signer will contain

 - Long-term public key of the RA

 - Epoch number

 - Epoch and Signer-specific information",,dubovitskaya,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-588,,,,,,,,,"1|hzx2kf:",,,,Unset,,May2018 - Security,,,,,,,,,,,,,Unset,,,,,,,,,,,dubovitskaya,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Jun/18 8:44 PM;dubovitskaya; 
|*[https://gerrit.hyperledger.org/r/#/c/21157/]*|;;;",,,,,,,,,,,,,,,,,,,
Adding another troubleshooting tip to fabric-ca doc,FABC-446,20977,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,25/Sep/17 12:50 AM,21/Jul/18 4:15 AM,28/Oct/23 2:21 AM,05/Oct/17 6:00 PM,,,,,,,v1.1.0,,,,,,0,,,,,,Documenting another troubleshooting tip.,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyh67:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Sep/17 12:54 AM;smithbk;https://gerrit.hyperledger.org/r/13773;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-server approaching max limits for attributes in DB,FABC-447,18753,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,29/Jun/17 1:36 AM,21/Jul/18 4:15 AM,28/Oct/23 2:21 AM,03/Oct/17 5:41 AM,v1.0.0,,,,,,v1.1.0,,,,,,0,,,,,,"There are multiple facets to this issue. All are suggested improvements, although 1 will eventually surface as a bug if not addressed.

1) Primarily, when we use postgres/mysql the attribute entries in the DB are fixed at 256 chars. As the need for internally-defined attributes has evolved (roles, delegate, revoker, intCA), we are bumping up against this limit. There is little room left for additional attribute definitions. In particular, user-defined attributes may be unpredictably large.

2) Secondly, inconsistent behavior. I do not see the behavior in sqlite3. sqlite3 seems to dynamically grow the size of the table entry.

 

3) Lastly, there is an efficiency problem. The labels and meta-characters themselves (',' '\{', ':', 'Name' , 'Value') actually take up storage. So for instance, a mere 2 bytes of information, mapping:

a=1

take up 25 bytes of storage, roughly a 12:1 ratio.",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzy63z:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Add idemix support to fabric CA,FABC-448,27748,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,smithbk,smithbk,15/Feb/18 4:30 AM,12/Jun/20 12:31 AM,28/Oct/23 2:21 AM,30/Mar/18 12:09 PM,,,,,,,v1.3.0,,,,,,0,idemix,,,,,"The following is a first pass at what needs to be changed in fabric CA in order to support idemix.

The `fabric-ca-client enroll` command takes a new `--msptype idemix` option. It sends a request to a new endpoint on the server similar to `POST /api/v1/idemix`. This endpoint requires a basic auth header as does an enroll request. The enrollment ID/pass is checked and then call an idemix API to begin to create a credential. This first call returns a nonce. The nonce must be stored in the DB with an associated timeout, and then we return the nonce in the response to the client.

The `fabric-ca-client enroll` command is not complete yet. It must use the nonce and make another call perhaps to the same endpoint but this time with the nonce in the body of the request. We get the nonce, look it up in the DB and delete it from DB. By default, we get ALL of the user's attributes, but this default can be overridden. In addition, the server ALWAYS adds the current version of the CRL as an attribute. This needs to be added to the properties DB table and incremented (atomically) each time a revocation occurs. We then make another idemix API call to complete the creation of the credential, and then store it in the certificates table (or another table?) and return it to the client in the response. The `fabric-ca-client enroll` command then stores the credential in the client's MSP directory and enrollment is complete.

Question: What is the format of the idemix MSP directory.

The SDK then generates a proof based on the attribute names or predicates passed into the SDK. The SDK should ALWAYS include the CRL version attribute.

When a peer, orderer, or chaincode needs to validate a proof, it will fail if the CRL version in the credential does not match the version in the MSP (local or channel). If the version of the CRL in the MSP is greater than the one in the credential, the transaction signature would need to be re-done (the credential proof should be done with respect to the latest version of the CRL with the corresponding cryptographic accumulator value). If the version of the CRL in the MSP is less than the one in the credential, the SDK could/should get a new version of the CRL from the fabric-ca-server and push it into the appropriate MSP (local or channel); otherwise, it will just need to fail.

Expiration of an idemix credential should be very similar to expiration of an x509 certificate. So when x509 certificate expiration is fixed, idemix credential expiration should be handled the same.",,aambati,ashutosh_kumar,mastersingh24,salmanbaset,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-528,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-592,,,,,,,,,"1|hzwqfp:u",,,,Unset,,To Do,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,ashutosh_kumar,mastersingh24,salmanbaset,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Feb/18 2:59 AM;mastersingh24;I believe the requirement is to provide a reference implementation of an issuer of Identity Mixer credentials.  This feature assumes that adding it to fabric-ca is the approach.

I'd rather see a requirement which is provide a reference implementation and then carefully discuss the possible options for the implementation.

I'm not convinced that adding this to the current fabric-ca is the best path forward.;;;","09/Mar/18 7:57 AM;smithbk;See https://jira.hyperledger.org/browse/FAB-8735;;;","13/Mar/18 3:39 AM;aambati;Design doc:

https://docs.google.com/document/d/1iqCHtX-bG3Ey7bZmm9_b-oqu30jtlDJO9HhccVtekEE/edit#;;;","30/Mar/18 12:09 PM;aambati;Split this JIRA into multiple stories. Closing this one.;;;",,,,,,,,,,,,,,,,
Refactor Fabric CA Code,FABC-449,30138,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,12/May/18 12:10 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Fabric CA code needs to be refactor, there are various improvements that can be made to the code base. A few improvements that come to mind are:

1. Split lib into two separate client and server packages
2. Use interfaces rather than actual types in struct definitions as much as possible. Only Config objects should really be defined as pointers, everything else can be interfaces.
3. Need to create distinction between unit-tests and integration test, and then write and move tests to appropriate locations.
4. Command line code needs to be more split and be more object oriented by moving the variables it needs to their respective structures and moving as much out of the clientcmd structures. The same changes are need on the server side commands.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzz9s7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add logging facility to haproxy in fvt image,FABC-450,19170,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,12/Jul/17 1:53 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,01/Dec/17 2:28 AM,,,,,,,,,,,,,0,,,,,,The course of benchmark testing surfaced the need for haproxy logs for appropriate debugging. The Dockerfile and start.sh files will be updated to provide this feature.,,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzy7wf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Make default expiration for fabric CA cert be effectively infinite,FABC-451,15646,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,smithbk,smithbk,11/Apr/17 12:36 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,08/Jun/17 11:42 PM,,,,,,,,,,,,,0,,,,,,"The default expiration for ecerts, tcerts, and CA certs is currently one year.
The default expiration for the CA cert should be effectively infinite.

The expiration for CA certs, ecerts, and tcerts should be separately configurable.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpkf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Jun/17 11:43 PM;smithbk;The default expiration times were changed to 15, 5, and 1 year for root, intermediate, and end entity certificates, respectively.;;;",,,,,,,,,,,,,,,,,,,
Allow logging level for components to be set dynamically in CAs,FABC-452,18248,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,hancockp,hancockp,17/Jun/17 2:50 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,fabric-ca,Logging,SRE,,,"As an SRE I want to be able to change the current logging level for component in a CA in a similar way to how I can change the level for a component on a Peer using the
{code:java}
peer logging setlevel <CompName_Regex>{code}
command. The new logging level should take effect without having to restart the CA.",,hancockp,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6pr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,hancockp,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jun/17 2:14 AM;smithbk;Suppose fabric-ca-server is running in a cluster.
Do we want to:
a) require an admin to set the log level in each cluster member separately or
b) admin sets it once and it is set for all members of the cluster.
I think the correct way is ""b"" but is going to be non-trivial, and should be done generically
for other configuration settings as well.
;;;",,,,,,,,,,,,,,,,,,,
Modify check_format script to check for trailiing blanks,FABC-453,25720,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,14/Dec/17 4:10 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,20/Jan/18 7:14 PM,,,,,,,v1.1.1,,,,,,0,,,,,,"Frequently scripts are inadvertently checked in with trailing blanks,  causing a constant trickle of patches unrelated to anything. The check_format script will alert of trailing blanks, and propose a one-liner to fix any problems found.",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyqvb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Add make release-tests target,FABC-454,19536,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,smithbk,smithbk,28/Jul/17 2:54 AM,26/Aug/19 7:46 AM,28/Oct/23 2:21 AM,26/Aug/19 7:46 AM,,,,,,,,,,,,,0,,,,,,"We have a ""make ci-tests"" target which is run for each change set.
We should add a more extensive ""make release-tests"" target which is run at least
once per release, though it could also be run weekly.
Thoughts for per release testing include:
1) Increase variables in existing fvt tests which control how many users are added, or other similar variables.
2) Define load tests using the new load driver code (not yet merged).",,denyeart,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6qf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","26/Aug/19 7:46 AM;mastersingh24;this type of test should not be a make target;;;",,,,,,,,,,,,,,,,,,
Identity type should not be required to register an new identity,FABC-455,20084,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,skarim,skarim,10/Aug/17 5:08 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,29/Aug/17 12:37 AM,v1.0.0,,,,,,v1.1.0,,,,,,0,Release-planning-1.2,sdk,,,,"Identity type should not be required to register a new identity. In membership services (v0.6) the identity type was used to perform certain validation checks but in fabric-ca the identity type is no longer used for such purposes. For this reason, the identity type will be made optional. ",,aambati,rickr,skarim,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyckv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,rickr,skarim,weeds,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Aug/17 3:20 AM;weeds;probably a day worth of work.;;;","25/Aug/17 10:53 AM;aambati;https://gerrit.hyperledger.org/r/c/12775/;;;","30/Aug/17 7:07 AM;rickr;Need some details on what the implications are for the SDKs.;;;","30/Aug/17 11:08 PM;aambati;With this change, Identity type is optional. So, my recommendation is that the SDK should also make identity type optional for registering identities. ;;;","05/Sep/17 11:42 PM;rickr;I don't think the JSDK ever really did this check at all. :);;;",,,,,,,,,,,,,,,
Allow logging level for components to be checked interactively in CAs,FABC-456,18247,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,hancockp,hancockp,17/Jun/17 2:46 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,fabric-ca,Logging,SRE,,,"As an SRE I want to be able to check the logging level for a component in a CA in a similar way to how I can check the level for a component on a Peer using the 
{code:java}
peer logging getLevel <CompName>{code}
command. ",,hancockp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6pj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,hancockp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Config structure in fabric-cop/cli/server/config.go needs cleaning up ,FABC-457,13754,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,11/Dec/16 12:06 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,07/Jan/17 12:57 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"The Config structure in fabric-cop/cli/server/config.go needs cleaning up.
Several of the following fields really belong in the Server object, or if they are config then they should have a json label.

	Home           string
	ConfigFile     string
	CACert         string
	CAKey          string
	DB             *sqlx.DB
	certDBAccessor certdb.Accessor
	Signer         signer.Signer
	UserRegistery  spi.UserRegistry",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx7wf:",,,,Unset,,Sprint 7 - Memship Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Support a HEAD / request to do a health check on fabric-ca-server,FABC-458,16749,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,mastersingh24,ptippett,ptippett,16/May/17 5:09 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,25/Aug/17 9:16 PM,v1.0.0-alpha2,,,,,,v1.1.0,,,,,,0,HSBN,Release-planning-1.1,,,,"In order to support hyperledger in a production environment, especially when hosting many networks for other users, we need a way to easily tell if a fabric-CA is healthy.  Simply checking if the process is running isn't enough, and looking at the logs is great for debugging a single network, but doesn't scale when trying to support many networks in a production environment.

A simple, low impact, CLI or grpc call that verified that returned status indicating whether or not a fabric-ca was healthy, or a simple check we could do on a network we were hosting for other users (so didn't require us to submit transactions) would suffice.",,mastersingh24,ptippett,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxvf3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,ptippett,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/May/17 5:02 AM;smithbk;First, I assume you meant to say ""whether or not a fabric-ca-server was healthy"" rather than ""whether or not an orderer was healthy"" above.

Next, the following returns info for the default CA, or you could pass a ""?ca=<caname>"" query parm to get info for a non-default CA name.
{code:java}
# curl http://localhost:7054/api/v1/cainfo
{""success"":true,""result"":{""CAName"":"""",""CAChain"":""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNFekNDQWJxZ0F3SUJBZ0lVRWdyVXZyczFDaDNXZjBrSjdEaGtRQkZNUGdrd0NnWUlLb1pJemowRUF3SXcKYURFTE1Ba0dBMVVFQmhNQ1ZWTXhGekFWQmdOVkJBZ1REazV2Y25Sb0lFTmhjbTlzYVc1aE1SUXdFZ1lEVlFRSwpFd3RJZVhCbGNteGxaR2RsY2pFUE1BMEdBMVVFQ3hNR1JtRmljbWxqTVJrd0Z3WURWUVFERXhCbVlXSnlhV010ClkyRXRjMlZ5ZG1WeU1CNFhEVEUzTURVeE5qRTVOREl3TUZvWERUSXlNRFV4TlRFNU5ESXdNRm93YURFTE1Ba0cKQTFVRUJoTUNWVk14RnpBVkJnTlZCQWdURGs1dmNuUm9JRU5oY205c2FXNWhNUlF3RWdZRFZRUUtFd3RJZVhCbApjbXhsWkdkbGNqRVBNQTBHQTFVRUN4TUdSbUZpY21sak1Sa3dGd1lEVlFRREV4Qm1ZV0p5YVdNdFkyRXRjMlZ5CmRtVnlNRmt3RXdZSEtvWkl6ajBDQVFZSUtvWkl6ajBEQVFjRFFnQUUxa1ZGSXYxeEdUZ0VtSnF4bndqZDRjeC8KYWl6aUplMHVpakxhbW1HN05iKzhldSt2OTBEU0ZsMVA0SXBUUmNIck1HbnQrVDJaRmtjQmxZTVV4M3QzbGFOQwpNRUF3RGdZRFZSMFBBUUgvQkFRREFnRUdNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUVGTGNJCkFwaGUwRm16bU4zZlMrTFZEUlJWKzVmT01Bb0dDQ3FHU000OUJBTUNBMGNBTUVRQ0lGT2dHMVhmSkJLV1ovdEIKemtKUDJOcWNwaVR4TkN4US9td2xXeUY1VVhhWUFpQkQzMUtjTzNmd0RuRjBkSWpEbnpWSjIwWCs2NFV1ejZNUQoveXpUZWlRcDhRPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=""},""errors"":[],""messages"":[]}{code}
Is this sufficient?  Just wondering what is required here.

Two thoughts for enhancments, but only as needed:

1) Also keep track of connection status or total errors to the backend DB and LDAP (if configured).

2) A single ""GET /api/v1/info"" route which returns info on all CAs hosted by the server.

 ;;;","17/May/17 6:40 AM;ptippett;Hi Keith, yeah you caught my cut-paste error...I meant fabric-ca.

This looks sufficient to me.  The requirement was a simple API to let us know the fabric-ca was running and healthy on one node so we could restart a 2nd node or just in general tell if fabric CA is running.  

I do think 1 especially is a worthwhile enhancement, but I don't think it's critical to rush into 1.0.;;;","18/May/17 6:38 AM;smithbk;OK, so I suggest for v1 that we add a simple ""HEAD /"" API which I believe is the typical health check URL.  This is a trivial change and is keeping with the standard HAProxy check as described at [http://www.serverlab.ca/tutorials/linux/network-services/how-to-configure-haproxy-health-checks/]

 

But since there is already a URL to use, can you set severity to medium?;;;","26/May/17 1:19 AM;smithbk;Since there is already a way to do a health check as shown in the 1st comment, and adding a ""HEAD /"" API is adding a new feature which is too late for v1,

I'm changing the description of this jira item, changed to an improvement, setting the priority to low, and moving to v1.;;;","09/Jun/17 9:32 PM;ptippett;Hi Keith.  I've learned 2 things that make me think we do want the HEAD request for 1.0.

 

1 - the GRPC endpoints on the orderer and peer both respond to HTTPs HEAD requests.

2 - The status API we originally discussed generates an info level log message.  I don't want to fill up the logs with status check messages and confuse users and maybe hide important messages.  Changing the log level of that message may be an option as well.;;;","09/Jun/17 9:43 PM;smithbk;Paul, while I agree it would be nice to have, you can work around #1 and #2 (filling up the logs) is going to be a problem anyway since we log an info message for each request received.  True, it will fill up a bit sooner but I think we need to support rolling logs in v1.1 more importantly.  At that time, we can support the HEAD request also.;;;","27/Jul/17 9:14 AM;ptippett;Hi Keith.  Is this going to be in 1.1?;;;","04/Aug/17 11:11 PM;mastersingh24;https://gerrit.hyperledger.org/r/12143;;;","15/Aug/17 8:13 PM;mastersingh24;Updated:    https://gerrit.hyperledger.org/r/#/c/12471/;;;","19/Aug/17 9:35 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/12567/;;;",,,,,,,,,,
Add ca.GetCertificate,FABC-459,26939,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,19/Jan/18 2:32 AM,19/Oct/18 9:20 PM,28/Oct/23 2:21 AM,19/Oct/18 9:20 PM,,,,,,,v1.4.0,,,,,,0,hygiene,,,,,"The following
We should add a ca.GetCertificate(serial, aki) method which does the following except that it only returns a single certificate and if there are multiple, will return an error instead.  This code and elsewhere should be replaced with the call to the new ca.GetCertificate function.

{code}
        certs, err := ca.CertDBAccessor().GetCertificate(serial, aki)
        if err != nil {
                return """", newHTTPErr(500, ErrCertNotFound, ""Failed searching certificates: %s"", err)
        }
        if len(certs) == 0 {
                return """", newAuthErr(ErrCertNotFound, ""Certificate not found with AKI '%s' and serial '%s'"", aki, serial)
        }
        for _, certificate := range certs {
                if certificate.Status == ""revoked"" {
                        return """", newAuthErr(ErrCertRevoked, ""The certificate in the authorization header is a revoked certificate"")
                }
        }
{code}",,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6u7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Oct/18 2:24 AM;skarim;https://gerrit.hyperledger.org/r/c/26857/**;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-client to support either a hostname override or non verification of tls cert,FABC-460,29321,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,davidkel,davidkel,11/Apr/18 9:16 PM,09/Oct/19 9:40 PM,28/Oct/23 2:21 AM,09/Oct/19 9:40 PM,v1.1.0,,,,,,,,,,,,1,,,,,,"While trying to use byfn for a composer tutorial it's possible to handle the fact that the tls certs have hostnames defined which do not exist, by using the grpc facility to override the hostname. 

There doesn't appear to be a documented way to do something similar when using the fabric-ca-client. The node-sdk provides the ability to use TLS but not to verify the certificate rather than override the hostname and again there doesn't appear to be a documented way to do something similar.

This would be useful for testing in a development environment (ie single machine)",,davidkel,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzz5j3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,davidkel,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Mar/19 8:47 AM;nyet;This would also be useful when bootstrapping, for example, for a ""TOFU"" like request for the CA server public root/intermediate key(s). It is potentially exploitable by MITM but if the user is aware of that hazard, it makes more sense to bootstrap the keys this way than to force the user to use a wget/curl solution that is going to bypass TLS checking anyway.;;;","02/Apr/19 5:12 AM;nyet;We are doing something like
{code:java}
curl -sk https://ca.server.network.com/api/v1/cainfo | jq -r "".result.CAChain"" | base64 -d > tlsca-cert.pem {code}
Note the -k since we do not have the key yet.;;;","26/Apr/19 6:36 PM;nyet;On MacOS, its {{base64 -D}}

Sigh.;;;","09/Oct/19 9:40 PM;davidkel;Now that hyperledger composer is deprecated I am withdrawing this jira. ;;;",,,,,,,,,,,,,,,,
Make CSR in client config part of enrollment,FABC-461,15868,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,21/Apr/17 2:55 AM,28/Jul/19 12:00 AM,28/Oct/23 2:21 AM,,v1.0.0,v1.0.0-alpha1,,,,,,,,,,,1,,,,,,"Currently the fabric-ca client configuration file has a separate CSR section. This section should be moved under enrollment section in the client config as CSR is specific to the enrollment command.

The CLI flags should also be updated accordingly to reflect csr specific flags
to part of the enroll command.",,nyet,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6gn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,nyet,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Apr/17 2:01 AM;skarim;https://gerrit.hyperledger.org/r/#/c/8483/;;;","20/Jul/17 3:18 AM;smithbk;We could add CSR to enrollment to make it more usable but also leave the one outside for backwards compatibility.;;;",,,,,,,,,,,,,,,,,,
Update fabric CA README,FABC-462,15590,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,06/Apr/17 6:23 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,28/Apr/17 9:13 PM,,,,,,,,,,,,,0,,,,,,The fabric-ca README should contain only developer info.  It currently contains out-of-date users guide info.,,chrisconway,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx4f3:",,,,Unset,,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,Unset,,,,,,,,,,,chrisconway,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/17 6:25 AM;smithbk;See http://gerrit.hyperledger.org/r/7735;;;",,,,,,,,,,,,,,,,,,,
fabric-ca remove openldap from prereq list of make all,FABC-463,16644,,Story,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,rennman,rennman,rennman,12/May/17 1:09 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,01/Dec/17 2:28 AM,,,,,,,v1.1.0,,,,,,0,,,,,,"The CI tests (esp on power) are taking far too long. There is a significant amount of network downloads during the build process. 

Among other efficiency measures is removing the openldap build. Now that openldap exists in the fabric-fvt test image, the openldap image is superfluous.

At last count the docker build of openldap added ~40 minutes to the CI test on power.",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx3of:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Consider changing fabric-ca port from 8888 to 7054,FABC-464,14211,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,keithsmith,tuand,tuand,21/Jan/17 12:16 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,21/Apr/17 12:00 PM,,,,,,,,,,,,,0,,,,,,"The request is encapsulated in the comments of this changeset https://gerrit.hyperledger.org/r/#/c/4571/

in particular https://gerrit.hyperledger.org/r/#/c/4571/2/devenv/Vagrantfile@39",,smithbk,tuand,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-304,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxir3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,tuand,yacovm,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Jan/17 5:31 AM;yacovm;Having continuous port ranges provide benefits:
* You can create only 1 firewall rule for them by stating the range 7050-->7054
* You can perhaps leverage that information when you parse logs of network traffic- catch everything with 705,(70500 is above the maximum port number).
* It's uniform and easy to remember

I think it's a good idea as this should be done as soon as possible. The later we do this, the more confusion it will cause IMO.;;;","22/Jan/17 2:59 AM;smithbk;Done in change set https://gerrit.hyperledger.org/r/#/c/4671/;;;",,,,,,,,,,,,,,,,,,
fabric-ca client modify cannot set maxenrollments to '0',FABC-465,27094,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Low,,aambati,rennman,rennman,26/Jan/18 8:29 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"If I try to modify the users maxenrollments to '0', I get 

Error: Response from server: Error Code: 0 - Failed to update any identity records",,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6un:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jan/18 12:14 AM;skarim;To set max enrollment value to zero, you must specify '-2' as max enrollment in modify request. 

The following is present in the Readme:

NOTE: A maxenrollments value of ""-2"" specifies that the CA's max enrollment setting is to be used.

[~rennman] Can you please test and verify?;;;","31/Jan/18 11:31 PM;rennman;Verified that -2 is required on a modify to indicate taking the server default.

 However, it is inconsistent with the '0' that is the equivalent for an 'add'. Moreover it is still stored in the DB as '0' even if -2 is supplied on the command line, which is sort of confusing for the user.

The preferred behavior is:
  1  - user doesn't set maxenrollments on modify (nil):
        internally set maxenrollments to '-2' and leave current value alone.
  2 - user specifies '0':
       explicitly set maxenrollments to '0'
this requires changing the meaning of -2, but it never gets externalized.

The problem is 
""...there is no way to indicate if user set 0 or the default integer value of zero. maybe once this viper bug is fixed, we might able to do that. [https://github.com/spf13/viper/issues/276]""

Hence I'm leaving this open as a suggested future improvement.
 
 ;;;",,,,,,,,,,,,,,,,,,
Add pem file option for client revocation,FABC-466,15608,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,smithbk,smithbk,07/Apr/17 5:12 AM,28/Jul/19 12:00 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Add support for the **--certfile** option as follows:
{code}
fabric-ca-client revoke --certfile <pem-file>
{code}
which simply reads the pem file, parses the AKI and serial number from it, and passes the AKI and serial number for revocation.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx3rr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Server does not print the TLS key used,FABC-467,27645,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Done,skarim,kchristidis,kchristidis,13/Feb/18 4:26 AM,28/Jul/19 12:00 AM,28/Oct/23 2:21 AM,20/Nov/18 1:24 AM,v1.1.0-alpha,,,,,,,,,,,,0,serviceability,,,,,"When TLS is enabled ({{--tls.enabled=true}}), the server does not print out the filename of the TLS key.

{quote}{{2018/02/12 13:57:51 [DEBUG] TLS Certificate: /PathToDataDir/tls-cert.pem, TLS Key:}}{quote}

See https://hastebin.com/qazunarovi.sql for trimmed-down sample output.

As a user, I would like to know what is the TLS key that my server uses.",,denyeart,haibbo,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzztnr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,haibbo,skarim,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","15/Nov/18 11:36 PM;skarim;https://gerrit.hyperledger.org/r/27576;;;",,,,,,,,,,,,,,,,,,
Add PKCS11/HSM support for COP/CFSSL,FABC-468,13870,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,vpaprots@ca.ibm.com,smithbk,smithbk,21/Dec/16 10:17 PM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,06/Apr/17 10:50 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"COP must support HSM's via the PKCS11 standard.  The only current requirement is that the private key never have to leave the card.  Said another way, the requirement is that we support signing, but does not currently require that all hash or other cryptographic operations be performed on the card.

This applies to all CFSSL code which is used for creating ECerts as well as all COP-specific code used for creating TCerts.

This will be plugged into CFSSL as follows:
1) Implement the 'localSignerCheck' function based on BCCSP.   See 'localSignerCheck' in cfssl/signer/universal/universal.go.
    See 'bccspBackedSigner' at https://gerrit.hyperledger.org/r/#/c/3679/6/cli/server/bccspsigner.go for an implementation of this.
2) A small change in CFSSL's universal.go to allow COP to prepend bccspBackedSigner to the 'localSignerList'.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-660,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx7xz:",,,,Unset,,Sprint 7 - Memship Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Jan/17 12:07 AM;smithbk;See https://gerrit.hyperledger.org/r/#/c/3735/;;;","09/Jan/17 4:11 AM;smithbk;See CFSSL pull request at https://github.com/cloudflare/cfssl/pull/712;;;","06/Apr/17 10:50 AM;smithbk;This is handled under https://jira.hyperledger.org/browse/FAB-2601 so closing this;;;",,,,,,,,,,,,,,,,,
Update fabric-ca CLI to use cobra & viper,FABC-469,14515,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,03/Feb/17 1:29 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,11/Mar/17 3:48 AM,,,,,,,,,,,,,0,,,,,,"We need to stop using the cfssl cli package because it is too inflexible and has caused problems.
For example, when we needed to simply change the default port from 8888 to 7054, it was way too hard. 
The goal is to improve usability by using cobra and viper.
The design is as follows ....

Build two new commands using cobra/viper named fabric-ca-server and fabric-ca-client.
fabric-ca-server will be roughly equivalent to the current ""fabric-ca server"" command and
fabric-ca-client to the current ""fabric-ca client"" command.

These commands will be at fabric-ca/cmd/fabric-ca-server and fabric-ca/cmd/fabric-ca-client, respectively.  So ""go get ..."" can be used to install the server and/or the client.

Both commands will read yaml config files and support optional args (and env variables) to specify any value in the yaml file.   The precedence (highest to lowest) will be:
1) command line arg
2) env variable
3) config file
4) default value

I will be dropping several change sets for this improvement, roughly as follows:

0) Vendor cobra

Change sets for the server:
1) fabric-ca-server command plumbing with cobra/viper
2,3) implement server commands one change set at a time using existing logic (init, start)

Change sets for the client:
4) fabric-ca-client command plumbing with cobra/viper
5,6,7,8) implement client commands one change set at a time using existing logic (register, enroll, renew, revoke)

From a code organization perspective, we will create fabric-ca/cmd/fabric-ca-client and fabric-ca/cmd/fabric-ca-server directories for the corresponding commands.  The fabric-ca/cli directory will eventually go away once the separate client and server commands are stable.
",,chrisconway,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-121,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx5yn:",,,,Unset,,Sprint 11 - Membership Service,Sprint 12 - Membership Service,Sprint 13 - Membership Service,,,,,,,,,,,Unset,,,,,,,,,,,chrisconway,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Feb/17 1:41 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/5533/ is the change set to vendor cobra;;;","06/Feb/17 7:36 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/5535 is the change set for the base fabric-ca-server work;;;","06/Feb/17 7:37 AM;smithbk;http://gerrit.hyperledger.org/r/5551 implements the ""fabric-ca server init"" command;;;","07/Feb/17 5:12 PM;smithbk;http://gerrit.hyperledger.org/r/5631 fabric-ca-server start for cobra/viper CLI (part 1);;;","09/Feb/17 8:41 AM;smithbk;http://gerrit.hyperledger.org/r/5763 Complete fabric-ca-server start command;;;","18/Feb/17 7:20 AM;smithbk;http://gerrit.hyperledger.org/r/6179;;;","02/Mar/17 11:08 AM;smithbk;http://gerrit.hyperledger.org/r/6705;;;","02/Mar/17 2:26 PM;smithbk;https://gerrit.hyperledger.org/r/#/c/6715/;;;",,,,,,,,,,,,
Fabric CA w/ TLS produces garbled response on HTTP URL,FABC-470,22450,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,,fredbi,fredbi,17/Oct/17 6:10 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,04/Jul/19 8:35 PM,v1.0.2,,,,,,,,,,,,0,tls,,,,,"Hello

I noticed that when configuring fabric CA (rel 1.0.2) with TLS server enabled, and called by the fabric-ca client CLI on HTTP URL (e.g: -u [http://ca1.example.com:7054|http://ca1.example.com:7054/] instead of -u [https://ca1.example.com:7054)|https://ca1.example:7054)] , the response is some garbled binary output and not some proper HTTP error message.

Could reproduce using curl traces.

This is annoying for clients with improper configurations, as the error is difficult to interpret.

 

 ",,fredbi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzzu9z:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,fredbi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
I want to get public certificates (ID and TLS) from Fabric CA,FABC-471,28107,,Story,In CR Review,FABC,Fabric CA,software,denyeart,,,Medium,,RobertMiroballi,RobertMiroballi,RobertMiroballi,01/Mar/18 5:12 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,1,Security,,,,,"I want to be able to call the CA and get public certificates for an organization and store them as MSPs. 

When I deploy a new peer, orderer, or composer component I want to get the MSPs of the other organizations in the network. These should only contain the public certificates. -I should be able to call for the private key for the new component's (peer/orderer/etc) MSP.-",,ChristopherFerris,RobertMiroballi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyzb3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,RobertMiroballi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Mar/18 7:17 AM;RobertMiroballi;Updated Request:
I don't need the private key.;;;","14/Mar/18 9:05 PM;dsanchezseco;[~RobertMiroballi] It can be done with ""fabric-ca-client getcacert"" command but it'll only work if working without TLS. Under TLS you'll need a TLS cert, and to get that you need the CA cert which you can only get if you have the TLS cert....;;;","14/Mar/18 11:11 PM;RobertMiroballi;I need the signing certs so I can identify the peer/orderer to the other peers/orderers.;;;","14/Mar/18 11:18 PM;dsanchezseco;That part is missing, for now only the CA certs can be recovered as far as i know;;;","29/Mar/18 1:43 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/c/19859/;;;",,,,,,,,,,,,,,,
Add a TLS profile to the default config file for fabric-ca-server,FABC-472,18627,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,24/Jun/17 5:03 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,11/Aug/17 4:32 PM,,,,,,,v1.1.0,,,,,,0,,,,,,"In order to make issuance of TLS certs with the appropriate usage, add a tls profile to the default config as follows:
{code}
      tls:
         usage:
            - server auth
            - client auth
         expiry: 8760h
{code}

This causes the server to issue certificates targeted for this profile with the following usage (as printed by openssl) which is common for TLS certificates.
{code}
X509v3 Extended Key Usage: 
     TLS Web Server Authentication, TLS Web Client Authentication
{code}

In order to target the tls profile, use the ""--enrollment.profile tls"" option as follows:
{code}
# fabric-ca-client enroll --enrollment.profile tls -u http://<enrollmentID>:<secret>@localhost:7054
{code}
",,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx3nz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jun/17 5:17 AM;smithbk;See https://gerrit.hyperledger.org/r/11103
Pls add test case for tls profile;;;","27/Jun/17 11:16 PM;skarim;Test case has been added;;;",,,,,,,,,,,,,,,,,,
Dynamically generate doc for CLI and Config files,FABC-473,18618,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,24/Jun/17 2:51 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,15/Aug/17 5:58 AM,v1.0.0-beta,,,,,,v1.1.0,,,,,,0,,,,,,A lot of manual maintenance of fabric-ca documentation is required if any changes to CLI or Configuration files are made to either client or server. Keeping the document in sync with any new or removed configuration option will be easier if there is a script to generate separate files that contain CLI and Config that can be pointed to from the mean fabric-ca documentation.,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzy5j3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Aug/17 5:58 AM;skarim;This is a duplicate of FAB-4462. I am closing this out. ;;;",,,,,,,,,,,,,,,,,,,
Improve error checking for key lookup,FABC-474,26217,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,21/Dec/17 12:36 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,24/Dec/17 11:26 PM,,,,,,,v1.1.0,,,,,,0,,,,,,"Improve the error checking for key lookup via BCCSP.  Since BCCSP can return a public key but we must have a private key to sign, validate the key is indeed private and if not return an error.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyrsv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Dec/17 1:01 AM;smithbk;https://gerrit.hyperledger.org/r/16347 [FAB-7524] Improve error checking for key lookup;;;",,,,,,,,,,,,,,,,,,,
Add version command to fabric-ca-server and fabric-ca-client,FABC-475,19163,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,smithbk,smithbk,12/Jul/17 12:36 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,18/Oct/17 11:37 PM,,,,,,,v1.1.0,,,,,,1,Release-planning-1.1,,,,,"The fabric-ca-server and fabric-ca-client commands need a version command.
It should follow the same pattern as the peer command in fabric.",,rajeev20,smithbk,VamsiKrishnak,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6448,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx3o7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,rajeev20,smithbk,VamsiKrishnak,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Modify fabric-ca to handle string slice configuration appropriately,FABC-476,15573,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,smithbk,smithbk,05/Apr/17 6:31 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,17/Apr/17 10:44 PM,,,,,,,,,,,,,0,,,,,,"https://jira.hyperledger.org/browse/FAB-2896 requires that a list of strings be allowed on the command line, via options or env variables.  The reflection code needs updating to handle string slices.

When doing this, I encountered a bug in viper which I worked around.
See https://github.com/spf13/viper/issues/327
",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx4ev:",,,,Unset,,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Throw warning instead of error if an intermediate CA specifies a CN,FABC-477,18617,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,24/Jun/17 2:20 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,v1.0.0-beta,,,,,,,,,,,,0,,,,,,"If an intermediate CA tries to specify a CN in the CSR section during enrollment with the root CA an error is thrown and the enrollment fails.

An error is not necessary and would improve usability if the following is done. If the CN is populated in the CSR, the CN should get replaced with the Enrollment ID and a warning should be thrown to indicate that such a replacement took place.",,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6of:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;",,,,,,,,,,,,,,,,,,,
I want to dynamically update fabric-ca-server configuration without restarting the server,FABC-478,20120,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,11/Aug/17 5:42 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,06/Jan/18 3:06 AM,v1.0.0,,,,,,v1.1.0,,,,,,1,release-planning-1.1,sdk,,,,"I want to dynamically update fabric-ca-server configuration without restarting the server.
For example, registering new affiliations, updating user information, etc.

Without some general pub/sub mechanism among cluster members, the only way I know to make this work across a cluster is to store it in the DB and check with each request to see if the config has changed, increasing latency and putting more load on the DB.

More details:
https://docs.google.com/document/d/1AblDQGXOBvMLyn_VTNqoMrjshgUoHP-MhjfZTe3hjtI/edit?usp=sharing",,akuma921,rennman,skarim,smithbk,wutongtree,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6418,,,,,,,FAB-6511,,,,,,,,,,,,,,,,,FAB-6542,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx3sn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,akuma921,rennman,skarim,smithbk,wutongtree,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Oct/17 2:02 AM;skarim;Identities:

https://gerrit.hyperledger.org/r/#/c/15269/
https://gerrit.hyperledger.org/r/#/c/15277/
https://gerrit.hyperledger.org/r/#/c/15279/
https://gerrit.hyperledger.org/r/#/c/15281/
https://gerrit.hyperledger.org/r/#/c/15283/

Affiliations:

https://gerrit.hyperledger.org/r/#/c/15547/
https://gerrit.hyperledger.org/r/#/c/15617/
https://gerrit.hyperledger.org/r/#/c/15659/
https://gerrit.hyperledger.org/r/#/c/15715/;;;","31/Oct/17 5:21 AM;smithbk;https://gerrit.hyperledger.org/r/14963 [FAB-5726] Update swagger for dynamic update;;;","09/Nov/17 1:49 AM;akuma921; is this story still open?;;;","03/Jan/18 11:40 PM;smithbk;yes, because many change sets are not yet merged;;;","27/Jan/18 5:14 AM;rennman;See test outline in https://jira.hyperledger.org/browse/FAB-6511
CR: [Test dyn add/mod/del identites|https://gerrit.hyperledger.org/r/#/c/15843/]
[CR: Dynamic modify of affiliations|https://gerrit.hyperledger.org/r/#/c/17389/];;;",,,,,,,,,,,,,,,
Make 2 DB queries into 1,FABC-479,27362,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,02/Feb/18 7:30 PM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,10/Jul/18 4:23 AM,,,,,,,v1.3.0,,,,,,0,,,,,,"In lib/dbaccessor.go, line 359, the following code can be optimized to be a single DB query:

{code}
	query := ""SELECT * FROM users WHERE (affiliation = ?)""
	ids := []UserRecord{}
	err = tx.Select(&ids, tx.Rebind(query), name)
	if err != nil {
		return nil, newHTTPErr(500, ErrRemoveAffDB, ""Failed to select users with affiliation '%s': %s"", name, err)
	}

	subAffName := name + "".%""
	query = ""SELECT * FROM users WHERE (affiliation LIKE ?)""
	subAffIds := []UserRecord{}
	err = tx.Select(&subAffIds, tx.Rebind(query), subAffName)
	if err != nil {
		return nil, newHTTPErr(500, ErrRemoveAffDB, ""Failed to select users with sub-affiliation of '%s': %s"", name, err)
	}
{code}

There are probably other operations which could be joined as well, such as deleting all affiliations at once rather than separately deleting the subaffiliations and affiliation.",,denyeart,luomin,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6vr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,luomin,skarim,smithbk,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","19/Jun/18 3:06 AM;skarim;https://gerrit.hyperledger.org/r/c/23245/;;;",,,,,,,,,,,,,,,,,,
Inconsistent  affiliations strings case.,FABC-480,27816,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,,gatakka,gatakka,18/Feb/18 6:11 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,19/Jul/18 4:04 AM,,,,,,,,,,,,,0,,,,,,"When Fabric-CA is started for first time it fills affiliation table from provided config file, but all affiliation names are converted to lowercase. For example CompanyACME will be stored in database as companyacme. 

When new registration request is send then the check for proper affiliation is case sensitive, so if user provide CompanyACME registration will fail because no such affiliation will be found.

When affiliation is added using:
{code:java}
fabric-ca-client affiliation add
{code}
case is preserved.

This is inconvenient in many cases, especially when there is some integration and automation.

Make this behavior consistent, for example in all places search and match are case insensitive, or preserve case no mater from where affiliation is added.",,gatakka,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6w7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,gatakka,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/18 5:35 AM;skarim;This limitation has been documented, see: https://gerrit.hyperledger.org/r/#/c/18437/;;;",,,,,,,,,,,,,,,,,,,
Adding another troubleshooting tip to fabric-ca doc,FABC-481,23959,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,16/Nov/17 12:22 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,29/Nov/17 11:55 PM,,,,,,,v1.1.1,,,,,,0,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyn7b:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Nov/17 12:24 AM;smithbk;https://gerrit.hyperledger.org/r/15487 [FAB-6993] Add troubleshooting tip;;;",,,,,,,,,,,,,,,,,,,
Document fabric-ca usage by fabric,FABC-482,14598,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,08/Feb/17 2:25 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,06/Apr/17 9:52 AM,,,,,,,,,,,,,0,,,,,,"This jira item is for doing #5 in the list below (from Gari).

In particular, document how to use fabric-ca for issuing crypto materials for 1 - 4.

---------------------------------------------------------------------------------------------
We are now at a point where we need to be able to demonstrate *most* if not *all* of the key attributes/features of the system:

1) Channels - we've spent a lot of time and effort on this feature and we need to show how it really works. This means we need to be able to have the ""proper"" config items as part of channel creation - e.g. member organizations (each comprised of an MSP and anchor peers)

We need to be able to create multiple channels and have different membership for each channel (at least from a configuration perspective)

2) We need to be able to create channels *properly* from at least one of the SDKs (e.g. Node) and the CLI (although the CLI needs a real overhaul in this aspect as it should be a real client of the orderer)

3) Need to show that we can have peers from multiple organizations ""join"" a channel. This means that we need to properly parse and leverage the genesis / config block (with proper config items as specified in 1) above) - i.e. use this information in the peer to have per channel MSP list which can be used by both the endorser (to verify proposals from clients) and by gossip (gossip also needs the per channel list of anchor peers as well). We could decide that we should not show gossip across orgs but I think at this point that would be a mistake

4) Endorsement / validation policies - we need to demonstrate how to author a basic policy which requires multiple signatures. Should be able to do this from at least one SDK and from the CLI when deploying chaincode

5) There is a load of crypto material needed for 1) - 4) above so we need to document how to use fabric-ca to generate / obtain this material

6) We need to have published Docker images for the peer, orderer and fabric-ca plus NodeSDK published to NPM and if we are going to put out the Java SDK need to have a downloadable JAR and/or install via maven or gradle

We have zero real documentation about any of the above items. We need to produce API docs for the SDKs, for fabric-ca (e.g. publish the Swagger), descriptions of the components in 1)- 4) above, etc
",,DrVadson,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx53z:",,,,Unset,,Sprint 12 - Membership Service,Sprint 13 - Membership Service,Sprint 14 - Membership Service,,,,,,,,,,,Unset,,,,,,,,,,,DrVadson,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric-CA server configuration file does not reflect possiblity of enabling removal of users/affiliations,FABC-483,30923,,Story,In CR Review,FABC,Fabric CA,software,denyeart,,,Medium,,alexvicegrab,alexvicegrab,alexvicegrab,07/Jun/18 1:38 AM,03/Dec/19 9:17 AM,28/Oct/23 2:21 AM,,v1.1.0,v1.2.0,,,,,,,,,,,1,,,,,,"As mentioned in FAB-8403, removal of users and affiliations is not enabled by default, and you currently need to supply flags or update the configuration, but the configuration file does not mention these options.

Hence I wish to add:

{code:java}
cfg:
  affiliations:
    allowremove: false
  identities:
    allowremove: false
{code}

to the default config files so users can more easily find these options, if required.",,aambati,alexvicegrab,GuillaumeCisco,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-503,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzzeav:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,alexvicegrab,GuillaumeCisco,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Jun/18 3:12 AM;aambati;https://gerrit.hyperledger.org/r/c/22829/;;;",,,,,,,,,,,,,,,,,,,
Have a default handler on fabric-ca server,FABC-484,26400,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,04/Jan/18 11:19 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,v1.1.0,,,,,,,,,,,,0,,,,,,"There should be a default handler on the server. If a client requests an endpoint that does not exist, a properly formatted response should be returned to a client. ",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6t3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[CI] - Integrate e2e or smoke tests in fabric-ca verify and merge builds,FABC-485,21774,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,sambhavdutt,rameshthoomu,rameshthoomu,11/Oct/17 10:47 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,15/Feb/18 5:28 AM,v1.0.3,,,,,,,,,,,,0,fabric-ci,,,,,Integrate e2e or smoke tests in fabric-ca verify and merge builds to detect failures early in the process.. We are running e2e tests in fabric verify and merge builds.,,rameshthoomu,sambhavdutt,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyj4n:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,rameshthoomu,sambhavdutt,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Oct/17 11:30 PM;scottz;What tests? Do you mean this one? [https://gerrit.hyperledger.org/r/#/c/13213/] ;;;","12/Oct/17 12:54 AM;rameshthoomu;[~scottz] Planning to run what ever e2e (java and node) tests CI runs for every fabric verify & merge builds.;;;","14/Nov/17 10:39 PM;rameshthoomu;Hi [~smithbk], I need your inputs before I start my work on this. Plan is to run `smoke tests` from fabric-test repository or e2e CLI tests from fabric repository on every patch submitted to fabric-ca repository. This helps tests in other repos like fabric-test and fabric which uses fabric-ca in their network configuration.;;;","15/Feb/18 5:27 AM;sambhavdutt;The [patch|https://gerrit.hyperledger.org/r/#/c/17827/] for testing e2e verify and merge tests for fabric-ca has been merged on Gerrit. These jobs are executing successfully in [fabric-ca|https://jenkins.hyperledger.org/view/fabric-ca/] when a verify or merge is submitted.;;;",,,,,,,,,,,,,,,,
Enhance fabric-ca-server to support multiple CAs,FABC-486,15470,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,28/Mar/17 4:38 AM,21/Jul/18 4:15 AM,28/Oct/23 2:21 AM,26/Apr/17 3:24 AM,,,,,,,,,,,,,1,,,,,,"Enhance fabric-ca-server to support multiple CAs.

The goals are:
1) In a dev/test environment, to make it easy to use a single fabric-ca-server to host multiple CAs, each with its own root of trust.
2) Support the ""OU"" model in which a single fabric-ca-server manages multiple organizational units.   Each OU has its own CA cert signed by a root CA.

The fabric-ca-server init and start commands will support the following two additional mutually exclusive options:
{code}
1) --cacount <number-of-CAs>
 This is really just a convenience method to automatically generate multiple cafiles as would be used in option 2 below.
This is useful in a dev environment to spin up any number of CAs, automatically generating a unique name for each based on its index number.

2) --cafiles <CA-config-files>
For each CA config file in the list, generate a separate signing CA.  Each CA config file in this list MAY contain all of the same elements as are found in the server config file except port, debug, and tls sections.  In other words, there will always only be one listening endpoint for all CAs hosted by the server.
{code}

The config values for each CA hosted by the server are determined by looking in the CA config file 1st.  If the value is not specified there, then the normal precedence is used.   So for each config item for each CA server, the following precedence order is used to determine the value:
1) CA config file
2) command line option
3) environment variable
4) server config file
5) default value


For example, consider the following command:
{code}
fabric-ca-server start -b admin:adminpw --cacount 2
{code}

The above command will automatically generate the normal fabric-ca-server-config.yaml file with the additional elements:
{code}
cafiles:
   - ca/ca1/fabric-ca-server-config.yaml
     ca/ca2/fabric-ca-server-config.yaml
{code}
where ca/ca1/fabric-ca-server-config.yaml contains
{code}
ca:
  # Name of this CA
  name: ca1
{code}
and ca/ca2/fabric-ca-server-config.yaml contains
{code}
ca:
  # Name of this CA
  name: ca2
{code}

Note that all relative path file names such as db.datasource, even though listened in the server config file, are treated as being relative to the CA config file.  This keeps all generated material separate for each CA.

For postgres and mysql options, a single database server may be configured, but a separate database name based on the ""ca.name"" will be created in order to keep all database elements separate.

If the server's config has a ""ca"" section, then it also serves as a root CA and all of the CA config files have associated CA certificates which are issued by the root CA.

The fabric-ca-client command will also add the ""--ca <ca-name>"" option to all commands to denote which CA the request is being sent to.   If no option is specified, the default CA will be used.  The default CA will be the name of the CA in the server config file if present, or the name in the 1st CA config file.

All REST requests will have an optional CA name field added to the request body.  The GET /info endpoint will be changed to support both GET /info and PUT /info.  The fabric-ca-client info command will always use POST /info so it can send a body.
",,mastersingh24,mrshah-ibm,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx4en:",,,,Unset,,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,mrshah-ibm,skarim,smithbk,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/17 11:22 PM;mastersingh24;sounds good.  I assume this is the same as https://jira.hyperledger.org/browse/FAB-2492  ?  I'll close that as a duplicate;;;","29/Mar/17 11:52 PM;smithbk;Yes, you can close 2492;;;","19/Apr/17 8:04 PM;smithbk;https://gerrit.hyperledger.org/r/#/c/7941/
https://gerrit.hyperledger.org/r/#/c/7789/
https://gerrit.hyperledger.org/r/#/c/7713/;;;","24/Apr/17 10:20 PM;skarim;Two more:

https://gerrit.hyperledger.org/r/#/c/7803/
https://gerrit.hyperledger.org/r/#/c/7835/;;;","28/Apr/17 12:40 AM;skarim;Documentation change set:

https://gerrit.hyperledger.org/r/#/c/8655/;;;",,,,,,,,,,,,,,,
Two different apis on intermediate CA server for getting whole chain and just its cert,FABC-487,17716,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,dbshah,dbshah,10/Jun/17 6:25 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,24/Jun/17 2:33 AM,,,,,,,,,,,,,0,,,,,,"Trying to use multiple levels of CA's with the peer/orderer, we figured that the peer code does not like a chain in the intermediatecerts and the cacerts of msp. But the getcainfo call returns the whole chain for the intermediatecert.

 

It would help if we can have a call for getting the whole chain (as we have now), and a different call for getting just CA's part of the cert. This will help CA to be in sync with the msp certs that the fabric itself needs.",,dbshah,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxzyv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,dbshah,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jun/17 2:24 AM;smithbk;This is a duplicate of https://jira.hyperledger.org/browse/FAB-4844 though the way this is
fixed is different.  There is still one server call but the client splits the chain into two parts
and stores them in MSP format appropriately.
See https://gerrit.hyperledger.org/r/#/c/10717/;;;","24/Jun/17 2:33 AM;dbshah;[~smithbk] thanks i will mark this one done;;;","24/Jun/17 2:46 AM;dbshah;Actually, what if i am using more than one intermediate CA servers, and the enroll call is only made on one, I think we still require to get the cacerts of all the intermediate CA servers. So probably, FAB-4844 will solve half of the problem, but not all of it. 

There is still a need for such an API to get intermediate CAs cert without the chain included.;;;",,,,,,,,,,,,,,,,,
Trim logging in for fabric-ca CI,FABC-488,21031,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,28/Sep/17 5:46 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,01/Dec/17 2:29 AM,,,,,,,,,,,,,0,,,,,,"The logs for CI builds are somewhat unwieldy. Change the run_fvt_script file to only print the full text of the log if the test fails. Otherwise, just print a summary.",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyhgn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Use strong encryption cipher suites for TLS,FABC-489,26236,,Story,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,21/Dec/17 9:08 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,23/May/18 12:45 AM,,,,,,,v1.2.0,,,,,,0,,,,,,"Nodes currently restrict to TLS to version 1.2 but we can also improve security a but by using HIGH encryption cipher suites by default.  My suggestion is:

{quote}
TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,
TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,
TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,
TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,
TLS_RSA_WITH_AES_256_GCM_SHA256,
TLS_RSA_WITH_AES_128_GCM_SHA384
{quote}
",,ales,denyeart,mastersingh24,,,,,,,,,,,,,,,,,,";19/May/18 10:28 PM;mastersingh24;600",,,0,600,,,0,600,,,,,,,,,,,,,,,,FAB-7525,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6sn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ales,denyeart,mastersingh24,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","23/Mar/18 11:27 PM;mastersingh24;We should probably do this one ... it's not a ton of effort and only allowing the HIGH cipher suites will help avoid having to make the ciphers configurable;;;","19/May/18 10:31 PM;mastersingh24;https://gerrit.hyperledger.org/r/22029;;;",,,,,,,,,,,,,,,,,
fabric-ca needs to support rolling logs,FABC-490,17690,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,smithbk,smithbk,09/Jun/17 9:46 PM,26/Mar/19 8:43 PM,28/Oct/23 2:21 AM,26/Mar/19 8:43 PM,,,,,,,,,,,,,1,,,,,,"In order to not fill up the file system, fabric-ca should support rolling log files.",,aambati,mastersingh24,nyet,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6nz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,mastersingh24,nyet,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jun/17 2:51 AM;aambati;[~smithbk] does this mean we will start writing the log to a file?

 

https://github.com/natefinch/lumberjack is a rolling logger implementation;;;","26/Mar/19 8:43 PM;mastersingh24;This can be handled many ways without adding any functionality to fabric-ca;;;",,,,,,,,,,,,,,,,,,
Modify the document according to the code,FABC-491,30628,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,ping40,ping40,ping40,25/May/18 5:46 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,25/May/18 7:02 PM,,,,,,,,,,,,,0,Documentation,,,,,"lib/csp   doesnot exist.
fabric-ca/lib/util.go doesnot exist.",,ping40,,,,,,,,,,,,,,,,,,,,,,3600,0,,0%,3600,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzzchj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ping40,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/May/18 7:02 PM;ping40;https://gerrit.hyperledger.org/r/#/c/22345/;;;",,,,,,,,,,,,,,,,,,,
Deleting identity makes superfluous access checks,FABC-492,27112,,Task,In CR Review,FABC,Fabric CA,software,denyeart,,,Medium,,,rennman,rennman,27/Jan/18 5:22 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,hygiene,,,,,"It appears that when removing a user from the cmd line client, the server is going through two rounds of access checking for the same authorizations:
{code:java}
2018/01/26 19:59:00 [DEBUG] Processing DELETE request
2018/01/26 19:59:00 [DEBUG] Removing identity 'vanillaUser'
2018/01/26 19:59:00 [DEBUG] DB: Getting identity vanillaUser
2018/01/26 19:59:00 [DEBUG] Checking to see if affiliation '' contains caller's affiliation ''
2018/01/26 19:59:00 [DEBUG] Caller has root affiliation
2018/01/26 19:59:00 [DEBUG] Checking to see if caller 'admin' can act on type 'user'
2018/01/26 19:59:00 [DEBUG] Checking to see if caller 'admin' is a registrar
2018/01/26 19:59:00 [DEBUG] Checking to see if affiliation '' contains caller's affiliation ''
2018/01/26 19:59:00 [DEBUG] Caller has root affiliation
2018/01/26 19:59:00 [DEBUG] Checking to see if caller 'admin' can act on type 'user'
2018/01/26 19:59:00 [DEBUG] Checking to see if caller 'admin' is a registrar
2018/01/26 19:59:00 [DEBUG] DB: Delete identity vanillaUser
2018/01/26 19:59:00 [DEBUG] Identity 'vanillaUser' successfully removed
{code}
This seems redundant.",,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6uv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,rennman,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Oct/18 3:03 AM;skarim;https://gerrit.hyperledger.org/r/c/26858/;;;",,,,,,,,,,,,,,,,,,,
How to restart fabric and fabric-ca ,FABC-493,14465,,Story,Closed,FABC,Fabric CA,software,denyeart,,,High,Duplicate,keithsmith,jjjjibm,jjjjibm,01/Feb/17 4:19 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,19/Jul/18 4:04 AM,,,,,,,,,,,,,1,,,,,,"The readme files for fabric and fabric-ca include instructions for starting and configuring these entities, but no (fabric-ca) or minimal (fabric) instructions for how to reliably restart fabric-ca and fabric.  It is inconceivable to expect no one to need to restart these processes.  
We need to make it clear to our users how to do so reliably. 

One solution is to simply list the steps for cleaning up after the process is cancelled  in the readme files or other associated documentation.   Maybe that's the best approach for fabric.  For {{fabric-ca}},  we can do something more robust and user friendly.

Is now :
{{fabric-ca server [init | start]}}
Could be 
{{fabric-ca server [init | start | *clean*]}}
where *clean* tells fabric-ca to delete all artifacts from prior server invocations.  You'd follow that up with *fabric-ca server start *to get a fresh start. The advantage of doing it this way is that the artifacts remain after the server is cancelled, which may be useful for diagnostics. 

Could be
{{fabric-ca server [init | start | *stop*]}}
where *stop* tells the server to clean up all its artifacts instead of simply crashing and burning.  The idea is that the next start will be a clean start. 

It would be easier to maintain the server *clean|stop* code than to keep the documentation synchronized. 

If you want to bug->task this fix, the documentation should be updated immediately before putting this issue into the backlog. 


               ",Vlaunch VM running Ubuntu,hime-cn,jjjjibm,skarim,smithbk,YingShi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-531,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxjn3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,hime-cn,jjjjibm,skarim,smithbk,YingShi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Apr/17 10:21 AM;smithbk;This is really a feature request.

The fabric-ca-server has an *init* and a *start* command, but no *stop* command or *restart* command.
The start command runs in a foreground and currently assumes you would just use a shell to run it in the background.

One option would be to support a
   fabric-ca-server stop
command which sends a stop request to its listening port as an identity with the ""hf.fabric-ca-server.admin"" attribute (or something similar).
This would prevent just anyone from being able to send a stop request.
The
   fabric-ca-server restart
command would then do a stop and then start a new instance.

I believe go 1.8 will support a graceful shutdown so that we don't lose requests that are currently being processed.;;;","29/Mar/18 4:42 AM;skarim;This is a duplicate of FAB-4487;;;",,,,,,,,,,,,,,,,,,
Fabric-ca should provide an OCSP responder,FABC-494,26721,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,toddinpal,toddinpal,11/Jan/18 3:54 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,1,MembershipServices,,,,,"OCSP responder support would greatly simplify handling revocations.  Currently a CRL needs to be created and distributed to the appropriate parties.  With a large number of clients, this could be rather burdensome.",,denyeart,nramesh,toddinpal,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6tb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,nramesh,toddinpal,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Apr/18 1:01 AM;denyeart;[~smithbk] What's your opinion of this one?  I've gotten feedback that it is important...;;;","11/Jul/18 2:56 AM;toddinpal;It should be noted that OCSP should only be used by clients to ensure the peers/orderers they're communicating with are still valid.  Peers can't use this mechanism during validation as it may lead to inconsistent ledger states.  But given there may be a large number of clients, trying to manually provide them CRLs seems rather daunting.;;;",,,,,,,,,,,,,,,,,,
Improve COP CLI usability,FABC-495,13503,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,22/Nov/16 12:35 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,15/Apr/17 1:26 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"The goal is to provide maximum flexibility and ease-of-use for the COP command line.
COP currently uses cfssl's home-grown argument processing methods.  The main cli/cop.go should be rewritten to use viper similar to how fabric's peer and the old membersrvc.  But this needs to be done in a way to still support all of the options that cfssl supports for analogous commands.  For example, ""cop client enroll"" is analogous to ""cfssl sign"" and should support all of the same options.

The precedence should be as follows for all cop commands other than ""cop cfssl"" commands.  The ""cop cfssl"" commands will continue to just be passed to the cfssl code as it is currently.

# Option argument is highest precedence
# If an input file is specified on the command line, values in this value come next
# Environment variables are next in precedence.  The viper package make this easy.
# Values from the $COP_HOME/config.json are lowest precedence

The values in the $COP_HOME/config.json file are set and retrieved with the following commands:
{code}
    cop setvar <var-name> <var-value>
    cop getvar <var-name>
{code}
The setvar simply sets the variable in $COP_HOME/config.json and the getvar simply returns the variable's value, if set.

See the ""is blocked by"" FAB items below for individual command usage.",,smithbk,SriramaSharma,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-522,FABC-526,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx7a7:",,,,Unset,,Sprint 6 - Membership Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,,,,,,Unset,,,,,,,,,,,smithbk,SriramaSharma,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Apr/17 1:26 AM;smithbk;This was completed under https://jira.hyperledger.org/browse/FAB-2012;;;",,,,,,,,,,,,,,,,,,,
Name of COP executable should be cop rather than cli by default,FABC-496,14081,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,15/Jan/17 2:23 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,22/Jan/17 2:44 AM,,,,,,,,,,,,,0,,,,,,"The main for cop is currently in the fabric-cop/cli package, so when you invoke
`go get github.com/hyperledger/fabric-cop/cli` the name of the executable is `cli` by default.
The COP main should be in a package named 'cop' so that the executable is named 'cop' by default.
I am going to move the main to the fabric-cop/cop package, so you must use `go get github.com/hyperledger/fabric-cop/cop` instead of `go get github.com/hyperledger/fabric-cop/cli` to install the COP executable.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxi3b:",,,,Unset,,Sprint 9 - Membership Services,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/17 2:44 AM;smithbk;This was done as part of the fabric-cop and fabric-ca name change;;;","22/Jan/17 2:44 AM;smithbk;Well, the executable is now fabric-ca, that is;;;",,,,,,,,,,,,,,,,,,
Register flags for each client sub-command and Intermediate client/tls flags,FABC-497,15283,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,09/Mar/17 11:45 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,v1.0.0,,,,,,,,,,,,0,,,,,,"Right now all client side flags are registered as global. In this case, flags that are not relevant to the specific client command you are trying to run are displayed as well. Since some flags don't have any impact on all client side commands, it should be improved so that only relevant flags for specific commands are displayed. 

Client enrollment and TLS flags added on server/ca side to support intermediate CA (acting like a client) configuration through command line.
",,ChristopherFerris,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6gf:",,,,Unset,,Sprint 13 - Membership Service,Sprint 14 - Membership Service,Sprint 15 - Membership Service,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 9:32 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/7351/;;;","04/May/17 2:44 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/7351/7;;;",,,,,,,,,,,,,,,,,,
Validation on attributes being registered by a Registrar,FABC-498,20614,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,06/Sep/17 2:54 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,12/Oct/17 12:06 AM,,,,,,,v1.1.0,,,,,,0,,,,,,"Checks need to be performed to see that the Registrar has proper authority to register attributes for an identity. 

Register an attribute if:
1. The registrar has the hf.Registrar.Attributes attribute with values that matches the attribute or attribute pattern being registered.  See example below.
    For example, a registrar with the *hf.Register.Attributes* attribute with a value of ""a.b,a.c.*"" can register a.b and a.c.d, but cannot register a.c or a.d
2. If the attribute being registered is *hf.Registrar.Attributes*, require that the value of the registrar's hf.Registrar.Attribute attribute be equal to or a super set of the value being registered.
    For example, suppose the registrar has hf.Registrar.Attributes=a.b,a.c.*, then consider the following values of the registree:
    a) a.b,a.c.* - OK because it is equal
    b) a.b,a.c.d.* - OK because it is a subset
    c) a.* - NOT OK because ""a.*"" contains more attributes than the registrar
    d) b.* - NOT OK because ""b.*"" is not contained in the registrar's values/patterns
",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyfbr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Sep/17 11:16 PM;skarim;https://gerrit.hyperledger.org/r/#/c/13215/;;;",,,,,,,,,,,,,,,,,,,
COP UserRegistry UpdateUser/UpdateField needs consolidation improvement,FABC-499,13851,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,18/Dec/16 4:37 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,07/Jan/17 11:58 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"In fabric-cop/cli/server/register.go, we insert a user and immediately have to update a field.  This should only require a single DB update. 

I think the reason this is required today is because we have only some of the fields in spi/UserInfo which are in the DB's UserRecord structure.  It seems to me that we should have only a single UpdateUser which can update one or more fields and that we should delete the UpdateField/GetField methods.  Any reason for not doing this?

{code}
       err = r.cfg.UserRegistry.InsertUser(insert)
        if err != nil {
                return """", err
        }

        err = r.cfg.UserRegistry.UpdateField(id, maxEnrollments, CFG.UsrReg.MaxEnrollments)
        if err != nil {
                return """", err
        }
{code}
",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx7x3:",,,,Unset,,Sprint 7 - Memship Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Improvement to revoke client side command,FABC-500,15084,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,28/Feb/17 7:42 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,11/Mar/17 12:55 AM,,,,,,,,,,,,,0,,,,,,"Improve revocation logic to check that revoker has the necessary affiliation to revoke a user.

For example, revoker with affiliation bank.bank_1 can revoke user with bank.bank1.dep1 but can't revoke bank.bank2.

Add check to make sure that either the enrollment ID is provided or both serial and aki are provided, both can't be provided at the same time.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx5zr:",,,,Unset,,Sprint 12 - Membership Service,Sprint 13 - Membership Service,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
fabric-ca-server token authentication should be more tolerant,FABC-501,20314,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,smithbk,smithbk,21/Aug/17 11:48 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Today, fabric-ca-server will fail register, revoke, and reenroll requests if the authorization header does not contain an actual certificate that was issued by the CA and that is stored in the CA's database.   This is overly restrictive and prevents us from supporting a scenario in which a user starts with cryptogen and then wants to transition to using fabric-ca-server.
It should be sufficient to verify that the certificate was issued by the CA's signing certificate, and not require that the actual certificate is stored in the CA's database. ",,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6qn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Aug/17 4:36 AM;mastersingh24;[~smithbk] - I don't think we should waste too much time on this.  If anything, maybe sometime in the future could add an API to import an existing certificate.  But I would not change the current security logic at this point.  But that's just me;;;",,,,,,,,,,,,,,,,,,,
As peer admin I need the ability to get latest CRI using fabric-ca-client command,FABC-502,30662,,Story,In CR Review,FABC,Fabric CA,software,denyeart,,,Medium,,JonathanLevi,aambati,aambati,26/May/18 10:37 AM,03/Dec/19 9:18 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,idemix,,,,,"Currently there is no way for a peer, which is a verifier of an Idemix signature to get latest CRI from the Fabric CA. 

Add a new command called getcri that allows peer admins to get latest CRI from Fabric CA. getcri should accept either  a X509 enrollment certificate or an Idemix credential.",,aambati,ahmedsajid,denyeart,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-588,,,,,,,,,"1|hzzctr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,ahmedsajid,denyeart,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/May/18 10:44 AM;aambati;https://gerrit.hyperledger.org/r/c/22377/;;;","26/May/18 3:15 PM;smithbk;I don't think this should go into v1.2.  We need to have a clear design for who will update CRI info in MSPs (local and channel), how, and when.  I don't think a simple CLI command will suffice since it is unpredictable when a peer admin would need to update, would be too manual, and would only work for local MSPs.  We will need something more automatable and takes into account channel MSPs and so must drive it as a transaction like for CRL.

Since we have deferred revocation for v1.2, we should disable verification of CRI info for v1.2.;;;","08/Aug/18 1:41 AM;smithbk;I just spoke with Maria.  She is going to update the google doc to include this design, but here are the things we've discussed regarding the CRI flow.

There are two events which can cause fabric-ca-server to generate a new CRI:
a) an idemix credential is revoked (either by user name or by revocation handle).
b) fabric-ca-server needs to generate an idemix credential but it has run out of revocation handles.  It uses one revocation handle each time it issues an idemix credential (correct?).

There are two pieces:

1) Updating CRI in fabric from fabric-ca-server

When fabric-ca-server generates a new CRI, it should push the new CRI into fabric to update the appropriate idemix MSPs.  It probably makes sense for fabric-ca-server to have a configurable minimum-time-between-cri-updates to prevent updates from being too frequent when a batch of credentials are revoked.

2) ""Notifying"" the end users that they need to get a new CRI from fabric-ca-server

The thought is to have a standard error returned by fabric which the java SDK recognizes when the CRI it uses is out-of-date.  This error causes the java SDK to get the latest CRI from fabric-ca-server and then reissue the transaction (or proposal?).  Fabric could also generate an event each time the CRI is updated, but I think the ""standard error"" approach is still needed; otherwise, there would be a timing window in which the SDK is notified just after submitting the transaction.

Anyway, Maria will update this jira item with the link to the google doc once complete.

;;;","25/Aug/18 7:02 AM;denyeart;[~skarim] [~smithbk] Per the CR comment, I believe this fits better under the Revocation epic for v1.4... I've gone ahead and moved it.;;;","04/Jan/19 5:31 AM;skarim;[~JonathanLevi] I assigned this to you, its looks like you will be working on the remaining Idemix work.;;;",,,,,,,,,,,,,,,
Default startup of ca-server does not support removal of users,FABC-503,27870,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,Nishi,Nishi,21/Feb/18 2:31 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,2,Usability,,,,,"On fabric-ca 1.1 to be able to remove an identity ca-server need two extra flags during start up    something like this:
{code:java}
command: sh -c 'fabric-ca-server start --cfg.identities.allowremove --cfg.affiliations.allowremove -b admin:adminpw -d'{code}
 

Expected removal of identities to  happen automatically  without passing any flags.

Could we have this feature of removal of identities supported without user having to pass these extra flags during startup command?",,alexvicegrab,denyeart,Nishi,nyet,scottz,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-7212,,,,,FABC-483,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6wf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,alexvicegrab,denyeart,Nishi,nyet,scottz,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Feb/18 4:00 AM;denyeart;[~skarim] Can you comment on the rationale for having the flags?;;;","21/Feb/18 4:11 AM;skarim;This is the intended design, removing of identities or affiliations is not something should happen often and we don't want users accidentally deleting users or affiliations and for this reason, it is not enabled by default.;;;","21/Feb/18 4:12 AM;denyeart;Ok thanks Saad, Closing.;;;","21/Feb/18 4:42 AM;Nishi;After chatting with Saad, we agreed to reopen the issue and mark it as an improvement to see if there is any way of not asking the users to pass these flags to use ""removal users/affiliations"" feature in fabric-ca after speaking to fabric-ca development team.;;;","21/Feb/18 7:37 AM;Nishi;Adding to fabric-ca-server-config.yaml after a 1.0 ca-servers get created and using this configuration for upgrade
{code:java}
cfg:
affiliations:
allowremove: true
identities:
allowremove: true{code}
 

inside docker-compose-e2e-template.yaml (used to bring up fabric network with 2 ca servers) command to start a fabric-ca-server remains the same when starting servers before and after an upgrade now as follows:
{code:java}
command: sh -c 'fabric-ca-server start -b admin:adminpw -d'{code}
 

Upgrade tests ran successfully with this setup;;;","21/Feb/18 9:36 AM;scottz;Previous comments indicate we might be able to change this from an opt-in to an opt-out. It seems a more likely use-case that operators would want the ability to remove them. If that is agreed, then if they are missing from config file and from commadn line, then the default behavior should be to initialize them as true; and the user can optionally DISable them by either method.  Was there a reason why it was done that way, that would prohibit us from flipping the logic?;;;","23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","07/Jun/18 1:09 AM;alexvicegrab;Perhaps not ultra-urgent, but would be good to at least add these options to the standard configuration, even if defaulted to false.
 i.e.


{code:java}
cfg:
  affiliations:
    allowremove: true
  identities:
    allowremove: true
{code};;;","08/Jun/18 8:03 AM;alexvicegrab;Submitted issue FAB-10566 and fix https://gerrit.hyperledger.org/r/#/c/22829/ that is related to this issue.;;;","16/Jun/18 1:55 AM;skarim;https://gerrit.hyperledger.org/r/c/23201/;;;",,,,,,,,,,
Typos in fabric-ca-client package,FABC-504,19545,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,yeyc.linuxf,yeyc.linuxf,yeyc.linuxf,28/Jul/17 3:01 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,01/Aug/17 8:11 PM,v1.0.0,,,,,,v1.1.1,,,,,,0,fabric-ca,,,,,"package: github.com/hyperledger/fabric-ca/cmd/fabric-ca-client

  config.go:

    Line 125: ""Distinquished"" should be ""Distinguished""

  main.go:

    Line 34: ""Hyerledger"" should be ""Hyperledger""

    Line 92: ""Distinquished"" should be ""Distinguished""

    Line 124: ""enbled"" should be ""enabled""",,yeyc.linuxf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzy9yn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,yeyc.linuxf,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Jul/17 3:16 PM;yeyc.linuxf;https://gerrit.hyperledger.org/r/#/c/12005/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-client getcacert generate empty file if no certs are recovered,FABC-505,28514,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,dsanchezseco,dsanchezseco,dsanchezseco,14/Mar/18 9:12 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,29/Mar/18 12:16 AM,,,,,,,,,,,,,0,Usability,,,,,If querying the root CA which doesn0t have an intermediate cert the file is created empty,,,,,,,,,,,,,,,,,,,,,,,,3600,0,,0%,3600,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzz19b:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Mar/18 10:41 PM;dsanchezseco;https://gerrit.hyperledger.org/r/#/c/19155/;;;",,,,,,,,,,,,,,,,,,,
Implement Validity Period in TCerts (using the standard X.509 v3 fields),FABC-506,12443,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,JonathanLevi,JonathanLevi,17/Aug/16 4:49 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,19/Jul/18 4:04 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Please see notes in FAB-142

The membersrvc.yaml file should have MaxTCertExpirationTime config option which denotes the total length of time that the tcert should be valid, beginning at the time of issuance.
Membership service should get the current time from a peer by invoking the clockSCC.getTime() system chain code function as defined in FAB-171.  It then sets the ValidTo field of the tcerts to the current time + MaxTCertExpirationTime

",,JonathanLevi,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-171,,,,,,,FABC-23,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3166,,,,,,,,,"1|hzxb5j:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,JonathanLevi,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/18 12:05 AM;skarim;Closing out, TCerts will no longer be implemented;;;",,,,,,,,,,,,,,,,,,,
Create certificate signing requests with fabric-ca-client,FABC-507,19366,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,jpatchell,jpatchell,jpatchell,20/Jul/17 2:58 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,29/Aug/17 12:55 AM,,,,,,,v1.1.0,,,,,,0,Release-planning-1.1,,,,,"Currently the fabric-ca-client is able to generate a certificate signing request and send it to the fabric-ca-server for it to generate and sign a certificate for the private key generated by the BCCSP in the msp directory.

If a user wishes to use an external CA for generating and signing the certificates, it would be useful to leverage the fabric-ca-client and BCCSP to generate a certificate signing request for the keys generated by the BCCSP and write the CSR to a file without any interaction with the fabric-ca-server.  This would allow the user to then send the CSR file to an external CA.

The fabric-ca-client should be modified to accommodate this use case.",,aambati,jpatchell,nitingaur,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6452,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzy967:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,jpatchell,nitingaur,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jul/17 11:17 PM;jpatchell;https://gerrit.hyperledger.org/r/#/c/11759/;;;","29/Aug/17 12:42 AM;aambati;[~jpatchell] are you still working on this? The change set mentioned in your previous comment is merged. So, if you are done, pls mark it as done. Thank you.;;;",,,,,,,,,,,,,,,,,,
Support storing certificates in LDAP,FABC-508,27766,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,smithbk,smithbk,16/Feb/18 12:17 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Investigate doing away with the need for a separate DB for certificates but also use LDAP for storage of certificates.
See http://www.tldp.org/HOWTO/archived/LDAP-Implementation-HOWTO/certificates.html
Further, could/should we support the registration APIs with LDAP?
Basically, I'm suggesting that externally the APIs look the same but internally we use LDAP for everything persistent.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6vz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca-server needs an option to regen key material,FABC-509,15624,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,smithbk,smithbk,08/Apr/17 4:34 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"We currently always pass ""false"" to lib/Server's Init function which means the key material will never be regenerated if it already exists.
We need an option to change this to ""true"", but the default remains ""false"".
This should also include:
1) Adding a test case
2) Update readthedocs",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6nj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for getting a CRL from the fabric-ca-server,FABC-510,19232,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,smithbk,smithbk,14/Jul/17 12:01 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,18/Oct/17 11:34 PM,v1.0.4,,,,,,v1.1.0,,,,,,3,Release-planning-1.1,sdk,Security,,,"Add support for getting a CRL from the fabric-ca-server.
We currently assume that the same client that revokes a certificate in fabric-ca-server will also add to the CRL of the appropriate channels in fabric,
but this is not a good long-term assumption.
There may be other reasons to need to retrieve the CRL also.",,aambati,DrVadson,Hangyu_FJH,JonathanLevi,mastersingh24,passkit,smithbk,tsrb,wutongtree,YashGanthe,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6447,,,,,,,,,,,,,,,,,FAB-6409,FAB-6541,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx3qn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,DrVadson,Hangyu_FJH,JonathanLevi,mastersingh24,passkit,smithbk,tsrb,wutongtree,YashGanthe,yoheiueda,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Jul/17 12:21 AM;passkit;We are building a B2C applicaiton. If users stop subscribing, then they will lose their rights to access the chain. We will revoke their certificate. Volumes will be large and will requite automation. We therefore wish to automate the generation of a CRL and applying it to the chain.

An alternative would be short expiry dates and re-enrollment, but there may still be circumstances whereby we need to revoke a rogue user.

Generating a CRL manually - while possible, is not at all an easy task and requires maintaining an openssl database.  The APIs currently don't provide the information required to create such a database and maintaining 2 databases would seem to defeat the objective of having a ca component.;;;","30/Aug/17 3:01 PM;YashGanthe;Currently what is the process for generating the CRL file manually? If we revoke the certificate using fabric-client, what do we need to add in the CRLs folder of the MSP?;;;","18/Sep/17 7:38 PM;mastersingh24;[~aambati] - we should try to do this for v1.1;;;","26/Sep/17 4:07 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/13583/;;;","26/Sep/17 10:45 PM;Clayton Sims;changing status to in review;;;","28/Sep/17 11:29 PM;aambati;[https://gerrit.hyperledger.org/r/c/13775/]

[https://gerrit.hyperledger.org/r/c/13583/]

https://gerrit.hyperledger.org/r/c/13887/;;;","26/Oct/17 1:13 AM;aambati;This feature is documented at [https://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#generating-a-crl-certificate-revocation-list] ;;;","10/Nov/17 1:22 AM;JonathanLevi;Thanks for merging this [~mastersingh24]

We should also consider having this in the next 1.0.x (v1.0.5) cut. Would definitely not harm.;;;",,,,,,,,,,,,
Add support for multiple root authorities,FABC-511,15059,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,,mastersingh24,mastersingh24,27/Feb/17 6:23 AM,27/Jul/19 11:46 PM,28/Oct/23 2:21 AM,27/Jul/19 11:45 PM,,,,,,,,,,,,,0,,,,,,"Fabric V1 bases most of the policies for endorsement, channels, etc on the concept of members.  Each member is able to use their own membership service provider (MSP) and one way to differentiate MSPs is for each member to use their own root authority.

We can support this with fabric-ca by spinning up multiple instances, but it might be more convenient to provide an option (possibly for dev / test only) to support multiple root authorities within a single instance of the fabric-ca server.",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxm2v:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Feb/17 6:24 AM;mastersingh24;It's possible to do this using a method similar to cfssl's multiroot ca program.

[~jonathan] [~smithbk] What do you think?;;;","29/Mar/17 11:23 PM;mastersingh24;duplicate of https://jira.hyperledger.org/browse/FAB-2896;;;",,,,,,,,,,,,,,,,,,
fabric-ca-server should generate its own TLS cert internally,FABC-512,18751,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,28/Jun/17 11:57 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,11/Sep/17 11:12 PM,v1.0.0,,,,,,v1.1.0,,,,,,0,,,,,,The fabric-ca-server should be enhanced to generate its own TLS cert internally,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-432,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzy63j:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Aug/17 10:25 PM;skarim;https://gerrit.hyperledger.org/r/#/c/12063/;;;",,,,,,,,,,,,,,,,,,,
Improve migration logic prevent possible OOM on server,FABC-513,26784,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,13/Jan/18 4:20 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,The migration logic currently loads all the users that need to be migrated into memory at once. This needs to be rewritten to prevent possible OOMs.,,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6tr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;",,,,,,,,,,,,,,,,,,,
Server should not run db migration logic if the level has not changed,FABC-514,27957,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,aambati,aambati,24/Feb/18 1:25 AM,10/Nov/18 4:05 AM,28/Oct/23 2:21 AM,10/Nov/18 4:05 AM,v1.1.0,v1.2.0,,,,,v1.4.0,,,,,,0,,,,,,"Currently, Fabric CA server runs DB migration logic during startup, even if the server levels and database levels match. DB migration logic should be run only if the DB levels are less than server levels. ",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx03r:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/May/18 3:42 AM;kchristidis;[~aambati]: Do you have the cycles to do this on time for 1.2, or should we defer?;;;","01/Jun/18 5:10 AM;aambati;https://gerrit.hyperledger.org/r/c/18643/;;;",,,,,,,,,,,,,,,,,,
Fabric CA version capabilites discovery,FABC-515,24840,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,smithbk,rickr,rickr,07/Dec/17 7:17 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,v1.1.0,,,,,,,,,,,,0,,,,,,"The FabricCA should provide both a means for finding it's current version and possibly what capabilities it has. 
 I suggested augmented {color:#444444}cainfo{color} endpoint as I think it's been there since 1.0 so it can be distinguished between api failure and endpoint not there.  If cainfo does not have a version or possibly capabilities  it's just assumed 1.0 level.

 

 ",,denyeart,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6p3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Dec/17 7:20 AM;rickr;[~skarim] fyi;;;","23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;",,,,,,,,,,,,,,,,,,
fabric-ca Makefile baseimage version need to be updated,FABC-516,21069,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,29/Sep/17 4:26 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,05/Oct/17 5:58 PM,,,,,,,v1.1.0,,,,,,0,,,,,,"Makefile currently sets 
BASEIMAGE_RELEASE = 0.3.1
but the current published image is  0.4.2",,mastersingh24,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyhof:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,rennman,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Sep/17 3:17 AM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/13933/;;;",,,,,,,,,,,,,,,,,,,
A more generic get credential api on Fabric CA,FABC-517,30709,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,29/May/18 11:09 PM,28/Jul/19 12:00 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"We should consider something more generic than enroll/reenroll now that we have two types of credentials, like a fabric-ca-client getcredential, which allows two options:


 1) type of input authentication data to use (user/pass, x509, or idemix)
 2) type of output/credential to produce (x509 or idemix) and where to store the credential",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzzd5r:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Docker namespace should be override-able,FABC-518,18237,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,mrshah-ibm,mrshah-ibm,16/Jun/17 11:14 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,05/Jan/18 11:57 AM,v1.0.0-beta,,,,,,,,,,,,0,,,,,,"The Makefile of fabric-ca hard-codes the docker namespace to ""hyperledger""
{quote}DOCKER_ORG = hyperledger
{quote}
 

Can we match it to the ""DOCKER_NS"" in the fabric & fabric-baseimage repository. Also, can we make it override-able.

 

Adding to this - the baseimage namespace is also hardcoded to ""hyperledger:baseimage"". We should use BASE_DOCKER_NS environment variable as in other repositories.",,aambati,mrshah-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzy4i7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,mrshah-ibm,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Dec/17 12:28 PM;aambati;https://gerrit.hyperledger.org/r/c/16171/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca-server needs a way to limit what can be in an issued certificate,FABC-519,15366,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,smithbk,smithbk,16/Mar/17 1:55 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,v1.0.0,,,,,,,,,,,,0,MembershipServices,,,,,"Once you have an enrollment ID and secret, you can send an enrollment request to the fabric-ca-server with a CSR that has any fields that you want.  Now that the fabric is using the OU field to make authorization decisions, we need to be able to restrict which OU fields can be requested in a CSR based on which user is enrolling; otherwise, a user with an enrollment ID and secret could gain access by requesting an OU that he/she shouldn't have.  Furthermore, I could imagine chaincode wanting to use some other field in a certificate to make access control decisions.  Therefore, the fabric-ca-server should more generally be able restrict what constitutes a valid CSR, and I think doing so on a per identity type basis makes sense.

Here is a proposal for how to fix this.

The fabric-ca-server already requires the ""type"" to be specified when registering an identity.
Furthermore, it already checks to make sure that a user can only register identities with authorized types via the ""hf.Registrar.Roles"" and ""hf.Registrar.DelegateRoles"" attributes.
Here is the default definition for the bootstrap admin.
 {code}
  identities:
     - name: admin
       pass: adminpw
       type: client
       affiliation: """"
       attrs:
          hf.Registrar.Roles: ""client,user,peer,validator,auditor,ca""
          hf.Registrar.DelegateRoles: ""client,user,validator,auditor""
          hf.Revoker: true
          hf.IntermediateCA: true
{code}

A new config section should be added similar to the following:
{code}
roles:
   peer: 
      certfilter: ""<bool-expr-for-valid-cert>""
   user:
      certfilter: ""<bool-expr-for-valid-cert>""    
{code}

So when an enrollment request is received for a particular type of user, the type must in the ""roles"" section and the associated certfilter's boolean expression must evaluate to true on the certificate before returning it successfully.

This allows a linkage to be established between identity types and fields in a certificate on which access control decisions are being made (e.g. OU).

The precise boolean expression language will be posted later, but will be based on govaluate, so not reinventing the wheel.

An alternative approach rather than associating the boolean expression with the identity type is to associate an expression with each identity.  This would be more flexible in that you don't have to create a new type for each slightly different expression that you may want.  The disadvantage is that I don't think we could use govaluate because we would need to limit the language to something that could easily be ""subsetted""; that is, when a registrar registers an identity, we need to make sure that they can only register an identity with a subset that they themselves own.  That is what the hf.Registrar.Roles is about.  The registrar can't registrar an identity with a type that isn't in one of it's roles.

And yes, we should use ""type"" or ""roles"" but not both as they are being mixed here.
",,denyeart,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6nb:",,,,Unset,,Sprint 14 - Membership Service,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Mar/17 9:13 PM;mastersingh24;{quote}Now that the fabric is using the OU field to make authorization decisions{quote}

Just to be clear here - the ability for an MSP to specify a combination of a root certificate and an OU is not the default method nor is it required for operation.  It is in place for the case where there really is a ""central"" authority issuing certificates for multiple organizations (and specifically we had a couple of customers who want to use their own CA infrastructures to do this).

;;;","27/Mar/17 11:58 PM;smithbk;Given Gari's comment, I changed priority to lowest and put in backlog;;;","23/Mar/18 2:08 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;",,,,,,,,,,,,,,,,,
fabric should support ecdsa-521 keys,FABC-520,26343,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,rennman,rennman,04/Jan/18 2:16 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,04/Jul/19 8:37 PM,,,,,,,,,,,,,0,,,,,,"According to util/csp.go, ecdsa-521 is a TODO. We should implement.
{code:java}
case ""ecdsa"":
   switch kr.Size() {
      case 256:
         return &bccsp.ECDSAP256KeyGenOpts{Temporary: ephemeral}, nil
      case 384:
         return &bccsp.ECDSAP384KeyGenOpts{Temporary: ephemeral}, nil
       case 521:
         // Need to add curve P521 to bccsp
         // return &bccsp.ECDSAP512KeyGenOpts{Temporary: false}, nil
         return nil, errors.New(""Unsupported ECDSA key size: 521"")
...
{code}",,haibbo,mastersingh24,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-382,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6sv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,haibbo,mastersingh24,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Jan/18 9:03 PM;mastersingh24;This is not implemented in the bccsp package so until then this is on hold.  We also don't have any requirement to support this.
This is an improvement and not a bug;;;",,,,,,,,,,,,,,,,,,,
fabric-ca client restrict data returned to client for authentication/authorization errors,FABC-521,27332,,Task,To Do,FABC,Fabric CA,software,denyeart,,,Low,,,rennman,rennman,02/Feb/18 3:15 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,hygiene,,,,,"This is peripherally related to 
fabric-ca need more accurate http status codes
https://jira.hyperledger.org/browse/FAB-7466
but it is really a separate issue.

FAB-7466 deal with classification of error messages, while the current issue targets the insecure content of the error messages. the code should be inspected for cases in which the server returns detailed descriptions of auth/access errors. These details should be limited to the server's log and not externalized to the client. The client should receive no more, no less than
401 - Unauthorized
403 - Forbidden

Whether this holds true for 404 - Not Found is debatable.

On the other hand, for 400 - Bad request erors, detailed descriptions in the server's response to the client is fine, and in fact preferred. (As an aside, there are several places in the code where 400 is returned erroneously, but FAB-7466 should take care of that.)",,denyeart,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-542,FABC-309,,,,FABC-309,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6vj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;",,,,,,,,,,,,,,,,,,,
Improvement for cop client register command,FABC-522,13583,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,02/Dec/16 8:22 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,15/Apr/17 1:22 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Make the usage for the `cop client register` command as follows:
{code}
cop client register <enrollmentID>
          -type {client | peer | orderer}
          -group <affiliationGroupName>
          -attr <name>=<value>
          -url <serverURL>
          -jsonfile <registrationInfoFileName>
{code}
Allow a single instance of all options except the 'attr' option, since we want to allow multiple attributes to be associated with a single user.
The 'jsonfile' is a file of the following form.  If both the 'jsonfile' and another option is used, the value of the option argument should take precedence of what is in the jsonfile.
{code}
{
  ""id"": ""test_user"",
  ""type"": ""client"",
  ""group"": ""bank_a"",
  ""attrs"": [{""name"":""test"",""value"":""testValue""}]
}
{code}

The default value of -type is ""client"".  No other options have a default value.

The overall precedence of where to get these values is:
1) option argument is highest precedence
2) value in json file is next, if -jsonfile option is used
3) environment variable (assuming viper is used, this should be easy)
4) the value in the $COP_HOME/config.json file as set by a ""cop setenv"" command.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-495,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzxfe7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Apr/17 1:22 AM;smithbk;This work was completed under https://jira.hyperledger.org/browse/FAB-2012;;;",,,,,,,,,,,,,,,,,,,
NewCA is not actually meant to be public,FABC-523,21753,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,lehors,lehors,lehors,10/Oct/17 6:35 PM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,21/Oct/17 1:32 AM,v1.0.3,,,,,,v1.1.0,,,,,,0,,,,,,"The NewCA function is not actually meant to be public and it opens the CA DB which can only be closed by calling the private function closeDB.

It therefore ought to be renamed newCA.

 ",,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-177,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyj0v:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,lehors,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Create wrappers which allow errors to be returned for better test coverage,FABC-524,20184,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,smithbk,smithbk,15/Aug/17 4:45 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,05/Oct/17 5:59 PM,,,,,,,v1.1.0,,,,,,0,,,,,,"We need to identify the places in the code that we need to generate errors for better test coverage.  Once we've identified the big ones, we need to create wrapper functions which allow us to set a variable which causes the wrapper function to return an error.  This will allow us force the code down certain error paths for more complete coverage.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyd53:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Improve admin role usability,FABC-525,16503,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,smithbk,smithbk,10/May/17 1:04 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,08/May/19 8:53 PM,,,,,,,,,,,,,7,,,,,,"Only users with admin role privileges can install and instantiate chain code.  MSP determines if someone has the admin role by doing a strict byte comparison with certificates found in the admincerts directory.  For chaincode install, this is the local MSP and for chaincode instantiate, it is the channel MSP in the config block. 

This makes it difficult to write an application which both enrolls and installs and/or instantiates chaincode.  For chaincode installation, it means that after enrollment and reenrollment, the user's certificate must be exported from the SDK and copied (manually?) to the msp/admincerts directory on the peer's file system.  This is not very usable.

The following is a proposal to make this more usable.

1) Enhance the SatisfiesPrincipal function of msp to do more than a byte comparison.  Logically speaking, change the comparison from ""if the caller's cert exactly matches any of these admincerts"" to ""if the caller's cert exactly matches any of these admincerts OR (if the caller's cert is issued by any of root/intermediate certs AND the cert has the 'hf.admin' attribute with a value of 'true').

2) Enhance fabric-ca to put the 'hf.admin' attribute in any issued ecerts for user's with the 'hf.admin' attribute.  A lot of this code already exists and would be pretty easy.  From a configuration perspective, we could of course provide a configurable list of attributes which are put into ecerts, but the default would for now just be a list of one attribute: ""hf.admin"".
NOTE: This has a dependency on FAB-5556 because we need to make sure that admin role evaluates the same across the channel.

This would not require any changes to SDKs.

The user experience would then be to register user's with the ""hf.admin"" attribute, enroll as normal, and no manual distribution steps would be required.",,binhn,ChristopherFerris,dabbertorres,denyeart,DrVadson,elli-androulaki,JonathanLevi,jyellick,nnao,shanlusun,SimonOberzan,smithbk,ssaddem,transhft,tsrb,tylerwince,vdods,vinitesh,weeds,wutongtree,,,,,,,,,,,FABC-539,FAB-5999,,,,,,,,,,,,,,,,,FAB-15388,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx3pb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,binhn,ChristopherFerris,dabbertorres,denyeart,DrVadson,elli-androulaki,JonathanLevi,jyellick,nnao,shanlusun,SimonOberzan,smithbk,ssaddem,transhft,tsrb,tylerwince,vdods,vinitesh,weeds,wutongtree,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/May/17 3:07 AM;binhn;I agreed with the assessment of the current implementation.

[~ellaki] [~greg.haskins];;;","10/May/17 7:07 PM;elli-androulaki;Was wondering if this change in the MSP logic suffices for us to define a different MSP that identifies admins in this way(?) 

It seems a bit strange to me that we would have two ways of identifying the same role in the same MSP. If we decide to go this way, shall we have a flag that is set or unset to indicate the mode in which admins are identified in a certain MSP instance? Though this would complicate the configuration of that MSP slightly more, we can have the default value of the flag be indicating the current operation. What do you think?

Also keep in mind that with this new way of defining admins, changing an admin would require blacklisting its certificate.

 Would you consider this story for alpha2, v1.0, v1.1?;;;","27/May/17 2:19 AM;elli-androulaki;Hi [~keithsmith], will you take this on? :);;;","27/May/17 5:09 AM;smithbk;Yes, but I thought the door was closed for v1.   Are you talking about post v1?;;;","30/May/17 3:11 AM;ChristopherFerris;UX throughout is awful, but we are done making changes unless there's an actual bug. 

 

-1 for me;;;","23/Jun/17 6:25 PM;vinitesh;Is this improvement covers addition of configurable list of attributes into ecerts?;;;","18/Jul/17 3:47 AM;smithbk;Yes, it will also cover addition of a configurable list of attributes in ecerts.
See https://jira.hyperledger.org/browse/FAB-5346;;;","10/Aug/17 5:45 PM;elli-androulaki;This is also in the same spirit as https://jira.hyperledger.org/browse/FAB-5664 for allowing MSP to distinguish between system entities.

 ;;;","12/Aug/17 3:27 AM;weeds;This needs also more discussion.We really need more discussion on this in the community on how we approach this.  We have OU approach and also an attribute approach to consider.;;;","23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","22/Jan/19 1:36 AM;dabbertorres;Is there any updates on this issue?;;;","28/Jan/19 1:39 PM;denyeart;This item was considered important to do after v1.0. With v2.0 coming including an updated lifecycle, it is worthwhile to re-visit.

Any thoughts on this [~mastersingh24] [~jyellick] [~smithbk] [~skarim] [~sykesm] ?

 ;;;","28/Jan/19 2:16 PM;jyellick;I think half is this is tied up in the ability to update a peer's local MSP without restarting.  If this were possible, I think many of the usability issues go away.

That being said, I've also long thought it would be a fairly simple thing to do, to designate some particular channel to be an 'MSP source' for a peer.  Essentially, if this channel says the user is an admin, then treat that user as an admin.

But specifically, I wouldn't consider this tied to lifecycle, and a more general approach is needed.;;;","29/Jan/19 2:22 AM;smithbk;I agree that updating a peer's local MSP is needed for other reasons, but I don't think it is needed to solve this particular problem.
This can be solved in an easier way by removing the need for a config update.
My proposal in the description works only with fabric-ca because it relies on custom attributes; however, you could use an OU path or any of the standard X509 fields to support other CAs.
No matter which field is used to identify an admin identity, there must be appropriate governance around the issuance of certs with that field.
For example, if the flag to identify admin was OU=admin, the CA must issue certs with OU=admin to only the appropriate identities who are intended to be admins.;;;","29/Jan/19 2:35 AM;jyellick;[~smithbk] Agreed, it would be great to be able to define admins by OU, instead of explicitly listing them, and perhaps that would satisfy this issue by itself.  Still, I think there is the broader issue that managing the local MSPs is painful, and the requirement to specifically enumerate the admin certs makes the pain more obvious.;;;",,,,,
Improve usability of cop client enroll/reenroll commands,FABC-526,13584,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,02/Dec/16 8:46 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,15/Apr/17 1:19 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Make the usage as follows:
{code}
   cop client enroll <enrollmentID> <enrollmentSecret> 
          -url <serverURL>      // default is ""http://localhost:8888
          -hosts <comma-separated-list-of-hostnames>  // default is local hostname
          -alg {ecdsa | rsa|   // default is 'ecdsa'
          -keysize <keysize>   // default is 256
          -O <organization>
          -OU <organizational-unit>
          -L <location>
          -ST <state>
          -C <country>
          -jsonfile <csrJsonFile>
{code}

And the reenroll command is identical except there are no <enrollmentID> <enrollmentSecret> arguments.  So it is as follows:
{code}
   cop client reenroll
          -url <serverURL>      // default is ""http://localhost:8888
          -hosts <comma-separated-list-of-hostnames>  // default is local hostname
          -alg {ecdsa | rsa|   // default is 'ecdsa'
          -keysize <keysize>   // default is 256
          -O <organization>
          -OU <organizational-unit>
          -L <location>
          -ST <state>
          -C <country>
          -jsonfile <csrJsonFile>
{code}

Each of these options should also be settable via a new CLI command as follows:
{code}
    cop setvar <var-name> <var-value>
    cop getvar <var-name>
{code}
The setvar simply sets the variable in the $COP_HOME/config.json file and the getvar simply returns the value.

The precedence is:
1) command line option is highest precedence
2) value in <csrJsonFile> is next, if specified
3) environment variable is next ... if using viper, this is easy
4) value in $COP_HOME/config.json lowest precedence
5) default value if there is one for the field.  The ones with default values are specified above in the usage message.

The default values are specified in the usage.",,smithbk,SriramaSharma,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-495,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxfef:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,SriramaSharma,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Apr/17 1:21 AM;smithbk;This work was done under [Fab-2012];;;",,,,,,,,,,,,,,,,,,,
COP library API simplification,FABC-527,13871,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,21/Dec/16 10:26 PM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,05/Feb/17 12:01 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"The APIs in fabric-cop/idp were originally designed in order to share code with fabric and to include a design which could support identity mixer.   Since this is no longer the case, these APIs should be simplified to remove so many levels of abstraction.

In particular, the 3 objects that are needed in lib are Client, Identity, and Cert (which could be used for both an ECert and a TCert).  There is no need for the TemporalSigner, Signer, and Verifier objects and many of the unimplemented methods can be deleted.

More specifically, here is the TODO list:
{code}
a) Delete idp package; all API structs go into api package.
      - api/net.go contains structs defining everything that goes over the network
        between the client and server.
      - api/client.go contains structs defining I/O to the client library objects

b) Simplify object hierarchy in lib to be only Client, Identity, & Cert;
      signer, temporalSigner, and verifier are consumed in Cert.
      Identity object has:
         GetECert() (Cert, error)
         GetTCerts(req *GetTCertBatchRequest) (*GetTCertBatchResponse, error)
{code}",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx7y7:",,,,Unset,,Sprint 7 - Memship Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jan/17 6:41 AM;smithbk;See http://gerrit.hyperledger.org/r/3171;;;",,,,,,,,,,,,,,,,,,,
Provide a reference implementation of an idemix issuer,FABC-528,28323,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,smithbk,smithbk,09/Mar/18 7:41 AM,12/Jun/20 12:31 AM,28/Oct/23 2:21 AM,11/Apr/18 12:42 AM,,,,,,,v1.3.0,,,,,,0,idemix,,,,,"The requirement here is to provide a reference implementation of an idemix issuer. (""idemix"" is short for ""Identity Mixer"").

The purpose of this FAB is to discuss various options so that we can choose the best option going forward.

For background on idemix, see [Idemix Overview|https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0ahUKEwjO68zD0t3ZAhVJYK0KHX7AANoQFggpMAA&url=https%3A%2F%2Fjira.hyperledger.org%2Fsecure%2Fattachment%2F10618%2FIdemix%2520MSP%2520for%2520Hyperledger.doc&usg=AOvVaw2-TxwhzX2jrnT__5BXpB_F]

Options include:
 # Enhance fabric-ca-server to be an idemix issuer
 Advantages:
 ** Provides a single, integrated reference implementation of both ecerts and idemix credentials with only one way of registering users and managing attributes, so there is less for users to learn.
 ** Not much work. I'd estimate 1 month max for code and unit tests.

 * Use the idemix issuer
 I'm not sure how much is open source. The current OSS implementation of Idemix Issuer is in java and uses different cryptographic protocols. However, it can be used as an example of an implementation of the Idemix Issuer

 * Implement a separate issuer based on indy
 The sovrin provisional network is not stable yet. It should transition to a production network in 2019, so this should be considered separately at a later time.",,aambati,ashutosh_kumar,dubovitskaya,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-108,FABC-104,FABC-153,,,,,FABC-448,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-592,,,,,,,,,"1|hzwqfp:w",,,,Unset,,To Do,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,ashutosh_kumar,dubovitskaya,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/18 3:48 AM;aambati;[~smithbk] do we still need this JIRA, can we close it?;;;","11/Apr/18 12:42 AM;dubovitskaya;I think this is covered by FAB-9243 and FAB-9244 and the epic itself, therefore, I am closing it.;;;",,,,,,,,,,,,,,,,,,
Change COP server default listening address to 0.0.0.0 rather than 127.0.0.1,FABC-529,14036,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,12/Jan/17 11:35 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,06/Mar/17 11:53 PM,,,,,,,,,,,,,0,,,,,,The COP server should listen on address 0.0.0.0 by default so clients on other hosts can connect to it.   This should not change any defaults for the cop client.,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx7on:",,,,Unset,,Sprint 10 - Membership Service,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add API to pull the public keys based on enrollid,FABC-530,22836,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,mrshah-ibm,mrshah-ibm,26/Oct/17 12:48 AM,21/Jul/18 4:15 AM,28/Oct/23 2:21 AM,22/May/18 11:22 PM,v1.1.0,,,,,,,,,,,,0,,,,,,fabric-ca server should have an API to pull the admin public keys. This helps to get the admin public keys directly from the fabric-ca server for an organization to bootstrap the peers and the orderer.,,mastersingh24,mrshah-ibm,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-587,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyl13:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,mrshah-ibm,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Nov/17 5:13 AM;mastersingh24;Changed the summary as it should be a more generic function to pull the public key for any given enrollid.

We have the new user API - but be something we add there or we could just an a ""cert"" end point;;;","01/Dec/17 7:02 AM;smithbk;I just added https://jira.hyperledger.org/browse/FAB-7238 today and didn't realize this existed, but yes, we plan on supporting this as part of certificate management;;;",,,,,,,,,,,,,,,,,,
fabric-ca-server needs a stop & status command,FABC-531,17679,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,smithbk,smithbk,09/Jun/17 8:37 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,1,,,,,,"The fabric-ca-server should support a stop command.  Perhaps it should only be invoked locally and not be supported remotely. 
See the ""peer node stop"" command.
See https://gist.github.com/peterhellberg/38117e546c217960747aacf689af3dc2 for graceful shutdown of HTTP endpoint.
And also a fabric-ca-server status command to tell if the server is up or down. ",,denyeart,nyet,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,FABC-493,,,,,FABC-32,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx3qf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,nyet,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;",,,,,,,,,,,,,,,,,,,
Services should support a PID file,FABC-532,19529,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,Asara,Asara,27/Jul/17 11:00 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,1,,,,,,For purposes of management these services should write a PID file.,,Asara,kchristidis,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-32,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6q7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,Asara,kchristidis,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Aug/17 10:39 PM;kchristidis;If nobody is actively working on this, this should be backlogged.

[~ChristopherFerris];;;",,,,,,,,,,,,,,,,,,,
Improve SQL error message for not found,FABC-533,20064,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,smithbk,smithbk,09/Aug/17 10:47 PM,21/Jul/18 4:18 AM,28/Oct/23 2:21 AM,16/Aug/17 10:24 PM,,,,,,,v1.1.0,,,,,,0,Release-planning-1.1,,,,,"To be more user-friendly, every place that we would log an error with the message ""sql: no rows in result set"", we should instead log an error such as ""user not found"", ""certificate not found"", or ""affiliation not found"" depending on which SQL table is being searched.

For example, the error message below should read ""affiliation not found"".

{code}
# fabric-ca-client register --id.name foo --id.type peer --id.affiliation foo
2017/08/09 09:40:00 [INFO] User provided config file: /Users/keith/.fabric-ca-client/fabric-ca-client-config.yaml
2017/08/09 09:40:00 [INFO] Configuration file location: /Users/keith/.fabric-ca-client/fabric-ca-client-config.yaml
Error: Error response from server was: Registration of 'foo' failed in validation: Failed getting affiliation 'foo': sql: no rows in result set
{code}",,skarim,smithbk,weeds,,,,,,,,,,,,,,,,,,,,0,0,,0%,0,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzycgv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,smithbk,weeds,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Aug/17 3:20 AM;weeds;probably a day worth of work;;;","16/Aug/17 10:25 PM;skarim;https://gerrit.hyperledger.org/r/#/c/12365/;;;",,,,,,,,,,,,,,,,,,
Provide gRPC-TLS-BCCSP connection establishment,FABC-534,20982,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,jamesgua,jamesgua,jamesgua,25/Sep/17 11:09 PM,28/Jul/19 12:00 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Using combination of gRPC/TLS/BCCSP to establish TLS connection:

1 move methods currently in fabric-ca/utils:LoadX509KeyPair to fabric/bccsp/signer.go

2 solve cyclic import issue encountered, move methods to fabric/bccsp/util/x509.go

3 update existing gRPC implementation in fabric, using methods mentioned above",,jamesgua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6487,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6xr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,jamesgua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Server unnecessarily creates certain msp subfolders when enabling TLS,FABC-535,27646,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Lowest,,,kchristidis,kchristidis,13/Feb/18 4:32 AM,28/Jul/19 12:00 AM,28/Oct/23 2:21 AM,,v1.1.0-alpha,,,,,,,,,,,,1,,,,,,"Try this: bootstrap the server without TLS. The only folder under ""msp"" is ""keystore"" (and it contains a private key, as expected).

Now try this: bootstrap the server with TLS enabled. ""cacerts"" and ""signcerts"" folders have been generated under ""msp"". There is no need for this; the folders are empty.

This is an unjustified asymmetry between the two modes of operation.

Bootstrapping the server with TLS enabled should not create ""cacerts"" and ""signcerts"" folders under ""msp"".",,denyeart,kchristidis,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyx5j:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,kchristidis,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Feb/18 4:33 AM;kchristidis;(If this is a BCCSP artifact, please re-classify accordingly.);;;","23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;",,,,,,,,,,,,,,,,,,
I need to specify password when register new user via fabric-ca-client cli ,FABC-536,13882,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,genggjh,genggjh,22/Dec/16 10:52 PM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,15/Apr/17 12:58 AM,,,,,,,,,,,,,1,help-wanted,,,,,"I need specify password when register new user via cop client cli, after all the generated password by server in the register response is hard to remember.",,genggjh,mastersingh24,rickr,smithbk,warm3snow,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABG-162,FABJ-83,FABN-79,FABP-17,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxg9r:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,genggjh,mastersingh24,rickr,smithbk,warm3snow,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Dec/16 12:57 AM;mastersingh24;I like having the option for specifying passwords when registering users rather than always auto-generating them.  I think if the request includes a password we use it and if not auto-gen one.

[~keithsmith] [~JonathanLevi] what do you guys think?  not super high priority, but seems like a fairly trival and useful feature;;;","09/Jan/17 8:09 PM;smithbk;Agreed, this is useful and easy to implement;;;","15/Apr/17 1:14 AM;smithbk;This is supported via the ""--id.secret"" option on the fabric-ca-client register command.
The following is in the fabric-ca-client's usage message:
{code}
     --id.secret string             The enrollment secret for the identity being registered
{code}

The REST API supports this via the additional ""Secret"" field in the RegistrationRequest as shown in fabric-ca/api/client.go:
{code}
        // Secret is an optional password.  If not specified,
        // a random secret is generated.  In both cases, the secret
        // is returned in the RegistrationResponse.
        Secret string `json:""secret,omitempty"" help:""The enrollment secret for the identity being registered""`
{code}



;;;",,,,,,,,,,,,,,,,,
Document how to use CA signed certificates for REST and GRPC API ports,FABC-537,12629,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,zmanian,zmanian,09/Sep/16 9:09 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,26/Mar/19 8:41 PM,,,,,,,,,,,,,0,,,,,,"A developer is setting up a Hyperledger Fabric instance for developement, testing, proof of concept.

Document what configuration settings use to deploy SSL on API connections to Client applications.",,ChristopherFerris,feinigetou,mastersingh24,zmanian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxbv3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,feinigetou,mastersingh24,zmanian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 1:31 AM;ChristopherFerris;[~zmanian] can this be closed? Still relevant?;;;","26/Mar/19 8:42 PM;mastersingh24;this has been done for a while;;;",,,,,,,,,,,,,,,,,,
It's not possible to use non-ASCII characters in attrs of certs generated by fabric-ca,FABC-538,30825,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,mplisov,mplisov,01/Jun/18 7:08 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,,v1.1.0,,,,,,,,,,,,0,,,,,,"Im trying to add some non-ascii text data to attributes of certs generated by fabric-ca.

 

It is replaced in resulting certificate with dots.

Ive checked contents of fabric-ca-server sqlite3 database  and data gets there ok without truncation. 

Steps to reproduce:
{code:java}
fabric-ca-client register --id.type user --csr.names C=RU,ST=Moscow,O=ORG --id.name admin2 --id.secret secret2 --id.attrs ""admin=true:ecert,orgID=ORG2:ecert,orgIdentity=12345678:ecert,orgNameRu=Russian Название:ecert""

export FABRIC_CA_CLIENT_HOME=/shared/admin2
fabric-ca-client enroll --url https://admin2:secret2@ca1.ipb.dev:7054
openssl x509 -in /shared/admin2/msp/signcerts/cert.pem -text


{code}
and we get attrs as

 \{""attrs"":\{""admin"":""true"",""hf.Affiliation"":"""",""hf.EnrollmentID"":""admin2"",""hf.Type"":""user"",""orgID"":""ORG2"",""orgIdentity"":""12345678"",""orgNameRu"":""Russian ................""}}

 ","fabric-ca-client:
 Version: 1.1.0
 Go version: go1.9.2
 OS/Arch: linux/amd64

fabric-ca-server:
 Version: 1.1.0
 Go version: go1.9.2
 OS/Arch: linux/amd64

 ",ashutosh_kumar,kchristidis,mplisov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzzdq7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ashutosh_kumar,kchristidis,mplisov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Jun/18 6:13 AM;kchristidis;/cc [~aambati];;;","09/Jun/18 12:08 AM;ashutosh_kumar;Byte array as extension field is allowed.;;;","09/Jun/18 1:06 AM;kchristidis;[~ashutosh_kumar]: Thanks. Seems like something's off though, otherwise these characters should be displayed w/o issues?;;;","09/Jun/18 1:07 AM;kchristidis;I will move this to 1.3 unless you think it's an easy fix that we put in now.;;;","09/Jun/18 2:33 AM;ashutosh_kumar;If you do not encode data before you put in attribute , it is bound to happen. Only way to test it out is to retrieve the attribute and compare to what has been put in input. So , I think , this is more for verification , than fix IMO.;;;","09/Jun/18 4:23 AM;kchristidis;I _think_ I get you. Concretely here: we're looking at a tool like this one to avoid this issue? https://stackoverflow.com/a/28328480/2363529;;;","09/Jun/18 6:26 AM;ashutosh_kumar;I think , the bigger question is , how these attributes are going to be consumed. Until that is determined , we cannot classify this issue as bug.

If the attribute is going to be consumed as ASCII or UTF char , encoding comes into play, But this statement is mute at this point.

 ;;;","09/Jun/18 6:38 AM;kchristidis;Roger, this makes sense.;;;","13/Jun/18 5:57 PM;mplisov;Maybe it is reasonable to make as in openssl, allow to choose by config UTF8 or ASCII attributes handling. We have a large community of users using non-ASCII characters. For example I wanted to put full organisation legal name in Russian to attribute of certificate. ;;;",,,,,,,,,,,
Support Attribute-Based Access Control (ABAC) for enrollment certificates,FABC-539,19305,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,harrisob@us.ibm.com,smithbk,smithbk,18/Jul/17 3:32 AM,21/Jul/18 4:15 AM,28/Oct/23 2:21 AM,18/Oct/17 11:32 PM,,,,,,,v1.1.0-preview,,,,,,5,Release-planning-1.1,sdk,,,,"Some doc links:
fabric: https://github.com/hyperledger/fabric/tree/master/core/chaincode/lib/cid  (note in particular https://github.com/hyperledger/fabric/tree/master/core/chaincode/lib/cid#getting-an-attribute-value)
fabric-ca: http://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#attribute-based-access-control

See See https://docs.google.com/document/d/1GP5tcN0oK9Zewed9h5pLiM2BowWPhtgFUGXEDKjeGGo for more information for earlier design discussions.

----------------------------------------------------------------------------------------------------------------------
The goal of this feature is to support attribute-based access control (ABAC) for both chaincode and fabric.
For fabric, see FAB-3752 for how this feature will be used by MSP to ensure that the caller has admin authority.  For chaincode, the caller's attribute name and value will be accessible in order to make arbitrary authorization decisions based on user-defined attributes.

The fabric-ca-server already allows associating arbitrary user-defined attributes with an identity.   This feature will support adding attributes to an ECert as an x509 extension in the clear or encrypted.  When an attribute is encrypted in an ECert, a decryption key will be returned separately to the client (i.e. not part of the ECert).  It is up to the client to decide how to pass the key to fabric or chaincode.  For example, it may be passed in the transient data field of a transaction so that chaincode has access to it but it is not stored on the ledger.  This should be the default behavior of an SDK.

So when an ECert is generated, the following decisions must be made:
1) Which (if any) attributes should be added to the certificate?
2) For each of these attributes,
    2a) what if the identity does not have the attribute?  Should we error or just skip the attribute?
    2b) if the identity has an attribute, should it be encrypted or appear in the clear?

This behavior will be controlled as follows:

We add the following to an enrollment and reenrollment requests:
{code}
       AttributeRequests []struct{
                Name string,
                Require bool,  // error if the identity doesn't have the attribute
                Encrypt bool,   // encrypt the attribute in the ecert
       }
{code}
If this is specified in the enrollment/reenrollment request, then use it to make attribute decisions.

The ""fabric-ca-client register"" CLI command will be enhanced to support the following:
{code}
# fabric-ca-client register -u ... -id.attrs <attrName>=<attrValue>[:ecert]

If the "":ecert"" suffix is added to an attribute name and value when registered, then by default that
attribute will be added to the ECert when issued.

Examples:

# fabric-ca-client register --id.name user1 --id.secret user1pw --id.type user --id.affiliation org1 -id.attrs attr1=val1:ecert
Registers user1 with an attribute named ""attr1"" and value of ""val1"" and mark it as ""ecert"" so that it is included in
the user's ECert by default.

# FABRIC_CA_CLIENT_HOME=user1 fabric-ca-client enroll -u http://user1:user1pw@localhost:7054
Enroll user1.  You can then print user1/msp/signcerts/cert.pem with openssl and see ""attr1"" with a value of ""val1"" in the certificate.

{code}

The above describes how to generate an ECert with attributes.
The following is the basic API for accessing the attributes in an ECert.

{code}
// Get attributes from a certificate with secretAttrInfo for encrypted attributes which is passed separately.
func GetAttributesFromCert(cert *x509.Certificate, secretAttrInfo string) (*Attributes, error)
// Get a list of attribute names
func (a *Attributes) Names() []string
// Determine if an attribute with a specified name is found
func (a *Attributes) Contains(attrName string) bool
// Get the value of an attribute
func (a *Attributes) Value(attrName string) (string, bool, error)
{code}

See https://docs.google.com/document/d/1GP5tcN0oK9Zewed9h5pLiM2BowWPhtgFUGXEDKjeGGo for more information

",,animeshk,bjwswang,C0rnelius,chenxuan,fredbi,harrisob@us.ibm.com,nfrunza,nitingaur,skarim,smithbk,ssaddem,subbu165,tsrb,wutongtree,,,,,,,,,,,,,,,,,FABC-96,FAB-6089,,,,,,FABC-525,FAB-5825,FAB-6440,FAB-6588,FAB-6753,,,,,,,,,,,,,FAB-6536,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzy8p3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,animeshk,bjwswang,C0rnelius,chenxuan,fredbi,harrisob@us.ibm.com,nfrunza,nitingaur,skarim,smithbk,ssaddem,subbu165,tsrb,wutongtree,,,,,,,,mergify/bp/release-2.2/pr-4374,dev,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Jul/17 5:43 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/11969/
https://gerrit.hyperledger.org/r/#/c/12031/
https://gerrit.hyperledger.org/r/#/c/12337/
https://gerrit.hyperledger.org/r/13623
https://gerrit.hyperledger.org/r/#/c/13265
https://gerrit.hyperledger.org/r/#/c/13213/;;;","26/Sep/17 10:38 PM;Clayton Sims;Keith can we mark this done?   All CRS are merged with the exception of [https://gerrit.hyperledger.org/r/#/c/12519/]  which is abandoned?

 ;;;","26/Sep/17 11:05 PM;smithbk;not yet, the following still need to be merged
https://gerrit.hyperledger.org/r/#/c/13265
https://gerrit.hyperledger.org/r/#/c/13213/
;;;","03/Oct/17 2:32 AM;harrisob@us.ibm.com;NodeSDK work
[https://gerrit.hyperledger.org/r/#/c/13889/]
https://gerrit.hyperledger.org/r/#/c/13371/;;;","22/Nov/17 1:20 AM;skarim;Comments/Discussion from the ABAC Playback:

1. Need a mechanism to get a unique identifier that stays consistent for a given identity.
2. Need to give more thought on how different intermediate CA might come into play when generating a unique identifier.
3. Need to give more thought on how to handle cases where an identity has two valid certificates at the same time.
4. Need to give more thought on if having attributes in a certificate is secure.
5. Discuss will Elli to figure out central location to store the Chaincode library API for ABAC.;;;",,,,,,,,,,,,,,,
Remove -c option from documentation and usage message and add -H option,FABC-540,15413,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,21/Mar/17 6:47 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,17/Sep/17 2:16 AM,v1.0.0,,,,,,v1.1.1,,,,,,0,Release-planning-1.2,serviceability,Serviceability,Usability,,"This JIRA item was originally a bug with a summary of:

     ""fabric-ca-client requires username:password for revoke cmd"".

It turns out that it isn't strictly a bug, but is certainly a usability and serviceability problem that will cause headaches in the future if we don't address it now.   The problem is as follows ...

If a custom configuration file is used to enroll a user, commands executed after this initial enroll require that the name of the configuration file always be specified via command line. Take for example the simple scenario below.

1)
{code:java}
export FABRIC_CA_CLIENT_HOME=/tmp/clienthome 
fabric-ca-client enroll -c /tmp/clienthome/enrolladmin.yaml -u http://admin:adminpw@localhost:7054{code}
2)
{code:java}
fabric-ca-client -d revoke --revoke.name admin{code}
The following error is seen:
{code:java}
2017/05/23 21:34:01 [INFO] User provided config file: /tmp/clienthome/fabric-ca-client-config.yaml
Error: Failed to create default configuration file: No username and password provided as part of URL{code}
This occurs because if no configuration file is provided via the command line flags (-c) it looks to use the default file name (fabric-ca-client-config.yaml) for the client configuration file. However, in this case the enroll command executed in the beginning used a custom file name (enrolladmin.yaml), so the revoke command or any subsequent non enroll command will fail due to lack of existing configuration file.

The is not great from a usability point of view as users will not understand why it is not picking up configuration file that was already created and exists in the client home directory. Users would have to always specify the config file via -c flag for any subsequent command after the enroll, which also is not great from a usability perspective. A static configuration file name should be used but client home directory should be customizable from the command line.

So the proposal is to remove support for the –

    -c configFile

option and replace it with

    -H homeDirectory

option.  We already allow the home directory to be specified via env variables, and that will not change.

 

For history, here is the original description of this JIRA item:

-------------------------------------------------------------------------------

While testing the hf.Revoker attribute, I got an error from the revoke command:
 [FATAL] Failed to create default configuration file: No username and password provided as part of URL
 The same test had not previously required user:pass for revoke

Note that I did pass the '-u' option, but got the same result when I did not:
 root@e8282fda8229:/opt/gopath/src/github.com/hyperledger/fabric-ca# /opt/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca-client -d revoke -u [http://localhost:8888|http://localhost:8888/] --eid admin2
 2017/03/20 21:45:29 [FATAL] Failed to create default configuration file: No username and password provided as part of URL

root@e8282fda8229:/opt/gopath/src/github.com/hyperledger/fabric-ca# /opt/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca-client -d revoke --eid admin2
 2017/03/20 21:45:54 [FATAL] Failed to create default configuration file: No username and password provided as part of URL

The exact sequence of commands were as follows:
 + export CA_CFG_PATH FABRIC_CA_CLIENT_HOME FABRIC_CA_ENROLLMENT_DIR FABRIC_CA_CERT_FILE FABRIC_CA_KEY_FILE
 + CA_CFG_PATH=/tmp/revoke_test
 + FABRIC_CA_ENROLLMENT_DIR=/tmp/revoke_test/admin
 + FABRIC_CA_CERT_FILE='/tmp/revoke_test/admin/msp/signcerts/cert.pem'
 + FABRIC_CA_KEY_FILE='/tmp/revoke_test/admin/msp/keystore/key.pem'
 + /opt/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca-client enroll -u [http://admin:adminpw@localhost:8888|http://admin:adminpw@localhost:8888/] -c /tmp/revoke_test/admin/enroll.yaml --csr.cn admin --tls.certfiles /opt/gopath/src/github.com/hyperledger/fabric-ca/testdata/root.pem --enrollment.hosts admin@fab-client.raleigh.ibm.com,admin.fabric.raleigh.ibm.com,127.0.0.2

+ export CA_CFG_PATH FABRIC_CA_ENROLLMENT_DIR FABRIC_CA_CERT_FILE FABRIC_CA_KEY_FILE
 + CA_CFG_PATH=/tmp/revoke_test
 + FABRIC_CA_ENROLLMENT_DIR=/tmp/revoke_test/admin2
 + FABRIC_CA_CERT_FILE='/tmp/revoke_test/admin2/msp/signcerts/cert.pem'
 + FABRIC_CA_KEY_FILE='/tmp/revoke_test/admin2/msp/keystore/key.pem'
 + /opt/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca-client enroll -u [http://admin2:adminpw2@localhost:8888|http://admin2:adminpw2@localhost:8888/] -c /tmp/revoke_test/admin2/enroll.yaml --csr.cn admin2 --tls.certfiles /opt/gopath/src/github.com/hyperledger/fabric-ca/testdata/root.pem --enrollment.hosts admin2@fab-client.raleigh.ibm.com,admin2.fabric.raleigh.ibm.com,127.0.0.2

+ export CA_CFG_PATH FABRIC_CA_ENROLLMENT_DIR FABRIC_CA_CERT_FILE FABRIC_CA_KEY_FILE
 + CA_CFG_PATH=/tmp/revoke_test
 + FABRIC_CA_ENROLLMENT_DIR=/tmp/revoke_test/notadmin
 + FABRIC_CA_CERT_FILE='/tmp/revoke_test/notadmin/msp/signcerts/cert.pem'
 + FABRIC_CA_KEY_FILE='/tmp/revoke_test/notadmin/msp/keystore/key.pem'
 + /opt/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca-client enroll -u [http://notadmin:pass@localhost:8888|http://notadmin:pass@localhost:8888/] -c /tmp/revoke_test/notadmin/enroll.yaml --csr.cn notadmin --tls.certfiles /opt/gopath/src/github.com/hyperledger/fabric-ca/testdata/root.pem --enrollment.hosts notadmin@fab-client.raleigh.ibm.com,notadmin.fabric.raleigh.ibm.com,127.0.0.2

+ FABRIC_CA_CLIENT_HOME=/tmp/revoke_test/notadmin
 + FABRIC_CA_ENROLLMENT_DIR=/tmp/revoke_test/notadmin
 + FABRIC_CA_CERT_FILE=/tmp/revoke_test/notadmin/msp/signcerts/cert.pem
 + FABRIC_CA_KEY_FILE=/tmp/revoke_test/notadmin/msp/keystore/key.pem
 + /opt/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca-client -d revoke --eid admin2",,aambati,GuillaumeCisco,rennman,skarim,smithbk,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx3nr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,GuillaumeCisco,rennman,skarim,smithbk,weeds,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Apr/17 1:36 PM;aambati;[~rennman]Allen, I think this is an user error. I think you need to specify -config option. I think you will not see this error if you specify -config option.

/opt/gopath/src/github.com/hyperledger/fabric-ca/bin/fabric-ca-client -d revoke -u http://localhost:8888 --eid admin2 -config <config location>;;;","19/Apr/17 1:53 AM;rennman;The command is using the config path,  $CA_CFG_PATH, but looking for the default file name  ""fabric-ca-server-config.yaml"", which is not the config file for this particular server instance.

When Keith, Anil, Saad and I discussed around 04/07/2017 we determined that one potential solution to this problem was to hard-code the config file name, disallowing a user-defined name, but I don't know what the final decision was.;;;","24/Jun/17 1:46 AM;smithbk;Since the ""-c"" option is part of v1, I think the best option is to continue to support it but to remove it from all documentation
and from the usage message (see https://godoc.org/github.com/spf13/pflag#FlagSet.MarkHidden).;;;","12/Aug/17 3:30 AM;weeds;this is about 1 day worth of work.

 ;;;","11/Sep/17 11:16 PM;skarim;https://gerrit.hyperledger.org/r/#/c/12761/;;;","29/May/18 10:42 PM;GuillaumeCisco;I'd love to see the -c option in the documentation as before. I was very surprised and confused it disappeared in the last versions.
The -c option is very helpful for testing and debugging (especially in docker environments), I just have to pass a configuration file and not a directory.
Let's say, I create a directory conf, and I put inside three configuration files for my tests : fabric-ca-client-config-dev.yaml, fabric-ca-client-config-staging.yaml, fabric-ca-client-config-prod.yaml, I can easily test my commands by passing them through the -c option. But with the -H option, I add to create three directories, and call them dev, staging, prod and copy my files inside. It is extremely verbose when mounting volumes in a docker environment for example.

I think it is totally usual that you can define the CFG_PATH globally and override it for every command for testing. The contrary as described in the first post is wrong in my opinion.;;;","20/Jun/18 5:50 AM;skarim;[~GuillaumeCisco] The -c option is still there and can be used as it was used before, it has just been merely hidden. The -H flags was added to increase usability and by not having to require the -c flag on each subsequent command after enroll. But if you wish to use -c flag, you may do so.;;;","20/Jun/18 9:17 PM;GuillaumeCisco;[~skarim] The -c option should be documented so... Why hiding it?
It does look like the -H option has to be used on each subsequent command too. Which is totally normal and expected to me. If you want to set the directory globaly, use a global variable. If I want to override it, I use a cli option. Furthermore in my opinion using a directory instead of a file is not the best solution as I explained it above.;;;",,,,,,,,,,,,
Add a fabric-ca-client init commad,FABC-541,20337,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,23/Aug/17 12:10 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Add a fabric-ca-client init command that will generate the configuration file for the fabric-ca client. 

Note: After this is implemented. The docs script introduced in FAB-4462 can be simplified to use the fabric-ca-client init command rather than have to start server and have client connect to it. ",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6qv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca need more accurate http status codes and error codes,FABC-542,25759,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,15/Dec/17 6:14 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,01/Mar/19 1:03 AM,,,,,,,,,,,,,0,hygiene,,,,,"a. Internal server errors (500) need to be eliminated (as much as possible/reasonable)

b. less information should be returned to client. Messages like:
 Error: Response from server: Error Code: 45 - Failed to verify if user can act on type 'user': : scode: 401, local code: 42, local msg: 'restrictedAdmin' is not a registrar, remote code: 20, remote msg: Authorization failure
 and
 Failed to add identity: Identity 'admin' may not register type 'role1'
 should be changed to 403 (or 404)

c. some of the classifications are just wrong. e.g., in some auth cases we return
 statusCode=400 (400 Bad Request)
 Error: Response from server: Error Code: 50 - 
 when the request is perfectly valid. Bad request implies bad syntax; should be 403/404

d. Some remote error codes are returning a value of '0'.",,DalderupMaurice,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-521,FABC-309,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6sf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,DalderupMaurice,rennman,skarim,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Aug/18 7:57 PM;DalderupMaurice;Hey!
While trying to set up TLS for HLF I got the following error `Identity 'admin' may not register type ""role_x""`. Is there any more clear indication of what this is caused by and/or how to solve this?

This worked perfectly before without TLS;;;","12/Oct/18 4:35 AM;skarim;https://gerrit.hyperledger.org/r/c/26939/;;;",,,,,,,,,,,,,,,,,,
"Inaccurate naming of CA certs when calling ""fabric-ca-client getcacerts""",FABC-543,28510,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Low,,,dsanchezseco,dsanchezseco,14/Mar/18 6:52 PM,27/Jul/19 11:48 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,quality,should,,,,"The command returns the CA and TLS certificates in the db and place them correctly in the MSP subfolders, but the naming is inaccurate as is using the host's url for the naming of the certs instead of the name of the proprietary of the cert.

 

!image-2018-03-14-10-48-16-788.png!

the .pem in cacerts should be named rca instead of ica (and probably the port shouldn't be included as is reffering to the called CA not to the actual CA owner of that cert).

Additionally the certs are being created even if there aren't(empty file)

 *fabric-ca/cmd/fabric-ca-client/getcacert.go ; 91-170*

 
{code:java}
// Store the CAChain in the CACerts folder of MSP (Membership Service Provider)
 // The root cert in the chain goes into MSP 'cacerts' directory.
 // The others (if any) go into the MSP 'intermediatecerts' directory.
 func storeCAChain(config *lib.ClientConfig, si *lib.GetServerInfoResponse) error {
 mspDir := config.MSPDir
 // Get a unique name to use for filenames
 serverURL, err := url.Parse(config.URL)
 if err != nil {
 return err
 }
 fname := serverURL.Host //<- name generation
 if config.CAName != """" {
 fname = fmt.Sprintf(""%s-%s"", fname, config.CAName)
 }
 fname = strings.Replace(fname, "":"", ""-"", -1)
 fname = strings.Replace(fname, ""."", ""-"", -1) + "".pem""
 tlsfname := fmt.Sprintf(""tls-%s"", fname)
[...]
// Store the root certificates in the ""cacerts"" msp folder
 certBytes := bytes.Join(rootBlks, []byte(""""))
 if config.Enrollment.Profile == ""tls"" {
 err := storeCert(""TLS root CA certificate"", tlsRootCACertsDir, tlsfname, certBytes) //<-
 [..]
 } else {
 err = storeCert(""root CA certificate"", rootCACertsDir, fname, certBytes) //<-
 [..]
 }
// Store the intermediate certificates in the ""intermediatecerts"" msp folder
 certBytes = bytes.Join(intBlks, []byte(""""))
 if config.Enrollment.Profile == ""tls"" {
 err = storeCert(""TLS intermediate certificates"", tlsIntCACertsDir, tlsfname, certBytes) //<-
 [..]
 } else {
 err = storeCert(""intermediate CA certificates"", intCACertsDir, fname, certBytes) //<-
 [..]
 }
 return nil
 }
{code}
 ",,,,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Mar/18 6:48 PM;dsanchezseco;image-2018-03-14-10-48-16-788.png;https://jira.hyperledger.org/secure/attachment/14769/image-2018-03-14-10-48-16-788.png",,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6y7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Complete BCCSP integration for of fabric-ca,FABC-544,14613,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,08/Feb/17 6:48 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,28/Apr/17 10:50 PM,,,,,,,,,,,,,0,,,,,,"This is a catch all feature to use BCCSP throughout fabric-ca.
Much work has already been done or is in review, but this covers any remaining.

The areas it must cover are:
1) Auth header (only server side has been done so far)
2) Cert signing ... Vlad has code in review but may need to be reworked to merge
3) TCerts ... in review",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-648,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx4dr:",,,,Unset,,Sprint 11 - Membership Service,Sprint 12 - Membership Service,Sprint 13 - Membership Service,Sprint 14 - Membership Service,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Apr/17 4:08 AM;smithbk;https://gerrit.hyperledger.org/r/#/c/6727/

#3 related to tcerts has been delayed til post v1;;;",,,,,,,,,,,,,,,,,,,
Auto renewal/notification for expiring certificates,FABC-545,27959,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,smithbk,smithbk,24/Feb/18 1:34 AM,21/Aug/19 4:40 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,2,,,,,,"The problem that this feature is meant to solve is to prevent things from stopping to work when certificates expire.  People can easily forget to renew certificates until it is too late and then they are left scrambling to get new certificates, and until this is done, the infrastructure is down.

fabric should support notification (and optionally auto-renewal of certificates).
Currently fabric checks expiration of TLS certs but not ecerts.  In the future, it will check ecert expiration also.  Fabric CA checks certificate expiration already.

fabric CA already supports certificate renewal via the ""fabric-ca-client reenroll"" command.

What is missing is:
1) Something in the peer, orderer, and chaincode which checks for certificate expiration and executes some customizable actions prior to expiration.
2) If using fabric CA or some other CA which supports automatic renewal, automatic renewal should be possible.",,denyeart,kentbull,nyet,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-866,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6wn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,kentbull,nyet,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:08 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;",,,,,,,,,,,,,,,,,,,
Improve fabric-ca fvt runtime performance,FABC-546,19167,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,12/Jul/17 1:43 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,01/Dec/17 2:28 AM,,,,,,,,,,,,,0,,,,,,"Some performance issues surfaced during the course of benchmark testing. The original scripts never accounted for a number of servers greater than 10. In particular, one verification function fails if the number of servers is > 10. In addition there were numerous polling timers which bore optimization. Lastly, some hard-coded sleeps, which were necessary during the nascent development stage are no longer needed. Consequently, the runtime for the fvt tests is reduced by up to 40%",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzy7vr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Support for RSA signatures,FABC-547,20124,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,elli-androulaki,elli-androulaki,11/Aug/17 6:57 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,04/Jul/19 8:32 PM,,,,,,,,,,,,,0,Release-planning-1.2,,,,,"We need to provide support for certificates that include RSA keys. 

 ",,elli-androulaki,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6o7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca should need a way to add new hf.Registrar.(Delagate)Roles,FABC-548,27045,,Story,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,skarim,rennman,rennman,25/Jan/18 3:14 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"An admin is restricted from registering a user with a type not defined in his hf.Registrar.Roles. Due to recent restrictions placed on hf.Registrar.Attributes, we can no longer override this type restriction.

Now that we have a mechanism for dynamically adding/modifying a user, there is no way to update the hf.Registrar.Roles with new types. 

e.g. consider an admin with an initial hf.Registrar.Roles value defined in the server's registry configuration:
hf.Registrar.Roles: ""client,user""

Now consider we want to register (add) a user with type 'peer'. admin can't do this, since 'peer' is not in his list. Furthermore, there is no user (including admin) that can update admin's hf.Registrar.Roles value. Even if we restart the server, modify the yaml file to update the hf.Registrar.Roles paramter, then restart the server, the new configuration is not installed since the server will not re-register an existing user. Creating a new admin ID would do the trick, but seems wasteful.

Allowing a wildcard, '*' for 
hf.Registrar.Roles
hf.Registrar.DelagateRoles
would account for any arbitrary type value potentially needed at some later date.
Perhaps this should be the default for the bootstrap user?
",,ChristopherFerris,denyeart,jyellick,mastersingh24,nyet,rennman,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx02v:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,denyeart,jyellick,mastersingh24,nyet,rennman,skarim,smithbk,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Feb/18 7:23 PM;mastersingh24;So it seems to me without this we would ""break"" how things in v1.0.0 work.
Perhaps we really need to take a step back here in general and take a look at all of these roles and attributes.
It seems to me that we've made things overly (and possibly unnecessarily) complex;;;","05/Feb/18 7:23 PM;mastersingh24;https://gerrit.hyperledger.org/r/17489;;;","09/Feb/18 9:16 PM;smithbk;Gari, looking back, some of it has turned out to be unnecessary for sure.  For example, affiliations were really only needed for tcerts which will not be used.  And types/roles it turns out aren't used in fabric, but instead using OUs.  But we didn't really know that back then.  So given where we are, do you have any ideas about how to simplify and remain compatible?  I can't think of anything.;;;","19/Feb/18 11:58 PM;skarim;[~mastersingh24] Hi Gari, based on Keith's comment above do you have any suggestions for moving forward?;;;","25/Feb/18 2:45 AM;denyeart;[~mastersingh24] [~smithbk] What is the final decision on this for 1.1 / 1.2 ?;;;","26/Feb/18 9:47 PM;ChristopherFerris;This seems more like an improvement than a bug fix per se. Certainly, the discussion suggests that. I suggest we defer post 1.1.;;;","26/Feb/18 10:43 PM;smithbk;Yes, agreed that this can be post 1.1.  I've moved to 1.2.;;;","05/May/18 2:51 AM;jyellick;Still looks like an improvement to me, should we recategorize this and put it on the backlog? Or any attempt to address it in v1.2?;;;","08/May/18 3:16 AM;skarim;I'll mark it as improvement, I already have a CR out. If we can get in 1.2 that would be nice, but if not I am okay with deferring until next release.;;;","06/Mar/19 7:24 AM;nyet;This introduced a bug

[https://gerrit.hyperledger.org/r/#/c/17489/6/lib/dbaccessor.go@656]
{code:java}
""Failed to get users by affiliation and type: Failed to execute query 'SELECT * FROM users WHERE ((affiliation = ?) OR (affiliation LIKE ?))' for affiliation 'n3.acme' and types '*': Not enough args to execute query. Expected 2, got 0."" {code};;;",,,,,,,,,,
Update NEXUS_URL in fabric-ca build,FABC-549,31549,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,03/Jul/18 12:40 AM,19/Jul/18 8:18 AM,28/Oct/23 2:21 AM,03/Jul/18 1:43 AM,,,,,,,v1.2.0,,,,,,0,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzykr3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Baseimage version in fabric-ca release-1.2,FABC-550,31479,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,29/Jun/18 2:28 PM,19/Jul/18 8:18 AM,28/Oct/23 2:21 AM,02/Jul/18 9:34 PM,v1.2.0,,,,,,v1.2.0,,,,,,0,must-fix,,,,,Update Baseimage version to 0.4.10 in fabric-ca release-1.2,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzgnb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Jun/18 5:01 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/23861/;;;",,,,,,,,,,,,,,,,,,,
Add fabric-ca swagger doc to readthedocs,FABC-551,14322,,Task,To Do,FABC,Fabric CA,software,denyeart,,,High,,nickgaski,smithbk,smithbk,25/Jan/17 12:10 AM,19/Jul/18 8:18 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,2,,,,,,"The swagger JSON for the fabric-ca server REST APIs is at http://github.com/hyperledger/fabric-ca/blob/master/swagger/swagger-fabric-ca.json ... or will be when once https://gerrit.hyperledger.org/r/#/c/4705/ is merged.   So you can link the
this URL in readthedocs",,ChristopherFerris,joe-alewine,nyet,rameshthoomu,smithbk,TiantianGao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxiy7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,joe-alewine,nyet,rameshthoomu,smithbk,TiantianGao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Aug/17 2:09 AM;ChristopherFerris;[~rameshthoomu] what we need here is to have the release job for fabric-ca publish the generated swagger html so that it can be linked from the RTD pages.;;;","10/Aug/17 2:50 AM;rameshthoomu;Working on identifying the right tool to covert swagger json to html format.. Once find the right tool, will include these steps in CI to publish on every release.;;;","15/Aug/17 3:25 AM;rameshthoomu;[~nickgaski] let me know once you are done with converting json to html file..;;;","23/Mar/18 7:26 AM;joe-alewine;[~rameshthoomu]

What's the status here?;;;","15/Apr/18 3:18 PM;TiantianGao;Maybe we can use this tool [https://github.com/bootprint/bootprint-openapi] ?;;;",,,,,,,,,,,,,,,
"Create script to pull fabric-ca docker images, binaries from nexus",FABC-552,31203,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,rameshthoomu,rameshthoomu,rameshthoomu,20/Jun/18 1:51 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,12/Nov/18 3:23 PM,v1.2.0,,,,,,,,,,,,0,,,,,,"Create a script to pull stable docker images, binaries from nexus3, re-tag with RELEASE_VERSION and publish tagged images to hyperledger dockerhub account. The script also should pull fabric-ca binaries and should be able to download images, binaries depends on the request.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzfhj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Jun/18 10:28 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/23363/;;;","12/Nov/18 3:23 PM;rameshthoomu;This script in fabric repository satisfies pulling fabric-ca images https://github.com/hyperledger/fabric/blob/release-1.3/scripts/pull_build_artifacts.sh;;;",,,,,,,,,,,,,,,,,,
review docker version pre-requisite,FABC-553,17088,,Task,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,markparz,ChristopherFerris,ChristopherFerris,25/May/17 7:18 AM,19/Jul/18 8:18 AM,28/Oct/23 2:21 AM,14/Sep/17 2:32 AM,v1.0.0-alpha2,,,,,,v1.0.0,,,,,,0,build-system,Documentation,,,,"Docker versioning has recently changed to be date based.

We are recommending Docker 1.12 or higher, and yet that is fairly ancient. Have we actually tested with docker 1.12?

What are we building/testing with? 

Personally I am on:

$ docker version

Client:

 Version:      17.03.1-ce

 API version:  1.27

 Go version:   go1.7.5

 Git commit:   c6d412e

 Built:        Tue Mar 28 00:40:02 2017

 OS/Arch:      darwin/amd64

 

Server:

 Version:      17.03.1-ce

 API version:  1.27 (minimum version 1.12)

 Go version:   go1.7.5

 Git commit:   c6d412e

 Built:        Fri Mar 24 00:00:50 2017

 OS/Arch:      linux/amd64

 Experimental: true",,ChristopherFerris,markparz,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,FAB-5216,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxwuv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,markparz,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jul/17 4:12 AM;markparz;CR https://gerrit.hyperledger.org/r/#/c/11883/;;;",,,,,,,,,,,,,,,,,,,
add target for fabric-ca image in release-1.0 branch,FABC-554,28680,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,20/Mar/18 11:01 PM,15/Jul/19 8:51 PM,28/Oct/23 2:21 AM,21/Mar/18 10:45 PM,,,,,,,Unscheduled,,,,,,0,,,,,,"[build] - add `fabric-ca` make target in fabric-ca makefile. This is useful to just build fabric-ca docker image to use in fabric-sdk-node and fabric-chaincode-node repositories. These repositories are not using other fabric-ca docker images like (tools, orderer, peer and fvt).

though the above images are not required we build fabric-ca images using `make docker` command and this builds all the docker images instead only fabric-ca docker image.

Add a target to build *fabric-ca docker image* in fabric-ca makefile",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzwtdb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Mar/18 11:07 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/19457/;;;",,,,,,,,,,,,,,,,,,,
[Build] - Update fabric-ca master branch with baseimage 0.4.7 (go1.10),FABC-555,29292,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,rameshthoomu,rameshthoomu,10/Apr/18 12:51 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,28/Nov/18 12:16 AM,,,,,,,,,,,,,0,fabric-ca,,,,,Update fabric-ca build image with go 1.10.. Fabric master is already pointed to 0.4.7 baseimage which has go 1.10.,,rameshthoomu,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxokf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,rennman,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Apr/18 4:38 AM;rennman;[Update baseimage|https://gerrit.hyperledger.org/r/#/c/20401/];;;","28/Nov/18 12:16 AM;skarim;https://gerrit.hyperledger.org/r/c/21733/;;;",,,,,,,,,,,,,,,,,,
"Build - Publish fabric-ca-peer, fabric-ca-orderer, fabric-ca-tools images.",FABC-556,31245,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,21/Jun/18 4:42 AM,19/Jul/18 8:18 AM,28/Oct/23 2:21 AM,22/Jun/18 10:19 AM,,,,,,,v1.2.0,,,,,,0,,,,,,"Build - Publish fabric-ca-peer, fabric-ca-orderer, fabric-ca-tools images. These are images are missed in this change set https://gerrit.hyperledger.org/r/#/c/22995/",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzykv3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Jun/18 4:44 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/23411/;;;",,,,,,,,,,,,,,,,,,,
[CI] - Add tox.ini for building docs in CI,FABC-557,28941,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,rameshthoomu,rameshthoomu,28/Mar/18 3:41 AM,19/Jul/18 8:18 AM,28/Oct/23 2:21 AM,15/May/18 10:20 AM,,,,,,,v1.2.0,,,,,,0,,,,,,Add tox.ini for building docs in fabric-ca CI,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx27j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/May/18 10:20 AM;rameshthoomu;patch has been submitted and merged in master branch https://github.com/hyperledger/fabric-ca/commit/2fa21743dc118d81fb0e7c81dad1bb55d95411d8;;;",,,,,,,,,,,,,,,,,,,
unable to install the golint package in fabric-ca s390x build nodes,FABC-558,28501,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,rameshthoomu,rameshthoomu,14/Mar/18 5:55 AM,19/Jul/18 8:18 AM,28/Oct/23 2:21 AM,19/Mar/18 10:52 AM,,,,,,,v1.2.0,,,,,,0,,,,,,"*unable to install the golint package in s390x build nodes. See the below log from one of the jenkins s390x builds*
{code:java}
00:03:09.478 Installing golint ...
00:03:10.058 package golang.org/x/lint: remote origin not found
00:03:10.059 Running lint ...
00:03:10.060 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.061 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.061 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.061 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.062 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.062 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.063 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.064 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.084 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.084 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.085 scripts/check_lint: line 18: /w/workspace/fabric-ca-merge-s390x/gopath/bin/golint: No such file or directory
00:03:10.085 No lint errors were found{code}",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzz173:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Log is muted for all fabric-ca unit-tests,FABC-559,20831,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,lehors,lehors,lehors,15/Sep/17 1:15 AM,19/Jul/18 8:18 AM,28/Oct/23 2:21 AM,07/Oct/17 3:46 PM,,,,,,,v1.1.0,,,,,,0,,,,,,"The benchmark tests need the log muted but the way this is currently done is via TestMain which turns the log off for all the unit-tests because they all are in the same package.

 ",This is independent of the environment.,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzyggf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,lehors,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
occasionally CI fails because of some failure in Cobertura collection of coverage stats.,FABC-560,15744,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Won't Do,rameshthoomu,ChristopherFerris,ChristopherFerris,14/Apr/17 11:27 PM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:39 PM,v1.0.0,,,,,,,,,,,,0,,,,,,"occasionally CI fails because of some failure in Cobertura collection of coverage stats. We need to have any failure of Cobertura be flagged as a warning if the actual tests passed.

13:15:45 Caused by: java.io.IOException: /w/workspace/fabric-verify-x86_64/gopath/src/github.com/hyperledger/fabric/report.xml is not an XML file, please check your report pattern
13:15:45 	at hudson.plugins.cobertura.CoberturaPublisher$ParseReportCallable.invoke(CoberturaPublisher.java:571)
13:15:45 	at hudson.plugins.cobertura.CoberturaPublisher$ParseReportCallable.invoke(CoberturaPublisher.java:536)
13:15:45 	at hudson.FilePath$FileCallableWrapper.call(FilePath.java:2731)
13:15:45 	at hudson.remoting.UserRequest.perform(UserRequest.java:153)
13:15:45 	at hudson.remoting.UserRequest.perform(UserRequest.java:50)
13:15:45 	at hudson.remoting.Request$2.run(Request.java:336)
13:15:45 	at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:68)
13:15:45 	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
13:15:45 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
13:15:45 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
13:15:45 	at java.lang.Thread.run(Thread.java:745)
13:15:45 	at ......remote call to hyp-x86_64-2792(Native Method)
13:15:45 	at hudson.remoting.Channel.attachCallSiteStackTrace(Channel.java:1537)
13:15:45 	at hudson.remoting.UserResponse.retrieve(UserRequest.java:253)
13:15:45 	at hudson.remoting.Channel.call(Channel.java:822)
13:15:45 	at hudson.FilePath.act(FilePath.java:985)
13:15:45 	... 11 more
13:15:45 [Cobertura] No coverage results were found using the pattern '**/report.xml' relative to '/w/workspace/fabric-verify-x86_64'.  Did you enter a pattern relative to the correct directory?  Did you generate the XML report(s) for Cobertura?
13:15:45 [Cobertura] Skipped cobertura reports.
13:15:45 Build step 'Publish Cobertura Coverage Report' changed build result to FAILURE
13:15:45 Finished: FAILURE",,ChristopherFerris,rameshthoomu,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpz3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 11:30 PM;ChristopherFerris;This is pretty important as it frequently occurs, possibly because of network issues, hard to tell (didn't really look hard) but the reality is that the coverage report is not critical.;;;","15/Apr/17 12:56 PM;rameshthoomu;[~ChristopherFerris] Build failures not because of Cobertura Coverate.. Build failures are because of below reasons..

*  Unit-tests
*  linter errors 
*  CI environment issues..

Cobertura is a post build action which look for .xml file generate after successful build. We are seeing above error because unit-tests are failed.. See the output here.. https://jenkins.hyperledger.org/view/fabric/job/fabric-verify-x86_64/9592/console;;;",,,,,,,,,,,,,,,,,,
add missing CCBY license to all .md and .rst files,FABC-561,17384,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,02/Jun/17 7:46 AM,19/Jul/18 8:18 AM,28/Oct/23 2:21 AM,02/Jun/17 11:38 PM,v1.0.0-alpha2,,,,,,v1.0.0-beta,,,,,,0,Quality,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,FAB-4212,FAB-4379,,,,FABN-487,FABJ-165,FAB-4261,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxy8n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Jun/17 7:50 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/10041/;;;",,,,,,,,,,,,,,,,,,,
Unable to build s390x docker-fvt image on s390x/debian:stretch (0.4.10 baseimage),FABC-562,31480,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,rameshthoomu,rameshthoomu,rameshthoomu,29/Jun/18 3:45 PM,19/Jul/18 8:18 AM,28/Oct/23 2:21 AM,02/Jul/18 10:18 PM,v1.2.0,,,,,,v1.2.0,,,,,,0,must-fix,,,,,"Unable to build *s390x docker-fvt* image on *s390x/debian:stretch.* Patch has been submitted to update the baseimage to 0.4.10 but fabric-ca-verify-s390x job is failing as it has a CI step to build docker-fvt. *[https://gerrit.hyperledger.org/r/#/c/23861/*]
{code:java}
00:01:37.482 0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
00:01:37.483 sed: can't read /etc/rsyslog.conf: No such file or directory
00:01:37.484 rm: cannot remove '/etc/rsyslog.d/*haproxy*conf': No such file or directory
00:01:37.485 /etc/hyperledger/fabric-ca/system_update.sh: line 32: /etc/rsyslog.d/haproxy.conf: No such file or directory
00:01:37.485 /etc/hyperledger/fabric-ca/system_update.sh: line 33: /etc/rsyslog.d/postgres.conf: No such file or directory
00:01:37.873 The command '/bin/sh -c $FABRIC_CA_DATA/system_update.sh' returned a non-zero code: 1
00:01:37.875 Makefile:128: recipe for target 'build/image/fabric-ca-fvt/.dummy-s390x-1.2.0-snapshot-8816473' failed
00:01:37.875 make: *** [build/image/fabric-ca-fvt/.dummy-s390x-1.2.0-snapshot-8816473] Error 1{code}
the same build is working as expected on x86_64..

 

Build log https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/3327/consoleFull",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzykrj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jun/18 10:49 PM;rameshthoomu;[~smithbk] [~skarim] Could you please look into this..;;;","30/Jun/18 4:55 AM;rameshthoomu;Seems PostgreSql 9.4 support has been removed from s390x/debian:stretch which is causing docker-fvt image failure.

Chris, suggested to disable fvt tests from s390x builds.. CI configuration has been updated accordingly ...

 ;;;","30/Jun/18 4:58 AM;rameshthoomu;Observed that, Updating PostgreSql version to 9.6 fixed the above issue but we are seeing failures in fvt tests.. I think it's not recommended to update PostgreSql version on 1.2 release..

[https://jenkins.hyperledger.org/sandbox/job/fabric-ca-verify-s390x/1/consoleFull];;;","02/Jul/18 10:18 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/23861/;;;",,,,,,,,,,,,,,,,
Upgrade postgres to 9.6 on s390x builds,FABC-563,31505,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,30/Jun/18 4:07 AM,20/Sep/18 11:12 PM,28/Oct/23 2:21 AM,20/Sep/18 11:12 PM,v1.3.0,,,,,,v1.3.0,,,,,,0,must-fix,,,,,"Upgrade postgres to version 9.6 on s390x builds. Postgres version 9.4 support has been removed from in *s390x/debian:stretch*..

Update PGVER to 9.6 on s390x and keep 9.5 as is on x86_64
{code:java}
ifeq ($(ARCH),s390x)
PGVER=9.4
else
PGVER=9.5
endif{code}",,denyeart,rameshthoomu,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzgqv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,rameshthoomu,skarim,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Jun/18 4:09 AM;rameshthoomu;Patch ([https://gerrit.hyperledger.org/r/#/c/23861/)]  has been submitted to fix FAB-10935 . As per Chris, I have disabled fvt tests from fabric-ca builds, but after the above change is merged, we can re-enable docker-fvt tests on fabric-ca builds. Testing fvt tests on s390x in sandbox jenkins..;;;","03/Jul/18 9:57 PM;rameshthoomu;postgres upgrade has been reverted from this change [https://gerrit.hyperledger.org/r/#/c/23861/] as we observed mysql connection errors
{code:java}
19:12:15 2018/06/29 19:12:15 [INFO] 127.0.0.1:53012 POST /enroll 500 0 ""enroll handler failed to initialize DB: Failed to create user registry for MySQL: Failed to connect to MySQL database: TLS requested but server does not support TLS"" 19:12:15 ****** ERROR ****** Enroll request should have passed {code};;;","11/Sep/18 1:08 PM;denyeart;[~rameshthoomu] Is there an update for this one?;;;","12/Sep/18 12:56 AM;skarim;https://gerrit.hyperledger.org/r/c/26211/;;;",,,,,,,,,,,,,,,,
Unable to build fabric-ca binaries,FABC-564,31205,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,aambati,rameshthoomu,rameshthoomu,20/Jun/18 2:59 PM,19/Jul/18 8:18 AM,28/Oct/23 2:21 AM,21/Jun/18 12:16 PM,v1.2.0,,,,,,v1.2.0,,,,,,0,must-fix,,,,,"Observed below error while building fabric-ca binaries from fabric-ca master branch on commit# *744e032*

Execute *""make release-all""* on the above commit
{code:java}
(hyp) rameshs-mbp:fabric-ca thoomu@us.ibm.com$ make release-all
Building release/linux-amd64/bin/fabric-ca-client for linux-amd64
mkdir -p release/linux-amd64/bin
GOOS=linux GOARCH=amd64 go build -o /Users/thoomu@us.ibm.com/gopath/src/github.com/hyperledger/fabric-ca/release/linux-amd64/bin/fabric-ca-client -tags ""nopkcs11 caclient"" -ldflags ""-X github.com/hyperledger/fabric-ca/lib/metadata.Version=1.2.0-snapshot-747ac0c"" cmd/fabric-ca-client
can't load package: package cmd/fabric-ca-client: cannot find package ""."" in:
    /usr/local/go/src/cmd/fabric-ca-client
make: *** [release/linux-amd64/bin/fabric-ca-client] Error 1{code}",,aambati,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzykvb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,rameshthoomu,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Jun/18 2:59 AM;aambati;https://gerrit.hyperledger.org/r/c/23401/;;;",,,,,,,,,,,,,,,,,,,
[Build] - Update fabric-ca Makefile to build docker images with custom docker repo urls for DOCKER_NS,FABC-565,30707,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,29/May/18 10:53 PM,19/Jul/18 8:18 AM,28/Oct/23 2:21 AM,31/May/18 9:25 AM,,,,,,,v1.2.0,,,,,,0,build-system,,,,,"[Build] - Update Makefile to build images with custom docker repo urls for DOCKER_NS (Docker NameSpace)

Existing Makefile ""sed"" commands are incompatible when passing DOCKER_NS and BASE_DOCKER_NS while building images.

If the DOCKER_NS pass with the repo url's with forward slashes  !https://jira.hyperledger.org/images/icons/emoticons/check.png|width=16,height=16! then it would need a escape character () to build an image.

ex:

DOCKER_NS='nexus3.hyperledger.org:10001\/hyperledger' BASE_DOCKER_NS='nexus3.hyperledger.org:10001\/hyperledger' make docker",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-9641,,,,,,,,,"1|hzykxz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/May/18 2:33 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/22467/;;;",,,,,,,,,,,,,,,,,,,
"update ""make docker-fabric-ca"" in fabric-ca release-1.0 branch",FABC-566,28532,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,15/Mar/18 3:51 AM,15/Jul/19 8:51 PM,28/Oct/23 2:21 AM,28/Mar/18 1:44 AM,,,,,,,Unscheduled,,,,,,0,,,,,,"update ""make docker-fabric-ca"" in fabric-ca release-1.0 branch",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzz1b3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
multiarch.sh needs mode +x,FABC-567,31310,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,23/Jun/18 2:26 AM,19/Jul/18 8:18 AM,28/Oct/23 2:21 AM,03/Jul/18 10:36 PM,v1.2.0,,,,,,v1.2.0,,,,,,0,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzfxj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Jun/18 9:05 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/23783/;;;",,,,,,,,,,,,,,,,,,,
fabric-ca could use caching of unit-tests etc,FABC-568,30366,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,ChristopherFerris,ChristopherFerris,ChristopherFerris,18/May/18 2:40 AM,26/Mar/19 7:40 PM,28/Oct/23 2:21 AM,26/Mar/19 7:40 PM,v1.1.0,,,,,,v1.3.0,,,,,,0,,,,,,adapt the modifications made to fabric for running unit-tests for fabric-ca,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzzb1z:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/May/18 2:42 AM;ChristopherFerris;[https://gerrit.hyperledger.org/r/21919] WIP CR;;;",,,,,,,,,,,,,,,,,,,
[Build] - Update fabric-ca dockerfiles to build on custom DOCKER_NS,FABC-569,30669,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,27/May/18 2:13 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,29/May/18 11:08 PM,,,,,,,v1.2.0,,,,,,0,fabric-ca-build,,,,,"Update fabric-ca Dockerfile.in files to build on custom DOCKER_NS (docker namespace). The current files are hard coded to hyperledger and not leveraging DOCKER_NS or BASE_DOCKER_NS. This will help an user to build images with custom namespace like nexus etc..

*Usage:*

`DOCKER_NS=rameshthoomu BASE_DOCKER_NS=rameshthoomu make docker`

`DOCKER_NS='nexus3.hyperledger.org:10001\/hyperledger' BASE_DOCKER_NS='nexus3.hyperledger.org:10001\/hyperledger' make docker`",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzzcv3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/May/18 12:39 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/22409/;;;",,,,,,,,,,,,,,,,,,,
Persistent data store for baseimages for CI VMs,FABC-570,21790,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,rennman,rennman,12/Oct/17 4:14 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,21/Nov/17 11:05 PM,,,,,,,,,,,,,0,,,,,,"When the CI runs on s390, the fabric baseimage exists:
{code:java}
15:23:10  + docker images
15:23:10  REPOSITORY                     TAG                 IMAGE ID            CREATED             SIZE
15:23:10  hyperledger/fabric-baseimage   s390x-0.4.2         2417523d4322        11 days ago         1.28GB
15:23:10  hyperledger/fabric-baseos      s390x-0.4.2         7bd9a2ad9bd3        11 days ago         191MB
{code}
but on x86, it doesn't
{code:java}
15:25:18  Unable to find image 'hyperledger/fabric-baseimage:x86_64-0.3.1' locally
15:25:19  x86_64-0.3.1: Pulling from hyperledger/fabric-baseimage
{code}
This adds 5 minutes or more to the build time.

I am informed that this is due to the fact that the VMs are destroted after testing.

 

It would be nice if there were a way to mount a volume when the VM lauches. This could hold persistent data, e.g. the local docker image library and obviate the need to download again.",,rameshthoomu,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABB-9,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyj7r:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,rameshthoomu,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Nov/17 4:33 AM;rameshthoomu;This has been fixed [https://gerrit.hyperledger.org/r/#/c/15513/] and updated sandbox. [https://jenkins.hyperledger.org/sandbox/job/fabric-docs-x86_64/4/console]

Will push this to production node soon.;;;","21/Nov/17 11:05 PM;rameshthoomu;This has been pushed on production x86 minions. Below baseimage versions instantiate while x86_64 VM is loading.
{code:java}
00:01:22.984 hyperledger/fabric-baseimage   x86_64-0.4.2        76daf60aeff4        8 weeks ago         1.33GB
00:01:22.984 hyperledger/fabric-baseimage   x86_64-0.3.2        c92d9fdee998        2 months ago        1.26GB
00:01:22.985 hyperledger/fabric-baseimage   x86_64-0.3.1        9f2e9ec7c527        6 months ago        1.27GB{code};;;",,,,,,,,,,,,,,,,,,
Support identity revocation for channel and peer,FABC-571,31450,,Epic,Closed,FABC,Fabric CA,software,denyeart,,,High,Won't Do,,smithbk,smithbk,29/Jun/18 12:49 AM,04/Jul/19 8:26 PM,28/Oct/23 2:21 AM,04/Jul/19 8:26 PM,,,,,,,,,,,,,0,idemix,,,,,"CRL (Certificate Revocation List) is the X509 way of revoking credentials.
 CRI (Credential Revocation Info) is the idemix way of revoking credentials.
 We don't support CRI updates currently, and although CRL updates are supported via a channel config, we need to make it easier and more automated, and we also need to support update of CRL for local MSPs. This epic includes all of the above. The design should not only support automated CRL updates from fabric CA, but also improve the user experience of CRL updates when fabric CA is not being used.

A proposed high-level design is as follows. More detail is needed, but this is the basic thought.

For CRL updates, add support to the peer for a peerUpdateCRL API which is passed a new CRL and updates the local MSP and optionally also updates all channels of which the peer is a member. The peerUpdateCRL can only be invoked by a peer admin. The fabric-ca-server is enhanced to allow configuration of the peer endpoints. When a certificate is revoked, the revocation request supports an option (enabled by default) to call peerUpdateCRL on all of the configured peer endpoints. The option to update all channels is true only on the first peer called. (NOTE: this assumes all peers are members of the same channels. Consider how to handle when this is not the case.)

For CRI updates, similarly add support to the peer for a peerUpdateCRI API. It should operate the same as peerUpdateCRL, except of course that it updates idemix MSPs instead of x509 MSPs.

*Design Doc:* https://docs.google.com/document/d/1_pm-i6WuTMGG59UygSmL0ik1sZKpRaqmIaLmeExmjfc/edit?usp=sharing",,ahmedsajid,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-9,,CRL/CRI channel and peer update,To Do,,,Unset,,,,"1|hzzgjr:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,ahmedsajid,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Jul/19 8:26 PM;mastersingh24;Not going to couple Fabric and Fabric CA.
We need to provide a set of user-linkable Fabric packages such that people can build their own tools for simplified channel mgmt;;;",,,,,,,,,,,,,,,,,,,
Affiliations case sensitive,FABC-572,21764,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,davidkhala,davidkhala,davidkhala,11/Oct/17 11:27 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,,v1.0.1,,,,,,,,,,,,0,,,,,,"No matter how I set in fabric-ca-server-config.yaml, like

{code:xml}
affiliations:
  BU:
  - client
  - user
  - peer
{code}
in the internal sqlite3 db 'fabric-ca-server.db', it convert all characters to lower-case instead of keeping the original case

table 'affiliations'
||name||prekey||
|bu|  |
|bu.client|bu|
|bu.user|bu|
|bu.peer|bu|

",,davidkhala,skarim,tsrb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyj2n:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,davidkhala,skarim,tsrb,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jan/18 10:42 AM;tsrb;Relating to this issue, ""fabric-ca-client register"" command fails when upper case character is used at affiliation section of fabric-ca-server-config.yaml and ""id.affiliation"" parameter of register command.

The reason is as followings.
 * In fabric-ca-server-config.yaml:
   ""key"" characters of YAML's ""key:value"" node are changed to lower case by Viper and stored in DB. (https://github.com/spf13/viper/issues/371)
 * At ""fabric-ca-client register"" command:
   ""id.affiliation"" parameter is case sensitive.

User can define ""key"" value at affiliations section in fabric-ca-server-config.yaml.
So, this issue is occurred (probably) only when upper case character is used in ""id.affiliation"" parameter.

I think it's suitable for this issue that register command changes characters in ""id.affiliation"" parameter to lower case.;;;","18/Jan/18 2:57 PM;davidkhala;[~tsrb]

If this is a required feature, then automatic character case converting should also added to fabric sdks to make alignment, I think.;;;","23/Jan/18 9:36 AM;tsrb;Fabric-CA commands are sent to fabric-ca-server by REST API.
So, ""converting process"" is needed in fabric-ca-server only.
But I don't know ""affiliations is case insensitive"" is correct spec or not.

Does anyone know the spec?;;;","29/Mar/18 5:18 AM;skarim;This limitation has been documented, please see: https://gerrit.hyperledger.org/r/#/c/18437/;;;",,,,,,,,,,,,,,,,
Endpoint constructors should be able to return errors,FABC-573,26141,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,skarim,skarim,19/Dec/17 12:38 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"The endpoint constructors should be able to return errors, this returning of errors will need to be propagated up and the calling functions (registerHandlers) will need to return errors as appropriate. ",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyr5z:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/18 12:03 AM;skarim;Not sure the benefit of doing this, so marking as returned;;;",,,,,,,,,,,,,,,,,,,
Giving null pointer exception while running the Register Command in fabric-ca,FABC-574,14624,,Story,Closed,FABC,Fabric CA,software,denyeart,,,High,Invalid,akarshagrawal792,akarshagrawal792,akarshagrawal792,08/Feb/17 2:03 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"While I try to enroll the user, there is no such problem. But, during register, there is an error of Segmentation Violation.
I had a look into the code and found that some variable had been misplaced in the cli/client/util.go file.

I'm new to JIRA and don't know how to push new changes to the project.
Please help me through it.",,aambati,akarshagrawal792,guhaihua,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxkcn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,akarshagrawal792,guhaihua,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Feb/17 11:18 AM;guhaihua;Contributing to the project:
http://hyperledger-fabric.readthedocs.io/en/latest/CONTRIBUTING/

Hope this may help you.;;;","15/Mar/17 9:39 PM;aambati;[~akarshagrawal792]can you pls provide steps to reproduce this problem?;;;","06/Apr/17 9:49 AM;smithbk;The code has changed since this was opened, since cli/client/util.go no longer exists.
It is possible that the problem has been fixed.
Please try to reproduce and if you are able, provide the steps you took to reproduce the problem.
Thanks
;;;","28/Mar/18 11:39 PM;skarim;Marking as returned, as reporter has an outstanding question to answer;;;",,,,,,,,,,,,,,,,
Query for affiliations and users,FABC-575,22753,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,smithbk,rickr,rickr,24/Oct/17 2:05 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,v1.1.0,,,,,,,,,,,,0,,,,,,FAB-5726 brings about the ability for privileged users to configure the server by adding users and affiliations. There does not seem to be a way (API) for those users to find the current state of what users and affiliations there are.,,denyeart,rickr,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzykkv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,rickr,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:08 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","28/Mar/18 11:53 PM;skarim;[~rickr] There are APIs for both identities and affiliations that will get back the list of users (based on certain authorizations) and affiliations.;;;",,,,,,,,,,,,,,,,,,
fabric-ca-server: PANIC - version not set,FABC-576,30574,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,SashaPESIC,SashaPESIC,24/May/18 6:47 PM,08/Sep/18 4:22 AM,28/Oct/23 2:21 AM,08/Sep/18 4:22 AM,v1.1.0,,,,,,,,,,,,1,,,,,,"The bug seems to be connected do the newest version of fabric-ca. I have built, from scratch, the fabric and fabric-baseimage without any problems. However the fabric-ca build process seem to have some issues.

I confirm this to be a problem on two architectures: X86_64 and ARMV7L (RPI 3). I absolutely have to build from scratch since i need the project running on a RPI3.

Steps to recreate:
 # git clone [https://github.com/hyperledger/fabric-ca]
 # cd to fabric-ca folder
 # make docker
 # cd to fabric-ca/build/docker/bin
 # run: ./fabric-ca-server init -b admin:adminpw

Trully, in the config file the version attribute is not set. Removing the version attribute does not solve the problem. I attached he config file that is created with init. 

The problem does not exist in fabric-ca version 1.0.6. So, if the fabric-ca version is downgraded, the fabric-ca-server component has no issues and is running without problems. 

The output of the command in 5. is:

2018/05/24 11:43:27 [INFO] Created default configuration file at /xxxx/hyperledger/fabric-ca/build/docker/bin/fabric-ca-server-config.yaml
panic: Version is not set for fabric-ca library

goroutine 1 [running]:(
github.com/hyperledger/fabric-ca/lib/metadata.GetVersion(0xc420342c60, 0x120)
    /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/metadata/version.go:58 +0x60
github.com/hyperledger/fabric-ca/lib.(*Server).init(0xc420342c60, 0xc4201c5300, 0x14b4e60, 0xc420179c10)
    /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/server.go:98 +0x26
github.com/hyperledger/fabric-ca/lib.(*Server).Init(0xc420342c60, 0xc420342c00, 0xc420179c68, 0xb48717)
    /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/server.go:88 +0x38
main.(*ServerCmd).init.func2(0xc4201d0240, 0xc4201ac600, 0x0, 0x2, 0x0, 0x0)
    /opt/gopath/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-server/servercmd.go:102 +0xf5
github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra.(*Command).execute(0xc4201d0240, 0xc4201ac460, 0x2, 0x2, 0xc4201d0240, 0xc4201ac460)
    /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra/command.go:643 +0x3db
github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0xc4201d0000, 0xd9e800, 0xf29c00, 0xc420179ef8)
    /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra/command.go:734 +0x2d4
github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra.(*Command).Execute(0xc4201d0000, 0xc4201ce000, 0xc4201aa050)
    /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra/command.go:692 +0x2b
main.(*ServerCmd).Execute(0xc4201aa050, 0x4, 0xc4201a2101)
    /opt/gopath/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-server/servercmd.go:69 +0x2f
main.RunMain(0xc42001e0c0, 0x4, 0x4, 0xc420179f78, 0xc42008e058)
    /opt/gopath/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-server/main.go:45 +0xb2
main.main()
    /opt/gopath/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-server/main.go:27 +0x45

 

 ",,aambati,mastersingh24,SashaPESIC,skarim,vramaiitkgp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/May/18 6:47 PM;SashaPESIC;fabric-ca-server-config.yaml;https://jira.hyperledger.org/secure/attachment/15011/fabric-ca-server-config.yaml",,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzc2f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,mastersingh24,SashaPESIC,skarim,vramaiitkgp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/May/18 10:03 PM;kchristidis;/cc [~aambati] Thoughts? Can you reproduce locally? (For the x86_64 case.);;;","25/May/18 11:45 AM;aambati;[~SashaPESIC]the binary that is created in the fabric-ca/build/docker/bin is the binary for the operating system of the docker image. So, do you get the same error if you do this:

docker run -it hyperledger/fabric-ca bash
cd /usr/local/bin
./fabric-ca-server init -b admin:admin

I tried the following on my mac , i could not reproduce:
cd /tmp
export GOPATH=/tmp/fabric
mkdir -p /tmp/fabric/src/github.com/hyperledger
cd /tmp/fabric/src/github.com/hyperledger
git clone https://github.com/hyperledger/fabric-ca
cd to fabric-ca folder
make docker
docker run -it hyperledger/fabric-ca bash
cd /usr/local/bin
./fabric-ca-server init -b admin:admin

if you want run fabric-ca-server on your machine, just do the following:
git clone https://github.com/hyperledger/fabric-ca
cd to fabric-ca folder
make fabric-ca-server
bin/fabric-ca-server init -b admin:admin;;;","25/May/18 4:45 PM;SashaPESIC;Hello [~aambati]],

When i follow these steps: 
docker run -it hyperledger/fabric-ca bash
cd /usr/local/bin
./fabric-ca-server init -b admin:admin

The same things happens. 

However, when using the script (curl -sSL https://goo.gl/6wtTN5 | bash -s 1.1.0) do pull the images, everything works fine. So it must be something with the build process/files that needs updating. And the config file i mentioned above has the version attribute set to 1.1.0, instead of being blank when building.
;;;","25/May/18 5:10 PM;mastersingh24;[~SashaPESIC] - which version of Go are you using?  With Fabric v1.1, we used Go 1.9.  With the current master we use Go 1.10.

I fixed a bug in master ( [https://gerrit.hyperledger.org/r/#/c/21733/4/Makefile@68] ) to make sure that the metadata (version) is properly set when building with Go 1.10;;;","25/May/18 5:13 PM;SashaPESIC;I use go version go1.10 linux/amd64. And I use baseimage 0.4.9 - can that cause the issue? 
;;;","26/May/18 10:58 AM;aambati;[~SashaPESIC]Gari's change set changed the base image to 0.4.8. Can you pls try with that version.;;;","29/May/18 5:15 PM;SashaPESIC;[~aambati], [~mastersingh24] - I am trying it with 0.4.8 as i write and will keep you updated. 
Also, which ubuntu baseimage do you use to build it all? Do you use the armhf-ubuntu from the Makefile?;;;","31/May/18 2:38 AM;SashaPESIC;Building with 0.4.8 did not work, i am still getting the same error. ;;;","01/Jun/18 12:28 AM;aambati;[~SashaPESIC]can you pls provide exact steps to reproduce this problem? If you follow the steps I outlined in https://jira.hyperledger.org/browse/FAB-10354?focusedCommentId=45109&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-45109, are you able to reproduce the problem?;;;","11/Jun/18 7:21 PM;SashaPESIC;Hello [~aambati], there are no special steps, i simply run make docker in the fabric-ca folder once pulled from git. The issues still persists, i did not solve it. 
;;;","13/Jun/18 1:56 PM;aambati;[~SashaPESIC]1.1 CA code works with Go 1.9. Please try with Go 1.9.x;;;","13/Jun/18 5:10 PM;SashaPESIC;Hello [~aambati],
The only thing that has worked so far was building (make docker) the 1.1 CA with the 0.4.6 baseimage. In that case, there is no Panic about the version. ;;;","14/Jun/18 4:25 AM;aambati;in 1.1 Makefile, base image version is set to 0.4.6, so that is the supported version.;;;","01/Aug/18 8:00 PM;vramaiitkgp;The value of `Version` in `lib/metadata/version.go` is set by default to `1.2.0` in the `release-1.2` branch (https://github.com/hyperledger/fabric-ca/blob/release-1.2/lib/metadata/version.go#L32), whereas no default is set in the `release-1.1` version of the file (https://github.com/hyperledger/fabric-ca/blob/release-1.1/lib/metadata/version.go#L42). I observed this error with the latter, and was able to get past it by setting `var Version = ""1.1.0""` and rebuilding the docker images.;;;","08/Sep/18 2:04 AM;skarim;[~SashaPESIC] Is it possible for you to move to v1.2? I believe the error should be resolved there;;;","08/Sep/18 2:06 AM;SashaPESIC;[~skarim] Yes, I did that, it seems fixed. ;;;","08/Sep/18 4:22 AM;skarim;This is fixed in the latest versions of Fabric CA;;;",,,
fabric-ca as docker image:FABRIC_CA_SERVER_CSR_CN not working,FABC-577,30326,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,aambati,davidkhala,davidkhala,17/May/18 10:43 AM,17/Sep/18 11:06 PM,28/Oct/23 2:21 AM,17/Sep/18 11:05 PM,v1.1.0,,,,,,,,,,,,0,,,,,,"docker container command:

``fabric-ca-server start -d -b Admin:adminpw``

docker environment :
""Env"": [
                ""GODEBUG=netdns=go"",
                ""FABRIC_CA_SERVER_CSR_CN=ca.ASTRI.Delphi.com"",
                ""PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"",
                ""FABRIC_CA_HOME=/etc/hyperledger/fabric-ca-server""
            ],
docker logs (bootstrap section)
```
2018/05/17 01:35:32 [INFO] Created default configuration file at /etc/hyperledger/fabric-ca-server/fabric-ca-server-config.yaml
2018/05/17 01:35:32 [INFO] Starting server in home directory: /etc/hyperledger/fabric-ca-server
2018/05/17 01:35:32 [INFO] Server Version: 1.1.0
2018/05/17 01:35:32 [INFO] Server Levels: &{Identity:1 Affiliation:1 Certificate:1}
2018/05/17 01:35:32 [DEBUG] Making server filenames absolute
2018/05/17 01:35:32 [DEBUG] Initializing default CA in directory /etc/hyperledger/fabric-ca-server
2018/05/17 01:35:32 [DEBUG] Init CA with home /etc/hyperledger/fabric-ca-server and config {Version:1.1.0 Cfg:{Identities:{AllowRemove:false} Affiliations:{AllowRemove:false}} CA:{Name: Keyfile: Certfile:ca-cert.pem Chainfile:ca-chain.pem} Signing:0xc420322750 CSR:{CN:ca.ASTRI.Delphi.com Names:[{C:US ST:North Carolina L: O:Hyperledger OU:Fabric SerialNumber:}] Hosts:[3a9ae93e96f7 localhost] KeyRequest:<nil> CA:0xc4202f3e20 SerialNumber:} Registry:{MaxEnrollments:-1 Identities:[{ Name:**** Pass:**** Type:client Affiliation: MaxEnrollments:0 Attrs:map[hf.Registrar.Attributes:* hf.AffiliationMgr:1 hf.Registrar.Roles:peer,orderer,client,user hf.Registrar.DelegateRoles:peer,orderer,client,user hf.Revoker:1 hf.IntermediateCA:1 hf.GenCRL:1]  }]} Affiliations:map[org2:[department1] org1:[department1 department2]] LDAP:{ Enabled:false URL:ldap://****:****@<host>:<port>/<base> UserFilter:(uid=%s) GroupFilter:(memberUid=%s) Attribute:{[uid member] [{ }] map[groups:[{ }]]} TLS:{false [] { }}  } DB:{ Type:sqlite3 Datasource:fabric-ca-server.db TLS:{false [] { }}  } CSP:0xc4202f5260 Client:<nil> Intermediate:{ParentServer:{ URL: CAName:  } TLS:{Enabled:false CertFiles:[] Client:{KeyFile: CertFile:}} Enrollment:{ Name: Secret:**** Profile: Label: CSR:<nil> CAName: AttrReqs:[]  }} CRL:{Expiry:24h0m0s}}
2018/05/17 01:35:32 [DEBUG] CA Home Directory: /etc/hyperledger/fabric-ca-server
2018/05/17 01:35:32 [DEBUG] Checking configuration file version '1.1.0' against server version: '1.1.0'
2018/05/17 01:35:32 [DEBUG] Initializing BCCSP: &{ProviderName:SW SwOpts:0xc4202f52c0 PluginOpts:<nil> Pkcs11Opts:<nil>}
2018/05/17 01:35:32 [DEBUG] Initializing BCCSP with software options &{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:0xc420315a50 DummyKeystore:<nil>}
2018/05/17 01:35:32 [DEBUG] Initialize key material
2018/05/17 01:35:32 [DEBUG] Making CA filenames absolute
2018/05/17 01:35:32 [INFO] The CA key and certificate files already exist
2018/05/17 01:35:32 [INFO] Key file location: /etc/hyperledger/fabric-ca-server/ca-key.pem
2018/05/17 01:35:32 [INFO] Certificate file location: /etc/hyperledger/fabric-ca-server/ca-cert.pem
2018/05/17 01:35:32 [DEBUG] Validating the CA certificate and key
2018/05/17 01:35:32 [DEBUG] Check CA certificate for valid dates
2018/05/17 01:35:32 [DEBUG] Check CA certificate for valid usages
2018/05/17 01:35:32 [DEBUG] Check CA certificate for valid IsCA value
2018/05/17 01:35:32 [DEBUG] Check that key type is supported
2018/05/17 01:35:32 [DEBUG] Check that key size is of appropriate length
2018/05/17 01:35:32 [DEBUG] Check that public key and private key match
2018/05/17 01:35:32 [DEBUG] Validation of CA certificate and key successful
2018/05/17 01:35:32 [DEBUG] Loading CN from existing enrollment information
2018/05/17 01:35:32 [DEBUG] Initializing DB
2018/05/17 01:35:32 [DEBUG] Initializing 'sqlite3' database at '/etc/hyperledger/fabric-ca-server/fabric-ca-server.db'
2018/05/17 01:35:32 [DEBUG] Using sqlite database, connect to database in home (/etc/hyperledger/fabric-ca-server/fabric-ca-server.db) directory
2018/05/17 01:35:32 [DEBUG] Creating SQLite database (/etc/hyperledger/fabric-ca-server/fabric-ca-server.db) if it does not exist...
2018/05/17 01:35:32 [DEBUG] Creating users table if it does not exist
2018/05/17 01:35:32 [DEBUG] Creating affiliations table if it does not exist
2018/05/17 01:35:32 [DEBUG] Creating certificates table if it does not exist
2018/05/17 01:35:32 [DEBUG] Creating properties table if it does not exist
2018/05/17 01:35:32 [DEBUG] Successfully opened sqlite3 DB
2018/05/17 01:35:32 [DEBUG] Checking database schema...
2018/05/17 01:35:32 [DEBUG] Update SQLite schema, if using outdated schema
2018/05/17 01:35:32 [DEBUG] Upgrade identities table
2018/05/17 01:35:32 [DEBUG] Creating users table if it does not exist
2018/05/17 01:35:33 [DEBUG] Upgrade affiliation table
2018/05/17 01:35:33 [DEBUG] Creating affiliations table if it does not exist
2018/05/17 01:35:33 [DEBUG] Upgrade certificates table
2018/05/17 01:35:33 [DEBUG] Creating certificates table if it does not exist
2018/05/17 01:35:33 [DEBUG] Initializing identity registry
2018/05/17 01:35:33 [DEBUG] Initialized DB identity registry
2018/05/17 01:35:33 [DEBUG] DB: Get properties [identity.level affiliation.level certificate.level]
2018/05/17 01:35:33 [DEBUG] Checking database levels 'map[affiliation.level:0 certificate.level:0 identity.level:0]' against server levels '&{Identity:1 Affiliation:1 Certificate:1}'
2018/05/17 01:35:33 [DEBUG] Loading identity table
2018/05/17 01:35:33 [DEBUG] Loading identity 'Admin'
2018/05/17 01:35:33 [DEBUG] DB: Getting identity Admin
2018/05/17 01:35:33 [DEBUG] Max enrollment value verification - User specified max enrollment: 0, CA max enrollment: -1
2018/05/17 01:35:33 [DEBUG] DB: Add identity Admin
2018/05/17 01:35:34 [DEBUG] Successfully added identity Admin to the database
2018/05/17 01:35:34 [DEBUG] Registered identity: { Name:**** Pass:**** Type:client Affiliation: MaxEnrollments:-1 Attrs:map[hf.AffiliationMgr:1 hf.Registrar.Roles:peer,orderer,client,user hf.Registrar.DelegateRoles:peer,orderer,client,user hf.Revoker:1 hf.IntermediateCA:1 hf.GenCRL:1 hf.Registrar.Attributes:*]  }
2018/05/17 01:35:34 [DEBUG] Successfully loaded identity table
2018/05/17 01:35:34 [DEBUG] Loading affiliations table
2018/05/17 01:35:34 [DEBUG] DB: Add affiliation org1
2018/05/17 01:35:34 [DEBUG] Affiliation 'org1' added
2018/05/17 01:35:34 [DEBUG] DB: Add affiliation org1.department1
2018/05/17 01:35:34 [DEBUG] Affiliation 'org1.department1' added
2018/05/17 01:35:34 [DEBUG] DB: Add affiliation org1.department2
2018/05/17 01:35:34 [DEBUG] Affiliation 'org1.department2' added
2018/05/17 01:35:34 [DEBUG] DB: Add affiliation org2
2018/05/17 01:35:34 [DEBUG] Affiliation 'org2' added
2018/05/17 01:35:34 [DEBUG] DB: Add affiliation org2.department1
2018/05/17 01:35:35 [DEBUG] Affiliation 'org2.department1' added
2018/05/17 01:35:35 [DEBUG] Successfully loaded affiliations table
2018/05/17 01:35:35 [DEBUG] Checking and performing migration, if needed
2018/05/17 01:35:35 [DEBUG] Updating database level to &{Identity:1 Affiliation:1 Certificate:1}
2018/05/17 01:35:35 [INFO] Initialized sqlite3 database at /etc/hyperledger/fabric-ca-server/fabric-ca-server.db
2018/05/17 01:35:35 [DEBUG] Initializing enrollment signer
2018/05/17 01:35:35 [DEBUG] No key found in BCCSP keystore, attempting fallback
2018/05/17 01:35:35 [DEBUG] validating configuration
2018/05/17 01:35:35 [DEBUG] validate local profile
2018/05/17 01:35:35 [DEBUG] profile is valid
2018/05/17 01:35:35 [DEBUG] validate local profile
2018/05/17 01:35:35 [DEBUG] profile is valid
2018/05/17 01:35:35 [DEBUG] validate local profile
2018/05/17 01:35:35 [DEBUG] profile is valid
2018/05/17 01:35:35 [DEBUG] CA initialization successful
2018/05/17 01:35:35 [INFO] Home directory for default CA: /etc/hyperledger/fabric-ca-server
2018/05/17 01:35:35 [DEBUG] 1 CA instance(s) running on server
2018/05/17 01:35:35 [INFO] Listening on http://0.0.0.0:7054
```

docker logs (the next enroll request section)
```
2018/05/17 01:35:40 [DEBUG] Received request for /api/v1/enroll
2018/05/17 01:35:40 [DEBUG] ca.Config: &{Version:1.1.0 Cfg:{Identities:{AllowRemove:false} Affiliations:{AllowRemove:false}} CA:{Name: Keyfile:/etc/hyperledger/fabric-ca-server/ca-key.pem Certfile:/etc/hyperledger/fabric-ca-server/ca-cert.pem Chainfile:/etc/hyperledger/fabric-ca-server/ca-chain.pem} Signing:0xc420322750 CSR:{CN:example.com Names:[{C:US ST:North Carolina L: O:Hyperledger OU:Fabric SerialNumber:}] Hosts:[3a9ae93e96f7 localhost] KeyRequest:<nil> CA:0xc4202f3e20 SerialNumber:} Registry:{MaxEnrollments:-1 Identities:[{ Name:**** Pass:**** Type:client Affiliation: MaxEnrollments:0 Attrs:map[hf.Revoker:1 hf.IntermediateCA:1 hf.GenCRL:1 hf.Registrar.Attributes:* hf.AffiliationMgr:1 hf.Registrar.Roles:peer,orderer,client,user hf.Registrar.DelegateRoles:peer,orderer,client,user]  }]} Affiliations:map[org1:[department1 department2] org2:[department1]] LDAP:{ Enabled:false URL:ldap://****:****@<host>:<port>/<base> UserFilter:(uid=%s) GroupFilter:(memberUid=%s) Attribute:{[uid member] [{ }] map[groups:[{ }]]} TLS:{false [] { }}  } DB:{ Type:sqlite3 Datasource:/etc/hyperledger/fabric-ca-server/fabric-ca-server.db TLS:{false [] { }}  } CSP:0xc4202f5260 Client:<nil> Intermediate:{ParentServer:{ URL: CAName:  } TLS:{Enabled:false CertFiles:[] Client:{KeyFile: CertFile:}} Enrollment:{ Name: Secret:**** Profile: Label: CSR:<nil> CAName: AttrReqs:[]  }} CRL:{Expiry:24h0m0s}}
2018/05/17 01:35:40 [DEBUG] DB: Getting identity Admin
2018/05/17 01:35:40 [DEBUG] DB: Login user Admin with max enrollments of -1 and state of 0
2018/05/17 01:35:41 [DEBUG] DB: identity Admin successfully logged in
2018/05/17 01:35:41 [DEBUG] Processing sign request: id=Admin, CommonName=Admin, Subject=<nil>
2018/05/17 01:35:41 [DEBUG] Request is not for a CA signing certificate
2018/05/17 01:35:41 [DEBUG] Checking CSR fields to make sure that they do not exceed maximum character limits
2018/05/17 01:35:41 [DEBUG] DB: Getting identity Admin
2018/05/17 01:35:41 [DEBUG] Finished processing sign request
2018/05/17 01:35:41 [DEBUG] DB: Getting identity Admin
2018/05/17 01:35:41 [INFO] signed certificate with serial number 185835457939206331652819697991237202606727113262
2018/05/17 01:35:41 [DEBUG] DB: Insert Certificate
2018/05/17 01:35:41 [DEBUG] Saved serial number as hex 208d266f799b373d68951d185eaf55296a802a2e
2018/05/17 01:35:41 [DEBUG] saved certificate with serial number 185835457939206331652819697991237202606727113262
2018/05/17 01:35:41 [DEBUG] Successfully incremented state for identity Admin to 1
```


 ",,aambati,davidkhala,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzauf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,davidkhala,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/May/18 12:08 AM;kchristidis;[~aambati]: Thoughts on this? Is this an actual issue, and do you have the cycles to do it for 1.2?;;;","18/May/18 9:47 AM;aambati;[~davidkhala]when i tried this outside docker , it took the environment variable value. I tried with 1.1 and 1.2 code, it worked in both cases. Can you share the docker file?;;;","25/May/18 1:31 AM;davidkhala;[~aambati] actually I have not build docker image by myself， I just use 1.1 image from docker hub so no docker file.;;;","26/May/18 11:01 AM;aambati;[~davidkhala]Can you please provide steps to reproduce this problem? Thank you.;;;","08/Sep/18 2:06 AM;skarim;[~davidkhala] Can you provide the exact reproduction steps?;;;","17/Sep/18 11:06 PM;skarim;Marking as closed for now, will reopen if reproductions steps are provided.;;;",,,,,,,,,,,,,,
Cleanup and refactor fabric-cop code,FABC-578,13960,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,,mastersingh24,mastersingh24,09/Jan/17 12:21 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,06/Apr/17 10:40 AM,,,,,,,v1.0.0,,,,,,0,,,,,,"# Over time, things have changes and there are interfaces, types and functions which are no longer used
# Reexamine the current package structure as well
# Should consider building separate server and client CLIs",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxgmv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"remove unused interfaces, type and functions",FABC-579,13961,13960,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,mastersingh24,mastersingh24,mastersingh24,09/Jan/17 12:24 AM,19/Jul/18 8:46 PM,28/Oct/23 2:21 AM,06/Feb/17 5:50 AM,,,,,,,v1.0.0,,,,,,0,,,,,,"# api package has a number of things which are never used
# extraneous code to handle import cycles can now be removed in several areas
# extraneous JSON functions in the crypto package",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxgn3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Feb/17 5:51 AM;mastersingh24;this was handled elsewhere so marking as done;;;",,,,,,,,,,,,,,,,,,,
As a user I want to be able to get a list of certificates,FABC-580,28995,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,30/Mar/18 12:22 AM,21/Jul/18 4:15 AM,28/Oct/23 2:21 AM,23/May/18 6:49 AM,,,,,,,v1.2.0,,,,,,0,,,,,,"As a user I want to be able to get a list of certificates

Design: https://docs.google.com/document/d/1WqT1BfZ2YdrDnqHe52UA9Z9SIp4I2mIbL2W5MY92A2I/edit#heading=h.5rg5nj7141zz",,ChristopherFerris,JonathanLevi,skarim,,,,,,,,,,,,,,,,,,,,576000,576000,,0%,576000,576000,,,,,,,,,,,,,,,,,,,,,,FABC-587,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-587,,,,,,,,,"1|hzx01r:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,JonathanLevi,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/18 5:25 AM;skarim;https://gerrit.hyperledger.org/r/#/c/18951/
https://gerrit.hyperledger.org/r/#/c/18953/
https://gerrit.hyperledger.org/r/#/c/20077/
https://gerrit.hyperledger.org/r/#/c/20455/;;;","09/May/18 9:55 PM;ChristopherFerris;What a confused mess. We need to be a LOT more careful in how we use JIRA, here. One JIRA per CR please. Do not use the epic JIRA tag on CRs. It is impossible to tell the progress on this epic.;;;","09/May/18 9:57 PM;ChristopherFerris;I THINK that only [https://gerrit.hyperledger.org/r/c/20455/] needs to be merged, but it has parents that have not been merged and is not clearly related. [~levitate] can you please help untangle?;;;","09/May/18 9:58 PM;JonathanLevi;On it.;;;",,,,,,,,,,,,,,,,
Add flag to store certificate on file system,FABC-581,30178,28995,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,skarim,skarim,15/May/18 3:26 AM,06/Sep/18 3:08 AM,28/Oct/23 2:21 AM,06/Sep/18 3:08 AM,,,,,,,,,,,,,0,,,,,,"A new flag ""--store"" to be added to the ""fabric-ca-certificate list"" command that will store the certificate to location specified by this flag.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzza2n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/May/18 3:39 AM;skarim;https://gerrit.hyperledger.org/r/c/21771/;;;",,,,,,,,,,,,,,,,,,,
As a user I want ability to get Fabric CA's CRI,FABC-582,30167,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,14/May/18 10:55 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,25/May/18 10:10 PM,,,,,,,v1.3.0,,,,,,0,,,,,,"As a user, I want the ability to get latest Idemix credential revocation information (CRIO) of a CA. I should be able to use an OAuth token based on either my x509 certificate or Idemix credential to authenticate to the CA.",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-592,,,,,,,,,"1|hzza1b:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Define API for getting CRI,FABC-583,30241,30167,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,16/May/18 11:18 AM,19/Jul/18 8:51 PM,28/Oct/23 2:21 AM,19/May/18 4:06 AM,,,,,,,v1.2.0,,,,,,0,,,,,,"Define API in the swagger document , request/response structures and update user document",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzafb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/May/18 11:28 AM;aambati;https://gerrit.hyperledger.org/r/c/21727/;;;",,,,,,,,,,,,,,,,,,,
Server changes for getting Idemix CRI,FABC-584,30242,30167,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,16/May/18 11:19 AM,19/Jul/18 8:51 PM,28/Oct/23 2:21 AM,19/May/18 4:06 AM,,,,,,,v1.3.0,,,,,,0,,,,,,Add the new route to the server for getting Idemix CRI and handler for processing the getCRI request.,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzafj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/May/18 11:29 AM;aambati;https://gerrit.hyperledger.org/r/c/21845/;;;",,,,,,,,,,,,,,,,,,,
Client changes for getting CRI,FABC-585,30243,30167,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,16/May/18 11:22 AM,19/Jul/18 8:51 PM,28/Oct/23 2:21 AM,22/May/18 6:19 AM,,,,,,,v1.3.0,,,,,,0,,,,,,"Change client for getting CRI. Currently, client can create a token using user's X509 enrollment certificate. Change the client to create an authorization token using user's Idemix credential.",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzafr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/May/18 11:30 AM;aambati;https://gerrit.hyperledger.org/r/c/21847/;;;",,,,,,,,,,,,,,,,,,,
Verify token based on idemix credential,FABC-586,30244,30167,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,aambati,aambati,aambati,16/May/18 11:23 AM,19/Jul/18 8:51 PM,28/Oct/23 2:21 AM,25/May/18 10:09 PM,,,,,,,v1.3.0,,,,,,0,,,,,,Change server to accept an authorization token based on either X509 enrollment certificate or Idemix credential.,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzafz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/May/18 11:31 AM;aambati;https://gerrit.hyperledger.org/r/c/21849/;;;",,,,,,,,,,,,,,,,,,,
"I want a CLI and REST APIs for managing certificates, including deleting",FABC-587,24650,,Epic,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,skarim,smithbk,smithbk,01/Dec/17 5:54 AM,21/Jul/18 4:12 AM,28/Oct/23 2:21 AM,18/May/18 3:34 AM,,,,,,,v1.2.0,,,,,,0,sdk,,,,,"fabric-ca-server should support REST APIs for managing certificates.
One of the most important ones will be to delete all expired certificates, or which expired more than some period of time ago.  This will prevent the certificate table from infinitely growing.
Another is to query for certificates which are about to expire so the identities can be notified that they need to reenroll in order to renew their certificate.

Design Doc: https://docs.google.com/document/d/1WqT1BfZ2YdrDnqHe52UA9Z9SIp4I2mIbL2W5MY92A2I/edit?usp=sharing

Swagger: https://gerrit.hyperledger.org/r/#/c/18951/1/swagger/swagger-fabric-ca.json",,pandrejko,skarim,smithbk,TiantianGao,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-530,FABC-580,,,,,,,,,,,,,,,,,,,Unset,,Unset,,,Certificate REST APIs on Fabric CA ,,,,Unset,,,,"1|hzx01j:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,pandrejko,skarim,smithbk,TiantianGao,troyronda,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/18 5:26 AM;skarim;https://gerrit.hyperledger.org/r/#/c/18951/
https://gerrit.hyperledger.org/r/#/c/18953/
https://gerrit.hyperledger.org/r/#/c/20077/
https://gerrit.hyperledger.org/r/#/c/20455/
;;;","31/May/18 11:38 PM;pandrejko;Just confirming there are no Doc requirements for this epic?;;;","31/May/18 11:53 PM;skarim;[~pandrejko] I have already updated documentation in Fabric CA read the docs as part of my development CRs. But Dave suggested it might be good for you guys to review it. Here is the link to what I wrote: https://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#manage-certificates;;;",,,,,,,,,,,,,,,,,
Idemix - Revocation,FABC-588,20130,,Epic,Closed,FABC,Fabric CA,software,denyeart,,,High,Duplicate,adc,dubovitskaya,dubovitskaya,11/Aug/17 10:37 PM,09/Jan/19 2:47 PM,28/Oct/23 2:21 AM,09/Jan/19 12:46 AM,v1.4.0,,,,,,,,,,,01/Nov/17 12:00 AM,1,fabric,fabric-bccsp,fabric-ca,idemix,sdk,"This Epic describes the 'Post MVP' work for the identity mixer integration that includes the following features:
 * certificate revocation (and expiration through revocation for this release)
 * include BCCSP support for idemix and refactor to call idemix crypto through BCCSP

See ----------FAB-2005---------- (experimental v1.1 support) and FAB-10120 (production quality support) for base (MVP) functionality.

Other Idemix related epics:
 * FAB-6835 Idemix - Java SDK MVP
 * FAB-6988 Idemix - Fabric-CA MVP
 * FAB-6837 Idemix - Node SDK
 * FAB-6989 Idemix - HSM support
 * FAB-8793 Idemix - BCCSP, ACL, Audit (Post MVP)


 

 ",,ashutosh_kumar,denyeart,dubovitskaya,JonathanLevi,mdr,mffrench,rickr,SjirNijssen,ssaddem,vdods,vjuge,ymlbright,,,,,,,,,,,1728000,1728000,,0%,1728000,1728000,,,,,,,,,,,,,,,,,,,,FAB-13103,,,,,,,FAB-2005,FABN-689,FAB-6989,FABC-592,FABJ-327,FAB-8793,FAB-10120,,,,,,,,,,,,In development/review.,,Available,,Required,ghx-label-3,,Idemix - Revocation,To Do,,,Required,,,,"1|hzyc67:",,,,Yes,Required,,,,,,,,,,,,,,,,,,,See FAB-9918 for test plan.,,,,,,ashutosh_kumar,denyeart,dubovitskaya,JonathanLevi,mdr,mffrench,rickr,SjirNijssen,ssaddem,vdods,vjuge,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Aug/17 7:05 AM;rickr;It's not clear to me what the implication are for the SDKs are.;;;","24/Aug/18 12:18 AM;denyeart;Based on focus on the core Idemix scenarios in the remaining weeks of v1.3.0, the revocation support needs to be deferred to a future release.;;;",,,,,,,,,,,,,,,,,,
Membership Service Abstraction,FABC-589,12689,,Epic,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,keithsmith,smithbk,smithbk,14/Sep/16 12:54 AM,21/Jul/18 4:13 AM,28/Oct/23 2:21 AM,15/Apr/17 2:46 AM,,,,,,,v1.0.0,,,,,,0,MembershipServices,,,,,"Make membership services completely pluggable in the following components:
1) client (node SDK)
2) server (membership services proper)
3) peer validation
4) chaincode APIs

This should support non-certificate based means (e.g. token-based).",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-653,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,,,Membership Service Abstraction,,,,Unset,,,,"1|hzxc1z:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Usability of membership services,FABC-590,12406,,Epic,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,,markparz,markparz,17/Aug/16 12:18 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,06/Jul/18 9:51 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"Story: As a developer I need the ability to understand, documentation, and create chaincode using the provided membership services via an easy API. This should include security (encryption) and adding and removing of certificates. So that, the active participants (nodes) of the network, can successfully admin members of their network through automation or manual practices.


Description:
As a chaincode developer, I want to be able to easily understand and administer membership through the provided membership services functions. This includes, APIs (w/security), and documentation on how to implement. ",,grapebaba,JonathanLevi,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-7,,More flexibility in membership services,To Do,,,Unset,,,,"1|hzxaz3:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,grapebaba,JonathanLevi,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Ability to manage, migrate and patch the fabric code",FABC-591,12352,,Epic,Closed,FABC,Fabric CA,software,denyeart,,,High,Duplicate,,markparz,markparz,13/Aug/16 4:09 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,1,maintenance,,,,,"Story: Participants of a network must have the ability to apply, or have applied, patches to their node, so that they can take advantage of new features and function, gain new performance improvements, avoid serious stability issues and patches for bugs and possible vulnerabilities on her node.  

Description:
Needs to be an understand of the details of the fix and possible impacts before making a change. Fix application ultimately needs to be done in a manner that doesn't require taking down the entire network or incurring other serious outages. Also needs to understand the network compatibility strategy. She needs to be able to go to the latest and greatest level of code to use the latest and greatest features, but must have a migration path. 

Fabric upgrade

This is to track the phases of applying fixes to fabric components.

Phase 1 - Take node down and replace. Simple bug fixes 
Phase 2 - Changes that create protocol compatibility issues. Require migration path 

**Other considerations:
Can this be done by simply replace a single node, allowing for new transactions to be queued up? 
Need a strategy for rolling migrations through the network.
Backward compatibility ",,ChristopherFerris,markparz,muralisr,toddinpal,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-3,,Fabric maintenance / upgrade,To Do,,,Unset,,,,"1|hzxaq7:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,markparz,muralisr,toddinpal,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Aug/16 3:28 AM;markparz;[~ChristopherFerris] mentioned in the original GH issue, which is worth noting and taking all options into account this EPIC: 

_""As an operator, I would be able to deploy an upgraded/patched image of the [component] across my network of fabric [components] without impacting the overall operations of the network itself.""

I am not sure I would describe as two phases... I think it is more likely that for a breaking change, it is required that a live migration be specified and thoroughly/exhaustively tested before it is merged._;;;","13/Apr/17 3:34 PM;muralisr;[~ibmmark] There are two aspects to this - what support exists that can be exposed via doc and what new support needs to be added. Suggest we move this to 1.1 for study ?;;;","21/Apr/17 6:29 AM;markparz;[~muralisr] My big concern is that we have to be able to move forward without starting networks over once we release 1.0;;;","06/Jul/18 9:40 PM;ChristopherFerris;This has been handled;;;",,,,,,,,,,,,,,,,
Idemix - Fabric CA MVP,FABC-592,23946,,Epic,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,dubovitskaya,dubovitskaya,dubovitskaya,15/Nov/17 7:33 PM,12/Jun/20 12:31 AM,28/Oct/23 2:21 AM,10/Oct/18 2:18 PM,,,,,,,v1.3.0,,,,,15/Feb/18 12:00 AM,0,fabric-ca,idemix,,,,"Integrate Idemix certificate issuing and revocation functionality into fabric-ca. Revocation is only partially enabled. 

Full revocation support will be enabled within FABC-588.

To support full integration of the Idemix signing functionality, we need a service that would issue enrollment certificates in a form if the Identity Mixer credentials (as it is done now for X.509 certificates using client-sdk and the fabric-ca service). 

Currently we have a tool in Go that provides local issuance of the credentials and a crypto library in Java that implements Idemix Issuer key generation and credential issuance.

We need to extend fabric-ca to support certificate issuance and revocation using Identity Mixer crypto library and idemixca implementation for idemixgen tool for signing user attributes in a form of an Idemix credential. Attribute and CRL management on a high level would be the same as for X.509 certificates and will remain unchanged.",,denyeart,dubovitskaya,latitiah,raccoonrat,ssaddem,ymlbright,,,,,,,,,,,,,,,,,576000,576000,,0%,576000,576000,,,,,,,,,,,,,,,,,,,,,,FAB-2005,FABJ-327,FABN-689,FABC-588,FAB-10120,FAB-8810,,,,,,,,,,,,,,,,,,Done - could still use a sample.,,Reviewed,,Done,ghx-label-1,,Idemix - Fabric CA MVP,To Do,,,Done,,,,"1|hzwqfp:y",,,,Yes,Required,To Do,,,,,,,,,,,,,,,,,,See FABC-119 for test plan. Partner with Latitia Haskins on interop test.,,,,,,denyeart,dubovitskaya,latitiah,raccoonrat,ssaddem,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Mar/18 12:30 PM;denyeart;Adding Fix Version v1.2, so that this can be considered along with the other Idemix features, but there is not yet maintainer consensus that this is a priority for v1.2.;;;",,,,,,,,,,,,,,,,,,,
Increase the reliability and flexibility of membership services,FABC-593,12365,,Epic,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,markparz,markparz,13/Aug/16 6:13 AM,21/Jul/18 4:12 AM,28/Oct/23 2:21 AM,06/Apr/17 11:02 AM,,,,,,,v1.0.0,,,,,,0,MembershipServices,v1.0,,,,"Story: As business owner, I require the ability to have multiple trusted authorities to provide their services, so that, there are no single points of failure and no single points of trust.",,inatatsu,JonathanLevi,markparz,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-2,,Enhanced membership services,To Do,,,Unset,,,,"1|hzxarj:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,inatatsu,JonathanLevi,markparz,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Apr/17 11:01 AM;smithbk;It is now possible to have multiple trusted CAs via MSP in fabric, and multiple instances of fabric-ca-server with an HA DB.;;;",,,,,,,,,,,,,,,,,,,
Supporting Validity Period in MS Certificates {E/T/A}Certs,FABC-594,12440,,Epic,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,JonathanLevi,JonathanLevi,17/Aug/16 2:50 PM,26/Mar/19 8:43 PM,28/Oct/23 2:21 AM,26/Mar/19 8:43 PM,,,,,,,,,,,,,0,,,,,,,,ChristopherFerris,grapebaba,JonathanLevi,zmanian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-860,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-4,,Validity Period in Membership Services,To Do,,,Unset,,,,"1|hzxb4v:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,grapebaba,JonathanLevi,zmanian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 10:07 AM;ChristopherFerris;[~JonathanLevi] what up with this? if no longer relevant or fixed, please update accordingly. If we want to just close this, mark fixVersion WONTFIX and set status to Done.;;;","14/Apr/17 10:44 PM;ChristopherFerris;[~JonathanLevi] I assume this is still relevant? I updated to in-progress and future version;;;","14/Apr/17 10:46 PM;JonathanLevi;Hi [~ChristopherFerris], yes, so some of these (underlying tickets) have been implemented (via other JIRA tickets/Gerrit CRs). We do need to complete this though. Will check and update accordingly, thank you.;;;","06/Jul/18 9:51 PM;ChristopherFerris;[~JonathanLevi] this still relevant?;;;",,,,,,,,,,,,,,,,
Better control over user's registration/revocation...,FABC-595,12531,,Epic,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,JonathanLevi,JonathanLevi,23/Aug/16 4:12 AM,21/Jul/18 4:13 AM,28/Oct/23 2:21 AM,28/Jun/17 2:58 PM,v0.6,,,,,,v1.0.0-rc1,,,,,,0,MembershipServices,,,,,"Fabric v0.5 has a lot of issues that stem from the fact that Fabric currently does not have a concept of an 'Account'. 

[JonathanLevi] I am going to add a lot more detail about this, but just quickly, we really need to address the current flow from the first step of the very initial ""on boarding"" of an account (say, ""identity"") on to Fabric.

The context of this Epic is the fact that we currently have a lot of issues with the existing ""temporary"" design that needs fixing. For example, the separation of the OTP/user-name password pairs as the 'default' credentials for initially accessing MS, the (limited) ability to ""un-register"" a user - which is currently done only on the ""client"" side... and does not affect ""Fabric"", as it currently not reflected in a ""system-wide"" fashion.



",,ChristopherFerris,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-5,,"The concept of an ""ACCOUNT"" in Fabric 1.0",To Do,,,Unset,,,,"1|hzxbhz:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jun/17 9:10 AM;ChristopherFerris;[~JonathanLevi] this is still relevant, yes?;;;","28/Jun/17 2:54 PM;JonathanLevi;Good morning. We can close it (fixed in 1.0.0);;;",,,,,,,,,,,,,,,,,,
"As a blockchain participate, I need a CLI to start the COP server",FABC-596,12755,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,Clayton Sims,Clayton Sims,27/Sep/16 6:20 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,25/Oct/16 1:44 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"cop server start

Start the cop server.
",,Clayton Sims,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx9d3:",,,,Unset,,Sprint 3,,,,,,,,,,,,8.0,Unset,,,,,,,,,,,Clayton Sims,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Oct/16 12:59 AM;smithbk;Implemented in https://gerrit.hyperledger.org/r/#/c/1863/1;;;",,,,,,,,,,,,,,,,,,,
"As a blockchain participate, I need a CLI to disable the membership service server in a peer or orderer process",FABC-597,12754,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,Clayton Sims,Clayton Sims,27/Sep/16 6:19 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,17/Oct/16 10:33 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"cop server disable

Disable the membership service server in a peer or orderer process.
",,Clayton Sims,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-589,,,,,,,,,"1|hzx9cv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,Clayton Sims,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Oct/16 10:32 PM;smithbk;A COP server will not run in a peer or orderer;;;",,,,,,,,,,,,,,,,,,,
"As an administrator, I want to control the maximum amount of time for which an ECert is valid from time of issuance",FABC-598,12477,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,smithbk,smithbk,19/Aug/16 4:21 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,07/Dec/18 3:50 AM,,,,,,,,,,,,,0,MembershipServices,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-430,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxban:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Dec/18 3:50 AM;skarim;The time until expiration is configurable property on the CA for the enrollment certificate it issues. By default, all enrollment certificates are valid for 1 year. I think the requirement is met, thus closing it. If I misunderstood the request, please reopen.;;;",,,,,,,,,,,,,,,,,,,
"As a block chain participate, I need a CLI to initialize the COP server",FABC-599,12750,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,pvle@us.ibm.com,Clayton Sims,Clayton Sims,27/Sep/16 6:09 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,23/Nov/16 1:24 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"https://docs.google.com/document/d/1TRYHcaT8yMn8MZlDtreqzkDcXx0WI50AV2JpAcvAM5w/edit
This is the work for 1.1.1 in the above doc

",,Clayton Sims,ple8LF,,,,,,,,,,,,,,,,,,,,,600,600,,0%,600,600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx8hz:",,,,Unset,,Sprint 2,Sprint 3,Sprint 4 - Membership Services,Sprint 5 - Membership Services,,,,,,,,,,Unset,,,,,,,,,,,Clayton Sims,ple8LF,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Oct/16 7:03 AM;ple8LF;Update: 
When the following command is executed:

cop server init csr.json 

it generates and writes server-cert.pem and server-key.pem to /cop/testdata/

TODO: Write a GetHome() function to get the home directory for the server and write the PEM files there.

This will complete 1.1.1 in https://docs.google.com/document/d/1TRYHcaT8yMn8MZlDtreqzkDcXx0WI50AV2JpAcvAM5w/edit#

Working on 1.1.2 at the same time. A new task will be created for it.
;;;","01/Nov/16 5:56 AM;ple8LF;The code for 1.1.1 in the design document is complete.

Executing: cop server init csr.json 
generates and writes server-cert.pem and server-key.pem to $COP_HOME/.cop/;;;",,,,,,,,,,,,,,,,,,
How do you  do with the attributes mentioned in deploy transaction,FABC-600,12537,,Story,Closed,FABC,Fabric CA,software,denyeart,,,High,Won't Do,keithsmith,swangbj,swangbj,23/Aug/16 3:30 PM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:40 PM,,,,,,,,,,,,,0,,,,,,    I am reading the source code of deploying a new transaction.And  I see  the  tcert has close relationship with the attibutes. But I don't see  any attributes in your document and examples. ,,ChristopherFerris,swangbj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxbj3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,swangbj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 1:30 AM;ChristopherFerris;closing this for a) inactivity and b) deprecated;;;",,,,,,,,,,,,,,,,,,,
"As admin of Membership Services I would like to be able to set unified policies for TCert generation, in particular WRT ""Validity Period""",FABC-601,12528,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,dulcep,dulcep,23/Aug/16 3:55 AM,28/Jul/19 12:00 AM,28/Oct/23 2:21 AM,19/Jul/18 10:14 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"Use-case 

All the TCAs in a Membership Services cluster belonging (or under the administration of a certain deployer) should work with that deployer's policy as for the ‘max validity period’, that is:

# Defined a policy by the organization (that is, Member)
# Owned by that Member
# Easily updatable across the cluster (by that Member, and/or by approval of that Member)",,dulcep,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxbhb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,dulcep,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/18 12:06 AM;skarim;Closing out, TCerts will no longer be implemented;;;",,,,,,,,,,,,,,,,,,,
"As an administator, I want membership services to run continuously without running out of storage",FABC-602,12465,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,smithbk,smithbk,18/Aug/16 9:07 PM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:41 PM,,,,,,,,,,,,,0,MembershipServices,,,,,Created from https://github.com/hyperledger/fabric/issues/718,,ChristopherFerris,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxb8f:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Aug/16 9:59 PM;ChristopherFerris;copying last comment for posterity - @ibmmark @JonathanLevi @mastersingh24 IMO, we've only addressed a symptom. The root cause is actually not the bloated TCert storing, but that we don't have an effective strategy for dealing with a long running system vis storage of the db. We've only prolonged things a bit by addressing the symptom. Not saying that removing the TCerts was a bad idea. It was necessary. However, we need a more effective strategy for long term operations.;;;","18/Aug/16 10:01 PM;ChristopherFerris;[~smithbk] this really isn't a bug, but a limitation of the current system that needs stories that are intended to outline what changes are needed by whom, and why.;;;","18/Aug/16 10:14 PM;smithbk;With regard to strategy, we need to have a cap on the amount of storage that will be used no matter how long we run.
Here is a proposal.

1) Add a configuration option to membersrvc.yaml similar to the following:
         maxTCertExpirationTime: <seconds>
    We need this to support expiration of TCerts also and provide some default.

2) Store generator info for each batch of tcerts and not the tcerts themselves, as has been suggested.

3) Add an configuration option to membership.yaml similar to the following:
         maxTCertBatchHistory: <maxTCertBatchHistory>
 
If maxTCertBatchHistory is not specified, then we calculate a default value based on some maximum transaction rate.
The calculation of this default value would be:
     maxTCertBatchHistory = maxBatchOfTCerts / second * maxExpirationTime in seconds
We would have to choose a default ""maxBatchOfTCerts / second"" rate based on performance numbers.

Membership services then prunes the DB based on the value of maxTCertBatchHistory.  At any point in time, it could keep more than maxTCertBatchHistory entries depending on how often pruning is done, but it must never keep less than maxTCertBatchHistory entries.;;;","15/Apr/17 2:47 AM;mastersingh24;this was for v0.6 which we are no longer maintaining;;;",,,,,,,,,,,,,,,,
Add API to support dynamically adding user attributes,FABC-603,12586,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,jimthematrix,jimthematrix,31/Aug/16 11:58 PM,21/Jul/18 4:18 AM,28/Oct/23 2:21 AM,02/Sep/16 9:38 PM,,,,,,,v0.6,,,,,,0,MembershipServices,,,,,"User attributes can be selectively included in TCerts and this is the primary means to implement access control from within chaincodes. Right now while a registrar can dynamically register new users via API calls, this is not possible with user attributes managed by ACA.

Would be a high priority feature for deployments that don't have easy access to the backend peer processes (in docker or VMs), like those apps working with the a blockchain service deployed to a PaaS cloud platform. They rely on using the application to dynamically register users and add user attributes.",,jimthematrix,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-634,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxbnj:",,,,Unset,,Sprint 1,,,,,,,,,,,,,Unset,,,,,,,,,,,jimthematrix,smithbk,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Aug/16 11:58 PM;jimthematrix;[~smithbk] FYI;;;","04/Sep/16 5:24 AM;smithbk;This has been submitted to version 0.6 under http://gerrit.hyperledger.org/r/899 Add support for dynamically registering a user with attributes;;;",,,,,,,,,,,,,,,,,,
"As an admin of MS, I can IMMEDIATELY* SUSPEND a user's account for a given period of time (From, To)",FABC-604,12526,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,JonathanLevi,JonathanLevi,23/Aug/16 3:40 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,28/Nov/18 12:14 AM,,,,,,,,,,,,,0,MembershipServices,Usability,,,,"As an admin of Membership Service, I have the ability to IMMEDIATELY* SUSPEND privileges that I (or the MS cluster that is under my control/supervision) previously granted to a user of Fabric. E.g., Restrict or temporarily suspect (say, for 4 hours, a weekend, etc.).

Use-cases (for intuition):
- Not allowing traders to trade over the weekend.
- Temporarily suspending one's account due to suspicious activity until further investigation.

IMMEDIATELY* -- to be defined (probably in terms of number of blocks)",,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxbgv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a peer administrator, I need a CLI to enable membership services to run in a peer or order",FABC-605,12759,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,Clayton Sims,Clayton Sims,27/Sep/16 6:50 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,18/Oct/16 2:21 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"peer/orderer cop enable

Enable  membership services to run in this peer or orderer.
",,Clayton Sims,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-589,,,,,,,,,"1|hzx9dz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,Clayton Sims,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Oct/16 2:21 AM;smithbk;COP will not run in a peer or orderer;;;","18/Oct/16 2:51 AM;JonathanLevi;Marking it as DONE will ruin our statistics.

Please can we update this from ""DONE"" to ""WON'T FIX"" (which is the correct labeling of something that is not required, say, anymore).
;;;","18/Oct/16 8:49 PM;smithbk;WON'T FIX is not an option under ""Workflow"".  There is only ""DONE"", ""IN REVIEW"", and ""BACKLOG"".  I was wanting a ""CANCEL"", but not there.;;;","19/Oct/16 3:15 PM;JonathanLevi;Hi Keith, sorry I spoke too soon yesterday morning - it is the ""WON'T DO"" value that is baked in (and not the ""WON'T FIX"").

Thank you Ry for making the Resolution field available... we can probably treat this logically as a CANCELED/Not Relevant anymore (for statistics, etc.);;;",,,,,,,,,,,,,,,,
Stop using username-password pairs for client-(CA-)server authentication,FABC-606,12314,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Low,Won't Do,,JonathanLevi,JonathanLevi,11/Aug/16 6:16 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:40 PM,,,,,,,,,,,,,1,MembershipServices,Security,Usability,v0.6,,"[I put this issue together very quickly, I'll update it later, but just a quick peek at the conf/YAML files:]


 {quote}               admin: 1 Xurw3yU9zI0l institution_a '{""registrar"":{""roles"":[""client"",""peer"",""validator"",""auditor""],""delegateRoles"":[""client""]}}'
                WebAppAdmin: 1 DJY27pEnl16d institution_a '{""registrar"":{""roles"":[""client""]}}'
                lukas: 1 NPKYL39uKbkj bank_a
                system_chaincode_invoker: 1 DRJ20pEql15a institution_a
                diego: 1 DRJ23pEQl16a institution_a
                jim: 1 6avZQLwcUe9b bank_a
                binhn: 1 7avZQLwcUe9q institution_a

                # Users for asset transfer with roles test located at
                # sdk/node/test/unit/asset-mgmt-with-roles.js
                alice: 1 CMS10pEQlB16 bank_a
                bob: 1 NOE63pEQbL25 bank_a
                assigner: 1 Tc43PeqBl11 bank_a
{quote}



",,AshishkumarLakshmanan,ChristopherFerris,corecode,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxb5r:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,AshishkumarLakshmanan,ChristopherFerris,corecode,JonathanLevi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Aug/16 12:31 AM;corecode;I used some basic (optional) certificate authentication in my prototype consensus-peer branch at <https://github.com/corecode/fabric/tree/separate-consensus/consensus-peer>.  Maybe this helps?;;;","12/Aug/16 1:27 AM;JonathanLevi;Hey [~corecode]

First of all, I'm really glad we share the same view on this. Second, yes, this is much preferable!

I gave a talk last week about scalability (the talk focused mostly on Fabric's Membership Services' work-in-progress, challenges and where we want to be)... and this is one of the issues that came up (from bootsrapping a small private, permissioned chain... all the way to mass-configuring, large set-ups, etc.).

One of the items was the server's policy... in the sense of, what can we enforce/require from 'adhering' clients. Instead of hard-coded username-password, Client Authentication can/may be key here! Several setups may include servers that require client auth.

Will try to break this to smaller sub tasks, promote these, split the work (, try to use some of yours) etc., ... but the first 3 things that sprang to mind when I read your comment are 1. yes, 2. yes and 3. yes!

Thanks a lot.


;;;","20/Aug/16 4:53 AM;smithbk;I think this is related to allowing another registry to be plugged in, such as via Oauth.  That is, it would be solved if we supported oauth for authentication, right?;;;","04/Apr/17 12:45 AM;ChristopherFerris;closing because v0.6 and wontfix;;;",,,,,,,,,,,,,,,,
"As a fabric administrator, I want to be able to easily understand and administer Membership ",FABC-607,12409,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Won't Do,,Clayton Sims,Clayton Sims,17/Aug/16 1:05 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:41 PM,,,,,,,,,,,,,0,MembershipServices,,,,,,,Clayton Sims,JonathanLevi,mastersingh24,v_thirugnanam,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-590,,,,,,,,,"1|hzxb07:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,Clayton Sims,JonathanLevi,mastersingh24,v_thirugnanam,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Aug/16 2:11 AM;JonathanLevi;While this is a pretty general story, I will work to break this into sub-tasks that are focused at the administration of Membership Services.

I think that simplifying the configuration for admins, will play a big role in alleviating some of the pain involved. For starters, for new admins trying to set up and administer a simple deployment configuration at first, which will definitely assist with richer/more complex ""constellations"" later on).

;;;","23/Aug/16 5:23 AM;JonathanLevi;Noting that while it is difficult for me to make sure that:
- As a fabric administrator I can *easily understand...*
- As a fabric administrator I can *easily administer Membership...*

... as I know that this item was added quickly for planning - I am taking a more pro-active approach here and working to open a few more related stories/sub-tasks/issues that I believe are relevant/related to these (e.g., configurations and the ability to add more control/capabilities to an admin of MS... etc.);;;","03/Jun/17 6:42 PM;mastersingh24;Too broad and no longer relevant so marking as WON'T FIX and closing;;;","04/Jun/17 3:10 AM;JonathanLevi;Yup. Thank you [~mastersingh24]!;;;",,,,,,,,,,,,,,,,
Tool for generating issuer and user keys and issuing credentials with attributes and generating Idemix MSP config using the Identity Mixer crypto package,FABC-608,20052,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mdr,dubovitskaya,dubovitskaya,09/Aug/17 6:52 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,01/Nov/17 3:51 AM,v1.1.0,,,,,,,,,,,11/Aug/17 12:00 AM,0,,,,,,"This contribution enables offline out-of-band key generation and setup for the Identity Mixer issuer (CA) and issuance of the Identity Mixer credentials (certificates).

The tool also generates Idemix MSP config

This contribution is only for the MVP version of the Idemix MSP and will be extended to support fabric-ca integration for the next release.",,dubovitskaya,mdr,,,,,,,,,,,,,,,,,,,,,144000,57600,,0%,144000,57600,,,FAB-5672,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2005,,,,,,,,,"1|hzycfb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,dubovitskaya,mdr,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Sep/17 11:43 PM;mdr;CR: https://gerrit.hyperledger.org/r/#/c/13457/;;;",,,,,,,,,,,,,,,,,,,
A constellation of ECAs belonging to the same MS deployer will be able to handle collisions and overlaps when connected to various different user storage repositories,FABC-609,12530,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,dulcep,dulcep,23/Aug/16 4:10 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:40 PM,,,,,,,,,,,,,0,MembershipServices,,,,,,,dulcep,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxbhr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,dulcep,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Apr/17 2:49 AM;mastersingh24;no longer relevant as this applies to v0.6 which is no longer being maintained;;;","15/Apr/17 2:50 AM;mastersingh24;no longer relevant as this applies to v0.6 which is no longer being maintained;;;",,,,,,,,,,,,,,,,,,
JWT-like authentication support for COP APIs,FABC-610,13114,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,22/Oct/16 3:06 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,19/Nov/16 1:52 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Secure the REST APIs with a JWT-like token in the authorization header.
",,ple8LF,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-674,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx8if:",,,,Unset,,Sprint 3,Sprint 4 - Membership Services,Sprint 5 - Membership Services,,,,,,,,,,2.0,Unset,,,,,,,,,,,ple8LF,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Oct/16 7:52 PM;smithbk;This is complete except for implementing the CreateToken and VerifyToken functions in cop/util/util.go
Pho is doing this.;;;","25/Oct/16 10:16 PM;ple8LF;It is almost done. Thanks;;;","25/Oct/16 10:32 PM;ple8LF;Both CreateToken and VerifyToken are now complete for the ECDSA case.;;;","26/Oct/16 2:47 AM;ple8LF;CreateToken and VerifyToken are done for both ECDSA and RSA. I will check in the code today.;;;",,,,,,,,,,,,,,,,
Multi-channel TCert pool making pool's communication with TCA parallel.,FABC-611,12536,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,akihikot,akihikot,akihikot,23/Aug/16 3:17 PM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:40 PM,,,,,,,,,,,,,0,,,,,,"Moved from https://github.com/hyperledger/fabric/issues/2387. 

I created this issue to discuss PR https://gerrit.hyperledger.org/r/#/c/511/, on some points.

- whether this option should be made default for mt pool.
- whether a similar idea should be implemented in sdk/node.

This issue is about clients's performance when it tries to send multiple parallel requests, using large number of  tcerts. It may be related to FAB-73, running multiple CAs in parallel.  ",,akihikot,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-113,FAB-73,,,,,,,,,,,"23/Aug/16 3:08 PM;akihikot;tcert_pool_20160804.png;https://jira.hyperledger.org/secure/attachment/10038/tcert_pool_20160804.png",,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxbiv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,akihikot,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Aug/16 2:37 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/511/;;;",,,,,,,,,,,,,,,,,,,
"As a adminstrator, I need to be able to revoke a certificate",FABC-612,12415,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,smithbk,Clayton Sims,Clayton Sims,17/Aug/16 3:27 AM,21/Jul/18 4:15 AM,28/Oct/23 2:21 AM,07/Jan/17 11:58 PM,,,,,,,,,,,,,0,FabricCOP,MembershipServices,,,," There are typically three broad reasons for revoking a cert:
# The rightful owner of the cert is abusing it. Typically this would be a sub-CA who is issuing certificates they shouldn't. Their cert gets revoked to tell the world not to trust them anymore.
# The server is decommissioned, or the cert is no longer needed for whatever reason.
# Key compromise of the private key corresponding to the certificate. We can no longer trust anything signed by, or encrypted for this cert because we no longer know if we're talking to the rightful owner or the hacker.

As a result of revoking a certificate, two things happen:
# Any request to the COP server which uses the revoked certificate will be denied.  This includes certificate renewal via the ""cop client reenroll"" command, getting a new batch of tcerts, or any other command other than ""cop client enroll"" which uses basic auth.
# Any request to a peer which uses the revoked certificate will be denied.   The COP server adds the revoked certificate (actually, a unique ID for the cert) to the CRL of the ledger via a config update.  This allows the VSCC (Validating System ChainCode) in peers to deterministically reject transactions signed by the revoked certificate.

There are two types of certificates which can be revoked: ecerts (enrollment certificates) and tcerts (transaction certificates).
# Revoking an ecert is performed by the same identity that registers the identity.   This is accomplished by the following command:
{quote}
cop client revoke -id  <enrollmentID>
{quote}
This adds all non-expired certificates associated with the identity to the CRL list of both the COP server and the ledger.

# Revoking a tcert adds the ID (<serial number, COP ID>) of the tcert to the CRL list of the COP server and the CRL list of the ledger, thus preventing it's use by the COP server or the peer in a transaction context.

Who can revoke a certificate?   We may have configurable policies as needed in the future, but the current plan is to simply allow either of the following to revoke a certificate:
# The root CA or intermediate CA(s) associated with the issuer chain of the certificate.
# The registrar of the identity; that is, the one who registered the identity which allowed them to be issued the certificate in the first place.

When revoking an ecert, the enrollment ID as being revoked, keep it in the COP DB, and not allow the name to be reused.
For now, I will assume ""b"" only.

Another consideration involves pruning of the CRL list.  When the COP server determines that the certificate on the CRL has expired at some time in the past, it can be removed from the CRL list since the request would be rejected anyway.  The COP server will have a delta time to allow for some clock skew, but as soon as the expiration + delta has passed, the COP server will remove the CRL from it's DB and also remove it from the fabric's CRL.

Revocation consists of the following 4 pieces of work.
# Revoke a single certificate identified by serial number, adding to CRL list of COP server only.
# Revoke all certificates associated with an enrollment ID (COP server only) and disable the enrollment ID.
# Add revoked certificate serial numbers to the ledger's CRL list.
# Prune the ledger's CRL list for certificates that have expired

See https://gerrit.hyperledger.org/r/#/c/2843/ for the change set for the 1st of these 4.
",,ChristopherFerris,Clayton Sims,mastersingh24,smithbk,v_thirugnanam,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-590,,,,,,,,,"1|hzx7vj:",,,,Unset,,Sprint 6 - Membership Services,Sprint 7 - Memship Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,Clayton Sims,mastersingh24,smithbk,v_thirugnanam,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Aug/16 8:21 AM;ChristopherFerris;this is missing rationale and also missing description of what happens as a result;;;","22/Nov/16 10:44 PM;mastersingh24;[~keithsmith] I think allowing the ""adminstrator"" who is tied to the signing certificate (assuming we support multiple root / intermediate authorities) should be sufficient.  I guess that maps to ""registrar"" in terms of the implementation as I'd assume ""registrar"" roles are tied to a specific issuing authority

I would certainly hope that this is just access control handler applied to the current cfssl revoke endpoint;;;","23/Nov/16 12:30 AM;smithbk;It's weird in that ""cfssl revoke"" assumes you are running on the server itself and doesn't go over the wire, but they do provide a REST API for it.
Anyway, I'm working on adding ""cop client unenroll"" which goes over the wire, checks the ACLs, completely removes the enrollment ID from the user DB, and also adds to CRL in the cfssl DB.   The last part is all that ""cfssl revoke"" does.;;;","24/Nov/16 9:23 PM;mastersingh24;For auditing purposes do we actually want to remove the enrollment ID?  Perhaps we should set it to a ""disabled"" state instead?;;;","30/Nov/16 3:05 AM;smithbk;Yes, will disable it and leave in DB;;;","03/Dec/16 4:15 AM;smithbk;See https://gerrit.hyperledger.org/r/#/c/2953/;;;","09/Dec/16 5:40 AM;smithbk;See http://gerrit.hyperledger.org/r/3133;;;","20/Dec/16 5:21 AM;mastersingh24;Let's discuss  

3. Add revoked certificate serial numbers to the ledger's CRL list.
4. Prune the ledger's CRL list for certificates that have expired

before any implementation begins;;;",,,,,,,,,,,,
I want fabric-ca-server to manage certificates in a chain's MSP CRL (Certificate Revocation List),FABC-613,13109,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,smithbk,smithbk,21/Oct/16 9:24 PM,26/Mar/19 8:37 PM,28/Oct/23 2:21 AM,26/Mar/19 8:37 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"fabric-ca-server will update the CRL in fabric when:
a) certificates are revoked in fabric-ca-server, and
b) optionally also when certificates have been expired for a while, thus pruning the CRL.  This can only be done though if/when fabric honors expiration times.
  COP will prune the CRL list when a certificate has expired.

For now, we will do only ""a"".  Updates to fabric include MSPs in the channels associated with a peer.
Also update the local MSP when an API is provided to update the local MSP.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-663,FAB-1313,,,,,,FABC-697,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx3rb:",,,,Unset,,Sprint 7 - Memship Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,,,,,4.0,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Membership services/COP APIs need to be simplified and provided as a library,FABC-614,12371,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,13/Aug/16 9:47 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,21/Oct/16 10:17 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"The membership services APIs need to be simplified and made available as a library which can be reused.  For example, APIs might include:
1) constructor which takes a cert to use as the root certificate for this instance of a MS object
2) methods on the MS object to:
    RegisterUser
    EnrollUser
    Set/DeleteUserAttribute
    GetBatchOfTransactionCertificates
    etc

Also include SPIs for this library for:
1) authentication during enrollment
2) getting attribute values
3) where to store it's persistent data
In particular, it should be possible to plugin an oauth implementation for both 1 & 2, or perhaps they should be a single SPI which does both?
",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzxasv:",,,,Unset,,Sprint 2,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Oct/16 10:16 PM;smithbk;This was already complete as part of the COP work already merged in feature/ca branch.   See fabric/cop/api/api.go.;;;",,,,,,,,,,,,,,,,,,,
I want to dynamically manage participants on an existing chain,FABC-615,12661,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Won't Do,smithbk,smithbk,smithbk,13/Sep/16 4:22 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:40 PM,,,,,,,,,,,,,0,MembershipServices,v0.6,WILL-NOT-FIX,,,"NOTE: Hyperledger Fabric V1 provides all of the primitives to build what is described below, but this will not be provided as part of V1.  It is more appropriate to be built as an application on top of V1.  There are multiple reasons for gathering signatures at the app level, and this is one of them, so even though it would be built as an application, it probably makes sense to build as a library or as a service which can be used for multiple use cases.

---------------- The following is the original info for this FAB --------------------

I want to dynamically add a new participant with a new COP/CA to a existing chain.
Suppose chain1 is bootstrapped with peers P1 and P2 using CA1 and peers P3 and P4 using CA2 according to the procedure described in FAB-359.  
I now want to dynamically add CA3 to the same chain with the approval of CA1 and CA2.

1.2.3) cop client submitJoinRequest <root.pem>
This command is invoked by a “sponser” participant to submit a request for another participant to join the blockchain network.
For example, assume companies C1 and C2 are already in the network and C3 wants to join. C3 runs the “cop server init” command to create the root.pem file. C3 then sends this file out-of-band to C1. In this case, C1 is functioning as C3’s sponsor to join the network.
Assuming that C1 approves of C3 joining, C1 invokes this “cop client submitJoinRequest” command. This invokes the COP system chaincode which places the request on the system ledger and depending on the configured join policy, it may require C2 to also approve. The COP system chaincode emits a custom event to which C2 is listening. Once notified, C2 invokes “cop client listJoinRequests” (which calls the COP system chaincode) to see the domain and certificate of who is requesting to join as well as who else has already approved. Based on this, C2 approves or denies the join request, using “cop client approveJoinRequest” or “cop client denyJoinRequest”, respectively, which again invokes COP system chaincode.

1.2.4) cop client listJoinRequests
Lists all current join requests along with a unique <joinRequestId>.

1.2.5) cop client approveJoinRequest <joinRequestId>
Approves the join request.

1.2.6) cop client denyJoinRequest <joinRequestId>
Denies a join request.

1.2.7) cop client listParticipants
Lists the current participants in the blockchain network.

1.2.8) cop client updateJoinPolicy
{ add | remove | updatePolicy }

<policyString>
Update the join policy associated with a group for a specific operation. The <policyString> may be something like the following:
“unanimous” if all current members must agree before the operation is performed
“percentage 50” if 50% of the current group members must agree
“identity <cert>” if it must be approved by a single identity


",,jyellick,sachikoy,smithbk,TiantianGao,wutongtree,,,,,,,,,,,,,,,,,,288000,230400,,0%,288000,230400,,,FABC-663,FABC-659,FABC-665,FABC-666,FABC-669,FABC-645,,FABC-697,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx8cv:",,,,Unset,,Sprint 1,Sprint 2,Sprint 3,Sprint 6 - Membership Services,,,,,,,,,8.0,Unset,,,,,,,,,,,jyellick,sachikoy,smithbk,TiantianGao,wutongtree,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Oct/16 1:09 AM;jyellick;My first concern is that the addition of a new MS instance does not seem to be atomic.  Namely, what happens if MS1 approves of MS3, but MS2 does not?  Presumably, peers of MS1 would consider MS3's transactions to be valid, but MS2 would not, and the world state might diverge.  Since we have the concept of endorsement, would it not make more sense to retrieve endorsements from all necessary members (in this case MS1 and MS2) and submit it as a single transaction? 

It's difficult for me to tell, but it sounds like chaincode is being invoked directly without going through ordering to emit the 'custom event'?  To my knowledge, events are tied to transactions, and transactions must go through ordering, am I missing something?

To me, this whole process seems like it should be handled transactions and chaincode.  Here is a proposed flow.

1. New entity wants to join the network
2. The entity creates a special ""I want to join the network proposal""
3. It sends it to the other parties for endorsement
4. It, or someone submits the endorsed transaction for ordering
5. All peers in the network see this transaction, which is valid and verifiable because of the endorsement, and allow the entity to begin transacting

The advantages I see to this:

1. It is atomic, there is never any ambiguity about whether the new entity is allowed to transact.
2. There is no manual distribution of any key material, it is included in the transaction
3. It re-uses existing concepts and structures of endorsement rather than inventing a new multi-party agreement method;;;","05/Oct/16 4:01 AM;smithbk;Jason, I don't agree.  Two main points:
1) The modification of the trusted roots is atomic. Assuming a unanimous policy, when the transaction containing the final required signature is received, the trust store is atomically updated.  The previous transactions simply accumulate signatures.
2) The period over which we may gather signatures may be days, weeks, or longer.  We don't want a client to need to keep the state of the proposal around that long.  In my model, that state is kept in chaincode.;;;",,,,,,,,,,,,,,,,,,
"As admin of Membership Services I would like to be able to set unified policies for ECert generation, in particular WRT ""Validity Period""",FABC-616,12529,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,dulcep,dulcep,23/Aug/16 3:56 AM,28/Jul/19 12:00 AM,28/Oct/23 2:21 AM,28/Nov/18 12:14 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Use-case 

All the ECAs in a Membership Services cluster belonging (or under the administration of a certain deployer) should work with that deployer's policy as for the ‘max validity period’, that is:

# Defined a policy by the organization (that is, Member)
# Owned by that Member
# Easily updatable across the cluster (by that Member, and/or by approval of that Member)",,dulcep,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxbhj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,dulcep,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enroll User,FABC-617,13167,,Story,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,skarim,skarim,skarim,25/Oct/16 11:36 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,17/Nov/16 1:47 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Check that the password provided by user is correct by checking it against the database for enrolling user. Need to add server side support for enrolling. Request to server should contain id and token (one time password), then the server will return an ecert. ",,skarim,,,,,,,,,,,,,,,,,,,,,,115200,115200,,0%,115200,115200,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx8iv:",,,,Unset,,Sprint 4 - Membership Services,Sprint 5 - Membership Services,,,,,,,,,,,4.0,Unset,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Multiple membership service instances with different root certs in one blockchain,FABC-618,12374,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,pvle@us.ibm.com,smithbk,smithbk,13/Aug/16 10:25 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,20/Aug/16 3:39 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"I need to run multiple MS which have different root certificates and import all into a single blockchain.  The model here is MS1 for company1 and MS2 for company2, with different private keys, are both able to transact on the blockchain.  ",,dulcep,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxatj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,dulcep,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Aug/16 3:24 AM;skarim;Can be approached two different ways. One approach is to have multiple tca.cert.chain files coming from multiple different membership service instances. These were placed in the peer's filesystem, from there the code was modified to be able to read multiple chain files and then append their respective certificates to the certpool. The transaction certificate is then compared against the certpool which now contains cert from multiple membership services and will pass verification.

Second approach is to have one chain file with multiple certificates inside (a certificate from each membership service instance). Then to parse the chain file to separate out the certificates and append them in the certpool. Both approaches work, so we can do down either path.
;;;",,,,,,,,,,,,,,,,,,,
I want to renew my certificate,FABC-619,13480,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,19/Nov/16 1:49 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,03/Dec/16 1:30 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Implement the following cop client command:
    cop client reenroll <copServerURL>

This uses the existing private key associated with the client to sign a request for a new certificate.   It is the same as ""cop client enroll"" except instead of using a one-time user name and password to authenticate the user for initial enrollment, the user is authenticated based upon the signature of the existing private key for the client.

See https://gerrit.hyperledger.org/r/#/c/2641/",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx8a7:",,,,Unset,,Sprint 5 - Membership Services,Sprint 6 - Membership Services,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
LDAP support to authenticate users and get attributes,FABC-620,13476,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,18/Nov/16 7:08 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,21/Dec/16 10:20 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"The overall requirements/goals of adding LDAP support are to:
1) Remove the requirement of storing passwords for a webapp (even though it's a one-time password), and
2) reduce admin and programming overhead to manage user credentials and attributes.

In particular, use LDAP to:
1) Determine who can enroll (via LDAP bind). This means a webapp would not be required to have credentials of it's own to dynamically register other users, but could simply pass the user's user/pass to the COP server which then calls LDAP bind.
2) Retrieve user attributes (via LDAP query).
The COP server's config file will optionally contain a section pointing to an LDAP server, so this is statically configured.
The COP server accesses the LDAP server in read-only mode.
We are not looking at exposing this API to the user. It is a COP SPI. It is a unified SPI in the sense that the COP server uses this SPI to perform all user-related functions.

From a configuration standpoint, the COP server's config file will contain a section similar to the following in order to enable this LDAP support.
{code}
{
   ""ldap"": {
       ""url"": ""ldaps://uid=admin,ou=system:secret@localhost""
       ""userfilter"": ""(uid=%s)""
   }
{code}

When LDAP is configured, enrollment works as follows:
# A COP client or client SDK sends an enrollment request with a basic authorization header
# The COP server receives the enrollment request, decodes the user/pass in the authorization header, looks up the DN (Distinquished Name) associated with the user using the ""userfilter"", and then attempts an LDAP bind with the user's password.  If successful, the enrollment processing proceeds

When LDAP is configured, attributes work as follows:
# A client SDK sends a request for a batch of tcerts *with one or more attributes*to the COP server
# The COP server receives the tcert request and does as follows:
##  extracts the enrollment ID from the token in the authorization header (after validating the token)
## does an LDAP search/query to the LDAP server, requesting all of the attribute names received in the tcert request
## the attribute values are placed in the tcert as normal 

The remainder of this description pertains to some initial work required to make an LDAP-friendly user management wrapper SPI over the current DB code.  This SPI is hidden from user, but makes the code cleaner to implement LDAP.

The following is the current user management API.

{code}type Accessor interface {
  	SetDB(db *sqlx.DB)
 	InsertUser(user UserRecord) error
 	DeleteUser(id string) error
 	UpdateUser(user UserRecord) error
 	GetUser(id string) (UserRecord, error)
 	InsertGroup(name string, parentID string) error
	DeleteGroup(name string) error
	GetGroup(name string) (string, string, error)
}{code}

In order to hide the SQL dependency and allow LDAP or hopefully any user registry to be added,
let's change to similar to the following:

{code}
func NewUserRegistry(type, config string) (UserRegistry, error) {
     if (type == 'sqllite3') return NewUserRegistrySQLLite3(config)
     ... for other types of user registries ... or use switch statement :-)
}

type UserRegistry interface {
        LoginUserBasicAuth(user, pass string) (User, error)
	InsertUser(user UserInfo) error
	UpdateUser(user UserInfo) error
        DeleteUser(id string) error
	GetGroup(name string) (Group, error)
        GetRootGroup() (Group, error)
	InsertGroup(name string, parentID string) error
	DeleteGroup(name string) error
}

type UserInfo struct {
        Name           string
        Pass            string
        Type            string
        Attributes    []Attribute
}

type User interface {
        GetAttributes() ([]Attribute, error)
}

type Group interface {
       GetName() string
       GetChildren() ([]Group, error)
}

type Attribute struct {
     Name  string
     Value  string   // or []byte?
}
{code}

In addition, since we don't currently provide a server API and this is only for the COP server, these APIs should be in cli/server.   The only pieces that should be in fabric-cop/api are client APIs.

When adding support for LDAP, all APIs which would update the user registry will return an error.  We will assume the normal LDAP APIs are used to register users and COP will only read from LDAP.",,JonathanLevi,mastersingh24,smithbk,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx833:",,,,Unset,,Sprint 5 - Membership Services,Sprint 6 - Membership Services,Sprint 7 - Memship Services,,,,,,,,,,,Unset,,,,,,,,,,,JonathanLevi,mastersingh24,smithbk,troyronda,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Nov/16 9:21 PM;mastersingh24;so in the case where you can use LDAP, does that mean the database is not used at all?  And in that case, what about the storage of certificates, revocation/CRL, etc which as I understand it all require the use of a database.

seems to me you cannot support ""read"" only LDAP alone?

or would this just simply ""replace"" the custom piece added for enrollment?;;;","30/Nov/16 12:18 AM;smithbk;[~mastersingh24] Gari, yes, this is just replacing the custom piece for enrollment.  If LDAP is configured, register requests will fail and enroll will simply call LDAP to authenticate user.  The user table in the DB will not be used but the certificate table will be used.;;;","30/Nov/16 2:37 AM;JonathanLevi;Sorry, I don't understand this item at all. Let me ask a few guiding questions maybe?

Let's start from the basics:

1. *Requirements*
What is the exact requirement? Is it ""Supporting LDAP"" ?
- By configuring it in a YAML as a user repository? That is, statically configured (and not on the fly)?
- Do you want to support it in a read-only mode? And only so?


2. *Design*
How do we want to achieve (whatever you suggest/propose/want to address in 1) above. For example,

- Are we going to have a unified interface or not? 
- That is, why do we have an Accessor (btw: you changed it to DBAccessor, so let's update the issue) with all these inserts/deletes etc.
- Maybe you/we might want to have a ReadWriteAccessor/WriteableAccessor or a ReadOnlyAccessor, etc.
- Not sure we would like to expose or use the (DB) Accessor terminology at all (e.g., LDAP being just a Lightweight Dir. Acc. Protocol, etc.)

In short, can we iterate a quick design for review? It may save us a lot of time and probably make us think/clarify all of the above questions, etc.

[Please note that we don't need a 300-page design doc PDF, even a 1,2-pager with the proposed design, sent before jumping to the code should do.

We can probably use the markdown syntax here in JIRA, if it's easier.
Showing the 2 options (say, flow with LDAP vs. no-LDAP), etc.]

3. *Implementation*
We can get back to this after 1 and 2, but just quickly, 

Example 1:
{quote}     if (type == 'sqllite3') return NewUserRegistrySQLLite3(config)
     ... for other types of user registries ... or use switch statement :-){quote}

In general/as a rule of thumb, this kind of code usually warrants a ""step back"":

Example 2:
I don't believe we should store that username password pairs in a struct and definitely not in a clear-text/form. Imagine the criticism we'd get here. What's the feature/upside?

---
Happy to discuss more/thoughts welcome.
-- Jonathan;;;","30/Nov/16 5:42 AM;smithbk;The overall requirements/goals of adding LDAP support are to:
1) Remove the requirement of storing passwords for a webapp (even though it's a one-time password), and
2) reduce admin and programming overhead to manage user credentials and attributes.

In particular, use LDAP to:
1) Determine who can enroll (via LDAP bind).  This means a webapp would not be required to have credentials of it's own to dynamically register other users, but could simply pass the user's user/pass to the COP server which then calls LDAP bind.
2) Retrieve user attributes (via LDAP query).
The COP server's config file will optionally contain a section pointing to an LDAP server, so this is statically configured.
The COP server accesses the LDAP server in read-only mode.
We are not looking at exposing this API to the user.  It is a COP SPI.  It is a unified SPI in the sense that the COP server uses this SPI to perform all user-related functions.

I hope this helps clarify the direction and reason for this SPI.

;;;","01/Dec/16 8:42 AM;JonathanLevi;Hi [~keithsmith], yes, it does clarify the reason/requirement (1 above). Statically configured, read-only and attributes retrieval by querying using LDAP. Thanks for this.

Back to the other parts (2&3):
I wanted to suggest some more work on the design, e..g, describing the flow (maybe via a component interaction diagram or so?) as I didn't want a certain configuration (e.g, LDAP) to invalidate the rest of the API calls, etc. That's what I meant when I asked, for example, whether we require a ""unified"" API (that is, exposing the common functionality only, and extending with specifics when they are available). 

I still think that a design document will help a lot here (esp. for others) or at least a component interaction diagram. It will def clarify some of these use-cases/stories even more (not just for this specific JIRA item, sure).


;;;","06/Dec/16 7:28 AM;smithbk;[~jonathan]Jonathan, see my update to the description section.  See in particular the COP server's LDAP config and following numbered steps describing the flow.  I can do a web sequence diagram if needed, but hopefully the steps are clear.   Attaching a diagram to Jira isn't that friendly :-(;;;","07/Dec/16 6:07 PM;smithbk;See http://gerrit.hyperledger.org/r/3055;;;",,,,,,,,,,,,,
"As an Application Developer , I should be able to get batch of TCerts in HSM friendly way.",FABC-621,13779,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,13/Dec/16 3:18 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,19/Jul/18 10:14 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"Key Pair is being generated on Client which is being sent to TCert API to return a batch of TCerts.

The client generates Key Pair and sends batch of public key signed to Fabric-CA server. Fabric-ca sends batch of signed TCerts to client,",,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-648,FABC-671,FABC-672,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Dec/16 3:43 AM;ashutosh_kumar;mserv-TCertOptions-v3(1).md;https://jira.hyperledger.org/secure/attachment/10360/mserv-TCertOptions-v3%281%29.md",,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx7b3:",,,,Unset,,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,,,,,,,,Unset,,,,,,,,,,,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Dec/16 6:22 AM;ashutosh_kumar;FAB 1478 blocks this FAB , which cannot be contained in Sprint 8 , hence moving it to Sprint 9.;;;","31/Dec/16 5:47 AM;ashutosh_kumar;TCert option 1 is what has been done on Fabric 0.6. The API name in GetBatch. Hardware HSM does not support this mechanism and hence Zuric Research team came up with another mechanism where key derivation is not required. 

To circumvent Hardware HSM support limitation with option 1 , different TCert generation mechanisms has been proposed as described in the attached document. Option 1 in the attached document is what has been implemented in Fabric 0.6.

CoP , aka , Membership Services team has decided to support option 1 (carrying it over from Fab 0.6) and option 2. This FAB is an attempt to implement option 2.

In option 1 , TCerts are being computed from ECERT and ECert has to be ECDSA based.

In option 2 , TCerts has no dependency on ECerts. Following is the flow : 

*Client side* : 
1) Client generates batch of private/public Key key pair. These public key represents public keys for TCerts.The batch of public generated will sent to CoP to obtain CoP signed certififcate. 
2) Client signs the request with all private key for corresponding Public Key that was generated in step 1. Client must also specify the hash algorithm that has been used to compute signature. So , if client wants 2 tcerts , it'll generate 2 key pair and sign the same request message twice with two different keys. It keeps public key and signature in a struct , so that those can be associated.
3) Client then creates token and signs it using private key corresponding to ECert.

CoP Server Side : 
It is assumed that BCCSP has been instantiated on CoP Server prior to CoP Server producing TCerts. This is applicable to TCert option #1 as well as option #2.
1) CoP server validate the token using ECert. 
2) TCert processor of CoP validates each signauture block using CoP Server BCCSP instance and reading hash algorithm from the request.
3) If any of the signature validation fails , it send error back to client , otherwise , it moves to step 4
4) CoP TCert processor signs the certificate using the CoP CA key and cert and sets the certificate validity period based on user supplied value. If the user requested validity period in the request , it'll be compared against server's default Certificate Validity period. If user supplied validity period is smaller the server default value , the Certificate validity period is set to user requested validity period. Optionally TCert can contain user attributes which optionally can be encrypted.

User have choice to either choose between GetBatch() and GetBatchForGeneratedKey() for TCert option 1 and option 2 respectively. He/she does not have influence on how these APIs are implemented. This fab implements GetBatchForGeneratedKey().

EnrollenmentId computed out of ECERT subject name was used as certificate extension in FAB 0.6 for TCert #1 implementation for linkability perspective , AFAIK. For TCert option #2 , we are not planning on doing that and hence toggle is being set for generating extension for TCert option 1 or option 2.
 

;;;","30/Mar/18 12:08 AM;skarim;Closing out, TCerts will no longer be implemented;;;",,,,,,,,,,,,,,,,,
"As an admin of MS, I can IMMEDIATELY* REVOKE any granted rights/permission granted to rogue/non-compliant users",FABC-622,12525,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,JonathanLevi,JonathanLevi,23/Aug/16 3:34 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,28/Nov/18 12:14 AM,,,,,,,,,,,,,0,MembershipServices,Usability,,,,"As an admin of Membership Services (server/servers/cluster), I have the ability to IMMEDIATELY* REVOKE privileges that I (or the MS cluster that is under my control/supervision) previously granted to a user of Fabric.

Intuitive use-case: A rogue/non-compliant user should not be able to continue to trade or transact in any form or way on the blockchain if/after the Bank-of-Z chooses to revoke such rights/permissions for one reason, or another.


IMMEDIATELY* -- to be defined (probably in terms of number of blocks)
",,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxbgn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a blockchain participate, I need a CLI to enable the membership services to run in a peer or orderer process",FABC-623,12753,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,Clayton Sims,Clayton Sims,27/Sep/16 6:17 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,17/Oct/16 10:32 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"op server enable

Enable the membership service server to run in a peer or orderer process.  It will then be started with the peer or orderer are started.
",,Clayton Sims,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-589,,,,,,,,,"1|hzx9cn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,Clayton Sims,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Oct/16 10:32 PM;smithbk;A COP server will not run in a peer or orderer;;;",,,,,,,,,,,,,,,,,,,
The ability to specify logging level using CLI of Membership Services,FABC-624,12304,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,rameshthoomu,rameshthoomu,11/Aug/16 2:47 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:41 PM,,,,,,,,,,,,,1,MembershipServices,v0.6,,,,"Currently we are able to set the logging level via the CLI (command line interface) of the *peer*:
    ex:  -e CORE_PEER_LOGGING_LEVEL=debug 
but we cannot do so for the Membership Services server.


The only way, currently, to specify the logging level is via the *membersrvc.yml*, specifically using this section:
{quote}
logging:
# Please see fabric/docs/Setup/logging-control.md for more
# options.
    server: debug
    ca: debug
    eca: debug
    ecap: debug
    ecaa: debug
    aca: debug
    acap: debug
    tca: debug
    tcap: debug
    tcaa: debug
    tlsca: debug{quote}

Indeed, we should probably add the ability to have a more flexible mechanism that is specifiable via the CLI.",,ChristopherFerris,JonathanLevi,rameshthoomu,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxbbr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,JonathanLevi,rameshthoomu,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Aug/16 3:10 AM;JonathanLevi; Thank you [~rameshthoomu] for reporting this. I have updated it slightly.;;;","13/Aug/16 7:48 AM;smithbk;Agree that we need a simple way, but you can control anything in the yaml via env variables today.  For example,
export MEMBERSRVC_CA_LOGGING_SERVER=debug
to enable debug logging for server.go
;;;","20/Aug/16 5:34 AM;ChristopherFerris;MS doesn't have a CLI, it has a binary. We should be consistent in how we treat configuration across our portfolio of tools (peer, membersrvc, chaintool, etc). To [~smithbk] point, while a bit clunky, that does work. Since most of these will be run in Docker containers, and likely via Compose, this isn't really a bad thing.  

While I agree we should be looking to make things easier, I don't know that we need to pursue this now.;;;",,,,,,,,,,,,,,,,,
Store COP enrollment artifacts in fabric friendly way,FABC-625,13760,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,11/Dec/16 7:52 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,17/Jan/17 1:25 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Instead of storing all enrollment artifacts in a single client.json file, store it in separate key and store files.  This is inline with MSP (Membership Service Provider) APIs.

The enrollment certificate is stored at `$COP_ENROLLMENT_DIR/cert.pem` by default, but a different path can be specified by setting the `COP_CERT_FILE` environment variable.

The enrollment key is stored at `$COP_ENROLLMENT_DIR/key.pem` by default, but a different path can be specified by setting the `COP_KEY_FILE` environment variable.

The default value of the `$COP_ENROLLMENT_DIR` environment variable is `$COP_HOME`.

The default value of the `$COP_HOME` environment variable is `$HOME/.cop`.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx7wn:",,,,Unset,,Sprint 7 - Memship Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Dec/16 8:03 PM;smithbk;See http://gerrit.hyperledger.org/r/3171;;;",,,,,,,,,,,,,,,,,,,
"As a peer administrator, I need a CLI to manually initialize membership services in the peer or orderer",FABC-626,12758,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,Clayton Sims,Clayton Sims,27/Sep/16 6:49 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,18/Oct/16 2:15 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"peer/orderer cop init manual <peer-ID> <keyFile> <participant.json-file>

Manually initialize membership services in the peer or orderer.  This command may be used when you have your own CA.  It is used instead of “peer/orderer init auto” when the COP server is not being used.  For example, if you want to provide your own CA for issuing ECerts and you don’t want to use TCerts, you may use this command to initialize the peer identity information manually.  In this case, the <participant.json-file> is the one produced by “cop server init manual” command.
",,Clayton Sims,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-589,,,,,,,,,"1|hzx9dr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,Clayton Sims,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Oct/16 2:15 AM;smithbk;COP will not run inside peers or orderers;;;",,,,,,,,,,,,,,,,,,,
User Registration Design,FABC-627,12474,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,19/Aug/16 1:55 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,24/Aug/16 3:16 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"User registration process has to be re-architected. Here is the google doc link for WIP : 

https://docs.google.com/document/d/14T_F0cLMXXO5VZVqtCh75OF4pUvr23XBw6pL_0hPHUg",,ashutosh_kumar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxba7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ashutosh_kumar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Aug/16 11:04 PM;ashutosh_kumar;Reopened to accommodate Chris's comments.;;;","24/Aug/16 3:16 AM;ashutosh_kumar;Design completed from MVP perspective and hence closing it. Will reopen , if we need to provide openId connect support.;;;",,,,,,,,,,,,,,,,,,
need more descriptive error,FABC-628,12599,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Low,Won't Do,,ChristopherFerris,ChristopherFerris,02/Sep/16 3:03 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:41 PM,,,,,,,,,,,,,0,MembershipServices,,,,,David.Acton: any chance we can be more specific on the error “sql: no rows in result set”?,,ChristopherFerris,denyeart,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxbrz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,denyeart,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Nov/16 3:57 AM;denyeart;Keith, I think this message came from membership services.  Not sure if it is still relevant in v1?
I do see the message in membersrvc/ca/eca_test.go.;;;","15/Apr/17 2:44 AM;mastersingh24;only relevant for v0.6 which we are no longer maintaining;;;","15/Apr/17 2:44 AM;mastersingh24;only relevant to v0.6 which we are no longer maintaining;;;",,,,,,,,,,,,,,,,,
"For privacy and security, the user may want to get Ecert based on his PublicKey.",FABC-629,13514,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,warm3snow,warm3snow,22/Nov/16 3:37 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,01/Apr/17 6:32 PM,,,,,,,,,,,,,0,MembershipServices,Security,,,,"From the code, I found Client gets both of his Ecert and corresponding PrivateKey from COP server in ""enroll"". But this process may have such problems.
  1. Client has his own Public/Private key pairs, and is more likely to get Ecert based on his own PublicKey.
  2. For privacy, Client wouldn't like COP server knows his PrivateKey, so Client wants to send (userid, OTP, publicKey) to enroll.  (OTP: one-time password)

So I think it's better to deal with this problem. Solutions I think:
1. provide two different function: 
     a). Enroll(userid, OTP):  Let COP server to generate Ecert and the corresponding PrivateKey.
     b). Enroll(userid, OTP, PublicKey): Let COP server use the PublicKey to generate Ecert.
2.  In the source code which has been already implemented, add a field like ""PubKey"":""XYZ"" in the csrJSONFILE to provide Client's PublicKey. When COP server receives the csrJSON, it checks if ""PubKey"" field exists and provides different services according to this.  ",,warm3snow,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxf3b:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,warm3snow,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
MSP implementation using the Identity Mixer core crypto package,FABC-630,20051,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mdr,dubovitskaya,dubovitskaya,09/Aug/17 6:46 PM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,14/Sep/17 3:28 AM,v1.1.0,,,,,,,,,,,11/Aug/17 12:00 AM,0,,,,,,"This is an implementation of the generic MSP interfaces that supports advanced privacy features such as unlinkability for transaction signing and selective disclosure of attributes.

The Identity Mixer (Idemix) MSP uses the Identity Mixer core crypto package instead of BCCSP to enable privacy features.

Idemix MSP is used by the clients to sign transactions and by the peers only to verify the corresponding signatures. 

Idemix MSP can be used together with the Fabric MSP by the peers.",,dubovitskaya,mdr,vjuge,,,,,,,,,,,,,,,,,,,,288000,28800,,0%,288000,28800,,,FAB-5672,FAB-6044,,,,,,FABN-85,,,,,,,,,,,,,,,,,FABC-647,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2005,,,,,,,,,"1|hzycf3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,dubovitskaya,mdr,vjuge,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Aug/17 4:54 AM;mdr;CR: https://gerrit.hyperledger.org/r/#/c/12439/;;;",,,,,,,,,,,,,,,,,,,
Document how to override membership service config with env variables,FABC-631,12878,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,smithbk,smithbk,01/Oct/16 8:17 PM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:41 PM,,,,,,,,,,,,,0,Documentation,help-wanted,MembershipServices,,,"Information similar to the following should be documented in the fabric readthedocs for membership services.

Any config element in the membersrvc file can be overridden with an environment variable.  The name of the environment variable is of the form:
       MEMBERSRVC_CA_<variable-path-in-yaml-file>
where all characters in <variable-path-in-yaml-fie> is upper-case and the separator character between elements of the path is underscore.

For example, consider the following variables in the membersrvc.yaml file:
   logging:
         server: warning
   aca:
          enabled: false

The logging server variable can be changed from ""warning"" to ""debug"" with the following environment variable:
    MEMBERSRVC_CA_LOGGING_SERVER=debug

And ACA can be enabled with the following environment variable:
    MEMBERSRVC_CA_ACA_ENABLED=true
        
",,ChristopherFerris,smithbk,v_thirugnanam,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxcnr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,smithbk,v_thirugnanam,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/17 11:42 PM;ChristopherFerris;no longer relevant;;;",,,,,,,,,,,,,,,,,,,
As an infrastructure and application developer I want to document alternative tcert key derivation schemes that can be implemented with standard PKCS#11 calls,FABC-632,12937,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,elli-androulaki,elli-androulaki,elli-androulaki,10/Oct/16 5:27 PM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,24/Oct/16 9:22 PM,,,,,,,,,,,,,0,membership,MembershipServices,security,,,"The reason for this document is to provide alternatives on TCert key-derivation that do not require HSM firmware extensions, along with their tradeoffs in terms of communication, and space overhead.",,angelo.decaro,ashutosh_kumar,elli-androulaki,mastersingh24,smithbk,v_thirugnanam,,,,,,,,,,,,,,,,,86400,86400,,0%,86400,86400,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Oct/16 5:23 PM;elli-androulaki;mserv-TCertOptions-v3.md;https://jira.hyperledger.org/secure/attachment/10137/mserv-TCertOptions-v3.md",,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxctr:",,,,Unset,,Sprint 2,Sprint 3,,,,,,,,,,,4.0,Unset,,,,,,,,,,,angelo.decaro,ashutosh_kumar,elli-androulaki,mastersingh24,smithbk,v_thirugnanam,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Oct/16 9:42 PM;mastersingh24;First, thanks for doing this [~ellaki]

One thing which we should also consider as part of this discussion is how auditing would be handled as well.
It seems that in all cases unless you put explicit trust in the ""client"" that the TCA / membership services needs to store some amount of information about the mapping between client / enrollment / tcert.   Options 1 and 3 require less long term storage than Option 2 but nonetheless storage is still required in order for an ""authority"" to release some type of material in order to ""re-link"" transactions.

If I read option 2 correctly, this is really just standard PKI except for the fact that CSRs must be signed with the long term enrollment key in order for the TCA to ""securely"" store the mapping of which tcerts where issued to which client.   But it seems that for audit purposes the TCA would need to minimally store the serial number of every tcert ever requested by a client (assuming that the auditors are not willing to rely on end clients alone to keep everything around).

I am not sure that option 3 is realistic in a multi-party, distributed environment.

So I suppose I tend to lean towards option #2 / #2.1

;;;","18/Oct/16 11:03 PM;elli-androulaki;Hi [~mastersingh24],
You are correct. Option 1 and 3 require have less space overhead on the TCA side to accommodate also auditability needs.

For option 2, to accommodate secure auditability requirements, i.e., traceability/re-linkability of a client's transactions or retrieving the identity of the owner of a certificate, without the membership service being able to frame a user, CSRs would need to be signed and stored in one or more oof these places: 
(i) inside the tcert, e.g., in an encrypted form (resulting into bigger tcerts), or 
(ii) in the TCA premise (resulting into higher space overhead on TCA side), or/and,
(iii) on the client-side (if motivated/trustworthy to do so).

If signed CSRs are stored in TCerts, no further storing of these would be needed. However, the size of TCerts would be considerably increased.

If client-auditors require that the client stores signed CSRs, having the TCA only storing the TCert numbers associated to a client tcerts would suffice. 
However, a membership service auditor may not be satisfied in this case. Here the answers that membership service would give to a client-auditor (auditor auditing a client's behavior), and to a membership service auditor should be ensured not to be contradicting. To achieve the latter, the membership service should be able to provide for each tcert issued the associated signed CSR.

I also agree with you on option 3. 

Option 2/2.1 is definitely simpler.



;;;","18/Oct/16 11:04 PM;elli-androulaki;[~smithbk], [~adc], [~ales], [~ashku] do you have any comments on this?;;;","19/Oct/16 4:30 AM;ashutosh_kumar;[~ellaki] : Thanks for putting together the document. I'll look into this by end of this week as material covered needs more time for me to comprehend. ;;;","19/Oct/16 3:26 PM;angelo.decaro;It would be interesting to see if we can reduce the number of signatures to be sent in #2 by aggregating them in some way. Schnorr (and maybe the variant EdDSA) would allow that.;;;","19/Oct/16 4:33 PM;elli-androulaki;Thanks all for your answers. 
[~adc], (though have not looked into the specifics of EdDSA) to my knowledge Schnorr is not supported with standard PKCS#11 calls.  Also, not clear to me how this could help reduce the number of signatures if not some non-standard trick on key-generation is used. May you please elaborate?;;;","19/Oct/16 4:51 PM;angelo.decaro;There is no need to trick the Schnorr key generation process in order to have signature aggregation. Also, at the end of the day Schnorr keys looks like ECDSA key, ECDSA is a variant of Schnorr. 
Bitcoin community is also exploring them. The fact that PKCS#11 does not support Schnorr signature should not limit our exploration. It is also interesting to note that ECDSA does not have a proof of security (only the variants have), instead Schnorr has. ;;;","19/Oct/16 5:11 PM;elli-androulaki;[~adc] I do not disagree with what you say in terms of exploration, or in terms of how secure Schnorr signatures are. In fact we should do research around it! 

Having said that, the aim of this jira item is to explore the **tradeoffs** of alternative tcert-key-generation designs that can be implemented **without modifying** standard HSM firmware interface (PKCS#11). Given this as requirement, do you see any direct application on EdDSA being possible, while reducing the space requirements on the TCA side? Thanks.;;;","20/Oct/16 2:55 AM;smithbk;With regard to 2/2.1 and the CSR storage options, what if the client sent both a CSR and a signed hash of CSR and the TCA puts signed hash of the CSR into the TCert?   This wouldn't increase the size of the TCert too much, but would we lose anything?;;;","20/Oct/16 3:17 PM;angelo.decaro;EdDSA, as a variant of Schnorr, has the same issues. It is not currently supported by default, unfortunately, I would add.;;;","22/Oct/16 12:21 AM;elli-androulaki;[~keithsmith] So, having the tcert including the client-signature on the content of the certificate could act as a way of ownership of a certain certificate owner. This would be essentially being equivalent to having a single CSR per TCert. Each CSR could then be included in the TCert (in an encrypted form, to avoid linkability). The problem in this case would be that you would have an increased communication overhead as the client to issue N TCerts would need to send along 2xN signatures, instead of N+1 as with following option 2 directly. ;;;","27/Oct/16 2:55 AM;smithbk;So the conclusion of all of this is that we will provide both #1 and #2 as options.  Sound correct?;;;","17/Nov/16 11:50 PM;elli-androulaki;Fine for me!;;;",,,,,,,
fabric-cop needs docker image creation in makefile,FABC-633,13863,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,20/Dec/16 9:56 PM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,21/Dec/16 10:20 AM,,,,,,,v1.0.0,,,,,,0,build-system,,,,,fabric-cop needs to be dockerized,,ChristopherFerris,ishihara.shun,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-685,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxg7j:",,,,Unset,,,,,,,,,,,,,,1.0,Unset,,,,,,,,,,,ChristopherFerris,ishihara.shun,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Dec/16 10:21 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/3423/;;;",,,,,,,,,,,,,,,,,,,
[node-SDK] add support to add user attributes via member service,FABC-634,12579,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,jimthematrix,jimthematrix,31/Aug/16 10:01 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,12/Sep/16 9:50 PM,,,,,,,,,,,,,1,MembershipServices,node-SDK,,,,"While node.js SDK today supports including attributes in TCerts, currently it requires the attributes to pre-exist in the membersrvc.yaml. So while there are APIs to register new users from a registrar member, there are NO APIs to add attributes.",,jimthematrix,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-603,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABN-690,,,,,,,,,"1|hzxauf:",,,,Unset,,Sprint 1,,,,,,,,,,,,,Unset,,,,,,,,,,,jimthematrix,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Aug/16 9:32 PM;mastersingh24;While this will end up being an SDK requirement, membership services does not actually expose an API to add attributes dynamically in the first place.  [~smithbk] please correct me in I am wrong;;;","31/Aug/16 11:53 PM;jimthematrix;[~mastersingh24]thanks for the clarification, [~smithbk] has confirmed that. I'll open a feature request on member services and make it a pre-req for this one.;;;","04/Sep/16 5:25 AM;smithbk;This has been submitted to v0.6 under
   http://gerrit.hyperledger.org/r/899 Add support for dynamically registering a user with attributes;;;","12/Sep/16 11:21 PM;jimthematrix;thanks very much for implementing this feature [~smithbk]!;;;",,,,,,,,,,,,,,,,
Investigate PKI Solution,FABC-635,12533,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,23/Aug/16 5:22 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,08/Oct/16 1:43 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Investigate CFSSL to replace Ecert Generation.
Investigate how to plug to TCert generation code
Investigate if it supports LDAP connectivity etc.
",,ashutosh_kumar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx99b:",,,,Unset,,Sprint 1,Sprint 2,,,,,,,,,,,100.0,Unset,,,,,,,,,,,ashutosh_kumar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Aug/16 3:00 AM;ashutosh_kumar;CFSSL does not integrate with LDAP out of the box.;;;","25/Aug/16 2:35 AM;ashutosh_kumar;CFSSL supports POSTgRES DB out of the box. Looking into that now. It supports MQSQL also out of the box.;;;","25/Aug/16 11:55 PM;ashutosh_kumar;Investigated CFSSL. Investigating letsencrypt now. CFSSL meets basic requirements but it is not active. letsencrypt forks CFSSL and is Linux Foundation Project.;;;","30/Aug/16 2:37 AM;ashutosh_kumar;Keith Smith is working on letsebcrypt prototype. Hence dropped this for now. Have not closed it now as I might pick it up later.;;;","08/Oct/16 1:41 AM;ashutosh_kumar;We have decided to use CFSSL libraries for Certificate management , which includes ECert and TCert generation and letsencrypt for other boundary use cases where there is need for pseudo real time domain validation in certificate creation process.;;;","08/Oct/16 1:42 AM;ashutosh_kumar;Based on above decision , moving it to complete state.;;;",,,,,,,,,,,,,,
Add COP support for tcert generation option 2,FABC-636,13869,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ashkumar,smithbk,smithbk,21/Dec/16 10:04 PM,21/Jul/18 4:15 AM,28/Oct/23 2:21 AM,22/Dec/16 12:55 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Add COP support for tcert generation option 2.

With option 2, when sending a request for a batch of N TCerts, there will be N keys generated by the client prior to sending the request.  This is the HSM friendly way of generating TCerts because the standard PCKS11 APIs can be used.",,ashutosh_kumar,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx8bj:",,,,Unset,,Sprint 7 - Memship Services,,,,,,,,,,,,,Unset,,,,,,,,,,,ashutosh_kumar,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Dec/16 10:57 PM;smithbk;This is a duplicate of https://jira.hyperledger.org/browse/FAB-763 but don't see option to cancel this or return as a dup.;;;","22/Dec/16 12:54 AM;ashutosh_kumar;This is dup of 1372. Going to close this one as marked done.;;;",,,,,,,,,,,,,,,,,,
"As an admin of MS, I can IMMEDIATELY* ""DEMOTE"" a user's role so that I can better risk manage my organization's risk/exposure",FABC-637,12527,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,JonathanLevi,JonathanLevi,23/Aug/16 3:54 AM,28/Jul/19 12:00 AM,28/Oct/23 2:21 AM,28/Nov/18 12:14 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"As an admin of Membership Services (server/servers/cluster), I have the ability to IMMEDIATELY*  ""DEMOTE"" a user's role, for example, to a CONSIDERABLY RESTRICTED role with far less privileges/capabilities.

Such update should propagate across all related Membership Services so that such update is uniformly reflected ""across the board"".

Use-case (for intuition):
Having the ability to IMMEDIATELY demote a user to a ROLE which allows him only ""read-only"" access to some trades/data 



IMMEDIATELY* – to be defined (probably in terms of number of blocks)",,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxbh3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Nov/18 12:25 AM;JonathanLevi;A sweet reminder of how young we all were back in the day... ;);;;",,,,,,,,,,,,,,,,,,,
"As Golang Application Developer , I should be able to consume TCert that I received from CoP",FABC-638,14013,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,12/Jan/17 3:36 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,19/Jul/18 10:13 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"Once Client receives TCert from Server , it should be able to perform following actions : 
# Compute Private Keys for corresponding TCerts.
# Get Attribute list from TCerts. If attribute values are encrypted , it should return decrypted values.",,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-670,FABC-675,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx7o7:",,,,Unset,,Sprint 10 - Membership Service,,,,,,,,,,,,,Unset,,,,,,,,,,,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/18 12:06 AM;skarim;Closing out, TCerts will no longer be implemented;;;",,,,,,,,,,,,,,,,,,,
CoP Server should be able to store TCerts in its repositories.,FABC-639,14009,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,12/Jan/17 2:19 AM,27/Jul/19 11:51 PM,28/Oct/23 2:21 AM,27/Jul/19 11:51 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"TCerts generated , whether using Key Derivation or Locally generated Keys , should be stored in the CoP data store. This requires : 
# Database Schema change to store TCerts.
# Hooking cli/server/tcert.go to make Database calls.
# Writing non-databse utility functions.",,ashutosh_kumar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-652,FABC-667,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx7nj:",,,,Unset,,Sprint 10 - Membership Service,,,,,,,,,,,,,Unset,,,,,,,,,,,ashutosh_kumar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide support for RSA ECerts ,FABC-640,12664,,Task,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,doublechaintech,ashutosh_kumar,ashutosh_kumar,13/Sep/16 6:41 AM,20/Feb/19 1:09 PM,28/Oct/23 2:21 AM,17/Feb/17 11:36 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"Customers might want to use existing certificate as ECert. Existing certificates might be of type RSA. Hence , RSA support is required.",,ashutosh_kumar,doublechaintech,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxbyv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,doublechaintech,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Sep/16 10:37 PM;ashutosh_kumar;RSA Signature validation is working. Need to make RSA TCert Key Pair part work.;;;","17/Feb/17 11:35 PM;ashutosh_kumar;From Crypto perespective , it is difficult to get Elliptic Curve Key from RSA. Hence closing this out.;;;","20/Feb/19 1:09 PM;doublechaintech;[~ashutosh_kumar], we have project went live with RSA eCerts, we have RSA bccsp and Java SDK, we want to work on this.;;;",,,,,,,,,,,,,,,,,
Improve COP documentation,FABC-641,13873,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,pvle@us.ibm.com,smithbk,smithbk,21/Dec/16 11:37 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,24/Jun/17 2:40 AM,,,,,,,,,,,,13/Jan/17 12:00 AM,0,MembershipServices,,,,,"Review/improve the COP README.md. 

Some thoughts include:
1) Create a table of contents at the top
2) Create a section with a table describing all fields in the server's config.json and section with a table describing the fields in csr.json.
3) Section for environment variables
4) Perhaps a ""How to section""
5) Anything else you can think of to make it as readable and easy to understand as possible",,ishihara.shun,JonathanLevi,ple8LF,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx79b:",,,,,,Sprint 7 - Memship Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,ishihara.shun,JonathanLevi,ple8LF,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Dec/16 4:48 AM;JonathanLevi;Caught up with Pho regarding this, and indeed this can be broken down to smaller tasks... and per request, should move to Sprint 8 - I am not sure I have the ability to update it myself/directly.

-- Jonathan;;;","04/Jan/17 1:05 AM;ple8LF;Table of Contents is complete.;;;","04/Jan/17 4:03 AM;ple8LF;Table describing the fields in csr.json is complete.;;;",,,,,,,,,,,,,,,,,
User attribute Map should be created for user with attributes,FABC-642,13444,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ple8LF,ashutosh_kumar,ashutosh_kumar,15/Nov/16 1:03 AM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,06/Jan/17 2:25 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"User attributes are passed as part of TCert. There should be support for attribute map to be created for user. These methods need to be supported. 
GetUserAttributes(userid ) map[string]string{
   Given the user id : Get all the attribute names and attribute values for the user.
   Create a map where attribute name is key and attribute value is the value.
   return value.
}",,ashutosh_kumar,inatatsu,ple8LF,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-700,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx7vz:",,,,,,Sprint 5 - Membership Services,Sprint 6 - Membership Services,Sprint 7 - Memship Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,inatatsu,ple8LF,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Nov/16 7:21 AM;ple8LF;GetUserAttributes function is done. The code will be checked in for review next week. ;;;","19/Dec/16 11:45 PM;ple8LF;The code is completed and being reviewed.;;;",,,,,,,,,,,,,,,,,,
JSON Processing utility,FABC-643,13205,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,26/Oct/16 10:47 PM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,21/Dec/16 9:41 PM,,,,,,,,,,,,,0,membershipservices,,,,,"In support of TCert Generation , I want JSON Utility method that performs following : 
* Read JSON file from file system and coverts it to JSON string (This will be used primarily for testing purposes)
* Retrieve values from JSON file in for key in the format a.b 
* Create golang CertificateSpec object from Input json
* Create Attribute map from Attributes that are being supplied in the Request json.




* 
* 
* ",,ashutosh_kumar,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx82f:",,,,,,Sprint 5 - Membership Services,Sprint 6 - Membership Services,Sprint 7 - Memship Services,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Nov/16 12:13 AM;ashutosh_kumar;Dropping it from list as this is merely a utility function.;;;","21/Dec/16 9:41 PM;smithbk;It was done differently.  I don't have privs to cancel, so just marking as done.;;;",,,,,,,,,,,,,,,,,,
Integrate Tcert process to User Database,FABC-644,13274,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,ashutosh_kumar,ashutosh_kumar,03/Nov/16 11:39 PM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,14/Dec/16 1:14 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Following are subtasks :
* Check that the Ecert has been issued to the user having User id.
* Whenever a group is created , Pre-Key has to be stored for that group.
* Retrieve PreKey for user by passing user id. Here is the flow : 
# pass user id to call , it passes back user object 
# User object should have group assigned to it. If not
# Make another call to DB to get user group info 
# Using user group , retrieve PreKey for the group.",,ashutosh_kumar,inatatsu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-700,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx82n:",,,,,,Sprint 5 - Membership Services,Sprint 6 - Membership Services,Sprint 7 - Memship Services,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,inatatsu,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Nov/16 4:10 AM;ashutosh_kumar;Following changes have to be made to existing enroll function: 
* User table has to be updated to contain certificate serial number
* When the user is registered and issues an Ecert  , the user table has to updated with serial number
[~skarim] , please make these changes. [~ple8LF] , please work with [~skarim] on above step.

User validation process is : 
* API will look like ValidateUser(username string, certificateSerialNumber bigInt/bytes) (bool , error) : error in this case will be something like DB error.
* Make a Database query using User id to retrieve serial number from User Table. Say you get *a * from this step
* Use the SerialNumber from last step to match serial number from Certificate table. Say you get *b* from this step.
* Compare b with the certificateSerialNumber being passed in the validateUser parameter. If these 2 matches , return true , else return false.;;;",,,,,,,,,,,,,,,,,,,
"As an administrator, I need a CLI to submit a depart request",FABC-645,12663,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Won't Do,,smithbk,smithbk,13/Sep/16 4:32 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:41 PM,,,,,,,,,,,,,0,MembershipServices,,,,,Submitting a depart request is the opposite of submitting a join request.  This is submitting a request to vote someone off the island.,,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-615,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx9ef:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Sep/16 9:42 PM;mastersingh24;[~smithbk] I changed ""remote"" to ""remove"" in the summary as I assume that's what you meant.

If not, really interested in what ""dynamically remote"" would mean  :P;;;","21/Oct/16 9:56 PM;smithbk;This can be canceled as it is included in FAB-460.;;;","03/Jun/17 7:10 PM;mastersingh24;N/A;;;",,,,,,,,,,,,,,,,,
Add support for serial number to users table in database,FABC-646,13314,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,05/Nov/16 4:39 AM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,14/Dec/16 1:14 AM,,,,,,,,,,,,,0,MembershipServices,,,,,During enroll the certificates table is updated by CFSSL. Need to store corresponding certificate serial number for the user being enrolled in the users table as well to allow for lookup in certificates table. ,,skarim,,,,,,,,,,,,,,,,,,,,,,57600,57600,,0%,57600,57600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx82v:",,,,,,Sprint 5 - Membership Services,Sprint 6 - Membership Services,Sprint 7 - Memship Services,,,,,,,,,,2.0,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Documenting semantics of idemix msp,FABC-647,20506,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,mdr,mdr,29/Aug/17 10:02 PM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:40 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"Currently, when calling validating an identity using the idemix msp, it does not verify any cryptographic material. This is because a signature also 'contains' the certificate, whereas with x509 the certificate is individually verified in validate(). When first calling validate and later verifying signatures with an identity, both the msp-impl and idemixmsp give the guarantee that the messages were signed by members that were issued a credential. However, if you only call validate without later verifying a signature, the behavior might be different. While we're not aware of any code that does that and cannot think of a use case of this, we should still document this difference.",,dubovitskaya,mdr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-630,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2005,,,,,,,,,"1|hzyer3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dubovitskaya,mdr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Oct/17 10:48 PM;dubovitskaya;Since we implemented Validate() with cryptographic verification (FAB-6044), this issue is not needed anymore - there is no difference to document.

https://jira.hyperledger.org/browse/FAB-6044.;;;",,,,,,,,,,,,,,,,,,,
Crypto Support for HSM Friendly TCert generation,FABC-648,13886,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,23/Dec/16 11:23 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,19/Jul/18 10:14 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"Fabric-CA server receives batch of Signed Public Key from client. CoP server needs to : 
* Validate each signature block corresponding to each public key.

The Signature validation is performed by using BCCSP APIs/Libraries.
",,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-621,,,,,,,,,,,,,,,,,FABC-544,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx78f:",,,,,,Sprint 9 - Membership Services,Sprint 10 - Membership Service,Sprint 12 - Membership Service,Sprint 13 - Membership Service,Sprint 14 - Membership Service,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Dec/16 6:26 AM;ashutosh_kumar;Had to rework as I made mistake in last attempt. Also need to integrate with BCCSP. Hence moved status from In Progress to To Do.;;;","28/Dec/16 4:42 AM;ashutosh_kumar;Will attempt to check-in code within Sprint 8 time frame. Not sure , review will be performed before that. Hence moving to Sprint 9.;;;","06/Jan/17 1:13 AM;ashutosh_kumar;Option 2 design can be found here : https://jira.hyperledger.org/secure/attachment/10360/mserv-TCertOptions-v3(1).md. Look for section : *Approach 2. Use of TCert keys that are not associated to ECert keys* in the document attached.

Option 2 implementation details can be found at https://jira.hyperledger.org/browse/FAB-1372
;;;","09/Jan/17 11:53 PM;ashutosh_kumar;implementation is at : 
https://gerrit.hyperledger.org/r/#/c/3539/. This is under review.;;;","30/Mar/18 12:07 AM;skarim;Closing out, TCerts will no longer be implemented;;;",,,,,,,,,,,,,,,
Add license headers to COP files,FABC-649,13320,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,06/Nov/16 3:02 AM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,21/Dec/16 11:52 PM,,,,,,,,,,,,,0,MembershipServices,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxe4n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Nov/16 3:04 AM;smithbk;http://gerrit.hyperledger.org/r/2267;;;",,,,,,,,,,,,,,,,,,,
COP server should call BCCSP APIs where appropriate,FABC-650,13172,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,smithbk,smithbk,26/Oct/16 2:39 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,08/Jun/17 1:55 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Once BCCSP APIs are merged, change the following functions to call BCCSP APIs:
1) fabric/cop/lib/defaultImpl/client.go, the genCSR function should call BCCSP to generate the key pair",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx793:",,,,,,Sprint 7 - Memship Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Jun/17 1:56 AM;smithbk;BCCSP integration was completed for fabric-ca-server and fabric-ca-client;;;",,,,,,,,,,,,,,,,,,,
"As an administrator, I need a CLI to deny a join request",FABC-651,12764,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Won't Do,,Clayton Sims,Clayton Sims,27/Sep/16 6:55 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:41 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"cop client denyJoinRequest <joinRequestId>

Denies a join request.
",,Clayton Sims,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-659,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx8bz:",,,,,,Sprint 6 - Membership Services,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Oct/16 9:54 PM;smithbk;This can be canceled as it is included in FAB-460.;;;","25/Oct/16 5:45 AM;smithbk;Changed to a task under FAB-460;;;","03/Jun/17 7:09 PM;mastersingh24;N/A;;;",,,,,,,,,,,,,,,,,
Extend Database Schema to support TCert Database operation,FABC-652,14010,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,ashutosh_kumar,ashutosh_kumar,12/Jan/17 2:28 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,19/Jul/18 10:13 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"The Database schema has to be extended to Support TCert. Currently , it supports ECERT only.

",,ashutosh_kumar,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-639,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7nr:",,,,,,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Jan/17 12:03 PM;smithbk;We just need to add a field to distinguish between an ecert and tcert.  We've already added a field to the cert DB for the enrollment ID so adding another field will be easy.;;;","30/Mar/18 12:10 AM;skarim;Closing out, TCerts will no longer be implemented;;;",,,,,,,,,,,,,,,,,,
Define membership services related CLI and APIs for v1,FABC-653,12690,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,smithbk,smithbk,14/Sep/16 1:00 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:40 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"Define membership services related CLI and APIs for v1.

See section 4 of https://docs.google.com/document/d/1mQj-MD47EKAN1AqnISqjL5CBiEBpBlZ9nCe3ls-LGTY/edit# for the CLI commands and fabric/membersrvc/interface.go for the initial version of the interfaces",,mastersingh24,smithbk,v_thirugnanam,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-589,,,,,,,,,,,,,,,,,,,,,,,,"19/Sep/16 6:52 AM;smithbk;interfaces.go;https://jira.hyperledger.org/secure/attachment/10091/interfaces.go",,,,,,,,,,,,,,,,,FABC-589,,,,,,,,,"1|hzxbnb:",,,,,,Sprint 1,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,smithbk,v_thirugnanam,,,,,,,,,,,,,,,,,,,feature/ca,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Sep/16 6:51 AM;smithbk;See interfaces.go for a description of the API design;;;","15/Apr/17 2:32 AM;mastersingh24;this work was done before moving to the fabric-ca.  marking as WON'T FIX;;;",,,,,,,,,,,,,,,,,,
Error and log messages clean up,FABC-654,12488,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,JonathanLevi,JonathanLevi,20/Aug/16 4:53 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:40 PM,,,,,,,,,,,,22/Aug/16 12:00 AM,0,help-wanted,MembershipServices,Usability,,,"We should scan the Membership Services project and update several annoying (old?) references to OBC, Openchain, etc.",,JonathanLevi,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxbbb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JonathanLevi,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Apr/17 3:06 AM;mastersingh24;no longer relevant as this was about v0.6 which is no longer maintained;;;",,,,,,,,,,,,,,,,,,,
"As an Administrator, I need a CLI to update the join policy associated with a group for a specific operation. ",FABC-655,12766,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Won't Do,,Clayton Sims,Clayton Sims,27/Sep/16 6:57 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:40 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"cop client updateJoinPolicy { add | remove | updatePolicy } <policyString>
Update the join policy associated with a group for a specific operation.  The <policyString> may be something like the following:
“unanimous” if all current members must agree before the operation is performed
“percentage 50” if 50% of the current group members must agree
“identity <cert>” if it must be approved by a single identity
",,Clayton Sims,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-659,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx9ev:",,,,,,Sprint 7 - Memship Services,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Oct/16 9:55 PM;smithbk;This can be canceled as it is included in FAB-460.;;;","25/Oct/16 5:47 AM;smithbk;Changed to task under FAB-460;;;","21/Dec/16 9:50 PM;smithbk;This and other FAB items which relate to managing roots of trust are not being doing by the COP team.
Instead, this may be part of a value-add application on top of fabric.;;;","03/Jun/17 7:08 PM;mastersingh24;N/A;;;",,,,,,,,,,,,,,,,
Don't open server port until server bootstrapping has been completed,FABC-656,13373,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,skarim,skarim,skarim,09/Nov/16 7:09 AM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,06/Mar/17 11:53 PM,,,,,,,,,,,,,0,MembershipServices,,,,,Prevent access to server until the server has completely finished up its start up sequence and all the appropriate database have been created and bootstrapped. ,,skarim,,,,,,,,,,,,,,,,,,,,,,120,120,,0%,120,120,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxed3:",,,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Incorporate database configuration as part of server config,FABC-657,13417,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,11/Nov/16 4:52 AM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,23/Nov/16 1:23 AM,,,,,,,,,,,,,0,MembershipServices,,,,,Currently there is a database configuration file and a server configuration file. Move all the necessary information need from database config over to server to config. This will eliminate the need for having two configuration files and provide a better user experience.,,skarim,,,,,,,,,,,,,,,,,,,,,,57600,57600,,0%,57600,57600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxepb:",,,,,,Sprint 5 - Membership Services,,,,,,,,,,,,2.0,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
"As an application developer , I want to generate TCert locally based on ECert that I have or got from CoP sevice",FABC-658,13207,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,26/Oct/16 11:27 PM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,21/Dec/16 12:45 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"As an application developer , I want to generate TCert locally based on ECert that I have or received from CoP server.

If I have ECert , PreKey and signing CA key and Certificate then I can generate TCert Certificate. If I have access to my local CA key and certificate , I can get TCert Signed by CA.",,ashutosh_kumar,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Oct/16 10:57 PM;ashutosh_kumar;TCertRequest.json;https://jira.hyperledger.org/secure/attachment/10200/TCertRequest.json",,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx9en:",,,,,,Sprint 7 - Memship Services,,,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,smithbk,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Dec/16 5:27 AM;ashutosh_kumar;see the Gerritt : http://gerrit.hyperledger.org/r/3309;;;","16/Dec/16 7:32 AM;smithbk;See https://gerrit.hyperledger.org/r/#/c/3351/1;;;","16/Dec/16 7:32 AM;smithbk;See https://gerrit.hyperledger.org/r/#/c/3353;;;",,,,,,,,,,,,,,,,,
"As an administrator, I need a CLI to submit a join request",FABC-659,12761,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Won't Do,,Clayton Sims,Clayton Sims,27/Sep/16 6:53 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,29/Sep/18 4:31 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Implement ""cop client submitJoinRequest"" as described in https://docs.google.com/document/d/1TRYHcaT8yMn8MZlDtreqzkDcXx0WI50AV2JpAcvAM5w/edit#

",,Clayton Sims,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-651,FABC-655,,,,,,FABC-697,FABC-615,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx8cf:",,,,,,Sprint 6 - Membership Services,,,,,,,,,,,,8.0,,,,,,,,,,,,Clayton Sims,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jun/17 7:07 PM;mastersingh24;N/A;;;",,,,,,,,,,,,,,,,,,,
TCert Crypto operations should be based on BCCSP,FABC-660,13277,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,vpaprots,ashutosh_kumar,ashutosh_kumar,04/Nov/16 12:14 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,19/Jul/18 10:14 PM,,,,,,,,,,,,,0,MembershipServices,,,,,The ECDSA Sign and ECDSA verifiy used within TCert should be based on BCCSP. ,,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2182,,,,,,,FABC-700,FABC-468,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx78n:",,,,,,Sprint 5 - Membership Services,Sprint 6 - Membership Services,Sprint 7 - Memship Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,Sprint 10 - Membership Service,Sprint 11 - Membership Service,Sprint 12 - Membership Service,Sprint 13 - Membership Service,Sprint 14 - Membership Service,Sprint 15 - Membership Service,,,,,,,,,,,,,,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Nov/16 12:15 AM;ashutosh_kumar;There is dependency on BCCSP being available.;;;","13/Dec/16 2:57 AM;ashutosh_kumar;Assigned it to Vlad,;;;","21/Jan/17 12:50 AM;ashutosh_kumar;assigned it back to me.
;;;","18/Feb/17 2:20 AM;ashutosh_kumar;TCert Generation with no Key Derivation has been implemented. Partial implementation for TCert generation with key derivation has been done. Assigning it back to Vlad as he has some cycles now.;;;","30/Mar/18 12:09 AM;skarim;Closing out, TCerts will no longer be implemented;;;",,,,,,,,,,,,,,,
Create test outline for all COP existing/future server functions,FABC-661,13750,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,10/Dec/16 5:34 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,06/Jul/18 10:49 PM,,,,,,,,,,,,13/Dec/16 12:00 AM,0,MembershipServices,Security,,,,"Create a list of one line test objectives for certificate creation, usage, validation, tolerance and/or support of standard specifications and general practice recommendations.",,bmos299,ChristopherFerris,latitiah,rennman,,,,,,,,,,,,,,,,,,,144000,115200,,0%,144000,115200,,,,,,,,,,FAB-1432,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1017,,,,,,,,,"1|hzx7an:",,,,,,Sprint 8 - Membership Services,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,bmos299,ChristopherFerris,latitiah,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Dec/16 3:26 AM;latitiah;In checking for possible gaps, these were the issues that were marked as done as of 12/26/2017. I figured that I'd put them here for reference, just in case it's helpful.

Keith:
* FAB-1460: Add COP support for tcert generation
* FAB-1147: COP certificate renewal
* FAB-1144: COP LDAP integration
* FAB-1132: Error messaging from COP CLI
* FAB-989: Add license headers to COP files
* FAB-809: JSON token authentication support for COP APIs
-- REST apis?? JWT-JSON Web Token
* FAB-807: Define the proto for trusted root certificates and CRL for config change
* FAB-456: Enroll a peer
* FAB-454: Start a COP server (CLI)

Saad:
* FAB-1294: Extend CFSSL DB accessor to support adding enrollment ID to certificates table
* FAB-1086: Incorporate database configuration as part of server config
* FAB-983: Add certificate serial number to users table
* FAB-943: Integrate tcert process to user DB
# Check that the Ecert has been issued to the user having User id.
# Whenever a group is created, Pre-Key has to be stored for that group.
# Retrieve PreKey for user by passing user id. Here is the flow:
a. pass user id to call, it passes back user object
b. User object should have group assigned to it. If not make another call to DB to get user group info
c. Using user group, retrieve PreKey for the group.
* FAB-862: enroll user with username and password to COP server
* FAB-455: user registration info must be stored in CFSSL's DB

Ashutosh:
* FAB-876: Generate local tcert based on ecert used with the COP service
* FAB-874: JSON processing utility:
# Read JSON file from file system and coverts it to JSON string
# Retrieve values from JSON file in for key in the format a.b
# Create golang CertificateSpec object from Input json
# Create Attribute map from Attributes that are being supplied in the Request json.
* FAB-873: Crypto support for tcert generation
-- https://gerrit.hyperledger.org/r/#/c/3281/

Pho:
* FAB-836: Generate Token and verify token
* FAB-449: COP initializer (CLI)
* FAB-392: ACA combined with TLS
-- Allen would also know about this

Elli:
* FAB-635: document alternative tcert key derivation schemes that can be implemented with standard PKCS#11 calls
;;;","10/Apr/17 9:36 PM;ChristopherFerris;[~latitiah] [~rennman] this hasn't been updated in a while. What is the status, please? [~bmos299];;;","10/Apr/17 11:15 PM;bmos299;[~rennman] you have a lot of work in our google test doc at: https://docs.google.com/spreadsheets/d/1_IdXCuYMKkqXr3Za0pVnFP3sP1jBcNbYnTJGV-nSkxI/edit#gid=1540473089.  I think there are few items we can add to it and post to this item?
What do you think?
;;;",,,,,,,,,,,,,,,,,
Crypto Support for TCert Generation,FABC-662,13204,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,26/Oct/16 10:26 PM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,14/Dec/16 10:52 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"Following crypto support is needed for TCert Lib work : 
* RSA Signature (over byte and then put into Signature JSON format)
* ECDSA Signature (over byte and then put into Signature JSON format)
* SignatureVerify. This method takes JSON as input and based on certificate type  calls corresponding method for ECDSA or RSA Signature.
* ECDSA verify (over byte array)
* RSA verify (over byte array)
* CA Signed Ceritificate
* CBCEncrypt(Based on PKCS7) and
* CBCDecrypt(Based on PKCS7)

CBCEncrypt and CBCDecrypt method has been copied from core/crypto/primtive. Above mentioned methods will be replaced by BCCSP Library when that is ready.

",,ashutosh_kumar,inatatsu,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-700,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx827:",,,,,,Sprint 5 - Membership Services,Sprint 6 - Membership Services,Sprint 7 - Memship Services,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,inatatsu,smithbk,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Dec/16 10:51 PM;smithbk;See https://gerrit.hyperledger.org/r/#/c/3281/;;;",,,,,,,,,,,,,,,,,,,
Define the proto for trusted root certificates and CRL for config change,FABC-663,13112,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,21/Oct/16 11:01 PM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,07/Nov/16 10:32 PM,,,,,,,,,,,,27/Oct/16 12:00 AM,0,MembershipServices,,,,,"The proto messages to define this API have not yet been merged.  Once merged, they can be found in fabric/orderer/atomicbroadcast/ab.proto.  (They are currently at https://gerrit.hyperledger.org/r/#/c/1487/8/orderer/atomicbroadcast/ab.proto).

Updating the fabric's trusted root certificates and/or CRL is done via a Transaction of type ""ConfigurationEnvelope"", which contains multiple ""ConfigurationEntry"" messages, which contains a ""Configuration"".
To update a certificate list in a ""Configuration"" message, the fields are as follows.  Other fields not mentioned are the same as for any Configuration message and are discussed in FAB-665.   But to update any of the 3 certificate lists, set:
1) ID = ""cert""
2) Type = ""Chain""
3) Data is CertList, where
bq.       message CertList {
bq.            enum CertListType   { peer, orderer, crl }          
bq.            repeated bytes Certs
bq.       }

There will be 3 lists of certs: peers, orderers, and a CRL list.
When adding/removing an entry from the CRL list, a config update signature must be one of:
1) the certificate being revoked (i.e. you may revoke your own certificate)
2) one of the issuers of the certificate  (i.e. someone who issued the certificate may revoke it)

",,smithbk,v_thirugnanam,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-615,FABC-613,,,,,,,,,,,FAB-665,FAB-964,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx9db:",,,,,,Sprint 2,Sprint 4 - Membership Services,,,,,,,,,,,1.0,,,,,,,,,,,,smithbk,v_thirugnanam,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create wrapper scripts to support starting various HA cop server scenarios,FABC-664,13751,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rennman,rennman,rennman,10/Dec/16 5:41 AM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,02/Mar/17 3:31 AM,,,,,,,v1.0.0,,,,,13/Dec/16 12:00 AM,0,MembershipServices,Security,,,,"Using a combination of docker images for haproxy, postgres, mysql, and cop server, create scripts that simplify the user experience of testing multiple scenarios. This includes ability to start, initialize, reset, query, the servers and databases; registering, enrolling users; displays and statistics of the running daemon instances; parsing/display/validation of generated certificates.",,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,288000,144000,,0%,288000,144000,,,,,,,,,,FAB-1432,,,,,,,,,,,,FAB-113,FABC-35,,,,FABC-127,,,,,,,,,,,,,,,,,,,,,,,,FAB-1017,,,,,,,,,"1|hzxfpj:",,,,,,Sprint 7 - Quality,,,,,,,,,,,,,,,,,,,,,,,,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Dec/16 9:43 PM;smithbk;Allen, please add openldap server to this.;;;","21/Dec/16 9:45 PM;smithbk;See the fabric-cop/scripts/run_ldap_tests script to help;;;",,,,,,,,,,,,,,,,,,
"As an administrator, I need a CLI to list all join requests",FABC-665,12762,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Won't Do,,Clayton Sims,Clayton Sims,27/Sep/16 6:54 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:40 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"cop client listJoinRequests
Lists all current join requests along with a unique <joinRequestId>.
",,Clayton Sims,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-615,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx8c7:",,,,,,Sprint 6 - Membership Services,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Oct/16 9:43 PM;smithbk;This can be canceled as it is included in FAB-460.;;;","25/Oct/16 5:38 AM;smithbk;Just made this a task under FAB-460;;;","03/Jun/17 7:08 PM;mastersingh24;N/A;;;",,,,,,,,,,,,,,,,,
"As an administrator, I need a CLI to approve a join request",FABC-666,12763,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Won't Do,,Clayton Sims,Clayton Sims,27/Sep/16 6:55 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:40 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"cop client approveJoinRequest <joinRequestId>
Approves the join request.
",,Clayton Sims,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-615,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx8br:",,,,,,Sprint 6 - Membership Services,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Oct/16 9:45 PM;smithbk;This can be canceled as it is included in FAB-460.;;;","03/Jun/17 7:09 PM;mastersingh24;N/A;;;",,,,,,,,,,,,,,,,,,
Provide Utility Support for TCert Database Operation,FABC-667,14012,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,12/Jan/17 3:23 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,19/Jul/18 10:13 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"Utility function should provide TCert Database operation. Initially , here is what comes to my mind initially : 
# From TCertResponse message , get list of Certificates.
# Update TCert Database with certs obtained in previous step.

I'll add to this list , whatever comes to my mind.
",,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-639,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7nz:",,,,,,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/18 12:08 AM;skarim;Closing out, TCerts will no longer be implemented;;;",,,,,,,,,,,,,,,,,,,
Integration to Identity API Definitions,FABC-668,13276,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ple8LF,ashutosh_kumar,ashutosh_kumar,03/Nov/16 11:47 PM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,05/Jan/17 7:18 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Here is the breakup:
*     Define Structure for GetPrivateSignersRequest
*     Integrate from Client to Server.
",,ashutosh_kumar,ple8LF,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-700,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx7vr:",,,,,,Sprint 5 - Membership Services,Sprint 6 - Membership Services,Sprint 7 - Memship Services,Sprint 8 - Membership Services,Sprint 9 - Membership Services,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,ple8LF,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Nov/16 7:50 AM;ple8LF;Update:

Structure definition for GetPrivateSignersRequest() is done. Need to add attributes to TCert. The work for retrieving attributes from database is done in FAB-1112. 

The integration from Client to Server needs attributes on TCert. This is expected to be done on Monday and that will also complete FAB-945.;;;","16/Dec/16 11:39 PM;ple8LF;The code for tcert generation and integration to Identity API is done and being reviewed.;;;",,,,,,,,,,,,,,,,,,
"As an administrator, I need a CLI to list the current participates ",FABC-669,12765,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Won't Do,,Clayton Sims,Clayton Sims,27/Sep/16 6:56 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:40 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"cop client listParticipants
Lists the current participants in the blockchain network.
",,Clayton Sims,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-615,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx8cn:",,,,,,Sprint 6 - Membership Services,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Oct/16 9:55 PM;smithbk;This can be canceled as it is included in FAB-460.;;;","25/Oct/16 5:46 AM;smithbk;Changed to task under FAB-460;;;","03/Jun/17 7:09 PM;mastersingh24;N/A;;;",,,,,,,,,,,,,,,,,
"As an application Developer , I should be able to compute TCert Private Key ",FABC-670,14016,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,12/Jan/17 4:08 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,19/Jul/18 10:13 PM,,,,,,,,,,,,,0,MembershipServices,,,,,Private Key should be computed for the each TCert that client received from CoP server.,,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-638,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx7of:",,,,,,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/18 12:07 AM;skarim;Closing out, TCerts will no longer be implemented;;;",,,,,,,,,,,,,,,,,,,
Integration of HSM friendly TCert generation to Fabric-CA client and Server,FABC-671,13887,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,23/Dec/16 11:31 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,19/Jul/18 10:13 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"HSM Friendly TCert Generation process should be linked to Fabric-CA Server and Fabric-CA client. Fabric-CA server will perform following : 
* Perform Signature validation on batch of signatures
* Call TCert library API with Batch of Public Keys and Attribute List (if needed.)",,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-621,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx7av:",,,,,,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Dec/16 6:14 AM;ashutosh_kumar;I can submit code before sprint 8, but it'll not be reviewed. Hence moving to sprint 9.

Implementation can be seen at https://gerrit.hyperledger.org/r/#/c/5139/;;;","06/Jan/17 1:14 AM;ashutosh_kumar;Option 2 design can be found here : https://jira.hyperledger.org/secure/attachment/10360/mserv-TCertOptions-v3(1).md. Look for section : Approach 2. Use of TCert keys that are not associated to ECert keys in the document attached.

Option 2 implementation details can be found at https://jira.hyperledger.org/browse/FAB-1372

Following actions will be taken : 
# Perform Signature validation over batch of signatures
# Call TCert API to get batch of TCerts;;;","30/Mar/18 12:07 AM;skarim;Closing out, TCerts will no longer be implemented;;;",,,,,,,,,,,,,,,,,
"As an Application Developer , I should be able to get batch of tcerts in HSM friendly way if I have all necessary input",FABC-672,13888,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,24/Dec/16 1:13 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,19/Jul/18 10:13 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"The ""HSM friendly way"" of generating TCerts is a method which does not require use of a key derivation function.
Instead, the client effectively generates a CSR (Certificate Signing Request) for each TCert which is to be issued by the Fabric-CA server.
This method is not as efficient from both a performance or key storage perspective compared to the method which uses a key derivation function
to derive a TCert from an ECert.

The ""HSM friendly"" method is also known as ""option 2"" because it was labeled ""Approach 2"" in this design doc: https://jira.hyperledger.org/secure/attachment/10360/mserv-TCertOptions-v3(1).md",,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-621,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx7bb:",,,,,,Sprint 9 - Membership Services,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Dec/16 7:50 AM;ashutosh_kumar;This item is in review now.;;;","31/Dec/16 12:08 AM;ashutosh_kumar;Seems like code cannot be merged today , hence moving to Sprint 9.;;;","06/Jan/17 1:12 AM;ashutosh_kumar;Option 2 design can be found here : https://jira.hyperledger.org/secure/attachment/10360/mserv-TCertOptions-v3(1).md. Look for section : *Approach 2. Use of TCert keys that are not associated to ECert keys* in the document attached.

Option 2 implementation details can be found at https://jira.hyperledger.org/browse/FAB-1372;;;","09/Jan/17 11:53 PM;ashutosh_kumar;implementation is at :
https://gerrit.hyperledger.org/r/#/c/3539/. This is under review.;;;","30/Mar/18 12:10 AM;skarim;Closing out, TCerts will no longer be implemented;;;",,,,,,,,,,,,,,,
Improve error message reporting on COP CLI,FABC-673,13464,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,17/Nov/16 12:19 AM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,21/Nov/16 6:55 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"The error messages reported from the COP CLI was printing garbage.
For example, 
   cop client enroll <user> <pass> <cop-server>
would print trailing garbage and not give useful info if the user is already enrolled.

See http://gerrit.hyperledger.org/r/2531",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxex3:",,,,,,Sprint 5 - Membership Services,,,,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Generate Token and verify token,FABC-674,13141,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ple8LF,ple8LF,ple8LF,25/Oct/16 12:22 AM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,19/Nov/16 1:52 AM,,,,,,,,,,,,,0,MembershipServices,,,,,Generate Token and verify token,,ple8LF,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-692,FABC-610,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx8in:",,,,,,Sprint 3,Sprint 4 - Membership Services,Sprint 5 - Membership Services,,,,,,,,,,1.0,,,,,,,,,,,,ple8LF,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Oct/16 7:26 AM;ple8LF;CreateToken and VerifyToken are complete for both ECDSA and RSA. The functions are in fabric/cop/util/util.go
Test cases are in  fabric/cop/util/util_test.go.

Please see change ID: I31fdb8464c92e616cbb9c8e217fdff11d3a547cf;;;",,,,,,,,,,,,,,,,,,,
I should be able to get decypted value of attributes within TCerts,FABC-675,14005,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Invalid,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,11/Jan/17 5:56 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,19/Jul/18 10:13 PM,,,,,,,,,,,,,0,MembershipServices,,,,,"Given the TCert , the API should be able to produce array of Attribute Name and Value.",,ashutosh_kumar,fredbi,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-638,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-697,,,,,,,,,"1|hzx7nb:",,,,,,Sprint 10 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,fredbi,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Jan/17 4:14 AM;ashutosh_kumar;This will be two step process : 
1) Caller will instantiate AttributeManager by passing cert bytes and (optionally) key map object. Key map object will be passed in the case of attributes being encrypted.
2) Caller will have access to the method GetNames() which returns array of attribute names and 
     GetValue(attrName string) , which will return attribute value(encrypted or unencrypted) for the attribute.

It is being implemented in Gerritt  : https://gerrit.hyperledger.org/r/#/c/4027/;;;","17/Jan/17 11:42 PM;ashutosh_kumar;Moved comment to main comment section.;;;","30/Mar/18 12:08 AM;skarim;Closing out, TCerts will no longer be implemented;;;",,,,,,,,,,,,,,,,,
Extend CFSSL DB accessor to support adding enrollment ID to certificates table,FABC-676,13701,,Task,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,skarim,skarim,skarim,07/Dec/16 6:54 AM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,21/Dec/16 8:17 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Extend CFSSL DB accessor to support adding enrollment ID to certificates table. A column in the certificates table will be added for enrollment ID, each certificate will have an ID associated with it. ",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxfkn:",,,,,,Sprint 7 - Memship Services,,,,,,,,,,,,4.0,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Enroll member request fails with signature verification,FABC-677,12668,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,,malik-altaf,malik-altaf,13/Sep/16 9:59 AM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,23/Sep/16 3:57 AM,,,,,,,,,,,,,0,MembershipServices,Security,,,,"When we try to enroll a user, the call to membersrvc fails with ""Signature verification failed"" message. Further investigation shows that the unmarshalling of signature R and S fields is not working correctly on lines 170-171 of ecap.go:
 r.UnmarshalText(sig.R)
 s.UnmarshalText(sig.S)

After these statement if we add a debug, we find that the value of r and s is still 0. If we change these lines to :
 r.SetBytes(sig.R)
 s.SetBytes(sig.S)

the user is enrolled correctly. Can you please provide a fix for this issue or advise any work-around?

",,malik-altaf,muralisr,Pardha,satheeshk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxbzj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,malik-altaf,muralisr,Pardha,satheeshk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Sep/16 11:28 AM;malik-altaf;Same problem with Register User as well;;;","16/Sep/16 4:00 AM;muralisr;Pardha brought this to my attention...

It does seem strange (to me at least :-)) that Unmarshall can be simply replaced with SetBytes to make it work. Without too much digging in I'd say somehow unmarshal has been done upstream. 

[~jimthematrix]  [~mastersingh24] can you comment please ?;;;","16/Sep/16 9:48 AM;malik-altaf;If it helps, the Signature struct is defined in ca.pb.go as:
type Signature struct {
	Type CryptoType `protobuf:""varint,1,opt,name=type,enum=protos.CryptoType"" json:""type,omitempty""`
	R    []byte     `protobuf:""bytes,2,opt,name=r,proto3"" json:""r,omitempty""`
	S    []byte     `protobuf:""bytes,3,opt,name=s,proto3"" json:""s,omitempty""`
}

which is the same what we got when converted protofile to java class. My understanding is that at some point the proto definition was changed to use byte[] but the code using that was not.;;;","22/Sep/16 10:00 PM;malik-altaf;I found a way to send a byte[] that gets Unmarshalled properly, the solution is no longer needed.

Please close this issue;;;","23/Sep/16 3:58 AM;Pardha;Marked as ""done"" as per Altaf's comment;;;",,,,,,,,,,,,,,,
If initial logon on fails subsequent logon fails even with correct pw,FABC-678,13424,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Won't Do,,Clayton Sims,Clayton Sims,12/Nov/16 5:41 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:39 PM,v0.6,,,,,,,,,,,,0,membershipservices,,,,,"I followed the external instructions posted on IBM docker hub v0.6.   I start up a single node network.   If I log on using this CLI with incorrect pw ->  'peer network login test_user0 -p xxxxxxxxx' it fails as expected.  If I then log on with correct pw 'peer network login test_user0 -p MS9qrN8hFjlE' it fails which is not expected

Note this is on v0.6.  If this is specific to v0.6 then priority would be very low otherwise it would be high. 

",,Clayton Sims,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxeqn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Node SDK: after chain.registerAndEnroll a user, record inserted in eca.db shows registrar",FABC-679,12353,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,Nishi,Nishi,13/Aug/16 4:18 AM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,13/Aug/16 7:34 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Following request was sent  to register a new user (non-existing in membersrvc.yaml):

 var registrationRequest = {
           enrollmentID: ""Insurer2"",
           attributeName: ""auctionRole"",
           attributeValue: ""IN"",
           affiliation: ""AuctionTrade""
   };
                          
chain.registerAndEnroll(registrationRequest,function(err, user) {
       if (err) throw Error("" Failed to register and enrol: ""+err);
       console.log(""Register And Enroll Insurer:"", user)
  })       

Expected Result:
-------------------
User to be created  and record inserted in eca.db with all the attributes from registration request above, for this new user.

Actual Result:
----------------------
Record created in eca.db has ""registrar"" in it as follows:
42|Insurer2|Insurer2\AuctionTrade|1|{""registrar"":{}}|tzVQGmMlIwnJ|2|0Y0*▒H▒*▒H▒=B",,Nishi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxaqf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Nishi,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Aug/16 7:34 AM;smithbk;This is working as designed currently.  Note that the value of the registrar attribute is {}, which means the user does NOT have registrar authority.  Also, we do not support dynamic registration of users with attributes today. ;;;",,,,,,,,,,,,,,,,,,,
"A minor bug with CA API--ReadCertificatePair(ECertReadReq) returns (CertPair);",FABC-680,13250,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,Hangyu_FJH,Hangyu_FJH,Hangyu_FJH,01/Nov/16 11:52 AM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,08/Feb/17 3:12 PM,,,,,,,v0.6,,,,,,0,MembershipServices,,,,,"When trying to read certificatepare using the API ReadCertificatePair, nothing can be pulled out from the database. The function ""ReadCertificatePair"" in fabric/membersrvc/ca/ecap.go indicates that only one columns-- ""cert"" should be returned, but instead, there are two columns-- ""cert, kdfkey"" being read out at function ""readCertificates"" of fabric/membersrvc/ca/ca.go. This results an error in the rows.Scan(&raw) which led to the results described in the beginning. ",,Hangyu_FJH,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxdt3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Hangyu_FJH,,,,,,,,,,,,,,,,,,,,,v0.6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
ACA combined with TLS fails,FABC-681,12693,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,pvle@us.ibm.com,rennman,rennman,14/Sep/16 10:58 AM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,17/Oct/16 7:16 PM,v0.6,,,,,,v0.6,,,,,,0,.6,MembershipServices,,,,"While running with TLS enabled, combined with
   MEMBERSRVC_CA_ACA_ENABLED=true

the asset-mgmt-with-roles.js fails. 

ok 1 setup successful
# assign asset management with roles
Wed, 14 Sep 2016 01:47:31 GMT hfc Member.getNextTCert: key=[],role,account
Wed, 14 Sep 2016 01:47:31 GMT hfc Member.getNextTCert: key=[],role,account, creating new getter
Wed, 14 Sep 2016 01:47:31 GMT hfc shouldGetTCerts: yes, we have no tcerts
not ok 2 Failure: [Failed getting Application certificate for Alice.]: [undefined]
  ---
    operator: fail
    at: fail (/home/ibmadmin/gopath/src/github.com/hyperledger/fabric/sdk/node/test/unit/asset-mgmt-with-roles.js:88:7)
  ...


In the Ca log, there is a whole series of internal connection failures (since it is loopback, and I am not using loopback for the sdk client connections), presumably TLS-related.


01:47:31.108 [tcap] CreateCertificateSet -> DEBU 4c5 grpc TCAP:CreateCertificateSet
01:47:31.108 [ca] readCertificateByKeyUsage -> DEBU 4c6 Reading certificate for alice and usage 1
2016/09/14 01:47:31 grpc: Server.Serve failed to complete security handshake.
2016/09/14 01:47:31 transport: http2Client.notifyError got notified that the client transport was broken write tcp [::1]:35660->[::1]:7054: write: connection reset by peer.
2016/09/14 01:47:31 grpc: Server.Serve failed to complete security handshake.
2016/09/14 01:47:31 transport: http2Client.notifyError got notified that the client transport was broken read tcp [::1]:35661->[::1]:7054: read: connection reset by peer.
2016/09/14 01:47:31 grpc: Server.Serve failed to complete security handshake.
2016/09/14 01:47:31 transport: http2Client.notifyError got notified that the client transport was broken unexpected EOF.
2016/09/14 01:47:31 grpc: Server.Serve failed to complete security handshake.
2016/09/14 01:47:31 transport: http2Client.notifyError got notified that the client transport was broken write tcp [::1]:35663->[::1]:7054: write: connection reset by peer.
2016/09/14 01:47:31 grpc: Server.Serve failed to complete security handshake.
2016/09/14 01:47:31 transport: http2Client.notifyError got notified that the client transport was broken read tcp [::1]:35664->[::1]:7054: read: connection reset by peer.
2016/09/14 01:47:31 grpc: Server.Serve failed to complete security handshake.
2016/09/14 01:47:31 transport: http2Client.notifyError got notified that the client transport was broken read tcp [::1]:35665->[::1]:7054: read: connection reset by peer.
2016/09/14 01:47:31 grpc: Server.Serve failed to complete security handshake.
2016/09/14 01:47:31 transport: http2Client.notifyError got notified that the client transport was broken read tcp [::1]:35666->[::1]:7054: read: connection reset by peer.
2016/09/14 01:47:31 grpc: Server.Serve failed to complete security handshake.
2016/09/14 01:47:32 grpc: ClientConn.resetTransport failed to create client transport: connection error: desc = ""transport: write tcp [::1]:35667->[::1]:7054: write: broken pipe""; Reconnecting to ""localhost:7054""
2016/09/14 01:47:32 grpc: Server.Serve failed to complete security handshake.
2016/09/14 01:47:34 grpc: ClientConn.resetTransport failed to create client transport: connection error: desc = ""transport: write tcp [::1]:35668->[::1]:7054: write: broken pipe""; Reconnecting to ""localhost:7054""
2016/09/14 01:47:34 transport: http2Client.notifyError got notified that the client transport was broken write tcp [::1]:35669->[::1]:7054: write: connection reset by peer.


I think this may be a more general issue. The registrar test, although it passes, takes a *really* long time. In the meantime, I see similar messages to the above:

^[[36m21:53:58.277 [ca] readUser -> DEBU 13a^[[0m Reading token for admin.
^[[36m21:53:58.278 [ca] readRole -> DEBU 13b^[[0m Reading role for admin.
^[[36m21:53:58.278 [ca] createCertificateFromSpec -> DEBU 13c^[[0m Creating certificate for admin.
^[[36m21:53:58.284 [ca] readRole -> DEBU 13d^[[0m Reading role for admin.
^[[36m21:53:58.284 [ca] createCertificateFromSpec -> DEBU 13e^[[0m Creating certificate for admin.
2016/09/13 21:53:58 grpc: Server.Serve failed to complete security handshake.
2016/09/13 21:53:58 transport: http2Client.notifyError got notified that the client transport was broken read tcp 127.0.0.1:32409->127.0.0.1:7054: read: connection reset by peer.
2016/09/13 21:53:58 grpc: Server.Serve failed to complete security handshake.
2016/09/13 21:53:59 grpc: ClientConn.resetTransport failed to create client transport: connection error: desc = ""transport: write tcp 127.0.0.1:32410->127.0.0.1:7054: write: broken pipe""; Reconnecting to ""localhost:7054""
2016/09/13 21:53:59 grpc: Server.Serve failed to complete security handshake.
2016/09/13 21:53:59 transport: http2Client.notifyError got notified that the client transport was broken read tcp 127.0.0.1:32411->127.0.0.1:7054: read: connection reset by peer.
2016/09/13 21:53:59 grpc: Server.Serve failed to complete security handshake.
2016/09/13 21:54:00 grpc: ClientConn.resetTransport failed to create client transport: connection error: desc = ""transport: write tcp 127.0.0.1:32412->127.0.0.1:7054: write: broken pipe""; Reconnecting to ""localhost:7054""
2016/09/13 21:54:00 grpc: Server.Serve failed to complete security handshake.
2016/09/13 21:54:00 transport: http2Client.notifyError got notified that the client transport was broken read tcp 127.0.0.1:32413->127.0.0.1:7054: read: connection reset by peer.
2016/09/13 21:54:00 grpc: Server.Serve failed to complete security handshake.
2016/09/13 21:54:00 transport: http2Client.notifyError got notified that the client transport was broken read tcp 127.0.0.1:32414->127.0.0.1:7054: read: connection reset by peer.
2016/09/13 21:54:00 transport: http2Client.notifyError got notified that the client transport was broken write tcp 127.0.0.1:32415->127.0.0.1:7054: write: connection reset by peer.
2016/09/13 21:54:00 grpc: Server.Serve failed to complete security handshake.

",,ashutosh_kumar,bmos299,ChristopherFerris,Clayton Sims,mastersingh24,ple8LF,rennman,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx94f:",,,,,,Sprint 2,Sprint 3,,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,bmos299,ChristopherFerris,Clayton Sims,mastersingh24,ple8LF,rennman,smithbk,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Sep/16 7:04 PM;mastersingh24;Looks like communication with the ACA from the other CAs is hard-coded to use insecure GRPC transport:   https://gerrit.hyperledger.org/r/gitweb?p=fabric.git;a=blob;f=membersrvc/ca/client_grpc.go;hb=HEAD;;;","28/Sep/16 8:13 PM;mastersingh24;[~keithsmith] - can you assign someone to fix this?   if not, let me know and I'll fix it;;;","28/Sep/16 8:54 PM;smithbk;Pho, pls take a look.  We can discuss if you want.  Thanks;;;","30/Sep/16 3:23 AM;bmos299;Added .6 Label.  Yea, this one would cause us grief. ;;;","30/Sep/16 11:30 PM;Clayton Sims;Pho what is the outlook to fix this?;;;","01/Oct/16 12:01 AM;ashutosh_kumar;made change to code to incorporate TLS on Client side. Handshake failing with Bad Certificate error. Investigating the issue. ;;;","01/Oct/16 12:13 AM;ple8LF;[~Clayton Sims] I am working with Ash Kumar to create a client side TLS connection to ACA. We are encountering the following error and working to resolve it. We will update the status. Thanks.

transport: http2Server.HandleStreams received bogus greeting from client: ""\x16\x03\x01\x00\x9a\x01\x00\x00\x96\x03\x03Y\xc3\x14X載\xcf \xfe\x97e\xf3""
under acap:  rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure
2016/09/30 15:08:28 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""transport: tls: first record does not look like a TLS handshake""; Reconnecting to {""localhost:7054"" <nil>};;;","01/Oct/16 12:17 AM;ashutosh_kumar;Pho is looking into the error and I am going to create standalone GRPC client and Server running on TLS to mimic the problem that we are getting. Will post update here.;;;","01/Oct/16 3:27 AM;ashutosh_kumar;I wrote GRPC client and server on TLS  , outside of fabric and tried to connect using same code base that we have it fabric. And it worked. It tells me that there is something wrong in fabric. Going to debug that. Will keep posted.;;;","01/Oct/16 4:06 AM;ple8LF;It appears that TLS connection was established, but on different version: TLS1.2(server) vs SSLv2(client):
--------------
grpc: Server.Serve failed to complete security handshake from ""10.0.2.2:50805"": tls: unsupported SSLv2 handshake received
-------------;;;","01/Oct/16 4:12 AM;ashutosh_kumar;The request goes from ECA to ACA in vagrant and they use same go runtime. I am confused as to why there is TLS/SSL version mismatch between two. I'll try to force using TLS 1.2 from TLS client code. ;;;","01/Oct/16 7:39 AM;ashutosh_kumar;After forcing TLS client to send traffic on TLS 1.0 and above , the  TLS/SSL version mismatch was gone. We thought : Client sending bogus greeting(which was there from beginning)  might be related to key and cert that is being generated by TLSCA  ,and we created our own key pair and referred that from code. That made peers fail to start. We reverted back code to use TLSCA key material to be used and the PEER startup problem went away. We are going to work through the problem.;;;","01/Oct/16 7:41 AM;ple8LF;I will continue to work on it this weekend and reach out to Ash if needed.;;;","03/Oct/16 1:27 PM;ple8LF;We have been able to resolve the TLS version mismatch issue: server (TLS1.2) vs. client (SSLv2). The ""bogus greeting"" error is resolved.
-------------
grpc: Server.Serve failed to complete security handshake from ""10.0.2.2:50805"": tls: unsupported SSLv2 handshake received
------------

We are looking into these two errors:
---------
from membersrvc.log
grpc: Server.Serve failed to complete security handshake from ""127.0.0.1:54009"": EOF

from peer.log:
Server.Serve failed to create ServerTransport:  connection error: desc = ""transport: write tcp 127.0.0.1:7051->127.0.0.1:60604: write: broken pipe""
---------;;;","04/Oct/16 10:55 PM;Clayton Sims;What is the ETA for this fix?   This is the last defect issue for V0.6;;;","04/Oct/16 11:34 PM;ashutosh_kumar;We do not have solution to TLS yet. Will update end of day today.;;;","11/Oct/16 1:19 AM;ChristopherFerris;this is the gerrit review https://gerrit.hyperledger.org/r/#/c/1607/ and this apparently are the corresponding tests https://gerrit.hyperledger.org/r/#/c/1655/1 but there is a conflict. Why isn't this either two serialized patchsets or one?;;;",,,
Unable to Enroll user after being unEnrolled - ECA.db user state need to be reset ,FABC-682,12370,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Done,gromeroar,smithbk,smithbk,13/Aug/16 9:34 AM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,02/Apr/17 9:23 PM,v0.6,,,,,,,,,,,,0,MembershipServices,,,,,"See https://github.com/hyperledger/fabric/issues/1620

How is this different from ecert revocation?",,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxasn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Apr/17 9:23 PM;mastersingh24;Marking this as WON'T FIX as we have moved to fabric-ca.
It should be noted that fabric-ca supports multiple enrollments, re-enroll and revoke;;;",,,,,,,,,,,,,,,,,,,
LDAP tests for fabric-cop fail on z and p platforms due to use of an x86 Docker image,FABC-683,13894,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,harsha544,harrijk,harrijk,29/Dec/16 12:31 PM,19/Jul/18 10:16 PM,28/Oct/23 2:21 AM,02/Apr/17 10:52 PM,,,,,,,v1.0.0,,,,,,0,MembershipServices,,,,,"The *run_ldap_tests* script contained in the fabric-cop codebase uses an x86-based Docker image: osixia/openldap.  The LDAP tests fail on both z and p platforms due to the use of this x86-based Docker image.

The script could be changed to select the appropriate LDAP Docker image based on the detected architecture.  If there are currently no LDAP Docker images for z and p on Docker Hub, perhaps the images can be built upon the hyperledger/fabric-baseimage.",,greg.haskins,harrijk,harsha544,mastersingh24,smithbk,SriramaSharma,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxgbr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,greg.haskins,harrijk,harsha544,mastersingh24,smithbk,SriramaSharma,vpaprots,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Dec/16 9:32 PM;mastersingh24;[~harrijk] Do you know if there are openldap distributions for Linux for p and z?

If not, we can look at moving to something like ApacheDS (which is Java-based);;;","04/Jan/17 2:34 AM;harrijk;[~mastersingh24], I have not taken a look out on Docker Hub to see if there are openldap distributions for Linux on z or p.  There have been an increasing number of fabric and fabric-cop unit tests that require external Docker images.  

In addition to openldap for fabric-cop, Kafka and Zookeeper are required for the Kafka Orderer unit tests and these tests use x86_64 Docker images as well.  I have opened up issue, [https://jira.hyperledger.org/browse/FAB-1413], regarding the use of x86_64 Docker images for the Kafka Orderer tests.

Just recently, a change, [https://gerrit.hyperledger.org/r/#/c/3161/], was submitted that proposed using x86_64 Docker images for Postgres and haproxy.

I wonder if it would make sense to come up with a plan to implement our own set of Docker images for all three platforms, if there are no publicly available OpenLDAP, Kafka, Zookeeper, Postgres and Haproxy Docker images for z and p.;;;","17/Jan/17 7:33 PM;SriramaSharma;[~mastersingh24], openldap distribution for Linux on POWER (ppc64le) is available at https://hub.docker.com/r/dockerppc64le/docker-openldap/ ;;;","18/Jan/17 1:52 AM;smithbk;Is there a platform env variable I can key off of, and if so, what are the values of the var for X, P, and Z?;;;","18/Jan/17 2:04 AM;smithbk;No env var, but use 'uname -m' to get the platform and check for:
X is ""x86_64"", P is ""ppcle64"", and Z is ""s390x"";;;","20/Jan/17 9:02 PM;mastersingh24;[~harrijk] RE:  Kafka, Zookeeper - we should be able to take the images a few folks are building internally for the IBM offerings (at least for Z) and publish them externally if we need to;;;","20/Mar/17 9:41 PM;harsha544;Pushed CR via https://gerrit.hyperledger.org/r/#/c/6899/4 ;;;",,,,,,,,,,,,,
Certificates for BDD Tests have expired,FABC-684,12513,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,juliancarrivick,juliancarrivick,22/Aug/16 2:48 PM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:39 PM,,,,,,,,,,,,,0,,,,,,"The certificate for used in the BDD Tests has expired (in April 2016), not allowing tests which utilise them to run as the peers are unable to talk to each other.

To verify, manually run {{docker-compose -f docker-compose-2-tls-basic.yml up}} in {{bddtests/}}

You will see the certificate errors.",,JonathanLevi,juliancarrivick,mastersingh24,satheeshk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Aug/16 12:20 PM;JonathanLevi;2016-08-22_fabric-dev.png;https://jira.hyperledger.org/secure/attachment/10037/2016-08-22_fabric-dev.png",,,,,,,,,,,,,,,,,FAB-10,,,,,,,,,"1|hzxben:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,JonathanLevi,juliancarrivick,mastersingh24,satheeshk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Aug/16 12:05 PM;JonathanLevi;Yes, this is the current certificate that is checked it. AFAICT, the related TLS tests could not have run successfully/or passed.

{{Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number: 1 (0x1)
    Signature Algorithm: ecdsa-with-SHA384
        Issuer: C=US, O=IBM, CN=OBC
        Validity
            Not Before: Jan 21 22:49:51 2016 GMT
            Not After : Apr 20 22:49:51 2016 GMT
        Subject: C=US, O=IBM, CN=OBC
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (384 bit)
                pub: 
                    04:7a:60:0a:0f:3b:03:33:21:58:be:3f:cd:d5:ef:
                    d2:3a:05:e2:32:25:e6:8c:99:ea:96:6e:6c:10:b1:
                    34:65:28:3e:a0:d0:bd:18:bd:cc:d0:3b:6b:e9:f8:
                    36:f1:44:dd:75:a2:41:aa:dc:ef:dc:b5:c3:f3:bc:
                    f5:ef:9b:b3:1c:6d:bd:f0:86:05:d6:46:36:ec:5f:
                    ac:27:db:9b:45:db:f8:54:e9:f4:2c:c9:02:cf:88:
                    9b:8d:8f:fc:b1:92:74
                ASN1 OID: secp384r1
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature, Certificate Sign
            X509v3 Basic Constraints: critical
                CA:TRUE
            X509v3 Subject Key Identifier: 
                01:02:03:04
            X509v3 Authority Key Identifier: 
                keyid:01:02:03:04

    Signature Algorithm: ecdsa-with-SHA384
         30:65:02:31:00:84:c6:9a:af:b1:e4:de:d0:d6:3a:cb:b7:74:
         05:46:d4:ca:b2:e3:48:a2:c9:e5:57:82:d1:e7:89:77:cb:20:
         e8:d7:b4:ec:d1:82:f2:0b:4a:59:40:57:7e:19:44:52:39:02:
         30:3f:f5:c0:c2:83:1c:6c:92:6d:39:57:96:fd:42:f6:10:ea:
         a6:28:0d:b2:82:65:97:e6:4b:5e:f4:b9:e0:7f:9e:74:4b:a8:
         0f:11:6b:83:40:e7:18:f7:90:7e:c7:77:87
}};;;","23/Aug/16 12:06 PM;JonathanLevi;As a matter of fact, had the TLS tests run successfully, one would argue that it is even worse!;;;","23/Aug/16 12:20 PM;JonathanLevi; !2016-08-22_fabric-dev.png|thumbnail! ;;;","18/Mar/17 3:16 AM;mastersingh24;this is no longer relevant so closing;;;",,,,,,,,,,,,,,,,
"""make clean"" fails using fabric-cop makefile",FABC-685,13879,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,ishihara.shun,ishihara.shun,22/Dec/16 1:18 PM,19/Jul/18 10:17 PM,28/Oct/23 2:21 AM,08/Jan/17 3:51 AM,v1.0.0,,,,,,v1.0.0,,,,,,0,build-system,,,,,"Makefile creates COP docker image as name of ""docker-cop"", but tries to remove it as name of ""docker-cop-cop"".

{quote}
$ make clean

docker images -q hyperledger/fabric-cop-cop | xargs -I '{}' docker rmi -f '{}'

docker images -q hyperledger/fabric-cop-runtime | xargs -I '{}' docker rmi -f '{}'
{quote}",,ishihara.shun,mastersingh24,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,FABC-633,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxg9b:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ishihara.shun,mastersingh24,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Jan/17 4:43 AM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/3581/;;;",,,,,,,,,,,,,,,,,,,
Failed registration leaves the internal data structure in an inconsistent state,FABC-686,12367,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Won't Do,agaragiola,smithbk,smithbk,13/Aug/16 7:11 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:39 PM,v0.6,,,,,,,,,,,,0,MembershipServices,,,,,See https://github.com/hyperledger-archives/fabric/issues/2183,,ChristopherFerris,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxasf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Sep/16 5:58 AM;ChristopherFerris;Description

When a registration fails the internal data structure are left in an inconsistent state at the client and at the membership service side. For instance, trying to register the second time with the same credentials will succeed by saying that the node has been already registered.

Describe How to Reproduce

The following test try to register a client with an enrollID that correspond to a validator at the membership service. The first call fails as expected but second doesn't. The client is in an inconsistent state.

func TestDoubleRegistrationWithDifferentRoles(t * testing.T) {
    err := RegisterClient(""validator"", nil, ""validator"", ""9gvZQRwhUq9q"")
    if err == nil {
        t.Fatal(""Init should fail"")
    }

    err = RegisterClient(""validator"", nil, ""validator"", ""9gvZQRwhUq9q"")
    if err == nil {
        t.Fatal(""Init should fail"")
    }
}
The following test try to register a client with an enrollID that correspond to a validator at the membership service. The first call fails as expected but second should succeed. The membership service is in an inconsistent state.

func TestDoubleRegistration(t * testing.T) {
    // Wrong type
    err := RegisterClient(""validator"", nil, ""validator"", ""9gvZQRwhUq9q"")
    if err == nil {
        t.Fatalf(""RegisterValidator should fail"")
    }

    // Right type
    err = RegisterValidator(""validator"", nil, ""validator"", ""9gvZQRwhUq9q"")
    if err != nil {
        t.Fatalf(""RegisterValidator should succed [%s]"", err)
    }
}
Actually, the above test is really subtle because the failure of the first RegisterClient happens at very end of the protocol when the RegisterClient parses the latest message sent by the MS. So, from the MS point of view, the protocol has been successfully run. One solution would be then to modify to registration protocol to notify immediately the MS about which kind of registration the client is trying to do. Other solutions are possible. @JonathanLevi what do you think?;;;","02/Apr/17 9:21 PM;mastersingh24;There is no longer active development on v0.6 so closing this;;;",,,,,,,,,,,,,,,,,,
behave feature:37 fails,FABC-687,13517,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Won't Do,,ChristopherFerris,ChristopherFerris,23/Nov/16 2:41 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:39 PM,v0.6,,,,,,,,,,,,0,MembershipServices,quality,,,,"behave tests fail consistently

@endorser
Feature: Endorser # features/endorser.feature:10
  As a application developer
  I want to get endorsements and submit transactions and receive events
  @FAB-184
  Scenario Outline: Basic deploy endorsement for chaincode through GRPC to multiple endorsers -- @1.1 Orderer Options                                                       # features/endorser.feature:37
    Given we compose ""docker-compose-next-4.yml""                                                                                                                            # steps/peer_basic_impl.py:68 5.702s
    And I wait ""1"" seconds                                                                                                                                                  # steps/peer_basic_impl.py:120 1.002s
    And I register with CA supplying username ""binhn"" and secret ""7avZQLwcUe9q"" on peers                                                                                    # steps/peer_basic_impl.py:658 0.030s
      | vp0 |
      Traceback (most recent call last):
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1456, in run
          match.run(runner.context)
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1903, in run
          self.func(context, *args, **kwargs)
        File ""/hyperledger/bddtests/steps/peer_basic_impl.py"", line 677, in step_impl
          resp = requests.post(request_url, headers={'Content-type': 'application/json'}, data=json.dumps(secretMsg), verify=False)
        File ""/usr/local/lib/python2.7/dist-packages/requests/api.py"", line 94, in post
          return request('post', url, data=data, json=json, **kwargs)
        File ""/usr/local/lib/python2.7/dist-packages/requests/api.py"", line 49, in request
          return session.request(method=method, url=url, **kwargs)
        File ""/usr/local/lib/python2.7/dist-packages/requests/sessions.py"", line 443, in request
          prep = self.prepare_request(req)
        File ""/usr/local/lib/python2.7/dist-packages/requests/sessions.py"", line 374, in prepare_request
          hooks=merge_hooks(request.hooks, self.hooks),
        File ""/usr/local/lib/python2.7/dist-packages/requests/models.py"", line 304, in prepare
          self.prepare_url(url, params)
        File ""/usr/local/lib/python2.7/dist-packages/requests/models.py"", line 361, in prepare_url
          raise InvalidURL(""Invalid URL %r: No host supplied"" % url)
      InvalidURL: Invalid URL u'http://:7050/registrar': No host supplied
      
      Captured stdout:
      17:35:35 POSTing path = http://:7050/registrar",,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxazz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Certificate revoke -aki value should be case-insensitive,FABC-688,14332,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rennman,rennman,25/Jan/17 7:48 AM,19/Jul/18 10:17 PM,28/Oct/23 2:21 AM,06/Mar/17 11:53 PM,,,,,,,,,,,,,0,,,,,,"When issuing the fabric-ca client revoke command, the value passed in for the authority keyid (-aki) is case-sensitive for the purposes of the SQL query. Since this value represents a hexadecimal number, this should be a case-insensitive field.

e.g., I verified that this cert exists in the DB:
Name:admin
Serial:144790095028100641934921797894228565652597329902 AKI:54A784B1639C88B38B3111E80057233520940422

but SQL query fails:
    2017/01/24 15:14:53 [DEBUG] Revoke request: {RevocationRequest:{Name:admin Serial:144790095028100641934921797894228565652597329902 AKI:54A784B1639C88B38B3111E80057233520940422 Reason:0}}
    2017/01/24 15:14:53 [INFO] 127.0.0.1:51720 - ""POST /api/v1/cfssl/revoke"" 200
Error response from server was '{""code"":11200,""message"":""failed to revoke the certificate: certificate not found""}' for request:",,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxizz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rennman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
cop unit-tests are failing with timeout issue,FABC-689,13516,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rameshthoomu,rameshthoomu,23/Nov/16 1:36 AM,19/Jul/18 10:17 PM,28/Oct/23 2:21 AM,05/Jan/17 4:13 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"Observed fabric-cop tests are failing with timeout issue. Need to increase timeout in cli/server/server_test.go

https://gerrit.hyperledger.org/r/gitweb?p=fabric-cop.git;a=blob;f=cli/server/server_test.go;h=f3d7046b3dc5edc4c6446f97105a7f80f2cc38e2;hb=refs/heads/master#l58

00:02:25.746 2016/11/21 22:01:48 [DEBUG] failed POST: Post http://127.0.0.1:8888/api/v1/cfssl/enroll: dial tcp 127.0.0.1:8888: getsockopt: connection refused
00:02:25.746 2016/11/21 22:01:48 [ERROR] 100001: failed POST: Post http://127.0.0.1:8888/api/v1/cfssl/enroll: dial tcp 127.0.0.1:8888: getsockopt: connection refused
00:02:25.746 --- FAIL: TestEnrollBootstrapUser (0.03s)
00:02:25.746 	cop_test.go:98: Error:  100001: failed POST: Post http://127.0.0.1:8888/api/v1/cfssl/enroll: dial tcp 127.0.0.1:8888: getsockopt: connection refused",Jenkins CI and Vagrant,rameshthoomu,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxf3z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Nov/16 1:41 AM;skarim;Seems to be a timing issue. Last discussion with Keith he said he had found the issue. Will discuss with him further. [~keithsmith];;;","23/Nov/16 2:01 AM;rameshthoomu;thanks [~skarim]: As this is timeout issue we can re-trigger Jenkins job with *reverify* in reply or let me know I will re-trigger from Jenkins;;;","05/Jan/17 4:13 AM;skarim;Marking this as Done. Increased waiting time between starting server and executing test cases against. The sleep is now for 10 seconds, that should be sufficient amount of time to prevent this issue from occurring on Jenkins. ;;;",,,,,,,,,,,,,,,,,
eca.cert.chain: no such file or directory,FABC-690,13070,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Won't Do,,yelvxiuge,yelvxiuge,20/Oct/16 10:12 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:39 PM,v0.6,,,,,,,,,,,,0,Documentation,,,,,"Edit a file named docker-compose.yml via vim,here're content below:

membersrvc:
image: hyperledger/fabric-membersrvc
ports:
- ""7054:7054""
command: membersrvc
vp0:
image: hyperledger/fabric-peer
ports:
- ""7050:7050""
- ""7051:7051""
- ""7053:7053""
environment:
- CORE_PEER_ADDRESSAUTODETECT=true
- CORE_VM_ENDPOINT=unix:///var/run/docker.sock
- CORE_LOGGING_LEVEL=DEBUG
- CORE_PEER_ID=vp0
- CORE_PEER_PKI_ECA_PADDR=membersrvc:7054
- CORE_PEER_PKI_TCA_PADDR=membersrvc:7054
- CORE_PEER_PKI_TLSCA_PADDR=membersrvc:7054
- CORE_SECURITY_ENABLED=true
- CORE_SECURITY_ENROLLID=test_vp0
- CORE_SECURITY_ENROLLSECRET=MwYpmSRjupbT
links:
- membersrvc
command: sh -c ""sleep 20; peer node start --peer-chaincodedev""

run commands:

1,docker-composer up
return a warn:
[sysccapi] RegisterSysCC -> WARN 05e Currently system chaincode does support security(noop,github.com/hyperledger/fabric/bddtests/syschaincode/noop)

2, ./peer network login jim

3, ./peer chaincode deploy -n mycc -c '{ ""Args"" : [""init"", ""a"",""100"", ""b"", ""200""]}'

Error: Error building chaincode: rpc error: code = 5 desc = open /var/hyperledger/production/crypto/client/ks/raw/eca.cert.chain: no such file or directory",,yelvxiuge,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-282,,,,,,,FAB-754,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxdav:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yelvxiuge,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
enroll member issue with grpc interfaces,FABC-691,12772,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,shimron,shimron,27/Sep/16 4:03 PM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:39 PM,v0.6,,,,,,,,,,,,0,,,,,,"I was trying to register new users with CA's grpc interfaces using golang. When I tried to enroll the ""admin"" user, I got an error ""Signature verification failed."" from  ECA . 
I was confused, because the enrollUser function I used was copied from the ""eca_test.go"" file, and when I run the command ""go test"" under membersrvc/ca package, those tests passed without any errors.
 I googled a lot about this issue, but not found anything useful. So I create this here, hope someone can give some tips.
 BTW, I also posted this issue on stackoverflow. [http://stackoverflow.com/questions/39701198/enroll-member-request-fails-with-signature-verification/39701671?noredirect=1#comment66723076_39701671]",,mastersingh24,shimron,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxfof:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,shimron,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Apr/17 9:40 PM;mastersingh24;We've moved away from the GRPC-based APIs provided by membersrvs in v0.6 to HTTP/RESTful interfaces in fabric-ca.;;;",,,,,,,,,,,,,,,,,,,
User registration info must be stored in CFSSL's DB,FABC-692,12756,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,Clayton Sims,Clayton Sims,27/Sep/16 6:36 AM,21/Jul/18 4:16 AM,28/Oct/23 2:21 AM,17/Nov/16 1:47 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"When a user is dynamically registered, this info must be stored in CFSSL's DB.",,aliblackwell,Clayton Sims,smithbk,,,,,,,,,,,,,,,,,,,,,,,,201600,201600,,,FABC-674,,,,,,,FABC-697,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzx8i7:",,,,Unset,,Sprint 3,Sprint 4 - Membership Services,Sprint 5 - Membership Services,,,,,,,,,,4.0,Unset,,,,,,,,,,,aliblackwell,Clayton Sims,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Oct/16 3:39 AM;smithbk;Done in https://gerrit.hyperledger.org/r/#/c/1883/3;;;","27/Oct/16 3:45 AM;smithbk;and https://gerrit.hyperledger.org/r/#/c/1893/3;;;",,,,,,,,,,,,,,,,,,
Database API Implementation,FABC-693,13162,12756,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,25/Oct/16 11:33 PM,19/Jul/18 10:18 PM,28/Oct/23 2:21 AM,25/Oct/16 11:35 PM,,,,,,,,,,,,,0,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,57600,57600,,0%,57600,57600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxdlr:",,,,,,Sprint 3,Sprint 4 - Membership Services,Sprint 5 - Membership Services,,,,,,,,,,2.0,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Bootstrap Database,FABC-694,13163,12756,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,25/Oct/16 11:34 PM,19/Jul/18 10:18 PM,28/Oct/23 2:21 AM,25/Oct/16 11:35 PM,,,,,,,,,,,,,0,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,57600,57600,,0%,57600,57600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxdlz:",,,,,,Sprint 3,Sprint 4 - Membership Services,Sprint 5 - Membership Services,,,,,,,,,,2.0,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update DB when registering user,FABC-695,13164,12756,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,25/Oct/16 11:34 PM,19/Jul/18 10:18 PM,28/Oct/23 2:21 AM,25/Oct/16 11:35 PM,,,,,,,,,,,,,0,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,57600,57600,,0%,57600,57600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxdm7:",,,,,,Sprint 3,Sprint 4 - Membership Services,Sprint 5 - Membership Services,,,,,,,,,,2.0,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Write test cases,FABC-696,13166,12756,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,25/Oct/16 11:35 PM,19/Jul/18 10:18 PM,28/Oct/23 2:21 AM,05/Nov/16 3:18 AM,,,,,,,,,,,,,0,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxdmn:",,,,,,Sprint 3,Sprint 4 - Membership Services,Sprint 5 - Membership Services,,,,,,,,,,1.0,,,,,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide a fabric certificate authority,FABC-697,12662,,Epic,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,13/Sep/16 4:24 AM,21/Jul/18 4:12 AM,28/Oct/23 2:21 AM,10/May/17 10:48 PM,,,,,,,v1.0.0,,,,,,0,MembershipServices,,,,,"The fabric-ca is a Certificate Authority for Hyperledger Fabric.

It provides features such as:  
  1) registration of identities, or connects to LDAP as the user registry;  
  2) issuance of Enrollment Certificates (ECerts);  
  3) issuance of Transaction Certificates (TCerts), providing both anonymity
    and unlinkability when transacting on a Hyperledger Fabric blockchain;  
  4) certificate renewal and revocation.

Fabric CA consists of both a server and a client component

The primary design goals of fabric-ca are as follows.
1) Make it as pluggable and consumable as possible.  It should clear how to completely implement your own fabric-ca or to replace some portion of the default implementation.  
For example, you may use your own CA for generating ECerts but still use TCerts for unlinkability and attributes for access control.  In other words, you have the choice of using all, some, or none of the capabilities that fabric-ca offers.
2) Do not reinvent the wheel.  For example, the default implementation of fabric-ca will use CFSSL (see https://github.com/cloudflare/cfssl) to generate ECerts, which also supports PKCS11 and is HA via a DB.
   The code to generate TCerts will be repackaged but will remain mostly the same.
3) Support standard protocols where possible.  For example, the ACME protocol may be used to issue server-based certificates.

In order to accomplish these goals, fabric-ca is being built as a reusable go library.  The fabric-ca executable is a thin wrapper around this go library.

Design document https://docs.google.com/document/d/1TRYHcaT8yMn8MZlDtreqzkDcXx0WI50AV2JpAcvAM5w/edit",,aliblackwell,inatatsu,py,ruslankryukov,smithbk,v_thirugnanam,,,,,,,,,,,,,,,,,,,,,,,,,FABC-615,FABC-613,FABC-692,FABC-15,FABC-659,FAB-113,,,,,,,,,,,,,,,,,,,FAB-359,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-3,,Decentralized Membership Services,To Do,,,Unset,,,,"1|hzxbyn:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,aliblackwell,inatatsu,py,ruslankryukov,smithbk,v_thirugnanam,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhancements to membership services post v0.5,FABC-698,12480,,Epic,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,20/Aug/16 1:13 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,15/Apr/17 2:58 AM,,,,,,,,,,,,,0,MembershipServices,,,,,"See the google doc at [Membership Services Enhancements|https://docs.google.com/document/d/1mQj-MD47EKAN1AqnISqjL5CBiEBpBlZ9nCe3ls-LGTY] for a description of membership services in v0.5, it's limitations, and proposal for future enhancements",,inatatsu,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-8,,Membership Services Enhancements,To Do,,,Unset,,,,"1|hzxbb3:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,inatatsu,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Apr/17 2:57 AM;mastersingh24;superceded by fabric-ca;;;",,,,,,,,,,,,,,,,,,,
Membership Services Documentation Items (existing + new),FABC-699,12315,,Epic,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,dulcep,JonathanLevi,JonathanLevi,11/Aug/16 6:20 AM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,05/Apr/17 5:05 AM,,,,,,,,,,,,,0,Documentation,MembershipServices,Usability,v0.6,,"From flow diagrams, example set ups, troubleshooting, documenting configuration parameters...in an informative and (at times) visual, easy to digest way.",,JonathanLevi,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-2,,Membership Services Documentation,To Do,,,Unset,,,,"1|hzxadb:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,JonathanLevi,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use transaction certificates with Fabric CA that are anonymous and unlinkable,FABC-700,12567,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,30/Aug/16 2:40 AM,21/Jul/18 4:17 AM,28/Oct/23 2:21 AM,13/Sep/16 4:36 AM,,,,,,,v1.0.0,,,,,,0,MembershipServices,,,,,"Currently , TCert generation is closely tied to ECert. Coming up with new module so that TCert operations (Generate Primarily) can run independently.",,ashutosh_kumar,ChristopherFerris,inatatsu,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-701,FABC-644,FABC-668,FABC-662,FABC-660,FABN-36,FABC-642,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FABC-697,,,,,,,,,"1|hzxgun:",,,,Unset,,Sprint 1,Sprint 2,Sprint 3,Sprint 4 - Membership Services,Sprint 5 - Membership Services,Sprint 6 - Membership Services,Sprint 7 - Memship Services,Sprint 8 - Membership Services,,,,,,Unset,,,,,,,,,,,ashutosh_kumar,ChristopherFerris,inatatsu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Sep/16 10:52 PM;ashutosh_kumar;Elli's team is creating crypto library that includes TCert generation as well. Going to work with her to understand what is covered. ;;;","13/Sep/16 6:37 AM;ashutosh_kumar;Elli's team is not providing TCert Library. Started working on this.;;;","14/Sep/16 4:48 AM;ChristopherFerris;Note, this isn't really a 'user story', at least it doesn't read as one. Typically: as a SOMEUSER, I CAN DO SOMETHING, so that I can RATIONALE. It basically describes a test. This is more of a refactor which would be an Improvement. 

Just a thought;;;","16/Sep/16 5:09 AM;ashutosh_kumar;RSA Signature creation and validation has been implemented. Now there is one method to verify both RSA and EC Signature in TCert request. This implementation is required to support existing certificate as ECert and customer might be having RSA cert as well.

The API looks like  GetCertificateSet(TCertRequestJson string , signatureJson string) (string , error)
TCertRequestJSON has TCertRequest Parameters 
signatureJson contains Signature and Certificate.
It returns JSON string containing batch of TCerts.

Next step is to use CFSSL to get TCerts. Will evaluate if CFSSL will be able to serve the request.

Q : Which digest algorithm we are supporting ? 
;;;","27/Oct/16 6:28 AM;ashutosh_kumar;Gerritt link : https://gerrit.hyperledger.org/r/#/c/2049/;;;",,,,,,,,,,,,,,,
Integration to Identity API Definitions,FABC-701,13272,12567,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,ple8LF,ashutosh_kumar,ashutosh_kumar,03/Nov/16 11:08 PM,27/Jul/19 11:42 PM,28/Oct/23 2:21 AM,27/Jul/19 11:37 PM,,,,,,,,,,,,,0,,,,,,"Here is breakup : 
* Define Structure for GetPrivateSignersRequest
* Integrate from Client to Server.",,ashutosh_kumar,mastersingh24,ple8LF,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-700,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxdwf:",,,,,,Sprint 1,Sprint 2,Sprint 3,Sprint 4 - Membership Services,Sprint 5 - Membership Services,Sprint 6 - Membership Services,Sprint 7 - Memship Services,Sprint 8 - Membership Services,,,,,,,,,,,,,,,,,ashutosh_kumar,mastersingh24,ple8LF,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Dec/16 11:42 PM;ple8LF;The code for tcert generation and integration to Identity API is done and being reviewed. Please see FAB-945;;;","15/Apr/17 2:25 AM;mastersingh24;not relevant;;;",,,,,,,,,,,,,,,,,,
Remove TCert related code in BCCSP ,FABC-702,32065,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,20/Jul/18 1:17 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,16/Aug/18 9:55 AM,,,,,,,,,,,,,0,Security,,,,,The dead code related to TCert exists in BCCSP package that needs to removed and cleaned up.,,ashutosh_kumar,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,,,,No,,Unset,No,,,"1|hzzj8f:",,,,No,Unset,,,,,,,,,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),ashutosh_kumar,denyeart,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Jul/18 5:12 AM;ashutosh_kumar;I have requested Vlad to review the code.;;;","10/Aug/18 10:40 PM;ashutosh_kumar;CR https://gerrit.hyperledger.org/r/#/c/24877/;;;","10/Aug/18 10:41 PM;ashutosh_kumar;There are 2 aspects of BCCSP : PKCS11 and SW based. The CR [https://gerrit.hyperledger.org/r/#/c/24877/] is on PKCS11.;;;","16/Aug/18 9:59 AM;denyeart;[~ashutosh_kumar] The auto-transition to done worked!;;;",,,,,,,,,,,,,,,,
Fabric CA client backward compatibility break 1.2 vs. 1.1 -> HTTP/HTTPS access & Authentication,FABC-703,32812,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,alexvicegrab,alexvicegrab,14/Aug/18 6:46 PM,02/Oct/18 4:58 AM,28/Oct/23 2:21 AM,02/Oct/18 2:29 AM,v1.2.0,,,,,,v1.3.0,,,,,,0,,,,,,"The behaviour of the Fabric CA client appears to have changed in 1.2


{code:bash}
fabric-ca-client enroll -u http://user:pass@my-fabric-ca.com
{code}


now returns:

{code:bash}
Error: Response from server: Error Code: 2 - No authorization header
{code}
 
This worked without issue in Fabric 1.1

-----------

Instead, specifying the port explicitly gives me the following error (I'm guessing because the Fabric CA is behind an NGINX proxy with HTTPS enabled):

{code:bash}
fabric-ca-client enroll -u http://user:pass@my-fabric-ca.com:80
{code}

now returns:

{code:bash}
http: server gave HTTP response to HTTPS client
{code}

In Fabric 1.1, this worked fine, with the http request handled correctly, and the authorization headers being properly set by the client without a need to explicitly set the port.

----------

If I try to directly access via HTTPS:

{code:bash}
fabric-ca-client enroll -u https://user:pass@my-fabric-ca.com
{code}

now returns:

{code:bash}
2018/08/14 12:35:59 [INFO] TLS Enabled
Error: Failed to get client TLS config: No TLS certificate files were provided
{code}

In the latter, I want the Fabric CA to be protected by HTTPS encryption to it, but for it not to require the client to provide a TLS certificate.",,alexvicegrab,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzmo7:",,,,Unset,Unset,,,,,,,,,,,,"Create Fabric CA server.
Place it behind NGINX proxy with an HTTPS ingress and valid TLS certificates (e.g. Let's Encrypt)
Attempt to enrolled a registered user/identity via HTTP as described below.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),alexvicegrab,denyeart,skarim,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Sep/18 11:01 PM;skarim;[~alexvicegrab] Are you saying that a 1.2 Fabric CA server doesn't work with 1.1 Fabric CA client? Is that the combination you are talking about?;;;","10/Sep/18 11:11 PM;alexvicegrab;No [~skarim], I have more or less the opposite. I am using CA Server 1.2, but I have the above errors when using CA client 1.2. Client 1.1 works fine as before.;;;","11/Sep/18 11:58 PM;skarim;[~alexvicegrab] The error messages you are seeing don't seem to make sense. When you do an enroll and pass in the username/password, an authorization header should be generated. Unless, you say you have a proxy and that proxy is somehow stripping the authorization header before sending it to the CA server. Can you try doing a curl which requires no authorization header and see if you can reach the CA server. For example, you could try `curl http://localhost:7054/cainfo`, replacing the URL with you CA's address. 

Also, if you have a proxy is front of your CA server and the proxy is using HTTPs, your fabric CA client needs to use HTTPs as well. You also need to provide the client the TLS certfile using the `–tls.certfiles` flag if using the command line. This flag should point to the TLS certificate that is used on the proxy server.;;;","12/Sep/18 12:09 AM;alexvicegrab;Hi [~skarim],

I effectively have a proxy, since the CA server is located behind an NGINX-ingress on a Kubernetes cluster:

https://hub.kubeapps.com/charts/stable/nginx-ingress

I'm using Let's Encrypt (also a Linux Foundation umbrella technology) to generate the certificates, so that they are trusted, and automate that on Kubernetes using cert-manager:

https://hub.kubeapps.com/charts/stable/cert-manager

It looks, as you suggest, that the authorisation header is being stripped.

If I use `curl` to access my QA intermediate CA cluster, I get a permanent redirect:


{code:java}
curl http://ica-ord.qa.aidtech-ifrc.com/api/v1/cainfo
{code}


While the https curl works fine.

I will however try to use the solution you outlined, by binding the tls certificates generated by the proxy server to the CA server, and see if that resolves my issues and get back to you.
;;;","21/Sep/18 5:13 PM;alexvicegrab;Hi Saad, I'm still stumped by this problem and by the fact that the Fabric CA Client 1.1 seems to have a wildly different behaviour than Fabric CA Client 1.2. For instance I can run the command to try and get the CA certificates:


{code:java}
FABRIC_CA_CLIENT_HOME=./config fabric-ca-client getcacert -u https://$CA_INGRESS -M ./AidTechMSP
2018/09/21 11:03:42 [INFO] Configuration file location: /Users/sasha/Aid_Tech/lf-k8s-hlf-webinar/config/fabric-ca-client-config.yaml
2018/09/21 11:03:42 [INFO] TLS Enabled
Error: Failed to get client TLS config: No TLS certificate files were provided
{code}


Curiously, when doing the same command, but over http (due to a 308 redirect):


{code:java}
FABRIC_CA_CLIENT_HOME=./config fabric-ca-client getcacert -u http://$CA_INGRESS -M ./AidTechMSP
2018/09/21 11:28:11 [INFO] Configuration file location: /Users/sasha/Aid_Tech/lf-k8s-hlf-webinar/config/fabric-ca-client-config.yaml
2018/09/21 11:28:12 [INFO] Stored root CA certificate at /Users/sasha/Aid_Tech/lf-k8s-hlf-webinar/config/AidTechMSP/cacerts/ca2-lf-aidtech-test-xyz.pem
{code}


The above error with HTTPS is similar to the 3rd error I outlined above. I have the CA Server behind an nginx-ingress on Kubernetes (an NGINX proxy under the hood). I have not activated TLS on the CA Server, since the traffic is decrypted by the Proxy.

The Fabric CA Client however expects to receive TLS certificates, even though this has not been enabled, and even explicitly disabled in the CA client configuration:


{code:java}
#############################################################################
#    TLS section for secure socket connection
#
#  certfiles - PEM-encoded list of trusted root certificate files
#  client:
#    certfile - PEM-encoded certificate file for when client authentication
#    is enabled on server
#    keyfile - PEM-encoded key file for when client authentication
#    is enabled on server
#############################################################################
tls:
  enabled: false
  # TLS section for secure socket connection
  certfiles:
  client:
    certfile:
    keyfile:
{code}

This is surprising and confusing particularly since I don't want mutual TLS at this point. Does this make the situation clearer?;;;","21/Sep/18 5:32 PM;alexvicegrab;Given that the enroll commands are working fine in Fabric CA Client 1.1, I think it's Fabric CA Client 1.2 which is stripping the Auth headers, not my proxy.

Please advice [~skarim];;;","21/Sep/18 6:33 PM;alexvicegrab;Aha... I believe I have solved this by:


{code:java}
tls:
  enabled: false
  # TLS section for secure socket connection
  certfiles:
    - ./Lets_Encrypt_Authority_X3.pem
  client:
    certfile:
    keyfile:
{code}


This adds the Let's Encrypt Authority as trusted, allowing me to connect with HTTPS

Still, the error messages could be made a bit clearer to indicate it is the certificate of the server, not of the client that needs to be added by the Client request.;;;","22/Sep/18 5:57 AM;skarim;Thanks for the update. I can update the message to be more clear.;;;","24/Sep/18 9:24 AM;skarim;https://gerrit.hyperledger.org/r/26490;;;","02/Oct/18 4:58 AM;denyeart;[https://gerrit.hyperledger.org/r/#/c/26699/] - release-1.3;;;",,,,,,,,,,
Fix attribute name from 'IsAdmin' to 'Role',FABC-704,32828,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,15/Aug/18 1:11 AM,15/Aug/18 6:36 PM,28/Oct/23 2:21 AM,15/Aug/18 6:36 PM,v1.3.0,,,,,,v1.3.0,,,,,,0,,,,,,Fix attribute name from 'IsAdmin' to 'Role',,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzmqn:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Aug/18 3:57 AM;skarim;https://gerrit.hyperledger.org/r/c/25547/;;;",,,,,,,,,,,,,,,,,,,
Remove unused entry fabric-ca in git ignore,FABC-706,33025,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,davidkhala,davidkhala,davidkhala,18/Aug/18 2:08 PM,06/Sep/18 1:13 AM,28/Oct/23 2:21 AM,06/Sep/18 1:13 AM,v1.2.1,,,,,,,,,,,,0,,,,,,"In some git GUI software like `smartGit`

the `fabric-ca` line in `.gitignore` file is recognized as an ignore pattern , 
making it mistakes `images/fabric-ca` as ignore directory",,davidkhala,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzna7:",,,,Unset,Unset,,,,,,,,,,,,"0. assuming we have another git repository at `Documents/fabricAll`
1. git clone fabric-ca to `Documents/fabric-ca`
2. remove the `.git` directory in `Documents/fabric-ca`
3. copy `Documents/fabric-ca` to `Documents/fabricAll/src/fabric-ca`
4. use `smartGit` to track file change in `Documents/fabricAll`
5. you can see smartGit cannot recognize directory `Documents/fabricAll/src/fabric-ca/images/fabric-ca`
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),davidkhala,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Aug/18 2:18 PM;davidkhala;https://gerrit.hyperledger.org/r/#/c/25655/;;;",,,,,,,,,,,,,,,,,,,
Enrolled certificates always have the generic moniker cert.pem,FABC-707,33170,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,Low,,,jvsclp,jvsclp,24/Aug/18 2:19 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,v1.2.0,,,,,,,,,,,,1,,,,,,"When using the fabric certificate authority client to enroll identities with the server the server generates the x509 as designated in the enrollment request. No matter how the request is configured in the command line or the fabric-ca-client.yaml the generated signing certificate is always cert.pem. While it is possible to rename the certificate manually this matches neither the behavior of the cryptogen tool used in the first-network example nor the fabric-ca-server.config.yaml when initializing a server. For example, the cryptogen tool  has the signing certificates named according to organization and role, peer0.org1.example.com-cert.pem, and you can specify certificate names under both the tls properties and ca properties of the fabric-ca-server-config.yaml. It would be beneficial to allow the client to specify the name of the signing certificate generated during an enrollment request.",,jvsclp,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzznvz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jvsclp,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Sep/18 6:58 AM;jvsclp;Noticed an issue that may be needed to be taken into account if naming the certificate file on generation with fabric-ca-client is implemented. As an admin, when the FABRIC_CA_CLIENT_HOME environment variable is set to the administrator's certificate location for registering an identity the only valid file name recognized within the administrator's msp/signcerts directory is cert.pem. If you rename the certificate manually fabric-ca-client will not recognize the renamed certificate despite having the correct credentials to perform a user registration.;;;",,,,,,,,,,,,,,,,,,,
Vendor Fabric BCCSP into Fabric CA,FABC-708,33255,,Task,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,skarim,ashutosh_kumar,ashutosh_kumar,28/Aug/18 1:16 AM,01/Sep/18 9:09 PM,28/Oct/23 2:21 AM,01/Sep/18 9:09 PM,,,,,,,v1.2.1,v1.3.0,,,,,0,,,,,,Re-vendor bccsp into Fabric CA to pick up recent pksc11 updates.,,ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-157,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzog7:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ashutosh_kumar,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Aug/18 10:16 AM;skarim;[https://gerrit.hyperledger.org/r/c/25916/] (1.3)

[https://gerrit.hyperledger.org/r/c/25918/] (1.2);;;",,,,,,,,,,,,,,,,,,,
wrong error message shown for incorrect ldap converters in fabric-ca-server-config file,FABC-709,33265,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,skarim,maripo5,maripo5,28/Aug/18 6:10 AM,20/Sep/18 11:14 PM,28/Oct/23 2:21 AM,20/Sep/18 11:14 PM,v1.1.0,,,,,,v1.3.0,,,,,,0,,,,,,"While performing enrollment for LDAP registered user, wrong error message is shown. 

STEPS TO REPRODUCE:
 Use below LDAP section in _fabric-ca-server-config.yaml_ file
{code:xml}
ldap:
   enabled: true
   url: ldap://uid=admin,ou=system:mysecretpassword@host:port/uid=admin,ou=system
   tls:
      certfiles:
      client:
         certfile:
         keyfile:
   attribute:
      names: ['uid']
      converters:
         - name: hf.AffiliationMgr
           value: attr(""uid"") =~ ""admin""
         - name: hf.Type
           value: client
{code}
then enroll user:
{code:xml}
http://admin:mysecretpassword@localhost:7054 --enrollment.attrs uid,hf.AffiliationMgr
{code}
*CURRENT RESULT*
Returned error with below message:
{code:xml}
Error: Response from server: Error Code: 0 - The following required attributes are missing: [hf.AffiliationMgr]`
{code}
 

*EXPECTED RESULT*
 Proper error message which relates to real root cause of that issue, currently fabric-server DEBUG logs return such informations
{code:xml}
[DEBUG] Evaluating expression for attribute 'hf.Type' from LDAP user 'admin'
[DEBUG] Affilation path for DN 'uid=admin,ou=system' is '[system]'
[DEBUG] Error evaluating expression for attribute 'hf.Type'; parms: map[DN:uid=admin,ou=system affiliation:[system]]; error: No parameter 'client' found.
{code}
_Error evaluating expression for attribute 'hf.Type'; parms: map[DN:uid=admin,ou=system affiliation:[system]]; error: No parameter 'client' found._",,denyeart,maripo5,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzohj:",,,,Unset,Unset,,,,,,,,,,,,"
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,maripo5,skarim,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Sep/18 9:11 PM;denyeart;[~skarim] Can you triage?;;;","14/Sep/18 1:22 AM;skarim;https://gerrit.hyperledger.org/r/c/26288/;;;",,,,,,,,,,,,,,,,,,
Omit duplicate if statement which has same condition of previous one,FABC-710,33306,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Done,diizuka,diizuka,diizuka,29/Aug/18 2:05 PM,07/Sep/18 9:18 PM,28/Oct/23 2:21 AM,07/Sep/18 9:18 PM,v1.1.0,v1.2.0,,,,,v1.3.0,,,,,,0,,,,,,"Omit duplicate if statement which has same condition of previous one.

On lib/ca.go L440 to L443,
 there are two if statements with same condition.
{code:java}
if cfg.CA.Chainfile == """" {
		cfg.CA.Chainfile = ""ca-chain.pem""
}
if cfg.CA.Chainfile == """" {
		cfg.CA.Chainfile = ""ca-chain.pem""
}
{code}
Omit duplate one.
 Fix plan: [https://gerrit.hyperledger.org/r/#/c/25938/]",,diizuka,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzonr:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),diizuka,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Sep/18 3:01 AM;skarim;[~diizuka] Can you please add more details to this bug? It is not clear what if statement you are talking about

 ;;;",,,,,,,,,,,,,,,,,,,
Enrollment password shown while trying to register user with LDAP support,FABC-711,33385,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,maripo5,maripo5,31/Aug/18 5:39 AM,13/Sep/18 1:51 AM,28/Oct/23 2:21 AM,13/Sep/18 1:51 AM,v1.2.0,,,,,,v1.3.0,,,,,,0,Security,,,,,"While trying to register user via Fabric CA, when LDAP is enabled, enrollment password is shown in error message body

STEPS TO REPRODUCE:
 # Integrate Fabric CA with LDAP
 # Enroll user via Fabric client
 # Try to register user via Fabric client

CURRENT RESULT:

As the result of (3) error message is shown with revealed password of user enrollment made in (2)
{code:java}
root@ubuntu:/# fabric-ca-client enroll -u http://admin:my_secret_password@localhost:7054
2018/08/30 19:41:29 [INFO] generating key: &{A:ecdsa S:256}
2018/08/30 19:41:29 [INFO] encoded CSR
2018/08/30 19:41:29 [INFO] Stored client certificate at /etc/hyperledger/fabric-ca-server/msp/signcerts/cert.pem
2018/08/30 19:41:29 [INFO] Stored root CA certificate at /etc/hyperledger/fabric-ca-server/msp/cacerts/localhost-7054.pem
2018/08/30 19:41:29 [INFO] Stored intermediate CA certificates at /etc/hyperledger/fabric-ca-server/msp/intermediatecerts/localhost-7054.pem
root@ubuntu:/# fabric-ca-client register --id.name test_user --id.type user
2018/08/30 19:41:48 [INFO] Configuration file location: /etc/hyperledger/fabric-ca-server/fabric-ca-client-config.yaml
Error: Response from server: Error Code: 0 - '&{admin %!!(MISSING)!(MISSING)s(*ldap.Entry=&{cn=admin,dc=mydomain,dc=example,dc=com []}) %!!(MISSING)!(MISSING)s(*ldap.Client=&{localhost 389 false cn=admin,dc=mydomain,dc=example,dc=com my_secret_password dc=mydomain,dc=example,dc=com (cn=%!!(MISSING)s(MISSING)) (memberUid=%!!(MISSING)s(MISSING)) [uid member] map[hf.Revoker:0xc420201740] map[groups:map[:]] 0xc4203b4dc0 0xc420138550 0xc4202ad2c0})}' does not have authority to register identities

{code}
 *""my_secret_password""*  is return in error message",,maripo5,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzozr:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),maripo5,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Sep/18 4:03 AM;skarim;[~maripo5] Registration is not something that is supported if you are using LDAP. If using LDAP, users needs to managed through the LDAP it self and not through the fabric-ca-client. I do agree that the error you are getting is not correct, and a more appropriate message should be sent indicating that registration while using LDAP is not supported.;;;","11/Sep/18 11:51 AM;skarim;https://gerrit.hyperledger.org/r/c/26206/;;;",,,,,,,,,,,,,,,,,,
Revendor amcl and idemix packages (with MT fixes applied) for fabric-ca,FABC-712,33428,,Task,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,adc,dubovitskaya,dubovitskaya,03/Sep/18 1:28 AM,05/Sep/18 10:21 PM,28/Oct/23 2:21 AM,05/Sep/18 10:21 PM,,,,,,,v1.4.0,,,,,,0,idemix,,,,,,,dubovitskaya,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FABC-592,,,No,,Unset,No,,,"1|hzzp7b:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dubovitskaya,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Sep/18 6:22 AM;dubovitskaya;CR: https://gerrit.hyperledger.org/r/#/c/26057/;;;",,,,,,,,,,,,,,,,,,,
Update baseimage release version in fabric-ca master branch,FABC-713,33525,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,06/Sep/18 4:39 AM,13/Sep/18 9:57 AM,28/Oct/23 2:21 AM,13/Sep/18 9:57 AM,v1.3.0,,,,,,v1.3.0,,,,,,0,,,,,,"Update baseimage release version in fabric-ca master branch

Update BASEIMAGE Release Version to 0.4.11 in fabric-ca Makefile",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzpnz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Sep/18 4:10 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/26117/;;;",,,,,,,,,,,,,,,,,,,
Update baseimage release version in fabric-ca master branch,FABC-715,33625,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,vijaypunugubati,vijaypunugubati,vijaypunugubati,11/Sep/18 1:25 AM,08/Nov/18 12:40 AM,28/Oct/23 2:21 AM,08/Nov/18 12:40 AM,,,,,,,,,,,,,0,,,,,,"Update baseimage release version in fabric-ca master branch

Update BASEIMAGE Release Version to 0.4.11 in fabric-ca Makefile",,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzq67:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric Version in Makefile should be current version,FABC-716,33663,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,latitiah,latitiah,latitiah,11/Sep/18 11:22 PM,06/Oct/18 1:45 AM,28/Oct/23 2:21 AM,18/Sep/18 11:29 PM,,,,,,,v1.3.0,,,,,,0,,,,,,"Regardless of whether or not there is a release of fabric builds, the version of fabric builds that should be used for fabric-ca should be the current version. 

Currently, the Makefile is pulling v1.2 images for fabric and building from those images.

See the following, notice the base images being 1.2 images
https://pastebin.com/rq0Bnk52
",,latitiah,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6489,,,,,FABC-131,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzqfj:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,rameshthoomu,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Sep/18 12:19 AM;latitiah;Proposed solution is to use {code}<architecture>-latest{code}
 instead of {code}<architecture>-<previous version>{code} This will then pull the latest version of the build regardless of the associated sha;;;","12/Sep/18 12:20 AM;latitiah;https://gerrit.hyperledger.org/r/26226;;;","15/Sep/18 5:18 AM;rameshthoomu;I proposed similar change here which got cherry picked from release-1.2 branch https://gerrit.hyperledger.org/r/#/c/23513/ 
this change will pull fabric-peer, etc.. images from nexus when we are building fabric-ca-* images..

With this, we no need build fabric images before build fabric-ca images.;;;","15/Sep/18 5:33 AM;latitiah;If I have fabric builds locally, I should use the local builds and not pull something new. Pull the fabric images only when you need to.

For example, given my environment looks like the following:
{code}
hyperledger/fabric-tools      amd64-1.3.0-snapshot-e89b901   e4133b8dba02
hyperledger/fabric-tools      amd64-latest                   e4133b8dba02
hyperledger/fabric-tools      latest                         e4133b8dba02
hyperledger/fabric-testenv    amd64-1.3.0-snapshot-e89b901   3de13861a486
hyperledger/fabric-testenv    amd64-latest                   3de13861a486
hyperledger/fabric-testenv    latest                         3de13861a486
hyperledger/fabric-buildenv   amd64-1.3.0-snapshot-e89b901   2945bada2ba4
hyperledger/fabric-buildenv   amd64-latest                   2945bada2ba4
hyperledger/fabric-buildenv   latest                         2945bada2ba4
hyperledger/fabric-ccenv      amd64-1.3.0-snapshot-e89b901   36a17bdde6ae
hyperledger/fabric-ccenv      amd64-latest                   36a17bdde6ae
hyperledger/fabric-ccenv      latest                         36a17bdde6ae
hyperledger/fabric-orderer    amd64-1.3.0-snapshot-e89b901   ecec097b0c06
hyperledger/fabric-orderer    amd64-latest                   ecec097b0c06
hyperledger/fabric-orderer    latest                         ecec097b0c06
hyperledger/fabric-peer       amd64-1.3.0-snapshot-e89b901   47e9bc696c9a
hyperledger/fabric-peer       amd64-latest                   47e9bc696c9a
hyperledger/fabric-peer       latest                         47e9bc696c9a
hyperledger/fabric-baseimage  amd64-0.4.11                   dda040af1f4e
hyperledger/fabric-baseos     amd64-0.4.11                   d96eacdce145
hyperledger/fabric-zookeeper  latest                         2b51158f3898
hyperledger/fabric-kafka      latest                         936aef6db0e6
hyperledger/fabric-couchdb    latest                         3092eca241fc
hyperledger/fabric-baseimage  amd64-0.4.10                   62513965e238
hyperledger/fabric-baseos     amd64-0.4.10                   52190e831002
{code}
fabric-ca should use my local images and not download fresh images from nexus. If I don't have local images, then those images should be downloaded. This would be seamless if the images were published to dockerhub, but since they are not my understanding is that the script found here was to take care of that: [https://gerrit.hyperledger.org/r/#/c/26254/]

In other words, if I have changes in my local copy of fabric that I have built and I want to build fabric-ca using those local builds, I should be able to do that without going to nexus.;;;",,,,,,,,,,,,,,,,
"run invoke chaincode with ""MSP error: the supplied identity is not valid""",FABC-717,33714,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,gsqtds,gsqtds,gsqtds,13/Sep/18 12:46 PM,21/Sep/18 10:32 PM,28/Oct/23 2:21 AM,21/Sep/18 10:32 PM,,,,,,,v1.3.0,,,,,,0,,,,,,"when i use a user enroll from fabric-ca server , invoke chaincode with fllower errors:
2018-09-13 11:18:17.703 CST [protoutils] ValidateProposalMessage -> WARN 877a channel [testchannel]: MSP error: the supplied identity is not valid: x509: certificate has expired or is not yet valid.

I inspect the pem:
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            72:17:6d:7f:85:3f:54:c6:8e:96:a2:8b:df:56:74:b8:c3:27:e3:57
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: C=US, ST=California, L=San Francisco, O=org1-firstnet, CN=ca.org1-firstnet
        Validity
            Not Before: Sep 11 03:27:00 2018 GMT
            Not After : Sep 11 03:32:00 2019 GMT
        Subject: OU=client, OU=org1, OU=department1, CN=user
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:
                    04:52:35:39:45:b1:64:cc:d4:74:d8:0b:bb:99:69:
                    56:83:0c:81:77:9e:9e:02:b9:e0:0d:76:52:62:5f:
                    df:1d:0b:46:0b:e9:35:84:bc:a6:94:bf:1c:98:57:
                    e9:11:3f:aa:f2:a1:ef:ec:bb:28:12:06:b8:56:c5:
                    b8:b4:b3:e6:be
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Key Identifier:
                F4:F5:87:15:36:E7:60:E7:79:24:8F:BB:C1:7E:32:D5:E8:53:CC:D1
            X509v3 Authority Key Identifier:
                keyid:58:62:0C:8D:DC:17:18:DE:69:47:3A:4B:B4:D8:37:FB:6E:56:D1:13:AB:7E:67:BA:6B:E1:DA:09:F4:32:4B:4B

            1.2.3.4.5.6.7.8.1:
                {""attrs"":{""hf.Affiliation"":""org1.department1"",""hf.EnrollmentID"":""user"",""hf.Type"":""client""}}
    Signature Algorithm: ecdsa-with-SHA256
         30:45:02:21:00:a0:1b:36:da:4d:00:01:93:df:4d:63:81:0c:
         c1:5b:02:d8:2d:fe:b8:fd:26:5a:ec:a9:4c:f2:d5:30:31:9b:
         b8:02:20:61:93:3a:18:64:c5:6f:4e:50:62:d9:30:96:45:35:
         6b:d4:7f:0e:83:ae:ec:17:40:e1:ef:a5:d5:fb:37:57:73

and the user of the pem can invoke the chaincode :

Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            4a:da:2a:7e:c9:26:d3:ac:5a:1e:e4:ec:8d:7f:ac:a7:02:18:d9:03
        Signature Algorithm: ecdsa-with-SHA256
        Issuer: C=US, ST=California, L=San Francisco, O=org1-firstnet, CN=ca.org1-firstnet
        Validity
            Not Before: Sep 12 08:16:00 2018 GMT
            Not After : Sep 12 08:21:00 2019 GMT
        Subject: OU=client, OU=org1, OU=department1, CN=bbb
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
            EC Public Key:
                pub:
                    04:f5:97:2d:e8:48:fb:3b:65:99:cb:6c:fa:41:84:
                    52:b5:bf:2f:da:e9:a4:3b:13:fa:e9:15:ae:d1:ad:
                    ae:89:3b:22:8b:e4:0b:d0:6f:2b:78:47:7d:f2:20:
                    2c:02:e8:5e:b6:d2:2a:e7:5b:b6:4a:00:26:3e:5d:
                    16:45:7b:ad:24
                ASN1 OID: prime256v1
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Key Identifier:
                EB:E5:6F:E9:E5:0F:5E:6D:34:78:2B:62:AF:D9:3F:D3:EE:24:CC:10
            X509v3 Authority Key Identifier:
                keyid:58:62:0C:8D:DC:17:18:DE:69:47:3A:4B:B4:D8:37:FB:6E:56:D1:13:AB:7E:67:BA:6B:E1:DA:09:F4:32:4B:4B

            1.2.3.4.5.6.7.8.1:
                {""attrs"":{""hf.Affiliation"":""org1.department1"",""hf.EnrollmentID"":""bbb"",""hf.Type"":""client""}}
    Signature Algorithm: ecdsa-with-SHA256
        30:45:02:21:00:af:70:37:09:0a:a7:53:5e:64:d4:ce:17:9f:
        16:b6:47:7d:b0:0d:03:55:76:63:34:bc:18:c2:9d:7f:70:95:
        59:02:20:32:1a:df:cc:e2:5c:42:07:8e:df:c8:df:67:12:00:
        49:fb:b7:e8:cf:a9:69:09:7f:6c:d6:d9:d6:1f:2b:bd:1d


",,gsqtds,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-12050,,,,,,,,,FAB-12050,,,,,,,"13/Sep/18 6:44 PM;gsqtds;ca.cer;https://jira.hyperledger.org/secure/attachment/15807/ca.cer","13/Sep/18 6:44 PM;gsqtds;user.cer;https://jira.hyperledger.org/secure/attachment/15806/user.cer",,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzqon:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),gsqtds,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Sep/18 12:56 PM;gsqtds;add t use openssl verify the file ,it's ok;;;","13/Sep/18 6:42 PM;gsqtds;I found the reason 
in fabric-ca code: 
github.com/cloudflare/cfssl/signer/signer.go   line 290:
notBefore = time.Now().Round(time.Minute).Add(backdate)
because Round sub the seconds result in the pem of user  ""Not Before"" greater than the pem of root'ca ""Not Before"";;;","17/Sep/18 11:41 PM;skarim;[~gsqtds] The expiration of a certificate is not related to the ""Not Before"" of a the issue CA certificate. The certification expiration is just checked against the current time to see that it falls between the NotBefore and NotAfter value of the certificate. Do you have the full set of logs with debug enabled from when the error occurred? Maybe the certification validation is failing due to incorrectly configured MSP?

 ;;;","19/Sep/18 11:17 AM;gsqtds;[~skarim] I am developing baas platform based on fabric. Because the crypto configuration file is generated, it contains the root CA certificate and takes a very short time to register with the user. So if both the crypto configuration file and the registered user are within the first 30 seconds of the same minute, then the user registration time is less than the root certificate generation time. This is because not before uses the round function.

NotBefore = time.Now ().Round (time.Minute).Add (backdate)

For this problematic network, I tried to make it work well if another new user was registered at a later time.;;;","19/Sep/18 11:20 AM;gsqtds;I've emptied the network, and if you want to simulate a good situation like this, just generate the configuration file through the script in the first 30 seconds of the same minute as the registered user.;;;","19/Sep/18 6:32 PM;gsqtds;fixed at https://jira.hyperledger.org/browse/FAB-12050;;;","20/Sep/18 11:59 PM;skarim;[~gsqtds] Do we need any more changes? Is this item fixed by FAB-12050?;;;","21/Sep/18 11:12 AM;gsqtds;[~skarim] no need more changes, it's fixed by FAB-12050.;;;","21/Sep/18 10:31 PM;skarim;Based on comment above, closing this out;;;",,,,,,,,,,,
"When I use the affiliation list on the condition that there is no orgs,get the npe error",FABC-718,33766,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,bjzhang03,bjzhang03,14/Sep/18 6:56 PM,21/Sep/18 8:53 PM,28/Oct/23 2:21 AM,18/Sep/18 11:18 PM,v1.3.0,,,,,,v1.3.0,,,,,,0,,,,,,"I want to set the intermediate ca demo.But after I delete all of the default orgs,and use the command `fabric-ca-client affiliation list`,it get into the nil pointer referenced error.",,bjzhang03,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Sep/18 6:56 PM;bjzhang03;intermediate_ca_demo.tar.gz;https://jira.hyperledger.org/secure/attachment/15811/intermediate_ca_demo.tar.gz",,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzqxj:",,,,Unset,Unset,,,,,,,,,,,,"Get into the  intermediate_ca_demo dir,run the command `docker-compose up -d`,and you will reproduce the bugs",,Unset,,,,,,Unset,,Unset,,(Please add usage information),bjzhang03,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Sep/18 6:59 PM;bjzhang03;cat the logs of the container intermediate-ca-orgxm, and get the detail information.;;;","17/Sep/18 11:29 PM;skarim;https://gerrit.hyperledger.org/r/c/26343/;;;","21/Sep/18 8:53 PM;bjzhang03;thanks;;;",,,,,,,,,,,,,,,,,
Upgrade go version to 1.10.4,FABC-719,33789,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,14/Sep/18 11:25 PM,18/Sep/18 5:38 AM,28/Oct/23 2:21 AM,18/Sep/18 5:38 AM,v1.3.0,,,,,,v1.3.0,,,,,,0,,,,,,Upgrade go version to 1.10.4,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzqz3:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Update fabric-ca build to use base image 0.4.12,FABC-720,33889,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,19/Sep/18 6:12 AM,19/Sep/18 9:02 PM,28/Oct/23 2:21 AM,19/Sep/18 8:36 PM,,,,,,,v1.3.0,,,,,,0,,,,,,Update fabric-ca build to use base image 0.4.12,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzrhb:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
remove fabric-samples/fabric-ca sample,FABC-721,33903,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,ChristopherFerris,ChristopherFerris,20/Sep/18 12:02 AM,26/Aug/19 7:22 AM,28/Oct/23 2:21 AM,26/Aug/19 7:22 AM,,,,,,,,,,,,,0,,,,,,"This sample is not really a sample but a regression/smoke test. It also needs to be refactored to be less convoluted. Removing from fabric-samples. If anything, it might be added to fabric-ca but should not use the hybrid image fabric-ca-tools",,ChristopherFerris,scottz,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzrjr:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ChristopherFerris,scottz,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Sep/18 5:57 AM;scottz;https://gerrit.hyperledger.org/r/#/c/26391/;;;","20/Sep/18 6:36 AM;scottz;A few questions:
 # Has a task been opened already to rewrite, as was suggested needed doing? It would be helpful to link it to ""relate to"" this jira.
 # Can we explain better why this is being removed?
 # And is there an urgency to do it now, without doing the refactor first? If not, then could we hold off on this until that gets done, to avoid leaving a hole in our test coverage?;;;","16/Oct/18 1:33 AM;scottz;[https://gerrit.hyperledger.org/r/#/c/26389/] was abandoned for now (FABCI-103) - because the decision was made to keep the test runining daily as long as it is passing with no mtc effort.;;;",,,,,,,,,,,,,,,,,
"remove fabric-ca-peer, fabric-ca-orderer, fabric-ca-tools images from build",FABC-722,33916,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,20/Sep/18 4:25 AM,22/Sep/18 5:29 AM,28/Oct/23 2:21 AM,22/Sep/18 5:29 AM,v1.2.0,,,,,,v1.3.0,,,,,,0,,,,,,"normal build has a hard dependency on the fabric images being published. This creatses a serialization issue for the release process requiring fabric to be fully released and published before the fabric-ca release can begin to be processed in CI. remove fabric-ca-peer, fabric-ca-orderer, fabric-ca-tools from build dependency. Add new docker-all target to build those images and fabric-ca for fabric-samples/fabric-ca example tutorial.",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzrlj:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Sep/18 5:29 AM;denyeart;[https://gerrit.hyperledger.org/r/#/c/26401/]{color:#444444}
{color};;;",,,,,,,,,,,,,,,,,,,
fabric-ca-server default config vulnerable to brute-force attack,FABC-723,33949,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,skarim,ChristopherFerris,ChristopherFerris,21/Sep/18 1:30 AM,10/Nov/18 4:04 AM,28/Oct/23 2:21 AM,10/Nov/18 4:04 AM,v1.1.0,v1.2.0,,,,,v1.2.2,v1.3.1,,,,,0,,,,,,"h2. fabric-ca server
 * Default configuration maxenrollments value -1(enable outside enrollment)
 * Listening 0.0.0.0:7054(easily discoved and can be reached)
 * No limit to wrong password try Above conditions result in brute force to CA server admin account

h2. Impact
h2. Attack gain a high-level permissioned account to permissioned network and can add\delete\update\query",,ChristopherFerris,dhuseby,mastersingh24,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Sep/18 6:28 AM;dhuseby;Poc_of_Brute_Force.pdf;https://jira.hyperledger.org/secure/attachment/15844/Poc_of_Brute_Force.pdf",,,,,,,skarim,smithbk,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzrrb:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ChristopherFerris,dhuseby,mastersingh24,skarim,smithbk,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Sep/18 1:53 AM;ChristopherFerris;[~denyeart] [~mastersingh24] FYA;;;","21/Sep/18 2:28 AM;mastersingh24;*No limit to wrong password try Above conditions result in brute force to CA server admin account* is an issue.  I don't see the others as being serious issues.  The maxenrollments = -1 issue is mitigated / ameliorated if we fix the wrong password issue;;;","21/Sep/18 3:28 AM;dhuseby;I just got asked by somebody named ""skarim"" about getting access to this bug.  I just wanted to check with all of you that I should add them before I do.;;;","21/Sep/18 3:51 AM;ChristopherFerris;[~skarim] ping;;;","21/Sep/18 6:32 AM;dhuseby;[^Poc_of_Brute_Force.pdf]

I scanned the .docx for viruses and opened it in a throwaway virtual machine to export it out as a PDF so I could attach it here.;;;","27/Sep/18 11:08 PM;skarim;https://gerrit.hyperledger.org/r/c/26603/;;;","28/Sep/18 12:59 AM;dhuseby;So this is a valid issue.  What severity so that I can get back to the bug reporter? I'm thinking that the severity is high since it is a bug in the default configuration (see last item under ""high"" here: [https://hackerone.com/hyperledger|https://hackerone.com/hyperledger]);;;","28/Sep/18 1:54 AM;skarim;[~dhuseby] Yes, this is a valid issue and I think a high severity is appropriate.;;;","29/Sep/18 8:26 AM;dhuseby;Thanks for the feedback.  I have set severity to high in the H1 tool and set the reward accordingly.;;;",,,,,,,,,,,
change PREV_VERSION so that it is automatically determined,FABC-724,34113,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,ChristopherFerris,ChristopherFerris,ChristopherFerris,26/Sep/18 11:49 PM,26/Mar/19 7:38 PM,28/Oct/23 2:21 AM,26/Mar/19 7:38 PM,v1.3.0,,,,,,,,,,,,0,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzsp3:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Sep/18 11:51 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/26600;;;",,,,,,,,,,,,,,,,,,,
Release Hyperledger Fabric CA v1.2.1,FABC-725,34168,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,28/Sep/18 4:21 AM,29/Sep/18 8:12 AM,28/Oct/23 2:21 AM,29/Sep/18 8:12 AM,,,,,,,v1.2.1,,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzsyn:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Feature - Add getcrl endpoint with anonymous access,FABC-726,34242,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,ahmedsajid,ahmedsajid,02/Oct/18 12:27 AM,07/Oct/18 11:55 AM,28/Oct/23 2:21 AM,07/Oct/18 11:55 AM,,,,,,,,,,,,,0,fabric-ca,,,,,"*Senario:*
3 Orgs in a network lets call it AdminOrg, OrgA and OrgB
3 Fabric CAs AdminOrgCA, OrgACA and OrgBCA. All these CAs are trusted by all Orgs in the network.
3 Fabric Channels ""shared"" (AdminOrg has Admin previledges), ""channelA"" (OrgA is admin) and ""channelB"" (OrgB is admin).
All Orgs use Fabric channel ""shared"". OrgA decides to revoke User1 and is able to generate CRL and push this change to ""channelA"". OrgA would now have to manually share this CRL which AdminOrg so it can push an updated on ""shared"" channel that User1 is revoked hence doesn't have any access to this channel.

Adding getcrl endpoint with anonymous access would allow AdminOrg to do a periodic pull of CRLs of each Org and push update on ""shared"" channel.

I believe currently gencrl generates a new CRL when called. If the latest CRL is stored in DB then this could be returned when getcrl endpoint is queried.

Some related work might be happening here,
https://jira.hyperledger.org/browse/FABC-571
https://jira.hyperledger.org/browse/FABC-502",,ahmedsajid,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzztbr:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ahmedsajid,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Oct/18 11:55 AM;ahmedsajid;This wont work if the CRL update isn't signed by the Admin of the Org. So getting CRL isn't useful at all for submission to the shared channel.;;;",,,,,,,,,,,,,,,,,,,
Pushing revocation information to channel's organization members,FABC-727,34245,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,latitiah,latitiah,02/Oct/18 1:33 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"There are times when an organization should not have to request revocation information, but revocation information should be pushed to the members on a certain channel. This ""pushing"" can be done after the revocation is performed for an immediate update to the revocation lists in the other peer nodes/organizations.

In other words, if a certain user needs to be immediately revoked, that revocation is immediately recognized by all nodes on the given channel.",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|hzztc7:",,,,Yes,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
cainfo to include database information,FABC-728,34402,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,skarim,skarim,04/Oct/18 1:13 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,15/Nov/18 4:34 AM,,,,,,,,,,,,,0,serviceability,,,,,"In talks with support team, they mentioned a serviceability improvement in regards to CA's connection to the database.

In IBM Blockchain Platform, MySQL is used as the back-end database for a CA and there have been issues where MySQL goes into a super read only mode. This is mainly a MySQL issue, but if the CA could provide information about the connection to its back-end database that could be helpful. For example, the ""cainfo"" command could report something like it is connected to <location> as the back-end data store and then provide information on the state of that connection.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzu7j:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Nov/18 4:34 AM;skarim;After further discussion the information being asked for is already logged, the database connection is output to the logs;;;",,,,,,,,,,,,,,,,,,,
Incorrect error message while trying to generate CRL,FABC-729,34415,,Bug,Unverified,FABC,Fabric CA,software,denyeart,,,Lowest,,,maripo5,maripo5,04/Oct/18 7:55 AM,19/Apr/20 12:51 AM,28/Oct/23 2:21 AM,,v1.2.0,,,,,,,,,fabric-ca-server,,,0,,,,,,"STEPS TO REPRODUCE

1. Configure Fabric CA with LDAP:

 - define LDAP user - admin2 __ 
{code:java}
DN: cn=admin2,ou=admin,ou=engineering,ou=Groups,dc=mydomain,dc=example,dc=com
{code}
 - configure fabric-ca-server-config.yaml:
{code:java}
names: ['cn']
converters:
   - name: hf.GenCRL
   value: attr(""cn"") =~ ""admin1""
{code}
 

admin2 enrollment:
{code:java}
fabric-ca-client enroll -u http://admin2:admin2pw@localhost:7054 --enrollment.attrs hf.GenCRL
{code}
CRL generation: 
{code:java}
root@ubuntu:/# fabric-ca-client gencrl
2018/10/03 21:54:09 [INFO] Configuration file location: /etc/hyperledger/fabric-ca-server/fabric-ca-client-config.yaml
Error: Response from server: Error Code: 20 - Authorization failure

{code}
Above error message is confusing, admin2 is authorized but does not have authority to generate CRL (doesn't match converter's rule in server configuration file)

 

Error message should looks like this:

_""The identity 'admin2' does not have authority to generate a CRL""_ instead * ** _""Response from server: Error Code: 20 - Authorization failure""_",,denyeart,GuillaumeCisco,maripo5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzztpr:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,GuillaumeCisco,maripo5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Oct/18 2:13 PM;denyeart;[~skarim] could you take a look?;;;","29/Jan/19 6:56 PM;GuillaumeCisco;I get the same error, not using LDAP, with an user who has hf.GenCRL set to true.
I'm trying to implement the generateCRL method in the fabric-sdk-py: https://gerrit.hyperledger.org/r/#/c/29000/;;;",,,,,,,,,,,,,,,,,,
Update fabric-ca to baseimage 0.4.13,FABC-730,34492,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,09/Oct/18 12:32 PM,09/Oct/18 2:13 PM,28/Oct/23 2:21 AM,09/Oct/18 2:13 PM,,,,,,,,,,,,,0,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-960,,FAB-12343,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzu3b:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Can not register identity when LDAP is enabled,FABC-731,34501,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,volodyad,volodyad,09/Oct/18 9:36 PM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,05/Jul/19 9:09 PM,,,,,,,,,,fabric-ca-server,,,0,,,,,,"ldap.client implements UserRegistry GetAffiliation method, at the moment it is not implemented for ldap

_func (lc *Client) GetAffiliation(name string) (spi.Affiliation, error) \{ return nil, errNotSupported }_

Because of this _validateAffiliation(req *api.RegistrationRequest, ctx *serverRequestContextImpl)_ method always fails in case affiliation not empty

composer framework always require affiliation to be not empty, so it means that we cannot use composer with fabric when ldap is enabled",,denyeart,mastersingh24,skarim,volodyad,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzu53:",,,,Unset,Unset,,,,,,,,,,,,"Setup ldap on fabric ca
Create test network via composer 
Registry new identity",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mastersingh24,skarim,volodyad,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Oct/18 10:59 AM;denyeart;[~skarim] Can you triage?;;;","10/Oct/18 4:03 PM;volodyad;As I understand the error occurs because you can not register new user via fabric when ldap enabled. We have very misleading error messages - at first it show something like _""'admin2' with affiliation of 'org2' is not authorized to get 'testuser' with affiliation of 'hyperledger'_, after you set proper affiliations for admin and user - it just fails with _""code"":0,""message"":""Registration of 'user' failed in affiliation validation: Failedgetting affiliation 'users': Not supported"" ._

Would be better if error message will notify that you ca no register new users when ldap enabled.

 

Regarding compsoer i still can user it, just use compose identity bind instead of composer identity issue;;;","10/Oct/18 11:00 PM;skarim;[~volodyad] Can you please provide step by step reproduction steps? I am not sure I totally understand the flow that results in the error message you are seeing;;;","11/Oct/18 6:35 AM;volodyad;To reproduce need to enable and configure ldap in fabic ca,

then deploy any test network based on composer, like [https://github.com/hyperledger/composer-sample-networks/tree/master/packages/trade-network]

create demo participant
 _composer participant add -c admin@sp -d '\{""$class"": ""org.example.trading.Trader"",""tradeId"": ""TRADER1"",""firstName"": ""Jenny"",""lastName"": ""Jones""}'_
 and the issue identity for participant
 _composer identity issue -c admin@sp -f test.card --participantId_ ""org.example.trading.Trader#TRADER1"" -u trader
 this command send register new identity request to fabric-ca which will cause first error;;;","05/Jul/19 9:09 PM;mastersingh24;Maybe there is an issue with the error messages, but in any case when using LDAP register is not supported.  We are also moving away from Composer as well;;;",,,,,,,,,,,,,,,
LDAP converter doesn't recognize  attributes correctly,FABC-732,34540,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid: Works as Expected,ashutosh_kumar,maripo5,maripo5,10/Oct/18 6:40 AM,15/Oct/18 11:49 PM,28/Oct/23 2:21 AM,11/Oct/18 3:01 AM,v1.2.0,,,,,,,,,,,,0,,,,,,"{color:#172b4d}That issue was initially discussed with Kumar Ashutosh on hyperledger chat and i am opening Jira for that to more clarify the issue{color}

LDAP structure:

!image-2018-10-09-23-14-43-020.png!

Let's say that the requirement is to execute chaincode by users in _ou=dev_

To make it possible:
 # i defined custom attribute; _executeChaincode_
 # check in chaincode if _executeChaincode_ evaluate to true
 # implement converters in _fabric-ca-server-config.yaml_ file:

{code:java}
      names: ['ou', 'cn']
      converters:
         - name: executeChaincode
           value: attr(""ou"") =~ "".*dev.*""
{code}
4. Enrolled user and pass _executeChaincode_ as enrollment attribute

The issue in my opinion is in _attr_ function defined in server config file

My assumption here was that _attr(""ou"")_ will return string that will consist of all _ou_ attributes, so for dev1 sth like  *""dev,engineering,Groups""* but it returned empty String.

However _attr(""cn"")_ will return _""dev1""_ string.

So the issue is that in case of attributes which occur more than once in _DN_, _attr_ function doesn't return anything, but for these which occur only once it works fine.",,ashutosh_kumar,denyeart,maripo5,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Oct/18 6:14 AM;maripo5;image-2018-10-09-23-14-43-020.png;https://jira.hyperledger.org/secure/attachment/16117/image-2018-10-09-23-14-43-020.png",,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzudz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ashutosh_kumar,denyeart,maripo5,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Oct/18 11:01 AM;denyeart;[~skarim] Can you triage?;;;","10/Oct/18 11:05 PM;skarim;[~ashutosh_kumar] Did you confirm this as a bug or more discussion is necessary?;;;","10/Oct/18 11:14 PM;ashutosh_kumar;[~skarim] , I am trying to think possible solution for the scenario described above. But I'll put my thoughts here.;;;","10/Oct/18 11:22 PM;ashutosh_kumar;[~maripo5] , you need to think in terms of how you can construct LDAP filter to get required attribute . So , what is your end goal ? You want users only from certain OU to be able to execute chaincode ? If that the case , the easiest thing to do , is to have your search DN constructed in such a way that an only Objectclass in the DIT corresponding to your OU will be interrogated. Will this work for you ?

Alternatively , you can control it via Group and Role LDAP construct.

 

Let me know which approach will work for you and then I'll move to next steps.;;;","15/Oct/18 4:08 AM;maripo5;[~skarim], [~ashutosh_kumar], could you please explain, why it is working as expected ?

I totally agree that i can make workaruond for that and it will works but the issue is about finding attributes if they occur multiple times in DN. If attribute occurs only once, then attr function return correct value, if multiple times, then nothing is returned. I am afraid that it's not very unlikely case while working with LDAP;;;","15/Oct/18 11:49 PM;ashutosh_kumar;[~maripo5] , LDAP attributes do not occur in DN , it is contained in LDAP object. So , you use your DN for narrow down the LDAP object that you are after. That DN is based DN of your search. If you do not have enough information to narrow down your search , your base DN becomes Root DN of your tree.

LDAP client implementation of Fabric CA merely searches for the object found in Base DN and return you the value for that attribute. In your LDAP search , entries appearing in Base DN is not being returned as search response and hence Fabric CA LDAP client cannot do anything about it.

Let me know , if you have more question(s).

 ;;;",,,,,,,,,,,,,,
Docker images should use Alpine rather than Ubuntu or Debian,FABC-735,34654,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,14/Oct/18 3:59 AM,26/Mar/19 7:40 PM,28/Oct/23 2:21 AM,18/Jan/19 12:54 AM,,,,,,,v2.0.0,,,,,,0,,,,,,Alpine is the recommended base OS for Docker images.  It is generally more secure than other distros (i.e. typically does not have any vulnerabilities) and is much smaller than other distros.,,mastersingh24,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11096,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzzuzr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,silliman,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Jan/19 12:28 AM;mastersingh24;https://gerrit.hyperledger.org/r/28684;;;",,,,,,,,,,,,,,,,,,,
Use proper golint pkg,FABC-736,34660,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,mastersingh24,mastersingh24,mastersingh24,15/Oct/18 5:46 AM,16/Oct/18 4:25 AM,28/Oct/23 2:21 AM,16/Oct/18 4:25 AM,,,,,,,v1.4.0,,,,,,0,,,,,,"Should use 

 {{golang.org/x/lint/golint}}",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzv13:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Oct/18 5:51 AM;mastersingh24;https://gerrit.hyperledger.org/r/26985;;;",,,,,,,,,,,,,,,,,,,
Fix goimports errors,FABC-737,34663,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,15/Oct/18 6:32 AM,16/Oct/18 12:02 AM,28/Oct/23 2:21 AM,16/Oct/18 12:02 AM,,,,,,,v1.4.0,,,,,,0,,,,,,"Real issue is using master branch of tools such as goimports, but in any case need to fix:


{noformat}
The following files have import problems:
./lib/serverrequestcontext.go
./lib/dbutil/dbutil.go
./lib/serverregister.go
./lib/servercertificates_test.go
./lib/serverrevoke.go
./lib/serveridentities_test.go
./lib/certdbaccessor.go
./lib/tls/tls.go
./lib/identity.go
./lib/server/idemix/issuer_test.go
./lib/server/idemix/ra_whitebox_test.go
./lib/server/idemix/creddbaccessor.go
./lib/server/idemix/issuercredential_test.go
./lib/server.go
./lib/client.go
./lib/tcert/util_test.go
./lib/tcert/tcert.go
./lib/tcert/util.go
./lib/util.go
./lib/ldap/client.go
./lib/serveraffiliations_test.go
./util/flag.go
./util/csp.go
./util/util.go
./cmd/fabric-ca-client/command/certificate_test.go
./cmd/fabric-ca-client/command/main_test.go
./cmd/fabric-ca-client/command/getcainfo.go
./cmd/fabric-ca-client/command/revoke.go
./cmd/fabric-ca-client/command/enroll.go
./cmd/fabric-ca-client/command/config.go
./cmd/fabric-ca-server/config.go
./test/integration/default/default_test.go
./test/fabric-ca-load-tester/main.go
You may run 'goimports -w <file>' to fix each file.
{noformat}
",,denyeart,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzv1r:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mastersingh24,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Oct/18 6:40 AM;mastersingh24;https://gerrit.hyperledger.org/r/26986;;;","16/Oct/18 12:01 AM;denyeart;[~mastersingh24] I merged in master branch.  I assume we need to do the same thing in release branches?;;;",,,,,,,,,,,,,,,,,,
Use dep for dependency mgmt,FABC-738,34674,,Task,To Do,FABC,Fabric CA,software,denyeart,,,High,,,mastersingh24,mastersingh24,15/Oct/18 7:04 PM,03/Dec/19 9:19 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Fabric has moved away from using govendor for dependency management. CA should follow suit and use [dep|https://github.com/golang/dep] tool.",,mastersingh24,nyet,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzv3z:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,nyet,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/19 2:53 PM;nyet;Or move to go modules;;;",,,,,,,,,,,,,,,,,,,
Create Fabric-CA client SDK,FABC-739,34687,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,,baoyangc,baoyangc,15/Oct/18 11:21 PM,22/Sep/19 6:00 PM,28/Oct/23 2:21 AM,22/Sep/19 6:00 PM,,,,,,,,,,,,,0,,,,,,Every time when the fabric-ca release a new tag. The repo `fabric-sdk-go` will update it's dependencies which are import from fabric-ca. I don't think this is a good way. I think we should create fabric-ca client  golang SDK in the repo fabric-ca,,baoyangc,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-840,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzv6v:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baoyangc,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move to Go 1.11.1,FABC-740,34702,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,16/Oct/18 7:49 PM,17/Oct/18 6:47 PM,28/Oct/23 2:21 AM,17/Oct/18 6:47 PM,,,,,,,v1.4.0,,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzvaf:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Oct/18 9:52 PM;mastersingh24;https://gerrit.hyperledger.org/r/27022;;;",,,,,,,,,,,,,,,,,,,
Update User Document for BCCSP PKCS11 Softhsm configuration,FABC-741,34722,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ashutosh_kumar,ashutosh_kumar,ashutosh_kumar,17/Oct/18 4:19 AM,03/Nov/18 5:59 AM,28/Oct/23 2:21 AM,03/Nov/18 5:59 AM,,,,,,,,,,,,,0,fabric-ca,,,,,The current BCCSP user doc does not talk about softhsm configuration for PKCS11. Doc needs update and sample config file will be provided in the <fabric-ca>/testdata directory.,,ashutosh_kumar,vsudip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzvef:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ashutosh_kumar,vsudip,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Oct/18 3:32 AM;ashutosh_kumar;[https://gerrit.hyperledger.org/r/#/c/27067/] is CR;;;",,,,,,,,,,,,,,,,,,,
"when SDK uses TLS and CA does not, no error, downgrades silently",FABC-742,34790,,Bug,Returned,FABC,Fabric CA,software,denyeart,,,High,,ashutosh_kumar,ChristopherFerris,ChristopherFerris,19/Oct/18 8:33 PM,26/Aug/19 7:50 AM,28/Oct/23 2:21 AM,,v1.2.0,,,,,,,,,fabric-ca-server,,,0,,,,,,"From email to security list:

Hello,
  
 On fabric-ca 1.2.0 and fabric-sdk-go d489eba94c868f736015935e88da20faf9aa80d4 (July 2018) we observed that if the SDK client is configured with TLS CA certificates (see example configuration [1]) and the fabric-ca does not have TLS enabled (FABRIC_CA_SERVER_TLS_ENABLED=false), then the client will downgrade to http and proceed without errors. We expected the client to immediately abort, and not downgrade. We believe downgrading could allow a MITM attack where the attacker forces a client to downgrade to http and the client subsequently sends sensitive data over http (e.g., enrollId, enrollSecret). 
  
 [1] Example portion of go-sdk client configuration:
  
  [ca.org2.example.com|https://urldefense.proofpoint.com/v2/url?u=http-3A__ca.org2.example.com&d=DwMFaQ&c=jf_iaSHvJObTbx-siA1ZOg&r=33Ksn4bRkfEi53BOWQorz0ej6pr527Q2SbGcvZWUBSE&m=R63ZQ87zt6VyuYxGt-K_rrP0qH17-zJtqTIRaqrEqxw&s=S8ZBweYBEY_lCdeHV7omnQ8TwfjmA-nqHroHWYCBfkE&e=]:
    url: [https://ca.org2.example.com:7054|https://urldefense.proofpoint.com/v2/url?u=https-3A__ca.org2.example.com-3A7054&d=DwMFaQ&c=jf_iaSHvJObTbx-siA1ZOg&r=33Ksn4bRkfEi53BOWQorz0ej6pr527Q2SbGcvZWUBSE&m=R63ZQ87zt6VyuYxGt-K_rrP0qH17-zJtqTIRaqrEqxw&s=TJR4xaRtKpDGJVAM5k2HGE6SFtSXg-pwkXVkSEdeOIA&e=]
    tlsCACerts:
     path: ""/tmp/fabric/crypto-config/peerOrganizations/[org2.example.com/ca/ca.org2.example.com-cert.pem|https://urldefense.proofpoint.com/v2/url?u=http-3A__org2.example.com_ca_ca.org2.example.com-2Dcert.pem&d=DwMFaQ&c=jf_iaSHvJObTbx-siA1ZOg&r=33Ksn4bRkfEi53BOWQorz0ej6pr527Q2SbGcvZWUBSE&m=R63ZQ87zt6VyuYxGt-K_rrP0qH17-zJtqTIRaqrEqxw&s=sUIETCNk-5CDts8hl8mgd_loC6lZTyS8V7sIb_srOZI&e=]""
     client:
       key:
         path: ""/tmp/fabric/crypto-config/peerOrganizations/[org2.example.com/users/Admin@org2.example.com/tls/client.key|https://urldefense.proofpoint.com/v2/url?u=http-3A__org2.example.com_users_Admin-40org2.example.com_tls_client.key&d=DwMFaQ&c=jf_iaSHvJObTbx-siA1ZOg&r=33Ksn4bRkfEi53BOWQorz0ej6pr527Q2SbGcvZWUBSE&m=R63ZQ87zt6VyuYxGt-K_rrP0qH17-zJtqTIRaqrEqxw&s=aAYFnAvVRcyjAjLB3UMhpRfe5R-GWOgsPpdPTzWfTjU&e=]""
       cert:
         path: ""/tmp/fabric/crypto-config/peerOrganizations/[org2.example.com/users/Admin@org2.example.com/tls/client.crt|https://urldefense.proofpoint.com/v2/url?u=http-3A__org2.example.com_users_Admin-40org2.example.com_tls_client.crt&d=DwMFaQ&c=jf_iaSHvJObTbx-siA1ZOg&r=33Ksn4bRkfEi53BOWQorz0ej6pr527Q2SbGcvZWUBSE&m=R63ZQ87zt6VyuYxGt-K_rrP0qH17-zJtqTIRaqrEqxw&s=jV9dWapK4NpVt4G3Vb36KLbqY-94v4agImuf6v0NmEI&e=]""
    registrar:
      enrollId: admin
      enrollSecret: adminpw
    caName: [ca.org2.example.com|https://urldefense.proofpoint.com/v2/url?u=http-3A__ca.org2.example.com&d=DwMFaQ&c=jf_iaSHvJObTbx-siA1ZOg&r=33Ksn4bRkfEi53BOWQorz0ej6pr527Q2SbGcvZWUBSE&m=R63ZQ87zt6VyuYxGt-K_rrP0qH17-zJtqTIRaqrEqxw&s=S8ZBweYBEY_lCdeHV7omnQ8TwfjmA-nqHroHWYCBfkE&e=]
  ",,ashutosh_kumar,ChristopherFerris,denyeart,dhuseby,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrp3:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ashutosh_kumar,ChristopherFerris,denyeart,dhuseby,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Oct/18 8:36 PM;ChristopherFerris;Keith, can you please take a look at this? Bug report came through the security defect reporting list. [~mastersingh24] FYI;;;","02/Nov/18 12:00 PM;denyeart;[~ashutosh_kumar] Can you take a look and discuss with Keith?;;;","02/Nov/18 10:39 PM;ashutosh_kumar;This looks like SDK issue and not Fabric CA issue. Let me have a look at Fabric CA TLS configuration.;;;","02/Nov/18 11:16 PM;ashutosh_kumar;If fabric-ca server is not configured as TLS Server and Client connects to it as TLS client , it'll try to connect to non-TLS server , client does not see that port listening on TLS and initiate non-TLS traffic , that seems desired behavior. TLS is forced by Server , not client. Again it is dependent on TLS implementation of libraries. GoLang TLS implementation behaving the way it is.TLS is

It does not seem to be valid use case. To me valid use case will be trying to connect to Fabric CA on SSL protocol , if that succeed , then Fabric CA server is susceptible poodle or hearltbleed attack. It won't succeed as fabric CA server is configured to use Strong Cipher Suite. Closing this issue.

 ;;;","10/Dec/18 10:02 PM;dhuseby;[~ashutosh_kumar] [~ChristopherFerris] If the fabric-ca is not configured as a TLS server and the client tries to connect as a TLS client, is there any signal to the SDK client that the connection is insecure so that the connection can be dropped before the SDK transmits the secrets over the wire?  Seems like the client should have control over whether their secrets are transmitted over an insecure channel or not.  This also goes back to fact that authentication is done by transmitting a secret value.  If authentication was done with a challenge-response protocol this wouldn't be such an issue, but it isn't.

I'm re-opening this bug because one of two things should be done: 1) change the authentication to a challenge-response instead of transmitting a secret key, or 2) make the client fail to connect when the SDK client code asks to connect with TLS and the fabric-ca isn't configured to use TLS.

The last thing we want is to have the secret key automatically transmitted on an automatically downgraded, insecure channel.  A MitM attack to get client secrets is trivial as is.;;;","11/Dec/18 12:36 AM;ashutosh_kumar;[~dhuseby] , If Fabric CA server is not configured for TLS and non-TLS client tries to connect , the connection does not happen. No TLS handshake happens , hence no secret is transmitted over wire. No downgrade is in play here.

I do not see this is an issue. This bug needs to be closed.

 

 ;;;","08/Jan/19 5:15 AM;denyeart;[~ashutosh_kumar] Please read David Huseby's comment again. His scenario is for a TLS client.  You answered for a non-TLS client.  Can you answer for a TLS client?;;;","08/Jan/19 6:53 AM;ashutosh_kumar;[~denyeart] , Thanks for bringing that up. It was oversight on my part.

When Fabric CA server is not being configured as TLS Server as TLS client tries to connect , connection will not happen and error will be thrown.

TLS handshake initiates at the Server , not at the client and if fabric ca server is not being configured as TLS Server , no TLS handshake will take place and hence no secret will be generated.

 ;;;","23/Jan/19 4:07 PM;denyeart;Ok, I'm returning for re-assessment by [~dhuseby] or [~ChristopherFerris].;;;","26/Aug/19 7:50 AM;mastersingh24;This is not a fabric-ca-server or fabric-ca-client issue.  If anything, this is a Go SDK issue.;;;",,,,,,,,,,
"As a platform operator, I want to be able to determine if a fabric CA is healthy by hitting an http(s) endpoint on a configurable port.",FABC-743,34514,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,10/Oct/18 12:32 AM,05/Dec/19 11:26 PM,28/Oct/23 2:21 AM,22/Feb/19 3:24 AM,,,,,,,v1.4.1,v2.0.0,,,,,0,ipm,ipm-planned,operations,,,"To prevent dragging bunch of unnecessary complexity, the healthcheck should be implemented as a basic http or https endpoint at /healthz. When the peer is healthy, it will return with a status of `HTTP 200/OK` and JSON payload of '{""status"": ""OK""}'. If the peer is responsive to the status check, but unhealthy, it will return with a staus of `HTTP 503/Service Unavailable` and a JSON message that indicates which subsystem has failed the health check.",,btl5037,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABLG-1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10851,,,No,,Unset,No,,,"1|hzzq8f:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/19 12:37 AM;sykesm;CA health is a function of:
- server up
- database available

In terms of server up, if we can respond to the health check, we're ""up.""

For the database, we have three options: sqlite, postgres, and mysql. A ping operation already exists for all three of the backends so the health check would simply drive the existing operation on the configured database.

Ping is the same interface on all backends and already tested.

Likely need to create additional stories for authorization and a separate separate server.;;;","22/Feb/19 3:24 AM;btl5037;https://gerrit.hyperledger.org/r/c/28818/;;;",,,,,,,,,,,,,,,,,,
"Failed to build ""windows-amd64"" binary on master branch",FABC-744,34752,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,denyeart,sambhavdutt,sambhavdutt,18/Oct/18 12:01 AM,19/Mar/19 8:13 PM,28/Oct/23 2:21 AM,21/Oct/18 7:32 PM,v1.4.0,,,,,,v1.4.0,,,,,,0,ci-failure,,,,,"Observed the below errors in the nightly jobs for master branch.

{code:java}
21:54:07 Building release/windows-amd64/bin/fabric-ca-client for windows-amd64
21:54:07 mkdir -p release/windows-amd64/bin
21:54:07 GOOS=windows GOARCH=amd64 go build -o /w/workspace/fabric-nightly-release-job-master-x86_64/gopath/src/github.com/hyperledger/fabric-ca/release/windows-amd64/bin/fabric-ca-client -tags ""caclient"" -ldflags ""-X github.com/hyperledger/fabric-ca/lib/metadata.Version=1.4.0-stable"" github.com/hyperledger/fabric-ca/cmd/fabric-ca-client
21:54:09 # github.com/hyperledger/fabric-ca/vendor/github.com/google/certificate-transparency-go/x509
21:54:09 vendor/github.com/google/certificate-transparency-go/x509/root_windows.go:112:3: cannot use uintptr(unsafe.Pointer(sslPara)) (type uintptr) as type syscall.Pointer in field value
21:54:15 Makefile:274: recipe for target 'release/windows-amd64/bin/fabric-ca-client' failed
21:54:15 make: *** [release/windows-amd64/bin/fabric-ca-client] Error 2
21:54:15 -------> make dist-all failed
{code}

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-nightly-release-job-master-x86_64/161/

https://jenkins.hyperledger.org/view/Daily/job/fabric-nightly-release-job-master-x86_64/161/consoleFull
",,denyeart,harsha544,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,de8d93e1bc1f9a1a9b0201c969813f5a7194893f,Unset,No,,,"1|hzzvkn:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,harsha544,sambhavdutt,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Oct/18 10:28 PM;sambhavdutt;the *fabric-nightly-release-job-master-ppc64le* is also failing as windows-amd64 ca binary fails to build and errors out.

*Build Log*

https://jenkins.hyperledger.org/view/Daily/job/fabric-nightly-release-job-master-ppc64le/15/consoleFull;;;","20/Oct/18 12:15 AM;harsha544;[~sambhavdutt] the failure per logs of *fabric-nightly-release-job-master-ppc64le* isn't specific to ppc64le architecture rather this situation is arising as JJB identifies ppc64le as non-s390x or amd64 per this logic :-
 {{

{{# Execute release-all target on x arch}}
 {{ARCH=$(go env GOARCH)}}
 {{if [ ""$ARCH"" = ""s390x"" ]; then}}
 \{{ echo ""---------> ARCH:"" $ARCH}}
 \{{ build_Fabric_Ca release}}
 {{else}}
 \{{ echo ""---------> ARCH:"" $ARCH}}
 \{{ build_Fabric_Ca dist-all docker-fvt}}
 {{fi}}

 }}

 ;;;","20/Oct/18 11:33 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/27120/;;;",,,,,,,,,,,,,,,,,
Listing certificate information should not be auth protected,FABC-745,34891,,Task,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,dbshah,dbshah,26/Oct/18 1:41 AM,01/Mar/19 1:01 AM,28/Oct/23 2:21 AM,,v1.2.0,,,,,,,,,,,,0,,,,,,"Based on the docs [here|https://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#listing-certificate-information] getting a certificate based on serial number requires the caller to posses either hf.Revoker or hf.Registrar.Roles attribute. Furthermore, only certificates with ids that are associated with the caller's affiliation are currently returned. This check should continue to happen only if requesting certificates based on an enrollment ID. For requests made based on just serial and/or AKI should not require these checks.",,dbshah,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzwbz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dbshah,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
--port option doesn't have expected effect during init,FABC-746,34899,,Bug,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,vdods,vdods,26/Oct/18 9:16 AM,02/Mar/20 1:53 PM,28/Oct/23 2:21 AM,,v1.2.1,,,,,,,,,fabric-ca-server,,,0,config,Usability,,,,"Running

    fabric-ca-server init --home path/to/home --port 9999 --boot admin:adminpw

runs and succeeds, but the generated config file (path/to/home/fabric-ca-server-config.yaml) has the default port value (7054) instead of the one specified.  This is very misleading.  I suspect that this is true of other options as well.",,denyeart,jyellick,mastersingh24,nnao,vdods,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzwdb:",,,,Unset,Unset,,,,,,,,,,,,"Run

fabric-ca-server init --home path/to/home --port 9999 --boot admin:adminpw

then examine

path/to/home/fabric-ca-server-config.yaml

and look for `port: 7054` -- expected to see `port: 9999` as specified in commandline option.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,mastersingh24,nnao,vdods,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Nov/18 11:43 AM;denyeart;[~ashutosh_kumar] Can you take a look?;;;","03/Dec/18 8:41 PM;mastersingh24;The actual bug here might be that we allow extraneous command line flags for the init command.
Most of the command line options are designed to override the config file ... not actually set value in the config file.  That's not to say that we can't do that, but that was not the actual intent of most of the flags.

I'd vote to defer this to either 2.0 or perhaps a 1.4.x path release at this point;;;","05/Dec/18 8:51 AM;vdods;This seems to be generally true for all fabric and fabric-ca CLI tools – it's not clear which commandline options apply to which subcommands, and the description of the option is rather vague (e.g. commandline options only overriding config vars, not specifying them for init).;;;","25/Sep/19 1:13 AM;jyellick;[~elli-androulaki] is this something we're planning to tackle for v2.0?;;;",,,,,,,,,,,,,,,,
Set FABRIC_CA_SERVER_COMPATIBILITY_MODE to false,FABC-747,34964,,Task,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,30/Oct/18 4:00 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,Set default value of FABRIC_CA_SERVER_COMPATIBILITY_MODE to false after all the CA client have been updated to use the more secure token.,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzwp3:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The prerequisites section in the README file is incorrect about the version description of Go,FABC-748,34974,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,EvansChang,EvansChang,EvansChang,30/Oct/18 6:19 PM,24/Nov/18 2:52 AM,28/Oct/23 2:21 AM,24/Nov/18 2:52 AM,,,,,,,v1.4.0,,,,,,0,,,,,,"I built the Fabric-ca on my own physical machine in the Go1.9 environment according to the README file, but it did not succeed and reported the following error： 
{code:java}
Building fabric-ca-client in bin directory ...
# github.com/hyperledger/fabric-ca/lib
lib/server.go:714:23: cert.Issuer.String undefined (type pkix.Name has no field or method String)
lib/server.go:715:24: cert.Subject.String undefined (type pkix.Name has no field or method String)
make: *** [bin/fabric-ca-client] Error 2{code}
The String method is actually defined in version 1.10, so the Go version of Prerequisites in the README is partially modified to Go 1.10+ installation or later.

This is the link to the source code for pix.go in Go1.9:

[https://github.com/golang/go/blob/release-branch.go1.9/src/crypto/x509/pkix/pkix.go]

This is the link to the source code for pix.go in Go1.10:

[https://github.com/golang/go/blob/dev.boringcrypto.go1.10/src/crypto/x509/pkix/pkix.go]",,EvansChang,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzwrb:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),EvansChang,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Add strong password checking,FABC-750,35233,,Task,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,smithbk,smithbk,09/Nov/18 6:08 AM,03/Dec/19 9:20 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Fabric CA should by default require passwords to meet the following strong password
requirements:
https://its.lafayette.edu/policies/strongpasswords/

But each of these 4 requirements for strong passwords should be individually configurable
with the following variables, where each of the values below are the default value.

FABRIC_CA_SERVER_PASSWORD_MIN_LENGTH=8
FABRIC_CA_SERVER_PASSWORD_MIX_UPPER_LOWER=true
FABRIC_CA_SERVER_PASSWORD_MIX_ALPHA_NUM=true
FABRIC_CA_SERVER_PASSWORD_MIN_SPECIAL_CHARS=1
",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzy67:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Vendor gomega and ginkgo,FABC-752,35504,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,21/Nov/18 4:34 AM,07/Dec/18 3:55 AM,28/Oct/23 2:21 AM,07/Dec/18 3:55 AM,,,,,,,v1.4.0,,,,,,0,,,,,,Vendor gomega and ginkgo to allow for writing BDD style test cases.,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzzov:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Nov/18 4:44 AM;skarim;https://gerrit.hyperledger.org/r/c/27673/;;;",,,,,,,,,,,,,,,,,,,
Create passwords package,FABC-753,35505,35233,Sub-task,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,21/Nov/18 4:36 AM,01/Mar/19 1:01 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,Create passwords package that will contain the code for password generation and validation that meet requirements,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzzp3:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use password object in identity registration,FABC-754,35506,35233,Sub-task,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,21/Nov/18 4:38 AM,01/Mar/19 1:01 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Use the password object to perform password validation or generation when registering identities with the fabric ca server.

Update test cases to use passwords that meet the new default requirements.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzzpb:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Revendor github.com/pkg/errors,FABC-755,35641,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,28/Nov/18 6:46 AM,08/Jan/19 3:01 AM,28/Oct/23 2:21 AM,08/Jan/19 3:01 AM,,,,,,,,,,,,,0,,,,,,Revendor github.com/pkg/errors to use the latest code from this package,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i000dr:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Nov/18 6:48 AM;skarim;https://gerrit.hyperledger.org/r/c/27766/;;;",,,,,,,,,,,,,,,,,,,
Single RCA with Multiple ICA Fabric Setup - TLS Handshake Error,FABC-756,34976,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid: Environment Issue,ashutosh_kumar,KeerthiJ,KeerthiJ,30/Oct/18 9:38 PM,06/Jul/19 3:26 AM,28/Oct/23 2:21 AM,06/Jul/19 3:26 AM,,,,,,,v2.0.0,,,fabric-ca-server,fabric-samples,,0,,,,,,"I've modified the fabric-ca example in v1.2 fabric-samples to have one common RCA and an ICA for each org. So, in that example there are 3 orgs and hence there were 3 RCAs which I changed it to one RCA and then there are 3 ICAs for each org.

 

When the setup is creating channel, there is an error in run container log saying failed to connect to orderer due to authentication handshake failed and tls bad certificate.

Error on orderer log is, tls: failed to verify client's certificate: x509: certificate signed by unknown authority (possibly because of ""x509: ECDSA verification failure"" while trying to verify candidate authority certificate ""rca-mainorg-admin""

 ",,ashutosh_kumar,denyeart,kariyappals,KeerthiJ,mastersingh24,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Nov/18 8:20 PM;kariyappals;rca-error.PNG;https://jira.hyperledger.org/secure/attachment/16218/rca-error.PNG",,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzwrr:",,,,Unset,Unset,,,,,,,,,,,,"First, I modified makeDocker.sh to generate 1 RCA in docker-compose file:
# Write services for the root fabric CA servers
function writeRootFabricCA {
  for ORG in $ORGS; do
    initOrgVars $ORG
    writeRootCA
    return
  done
}

Second, I modified root ca related parameters in env.sh as below.

   ROOT_CA_HOST=rca-mainorg
   ROOT_CA_NAME=rca-mainorg
   ROOT_CA_LOGFILE=$LOGDIR/${ROOT_CA_NAME}.log
   INT_CA_HOST=ica-${ORG}
   INT_CA_NAME=ica-${ORG}
   INT_CA_LOGFILE=$LOGDIR/${INT_CA_NAME}.log
 
   # Root CA admin identity
   ROOT_CA_ADMIN_USER=rca-mainorg-admin
   ROOT_CA_ADMIN_PASS=${ROOT_CA_ADMIN_USER}pw
   ROOT_CA_ADMIN_USER_PASS=${ROOT_CA_ADMIN_USER}:${ROOT_CA_ADMIN_PASS}
   # Root CA intermediate identity to bootstrap the intermediate CA
   ROOT_CA_INT_USER=ica-mainorg
   ROOT_CA_INT_PASS=${ROOT_CA_INT_USER}pw
   ROOT_CA_INT_USER_PASS=${ROOT_CA_INT_USER}:${ROOT_CA_INT_PASS}

Then, run ./start.sh
When the run container is creating channel, the error details are provided below.

Error logs from Orderer:
[36m2018-10-30 11:05:26.383 UTC [grpc] Printf -> DEBU 0c5[0m grpc: Server.Serve failed to complete security handshake from ""172.22.0.12:43704"": tls: failed to verify client's certificate: x509: certificate signed by unknown authority (possibly because of ""x509: ECDSA verification failure"" while trying to verify candidate authority certificate ""rca-mainorg-admin"")
[36m2018-10-30 11:05:27.385 UTC [grpc] Printf -> DEBU 0c6[0m grpc: Server.Serve failed to complete security handshake from ""172.22.0.12:43706"": tls: failed to verify client's certificate: x509: certificate signed by unknown authority (possibly because of ""x509: ECDSA verification failure"" while trying to verify candidate authority certificate ""rca-mainorg-admin"")
[36m2018-10-30 11:05:29.091 UTC [grpc] Printf -> DEBU 0c7[0m grpc: Server.Serve failed to complete security handshake from ""172.22.0.12:43710"": tls: failed to verify client's certificate: x509: certificate signed by unknown authority (possibly because of ""x509: ECDSA verification failure"" while trying to verify candidate authority certificate ""rca-mainorg-admin"")

Error logs from CLI container:

[36m2018-10-30 11:05:26.368 UTC [msp] setupSigningIdentity -> DEBU 034[0m Signing identity expires at 2019-10-30 11:05:00 +0000 UTC
[36m2018-10-30 11:05:26.368 UTC [msp] Validate -> DEBU 035[0m MSP org1MSP validating identity
[36m2018-10-30 11:05:26.369 UTC [msp] GetDefaultSigningIdentity -> DEBU 036[0m Obtaining default signing identity
[36m2018-10-30 11:05:26.377 UTC [grpc] Printf -> DEBU 037[0m parsed scheme: """"
[36m2018-10-30 11:05:26.377 UTC [grpc] Printf -> DEBU 038[0m scheme """" not registered, fallback to default scheme
[36m2018-10-30 11:05:26.377 UTC [grpc] Printf -> DEBU 039[0m ccResolverWrapper: sending new addresses to cc: [{orderer1-org0:7050 0 <nil>}]
[36m2018-10-30 11:05:26.378 UTC [grpc] Printf -> DEBU 03a[0m ClientConn switching balancer to ""pick_first""
[36m2018-10-30 11:05:26.378 UTC [grpc] Printf -> DEBU 03b[0m pickfirstBalancer: HandleSubConnStateChange: 0xc4201e63d0, CONNECTING
[36m2018-10-30 11:05:26.383 UTC [grpc] Printf -> DEBU 03c[0m grpc: addrConn.createTransport failed to connect to {orderer1-org0:7050 0 <nil>}. Err :connection error: desc = ""transport: authentication handshake failed: remote error: tls: bad certificate"". Reconnecting...
[36m2018-10-30 11:05:26.383 UTC [grpc] Printf -> DEBU 03d[0m pickfirstBalancer: HandleSubConnStateChange: 0xc4201e63d0, TRANSIENT_FAILURE
[36m2018-10-30 11:05:27.380 UTC [grpc] Printf -> DEBU 03e[0m pickfirstBalancer: HandleSubConnStateChange: 0xc4201e63d0, CONNECTING
[36m2018-10-30 11:05:27.386 UTC [grpc] Printf -> DEBU 03f[0m grpc: addrConn.createTransport failed to connect to {orderer1-org0:7050 0 <nil>}. Err :connection error: desc = ""transport: authentication handshake failed: remote error: tls: bad certificate"". Reconnecting...
[36m2018-10-30 11:05:27.387 UTC [grpc] Printf -> DEBU 040[0m pickfirstBalancer: HandleSubConnStateChange: 0xc4201e63d0, TRANSIENT_FAILURE
[36m2018-10-30 11:05:29.086 UTC [grpc] Printf -> DEBU 041[0m pickfirstBalancer: HandleSubConnStateChange: 0xc4201e63d0, CONNECTING
[36m2018-10-30 11:05:29.091 UTC [grpc] Printf -> DEBU 042[0m grpc: addrConn.createTransport failed to connect to {orderer1-org0:7050 0 <nil>}. Err :connection error: desc = ""transport: authentication handshake failed: remote error: tls: bad certificate"". Reconnecting...
[36m2018-10-30 11:05:29.091 UTC [grpc] Printf -> DEBU 043[0m pickfirstBalancer: HandleSubConnStateChange: 0xc4201e63d0, TRANSIENT_FAILURE
Error: failed to create deliver client: orderer client failed to connect to orderer1-org0:7050: failed to create new connection: context deadline exceeded",,Unset,,,,,,Unset,,Unset,,(Please add usage information),ashutosh_kumar,denyeart,kariyappals,KeerthiJ,mastersingh24,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Nov/18 11:10 AM;denyeart;[~ashutosh_kumar] Can you take a look?;;;","02/Nov/18 10:29 PM;ashutosh_kumar;[~denyeart] Looking into it.;;;","03/Nov/18 12:44 AM;ashutosh_kumar;[~KeerthiJ] , can you try with latest release and post your result ?;;;","03/Nov/18 6:16 PM;KeerthiJ;[~ashutosh_kumar], when I tried to run fabric 1.3 fabric-ca sample as it is, I'm getting following error in setup.log.
 # 
 ## 
 ### 
 #### 
 ##### 2018-11-03 08:57:49 Beginning building channel artifacts ...
 ##### 2018-11-03 08:57:49 Registering identities ...
 ##### 2018-11-03 08:57:49 Enrolling with ica-org0 as bootstrap identity ...
 /scripts/setup-fabric.sh: line 30: /usr/local/bin/fabric-ca-client: cannot execute binary file: Exec format error

 ;;;","05/Nov/18 8:20 PM;kariyappals;!rca-error.PNG!



Hi Ashutosh Kumar 
I am also facing the same issue when i'm trying to have single rca for all ica.
I tried with 1.3.0 version, still i face same issue.;;;","05/Dec/18 12:55 AM;skarim;Based on discussion with [~ashutosh_kumar], moving this to 2.0;;;","06/Jul/19 3:26 AM;mastersingh24;We removed the sample anyway so going to close this.

But my guess is that when creating the channel the org MSPs were not set up correctly.
You would need to place the RCA in the `tlscacerts` folder for all 3 and then for each org place its ICA in the `tlsintermediatecerts` folder;;;",,,,,,,,,,,,,
MySQL index creation failed on affiliation(name),FABC-757,35708,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,jamesruan,jamesruan,jamesruan,29/Nov/18 10:42 PM,06/Dec/18 1:26 AM,28/Oct/23 2:21 AM,06/Dec/18 1:26 AM,,,,,,,v1.4.0,,,fabric-ca-server,,,0,,,,,,"error reported to be 1071, key size exceed 3072 bytes

",,jamesruan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwses:",,,,Unset,Unset,,,,,,,,,,,,"It is caused by not specifying the charset in table creation. when the charset is utf8mb4, the bug occurred. ",,Unset,,,,,,Unset,,Unset,,(Please add usage information),jamesruan,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Nov/18 11:13 PM;jamesruan;https://gerrit.hyperledger.org/r/27811;;;",,,,,,,,,,,,,,,,,,,
MySQL table creation failed for timestamp DEFAULT 0,FABC-758,35709,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Invalid: Works as Expected,,jamesruan,jamesruan,29/Nov/18 10:45 PM,02/Dec/18 5:30 AM,28/Oct/23 2:21 AM,02/Dec/18 5:30 AM,,,,,,,,,,,,,0,,,,,,"the ""timestamp DEFAULT 0"" in table creation failed.",,jamesruan,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwset:",,,,Unset,Unset,,,,,,,,,,,,"failed when DB has strict mode that didn't allow 'timestamp DEFAULT 0'
failed when DB has NON_ZERO_DATE set as default.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),jamesruan,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Nov/18 11:14 PM;jamesruan;https://gerrit.hyperledger.org/r/27812;;;","02/Dec/18 5:29 AM;mastersingh24;[~jamesruan]  - please see the section on {{NO_ZERO_DATE}} in the docs:  https://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#mysql;;;",,,,,,,,,,,,,,,,,,
Create pipeline CI configuration,FABC-759,35741,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,30/Nov/18 4:54 PM,03/Apr/19 12:05 AM,28/Oct/23 2:21 AM,03/Apr/19 12:05 AM,,,,,,,,,,,,,0,,,,,,"Create Pipeline CI configuration for fabric-ca repository.
 * Create Jenkinsfile for both x and z platforms
 * docs, unit-tests and end-2-end tests Jobs on both verify and merge jobs,",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i000zz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Nov/18 5:00 PM;rameshthoomu;Change has been pushed to gerrit https://gerrit.hyperledger.org/r/#/c/27837/;;;","03/Apr/19 12:05 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/q/topic:pipeline-ca+(status:open+OR+status:merged);;;",,,,,,,,,,,,,,,,,,
identity type returned by identity list --id client command is incorrect,FABC-760,28269,,Bug,To Do,FABC,Fabric CA,software,denyeart,,,Medium,,,aambati,aambati,08/Mar/18 12:28 AM,19/Apr/20 12:52 AM,28/Oct/23 2:21 AM,,v1.1.0,,,,,,,,,fabric-ca-client,,,0,,,,,,"*fabric-ca-client identity list --id <identity name>* returns incorrect identity type when LDAP is enabled.

For example, with following converter defined in the server configuration:

{{converters:}}
{{   - name: hf.Type}}
{{     value: map(attr(""description""),""types"")}}
{{maps:}}
{{  types:}}
{{    - name: peer}}
{{      value: peer}}
{{    - name: orderer}}
{{      value: orderer}}
{{    - name: client}}
{{      value: client}}

 

{{Following is returned when _fabric-ca-client identity list --id peer_17612_ is invoked:}}

{{Name: uid=peer_17612,cn=peer,ou=dev,dc=org,dc=fr, Type: client, Affiliation: , Max Enrollments: 0, Attributes: [\{Name:uid Value:peer_17612 ECert:false} \{Name:description Value:peer ECert:false} \{Name:hf.Type Value:peer ECert:false} \{Name:hf.IntermediateCA Value:false ECert:false} \{Name:hf.GenCRL Value:false ECert:false} \{Name:hf.Revoker Value:false ECert:false} \{Name:hf.AffiliationMgr Value:false ECert:false} \{Name:hf.Registrar.Roles Value: ECert:false}]}}

as you can see hf.Type attribute is set to peer but the Type property of the response object is set to client. They should match.",,aambati,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzz053:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Sep/19 1:21 AM;jyellick;[~elli-androulaki] can you triage?;;;",,,,,,,,,,,,,,,,,,,
Create fabric-ca release notes for v1.4.0,FABC-761,35825,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,denyeart,denyeart,03/Dec/18 10:54 PM,26/Mar/19 7:40 PM,28/Oct/23 2:21 AM,01/Mar/19 1:01 AM,,,,,,,v1.4.1,,,,,,0,,,,,,,,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13132,,,,,FAB-13111,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i001gv:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Dec/18 3:48 AM;skarim;https://gerrit.hyperledger.org/r/c/27965/;;;",,,,,,,,,,,,,,,,,,,
Values set by command line flags or environment variables should be reflected in generated config,FABC-763,35841,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,mastersingh24,mastersingh24,04/Dec/18 6:24 AM,20/Mar/19 9:02 AM,28/Oct/23 2:21 AM,,,,,,,,v2.0.0,,,,,,1,,,,,,"fabric-ca-server and fabric-ca-client both generate config files on initial use if they do not exist.  The problem is that the values of command line flags and/or environment variables are not reflected in the generated config.  This causes confusion for users.

If we want to keep this current behavior, then at a minimum need to document this.",,mastersingh24,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-431,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i001kf:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integrate fabric-ca with bccsp/idemix,FABC-764,35864,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,skarim,skarim,05/Dec/18 12:01 AM,26/Aug/19 8:12 AM,28/Oct/23 2:21 AM,26/Aug/19 8:12 AM,,,,,,,v2.0.0,,,,,,0,,,,,,"Due to a bug in idemix/fabric need to Integrate fabric-ca with bccsp/idemix, and direct calls to new bccsp/idemix library",,mastersingh24,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i001ov:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Aug/19 8:12 AM;mastersingh24;Need to remove the bccsp dependency not add another one;;;",,,,,,,,,,,,,,,,,,,
Vendor fabric/bccsp/idemix,FABC-765,35866,35864,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,05/Dec/18 12:15 AM,08/Dec/18 1:28 AM,28/Oct/23 2:21 AM,08/Dec/18 1:28 AM,,,,,,,v1.4.0,,,,,,0,,,,,,Vendor fabric/bccsp/idemix and revendor fabric/idemix,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i001pb:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Dec/18 3:39 AM;skarim;https://gerrit.hyperledger.org/r/c/27927/;;;",,,,,,,,,,,,,,,,,,,
Direct call to fabric/bccsp/idemix,FABC-766,35867,35864,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,skarim,skarim,05/Dec/18 12:16 AM,26/Aug/19 8:11 AM,28/Oct/23 2:21 AM,26/Aug/19 8:11 AM,,,,,,,v2.0.0,,,,,,0,,,,,,Replace all calls to fabric/idemix library with calls to fabric/bccsp/idemix library,,mastersingh24,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i001pj:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Aug/19 8:11 AM;mastersingh24;We should not do this ... we actually need to remove the bccsp dependency from fabric-ca;;;",,,,,,,,,,,,,,,,,,,
goimports failed on fabric-ca master branch,FABC-767,35874,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,rameshthoomu,rameshthoomu,05/Dec/18 3:26 AM,06/Dec/18 1:27 AM,28/Oct/23 2:21 AM,06/Dec/18 1:27 AM,,,,,,,v1.4.0,,,,,,0,,,,,,"goimports failed on fabric-ca master branch on files ./util/flag.go
{code:java}
13:23:44 Checking imports ...
13:23:45 The following files have import problems:
13:23:45 ./util/flag.go
13:23:45 You may run 'goimports -w <file>' to fix each file.
13:23:45 Makefile:102: recipe for target 'imports' failed{code}",,rameshthoomu,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-131,,,No,,Unset,No,,,"1|hzxok6:w",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Dec/18 3:52 AM;skarim;https://gerrit.hyperledger.org/r/c/27929/;;;",,,,,,,,,,,,,,,,,,,
Doc: Better Markup,FABC-768,35908,,Documentation,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,ynamiki,ynamiki,ynamiki,06/Dec/18 5:02 PM,09/Dec/18 10:11 PM,28/Oct/23 2:21 AM,09/Dec/18 8:27 PM,,,,,,,v1.4.0,,,,,,0,,,,,,"https://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#hsm

In the above page, the description of the environment variable is better to markup as a code block.",,denyeart,ynamiki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i001wf:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,ynamiki,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Dec/18 10:11 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/27981/;;;",,,,,,,,,,,,,,,,,,,
CA should recover from any panics induced by fabric/idemix,FABC-769,35938,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,07/Dec/18 1:06 AM,08/Dec/18 1:27 AM,28/Oct/23 2:21 AM,08/Dec/18 1:27 AM,,,,,,,v1.4.0,,,,,,0,,,,,,CA should recover from any panics induced by calls to fabric/idemix library,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00207:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Dec/18 3:26 AM;skarim;https://gerrit.hyperledger.org/r/c/27989/;;;",,,,,,,,,,,,,,,,,,,
Replace govendor with dep for dependency management,FABC-770,35943,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,,skarim,skarim,07/Dec/18 5:06 AM,26/Mar/19 7:40 PM,28/Oct/23 2:21 AM,08/Dec/18 5:13 AM,,,,,,,v2.0.0,,,,,,0,,,,,,"Fabric has moved away from using govendor for dependency management. CA should follow suit and use [dep|https://github.com/golang/dep] tool.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0021b:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Dec/18 5:13 AM;skarim;Duplicate of FABC-738;;;",,,,,,,,,,,,,,,,,,,
Build - Update multiarch script to publish m.n version,FABC-771,36000,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,08/Dec/18 6:58 AM,11/Dec/18 12:39 AM,28/Oct/23 2:21 AM,11/Dec/18 12:39 AM,,,,,,,,,,,,,0,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0026v:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Dec/18 7:16 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/28009/;;;",,,,,,,,,,,,,,,,,,,
Add testcase for panic handling ,FABC-772,36031,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,10/Dec/18 11:18 PM,11/Dec/18 11:50 AM,28/Oct/23 2:21 AM,11/Dec/18 11:50 AM,,,,,,,v1.4.0,,,,,,0,,,,,,Add testcase to for panic handling that was introduced in lib/server/idemix package,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i002dr:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Dec/18 11:37 PM;skarim;https://gerrit.hyperledger.org/r/c/28041/;;;",,,,,,,,,,,,,,,,,,,
Fix TOC format in user's guide,FABC-773,36047,,Documentation,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,11/Dec/18 4:37 AM,11/Dec/18 11:49 AM,28/Oct/23 2:21 AM,11/Dec/18 11:49 AM,,,,,,,v1.4.0,,,,,,0,,,,,,Fix TOC format in user's guide,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i002hb:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Dec/18 4:39 AM;skarim;https://gerrit.hyperledger.org/r/28051;;;",,,,,,,,,,,,,,,,,,,
Fix inability to set FABRIC_CA_SERVER_COMPATIBILITY_MODE_V1_3 to false,FABC-774,36050,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,skarim,skarim,11/Dec/18 7:22 AM,11/Dec/18 11:49 AM,28/Oct/23 2:21 AM,11/Dec/18 11:49 AM,,,,,,,v1.4.0,,,,,,0,,,,,,"Value for environment variable *FABRIC_CA_SERVER_COMPATIBILITY_MODE_V1.3* would always be set to true, even if the environment variable was explicitly set to another value (e.g. false). This behavior should be fixed. If environment variable is not set, the default should still be true. However, if a value has been explicitly set then value that is set should be used and the default should be overridden.

Change name from '*FABRIC_CA_SERVER_COMPATIBILITY_MODE_V1.3*' to `*FABRIC_CA_SERVER_COMPATIBILITY_MODE_V1_3*`, dots can't be used in environment variable name.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-174,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i002hz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Dec/18 8:10 AM;skarim;https://gerrit.hyperledger.org/r/c/28056/;;;",,,,,,,,,,,,,,,,,,,
Configurable Revocation Algorithm,FABC-775,36085,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,angelo.decaro,angelo.decaro,12/Dec/18 4:46 PM,03/Dec/19 9:20 AM,28/Oct/23 2:21 AM,,,,,,,,,,,fabric-ca-server,,,0,,,,,,The goal of this story is to make fabric-ca configurable with the respect to the revocation algorithm to be use. Impact on *lib/server/idemix/revocationauthority.go*,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13103,,,No,,Unset,No,,,"1|i002pr:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move to Updatable CRI,FABC-776,36086,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,angelo.decaro,angelo.decaro,12/Dec/18 4:49 PM,03/Dec/19 9:21 AM,28/Oct/23 2:21 AM,,,,,,,,,,,fabric-ca-server,,,0,,,,,,"The goal of this story is allow fabric-ca to use Updatable CRI to avoid the need to regenerate the CRI each time a new user enroll. CRI regeneration should happen only at revocation time. This means also that the enrolled user gets only the part of the CRI that is needed to generate valid idemix signatures. This reduces the communication complexity. To get the full CRI, the endpoint */api/v1/idemix/cri* can be used.

Impact on *lib/server/idemix/enroll.go* 

 ",,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13244,,,,,,,FABC-777,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13103,,,No,,Unset,No,,,"1|i002pz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Short CRI support,FABC-777,36087,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,angelo.decaro,angelo.decaro,12/Dec/18 4:52 PM,12/Dec/18 4:52 PM,28/Oct/23 2:21 AM,,,,,,,,,,,fabric-ca-server,,,0,,,,,,The goal of this story is to allow the endpoint */api/v1/idemix/cri* to return only the part of the CRI that is needed by the invoker to generate valid idemix signature.,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-776,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13103,,,No,,Unset,No,,,"1|i002q7:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
/api/v1/idemix/revocation and /revoke endpoint,FABC-778,36089,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,angelo.decaro,angelo.decaro,12/Dec/18 4:55 PM,03/Dec/19 9:21 AM,28/Oct/23 2:21 AM,,,,,,,,,,,fabric-ca-client,fabric-ca-server,,0,,,,,,The goal of this story is to implement the above endpoints for revocation,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13103,,,No,,Unset,No,,,"1|i002qn:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update to Go 1.12,FABC-779,36436,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,,mastersingh24,mastersingh24,31/Dec/18 7:09 PM,26/Aug/19 7:20 AM,28/Oct/23 2:21 AM,26/Aug/19 7:20 AM,,,,,,,v2.0.0,,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-780,,,,,,,,,,,,FABC-869,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i004nz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for TLS 1.3,FABC-780,36438,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,mastersingh24,mastersingh24,31/Dec/18 11:33 PM,27/Dec/19 9:36 PM,28/Oct/23 2:21 AM,27/Dec/19 9:36 PM,,,,,,,v2.0.0,,,,,,0,,,,,,,,btl5037,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-779,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i004of:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,mastersingh24,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Remove fabric-ca sample,FABC-781,36454,,Task,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,03/Jan/19 5:38 AM,26/Jan/19 12:46 AM,28/Oct/23 2:21 AM,05/Jan/19 12:37 AM,,,,,,,v1.4.0,v2.0.0,,fabric-samples,,,0,,,,,,[https://github.com/hyperledger/fabric-samples/tree/release-1.3/fabric-ca]  should be removed as we do not officially publish peer or orderer images which include the fabric-ca-client and we really should not be promoting this type of usage.,,antoniovassell,davidkhala,GuillaumeCisco,ihormudryy,knagware9,mastersingh24,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13717,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i004rz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),antoniovassell,davidkhala,GuillaumeCisco,ihormudryy,knagware9,mastersingh24,silliman,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,main,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Jan/19 5:41 AM;mastersingh24;https://gerrit.hyperledger.org/r/28450;;;","10/Jan/19 1:50 AM;GuillaumeCisco;Hey there, we are using fabric-ca and fabric-ca-* images.
 We started migrating from 1.2 to 1.3, and discovered fabric-ca-* are not published on docker hub anymore.
 Example for fabric-ca-peer: [https://hub.docker.com/r/hyperledger/fabric-ca-peer/tags]

Following https://jira.hyperledger.org/browse/FABCI-24 , https://jira.hyperledger.org/browse/FABC-131 and https://jira.hyperledger.org/browse/FABC-722

 

We can now build fabric-ca-* images by cloning 1.3 release of fabric-ca project [https://github.com/hyperledger/fabric-ca/tree/release-1.3] and run:
{code:java}
sudo make docker-all{code}
 

However, in this [doc|https://github.com/hyperledger/fabric-samples/tree/release-1.3/fabric-ca] we can read:
{code:java}
How to use the Hyperledger Fabric CA client and server to generate all crypto material rather than using cryptogen. The cryptogen tool is not intended for a production environment because it generates all private keys in one location which must then be copied to the appropriate host or container. This sample demonstrates how to generate crypto material for orderers, peers, administrators, and end users so that private keys never leave the host or container in which they are generated.{code}
From version 1.4, fabric-ca sample has been removed from fabric-samples: [https://github.com/hyperledger/fabric-samples]

 Furthermore, images folder is no more present in fabric-ca 1.4 for building fabric-ca-* images with sudo make docker-all.

So when you say ""we really should not be promoting this type of usage."", what should we do from 1.4 version?;;;","10/Jan/19 7:28 PM;knagware9; Hi ,, Is there any reason to remove fabric-ca samples from the fabric-samples ?;;;","14/Jan/19 3:47 PM;davidkhala;[~GuillaumeCisco] Dear Guill, per our conversation in mail list, I have some reason that why the sample is bad practice in production. 

1. we will not use fabric-ca-* image as. They are experimental.  
2. fabric-ca-client is used in offline environment
3.  for online environment, we use sdk to interactive with fabri-ca-server(CA service), and access to sdk program is strictly under control. ;;;","15/Jan/19 7:55 PM;ihormudryy;Hi,

I find this fabric-ca examples extremely useful and easy to understand, furthermore it allowed to build _docker-compose_ network with arbitrary organisation and number of peers. It was easy to debug as all logs were in one single dir. IMHO you should've refactored this way of setting up the environment instead of removing it...

[~davidkhala] as it was mentioned in README, cryptogen tool is also not supposed to be used in production as well as CA services, but is there any good examples of SDK how to setup the environment programatically from scratch? e.g registers identities, generate the genesis block and other artefacts needed to setup the blockchain network?

So far I haven't found any and still reading e2e tests to understand the workflow... IMHO lack of good examples and archetypes is a huge gap of Hyperledger SDK.;;;","16/Jan/19 4:11 PM;davidkhala;[~ihormudryy] sure it is still not enough. But I think for learner to understand the workflow, e2e is enough. For further learning, I will normally go to see the integration tests of each fabric sdk. That is the exact place to learn how to play.  ;;;","26/Jan/19 12:46 AM;antoniovassell;[~davidkhala]  which integration test are you referring to that makes use of the fabric-ca images? I looked into the tests and I don't see any. I would assume they would be here: [https://github.com/hyperledger/fabric-ca]

 

Thoughts?;;;",,,,,,,,,,,,,
"As a fabric CA operator, I want access to metrics that provide insight into the server API usage.",FABC-782,34529,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,sykesm,sykesm,10/Oct/18 4:01 AM,22/Feb/19 4:49 AM,28/Oct/23 2:21 AM,29/Jan/19 11:09 AM,,,,,,,v1.4.1,v2.0.0,,,,,0,ipm-planned,operations,,,,"Fabric CA should expose request based metrics that are consistent with the RED
monitoring philosophy:

- Request **R**ate
- Request **E**rrors
- Request **D**uration

These metrics are generally required by any monitoring solution and should be
surfaced consistently for all API endpoints.
",,skarim,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-3388,,,No,,Unset,No,,,"1|hzzq7x:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/19 1:00 AM;sykesm;Remaining decision: Do we want a separate endpoint for operations (metrics/health) for the CA like we have with the peer and orderer?

Guess: yes.;;;","15/Jan/19 5:52 AM;skarim;Discussed this with Keith as well and going to create a separate endpoint for metrics and health.;;;",,,,,,,,,,,,,,,,,,
Add middleware to http router,FABC-783,36461,34529,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,04/Jan/19 2:21 AM,22/Feb/19 4:49 AM,28/Oct/23 2:21 AM,23/Jan/19 1:11 PM,,,,,,,v1.4.1,v2.0.0,,,,,0,,,,,,Add middleware to http router,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i004tj:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Jan/19 11:59 PM;skarim;https://gerrit.hyperledger.org/r/c/28462/4;;;",,,,,,,,,,,,,,,,,,,
Vendor gomega,FABC-784,36462,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,skarim,skarim,04/Jan/19 2:22 AM,04/Jan/19 11:57 PM,28/Oct/23 2:21 AM,04/Jan/19 11:57 PM,,,,,,,,,,,,,0,,,,,,Vendor gomega,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-3388,,,No,,Unset,No,,,"1|i004tr:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Add metrics for server APIs,FABC-785,36463,34529,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,04/Jan/19 2:22 AM,22/Feb/19 4:49 AM,28/Oct/23 2:21 AM,25/Jan/19 6:15 AM,,,,,,,v1.4.1,v2.0.0,,,,,0,,,,,,Add metrics for server APIs,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i004tz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Jan/19 11:59 PM;skarim;https://gerrit.hyperledger.org/r/c/28464/2;;;",,,,,,,,,,,,,,,,,,,
Vendor go-kit,FABC-786,36464,34529,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,04/Jan/19 2:22 AM,22/Feb/19 4:49 AM,28/Oct/23 2:21 AM,25/Jan/19 6:15 AM,,,,,,,v1.4.1,v2.0.0,,,,,0,,,,,,Vendor go-kit,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i004u7:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Jan/19 11:58 PM;skarim;[https://gerrit.hyperledger.org/r/c/28465/2];;;",,,,,,,,,,,,,,,,,,,
Wire in metrics for server APIs,FABC-787,36465,34529,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,04/Jan/19 2:22 AM,22/Feb/19 4:50 AM,28/Oct/23 2:21 AM,29/Jan/19 12:58 AM,,,,,,,v1.4.1,v2.0.0,,,,,0,,,,,,Wire in metrics for server APIs,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i004uf:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Jan/19 11:58 PM;skarim;https://gerrit.hyperledger.org/r/c/28466/;;;",,,,,,,,,,,,,,,,,,,
"As a fabric CA operator, I want access to metrics that provide insight into requests made to the configured database so I can identify performance or connectivity issues.",FABC-789,34530,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,sykesm,sykesm,10/Oct/18 4:03 AM,28/Feb/19 5:35 AM,28/Oct/23 2:21 AM,28/Feb/19 5:35 AM,,,,,,,v2.0.0,,,,,,0,ipm,ipm-planned,operations,,,"Basic metrics should be surfaced for database transactions performed by Fabric
CA. These metrics should help enable operators to determine if the API is
being adversely impacted by response time or connectivity issues with their
backend database.
",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-3388,,,No,,Unset,No,,,"1|hzzq7y:i",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/19 12:56 AM;sykesm;Example metrics:

2 metrics w/ labels - duration (histogram) and error count (sql code as label?)

- refactor code to pull out db calls
- create metric options 
- wire metrics
;;;",,,,,,,,,,,,,,,,,,,
Create an operations server,FABC-790,36760,34529,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,15/Jan/19 5:54 AM,22/Feb/19 4:50 AM,28/Oct/23 2:21 AM,29/Jan/19 12:58 AM,,,,,,,v1.4.1,v2.0.0,,fabric-ca-server,,,0,,,,,,Create an operations' server endpoint that will be used to retrieve metrics data and for health checks.,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i006qf:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Jan/19 6:16 AM;skarim;https://gerrit.hyperledger.org/r/c/28717/;;;",,,,,,,,,,,,,,,,,,,
Remove tcert code from CA,FABC-791,36824,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,skarim,skarim,16/Jan/19 11:43 PM,13/Jan/20 1:34 PM,28/Oct/23 2:21 AM,13/Jan/20 1:34 PM,,,,,,,v2.0.0,,,,,,0,,,,,,"TCerts are no longer being used, need to remove all tcert code from the Fabric CA repo as it is dead code at this point.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-797,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0073r:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Fabric CA Cluster trust broken between Intermediates,FABC-792,36833,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,ahmedsajid,ahmedsajid,17/Jan/19 2:38 AM,19/Jul/19 1:16 AM,28/Oct/23 2:21 AM,05/Jul/19 9:14 PM,v1.1.0,,,,,,,,,fabric-ca-server,,,0,,,,,,"We are running into issue with Fabric CA where we have multiple Intermediate CAs running with common ROOT CA and the user cert issued by Intermediate CA1 is not trusted by Intermediate CA2 even though both CAs are sharing the same DB.

Attached diagram for better explanation.

Current work around is to add Intermediate CA certs to ca chain file so that both CAs trust Root, itself and each the other CA.",,ahmedsajid,mastersingh24,ptippett,rene.mciver,silveraid,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Jan/19 2:38 AM;ahmedsajid;CAs.png;https://jira.hyperledger.org/secure/attachment/16587/CAs.png",,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0075b:",,,,Unset,Unset,,,,,,,,,,,,"Bring up Root CA
Bring up 2 Intermediate enroll against above Root CA
Enroll Admin user against Intermediate CA1
Use Admin cert to query identities against Intermediate CA2 which will throw error",,Unset,,,,,,Unset,,Unset,,(Please add usage information),ahmedsajid,mastersingh24,ptippett,rene.mciver,silveraid,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Jul/19 9:12 PM;mastersingh24;This is not a ""bug"" ... might be a feature request although I'm not sure we actually want to do anything about this.
It's pretty hairy to get into trying to automate cert distribution across multiple intermediates.
;;;","05/Jul/19 9:14 PM;mastersingh24;This is not a bug; it's simple how PKIX works.
I don't see adding any type of automated distribution across intermediates, so closing;;;","05/Jul/19 9:22 PM;silveraid;Not a problem, but please update the documentation, because this means that getting load balanced between multiple intermediate instances is not possible anymore, especially not with round robin as the documentation suggests.

[https://hyperledger-fabric-ca.readthedocs.io/en/release-1.4/users-guide.html#overview]

[https://hyperledger-fabric-ca.readthedocs.io/en/release-1.4/users-guide.html#setting-up-a-cluster]

 

 ;;;","05/Jul/19 11:12 PM;ahmedsajid;[~mastersingh24],

I agree with [~silveraid]'s comment here.
If there's no plan to support this and mentioned that this is expected behaviour for PKIX the documentation should be updated.

Also, if you think this is be a feature request, I can open a Jira for it.;;;","19/Jul/19 12:58 AM;ptippett;Let me clarify.  Fabric CA will not copy certs across intermediates to enable HA.  However, this can be done manually outside of Fabric.

[~ahmedsajid] [~silveraid];;;","19/Jul/19 1:16 AM;mastersingh24;I also believe that load balancing across a cluster of CA's is orthogonal; unless I'm reading the docs wrong, it does not say that your cluster had to be made up of multiple intermediate CAs.  Nothing prevents you from sharing the same intermediate root pair across multiple Fabric CA servers.;;;",,,,,,,,,,,,,,
CA server should shutdown gracefully,FABC-793,36837,,Task,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,17/Jan/19 5:35 AM,17/Jan/19 5:35 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,1,,,,,,"Staring in Go 1.8, there is support for gracefully shutting down a HTTP Server, the Fabric CA server should be updated to use this new functionality.",,nyet,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00767:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),nyet,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove tcert from swagger,FABC-794,36841,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,17/Jan/19 7:00 AM,26/Mar/19 7:40 PM,28/Oct/23 2:21 AM,18/Jan/19 12:54 AM,,,,,,,v1.4.1,v2.0.0,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00773:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Jan/19 7:06 AM;mastersingh24;https://gerrit.hyperledger.org/r/28766  (master)

[https://gerrit.hyperledger.org/r/28767]  (release-1.4);;;",,,,,,,,,,,,,,,,,,,
CA Server Health Check,FABC-795,36870,34514,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,skarim,skarim,17/Jan/19 11:45 PM,22/Feb/19 5:30 AM,28/Oct/23 2:21 AM,22/Feb/19 3:14 AM,,,,,,,,,,,,,0,,,,,,,,btl5037,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007dj:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Feb/19 6:02 AM;btl5037;https://gerrit.hyperledger.org/r/c/28818/;;;",,,,,,,,,,,,,,,,,,,
CA DB Health Check,FABC-796,36871,34514,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,skarim,skarim,17/Jan/19 11:45 PM,22/Feb/19 3:24 AM,28/Oct/23 2:21 AM,22/Feb/19 3:24 AM,,,,,,,,,,,,,0,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007dr:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove tcert code,FABC-797,36982,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,mastersingh24,mastersingh24,mastersingh24,21/Jan/19 8:50 PM,22/Sep/19 5:54 PM,28/Oct/23 2:21 AM,22/Sep/19 5:54 PM,,,,,,,v2.0.0,,,,,,0,,,,,,We don't use/support tcerts so the code should be removed.,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-791,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0080n:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create ifrit runner for mysql to be used in CA tests,FABC-798,37046,37288,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,23/Jan/19 12:18 AM,13/Feb/19 12:02 AM,28/Oct/23 2:21 AM,13/Feb/19 12:02 AM,,,,,,,,,,,,,0,ipm,ipm-planned,,,,,,skarim,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzq7y:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),0.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,sykesm,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Feb/19 12:02 AM;skarim;https://gerrit.hyperledger.org/r/c/29169/;;;",,,,,,,,,,,,,,,,,,,
Create ifrit runner for Postgres to be used in CA tests,FABC-799,37047,37288,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,23/Jan/19 12:19 AM,13/Feb/19 1:09 PM,28/Oct/23 2:21 AM,13/Feb/19 1:09 PM,,,,,,,,,,,,,0,ipm,ipm-planned,,,,,,btl5037,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzq7y:9",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),0.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,sykesm,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jan/19 11:52 PM;btl5037;Current Postgres version is 9.6, but should be configurable in file;;;","01/Feb/19 6:03 AM;btl5037;https://gerrit.hyperledger.org/r/c/29059/;;;",,,,,,,,,,,,,,,,,,
Enlarge PEM Column for Fabric CA Databases in MySQL ,FABC-800,36941,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,caod,ksager,ksager,19/Jan/19 12:47 AM,07/Mar/21 2:08 PM,28/Oct/23 2:21 AM,18/May/20 11:02 PM,v1.1.0,,,,,,v1.5.0,,,fabric-ca-server,,,0,ipm,,,,,"The node threw this error appeared during an enrollment of admin user:

Error: Enrollment failed with errors [[\{""code"":0,""message"":""Certificate signing failure: Failed to insert record into database: Error 1406: Data too long for column 'pem' at row 1""}]]

 

In the CA log was error:

2019/01/10 17:30:29 [INFO] 142.117.15.158:65005 POST /api/v1/enroll 500 0 ""Certificate signing failure: Failed to insert record into database: Error 1406: Data too long for column 'pem' at row 1""

 

The request was:

""\{""enrollmentID"":""AppAdmin1"",""enrollmentSecret"":""pass0"",""profile"":""tls"",""attr_reqs"":[{""name"":""id""},\{""name"":""role""},\{""name"":""verifykey""},\{""name"":""prvkey""},\{""name"":""pubkey""},\{""name"":""symkey""}]}""

 

The problem was fixed by expanding the PEM column in all the databases in MySQL.  The column changed from 4096 to 8192. 

 

 ",,angelo.decaro,caod,denyeart,jyellick,ksager,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/May/20 11:50 PM;ksager;0098-container-mysql-resize-certificates-pem-column.sh;https://jira.hyperledger.org/secure/attachment/18331/0098-container-mysql-resize-certificates-pem-column.sh",,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzzc",,,,Unset,Unset,,,,,,,,,,,,Enroll am admin for  a network.  The problem does not reproduce on every network.  It worked on one network an then failed on a second.,,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,caod,denyeart,jyellick,ksager,manish-sethi,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Jun/19 4:49 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/fabric-ca/+/31692/;;;","06/Jun/19 4:50 PM;angelo.decaro;Hi [~ksager], please, could you look at the change-set and see if it fits your need? Thanks much :);;;","07/Jun/19 2:06 AM;ksager;Hi [~angelo.decaro],  I see it was changed to a blob from varbinary.  Should work fine since the length is 64K for blob.  The only issue that I can see is when the blob field is overrun it puts out a warning verses the failure for the varbinary.  Customers may not pick up on the truncation.  Never saw a 64K cert before so the field overrun may not be an issue.;;;","09/Jun/19 5:49 PM;denyeart;[~angelo.decaro] Are you thinking this goes to both v2.0.0 (master) and v1.4.x (release-1.4)?

Do users that upgrade need to 'migrate' the column type somehow? Any release note needed? If so click Edit and populate the release note field.;;;","24/Jul/19 1:08 PM;denyeart;[~angelo.decaro] update please?;;;","24/Sep/19 11:19 PM;jyellick;[~angelo.decaro] is there an update?;;;","29/Oct/19 9:31 PM;angelo.decaro;So, it looks like the change-set has been abandoned to allow the transfer to GitHub. 
 ;;;","29/Oct/19 9:32 PM;angelo.decaro;It remains to see what's the best solution to address this issue, though. Maybe just moving from 4k to 8k varbinary is a simpler solution.;;;","10/Nov/19 2:46 AM;denyeart;[~angelo.decaro] I agree just shifting to 8k seems like the path of least resistance. For existing deployments, is there an upgrade script where the change from 4k to 8k could be made?;;;","12/Nov/19 10:14 PM;ksager;[~denyeart], [~angelo.decaro]  A script exist for V1.0 to change the field to 8k.  0098-container-mysql-resize-certificates-pem-column;;;","14/Jan/20 6:08 AM;manish-sethi;[~denyeart], [~angelo.decaro] - any plans for this Jira?;;;","15/May/20 12:28 AM;caod;[https://github.com/hyperledger/fabric-ca/pull/152]

We're making an effort to start tackling these older fabric-ca issues. [~ksager] I don't think you attached the update script in your comment above for changing the field to 8k.

[~denyeart] what release fix version would we like to target this for? Seems a bit late to slip it into the 1.4.7 release.;;;","18/May/20 11:50 PM;ksager;[^0098-container-mysql-resize-certificates-pem-column.sh]

 

[~caod]  Script attached;;;",,,,,,,
A user identity is intermittently able to be registered more than once,FABC-801,37078,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,mastersingh24,dabbertorres,dabbertorres,23/Jan/19 11:24 PM,03/Jun/20 3:02 AM,28/Oct/23 2:21 AM,02/Mar/20 1:52 PM,,,,,,,v1.4.5,,,fabric-ca-server,,,2,,,,,,"Seen with versions 1.3 and 1.4. Using Postgres as the DB for fabric-ca-server.

When a fabric-ca-client later tries to enroll, it receives the following error message:
 {{Error Code: 0 - 2 rows were affected when updating the state of identity <username>}}

This can be confirmed by using psql to check the user's table.

One possible reason why this may be happening is due to the users table not having a PRIMARY KEY set, or at least not having UNIQUE set on the id column:
[https://github.com/hyperledger/fabric-ca/blob/8c5bc3566495a3aaf566bf90d3f9da631ec46869/lib/dbutil/util.go#L295] 

fabric-ca-server (debug) logs are attached.",,dabbertorres,jyellick,mastersingh24,nyet,tatsu-sato,tylerwince,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-891,,,,,,,FABC-913,,,,,,,"23/Jan/19 11:13 PM;dabbertorres;fabric-ca-server-logs.log;https://jira.hyperledger.org/secure/attachment/16611/fabric-ca-server-logs.log",,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008kv:",,,,Unset,Unset,,,,,,,,,,,,,,Unset,,,,,,Unset,,Unset,,(Please add usage information),dabbertorres,jyellick,mastersingh24,nyet,tatsu-sato,tylerwince,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/19 11:27 PM;mastersingh24;[~dabbertorres]  - if your setup is still running, can you verify that you can indeed actually register the same user twice?;;;","23/Jan/19 11:53 PM;dabbertorres;It's intermittent, but yes.

Running psql on the postgres instance:
{code:java}
postgres=# SELECT COUNT(*) FROM users WHERE id='<username>';
 count 
-------
     2{code};;;","25/Sep/19 1:08 AM;jyellick;[~mastersingh24] does that give you what you need?;;;","12/Dec/19 3:23 AM;tatsu-sato;[~mastersingh24]

I have also faced with this issue and I have created a patch for this issue as follow.

[https://github.com/satota2/fabric-ca/commit/99cb20b8f0c47bf03a969d73d11388433b33abc8]

If you aren't working on this issue and you don't mind, could I submit the patch?

 ;;;","03/Jan/20 1:04 AM;dabbertorres;[~tatsu-sato], by all means!;;;","15/Jan/20 8:54 AM;tatsu-sato;[~dabbertorres] [~mastersingh24] Thank you for your comment, [~dabbertorres].

The following PR on FABC-891 seem to include code to solve our issue too.

https://jira.hyperledger.org/browse/FABC-891

[https://github.com/hyperledger/fabric-ca/pull/81/files#diff-a77e2def38ce298f95d1f9851b5f3925]

(please see L167 in the above PR) 

 

I think that our issue can be closed because the PR on FABC-891 has been merged today. ;;;",,,,,,,,,,,,,,
"Fix misspelling of "" affiliaton""",FABC-802,37207,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Lowest,Done,diizuka,diizuka,diizuka,29/Jan/19 9:20 AM,27/Feb/19 7:59 AM,28/Oct/23 2:21 AM,27/Feb/19 7:59 AM,v1.1.0,v1.2.0,v1.3.0,v1.4.0,,,v2.0.0,,,fabric-ca-server,,,0,,,,,,"Fix misspelling of "" affiliaton"" to “affiliation”",,denyeart,diizuka,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009cn:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,diizuka,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Feb/19 2:59 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/28995/;;;",,,,,,,,,,,,,,,,,,,
Refactor DB Code,FABC-803,37234,34530,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,30/Jan/19 4:41 AM,01/Mar/19 12:57 AM,28/Oct/23 2:21 AM,26/Feb/19 3:40 AM,,,,,,,,,,,,,0,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009i7:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Jan/19 8:08 AM;skarim;https://gerrit.hyperledger.org/r/c/29014/;;;",,,,,,,,,,,,,,,,,,,
Create metric options,FABC-804,37235,34530,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,30/Jan/19 4:41 AM,01/Mar/19 12:59 AM,28/Oct/23 2:21 AM,28/Feb/19 5:34 AM,,,,,,,,,,,,,0,,,,,,"Define the options for the metrics that we are going to track in relation to the database. There will be two main metrics.
 # Number of calls to the database
 # Duration of each call to the database",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009if:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Feb/19 4:38 AM;skarim;https://gerrit.hyperledger.org/r/29107;;;",,,,,,,,,,,,,,,,,,,
Wire metrics,FABC-805,37236,34530,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,30/Jan/19 4:42 AM,01/Mar/19 12:59 AM,28/Oct/23 2:21 AM,28/Feb/19 5:34 AM,,,,,,,,,,,,,0,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009in:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Feb/19 4:38 AM;skarim;https://gerrit.hyperledger.org/r/29108;;;",,,,,,,,,,,,,,,,,,,
A user who enrolls the MSP can obtain a certificate with an arbitrary expiration date,FABC-806,37242,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,ooharawork,ooharawork,30/Jan/19 10:01 AM,06/Dec/19 2:39 AM,28/Oct/23 2:21 AM,06/Dec/19 2:39 AM,v1.3.1,v1.4.0,,,,,v1.4.5,v2.0.0,,fabric-ca-server,,,0,Security,,,,,"h2. Summary

A user who enrolls the MSP can obtain a certificate with an arbitrary expiration date before the cacert's expiry, because fabric-ca-server sets the date based on a parameter from the client, with no check other than to compare it with cacert's expiry.
 The server should check the validity to ensure that it would not exceed a deadline defined in the server.

h2. Background

According to RFC 5280, it is CA's (hence virutally CA admin's) responsibility to set the expiry date to an appropriate value :

{quote}
4.1.2.5 Validity
The certificate validity period is the time interval during which
the CA warrants that it will maintain information about the status of the certificate.
[...]
(notAfter).
{quote}

h2. Observation

h3. Expected Behavior

The ca server should not permit any non-admin user to set an arbitrary expiry date of a certificate.

h3. Actual Behavior

In Fabric, {{fabric-ca-client enroll}} sends a request like this:

{code:json}
{""hosts"":[""myhost""],
""certificate_request"":""-----BEGIN CERTIFICATE REQUEST[...]\n"",
""profile"":"""",
""crl_override"":"""",
""label"":""example"",
""NotBefore"":""0001-01-01T00:00:00Z"",
""NotAfter"":""0001-01-01T00:00:00Z"",
""CAName"":""""}
{code}

Here, we have a {{NotAfter}} field.
In the current implementation of fabric-ca-client, it is always sent with the ``zero'' value above. With that default value, the ca server sets the expiry date as per specified in a profile in the server side, which is ok.
https://github.com/hyperledger/fabric-ca/blob/release-1.3/lib/serverenroll.go#L109


However, by using curl or a modified client, you can send a crafted request in which the NotAfter field is set to an arbitrary date.
The server accepts NotAfter field if it does not exceed cacert's expiry, then sets it to the enrolled certificate for the user.


h2. Conclusion

Enroll/reenroll interface on the server should check temporal validity of NotAfter parameter, comparing not only with cacert's expiry, but also with some other deadline explicitly specified for that parameter.",,denyeart,dtomczyk,jyellick,mastersingh24,ooharawork,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009jz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,dtomczyk,jyellick,mastersingh24,ooharawork,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Mar/19 11:48 PM;mastersingh24;Seems like we have two options:
# don't allow clients to set the expiration and just use the expiry set in the signing profile
# make sure the requested expiry is earlier than the expiry set in the signing profile rather than the CA's expiration;;;","29/Mar/19 3:07 PM;ooharawork;I would say option 1 would be more preferable because:
* Only very few use cases are expected where a user reallly needs to set the expiry as per option 2
* Currently the default fabric-ca-client cannot set the expiry, and even if we disable the feature there  will be no effect  for most people
* In option 2, when the user tried to set a too late date, the server should return an error and the client should give the user the reason of the error. This would complicate operational considerations;;;","30/Mar/19 6:08 PM;mastersingh24;Thanks [~ooharawork]  - we'll go with option 1 ... we can do this for 2.0.0 release.;;;","25/Sep/19 1:06 AM;jyellick;[~mastersingh24] are you still planning to tackle this for v2.0 or should we unassign you and throw it in the backlog?;;;","05/Dec/19 10:04 PM;mastersingh24;[https://github.com/hyperledger/fabric-ca/pull/75];;;","05/Dec/19 10:57 PM;denyeart;Merged in master, I've set FixVersion to v1.4.5 additionally.;;;","05/Dec/19 11:12 PM;mastersingh24;[https://github.com/hyperledger/fabric-ca/pull/76] ;;;",,,,,,,,,,,,,
Create a platform for testing Postgres and MySQL DB's in the CA,FABC-807,37288,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,31/Jan/19 1:07 AM,13/Feb/19 1:10 PM,28/Oct/23 2:21 AM,13/Feb/19 1:10 PM,,,,,,,,,,,,,0,ipm,ipm-planned,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzq7y:c",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Vendor official Docker Client and ifrit,FABC-808,37289,37288,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,31/Jan/19 1:10 AM,09/Feb/19 9:17 AM,28/Oct/23 2:21 AM,09/Feb/19 9:17 AM,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009tj:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Feb/19 6:03 AM;btl5037;https://gerrit.hyperledger.org/r/c/29051/;;;",,,,,,,,,,,,,,,,,,,
Update Makefile to pull 3rd-party Docker images,FABC-809,37440,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,05/Feb/19 11:00 PM,09/Feb/19 9:17 AM,28/Oct/23 2:21 AM,09/Feb/19 9:17 AM,,,,,,,,,,,,,0,ipm,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009wd:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Feb/19 12:17 AM;btl5037;https://gerrit.hyperledger.org/r/c/29135/;;;",,,,,,,,,,,,,,,,,,,
Cleanup directory handling  in /scripts/run_unit_tests script,FABC-810,37492,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,08/Feb/19 12:04 AM,23/Feb/19 1:46 AM,28/Oct/23 2:21 AM,23/Feb/19 1:46 AM,,,,,,,,,,,,,0,ipm,,,,,"run_unit_tests currently uses a RegEx to identify packages that should be excluded from unit_tests, need to rework into a more readable and common sense approach. 

The comments related to this should also be updated to reflect its purpose",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00avr:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Feb/19 1:46 AM;btl5037;https://gerrit.hyperledger.org/r/c/29464/;;;",,,,,,,,,,,,,,,,,,,
Document on how to bootstrap CA using crypto from Cryptogen,FABC-811,37498,,Documentation,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,skarim,skarim,skarim,08/Feb/19 12:53 AM,23/Nov/19 5:35 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,ipm,,,,,Document on how to bootstrap CA using crypto from Cryptogen,,skarim,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pkr:c",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Aug/19 3:19 AM;sykesm;[~skarim] This is the item I keep asking about? Has this been completed?

Thanks.;;;","03/Aug/19 3:33 AM;skarim;[~sykesm] No, this one has not yet been worked on. I thought you had been talking about FABC-814, it still waiting to be merged. https://gerrit.hyperledger.org/r/c/fabric-ca/+/29430;;;",,,,,,,,,,,,,,,,,,
fabric-ca fvt tests are failing as there is no fabric-ca-client binary available in the test,FABC-812,37502,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,skarim,sambhavdutt,sambhavdutt,08/Feb/19 1:40 AM,19/Mar/19 8:13 PM,28/Oct/23 2:21 AM,09/Feb/19 1:29 AM,v2.0.0,,,,,,,,,,,,0,ci-failure,,,,,"The fabric-ca fvt tests are failing as there are no fabric-ca-client in the fvt-tests , 

*Consistent:* Yes
 *Branch:* master
 *Platform:* x86_64
 *Error Snippet:*
{code:java}
10:23:33  =============> testAlternateTruthValues
10:23:33 /w/workspace/fabric-ca-verify-fvt-x86_64/gopath/src/github.com/hyperledger/fabric-ca/scripts/fvt/affiliation_modify_test.sh: line 285: /usr/local/bin/fabric-ca-client: No such file or directory

{code}
*Build Log*

[https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-fvt-x86_64/1/]",,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,8a04f4432c8f2abd2130d11ad34114bf84a7d84d,Unset,No,,,"1|i00axz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/19 11:53 PM;sambhavdutt;https://gerrit.hyperledger.org/r/#/c/29194/;;;",,,,,,,,,,,,,,,,,,,
Revise make fvt-tests target,FABC-813,37508,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,skarim,skarim,08/Feb/19 6:04 AM,09/Feb/19 1:27 AM,28/Oct/23 2:21 AM,09/Feb/19 1:27 AM,,,,,,,v2.0.0,,,,,,0,,,,,,A separate parallel jobs is now run in CI for FVT tests. The current way of trigger the FVT tests in Jenkins is failing. Need to revise the current fvt-tests target so that it can be directly called in the Jenkins job.,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00az3:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Feb/19 6:24 AM;skarim;https://gerrit.hyperledger.org/r/c/29194/;;;",,,,,,,,,,,,,,,,,,,
Create an operational style documentation on how to use Fabric CA with fabric,FABC-814,37559,,Documentation,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,11/Feb/19 7:07 AM,22/Aug/19 12:51 AM,28/Oct/23 2:21 AM,22/Aug/19 12:51 AM,,,,,,,v2.0.0,,,,,,1,,,,,,Create an operational style documentation on how to use Fabric CA with fabric,,denyeart,knagware9,nyet,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-444,FABC-139,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzq7y:w",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,knagware9,nyet,skarim,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/19 9:48 AM;skarim;https://gerrit.hyperledger.org/r/29430;;;","17/Apr/19 11:46 PM;nyet;Question: is it not possible to start the orderer without having peer org certificates because the system channel needs peer certs?

I am trying to deploy a network piece by piece incrementally (including starting an orderer without peers if possible).;;;","15/May/19 12:22 AM;denyeart;Also see the posting from Nye. The operations guide should answer these types of questions:

[https://lists.hyperledger.org/g/fabric/topic/using_fabric_ca_client/30552669]

 ;;;","11/Jul/19 12:36 AM;nyet;I have forked the PR here for easy reading (it may run behind the gerrit PR since i mirror it by hand)

https://github.com/Blockdaemon/fabric-ca/blob/gerrit-pr-29430/docs/source/operations_guide.rst;;;",,,,,,,,,,,,,,,,
"As an operator of Fabric 1.4, I want to benefit from the operational enhancements in fabric-ca",FABC-815,37589,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,sykesm,sykesm,12/Feb/19 12:44 AM,13/Mar/19 3:59 AM,28/Oct/23 2:21 AM,13/Mar/19 3:59 AM,,,,,,,v1.4.1,,,,,,0,ipm,,,,,Backport fabric CA health checks and metrics to release-1.4.,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzq8k:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add the database connection strings to the MySQL and Postgres runners,FABC-816,37625,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,13/Feb/19 12:10 AM,20/Feb/19 10:55 AM,28/Oct/23 2:21 AM,20/Feb/19 10:55 AM,,,,,,,,,,,,,0,ipm,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008do:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Feb/19 10:55 AM;btl5037;https://gerrit.hyperledger.org/r/c/29347/;;;",,,,,,,,,,,,,,,,,,,
Include 'fabric-ca-server' binary along with the 'fabric-ca-client' in dist-all target.,FABC-817,37668,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,btl5037,sambhavdutt,sambhavdutt,14/Feb/19 6:12 AM,13/Jan/20 1:33 PM,28/Oct/23 2:21 AM,13/Jan/20 1:33 PM,v1.4.1,v2.0.0,,,,,,,,fabric-ca-server,,,0,fabric-ca,,,,,"As of now, the dist-all target creates the fabric-ca-client binary for supporting platforms and creates a tar file for each platform.

Can I make a request to include the 'fabric-ca-server' in the same path with dist-all, This would make it easy to get both binaries in the folder and in tar format with a single make target.",,latitiah,rameshthoomu,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00brz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,rameshthoomu,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"fabric-ca-server API should permit enrollment of an existing valid credential created by cryptogen tool and insert the identity/certificate information of this user being enrolled, into its SQLite/MySQL data store. ",FABC-818,37758,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,pvrbharg,pvrbharg,18/Feb/19 1:21 PM,26/Aug/19 10:54 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Here is what I am seeing in the published API definition file for v1.4.0-rc2 release.
 
So the fabric-ca-server API wants to start the lifecycle of an identity from its own end and does not want to take the inputs of valid identity from another tool [such as cryptogen]. If we can permit this new API call – where the caller passes in an identity – say created by cryptogen and if ca server can validate it and populate it in its SQLite data/object store – perhaps this would ease the pain and reduce the friction?

For more details - please see attached documents. 

This issue is a friction point at multiple customer PoCs that we are aware of and it is getting more scrutiny as more customers are getting aware of this issue. 

Thanks.
",,mastersingh24,pvrbharg,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Feb/19 1:21 PM;pvrbharg;DraftProposal_Bhargav-Phani_Feb172019.doc.pdf;https://jira.hyperledger.org/secure/attachment/16825/DraftProposal_Bhargav-Phani_Feb172019.doc.pdf","18/Feb/19 1:21 PM;pvrbharg;DraftProposal_Bhargav-Phani_Feb172019.docx;https://jira.hyperledger.org/secure/attachment/16824/DraftProposal_Bhargav-Phani_Feb172019.docx",,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c9j:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,pvrbharg,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Aug/19 8:02 AM;mastersingh24;cryptogen is simply a tool to make it easier to get started playing with Fabric so I'm not sure this is a scenario we want to / should support.  One can certainly take the root CA key pair cryptogen creates and use it to start a fabric-ca-server.;;;","26/Aug/19 10:54 PM;pvrbharg;Dear Gari, 

>>> so I'm not sure this is a scenario we want to / should support. 

         Me neither!  However I can tell you - cryptogen is being used not just to play with and use in dev/test/pre-prod environments.

         I also know - bringing up fabric-ca with key pairs generated by cryptogen is one part of solution. What is needed is - an ability to transition all the consortium members be recognized by fabric-ca *seamlessly* - that cryptogen initially bootstrapped since this is what enables customers to use the bootstrapped and running identities to be continued on as the cryptogen to fabric-ca hand off takes place.  Are you aware of such a capability?

This is the context of this feature request. If this capability is not provided - there is a risk of customers going into operational environment with cryptogen identities [*unsupported]* if ** this is not already happening. This would lead to more downstream issues, potentially.

Please share your wisdom.;;;",,,,,,,,,,,,,,,,,,
Abstract the calls to the persistent data layer ,FABC-819,37886,,Task,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,22/Feb/19 2:02 AM,28/Jul/19 12:00 AM,28/Oct/23 2:21 AM,,,,,,,,,,,fabric-ca-server,,,0,,,,,,"There needs to be a higher level abstraction in the CA for the persistent data layer, this abstraction should be structured to allow for plugging in other types of database (e.g. nosql)",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cvz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Backport Server API Metrics,FABC-820,37894,37589,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,22/Feb/19 4:21 AM,23/Feb/19 12:49 AM,28/Oct/23 2:21 AM,23/Feb/19 12:49 AM,,,,,,,,,,,,,0,,,,,,Backport Server API Metrics,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cxr:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Feb/19 4:51 AM;skarim;[https://gerrit.hyperledger.org/r/c/29451/]

[https://gerrit.hyperledger.org/r/c/29452/]

[https://gerrit.hyperledger.org/r/c/29453/]

[https://gerrit.hyperledger.org/r/c/29454/]

[https://gerrit.hyperledger.org/r/c/29455/];;;",,,,,,,,,,,,,,,,,,,
Backport Server/DB Health Check,FABC-821,37895,37589,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,22/Feb/19 4:21 AM,23/Feb/19 12:49 AM,28/Oct/23 2:21 AM,23/Feb/19 12:49 AM,,,,,,,,,,,,,0,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cxz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Feb/19 5:36 AM;skarim;https://gerrit.hyperledger.org/r/c/29459/;;;",,,,,,,,,,,,,,,,,,,
Backport Database API Metrics,FABC-822,37896,37589,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,22/Feb/19 4:21 AM,13/Mar/19 3:59 AM,28/Oct/23 2:21 AM,13/Mar/19 3:59 AM,,,,,,,,,,,,,0,,,,,,,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cy7:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Left over test artifact from the test in test/integration/healthcheck,FABC-823,37898,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,btl5037,skarim,skarim,22/Feb/19 6:25 AM,22/Feb/19 9:03 AM,28/Oct/23 2:21 AM,22/Feb/19 9:03 AM,,,,,,,v2.0.0,,,,,,0,ipm,,,,,"The server starts up and creates the home directory, but the directory is never cleaned up after the test has completed.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c0c:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Feb/19 8:27 AM;skarim;https://gerrit.hyperledger.org/r/c/29462/;;;",,,,,,,,,,,,,,,,,,,
undefined: SQLiteConn error while buidling fabric-ca-client binary ,FABC-824,37911,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,skarim,rameshthoomu,rameshthoomu,23/Feb/19 12:40 AM,23/Feb/19 3:35 AM,28/Oct/23 2:21 AM,23/Feb/19 3:35 AM,,,,,,,,,,fabric-ca-client,,,0,,,,,,"Encountered below error while building fabric-ca-client binary.

Branch: Master

make dist-all on fabric-ca directory

Failing from fabric-ca commit # {{5361589cedb6d23db2aba1dff512c4304cc03d3c}}

00:09:37.221 # github.com/hyperledger/fabric-ca/vendor/github.com/mattn/go-sqlite3
00:09:37.221 {color:#ff0000}vendor/github.com/mattn/go-sqlite3/tracecallback_noimpl.go:7:10: undefined: SQLiteConn{color}
00:09:39.470 Makefile:249: recipe for target 'release/darwin-amd64/bin/fabric-ca-client' failed
00:09:39.470 make: *** [release/darwin-amd64/bin/fabric-ca-client] Error 2
00:09:39.507 Build step 'Execute shell' marked build as failure

 

[https://jenkins.hyperledger.org/view/Daily/job/fabric-nightly-release-job-master-x86_64/45/console]",,rameshthoomu,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d0f:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,skarim,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Feb/19 1:44 AM;skarim;https://gerrit.hyperledger.org/r/c/29489/;;;",,,,,,,,,,,,,,,,,,,
Upgrade to Alpine 3.9,FABC-825,37935,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,23/Feb/19 9:41 PM,26/Mar/19 7:40 PM,28/Oct/23 2:21 AM,12/Mar/19 1:39 AM,,,,,,,v2.0.0,,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14318,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d3r:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Mar/19 8:20 PM;mastersingh24;https://gerrit.hyperledger.org/r/29980;;;",,,,,,,,,,,,,,,,,,,
Need APIs to get the number of remaining enrollments on a user id,FABC-826,37965,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,varadatibm,varadatibm,26/Feb/19 12:27 AM,26/Aug/19 10:21 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,,,mastersingh24,varadatibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00da7:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,varadatibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Aug/19 8:07 AM;mastersingh24;[~varadatibm]  - What's the use case here?  Generally speaking, people should either be able to enroll once or an infinite number of times.  Not sure why anyone would pick an arbitrary number of enrollments so not sure we actually need this.;;;","26/Aug/19 10:21 PM;varadatibm;[~mastersingh24] this definitely isn't a high priority item... Since Fabric provides functionality to select number of enrollments we expose it through the UI the same way...  currently it is mainly for information purposes and troubleshooting to see if the given id has any enrollments left. ;;;",,,,,,,,,,,,,,,,,,
Use standard file naming convention for mocks,FABC-827,37992,,Task,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,skarim,skarim,27/Feb/19 3:35 AM,27/Jul/19 11:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"Mock file names currently use camel casing, the file names need to be converted to use all lowercase letters. The respective go generate statements also need to be updated.",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dfz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Newly introduced attributes should be given to admin users during migration,FABC-829,38658,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,caod,skarim,skarim,22/Mar/19 3:52 AM,25/Jun/20 4:40 AM,28/Oct/23 2:21 AM,25/Jun/20 4:40 AM,,,,,,,v1.4.8,v2.0.0,,fabric-ca-server,,,0,ipm,,,,,"Since the initial release of Fabric CA, the list of reserved attributes (hf.*) has grown. A certain subset of users upon migration from an older version of CA to a newer one should be given any newly introduced attributes that have been added in the new release.

*Reasons this is needed:*

1. Allow the bootstrap user to continue to have full access to all the functionality available on the CA.

2. During registration of new identities the registrar can only give a new identity attributes that it currently posses. If after migration to a new CA, no identities posses the newly added attributes it becomes impossible to register new identities with these new attributes.

*Proposal*

In 1.1, migration logic was added to handle the `hf.Registrar.Attributes` attribute. See: [https://gerrit.hyperledger.org/r/c/14935/15/lib/ca.go#1170]

The logic needs to be extended to handle `hf.AffiliationMgr` and `hf.GenCRL`. This should be fixed in master and also backported in to previous releases. 

 ",,caod,denyeart,ptippett,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzo6",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,denyeart,ptippett,skarim,,,,,,,,,,,,,,,,,,release-1.4,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Mar/19 4:22 AM;skarim;[~adc] Can you please take a look this? [~ptippett] has been running into this issue with a customer, who can't get an identity to have the 'hf.AffiliationMgr'  attribute.;;;","25/Mar/19 8:53 PM;ptippett;[~adc] Thanks for looking at this.  If this can be done relatively quickly, can you prioritize it high?  We have one customer hitting this now and I'd rather roll this fix out in our next push vs having to manually add attributes to mysql individually.  Thanks!;;;","11/Nov/19 10:42 PM;denyeart;[~angelo.decaro] Could you take a look and propose a fix and target release?

I'll remove v1.4.4 FixVersion since the change won't make it into the release this week.;;;","21/May/20 12:23 AM;caod;[https://github.com/hyperledger/fabric-ca/pull/159];;;","21/May/20 12:25 AM;caod;tagged with v1.4.7 for now until v1.4.8 tag is created;;;",,,,,,,,,,,,,,,
Ability to add affiliations dynamically after startup,FABC-830,16662,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,debrajo,debrajo,12/May/17 4:11 AM,26/Mar/19 7:48 PM,28/Oct/23 2:21 AM,26/Mar/19 7:48 PM,,,,,,,v1.2.0,,,,,,0,,,,,,"Currently, affiliations hierarchy are defined  in the server's config file, and once instantiated, become static with no ability to change them. I would like the ability to dynamically add affiliations to the existing run-time instance so that my affiliations can organically grow as needed. ",,debrajo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx2fj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,debrajo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"--csr.hosts documentation is incorrect - it requires comma separated hosts, and spaces cause problems",FABC-831,38766,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,nyet,nyet,27/Mar/19 12:36 AM,28/Mar/19 4:49 AM,28/Oct/23 2:21 AM,28/Mar/19 4:49 AM,v1.4.0,v2.0.0,,,,,v1.4.1,v2.0.0,,fabric-ca-client,,,0,Documentation,,,,,"Currently, the documentation states:
 {{--csr.hosts stringSlice A list of space-separated host names in a certificate signing request}}

However, the host names should be comma separated.

Also, if both commas and spaces are used, the resulting CSR will be corrupted, since the spaces are taken as part of the hostname, and things like IP addresses will not be detected properly.

For example
 {{--csr.hosts ""host1 host2 10.0.0.1""}} will result in the incorrect {{""DNS:host1 host2 10.0.0.1""}}
 {{--csr.hosts ""host1, host2, 10.0.0.1""}} will result in the incorrect {{""DNS:host1, DNS:{color:#ff0000}_host2{color}, DNS:{color:#ff0000}_10.0.0.1{color}""}}
 but
 {{--csr.hosts ""host1,host2,10.0.0.1""}} will result in the correct {{""DNS:host1, DNS:host2, IP Address:10.0.0.1""}}

Note the extra space preceding {{host2}} and that {{10.0.0.1}} is not recognized as an IP Address, but rather as a DNS host with a leading space.",,mastersingh24,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-197,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hun:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,nyet,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/19 8:08 PM;mastersingh24;[https://gerrit.hyperledger.org/r/30457]  (master)

[https://gerrit.hyperledger.org/r/30458] (1.4);;;","27/Mar/19 8:12 PM;mastersingh24;help / doc was updated to reflect comma-separated rather than space-separated.

also added logic to trim spaces as well;;;",,,,,,,,,,,,,,,,,,
Certificates enrolled within 5 minutes of the CA-server root cert notBefore are considered invalid,FABC-832,38813,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,nyet,nyet,28/Mar/19 6:09 AM,07/Mar/21 2:00 AM,28/Oct/23 2:21 AM,14/Dec/20 11:56 PM,,,,,,,v1.5.0,,,,,,1,,,,,,"When using a cert which was enrolled within 5 minutes of the CA-server's root cert's {{notBefore}}:
{code:java}
2019-03-27 20:36:24.946 UTC [main] InitCmd -> ERRO 02e Cannot run peer because error when setting up MSP of type bccsp from directory /var/hyperledger/msp: the supplied identity is not valid: x509: certificate has expired or is not yet valid{code}
On the peer:
{code:java}
$ for i in `sudo find msp -name \*.pem`; do ls -al $i;  sudo  openssl x509 -noout -dates -in $i; done
-rw-r--r-- 1 enode enode 981 Mar 27 19:35 msp/signcerts/cert.pem
notBefore=Mar 27 19:30:00 2019 GMT
notAfter=Mar 26 19:35:00 2020 GMT
-rw-r--r-- 1 enode enode 977 Mar 27 19:35 msp/cacerts/ca-server.pem
notBefore=Mar 27 19:34:14 2019 GMT
notAfter=Mar 24 19:34:14 2029 GMT
{code}
Note that the ca cert isn't valid until {{19:34}}, but the other certs were created at {{19:30}}.
 Openssl thinks things are fine:
{code:java}
$ openssl verify -CAfile msp/cacerts/ca-server.pem msp/signcerts/cert.pem
msp/signcerts/cert.pem: OK
{code}
Also note that the {{admincerts/cert.pem}}'s {{notBefore}} of {{19:30}} is backdated from the actual file creation time of {{19:35}}

On the server itself, it is not backdated (since it is generated by {{openssl}}, and not {{ca-server}})
{code:java}
$ ls -al ca-cert.pem
-rw-rw-r-- 1 enode enode 977 Mar 27 19:34 ca-cert.pem
$ openssl x509 -noout -dates -in ca-cert.pem
notBefore=Mar 27 19:34:14 2019 GMT
notAfter=Mar 24 19:34:14 2029 GMT
{code}
One possible solution is to backdate on ca-cert creation using {{faketime}}? haven't tried it yet.

Is this cert chain actually invalid? Is there anything that says the signing cert's {{notBefore}} can't be later than the signed {{notBefore}}?

As far as I know, there is no ""create"" date built into certificates, so it doesn't seem reasonable to assume anything about relative {{notBefore}} dates between signer and signed certs.",,caveman7,darekzbik,jyellick,mastersingh24,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i4f:",,,,Unset,Unset,,,,,,,,,,,,Enroll a peer or orderer within 5 minutes of the CA-server's root cert notBefore,,Unset,,,,,,Unset,,Unset,,(Please add usage information),caveman7,darekzbik,jyellick,mastersingh24,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Mar/19 6:11 AM;nyet;[https://chat.hyperledger.org/channel/fabric-ca?msg=PZNf6vkyDXtRCvHHY]

According to SDChoi

{color:#444444}When I add following line in {color}{color:#444444}{color}{color:#444444}{{fabric-ca/lib/serverenroll.go:117}}{color}{color:#444444}{color}{color:#444444} , it doesn't have 5-min limitation :{color}
{color:#444444}{color}{color:#444444}{{req.NotBefore = time.Now().UTC()}}{color}

I have not tried this fix yet.;;;","28/Mar/19 6:16 AM;nyet;Also may affect enrolled TLS certificates, have not tried yet.;;;","28/Mar/19 2:07 PM;nyet;""{{faketime -f ""-6m"" openssl ...}}"" works;;;","29/Mar/19 6:20 PM;mastersingh24;It is typically a best practice to configure some type of backdating in order to deal with clock skew between the host running the fabric-ca-server and the hosts used by client to enroll.  The default skew is 5 minutes and if fabric-ca-server generates its own root cert, it will backdate NotBefore 5 minutes from the current time.  Then when it signs/issues certificates, it will also backdate them 5 minutes as well.

You can, however, control the backdate duration for each signing profile by adding *backdate* to the signing profiles in the server config file:
{code:java}
signing:
    default:
      usage:
        - digital signature
      expiry: 8760h
      backdate: 1s
    profiles:
      ca:
         backdate: 1s
         usage:
           - cert sign
           - crl sign
         expiry: 43800h
         caconstraint:
           isca: true
           maxpathlen: 0
      tls:
         backdate: 1s
         usage:
            - signing
            - key encipherment
            - server auth
            - client auth
            - key agreement
         expiry: 8760h
{code}

With the above config, fabric-ca-server will only backdate certs it signs/issues 1 second.

So I don't think this is a functionality bug, but we rather a deficiency in the documentation.
 

 ;;;","30/Mar/19 12:20 AM;nyet;Thanks, I will try this. However, I still am not sure why openssl doesn't notice the signed cert's notBefore is earlier than the signer's notBefore.

Is that really not legal? I would expect the signed cert should be valid as long as it used after the largest notBefore.;;;","30/Mar/19 1:32 AM;nyet;In the meantime, however, I will just use {{faketime}} to backdate the initial self-signed {{ca}}'s (to emulate {{ca-server}}'s behavior), since I see why backdating is good practice in general.

I also agree this is not a {{ca-server}} bug, but I think the peer's (and possibly the orderer? Not sure I saw it on the orderer) cert verification might be a bit too strict.

Should I open a peer/orderer bug?

Or is this expected behavior?;;;","30/Mar/19 6:05 PM;mastersingh24;For the peer/orderer it's definitely expected behavior .... I believe it's actually how the Go X509 implementation works.
There always seem to be subtle differences in the way various implementations ""interpret"" and or choose to enforce various parts of specifications.;;;","02/May/19 2:32 PM;caveman7;[~mastersingh24] i tried to use *FABRIC_CA_SERVER_SIGNING_DEFAULT_BACKDATE* environment variable but it does not work. at the end, I appended the backdate parameter in the config file;;;","25/Sep/19 12:33 AM;jyellick;Is this still an issue?;;;","25/Sep/19 12:59 AM;nyet;Yes, it is an issue since the only way for me to work around it is using faketime. However, it is ""expected behavior"" so I am unsure if there is any path towards changing things.;;;","27/Nov/20 7:40 PM;darekzbik;Proposed solution as PR is here https://github.com/hyperledger/fabric-ca/pull/203;;;",,,,,,,,,
fix fabric-ca pipeline scripts,FABC-833,38828,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,28/Mar/19 11:48 PM,08/Apr/19 10:23 PM,28/Oct/23 2:21 AM,08/Apr/19 10:23 PM,v1.4.1,v2.0.0,,,,,,,,,,,0,,,,,,Fix fabric-ca pipeline scripts,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i7b:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Apr/19 12:06 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/q/status:open+project:fabric-ca+topic:fix-ca-pipeline;;;",,,,,,,,,,,,,,,,,,,
Handle removal of common/attrmgr from fabric,FABC-836,39177,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,sykesm,sykesm,10/Apr/19 12:47 AM,10/Apr/19 4:14 AM,28/Oct/23 2:21 AM,10/Apr/19 4:14 AM,,,,,,,,,,,,,0,,,,,,"The common/attrmgr package was unused by fabric and was removed. That code is still referenced by CA (and likely should have been part of CA).

FAB-15073 (https://gerrit.hyperledger.org/r/c/30758/) removed the code...",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00k7b:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Apr/19 2:15 AM;sykesm;https://gerrit.hyperledger.org/r/30836;;;",,,,,,,,,,,,,,,,,,,
Metrics provider(s) and --cafiles is incompatible,FABC-837,39266,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,nyet,nyet,12/Apr/19 8:32 AM,15/Jun/19 6:34 PM,28/Oct/23 2:21 AM,11/Jun/19 11:14 PM,v1.4.1,,,,,,v1.4.2,v2.0.0,,fabric-ca-server,,,1,metrics,prometheus,,,,"When setting both {{FABRIC_CA_SERVER_METRICS_PROVIDER=prometheus}} via env and specifying {{--cafiles}} on the command line, the server panics with
{code}
panic: duplicate metrics collector registration attempted
goroutine 1 [running]:
github.com/hyperledger/fabric-ca/vendor/github.com/prometheus/client_golang/prometheus.(*Registry).MustRegister(0xc0000bc7d0, 0xc00054faa0, 0x1, 0x1)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/prometheus/client_golang/prometheus/registry.go:391 +0xad
github.com/hyperledger/fabric-ca/vendor/github.com/prometheus/client_golang/prometheus.MustRegister(0xc00054faa0, 0x1, 0x1)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/prometheus/client_golang/prometheus/registry.go:176 +0x53
github.com/hyperledger/fabric-ca/vendor/github.com/go-kit/kit/metrics/prometheus.NewCounterFrom(0xde0693, 0xe, 0x0, 0x0, 0xdd9146, 0x5, 0xdfd4f6, 0x29, 0x0, 0x16454c0, ...)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/go-kit/kit/metrics/prometheus/prometheus.go:24 +0xe3
github.com/hyperledger/fabric-ca/vendor/github.com/hyperledger/fabric/common/metrics/prometheus.(*Provider).NewCounter(0x16bbbe0, 0xde0693, 0xe, 0x0, 0x0, 0xdd9146, 0x5, 0xdfd4f6, 0x29, 0x16454c0, ...)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/hyperledger/fabric/common/metrics/prometheus/provider.go:20 +0x138
github.com/hyperledger/fabric-ca/lib/server/db.New(0xee2b80, 0xc00012faa0, 0xc0000380a9, 0xc, 0x7f3a19c72630, 0xc000032180, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/server/db/db.go:94 +0x74
github.com/hyperledger/fabric-ca/lib/server/db/sqlite.(*Sqlite).Connect(0xc0000bcdc0, 0x7, 0xc00050fdd0)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/server/db/sqlite/sqlite.go:59 +0x14a
github.com/hyperledger/fabric-ca/lib.(*CA).initDB(0xc00034e078, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/ca.go:603 +0x47c
github.com/hyperledger/fabric-ca/lib.(*CA).init(0xc00034e078, 0x0, 0x14, 0x7a5f466)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/ca.go:173 +0x1be
github.com/hyperledger/fabric-ca/lib.initCA(0xc00034e078, 0xc00003a240, 0x1b, 0xc0000180a8, 0xc00034e000, 0x0, 0xda3280, 0x4)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/ca.go:136 +0x8e
github.com/hyperledger/fabric-ca/lib.(*Server).initDefaultCA(0xc00034e000, 0x0, 0x0, 0x1)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/server.go:366 +0xd3
github.com/hyperledger/fabric-ca/lib.(*Server).init(0xc00034e000, 0x0, 0xc000259c20, 0x1)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/server.go:132 +0x2e3
github.com/hyperledger/fabric-ca/lib.(*Server).Start(0xc00034e000, 0xc00034e000, 0x4)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/server.go:166 +0xdd
main.(*ServerCmd).init.func3(0xc0000cafc0, 0xc000216280, 0x0, 0x5, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-server/servercmd.go:121 +0xe8
github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra.(*Command).execute(0xc0000cafc0, 0xc000216230, 0x5, 0x5, 0xc0000cafc0, 0xc000216230)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra/command.go:643 +0x3e8
github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0xc0000ca6c0, 0xcba240, 0xecd830, 0xc0003ebf08)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra/command.go:734 +0x2cc
github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra.(*Command).Execute(0xc0000ca6c0, 0xc000142000, 0xc0002160f0)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra/command.go:692 +0x2b
main.(*ServerCmd).Execute(0xc0002160f0, 0x5, 0xda3201)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-server/servercmd.go:69 +0x2f
main.RunMain(0xc0000ba000, 0x7, 0x7, 0xc0003ebf88, 0xc000094058)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-server/main.go:45 +0xaf
main.main()
        /opt/gopath/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-server/main.go:27 +0x45
{code}

Attempting to enable metrics in only one config file with
{code}
metrics:
   provider: prometheus
{code}
in one file and 
{code}
metrics:
   provider: disabled
{code}
in the other(s) does not help (which is expected, since the environment variable should override both)",,jamesruan,mastersingh24,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kr3:",,,,Unset,Unset,,,,,,,,,,,,Specify {{FABRIC_CA_SERVER_METRICS_PROVIDER=prometheus}} via env and start multiple instances of ca-server with {{--cafiles}} on the command line,,Unset,,,,,,Unset,,Unset,,(Please add usage information),jamesruan,mastersingh24,nyet,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/May/19 2:57 PM;jamesruan;Same error encountered.
I'm using env FABRIC_CA_SERVER_METRICS_PROVIDER=prometheus and mysql datasource specified with fabric-ca-server start -b registrar:registrarpw;;;","30/May/19 5:51 AM;nyet;Seems to affect statsd as well
{code:java}
2019/05/29 20:40:16 [DEBUG] 3 CA instance(s) running on server
panic: non-positive interval for NewTicker
goroutine 1 [running]:
time.NewTicker(0x0, 0x0)
        /opt/go/src/time/tick.go:23 +0x18f
github.com/hyperledger/fabric-ca/lib/server/operations.(*System).startMetricsTickers(0xc0002800c0, 0x0, 0xc000248030)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/server/operations/system.go:161 +0xbe
github.com/hyperledger/fabric-ca/lib/server/operations.(*System).Start(0xc0002800c0, 0x1, 0x1)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/server/operations/system.go:77 +0x2f
github.com/hyperledger/fabric-ca/lib.(*Server).startOperationsServer(0xc0002f2000, 0x23, 0xc0006a7c00)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/server.go:147 +0x34
github.com/hyperledger/fabric-ca/lib.(*Server).Start(0xc0002f2000, 0xc0002f2000, 0x4)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/lib/server.go:181 +0x234
main.(*ServerCmd).init.func3(0xc00027e480, 0xc00014d1f0, 0x0, 0x7, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-server/servercmd.go:121 +0xe8
github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra.(*Command).execute(0xc00027e480, 0xc00014d110, 0x7, 0x7, 0xc00027e480, 0xc00014d110)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra/command.go:643 +0x3e8
github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0xc00027e000, 0xcba240, 0xecd830, 0xc00024ff08)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra/command.go:734 +0x2cc
github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra.(*Command).Execute(0xc00027e000, 0xc00012e000, 0xc00028a0f0)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/vendor/github.com/spf13/cobra/command.go:692 +0x2b
main.(*ServerCmd).Execute(0xc00028a0f0, 0x5, 0xda3201)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-server/servercmd.go:69 +0x2f
main.RunMain(0xc000030090, 0x9, 0x9, 0xc00024ff88, 0xc000094058)
        /opt/gopath/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-server/main.go:45 +0xaf
main.main()
        /opt/gopath/src/github.com/hyperledger/fabric-ca/cmd/fabric-ca-server/main.go:27 +0x45
{code};;;","05/Jun/19 4:08 AM;mastersingh24;looks like we need to create the metrics object in main and not for each CA instance;;;","10/Jun/19 5:31 AM;mastersingh24;https://gerrit.hyperledger.org/r/c/fabric-ca/+/31790;;;",,,,,,,,,,,,,,,,
Wrong field in swagger for enroll,FABC-838,39267,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,vieiramanoel,vieiramanoel,vieiramanoel,12/Apr/19 10:29 AM,26/Apr/19 3:30 AM,28/Oct/23 2:21 AM,26/Apr/19 3:30 AM,,,,,,,,,,fabric-ca-server,,,0,Documentation,,,,,"In `swagger.json` certificate request is ""request"" field when it should be ""certificate_request""",,vieiramanoel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00krb:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),vieiramanoel,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/19 10:36 AM;vieiramanoel;Fix in commit https://gerrit.hyperledger.org/r/#/c/30915/;;;",,,,,,,,,,,,,,,,,,,
Modify multiarch script in fabric-ca to publish images to Nexus,FABC-839,39209,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,sambhavdutt,sambhavdutt,sambhavdutt,11/Apr/19 3:42 AM,24/Apr/19 3:24 AM,28/Oct/23 2:21 AM,24/Apr/19 3:24 AM,v1.4.1,,,,,,v1.4.2,,,,,,0,build-system,,,,,Update the fabric-ca multiarch script to publish the images to Nexus.,,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kcv:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Apr/19 11:55 AM;sambhavdutt;https://gerrit.hyperledger.org/r/#/c/30874/;;;",,,,,,,,,,,,,,,,,,,
"As a developer, I need an embeddable client library I can use in my custom tools or applications",FABC-840,39576,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,mastersingh24,mastersingh24,01/May/19 8:03 PM,25/Sep/19 2:29 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"While there is currently a fabric-ca-client binary, the client code is not structured to be a library package.  This makes it very difficult to build tools or applications which need to communicate with Fabric CA.

Looked at the fabric-sdk-go as well but it basically copies a bunch of the fabric-ca code under internal packages.  It would actually be a good candidate for consuming this client library.",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-870,FABC-739,,,FABC-1,FAB-16461,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,,,,No,,Unset,No,,,"1|i00mdz:",,,,Yes,Unset,,,,,,,,,,,,(Please add steps to reproduce),3.0,No,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix Fabric CA Server so that it can establish TLS connection with Open LDAP server on port 389 using starttls,FABC-841,39620,,Bug,Unverified,FABC,Fabric CA,software,denyeart,,,Medium,,,siddjain,siddjain,04/May/19 8:33 AM,06/May/20 11:20 PM,28/Oct/23 2:21 AM,,,,,,,,,,,fabric-ca-server,,,0,ipm,,,,,"The recommended way to establish TLS connection with an OpenLDAP server is to use StartTLS on port 389 as described here:

[https://www.digitalocean.com/community/tutorials/how-to-encrypt-openldap-connections-using-starttls]

But Fabric-CA-server does not support this",,siddjain,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zs1r0i",,,,Unset,Unset,,,,,,,,,,,,"First, set up an OpenLDAP server

Then, create instance of fabric-ca-server supplying necessary TLS certificates and keys. Example below:

```
+ docker container create --name uber-rca-server --network bridge --env FABRIC_CA_SERVER_HOME=/etc/hyperledger/fabric-ca-server --env FABRIC_CA_SERVER_DEBUG=true --workdir /etc/hyperledger/fabric-ca-server --log-opt max-file=3 --log-opt max-size=10m hyperledger/fabric-ca:1.3.0 fabric-ca-server start --ca.certfile uber-rca.pem --ca.keyfile uber-rca.key --ca.name uber-rca --tls.certfile uber-rca-server.pem --tls.keyfile uber-rca-server.key --tls.enabled --tls.clientauth.type requireandverifyclientcert --tls.clientauth.certfiles uber-ca-chain.pem --ldap.enabled --ldap.url ldap://dn=admin,dc=uber,dc=com:xxx@uber-ldap-server:389/dc=uber,dc=com --ldap.tls.certfiles uber-ca-chain.pem --ldap.tls.client.certfile uber-rca-client.pem --ldap.tls.client.keyfile uber-rca-client.key
```




Now try to enroll a user. 

Observe error below:

```
2019/05/03 19:06:23 [DEBUG] Binding to the LDAP server as admin user cn=admin,dc=uber,dc=com

2019/05/03 19:06:23 [INFO] 10.0.1.8:37264 POST /enroll 401 23 ""Failed to get user: LDAP bind failure as cn=admin,dc=uber,dc=com: LDAP Result Code 13 ""Confidentiality Required"": confidentiality required""
```

Expected:
No error. fabric-ca-server should use starttls when it detects that `--ldap.tls.client.certfile` and key have been given",,Unset,,,,,,Unset,,Unset,,(Please add usage information),siddjain,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric CA doc incorrect description of getting root certs,FABC-842,39807,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,angelo.decaro,denyeart,denyeart,14/May/19 10:33 PM,20/May/19 3:25 PM,28/Oct/23 2:21 AM,20/May/19 3:25 PM,,,,,,,v1.4.2,v2.0.0,,fabric-docs,,,0,,,,,,"This Fabric CA doc topic looks incorrect:

[https://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#getting-a-ca-certificate-chain-from-another-fabric-ca-server]

 

Peer should have one root cert in its MSP *cacerts* directory from its own org.

I don't understand what this section of documentation is trying achieve by suggesting you get other certs from other org's Fabric CAs. Maybe it was a bad attempt at describing the content that goes into peer's *intermediatecerts* directory?  Regardless, I think this entire section should be cleaned up, and potentially completely removed in favor of the operations guide proposed at FABC-814 https://gerrit.hyperledger.org/r/#/c/29430/",,angelo.decaro,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00npb:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,denyeart,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/May/19 5:28 PM;angelo.decaro;[~denyeart], let me start with a clarification, *cacerts* can actually contain multiple root certificates (only root certificates should be there). The code allow this for flexibility reasons.

Anyway, that paragraph also looks to me not relevant. I guess removing it is enough to address this FAB. Would this be okay?**;;;","18/May/19 2:07 AM;denyeart;[~angelo.decaro] I'm happy if you remove that section. Just wanted your opinion on whether there was anything worth salvaging there...

About the multiple cacerts... would that be multiple cacerts from the peer's org? Due to multiple CAs associated with the org?

There remains much confusion in the msp setup. I'm hoping you can also help review/complete FABC-814 https://gerrit.hyperledger.org/r/#/c/29430/ , to address some of the confusion.;;;","18/May/19 1:44 PM;angelo.decaro;[~denyeart], there is no need to stress this detail about multiple root certificates. It is just a possibility in the case one wants to create to aggregate multiple organisations under a single MSP. I will submit a change-set then and look at FABC-814.;;;","18/May/19 1:53 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/31430/;;;","18/May/19 11:25 PM;denyeart;Merged in master and cherry-picked to release-1.4: https://gerrit.hyperledger.org/r/#/c/31437/;;;",,,,,,,,,,,,,,,
Update Doc to remove references to s390x jobs,FABC-843,39810,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,14/May/19 11:27 PM,14/May/19 11:36 PM,28/Oct/23 2:21 AM,14/May/19 11:30 PM,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00npz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Go Vet,FABC-844,39880,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,btl5037,btl5037,17/May/19 9:09 AM,08/Nov/19 6:33 AM,28/Oct/23 2:21 AM,06/Jun/19 7:43 AM,,,,,,,v2.0.0,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00o2v:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Update to Golang 1.12,FABC-845,39881,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,17/May/19 9:11 AM,17/May/19 10:40 PM,28/Oct/23 2:21 AM,17/May/19 10:40 PM,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00o33:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CA admin user id password recovery / reset ,FABC-846,40009,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,High,,skarim,nileshdeotale,nileshdeotale,21/May/19 11:53 PM,08/Oct/19 11:17 AM,28/Oct/23 2:21 AM,,,,,,,,,,,fabric-ca-client,fabric-ca-server,,0,,,,,,"Is there any way to recover/reset CA admin user id password ?
If not, is this not a security risk in that if password is compromised how can one reset it asap?
",,nileshdeotale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00olo:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),nileshdeotale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add error log, when there is a connection error to database",FABC-847,40161,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,irmman,irmman,26/May/19 1:46 AM,26/May/19 1:50 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"I am going to connect Fabric-ca to Postgres with tls but I get an error. since message of lower error is not logged, I can not find a root cause of the error.

 

in postgres.go

 
{code:java}
    if err != nil {
        return errors.Errorf(""Failed to connect to Postgres database. Postgres requires connecting to a specific database, the following databases were tried: %s. Please create one of these database before continuing"", dbNames)
    }
{code}
 

it would be 

 
{code:java}
    if err != nil {
        return errors.Errorf(""Failed to connect to Postgres database. Postgres requires connecting to a specific database, the following databases were tried: %s. Please create one of these database before continuing. %s"", dbNames, err.Error())
    }
{code}",,irmman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pbw:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),irmman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
create table for Postgres with tls,FABC-848,40188,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,mastersingh24,irmman,irmman,29/May/19 3:20 AM,17/Jul/19 4:00 AM,28/Oct/23 2:21 AM,17/Jul/19 4:00 AM,,,,,,,v1.4.2,v2.0.0,,fabric-ca-server,,,0,,,,,,"I am going to use Postgres as database with active tls. When CA starts, it creates database, but when it tries to create table, it throws an invalid tls certification error, while with the same certificate, it creates database.

this is my logs
{code:java}
2019/05/28 12:23:33 [DEBUG] Loading CN from existing enrollment information
2019/05/28 12:23:33 [DEBUG] Initializing DB
2019/05/28 12:23:33 [DEBUG] Initializing 'postgres' database at 'host=postgres port=5432 user=**** password=**** dbname=fabric_ca sslmode=verify-ca'
2019/05/28 12:23:33 [DEBUG] Using postgres database, connecting to database...
2019/05/28 12:23:33 [DEBUG] Database Name: fabric_ca
2019/05/28 12:23:33 [DEBUG] Connecting to PostgreSQL server, using connection string: host=postgres port=5432 user=**** password=**** dbname=fabric_ca sslmode=verify-ca sslrootcert=/etc/hyperledger/fabric-ca-server/root-postgresql.crt sslcert=/etc/hyperledger/fabric-ca-server/postgresql.crt sslkey=/etc/hyperledger/fabric-ca-server/postgresql.key
2019/05/28 12:23:33 [DEBUG] Creating Postgres Database (fabric_ca) if it does not exist...
2019/05/28 12:23:33 [DEBUG] Connecting to database 'fabric_ca', using connection string: 'host=postgres port=5432 user=**** password=**** dbname=fabric_ca sslmode=verify-ca'
2019/05/28 12:23:33 [DEBUG] Creating users table if it does not exist
2019/05/28 12:23:33 [ERROR] Error occurred initializing database: Failed to create Postgres tables: Error creating users table: x509: certificate signed by unknown authority
2019/05/28 12:23:33 [DEBUG] Initializing enrollment signer
2019/05/28 12:23:33 [DEBUG] validating configuration
{code}
I have noticed that in  postgres.go, the connection string for creating a database has tls parameters, but a connection string for creating table does not have tls parameters.

 ",,angelo.decaro,irmman,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pho:",,,,Unset,Unset,,,,,,,,,,,,connect CA to posters with tls ,,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,irmman,mastersingh24,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Jun/19 9:15 PM;angelo.decaro;[~irmman], could you give me a bit more context about your setup, please? :);;;","05/Jun/19 2:58 AM;irmman;[~angelo.decaro]

here is my configuration for the setup https://drive.google.com/file/d/1eFf13Y4W4kx3IS56NOveRFmrQYPzgh5B/view?usp=sharing;;;","11/Jun/19 4:53 PM;angelo.decaro;[~irmman], if the file *ca/postgres/postgresql.conf* represents the configuration you are using for your Postgres server, there is something wrong there. The ssl section does not point to the proper certificate files.
{code:java}
ssl = on
#ssl_ca_file = ''
#ssl_cert_file = 'server.crt'
#ssl_crl_file = ''
#ssl_key_file = 'server.key'
#ssl_ciphers = 'HIGH:MEDIUM:+3DES:!aNULL' # allowed SSL ciphers
#ssl_prefer_server_ciphers = on
#ssl_ecdh_curve = 'prime256v1'
#ssl_dh_params_file = ''
#ssl_passphrase_command = ''
#ssl_passphrase_command_supports_reload = off
{code}

Am I missing something?;;;","14/Jun/19 4:26 AM;irmman;[~angelo.decaro] there is default value for the certificate files in *postgresql.conf*, and my certificate files are coresponding  to the default names.

 

the bug is obvious in the code, so I explain it in detail:

 
h3. the bug in mummary:

 
 # There is a postgres with tsl enabled
 # A fabric ca instance is going to be initiated with a tls connection to the postgres
 # the CA instance creates a database
 # when CA creates tables, it gives this error: 
 Error occurred initializing database: Failed to create Postgres tables: Error creating users table: x509: certificate signed by unknown authority

 
h3. first observation from log:

A connection string with tls parameters:
 2019/05/28 12:23:33 [DEBUG] Connecting to PostgreSQL server, using connection string: host=postgres port=5432 user=**** password=**** dbname=fabric_ca sslmode=verify-ca sslrootcert=/etc/hyperledger/fabric-ca-server/root-postgresql.crt sslcert=/etc/hyperledger/fabric-ca-server/postgresql.crt sslkey=/etc/hyperledger/fabric-ca-server/postgresql.key
 A connection string without tls parameters:
 2019/05/28 12:23:33 [DEBUG] Connecting to database 'fabric_ca', using connection string: 'host=postgres port=5432 user=**** password=**** dbname=fabric_ca sslmode=verify-ca'
h3. first inference from log:

there are two connections for connecting to the postgres that is tsl enable. One connection with tls and one connection without tls, so this is a bug.
h3.  

Check the inference in the code:

all related codes are in *postgres.go* and tag *v1.4.1*
h4. creating database steps:

1. create connection string with tls parameters
 in _Connect_ method, lines 60 to 70

2. connect to postgres and create database :
 createDatabase method and line 151
h4.  

creating tables steps:

1. create tables:
 method _CreateTables_ that is called in line 111
{code:java}
err = p.CreateTables(){code}
h3. where is bug?

 

in method _CreateDatabase_

after creation of database in line 122, sqlxdb is initiated with a new connection string without tls parameters, see line 128.
{code:java}
sqlxdb, err := sqlx.Open(""postgres"", datasource){code}
this newly initiated sqlxdb without tls parameters, is used in _createTables_ method for creating tables and naturally it throws an error because there is not tls parameters in the connection string.

Bug is in line 128.

why is *SqlxDB*  initiated wrongly again, while it is already initiated correctly in _Connect_ method?

Fix: removing lines 127 to 132, or reuse line 60 to 70 for appending tls parameters to sqlxdb that is used fo creating new *SqlxDB*.

 

 

 

 

 ;;;","16/Jun/19 8:04 PM;irmman;briefly the bug is in postgres.go tag v.1.4.1

line 128 

 
sqlxdb, err := sqlx.Open(""postgres"", datasource)
 
where there are not tls parameters in _*datasource*_ .e.g sslrootcert
 
 
 ;;;","06/Jul/19 3:21 AM;mastersingh24;master:   https://gerrit.hyperledger.org/r/32203
release-1.4:  https://gerrit.hyperledger.org/r/32198;;;",,,,,,,,,,,,,,
"As a Fabric deployer or administrator, I would like Fabric-CA to issue certificates with admin OU",FABC-849,40266,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,denyeart,denyeart,02/Jun/19 10:33 PM,29/Aug/19 9:19 PM,28/Oct/23 2:21 AM,29/Aug/19 9:19 PM,,,,,,,,,,,,,0,,,,,,"As of FAB-15388, Fabric will support ""admin"" OU.

This story will add support in Fabric-CA to issue certificates of type ""admin"" OU.

Also note the comment from FABC-525:
{code:java}
No matter which field is used to identify an admin identity, there must be appropriate governance around the issuance of certs with that field.
For example, if the flag to identify admin was OU=admin, the CA must issue certs with OU=admin to only the appropriate identities who are intended to be admins.
{code}",,angelo.decaro,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15388,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pw4:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Jul/19 1:51 AM;denyeart;[~angelo.decaro][~ales] Fabric CA supports identity 'types' of 'client' and 'peer' currently. Are changes needed in Fabric CA to support the upcoming 'admin' and 'orderer' types? Or is the list dynamic?;;;","29/Aug/19 3:48 PM;angelo.decaro;I think nothing is needed cause Fabric-CA can handle any role. It is just a matter of configuration.;;;","29/Aug/19 9:19 PM;denyeart;Ok, nothing to be done.;;;",,,,,,,,,,,,,,,,,
Fix Fabric CA doc wrt OU types,FABC-850,40267,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,angelo.decaro,denyeart,denyeart,02/Jun/19 10:39 PM,06/Jun/19 6:30 AM,28/Oct/23 2:21 AM,06/Jun/19 6:30 AM,,,,,,,v1.4.2,v2.0.0,,,,,0,,,,,," If you search Fabric CA doc for ""type"", you'll see in various places it talks about certificate (OU) types of peer, app, user, and even orderer.

In reality the supported types are ""peer"" and ""client"".  And in FABC-849 ""admin"" will be added.

Need to clean up the documentation with the correct types.",,angelo.decaro,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pwc:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,denyeart,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Jun/19 10:39 PM;denyeart;[~angelo.decaro] Could you help correct this throughout the doc?;;;","03/Jun/19 4:13 PM;angelo.decaro;https://gerrit.hyperledger.org/r/c/fabric-ca/+/31669;;;","03/Jun/19 4:15 PM;angelo.decaro;[~denyeart], I removed all the reference to ""orderer"" as an identity type in the documentation. Let me note anyway that Fabric-CA is designed to be agnostic to the meaning of the types. As long as there is a registrar that can handle type X then one can request an identity of type X. That does not mean that Fabric will be able to handle identity of type X, of course. ;;;","06/Jun/19 6:10 AM;denyeart;Merged in master and cherry picked to release-1.4: https://gerrit.hyperledger.org/r/#/c/fabric-ca/+/31734/;;;",,,,,,,,,,,,,,,,
Update bccsp and pkcs11 to latest revs,FABC-852,40494,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,10/Jun/19 9:52 PM,12/Jun/19 8:05 PM,28/Oct/23 2:21 AM,11/Jun/19 7:04 AM,,,,,,,v1.4.2,v2.0.0,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15670,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r0s:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Jun/19 2:55 AM;mastersingh24;release-1.4:   https://gerrit.hyperledger.org/r/31810
master:  https://gerrit.hyperledger.org/r/31811;;;",,,,,,,,,,,,,,,,,,,
"As a user of the Fabric CA, I expect to see meaningful documentation about exported metrics",FABC-853,40503,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,dereckluo,sykesm,sykesm,11/Jun/19 5:13 AM,12/Jul/19 6:14 PM,28/Oct/23 2:21 AM,08/Jul/19 11:19 PM,,,,,,,v1.4.2,v2.0.0,,fabric-ca-server,,,0,ipm,,,,,"The existing documentation looks like this:

{code}
Metrics Reference

Prometheus Metrics

The following metrics are currently exported for consumption by Prometheus.

Name	Type	Description	Labels
api_request_duration	histogram	Time taken in seconds for the request to an API to be completed.	api_name ca_name status_code
api_request_count	counter	Number of request made to an API.	api_name ca_name status_code
StatsD Metrics

The following metrics are currently emitted for consumption by StatsD. The %{variable_name} nomenclature represents segments that vary based on context.

For example, %{ca_name} will be replaced with the name of the ca associated with the metric.

Bucket	Type	Description
api_request_duration.%{ca_name}.%{api_name}.%{status_code}	histogram	Time taken in seconds for the request to an API to be completed.
api_request_count.%{ca_name}.%{api_name}.%{status_code}	counter	Number of request made to an API.
© Copyright 2017, hyperledger. Revision 8b56ee89.
{code}

We can do better. Use the structure and tools from fabric to generate the documentation and populate the docs folder.
",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mtg:r",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Jun/19 12:01 AM;sykesm;In concrete terms, ensure the generated metrics reflect what's currently in the code.

For the ""api_name"" label, provide a list of possible values and their meanings. Ideally this becomes a metadata field or annotation on the struct.

Then, based on the extension, gendoc should be updated _or_ a solution specific to ca should be used to include the api names and descriptions into the documentation.

Acceptance: documentation can be generated by running a script. The generated doc should include api name values and descriptions in a human readable form.;;;",,,,,,,,,,,,,,,,,,,
Bump image to Alpine 3.10,FABC-854,40920,,Task,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,04/Jul/19 5:13 PM,13/Sep/19 11:32 PM,28/Oct/23 2:21 AM,13/Sep/19 11:32 PM,,,,,,,v2.0.0,,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15878,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ta4:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Doc Node OU Support for admins and orderers,FABC-855,40972,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,10/Jul/19 5:20 PM,27/Aug/19 5:43 AM,28/Oct/23 2:21 AM,27/Aug/19 5:43 AM,,,,,,,v1.4.3,v2.0.0,,,,,0,,,,,,"See FAB-15899

The fabric-ca doc needs to be updated to mention the fact that also admin and orderer identities can be registered and enrolled.",,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tl8:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jul/19 5:23 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/fabric-ca/+/32236/;;;",,,,,,,,,,,,,,,,,,,
Typo in serverregister_test.go,FABC-856,41247,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,nnao,nnao,nnao,17/Jul/19 5:02 PM,21/Aug/19 4:40 AM,28/Oct/23 2:21 AM,21/Aug/19 4:40 AM,v1.4.2,v2.0.0,,,,,v2.0.0,,,fabric-ca-server,,,0,Documentation,,,,,"An assert message in serverregister_test.go seemd to have a typo.I suppose it will be ""user"" instead of ""userr""",,nnao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00u64:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),nnao,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Jul/19 7:59 PM;nnao;[https://gerrit.hyperledger.org/r/c/fabric-ca/+/32370];;;",,,,,,,,,,,,,,,,,,,
There are few typos in serverregister.go,FABC-857,41346,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,nnao,nnao,nnao,22/Jul/19 3:30 PM,21/Aug/19 4:40 AM,28/Oct/23 2:21 AM,21/Aug/19 4:39 AM,v1.4.2,,,,,,v2.0.0,,,fabric-ca-client,,,0,Documentation,,,,,"A message in serverregister.go and fabric-ca-load-tester/README.md seemd to
have typos. I suppose it will be ""ration"" instead of ""raton""",,nnao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uos:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),nnao,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
PKCS11 won't work in docker container (HSM),FABC-858,41434,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid: Environment Issue,,vieiramanoel,vieiramanoel,26/Jul/19 3:22 AM,27/Jul/19 9:30 PM,28/Oct/23 2:21 AM,27/Jul/19 7:04 PM,,,,,,,,,,fabric-ca-server,,,1,,,,,,"Last days I've been working in integrate fabric-ca with a vendor HSM, and pkcs11 lib has been failed to initialize over and over, even that all variables were set and vendor's driver (pkcs11 lib) was available for fabric-ca to load.

Then I investigated until I found which go library was responsible for loading pkcs11.so lib into ca's code. 

The lib is miekg's [pkcs11lib|https://github.com/miekg/pkcs11].

Running it's sample code (present at miekg's repo Read.me) the string is successfully digest by hsm.

So I built fabric-ca image from repository adding necessary packages (git, gcc, libc-dev and golang) and tried to run pkcs11.go (miekg's sample) code inside it, the error I got: 

{code:java}
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x49b1a2]

goroutine 1 [running]:
github.com/miekg/pkcs11.(*Ctx).Initialize.func1(0x0, 0xc0000a2020)
        /go/pkg/mod/github.com/miekg/pkcs11@v1.0.2/pkcs11.go:805 +0x22
github.com/miekg/pkcs11.(*Ctx).Initialize(0x0, 0x12, 0x0)
        /go/pkg/mod/github.com/miekg/pkcs11@v1.0.2/pkcs11.go:805 +0x2b
main.main()
        /hsm-test/pcks11.go:19 +0x164
exit status 2
{code}

This process is well decribed in this [issue|https://github.com/miekg/pkcs11/issues/120].

When reported in miekg's repository (see issue above) his reply was:

""dont use alpine""

as if the problem was the linux distro itself. So this morning I tried to run miekg's code from an ubuntu image inside docker too (described in linked issue as well). Same error. So the library itself has some problem with running inside dockers or something like that. The problem is not with vendor's library once the code works at host machine perfectly. 

My question is, what could we do in fabric-ca in order to solve this problem? 

",,ashutosh_kumar,mastersingh24,nyet,vieiramanoel,vsudip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Jul/19 2:44 AM;vieiramanoel;test.c;https://jira.hyperledger.org/secure/attachment/17630/test.c",,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00v4b:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ashutosh_kumar,mastersingh24,nyet,vieiramanoel,vsudip,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Jul/19 5:41 PM;mastersingh24;Which version of fabric-ca are you using?  Looks like the image is Alpine-based so I assume you are building off the master branch?;;;","27/Jul/19 2:45 AM;vieiramanoel;Found the error last night. I copied miekg's C code and wrote a simple program debugging it. The problem was my vendor's lib was dependent of another lib missing in /usr/lib, I just could find this after creating this program:

 [^test.c] 

pls close;;;","27/Jul/19 7:04 PM;mastersingh24;see comment above;;;",,,,,,,,,,,,,,,,,
Attribute-Based Access Control uses incorrect OID,FABC-859,41456,,Bug,Unverified,FABC,Fabric CA,software,denyeart,,,Medium,,,jtonline,jtonline,27/Jul/19 12:44 AM,27/Apr/20 11:05 PM,28/Oct/23 2:21 AM,,,,,,,,,,,fabric-ca-server,,,0,,,,,,"It looks like Fabric Attribute-Based Access Control is using an OID of 1.2.3.4.5.6.7.8.1 which is under \{iso(1) member-body(2)} and not registered as far as I can tell.

I don't know if the Linux Foundation already has a registered OID somewhere which Fabric x509 certificate attributes could fit under, or whether there's some other suitable OID we could register ABAC under. For comparison Puppet allow extensions under 1.3.6.1.4.1.34380

The earliest occurrence of 1.2.3.4.5.6.7.8.1 I could find is [https://github.com/hyperledger/fabric/commit/b2941b5dd1cf8b6a089dc43130026cfb19a78f0b#diff-91bca7b9a8040e0c1f7aea0208c866a9R41] although it's not clear why the OID was chosen.

(As an aside, I've not found anything convincing one way or another but it seems like Subject Directory Attributes might be an alternative option to registering a new OID. That could be a read herring though so feel free to ignore!)",,denyeart,fabDev20,jtonline,jyellick,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00v8j:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,fabDev20,jtonline,jyellick,skarim,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Sep/19 5:39 AM;jyellick;[~skarim] can you comment on why the OID was chosen in your commit?;;;","27/Apr/20 10:34 PM;skarim;[~jyellick] I don't have a good answer, this was code that I only ported over to fabric from fabric-ca. The original package was written by Keith, and the OID came from that. I am not sure what was behind his reasoning for choosing that value.;;;","27/Apr/20 11:05 PM;smithbk;As you can probably tell from the sequence number, this was a randomly chosen OID.  IIRC, I looked around for an official one to register under but obviously is something that fell thru the cracks.;;;",,,,,,,,,,,,,,,,,
Certficate renewal process when it is expired,FABC-860,13296,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,,ryokawajp,ryokawajp,04/Nov/16 11:49 PM,31/Jul/19 12:51 PM,28/Oct/23 2:21 AM,31/Jul/19 12:51 PM,,,,,,,Unscheduled,,,fabric-ca-server,,,2,MembershipServices,,,,,"Related issue:
https://jira.hyperledger.org/browse/FAB-141

I think we need a certificate renewal function.

Recently, I experienced an expiration of tca.cert, which caused failures in generating TCert batches.
I manually installed tca.cert, tca.pub, tca.priv to membersrvc, and tca.cert to non-validating peers (clients), and validating peers.
There are many certificates, such as eca.cert, tca.cert, aca.cert, tlsca.cert, ecerts, etc.
Doing the above process for all the certificates manually is error-prone.
It could be helpful to automate this process.

In addition to this, it will be helpful if one can configure the default valid period of a certificate. Currently, the valid period is fixed to 90 days, as far as I know.
",,inatatsu,ryokawajp,smithbk,tanykj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-594,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxjnb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,inatatsu,ryokawajp,smithbk,tanykj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Apr/17 1:30 AM;smithbk;The fabric-ca-server's CA certs should not have a 1 year expiration by default.
The default should be effectively infinite;;;",,,,,,,,,,,,,,,,,,,
"when security is on, the peers/sdks will stop accepting txs after 90 days (by its default validity period)",FABC-861,14498,13296,Sub-task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,frankylu,frankylu,02/Feb/17 6:46 AM,31/Jul/19 12:51 PM,28/Oct/23 2:21 AM,14/Apr/17 8:51 PM,,,,,,,Unscheduled,,,,,,0,,,,,,"all certificates created by the CA have validity period of 90 days (hard coded), this includes all the root certificates (e.g. eca.cert.chain, tca.cert.chain) and enrollment specific certificates (e.g. enrollment.cert) sent from CA to peers/SDKs

so if security is turned on, the whole system will basically stop accepting txs after 90 days since the cert verification checks will fail against its certpool (no longer valid)

The work around involve manually creating all certs elsewhere and replace the old ones, but this is not really documented and hectic to do ",,frankylu,gbolo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjtj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,frankylu,gbolo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Feb/17 6:52 AM;frankylu;duplicate to FAB 965, consider close this issue
;;;","09/Feb/17 1:19 AM;gbolo;another possible work around which we tested:

1.) Stop the fabric
2.) Remove eca,tca,tlsca,aca x509 certs (cadir/*.cert)
3.) Delete rows from sqllitedb on eca.db that pertain to the enrolment IDs used by the peers. in our case:
 DELETE FROM Users WHERE id LIKE 'vp%_eid';
 DELETE FROM Certificates WHERE id LIKE 'vp%_eid';
4.) Delete crypto folder on peers so that they are forced to re-enroll
5.) start mebersrvc which will create new x509 certs based on same key material it already has and add entries to users table.
6.) start the peers and they should re-enroll


* Also if you want to change the length of the 90 days going forward you can change this line in the source:

line 113 - https://github.com/hyperledger/fabric/blob/4491e28f38f4b31efb79fb550c2ea80f64d099f8/membersrvc/ca/ca.go
notAfter := notBefore.Add(time.Hour * 24 * 90)

then re-compile the membersrvc;;;",,,,,,,,,,,,,,,,,,
Update mysql driver to latest version,FABC-862,41699,,Task,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,08/Aug/19 9:12 PM,21/Aug/19 4:37 AM,28/Oct/23 2:21 AM,08/Aug/19 11:25 PM,,,,,,,v1.4.3,v2.0.0,,fabric-ca-server,,,0,,,,,,"Sadly, we are using a very old version of the mysql driver and it does not work well with MySQL cloud services",,denyeart,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wij:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mastersingh24,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Aug/19 9:18 PM;mastersingh24;As an example, here's an error when trying to connect to Azure MySQL:

{code:java}
2019/08/07 23:39:35 [DEBUG] Initializing DB
2019/08/07 23:39:35 [DEBUG] Initializing 'mysql' database at '****:****@tcp(server.mysql.database.azure.com:3306)/fabricca?parseTime=true'
2019/08/07 23:39:35 [DEBUG] Using MySQL database, connecting to database...
2019/08/07 23:39:35 [DEBUG] Database Name: fabricca
2019/08/07 23:39:35 [DEBUG] Connecting to MySQL server, using connection string: ****:****@tcp(server.mysql.database.azure.com:3306)/?parseTime=true
2019/08/07 23:39:35 [ERROR] Error occurred initializing database: Failed to connect to MySQL database: this authentication plugin is not supported
{code}

https://stackoverflow.com/questions/57402608/fabric-ca-server-connect-to-azure-mysql-this-authentication-plugin-is-not-suppo/57412315#57412315;;;","08/Aug/19 10:06 PM;mastersingh24;release-1.4:   https://gerrit.hyperledger.org/r/#/c/fabric-ca/+/32790/
master:  https://gerrit.hyperledger.org/r/32791;;;",,,,,,,,,,,,,,,,,,
Tests fail when file when open pipe exists in system temp,FABC-863,41720,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,10/Aug/19 12:35 AM,10/Sep/19 5:17 AM,28/Oct/23 2:21 AM,21/Aug/19 12:57 AM,,,,,,,v2.0.0,,,,,,0,,,,,,"BCCSP searches for keystores by looping through the specified directories and reading all files. If there is an open pipe in the directory, the tests will hang permanently until a timeout occurs.

To remediate we should create a subdirectory in the directory where we create the keystore",,btl5037,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wln:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Aug/19 12:57 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric-ca/+/32814/ - merged in master.;;;",,,,,,,,,,,,,,,,,,,
"fabric-ca-gosec-weekly, fabric-ca-safesql-weekly jobs fail consistently",FABC-864,41825,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Won't Do,btl5037,vijaypunugubati,vijaypunugubati,16/Aug/19 5:16 AM,14/Jan/20 12:54 AM,28/Oct/23 2:21 AM,14/Jan/20 12:54 AM,,,,,,,,,,,,,0,ci-failure,,,,,"fabric-ca-gosec-weekly, fabric-ca-safesql-weekly jobs fail consistently and these jobs run once a week.

fabric-ca-gosec-weekly: This job do goscan for the packages `api lib util cmd vendor1`

fabric-ca-safesql-weekly:  This job runs safesql scan for the fabric-ca repo.

And the question is do we still required to maintain these jobs as they were failures observed every time and the supporting files were touched last time on Feb 2018.",,ashutosh_kumar,btl5037,denyeart,sykesm,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00x6r:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ashutosh_kumar,btl5037,denyeart,sykesm,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Aug/19 10:45 PM;ashutosh_kumar;The job is failing because the result of scan is false positive. Hence it is non-voting job running weekly. To remove false positive , we need to change the code , which is not desirable.

 

The job is required to meet various Security and Compliance requirements of code scanning. Please do not kill this job [~vijaypunugubati]. Thanks.;;;","19/Aug/19 12:42 PM;btl5037;Who reads the reports generated by the scans. I say this because the vendor directory hasn't been scanned literally ever, the test is improperly performed and the vendor directory returns without any packages having been detected. If someone was reading the reports they would notice the vendor1.json file contains no scans.

Having performed the scan manually, there are several high vulnerabilities in the vendor directory, and many medium and low sev issues in the other directories. While I understand these may be required for some type of compliance, but who is reading them to ensure we are ""compliant,"" because they aren't working in their current state, and clearly no one is reading them if the report is empty and console output of the job shows the vendor part of the job failed?

We are inventorying jobs as these will need to be ported to the new CI system in the upcoming weeks, so we need to make sure if these are needed, that they are fixed appropriately, and that the right people are notified when HIGH/MED sev vulnerabilities are found in the code base. We need to decide what a healthy state is for these tests as well. We need to modify the job to only report a failure if it is truly a failure condition ( such as High Sev issues), as the new CI dashboards will be showing the actual health of the project now so we can actually triage real problems unlike today's state of CI.

Thanks Ashutosh;;;","20/Aug/19 2:37 AM;denyeart;[~btl5037] [~vijaypunugubati]
I discussed with [~ashutosh_kumar] and we determined that for known false positives, we will whitelist them so that the job does not fail going forward due to false positives.;;;","14/Jan/20 12:54 AM;btl5037;We will discuss out of band, we would like this to become part of the normal fab PR flow;;;",,,,,,,,,,,,,,,,
Wrong config name of operations.tls,FABC-865,41929,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,nnao,nnao,nnao,21/Aug/19 2:48 PM,23/Oct/19 9:16 PM,28/Oct/23 2:21 AM,23/Oct/19 9:16 PM,v1.4.3,v2.0.0,,,,,v1.4.4,v2.0.0,,fabric-ca-server,,,0,quality,,,,,"To enable tls of operations endpoint, it need to enable tls by server config like below,
{code:java}
operations:
    listenAddress: 127.0.0.1:9443
    tls:
        enabled: true
        cert:
            file: <path to cert file>
        key:
            file: <path to key file>
{code}

but, I got below messages

{code:java}
...
2019/08/20 04:16:17 [INFO] Home directory for default CA: /etc/hyperledger
2019/08/20 04:16:17 [DEBUG] 1 CA instance(s) running on server
Error: open : no such file or directory
{code}

I suppose that the config name of tls files is operations_tls_certfile instead of operations_tls_cert_file.",,nnao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00xpf:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),nnao,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Aug/19 2:06 PM;nnao;[https://gerrit.hyperledger.org/r/c/fabric-ca/+/33154];;;",,,,,,,,,,,,,,,,,,,
Add support for automated certificate renewals,FABC-866,41931,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,Coada,Coada,21/Aug/19 4:30 PM,22/Sep/19 5:33 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,1,,,,,,"As a blockchain developer and maintainer, I would like to have an automated process for handling certificate renewals. As my network grows with multiple nodes there is an increase in maintainability.

With this in place, nodes would reach out to a CA before their certificates are about to expire

The [ACME protocol|https://en.wikipedia.org/wiki/Automated_Certificate_Management_Environment] was developed for _Let's Encrypt_ and has gained traction beyond just this service. There is a Go ACME client providing this functionality - [CertMagic|https://github.com/mholt/certmagic]. Similarly, there is a CA written in Go supporting the ACME Protocol - [Boulder|https://www.github.com/letsencrypt/boulder].

The ACME Protocol was mentioned/proposed in FABC-697 but as far as I can see not implemented.",,Coada,joaquimpedrooliveira,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-545,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00xpv:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Coada,joaquimpedrooliveira,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Sep/19 5:33 PM;mastersingh24;I think we partially do ourselves a disservice in Fabric by using the Fabric CA to issue TLS certificates.  I think it's nice that we can do it, but I think most people in production scenarios will have their own preferred method for obtaining TLS certificates.

For the Fabric nodes (peer, orderer), we intentionally do not bake in any mechanisms for obtaining crypto material; we simply let you point to existing material which one can obtain however they like.;;;",,,,,,,,,,,,,,,,,,,
GoImports error with generated mocks,FABC-867,41947,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,22/Aug/19 1:47 AM,23/Aug/19 11:29 AM,28/Oct/23 2:21 AM,23/Aug/19 8:47 AM,,,,,,,v1.4.3,v2.0.0,,,,,0,ipm,,,,,"The below change in the `lib` directory introduced a bug in which goimports is now reporting generated mocks as not being compliant due to multiple import statements in the `lib` directory. We need to evaluate and correct why these are being included all of a sudden.

https://gerrit.hyperledger.org/r/c/fabric-ca/+/32525",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2c:rui9j",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Aug/19 5:49 AM;btl5037;Fabric CA installs goimports, the new version of goimports changes the format of the import statement block. We need to introduce a model like fabric has that strips out generated files;;;",,,,,,,,,,,,,,,,,,,
Remove libtool from fabric-ca image,FABC-868,42011,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,26/Aug/19 7:06 AM,27/Aug/19 12:05 AM,28/Oct/23 2:21 AM,27/Aug/19 12:05 AM,,,,,,,v2.0.0,,,,,,0,,,,,,No longer needed with latest version of the pkcs11 library,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00y6b:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Update to golang 1.12 in Fabric-CA,FABC-869,38129,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,02/Mar/19 1:48 AM,26/Aug/19 7:20 AM,28/Oct/23 2:21 AM,21/May/19 4:19 AM,,,,,,,,,,,,,0,,,,,,"[https://github.com/hyperledger/fabric-ca/blob/master/ci.properties#L1|https://github.com/hyperledger/fabric-ca/blob/release-1.4/ci.properties#L1]",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-779,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e6v:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/May/19 4:20 AM;btl5037;https://gerrit.hyperledger.org/r/c/fabric-ca/+/31409;;;",,,,,,,,,,,,,,,,,,,
Externalize Fabric CA Client,FABC-870,42110,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,,troyronda,troyronda,29/Aug/19 12:50 AM,25/Sep/19 2:29 AM,28/Oct/23 2:21 AM,22/Sep/19 5:26 AM,,,,,,,,,,,,,0,,,,,,"As a Fabric Go SDK maintainer, we would prefer to use an externalized copy of the Fabric CA client rather than copying & modifying the code into the SDK.

We currently have a modified version of Fabric and Fabric CA code in the Go SDK: https://github.com/hyperledger/fabric-sdk-go/tree/master/internal/github.com/hyperledger/",,mastersingh24,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-840,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00yvn:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Sep/19 2:36 AM;mastersingh24;[~troyronda]  - I think this is a duplicate of FABC-840;;;","22/Sep/19 5:26 AM;troyronda;Yup. Thanks for the pointer [~mastersingh24].;;;","22/Sep/19 5:18 PM;mastersingh24;No worries [~troyronda]  - glad to see that we both see this as a need.  I'm hoping to get to this over the next few weeks.;;;",,,,,,,,,,,,,,,,,
Broken link to cid package,FABC-871,42116,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Low,Done,nnao,nnao,nnao,29/Aug/19 9:01 AM,10/Sep/19 2:53 AM,28/Oct/23 2:21 AM,10/Sep/19 2:52 AM,v1.4.3,,,,,,v2.0.0,,,,,,0,Documentation,,,,,"The latest cid package location was changed to fabric/core/chaincode/shim/ext/cid.
However fabric-ca user guide point to the old one.

 

{code:java}
For information on the chaincode library API for Attribute-Based Access Control,
see `https://github.com/hyperledger/fabric/blob/master/core/chaincode/lib/cid/README.md <https://github.com/hyperledger/fabric/blob/master/core/chaincode/lib/cid/README.md>`_
{code}",,nnao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ywr:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),nnao,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Aug/19 7:46 AM;nnao;[https://gerrit.hyperledger.org/r/c/fabric-ca/+/33282];;;",,,,,,,,,,,,,,,,,,,
Typos in operations guide,FABC-872,42452,,Documentation,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,22/Sep/19 3:07 AM,22/Sep/19 5:20 PM,28/Oct/23 2:21 AM,22/Sep/19 5:20 PM,,,,,,,v2.0.0,,,,,,0,,,,,,Some of the paths are wrong in the various enroll XXX sections,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i010mb:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Sep/19 3:17 AM;mastersingh24;[https://github.com/hyperledger/fabric-ca/pull/23];;;",,,,,,,,,,,,,,,,,,,
fabric-ca unit tests fail with recent version of go,FABC-873,42560,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,01/Oct/19 4:17 AM,08/Nov/19 6:33 AM,28/Oct/23 2:21 AM,02/Oct/19 4:51 AM,,,,,,,v2.0.0,,,,,,0,,,,,,"{{NormalizeURL}} calls {{url.Parse}}. The tests for {{NormalizeURL}} expect {{NormalizeURL(""http://host:7054:x/path"")}} to return without an error but the URL is not valid so url.Parse returns an error.

Given the structure of the tests, I can't tell why that URL is supposed to be considered valid so we should just remove the test.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0115n:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Oct/19 5:12 AM;sykesm;https://github.com/hyperledger/fabric-ca/pull/29;;;",,,,,,,,,,,,,,,,,,,
Add docker composer info to HSM section,FABC-874,42577,,Documentation,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,negupta,negupta,negupta,02/Oct/19 3:32 AM,04/Dec/19 4:29 AM,28/Oct/23 2:21 AM,04/Dec/19 4:29 AM,,,,,,,,,,fabric-docs,,,0,,,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0118z:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Fix Go Version in ci.props,FABC-875,42596,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,02/Oct/19 11:49 PM,13/Jan/20 1:30 PM,28/Oct/23 2:21 AM,13/Jan/20 1:30 PM,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i011cz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Running generate.sh causes fabric-samples/basic-network's ca container fail to start,FABC-876,42644,,Bug,Unverified,FABC,Fabric CA,software,denyeart,,,Low,,,AhmadiDev,AhmadiDev,06/Oct/19 5:53 PM,11/Jan/21 1:37 PM,28/Oct/23 2:21 AM,,,,,,,,,,,fabric-ca-server,fabric-samples,,0,ipm,,,,,"Because fabric-samples/basic-network/`*docker-compose.yml*` has hardcoded `
 *FABRIC_CA_SERVER_CA_KEYFILE*`, the newly created keyfile is ignored by the ca container.",,AhmadiDev,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i011ln:",,,,Unset,Unset,,,,,,,,,,,,"1. cd ~/go/src/fabric-samples/basic-network

2. ahmad@DV01-PC:~/go/src/fabric-samples/basic-network$ ./generate.sh

3. ahmad@DV01-PC:~/go/src/fabric-samples/basic-network$ ./start.sh

4. Check ca container logs
ahmad@DV01-PC:~/go/src/fabric-samples$ docker logs -f 90241920606de7db67e082743a83ba38eb2f9fb5ca60da0076c4ba2479f3854f
2019/10/06 08:43:32 [INFO] Created default configuration file at /etc/hyperledger/fabric-ca-server/fabric-ca-server-config.yaml
2019/10/06 08:43:32 [INFO] Starting server in home directory: /etc/hyperledger/fabric-ca-server
2019/10/06 08:43:32 [INFO] Server Version: 1.4.3
2019/10/06 08:43:32 [INFO] Server Levels: &{Identity:2 Affiliation:1 Certificate:1 Credential:1 RAInfo:1 Nonce:1}
Error: Failed to find private key for certificate in '/etc/hyperledger/fabric-ca-server-config/ca.org1.example.com-cert.pem': Could not find matching private key for SKI: Failed getting key for SKI [[34 29 163 152 176 108 51 215 9 207 90 59 205 83 141 193 79 23 158 20 50 185 127 6 5 252 66 156 110 108 242 87]]: Key with SKI 221da398b06c33d709cf5a3bcd538dc14f179e1432b97f0605fc429c6e6cf257 not found in /etc/hyperledger/fabric-ca-server/msp/keystore",,Unset,,,,,,Unset,,Unset,,(Please add usage information),AhmadiDev,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Oct/19 4:53 AM;denyeart;[~sstone1] I know basic-network is in the process of being removed, but what would you suggest in the interim?;;;","12/Nov/19 5:18 PM;AhmadiDev;I noticed IBM Platform extension for vs code has already fixed this bug by renaming the randomly generated file name to a fixed name used in their [docker-compose.yaml:87|https://github.com/IBM-Blockchain/blockchain-vscode-extension/blob/dc91b780f0253a91f4d4a1eb6b65658a91df183c/test/data/yofn/docker-compose.yml#L87].

 

[blockchain-vscode-extension/test/data/yofn/generate.sh:27|https://github.com/IBM-Blockchain/blockchain-vscode-extension/blob/dc91b780f0253a91f4d4a1eb6b65658a91df183c/test/data/yofn/generate.sh#L27]:
{noformat}
mv ./crypto-config/peerOrganizations/org1.example.com/ca/*_sk ./crypto-config/peerOrganizations/org1.example.com/ca/ca.org1.example.com-key.pem{noformat}
 ;;;",,,,,,,,,,,,,,,,,,
Reduce Scope of FVT Tests with sslmode=off,FABC-877,42654,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,08/Oct/19 4:42 AM,08/Oct/19 9:31 PM,28/Oct/23 2:21 AM,08/Oct/19 9:31 PM,,,,,,,v1.4.4,v2.0.0,,,,,0,,,,,,"We should run all FVT tests with TLS-enabled, but only run one, encompassing suite with TLS off. This will dramatically reduce our FVT test time",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i011nv:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
FVT Image Build Fails When Upgrading Base Image to 0.4.16,FABC-878,42683,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,btl5037,btl5037,09/Oct/19 6:42 AM,12/Oct/19 3:37 AM,28/Oct/23 2:21 AM,12/Oct/19 3:37 AM,,,,,,,,,,,,,0,ci-blocker,,,,,"When generating SSL certs using the tls_pki script openSSL can't find the artifacts to generate the certs from

https://dev.azure.com/Hyperledger/Fabric%20CA/_build/results?buildId=625&view=logs&j=6deb24a8-69aa-5394-931b-594303a2f0f2&t=f3ae6f8d-30fd-5432-2feb-edcdf35b1a97&l=126",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i011sr:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Oct/19 3:37 AM;btl5037;[https://github.com/hyperledger/fabric-ca/commit/b00082a9128be8afcc6086b8c8a29354b26e2efd];;;",,,,,,,,,,,,,,,,,,,
Add support for any Postgres version,FABC-879,42693,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,10/Oct/19 1:47 AM,13/Jan/20 1:30 PM,28/Oct/23 2:21 AM,13/Jan/20 1:30 PM,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i011uz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix License in gencsr_test.sh,FABC-880,42712,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,10/Oct/19 10:59 PM,13/Jan/20 1:30 PM,28/Oct/23 2:21 AM,13/Jan/20 1:30 PM,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i011yj:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Update all fabric-ca dependencies to make it work with go mod,FABC-881,42729,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,mastersingh24,mrshah-ibm,mrshah-ibm,11/Oct/19 11:47 PM,05/Nov/19 3:11 AM,28/Oct/23 2:21 AM,05/Nov/19 3:11 AM,v1.4.3,,,,,,v1.4.4,v2.0.0,,fabric-ca-client,fabric-ca-server,,0,,,,,,"Currently the vendor.json on fabric-ca has different commit levels for dependencies from same github repository (example: [https://github.ibm.com/hyperledger/fabric)]

 

It is okay if the commit levels are coming from the same branch, but some of those come from different branch of the same repository. Example: Only two metrics dependencies come from master branch of fabric, whereas others are from release-1.4 branch.

 

Ref: [https://github.com/hyperledger/fabric-ca/blob/release-1.4/vendor/vendor.json#L501-L586]",,mastersingh24,mrshah-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0121n:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,mrshah-ibm,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Oct/19 9:53 PM;mastersingh24;[https://github.com/hyperledger/fabric-ca/pull/56]

[https://github.com/hyperledger/fabric-ca/pull/55]

 ;;;",,,,,,,,,,,,,,,,,,,
Remove Fabric-Baseimage from fabric-ca,FABC-882,42755,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,15/Oct/19 2:30 PM,16/Oct/19 2:16 AM,28/Oct/23 2:21 AM,16/Oct/19 2:16 AM,,,,,,,v2.0.0,,,,,,0,,,,,,,,btl5037,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01263:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Oct/19 12:42 AM;denyeart;https://github.com/hyperledger/fabric-ca/pull/49;;;",,,,,,,,,,,,,,,,,,,
"Fabric ca pod consistently ""CrashLoopBackOff"" in k8s cluster",FABC-883,42810,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid: Environment Issue,,steveLiuu,steveLiuu,18/Oct/19 6:54 PM,26/Apr/20 1:47 PM,28/Oct/23 2:21 AM,26/Apr/20 1:47 PM,,,,,,,,,,fabric-ca-server,,,0,,,,,,"I run into an issue that the fabric ca pod keep restarting itself. The log shows that {{Error: Failed to find private key for certificate}} but the private key and ca-cert.pem are located correctly. In the end, the fabric ca pod started after hundreds of ""CrashLoopBackOff"".

Anyone can help?

The logs are in the attachment.",,denyeart,steveLiuu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Oct/19 6:51 PM;steveLiuu;ca.log;https://jira.hyperledger.org/secure/attachment/17896/ca.log","18/Oct/19 6:54 PM;steveLiuu;k8s.log;https://jira.hyperledger.org/secure/attachment/17894/k8s.log","18/Oct/19 6:51 PM;steveLiuu;storage.log;https://jira.hyperledger.org/secure/attachment/17895/storage.log",,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i012fn:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,steveLiuu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Apr/20 1:47 PM;denyeart;Not able to reproduce, closing. Please re-open if you can provide detailed reproduction steps.;;;",,,,,,,,,,,,,,,,,,,
Upgrade release-1.4 to go 1.12.12,FABC-884,43099,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,05/Nov/19 4:24 AM,11/Nov/19 10:40 PM,28/Oct/23 2:21 AM,11/Nov/19 10:40 PM,v1.4.4,,,,,,v1.4.4,,,,,,0,ipm,,,,,,,btl5037,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i013gr:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Nov/19 10:40 PM;denyeart;[https://github.com/hyperledger/fabric-ca/pull/58] merged;;;",,,,,,,,,,,,,,,,,,,
Fabric CA client IdeMix stored file in proto format instead of Json,FABC-885,43106,,Bug,Unverified,FABC,Fabric CA,software,denyeart,,,Low,,,SamYuan1990,SamYuan1990,05/Nov/19 5:09 PM,03/Dec/20 10:59 PM,28/Oct/23 2:21 AM,,,,,,,,,,,fabric-ca-client,,,0,ipm,,,,,"Hi Guys,

I had tested in steps as:
1. Start a fabric CA server.
2. Enroll user as idemix type.
3. Create channel with idemix msp.
4. Join channel.
5. Use the user in step 2 and peer cli to invoke a chaincode.

Similar issue with
https://stackoverflow.com/questions/56312956/no-default-signer-setup-error-when-invoking-transaction-using-idemix-credentia

I had deep in fabric code, in release-1.4 branch.
msp/configbuilder.go
GetIdemixMspConfig
It reads a file in proto formate. However, when I get enrollment with
fabric-ca-client enroll -d -u $OCA_URL --caname $CA -H $Path --enrollment.type idemix --tls.certfiles $TLS_FILE

1. The output of /user/SignerConfig as result from ca server is json, which we hope the format is proto.
2. The json format is incorrect, as Key is Cred, but should cred,
3. The json format is incorrect, as key is Sk but should sk",,davidkhala,denyeart,johannwest,SamYuan1990,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zs1r4",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),davidkhala,denyeart,johannwest,SamYuan1990,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Nov/19 2:21 AM;denyeart;[~SamYuan1990] Can you clarify the user impact?

[~angelo.decaro] Thoughts?;;;","15/Nov/19 3:51 PM;SamYuan1990;[~denyeart], if we enroll an idemix type identity via 
{code:java}
fabric-ca-client enroll -d -u $OCA_URL --caname $CA -H $Path --enrollment.type idemix --tls.certfiles $TLS_FILE
{code}
the msp at local can't be used for peer cli like
{code:java}
peer chaincode invoke ...
{code}
as peer chaincode invoke will report error.(as it try to import msp setting from a grpc/proto encoded file, but get a json encoded file from fabric-ca-client);;;","18/Nov/19 11:45 AM;SamYuan1990;[~denyeart], so the user impact is user can not use an idemix msp enrolled via fabric ca client command for following interaction with blockchain network by other fabric command line interface ex peer.;;;","11/Jul/20 11:06 PM;davidkhala;I think we need only a data format adapter to encode the json into grpc message. 
Some lines of guideline could solve this. ;;;","03/Dec/20 10:57 PM;johannwest;I was successful converting the json to the proto format. **I tested the credentials and they worked as *MEMBER*. When generating admin credentials, ""*peer chaincode invoke*"" claims the credentials are invalid.

 

Here is my source code: [https://github.com/johannww/fabric-idemix-json-conversion]

 

I tested it in a production network. 

 

Take the essence. Right now there are a few unused imports, but follow the logic.;;;",,,,,,,,,,,,,,,
How to add postgres as a db in hyperledger fabric-ca using sslmode =verify-ca or verify-full?,FABC-886,43212,,Epic,Backlog,FABC,Fabric CA,software,denyeart,,,Highest,,,adarshaJha,adarshaJha,07/Nov/19 9:48 PM,17/Nov/21 9:24 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"I am trying to add postgres as a db in fabric-ca and successfully did it in {{ssl=require}} mode but not able to do using {{ssl=verify-ca}} or verify-full

my docker-compose.yaml file is like this :

 
{code:java}
version: '2'

networks:
  basic:

services:
  orderer.lynkit.io:
    container_name: orderer.lynkit.io
    image: hyperledger/fabric-orderer:1.4.1
    environment:
      - ORDERER_GENERAL_LOGLEVEL=DEBUG
      - ORDERER_GENERAL_LISTENADDRESS=0.0.0.0
      - ORDERER_GENERAL_GENESISMETHOD=file
      - ORDERER_GENERAL_GENESISFILE=/etc/hyperledger/configtx/genesis.block
      - ORDERER_GENERAL_LOCALMSPID=OrdererMSP
      - ORDERER_GENERAL_LOCALMSPDIR=/etc/hyperledger/msp/orderer/msp
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/orderer
    command: orderer
    ports:
      - 7050:7050
    volumes:
        - ./config/:/etc/hyperledger/configtx
        - ./crypto-config/ordererOrganizations/lynkit.io/orderers/orderer.lynkit.io/:/etc/hyperledger/msp/orderer
    networks:
      - basic

  pgadmin4:
      image: dpage/pgadmin4
      environment:
        PGADMIN_DEFAULT_EMAIL: admin@root.com
        PGADMIN_DEFAULT_PASSWORD: SuperSecret
      volumes:
        - ./pgadmin-data:/var/lib/postgresql/data
      ports:
        - 80:80
      networks:
         - basic

  ica.consigner.lynkit.io:
    image: hyperledger/fabric-ca:1.4.1
    environment:
      - FABRIC_CA_HOME=/etc/hyperledger/fabric-ca-server
      - FABRIC_CA_SERVER_OPERATIONS_LISTENADDRESS=127.0.0.1:8443
      - FABRIC_CA_SERVER_DB_TYPE=postgres
      - FABRIC_CA_SERVER_CSR_CN= ica.consigner.lynkit.io
      - FABRIC_CA_SERVER_CSR_HOSTS=0.0.0.0
      - FABRIC_CA_SERVER_DB_DATASOURCE=host=db-postgres port=5432 user=postgres password=caDbPass12345 dbname=fabriccaserver sslmode=verify-ca 
      - FABRIC_CA_SERVER_DB_TLS_ENABLED=true
      - FABRIC_CA_SERVER_DB_TLS_CERTFILES=[/tmp/postgresCerts/root.crt]
      - FABRIC_CA_SERVER_DB_TLS_CLIENT_CERTFILE=/tmp/postgresCerts/server.crt
      - FABRIC_CA_SERVER_DB_TLS_CLIENT_KEYFILE=/tmp/postgresCerts/server.key  

    ports:
      - ""7054:7054""
    command: sh -c 'fabric-ca-server start -b admin:adminpw -d' 
    volumes:
      - ./crypto-config/peerOrganizations/consigner.lynkit.io/ca/:/etc/hyperledger/fabric-ca-server-config
      - ./ca-config/:/etc/hyperledger/fabric-ca-server
      # - ./ca-config/ssl/postgres:/etc/hyperledger/fabric-ca-server/ssl
      - /home/adarsha/postgresCerts:/tmp/postgresCerts

    container_name: ica.consigner.lynkit.io
    networks:
      - basic 
    depends_on:
         - db-postgres

  db-postgres:
      container_name: db-postgres
      # network_mode: ""host""
      image: postgres:latest
      environment:
         - POSTGRES_PASSWORD=caDbPass12345
         - POSTGRES_USER=postgres
         - POSTGRES_DB=fabriccaserver
      volumes:
         - ./postgres-test-data:/var/lib/postgresql/data
      ports:
         - 5432:5432
      networks:
         - basic

{code}

here is my postgresql.conf file : 


{code:java}

# - SSL -

ssl = on
ssl_ca_file = 'root.crt'
ssl_cert_file = 'server.crt'
#ssl_crl_file = ''
ssl_key_file = 'server.key'
#ssl_ciphers = 'HIGH:MEDIUM:+3DES:!aNULL' # allowed SSL ciphers
#ssl_prefer_server_ciphers = on
#ssl_ecdh_curve = 'prime256v1'
{code}

and here is my pg_hba.conf file 

{code:java}
# CAUTION: Configuring the system for local ""trust"" authentication
# allows any local user to connect as any PostgreSQL user, including
# the database superuser.  If you do not trust all your local users,
# use another authentication method.


# TYPE  DATABASE        USER            ADDRESS                 METHOD

# ""local"" is for Unix domain socket connections only
local   all             all                                     trust
# IPv4 local connections:
host    all             all             127.0.0.1/32            trust
# IPv6 local connections:
host    all             all             ::1/128                 trust
# Allow replication connections from localhost, by a user with the
# replication privilege.
local   replication     all                                     trust
host    replication     all             127.0.0.1/32            trust
host    replication     all             ::1/128                 trust


hostssl all all all md5



{code}

and this is how i am generating my certificates for postgres : 


{code:java}

openssl req -new -nodes -text -out root.csr -keyout root.key -subj ""/CN=ica.consigner.lynkit.io""
chmod og-rwx root.key
openssl x509 -req -in root.csr -text -days 3650 -extfile /etc/ssl/openssl.cnf -extensions v3_ca -signkey root.key -out root.crt
openssl req -new -nodes -text -out server.csr -keyout server.key -subj ""/CN=db-postgres""
chmod og-rwx server.key
openssl x509 -req -in server.csr -text -days 365 -CA root.crt -CAkey root.key -CAcreateserial -out server.crt

{code}

my CA logs are : 

{code:java}
 docker logs ica.consigner.lynkit.io 
2019/11/07 10:08:09 [DEBUG] Home directory: /etc/hyperledger/fabric-ca-server
2019/11/07 10:08:09 [INFO] Configuration file location: /etc/hyperledger/fabric-ca-server/fabric-ca-server-config.yaml
2019/11/07 10:08:09 [INFO] Starting server in home directory: /etc/hyperledger/fabric-ca-server
2019/11/07 10:08:09 [WARNING] Unknown provider type: ; metrics disabled
2019/11/07 10:08:09 [DEBUG] Set log level: 
2019/11/07 10:08:09 [INFO] Server Version: 1.4.1
2019/11/07 10:08:09 [INFO] Server Levels: &{Identity:2 Affiliation:1 Certificate:1 Credential:1 RAInfo:1 Nonce:1}
2019/11/07 10:08:09 [DEBUG] Making server filenames absolute
2019/11/07 10:08:09 [DEBUG] Initializing default CA in directory /etc/hyperledger/fabric-ca-server
2019/11/07 10:08:09 [DEBUG] Init CA with home /etc/hyperledger/fabric-ca-server and config {Version:1.4.0-stable Cfg:{Identities:{PasswordAttempts:10 AllowRemove:false} Affiliations:{AllowRemove:false}} CA:{Name:ica.consigner.lynkit.io Keyfile:/etc/hyperledger/fabric-ca-server-config/ica.consigner.lynkit.io.key.pem Certfile:/etc/hyperledger/fabric-ca-server-config/ica.consigner.lynkit.io.crt.pem Chainfile:/etc/hyperledger/fabric-ca-server-config/chain.consigner.lynkit.io.crt.pem} Signing:0xc0003cd720 CSR:{CN: ica.consigner.lynkit.io Names:[{C:US ST:North Carolina L: O:Hyperledger OU:Fabric SerialNumber:}] Hosts:[0.0.0.0] KeyRequest:0xc0003e8360 CA:0xc0003e83e0 SerialNumber:} Registry:{MaxEnrollments:-1 Identities:[{ Name:**** Pass:**** Type:client Affiliation: MaxEnrollments:0 Attrs:map[hf.Registrar.Attributes:* hf.AffiliationMgr:1 hf.Registrar.Roles:* hf.Registrar.DelegateRoles:* hf.Revoker:1 hf.IntermediateCA:1 hf.GenCRL:1]  }]} Affiliations:map[consigner:[department1 department2]] LDAP:{ Enabled:false URL:ldap://****:****@<host>:<port>/<base> UserFilter:(uid=%s) GroupFilter:(memberUid=%s) Attribute:{[uid member] [{ }] map[groups:[{ }]]} TLS:{false [] { }}  } DB:{ Type:postgres ****user=**** password=**** dbname=fabriccaserver sslmode=verify-ca TLS:{false [[/tmp/postgresCerts/root.crt]] {/tmp/postgresCerts/server.key /tmp/postgresCerts/server.crt}}  } CSP:0xc0003e8660 Client:<nil> Intermediate:{ParentServer:{ URL: CAName:  } TLS:{Enabled:false CertFiles:[] Client:{KeyFile: CertFile:}} Enrollment:{ Name: Secret:**** CAName: AttrReqs:[] Profile: Label: CSR:<nil> Type:x509  }} CRL:{Expiry:24h0m0s} Idemix:{IssuerPublicKeyfile: IssuerSecretKeyfile: RevocationPublicKeyfile: RevocationPrivateKeyfile: RHPoolSize:100 NonceExpiration:15s NonceSweepInterval:15m}}
2019/11/07 10:08:09 [DEBUG] CA Home Directory: /etc/hyperledger/fabric-ca-server
2019/11/07 10:08:09 [DEBUG] Checking configuration file version '1.4.0-stable' against server version: '1.4.1'
2019/11/07 10:08:09 [DEBUG] Initializing BCCSP: &{ProviderName:SW SwOpts:0xc00022d400 PluginOpts:<nil>}
2019/11/07 10:08:09 [DEBUG] Initializing BCCSP with software options &{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:0xc0003ea470 DummyKeystore:<nil> InmemKeystore:<nil>}
2019/11/07 10:08:09 [DEBUG] Initialize key material
2019/11/07 10:08:09 [DEBUG] Making CA filenames absolute
2019/11/07 10:08:09 [INFO] The CA key and certificate files already exist
2019/11/07 10:08:09 [INFO] Key file location: /etc/hyperledger/fabric-ca-server-config/ica.consigner.lynkit.io.key.pem
2019/11/07 10:08:09 [INFO] Certificate file location: /etc/hyperledger/fabric-ca-server-config/ica.consigner.lynkit.io.crt.pem
2019/11/07 10:08:09 [DEBUG] Validating the CA certificate and key
2019/11/07 10:08:09 [DEBUG] Check CA certificate for valid dates
2019/11/07 10:08:09 [DEBUG] Check CA certificate for valid usages
2019/11/07 10:08:09 [DEBUG] Check CA certificate for valid IsCA value
2019/11/07 10:08:09 [DEBUG] Check that key type is supported
2019/11/07 10:08:09 [DEBUG] Check that key size is of appropriate length
2019/11/07 10:08:09 [DEBUG] Check that public key and private key match
2019/11/07 10:08:09 [DEBUG] Validation of CA certificate and key successful
2019/11/07 10:08:09 [DEBUG] Loading CN from existing enrollment information
2019/11/07 10:08:09 [DEBUG] Initializing DB
2019/11/07 10:08:09 [DEBUG] Initializing 'postgres' database at 'host=db-postgres port=5432 user=**** password=**** dbname=fabriccaserver sslmode=verify-ca'
2019/11/07 10:08:09 [DEBUG] Using postgres database, connecting to database...
2019/11/07 10:08:09 [DEBUG] Database Name: fabriccaserver
2019/11/07 10:08:09 [DEBUG] Connecting to PostgreSQL server, using connection string: host=db-postgres port=5432 user=**** password=**** dbname=fabriccaserver sslmode=verify-ca
2019/11/07 10:08:09 [WARNING] Failed to connect to database 'fabriccaserver'
2019/11/07 10:08:09 [DEBUG] Connecting to PostgreSQL server, using connection string: host=db-postgres port=5432 user=**** password=**** dbname=postgres sslmode=verify-ca
2019/11/07 10:08:09 [WARNING] Failed to connect to database 'postgres'
2019/11/07 10:08:09 [DEBUG] Connecting to PostgreSQL server, using connection string: host=db-postgres port=5432 user=**** password=**** dbname=template1 sslmode=verify-ca
2019/11/07 10:08:09 [WARNING] Failed to connect to database 'template1'
2019/11/07 10:08:09 [ERROR] Error occurred initializing database: Failed to connect to Postgres database. Postgres requires connecting to a specific database, the following databases were tried: [fabriccaserver postgres template1]. Please create one of these database before continuing
2019/11/07 10:08:09 [DEBUG] Initializing enrollment signer
2019/11/07 10:08:09 [DEBUG] validating configuration
2019/11/07 10:08:09 [DEBUG] validate local profile
2019/11/07 10:08:09 [DEBUG] profile is valid
2019/11/07 10:08:09 [DEBUG] validate local profile
2019/11/07 10:08:09 [DEBUG] profile is valid
2019/11/07 10:08:09 [DEBUG] validate local profile
2019/11/07 10:08:09 [DEBUG] profile is valid
2019/11/07 10:08:09 [DEBUG] CA initialization successful
2019/11/07 10:08:09 [DEBUG] Initializing Idemix issuer...
2019/11/07 10:08:09 [DEBUG] Returning without initializing Idemix issuer for CA 'ica.consigner.lynkit.io' as the database is not initialized
2019/11/07 10:08:09 [INFO] Home directory for default CA: /etc/hyperledger/fabric-ca-server
2019/11/07 10:08:09 [DEBUG] 1 CA instance(s) running on server
2019/11/07 10:08:09 [INFO] Operation Server Listening on 127.0.0.1:8443
2019/11/07 10:08:09 [INFO] Listening on http://0.0.0.0:7054

{code}
and my db-postgres logs are : 

{code:java}
docker logs db-postgres 
2019-11-08 06:55:52.181 UTC [1] LOG:  starting PostgreSQL 12.0 (Debian 12.0-2.pgdg100+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 8.3.0-6) 8.3.0, 64-bit
2019-11-08 06:55:52.181 UTC [1] LOG:  listening on IPv4 address ""0.0.0.0"", port 5432
2019-11-08 06:55:52.181 UTC [1] LOG:  listening on IPv6 address ""::"", port 5432
2019-11-08 06:55:52.630 UTC [1] LOG:  listening on Unix socket ""/var/run/postgresql/.s.PGSQL.5432""
2019-11-08 06:55:53.110 UTC [24] LOG:  database system was interrupted; last known up at 2019-11-08 06:54:10 UTC
2019-11-08 06:55:57.621 UTC [24] LOG:  database system was not properly shut down; automatic recovery in progress
2019-11-08 06:55:57.835 UTC [24] LOG:  redo starts at 0/1689558
2019-11-08 06:55:57.835 UTC [24] LOG:  invalid record length at 0/1689590: wanted 24, got 0
2019-11-08 06:55:57.835 UTC [24] LOG:  redo done at 0/1689558
2019-11-08 06:55:58.605 UTC [1] LOG:  database system is ready to accept connections
2019-11-08 06:55:58.633 UTC [25] LOG:  could not accept SSL connection: certificate verify failed
2019-11-08 06:55:58.732 UTC [32] LOG:  could not accept SSL connection: certificate verify failed
2019-11-08 06:55:58.736 UTC [33] LOG:  could not accept SSL connection: certificate verify failed

{code}

and when i add sslmode=verify-ca then my CA logs are : 

{code:java}
docker logs ica.consigner.lynkit.io 
2019/11/08 07:08:49 [DEBUG] Home directory: /etc/hyperledger/fabric-ca-server
2019/11/08 07:08:49 [INFO] Configuration file location: /etc/hyperledger/fabric-ca-server/fabric-ca-server-config.yaml
2019/11/08 07:08:49 [INFO] Starting server in home directory: /etc/hyperledger/fabric-ca-server
2019/11/08 07:08:49 [WARNING] Unknown provider type: ; metrics disabled
2019/11/08 07:08:49 [DEBUG] Set log level: 
2019/11/08 07:08:49 [INFO] Server Version: 1.4.1
2019/11/08 07:08:49 [INFO] Server Levels: &{Identity:2 Affiliation:1 Certificate:1 Credential:1 RAInfo:1 Nonce:1}
2019/11/08 07:08:49 [DEBUG] Making server filenames absolute
2019/11/08 07:08:49 [DEBUG] Initializing default CA in directory /etc/hyperledger/fabric-ca-server
2019/11/08 07:08:49 [DEBUG] Init CA with home /etc/hyperledger/fabric-ca-server and config {Version:1.4.0-stable Cfg:{Identities:{PasswordAttempts:10 AllowRemove:false} Affiliations:{AllowRemove:false}} CA:{Name:ica.consigner.lynkit.io Keyfile:/etc/hyperledger/fabric-ca-server-config/ica.consigner.lynkit.io.key.pem Certfile:/etc/hyperledger/fabric-ca-server-config/ica.consigner.lynkit.io.crt.pem Chainfile:/etc/hyperledger/fabric-ca-server-config/chain.consigner.lynkit.io.crt.pem} Signing:0xc0002ee8f0 CSR:{CN: ica.consigner.lynkit.io Names:[{C:US ST:North Carolina L: O:Hyperledger OU:Fabric SerialNumber:}] Hosts:[0.0.0.0] KeyRequest:0xc00000c980 CA:0xc00000c700 SerialNumber:} Registry:{MaxEnrollments:-1 Identities:[{ Name:**** Pass:**** Type:client Affiliation: MaxEnrollments:0 Attrs:map[hf.IntermediateCA:1 hf.GenCRL:1 hf.Registrar.Attributes:* hf.AffiliationMgr:1 hf.Registrar.Roles:* hf.Registrar.DelegateRoles:* hf.Revoker:1]  }]} Affiliations:map[consigner:[department1 department2]] LDAP:{ Enabled:false URL:ldap://****:****@<host>:<port>/<base> UserFilter:(uid=%s) GroupFilter:(memberUid=%s) Attribute:{[uid member] [{ }] map[groups:[{ }]]} TLS:{false [] { }}  } DB:{ Type:postgres ****user=**** password=**** dbname=fabriccaserver sslmode=verify-full TLS:{true [[/tmp/postgresCerts/root.crt]] {/tmp/postgresCerts/server.key /tmp/postgresCerts/server.crt}}  } CSP:0xc000494ea0 Client:<nil> Intermediate:{ParentServer:{ URL: CAName:  } TLS:{Enabled:false CertFiles:[] Client:{KeyFile: CertFile:}} Enrollment:{ Name: Secret:**** CAName: AttrReqs:[] Profile: Label: CSR:<nil> Type:x509  }} CRL:{Expiry:24h0m0s} Idemix:{IssuerPublicKeyfile: IssuerSecretKeyfile: RevocationPublicKeyfile: RevocationPrivateKeyfile: RHPoolSize:100 NonceExpiration:15s NonceSweepInterval:15m}}
2019/11/08 07:08:49 [DEBUG] CA Home Directory: /etc/hyperledger/fabric-ca-server
2019/11/08 07:08:49 [DEBUG] Checking configuration file version '1.4.0-stable' against server version: '1.4.1'
2019/11/08 07:08:49 [DEBUG] Initializing BCCSP: &{ProviderName:SW SwOpts:0xc000040200 PluginOpts:<nil>}
2019/11/08 07:08:49 [DEBUG] Initializing BCCSP with software options &{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:0xc000515c30 DummyKeystore:<nil> InmemKeystore:<nil>}
2019/11/08 07:08:49 [DEBUG] Initialize key material
2019/11/08 07:08:49 [DEBUG] Making CA filenames absolute
2019/11/08 07:08:49 [INFO] The CA key and certificate files already exist
2019/11/08 07:08:49 [INFO] Key file location: /etc/hyperledger/fabric-ca-server-config/ica.consigner.lynkit.io.key.pem
2019/11/08 07:08:49 [INFO] Certificate file location: /etc/hyperledger/fabric-ca-server-config/ica.consigner.lynkit.io.crt.pem
2019/11/08 07:08:49 [DEBUG] Validating the CA certificate and key
2019/11/08 07:08:49 [DEBUG] Check CA certificate for valid dates
2019/11/08 07:08:49 [DEBUG] Check CA certificate for valid usages
2019/11/08 07:08:49 [DEBUG] Check CA certificate for valid IsCA value
2019/11/08 07:08:49 [DEBUG] Check that key type is supported
2019/11/08 07:08:49 [DEBUG] Check that key size is of appropriate length
2019/11/08 07:08:49 [DEBUG] Check that public key and private key match
2019/11/08 07:08:49 [DEBUG] Validation of CA certificate and key successful
2019/11/08 07:08:49 [DEBUG] Loading CN from existing enrollment information
2019/11/08 07:08:49 [DEBUG] Initializing DB
2019/11/08 07:08:49 [DEBUG] Initializing 'postgres' database at 'host=db-postgres port=5432 user=**** password=**** dbname=fabriccaserver sslmode=verify-full'
2019/11/08 07:08:49 [DEBUG] Using postgres database, connecting to database...
2019/11/08 07:08:49 [DEBUG] Database Name: fabriccaserver
2019/11/08 07:08:49 [DEBUG] Connecting to PostgreSQL server, using connection string: host=db-postgres port=5432 user=**** password=**** dbname=fabriccaserver sslmode=verify-full sslrootcert=/tmp/postgresCerts/root.crt sslcert=/tmp/postgresCerts/server.crt sslkey=/tmp/postgresCerts/server.key
2019/11/08 07:08:49 [WARNING] Failed to connect to database 'fabriccaserver'
2019/11/08 07:08:49 [DEBUG] Connecting to PostgreSQL server, using connection string: host=db-postgres port=5432 user=**** password=**** dbname=postgres sslmode=verify-full sslrootcert=/tmp/postgresCerts/root.crt sslcert=/tmp/postgresCerts/server.crt sslkey=/tmp/postgresCerts/server.key
2019/11/08 07:08:49 [WARNING] Failed to connect to database 'postgres'
2019/11/08 07:08:49 [DEBUG] Connecting to PostgreSQL server, using connection string: host=db-postgres port=5432 user=**** password=**** dbname=template1 sslmode=verify-full sslrootcert=/tmp/postgresCerts/root.crt sslcert=/tmp/postgresCerts/server.crt sslkey=/tmp/postgresCerts/server.key
2019/11/08 07:08:49 [WARNING] Failed to connect to database 'template1'
2019/11/08 07:08:49 [ERROR] Error occurred initializing database: Failed to connect to Postgres database. Postgres requires connecting to a specific database, the following databases were tried: [fabriccaserver postgres template1]. Please create one of these database before continuing
2019/11/08 07:08:49 [DEBUG] Initializing enrollment signer
2019/11/08 07:08:49 [DEBUG] validating configuration
2019/11/08 07:08:49 [DEBUG] validate local profile
2019/11/08 07:08:49 [DEBUG] profile is valid
2019/11/08 07:08:49 [DEBUG] validate local profile
2019/11/08 07:08:49 [DEBUG] profile is valid
2019/11/08 07:08:49 [DEBUG] validate local profile
2019/11/08 07:08:49 [DEBUG] profile is valid
2019/11/08 07:08:49 [DEBUG] CA initialization successful
2019/11/08 07:08:49 [DEBUG] Initializing Idemix issuer...
2019/11/08 07:08:49 [DEBUG] Returning without initializing Idemix issuer for CA 'ica.consigner.lynkit.io' as the database is not initialized
2019/11/08 07:08:49 [INFO] Home directory for default CA: /etc/hyperledger/fabric-ca-server
2019/11/08 07:08:49 [DEBUG] 1 CA instance(s) running on server
2019/11/08 07:08:49 [INFO] Operation Server Listening on 127.0.0.1:8443
2019/11/08 07:08:49 [DEBUG] TLS is enabled
2019/11/08 07:08:49 [DEBUG] TLS Certificate: /etc/hyperledger/fabric-ca-server-config/ica.consigner.lynkit.io.crt.pem, TLS Key: /etc/hyperledger/fabric-ca-server-config/ica.consigner.lynkit.io.key.pem
2019/11/08 07:08:49 [DEBUG] Client authentication type requested: NoClientCert
2019/11/08 07:08:49 [INFO] Listening on https://0.0.0.0:7054

{code}

",,adarshaJha,btl5037,seyday,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,ghx-label-7,,fabric-ca with postgres sslmode = verify-ca,To Do,No,,Unset,No,,,"1|i0142z:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),adarshaJha,btl5037,seyday,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
when i enable TLS in tls section of fabric-ca-server-config.yaml while trying to connect fabric-ca to postgres using sslmode=verify-full,FABC-887,43230,,Epic,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,adarshaJha,adarshaJha,08/Nov/19 8:08 PM,08/Nov/19 8:10 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"when i enable TLS by doing this : 


{code:java}
tls:
  # Enable TLS (default: false)
  enabled: true
  # TLS for the server's listening port
  certfile: /etc/hyperledger/fabric-ca-server-config/ica.consigner.lynkit.io.crt.pem
  keyfile: 
  clientauth:
    type: NoClientCert
    certfiles:

{code}

my db-postgres logs are : 


{code:java}
adarsha@adarsha-HP-Z240-Tower-Workstation:~/Documents/ica-setup/consigner$ docker logs db-postgres 
2019-11-08 11:04:58.555 UTC [1] LOG:  starting PostgreSQL 12.0 (Debian 12.0-2.pgdg100+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 8.3.0-6) 8.3.0, 64-bit
2019-11-08 11:04:58.555 UTC [1] LOG:  listening on IPv4 address ""0.0.0.0"", port 5432
2019-11-08 11:04:58.556 UTC [1] LOG:  listening on IPv6 address ""::"", port 5432
2019-11-08 11:04:58.707 UTC [1] LOG:  listening on Unix socket ""/var/run/postgresql/.s.PGSQL.5432""
2019-11-08 11:04:58.831 UTC [24] LOG:  database system was interrupted; last known up at 2019-11-08 11:03:18 UTC
2019-11-08 11:04:59.067 UTC [24] LOG:  database system was not properly shut down; automatic recovery in progress
2019-11-08 11:04:59.107 UTC [24] LOG:  redo starts at 0/16468B0
2019-11-08 11:04:59.107 UTC [24] LOG:  invalid record length at 0/16468E8: wanted 24, got 0
2019-11-08 11:04:59.107 UTC [24] LOG:  redo done at 0/16468B0
2019-11-08 11:04:59.309 UTC [1] LOG:  database system is ready to accept connections
2019-11-08 11:04:59.797 UTC [31] LOG:  could not accept SSL connection: certificate verify failed
2019-11-08 11:04:59.828 UTC [32] LOG:  could not accept SSL connection: certificate verify failed
2019-11-08 11:04:59.833 UTC [33] LOG:  could not accept SSL connection: certificate verify failed

{code}

and my CA logs are : 

{code:java}
adarsha@adarsha-HP-Z240-Tower-Workstation:~/Documents/ica-setup/consigner$ docker logs ica.consigner.lynkit.io 
2019/11/08 11:04:59 [DEBUG] Home directory: /etc/hyperledger/fabric-ca-server
2019/11/08 11:04:59 [INFO] Configuration file location: /etc/hyperledger/fabric-ca-server/fabric-ca-server-config.yaml
2019/11/08 11:04:59 [INFO] Starting server in home directory: /etc/hyperledger/fabric-ca-server
2019/11/08 11:04:59 [WARNING] Unknown provider type: ; metrics disabled
2019/11/08 11:04:59 [DEBUG] Set log level: 
2019/11/08 11:04:59 [INFO] Server Version: 1.4.1
2019/11/08 11:04:59 [INFO] Server Levels: &{Identity:2 Affiliation:1 Certificate:1 Credential:1 RAInfo:1 Nonce:1}
2019/11/08 11:04:59 [DEBUG] Making server filenames absolute
2019/11/08 11:04:59 [DEBUG] Initializing default CA in directory /etc/hyperledger/fabric-ca-server
2019/11/08 11:04:59 [DEBUG] Init CA with home /etc/hyperledger/fabric-ca-server and config {Version:1.4.0-stable Cfg:{Identities:{PasswordAttempts:10 AllowRemove:false} Affiliations:{AllowRemove:false}} CA:{Name:ica.consigner.lynkit.io Keyfile:/etc/hyperledger/fabric-ca-server-config/ica.consigner.lynkit.io.key.pem Certfile:/etc/hyperledger/fabric-ca-server-config/ica.consigner.lynkit.io.crt.pem Chainfile:/etc/hyperledger/fabric-ca-server-config/chain.consigner.lynkit.io.crt.pem} Signing:0xc0001f6370 CSR:{CN: ica.consigner.lynkit.io Names:[{C:US ST:North Carolina L: O:Hyperledger OU:Fabric SerialNumber:}] Hosts:[0.0.0.0] KeyRequest:0xc000348780 CA:0xc000348820 SerialNumber:} Registry:{MaxEnrollments:-1 Identities:[{ Name:**** Pass:**** Type:client Affiliation: MaxEnrollments:0 Attrs:map[hf.Registrar.DelegateRoles:* hf.Revoker:1 hf.IntermediateCA:1 hf.GenCRL:1 hf.Registrar.Attributes:* hf.AffiliationMgr:1 hf.Registrar.Roles:*]  }]} Affiliations:map[consigner:[department1 department2]] LDAP:{ Enabled:false URL:ldap://****:****@<host>:<port>/<base> UserFilter:(uid=%s) GroupFilter:(memberUid=%s) Attribute:{[uid member] [{ }] map[groups:[{ }]]} TLS:{false [] { }}  } DB:{ Type:postgres ****user=**** password=**** dbname=fabriccaserver sslmode=verify-ca TLS:{true [[/tmp/postgresCerts/root.crt]] {/tmp/postgresCerts/server.key /tmp/postgresCerts/server.crt}}  } CSP:0xc000349ce0 Client:<nil> Intermediate:{ParentServer:{ URL: CAName:  } TLS:{Enabled:false CertFiles:[] Client:{KeyFile: CertFile:}} Enrollment:{ Name: Secret:**** CAName: AttrReqs:[] Profile: Label: CSR:<nil> Type:x509  }} CRL:{Expiry:24h0m0s} Idemix:{IssuerPublicKeyfile: IssuerSecretKeyfile: RevocationPublicKeyfile: RevocationPrivateKeyfile: RHPoolSize:100 NonceExpiration:15s NonceSweepInterval:15m}}
2019/11/08 11:04:59 [DEBUG] CA Home Directory: /etc/hyperledger/fabric-ca-server
2019/11/08 11:04:59 [DEBUG] Checking configuration file version '1.4.0-stable' against server version: '1.4.1'
2019/11/08 11:04:59 [DEBUG] Initializing BCCSP: &{ProviderName:SW SwOpts:0xc000041240 PluginOpts:<nil>}
2019/11/08 11:04:59 [DEBUG] Initializing BCCSP with software options &{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:0xc0001ae040 DummyKeystore:<nil> InmemKeystore:<nil>}
2019/11/08 11:04:59 [DEBUG] Initialize key material
2019/11/08 11:04:59 [DEBUG] Making CA filenames absolute
2019/11/08 11:04:59 [INFO] The CA key and certificate files already exist
2019/11/08 11:04:59 [INFO] Key file location: /etc/hyperledger/fabric-ca-server-config/ica.consigner.lynkit.io.key.pem
2019/11/08 11:04:59 [INFO] Certificate file location: /etc/hyperledger/fabric-ca-server-config/ica.consigner.lynkit.io.crt.pem
2019/11/08 11:04:59 [DEBUG] Validating the CA certificate and key
2019/11/08 11:04:59 [DEBUG] Check CA certificate for valid dates
2019/11/08 11:04:59 [DEBUG] Check CA certificate for valid usages
2019/11/08 11:04:59 [DEBUG] Check CA certificate for valid IsCA value
2019/11/08 11:04:59 [DEBUG] Check that key type is supported
2019/11/08 11:04:59 [DEBUG] Check that key size is of appropriate length
2019/11/08 11:04:59 [DEBUG] Check that public key and private key match
2019/11/08 11:04:59 [DEBUG] Validation of CA certificate and key successful
2019/11/08 11:04:59 [DEBUG] Loading CN from existing enrollment information
2019/11/08 11:04:59 [DEBUG] Initializing DB
2019/11/08 11:04:59 [DEBUG] Initializing 'postgres' database at 'host=db-postgres port=5432 user=**** password=**** dbname=fabriccaserver sslmode=verify-ca'
2019/11/08 11:04:59 [DEBUG] Using postgres database, connecting to database...
2019/11/08 11:04:59 [DEBUG] Database Name: fabriccaserver
2019/11/08 11:04:59 [DEBUG] Connecting to PostgreSQL server, using connection string: host=db-postgres port=5432 user=**** password=**** dbname=fabriccaserver sslmode=verify-ca sslrootcert=/tmp/postgresCerts/root.crt sslcert=/tmp/postgresCerts/server.crt sslkey=/tmp/postgresCerts/server.key
2019/11/08 11:04:59 [WARNING] Failed to connect to database 'fabriccaserver'
2019/11/08 11:04:59 [DEBUG] Connecting to PostgreSQL server, using connection string: host=db-postgres port=5432 user=**** password=**** dbname=postgres sslmode=verify-ca sslrootcert=/tmp/postgresCerts/root.crt sslcert=/tmp/postgresCerts/server.crt sslkey=/tmp/postgresCerts/server.key
2019/11/08 11:04:59 [WARNING] Failed to connect to database 'postgres'
2019/11/08 11:04:59 [DEBUG] Connecting to PostgreSQL server, using connection string: host=db-postgres port=5432 user=**** password=**** dbname=template1 sslmode=verify-ca sslrootcert=/tmp/postgresCerts/root.crt sslcert=/tmp/postgresCerts/server.crt sslkey=/tmp/postgresCerts/server.key
2019/11/08 11:04:59 [WARNING] Failed to connect to database 'template1'
2019/11/08 11:04:59 [ERROR] Error occurred initializing database: Failed to connect to Postgres database. Postgres requires connecting to a specific database, the following databases were tried: [fabriccaserver postgres template1]. Please create one of these database before continuing
2019/11/08 11:04:59 [DEBUG] Initializing enrollment signer
2019/11/08 11:04:59 [DEBUG] validating configuration
2019/11/08 11:04:59 [DEBUG] validate local profile
2019/11/08 11:04:59 [DEBUG] profile is valid
2019/11/08 11:04:59 [DEBUG] validate local profile
2019/11/08 11:04:59 [DEBUG] profile is valid
2019/11/08 11:04:59 [DEBUG] validate local profile
2019/11/08 11:04:59 [DEBUG] profile is valid
2019/11/08 11:04:59 [DEBUG] CA initialization successful
2019/11/08 11:04:59 [DEBUG] Initializing Idemix issuer...
2019/11/08 11:04:59 [DEBUG] Returning without initializing Idemix issuer for CA 'ica.consigner.lynkit.io' as the database is not initialized
2019/11/08 11:04:59 [INFO] Home directory for default CA: /etc/hyperledger/fabric-ca-server
2019/11/08 11:04:59 [DEBUG] 1 CA instance(s) running on server
2019/11/08 11:04:59 [INFO] Operation Server Listening on 127.0.0.1:8443
2019/11/08 11:04:59 [DEBUG] TLS is enabled
2019/11/08 11:04:59 [DEBUG] Client authentication type requested: NoClientCert
2019/11/08 11:04:59 [INFO] Listening on https://0.0.0.0:7054

{code}
",,adarshaJha,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,ghx-label-12,,certificate-verify failed,To Do,No,,Unset,No,,,"1|i0146j:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),adarshaJha,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update go to 1.13.4,FABC-888,43312,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,14/Nov/19 4:12 AM,13/Jan/20 1:28 PM,28/Oct/23 2:21 AM,13/Jan/20 1:28 PM,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014kj:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Missing v1.4.4 bins in nexus,FABC-889,43445,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,dsanchezseco,dsanchezseco,25/Nov/19 7:02 PM,13/Jan/20 1:28 PM,28/Oct/23 2:21 AM,13/Jan/20 1:28 PM,v1.4.4,,,,,,,,,fabric-ca-client,,,0,,,,,,"The fabric-ca-client binaries are missing in nexus to be downloaded for any of the architectures.

https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric-ca/hyperledger-fabric-ca/",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0159f:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Jan/20 1:28 PM;btl5037;Nexus will be retired any day now, release binaries can now be found on GitHub:

[https://github.com/hyperledger/fabric-ca/releases]

non-release artifactory will be moved to [https://hyperledger.jfrog.io|https://hyperledger.jfrog.io/] ;;;",,,,,,,,,,,,,,,,,,,
swagger.json is not consistent with actual API responses,FABC-890,43612,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,shimos,shimos,shimos,06/Dec/19 4:11 AM,27/Dec/19 9:33 PM,28/Oct/23 2:21 AM,27/Dec/19 9:33 PM,v1.4.4,v2.0.0,,,,,v1.4.5,v2.0.0,,fabric-ca-server,,,0,Documentation,,,,,"All APIs in fabric-ca are using “serverEndpoint” and it composes responses for the APIs.

According to serverEndpoint.ServerHTTP function, responses have the format like:
{code}
{“result”:…, “errors”:[],”messages”:[],”success”:true}
{code}

However, swagger-fabric-ca.json defines the schema for the responses as having members with names starting with capital letters.

For example,
{code}
       ""responses"": {
          ""200"": {
…
            ""schema"": {
              ""type"": ""object"",
              ""properties"": {
                ""Success"": {
                  ""type"": ""boolean"",
                  ""description"": ""Boolean indicating if the request was successful.""
                },
                ""Result"": {
                  ""$ref"": ""#/definitions/affiliationResponse""
                },
                ""Errors"": {
                  ""type"": ""array"",
…
                  }
                },
                ""Messages"": {
                  ""type"": ""array"",
…
                }
              },
              ""required"": [
                ""Success"",
                ""Result"",
                ""Errors"",
                ""Messages""
              ]
            }
          }
        }
{code}
",,mastersingh24,shimos,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,5c9880ea4c0b40b65c9ae9b5191e4026f2199ae2,Unset,No,,,"1|i015vn:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,shimos,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Dec/19 10:20 PM;mastersingh24;[https://github.com/hyperledger/fabric-ca/pull/77]   (master);;;",,,,,,,,,,,,,,,,,,,
"Users id index doesn't exists on postgres db, causing register and modify bottlenecks",FABC-891,43780,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Highest,Done,,james.han,james.han,20/Dec/19 4:43 PM,02/Mar/20 1:52 PM,28/Oct/23 2:21 AM,14/Jan/20 11:27 PM,v1.4.3,v1.4.4,,,,,v1.4.5,,,fabric-ca-server,,,0,,,,,,"Our group have tested on AWS aurora r5.4xlarge and got only 100 registers per second on a c5.12xlarge ec2 instance.

However, even though the CPU utilization for both database and instance was below 30% we were getting more than 10-sec delays for register and modify for 100 requests per second.

So we thought there was a bottleneck somewhere. We found that the select * from users where id = ? was taking more than 700ms. There we asked ourselves, is there no index in users table?

There it was. In hyperledger/fabric-ca repository, lib/server/db/postgres/postgres.go, no primary key or index was in the users table compared to the MySQL version which explicitly had a primary key in id.

We created a pull request on Github that creates a primary key on id and an index if there isn't one.",,james.han,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-801,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016qz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),james.han,manish-sethi,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Jan/20 5:47 AM;manish-sethi;PR for master - [https://github.com/hyperledger/fabric-ca/pull/81]

[~sykesm] - can you update the fix-versions fields to indicate whether you want back port this to 1.4.x;;;",,,,,,,,,,,,,,,,,,,
Fabric-CA is not able to recognize BCCSP PKCS11 environment variables,FABC-892,43800,,Bug,In CR Review,FABC,Fabric CA,software,denyeart,,,Low,,caduellery,caduellery,caduellery,26/Dec/19 10:03 PM,01/Jun/20 10:18 PM,28/Oct/23 2:21 AM,,,,,,,,,,,fabric-ca-client,fabric-ca-server,,1,bccsp,fabric-ca,ipm,,,"Trying to initiate Fabric CA Server with the following environment variables, as mentioned in [documentation|https://hyperledger-fabric-ca.readthedocs.io/en/release-1.4/users-guide.html#configuring-an-hsm], gives the subsequent error:

 
{code:java}
FABRIC_CA_SERVER_BCCSP_DEFAULT=PKCS11 FABRIC_CA_SERVER_BCCSP_PKCS11_LIBRARY=/usr/local/lib/softhsm/libsofthsm2.so FABRIC_CA_SERVER_BCCSP_PKCS11_PIN=98765432 FABRIC_CA_SERVER_BCCSP_PKCS11_LABEL=""ForFabric"" fabric-ca-server init -b admin:adminpw

[INFO] Created default configuration file at /home/user/hlf/fabric-ca-server-config.yaml
[INFO] Server Version: 1.4.4
[INFO] Server Levels: &{Identity:2 Affiliation:1 Certificate:1 Credential:1 RAInfo:1 Nonce:1}
[FATAL] Initialization failure: Failed to initialize BCCSP Factories: %!s(<nil>)
Could not find default `PKCS11` BCCSP
{code}
If I populate the fabric-ca-server-config.yaml with the pkcs11 section bellow bccsp, Fabric CA does initiate. So, it seems to be a bug similar to FAB-9595, but in the Fabric CA scope. Adding an empty section for pkcs11 in the generated default config file solves the problem.

 

 ",,ahmedsajid,caduellery,seyday,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-9595,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zs1rw",,,,Unset,Unset,,,,,,,,,,,,,,Unset,,,,,,Unset,,Unset,,(Please add usage information),ahmedsajid,caduellery,seyday,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Jun/20 10:18 PM;tsharris;[https://github.com/hyperledger/fabric-ca/pull/83];;;",,,,,,,,,,,,,,,,,,,
Hyperledger Fabric CA releasing wrong certificates (wrong issuer) to Node SDK when TLS enabled,FABC-893,43747,,Bug,Unverified,FABC,Fabric CA,software,denyeart,,,High,,,RicNtt,RicNtt,17/Dec/19 11:15 PM,20/Oct/20 6:44 AM,28/Oct/23 2:21 AM,,v1.4.3,,,,,,,,,fabric-ca-server,,,0,external,ipm,,,,"I want to scale my network from 1 to 3 orderers and by doing so I need to enable Raft, which requires TLS enabled.
 I did it and everything work correctly, orderers correctly elect leaders and followers, cli uses TLS to interact with the network, and so on and so forth. I also queried the chaincode with the cli.
 I have not enabled clientAuth because I am not interested in having mutual TLS, for me is just fine to have 3 orderers talking each other, I just want to make queries now and I can do it from the cli, but not working from the Node SDK.

When I simply connect the SDK with:

 
{code:java}
gateway = new Gateway();
 await gateway.connect(ccp, { wallet, identity: 'user1', discovery: { enabled: false }});
 const network = await gateway.getNetwork(channelName);
 contract = network.getContract('traceability');{code}
 

What I get is:
{code:java}
Error: Failed to discover local peers ::Error: Failed to connect before the deadline URL:grpcs://localhost:7051
{code}
 

 

So I had a look inside peer1, which I am trying to connect, and the error is:
{code:java}
2019-12-17 13:44:53.465 UTC [core.comm] ServerHandshake -> ERRO 0bd TLS handshake failed with error EOF server=PeerServer remoteaddress=172.23.0.1:36174
{code}
After several tentatives, I could not solve but I found something very strange in certificates, which makes me think that they are not generated correctly.
 If I inspect certificates generated in my first network, I decode it and I get this:
{code:java}
----BEGIN CERTIFICATE---MIICjzCCAjWgAwIBAgIUbEu5crMvBdY73wBFhOI/3uSi5gIwCgYIKoZIzj0EAwIwczELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xGTAXBgNVBAoTEG9yZzEuZXhhbXBsZS5jb20xHDAaBgNVBAMTE2NhLm9yZzEuZXhhbXBsZS5jb20wHhcNMTkwNzE5MDgzODAwWhcNMjAwNzE4MDg0MzAwWjBCMTAwDQYDVQQLEwZjbGllbnQwCwYDVQQLEwRvcmcxMBIGA1UECxMLZGVwYXJ0bWVudDExDjAMBgNVBAMTBXVzZXIxMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEM25kseg3ybw0/F2dbwJznq3SKXQ2LRpiHnIGBDhiYVBpV2bgpzPfw1XbD5U+Ea4xwKLFJgoRFSjZWRaEe1vazaOB1zCB1DAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAdBgNVHQ4EFgQUzFVc46aR76s9R9fWIXlbKwrHf9gwKwYDVR0jBCQwIoAgdjzlEttw+/yR/81K0B0HTToBKuJIikLbsaR6nOiJXegwaAYIKgMEBQYHCAEEXHsiYXR0cnMiOnsiaGYuQWZmaWxpYXRpb24iOiJvcmcxLmRlcGFydG1lbnQxIiwiaGYuRW5yb2xsbWVudElEIjoidXNlcjEiLCJoZi5UeXBlIjoiY2xpZW50In19MAoGCCqGSM49BAMCA0gAMEUCIQCEsV9tzuGPybSaOPqZKWD5jxZIHCEiTmSUHxdmB1wXBgIgOg5j9/BbVLR0oPkwndB+8aL94CDk6KpCHwxyF/c042c=---END CERTIFICATE----

Common Name: user1
 Organization Unit: client
 Valid From: July 19, 2019
 Valid To: July 18, 2020
 Issuer: ca.org1.example.com, org1.example.com
{code}
So, as you can see from here, everything seems fine with this certificate, and let me remember that this is generated with the first network with TLS not enabled.

If I now inspect the certificate generated in my network with TLS, I get this:
{code:java}
----BEGIN CERTIFICATE---MIICXTCCAgSgAwIBAgIUazdK1QSe9HcoSmMJbrisPZwoCXEwCgYIKoZIzj0EAwIwfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xHzAdBgNVBAoTFkludGVybmV0IFdpZGdldHMsIEluYy4xDDAKBgNVBAsTA1dXVzEUMBIGA1UEAxMLZXhhbXBsZS5jb20wHhcNMTkxMjE3MTEwODAwWhcNMjAxMjE2MTExMzAwWjAhMQ8wDQYDVQQLEwZjbGllbnQxDjAMBgNVBAMTBXVzZXIxMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEeb/0Rt9MW4yJF6/Vcai0hWf8Feeo/QJP9jUbUH00bs0nWNjN42M6v3BpWpUuK2v/8vQ9jyklGxqSejIWnF3OFaOBuzCBuDAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAdBgNVHQ4EFgQUNs4wu9T0QTxt16CT0NIawbZyOWgwHwYDVR0jBBgwFoAUF2dCPaqegj/ExR2fW8OZ0bWcSBAwWAYIKgMEBQYHCAEETHsiYXR0cnMiOnsiaGYuQWZmaWxpYXRpb24iOiIiLCJoZi5FbnJvbGxtZW50SUQiOiJ1c2VyMSIsImhmLlR5cGUiOiJjbGllbnQifX0wCgYIKoZIzj0EAwIDRwAwRAIgTATSxbQ2VSuNbFbT6k+e01xH/BnbtJTD0YojDHwU0EQCIGLfhELq6h0jbWi2J0dQKtGViI6BF/XgC2ooP2XRgf61---END CERTIFICATE----
Common Name: user1
 Organization Unit: client
 Valid From: December 17, 2019
 Valid To: December 16, 2020
 Issuer: example.com, Internet Widgets, Inc.
{code}
You will agree this looks strange.
 My ca has been contacted, in the logs it says **enroll 200 OK** for both admin and user, but it seems that the issuer is quite different, and it is not my ca.
 It is like with TLS enabled, the Node SDK is generating default certificates so that I cannot contact my peers because I am not authenticated by TLS.

How can this be solved?",,bestbeforetoday,heatherp,RicNtt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zs001y",,,,Unset,Unset,,,,,,,,,,,,,,Unset,,,,,,Unset,,Unset,,(Please add usage information),bestbeforetoday,heatherp,RicNtt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jan/20 1:46 AM;bestbeforetoday;The Node SDK does not generate certificates, it simply retrieves them from the Certificate Authority. How are you driving creating of identities in the CA?;;;","15/Jan/20 1:05 AM;heatherp;As reviewed with the maintainers, we think this is an issue with the ca, so I'm migrating over;;;",,,,,,,,,,,,,,,,,,
Add Doc Maintainers to Fabric CA repo and add a Doc tag to tags list,FABC-895,44304,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,cmgabriel,cmgabriel,10/Feb/20 12:05 AM,05/Mar/20 11:10 AM,28/Oct/23 2:21 AM,05/Mar/20 11:10 AM,,,,,,,,,,,,,0,,,,,,Doc maintainers need to be able to update Fabric CA docs in the same manner in which they maintain the Fabric docs.,,btl5037,cmgabriel,joe-alewine,odowdaibm,pandrejko,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0191f:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,cmgabriel,joe-alewine,odowdaibm,pandrejko,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Feb/20 11:31 PM;ryjones;I added the tags. Once this file is updated: https://github.com/hyperledger/fabric-ca/blob/master/MAINTAINERS.md work with [~btl5037] to set up automation, permissions, etc.;;;","11/Feb/20 11:45 PM;btl5037;Thanks Ry.

I'll update all of these [~cmgabriel] and get this setup. I want to make sure we get it all in one go this time around, last time we missed a few things and cleanup took a bit;;;","11/Feb/20 11:50 PM;cmgabriel;Thanks Ry.

Thanks Brett, let me or Joe A. or Pam A. know if you need anything from us.

  ;;;",,,,,,,,,,,,,,,,,
Update Go to 1.13.8,FABC-896,44403,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,btl5037,btl5037,25/Feb/20 5:49 AM,05/Mar/20 11:09 AM,28/Oct/23 2:21 AM,05/Mar/20 11:09 AM,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019gj:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
cn is always admin when enroll a new id,FABC-897,44440,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Invalid: Works as Expected,caod,tongliofcary,tongliofcary,27/Feb/20 12:33 PM,29/May/20 1:14 AM,28/Oct/23 2:21 AM,29/May/20 1:14 AM,v1.4.1,v1.4.2,v1.4.3,v1.4.4,v1.4.5,v1.4.6,,,,fabric-ca-server,,,0,ipm,,,,,"When run fabric-ca-client to enroll a new id, regardless what value --csr.cn is, the generated cert always shows CN to be admin.",,caod,denyeart,skarim,tongliofcary,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzzu",,,,Unset,Unset,,,,,,,,,,,,"Setup a fabric-ca server, then run a command like this to enroll an id.

./fabric-ca-client enroll --id.name tongli -u https://admin:adminpw@ca1.org1.example.com:7054 --tls.certfiles $(pwd)/ca1org1.pem -M tongli --csr.cn ""tongli"" --id.type peer

request finishes successfully and both private key and signkey got created.

Then use the following command to decode the sign cert.

openssl x509 -text -noout -in tongli/signcerts/cert.pem

The subject from the output will be like this.
 Subject: C = US, ST = North Carolina, O = Hyperledger, OU = client, CN = admin

Expected results should be that the CN set to be whatever passed into the command.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,denyeart,skarim,tongliofcary,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Mar/20 1:43 PM;denyeart;[~sykesm] Who can assess CA bugs these days?;;;","19/Mar/20 10:19 PM;tongliofcary;when I open this bug, ca 1.4.6 did not exist so that I could not try on. With 1.4.6 now released, I suspect it has the same issue.;;;","28/May/20 12:37 AM;caod;It seems that when we gen the CSR we use the request name (ie the user passed in the URL) as opposed to the client config's csr.cn [https://github.com/hyperledger/fabric-ca/blob/master/lib/client.go#L268]

Seems like this must match the enrollment ID ([https://github.com/hyperledger/fabric-ca/blob/master/lib/serverenroll.go#L186-L187]) when the server handles the request which is always set to the username ([https://github.com/hyperledger/fabric-ca/blob/master/lib/serverrequestcontext.go#L132]). If I change the above line in the client to pass the client config's CN, the server ends up failing because the CN of the request no longer matches the username. Not sure what the expected behavior should be here around the CN.;;;","28/May/20 5:43 AM;skarim;The usage is incorrect, during enrollment the 'cn' comes from your enrollment id. In this case, specifying a name using '--id.name tongli' but then using `[https://admin:adminpw@ca1.org1.example.com:7054|https://admin:adminpw@ca1.org1.example.com:7054/]` the credentials of admin to enroll will not result in cn being set to `tongli`.

If one wants to have a cn of `tongli`, that identity needs to be registered first with the name `tongli` and then enrolling it with something like `[https://tongli:|https://tongli/]<password>@ca1.org1.example.com:7054` will result in the cn getting set to tongli.

This looks to be working as designed.;;;","29/May/20 1:14 AM;caod;Closing per [~skarim]'s comment. Please feel free to reopen or leave any additional questions regarding the matter if you have any.;;;",,,,,,,,,,,,,,,
Customer assertion - Fabric CA is not required not a blockchain network - OpenSSL will do!,FABC-898,44451,,Documentation,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,pvrbharg,pvrbharg,28/Feb/20 7:29 AM,24/Mar/20 9:41 AM,28/Oct/23 2:21 AM,,v1.4.4,,,,,,,,,,,,0,,,,,,"These questions are coming from a context of a current customer engagement and is related to Hyperledger Fabric CA. By extension these questions are also applicable and relevant to IBP CA. 
 The specific questions are:0)  Is Fabric CA server “required” or “optional” – for running a successful, thriving and well architected permissioned  blockchain network?
 A)  A customer or customer blockchain professional declares – “Fabric CA is not approved to operate in our enterprise and we want to implement a successful Hyperledger Fabric Permissioned Blockchain solution”
           B)    Can Fabric CA server be entirely removed from a HLF blockchain network and run the network with OpenSSL/or some  other CA provisioned PKI only? Statically and out-of-band                   Stating alternatively – no active CA in the network at all – ever [hence no storage connected with Fabric CA server instance]                             All activities are done by scripts and shared out-of-band                                      Network changes are zero and certificates never expire [no addition of peers or member orgs or their permissions or extended attributes or affiliations or promotions or demotions, no API wrap]                                                However network comes up on day 1 – remains same on day it gets to sunset [commissioned out]Customer does not need or intend to use anything that Fabric CA offers – over and above PKI provisioning [no liveness, no active live certificate life cycle management, no enroll/register or reenroll of peer or orderer or application or client, no ABAC, no LDAP, no CID, no idmixer, no ZKP, no nothing – ZILSH]
 C)     What is HLF official guidance on the above?         Asking alternatively                   If a Fabric CA is not in the network and network is brought up statically PKI provisioned and bootstrapped [OpenSSL or some other CA provisioned]                             What parts of capabilities work? What can they enjoy nice and free without sweat?                             What parts of capabilities do not work? What would someone miss – that they have to add to on their own or with another COTS vendor product                             What parts of capabilities do not work online/live – but can be made to work out-of-band/non-online/batch mode?                             What was tested and supported officially?                             What was not tested and not supported officially?                             What parts of capabilities are pluggable and tested with other vendor CA products? Fabric CA tested to work with OpenLDAP or MS-AD on this release, version, etc.                             What parts of capabilities are pluggable and not tested with vendor CA products? Hence not in support scope                   Would HLF recommend this or not this as recommended approach? As a recommended best practice
 D)     Did HLF blockchain ever use anything other than Fabric CA? For any of basic or extensible capabilities? Did they work in field? Are they supported?
 E) Customers are also challenging on key size options – because the documentation says that these are customizable. We have not seen any indication  of anyone using anything other than 256 size. 
 Is there a suggestion or indication that all the key lengths are full supported and tested/regressed?
 [https://hyperledger-fabric-ca.readthedocs.io/en/release-1.4/users-guide.html#fabric-ca-server]

Where could we find answers to these questions in HLF documentation? V1.4.4 and v2.0.0 and vMaster?
 What are the implications from:
 Vulnerability/penetration testing point of view and also from auditing and compliance point of view?What are CSP responsibilities versus customers or service receivers?
 Thanks.",,pvrbharg,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019kz:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pvrbharg,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Feb/20 7:34 AM;pvrbharg;Please help answer the above set of questions - so customers can be better guided with official documentation behind.

I have my own personal opinion - a well formed, structured, constituted, evolving and thriving permissioned blockchain network can not be without a running, live Fabric CA server for application identities and SSL functioning at TLS layer. I also believe it is needed for dynamism and liveness - to dynamically reach to needs of network members. However this is my personal opinion.

 

Question is - what is Hyperledger Fabric stated, recommended wisdom? It needs to be documents and guided in a timely manner.

 

Thanks. 

 ;;;","29/Feb/20 5:20 AM;pvrbharg;What if we get to the next comment indicated below here [fictitious and I HAVE NOT HEARD THIS STATEMENT - I AM MAKING UP]:

Customers making statements - such as ""RAFT consensus or IBP consensus components are not allowed into our Enterprise by our Kafka/ZKP teams""
Some blockchain practitioners making statements such as - ""RAFT consensus or IBP consensus components are not required since documentation says - OpenRAFT can be used [OpenRAFT is my invention and there is no such thing...]""

If you remove live CA or live consensus nodes from network and explain that everything can be done in offline or non-live or out-of-band mode - then well - why do we need anything live?

One of the tenets of well architected and well setup Blockchain network is - bounded time consensus resolution and growing the blockchain block height - so the committed transactions gets more trusted to be not changeable/tamper-evident.

Again all my opinions and we need to document clearly what is minimal and non-negotiable network components.

Thanks.;;;",,,,,,,,,,,,,,,,,,
A table is missing in User's Guide 5.2 section,FABC-899,44469,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,,japidei,japidei,02/Mar/20 6:14 AM,05/Mar/20 11:07 AM,28/Oct/23 2:21 AM,05/Mar/20 11:07 AM,,,,,,,,,,fabric-docs,,,0,,,,,,"Last working version:

[https://github.com/hyperledger/fabric-ca/blob/e0218615fbd3a19dd7a041d97ab5aa95ff7af87a/docs/source/users-guide.rst#registering-a-new-identity]

 

Quick fix:

[https://github.com/japidei/fabric-ca/commit/0a836c27c732b212678325be55ffe91d6e6cd6cf]",,japidei,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Mar/20 6:12 AM;japidei;Captura de pantalla 2020-03-01 a las 22.11.39.png;https://jira.hyperledger.org/secure/attachment/18149/Captura+de+pantalla+2020-03-01+a+las+22.11.39.png",,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019nn:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),japidei,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Hyperleder Fabric CA – Reference Architecture Topology – Recommended/Suggested Deployment Topology,FABC-900,44470,,Epic,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,pvrbharg,pvrbharg,02/Mar/20 3:33 PM,02/Mar/20 3:33 PM,28/Oct/23 2:21 AM,,v2.0.0,,,,,,v2.0.0,,,fabric-docs,fabric-samples,,0,Enhancement,Feature,Proposal,,,"The attached document explains why this deployment topology should be recommended for the setting up of a Hyperledger Blockchain Permissioned Network that features Fabric CA custom root CA [can be equally used with Fabric CA working with an external BYOCA well known, commercial and public CAs or entirely with an external well known commercial and public CAs – that the proposer of this feature is unaware of at this time].

With few modifications to the existing docker compose file and some testing – the following topology could be realized with hopefully minimal incremental effort.

Alternatively – this following topology could be documented and published – with existing content left alone and adding a comment that the topology shown is optimized and notional to explain the concept.

[https://hyperledger-fabric-ca.readthedocs.io/en/latest/operations_guide.html]",,pvrbharg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Mar/20 3:30 PM;pvrbharg;DRAFT-Blockchain-Fabric-CA-ReferenceArchitecture_March012020-pvrbharg@gmail.com.docx;https://jira.hyperledger.org/secure/attachment/18150/DRAFT-Blockchain-Fabric-CA-ReferenceArchitecture_March012020-pvrbharg%40gmail.com.docx",,,,,,,,,,,,Suggested/Recommended Best Practice,Required,Unset,Required,ghx-label-7,,Hyperleder Fabric CA – Reference Architecture Topology – Recommended/Suggested Deployment Topology,To Do,No,,Required,No,,,"1|i019nv:",,,,No,Required,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,Suggested/Recommended Best Practice,pvrbharg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make Fabric CA Client consumable by other projects,FABC-901,44571,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,mrshah-ibm,mrshah-ibm,13/Mar/20 11:56 PM,14/May/20 12:07 AM,28/Oct/23 2:21 AM,,v1.4.6,,,,,,Unscheduled,,,fabric-ca-client,,,0,operator,,,,,"Currently we have heard arguments when trying to use (vendor) fabric-ca's client code in our other projects that the code is not meant to be used or vendored in other projects. Instead of all other projects duplicating the effort of writing fabric-ca-client, can we please update the client code to be able to get vendored in other projects?",,mrshah-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019yj:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mrshah-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
We should add the args in the sql query,FABC-902,44718,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,bjzhang03,bjzhang03,bjzhang03,01/Apr/20 3:04 PM,07/Mar/21 2:45 PM,28/Oct/23 2:21 AM,08/Apr/20 11:09 AM,,,,,,,v1.5.0,,,,,,0,,,,,,"When I use the fabric ca, found that if a user have an affiliation and it type is *, it can not list the identities, ans tell me the sql syntax error.

I found the reason and fixed it.",,bjzhang03,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Apr/20 3:13 PM;bjzhang03;微信截图_20200401141205.jpg;https://jira.hyperledger.org/secure/attachment/18205/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20200401141205.jpg",,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01aj7:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bjzhang03,ryjones,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Apr/20 7:28 PM;bjzhang03;[~mastersingh24];;;","01/Apr/20 7:32 PM;bjzhang03;[~sykesm];;;","01/Apr/20 7:34 PM;bjzhang03;[~ry.jones];;;","02/Apr/20 12:33 AM;ryjones;[Here is the change|https://github.com/hyperledger/fabric-ca/pull/118];;;",,,,,,,,,,,,,,,,
Add getfilteredUser unit test,FABC-903,44752,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,bjzhang03,bjzhang03,bjzhang03,08/Apr/20 11:12 AM,05/May/20 1:54 AM,28/Oct/23 2:21 AM,05/May/20 1:54 AM,,,,,,,,,,,,,0,,,,,,I add the unit test to cover the case of getFilteredUser and update the error msg,,bjzhang03,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01aqb:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bjzhang03,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Add fabric_version metric in Fabric CA,FABC-904,44773,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,caveman7,caveman7,10/Apr/20 4:23 PM,15/May/20 1:36 AM,28/Oct/23 2:21 AM,05/May/20 1:54 AM,,,,,,,v1.4.7,v2.0.0,,,,,0,operator,,,,,It will good to get fabric_version metric in Fabric CA so I can view it in Sysdig/Grafana dashboard,,caveman7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17897,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i01auj:",,,,No,Unset,,,,,,,,,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),caveman7,,,,,,,,,,,,,,,,,,,,,release-1.4,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Plaintext password in fabric-ca-server-config.yaml,FABC-905,44834,,Bug,In CR Review,FABC,Fabric CA,software,denyeart,,,High,,tsharris,thienbuinguyen,thienbuinguyen,17/Apr/20 5:07 PM,13/Jan/21 7:31 AM,28/Oct/23 2:21 AM,,v1.4.6,,,,,,,,,fabric-ca-server,,,0,fabric-ca,ipm,operator,,,"The `fabric-ca-server` currently constructs a `fabric-ca-server-config.yaml` file when initialised or started. This file stores the passwords of all initial identities (including the bootstrap admin identity when LDAP is disabled) in plaintext form.

This is bad practice as anyone with read access to these configuration files could potentially register and enroll arbitrary identities given the bootstrap identity credentials ([CWE 256|[https://www.cvedetails.com/cwe-details/256/Plaintext-Storage-of-a-Password.html]]). An alternative method should be used to store these passwords such as hashing or local shell variables.

Attached image shows an example of `fabric-ca-server-config.yaml` when bootstrapping the server with credentials ""admin:adminpw"" (i.e. `fabric-ca-server -b admin:adminpw`).

Suggested fix: 
We should allow the user to specify a password file to use, that way it can be written before launch or a k8s secret can be used.

* add a new option to the config called `pass_file`
* if set, the `pass_file` should take precedence over the existing `pass`. Read the contents as plaintext and use them in place of the existing password variable on the server.",,btl5037,silliman,thienbuinguyen,tsharris,weiyih,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Apr/20 5:01 PM;thienbuinguyen;config_file_pass_exposed.png;https://jira.hyperledger.org/secure/attachment/18220/config_file_pass_exposed.png",,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzohfprxfr",,,,Unset,Unset,,,,,,,,,,,,"1. Start a fabric server with a bootstrap user as normal in Docker or CLI: `fabric-ca-server -b admin:adminpw`
2. Read the generated `fabric-ca-server-config.yaml` file (e.g. path at FABRIC_CA_HOME for Docker)
3. Note that the bootstrapped credentials are exposed in plaintext",,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,silliman,thienbuinguyen,tsharris,weiyih,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/May/20 5:47 AM;btl5037;We've discussed this and do intend on doing something here to address it. Once we've prioritized it and worked out what the plan is we will update this Jira.;;;","09/Dec/20 4:09 AM;wlahti;Had a discussion with Matt Sykes on this one today. I'll update this item shortly.

edit: updated with a suggested fix;;;","12/Jan/21 10:03 PM;tsharris;[https://github.com/hyperledger/fabric-ca/pull/210] draft;;;",,,,,,,,,,,,,,,,,
Fabric CA Client: unroll and unregister user,FABC-906,44457,,Documentation,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,raulhsj,raulhsj,28/Feb/20 8:33 PM,19/Apr/20 12:44 PM,28/Oct/23 2:21 AM,,,,,,,,,,,fabric-ca-client,,,0,,,,,,"Hi all,

I am working in registering/enrolling an user in an atomic way, placing cryptography and secrets in a MongoDB but, I'd like to know, is there any way to do the contrary when something goes wrong? i.e. unregistering/unenrolling.

Best regards",,raulhsj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019lv:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),raulhsj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Upgrade release-1.4 to go1.13,FABC-907,44851,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,22/Apr/20 1:51 AM,05/May/20 1:53 AM,28/Oct/23 2:21 AM,05/May/20 1:53 AM,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b6j:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Bump Go to 1.14,FABC-908,44853,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,22/Apr/20 3:29 AM,05/May/20 1:53 AM,28/Oct/23 2:21 AM,05/May/20 1:53 AM,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b6z:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Fabric CA using Postgres isn’t able to run with a database user that doesn’t have the permission to create databases,FABC-909,44979,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,High,Done,btl5037,mirioeggmann,mirioeggmann,30/Apr/20 11:43 PM,07/Mar/21 2:04 AM,28/Oct/23 2:21 AM,12/Jan/21 2:42 AM,,,,,,,v1.5.0,,,fabric-ca-server,,,0,fabric-ca,ipm,,,,"In our staging environment at work we have to be able to run the Fabric CA using a pre-created Postgres database outside of our Kubernetes cluster. So the database user used by Fabric CA doesn’t have the permission to create databases on the Postgres server. Because of that the Fabric CA fails to run because there is a line of code that expects an error to be ‘database \""%s\"" already exists’ but the database gives back ‘permission denied to create database’. 

 

Now to be able to solve this problem there is a pretty easy but kind of dirty way to just adapt the if statement in the following line of code ([https://github.com/hyperledger/fabric-ca/blob/8d49c278c38624d1dbc01dcc7cd7367461341d7a/lib/server/db/postgres/postgres.go#L155)|https://github.com/hyperledger/fabric-ca/blob/8d49c278c38624d1dbc01dcc7cd7367461341d7a/lib/server/db/postgres/postgres.go#L155]:
{code:java}
if !strings.Contains(err.Error(), fmt.Sprintf(""database \""%s\"" already exists"", dbName))
{code}
To look like this:
{code:java}
if !strings.Contains(err.Error(), fmt.Sprintf(""database \""%s\"" already exists"", dbName)) && !strings.Contains(err.Error(), fmt.Sprintf(""permission denied to create database"")){code}
 

But it would probably be cleaner to add a flag to the 'fabric-ca-server start' command to completely opt-out the 'create database' part. 

 

What do you think about it? Is this a known issue or did we maybe do something wrong?

 

Cheers, Mirio",,btl5037,mirioeggmann,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zs001w",,,,Unset,Unset,,,,,,,,,,,,"- Create a Postgres database and add a user which has all permissions except the permission to create new databases.
- Use the pre-created database & user in the settings of the Fabric CA
- Start the Fabric CA",,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,mirioeggmann,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/May/20 9:12 AM;btl5037;Even the second solution is kind of dirty given the code structuring. The createDB and createTables interfaces are very tightly coupled, pulling them apart gets ugly quick because SQLite has no concept of creating a database.

I think the easier thing to do here would be to just check if the DB already exists prior to creating it.;;;","12/May/20 12:34 AM;btl5037;Since confirming the DB exists is different for each database type, the DB interface should be modified to add an Exists function, and then this function should be called as part of the DB flow prior to calling CreateDatabase;;;","15/May/20 5:01 PM;mirioeggmann;I tried to implement the points that you mentioned and created a pull request: [https://github.com/hyperledger/fabric-ca/pull/156];;;","12/Jan/21 2:42 AM;btl5037;https://github.com/hyperledger/fabric-ca/pull/208;;;",,,,,,,,,,,,,,,,
we should add the tag to indicate whether the user have been revoked,FABC-910,45003,,Task,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,bjzhang03,bjzhang03,bjzhang03,06/May/20 12:27 PM,06/May/20 12:27 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"when I use the identity,I found that I can not tell whether the identity is revoked,

so I want to add it.

I think it is import for user to known whether the user state

 ",,bjzhang03,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bp7:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bjzhang03,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failed to remove expired nonces from DB error,FABC-911,45118,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,wlahti,skarim,skarim,21/May/20 2:20 AM,07/Mar/21 3:54 AM,28/Oct/23 2:21 AM,29/Jul/20 9:38 PM,v1.4.6,,,,,,v1.4.8,v1.5.0,,fabric-ca-server,,,0,ipm,operator,,,,"{{}}
{code:java}
2020/03/16 10:35:23 [ERROR] Failed to remove expired nonces from DB for CA 'ca': sql: database is closed
2020/03/16 10:35:23 [ERROR] Failed to deleted expired nonces from DB for CA ca: Failed to remove expired nonces from DB
2020/03/16 10:35:28 [ERROR] Failed to remove expired nonces from DB for CA 'tlsca': sql: database is closed
2020/03/16 10:35:28 [ERROR] Failed to deleted expired nonces from DB for CA tlsca: Failed to remove expired nonces from DB{code}
{{}}

It seems calling down into the `Init` code is starting a go routine that continues to emit error message even after the initialization has completed successfully and exited. The process that is emitting the error message should be terminated once initialization has been completed.

This is probably a consequence of consuming CA when it is not written as a library, but either way a solution is needed to prevent these errors from filling up logs of consuming application.",,denyeart,robmurgai,skarim,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzodi",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,robmurgai,skarim,wlahti,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Jul/20 1:47 AM;wlahti;As the easiest start imaginable, I created a PR to remove the second log (""Failed to deleted..."") that duplicates the first only with zero context about why it failed: https://github.com/hyperledger/fabric-ca/pull/181;;;","24/Jul/20 3:55 AM;wlahti;I've updated the above PR to also move the StartNonceSweeper() call out of NewNonceManager() and instead call it externally while starting the server.;;;","24/Jul/20 9:37 AM;robmurgai;[~wlahti] does this impact V2.X as well, or just v1.4.X?;;;","24/Jul/20 11:50 AM;denyeart;[~robmurgai] Fabric-CA PRs go to master first for a potential v2.0 release in the future, and then get backported to v1.4.x.;;;","29/Jul/20 9:37 PM;wlahti;Merged into master and release-1.4. ;;;",,,,,,,,,,,,,,,
Remove sensitive information from CA debug - label & pin,FABC-912,45128,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,tsharris,dbshah,dbshah,22/May/20 10:41 PM,07/Mar/21 3:55 AM,28/Oct/23 2:21 AM,30/Jun/20 12:42 AM,v1.4.6,,,,,,v1.4.8,v1.5.0,,,,,0,ipm,operator,,,,"{{When running fabric-ca 1.4.6 with pkcs11 settings passed and debug set to true, the log prints out label and pin passed. This information can be critical and should be removed from the logs. Relevant log attached:}}
{code:java}
2020/05/22 01:57:25 [DEBUG] Initializing BCCSP with PKCS11 options &{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:0xc000b802d0 DummyKeystore:<nil> Library:/usr/local/lib/lib.so Label:label Pin:pin SoftVerify:false Immutable:false
{code}",,dbshah,denyeart,tsharris,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzof",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dbshah,denyeart,tsharris,wlahti,,,,,,,,,,,,,,,,,,release-1.4,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Jun/20 11:22 PM;wlahti;[~btl5037] elaborated in a chat: ""There are going to be quite a few places this occurs. The config struct is printed at start up containing the BCCSP config, and the Library/Pin/Label are printing when errors occur related to PKCS11 BCCSP, just an FYI."" ;;;","17/Jun/20 1:49 AM;tsharris;I'm not finding any non-pointer references in fabric-ca other than the initialization log but did find a few in fabric. ;;;","19/Jun/20 11:01 PM;tsharris;[https://github.com/hyperledger/fabric-ca/pull/174];;;","31/Jul/20 6:51 AM;denyeart;Merged into master and release-1.4.;;;",,,,,,,,,,,,,,,,
Set a primary key to users table for SQLite,FABC-913,45193,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,03/Jun/20 3:02 AM,07/Mar/21 4:00 AM,28/Oct/23 2:21 AM,15/Oct/20 6:04 PM,v1.4.7,v2.0.0,,,,,v1.5.0,,,fabric-ca-server,,,0,,,,,,"When using SQLite, duplicate registration of the same ID would occur depending on the timing. After that, the ID would not work.

 

The reproduction procedures with fabric-samples/test-network are shown below:
{code:bash}
$ cd fabric-samles/test-network
$ ./network.sh up -ca
$ export PATH=${PWD}/../bin:$PATH
$ export FABRIC_CA_CLIENT_HOME=${PWD}/organizations/peerOrganizations/org1.example.com/

# Enroll as a admin
$ fabric-ca-client enroll -u https://peer0:peer0pw@localhost:7054 --caname ca-org1 -M ${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp --csr.hosts peer0.org1.example.com --tls.certfiles ${PWD}/organizations/fabric-ca/org1/tls-cert.pem

# Issue 2 register requests to the same ID at about the same time
$ fabric-ca-client register --caname ca-org1 --id.name testuser --id.secret userpw --id.type client --tls.certfiles ${PWD}/organizations/fabric-ca/org1/tls-cert.pem & fabric-ca-client register --caname ca-org1 --id.name testuser --id.secret userpw --id.type client --tls.certfiles ${PWD}/organizations/fabric-ca/org1/tls-cert.pem
[1] 29986
2020/06/01 18:55:22 [INFO] Configuration file location: /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/fabric-ca-client-config.yaml
2020/06/01 18:55:22 [INFO] Configuration file location: /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/fabric-ca-client-config.yaml
2020/06/01 18:55:22 [INFO] TLS Enabled
2020/06/01 18:55:22 [INFO] TLS Enabled
2020/06/01 18:55:22 [INFO] TLS Enabled
2020/06/01 18:55:22 [INFO] TLS Enabled
Password: userpw
Password: userpw
[1]+  Done                    fabric-ca-client register --caname ca-org1 --id.name testuser --id.secret userpw --id.type client --tls.certfiles ${PWD}/organizations/fabric-ca/org1/tls-cert.pem

# Problem: duplicate registration of the same ID occurs (depending on the timing)
$ fabric-ca-client enroll -u https://testuser:userpw@localhost:7054 --caname ca-org1 --csr.hosts peer0.org1.example.com --tls.certfiles ${PWD}/organizations/fabric-ca/org1/tls-cert.pem
2020/06/02 00:47:49 [INFO] TLS Enabled
2020/06/02 00:47:49 [INFO] generating key: &{A:ecdsa S:256}
2020/06/02 00:47:49 [INFO] encoded CSR
Error: Response from server: Error Code: 0 - 2 rows were affected when updating the state of identity testuser
{code}
I have confirmed that it reproduces in both version 1.4.x and 2.x.

 

*Route cause analysis:*

This is probably because the users table does not have the primary key ‘ID’.
 [https://github.com/hyperledger/fabric-ca/blob/567b2c0f94abbe47ad39f2b306b0577b79d33e89/lib/server/db/sqlite/sqlite.go#L138]

The implementations for other RDBs (MySQL, PostgreSQL) set ID as the primary key in users table.
 (In the past, the MySQL implementation also had been the same problem (Link to FABC-801).)",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-801,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cpf:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,
Certificate expiration - Allow to issue new cert with existing private key,FABC-914,45251,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,wlahti,baohua,baohua,13/Jun/20 1:34 AM,07/Mar/21 3:53 AM,28/Oct/23 2:21 AM,18/Sep/20 5:39 AM,,,,,,,v1.4.9,v1.5.0,,,,,0,ipm,operator,,,,"Currently, when a certificate is expired, the only way to get a new cert is to use the reenroll API, however, fabric-ca-client will also generate a new private key to replace the existing one.

Need to provide additional param to allow issuing a new cert with given private key, in order to meet such type of requirement.",,baohua,btl5037,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-923,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzohfpra",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,btl5037,wlahti,,,,,,,,,,,,,,,,,,,release-1.4,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Sep/20 10:51 PM;btl5037;Steps to reproduce:
 * 1. Enroll using fabric-ca-client enroll
 2. Backup the msp folder
 3. Reenroll using fabric-ca-client reenroll
 4. Compare the private key in the msp folder with the backup
  ;;;","12/Sep/20 1:43 AM;wlahti;master branch PR: https://github.com/hyperledger/fabric-ca/pull/189;;;","15/Sep/20 2:49 AM;wlahti;release-1.4 branch PR: https://github.com/hyperledger/fabric-ca/pull/190;;;",,,,,,,,,,,,,,,,,
Error while restarting CA server docker container ,FABC-915,45608,,Epic,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,adarshaJha,adarshaJha,adarshaJha,15/Jul/20 12:05 PM,17/Jul/20 7:53 PM,28/Oct/23 2:21 AM,17/Jul/20 7:53 PM,,,,,,,,,,,,,0,,,,,,"Intermediate ca server docker container gets exited somehow so I have tried to restart the corresponding docker container but I'm not able to restart the service and these are the logs of the docker container:


{code:java}
Error: Validation of certificate and key failed: Invalid certificate and/or key in files '/tlsca/ca-cert.pem' and '/etc/hyperledger/fabric-ca-server-config/ica.abc.xyz.com.key.pem': Public key and private key do not match

{code}

Can someone please help me with this as to how to restart the service properly because I'm confused how the certificates gets changed while I'm just restarting the service  And please help me with this so that I can restart my service ??
",,adarshaJha,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,ghx-label-14,,Error: Validation of certificate and key failed: Invalid certificate and/or key in files,To Do,No,,Unset,No,,,"1|i01ejf:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),adarshaJha,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Jul/20 12:06 PM;adarshaJha;[~AdrianKyte] [~abhishekKumar1][~2016Nishi];;;","17/Jul/20 6:51 PM;adarshaJha;I had to delete the newly generated certificates as ca server generates new certs after restart.

It again referred to the previously generated ICA certs that I created using Root CA using openssl. as in my case I am using Root CA's cert which is generated using openssl to create certs for ICA for better security purpose and  have independent ICA's for every organization. 
;;;",,,,,,,,,,,,,,,,,,
"For Fabric CA, choose between PostgreSQL and MySQL",FABC-916,37827,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,,CoreyLin,CoreyLin,20/Feb/19 7:08 PM,23/Jul/20 5:26 PM,28/Oct/23 2:21 AM,20/Feb/19 8:57 PM,,,,,,,,,,,,,0,,,,,,"Hi Fabric experts:

From the Fabric CA's documentation, I know that Fabric CA can use either PostgreSQL or MySQL to store identities and certificates. All Hyperledger Fabric CA servers in a cluster share the same database for keeping track of identities and certificates.

But the documentation does not say which one is preferred or recommended.

Could you comment on this? Which one should I choose? Thanks.",,C0rWin,CoreyLin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00clj:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,CoreyLin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Feb/19 8:57 PM;C0rWin;This is not really a Task, Bug or Improvement, therefore I'd suggest to open it as a question on StackOverflow as it seems more appropriate platform for Q & A. Jira is more about issue planing and tracking, reporting bugs or feature requests.
;;;",,,,,,,,,,,,,,,,,,,
SQL query for removing expired nonces not correct,FABC-917,32057,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,skarim,skarim,skarim,19/Jul/18 10:58 PM,23/Jul/20 5:30 PM,28/Oct/23 2:21 AM,17/Aug/18 5:11 AM,,,,,,,,,,,,,0,,,,,,"Expired nonce related to the enrollment of Idemix credentials are periodically removed from the database at set intervals. However, the SQL statement is causing issues on PostgreSQL and MySQL. The following error is seen:


{code:java}
Failed to remove expired nonces from DB for CA '': Error 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '?)' 
{code}",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzj7r:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Jul/18 11:55 PM;skarim;https://gerrit.hyperledger.org/r/24577;;;",,,,,,,,,,,,,,,,,,,
Custom signing profiles does not work,FABC-919,45720,,Bug,Unverified,FABC,Fabric CA,software,denyeart,,,Medium,,,silveraid,silveraid,30/Jul/20 5:24 AM,30/Jul/20 5:24 AM,28/Oct/23 2:21 AM,,v1.4.6,,,,,,,,,fabric-ca-server,,,0,,,,,,"There seems to be an issue with how the signing profiles are implemented in fabric-ca-server. When custom signing profiles are defined they don't work, fabric-ca-server returns the following error message when in debug: 

 
{code:java}
2020/07/29 17:34:21 [DEBUG] Attribute extension being added to certificate is: &{ID:[1 2 3 4 5 6 7 8 1] Critical:false Value:7b226174747273223a7b2268662e416666696c696174696f6e223a224f7264657265724f7267222c2268662e456e726f6c6c6d656e744944223a226f7264657265725f6e6f64655f736b6962702d6465762d6e6f6465335f6465765f76657269666965645f6d65222c2268662e54797065223a226f726465726572227d7d} 2020/07/29 17:34:21 [DEBUG] Adding attribute extension to CSR: &{ID:[1 2 3 4 5 6 7 8 1] Critical:false Value:7b226174747273223a7b2268662e416666696c696174696f6e223a224f7264657265724f7267222c2268662e456e726f6c6c6d656e744944223a226f7264657265725f6e6f64655f736b6962702d6465762d6e6f6465335f6465765f76657269666965645f6d65222c2268662e54797065223a226f726465726572227d7d} 2020/07/29 17:34:21 [INFO] 172.16.16.1:33406 POST /enroll 500 0 ""Certificate signing failure: {""code"":1300,""message"":""Invalid certificate request""}""
{code}
 

I have traced back the issue to the *initSigningProfile* function call, which sets *sp.ExtensionWhitelist[attrmgr.AttrOIDString] = true*, but this function is not called for all signing profiles, unfortunately, so it never gets set.

*Workaround:*

Add the following parameter to the end of your signing profile configuration:

 
{code:java}
extensionwhitelist:
  - 1.2.3.4.5.6.7.8.1: true{code}
 ",,silveraid,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01f0j:",,,,Unset,Unset,,,,,,,,,,,,"Setup a fabric-ca-server and add some custom signing profiles, for example you want to issue tls client certificates:

tlsclient:
            usage:
              - signing
              - key encipherment
              - client auth
            expiry: 8760h

Try to enroll with this signing profile specified.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),silveraid,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
cdr is legacy command in README,FABC-920,45901,,Documentation,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,Specia1,Specia1,19/Aug/20 7:39 AM,22/Aug/20 11:34 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"[cdr|https://github.com/hyperledger/fabric-ca#contribution-guidelines] is legacy command in README. (https://github.com/hyperledger/fabric-ca/commit/855036cc9)

So, The readme file needs to changed as below.
`cd $GOPATH/src/github.com/hyperledger/fabric-ca`",,Specia1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01fp7:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Specia1,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Aug/20 11:08 PM;Specia1;[https://github.com/hyperledger/fabric-ca/pull/187];;;",,,,,,,,,,,,,,,,,,,
Fabric CA api to get CRLs,FABC-921,45823,,Bug,Returned,FABC,Fabric CA,software,denyeart,,,Medium,,,nileshdeotale,nileshdeotale,14/Aug/20 11:24 PM,20/Aug/20 11:26 PM,28/Oct/23 2:21 AM,,v1.4.6,,,,,,,,,fabric-ca-server,,,0,,,,,,"Looked up here [https://github.com/hyperledger/fabric-ca/blob/release-1.4/swagger/swagger-fabric-ca.json] to find an api to get list of revoked users/certificates but could not find one. If there's one already available, can you please provide details?

If not, can this be implemented in fabric-ca APIs please? 

 

Thanks!

 

 

 ",,mastersingh24,nileshdeotale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01fk3:",,,,Unset,Unset,,,,,,,,,,,,revoke user using fabric CA revoke API then try to query for CRL to confirm whether CRL is correct. Could not find an API for this purpose.,,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,nileshdeotale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Aug/20 9:06 PM;mastersingh24;[~nileshdeotale] - does [https://github.com/hyperledger/fabric-ca/blob/release-1.4/swagger/swagger-fabric-ca.json#L1227] not meet your needs?;;;","20/Aug/20 11:26 PM;nileshdeotale;[~mastersingh24] this should suffice for but not exactly for what I was looking for. My specific requirement is -  for an enroll id, query CA to get response like enroll id is  ""Active"", ""Revoked"", ""Does not exist"";;;",,,,,,,,,,,,,,,,,,
msp cacert name issue,FABC-922,45922,,Bug,Unverified,FABC,Fabric CA,software,denyeart,,,Medium,,,icarrascol,icarrascol,22/Aug/20 6:32 AM,22/Aug/20 6:32 AM,28/Oct/23 2:21 AM,,v1.4.7,,,,,,,,,,,,0,fabric-ca,fabric-ca-client,,,,"Hello everyone, i am using fabric ca to generate my network certs, ive encountered an issue i think related to the generation of the msp cacert of peers and orderers. The problem is that the name of this cert is generated by a combination of parameters that are: the url and port of the ca used and the ca name, but, if your hostname or ca name have dots in them they are automatically changed to dashes, i dont know if this behavior is intended but i couldnt find anything about this in the documentation.
Is it ok if i change the name of this cert to something else after it is created?

i think it would be better if this cert was generated automatically with another name, something set up before creation or anything more simple.",,icarrascol,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ftf:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),icarrascol,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric-CA client reenroll generates a new private key,FABC-923,46014,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Duplicate,,mrshah-ibm,mrshah-ibm,10/Sep/20 10:31 PM,10/Sep/20 11:25 PM,28/Oct/23 2:21 AM,10/Sep/20 10:50 PM,v1.4.8,,,,,,,,,fabric-ca-client,,,0,ipm,operator,,,,"fabric-ca-client reenroll is expected to renew the existing certificates. But, the command generates a new private key and thus generates a fresh set of crypto material.

 

Expected behavior: fabric-ca-clien reenroll renews the existing certificate using the existing private key.

 

Please let me know if the current behavior is as expected. Thanks in advance.",,mrshah-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-914,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzohfprs",,,,Unset,Unset,,,,,,,,,,,,"1. Enroll using fabric-ca-client enroll
2. Backup the msp folder
3. Reenroll using fabric-ca-client reenroll
4. Compare the private key in the msp folder with the backup",,Unset,,,,,,Unset,,Unset,,(Please add usage information),mrshah-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use of multivalued RDNs for OU forgets hierarchical organization structure,FABC-925,46260,,Bug,Unverified,FABC,Fabric CA,software,denyeart,,,Low,,,ueli,ueli,29/Oct/20 4:54 AM,29/Oct/20 4:56 AM,28/Oct/23 2:21 AM,,,,,,,,,,,fabric-ca-server,,,0,,,,,,"When running the asset-transfer-basic example from fabric-samples 2.2.1 with fabric-ca, the user 'appUser' receives a certificate with the following Subject DN:

{{ Subject: OU = client + OU = org1 + OU = department1, CN = appUser}}

This subject uses a multivalued RDN for the organizational units, so there is no order between the three OU entries (as RDNs are specified as SETs of attribute-type and value pairs).

I would have expected the Subject to be a sequence of RDNs:

{{ Subject: OU = client, OU = org1, OU = department1, CN = appUser}}

Looking at the tests in fabric-ca/lib/server_test.go, this seems to be the intention, but ""crypto/x509"" produces multi-valued OU-entries.

 

 ",,ueli,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01h0j:",,,,Unset,Unset,,,,,,,,,,,,"In a fabric-samples 2.2.1 installation (according to https://hyperledger-fabric.readthedocs.io/en/release-2.2/install.html ):

cd test-network
./network.sh up createChannel -ca
cd asset-transfer-basic/application-java
./gradlew run

Now, decoding the certificate in 'wallet/appUser.id' with 'openssl x509 -text -in <certificate from appUser.id>.pem' produces:

Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            51:e0:f6:ef:45:f8:27:37:a1:2b:fd:10:60:8a:4c:56:ec:e3:77:a8
        Signature Algorithm: ecdsa-with-SHA256
        Issuer: C = US, ST = North Carolina, L = Durham, O = org1.example.com, CN = ca.org1.example.com
        Validity
            Not Before: Oct 28 19:19:00 2020 GMT
            Not After : Oct 28 19:24:00 2021 GMT
        Subject: OU = client + OU = org1 + OU = department1, CN = appUser
        [...] ",,Unset,,,,,,Unset,,Unset,,(Please add usage information),ueli,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Concurrent Register users requests fails with CONNECTION Timeout,FABC-926,46297,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,brett.t.logan,Ratnakar,Ratnakar,07/Nov/20 5:53 AM,07/Nov/20 8:09 AM,28/Oct/23 2:21 AM,07/Nov/20 8:09 AM,,,,,,,,,,fabric-ca-server,,,0,,,,,,"*Pre-req:* Registered 3500 users

 

Two concurrent register User call requests fails with a *CONNECTION Timeout*, however the registration was successful and we could list the users as well.

Register calls were made using *fabric-ca-client@1.4.13* node module.

Code snippet used for reference:
{code:java}
    try {
        for(var i = 1; i <= USER_COUNT; i++) {
            const userId = 'user'+uuidv1();
            const secret = await ca.register({ enrollmentID: userId, role: 'client' }, adminIdentity);
            console.log(`\nSuccessfully registered user-${i}   : ${userId} and the secret is ${secret}`);            
        }
    } catch (error) {
        console.error(`Failed to register user : ${error}`);
        process.exit(1);
    }
{code}
Error messages when the two concurrent requests are made to CA
{noformat}
Failed to register user: Error: Calling register endpoint failed, CONNECTION Timeout{noformat}
 ",,btl5037,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01h4r:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Nov/20 8:09 AM;btl5037;Diagnosed as a timeout issue. Upping the `connection-timeout` config property solves this. Need to get with the SDK team and figure out what the best way to do this under the new programming model is.;;;",,,,,,,,,,,,,,,,,,,
SKI computation incompatibility between Fab-CA and Fab-SDK-Go,FABC-927,46480,,Bug,Unverified,FABC,Fabric CA,software,denyeart,,,Medium,,,smanolache,smanolache,12/Jan/21 6:53 PM,12/Jan/21 6:53 PM,28/Oct/23 2:21 AM,,,,,,,,,,,fabric-ca-server,,,0,,,,,,"Hello,

Actually I don't know if I should post this issue under Fab-CA or Fab-SDK-Go.

When I enroll a user from Fab-SDK-Go it creates a key and a CSR. The key is stored in the user store. Its filename is given by the SKI. The key is created by BCCSP which uses SHA256 to compute the SKI.

When Fab-CA creates the certificate it uses cloudflare (github.com/cloudflare/cfssl/signer/signer.go). Cloudflare however uses SHA1 to compute the SKI that it adds to the certificate.

When I want to reuse an already enrolled identity, Fab-SDK-Go finds the certificate, reads its SKI and looks up the corresponding key in the user store. The SKI found in the certificate is a SHA1 digest, as it comes from Fab-CA, but the user store contains a key whose filename is a SHA256 digest, as it comes from Fab-SDK-Go.

Finally I've decided to post this issue under Fab-CA and not Fab-SDK-Go because the latter uses the same BCCSP code as Fabric itself. So I suppose that SHA256 (Fabric; Fab-SDK-Go) will stay and SHA1 (Fab-CA/cloudflare) should go.",,smanolache,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01i0z:",,,,Unset,Unset,,,,,,,,,,,,"1. Enroll a user using Fab-SDK-Go.

2. Check that the key is created in the user store. It should have a filename of length 67 chars (64 hex chars + ""_sk"")

3. A certificate should have been created in the certstore. Check its SKI. It'll have 40 hex chars.
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),smanolache,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add documentation on how to import postgres storage plugin in the Dotnet project.,FABC-928,46508,,Task,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid,acuderman,acuderman,acuderman,23/Jan/21 6:58 PM,23/Jan/21 7:00 PM,28/Oct/23 2:21 AM,23/Jan/21 7:00 PM,,,,,,,,,,,,,0,,,,,,Add documentation on how to import postgres storage plugin in the Dotnet project.,,acuderman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01i5v:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),acuderman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Error when runing make command ,FABC-929,46544,,Story,Backlog,FABC,Fabric CA,software,denyeart,,,Medium,,,megh,megh,10/Feb/21 2:18 AM,10/Feb/21 7:22 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,Fabric,fabric-build,,,,"DEP: Checking for dependency issues..
./scripts/check_deps.sh
Files /home/lab/Desktop/fabric/go.sum and check_deps.sh-zPJGk/go.sum differ
It appears go.sum is stale. Please run 'go mod tidy' and 'go mod vendor'.
--- /home/lab/Desktop/fabric/go.sum 2021-02-10 10:00:54.812434223 +0000
+++ check_deps.sh-zPJGk/go.sum 2021-02-10 10:11:22.270694772 +0000",,megh,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,,,,No,,Unset,No,,,"1|i01icz:",,,,No,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),megh,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
common name field from CSR not being copied at newCertificateRequest ,FABC-930,46687,,Bug,Unverified,FABC,Fabric CA,software,denyeart,,,Medium,,vieiramanoel,vieiramanoel,vieiramanoel,30/Mar/21 12:51 AM,30/Mar/21 1:35 AM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"at fab-sdk-go
{{
bq.  msp.WithCSR(&msp.CSRInfo{CN: commonName})
}}
won't change the certificate common field as it's not being set at newCertificateRequest function.
due to the line

bq. 	cr := &csr.CertificateRequest{CN: id}

I suggest that we overwrite the common name field if it's set, in order to allow to the user the control of this field",,vieiramanoel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABG-1037,,,,,,,FABG-1037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01j8r:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),vieiramanoel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Re-enroll with existing key even if certificate is expired,FABC-931,46956,,Story,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Done,calanais,denyeart,denyeart,18/Jun/21 2:37 PM,26/Jul/21 10:43 PM,28/Oct/23 2:21 AM,26/Jul/21 10:43 PM,,,,,,,v1.5.1,,,,,,0,External,,,,,"With Fabric CA client it is possible to reenroll to get a new certificate with updated expiration. As of Fabric CA v1.4.9 it is possible to reenroll with the existing private/public key pair when passing --csr.keyrequest.reusekey. This is advantageous especially for TLS certs since it means an orderer identity can get a certificate with updated expiration without the channel configuration needing to be updated (as of Fabric v1.4.9 and v2.2.1 when TLS certs are verified between channel members only the key is checked, not the entire certificate).

However, if the certificate is already expired, Fabric CA currently returns an error and does not allow the identity to reenroll to receive a new cert.  If the identity is not revoked but only has an expired certificate, they should still be allowed to receive a new certificate.

This story will add a yaml config option to allow Fabric CA to reenroll with same key even if the identity's certificate has expired.

Example of the issue when using an identity that has an expired certificate:
{code:java}
fabric-ca-client reenroll -u https://user1:user1pw@localhost:7054 --caname ca-org1 -M ""${PWD}/organizations/peerOrganizations/org1.example.com/users/User1@org1.example.com/msp"" --tls.certfiles ""${PWD}/organizations/fabric-ca/org1/tls-cert.pem"" --csr.keyrequest.reusekey{code}
Fabric CA client receives error:
{code:java}
Error: Failed to reenroll 'user1': Response from server: Error Code: 20 - Authentication failure{code}
Fabric CA server log INFO statement:
{code:java}
2021/06/17 22:27:24 [INFO] 172.25.0.1:35980 POST /reenroll 401 26 ""Untrusted certificate: Failed to verify certificate: x509: certificate has expired or is not yet valid: current time 2021-06-17T22:27:24Z is after 2021-06-17T22:27:00Z""{code}
 

Notes -
 * You can set expiration time (e.g. 1 minute instead of 1 year) by overriding yaml config with FABRIC_CA_SERVER_SIGNING_DEFAULT_EXPIRY=1m.
 * For full set of config options see [https://hyperledger-fabric-ca.readthedocs.io/en/main/serverconfig.html]
 * The example used a client MSP identity and signing expiry, but orderer TLS certificate works the same way.
 * The original register/enroll commands can be found in test-network,e.g. [https://github.com/hyperledger/fabric-samples/blob/main/test-network/organizations/fabric-ca/registerEnroll.sh#L70]
 * There is not yet a release branch for release-1.5... v1.5.x releases are cut from the main branch.

 

 ",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01kaj:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
migrate from Common Name (CN) to Subject Alternative Name (SAN),FABC-932,47114,,Bug,Closed,FABC,Fabric CA,software,denyeart,,,Medium,Invalid: Works as Expected,,davidkhala,davidkhala,04/Aug/21 1:30 AM,17/Aug/21 11:34 AM,28/Oct/23 2:21 AM,17/Aug/21 11:34 AM,,,,,,,,,,,,,0,,,,,,"We generate tls client/server cert from Fabric CA for orderer and see the following warning error:


{code:java}
2021-08-03 16:13:00.493 UTC [comm.tls] ClientHandshake -> ERRO 321 Client TLS handshake failed after 562.088µs with error: x509: certificate relies on legacy Common Name field, use SANs or temporarily enable Common Name matching with GODEBUG=x509ignoreCN=0 remoteaddress=172.21.0.6:7050
{code}

After research, we also see a post discussion about this deprecation in https://frasertweedale.github.io/blog-redhat/posts/2017-07-11-cn-deprecation.html",,davidkhala,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ksj:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),davidkhala,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Aug/21 11:34 AM;denyeart;In the enroll step, you need to use the --csr.hosts flag to pass SAN entries. See the example with csr.hosts in the doc:

[https://hyperledger-fabric-ca.readthedocs.io/en/release-1.4/deployguide/cadeploy.html]

I'll go ahead and close, but please re-open with more details if you think something needs to change.;;;",,,,,,,,,,,,,,,,,,,
enroll: x509: certificate signed by unknown authority,FABC-933,47124,,Bug,Unverified,FABC,Fabric CA,software,denyeart,,,Medium,,,yanshu,yanshu,20/Aug/21 7:18 PM,18/Aug/22 4:38 PM,28/Oct/23 2:21 AM,,,,,,,,,,,,,,0,,,,,,"When I according to the official tutorial ""https://hyperledger-fabric-ca.readthedocs.io/en/latest/deployguide/ca-deploy.html"" to create a certificate, enrolled peer1 appeared the following questions：

 

Error: POST failure of request: POST https://0.0.0.0:7052/enroll
{""hosts"":[""peer1-org1""],""certificate_request"":""-----BEGIN CERTIFICATE REQUEST-----\nMIIBRDCB7AIBADBiMQswCQYDVQQGEwJVUzEXMBUGA1UECBMOTm9ydGggQ2Fyb2xp\nbmExFDASBgNVBAoTC0h5cGVybGVkZ2VyMQ8wDQYDVQQLEwZGYWJyaWMxEzARBgNV\nBAMTCnBlZXIxLW9yZzEwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAATZY43qkao6\nXfHB7P/HM5UHEGbmmvtc3EYIssYnDnR/GW8Fqk6FRC23Ac2nYPJAR2Wz1QnES2mL\n1j5Mxlb0d/64oCgwJgYJKoZIhvcNAQkOMRkwFzAVBgNVHREEDjAMggpwZWVyMS1v\ncmcxMAoGCCqGSM49BAMCA0cAMEQCIBhDIg5R609lKomx4h/Kp2vttW+ayF9q3IBw\nCTqeZ2FKAiAu45ScLiiGuX5/c0TxQhj7ntyk4TkAEaDtY7xwZbx0Iw==\n-----END CERTIFICATE REQUEST-----\n"",""profile"":""tls"",""crl_override"":"""",""label"":"""",""NotBefore"":""0001-01-01T00:00:00Z"",""NotAfter"":""0001-01-01T00:00:00Z"",""CAName"":""""}: Post https://0.0.0.0:7052/enroll: x509: certificate signed by unknown authority",,mmbhosale,yanshu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01kur:",,,,Unset,Unset,,,,,,,,,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mmbhosale,yanshu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Aug/22 4:38 PM;mmbhosale;Look out for the MSPs. if this is the Test network you are looking at.. suggest redo the cert generation by removing the certs..;;;",,,,,,,,,,,,,,,,,,,
