Summary,Issue key,Issue id,Parent id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project description,Project url,Priority,Resolution,Assignee,Reporter,Creator,Created,Updated,Last Viewed,Resolved,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Fix Version/s,Fix Version/s,Fix Version/s,Fix Version/s,Component/s,Component/s,Component/s,Component/s,Due Date,Votes,Labels,Labels,Labels,Labels,Description,Environment,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Original Estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Inward issue link (Blocks),Inward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Inward issue link (Cloners),Outward issue link (Cloners),Inward issue link (Duplicate),Inward issue link (Duplicate),Inward issue link (Duplicate),Inward issue link (Duplicate),Inward issue link (Duplicate),Inward issue link (Duplicate),Outward issue link (Duplicate),Outward issue link (Duplicate),Outward issue link (Issue split),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Custom field (Authorized Watchers),Custom field (Authorized Watchers),Custom field (Authorized Watchers),Custom field (Authorized Watchers),Custom field (Authorized Watchers),Custom field (Authorized Watchers),Custom field (Business Value),Custom field (Commit Levels),Custom field (Current Status),Custom field (Design),Custom field (Design Status),Custom field (Documentation Impact),Custom field (Documentation Status),Custom field (Epic Color),Custom field (Epic Link),Custom field (Epic Name),Custom field (Epic Status),Custom field (Executed),Custom field (Found in Commit),Custom field (Function Test Status),Custom field (Must Fix),Custom field (Original story points),Custom field (Parent Link),Custom field (Rank),Custom field (Release Note),Custom field (Release Note Required),Custom field (Root Cause Analysis),Custom field (SDK Impact),Custom field (Sample/Tutorial),Sprint,Sprint,Sprint,Custom field (Steps to Reproduce),Custom field (Story Points),Custom field (System Test Impact),Custom field (Target end),Custom field (Target start),Custom field (Team),Custom field (Team),Custom field (Test Plan),Custom field (Test Result),Custom field (Test Result Details),Custom field (Test Type),Custom field (Triaged),Custom field (Usage),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Workaround),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitCommitsReferenced),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment
Update documentation of ConsensusType in protos/orderer/configuration.proto,FAB-13704,36813,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,16/Jan/19 4:48 PM,03/Mar/19 9:58 PM,28/Oct/23 3:04 AM,26/Jan/19 12:08 AM,,,,,,,,,,,,,,,0,,,,,"Update documentation of ConsensusType in protos/orderer/configuration.proto
 * spell out permitted type strings: ""solo"" / ""kafka"" / ""etcdraft""
 * update migration_state for which messages are permitted on system / standard channels
 * update migration_context for what is required on each migration_state ",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0071j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refine Bundle.ValidateNew by identifying a system vs. standard channel,FAB-13705,36814,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,16/Jan/19 5:24 PM,03/Mar/19 9:58 PM,28/Oct/23 3:04 AM,30/Jan/19 6:32 PM,,,,,,,,,,,,,,,0,,,,,"* In {{common/multichannel/Bundle.ValidateNew()}} it is possible to identify the system channel using
              {{_, isSys := b.ConsortiumsConfig()}}
 this can be used to refine {{validateMigrationStep()}} such that it deals more accurately with the migration-state transitions on the system vs. standard channels.

 
 * In addition, prevent user from adding {{ConsortiumsConfig()}} to standard channels. This will protect {{multichannel.Registrar}} from blowing up on next initialization.
 ** Looking at the code in {{multichannel.Registrar}}, we see that  `{{_, ok := ledgerResources.ConsortiumsConfig()}}` is used to identify the system channel. If two system channels are identified, the code panics. 
 ** Now, in {{Bundle.ValidateNew()}}, currently there is no mechanism to prevent a user (orderer admin) from adding a {{ConsortiumsConfig()}} to a standard channel.
 ** If a user does that,  {{multichannel.Registrar}} will blow up in the next initialization.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0071r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Jan/19 9:13 PM;tock;https://gerrit.hyperledger.org/r/#/c/28780/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use mocks for ledger in validator tests,FAB-13706,36818,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,16/Jan/19 7:20 PM,18/Jan/19 11:50 AM,28/Oct/23 3:04 AM,18/Jan/19 11:50 AM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0072f:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
FabToken CLI,FAB-13707,36819,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,16/Jan/19 7:21 PM,20/Feb/19 11:56 PM,28/Oct/23 3:04 AM,20/Feb/19 11:56 PM,,,,,,,,,,,,,,,0,,,,,,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11153,,,No,,Unset,No,,,"1|i0072n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Jan/19 7:22 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/28654/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create ChaincodeData lookup function for validation,FAB-13708,36820,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,16/Jan/19 7:29 PM,23/Jan/19 10:31 PM,28/Oct/23 3:04 AM,18/Jan/19 11:51 AM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,FAB-13523,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0072v:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Idemix chaincode fails,FAB-13709,36827,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,mastersingh24,rickr,rickr,17/Jan/19 12:01 AM,17/Jan/19 2:12 AM,28/Oct/23 3:04 AM,17/Jan/19 2:12 AM,v2.0.0,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,"This is working in Fabric 1.4 but is broken when running against Fabric 2.0 (master) 

Full Peer log  https://ctrlv.it/id/163487/1292207097

The problem seems to be the go chaincode missing an import:

https://github.com/hyperledger/fabric-sdk-java/blob/3495c0d29c00c6eee30ccbd9328451949c68c47b/src/test/fixture/sdkintegration/gocc/sampleIdemix/src/github.com/example_cc/example_cc.go#L25

Transaction id 788dabaed00807bc8d5994c428f7dbe7aa33e360d969e533a296c745ad339fb2

{code}
2019-01-16 14:46:46.814 UTC [chaincode] Deregister -> DEBU ff3 deregister handler: idemix_example_go:1
2019-01-16 14:46:46.814 UTC [endorser] callChaincode -> INFO ff4 [foo][788dabae] Exit chaincode: name:""lscc""  (1149ms)
2019-01-16 14:46:46.815 UTC [endorser] SimulateProposal -> ERRO ff5 [foo][788dabae] failed to invoke chaincode name:""lscc"" , error: Failed to generate platform-specific docker build: Error returned from build: 1 ""chaincode/input/src/github.com/example_cc/example_cc.go:25:2: cannot find package ""github.com/hyperledger/fabric/core/chaincode/shim/ext/cid"" in any of:
	/usr/local/go/src/github.com/hyperledger/fabric/core/chaincode/shim/ext/cid (from $GOROOT)
	/chaincode/input/src/github.com/hyperledger/fabric/core/chaincode/shim/ext/cid (from $GOPATH)
	/go/src/github.com/hyperledger/fabric/core/chaincode/shim/ext/cid
""
error starting container
error starting container
2019-01-16 14:46:46.815 UTC [endorser] SimulateProposal -> DEBU ff6 [foo][788dabae] Exit
{code}
",,mastersingh24,rickr,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00747:",,,,Unset,Unset,,,,Run JSDK integration test .. test that fails End2endIdemixIT  (End2endIT must be run first ,,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,rickr,sykesm,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Jan/19 12:59 AM;sykesm;Has this example ever worked? I expect it wouldn't have as the external deps (ext) should have been vendored.;;;","17/Jan/19 1:05 AM;sykesm;Talked to Saad and this worked with 1.4. Looks like the recent changes to ccenv may have dropped some stuff that used to be included.

Old packaging for the shim did the following:
{code}
$(BUILD_DIR)/goshim.tar.bz2: $(GOSHIM_DEPS)
	@echo ""Creating $@""
	@tar -jhc -C $(GOPATH)/src $(patsubst $(GOPATH)/src/%,%,$(GOSHIM_DEPS)) > $@
{code}

New process does this:
{code}
	&& $GOPATH/bin/govendor add +external github.com/hyperledger/fabric/core/chaincode/shim \
{code};;;","17/Jan/19 1:16 AM;mastersingh24;https://gerrit.hyperledger.org/r/28762;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
PTE gen_cfgInputs.sh number of channel option support,FAB-13710,36829,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,17/Jan/19 1:16 AM,19/Jan/19 4:35 AM,28/Oct/23 3:04 AM,19/Jan/19 4:35 AM,,,,,,,,,,fabric-quality,,,,,0,,,,,"Add option of number of channels in gen_cfgInputs.sh to to allow multiple channels execution.

This task will add two options to gen_cfgInputs.sh:

--nchan number of channels
              (Default: 0. Note: cannot be used with -n nor --name)
--chanprefix channel name prefix, used with option --nchan
              (Default: defaultchannel)

 

 ",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i0074n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"17/Jan/19 5:48 AM;dongming;https://gerrit.hyperledger.org/r/#/c/28764/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
SDK-java tests are failing consistently with java.lang Assertion error in end-2-end tests,FAB-13711,36830,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Test Error,rickr,sambhavdutt,sambhavdutt,17/Jan/19 1:36 AM,19/Mar/19 8:13 PM,28/Oct/23 3:04 AM,21/Jan/19 11:28 PM,v2.0.0,,,,,,,,,fabric-sdk-java,,,,,0,ci-failure,,,,"There are consistent fails in the fabric.sdk integration test suite due to java.lang.Assertion error. This is currently failing  fabric-end-2-end daily job.

*Intermittent:* Yes
 *Branch:* master
 *Platform:* x86_64
*Error Snippet:*

{code:java}
23:31:00 Failed tests: 
23:31:00   End2endAndBackAgainNodeIT.setup:36->End2endAndBackAgainIT.runFabricTest:260->End2endAndBackAgainIT.reconstructChannel:738 Peer peer0.org1.example.com is missing instantiated chaincode name: example_cc_node, path:null, version: 1
23:31:00   End2endIdemixIT.setup:56->End2endIT.runFabricTest:211->End2endIT.runChannel:527 Not enough endorsers for instantiate :0endorser failed with error starting container: error starting container: Failed to generate platform-specific docker build: Error returned from build: 1 ""chaincode/input/src/github.com/example_cc/example_cc.go:25:2: cannot find package ""github.com/hyperledger/fabric/core/chaincode/shim/ext/cid"" in any of:
23:31:00 	/usr/local/go/src/github.com/hyperledger/fabric/core/chaincode/shim/ext/cid (from $GOROOT)
23:31:00 	/chaincode/input/src/github.com/hyperledger/fabric/core/chaincode/shim/ext/cid (from $GOPATH)
23:31:00 	/go/src/github.com/hyperledger/fabric/core/chaincode/shim/ext/cid
23:31:00 "". Was verified:false
23:31:00   End2endNodeIT.setup:51->End2endIT.runFabricTest:211->End2endIT.runChannel:527 Not enough endorsers for instantiate :0endorser failed with timeout expired while starting chaincode example_cc_node:1 for transaction. Was verified:false
23:31:00 
23:31:00 Tests run: 47, Failures: 3, Errors: 0, Skipped: 0
{code}

*Build Logs:*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/4121/

https://jenkins.hyperledger.org/view/Daily/job/fabric-end-2-end-daily-master-x86_64/3/consoleFull",,rickr,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,b909a18532e0ed205d421f0ed67f2c9dac2c1f8e,Unset,No,,,"1|i0074v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rickr,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Jan/19 11:28 PM;rickr;seems to be working now that we've gone to 2.0 

https://gerrit.hyperledger.org/r/#/c/28665/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
update contribution guide to add CR aging policy,FAB-13712,36831,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,ChristopherFerris,ChristopherFerris,17/Jan/19 2:00 AM,16/Mar/19 4:05 AM,28/Oct/23 3:04 AM,16/Mar/19 4:05 AM,v1.4.0,,,,,,,,,fabric-docs,,,,,0,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrp:c",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ChristopherFerris,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Jan/19 2:02 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/28763;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add ability to use the new chaincode lifecyle in integration tests,FAB-13713,36836,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,17/Jan/19 4:07 AM,06/Apr/19 1:21 AM,28/Oct/23 3:04 AM,03/Apr/19 8:51 AM,,,,,,,,,,,,,,,0,,,,,"A user should be able to use the new chaincode lifecycle to set up a fabric network in the integration test suite.

Note: For this release, both lifecycles need to be supported. The new lifecycle will eventually become THE lifecycle.",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i0075z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Integration Test,,(Please add usage information),latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a fabric developer, I'd like to use vagrant to build and test the fabric core",FAB-13714,36838,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,17/Jan/19 6:31 AM,22/Jan/19 12:10 AM,28/Oct/23 3:04 AM,20/Jan/19 7:51 PM,,,,,,,,,,fabric-common,,,,,0,,,,,"The existing devenv is a mess. It's cluttered with a bunch of legacy that's no longer relevant to what we build.

Let's simplify what's there and bring it up to date with the current patterns.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0076f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jan/19 5:16 AM;sykesm;https://gerrit.hyperledger.org/r/28798 [FAB-13714] Remove devenv and associated doc;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
manifest-tool is failing in the gotools for release-1.1 ,FAB-13715,36839,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,sambhavdutt,sambhavdutt,17/Jan/19 6:48 AM,19/Mar/19 8:13 PM,28/Oct/23 3:04 AM,21/Jan/19 4:17 AM,v1.1.0,,,,,v1.1.2,,,,fabric-build,,,,,0,ci-failure,,,,"The manifest-tool is failing in gotools for release-1.1 , this fail was observed in the daily fabric end-2-end job

*Intermittent:* No
*Branch:* release-1.1
*Platform:* x86_64

*Error Snippet:*
 
{code:java}
00:03:32.627 # github.com/estesp/manifest-tool/vendor/github.com/docker/docker/pkg/archive
00:03:32.627 /opt/gotools/obj/gopath/src/github.com/estesp/manifest-tool/vendor/github.com/docker/docker/pkg/archive/archive.go:365:5: hdr.Format undefined (type *tar.Header has no field or method Format)
00:03:32.627 /opt/gotools/obj/gopath/src/github.com/estesp/manifest-tool/vendor/github.com/docker/docker/pkg/archive/archive.go:365:15: undefined: tar.FormatPAX
00:03:32.627 /opt/gotools/obj/gopath/src/github.com/estesp/manifest-tool/vendor/github.com/docker/docker/pkg/archive/archive.go:1158:7: hdr.Format undefined (type *tar.Header has no field or method Format)
00:03:32.627 /opt/gotools/obj/gopath/src/github.com/estesp/manifest-tool/vendor/github.com/docker/docker/pkg/archive/archive.go:1158:17: undefined: tar.FormatPAX
00:03:34.568 make[1]: *** [gotool.manifest-tool] Error 2
00:03:34.568 Makefile:48: recipe for target 'gotool.manifest-tool' failed
{code}

*Build Logs:*

https://jenkins.hyperledger.org/view/Daily/job/fabric-end-2-end-daily-release-1.1-x86_64/",,denyeart,mastersingh24,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,992300b0a43b996bdb90903f6fca0cc6ca37f0bf,Unset,No,,,"1|i0076n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mastersingh24,sambhavdutt,vijaypunugubati,,,,,,,,release-1.1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jan/19 9:36 PM;mastersingh24;Not sure how much we really care about 1.1 branch at this point, but the issue here is likely that we need to pin to a specific version of the manifest tool.  The issue is due to the fact of manifest tool using something in the tar package which was not added until Go 1.10 and we use Go 1.9 for 1.1;;;","20/Jan/19 11:46 PM;mastersingh24;[https://gerrit.hyperledger.org/r/#/c/28836/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
onboarding block verification support,FAB-13716,36840,34813,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,17/Jan/19 6:56 AM,03/Mar/19 9:58 PM,28/Oct/23 3:04 AM,22/Jan/19 3:46 AM,,,,,,v2.0.0,,,,fabric-orderer,,,,,0,,,,,"Verification of block signature policy is needed for onboarding, but - we face 2 challenges: 

* We don't have a chain support, nor a bundle, because onboarding might take place at boot time, before everything else, so we need to track ourselves of committed config blocks and build bundles from them and ensure they replace the older bundles when blocks are committed.
* We need to give the block puller the same support it has that the channel config gives in terms of verification of block signature policy with a custom config envelope that is present inside an un-committed batch of blocks: *VerifyBlockSignature(sd []*common.SignedData, envelope *common.ConfigEnvelope)* will build a bundle out of the config envelope if it's not nil, but this code cannot be reused because it resides in the chain support (which isn't built when onboarding runs).

When the OSN detects it has now joined a new channel (dynamic onboarding) - it needs to verify the blocks it pulls but it can only use the genesis block it stored in the ledger (since it has the genesis block from the system channel's chain creation transaction). ",,kchristidis,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0076v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kchristidis,yacovm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Jan/19 7:35 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/28768/;;;","19/Jan/19 4:37 AM;kchristidis;{quote}When the OSN detects it has now joined a new channel (dynamic onboarding) - it needs to verify the blocks it pulls but it can only use the genesis block it stored in the ledger (since it has the genesis block from the system channel's chain creation transaction).{quote}

I'm not sure I'm following what we're trying to say here. Can we break this down? I'm also not getting what we mean by dynamic onboarding? Dynamic as opposed to?;;;","19/Jan/19 5:51 AM;yacovm;Dynamic onboarding means when you join a channel you didn't participate it while you are online and have been serving other channels.
It is opposed to static/startup onboarding which takes place only once, when you are a new node and don't have anything but the boot block of the system channel.;;;","19/Jan/19 6:04 AM;kchristidis;{quote}Dynamic onboarding means when you join a channel you didn't participate it while you are online and have been serving other channels. It is opposed to static/startup onboarding which takes place only once, when you are a new node and don't have anything but the boot block of the system channel.{quote}
(/);;;","21/Jan/19 12:45 AM;kchristidis;Guessing that https://gerrit.hyperledger.org/r/c/28768/ is CR 1 of 2 needed to close this, correct? (The other one that's currently WIP will do the wiring.);;;","21/Jan/19 1:30 AM;yacovm;yes. ;;;","22/Jan/19 1:13 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/28770/;;;",,,,,,,,,,,,,,,,,,,,,,
Move fabric-ca sample and build capability to fabric-test,FAB-13717,36842,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,17/Jan/19 7:18 AM,08/Feb/19 2:09 AM,28/Oct/23 3:04 AM,08/Feb/19 2:09 AM,,,,,,,,,,fabric-quality,,,,,0,,,,,"The ability to build fabric-ca-* images was removed from the fabric-ca repository. These images were being used when performing tests that used fabric-ca. These tests currently use the CLI, sdk-node, and sdk-java. In order to execute true interoperability tests to ensure consistency, these images are needed. 

The fabric-ca sample has also been moved to fabric-test. There are a couple of scenarios that are only tested when this sample is executed. Until this sample has been transposed into proper tests for these particular cases, this sample should continue to exist as it has caught errors at times in the past. The sample can be removed when there is better test coverage for fabric-ca and fabric interoperability.",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-781,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0077b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"17/Jan/19 7:23 AM;latitiah;https://gerrit.hyperledger.org/r/28769;;;","19/Jan/19 4:16 AM;latitiah;The CR contains the following changes:
* fabric-ca sample that was removed from fabric-samples repo with the changes found in the CRs:  https://gerrit.hyperledger.org/r/#/c/28141/ and https://gerrit.hyperledger.org/r/#/c/28139/
* fabric-ca-* Dockerfiles had to be modified to use alpine
* includes all the new images that we have now and the ability to build the fabric-ca-* images to the Makefile and in a separate script
* When starting chaincode, the version number and not ""latest"" env image is searched for - there is a bug open for this, in the meantime, the version (2.0.0) is tagged to the env images in the meantime
* The new images that are now necessary such as baseos and nodeenv

This change does not enable executing the fabric-ca sample, but does allow the continued execution of behave tests including the interop tests.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
TestConnectToAnchorPeers failed in the gossip_test due to timeout,FAB-13718,36843,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,17/Jan/19 7:24 AM,19/Mar/19 7:57 PM,28/Oct/23 3:04 AM,23/Jan/19 12:10 AM,v1.4.0,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"The *TestConnectToAnchorPeers* failed in the gossip tests as timeout expired while connecting to the anchor peers. This fail was observed in the unit-test-coverage daily job.

*Intermittent:* Yes
*Branch:* release-1.4
*Platform:* x86_64
*Error Snippet:*

{code:java}
20:58:37 --- FAIL: TestConnectToAnchorPeers (367.09s)
20:58:37     gossip_test.go:1531: 
20:58:37         	Error Trace:	gossip_test.go:1531
20:58:37         	            				asm_amd64.s:1333
20:58:37         	Error:      	Didn't stop within a timely manner
20:58:37         	Test:       	TestConnectToAnchorPeers
20:58:37     gossip_test.go:1591: 
20:58:37         	Error Trace:	gossip_test.go:1591
20:58:37         	            				gossip_test.go:475
20:58:37         	Error:      	Timeout expired!
20:58:37         	Test:       	TestConnectToAnchorPeers
20:58:37     gossip_test.go:1591: 
20:58:37         	Error Trace:	gossip_test.go:1591
20:58:37         	            				gossip_test.go:485
20:58:37         	Error:      	Timeout expired!
20:58:37         	Test:       	TestConnectToAnchorPeers
{code}


*Build Logs:*

https://jenkins.hyperledger.org/view/Daily/job/fabric-unit-test-coverage-daily-release-1.4-x86_64/34/consoleFull

",,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,8f9e8c8fd14761baddc07851a613ecd9ef95db2b,Unset,No,,,"1|i0077j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/19 12:09 AM;sambhavdutt;There have been no fails in TestConnectToAnchorPeers in the recent builds.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor to address review comments,FAB-13719,36848,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,tock,tock,tock,17/Jan/19 3:22 PM,04/Apr/19 4:48 PM,28/Oct/23 3:04 AM,04/Apr/19 4:48 PM,,,,,,,,,,,,,,,0,,,,,"* See comments here: https://gerrit.hyperledger.org/r/#/c/29710/15/orderer/consensus/migration/migration.go
 * Rename StatusManager to:  StatusKeeper? StatusMaster? StatusExecutor?
 * Refactor migration package style to be more ""return early return often"" rather than single return

 ",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0078n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/19 4:48 PM;tock;Switching to alternative  migration design - v2;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add err handling to core/comm tests,FAB-13720,36849,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,diizuka,diizuka,diizuka,17/Jan/19 3:23 PM,21/Jan/19 1:22 AM,28/Oct/23 3:04 AM,21/Jan/19 1:22 AM,v1.0.0,v1.1.0,v1.2.0,v1.3.0,,v2.0.0,,,,fabric-common,,,,,0,,,,,Add err handling to core/comm tests,,diizuka,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0078v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),diizuka,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
 Add err check for DERToX509Certificate,FAB-13721,36850,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,diizuka,diizuka,diizuka,17/Jan/19 3:44 PM,14/Feb/19 6:52 AM,28/Oct/23 3:04 AM,14/Feb/19 6:52 AM,v1.1.0,v1.2.0,v1.3.0,,,v2.0.0,,,,fabric-common,,,,,0,,,,,"Add err check for DERToX509Certificate in common/tools/cryptogen/ca/generator.go
",,diizuka,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00793:",,,,Unset,Unset,,,,"1.	Prepare the cert file contains only headers,
e.g. “-----BEGIN CERTIFICATE-----\n-----END CERTIFICATE-----”
2.	Put it to certain directory. 
3.	Call ca.LoadCerfiticateECDSA(dir).
It should return (non-nil, nil), but returns (nil, nil)
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),diizuka,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Call ReportUnreachable if stepping a message fails,FAB-13722,36851,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,kchristidis,kchristidis,17/Jan/19 3:48 PM,07/Mar/19 1:54 AM,28/Oct/23 3:04 AM,01/Mar/19 12:54 AM,,,,,,v1.4.1,,,,fabric-orderer,,,,,0,raft,,,,"See {{send}} method of {{node}} object in {{etcdraft/node.go}}.

Calling {{ReportUnreachable}} stops the leader from optimistically sending more {{MsgApp}} messages to that node.",,guoger,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0079b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,kchristidis,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Feb/19 1:59 PM;guoger;https://gerrit.hyperledger.org/r/c/29529/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
refactor processChannelConfigTx,FAB-13723,36854,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kutenglaoshu,kutenglaoshu,kutenglaoshu,17/Jan/19 5:36 PM,18/Jan/19 9:08 PM,28/Oct/23 3:04 AM,18/Jan/19 9:08 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,"if channelConfig is nil, persistConf already return err:
    proto: Marshal called with nil
so below code no chance to compare
    if channelConfig == nil {
        return fmt.Errorf(""Channel config found nil"")
    }
i think this code should be delete, but if not, move to before persistConf",,kutenglaoshu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0079z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kutenglaoshu,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create local support interface for QueryExecutor,FAB-13724,36855,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,ales,ales,ales,17/Jan/19 5:57 PM,04/Apr/19 10:14 PM,28/Oct/23 3:04 AM,04/Apr/19 10:14 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007a7:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address some comments for code hygiene,FAB-13725,36856,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,guoger,guoger,guoger,17/Jan/19 6:11 PM,03/Apr/19 5:40 PM,28/Oct/23 3:04 AM,02/Apr/19 5:24 AM,,,,,,,,,,fabric-orderer,,,,,0,help-wanted,,,,"-[https://gerrit.hyperledger.org/r/c/28204/17/orderer/consensus/etcdraft/chain.go#938|#938-]-

-[https://gerrit.hyperledger.org/r/c/28204/17/orderer/consensus/etcdraft/chain.go#945|#945-]-

-[https://gerrit.hyperledger.org/r/c/28427/12/orderer/consensus/etcdraft/chain.go#906]-

-[https://gerrit.hyperledger.org/r/c/28427/12/orderer/consensus/etcdraft/util.go#399]-

-[https://gerrit.hyperledger.org/r/c/28581/6/orderer/consensus/etcdraft/chain.go#387]-

-[https://gerrit.hyperledger.org/r/c/28581/6/orderer/consensus/etcdraft/chain.go#394]-

[-https://gerrit.hyperledger.org/r/c/28650/6/orderer/consensus/etcdraft/chain.go#117-|#117-]

[-https://gerrit.hyperledger.org/r/c/28921/2/integration/e2e/cft_test.go#303-|#303-]

 

Remaining item:

[refactor etcd/raft file purging with {{filepath.Walk}}|https://gerrit.hyperledger.org/r/c/28850/11/orderer/consensus/etcdraft/storage.go#285]

This could be done together with FAB-13941",,guoger,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007af:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,jyellick,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/19 12:42 PM;jyellick;[~guoger] can you assess what remains here?;;;","01/Apr/19 10:48 PM;guoger;[https://gerrit.hyperledger.org/r/c/30515/] release-1.4
[https://gerrit.hyperledger.org/r/c/30524] master;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove LSCC tx validation from v20 validator,FAB-13726,36859,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,17/Jan/19 6:53 PM,23/Jan/19 3:56 AM,28/Oct/23 3:04 AM,23/Jan/19 3:56 AM,,,,,,,,,,,,,,,0,,,,,"After the capability is switched, v2.0 validator will simply forbid any further writes to LSCC",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007b3:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clone v1.4 builtin validation plugin,FAB-13727,36860,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,17/Jan/19 7:33 PM,21/Jan/19 12:07 PM,28/Oct/23 3:04 AM,21/Jan/19 12:07 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007bb:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integrate feedback from community feedback on programming model,FAB-13728,36862,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,mbwhite,mbwhite,17/Jan/19 8:07 PM,23/Jan/20 7:33 AM,28/Oct/23 3:04 AM,23/Jan/20 7:33 AM,,,,,,,,,,,,,,,0,stale-item,,,,"Feedback from the community that have constructed similar code to that introduced in the programming model has provided a number of good suggestions
 * The metadata provides the power to have more type validation
 ** This was done via annotations - so integrated annotations to provide way of supplying this data

 * Default contract
 ** Provide annotation for default contract

 ",,mbwhite,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,ghx-label-6,,Updated programming model for chaincode based on community feedback,To Do,No,,Unset,No,,,"1|i007br:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mbwhite,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:33 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ensure LSCC is no longer written to when the v2.0 capability is enabled,FAB-13729,36866,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,17/Jan/19 10:09 PM,22/Jan/19 4:24 AM,28/Oct/23 3:04 AM,22/Jan/19 4:24 AM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007cn:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE burst mode supports statistical distributions,FAB-13730,36872,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,dongming,dongming,dongming,17/Jan/19 11:47 PM,22/Jan/20 6:19 AM,28/Oct/23 3:04 AM,22/Jan/20 6:19 AM,,,,,,,,,,fabric-quality,,,,,0,,,,,PTE supports Poisson and Constant (uniform) distributions transaction mode.  This task to strengthen burst mode to support statistical distribution in any specified transaction interval. This will PTE to simulate real use case better.,,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00whf:w",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/20 6:19 AM;scottz;Although it might be helpful, the existing tool works fine; nobody is asking for this PTE enhancement.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
extend list tokens functionality to support delegated outputs,FAB-13731,36873,36747,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,KaoutarEL,KaoutarEL,KaoutarEL,17/Jan/19 11:48 PM,26/Feb/19 6:39 PM,28/Oct/23 3:04 AM,26/Feb/19 6:39 PM,,,,,,,,,,,,,,,0,fabtoken,,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007e7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Feb/19 6:14 PM;KaoutarEL;https://gerrit.hyperledger.org/r/#/c/28793/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add ProverPeer role,FAB-13732,36874,36646,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,wenjian,wenjian,18/Jan/19 12:01 AM,23/Jan/20 7:31 AM,28/Oct/23 3:04 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,"Prover peer is not integrated with discovery service yet. We will have to explicitly specify prover peer.
 # add ProverPeer role to PeerRole
 # specify it in network config file so that SDK can know what peers are prover peers
 # implement getProverPeers method to return all prover peers",,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007ef:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Issue: send grpc request to prover peer,FAB-13733,36876,36646,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,wenjian,wenjian,wenjian,18/Jan/19 12:16 AM,23/Jan/20 7:31 AM,28/Oct/23 3:04 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,"Create a TokenWallet class to provide an API that creates an issue token command and send it to prover peer.

Create grpc client to a prover peer,  send the request to prover peer and return serialized token transaction. 

The story is for issue request only, but it should be designed for extension to support other requests: list, transfer, redeem, approve, transfer from, allowance, swap.",,bur,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007ev:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bur,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jan/19 10:53 PM;bur;WIP https://gerrit.hyperledger.org/r/#/c/29007/;;;","23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Error Handling to Build Script,FAB-13734,36877,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tijohnson,tijohnson,tijohnson,18/Jan/19 12:17 AM,10/Feb/19 2:55 AM,28/Oct/23 3:04 AM,10/Feb/19 2:55 AM,,,,,,,,,,,,,,,0,,,,,"The 'bootstrap' script (iscripts/bootstrap.sh) s called from numerous builds and it is lacking proper error handling. Proper error handling is necessary for any batch script in a Jenkins build.

This script is called two ways:
 * interactively by developers and from script during a Jenkins build. They would sometimes want to specify command line flags and due to the (incorrect) way they were being called the flags have to be specified after the command line arguments.
 * From a batch script in a Jenkins build

The author used some 'add-hoc' parsing & 'getops' to parse the flags, rather than use 'getopt' (which does support flags anywhere on the command line). 

When I originally fixed FAB-12211 'Add Error Handling to build script' I used 'getopt' to parse command line flags/options, which was problematic because of an old version of 'getopt' being used by OS X. My second try used 'getops' but did not support the flags after the command line options. All were then reverted.

How I want to fix (in order preference):
 # Use original version of my fix. People who are running OSX need to update to recent version of 'getopt'. 'getopt' is the superior command line parser. It supports POSIX standards for command line parsing.
 # Use 'getopts' without the add-hoc parsing to allow the flags anywhere on the command line. This would require users to always have flags before arguments.
 # Use 'getopts' with add-hoc parsing to allow the flags anywhere on the command line. This would not support white-space in arguments.

I have already implemented #1 & #3

I dislike #3 because it add-hoc and against standard process for bash and Linux. And you can bet that someone will use it as an example in the future. 

 ",,ChristopherFerris,denyeart,tijohnson,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007f3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ChristopherFerris,denyeart,tijohnson,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jan/19 10:33 PM;ChristopherFerris;I get that getopt > getopts but it is unclear to me what actual problem this is fixing. Yes, the script is now also called by CI and end users. What is the problem other than a preference for getopt?;;;","29/Jan/19 2:33 AM;tijohnson;getopts (unlike getop) expects to find the flags on the command line first. But because you were sourcing the script (curl | bash -s) incorrectly (instead of curl xxx | bash -s -- ) you had to move the command line flags after the arguments. you got gotopts to  work but it was not very cooperative, which made the code pretty gnarly. I found a bug in the way the arguments were parsed. If I could have only allowed flags before the version arguments the code would have been much cleaner but people expected the flags after the arguments. It now allows them anywhere on the command line. I still believe the best solution was my first (using getopt and forcing OSX to upgrade their versions of getopt).

Small thing, when you update the version defaults (which seems to happen fairly often) you have to update in several places. Now you only have to update in one.

The big one (the reason I decided the script needed to fixed) was error handling. Bash is interactive scripting language and so default case to ignore the error status of command that it runs (you would not want a typo 'ls /tmpp' to cause your shell to exit. When you use it as a programming shell you need to change the default to exit upon error (-e). You can 'handle' errors and not exit if you chose. Another good flag to use it '-u'. I had to make one minor change to the script to handle an expected error where you want to continue.

I just run into a problem this AM: a function was made in a script last April. Last June someone accidentally remove the code for that function. It has been quietly failing for 7mo, which is totally unacceptable. The error message was there (line 3K out of 8K) the entire time.

In the end, it is your script you decide what to do with it. I fixed it knowing that was the case. Don't worry, you are not going to hurt my feelings.

 ;;;","07/Feb/19 7:36 AM;tijohnson;I need to reach some kind of resolution on this. If I don't hear from anyone to the contrary in the next few days, I am going to close this ticket and abandon the Review Request.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in gossip/gossip/algo/pull_test TestByzantineResponder,FAB-13736,36879,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,ronenschafferibm,sykesm,sykesm,18/Jan/19 12:29 AM,06/Jun/19 3:51 PM,28/Oct/23 3:04 AM,06/Jun/19 3:51 PM,,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"While running in a virtual machine:

{code}
--- FAIL: TestByzantineResponder (1.00s)
    pull_test.go:332: 
                Error Trace:    pull_test.go:332
                Error:          Should be true
                Test:           TestByzantineResponder
    pull_test.go:333: 
                Error Trace:    pull_test.go:333
                Error:          Should be true
                Test:           TestByzantineResponder
    pull_test.go:334: 
                Error Trace:    pull_test.go:334
                Error:          Should be true
                Test:           TestByzantineResponder
FAIL
coverage: 96.0% of statements
FAIL    github.com/hyperledger/fabric/gossip/gossip/algo        10.688s
{code}",,MHBauer,ronenschafferibm,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15309,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzu8q:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,ronenschafferibm,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/May/19 5:53 AM;MHBauer;The only way I could see this failing is if somehow the system is so overloaded that the timer based events don't fire until after the scheduled time.

The default schedule is 100-200 milliseconds. ;;;","06/Jun/19 3:50 PM;ronenschafferibm;This unit-test didn't fail for over a month (last known fail on 17/Jan/19) - closing...;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test faiulre in gossip/identity/identity_test TestListInvalidIdentities,FAB-13737,36880,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,ronenschafferibm,sykesm,sykesm,18/Jan/19 12:31 AM,06/Jun/19 4:00 PM,28/Oct/23 3:04 AM,06/Jun/19 4:00 PM,,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"Encountered while running on a slow virtual machine.

{code}
--- FAIL: TestListInvalidIdentities (9.02s)
    identity_test.go:227: 
                Error Trace:    identity_test.go:227
                Error:          Received unexpected error:
                                PKIID wasn't found
                                github.com/hyperledger/fabric/gossip/identity.(*identityMapperImpl).Get
                                        /home/vagrant/go/src/github.com/hyperledger/fabric/gossip/identity/identity.go:158
                                github.com/hyperledger/fabric/gossip/identity.TestListInvalidIdentities
                                        /home/vagrant/go/src/github.com/hyperledger/fabric/gossip/identity/identity_test.go:226
                                testing.tRunner
                                        /opt/go/src/testing/testing.go:827
                                runtime.goexit
                                        /opt/go/src/runtime/asm_amd64.s:1333
                Test:           TestListInvalidIdentities
    identity_test.go:228: 
                Error Trace:    identity_test.go:228
                Error:          Expected value not to be nil.
                Test:           TestListInvalidIdentities
    identity_test.go:236: 
                Error Trace:    identity_test.go:236
                Error:          Received unexpected error:
                                PKIID wasn't found
                                github.com/hyperledger/fabric/gossip/identity.(*identityMapperImpl).Get
                                        /home/vagrant/go/src/github.com/hyperledger/fabric/gossip/identity/identity.go:158
                                github.com/hyperledger/fabric/gossip/identity.TestListInvalidIdentities
                                        /home/vagrant/go/src/github.com/hyperledger/fabric/gossip/identity/identity_test.go:235
                                testing.tRunner
                                        /opt/go/src/testing/testing.go:827
                                runtime.goexit
                                        /opt/go/src/runtime/asm_amd64.s:1333
                Test:           TestListInvalidIdentities
    identity_test.go:237: 
                Error Trace:    identity_test.go:237
                Error:          Expected value not to be nil.
                Test:           TestListInvalidIdentities
FAIL
coverage: 100.0% of statements
FAIL    github.com/hyperledger/fabric/gossip/identity   12.029s
{code}",,ronenschafferibm,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15309,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007fb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ronenschafferibm,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Jun/19 4:00 PM;ronenschafferibm;This unit-test didn't fail for over a month (last known fail on 17/Jan/19) - closing...;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
code hygiene: rename addImplicitCollection to constructCollConfig,FAB-13738,36882,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,18/Jan/19 1:17 AM,23/Jan/19 12:25 PM,28/Oct/23 3:04 AM,23/Jan/19 12:25 PM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007fr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestLaunchprocShimStartInProcErr failed in the unit-tests as chaincode id is not provided,FAB-13739,36883,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,sambhavdutt,sambhavdutt,18/Jan/19 1:29 AM,19/Mar/19 7:57 PM,28/Oct/23 3:04 AM,18/Jan/19 9:52 PM,v1.1.0,,,,,,,,,fabric-common,,,,,0,ci-flake,,,,"TestLaunchprocShimStartInProcErr failed once in the unit-tests as chaincode id is not provided. 

*Intermittent:* Yes
*Branch:* release-1.1
*Platform:* s390x
*Error Snippet:*

{code:java}
20:01:13 unit-tests_1  | 2019-01-13 01:01:01.858 UTC [inproccontroller] Errorf-fm -> ERRO 002 chaincode-support ended with err: error chaincode id not provided
20:01:13 unit-tests_1  | --- FAIL: TestLaunchprocShimStartInProcErr (0.00s)
20:01:13 unit-tests_1  | 	assertions.go:213: 
                        
	Error Trace:	
20:01:13 unit-tests_1  | 		
	Error:		Not equal: &errors.errorString{s:""chaincode-support ended with err: error""} (expected)
20:01:13 unit-tests_1  | 			        != ""chaincode-support ended with err: error"" (actual)
{code}


*Build Logs:*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-daily-release-1.1-s390x/158/
",,sambhavdutt,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,992300b0a43b996bdb90903f6fca0cc6ca37f0bf,Unset,No,,,"1|i007fz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jan/19 9:52 PM;sykesm;Not pushing ci failure fixes back to 1.1...;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestHaltChainProcessing failed in the gossip state_test as there was a nil message in end-to-end channel,FAB-13741,36885,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,18/Jan/19 2:00 AM,19/Mar/19 7:57 PM,28/Oct/23 3:04 AM,23/Jan/19 12:12 AM,v1.2.0,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"TestHaltChainProcessing failed once in the gossip state_test as there was a nil message in end-to-end channel. This was observed in the daily unit-tests for 1.2

*Intermittent:* No
*Branch:* release-1.2
*Platform:* x86_64
*Error Snippet:*

{code:java}
20:17:22 unit-tests_1  | --- FAIL: TestHaltChainProcessing (0.00s)
20:17:22 unit-tests_1  | 	assertions.go:247: 
                          
	Error Trace:	state_test.go:1658
20:17:22 unit-tests_1  | 		
	            	
			state_test.go:718
20:17:22 unit-tests_1  | 		
	Error:      	""Got nil message via end-to-end channel, should not happen![Got nil message via end-to-end channel, should not happen!]"" does not contain ""Got error while committing""
20:17:22 unit-tests_1  | 		
	Test:       	TestHaltChainProcessing
20:17:22 unit-tests_1  | 	assertions.go:247: 
                          
	Error Trace:	state_test.go:1658
20:17:22 unit-tests_1  | 		
	            	
			state_test.go:719
20:17:22 unit-tests_1  | 		
	Error:      	""Requesting blocks batchSize size (18446744073709551614) greater than configured allowed (10) batching for anti-entropy. Ignoring request...[18446744073709551614 10]"" does not contain ""foobar""
{code}

*Build Logs:*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-daily-release-1.2-x86_64/109/",,C0rWin,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,a24152b27957c8c050260ff342fd1d7da24e1183,Unset,No,,,"1|i007gf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/19 12:12 AM;sambhavdutt;There are no fails observed in TestHaltChainProcessing in the recent unit-tests;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor state-based validator to decouple policy validator,FAB-13743,36888,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,18/Jan/19 2:35 AM,25/Jan/19 1:00 PM,28/Oct/23 3:04 AM,25/Jan/19 1:00 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007h3:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix comments to https://gerrit.hyperledger.org/r/#/c/28758/2,FAB-13744,36889,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,ales,ales,ales,18/Jan/19 2:41 AM,05/Apr/19 2:11 AM,28/Oct/23 3:04 AM,05/Apr/19 2:11 AM,,,,,,,,,,,,,,,0,,,,,https://gerrit.hyperledger.org/r/#/c/28758/2/core/committer/txvalidator/v20/txvalidator_test.go@43,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007hb:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
concurrent map read and write in gossip tests,FAB-13745,36917,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,sykesm,sykesm,18/Jan/19 6:09 AM,19/Mar/19 7:57 PM,28/Oct/23 3:04 AM,21/Jan/19 11:55 PM,,,,,,v2.0.0,,,,fabric-gossip,,,,,0,ci-flake,,,,"Hit during CR build: https://gerrit.hyperledger.org/r/c/28798/

{code}
20:45:06 fatal error: concurrent map read and map write
20:45:06 
20:45:06 goroutine 33056 [running]:
20:45:06 runtime.throw(0xf00391, 0x21)
20:45:06 	/opt/go/go1.11.1.linux.amd64/src/runtime/panic.go:608 +0x72 fp=0xc0034fb930 sp=0xc0034fb900 pc=0x77f9c2
20:45:06 runtime.mapaccess1_faststr(0xdec3e0, 0xc001a2a8a0, 0xc0003992d0, 0xf, 0xc003748410)
20:45:06 	/opt/go/go1.11.1.linux.amd64/src/runtime/map_faststr.go:21 +0x418 fp=0xc0034fb9a0 sp=0xc0034fb930 pc=0x765698
20:45:06 github.com/hyperledger/fabric/gossip/gossip.(*configurableCryptoService).OrgByPeerIdentity(0xc0048700e0, 0xc0003992d0, 0xf, 0x10, 0xc08b3fc34, 0x16ff040, 0x34630c7df77)
20:45:06 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/orgs_test.go:52 +0x4e fp=0xc0034fb9d8 sp=0xc0034fb9a0 pc=0xd1367e
20:45:06 github.com/hyperledger/fabric/gossip/identity.(*identityMapperImpl).Put(0xc0039b5d50, 0xc0003992c0, 0xf, 0x10, 0xc0003992d0, 0xf, 0x10, 0x0, 0x0)
20:45:06 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/identity/identity.go:147 +0x2ec fp=0xc0034fba98 sp=0xc0034fb9d8 pc=0xc93e0c
20:45:06 github.com/hyperledger/fabric/gossip/comm.(*commImpl).authenticateRemotePeer(0xc00473d8c0, 0x7f72c72651b0, 0xc0024ffff0, 0x7f72c7265101, 0xc0024ffff0, 0x0, 0xfb6a80)
20:45:06 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:472 +0x6f1 fp=0xc0034fbcc8 sp=0xc0034fba98 pc=0xc9a671
20:45:06 github.com/hyperledger/fabric/gossip/comm.(*commImpl).Handshake(0xc00473d8c0, 0xc000b7a7b0, 0x0, 0x0, 0x0, 0x0, 0x0)
20:45:06 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:320 +0x49c fp=0xc0034fbdb0 sp=0xc0034fbcc8 pc=0xc9921c
20:45:06 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).connect2BootstrapPeers.func1(0x18, 0xc004184ea0, 0xc0036c6f40)
20:45:06 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:1141 +0xa9 fp=0xc0034fbe90 sp=0xc0034fbdb0 pc=0xd1b3a9
20:45:06 github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).Connect.func1(0xc005a80c80, 0xc0025e8300, 0xc0036c6f40, 0xf, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
20:45:06 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:159 +0x8e fp=0xc0034fbf70 sp=0xc0034fbe90 pc=0xcb161e
20:45:06 runtime.goexit()
20:45:06 	/opt/go/go1.11.1.linux.amd64/src/runtime/asm_amd64.s:1333 +0x1 fp=0xc0034fbf78 sp=0xc0034fbf70 pc=0x7af8a1
20:45:06 created by github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).Connect
20:45:06 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:157 +0x2a4
20:45:06 
20:45:06 goroutine 1 [chan receive]:
20:45:06 testing.tRunner.func1(0xc00013a500)
20:45:06 	/opt/go/go1.11.1.linux.amd64/src/testing/testing.go:803 +0x1f3
20:45:06 testing.tRunner(0xc00013a500, 0xc0000bdda0)
20:45:06 	/opt/go/go1.11.1.linux.amd64/src/testing/testing.go:831 +0xc9
20:45:06 testing.runTests(0xc00000d5a0, 0x16b8440, 0x1b, 0x1b, 0x75f45f)
20:45:06 	/opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1117 +0x2aa
20:45:06 testing.(*M).Run(0xc000132200, 0x0)
20:45:06 	/opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1034 +0x165
20:45:06 main.main()
20:45:06 	_testmain.go:150 +0x205
20:45:06 
{code}",,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jan/19 6:10 AM;sykesm;console-timestamp.log;https://jira.hyperledger.org/secure/attachment/16593/console-timestamp.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007nj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Jan/19 9:01 PM;mastersingh24;Looks like we just need a lock for operations on configurableCryptoService.m unless I am missing something.;;;","21/Jan/19 9:04 PM;mastersingh24;https://gerrit.hyperledger.org/r/28853;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Generating a platform specific chaincode docker build,FAB-13746,36918,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,latitiah,latitiah,18/Jan/19 6:22 AM,20/Jan/19 9:19 PM,28/Oct/23 3:04 AM,20/Jan/19 9:19 PM,,,,,,WON'T FIX,,,,,,,,,0,,,,,"When trying to start a chaincode container upon instantiation, the following error occurs: {code}
2019-01-17 21:10:09.823 UTC [chaincode.platform] func1 -> ERRO 054 Failed to generate platform-specific docker build: Failed to pull hyperledger/fabric-ccenv:2.0.0: API error (404): manifest for hyperledger/fabric-ccenv:2.0.0 not found
{code}

It should be good enough to look for the ""latest"" version of the env image and not the release version. The same is true for javaenv and nodeenv.",,latitiah,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007nr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Jan/19 9:17 PM;mastersingh24;Unfortunately, there is a tight coupling between the peer version and the ccenv version.
 And now that we publish a latest tag (which is 1.4) we cannot afford to have the master/2.0.0 peer use the 1.4 ccenv.  Therefore having the default value be the actual version in core.yaml is correct.  If you want to use latest, then you can override `CORE_CHAINCODE_BUILDER`.

We currently do have `latest` for javaenv and nodeenv, but the reality is that we should also use the exact version for those as well.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
No longer able to run bash in fabric-peer images,FAB-13747,36919,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,mastersingh24,latitiah,latitiah,18/Jan/19 8:15 AM,23/Feb/19 6:21 PM,28/Oct/23 3:04 AM,23/Feb/19 6:21 PM,v2.0.0,,,,,v2.0.0,,,,,,,,,0,,,,,"It is no longer possible to run bash using fabric-peer images. 

{code}
$ docker run hyperledger/fabric-peer /bin/bash
docker: Error response from daemon: OCI runtime create failed: container_linux.go:348: starting container process caused ""exec: \""/bin/bash\"": stat /bin/bash: no such file or directory"": unknown.
ERRO[0000] error waiting for container: context canceled
{code}",,denyeart,latitiah,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,e082d5b09a4fbb0a657ccd2ccda0529cdaadc9a6,Unset,No,,,"1|i007nz:",,Yes,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,latitiah,mastersingh24,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"18/Jan/19 8:17 AM;denyeart;[~mastersingh24] It looks like ash is there but not bash.  I thought you already fixed this...;;;","20/Jan/19 9:07 PM;mastersingh24;I actually refused to fix this for any container other than fabric-tools.

I don't understand why we are using the peer container to run bash commands.;;;","20/Jan/19 9:38 PM;mastersingh24;I'm closing this as it is not valid and we need to stop misusing the images we build.;;;","21/Jan/19 12:10 PM;denyeart;[~latitiah] What were you trying to use bash for?  Are you able to use ash or sh instead?;;;","22/Jan/19 1:53 AM;latitiah;There are a good number of tests that are executed using the cli environment. The images are not being misused, but actually calling commands that are built into the images. We don't always use an SDK during execution - as there is a CLI interface for the peer, we should be able to use and test it.

This is a valid issue as bash is something that was supported and it is no longer supported with this latest update. Valid, fabric-based commands are being executed with these images - we are not misusing them.  As long as we have a CLI interface for the peers, we should make sure that our users are able to actually use that interface effectively. If there is a reason to not include or to block the use of bash, please state the thought(s) behind that, don't assume anyone is doing something wrong. In certain instances, there are commands that are executed before the 'peer node start' command (such as fabric-ca-client, for example).

I'm all for cutting down the extra cruft from the images, but we should be careful to not cut out useful functionality.

I'm not against using sh. If the decision is to support sh and ash, but not bash, I think it's worth stating why. Personally, I think that using bash with the CLI is better, but I am open to hearing arguments against it.;;;","22/Jan/19 2:09 AM;denyeart;Ok, I've re-opened to await response from [~mastersingh24]

Minimally we would need a release note explaining that bash is no longer available in v2.0 and to use ash or sh instead. I've flagged as Release Note Required.;;;","23/Feb/19 6:20 PM;mastersingh24;We really need to stop doing unsupported things in our samples and/or tests.  For testing, you can build whatever you want but should not be abusing the images.;;;",,,,,,,,,,,,,,,,,,,,,,
Include collection updates for ledger statelistener,FAB-13748,36922,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,18/Jan/19 12:53 PM,23/Jan/19 3:02 AM,28/Oct/23 3:04 AM,23/Jan/19 3:02 AM,,,,,,,,,,fabric-ledger,,,,,0,,,,,Currently the information provided to a state listener includes only public data updates. Updates of hashes in a collection namespace may also be useful for detecting a change in the private data space.,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i007o7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jan/19 1:13 PM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/28800/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"bootstrap.sh Shows an error: ""[: too many arguments""",FAB-13749,36923,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ynamiki,ynamiki,ynamiki,18/Jan/19 1:33 PM,14/May/19 8:33 AM,28/Oct/23 3:04 AM,05/Feb/19 10:11 PM,v1.4.0,,,,,v2.0.0,,,,fabric-installers,,,,,0,,,,,"As shown by the [document|https://hyperledger-fabric.readthedocs.io/en/release-1.4/install.html], I tried to install binaries by the script and got an error message saying that {{[: too many arguments}}

{code}
$ curl -sSL http://bit.ly/2ysbOFE | bash -s 1.4.0
bash: line 181: [: too many arguments

Installing hyperledger/fabric-samples repo
...
{code}

My environment:
{code}
$ cat /etc/lsb-release 
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=18.04
DISTRIB_CODENAME=bionic
DISTRIB_DESCRIPTION=""Ubuntu 18.04.1 LTS""
$ bash --version
GNU bash, version 4.4.19(1)-release (x86_64-pc-linux-gnu)
Copyright (C) 2016 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
{code}",,obernin,ynamiki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,69bfba80a42a6948161bbcd01c775b9e8911529a,Unset,No,,,"1|i007of:",,,,Unset,Unset,,,,"$ curl -sSL http://bit.ly/2ysbOFE | bash -s 1.4.0
bash: line 181: [: too many arguments

Installing hyperledger/fabric-samples repo
...",,Unset,,,,,,Unset,,Unset,,(Please add usage information),obernin,ynamiki,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jan/19 2:09 PM;ynamiki;https://gerrit.hyperledger.org/r/28803;;;","13/May/19 10:33 PM;obernin;This is still broken in master.

 

The current code is 

  if [ -n ""$1"" ] -a [ ""${1:0:1}"" != ""-"" ]; then
    VERSION=$1;shift
    if [ -n ""$1"" ] -a [ ""${1:0:1}"" != ""-"" ]; then
      CA_VERSION=$1;shift
      if [ -n ""$1"" ] -a [ ""${1:0:1}"" != ""-"" ]; then 
        THIRDPARTY_IMAGE_VERSION=$1;shift
      fi
    fi
  fi

[https://github.com/hyperledger/fabric/blob/master/scripts/bootstrap.sh#L182]

 

I believe the closing & opening brackets in the middle (on both side of the -a) should be removed;;;","14/May/19 8:33 AM;ynamiki;[~obernin], please refer to FAB-15316 for the error. It has been fixed.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Chain should properly halt itself if it's removed while being disconnected,FAB-13750,36926,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Done,yacovm,guoger,guoger,18/Jan/19 6:45 PM,05/Mar/19 9:06 AM,28/Oct/23 3:04 AM,25/Feb/19 3:08 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,"If a chain is removed from consenter set *while it is disconnected*, it should still be able to properly halt itself",,guoger,kchristidis,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007p3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,kchristidis,yacovm,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jan/19 8:19 PM;yacovm;I think what we need to do, is to use the cluster's block puller to probe all system channel OSNs and find:
* The latest config block
* Whether we're in the channel or not.

There is already a bunch of code that does that under orderer/common/cluster, we should just re-use it and present it in a consumable manner to the chain.

I'll take on this.;;;","19/Jan/19 2:08 AM;kchristidis;I'm wondering whether there is a simpler approach to this.
 # Assume that node N1 is disconnected from the network at time T1, when the consenters in channel C1 are N1, N2, N3, N4.
 # At time T2 > T1, a quorum in C1 decides to remove N1 from its consenter set.
 # At time T3 > T2, N1's network partition is restored and it attempts to reconnect with N2, N3, and N4 for the C1 cluster.
 # N2, N3, and N4 will reject these connections.
 # Shouldn't N1 stop trying after a certain time if these connections keep getting rejected? Isn't this a clear sign that C1 has moved on?

What does this solution overlook or exposes us to?;;;","19/Jan/19 2:26 AM;yacovm;When you (an evicted OSN) is going to be restarted, you're going to have the same issue over and over again, though. 
Plus - that also means you can't re-add the removed OSN to the channel because it would never register the channel in the inactive chains.

I really think we should just pull that one extra config block that tells you that you are evicted, commit it to the ledger, so that you can actually track periodically whether you're in the chain or outside it. ;;;","19/Jan/19 4:17 AM;kchristidis;{quote}Plus - that also means you can't re-add the removed OSN to the channel because it would never register the channel in the inactive chains.{quote}
Can you expand on this?

{quote}I think what we need to do, is to use the cluster's block puller to probe all system channel OSNs and find:{quote}
The problem with this is: what happens if N2, N3, and N4 are serving C1 just fine, even though they are no longer part of the system channel? Isn't this theoretically possible?;;;","19/Jan/19 5:49 AM;yacovm;{quote}    Plus - that also means you can't re-add the removed OSN to the channel because it would never register the channel in the inactive chains.{quote}

I meant, that - when an OSN boots up, it looks at chains it has in the ledger and if a chain contains a last config block that doesn't contain its TLS certificate - it deduces it's not in the channel, and then it starts an inactive.Chain instead of an etcdraft.Chain.
In the background, it starts monitoring the system channel OSNs once per 5 minutes (max) to see if it's added to the channel. If it is added to the channel, it pulls the blocks and then overwrites the inactive.Chain with an etcdraft.Chain and joins the party.

If we don't detect an eviction of an OSN from the channel and pull the block that evicts it -  it also means we would never start an inactive chain when it restarts next time, and that's just a shame.

{quote}The problem with this is: what happens if N2, N3, and N4 are serving C1 just fine, even though they are no longer part of the system channel? Isn't this theoretically possible?{quote}
If an OSN is not in the system channel it should be removed, because it leads to a state fork. 

;;;","19/Jan/19 6:03 AM;kchristidis;{quote}If we don't detect an eviction of an OSN from the channel and pull the block that evicts it - it also means we would never start an inactive chain when it restarts next time, and that's just a shame.{quote}
Ah, that's a good point. I had forgotten about the periodic polling of the system channel OSNs.

{quote}If an OSN is not in the system channel it should be removed, because it leads to a state fork.{quote}
Hmm. Why?;;;","19/Jan/19 6:17 AM;yacovm;because it will reply ""channel not exists"" for channels that are created after its eviction, while other OSNs will reply that the channel does exist. 
It is in a way, a state fork though a mild one.;;;","19/Jan/19 6:26 AM;kchristidis;A stretch but you're right.

The system channel notion will start giving us trouble down the road, esp. when BFT comes. Was hoping for something that would work in a BFT context, even if it was rougher, which is what I was getting at with my proposal. But it's got holes.

+1 on proceeding as you suggest.;;;","04/Feb/19 11:04 PM;kchristidis;[~yacovm]: Can you post about the issue that you're bumping into (generic ""end of file"" error?), and your workaround with the gRPC status?;;;","04/Feb/19 11:11 PM;yacovm;only when(if) it works ;);;;",,,,,,,,,,,,,,,,,,,
Idemix doc link example is invalid,FAB-13751,36929,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,pandrejko,pandrejko,pandrejko,18/Jan/19 9:46 PM,19/Feb/19 11:02 PM,28/Oct/23 3:04 AM,17/Feb/19 11:26 PM,,,,,,v1.3.0,v1.4.0,v2.0.0,,fabric-docs,,,,,0,,,,,"{color:#444444}In the page {color}[https://hyperledger-fabric.readthedocs.io/en/release-1.3/idemix.html]{color:#444444} there is this statement just above the section labeled Current Limitations: ""For an example of using the cid library to retrieve these attributes, see this java SDK example."", yet following the link takes one to the example_cc0 chaincode that doesn't use CID{color}

 

{color:#444444}We need to find a better example or remove this link. {color}",,angelo.decaro,denyeart,pandrejko,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrp:f",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,denyeart,pandrejko,rickr,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.3,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jan/19 9:49 PM;pandrejko;[~dubovitskaya] - Not sure if you are the right person to contact about this?  Is there a better link we could point them to for using the cid library?;;;","14/Feb/19 12:06 AM;pandrejko;[~denyeart] Who might be able to help us with this link besides Maria?;;;","14/Feb/19 3:18 AM;denyeart;[~skarim] [~angelo.decaro] [~rickr] Is there an example of using Idemix attributes in a Java SDK test that we can point to from docs?;;;","14/Feb/19 4:29 AM;rickr;https://github.com/hyperledger/fabric-sdk-java/blob/8044bac1bfe9baf9d6360b067e0d6b5445cc953d/src/test/java/org/hyperledger/fabric/sdkintegration/End2endIdemixIT.java#L121?

and for chaincode :
https://github.com/hyperledger/fabric-sdk-java/blob/8044bac1bfe9baf9d6360b067e0d6b5445cc953d/src/test/fixture/sdkintegration/gocc/sampleIdemix/src/github.com/example_cc/example_cc.go#L88 ;;;","14/Feb/19 4:52 AM;denyeart;Adding release-1.4 links...

 

For an example of setting an affiliation in the Java SDK see:

[https://github.com/hyperledger/fabric-sdk-java/blob/release-1.4/src/test/java/org/hyperledger/fabric/sdkintegration/End2endIdemixIT.java#L121]

For an example of using the CID library in go chaincode to retrieve attributes, see:

[https://github.com/hyperledger/fabric-sdk-java/blob/release-1.4/src/test/fixture/sdkintegration/gocc/sampleIdemix/src/github.com/example_cc/example_cc.go#L88]

 ;;;","14/Feb/19 11:55 PM;pandrejko;1.3 CR: [https://gerrit.hyperledger.org/r/29301]

1.4 CR [https://gerrit.hyperledger.org/r/#/c/29303/]

Master CR: [https://gerrit.hyperledger.org/r/29306];;;","15/Feb/19 6:29 PM;angelo.decaro;Hi [~denyeart], no, there is no support for that.;;;","19/Feb/19 10:34 PM;denyeart;[~angelo.decaro] The sample shows how to retrieve an out of the box attribute (in this case ""ou""). I assume you mean custom attributes are not supported, which is already documented.;;;","19/Feb/19 10:36 PM;angelo.decaro;[~denyeart], correct. Anyway, the OU cannot be retrieved at the current stage. It is not offered by the java-sdk API.;;;","19/Feb/19 11:02 PM;denyeart;[~angelo.decaro] I don't understand what you mean by no OU support... the example shows setting in java sdk:
{code:java}
new RegistrationRequest(idemixUser.getName(), ""org1.department1""){code}
And retrieving in chaincode:
{code:java}
	ou, found, err := cid.GetAttributeValue(stub, ""ou"");
        	if err != nil {
        		return shim.Error(""Failed to get attribute 'ou'"")
        	}
        	if !found {
        		return shim.Error(""attribute 'ou' not found"")
        	}
        	if !strings.HasSuffix(ou, ""department1"") {
        		return shim.Error(fmt.Sprintf(""Incorrect 'ou' returned, got '%s' expecting to end with 'department1'"", ou))
        	}{code}
Maybe I don't understand the connection between affiliation and OU.  The CA docs say:

 
{code:java}
All enrollment certificates issued by the fabric-ca-server have organizational units (or “OUs” for short) as follows:

The root of the OU hierarchy equals the identity type An OU is added for each component of the identity’s affiliation
For example, if an identity is of type peer and its affiliation is department1.team1, the identity’s OU hierarchy (from leaf to root) is OU=team1, OU=department1, OU=peer.
{code}
 

So the example and docs do not seem to align.

Can you or [~skarim] help to explain this?  Do we need a fix or a doc update?

 ;;;",,,,,,,,,,,,,,,,,,,
Review and cleanup docker related infrastructure in makefile and docker-env.mk,FAB-13752,36930,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,18/Jan/19 9:51 PM,13/Feb/19 4:56 AM,28/Oct/23 3:04 AM,13/Feb/19 4:56 AM,,,,,,,,,,fabric-build,,,,,0,hygiene,ipm,ipm-planned,,"[~mastersingh24] recently changed how docker images are built for fabric and it looks like a lot of what’s in docker-env.mk is now abandoned; perhaps some of it was unintentional.

For example, DOCKER_DYNAMIC_LINK and DOCKER_GO_LDFLAGS no longer get used.  I noticed this while chasing down if and how we build static binaries of the peer and orderer in master. 

I expect there may be additional things to cleanup as well.

/cc [~mastersingh24]",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzq91:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
LTE panic: When executing test using CouchDB,FAB-13753,36931,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,wenjian,latitiah,latitiah,18/Jan/19 10:18 PM,05/Jul/19 4:53 PM,28/Oct/23 3:04 AM,07/May/19 10:56 PM,v2.0.0,,,,,v2.0.0,,,,fabric-ledger,,,,,0,ci-failure,,,,"The following error is seen when executing benchmarks tests using CouchDB.
{code}
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x18 pc=0xfc1f5e]

goroutine 22 [running]:
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.(*CommonStorageDBProvider).RegisterHealthChecker(0xc0002a22d0, 0xc0002a22d0, 0xc0003782c0)
	/w/workspace/fabric-test-verify-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/common_storage_db.go:67 +0x5e
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.NewCommonStorageDBProvider(0x1356ba0, 0xc000366188, 0x1360de0, 0x1d01698, 0x0, 0x0, 0x2, 0x4, 0x0, 0xc000466680)
	/w/workspace/fabric-test-verify-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/common_storage_db.go:57 +0xec
github.com/hyperledger/fabric/core/ledger/kvledger.(*Provider).Initialize(0xc000466680, 0xc0003a8240, 0x0, 0x0)
	/w/workspace/fabric-test-verify-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:88 +0x25e
github.com/hyperledger/fabric/core/ledger/ledgermgmt.initialize(0xc0000303c0)
	/w/workspace/fabric-test-verify-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:73 +0x3fe
github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize.func1()
	/w/workspace/fabric-test-verify-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:53 +0x2a
sync.(*Once).Do(0x1d01760, 0xc000071e30)
	/opt/go/go1.11.1.linux.amd64/src/sync/once.go:44 +0xb3
github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize(0xc0000303c0)
	/w/workspace/fabric-test-verify-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:52 +0x55
github.com/hyperledger/fabric/test/tools/LTE/chainmgmt.newChainsMgr(0xc00000db40, 0xc000459bd0, 0x10c5d01, 0xc0000741d0)
	/w/workspace/fabric-test-verify-x86_64/gopath/src/github.com/hyperledger/fabric/test/tools/LTE/chainmgmt/chains.go:56 +0x130
github.com/hyperledger/fabric/test/tools/LTE/chainmgmt.InitTestEnv(0xc00000db40, 0xc000459bd0, 0x8f8601, 0x5c410e39)
	/w/workspace/fabric-test-verify-x86_64/gopath/src/github.com/hyperledger/fabric/test/tools/LTE/chainmgmt/testenv.go:34 +0x77
github.com/hyperledger/fabric/test/tools/LTE/experiments.BenchmarkInsertTxs(0xc0000ae680)
	/w/workspace/fabric-test-verify-x86_64/gopath/src/github.com/hyperledger/fabric/test/tools/LTE/experiments/insert_txs_test.go:44 +0x55
testing.(*B).runN(0xc0000ae680, 0x1)
	/opt/go/go1.11.1.linux.amd64/src/testing/benchmark.go:141 +0xb2
testing.(*B).run1.func1(0xc0000ae680)
	/opt/go/go1.11.1.linux.amd64/src/testing/benchmark.go:214 +0x5a
created by testing.(*B).run1
	/opt/go/go1.11.1.linux.amd64/src/testing/benchmark.go:207 +0x7d
exit status 2
FAIL	github.com/hyperledger/fabric/test/tools/LTE/experiments	0.299s
{code}

Here is the link to the execution in Jenkins: https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/2469/testReport/junit/ledger_lte_smoke/smoke_ledger/test_FAB_9708_CouchDB_VaryNumTxs/

See the attached log.",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15321,,,,,,,,,,"18/Jan/19 10:19 PM;latitiah;output_Smoke_CouchDB_VaryNumTxs.log;https://jira.hyperledger.org/secure/attachment/16597/output_Smoke_CouchDB_VaryNumTxs.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,e082d5b09a4fbb0a657ccd2ccda0529cdaadc9a6,Unset,No,,,"1|hzwr6z:zz4",,,,Unset,Unset,Ledger v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
health_test.go Integration test failed - release-1.4,FAB-13755,36936,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,18/Jan/19 11:38 PM,19/Mar/19 7:57 PM,28/Oct/23 3:04 AM,21/Jan/19 11:58 PM,v1.4.0,,,,,,,,,fabric-build,,,,,0,ci-flake,,,,"Integration test failed in the nightly publish job as Couchdb was not available during the health check tests. This is the first fail in integration test with this error,

*Intermittent:* No
*Branch:* release-1.4
*Platform:* x86_64
*Error Snippet:*

{code:java}
00:42:43.851 [90m------------------------------[0m
00:42:43.851 [91m[1m• Failure [34.896 seconds][0m
00:42:43.851 [90mHealth [0m[0mCouchDB health checks [0m[90mwhen CouchDB is unavailable [0m[91m[1m[It] fails the health check [0m
00:42:43.851 [37m/w/workspace/fabric-nightly-release-job-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/health_test.go:130[0m
00:42:43.851 
00:42:43.851   [91mExpected error:
00:42:43.851       <*json.SyntaxError | 0xc0004964c0>: {
00:42:43.851           msg: ""unexpected end of JSON input"",
00:42:43.851           Offset: 0,
00:42:43.851       }
00:42:43.851       unexpected end of JSON input
00:42:43.851   not to have occurred[0m
{code}

*Build Logs:*
https://jenkins.hyperledger.org/view/Daily/job/fabric-nightly-release-job-release-1.4-x86_64/4/consoleFull",,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,782c4eea7aadf0cbdbb2f63afc0706fe81ac18ce,Unset,No,,,"1|i007qn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Jan/19 9:03 PM;mastersingh24;I don't think the issue is actually directly related to CouchDB ... also this passes when running in the release-1.4 branch in general.;;;","20/Jan/19 10:47 PM;mastersingh24;I ran this a few times and never hit the failure running `make integration-tests` on the release-1.4 branch;;;","21/Jan/19 12:03 AM;sambhavdutt;The integration tests have been passing for multiple builds on release-1.4;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
No longer able to execute gcc in fabric-tools,FAB-13757,36938,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,mastersingh24,latitiah,latitiah,19/Jan/19 12:03 AM,23/Feb/19 6:22 PM,28/Oct/23 3:04 AM,23/Feb/19 6:22 PM,v2.0.0,,,,,v2.0.0,,,,fabric-tools,,,,,0,,,,,"It is no longer possible to execute gcc in the fabric-tools images

{code}
$ docker run hyperledger/fabric-tools gcc
docker: Error response from daemon: OCI runtime create failed: container_linux.go:348: starting container process caused ""exec: \""gcc\"": executable file not found in $PATH"": unknown.
ERRO[0000] error waiting for container: context canceled
{code}
",,latitiah,mastersingh24,silliman,,,,,,,,,,,,,,,,,,,,,,FAB-13871,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,e082d5b09a4fbb0a657ccd2ccda0529cdaadc9a6,Unset,No,,,"1|i007r3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,mastersingh24,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Jan/19 8:51 PM;mastersingh24;[~latitiah]  - Where are you using this?;;;","21/Jan/19 12:59 AM;latitiah;This is being used in the OTE test tool.;;;","23/Feb/19 6:22 PM;mastersingh24;Another abuse of Docker images.  Create your own for tests if you need additional tools.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
PTE adds marbles02_private support to runPTE ,FAB-13758,36939,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,19/Jan/19 12:32 AM,22/Jan/19 11:25 PM,28/Oct/23 3:04 AM,22/Jan/19 11:25 PM,,,,,,,,,,fabric-quality,,,,,0,,,,,Add marbles02_private chaincode support to runPTE.sh,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i007rb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"19/Jan/19 5:02 AM;dongming;https://gerrit.hyperledger.org/r/#/c/28810/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Performance test: scale up traffic threads: no crashes, constant  mode concurrent invocations on 3*m threads/peer/channel (3 channels)",FAB-13760,36943,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,19/Jan/19 1:23 AM,06/Mar/19 1:28 AM,28/Oct/23 3:04 AM,21/Feb/19 1:12 AM,v2.0.0,,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,"h2. Setup
Same setup as in FAB-13601, with the following differences:
# 3 channels: {{channel1-3}}
# 3 peers with 1 peer/org
# all peers participating in all channels
# {{batchSize.maxMessageCount}} = 500
# logging level set to {{error}} (and if we see errors, then we can re-run test with debug-level logs in the orderer package per FAB-13597)

h2. Inputs
# Start 9*m thread transactions to each org's peer in each channel, i.e., the first 3 threads to the 3 orgs of {{channel1}}, the next 3 threads to the 3 orgs of {{channel2}},  and the last 3 threads to the 3 orgs of {{channel3}}. That makes a total of 9 threads when {{m}} = 1. Repeat traffic tests using increasing values of {{m}} = 1, 2, 3, ... until the overall TPS does not increase with a larger value for {{m}}.
# Each thread sends 10K invokes, using PTE constant mode, i.e. sending next transaction as soon as the previous one is sent to and ACK'd received by the ingress orderer.
# All transactions from a single thread will target the same orderer.
# The orderer load-balancing will be handled at the channel level, i.e. thread 1 will target O1, thread 2 O2 and thread 3 O3.

h2. Expectations
# No errors in the logs of peers and orderers.
# No failures or errors reported by PTE.
# All transaction events are received by PTE.
# TPS (Transactions Per Second) overall rates will be provided for each test (for the varying values of {{m}}).",,dongming,kchristidis,scottz,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14187,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|i006z8:",,,,Unset,Unset,Week ending 2019-Feb-15,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"Passed for m=1 (9 threads: 3 channels X 3 threads).
Defer the rest until later when we can run more traffic threads.

Passed with m=1-15 (9 - 135 threads)
However, in the first test run, we saw SERVICE_UNAVAILABLE in the orderer log (FAB-14187).  The test passed when we ran it again.",System Test,,(Please add usage information),dongming,kchristidis,scottz,yoheiueda,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"19/Jan/19 5:00 AM;kchristidis;# What is 9m thread transactions?
# What does ""until the TPS becomes stable"" sentence mean?
# Can we describe this test as a function of the one described in FAB-13641?;;;","19/Jan/19 5:04 AM;dongming;9m threads mean 9 thread if m=1, 18 threads if m=2, etc;;;","19/Jan/19 5:06 AM;kchristidis;(Understood. See follow-up questions, updated original comment. Thanks!);;;","19/Jan/19 5:18 AM;dongming;""until the TPS is stable"": With the low number of threads, we may may not send sufficient transactions to stress the blockchain.  We plan to increase to the number of threads to a point that hits the max throughput of the blockchain network.

This task focuses on 3 channel while FAB-13641 focuses on 1 channel.;;;","19/Jan/19 5:23 AM;kchristidis;{quote}With the low number of threads, we may may not send sufficient transactions to stress the blockchain.  We plan to increase to the number of threads to a point that hits the max throughput of the blockchain network.{quote}
How do we plan to identify the max throughput of the network? Can we add this to the description?;;;","19/Jan/19 5:26 AM;kchristidis;{quote}This task focuses on 3 channel while FAB-13641 focuses on 1 channel.{quote}
We do not 3m threads in FAB-13641 though. Is there a particular reason for this?

At any rate, once we identify the delta, let's describe this JIRA simply by its delta compared to FAB-13641, i.e.

""Like FAB-13641, except we'll now do: ..."";;;","19/Jan/19 7:41 AM;kchristidis;^^ Done.;;;","19/Feb/19 8:41 AM;scottz;I mark this as ""Executing"", while we try to reproduce bug FAB-14187.;;;",,,,,,,,,,,,,,,,,,,,,
Check collection endorsement policy,FAB-13761,36944,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,19/Jan/19 2:18 AM,04/Apr/19 10:15 PM,28/Oct/23 3:04 AM,04/Apr/19 10:15 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007sf:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create tests for validator routing layer,FAB-13762,36946,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,ales,ales,ales,19/Jan/19 2:47 AM,29/Jul/19 10:56 PM,28/Oct/23 3:04 AM,29/Jul/19 10:56 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rq:zzw",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Jun/19 3:14 AM;ales;https://gerrit.hyperledger.org/r/c/fabric/+/31766;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Healthcheck for chaincode server,FAB-13763,36947,35433,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,19/Jan/19 3:02 AM,24/Jan/19 12:07 AM,28/Oct/23 3:04 AM,24/Jan/19 12:07 AM,,,,,,v1.4.1,v2.0.0,,,,,,,,0,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007t3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Jan/19 3:18 AM;mastersingh24;https://gerrit.hyperledger.org/r/28815;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Healthcheck for peer server,FAB-13764,36948,35433,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,mastersingh24,mastersingh24,mastersingh24,19/Jan/19 3:03 AM,23/Feb/19 6:18 PM,28/Oct/23 3:04 AM,23/Feb/19 6:18 PM,v1.4.1,v2.0.0,,,,,,,,,,,,,0,,,,,"Used by endorser, discovery and deliver",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007tb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Healthcheck for admin server,FAB-13765,36949,35433,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,mastersingh24,mastersingh24,mastersingh24,19/Jan/19 3:04 AM,23/Feb/19 6:18 PM,28/Oct/23 3:04 AM,23/Feb/19 6:18 PM,,,,,,,,,,,,,,,0,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007tj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
intermittent test failure in orderer/consensus/etcdraft/chain_test,FAB-13766,36950,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,guoger,sykesm,sykesm,19/Jan/19 3:46 AM,19/Mar/19 7:57 PM,28/Oct/23 3:04 AM,28/Feb/19 2:20 PM,,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"{code}
00:23:35.155 • Failure in Spec Setup (BeforeEach) [5.115 seconds]
00:23:35.155 Chain
00:23:35.155 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:63
00:23:35.155   Multiple Raft nodes
00:23:35.155   /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1138
00:23:35.155     when reconfiguring raft cluster
00:23:35.155     /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1269
00:23:35.156       reconfiguration [BeforeEach]
00:23:35.156       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1339
00:23:35.156         adding node to the cluster
00:23:35.156         /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1378
00:23:35.156 
00:23:35.156         Timed out after 5.000s.
00:23:35.156         Expected
00:23:35.156             <int>: 0
00:23:35.156         to equal
00:23:35.157             <int>: 1
00:23:35.157 
00:23:35.157         /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1331
00:23:35.157 ------------------------------
{code}",,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13371,,,"19/Jan/19 3:47 AM;sykesm;console-timestamp.log.txt;https://jira.hyperledger.org/secure/attachment/16599/console-timestamp.log.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007tr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Jan/19 3:46 AM;sykesm;Noted in https://gerrit.hyperledger.org/r/c/28814/;;;","28/Feb/19 2:20 PM;guoger;Let's reopen this when it occurs again. Tentatively close for now.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
All perf_couchdb test cases are failing in the daily lte tests with Assertion error,FAB-13767,36951,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,19/Jan/19 4:44 AM,31/Jul/19 4:49 AM,28/Oct/23 3:04 AM,31/Jul/19 4:49 AM,v1.4.0,,,,,,,,,fabric-quality,,,,,0,ci-failure,,,,"The test cases for all perf_couchdb(9 in all) are failing twice in a row in the daily tests for ledger_lte. The lte tests took around 2 hours to complete, a successful lte test run takes an average of four hours. There were no changes in fabric-test in the recent commit that might have caused this.

*Consistent:* Yes
*Branch:* master, release-1.4

*Error Snippet:*

{code:java}
-->test_FAB_3870_VaryNumParallelTxPerChain(self)
22:13:24 E       AssertionError: VaryNumParallelTxPerChain for CouchDB performance testfailed. 
22:13:24 E       Please check the logfile output_VaryNumParallelTxPerChain_couchdb.log for more details.
22:13:24 
22:13:24 ledger_lte.py:217: AssertionError
===========
--> def test_FAB_3871_VaryNumChain(self):

22:13:24 ledger_lte.py:239: AssertionError
===========
-->def test_FAB_3872_VaryNumParallelTxWithSingleChain(self)

ledger_lte.py:260: AssertionError
===========
--> def test_FAB_3873_VaryNumChainWithNoParallelism(self)

22:13:24 ledger_lte.py:281: AssertionError
===========
--> def test_FAB_3874_VaryKVSize(self):

22:13:24 ledger_lte.py:300: AssertionError
===========
--> def test_FAB_3875_VaryBatchSize(self):

22:13:24 ledger_lte.py:322: AssertionError
===========
--> def test_FAB_3876a_VaryNumWritesInEachTx(self):

22:13:24 ledger_lte.py:343: AssertionError
===========
--> def test_FAB_3876b_VaryNumReadsInEachTx(self):

22:13:24 ledger_lte.py:364: AssertionError
===========
def test_FAB_3877_VaryNumTxs(self):

22:13:24 ledger_lte.py:386: AssertionError
==================== 9 failed, 9 passed in 7066.10 seconds =========
{code}


*Build Logs:*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-lte-release-1.4-x86_64/31/LTE_Test_Logs/

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-lte-master-x86_64/137/LTE_Test_Logs/",,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,a8492fe(release-1.4),Unset,No,,,"1|i007tz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Feb/19 12:17 AM;sambhavdutt;All Couchdb tests are still failing in the daily lte tests.

*Failed Test Cases*

{code:java}
ledger_lte.perf_couchdb.test_FAB_3870_VaryNumParallelTxPerChain

ledger_lte.perf_couchdb.test_FAB_3871_VaryNumChain

ledger_lte.perf_couchdb.test_FAB_3872_VaryNumParallelTxWithSingleChain

ledger_lte.perf_couchdb.test_FAB_3873_VaryNumChainWithNoParallelism

ledger_lte.perf_couchdb.test_FAB_3874_VaryKVSize

ledger_lte.perf_couchdb.test_FAB_3875_VaryBatchSize

ledger_lte.perf_couchdb.test_FAB_3876a_VaryNumWritesInEachTx

ledger_lte.perf_couchdb.test_FAB_3876b_VaryNumReadsInEachTx

ledger_lte.perf_couchdb.test_FAB_3877_VaryNumTxs
{code}

*Build Logs*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-lte-master-x86_64/161/;;;","13/May/19 11:08 PM;sambhavdutt;All CouchDB testes have been passing in *release-1.4* twice in a row, 

*Commit:* 7d020cb

{code:java}
22:42:01 ledger_lte.py::perf_couchdb::test_FAB_3870_VaryNumParallelTxPerChain PASSED
22:47:24 ledger_lte.py::perf_couchdb::test_FAB_3871_VaryNumChain PASSED
22:58:22 ledger_lte.py::perf_couchdb::test_FAB_3872_VaryNumParallelTxWithSingleChain PASSED
23:06:14 ledger_lte.py::perf_couchdb::test_FAB_3873_VaryNumChainWithNoParallelism PASSED
23:12:08 ledger_lte.py::perf_couchdb::test_FAB_3874_VaryKVSize PASSED
23:16:18 ledger_lte.py::perf_couchdb::test_FAB_3875_VaryBatchSize PASSED
23:21:33 ledger_lte.py::perf_couchdb::test_FAB_3876a_VaryNumWritesInEachTx PASSED
23:27:07 ledger_lte.py::perf_couchdb::test_FAB_3876b_VaryNumReadsInEachTx PASSED
23:43:14 ledger_lte.py::perf_couchdb::test_FAB_3877_VaryNumTxs PASSED
{code}

*Build Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-lte-release-1.4-x86_64/137/LTE_Test_Logs/
;;;","29/May/19 11:00 PM;sambhavdutt;+perf_couchdb.test_FAB_3875_VaryBatchSize+ failed, observed that couchdb tried to connect 4 times but failed to connect due to timeout

*Branch:* release-1.4
*fabric-test commit:* 97dac67
*Error Snippet:*
{code:java}
[33m2019-05-29 03:29:58.361 UTC [couchdb] handleRequest -> WARN 001[0m Retrying couchdb request in 125ms. Attempt:1  Couch DB Error:badmatch,  Status Code:500 Internal Server Error  Reason:timeout
[33m2019-05-29 03:29:58.365 UTC [couchdb] handleRequest -> WARN 002[0m Retrying couchdb request in 125ms. Attempt:1  Couch DB Error:badmatch,  Status Code:500 Internal Server Error  Reason:timeout
[33m2019-05-29 03:29:58.372 UTC [couchdb] handleRequest -> WARN 003[0m Retrying couchdb request in 125ms. Attempt:1  Couch DB Error:badmatch,  Status Code:500 Internal Server Error  Reason:timeout
[33m2019-05-29 03:29:58.376 UTC [couchdb] handleRequest -> WARN 004[0m Retrying couchdb request in 125ms. Attempt:1  Couch DB Error:badmatch,  Status Code:500 Internal Server Error  Reason:timeout
[33m2019-05-29 03:29:58.386 UTC [couchdb] handleRequest -> WARN 005[0m Retrying couchdb request in 125ms. Attempt:1  Couch DB Error:badmatch,  Status Code:500 Internal Server Error  Reason:timeout
panic: Error:error reading response body: invalid byte in chunk length

goroutine 505 [running]:
github.com/hyperledger/fabric/test/tools/LTE/common.PanicOnError(0x1332920, 0xc0031e1fa0)
	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/test/tools/LTE/common/util.go:24 +0xa8
github.com/hyperledger/fabric/test/tools/LTE/chainmgmt.(*Chain).startBlockPollingAndCommit.func1(0xc001b70540)
	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/test/tools/LTE/chainmgmt/chains.go:124 +0x80
created by github.com/hyperledger/fabric/test/tools/LTE/chainmgmt.(*Chain).startBlockPollingAndCommit
	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/test/tools/LTE/chainmgmt/chains.go:117 +0x5e
exit status 2
FAIL	github.com/hyperledger/fabric/test/tools/LTE/experiments	63.844s
Failed to run the test.
Stopping couchdb container (id: bb3bc2e5eeba)...
{code}

*Build Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-lte-release-1.4-x86_64/151/LTE_Test_Logs/;;;","31/Jul/19 4:49 AM;vijaypunugubati;Working as expected in the recent build on master and release-1.4, closing the bug.

Please check below links for the recent build success.

[https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-lte-master-x86_64/308/console]

[https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-lte-release-1.4-x86_64/189/consoleFull];;;",,,,,,,,,,,,,,,,,,,,,,,,,
Add UT code to ABAC sample Chaincode,FAB-13769,36954,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yuki-kon,yuki-kon,yuki-kon,19/Jan/19 6:19 AM,05/Jun/19 9:07 PM,28/Oct/23 3:04 AM,05/Jun/19 9:07 PM,v2.0.0,,,,,v2.0.0,,,,fabric-samples,,,,,0,,,,,"FAB-5644 implemented GetCreator() method to MockStub.
This method is called to use MockStub to test Chaincode that uses the `cid` package for ABAC.
In order to show how to use it, this task adds UT code to `fabric-samples/chaincode/abac/go`.",,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-5644,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007un:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yuki-kon,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Jan/19 9:25 AM;yuki-kon;CR is posted here. https://gerrit.hyperledger.org/r/#/c/28826/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"refactor postSetupV11, no need to check for error",FAB-13770,36955,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,kutenglaoshu,kutenglaoshu,19/Jan/19 4:03 PM,23/Jan/20 7:32 AM,28/Oct/23 3:04 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,0,stale-item,,,,"principalBytes, err := proto.Marshal(&m.MSPRole\{Role: m.MSPRole_CLIENT, MspIdentifier: msp.name})
if err != nil { 
    return errors.Wrapf(err, ""failed creating MSPRole_CLIENT"") 
}
// we constructed a valid object. No need to check for error, so delete check
principalBytes, _ := proto.Marshal(&m.MSPRole\{Role: m.MSPRole_CLIENT, MspIdentifier: msp.name})",,kutenglaoshu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007vb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kutenglaoshu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Expose constructors for rwset policy evaluator,FAB-13771,36956,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,19/Jan/19 5:40 PM,04/Apr/19 10:15 PM,28/Oct/23 3:04 AM,04/Apr/19 10:15 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007vj:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Inject read-write set validator dependency,FAB-13772,36957,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,19/Jan/19 5:58 PM,04/Apr/19 10:15 PM,28/Oct/23 3:04 AM,04/Apr/19 10:15 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007vr:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove system chaincode provider from validation,FAB-13773,36959,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,19/Jan/19 6:34 PM,06/Mar/19 12:51 AM,28/Oct/23 3:04 AM,06/Mar/19 12:51 AM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007w7:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Uncomment tests once collection EP retriever is injected,FAB-13774,36960,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,ales,ales,ales,19/Jan/19 7:25 PM,04/Apr/19 10:15 PM,28/Oct/23 3:04 AM,04/Apr/19 10:15 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007wf:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"""docs badge"" in fabric master, release-1.3, 1.2,1,1 is linking to ""latest"" docs",FAB-13775,36492,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,pandrejko,rameshthoomu,rameshthoomu,07/Jan/19 2:19 AM,19/Jan/19 11:17 PM,28/Oct/23 3:04 AM,19/Jan/19 11:17 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,"""docs badge"" in fabric master, release-1.3, 1.2,1,1 is linking to ""latest"" docs. See the below link here [https://github.com/hyperledger/fabric/blob/release-1.3/README.md] the docs badge in above branches README.md is pointing to latest docs build which is release-1.4",,joe-alewine,pandrejko,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0050f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,pandrejko,rameshthoomu,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.3,release-1.4,release-2.5,release-2.4,release-1.0,main,release-1.1,release-1.2,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Jan/19 9:57 PM;pandrejko;[~joe-alewine] Can you tell if this related to the same problem with the broken links we looked at last week or is this something different?;;;","07/Jan/19 10:10 PM;joe-alewine;Maybe I'm just in the slow group but I'm not sure what the ""docs badge"" is or what the issue is.;;;","08/Jan/19 1:15 AM;pandrejko;Talked to Ramesh - I understand the issue now. Example of the fix for release 1-2
 * 
[https://github.com/rameshthoomu/fabric/commit/2dbd6ee0fef8b602c217bb79000fe6dff5e0f691
]

Also , while in here, he suggested we add a link to the Hyperledger rocket chat as a join chat link, like they do in Quilt
 * 
[https://github.com/rameshthoomu/quilt/edit/master/README.md];;;","08/Jan/19 2:20 AM;pandrejko;release-1.0: [https://gerrit.hyperledger.org/r/28823]

release-1.1: [https://gerrit.hyperledger.org/r/28822]

release-1.2: [https://gerrit.hyperledger.org/r/28531]

release-1.3: [https://gerrit.hyperledger.org/r/28824]

release-1.4: [https://gerrit.hyperledger.org/r/28820]

master: https://gerrit.hyperledger.org/r/28825

 

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Deadlock in channel creation via repeating `peer channel create`,FAB-13776,36961,36295,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,guoger,guoger,20/Jan/19 1:30 PM,25/Feb/19 10:33 PM,28/Oct/23 3:04 AM,25/Feb/19 10:33 PM,,,,,,,,,,,,,,,0,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4839/console

sometimes (most of time?) in integration tests, we create channel via cli {{peer channel create}}, and reattempt is done by [Eventually|https://github.com/hyperledger/fabric/blob/c95e3b649aa568b2a45a9cb973121ff86669aa50/integration/nwo/network.go#L732]

{{peer channel create}} sends a channel creation tx to orderer, and try to get the genesis block of that channel back.

However, while the submission of channel creation could *succeed*, retrieval of genesis block might *fail* (while the channel is still being created and genesis block is not available). Next attempt would fail in this case, due to advanced config version. Here, we have a deadlock.",,guoger,yacovm,,,,,,,,,,,,,,,,,,,,,,,FAB-13996,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007wn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Jan/19 4:13 PM;guoger;cc [~sykesm] [~yacovm];;;","20/Jan/19 7:33 PM;yacovm;But doesn't the peer channel create loop until it succeeds?

{code}func getGenesisBlock(cf *ChannelCmdFactory) (*cb.Block, error) {
	timer := time.NewTimer(timeout)
	defer timer.Stop()

	for {
		select {
		case <-timer.C:
			cf.DeliverClient.Close()
			return nil, errors.New(""timeout waiting for channel creation"")
		default:
			if block, err := cf.DeliverClient.GetSpecifiedBlock(0); err != nil {
				cf.DeliverClient.Close()
				cf, err = InitCmdFactory(EndorserNotRequired, PeerDeliverNotRequired, OrdererRequired)
				if err != nil {
					return nil, errors.WithMessage(err, ""failed connecting"")
				}
				time.Sleep(200 * time.Millisecond)
			} else {
				cf.DeliverClient.Close()
				return block, nil
			}
		}
	}
}
{code}

maybe we just need to pass a timeout to the command in nwo?;;;","21/Jan/19 12:09 AM;guoger;[~yacovm] you were right, timeout was 5 seconds by default, and this has exceeded
{code}
20:15:53 [e][peer-channel-create] Error: timeout waiting for channel creation
{code}
because there happens to be a leader re-election at that time. And the cause is slow wal sync
{code}
20:15:53 [e][OrdererOrg.orderer1] 2019-01-18 12:14:54.283574 W | wal: sync duration of 1.041177978s, expected less than 1s
{code}


I've seen slow sync of wal in our CI several times. My suggestion here, is that if this is only observed in CI (maybe slow disk?), we could just increase default election timeout in integration tests.

Otherwise, we should investigate the cause of slow wal sync. I've requested system testers to keep an eye on this.;;;","31/Jan/19 10:22 PM;guoger;Failure seen here:

{code}
[Fail] EndToEnd Crash Fault Tolerance when an orderer is behind the latest snapshot on leader [It] catches up using the block stored in snapshot
{code}

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/5164/;;;","25/Feb/19 10:30 PM;guoger;With raft lib version being bumped, the probability of this happening is fairly low, and we can backlog this for now.;;;",,,,,,,,,,,,,,,,,,,,,,,,
Fix private data tutorial instructions for base64,FAB-13777,36963,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,21/Jan/19 2:19 AM,05/Jun/20 5:49 AM,28/Oct/23 3:04 AM,17/Jul/19 11:51 AM,,,,,,v1.4.1,v2.0.0,,,fabric-docs,,,,,0,,,,,"{color:#172b4d}Private data tutorial instructions:{color}
{code:java}
export MARBLE=$(echo -n ""{\""name\"":\""marble1\"",\""color\"":\""blue\"",\""size\"":35,\""owner\"":\""tom\"",\""price\"":99}"" | base64){code}
{color:#172b4d}fails on linux with error:{color}
{code:java}
Error: error parsing transient string: invalid character '\n' in string literal - proposal response: <nil>{code}
Reason is because base64 command on linux adds a problematic newline character to wrap after every 76 characters.

To fix this you can use
{code:java}
-w 0{code}
to eliminate the wrapping.

However -w option is not available in Alpine, therefore we will manually remove any existing newline characters, this will work across all platforms:
{code:java}
export MARBLE=$(echo -n ""{\""name\"":\""marble1\"",\""color\"":\""blue\"",\""size\"":35,\""owner\"":\""tom\"",\""price\"":99}"" | base64 | tr -d \\n){code}
Thanks to tip at: https://superuser.com/a/1225334",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,FAB-13834,,,,,,,,,FAB-12056,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007x3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,mergify/bp/release-2.2/pr-4374,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,main,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,mergify/bp/release-2.2/pr-3750,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,release-1.4,release-2.5,release-2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Jan/19 1:55 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/28837/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
No broadcast response to client from ingress OSN when different leader OSN is stopped,FAB-13778,36964,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,,scottz,scottz,21/Jan/19 3:13 AM,22/Feb/19 2:13 PM,28/Oct/23 3:04 AM,18/Feb/19 1:15 AM,v2.0.0,,,,,v2.0.0,,,,fabric-orderer,,,,,0,raft,,,,"h2. Steps to Reproduce:

Set up and run testcase scenario2 as defined in FAB-13604.
h2. Observed:

A transaction broadcast on the application testorgchannel1 to OSN1 was never ACKed. Nor NACKed. Interestingly, this was the first transaction after the OSN1 orderer logs indicated a leadership change in testorgchannel1 from OSN3 to OSN2, which happened after we stopped OSN2, at 2019-01-16 15:30:11.190 in the attached logfile snapshot-OSN1-FAB-13604-scenario2.log. Consequently the client hung until a lengthy 45s timer popped in the PTE client (using node-sdk). For a more detailed description, interspersed with some key logs, refer to attachment:
 * bug5-description.txt

For the full logs from the orderers, refer to attachments on FAB-13604:
 * snapshot-OSN1-FAB-13604-scenario2.log
 * snapshot-OSN2new-FAB-13604-scenario2.log
 * snapshot-OSN3-FAB-13604-scenario2.log

h2. Expected:

The OSN should NACK any received transaction which it knows cannot be ordered.",,guoger,scottz,yacovm,,,,,,,,,,,,,,,,,,FAB-14058,,,,,,,,,,,,,FAB-13604,,,,,,,"21/Jan/19 3:12 AM;scottz;bug5-description.txt;https://jira.hyperledger.org/secure/attachment/16601/bug5-description.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007xb:",,,,Unset,Unset,,,,"Set up and run testcase scenario2 as defined in FAB-13604. Here is a summary:
1. Create a network of 3 raft orderers and one application channel.
2. Send transactions through one orderer, one in-flight at a time.
3. Stop OSN2, the leader of the application channel, which is not the ingress orderer (OSN1).
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Jan/19 11:05 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/28791/ fixes this, but I am not going to merge this into master since I'm anyway going to do a rework this week.
In the meantime I suggest you set a sane timeout like 5 seconds, and not 45 seconds. ;;;","22/Jan/19 12:26 AM;scottz;Sure, we can reduce the timeout on the client so it moves on to the next transaction sooner. But the bigger objective of this may be to ensure the orderers send ACK/NACK responses for as many broadcast transactions as possible in as many situations as possible, instead of leaving clients to wonder how long to wait. If the orderers are just slow, then resending transactions could mean sending duplicates, which would just add a bigger strain on the system.;;;","16/Feb/19 12:11 AM;scottz;Yacov said this was fixed by an earlier change. I don't have the Jira for his CR, but we should retest this now.;;;","18/Feb/19 1:16 AM;scottz;Closing this now to unblock the restart retests. Will open new bug if any problems found.;;;",,,,,,,,,,,,,,,,,,,,,,,,,
orderersystemchannel changed leader for no apparent reason after a follower is restarted,FAB-13779,36965,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,,scottz,scottz,21/Jan/19 4:18 AM,03/Feb/19 2:17 AM,28/Oct/23 3:04 AM,31/Jan/19 3:29 PM,v2.0.0,,,,,v2.0.0,,,,fabric-orderer,,,,,0,raft,,,,"OSN3 logs show that the orderersystemchannel changed leader for no apparent reason, not long after OSN2 had been restarted.

For the full logs from the orderers, refer to attachments on FAB-13604:
 * snapshot-OSN1-FAB-13604-scenario2.log
 * snapshot-OSN2new-FAB-13604-scenario2.log
 * snapshot-OSN3-FAB-13604-scenario2.log

 
h2. Steps to Reproduce:

Set up and run testcase scenario2 as defined in detail in FAB-13604. With 3 raft orderers in the orderersystemchannel, restart a follower orderer. When it recovers, the leadership changes.
h2. Observed:

For the orderersystemchannel:
 * OSN3 is leader of orderersystemchannel
 * OSN2 was brought down
 * OSN2 was brought up
 * According to logs in OSN1 and OSN3, orderersystemchannel changes leadership from OSN3 to OSN2. It appears that OSN2 seizes leadership when it comes up!

The OSN3 logs date back to 01-15 and show the leader of orderersystemchannel is OSN3.

The OSN1 and OSN3 orderers logs show they think leadership changed from 3 to 0 to 2.
{quote}$ grep ""leader changed"" snapshot-*scenario2* | grep orderersystemchannel | grep OSN[13]

snapshot-OSN1-FAB-13604-scenario2.log:2019-01-16 15:32:55.794 UTC [orderer.consensus.etcdraft] serveRaft -> INFO a29c8 Raft leader changed: 3 -> 0 \{""channel"": ""orderersystemchannel"", ""node"": 1}

snapshot-OSN1-FAB-13604-scenario2.log:2019-01-16 15:32:55.798 UTC [orderer.consensus.etcdraft] serveRaft -> INFO a29cc Raft leader changed: 0 -> 2 \{""channel"": ""orderersystemchannel"", ""node"": 1}

snapshot-OSN3-FAB-13604-scenario2.log:2019-01-15 21:24:09.924 UTC [orderer.consensus.etcdraft] serveRaft -> INFO 31e Raft leader changed: 0 -> 3 \{""channel"": ""orderersystemchannel"", ""node"": 3}

snapshot-OSN3-FAB-13604-scenario2.log:2019-01-16 15:32:55.788 UTC [orderer.consensus.etcdraft] serveRaft -> INFO 4f563 Raft leader changed: 3 -> 0 \{""channel"": ""orderersystemchannel"", ""node"": 3}

snapshot-OSN3-FAB-13604-scenario2.log:2019-01-16 15:32:55.794 UTC [orderer.consensus.etcdraft] serveRaft -> INFO 4f57f Raft leader changed: 0 -> 2 \{""channel"": ""orderersystemchannel"", ""node"": 3}
{quote}
The OSN2new logs, which document the time after OSN2 restarts, show it believes that OSN2 (itself) is the leader:
{quote}2019-01-16 15:32:55.796 UTC [orderer.consensus.etcdraft] serveRaft -> INFO 4f1^[[0m Raft leader changed: 0 -> 2 \{""channel"": ""orderersystemchannel"", ""node"": 2}
{quote}
 

Remember OSN2 was just a follower (in orderersystemchannel) when we stopped it. When OSN2 comes up, the others seem to elect it as leader even before we see any ""leader changed"" log from OSN2 about orderersystemchannel. This is NOT expected.
h2.  
h2. Expected:

The follower OSN2 should recover and rejoin the others as a follower in orderersystemchannel.

 
h2. _For comparison, here are some notes about the application channel during the same test:_

During this test, we had one application channel established in addition to the orderersystemchannel. There were exactly 3 orderers. This is not directly related to the observations with the orderersystemchannel, but provided here for reference to hopefully clarify things:
 * testorgschannel1 had orderer2 as the leader. The test objective of FAB-13604 scenario2 was to restart the leader (OSN2) of the application channel.
 * OSN1 is ingress orderer for the traffic arriving on channel1.
 * When we stopped OSN2: then OSN1/OSN3 elected OSN3 as the new leader of testorgschannel1. And OSN2 recognized it when it came back up. All this looked correct, and there were no spontaneous leader changes, with regards to the application channel testorgschannel1.
 * testorgschannel1 elected OSN3 as its new leader approximately 2m44s before the orderersystemchannel autonomously decided to change from OSN3 to a new leader.

{quote}        $ grep ""leader changed"" snapshot-*scenario2* | grep -v orderersystemchannel | grep -v 01-15 

        snapshot-OSN1-FAB-13604-scenario2.log:2019-01-16 15:30:11.190 UTC [orderer.consensus.etcdraft] serveRaft -> INFO 8ba3b Raft leader changed: 2 -> 0 \{""channel"": ""testorgschannel1"", ""node"": 1}

        snapshot-OSN1-FAB-13604-scenario2.log:2019-01-16 15:30:11.193 UTC [orderer.consensus.etcdraft] serveRaft -> INFO 8ba3d Raft leader changed: 0 -> 3 \{""channel"": ""testorgschannel1"", ""node"": 1}

        snapshot-OSN2new-FAB-13604-scenario2.log:2019-01-16 15:32:57.878 UTC [orderer.consensus.etcdraft] serveRaft -> INFO 507 Raft leader changed: 0 -> 3 \{""channel"": ""testorgschannel1"", ""node"": 2}

        snapshot-OSN3-FAB-13604-scenario2.log:2019-01-16 15:30:11.183 UTC [orderer.consensus.etcdraft] serveRaft -> INFO 42d48 Raft leader changed: 2 -> 0 \{""channel"": ""testorgschannel1"", ""node"": 3}

        snapshot-OSN3-FAB-13604-scenario2.log:2019-01-16 15:30:11.189 UTC [orderer.consensus.etcdraft] serveRaft -> INFO 42d4e Raft leader changed: 0 -> 3 \{""channel"": ""testorgschannel1"", ""node"": 3}
{quote}
One other observation: We do see OSN2 rejoining testorgschannel1 as it recognizes OSN3 as the leader of that application channel. This is as expected. In fact, in this case, it joins as a follower and does NOT reclaim leadership of testorgschannel1.

 

 ",,bmos299,guoger,kchristidis,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13604,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007xj:",,,,Unset,Unset,,,,"Set up and run testcase scenario2 as defined in FAB-13604. Here is a summary:
1. Create a network of 3 raft orderers and one application channel.
2. Send transactions through one orderer, one in-flight at a time.
3. Stop OSN2, the leader of the application channel, which is not the ingress orderer (OSN1).
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),bmos299,guoger,kchristidis,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Jan/19 10:55 PM;guoger;This issue could be rephrased to:
{quote}
When a node, either leader or follower, is down and restarted, *AND* there is *no* traffic happened during its offline, it most likely will campaign and be elected as new leader
{quote}

Suppose we have a network of node A, B, C, where A is offline, and B is the leader among B & C.

The reason is that when A is offline, B attempts to establish connection with A to send Heartbeats, *with exponential backoff*. However, when A is restarted, it *instantly establish connection with B and C*. While B is still waiting for backoff, A most likely will start campaign after {{ElectionTimeout}}. Since there was no traffic during A's offline, *the raft log index was not advanced*, and there's no reason for C to reject A's Vote Request. Therefore, A can be elected as new leader.

However, i don't see this happen very often, unless the network is super idle. Otherwise, we need to devise something at communication layer...

I think this *is* an issue, however with relatively low priority.

cc [~yacovm] [~kchristidis] [~scottz];;;","22/Jan/19 12:37 AM;scottz;Even with plenty of traffic in the application channels, there could easily be zero transactions on the orderersystemchannel, which means the orderersystemchannel would elect a new leader every time an orderer recovers. Would the new orderer become leader of the channel ONLY when zero blocks were cut while the orderer had been down/disconnected?;;;","22/Jan/19 1:31 AM;guoger;{quote}
Would the new orderer become leader of the channel ONLY when zero blocks were cut while the orderer had been down/disconnected?
{quote}
Yes.

{quote}
Even with plenty of traffic in the application channels, there could easily be zero transactions on the orderersystemchannel
{quote}
that's a fair point. for the time being, i think we can afford occasional leader switch in a very idle channel, while we definitely should revisit this later on.

[~scottz];;;","22/Jan/19 3:09 AM;kchristidis;Good find, and excellent description of the bug. Thanks!

[~guoger]: Thanks for explaining what's going on here. +1 on tackling this a bit later on.;;;","22/Jan/19 10:44 PM;bmos299;[~guoger] [~scottz].  So the net is that if an OSN bounces and there has been no activity on the orderer system channel....the OSN that bounced will most likely become the leader for the orderer system channel as the leader has been in backoff mode sending heartbeats?  I am just asking to get the picture in my head.    Thanks. ;;;","23/Jan/19 12:03 AM;guoger;[~bmos299] yes that’s accurate;;;","31/Jan/19 3:29 PM;guoger;commit ba2bd90 that enables {{CheckQuorum}} fixes this by lease mechanism in raft. Mark it closed;;;",,,,,,,,,,,,,,,,,,,,,,
Remove references to Kafka in logs,FAB-13780,36966,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Lowest,Won't Do,,scottz,scottz,21/Jan/19 4:31 AM,05/Mar/19 12:32 AM,28/Oct/23 3:04 AM,05/Mar/19 12:32 AM,v2.0.0,,,,,,,,,,,,,,0,,,,,"h2. Steps to Reproduce:

Set up a network with 3 raft based orderers, such as the one defined in FAB-13604. Enable all logs in the orderers at DEBUG level. ('DEBUG level' is open for discussion, but certainly we expect to see no kafka logs at INFO level.)
h2. Observed:

Observe logs about kafka. See attachment `kafka_logs_in_raft_orderer.txt`  which shows the kafka logs from the raft orderers of a raft network.
{quote}$ grep -i kafka snapshot*scenario2.log > kafka_logs_in_raft_orderer.txt
{quote}
For the full logs from the orderers used in this test, refer to attachments on FAB-13604:
 * snapshot-OSN1-FAB-13604-scenario2.log
 * snapshot-OSN2new-FAB-13604-scenario2.log
 * snapshot-OSN3-FAB-13604-scenario2.log

h2. Expected:

We expect to see no logs about kafka in a raft orderer. We might accept some exceptions for only some DEBUG logs that display ALL environment variables (which should show kafka being disabled or show the default settings of some kafka controls).

 ",,guoger,kchristidis,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Jan/19 4:33 AM;scottz;kafka_logs_in_raft_orderer.txt;https://jira.hyperledger.org/secure/attachment/16602/kafka_logs_in_raft_orderer.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007xr:",,,,Unset,Unset,,,,"Set up and run testcase scenario2 as defined in FAB-13604. Here is a summary:
1. Create a network of 3 raft orderers and one application channel.
2. Send transactions through one orderer, one in-flight at a time.
3. Stop OSN2, the leader of the application channel, which is not the ingress orderer (OSN1).
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,kchristidis,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Jan/19 11:01 PM;guoger;Looking at log txt, I think this is benign, as we still have kafka option in both {{orderer.yaml}} and {{configtx.yaml}}, and we have some default values hardcoded, which are printed in logs.;;;","22/Jan/19 12:29 AM;scottz;If you have reviewed all the logs and confirmed they are benign, then that is great; it would reduce this to simply a usability issue (confusing people) that can be cleaned up with appropriate priority.;;;","22/Jan/19 3:19 AM;kchristidis;There is indeed a usability issue here. This touches on a bigger problem around how we parse configuration which may not be addressed any time soon. It's on the radar though.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
make peer target does not build when peer code has changed,FAB-13781,36967,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,21/Jan/19 5:32 AM,21/Jan/19 7:42 AM,28/Oct/23 3:04 AM,21/Jan/19 7:42 AM,v2.0.0,,,,,v2.0.0,,,,,,,,,0,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007xz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Jan/19 5:37 AM;mastersingh24;https://gerrit.hyperledger.org/r/28839;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Dynamic control of profiling,FAB-13782,36971,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,inatatsu,inatatsu,21/Jan/19 3:52 PM,22/Jan/19 1:06 PM,28/Oct/23 3:04 AM,21/Jan/19 11:04 PM,,,,,,,,,,fabric-orderer,fabric-peer,,,,0,,,,,"Pprof is useful to analyze performance issues inside of Fabric. To enable pprof, currently we need to restart a peer or an orderer since pprof is configured by a yaml file or an environment variable only at the start up time.

But inside of the Go language runtime library, pprof is always enabled. The flag profile.enabled just spawns a goroutine to handle REST API requests to control profiling and export results.

Dynamic control via a peer CLI command (like the logging control) allows us to collect profiles of the target peer without restarting it, and also minimizes exposure of the port 6060.",,inatatsu,sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i007yv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),inatatsu,sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Jan/19 11:04 PM;sykesm;Dynamic configuration is not something we plan to pursue at this time.;;;","22/Jan/19 1:05 PM;inatatsu;I see. Thank you very much for your response.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Blockcutter emits incorrect metric on Cut() before Config Blocks,FAB-13783,36981,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ChanderGovindarajan,ChanderGovindarajan,ChanderGovindarajan,21/Jan/19 8:09 PM,31/Jan/19 12:03 AM,28/Oct/23 3:04 AM,31/Jan/19 12:03 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,"The Cut() function in blockcutter.go emits a block_fill_duration histogram metric.

When ConfigMsg are formed into ConfigBlock, a tentative Cut() is done to clear out pending txs. As the code stands, a data point is emitted even when there is nothing to cut. This data point has a time interval value of inf and shows up as such in Grafana dashboards.

Have observed this with Solo orderer, simple first-network.

With the linked fix, the ""inf"" values no longer show up in Prometheus/Grafana.",,ChanderGovindarajan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13067,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0080f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ChanderGovindarajan,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Jan/19 8:15 PM;ChanderGovindarajan;Gerrit link: https://gerrit.hyperledger.org/r/#/c/28852/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
gossip/discovery  - TestMsgStoreExpirationWithMembershipMessages,FAB-13784,36987,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Invalid: Works as Expected,,mastersingh24,mastersingh24,21/Jan/19 9:57 PM,04/Dec/19 5:58 AM,28/Oct/23 3:04 AM,04/Dec/19 5:25 AM,v2.0.0,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,," 
{code:java}
--- FAIL: TestMsgStoreExpirationWithMembershipMessages (75.01s)
    discovery_test.go:1334: 
        	Error Trace:	discovery_test.go:1334
        	            				discovery_test.go:1346
        	Error:      	Should be empty, but was map[localhost:22610:1548073722977584517, 226]
        	Test:       	TestMsgStoreExpirationWithMembershipMessages
        	Messages:   	[Step3 - expiration in msg store] Data from alive msg still exists in deadLastTS of discovery inst 1
    discovery_test.go:1335: 
        	Error Trace:	discovery_test.go:1335
        	            				discovery_test.go:1346
        	Error:      	Should be empty, but was map[localhost:22610:Endpoint: localhost:22610, InternalEndpoint: localhost:22610, PKI-ID: 6c6f63616c686f73743a3232363130, Metadata: ]
        	Test:       	TestMsgStoreExpirationWithMembershipMessages
        	Messages:   	[Step3 - expiration in msg store] id2Member mapping still still contains data related to Alive msg: discovery inst 1
    discovery_test.go:1338: 
        	Error Trace:	discovery_test.go:1338
        	            				discovery_test.go:1346
        	Error:      	Should be zero, but was 1
        	Test:       	TestMsgStoreExpirationWithMembershipMessages
        	Messages:   	[Step3 - expiration in msg store] Dead membership list is not empty, discovery instance1
    discovery_test.go:1334: 
        	Error Trace:	discovery_test.go:1334
        	            				discovery_test.go:1367
        	Error:      	Should be empty, but was map[localhost:22610:1548073722977584517, 226]
        	Test:       	TestMsgStoreExpirationWithMembershipMessages
        	Messages:   	[Step4 - memReq processing after expiration] Data from alive msg still exists in deadLastTS of discovery inst 1
    discovery_test.go:1335: 
        	Error Trace:	discovery_test.go:1335
        	            				discovery_test.go:1367
        	Error:      	Should be empty, but was map[localhost:22610:Endpoint: localhost:22610, InternalEndpoint: localhost:22610, PKI-ID: 6c6f63616c686f73743a3232363130, Metadata: ]
        	Test:       	TestMsgStoreExpirationWithMembershipMessages
        	Messages:   	[Step4 - memReq processing after expiration] id2Member mapping still still contains data related to Alive msg: discovery inst 1
    discovery_test.go:1338: 
        	Error Trace:	discovery_test.go:1338
        	            				discovery_test.go:1367
        	Error:      	Should be zero, but was 1
        	Test:       	TestMsgStoreExpirationWithMembershipMessages
        	Messages:   	[Step4 - memReq processing after expiration] Dead membership list is not empty, discovery instance1
    discovery_test.go:1333: 
        	Error Trace:	discovery_test.go:1333
        	            				discovery_test.go:1384
        	Error:      	Should be empty, but was map[localhost:22610:1548073722977584517, 276]
        	Test:       	TestMsgStoreExpirationWithMembershipMessages
        	Messages:   	[Step5.1 - after lost old aliveMsg process] Data from alive msg still exists in aliveLastTS of discovery inst 1
    discovery_test.go:1335: 
        	Error Trace:	discovery_test.go:1335
        	            				discovery_test.go:1384
        	Error:      	Should be empty, but was map[localhost:22610:Endpoint: localhost:22610, InternalEndpoint: localhost:22610, PKI-ID: 6c6f63616c686f73743a3232363130, Metadata: ]
        	Test:       	TestMsgStoreExpirationWithMembershipMessages
        	Messages:   	[Step5.1 - after lost old aliveMsg process] id2Member mapping still still contains data related to Alive msg: discovery inst 1
    discovery_test.go:1337: 
        	Error Trace:	discovery_test.go:1337
        	            				discovery_test.go:1384
        	Error:      	Should be zero, but was 1
        	Test:       	TestMsgStoreExpirationWithMembershipMessages
        	Messages:   	[Step5.1 - after lost old aliveMsg process] Alive membership list is not empty, discovery instance1
    discovery_test.go:1333: 
        	Error Trace:	discovery_test.go:1333
        	            				discovery_test.go:1385
        	Error:      	Should be empty, but was map[localhost:22610:1548073722977584517, 276]
        	Test:       	TestMsgStoreExpirationWithMembershipMessages
        	Messages:   	[Step5.2 - after lost new aliveMsg process] Data from alive msg still exists in aliveLastTS of discovery inst 1
    discovery_test.go:1335: 
        	Error Trace:	discovery_test.go:1335
        	            				discovery_test.go:1385
        	Error:      	Should be empty, but was map[localhost:22610:Endpoint: localhost:22610, InternalEndpoint: localhost:22610, PKI-ID: 6c6f63616c686f73743a3232363130, Metadata: ]
        	Test:       	TestMsgStoreExpirationWithMembershipMessages
        	Messages:   	[Step5.2 - after lost new aliveMsg process] id2Member mapping still still contains data related to Alive msg: discovery inst 1
    discovery_test.go:1337: 
        	Error Trace:	discovery_test.go:1337
        	            				discovery_test.go:1385
        	Error:      	Should be zero, but was 1
        	Test:       	TestMsgStoreExpirationWithMembershipMessages
        	Messages:   	[Step5.2 - after lost new aliveMsg process] Alive membership list is not empty, discovery instance1
    discovery_test.go:1333: 
        	Error Trace:	discovery_test.go:1333
        	            				discovery_test.go:1410
        	Error:      	Should be empty, but was map[localhost:22610:1548073722977584517, 276]
        	Test:       	TestMsgStoreExpirationWithMembershipMessages
        	Messages:   	[Step6 - after lost MembershipResp process] Data from alive msg still exists in aliveLastTS of discovery inst 1
    discovery_test.go:1335: 
        	Error Trace:	discovery_test.go:1335
        	            				discovery_test.go:1410
        	Error:      	Should be empty, but was map[localhost:22610:Endpoint: localhost:22610, InternalEndpoint: localhost:22610, PKI-ID: 6c6f63616c686f73743a3232363130, Metadata: ]
        	Test:       	TestMsgStoreExpirationWithMembershipMessages
        	Messages:   	[Step6 - after lost MembershipResp process] id2Member mapping still still contains data related to Alive msg: discovery inst 1
    discovery_test.go:1337: 
        	Error Trace:	discovery_test.go:1337
        	            				discovery_test.go:1410
        	Error:      	Should be zero, but was 1
        	Test:       	TestMsgStoreExpirationWithMembershipMessages
        	Messages:   	[Step6 - after lost MembershipResp process] Alive membership list is not empty, discovery instance1
FAIL
coverage: 86.6% of statements
FAIL	github.com/hyperledger/fabric/gossip/discovery	82.078s
{code}
 ",,C0rWin,caod,gennadyl,guoger,mastersingh24,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15309,,,,,,,"21/Jan/19 9:57 PM;mastersingh24;consoleText.txt;https://jira.hyperledger.org/secure/attachment/16604/consoleText.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0081j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,caod,gennadyl,guoger,mastersingh24,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Apr/19 4:42 PM;gennadyl;I run about 500 times fabric/gossip/discovery unit tests, without any failure. Can't recreate flake;;;","07/May/19 4:23 AM;MHBauer;Given the multiple stages, this should stop as soon as a failure is encountered rather than keep going with incorrect information.

The first failure is right after the 75second sleep (???)
	time.Sleep(config.AliveExpirationTimeout * (msgExpirationFactor + 5)) // (0.3s * 10  * (20 + 5)) == 75 seconds

The code has some ""what"" comments, but I could use some more ""why"" comments to understand what this test is doing.;;;","28/May/19 4:27 PM;guoger;hit here: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12380/console;;;","04/Dec/19 5:25 AM;caod;Closing as we've now moved to Azure pipelines and haven't seen this flake in some time. Reopen as needed if seen again on Azure.;;;","04/Dec/19 5:36 AM;MHBauer;[~caod] didn't we stop running these tests?;;;","04/Dec/19 5:58 AM;caod;[~MHBauer] I'm not aware of the specific context, I see the tests still exist, not sure if they were modified for the purposes of passing this flake.;;;",,,,,,,,,,,,,,,,,,,,,,,
Copy token proto message files to java sdk,FAB-13785,36988,36646,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,wenjian,wenjian,21/Jan/19 11:22 PM,23/Jan/20 7:31 AM,28/Oct/23 3:04 AM,23/Jan/20 7:31 AM,,,,,,,,,,fabric-token,,,,,0,stale-item,,,,"Copy all message files under protos/token to java sdk. If any .proto file does not have the following options, add them.

option java_package = ""org.hyperledger.fabric.protos.token"";

 

Also, copy protos/common/common.proto as it has new token related header types.

 

 

The prover.proto has a name conflict with the Prover service it implements. To circumvent we can use ProverPeer as main class for this proto.
 option java_outer_classname = ""ProverPeer"";",,bur,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Jan/19 12:19 AM;wenjian;javasdk-token-enhancement.docx;https://jira.hyperledger.org/secure/attachment/16630/javasdk-token-enhancement.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0081r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bur,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/19 5:07 PM;bur;Add `option java_package = ""org.hyperledger.fabric.protos.token"";` to transaction.proto;;;","29/Jan/19 10:52 PM;bur;WIP https://gerrit.hyperledger.org/r/#/c/29002/;;;","23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric-ca register,FAB-13786,36989,,Task,Closed,FAB,Fabric,software,denyeart,,,Highest,Invalid,GuillaumeCisco,GuillaumeCisco,GuillaumeCisco,21/Jan/19 11:24 PM,19/Feb/19 10:45 PM,28/Oct/23 3:04 AM,19/Feb/19 10:29 PM,,,,,,,,,,fabric-ca,fabric-crypto,,,,0,,,,,Implement Fabric-ca register method for registering an user.,,GuillaumeCisco,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0081z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),GuillaumeCisco,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
release 1.2 linter checks fail,FAB-13787,36990,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Invalid: Works as Expected,rameshthoomu,yacovm,yacovm,21/Jan/19 11:28 PM,23/Jan/19 3:22 PM,28/Oct/23 3:04 AM,23/Jan/19 3:22 PM,,,,,,v1.2.2,,,,fabric-build,,,,,0,,,,,"14:55:22 The following files contain goimports errors
14:55:22 bccsp/pkcs11/impl_test.go bccsp/pkcs11/pkcs11.go
14:55:22 The goimports command 'goimports -l -w' must be run for these files
14:55:22 Makefile:212: recipe for target 'linter' failed

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8167/console",,denyeart,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00827:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Jan/19 11:40 PM;denyeart;Strange, [https://gerrit.hyperledger.org/r/#/c/28023/]  just passed CI and it has the same parent. Any ideas [~rameshthoomu] ?;;;","23/Jan/19 3:22 PM;denyeart;Seems to be working now in release-1.2. Not sure if it was an intermittent problem... if seen again we can re-open.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
TestMultipleOrgEndpointLeakage in gossip test fails as timeout expired.,FAB-13788,36992,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,C0rWin,sambhavdutt,sambhavdutt,21/Jan/19 11:48 PM,19/Mar/19 7:57 PM,28/Oct/23 3:04 AM,11/Feb/19 11:38 PM,v2.0.0,,,,,v2.0.0,,,,fabric-gossip,,,,,0,ci-flake,,,,"The TestMultipleOrgEndpointLeakage failed in the gossip_test with Timeout Expired error, this has failed in *fabric-unit-test-coverage-daily* job for master branch in the last run. TestMultipleOrgEndpointLeakage test case fail has not been observed in the unit-tests from some time.

*Intermittent:* Yes
 *Branch:* master
 *Platform:* x86_64

*Error Snippet:*
{code:java}
21:48:47 g--- FAIL: TestMultipleOrgEndpointLeakage (180.10s)
21:48:47     orgs_test.go:223: peer ""localhost:11610"" doesn't know the needed amount of peers, extected 6, actual 0

21:48:47     gossip_test.go:1591: 
21:48:47         	Error Trace:	gossip_test.go:1591
21:48:47         	            				orgs_test.go:249
21:48:47         	Error:      	Timeout expired!
21:48:47         	Test:       	TestMultipleOrgEndpointLeakage
21:48:47 FAIL
21:48:47 coverage: 85.6% of statements
{code}
*Build Logs:*

[https://jenkins.hyperledger.org/view/Daily/job/fabric-unit-test-coverage-daily-master-x86_64/331/]",,C0rWin,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,f95023755ab179df9612a3b45a639b8a9843113e,Unset,No,,,"1|i0082n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,wlahti,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Jan/19 10:05 AM;denyeart;Seen again in https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8232/consoleFull;;;","25/Jan/19 12:50 AM;vijaypunugubati;Observed the error TestMultipleOrgEndpointLeakage failed in the gossip_test with Timeout Expired error.

[https://jenkins.hyperledger.org/view/Daily/job/fabric-unit-test-coverage-daily-master-x86_64/334/console]

[~C0rWin] Could you please look into this.;;;","25/Jan/19 5:02 AM;C0rWin;[~vijaypunugubati] sure, will take a look.;;;","25/Jan/19 11:47 PM;wlahti;Also hit by: [https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8358/]

Edit: -Actually, it's a failure in the same test case but not the exact failure.- Wait, it's there at the bottom under the stack trace. :);;;","10/Feb/19 9:52 AM;C0rWin;https://gerrit.hyperledger.org/r/29224;;;",,,,,,,,,,,,,,,,,,,,,,,,
Integration test has failed in discovery service due to failure in Spec Setup,FAB-13790,36998,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,sambhavdutt,sambhavdutt,22/Jan/19 12:24 AM,19/Mar/19 7:57 PM,28/Oct/23 3:04 AM,12/Feb/19 11:26 PM,v2.0.0,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"Integration test failed in the discovery_test, there was failure in Spec Setup and the test Timed out. The Integration test has not failed with this error from some time.

*Intermittent:* No
*Branch:* master
*Platform:* x86_64

*Error Snippet:*

{code:java}
21:51:48 [91m[e][34m[orderer-org.orderer][0m [34m2019-01-21 02:51:44.834 UTC [orderer.common.server] handleSignals -> INFO 014[0m Received signal: 15 (terminated)
21:51:48 
21:51:48 [90m------------------------------[0m
21:51:48 [91m[1m• Failure in Spec Setup (BeforeEach) [19.792 seconds][0m
21:51:48 [90mDiscoveryService [0m[91m[1m[BeforeEach] discovers channel information [0m
21:51:48 [37m/w/workspace/fabric-nightly-release-job-master-x86_64/gopath/src/github.com/hyperledger/fabric/integration/discovery/discovery_test.go:82[0m
21:51:48 
21:51:48   [91mTimed out after 1.000s.
21:51:48   Expected
21:51:48       <<-chan struct {} | len:0, cap:0>: 0xc0004d8360
21:51:48   to be closed[0m
21:51:48 
21:51:48   /w/workspace/fabric-nightly-release-job-master-x86_64/gopath/src/github.com/hyperledger/fabric/integration/discovery/discovery_test.go:64
21:51:48 [90m------------------------------[0m
21:52:25 [32m•[0m[32m•[0m
21:52:30 
21:52:30 [91m[1mSummarizing 1 Failure:[0m
21:52:30 
21:52:30 [91m[1m[Fail] [0m[90mDiscoveryService [0m[91m[1m[BeforeEach] discovers channel information [0m
21:52:30 [37m/w/workspace/fabric-nightly-release-job-master-x86_64/gopath/src/github.com/hyperledger/fabric/integration/discovery/discovery_test.go:64[0m
{code}

*Build Logs:*

https://jenkins.hyperledger.org/view/Daily/job/fabric-nightly-release-job-master-x86_64/7/consoleFull",,C0rWin,rameshthoomu,sambhavdutt,sykesm,vijaypunugubati,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,f95023755ab179df9612a3b45a639b8a9843113e,Unset,No,,,"1|i0083j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,rameshthoomu,sambhavdutt,sykesm,vijaypunugubati,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jan/19 8:04 AM;yacovm;It failed on:
{code:java}
		networkRunner := network.NetworkGroupRunner()
		process = ifrit.Invoke(networkRunner)
		Eventually(process.Ready()).Should(BeClosed()) {code}
 

[~sykesm] any idea what can be done in such a case? We don't specify timeouts in the other tests... 

 ;;;","24/Jan/19 8:07 AM;yacovm;[~C0rWin] seems like one of the processes didn't start...  [~sambhavdutt] did you perhaps see this kind of error in other integration test suites?;;;","25/Jan/19 1:42 AM;sambhavdutt;[~yacovm][~C0rWin]

I have checked the tests again, I didn't see this in other Integration test suites, in fabric integration test suite or in fabric-ca;;;","25/Jan/19 4:43 AM;sykesm;{quote}Matthew Sykes any idea what can be done in such a case? We don't specify timeouts in the other tests...{quote}

It should probably be using the network.EventuallyTimeout. Each of the ginkgomon runners (which are grouped by NetworkGroupRunner) contain a start check and a start check timeout. Most of those timeouts are 15-30 seconds.;;;",,,,,,,,,,,,,,,,,,,,,,,,,
"As a developer, I want a Jenkins job configured to build and test fabric-lib-go changes",FAB-13791,36999,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,22/Jan/19 12:43 AM,21/May/19 2:40 AM,28/Oct/23 3:04 AM,21/May/19 2:40 AM,,,,,,,,,,,,,,,0,ipm,ipm-planned,,,The {{fabric-lib-go}} project exists in Gerrit but is not associated with a Jenkins build. A build needs to be defined that is triggered on Gerrit CRs.,,btl5037,rameshthoomu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzq91:r",,,,Unset,Unset,,,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,rameshthoomu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/19 12:27 AM;sykesm;Create a makefile
Create a Jenkinsfile to drive make targets
Make should simply test the projects;;;","23/Jan/19 12:32 AM;sykesm;Please pair with Saad, Latitia, or Brett on this.;;;","31/Jan/19 11:36 PM;rameshthoomu;[https://gerrit.hyperledger.org/r/#/c/28952/] - Initial patch has been submitted here. Based on the comments provided by Matt, I have to re-write the script in declarative pipeline using global shared libraries.;;;","17/Apr/19 10:41 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/28952/;;;","21/May/19 2:38 AM;btl5037;https://gerrit.hyperledger.org/r/c/fabric-lib-go/+/31290;;;","21/May/19 2:39 AM;btl5037;I believe with this last change, the fabric-lib-go pipeline is now complete. This last change was verified by the pipeline itself;;;",,,,,,,,,,,,,,,,,,,,,,,
"As a fabric developer, I want to be able to test changes to fabric-lib-go",FAB-13792,37000,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,sykesm,sykesm,22/Jan/19 12:46 AM,17/Apr/19 10:42 PM,28/Oct/23 3:04 AM,17/Apr/19 10:42 PM,,,,,,,,,,,,,,,0,ipm,ipm-planned,,,The {{fabric-lib-go}} repository needs to have build scripts or a makefile added that can be used to test and validate change requests.,,rameshthoomu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABLG-4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzq91:k",,,,Unset,Unset,,,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Feb/19 11:50 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/29273/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create Validation Info shim,FAB-13793,37001,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,22/Jan/19 12:59 AM,23/Jan/19 3:56 AM,28/Oct/23 3:04 AM,23/Jan/19 3:56 AM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00847:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create a v2.0 subdir to create a Fabric network with token capability,FAB-13797,37006,36646,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,bur,wenjian,wenjian,22/Jan/19 1:15 AM,23/Jan/20 7:31 AM,28/Oct/23 3:04 AM,23/Jan/20 7:31 AM,,,,,,,,,,fabric-token,,,,,0,stale-item,,,,"Create a v2.0 subdir under fabric-sdk-java/src/test/fixture/sdkintegration/e2e-2Orgs.
 * configtx.yaml should has token feature. For now, let's use V1_4_FABTOKEN_EXPERIMENTAL. Eventually, it should be replaced by v20 capability
 * recreate orderer block and channels
 _configtxgen -channelID foo -profile TwoOrgsChannel_v13 -outputCreateChannelTx foo.tx_
 * update sdkintegration/.env to support v2.0

Refer to the following v1.3 instructions documented in fabric-sdk-java/README.md.

_For v1.3 integration, cd to the `src/test/fixture/sdkintegration/e2e-2Orgs/v1.3` directory_
_and execute the following commands:_
 _* configtxgen --configPath . -outputBlock orderer.block -profile TwoOrgsOrdererGenesis_v13_
 _* configtxgen --configPath . -outputCreateChannelTx foo.tx -profile TwoOrgsChannel_v13 -channelID foo_
 _* configtxgen --configPath . -outputCreateChannelTx bar.tx -profile TwoOrgsChannel_v13 -channelID bar_

 ",,bur,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0085b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bur,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jan/19 10:53 PM;bur;WIP https://gerrit.hyperledger.org/r/#/c/29004/;;;","23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a fabric developer, I want to evaluate methods for isolating golang chaincode dependencies",FAB-13799,37008,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,sykesm,sykesm,22/Jan/19 1:16 AM,11/Sep/19 2:52 AM,28/Oct/23 3:04 AM,11/Sep/19 2:52 AM,,,,,,v2.0.0,,,,,,,,,0,ipm,,,,"The fabric monolithic repository mixes user-consumable assets like the chaincode shim with internal details and dependencies of the fabric peer and orderer.

As a spike, we need to investigate some approaches to extract the user-linkable code from fabric that simplify the development process. These approaches must support semantic versioning of the shim, must not pin dependencies of the shim to versions used by the peer, and must not directly reference any internal artifacts of the fabric system. The solution must take go modules into consideration.

The result of this spike is a set of proposals on how to do this and the tradeoffs.",,MHBauer,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:4",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Transactional Context,FAB-13800,37009,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,gennadyl,mbwhite,mbwhite,22/Jan/19 1:24 AM,10/Apr/19 9:18 PM,28/Oct/23 3:04 AM,10/Apr/19 9:18 PM,,,,,,v2.1.0,,,,,,,,,0,,,,,"As a developer of contracts, I need to be able to get access to the the 'transactional context' that the current method is operating in.

This will give access to the stub and other APIs.  

 

Node.js passes this is as the first parameter to any function. Consideration that within Java to help with thread-safety perhaps the instance of the object should be created per transaction.

Saftey vs Performance",,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FABCJ-4,,,No,,Unset,No,,,"1|i0085z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mbwhite,,,,,,,,,,,release-2.4,main-emeritius,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration test has failed in discovery service with Syntax error in JSON file,FAB-13801,37010,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,22/Jan/19 1:25 AM,19/Mar/19 7:57 PM,28/Oct/23 3:04 AM,06/Feb/19 11:09 PM,v1.4.0,,,,,,,,,fabric-build,,,,,0,ci-flake,,,,"Integration test failed with Syntax error in Json in the nightly publish job  during the health check tests. This has been observed before as a flakey test fail.

*Intermittent:* Yes
*Branch:* release-1.4
*Platform:* x86_64
*Error Snippet:*

{code:java}
21:52:54 [90m------------------------------[0m
21:52:54 [91m[1m• Failure [38.039 seconds][0m
21:52:54 [90mHealth [0m[0mCouchDB health checks [0m[90mwhen CouchDB is unavailable [0m[91m[1m[It] fails the health check [0m
21:52:54 [37m/w/workspace/fabric-nightly-release-job-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/health_test.go:130[0m
21:52:54 
21:52:54   [91mExpected error:
21:52:54       <*json.SyntaxError | 0xc00027f660>: {
21:52:54           msg: ""unexpected end of JSON input"",
21:52:54           Offset: 0,
21:52:54       }
21:52:54       unexpected end of JSON input
21:52:54   not to have occurred[0m
21:52:54 
21:52:54   /w/workspace/fabric-nightly-release-job-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/health_test.go:151
{code}

*Build Logs:*
https://jenkins.hyperledger.org/view/Daily/job/fabric-nightly-release-job-release-1.4-x86_64/7/consoleFull",,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,f118f2bca914f74567701b26c3b2922738dc8f6f,Unset,No,,,"1|i00867:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Metadata provision,FAB-13802,37011,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mbwhite,mbwhite,mbwhite,22/Jan/19 1:27 AM,20/May/19 7:04 PM,28/Oct/23 3:04 AM,20/May/19 7:04 PM,,,,,,,,,,,,,,,0,,,,,"As part of the contract, make metadata available as per the adopted standard.",,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FABCJ-4,,,No,,Unset,No,,,"1|i0086f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mbwhite,,,,,,,,,,,release-2.4,main-emeritius,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/May/19 7:03 PM;mbwhite;[https://gerrit.hyperledger.org/r/c/fabric-chaincode-java/+/31092];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Parameter Marshalling,FAB-13803,37012,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mbwhite,mbwhite,mbwhite,22/Jan/19 1:28 AM,11/Jun/19 11:07 PM,28/Oct/23 3:04 AM,11/Jun/19 11:07 PM,,,,,,,,,,,,,,,0,,,,,Ensure that data is marshalled from the incoming data to the appropriate types based on how the metadata is coded. ,,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FABCJ-4,,,No,,Unset,No,,,"1|i0086n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mbwhite,,,,,,,,,,,release-2.4,main-emeritius,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Jun/19 9:15 PM;mbwhite;https://gerrit.hyperledger.org/r/c/fabric-chaincode-java/+/31693 [FAB-13803] Parameter Marshalling;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a Fabric user, I want to interact with a Raft-based ordering service that does not render itself unavailable unnecessarily",FAB-13804,37013,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,22/Jan/19 1:32 AM,26/Feb/19 11:59 AM,28/Oct/23 3:04 AM,31/Jan/19 11:44 PM,,,,,,,,,,fabric-orderer,,,,,0,raft,,,,"Raft FSM is single-threaded, and the Raft leader periodically sends heartbeats to the followers.
 Currently - the Step RPC is not a stream, so it means that if the number of nodes is *n* and the RTT time is *T*, then each heart beat cycle takes at least *(n-1)xT*  which might easily balloon to be above the threshold that the followers can tolerate, and as a result - the followers would stop following the leader over and over and the cluster would get into an unrecoverable spin - imagine that if we have 10 nodes, then the leader has 9 followers and the last follower currently waits above 8*T*  time to receive a heartbeat from the start of the heartbeat cycle.  Had it been a stream - it'd wait only *T* time.
{code:java}
# HeartbeatTick is the number of Node.Tick invocations that must
# pass between heartbeats. That is, a leader sends heartbeat
# messages to maintain its leadership every HeartbeatTick ticks.
HeartbeatTick: 1
# ElectionTick is the number of Node.Tick invocations that must pass
# between elections. That is, if a follower does not receive any
# message from the leader of current term before ElectionTick has
# elapsed, it will become candidate and start an election.
# ElectionTick must be greater than HeartbeatTick.
ElectionTick: 10{code}

I recommend the following:
# Make the cluster Step - a stream (now it's an RPC): We don't use the return value from the Step RPC (the Raft FSM sends messages one way and doesn't expect a synchronous response) anyway so there is no point in waiting for any response from the remote OSN.
 If Step would be a stream, then the message sending would be asynchronous and as a result a heart beat cycle would finish very quickly.
# Make the T {{HeartbeatTick}} number something more sane than 1. Currently, the tick interval is set to 100ms, and the leader sends the followers a heart-beat once per 100ms. I think it's way too harsh for production environments and we should make the leader tick once in 5 seconds, and the  \{{ElectionTick}} should be something like 15 seconds.  I know the leader failover would be slower, but I am a bit uneasy about releasing a default with timeouts that are not lenient. I think we could always document that to make the failover fast, one can make a config update and reduce these times.

 

Please chime in - [~kchristidis] [~guoger] [~C0rWin] [~tock]",,guoger,kchristidis,tock,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13654,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i0086v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,kchristidis,tock,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/19 2:00 AM;kchristidis;Agreed with turning the Step RPC into a stream, this is a good proposal.

RE: Tuning timeouts - I agree we should make them a bit more lenient. (Obligatory link to [https://github.com/etcd-io/etcd/issues/4887] for figuring out the values for the parameters.);;;","22/Jan/19 12:22 PM;guoger;1. as we discussed in #fabric-orderer-dev, i like the idea!

2. i partially agree with this, but for different reason.
- i'm not sure why tick-per-100ms is too harsh for a cluster located in single DC, where RTT is ~10ms. (granted that 1. is implemented)
- as [~kchristidis] commented, we should make {{ElectionTick}} 10x than {{HeartbeatTick}}, to avoid high probability of split vote. Otherwise we would significantly prolong failover time (especially with large {{TickInterval}}
- {{TickInterval}} could be enlarged to reduce Heartbeat overhead, in a cluster with many channels. But a better way to do this, is to gather the information of active nodes from communication layer, i.e. a message has been sent/received between A and B recently, and simply drop outgoing {{MsgHeartbeat}} if it's sufficiently active. This way, in an idle channel, we have regular heartbeats to maintain liveness, and in a busy channel, we effectively kill the overhead of {{MsgHeartbeat}}

wdyt [~kchristidis][~yacovm];;;","22/Jan/19 6:10 PM;yacovm;{quote}But a better way to do this, is to gather the information of active nodes from communication layer, i.e. a message has been sent/received between A and B recently, and simply drop outgoing {{MsgHeartbeat}} if it's sufficiently active.
{quote}
 

This is a bad way of doing it, in my opinion:
 * Raft should be a black box. We don't want to make any assumptions on its algorithm.
 * The communication layer shouldn't contain logic that is related to the consensus implementation.
 * You have no idea if a message is really sent once you send it.... it's a gRPC stream. The node on the other side can be stuck in a deadlock and the gRPC buffer will still have room for lots of heart-beats.;;;","22/Jan/19 7:25 PM;guoger;{quote}Raft should be a black box. We don't want to make any assumptions on its algorithm.
{quote}
why not? we have the knowledge and the lib is implemented to give user the flexibility, i don't see why we should restrain ourselves from leveraging it. (even etcd itself intercepts outgoing messages)
{quote}The communication layer shouldn't contain logic that is related to the consensus implementation
{quote}
if we maintain this liveness in chain, we don't need info from communication layer, no?
{quote}You have no idea if a message is really sent once you send it.... it's a gRPC stream. The node on the other side can be stuck in a deadlock and the gRPC buffer will still have room for lots of heart-beats.
{quote}
that's why we should base on the messages received, instead of sent, i.e. I, raft leader, has recently received a {{MsgAppResp}} from a follower, so i have enough confidence to say that this follower has reset its {{ElectionTimeout}} recently enough, so I can defer sending out this heartbeat.;;;","22/Jan/19 8:18 PM;tock;From my experience in these kind of clusters (and I have a lot), what needs to be done is the following:

For a fast, tightly coupled system, for example: nodes on bare-metal servers, connected by a fast LAN:

heartbeat-interval = 1s

heartbeat-timeout= 10s

for a cloud based system, on a less then perfect network:

heartbeat-interval = 3s

heartbeat-timeout= 30s

As a rule of thumb: heartbeat-timeout=10x heartbeat-interval. You can keep the ticks at 100ms.

When you reduce the heartbeat-timeout, you generally discover failures faster, but increase that chance of a false alarm. False alarms our bad in our context, and we do not  need need extra-fast failure detection. We need to keep the system stable. (FYI - in WebSphere clusters, the heartbeat timeout may be as large as 3 minutes).

These settings are comparable to what you find in systems like: zookeeper, kafka, and mongodb. No need to invent the wheel here.

As to the optimizations suggested above, I completely agree with Yacov - avoid doing this,

First - it is not needed; the bandwidth consumed by heartbeats is negligible compared to all the other traffic (as well as the bandwidth of modern networks.)

Second - treat Raft as a black box and adhere to the contract specified in the documentation, for the sanity of all involved.

In the words of Donald Knuth:  ""premature optimization is the root of all evil."" ;)

 ;;;","22/Jan/19 8:27 PM;yacovm;I think the default should be tuned for a non-LAN environment, otherwise users will deploy this thing in a non LAN environment and at first their cluster might behave, but when it starts misbehaving - it will be too late for them (you need consensus to change the parameters);;;","22/Jan/19 8:28 PM;guoger;As I mentioned in previous comment, election timeout should be 10x of heartbeat tick, and I think none of us objects that?

As for optimization, I was merely pointing out what should be done, but I firmly agree that it should be tackled later, when we actually see it becoming a problem.

As for blackboxing raft library, I’d keep my opinion but we certainly could defer this discussion, for the same reason aforementioned.

As for actually tick interval, I don’t understand why we go against etcd best practice?;;;","22/Jan/19 9:19 PM;tock;[~yacovm] I agree - better start with long timeouts and reduce if needed.

 ;;;","23/Jan/19 3:17 PM;guoger;{quote} it will be too late for them (you need consensus to change the parameters) {quote}
this is actually convincing...

how about interval of 500ms? so the worst failover time is 10s

cc [~yacovm] [~tock];;;","23/Jan/19 4:52 PM;yacovm;(y);;;","24/Jan/19 8:57 AM;kchristidis;{quote}As for actually tick interval, I don’t understand why we go against etcd best practice?
{quote}
[~guoger]: What is this in reference to? Can you expand?

+1 on deferring on the optimization where we infer liveness from {{MsgAppResp}}. This seems like a clever hack, but we're better off being done with this in a generic way and shifting our focus to BFT.

[~tock]: Thanks for chiming in! That's good feedback.;;;","24/Jan/19 11:43 AM;guoger;I'm referring to [this|https://coreos.com/etcd/docs/latest/tuning.html]
{quote} The value of heartbeat interval is recommended to be around the maximum of average round-trip time (RTT) between members, normally around 0.5-1.5x the round-trip time. {quote}

i'm not saying that we should be optimizing it *now*, but merely providing an easy workaround, *iff* this becomes an actual problem later on. This is not necessarily a hack, {{etcd}} intercepts messages, and this mechanism is also suggested by raft paper.

cc [~kchristidis];;;","24/Jan/19 12:15 PM;kchristidis;Understood. I didn't know that about the Raft paper - thanks! (FWIW, I wasn't using the term _hack_ pejoratively.) Either way, sounds like we're all onboard for deferring.

RE: heartbeat value - what is the suggestion that goes against the best practice, as documented by the CoreOS folks?;;;","24/Jan/19 12:32 PM;guoger;setting it to 1s, where RTT is not that long (iks, local or CI)

but i'm good changing it to 500ms, as stated in https://jira.hyperledger.org/browse/FAB-13845. Although that's due to slow disk IO on CI, so we need to increase the interval to avoid flakes (long pause on leader due to wal sync, which prevents heartbeats from being sent timely, and results in unexpected leader failover);;;","24/Jan/19 5:22 PM;guoger;a few more words on this:

{quote} the bandwidth consumed by heartbeats is negligible compared to all the other traffic (as well as the bandwidth of modern networks.) {quote}

it's not the bandwidth we are concerned here, it's more of cpu and extra cycles on machines to process these heartbeats.;;;","28/Jan/19 2:19 PM;kchristidis;LOL at the reworded title but OCD is OCD and I needed to come up with a story-like title, and we're doing these changes to benefit the end-user so that's our target persona. Feel free to revise.;;;",,,,,,,,,,,,,
Make Raft Step a stream,FAB-13805,37015,37013,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,22/Jan/19 1:33 AM,03/Mar/19 9:58 PM,28/Oct/23 3:04 AM,31/Jan/19 11:44 PM,,,,,,,,,,fabric-orderer,,,,,0,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,FAB-13854,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0087b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE peer load balance,FAB-13807,37018,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,22/Jan/19 2:07 AM,25/Jan/19 2:40 AM,28/Oct/23 3:04 AM,25/Jan/19 2:40 AM,,,,,,,,,,fabric-quality,,,,,0,,,,,This is to add an option for PTE to send transactions to peers within org evenly.,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i0087z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"24/Jan/19 12:34 AM;dongming;https://gerrit.hyperledger.org/r/#/c/28926/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
address code review comments for FAB-13363,FAB-13808,37019,34813,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,22/Jan/19 3:35 AM,03/Mar/19 9:58 PM,28/Oct/23 3:04 AM,22/Jan/19 6:04 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,,,kchristidis,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00887:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kchristidis,yacovm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Jan/19 3:43 AM;kchristidis;https://gerrit.hyperledger.org/r/c/28866/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Long Run for memory analysis: Don't crash any OSN (single-thread invocations, 1 channel, latency mode)",FAB-13809,37021,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,scottz,scottz,22/Jan/19 4:31 AM,16/Mar/19 1:36 AM,28/Oct/23 3:04 AM,16/Mar/19 1:36 AM,v2.0.0,,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,"Execute testcase FAB-13601 but run it for a week. Don't crash any OSN, while running single-thread invocations, 1 channel, latency mode.

And monitor the prometheus metrics, such as memory consumption. 

Check with design team for any particular orderer system metrics for consensus or raft or others to monitor - although we realize that feature code might not be ready yet for verification.

 

Design team provided these instructions to enable the golang profiler before start test (using ORDERER_GENERAL_PROFILE):

    https://github.com/hyperledger/fabric/blob/master/sampleconfig/orderer.yaml#L135-L136

 

For suspected memory leak, they suggest to collect during/after the test: 

    To see how many connections the orderer has

        netstat -anp | grep orderer

    Connect to orderer and dump the stacktrace goroutines into the output, to check for goroutine leak:

        kill -SIGUSR1 1

    An enumeration of the open file descriptors (the <pid> is the process ID)

        cd /proc/<pid>; ls -lr /<pid>/fd | wc -l

     Collect the logs too.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13601,,,,FAB-13854,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|i006ko:c",,,,Unset,Unset,Week ending 2019-Feb-01,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Long run for memory analysis: no crashes, multiple TX per block on 1 thread per 1 channel (constant mode)",FAB-13810,37022,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,scottz,scottz,22/Jan/19 4:37 AM,10/Jan/20 8:52 AM,28/Oct/23 3:04 AM,24/Jul/19 5:59 AM,v2.0.0,,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,"Execute testcase FAB-13641 but run it for a 3 days. No crashes, concurrent invocations on 1 thread per 1 channel (constant mode), each thread sends 10 transactions per second, using one thread per peer and one thread per orderer.

And monitor the prometheus metrics, such as memory consumption. 

Check with design team for any particular orderer system metrics for consensus or raft or others to monitor - although we realize that feature code might not be ready yet for verification.

 

Design team provided these instructions to enable the golang profiler before start test (using ORDERER_GENERAL_PROFILE):

    [https://github.com/hyperledger/fabric/blob/master/sampleconfig/orderer.yaml#L135-L136]

 

For suspected memory leak, they suggest to collect during/after the test: 

    To see how many connections the orderer has

        netstat -anp | grep orderer

    Connect to orderer and dump the stacktrace goroutines into the output, to check for goroutine leak:

        kill -SIGUSR1 1

    An enumeration of the open file descriptors (the <pid> is the process ID)

        cd /proc/<pid>; ls -lr /<pid>/fd | wc -l

     Collect the logs too.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13641,,,,FAB-13854,FAB-14054,FAB-17366,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|i006kp:",,,,Unset,Unset,Week ending 2019-Feb-01,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"Earlier we created bug FAB-14054 for memory leak - which has since been marked invalid.
We did not see any memory leaks in traffic tests lasting 12-24 hours with 9-18 Millions of transactions.  We are running another week-long test at a low transaction rate to monitor memory usage.",System Test,,(Please add usage information),scottz,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
cceventmgmt RetrieveChaincodeArtifacts should first check new lifecycle and fallback to LSCC,FAB-13811,37024,39066,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,wlahti,wlahti,22/Jan/19 7:12 AM,20/Apr/19 7:32 PM,28/Oct/23 3:04 AM,20/Apr/19 7:32 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14570,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0089b:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/19 3:21 AM;wlahti;edit: Abandoned this CR: https://gerrit.hyperledger.org/r/c/28876/. I'll push a new one when ready.;;;","09/Mar/19 1:58 AM;wlahti;Picking this up again.

WIP: https://gerrit.hyperledger.org/r/c/29965/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhance DeployedChaincodeInfoProvider API to take additional params for chaincodeName and queryexecutor,FAB-13812,37026,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,22/Jan/19 2:07 PM,23/Jan/19 3:51 AM,28/Oct/23 3:04 AM,23/Jan/19 3:51 AM,,,,,,,,,,fabric-ledger,,,,,0,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008bj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unsigned overflow while handling state request.,FAB-13813,37027,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,22/Jan/19 4:08 PM,28/Jan/19 11:29 PM,28/Oct/23 3:04 AM,28/Jan/19 11:29 PM,,,,,,v2.0.0,,,,fabric-gossip,,,,,0,,,,,"Currently in the gossip state component, while handling state request it computes requested batch size in {{handleStateRequest}} method

{code}
batchSize := request.EndSeqNum - request.StartSeqNum
{code}

where {{EndSeqNum}} and {{StartSeqNum}} unsigned ints, hence this could lead to the overflow.

This should be fixed, by first of all checking whenever 

{code}
	if request.StartSeqNum > request.EndSeqNum {
		logger.Errorf(""Invalid sequence interval [%d...%d], ignoring request..."", request.StartSeqNum, request.EndSeqNum)
		return
	}
{code}

and also assert batch size with 

{code}
	if request.EndSeqNum > defAntiEntropyBatchSize+request.StartSeqNum {
		logger.Errorf(""Requesting blocks range (%d-%d) greater than configured allowed""+
			"" (%d) batching size for anti-entropy. ""+
			""Ignoring request..."", request.StartSeqNum, request.EndSeqNum, defAntiEntropyBatchSize)
		return
	}
{code}",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008bz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Jan/19 4:09 PM;C0rWin;https://gerrit.hyperledger.org/r/28882 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Send token transaction to orderer,FAB-13814,37035,36646,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,bur,wenjian,wenjian,22/Jan/19 9:58 PM,23/Jan/20 7:31 AM,28/Oct/23 3:04 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,"SDK will provide a sendTokenTransaction API that 
 * takes serialized token transaction as input parameter
 * create envelope for the transaction
 * broadcast to orderer",,bur,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008cn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bur,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jan/19 10:53 PM;bur;WIP https://gerrit.hyperledger.org/r/#/c/29008/1;;;","23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Design SDK APIs for token commands,FAB-13815,37036,36646,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,wenjian,wenjian,wenjian,22/Jan/19 10:08 PM,23/Jan/20 7:31 AM,28/Oct/23 3:04 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,"There are 2 kinds of token commands
 * query commands (ListTokens and Allowance): do not invoke transaction, API returns List<TokenOutput>
 * transactional commands (Issue, Transfer, Approve, TransferFrom, Swap): invoke transaction, need 2 steps: 1st step communicates to prover peer to get TokenTransaction and 2nd step sends transaction

Proposal:
 * TokenWallet provides high level API issue/transfer/redeem/…that communicates to prover peer and send transactions to orderer
 * Low level APIs: call sendTokenCommand and sendTokenTransaction separately.

 

Implement a TokenWallet class in the same package as the Channel class to process token commands that provides the following APIs. Note that TokenResponse is a placeholder for now. It will contain the response data, e.g., transaction id and transaction event

 

    // Issue allows client to issue new tokens to the system

   TokenResponse issue(List<TokenToIssue> tokensToIssue)

    throws TokenException, InvalidArgumentException;

 

    // Transfer allows the client to transfer tokens from the owning user to other users

    TokenResponse transfer(List<ByteString>tokenIDs, List<RecipientTransferShare> shares)

    throws TokenException, InvalidArgumentException;

       

    // Redeem allows client to redeem tokens owned by a user.

    // The returned transaction envelope should be submitted via the SubmitTransactin API.

  TokenResponse redeem(List<ByteString> tokenIds, *long* quantity)

   **   throws TokenException, InvalidArgumentException

 

    // Approve is the function that the client authorizes to transfer his tokens.

    // It takes as parameter an array of token.AllowanceRecipientShare that

    // identifies who can spend the tokens on behalf of the owner and describes

    // how the tokens are distributed.

    TokenResponse Approve(List<ByteString> tokenIds, List<AllowanceRecipientShare> shares)

    throws TokenException, InvalidArgumentException;

 

 

    // TransferFrom is the function that the client calls to transfer the tokens that has been

    // delegated to him. It takes as parameters an array of tokenIDs and an array of shares

    // that identify the recipients and describe how the tokens are going to be distributed.

    TokenResponse TransferFrom(List<ByteString> tokenIds, List<RecipientTransferShare> shares)

    throws TokenException, InvalidArgumentException;

 

    // Swap allows the client to submit an atomic swap request.

    TokenResponse Swap(List<ByteString> tokenIds, List<PlainSwapTerms> terms)

    throws TokenException, InvalidArgumentException;

 

    // List communicates to a prover peer to list tokens owned by the calling user

    List<TokenOutput> listTokens()

    throws TokenException, InvalidArgumentException;

 

    // ListAllowance is the function that the client calls to list the delegated tokens he

    // received from the delegator. ListAllowance takes as parameter a delegator identity

    List<TokenOutput> listAllowance(ByteString delegatorIdentity)

    throws TokenException, InvalidArgumentException;

 ",,bur,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Jan/19 1:32 AM;wenjian;javasdk-token-enhancement.docx;https://jira.hyperledger.org/secure/attachment/16631/javasdk-token-enhancement.docx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008cv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bur,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jan/19 10:53 PM;bur;WIP https://gerrit.hyperledger.org/r/#/c/29009/;;;","23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a fabric developer, I would like to treat the bccsp packages as separately versioned libraries",FAB-13817,37039,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,sykesm,sykesm,22/Jan/19 11:27 PM,26/Oct/19 12:54 PM,28/Oct/23 3:04 AM,,,,,,,Future,,,,,,,,,0,blocked,ipm,ipm-planned,,Relocate the bccsp code from fabric to fabric-lib-go and vendor the package into fabric. The bccsp package should be tagged with the semantic version 0.0.1.,,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15574,,,No,,Unset,No,,,"1|i00r7v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Feb/19 6:55 AM;sykesm;Blocked until we can get under the dependency interactions between proto, bccsp, and idemix.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update limits and cleanup Vagrantfile,FAB-13818,37040,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,22/Jan/19 11:35 PM,26/Jan/19 3:20 AM,28/Oct/23 3:04 AM,26/Jan/19 3:20 AM,,,,,,,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008dr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Jan/19 11:37 PM;sykesm;https://gerrit.hyperledger.org/r/28890 [FAB-13818] add limits and cleanup Vagrantfile;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Investigate high memory utilization during chaincode tests,FAB-13819,37041,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,22/Jan/19 11:39 PM,26/Jan/19 1:31 AM,28/Oct/23 3:04 AM,26/Jan/19 1:31 AM,,,,,,,,,,fabric-common,,,,,0,ipm,,,,"When running unit-tests inside the vagrant VM, we consistently run out of memory during the chaincode tests. Investigate where the memory consumption is coming from and any possible resolution.

{code}
2019-01-21 21:03:17.949 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 001 orderer type: solo
2019-01-21 21:03:17.949 UTC [common.tools.configtxgen.localconfig] Load -> INFO 002 Loaded configuration: /home/vagrant/go/src/github.com/hyperledger/fabric/sampleconfig/configtx.yaml
2019-01-21 21:03:17.956 UTC [chaincodeCmd] validatePeerConnectionParameters -> WARN 003 received more TLS root cert files (2) than peer addresses (1)
2019-01-21 21:03:17.971 UTC [chaincodeCmd] validatePeerConnectionParameters -> WARN 004 received more TLS root cert files (1) than peer addresses (0)
2019-01-21 21:03:17.985 UTC [chaincodeCmd] ClientWait -> INFO 005 txid [txid0] committed with status (VALID) at peer0
2019-01-21 21:03:17.988 UTC [chaincodeCmd] ClientWait -> INFO 006 txid [txid0] committed with status (VALID) at peer1
2019-01-21 21:03:17.988 UTC [chaincodeCmd] ClientWait -> INFO 007 txid [txid0] committed with status (VALID) at peer0
2019-01-21 21:03:17.990 UTC [chaincodeCmd] ClientWait -> INFO 008 txid [txid0] committed with status (VALID) at peer0
2019-01-21 21:03:17.990 UTC [chaincodeCmd] ClientWait -> INFO 009 txid [txid0] committed with status (VALID) at peer1
Error: must supply value for chaincode name, path and version parameters
2019-01-21 21:03:18.023 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 00a Using default escc
2019-01-21 21:03:18.023 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 00b Using default vscc
Error: error getting chaincode deployment spec for badexample02: path to chaincode does not exist: /home/vagrant/go/src/github.com/hyperledger/fabric/examples/chaincode/go/bad_example02
2019-01-21 21:03:18.144 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 00c Using escc escc
2019-01-21 21:03:18.144 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 00d Using vscc vscc
2019-01-21 21:03:18.151 UTC [chaincodeCmd] submitInstallProposal -> INFO 00e Installed remotely: response:<status:200 > endorsement:<> 
Error: could not unmarshal chaincode package to CDS or SignedCDS
2019-01-21 21:03:18.164 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 00f Using escc escc
2019-01-21 21:03:18.164 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 010 Using vscc vscc
fatal error: runtime: out of memory

runtime stack:
runtime.throw(0x1a3d20f, 0x16)
	/opt/go/src/runtime/panic.go:608 +0x72
runtime.sysMap(0xc05c000000, 0x10000000, 0x31445f8)
	/opt/go/src/runtime/mem_linux.go:156 +0xc7
runtime.(*mheap).sysAlloc(0x27a5a60, 0x10000000, 0x97493c, 0x7fc5e05bfd28)
	/opt/go/src/runtime/malloc.go:619 +0x1c1
runtime.(*mheap).grow(0x27a5a60, 0x62b5, 0x0)
	/opt/go/src/runtime/mheap.go:920 +0x42
runtime.(*mheap).allocSpanLocked(0x27a5a60, 0x62b5, 0x3144608, 0x98585b)
	/opt/go/src/runtime/mheap.go:848 +0x337
runtime.(*mheap).alloc_m(0x27a5a60, 0x62b5, 0x970100, 0xc00005c840)
	/opt/go/src/runtime/mheap.go:692 +0x119
runtime.(*mheap).alloc.func1()
	/opt/go/src/runtime/mheap.go:759 +0x4c
runtime.(*mheap).alloc(0x27a5a60, 0x62b5, 0x10100, 0xc000046000)
	/opt/go/src/runtime/mheap.go:758 +0x8a
runtime.largeAlloc(0xc56a000, 0x100000001, 0xc000000f00)
	/opt/go/src/runtime/malloc.go:1019 +0x97
runtime.mallocgc.func1()
	/opt/go/src/runtime/malloc.go:914 +0x46
runtime.systemstack(0x7fffae661520)
	/opt/go/src/runtime/asm_amd64.s:351 +0x66
runtime.mstart()
	/opt/go/src/runtime/proc.go:1229

goroutine 64 [running]:
runtime.systemstack_switch()
	/opt/go/src/runtime/asm_amd64.s:311 fp=0xc000069c10 sp=0xc000069c08 pc=0x9adb40
runtime.mallocgc(0xc56a000, 0x180bea0, 0x16c0801, 0x9965e0)
	/opt/go/src/runtime/malloc.go:913 +0x8b1 fp=0xc000069cb0 sp=0xc000069c10 pc=0x95c8c1
runtime.growslice(0x180bea0, 0xc03dc46000, 0x694955, 0x694955, 0x694956, 0x31407d8, 0x0, 0x996662)
	/opt/go/src/runtime/slice.go:204 +0x1aa fp=0xc000069d28 sp=0xc000069cb0 pc=0x99678a
github.com/hyperledger/fabric/peer/chaincode/mock.(*Deliver).recordInvocation(0xc000234000, 0x1a28bf3, 0x4, 0x31407d8, 0x0, 0x0)
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/mock/deliver.go:204 +0x33f fp=0xc000069de0 sp=0xc000069d28 pc=0x16c08ff
github.com/hyperledger/fabric/peer/chaincode/mock.(*Deliver).Recv(0xc000234000, 0xc000000001, 0xe40337, 0x0)
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/mock/deliver.go:100 +0x203 fp=0xc000069e88 sp=0xc000069de0 pc=0x16bf5e3
github.com/hyperledger/fabric/peer/chaincode.(*deliverGroup).ClientWait(0xc0002ff8c0, 0xc00023c660)
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/common.go:656 +0x339 fp=0xc000069fd0 sp=0xc000069e88 pc=0x16e65d9
runtime.goexit()
	/opt/go/src/runtime/asm_amd64.s:1333 +0x1 fp=0xc000069fd8 sp=0xc000069fd0 pc=0x9afc21
created by github.com/hyperledger/fabric/peer/chaincode.(*deliverGroup).Wait
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/common.go:632 +0x16b

goroutine 1 [chan receive, 1 minutes]:
testing.(*T).Run(0xc0000c2900, 0x1a36fd7, 0x11, 0x1a7e7d8, 0xc0004fdb01)
	/opt/go/src/testing/testing.go:879 +0x692
testing.runTests.func1(0xc0000c2900)
	/opt/go/src/testing/testing.go:1119 +0xa9
testing.tRunner(0xc0000c2900, 0xc0004fdca8)
	/opt/go/src/testing/testing.go:827 +0x163
testing.runTests(0xc000553d20, 0x26ad840, 0x30, 0x30, 0xc0003e9e00)
	/opt/go/src/testing/testing.go:1117 +0x4ef
testing.(*M).Run(0xc000166380, 0x0)
	/opt/go/src/testing/testing.go:1034 +0x2ef
github.com/hyperledger/fabric/peer/chaincode.TestMain(0xc000166380)
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/package_test.go:42 +0x50
main.main()
	_testmain.go:200 +0x32f

goroutine 7 [syscall, 1 minutes]:
os/signal.signal_recv(0x9afc21)
	/opt/go/src/runtime/sigqueue.go:139 +0x9c
os/signal.loop()
	/opt/go/src/os/signal/signal_unix.go:23 +0x30
created by os/signal.init.0
	/opt/go/src/os/signal/signal_unix.go:29 +0x4f

goroutine 72 [runnable]:
compress/flate.(*compressor).findMatch(0xc006b4e000, 0xfe24, 0xbabc, 0x3, 0x1dc, 0xb, 0x307, 0x201)
	/opt/go/src/compress/flate/deflate.go:233 +0x606
compress/flate.(*compressor).deflate(0xc006b4e000)
	/opt/go/src/compress/flate/deflate.go:443 +0x1792
compress/flate.(*compressor).write(0xc006b4e000, 0xc011219800, 0x1000, 0x800, 0xc011219000, 0x1000, 0x1000)
	/opt/go/src/compress/flate/deflate.go:551 +0xb7
compress/flate.(*Writer).Write(0xc006b4e000, 0xc011219000, 0x1000, 0x1000, 0x1000, 0xc05f061d42, 0xa05c88)
	/opt/go/src/compress/flate/deflate.go:709 +0x5d
compress/gzip.(*Writer).Write(0xc00001a4d0, 0xc011219000, 0x1000, 0x1000, 0xc00fd33de8, 0xc011219000, 0x1000)
	/opt/go/src/compress/gzip/gzip.go:196 +0x1fd
archive/tar.(*regFileWriter).Write(0xc000524d20, 0xc011219000, 0x1000, 0x1000, 0x1000, 0x0, 0x0)
	/opt/go/src/archive/tar/writer.go:497 +0x199
archive/tar.(*Writer).Write(0xc00008c700, 0xc011219000, 0x1000, 0x1000, 0x64, 0x0, 0x0)
	/opt/go/src/archive/tar/writer.go:435 +0xa9
bufio.(*Reader).writeBuf(0xc0005066c0, 0x1bb1ac0, 0xc00008c700, 0x1000, 0x0, 0x0)
	/opt/go/src/bufio/bufio.go:510 +0xfc
bufio.(*Reader).WriteTo(0xc0005066c0, 0x1bb1ac0, 0xc00008c700, 0x7fc5dc57ba38, 0xc0005066c0, 0xc0074a9c01)
	/opt/go/src/bufio/bufio.go:491 +0x236
io.copyBuffer(0x1bb1ac0, 0xc00008c700, 0x1bb1b60, 0xc0005066c0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
	/opt/go/src/io/io.go:384 +0x46b
io.Copy(0x1bb1ac0, 0xc00008c700, 0x1bb1b60, 0xc0005066c0, 0xc00f8ad260, 0x0, 0x0)
	/opt/go/src/io/io.go:364 +0x75
github.com/hyperledger/fabric/core/container/util.WriteStreamToPackage(0x1bb1b60, 0xc0005066c0, 0xc0074a9c70, 0x67, 0xc0074a9c81, 0x56, 0xc00008c700, 0x0, 0x0)
	/home/vagrant/go/src/github.com/hyperledger/fabric/core/container/util/writer.go:204 +0x6ce
github.com/hyperledger/fabric/core/container/util.WriteFileToPackage(0xc0074a9c70, 0x67, 0xc0074a9c81, 0x56, 0xc00008c700, 0x0, 0x0)
	/home/vagrant/go/src/github.com/hyperledger/fabric/core/container/util/writer.go:175 +0x3ec
github.com/hyperledger/fabric/core/chaincode/platforms/golang.(*Platform).GetDeploymentPayload(0x31407d8, 0x1a68f75, 0x41, 0x0, 0x0, 0x0, 0x0, 0x0)
	/home/vagrant/go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:462 +0x1644
github.com/hyperledger/fabric/core/chaincode/platforms.(*Registry).GetDeploymentPayload(0xc0003963e0, 0x1a2aa90, 0x6, 0x1a68f75, 0x41, 0x1a2aa90, 0x6, 0x1a68f75, 0x41, 0x0)
	/home/vagrant/go/src/github.com/hyperledger/fabric/core/chaincode/platforms/platforms.go:103 +0xed
github.com/hyperledger/fabric/core/container.GetChaincodePackageBytes(0xc0003963e0, 0xc000210680, 0x1, 0xc000039220, 0x18, 0xe, 0xc000210680)
	/home/vagrant/go/src/github.com/hyperledger/fabric/core/container/controller.go:191 +0x17d
github.com/hyperledger/fabric/peer/chaincode.getChaincodeDeploymentSpec(0xc000210680, 0xc000000001, 0x2, 0x0, 0x1a32200)
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/common.go:57 +0x251
github.com/hyperledger/fabric/peer/chaincode.genChaincodeDeploymentSpec(0xc00018b680, 0x1a2efea, 0x9, 0x1a33c1f, 0xe, 0x98, 0x18aab60, 0x6)
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/install.go:330 +0x10f
github.com/hyperledger/fabric/peer/chaincode.(*Installer).getLegacyChaincodePackageMessage(0xc0000b74a0, 0x1, 0x5, 0x0, 0xc0000b74a0)
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/install.go:273 +0x364
github.com/hyperledger/fabric/peer/chaincode.(*Installer).installLegacy(0xc0000b74a0, 0xc000000001, 0x5)
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/install.go:167 +0x69
github.com/hyperledger/fabric/peer/chaincode.(*Installer).installChaincode(0xc0000b74a0, 0xc000416de0, 0x0, 0x6, 0x103a4bf, 0x9b1572)
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/install.go:118 +0x166
github.com/hyperledger/fabric/peer/chaincode.installCmd.func1(0xc00018b680, 0xc000416de0, 0x0, 0x6, 0x0, 0x0)
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/install.go:84 +0x107
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc00018b680, 0xc000416d80, 0x6, 0x6, 0xc00018b680, 0xc000416d80)
	/home/vagrant/go/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:762 +0x4f6
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0xc00018b680, 0x95cba8, 0x60, 0x186ae40)
	/home/vagrant/go/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:852 +0x433
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0xc00018b680, 0x60, 0xc0000391a0)
	/home/vagrant/go/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:800 +0x39
github.com/hyperledger/fabric/peer/chaincode.installLegacyEx02(0xc000187100, 0x0, 0x0)
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/install_test.go:161 +0x238
github.com/hyperledger/fabric/peer/chaincode.TestInstallLegacy(0xc000187100)
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/install_test.go:169 +0x3d
testing.tRunner(0xc000187100, 0x1a7e7d8)
	/opt/go/src/testing/testing.go:827 +0x163
created by testing.(*T).Run
	/opt/go/src/testing/testing.go:878 +0x65a

goroutine 63 [runnable]:
github.com/hyperledger/fabric/peer/chaincode/mock.(*Deliver).Recv(0xc00059ed80, 0xc000000001, 0xe54f3e, 0x0)
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/mock/deliver.go:96 +0x3f6
github.com/hyperledger/fabric/peer/chaincode.(*deliverGroup).ClientWait(0xc0002ff8c0, 0xc00023c630)
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/common.go:656 +0x339
created by github.com/hyperledger/fabric/peer/chaincode.(*deliverGroup).Wait
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/common.go:632 +0x16b

goroutine 65 [semacquire, 1 minutes]:
sync.runtime_Semacquire(0xc0002ff978)
	/opt/go/src/runtime/sema.go:56 +0x39
sync.(*WaitGroup).Wait(0xc0002ff970)
	/opt/go/src/sync/waitgroup.go:130 +0xb5
github.com/hyperledger/fabric/peer/chaincode.(*deliverGroup).WaitForWG(0xc0002ff8c0, 0xc00008b860)
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/common.go:686 +0x59
created by github.com/hyperledger/fabric/peer/chaincode.(*deliverGroup).Wait
	/home/vagrant/go/src/github.com/hyperledger/fabric/peer/chaincode/common.go:635 +0x1f7
FAIL	github.com/hyperledger/fabric/peer/chaincode	70.927s
{code}",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13875,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008dz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Jan/19 11:44 PM;sykesm;This issue persisted after bumping some limits and increasing the memory of the VM from 4G to 6G.

/cc [~kchristidis], [~mastersingh24];;;","22/Jan/19 11:45 PM;sykesm;kern.log:
{code}
Jan 21 16:12:11 vagrant kernel: [131564.302127] chaincode.test invoked oom-killer: gfp_mask=0x24201ca, order=0, oom_score_adj=0
Jan 21 16:12:11 vagrant kernel: [131564.302131] chaincode.test cpuset=/ mems_allowed=0
Jan 21 16:12:11 vagrant kernel: [131564.302137] CPU: 0 PID: 15660 Comm: chaincode.test Tainted: G           OE   4.4.0-131-generic #157-Ubuntu
Jan 21 16:12:11 vagrant kernel: [131564.302139] Hardware name: innotek GmbH VirtualBox/VirtualBox, BIOS VirtualBox 12/01/2006
Jan 21 16:12:11 vagrant kernel: [131564.302141]  0000000000000286 a4e4dd439a8e380d ffff8800da1239e8 ffffffff81401c43
Jan 21 16:12:11 vagrant kernel: [131564.302144]  ffff8800da123ba0 ffff8800da680e00 ffff8800da123a58 ffffffff81211a1e
Jan 21 16:12:11 vagrant kernel: [131564.302147]  ffffffff81cda777 0000000000000000 ffffffff81e6c1e0 0000000000000206
Jan 21 16:12:11 vagrant kernel: [131564.302150] Call Trace:
Jan 21 16:12:11 vagrant kernel: [131564.302158]  [<ffffffff81401c43>] dump_stack+0x63/0x90
Jan 21 16:12:11 vagrant kernel: [131564.302163]  [<ffffffff81211a1e>] dump_header+0x5a/0x1c5
Jan 21 16:12:11 vagrant kernel: [131564.302167]  [<ffffffff81197dd2>] oom_kill_process+0x202/0x3c0
Jan 21 16:12:11 vagrant kernel: [131564.302170]  [<ffffffff811981f9>] out_of_memory+0x219/0x460
Jan 21 16:12:11 vagrant kernel: [131564.302174]  [<ffffffff8119e245>] __alloc_pages_slowpath.constprop.88+0x965/0xb00
Jan 21 16:12:11 vagrant kernel: [131564.302177]  [<ffffffff8119e668>] __alloc_pages_nodemask+0x288/0x2a0
Jan 21 16:12:11 vagrant kernel: [131564.302181]  [<ffffffff811e841c>] alloc_pages_current+0x8c/0x110
Jan 21 16:12:11 vagrant kernel: [131564.302183]  [<ffffffff8119429b>] __page_cache_alloc+0xab/0xc0
Jan 21 16:12:11 vagrant kernel: [131564.302186]  [<ffffffff81196840>] filemap_fault+0x160/0x440
Jan 21 16:12:11 vagrant kernel: [131564.302189]  [<ffffffff812a9e86>] ext4_filemap_fault+0x36/0x50
Jan 21 16:12:11 vagrant kernel: [131564.302192]  [<ffffffff811c3697>] __do_fault+0x77/0x110
Jan 21 16:12:11 vagrant kernel: [131564.302195]  [<ffffffff811c7485>] handle_mm_fault+0xfa5/0x1850
Jan 21 16:12:11 vagrant kernel: [131564.302199]  [<ffffffff810ced71>] ? __raw_callee_save___pv_queued_spin_unlock+0x11/0x20
Jan 21 16:12:11 vagrant kernel: [131564.302203]  [<ffffffff810ad686>] ? finish_task_switch+0x76/0x230
Jan 21 16:12:11 vagrant kernel: [131564.302207]  [<ffffffff8106d8a1>] __do_page_fault+0x1a1/0x410
Jan 21 16:12:11 vagrant kernel: [131564.302210]  [<ffffffff8106db32>] do_page_fault+0x22/0x30
Jan 21 16:12:11 vagrant kernel: [131564.302214]  [<ffffffff81855c58>] page_fault+0x28/0x30
Jan 21 16:12:11 vagrant kernel: [131564.302216] Mem-Info:
Jan 21 16:12:11 vagrant kernel: [131564.302221] active_anon:945470 inactive_anon:21853 isolated_anon:0
Jan 21 16:12:11 vagrant kernel: [131564.302221]  active_file:40 inactive_file:18 isolated_file:0
Jan 21 16:12:11 vagrant kernel: [131564.302221]  unevictable:913 dirty:0 writeback:0 unstable:0
Jan 21 16:12:11 vagrant kernel: [131564.302221]  slab_reclaimable:5689 slab_unreclaimable:5241
Jan 21 16:12:11 vagrant kernel: [131564.302221]  mapped:980 shmem:3323 pagetables:4116 bounce:0
Jan 21 16:12:11 vagrant kernel: [131564.302221]  free:21718 free_pcp:30 free_cma:0
Jan 21 16:12:11 vagrant kernel: [131564.302225] Node 0 DMA free:15904kB min:264kB low:328kB high:396kB active_anon:0kB inactive_anon:0kB active_file:0kB inactive_file:0kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:15992kB managed:15904kB mlocked:0kB dirty:0kB writeback:0kB mapped:0kB shmem:0kB slab_reclaimable:0kB slab_unreclaimable:0kB kernel_stack:0kB pagetables:0kB unstable:0kB bounce:0kB free_pcp:0kB local_pcp:0kB free_cma:0kB writeback_tmp:0kB pages_scanned:0 all_unreclaimable? yes
Jan 21 16:12:11 vagrant kernel: [131564.302231] lowmem_reserve[]: 0 3489 3935 3935 3935
Jan 21 16:12:11 vagrant kernel: [131564.302235] Node 0 DMA32 free:61320kB min:59612kB low:74512kB high:89416kB active_anon:3362948kB inactive_anon:77068kB active_file:124kB inactive_file:40kB unevictable:3652kB isolated(anon):0kB isolated(file):0kB present:3653568kB managed:3572772kB mlocked:3652kB dirty:0kB writeback:0kB mapped:3920kB shmem:12224kB slab_reclaimable:20524kB slab_unreclaimable:17600kB kernel_stack:3552kB pagetables:14664kB unstable:0kB bounce:0kB free_pcp:0kB local_pcp:0kB free_cma:0kB writeback_tmp:0kB pages_scanned:5104 all_unreclaimable? yes
Jan 21 16:12:11 vagrant kernel: [131564.302241] lowmem_reserve[]: 0 0 446 446 446
Jan 21 16:12:11 vagrant kernel: [131564.302245] Node 0 Normal free:9648kB min:7700kB low:9624kB high:11548kB active_anon:418932kB inactive_anon:10344kB active_file:36kB inactive_file:32kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:524288kB managed:457676kB mlocked:0kB dirty:0kB writeback:0kB mapped:0kB shmem:1068kB slab_reclaimable:2232kB slab_unreclaimable:3364kB kernel_stack:544kB pagetables:1800kB unstable:0kB bounce:0kB free_pcp:120kB local_pcp:120kB free_cma:0kB writeback_tmp:0kB pages_scanned:260 all_unreclaimable? no
Jan 21 16:12:11 vagrant kernel: [131564.302251] lowmem_reserve[]: 0 0 0 0 0
Jan 21 16:12:11 vagrant kernel: [131564.302254] Node 0 DMA: 0*4kB 0*8kB 0*16kB 1*32kB (U) 2*64kB (U) 1*128kB (U) 1*256kB (U) 0*512kB 1*1024kB (U) 1*2048kB (M) 3*4096kB (M) = 15904kB
Jan 21 16:12:11 vagrant kernel: [131564.302267] Node 0 DMA32: 482*4kB (UME) 761*8kB (UME) 477*16kB (UME) 242*32kB (UME) 211*64kB (UME) 100*128kB (UME) 46*256kB (UME) 0*512kB 0*1024kB 0*2048kB 0*4096kB = 61472kB
Jan 21 16:12:11 vagrant kernel: [131564.302279] Node 0 Normal: 82*4kB (UEH) 91*8kB (UMEH) 46*16kB (UEH) 42*32kB (UMEH) 28*64kB (UMEH) 23*128kB (UMEH) 7*256kB (UMEH) 0*512kB 0*1024kB 0*2048kB 0*4096kB = 9664kB
Jan 21 16:12:11 vagrant kernel: [131564.302293] Node 0 hugepages_total=0 hugepages_free=0 hugepages_surp=0 hugepages_size=2048kB
Jan 21 16:12:11 vagrant kernel: [131564.302294] 3957 total pagecache pages
Jan 21 16:12:11 vagrant kernel: [131564.302296] 0 pages in swap cache
Jan 21 16:12:11 vagrant kernel: [131564.302298] Swap cache stats: add 977699, delete 977699, find 159280/215098
Jan 21 16:12:11 vagrant kernel: [131564.302299] Free swap  = 0kB
Jan 21 16:12:11 vagrant kernel: [131564.302300] Total swap = 0kB
Jan 21 16:12:11 vagrant kernel: [131564.302301] 1048462 pages RAM
Jan 21 16:12:11 vagrant kernel: [131564.302303] 0 pages HighMem/MovableOnly
Jan 21 16:12:11 vagrant kernel: [131564.302304] 36874 pages reserved
Jan 21 16:12:11 vagrant kernel: [131564.302305] 0 pages cma reserved
Jan 21 16:12:11 vagrant kernel: [131564.302306] 0 pages hwpoisoned
{code};;;","25/Jan/19 2:03 AM;sykesm;Memory profiling implies this is due to a high number of calls to operations on the Deliver mock. Because each invocation to the mock gets recorded, all of the buffers envelopes and responses get held in memory.

The tests do not use use the recorded invocations for any assertions so I was able to comment out the recording and the tests seemed to pass.;;;","25/Jan/19 6:00 AM;sykesm;https://gerrit.hyperledger.org/r/28950;;;","25/Jan/19 7:06 AM;sykesm;With this change applied, I'm able to successfully build and test fabric in a VM with 2G of memory.;;;",,,,,,,,,,,,,,,,,,,,,,,,
Error when install Endorsement plugin,FAB-13820,37042,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,bont.akachain,bont.akachain,22/Jan/19 11:45 PM,23/Jan/20 7:32 AM,28/Oct/23 3:04 AM,23/Jan/20 7:32 AM,v1.3.0,,,,,,,,,fabric-build,,,,,4,stale-item,,,,"Hi everyone,
i'm developing a part of Blockchain platform using customized endorsement policy.
However there's an issue when installing this plugin using Fabric guide based on the instructions in the link.
https://hyperledger-fabric.readthedocs.io/en/release-1.3/pluggable_endorsement_and_validation.html

This is a common issue that you usually facing at this time.

note: go version build plugin and fabric: go1.11.1

Log error in attachment file.

How to fix this issue.
Thanks.",,bont.akachain,hongsongp97,longnv1a,matthew.akachain,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/19 11:42 PM;bont.akachain;log error;https://jira.hyperledger.org/secure/attachment/16608/log+error",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-8729,,,No,,Unset,No,,,"1|i008e7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bont.akachain,hongsongp97,longnv1a,matthew.akachain,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jan/19 11:44 AM;matthew.akachain;To fix this problem, 

Find ""DOCKER_GO_LDFLAGS"" in  file docker-env.mk

   +, [https://github.com/hyperledger/fabric/blob/release-1.3/docker-env.mk#L69|https://github.com/hyperledger/fabric/blob/release-1.4/docker-env.mk#L69]

         remove flag  ""-static ""  from  docker-env.mk  '-static -lpthread' =>  '-lpthread'

   +, Re Build Hyperledger.  make release  make docker  (note: rmi all old docker images)

 

   +, go version build fabric network and go version build plugin should be  (go version 1.10.4)

   +, Setup Defautl Endorsement (core.yaml)endorsers: escc:

                                                                                             name: DefaultEndorsement 

                                                                                             library: /etc/hyperledger/fabric/plugins/escc.so

   +, Run test.;;;","11/Feb/19 12:54 PM;bont.akachain;[~matthew.akachain] I  tried to follow your instructions and it worked. Thank you very much!;;;","11/Feb/19 1:58 PM;longnv1a;Thank for your report. Hope that this issue resolved in the next version.;;;","23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Unit tests are failing in the daily code coverage due to Initialization error,FAB-13821,37043,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sambhavdutt,sambhavdutt,sambhavdutt,22/Jan/19 11:46 PM,19/Mar/19 8:13 PM,28/Oct/23 3:04 AM,02/Feb/19 12:53 AM,v1.4.0,v2.0.0,,,,,,,,fabric-build,,,,,0,ci-failure,,,,"The unit-tests have failed in the daily code-coverage job(z) due to the initialization error in BCCSP package in fabric/bccsp/pkcs11

*Intermittent:* No
*Branch:* master, release-1.4
*Platform:* s390x
*Error Snippet:*

{code:java}
20:37:40 Immutable = [false]Failed initiliazing BCCSP at [{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:<nil> DummyKeystore:<nil> Library:/usr/lib/s390x-linux-gnu/softhsm/libsofthsm2.so Label:ForFabric Pin:98765432 SoftVerify:true Immutable:false}]: [Failed initializing PKCS11 library /usr/lib/s390x-linux-gnu/softhsm/libsofthsm2.so ForFabric: Could not get Slot List [pkcs11: 0x190: CKR_CRYPTOKI_NOT_INITIALIZED]]FAIL	github.com/hyperledger/fabric/bccsp/pkcs11	0.033s
{code}

*Build Logs:*

https://jenkins.hyperledger.org/view/Daily/job/fabric-unit-test-coverage-daily-release-1.4-s390x/1/console

https://jenkins.hyperledger.org/view/Daily/job/fabric-unit-test-coverage-daily-master-s390x/1/console",,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,d97663813e4aca5f670b847e73115988f2c0e656,Unset,No,,,"1|i008ef:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/19 7:18 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/28889/;;;","25/Jan/19 12:30 AM;vijaypunugubati;Waiting for the above patch to be merged and this will resolve the issue.;;;","25/Jan/19 11:48 PM;sambhavdutt;The unit-tests have failed in the daily code-coverage job(z) due to the initialization error again.


*fabric Commit:* 37c4943555b411f9419824d1e24c07c29efae697
*Consistent:* Yes
*Branch:* master, release-1.4
*Platform:* s390x
*Error Snippet:*

{code:java}
21:52:23 Immutable = [false]Failed initiliazing BCCSP at [{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:<nil> DummyKeystore:<nil> Library:/usr/lib/s390x-linux-gnu/softhsm/libsofthsm2.so Label:ForFabric Pin:98765432 SoftVerify:true Immutable:false}]: [Failed initializing PKCS11 library /usr/lib/s390x-linux-gnu/softhsm/libsofthsm2.so ForFabric: Could not get Slot List [pkcs11: 0x190: CKR_CRYPTOKI_NOT_INITIALIZED]]FAIL	github.com/hyperledger/fabric/bccsp/pkcs11	0.039s
{code}

*Build Logs:*

https://jenkins.hyperledger.org/view/Daily/job/fabric-unit-test-coverage-daily-master-s390x/5/console

https://jenkins.hyperledger.org/view/Daily/job/fabric-unit-test-coverage-daily-release-1.4-s390x/4/console;;;","01/Feb/19 12:02 AM;rameshthoomu;This seems failing after the below changes made in CI

[https://github.com/hyperledger/ci-management/commit/0ba9168b8f6e8cf0563a4ba2c5c68d47d66c9223]

The softhsm token must be intialized with in the shell script.;;;","02/Feb/19 12:52 AM;sambhavdutt;[~rameshthoomu] 

After your CR for this, the tests are not failing now due to the absence of softhsm package but with error in gossip service which is not related to Softhsm. Making this as Done. 

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-s390x/12/;;;",,,,,,,,,,,,,,,,,,,,,,,,
PTE adds SCDir to barebones test script,FAB-13822,37044,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,23/Jan/19 12:11 AM,23/Jan/19 11:10 PM,28/Oct/23 3:04 AM,23/Jan/19 11:10 PM,,,,,,,,,,fabric-quality,,,,,0,,,,,PTE adds SCDir to barebones test script,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i008en:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"23/Jan/19 1:18 AM;dongming;https://gerrit.hyperledger.org/r/#/c/28891/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix issues within the Commercial Paper contract,FAB-13823,37048,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mbwhite,mbwhite,mbwhite,23/Jan/19 1:49 AM,25/Sep/19 1:09 AM,28/Oct/23 3:04 AM,25/Sep/19 1:09 AM,,,,,,,,,,fabric-samples,,,,,0,,,,,"1) The name in the package.json doesn't match that in the docs/sample applications

2) StateList doesn't sensibly handle a missing state

3) We really should have tests... 

4) Move to 1.4 prod libraries",,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15717,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008f3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wire 2.0 capability,FAB-13824,37049,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,23/Jan/19 2:01 AM,23/Jan/19 3:55 AM,28/Oct/23 3:04 AM,23/Jan/19 3:55 AM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008fb:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
false positive in fabric-test functional behave tests,FAB-13825,28571,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Won't Do,latitiah,rameshthoomu,rameshthoomu,16/Mar/18 4:37 AM,31/Jul/19 4:52 AM,28/Oct/23 3:04 AM,31/Jul/19 4:52 AM,,,,,,,,,,fabric-quality,,,,,0,ci-failure,,,,"observed false positive errors in fabric-test functional behave tests. I see tests are failed in behave but the overall status is showing as SUCCESS/PASSED in the test result analyzer page.

[https://jenkins.hyperledger.org/view/Daily/job/fabric-test-daily-x86_64/test_results_analyzer/]

search for `assertion failed` in build#288",,denyeart,jtclark,latitiah,rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,FAB-9947,,,,,,FAB-10805,,,FAB-10805,,,,,,,"12/Oct/18 1:43 AM;scottz;FalsePositiveBehaveJob2018-10-11.png;https://jira.hyperledger.org/secure/attachment/16129/FalsePositiveBehaveJob2018-10-11.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzwzzj:",,,,,,,,,,,,,,,,,,,,,,denyeart,jtclark,latitiah,rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Mar/18 12:47 AM;latitiah;The reason for the false positives is the behave tests never complete execution. Behave dies with the following error:
{code}
07:47:25 OSError: [Errno 12] Cannot allocate memory
07:47:26 /w/workspace/fabric-test-daily-x86_64/gopath/src/github.com/hyperledger/fabric-test/regression/daily{code}
 As a result, the behave summary is never executed for consumption by Jenkins. 

There are 2 things that should be researched/done here. 
 # Why are the system resources running out of memory?
 # The Jenkins job should show a failure when there is no summary from the test executions.

 ;;;","19/Mar/18 10:45 AM;rameshthoomu;[~ry] we are seeing cannot allocate memory issues in x86_64 build machines.. Below is the memory details on that build nodes;;;","19/Mar/18 10:45 AM;rameshthoomu;[~ry] we are seeing cannot allocate memory issues in x86_64 build machines.. Below are the memory details on that build nodes. Can I get *ssh* access to one of the production or sandbox x86_64 to debug this further.

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-x86_64/292/
{code:java}
09:47:15.296 ---> nproc:
09:47:15.296  2 
09:47:15.296 
09:47:15.306 ---> df -h:
09:47:15.307  Filesystem      Size  Used Avail Use% Mounted on
09:47:15.307 udev            3.9G     0  3.9G   0% /dev
09:47:15.307 tmpfs           799M   34M  765M   5% /run
09:47:15.307 /dev/vda1        39G   15G   25G  37% /
09:47:15.307 tmpfs           3.9G     0  3.9G   0% /dev/shm
09:47:15.307 tmpfs           5.0M     0  5.0M   0% /run/lock
09:47:15.307 tmpfs           3.9G     0  3.9G   0% /sys/fs/cgroup
09:47:15.307 none            2.0G  1.8G  218M  90% /w
09:47:15.307 tmpfs           799M     0  799M   0% /run/user/1001 
09:47:15.307 
09:47:15.315 ---> free -m:
09:47:15.315                total        used        free      shared  buff/cache   available
09:47:15.315 Mem:           7983         798        4392        1864        2792        5001
09:47:15.315 Swap:             0           0           0 {code};;;","21/Mar/18 10:52 PM;rameshthoomu;@latitiah On the upgraded build node (16 core, 64. gigs of ram), I don't see the memory allocation error but I see the below error{{
}}
{code:java}
03:08:48.624 IOError: [Errno 11] Resource temporarily unavailable{code}
see the build log [https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/295/consoleFull]

{{Could you please check this.}};;;","27/Mar/18 6:28 AM;latitiah;As this is a CI issue concerning the CI resources and not a software issue, I'm reassigning.

Some hints on area to start searching:
- What node is it trying to use that the job is not able to access? You will need to dig into this a bit more on the CI system nodes. 
- Monitor to see the node usage. Per Ry (via Rocketchat), the minions were set to 4 core, 16G. You can look at the minion name to see which one is having problems when this occurs.;;;","10/Apr/18 3:27 AM;scottz;[~latitiah] Is there a different way to configure and run Behave? Could we create a dummy xml file (so the default behavior would be displayed as failure and indicate the tests were started but not completed) that gets removed or overwritten after Behave tests complete?

This would not preclude the CI team investigation to find and fix the root cause.;;;","28/Apr/18 3:47 AM;scottz;what is the status of this issue? It has bounced around between people without any explanations. We should add comments whenever we reassign an issue, to say what we learned and what we eliminated as possible causes and what we think the next step should be done to investigate.;;;","28/Apr/18 11:17 AM;latitiah;[~scottz] As stated in my last comment, I reassigned this issue since this is something that CI needs to investigate. I gave some areas and hints of where to focus the investigation. This is not a behave execution problem, but a jenkins script execution problem. An OSError indicates a system issue - in this case one of the nodes indicated that it ran out of memory.;;;","09/May/18 11:24 PM;rameshthoomu;We are now getting the test summary from the behave tests.. [https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-x86_64/345/]

https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-x86_64/test_results_analyzer/
{code:java}
04:40:41.991 0 features passed, 6 failed, 1 skipped
04:40:41.991 8 scenarios passed, 89 failed, 40 skipped
04:40:41.991 240 steps passed, 89 failed, 2798 skipped, 0 undefined
04:40:41.991 Took 124m46.588s{code}
This test ran on build node [prd-ubuntu1604-x86_64-4c-16g-415|https://jenkins.hyperledger.org/computer/prd-ubuntu1604-x86_64-4c-16g-415];;;","13/May/18 12:11 AM;rameshthoomu;Not seeing this issue in the recent builds. Closing this issue for now.;;;","11/Oct/18 11:06 PM;latitiah;Reopened since we are seeing this issue again:  https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-master-x86_64/51/consoleFull;;;","11/Oct/18 11:27 PM;latitiah;The traceback for this failure indicates that the error is crashing the tool itself. As a result, it would be helpful if CI can look for this error and display the build as a failed build when this error is seen and the exit code is not 0.

The tracceback for this error looks like the following:
{code}06:12:57 Traceback (most recent call last):
06:12:57   File ""/usr/local/bin/behave"", line 11, in <module>
06:12:57     sys.exit(main())
06:12:57   File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 183, in main
06:12:57     return run_behave(config)
06:12:57   File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 127, in run_behave
06:12:57     failed = runner.run()
06:12:57   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 804, in run
06:12:57     return self.run_with_paths()
06:12:57   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 824, in run_with_paths
06:12:57     return self.run_model()
06:12:57   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 626, in run_model
06:12:57     failed = feature.run(self)
06:12:57   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 321, in run
06:12:57     failed = scenario.run(runner)
06:12:57   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1114, in run
06:12:57     failed = scenario.run(runner)
06:12:57   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 711, in run
06:12:57     if not step.run(runner):
06:12:57   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1379, in run
06:12:57     formatter.result(self)
06:12:57   File ""/usr/local/lib/python2.7/dist-packages/behave/formatter/pretty.py"", line 151, in result
06:12:57     self.stream.write(indent(step.error_message.strip(), u""      ""))
06:12:57   File ""/usr/lib/python2.7/codecs.py"", line 370, in write
06:12:57     self.stream.write(data)
06:12:57 IOError: [Errno 11] Resource temporarily unavailable{code};;;","12/Oct/18 1:42 AM;scottz;yes if all tests were not executed to completion, then the build should be marked as a failure and we should also see at least one test failure marked in the final results. For example, job 51 of the daily behave master test suite should be shown as a failure (red dot), not a pass (blue dot) and we should not see ""no failures"". [https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-master-x86_64/51/.|https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-master-x86_64/51/]  (Picture attached for reference.);;;","18/Oct/18 10:37 PM;rameshthoomu;[~latitiah] The script has -e (exit on the first error) set, if the test command returns non zero, the script should fail.. May be test command is not returning non zero error code. How to check what error code the test test command is returning.-;;;","27/Oct/18 12:58 AM;latitiah;I'm not sure what script you are referring to, but [https://github.com/hyperledger/fabric-test/blob/master/regression/daily/runBehaveTestSuite.sh#L1] does not use the ""-e"" option. That said, the behave tool is crashing with a Traceback, it is definitely returning a non-zero exit code.;;;","30/Oct/18 7:30 PM;jtclark;[~latitiah], [~scottz] - All of the fabric-test-daily-behave-master jobs reference above are no longer available. Is there are more recent example of this behavior? Or, would it be better to troubleshoot this on the Sandbox?;;;","13/Nov/18 10:46 AM;jtclark;[~latitiah], [~scottz] - Still waiting for a more recent example of this behavior. ;;;","16/Nov/18 1:43 AM;latitiah;You can force this by causing the behave tool to crash when executing the test. The console will show a ""Traceback"" error while the job will have a success.

In the fabric-test repo, go to ""feature/environment.py"" and add the following code to the ""after_all"" method (at the end of the file):
{code}
    raise Exception
{code}

The exit status should not be 0.
{code}
echo $?
{code}
;;;","05/Jan/19 12:51 AM;rameshthoomu;[~jtclark] any update on this?;;;","05/Jan/19 1:01 AM;latitiah;Yes, this still occurs.;;;","05/Jan/19 1:36 AM;jtclark;Transitioning this bug to [~vijaypunugubati].;;;","23/Jan/19 1:59 AM;rameshthoomu;assigning this to [~latitiah].;;;","25/Jul/19 12:55 AM;denyeart;[~vijaypunugubati] Is this still an issue?;;;","25/Jul/19 11:08 PM;scottz;There are these paths:
# Behave runs through all testcases, and they pass.
# Behave runs through all testcases, and there are one or more failures.
# Behave runs through some testcases, crashes, exits with error code, without completing all the testcases. No failures on the testcases that were completed.
# Behave runs through some testcases, crashes, exits with error code, without completing all the testcases. There are failures on the testcases that were completed.
# Behave is never started because of some prep failure, such as when the job could not download images.

Things look good on the display board now for 1 & 2; testcase failures are handled well, with appropriate colors. For #5, it shows NA in the display columns, so that is fine. The only scenario that has not happened within the last week, and which I cannot confirm whether jenkins handles it properly, is when the behave framework crashes and exits abnormally without completing all the testcases. So, for 3 & 4, what would jenkins show in those cases? I am not sure how we could test this without submitting some code to force behave to crash.

On the other hand, do we want to spend time on this, if we are going to deprecate Behave soon...;;;","31/Jul/19 4:52 AM;scottz;Behave is being deprecated, so we can close this.
A few more weeks or months of false positives wont' change anything.
Besides, the behave framework crashes have been fixed (as far as we know) so this this does not happen anymore so there is nothing to trigger this and to troubleshoot.;;;",,,,
"""golint"" coverage is only 72% on fabric",FAB-13826,36491,,Task,Backlog,FAB,Fabric,software,denyeart,,,Low,,,rameshthoomu,rameshthoomu,07/Jan/19 2:15 AM,22/Feb/21 9:45 PM,28/Oct/23 3:04 AM,,,,,,,,,,,,,,,,0,help-wanted,hygiene,,,"Observed ""golint"" coverage on fabric is 72%.  See the below link from the ""goreport"" card

https://goreportcard.com/report/github.com/hyperledger/fabric#golint",,denyeart,nao,ndr_brt,rameshthoomu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00507:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,nao,ndr_brt,rameshthoomu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Feb/19 3:13 AM;denyeart;[~rameshthoomu] Is this assigned to Gari for a reason?  If anybody can work on it, seems like a good one to label as help-wanted.;;;","01/Apr/19 11:58 PM;sykesm;The majority of linter issues simply highlight a lack of godoc. This is unsurprising.

The non-doc issues should be reviewed and help-wanted bugs should be opened based on the kind of issue.;;;","01/Apr/19 11:59 PM;sykesm;I also don't understand how this is a ci failure?;;;","24/Apr/19 11:23 PM;rameshthoomu;Agree with you [~sykesm]. Removed;;;","22/Feb/21 9:45 PM;ndr_brt;What's the golint coverage expected?;;;",,,,,,,,,,,,,,,,,,,,,,,,
Publish build artificats from Makefile target,FAB-13827,37053,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,rameshthoomu,rameshthoomu,23/Jan/19 3:59 AM,20/Feb/19 8:15 AM,28/Oct/23 3:04 AM,23/Jan/19 2:41 PM,v2.0.0,,,,,,,,,fabric-build,,,,,0,,,,,"This Epic is created to publish docker images, binaries to Docker Hub and Nexus3 repository.",,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,ghx-label-10,,Publish Images from Makefile target,To Do,No,,Unset,No,,,"1|i008fr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/19 2:41 PM;denyeart;[~rameshthoomu] I'd prefer we only use Epics for large user-facing features.  I've closed this one for now.  For grouping and tracking build, CI, and release tasks, I'd suggest using a search filter, and then if you like we can create a Jira 'Board' which enables ranking the tasks 1 through N via simple drag and drop in the list.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Publish Build artifacts from Makefile targets,FAB-13828,37055,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,rameshthoomu,rameshthoomu,23/Jan/19 4:03 AM,05/Nov/19 12:37 AM,28/Oct/23 3:04 AM,05/Nov/19 12:37 AM,v2.0.0,,,,,,,,,fabric-build,,,,,0,ipm,,,,"This Story belongs to all the build artifacts we publish from fabric repository.
 * fabric docker images
 ** to docker hub
 ** to Nexus3
 * fabric binaries
 ** to nexus2",,rameshthoomu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pkr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Mar/19 5:57 AM;sykesm;[~rameshthoomu] Are we doing the second part of this or should we close this out?

Thanks.;;;","17/Apr/19 10:44 PM;rameshthoomu;[~sykesm] Will submit change soon.;;;","05/Nov/19 12:37 AM;sykesm;Release processes are changing with new pipelines.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB index rebuild system test: test query with updated index (same name but different definition),FAB-13829,37056,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,AdnanChoudhury,AdnanChoudhury,AdnanChoudhury,23/Jan/19 4:38 AM,03/Dec/19 8:08 AM,28/Oct/23 3:04 AM,03/Dec/19 8:08 AM,,,,,,,,,,fabric-ledger,fabric-test,,,,0,,,,,"Scenario:

in a typical 2 Org 4 peer scenario, marbles chaincode.
Do:
1) define index named ""test_index"" with 2 field (""owner"", ""color"")
2) create 1 million marble records.

3) upgrade the chaincode with new definition for ""test_index"" ((""owner"", ""color"", ""size""))
4) simultaneously, do several queries that use that index
5) verify the query requests are served.",,AdnanChoudhury,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008gf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),AdnanChoudhury,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Makefile target to publish fabric docker images to Docker Hub & Nexus,FAB-13830,37057,37055,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,23/Jan/19 5:21 AM,07/Feb/19 11:24 PM,28/Oct/23 3:04 AM,07/Feb/19 12:11 AM,v2.0.0,,,,,v2.0.0,,,,fabric-build,,,,,0,ipm,,,,"Add a Makefile target in fabric repository to publish fabric docker images to Docker Hub and Nexus3 repository.
 * Add ""publish-images"" target in Makefile
 * execute Make target with DOCKER_NS=nexus3.hyperledger.org:10002/hyperledger
 * Default DOCKER_NS is hyperledger
 * DOCKER_NS=nexus3.hyperledger.org:10002/hyperledger make docker publish-images PROJECT_VERSION=$ARCH_$BASE_VERSION - For nexus3
 * make docker publish-images - Docker Hub",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008gn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Jan/19 6:11 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/28898/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add a Makefile target to publish fabric binaries to nexus2,FAB-13831,37058,37055,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,rameshthoomu,rameshthoomu,23/Jan/19 5:24 AM,03/Dec/19 12:04 PM,28/Oct/23 3:04 AM,03/Dec/19 12:04 PM,v2.0.0,,,,,v2.0.0,,,,fabric-build,,,,,0,ipm,,,,"Add a Makefile target in fabric repository to publish fabric binaries to nexus2 repository.
 * Add publish-binaries makefile target
 * Keep fabric binary script (maven-deploy) in scripts directory in fabric repo",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008gv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Dec/19 11:59 AM;rameshthoomu;As we are moving away from nexus, marking this as a in-valid.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add docker-thirdparty for unit-test target,FAB-13832,37059,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,rameshthoomu,rameshthoomu,23/Jan/19 6:05 AM,23/Jan/20 3:53 AM,28/Oct/23 3:04 AM,23/Jan/20 3:53 AM,v1.2.0,v1.3.0,,,,v1.2.1,,,,fabric-build,,,,,0,,,,,"While running unit-tests in fabric, we need CouchDB image but we didn't specify docker-thirdparty make target in unit-test target.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008h3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 3:53 AM;rameshthoomu;This is already implemented long ago. Closing this;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Update release-1.2 Makefile to add ""docker-thirdparty"" for ""unit-tests"" target",FAB-13833,37060,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,23/Jan/19 6:20 AM,12/Feb/19 10:30 PM,28/Oct/23 3:04 AM,12/Feb/19 10:30 PM,v1.2.0,,,,,v1.2.0,,,,fabric-build,,,,,0,,,,,"Update release-1.2 Makefile to add docker-thirdparty for unit-tests target. Also, remove the `enable_ci_only_tests` target.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008hb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,release-1.3,release-1.2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Facing error ""Error: error parsing transient string: illegal base64 data at input byte 0 - proposal response: <nil>"", while passing private data using -- transient flag",FAB-13834,34873,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,nfrunza,kmohanar1,kmohanar1,25/Oct/18 3:15 PM,23/Jan/19 1:59 PM,28/Oct/23 3:04 AM,23/Jan/19 1:59 PM,,,,,,,,,,,,,,,0,fabric,Hyperledger,privatedata,,"I used byfn network and deployed the latest private chaincode(which includes patch0 as suggested in the link https://jira.hyperledger.org/browse/FAB-10231)

while tring to invoke chaincode using the --transient flag getting the error ""Error: error parsing transient string: illegal base64 data at input byte 0 - proposal response: <nil>""

 

Second case i just tried to add the ""tMap, err := stub.GetTransient()"" to my mycc chaincode and tried to extract as followed in the link https://jira.hyperledger.org/browse/FAB-10231.

i can able start the network while invoking the chaincode i am facing the same above mentioned error ""Error: error parsing transient string: illegal base64 data at input byte 0 - proposal response: <nil>""

 

Can someone please guide how to use transient flag to post transaction with private data using --transient flag. If you are sharing sample chaincode and steps that will be so much helpful.

 

Thanks

Kumar M",,denyeart,kmohanar1,nfrunza,,,,,,,,3600,14400,,0%,3600,14400,,,,,,,,,,,,,,,FAB-12056,FAB-13777,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzw9j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,kmohanar1,nfrunza,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Nov/18 8:54 PM;kmohanar1;Can you please give update on this or share in the meantime if we prepared any material for passing and storing private data using --transient flag and gettransient API.

 

Thanks;;;","27/Nov/18 10:21 PM;nfrunza;The bug should be reported to Fabric either SDK Node or other
;;;","23/Jan/19 1:59 PM;denyeart;Use of --transient field has been added to private data tutorial. See linked Jira issues for details.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor peer/node/start.go,FAB-13835,37062,36515,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,23/Jan/19 2:27 PM,08/Mar/19 3:06 AM,28/Oct/23 3:04 AM,08/Mar/19 3:06 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008hj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create a routing shim to still report collections from the old lifecycle,FAB-13836,37063,36515,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,23/Jan/19 2:30 PM,08/Mar/19 3:06 AM,28/Oct/23 3:04 AM,08/Mar/19 3:06 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008hr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement Namespaces piece of deployedccinfoprovider interface,FAB-13837,37064,36515,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,23/Jan/19 2:31 PM,08/Mar/19 3:06 AM,28/Oct/23 3:04 AM,08/Mar/19 3:06 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008hz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement UpdatedChaincodes piece of deployedccinfoprovider interface,FAB-13838,37065,36515,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,23/Jan/19 2:34 PM,08/Mar/19 3:06 AM,28/Oct/23 3:04 AM,08/Mar/19 3:06 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008i7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement ImplicitCollections piece of deployedccinfoprovider interface,FAB-13839,37066,36515,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,23/Jan/19 2:35 PM,08/Mar/19 3:06 AM,28/Oct/23 3:04 AM,08/Mar/19 3:06 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,FAB-13521,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008if:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement ChaincodeInfo piece of deployedccinfoprovider interface,FAB-13840,37067,36515,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,23/Jan/19 2:35 PM,08/Mar/19 3:06 AM,28/Oct/23 3:04 AM,08/Mar/19 3:06 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008in:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement CollectionInfo piece of deployedccinfoprovider interface,FAB-13841,37068,36515,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,23/Jan/19 2:36 PM,13/Feb/19 2:43 AM,28/Oct/23 3:04 AM,13/Feb/19 2:43 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008iv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tighten the LifecycleResources interface,FAB-13842,37069,36519,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,23/Jan/19 2:40 PM,08/Mar/19 3:07 AM,28/Oct/23 3:04 AM,08/Mar/19 3:07 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008j3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
intermittent test failure in core/cclifecycle,FAB-13843,37070,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,guoger,guoger,23/Jan/19 3:13 PM,06/Feb/19 11:32 PM,28/Oct/23 3:04 AM,25/Jan/19 6:56 AM,,,,,,,,,,,,,,,0,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8239/console

{code}
12:55:33 ==================
12:55:33 WARNING: DATA RACE
12:55:33 Write at 0x000001d3e110 by goroutine 26:
12:55:33   github.com/hyperledger/fabric/core/cclifecycle_test.newLogRecorder()
12:55:33       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/lifecycle_test.go:464 +0x99
12:55:33   github.com/hyperledger/fabric/core/cclifecycle_test.TestMetadata()
12:55:33       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/lifecycle_test.go:344 +0x53
12:55:33   testing.tRunner()
12:55:33       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:827 +0x162
12:55:33 
12:55:33 Previous read at 0x000001d3e110 by goroutine 25:
12:55:33   github.com/hyperledger/fabric/core/cclifecycle.(*Lifecycle).fireChangeListeners()
12:55:33       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/lifecycle.go:188 +0x2a4
12:55:33   github.com/hyperledger/fabric/core/cclifecycle.(*Subscription).processPendingUpdate()
12:55:33       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/subscription.go:57 +0x6e5
12:55:33   github.com/hyperledger/fabric/core/cclifecycle.(*Subscription).ChaincodeDeployDone.func1()
12:55:33       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/subscription.go:79 +0x131
12:55:33 
12:55:33 Goroutine 26 (running) created at:
12:55:33   testing.(*T).Run()
12:55:33       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:878 +0x650
12:55:33   testing.runTests.func1()
12:55:33       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1119 +0xa8
12:55:33   testing.tRunner()
12:55:33       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:827 +0x162
12:55:33   testing.runTests()
12:55:33       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1117 +0x4ee
12:55:33   testing.(*M).Run()
12:55:33       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1034 +0x2ee
12:55:33   main.main()
12:55:33       _testmain.go:112 +0x332
12:55:33 
12:55:33 Goroutine 25 (finished) created at:
12:55:33   github.com/hyperledger/fabric/core/cclifecycle.(*Subscription).ChaincodeDeployDone()
12:55:33       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/subscription.go:68 +0x7d
12:55:33   github.com/hyperledger/fabric/core/cclifecycle_test.TestMultipleUpdates()
12:55:33       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/lifecycle_test.go:320 +0x1399
12:55:33   testing.tRunner()
12:55:33       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:827 +0x162
12:55:33 ==================
12:55:33 --- FAIL: TestMetadata (0.01s)
12:55:33     <autogenerated>:1: [] Metadata -> WARN 0021 Requested Metadata for non-existent channel mychannel
12:55:33     <autogenerated>:1: [] queryChaincodeDefinitions -> DEBU 0022 Chaincode {cc1 1.0 [42]} 's version is 1.0 and Id is [42]
12:55:33     <autogenerated>:1: [] DeployedChaincodes -> DEBU 0023 Returning [{cc1 1.0 [1 2 3 4 5] [42] []}]
12:55:33     <autogenerated>:1: [] fireChangeListeners -> DEBU 0024 Listeners for channel mychannel invoked
12:55:33     <autogenerated>:1: [] Metadata -> DEBU 0025 Returning metadata for channel mychannel , chaincode cc1 : {cc1 1.0 [1 2 3 4 5] [42] []}
12:55:33     <autogenerated>:1: [] Metadata -> ERRO 0026 Failed obtaining new query for channel mychannel : failed obtaining query executor
12:55:33     <autogenerated>:1: [] DeployedChaincodes -> ERRO 0027 Failed querying lscc namespace: GetState failed
12:55:33     <autogenerated>:1: [] Metadata -> ERRO 0028 Failed querying LSCC for channel mychannel : GetState failed
12:55:33     <autogenerated>:1: [] DeployedChaincodes -> INFO 0029 Chaincode cc2 isn't instantiated
12:55:33     <autogenerated>:1: [] DeployedChaincodes -> DEBU 002a Returning []
12:55:33     <autogenerated>:1: [] Metadata -> INFO 002b Chaincode cc2 isn't defined in channel mychannel
12:55:33     <autogenerated>:1: [] DeployedChaincodes -> DEBU 002c Returning [{cc2 1.0 [] [42] []}]
12:55:33     <autogenerated>:1: [] DeployedChaincodes -> DEBU 002d Retrieved collection config for cc1 from cc1~collection
12:55:33     <autogenerated>:1: [] DeployedChaincodes -> DEBU 002e Returning [{cc1 1.0 [1 2 3 4 5] [42] [10 10 10]}]
12:55:33     <autogenerated>:1: [] DeployedChaincodes -> ERRO 002f Failed querying lscc namespace for cc1~collection: foo
12:55:33     <autogenerated>:1: [] Metadata -> ERRO 0030 Failed querying LSCC for channel mychannel : foo
12:55:33     testing.go:771: race detected during execution of test
12:55:33 2019-01-23 04:54:32.702 UTC [discovery.lifecycle] DeployedChaincodes -> ERRO 031 Failed querying lscc namespace: failed querying ledger
12:55:33 2019-01-23 04:54:32.703 UTC [discovery.lifecycle] DeployedChaincodes -> ERRO 032 Failed extracting chaincode info about cc1 from LSCC returned payload. Error: failed unmarshaling lscc read value into ChaincodeData: proto: ccprovider.ChaincodeData: illegal tag 0 (wire type 0)
12:55:33 2019-01-23 04:54:32.703 UTC [discovery.lifecycle] DeployedChaincodes -> ERRO 033 Chaincode cc1 is listed in LSCC as cc2
12:55:33 2019-01-23 04:54:32.704 UTC [discovery.lifecycle] DeployedChaincodes -> INFO 034 Chaincode cc1 isn't instantiated
12:55:33 FAIL
12:55:33 coverage: 99.3% of statements
12:55:33 FAIL	github.com/hyperledger/fabric/core/cclifecycle	0.423s
{code}

cc [~sykesm]",,guoger,sykesm,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,FAB-13860,,,,,,,,,,,,,FAB-13910,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008jb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,wlahti,yacovm,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jan/19 6:43 AM;sykesm;Hit this locally today. Possibly related to FAB-13471.

 ;;;","24/Jan/19 7:16 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/28934/;;;","25/Jan/19 6:46 AM;wlahti;-Still seeing this error in CI even with the above CR:- [-https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8342/-]

Ignore this. Turns out Jason hasn't pulled the latest master today. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
"Programming model - Commercial Paper sample (Advanced techniques - SBE, implicit private data collections, etc)",FAB-13844,37073,,Epic,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,odowdaibm,odowdaibm,odowdaibm,23/Jan/19 7:13 PM,05/Aug/20 8:54 PM,28/Oct/23 3:04 AM,05/Aug/20 8:53 PM,v2.0.0,,,,,,,,,fabric-samples,,,,,1,,,,,"A significant update to Commercial Paper sample to demonstrate how to use State Based Endorsement and Implicit collections for this important asset transfer scenario.

 

Deliverables include
 * New Sample to sit alongside existing commercial paper sample.
 * New Tutorial, building on existing *Commercial Paper* tutorial.
 * Extended Documentation, building on existing *Developing Applications* chapter.
 * Some updates to the current commercial paper sample will be necessary. These will ensure a seamless transition from the current sample to the advanced sample.

 

 ",,denyeart,isaacwch,Jakeeyturner,jmason900,jyellick,odowdaibm,silliman,SjirNijssen,zRich,,,,,,,,,,,,,,,,,,,,,,FAB-18115,,,,,,,FAB-14545,FAB-14547,FAB-14548,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,In design,(Please add high level design or a link to the design),Required,Unset,Required,ghx-label-12,,"Programming model - Commercial Paper sample (Advanced - SBE, collections)",To Do,No,,Not Required,No,,,"1|i008jr:",,,,No,Required,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,isaacwch,Jakeeyturner,jmason900,jyellick,odowdaibm,silliman,SjirNijssen,zRich,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/19 7:20 PM;odowdaibm;Hi [~SjirNijssen] [~isaacwch] [~jyellick] [~denyeart]. Making you aware this JIRA has been raised.  I will add design material for our upcoming call, and we'll keep work corralled here. Thanks and best.;;;","25/Jan/19 3:42 PM;odowdaibm;[~Yogendrasri] [~zRich]Hello!;;;","14/Aug/19 1:28 AM;jmason900;I assume delivery of Advanced Commercial Paper sample is dependent on the timing Fabric 2.0;;;","05/Aug/20 8:53 PM;denyeart;The 'advanced' sample demonstrating private data, state-based endorsement, access control , and secured agreement concepts has been implemented using the asset transfer scenario in FAB-18115.

See sample and corresponding tutorial:

[https://github.com/hyperledger/fabric-samples/tree/master/asset-transfer-secured-agreement]

[https://hyperledger-fabric.readthedocs.io/en/latest/secured_private_asset_transfer_tutorial.html]

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Increase default etcdraft tick interval,FAB-13845,37074,37013,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,23/Jan/19 7:17 PM,03/Mar/19 9:58 PM,28/Oct/23 3:04 AM,28/Jan/19 8:17 PM,,,,,,,,,,fabric-orderer,,,,,0,,,,,"increase tick interval to 200ms

it shouldn't be 500ms, because that would result in a random ElectionTimeout between 5s ~ 10s, so we have leaderless period of 5s. However, our {{peer channel create}} timeout is 5s by default. (it submits config update to orderer, and try to fetch genesis block of channel, which invokes {{Deliver}} API, that returns error when leaderless)",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13920,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008jz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Jan/19 7:25 PM;guoger;https://gerrit.hyperledger.org/r/28918;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"In Fabric 1.4 new topic operations were introduced, need some input to generate those endpoints",FAB-13846,37075,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,kmohanar1,kmohanar1,23/Jan/19 7:37 PM,24/Jan/19 12:19 AM,28/Oct/23 3:04 AM,24/Jan/19 12:19 AM,,,,,,,,,,fabric-docs,fabric-orderer,fabric-peer,fabric-samples,,0,,,,,"Hi Fabric,

I tried to run the latest fabric 1.4 application(Fabric-Samples). As mentioned in the link [https://hyperledger-fabric.readthedocs.io/en/latest/operations_service.html#id2]   i tried to generate /metrics API by configuring metrics.provider as prometheus/statsd.

I assigned value in the orderer.yaml Metrics.Provider value as ""statsd"".
In the orderer log also i can able to see, "" Metrics.Provider = ""statsd"" "" is printed.
But, I can see one more log statement like

[orderer.example.com|http://orderer.example.com/] | 2019-01-23 07:12:29.750 UTC [orderer.operations] Log -> WARN 164 err write udp 127.0.0.1:35392->127.0.0.1:8125: write: connection refused
[orderer.example.com|http://orderer.example.com/] | 2019-01-23 07:12:29.750 UTC [orderer.operations] Log -> WARN 165 during WriteTo err write udp 127.0.0.1:35392->127.0.0.1:8125: write: connection refused


i am not configuring the Operations section in orderer.yaml, i just left default values as it is.
again i changed Metrics.Provider = ""prometheus""
now the application is running as expected
but, i can't able to see any metrics endpoints running in the machine

As mentioned, the application should generate /metrics endpoint. Ref Link https://hyperledger-fabric.readthedocs.io/en/latest/operations_service.html#id2
i am running application on a server. 
i checked it like https://SERVER_IP:8125/metrics and
https://SERVER_IP:7050/metrics -> since its is configured in orderer i checked with 7050 as well

can you please guide how exactly should i check the endpoint",,kmohanar1,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008k7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kmohanar1,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jan/19 12:13 AM;sykesm;From the doc:

> An orderer can be configured to expose a /metrics endpoint for Prometheus to scrape

The {{/metrics}} resource is exposed by prometheus. If you configure statsd, {{/metrics}} is not available and you must configure the network and address to send the statsd metrics to.;;;","24/Jan/19 12:19 AM;sykesm;https://hyperledger-fabric.readthedocs.io/en/release-1.4/operations_service.html#id2

{quote}
An orderer can be configured to expose a /metrics endpoint for Prometheus to scrape by setting the metrics provider to prometheus in the Metrics section of orderer.yaml.
{quote};;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Failed to go get fabric-ca,FAB-13847,37076,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Tecnalia,Tecnalia,Tecnalia,23/Jan/19 9:15 PM,16/Jul/19 6:31 PM,28/Oct/23 3:04 AM,16/Jul/19 6:29 PM,,,,,,,,,,fabric-ca,fabric-ca-build,,,,0,,,,,"When trying to download fabric-ca using *go get* tool, we get the following error:
{noformat}
github.com/hyperledger/fabric-ca/lib
/opt/gopath/src/github.com/hyperledger/fabric-ca/lib/server.go:719:23: cert.Issuer.String undefined (type pkix.Name has no field or method String)
/opt/gopath/src/github.com/hyperledger/fabric-ca/lib/server.go:720:24: cert.Subject.String undefined (type pkix.Name has no field or method String)
{noformat}
Our current *go env* is set as:
{noformat}
GOARCH=""amd64""
GOBIN=""""
GOCACHE=""/home/ci/.cache/go-build""
GOEXE=""""
GOFLAGS=""""
GOHOSTARCH=""amd64""
GOHOSTOS=""linux""
GOOS=""linux""
GOPATH=""/opt/gopath/""
GOPROXY=""""
GORACE=""""
GOROOT=""/usr/local/go""
GOTMPDIR=""""
GOTOOLDIR=""/usr/local/go/pkg/tool/linux_amd64""
GCCGO=""gccgo""
CC=""gcc""
CXX=""g++""
CGO_ENABLED=""1""
GOMOD=""""
CGO_CFLAGS=""-g -O2""
CGO_CPPFLAGS=""""
CGO_CXXFLAGS=""-g -O2""
CGO_FFLAGS=""-g -O2""
CGO_LDFLAGS=""-g -O2""
PKG_CONFIG=""pkg-config""
GOGCCFLAGS=""-fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=/tmp/go-build151124065=/tmp/go-build -gno-record-gcc-switches""
{noformat}",,Tecnalia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008kf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Tecnalia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Jul/19 6:30 PM;Tecnalia;The error is not present in v1.4.0 (checked 2019/07/16).

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Periodically query chaincode to assert the result of invocation to avoid flakes,FAB-13848,37077,36295,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,23/Jan/19 9:49 PM,03/Mar/19 9:58 PM,28/Oct/23 3:04 AM,28/Jan/19 11:52 PM,,,,,,,,,,fabric-orderer,,,,,0,,,,,,,guoger,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008kn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,kchristidis,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Jan/19 10:08 PM;guoger;https://gerrit.hyperledger.org/r/c/28921/;;;","28/Jan/19 6:16 PM;guoger;hit here: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/5066/console;;;","28/Jan/19 11:52 PM;kchristidis;Let's tackle this in a follow-up CR: https://gerrit.hyperledger.org/r/c/28921/2/integration/e2e/cft_test.go#303;;;","29/Jan/19 12:33 AM;guoger;[~kchristidis] added this to https://jira.hyperledger.org/browse/FAB-13725. will address altogether;;;","29/Jan/19 12:47 AM;kchristidis;Perfect, thanks!;;;",,,,,,,,,,,,,,,,,,,,,,,,
Migrate +lifecycle to _lifecycle,FAB-13850,37083,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,24/Jan/19 2:31 AM,14/Feb/19 6:36 AM,28/Oct/23 3:04 AM,14/Feb/19 6:36 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008lz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Transfer/Redeem: send grpc request to prover peer,FAB-13852,37086,36646,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,wenjian,wenjian,24/Jan/19 4:00 AM,23/Jan/20 7:31 AM,28/Oct/23 3:04 AM,23/Jan/20 7:31 AM,,,,,,,,,,fabric-token,,,,,0,stale-item,,,,,,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008mn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Approve/Allowance/TransferFrom/Swap: send grpc request to prover peer,FAB-13853,37087,36646,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,wenjian,wenjian,24/Jan/19 4:01 AM,23/Jan/20 7:31 AM,28/Oct/23 3:04 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008mv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft OSN leader does not receive broadcasted transactions from ingress OSN  ,FAB-13854,37089,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,,suryalnvs,suryalnvs,24/Jan/19 4:39 AM,22/Feb/19 2:14 PM,28/Oct/23 3:04 AM,05/Feb/19 3:22 AM,v2.0.0,,,,,v2.0.0,,,,fabric-orderer,,,,,0,raft,,,,"h2. Steps to Reproduce:

Set up and run testcase scenario2 as defined in FAB-13809.
h2. Observed:

A transaction broadcast from ingress OSN is never delivered to Raft OSN Leader on an application channel after serving some transactions (around 16000 transactions in many attempts) successfully. The following log is seen in ingress OSN 
{code:java}
2019-01-23 18:35:53.120 UTC [orderer.consensus.etcdraft] Submit -> DEBU a0a2^[[0m Forwarding submit request to Raft leader 2 {""channel"": ""testorgschannel1"", ""node"": 1}
{code}
In this case, orderer1st-ordererorg is the ingress OSN and orderer2nd-ordererorg is the leader from the above log.

Attaching the logs for all the orderers and peer.

[^snapshot-FAB-13809-orderer1st.log]

[^snapshot-FAB-13809-orderer2nd-leader.log]

[^snapshot-FAB-13809-orderer3rd.log]

[^snapshot-FAB-13809-peer1st.log]

^[^goroutines-ingress-orderer-nonleader.log]^

^^[^goroutines-orderer2-leader.log]^^
h2. Expected:

 The ingress OSN should broadcast the transaction, leader should receive the transaction and order it in the block.

 ",,dongming,kchristidis,scottz,suryalnvs,yacovm,,,,,,,,,,,,,,FAB-13805,,,,,,,,,,,,,,,FAB-13809,FAB-13810,FAB-13604,,,,,"24/Jan/19 6:30 AM;suryalnvs;goroutines-ingress-orderer-nonleader.log;https://jira.hyperledger.org/secure/attachment/16619/goroutines-ingress-orderer-nonleader.log","24/Jan/19 6:35 AM;suryalnvs;goroutines-orderer2-leader.log;https://jira.hyperledger.org/secure/attachment/16621/goroutines-orderer2-leader.log","24/Jan/19 4:36 AM;suryalnvs;snapshot-FAB-13809-orderer1st.log;https://jira.hyperledger.org/secure/attachment/16618/snapshot-FAB-13809-orderer1st.log","24/Jan/19 4:36 AM;suryalnvs;snapshot-FAB-13809-orderer2nd-leader.log;https://jira.hyperledger.org/secure/attachment/16617/snapshot-FAB-13809-orderer2nd-leader.log","24/Jan/19 4:37 AM;suryalnvs;snapshot-FAB-13809-orderer3rd.log;https://jira.hyperledger.org/secure/attachment/16616/snapshot-FAB-13809-orderer3rd.log","24/Jan/19 4:37 AM;suryalnvs;snapshot-FAB-13809-peer1st.log;https://jira.hyperledger.org/secure/attachment/16615/snapshot-FAB-13809-peer1st.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008nb:",,,,Unset,Unset,,,,"Set up and run testcase scenario2 as defined in FAB-13809. Here is a summary: 
1. Create a network of 3 raft orderers and one application channel. 
2. Send transactions through one orderer which is not a leader, one in-flight at a time. ",,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,kchristidis,scottz,suryalnvs,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jan/19 5:06 AM;yacovm;What (probably) happens is - the follower forwards the transaction to the leader, which then sends back to the follower an acknowledgement.
 The acknowledgement is never read from the stream by the follower (no one calls [ReceiveSubmitResponse|https://github.com/hyperledger/fabric/blob/master/orderer/common/cluster/rpc.go#L69] on the follower, right after calling SendSubmit) and the gRPC buffer of the stream gets full after enough acks have been accumulated. If you send the transaction to the leader, it should work. If you bring up a new follower, it should also work (until the queue to it is full).

I noticed that yesterday and already fixed it in the WIP change set ([instead of someone|https://gerrit.hyperledger.org/r/#/c/28892/2/orderer/common/cluster/rpc.go@98] calling the RPC method - I now made the RPC do this itself).

However it would take some time for the change set to be merged...;;;","04/Feb/19 5:31 AM;kchristidis;[~suryalnvs], [~scottz]: This should be taken care of by [~yacovm]'s work in FAB-13805. Can you please retest and let us know whether you still bump into this issue?;;;","05/Feb/19 3:21 AM;dongming;Re-test with image built today (2/4/2019) which include the fix.  Send 18,000 transactions to each orderer and test passes.;;;","05/Feb/19 4:28 AM;kchristidis;[~dongming]: Great, thanks for the update.

[~yacovm]: [https://pixel.nymag.com/imgs/daily/vulture/2015/gifs/leo-toast-9.w710.h473.gif];;;","05/Feb/19 5:11 AM;yacovm;I'm not surprised that once again - theory aligns with reality...;;;",,,,,,,,,,,,,,,,,,,,,,,,
"Add ""Ways to contribute"" to documentation",FAB-13855,37091,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,24/Jan/19 6:00 AM,25/Jan/19 1:00 AM,28/Oct/23 3:04 AM,25/Jan/19 12:19 AM,,,,,,v1.4.1,v2.0.0,,,fabric-docs,,,,,0,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008nr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Onboard an OSN upon startup (no crashes of other OSNs),FAB-13856,37092,,Test Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,suryalnvs,scottz,scottz,24/Jan/19 6:50 AM,24/Jul/19 5:59 AM,28/Oct/23 3:04 AM,24/Jul/19 5:59 AM,v2.0.0,,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,"An admin decides to increase the number of OSNs in the system channel and an application channel, and starts the new orderer using configuration blocks containing all the necessary updates.
h2. Setup
 # Create a network and run a minimum of 10,000 transactions, as in FAB-13601.

h2. Inputs
 # Onboard O4 to the {{orderersystemchannel}}:
 ## Fetch latest config block of {{orderersystemchannel}}.
 ## Edit to add O4.
 ## Sign and submit the config update to O1.
 ## Fetch latest config block again and use it as genesis block for O4 in path ORDERER_GENERAL_GENESISFILE.
 # Onboard O4 to the application channel, {{channel1}}:
 ## Fetch latest config block of {{channel1}}.
 ## Edit {{channel1}} config to add O4.
 ## Sign and submit the channel update transaction to O1.
 # Start O4, using the latest config block.
 # *Verify* O4 participates in the {{orderersystemchannel}} by ensuring the debug logs contain ""leader changed"" to the appropriate orderer for the {{orderersystemchannel}}.
 # *Verify* O4 participates in the application {{channel1}} by ensuring the debug logs contain ""leader changed"" to the appropriate orderer for the {{channel1}}.
 # Watch O4 {{channel1}} block height grow as it retrieves blocks from O1 and/or O2 and/or O3.
 # Once O4 catches up, send another transaction through O4 and verify that new block is added to all the OSNs as well as the peer ledger.

h2. Expectations
 # Verify all blocks in {{channel1}} are retrieved by O4.
 # Observe the rate, how long it takes to catch up.
 # All nodes remain in service throughout the test.
 # No errors in the logs of peers and orderers.
 # No failures or errors reported by PTE.
",,denyeart,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13702,FAB-13861,,,FAB-14046,FAB-14557,,"02/Feb/19 4:34 AM;suryalnvs;orderer4th-onboarding-FAB-13856.zip;https://jira.hyperledger.org/secure/attachment/16655/orderer4th-onboarding-FAB-13856.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|i006kc:",,,,Unset,Unset,Week ending 2019-Feb-01,,,(Please add steps to reproduce),,Unset,,,,,,Pass,Started a separate run of more transactions while new orderer is catching up existing blocks from orderer2nd and observed getting new blocks in the new orderer after caught up with old blocks.,System Test,,(Please add usage information),denyeart,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Delete old chaincode definitions,FAB-13857,37093,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,ales,ales,24/Jan/19 6:50 AM,04/Apr/19 11:17 PM,28/Oct/23 3:04 AM,,,,,,,v2.1.0,,,,,,,,,0,,,,,"After a chaincode is upgraded, the definition of the old version of the chaincode (in the org-local implicit collection) may be removed. This story tracks the work required to perform this operation.",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008o7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
configtxgen for channel creation ignores everything that is not an immediate child of the Application section,FAB-13858,37095,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,jyellick,scottz,scottz,24/Jan/19 8:27 AM,20/Feb/19 2:47 AM,28/Oct/23 3:04 AM,20/Feb/19 2:47 AM,v2.0.0,,,,,v2.0.0,,,,fabric-orderer,fabric-tools,,,,0,raft,,,,"h2. Context
Dynamic onboarding test scenario FAB-13702 requires creating a network with 4 or more orderers, with just 3 of those included in application {{channel1}}. Despite correctly configuring the Raft consenters orderers in the Profiles section of {{configtx.yaml}}, when {{channel1}} gets created it contains the same orderers as in the system channel (all of them).

h2. Explanation
Apparently, in channel creation, {{configtxgen}} simply ignores everything that is not an immediate child of the {{Application}} section of {{configtx.yaml}}.

h2. Expected
For example, when using the attached {{configtx.yaml}}, the consenters {{orderer4th-ordererorg}} and {{orderer5th-ordererorg}} should not be members of any channel based on {{Profiles:OrgChannel}}.

h2. Observed
All channels created with this profile do in fact contain all 5 orderers.",,scottz,yoheiueda,,,,,,,,,,,,,,,,,,,FAB-13702,,,,,,,,,,,,,,,,,,,,"24/Jan/19 8:19 AM;scottz;configtx.yml;https://jira.hyperledger.org/secure/attachment/16622/configtx.yml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,"tested master branch stable load Jan 22, 2019",Unset,No,,,"1|i008on:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,yoheiueda,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Feb/19 12:13 AM;scottz;(SOrry I changed the status of this by mistake; I just set it back to ""in review"".);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Test flake in ""fabric/core/cclifecycle/lifecycle_test.go"" - TestMetadata",FAB-13860,37097,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,manish-sethi,manish-sethi,24/Jan/19 10:06 AM,29/Jan/19 3:15 AM,28/Oct/23 3:04 AM,29/Jan/19 3:15 AM,,,,,,,,,,fabric-peer,,,,,0,race,,,,"Package level logger is getting accessed by a background goroutine and being set to a new logger by test.

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8290/console

{code}
16:10:17 ==================
16:10:17 WARNING: DATA RACE
16:10:17 Write at 0x000001d3e110 by goroutine 26:
16:10:17   github.com/hyperledger/fabric/core/cclifecycle_test.newLogRecorder()
16:10:17       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/lifecycle_test.go:464 +0x99
16:10:17   github.com/hyperledger/fabric/core/cclifecycle_test.TestMetadata()
16:10:17       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/lifecycle_test.go:344 +0x53
16:10:17   testing.tRunner()
16:10:17       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:827 +0x162
16:10:17 
16:10:17 Previous read at 0x000001d3e110 by goroutine 25:
16:10:17   github.com/hyperledger/fabric/core/cclifecycle.(*Lifecycle).fireChangeListeners()
16:10:17       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/lifecycle.go:188 +0x2a4
16:10:17   github.com/hyperledger/fabric/core/cclifecycle.(*Subscription).processPendingUpdate()
16:10:17       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/subscription.go:57 +0x6e5
16:10:17   github.com/hyperledger/fabric/core/cclifecycle.(*Subscription).ChaincodeDeployDone.func1()
16:10:17       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/subscription.go:79 +0x131
16:10:17 
16:10:17 Goroutine 26 (running) created at:
16:10:17   testing.(*T).Run()
16:10:17       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:878 +0x650
16:10:17   testing.runTests.func1()
16:10:17       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1119 +0xa8
16:10:17   testing.tRunner()
16:10:17       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:827 +0x162
16:10:17   testing.runTests()
16:10:17       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1117 +0x4ee
16:10:17   testing.(*M).Run()
16:10:17       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1034 +0x2ee
16:10:17   main.main()
16:10:17       _testmain.go:112 +0x332
16:10:17 
16:10:17 Goroutine 25 (finished) created at:
16:10:17   github.com/hyperledger/fabric/core/cclifecycle.(*Subscription).ChaincodeDeployDone()
16:10:17       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/subscription.go:68 +0x7d
16:10:17   github.com/hyperledger/fabric/core/cclifecycle_test.TestMultipleUpdates()
16:10:17       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/lifecycle_test.go:320 +0x1399
16:10:17   testing.tRunner()
16:10:17       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:827 +0x162
16:10:17 ==================
16:10:17 --- FAIL: TestMetadata (0.02s)
{code}",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13843,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008p3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Onboard an OSN upon startup and dynamically (no crashes of other OSNs),FAB-13861,37098,,Test Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,suryalnvs,AdnanChoudhury,AdnanChoudhury,24/Jan/19 10:07 AM,24/Jul/19 5:59 AM,28/Oct/23 3:04 AM,24/Jul/19 5:59 AM,v2.0.0,,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,"An admin decides to increase the number of OSNs in the system channel and an application channel, and starts the new orderer using configuration blocks containing all the necessary updates.
h2. Setup
 # Create a network and run a minimum of 10,000 transactions, as in FAB-13601. For a better test, establish 100,000 blocks on the application channel.

h2. Inputs
 # Add O4 to the {{orderersystemchannel}}:
 ## Fetch latest config block of {{orderersystemchannel}}.
 ## Edit to add O4.
 ## Sign and submit the {{orderersystemchannel}} config update to O1.
 ## Fetch latest config block again and use it as genesis block for O4 in path ORDERER_GENERAL_GENESISFILE.
 # Start O4, using the latest config block (edited to include O4).
 # *Verify* O4 participates in the {{orderersystemchannel}} by ensuring the debug logs contain ""leader changed"" to the appropriate orderer for the {{orderersystemchannel}}.
 # Dynamic Onboard O4 to the application channel, {{channel1}}:
 ## Fetch latest config block of {{channel1}}.
 ## Edit {{channel1}} config to add O4.
 ## Sign and submit the channel update transaction to O1.
 # *Verify* O4 participates in the application {{channel1}} by ensuring the debug logs contain ""leader changed"" to the appropriate orderer for the {{channel1}}.
 # Watch O4 {{channel1}} block height grow as it retrieves blocks from O1 and/or O2 and/or O3.
 # Once O4 catches up, send another transaction through O4 and verify that new block is added to all the OSNs as well as the peer ledger.

h2. Expectations
 # Verify all blocks in {{channel1}} are retrieved by O4.
 # Observe the rate, how long it takes to catch up.
 # All nodes remain in service throughout the test.
 # No errors in the logs of peers and orderers.
 # No failures or errors reported by PTE.

h2. More variations for consideration:
 # +Onboard two new OSNs at once:+ add blocks to channel1 (say with minimum 100,000K blocks) so we can create a situation where both new orderers are pulling blocks simultaneously to catch up. To do this: repeat the test and immediately after step 2 (restarting the O4), reexecute steps 1 and 2 for O5 (_Add O5_ and _Start O5_). [ Passed Feb 02 ]
 # +Run traffic during the onboarding phase+: To do this: repeat the test while broadcasting transactions to all the orderers concurrently. [Passed Feb 02 ]
 # +Restart the onboarding OSN before it finishes+: Refer to FAB-14047.
 # +Restart the established orderer(s) during onboarding phase:+ Refer to FAB-14058.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13702,,,,FAB-13856,FAB-14047,FAB-14058,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|i006ko:4",,,,Unset,Unset,Week ending 2019-Feb-01,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"PASSED initial attempt when onboarded O4 to orderersystemchannel, and to channel1 with 10,000 transactions on the channel1 chain. No traffic running during onboarding. No restarts.
PASSED with traffic running.
PASSED onboarding 2 orderers with 200,000 blocks on channel1.",System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename Example02 to something more meaningful like ABstore,FAB-13862,37099,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,lehors,lehors,lehors,24/Jan/19 4:11 PM,09/Jun/19 5:24 PM,28/Oct/23 3:04 AM,09/Jun/19 5:24 PM,v1.4.0,,,,,v2.0.0,,,,fabric-docs,fabric-samples,,,,0,,,,,"Example02 plays a prominent role in our documentation and tutorials. However, its name is historical and meaningless, and with the cleanup of fabric/examples looks very odd on its own.

Renaming it to something like ABstore would better convey what it does.",,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008pj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),lehors,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,mergify/bp/release-2.2/pr-4374,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,main,mergify/bp/release-2.2/pr-3750,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,release-2.5,release-2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Smart Contract doc changes for 2.0,FAB-13863,37100,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,odowdaibm,odowdaibm,odowdaibm,24/Jan/19 4:32 PM,13/Jan/21 4:09 AM,28/Oct/23 3:04 AM,13/Jan/21 4:09 AM,v2.0.0,,,,,v2.0.0,,,,fabric-docs,,,,,0,,,,,"A Jira to address changes to smart contract and related documentation due to 2.0 architecture changes, including LSCC removal, and changes to VSCC.

 

See comments here: https://gerrit.hyperledger.org/r/c/27579/14/docs/source/smartcontract/smartcontract.md#297",,jmason900,joaquimpedrooliveira,odowdaibm,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,FAB-11459,,,No,,Unset,No,,,"1|i008pr:",,,,No,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),jmason900,joaquimpedrooliveira,odowdaibm,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jan/19 4:53 PM;odowdaibm;Hi [~ales] quick pointer to Jira as discussed. Thanks!;;;","03/Dec/19 6:51 AM;pandrejko;[~odowdaibm]Is this still planned for 2.0/is there more work to be done or was it covered by your Developing applications topic? (Just trying to clean up old jiras);;;","13/Jan/21 4:09 AM;pandrejko;Closing this one. Stale and referenced link no longer works. ;;;","13/Jan/21 4:09 AM;pandrejko;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Handle user feedback for FabCar sample,FAB-13865,37103,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,sstone1,sstone1,sstone1,24/Jan/19 7:31 PM,23/Jan/20 7:32 AM,28/Oct/23 3:04 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,0,stale-item,,,,"* The car ID scheme is a bit unusual (you'd never see it in a real life application) and it is non-trivial to sort (CAR1... CAR999)
* Querying all cars is not really best practice (no pagination, assumes maximum car ID of CAR999)
* Creating a new car does not check to see if the car already exists",,sstone1,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-12631,,,No,,Unset,No,,,"1|i008qf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sstone1,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Limit migration config updates to carry changes to ConsensusType only,FAB-13866,37104,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,tock,tock,tock,24/Jan/19 9:43 PM,29/Apr/19 11:23 PM,28/Oct/23 3:04 AM,29/Apr/19 11:23 PM,,,,,,,,,,,,,,,0,,,,,"Right now there is nothing to prevent the config update that control migration to have additional updates outside the ConsensusType hierarchy level. 
 For safety an simplicity, this should probably be prevented. This should probably be enforced in the MessageProcessor filters somewhere.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008qn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Apr/19 11:23 PM;tock;not needed, taking a different approach;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Intermittent test failure in grpclogging/server_test ""Server StreamServerInterceptor when options are used [It] uses the levels returned by the levelers"" ",FAB-13867,37105,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,24/Jan/19 11:10 PM,20/Mar/19 3:21 PM,28/Oct/23 3:04 AM,20/Mar/19 3:21 PM,,,,,,v2.0.0,,,,fabric-common,,,,,0,ci-flake,,,,"{code}
04:57:03 ••••••••••••••••••••••••••••
04:57:03 ------------------------------
04:57:03 • Failure [0.505 seconds]
04:57:03 Server
04:57:03 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:36
04:57:03   StreamServerInterceptor
04:57:03   /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:356
04:57:03     when options are used
04:57:03     /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:579
04:57:03       uses the levels returned by the levelers [It]
04:57:03       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:636
04:57:03 
04:57:03       Expected
04:57:03           <[]observer.LoggedEntry | len:0, cap:0>: []
04:57:03       to have length 1
04:57:03 
04:57:03       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:638
04:57:03 ------------------------------
04:57:03 ••
04:57:03 
04:57:03 Summarizing 1 Failure:
04:57:03 
04:57:03 [Fail] Server StreamServerInterceptor when options are used [It] uses the levels returned by the levelers 
04:57:03 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:638
04:57:03 
04:57:03 Ran 31 of 31 Specs in 13.619 seconds
04:57:03 FAIL! -- 30 Passed | 1 Failed | 0 Pending | 0 Skipped
04:57:03 --- FAIL: TestGrpclogging (13.62s)
{code}

This was hit in a CR build of https://gerrit.hyperledger.org/r/c/28936",,C0rWin,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008qv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Mar/19 8:08 AM;sykesm;Hit this again.

{code}
18:07:01 ••••••••••••••••••••••••••••
18:07:01 ------------------------------
18:07:01 • Failure [0.383 seconds]
18:07:01 Server
18:07:01 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:36
18:07:01   StreamServerInterceptor
18:07:01   /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:356
18:07:01     when options are used
18:07:01     /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:579
18:07:01       uses the levels returned by the levelers [It]
18:07:01       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:636
18:07:01 
18:07:01       Expected
18:07:01           <[]observer.LoggedEntry | len:0, cap:0>: []
18:07:01       to have length 1
18:07:01 
18:07:01       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:638
18:07:01 ------------------------------
18:07:01 ••
{code}
https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/9716/console;;;","03/Mar/19 11:55 PM;C0rWin;Another hit:

{quote}
13:29:12 Random Seed: 1551619740
13:29:12 Will run 31 of 31 specs
13:29:12 
13:29:12 ••••••••••••••••
13:29:12 ------------------------------
13:29:12 • Failure in Spec Setup (BeforeEach) [0.721 seconds]
13:29:12 Server
13:29:12 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:36
13:29:12   StreamServerInterceptor
13:29:12   /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:356
13:29:12     when the stream ends with an unknown error
13:29:12     /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:518
13:29:12       logs the unknown code [BeforeEach]
13:29:12       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:534
13:29:12 
13:29:12       Expected error:
13:29:12           <*errors.errorString | 0xc000096030>: {s: ""EOF""}
13:29:12           EOF
13:29:12       not to have occurred
13:29:12 
13:29:12       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:529
13:29:12 ------------------------------
13:29:12 ••••••••••••••
13:29:12 
13:29:12 Summarizing 1 Failure:
13:29:12 
13:29:12 [Fail] Server StreamServerInterceptor when the stream ends with an unknown error [BeforeEach] logs the unknown code 
13:29:12 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:529
13:29:12 
13:29:12 Ran 31 of 31 Specs in 12.687 seconds
13:29:12 FAIL! -- 30 Passed | 1 Failed | 0 Pending | 0 Skipped
13:29:12 --- FAIL: TestGrpclogging (12.69s)
13:29:12 FAIL
{quote}

encountered here: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/9814/console;;;","04/Mar/19 12:08 AM;C0rWin;another hit:

{quote}
13:55:53 Running Suite: Grpclogging Suite
13:55:53 ================================
13:55:53 Random Seed: 1551621336
13:55:53 Will run 31 of 31 specs
13:55:53 
13:55:53 ••••••••••••••••••••••••
13:55:53 ------------------------------
13:55:53 • Failure in Spec Setup (BeforeEach) [1.123 seconds]
13:55:53 Server
13:55:53 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:36
13:55:53   StreamServerInterceptor
13:55:53   /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:356
13:55:53     when the stream ends with an unknown error
13:55:53     /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:518
13:55:53       logs the unknown code [BeforeEach]
13:55:53       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:534
13:55:53 
13:55:53       Expected error:
13:55:53           <*errors.errorString | 0xc000062040>: {s: ""EOF""}
13:55:53           EOF
13:55:53       not to have occurred
13:55:53 
13:55:53       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:529
13:55:53 ------------------------------
13:55:53 ••••••
13:55:53 
13:55:53 Summarizing 1 Failure:
13:55:53 
13:55:53 [Fail] Server StreamServerInterceptor when the stream ends with an unknown error [BeforeEach] logs the unknown code 
13:55:53 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server_test.go:529
13:55:53 
13:55:53 Ran 31 of 31 Specs in 16.839 seconds
13:55:53 FAIL! -- 30 Passed | 1 Failed | 0 Pending | 0 Skipped
13:55:53 --- FAIL: TestGrpclogging (16.84s)
13:55:53 FAIL
{quote}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/9833/console;;;","05/Mar/19 6:18 AM;sykesm;https://gerrit.hyperledger.org/r/29799;;;",,,,,,,,,,,,,,,,,,,,,,,,,
"Perf_Stress_LevelDB test failed in the daily tests with Assertion error, incorrect number of transactions received , FAB7329_4i",FAB-13868,37107,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,,sambhavdutt,sambhavdutt,24/Jan/19 11:40 PM,19/Mar/19 7:57 PM,28/Oct/23 3:04 AM,14/Mar/19 1:39 AM,v1.4.0,,,,,,,,,fabric-quality,,,,,0,ci-flake,,,,"Perf_Stress_LevelDB.test_FAB7329_4i_channel_events failed in the daily tests with Assertion error, Observed that the number of transactions sent and the number of transactions received is not equal to the number of transactions received.  There has been no change made that could have triggered this failure. 


*Intermittent:* No
*Branch:* release-1.4
*Platform:* x86_64
*Error log* 
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-pte-release-1.4-x86_64/35/PTE_Test_Logs/FAB-7329-4i-pteReport.log.gz

*Error Snippet:*

{code:java}
CONSTANT INVOKE Overall number of PTE: 1
    CONSTANT INVOKE Overall processes: 4
    CONSTANT INVOKE Overall transactions: sent 40000 received 0
    CONSTANT INVOKE Overall failures: proposal 40000 transactions 0
    CONSTANT INVOKE Overall event: received 0 timeout 0 unreceived 0
{code}

*Build Logs:*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-pte-release-1.4-x86_64/35/PTE_Test_Logs/",,dongming,rameshthoomu,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,a8492fe,Unset,No,,,"1|i008rb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,rameshthoomu,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Mar/19 1:38 AM;sambhavdutt;https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-pte-release-1.4-x86_64/test_results_analyzer/

This test *FAB7329_4i* has been passing from several builds ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support new lifecycle in service discovery,FAB-13869,37108,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,yacovm,yacovm,24/Jan/19 11:45 PM,01/Jun/19 5:41 PM,28/Oct/23 3:04 AM,01/Jun/19 5:41 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,Provide service discovery functionality using chaincodes installed / approved / committed via _lifecycle. ,,yacovm,,,,,,,,,,,,,,,,,,FAB-15060,,,,,,FAB-15522,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SetDialOpts given empty in Gossip.comm makes TestParallelSend fail,FAB-13870,37110,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,vijaypunugubati,vijaypunugubati,25/Jan/19 12:21 AM,19/Mar/19 8:13 PM,28/Oct/23 3:04 AM,29/Jan/19 11:32 PM,v1.4.0,,,,,v1.4.1,v2.0.0,,,fabric-gossip,,,,,0,ci-failure,,,,"*Summary:* SetDialOpts has given empty in Gossip.comm makes TestParallelSend fail in fabric unit test coverage daily in the release-1.4 branch.

*Intermittent:* ** No

*Branch:* release-1.4**

*Platform:* ** x86_64

*Error Snippet:*
{code:java}
/00:29:28.234 [33m2019-01-24 01:55:03.887 UTC [gossip.comm#2000] SetDialOpts -> WARN 001[0m Given an empty set of grpc.DialOption, aborting
00:29:28.234 [33m2019-01-24 01:55:03.887 UTC [gossip.comm#3000] SetDialOpts -> WARN 002[0m Given an empty set of grpc.DialOption, aborting
00:29:28.234 [33m2019-01-24 01:55:04.904 UTC [gossip.comm#1548] createConnection -> WARN 003[0m Remote endpoint claims to be a different peer, expected 6c6f63616c686f73743a31353531 but got 6c6f63616c686f73743a31353530
00:29:28.234 [33m2019-01-24 01:55:04.905 UTC [gossip.comm#1548] sendToEndpoint -> WARN 004[0m Failed obtaining connection for localhost:1550, PKIid:6c6f63616c686f73743a31353531 reason: authentication failure
00:29:28.234 [33m2019-01-24 01:55:05.916 UTC [gossip.comm#4611] func1 -> WARN 005[0m localhost:4612, PKIid:6c6f63616c686f73743a34363132 isn't responsive: EOF
00:29:28.234 [33m2019-01-24 01:55:06.417 UTC [gossip.comm#4611] sendToEndpoint -> WARN 006[0m Failed obtaining connection for localhost:4612, PKIid:6c6f63616c686f73743a34363132 reason: context deadline exceeded
00:29:28.234 [33m2019-01-24 01:55:06.718 UTC [gossip.comm#4611] sendToEndpoint -> WARN 007[0m Failed obtaining connection for localhost:4612, PKIid:6c6f63616c686f73743a34363132 reason: context deadline exceeded
00:29:28.234 [33m2019-01-24 01:55:06.819 UTC [gossip.comm#4611] sendToEndpoint -> WARN 008[0m Failed obtaining connection for localhost:4612, PKIid:6c6f63616c686f73743a34363132 reason: context deadline exceeded
00:29:28.234 [33m2019-01-24 01:55:07.018 UTC [gossip.comm#4611] sendToEndpoint -> WARN 009[0m Failed obtaining connection for localhost:4612, PKIid:6c6f63616c686f73743a34363132 reason: context deadline exceeded
00:29:28.234 [33m2019-01-24 01:55:10.931 UTC [gossip.comm#9611] authenticateRemotePeer -> WARN 00a[0m 127.0.0.1:42270 didn't send TLS certificate
00:29:28.234 [31m2019-01-24 01:55:10.932 UTC [gossip.comm#9611] GossipStream -> ERRO 00b[0m Authentication failed: No TLS certificate
00:29:28.234 [33m2019-01-24 01:55:11.131 UTC [gossip.comm#6612] authenticateRemotePeer -> WARN 00c[0m Failed reading messge from 127.0.0.1:45144, reason: timed out waiting for connection message from 127.0.0.1:45144
00:29:28.234 [31m2019-01-24 01:55:11.131 UTC [gossip.comm#6612] GossipStream -> ERRO 00d[0m Authentication failed: timed out waiting for connection message from 127.0.0.1:45144
00:29:28.234 [31m2019-01-24 01:55:11.938 UTC [gossip.comm#9611] authenticateRemotePeer -> ERRO 00e[0m Failed verifying signature from 127.0.0.1:42274 : Wrong certificate:[97 252 250 21 241 161 23 233 239 127 13 28 244 47 155 252 183 145 108 196 211 196 244 114 235 123 54 138 148 45 232 229 0], [24 1 114 66 10 14 108 111 99 97 108 104 111 115 116 58 57 54 49 50 18 14 108 111 99 97 108 104 111 115 116 58 57 54 49 50 26 32 209 93 188 222 158 226 148 245 97 223 185 149 186 48 246 93 55 164 132 26 29 245 182 62 34 228 87 32 85 67 53 60]
00:29:28.234 [31m2019-01-24 01:55:11.938 UTC [gossip.comm#9611] GossipStream -> ERRO 00f[0m Authentication failed: Wrong certificate:[97 252 250 21 241 161 23 233 239 127 13 28 244 47 155 252 183 145 108 196 211 196 244 114 235 123 54 138 148 45 232 229 0], [24 1 114 66 10 14 108 111 99 97 108 104 111 115 116 58 57 54 49 50 18 14 108 111 99 97 108 104 111 115 116 58 57 54 49 50 26 32 209 93 188 222 158 226 148 245 97 223 185 149 186 48 246 93 55 164 132 26 29 245 182 62 34 228 87 32 85 67 53 60]
00:29:28.234 [33m2019-01-24 01:55:12.942 UTC [gossip.comm#9611] authenticateRemotePeer -> WARN 010[0m Identity store rejected 127.0.0.1:42278 : identity doesn't match the computed pkiID
00:29:28.234 [31m2019-01-24 01:55:12.943 UTC [gossip.comm#9611] GossipStream -> ERRO 011[0m Authentication failed: identity doesn't match the computed pkiID
00:29:28.234 [31m2019-01-24 01:55:13.946 UTC [gossip.comm#9611] GossipStream -> ERRO 012[0m Authentication failed: Expected [209 157 162 209 13 128 173 188 54 76 102 91 83 33 154 196 140 120 165 30 246 226 25 157 73 244 120 25 138 218 60 121] in remote hash of TLS cert, but got [209 157 162 209 13 128 173 188 54 76 102 91 83 33 154 196 140 120 165 30 246 226 25 157 73 244 120 25 138 218 60 121 0]
00:29:28.234 --- FAIL: TestParallelSend (5.00s)
00:29:28.234     comm_test.go:609: 
00:29:28.234         	Error Trace:	comm_test.go:609
00:29:28.234         	Error:      	Not equal: 
00:29:28.234         	            	expected: 20
00:29:28.234         	            	actual  : 1
00:29:28.234         	Test:       	TestParallelSend
00:29:28.234 [33m2019-01-24 01:55:14.952 UTC [gossip.comm#9611] authenticateRemotePeer -> WARN 013[0m 127.0.0.1:42292 didn't send a pkiID
00:29:28.234 [31m2019-01-24 01:55:14.952 UTC [gossip.comm#9611] GossipStream -> ERRO 014[0m Authentication failed: No PKI-ID
00:29:28.234 [33m2019-01-24 01:55:15.963 UTC [gossip.comm#9611] authenticateRemotePeer -> WARN 015[0m Expected connection message from 127.0.0.1:42300 but got <nil>
00:29:28.234 [31m2019-01-24 01:55:15.963 UTC [gossip.comm#9611] GossipStream -> ERRO 016[0m Authentication failed: Wrong type
00:29:28.234 [33m2019-01-24 01:55:18.968 UTC [gossip.comm#9611] authenticateRemotePeer -> WARN 017[0m Failed reading messge from 127.0.0.1:42306, reason: timed out waiting for connection message from 127.0.0.1:42306
00:29:28.234 [31m2019-01-24 01:55:18.968 UTC [gossip.comm#9611] GossipStream -> ERRO 018[0m Authentication failed: timed out waiting for connection message from 127.0.0.1:42306/ code placeholder
{code}
*Build Logs:* https://jenkins.hyperledger.org/view/Daily/job/fabric-unit-test-coverage-daily-release-1.4-x86_64/39/console

*Attachments:* ** *< None>*",,C0rWin,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008rz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Jan/19 7:01 AM;C0rWin;Just for the record the SetDialOpts has nothing to do with the test flakiness. ;;;","29/Jan/19 7:05 AM;C0rWin;https://gerrit.hyperledger.org/r/#/c/28989/ for 1.4 branch
and https://gerrit.hyperledger.org/r/28988 for master;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
"OTE tests are failing consistently in FAB7936 test as ""Result=Passed"" was not found in the test",FAB-13871,37112,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,latitiah,sambhavdutt,sambhavdutt,25/Jan/19 12:43 AM,19/Mar/19 8:12 PM,28/Oct/23 3:04 AM,25/Jan/19 2:39 AM,v2.0.0,,,,,,,,,fabric-quality,,,,,0,ci-failure,,,,"OTE tests are failing consistently in FAB-7936 test as ""Result=Passed"" was not found in the *OTE_Orderer_Traffic_Engine.test_FAB7936_100tx_3ch_3ord_3kb* test. This has been consistent in the master branch. The entire test is taking 45 minutes in the last run which is the usual time for the smoke tests. 

*Intermittent:* Yes
*Branch:* master

*Error Snippet:*

{code:java}
20:10:37 =================================== FAILURES ===================================
20:10:37 __________ OTE_Orderer_Traffic_Engine.test_FAB7936_100tx_3ch_3ord_3kb __________
20:10:37 
20:10:37 self = <orderer_ote.OTE_Orderer_Traffic_Engine testMethod=test_FAB7936_100tx_3ch_3ord_3kb>
20:10:37 
20:10:37     def test_FAB7936_100tx_3ch_3ord_3kb(self):

20:10:37         result = subprocess.check_output(""./runote.sh -t FAB-7936_100tx_3ch_3ord_3kb"", cwd='../../tools/OTE', shell=True)
20:10:37 >       self.assertIn(TEST_PASS_STRING, result)
20:10:37 E       AssertionError: 'RESULT=PASSED' not found in ""====================Starting FAB-7936_100tx_3ch_3ord_3kb test with OTE====================\nnumber of orderers: 3\nordererLogLevel:  INFO\nnumber of CA: 0\nnumber of organizations: 1\nnumber of peers
{code}

*Build Logs:*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-merge-x86_64/588/",,latitiah,rameshthoomu,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13757,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,fb50c62fbdaa62aa1fec5907a134429c9b6675eb,Unset,No,,,"1|i008sf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,rameshthoomu,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Jan/19 1:11 AM;scottz;The OTE test cannot run because of this error in the new environment using alpine. Latitia is aware of this; maybe she can provide an update.

/usr/local/go/pkg/tool/linux_amd64/link: running gcc failed: exec: ""gcc"": executable file not found in $PATH
01:10:37  ;;;","25/Jan/19 2:38 AM;latitiah;A bug was opened to address this: https://jira.hyperledger.org/browse/FAB-13757. I'll mark this as a duplicate.
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Avoid noise from `make clean` when docker images are not present,FAB-13872,37113,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,25/Jan/19 12:58 AM,20/Feb/19 7:56 PM,28/Oct/23 3:04 AM,20/Feb/19 7:56 PM,,,,,,,,,,fabric-build,,,,,0,ipm,ipm-planned,,,"{code}
$ make clean docker
docker images --quiet --filter=reference='hyperledger/fabric-peer:amd64-2.0.0-snapshot-*' | xargs docker rmi -f
""docker rmi"" requires at least 1 argument.
See 'docker rmi --help'.

Usage:  docker rmi [OPTIONS] IMAGE [IMAGE...]

Remove one or more images
Makefile:369: recipe for target 'peer-docker-clean' failed
make: [peer-docker-clean] Error 123 (ignored)
docker images --quiet --filter=reference='hyperledger/fabric-orderer:amd64-2.0.0-snapshot-*' | xargs docker rmi -f
""docker rmi"" requires at least 1 argument.
See 'docker rmi --help'.

Usage:  docker rmi [OPTIONS] IMAGE [IMAGE...]
{code}

This is because docker images does not return any data but xargs still runs...

Others have tried to fix this by using the GNU xargs extensions that say not to run the command when the args list is empty but this breaks BSD based environments (including macOS) so we need to account for this.

One easy way is to run the list, assign to a script var, and only execute the rm if the output wasn't empty ( {{[ -n}} )",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008g8:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
peer/chaincode tests put production code in tight loop and consume high cpu,FAB-13875,37123,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,sykesm,sykesm,25/Jan/19 5:54 AM,01/Feb/19 12:44 AM,28/Oct/23 3:04 AM,01/Feb/19 12:44 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,"While running the peer/chaincode tests, a go routine gets trapped in a tight loop that calls Recv over and over and over again. It appears this happens when the desired transaction ID is not found in the filtered transaction slice.

{code}
func (dg *deliverGroup) ClientWait(dc *deliverClient) {
	defer dg.wg.Done()
	for {
		resp, err := dc.Connection.Recv()
		if err != nil {
			err = errors.WithMessage(err, fmt.Sprintf(""error receiving from deliver filtered at %s"", dc.Address))
			dg.setError(err)
			return
		}
		switch r := resp.Type.(type) {
		case *pb.DeliverResponse_FilteredBlock:
			filteredTransactions := r.FilteredBlock.FilteredTransactions
			for _, tx := range filteredTransactions {
				if tx.Txid == dg.TxID { // <---- THIS CAN BE FALSE
					logger.Infof(""txid [%s] committed with status (%s) at %s"", dg.TxID, tx.TxValidationCode, dc.Address)
					return
				}
			}
		case *pb.DeliverResponse_Status:
			err = errors.Errorf(""deliver completed with status (%s) before txid received"", r.Status)
			dg.setError(err)
			return
		default:
			err = errors.Errorf(""received unexpected response type (%T) from %s"", r, dc.Address)
			dg.setError(err)
			return
		}
	}
}
{code}

This tight loop resulted in massive memory consumption by a counterfeiter fake that recorded over 70k calls in a short period of time.

{code}
recordInvocation(0xc00029e480): key: Recv
goroutine 60 [running]:
runtime/debug.Stack(0x25, 0xc00007be30, 0x2)
	/usr/local/Cellar/go/1.11.4/libexec/src/runtime/debug/stack.go:24 +0xa7
runtime/debug.PrintStack()
	/usr/local/Cellar/go/1.11.4/libexec/src/runtime/debug/stack.go:16 +0x22
github.com/hyperledger/fabric/peer/chaincode/mock.(*Deliver).recordInvocation(0xc00029e480, 0x4bcff13, 0x4, 0xc00007bea0, 0x0, 0x0)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/peer/chaincode/mock/deliver.go:201 +0x115
github.com/hyperledger/fabric/peer/chaincode/mock.(*Deliver).Recv(0xc00029e480, 0xc0004cb230, 0x0, 0x0) <====================== !!MJS HERE
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/peer/chaincode/mock/deliver.go:102 +0xee
github.com/hyperledger/fabric/peer/chaincode.(*deliverGroup).ClientWait(0xc00021e240, 0xc0004cb170)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/peer/chaincode/common.go:656 +0x218
created by github.com/hyperledger/fabric/peer/chaincode.(*deliverGroup).Wait
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/peer/chaincode/common.go:632 +0xa1
{code}

/cc [~wlahti]",,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13819,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008un:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wlahti,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jan/19 3:52 AM;wlahti;https://gerrit.hyperledger.org/r/c/29053/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix wiring of GetPrivateDataHash,FAB-13876,37126,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,25/Jan/19 6:37 AM,12/Jul/19 5:33 AM,28/Oct/23 3:04 AM,20/Feb/19 2:29 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008vb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As an operator, I do not want a peer to indicate it is unhealthy because a health check is dialing the wrong address during gRPC checks",FAB-13877,37127,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,25/Jan/19 7:05 AM,12/Feb/19 8:33 PM,28/Oct/23 3:04 AM,12/Feb/19 8:33 PM,,,,,,,,,,,,,,,0,ipm,ipm-planned,,,"[~mastersingh24] implemented the gRPC health check service in the peer as part of  FAB-12909 (Add HealthCheck service to GRPCServer). This provides a way for a gRPC client to determine a server is available and, for registered services, whether or not they're active.

Then, on top of that, a HealthChecker was implemented in the peer that would use the gRPC healcheck client to loopback dial the gRPC server for health checks. While, in concept a good thing, in practice there are a number of ways that this could be problematic.

We should either remove the health check client that is registered with the server or introduce configuration mechanisms that allow us to determine if we want it on or off.",,btl5037,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzq7w:9",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Feb/19 12:13 AM;btl5037;https://gerrit.hyperledger.org/r/c/29091/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
store the hash of writes per block in stateDB,FAB-13878,37129,31270,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,,Senthil1,Senthil1,25/Jan/19 10:59 AM,01/Jul/19 8:41 PM,28/Oct/23 3:04 AM,01/Jul/19 8:39 PM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,,,denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008wc:",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Jul/19 8:26 PM;denyeart;[~Senthil1] Please add description;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
construct the hash of block’s validationInfo from blockstore,FAB-13879,37130,31270,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,Senthil1,Senthil1,25/Jan/19 10:59 AM,01/Jul/19 8:41 PM,28/Oct/23 3:04 AM,01/Jul/19 8:40 PM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,,,denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008vz:",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Jul/19 8:26 PM;denyeart;[~Senthil1] Please add description;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
ledger tool to query the hash of writes and validationInfo,FAB-13880,37131,31270,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,Senthil1,Senthil1,25/Jan/19 11:00 AM,01/Jul/19 8:40 PM,28/Oct/23 3:04 AM,01/Jul/19 8:40 PM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,,,denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008w7:",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Jul/19 8:27 PM;denyeart;[~Senthil1] Please add description;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Blockstore: rollback to a block number,FAB-13881,37132,31270,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,Senthil1,Senthil1,25/Jan/19 11:00 AM,27/Jul/19 11:16 AM,28/Oct/23 3:04 AM,01/Jul/19 8:21 PM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14307,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008wf:",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Pvtdatastore: rollback to a block number,FAB-13882,37133,31270,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,Senthil1,Senthil1,25/Jan/19 11:00 AM,01/Feb/19 12:40 AM,28/Oct/23 3:04 AM,01/Feb/19 12:40 AM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008wn:",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
HistoryLeveldb: rollback to a block number,FAB-13883,37134,31270,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,Senthil1,Senthil1,25/Jan/19 11:01 AM,01/Jul/19 8:23 PM,28/Oct/23 3:04 AM,01/Jul/19 8:23 PM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14307,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008wv:",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ledger tool to query and rollback the stores,FAB-13884,37135,31270,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,Senthil1,Senthil1,25/Jan/19 11:01 AM,01/Jul/19 8:23 PM,28/Oct/23 3:04 AM,01/Jul/19 8:23 PM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14307,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008x3:",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ConfigHistory: rollback to a block number,FAB-13885,37136,31270,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,Senthil1,Senthil1,25/Jan/19 11:01 AM,01/Jul/19 8:24 PM,28/Oct/23 3:04 AM,01/Jul/19 8:24 PM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14307,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008xo:",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add key~reverseOrder(BlockNum)~TxNum in blockStore,FAB-13886,37137,31270,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,Senthil1,Senthil1,25/Jan/19 11:02 AM,01/Jul/19 8:40 PM,28/Oct/23 3:04 AM,01/Jul/19 8:40 PM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,,,denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008xr:",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Jul/19 8:25 PM;denyeart;[~Senthil1] Please add description;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
retrieve the most recent value for a key below a blockNum,FAB-13887,37138,31270,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,Senthil1,Senthil1,25/Jan/19 11:02 AM,01/Jul/19 8:40 PM,28/Oct/23 3:04 AM,01/Jul/19 8:40 PM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,,,denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008ws:",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Jul/19 8:25 PM;denyeart;[~Senthil1] Please add description;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
StateDB: rollback to a block number,FAB-13888,37139,31270,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,Senthil1,Senthil1,25/Jan/19 11:03 AM,01/Jul/19 8:26 PM,28/Oct/23 3:04 AM,01/Jul/19 8:26 PM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14307,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008xz:",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
EYFN doesn't work for java,FAB-13889,37144,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,lehors,lehors,lehors,25/Jan/19 7:51 PM,03/Feb/19 4:57 AM,28/Oct/23 3:04 AM,03/Feb/19 4:57 AM,v1.4.0,,,,,v2.0.0,,,,fabric-samples,,,,,0,,,,,"While support for Java chaincode was added to BYFN it wasn't for EYFN:
{code:java}
$ ./eyfn.sh up -l java
Starting with channel 'mychannel' and CLI timeout of '10' seconds and CLI delay of '3' seconds
Continue? [Y/n] 
proceeding ...
[...]
===================== peer1.org3 joined channel 'mychannel' ===================== 
Installing chaincode 2.0 on peer0.org3...
+ peer chaincode install -n mycc -v 2.0 -l java -p github.com/chaincode/chaincode_example02/go/
+ res=2
+ set +x
2019-01-25 10:36:23.922 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 001 Using default escc
2019-01-25 10:36:23.923 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 002 Using default vscc
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xea273b]goroutine 1 [running]:
github.com/hyperledger/fabric/core/container/util.WriteFolderToTarPackage.func1(0x7fff8527bb4f, 0x2b, 0x0, 0x0, 0x1874100, 0xc0004a7c50, 0x60, 0x1691f40)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/util/writer.go:64 +0xcb
path/filepath.Walk(0x7fff8527bb4f, 0x2b, 0xc00024ca80, 0x2, 0x3)
	/opt/go/src/path/filepath/path.go:402 +0x6a
github.com/hyperledger/fabric/core/container/util.WriteFolderToTarPackage(0xc000276a80, 0x7fff8527bb4f, 0x2b, 0xc000347858, 0x3, 0x3, 0x0, 0xc000188ff0, 0xc000276a80, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/util/writer.go:136 +0x241
github.com/hyperledger/fabric/core/container/util.WriteJavaProjectToPackage(0xc000276a80, 0x7fff8527bb4f, 0x2b, 0xc000347940, 0x1)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/util/writer.go:152 +0x158
github.com/hyperledger/fabric/core/chaincode/platforms/java.(*Platform).GetDeploymentPayload(0x2429b40, 0x7fff8527bb4f, 0x2c, 0x4, 0xc0000d5848, 0x1716e01, 0x4, 0xc0003479c0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/java/platform.go:123 +0x1e0
github.com/hyperledger/fabric/core/chaincode/platforms.(*Registry).GetDeploymentPayload(0xc000210520, 0x1716e08, 0x4, 0x7fff8527bb4f, 0x2c, 0x4, 0x7fff8527bb4f, 0x2c, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/platforms.go:103 +0x8f
github.com/hyperledger/fabric/core/container.GetChaincodePackageBytes(0xc000210520, 0xc00012b4c0, 0x0, 0x16740c0, 0xc0004398b0, 0xc0002859e4, 0x4)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/controller.go:191 +0xc7
github.com/hyperledger/fabric/peer/chaincode.getChaincodeDeploymentSpec(0xc00012b4c0, 0xc00012b401, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/common.go:58 +0x11c
github.com/hyperledger/fabric/peer/chaincode.genChaincodeDeploymentSpec(0xc00043c500, 0x7fff8527bb38, 0x4, 0x7fff8527bb40, 0x3, 0x0, 0x5020105, 0x1)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:109 +0xac
github.com/hyperledger/fabric/peer/chaincode.chaincodeInstall(0xc00043c500, 0x0, 0x0, 0xc000228630, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:177 +0x156
github.com/hyperledger/fabric/peer/chaincode.installCmd.func1(0xc00043c500, 0xc000156480, 0x0, 0x8, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:44 +0x54
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc00043c500, 0xc000156300, 0x8, 0x8, 0xc00043c500, 0xc000156300)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:762 +0x473
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x2320300, 0x8, 0x0, 0x231f4c0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:852 +0x2fd
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x2320300, 0xc0001abf40, 0x1)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:800 +0x2b
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:53 +0x2f7
!!!!!!!!!!!!!!! Chaincode installation on peer0.org3 has failed !!!!!!!!!!!!!!!!
========= ERROR !!! FAILED to execute End-2-End Scenario ===========ERROR !!!! Unable to have Org3 peers join network

{code}",,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008z3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Feb/19 4:57 AM;lehors;The fix was applied as part of https://gerrit.hyperledger.org/r/#/c/28964/

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create initial implementation using cobra,FAB-13891,37147,36696,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bpbuch,bpbuch,bpbuch,25/Jan/19 11:51 PM,21/Feb/19 1:55 AM,28/Oct/23 3:04 AM,21/Feb/19 1:55 AM,,,,,,,,,,,,,,,0,,,,,"Cobra(https://github.com/spf13/cobra) is a powerful command line tool framework that is the basis for many popular tools, and it will provide a good starting point for the next generation fabric cli. ",,bpbuch,,,,,,,,,,,,,,,,,,,,FAB-13945,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008zr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Jan/19 1:28 AM;bpbuch;https://gerrit.hyperledger.org/r/#/c/28987/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Performance test: scale up channels: no crashes, concurrent invocations on 3 threads/peer/channel (constant mode)",FAB-13892,37148,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,26/Jan/19 12:03 AM,21/Feb/19 1:12 AM,28/Oct/23 3:04 AM,21/Feb/19 1:12 AM,,,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,"h2. Setup
 # Same as FAB-13760, except we run with n channels, n=1, ..., 100

h2. Inputs
 # Same as FAB-13760 with m=1.

h2. Expectations
 # Same as FAB-13760.",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14129,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,No,,Unset,No,,,"1|i006z9:",,,,Unset,Unset,Week ending 2019-Feb-15,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"Passed using 1 channel and 3 channels.
Defer other scale up tests with more channels til later.

Passed up to 24 channels, 3 threads per channel
During just two iterations of the test, we observed orderers panic (FAB-14129). We were using 2 IOPS per GB in the pod nodes during the failures.  The test passed when we re-tested. And we have not seen it occur in a few runs since changing to 10 IOPS.",System Test,,(Please add usage information),dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Currently vendoring operations package pulls in other dependency,FAB-13893,37149,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,skarim,skarim,26/Jan/19 12:17 AM,23/Jan/20 7:32 AM,28/Oct/23 3:04 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,0,stale-item,,,,"Vendoring the operations package pull in other dependencies, need to investigate if the number of dependencies can be reduced.",,skarim,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzq7t:9",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a developer, I want to use go 1.11.5 while developing on master",FAB-13894,37150,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,26/Jan/19 12:55 AM,20/Feb/19 11:54 AM,28/Oct/23 3:04 AM,20/Feb/19 11:54 AM,,,,,,v2.0.0,,,,fabric-build,,,,,0,ipm,ipm-planned,,,"The current version of 1.11 is 1.11.5 and includes security related fixes for crypto/elliptic.

We need to bump the version of go that we build with in fabric, fabric ca, our docker images, and all of the other miscellaneous places - including our build environments in CI.",,sykesm,,,,,,,,,,,,,,,,,,,,,,FAB-13895,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008g7:c",,,,Unset,Unset,,,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a developer, I want to our 1.4 stream to build against the latest release of go 1.11",FAB-13895,37151,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,26/Jan/19 12:56 AM,22/Feb/19 12:23 AM,28/Oct/23 3:04 AM,22/Feb/19 12:23 AM,v1.4.0,,,,,v1.4.0,,,,fabric-build,,,,,0,ipm,,,,"The current version of 1.11 is 1.11.5 and includes security related fixes for crypto/elliptic.

We need to bump the version of go that we build with in fabric, fabric ca, our docker images, and all of the other miscellaneous places - including our build environments in CI.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,FAB-13894,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008g7:i",,,,Unset,Unset,,,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
images/peer/Dockerfile should not include defaults GO_VER and ALPINE_VER,FAB-13896,37152,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,sykesm,sykesm,26/Jan/19 12:59 AM,12/Feb/19 11:33 PM,28/Oct/23 3:04 AM,12/Feb/19 11:33 PM,,,,,,v2.0.0,,,,fabric-build,,,,,0,ipm,ipm-planned,,,The version information should be sourced from the Makefile.,,rameshthoomu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008sc:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Feb/19 6:17 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/29244/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
GetState of empty string aginst CouchDB gives wrong error message,FAB-13897,37155,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,denyeart,denyeart,26/Jan/19 3:24 AM,18/Nov/20 4:58 AM,28/Oct/23 3:04 AM,18/Nov/20 2:58 AM,,,,,,v2.2.2,v2.3.0,,,fabric-ledger,,,,,0,ipm2,,,,"GetState("""") against CouchDB will attempt to query the database, but since the key is an empty string, that portion of the REST URL will go missing and CouchDB will interpret it to be a query against the key's database itself.

You end up getting a confusing error:
{code:java}
Failed to handle GET_STATE. error: no revision tag detected{code}
Since empty string is not allowed in CouchDB (its already validated against in PutState), the GetState() request should simply return an error immediately with a good error message, rather than allow the query to go all the way to CouchDB.",,denyeart,jyellick,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0l",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,manish-sethi,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.2,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Sep/19 1:07 AM;jyellick;[~stathipakes] are you still working on this issue?;;;","18/Nov/20 12:18 AM;manish-sethi;https://github.com/hyperledger/fabric/pull/2133;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Replace Define/DefineForMyOrg verbs,FAB-13898,37158,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,26/Jan/19 5:05 AM,20/Feb/19 2:30 PM,28/Oct/23 3:04 AM,20/Feb/19 2:30 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,"After feedback from the playback with dislike for two 'define' verbs, and further discussion, the decision has been made to go with:

ApproveChaincodeDefinitionForMyOrg and CommitChaincodeDefinitionForMyOrg

This task should handle renaming things.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i0091z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove extraneous name field in QueryChaincodeDefinitionResult,FAB-13899,37159,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,26/Jan/19 5:06 AM,20/Feb/19 2:30 PM,28/Oct/23 3:04 AM,20/Feb/19 2:30 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00927:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Disallow LSCC invocation on channels with v2.0 capability,FAB-13900,37160,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,jyellick,jyellick,26/Jan/19 5:16 AM,04/Apr/19 11:16 PM,28/Oct/23 3:04 AM,04/Apr/19 11:16 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i0092f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Require capability to be set to invoke new lifecycle functions with channel scope,FAB-13901,37161,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,ales,jyellick,jyellick,26/Jan/19 5:16 AM,05/Apr/19 6:41 PM,28/Oct/23 3:04 AM,05/Apr/19 6:41 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13989,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i0092n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Consolidate the slice of supported platforms to one location,FAB-13902,37162,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,26/Jan/19 7:10 AM,25/Feb/19 11:59 PM,28/Oct/23 3:04 AM,25/Feb/19 11:59 PM,,,,,,,,,,fabric-peer,,,,,0,hygiene,ipm,ipm-planned,,"The following files:
{code}
peer/chaincode/chaincode.go
peer/chaincode/package.go
peer/node/start.go
{code}

each construct a platform registry. The problem is, they each build their own list of platforms.

The canonical list of supported platforms should live in the platforms package and the calls to NewRegistry should reference that canonical list where appropriate.

This was discovered by while trying to add a platform and discovering we do not have a single source of truth.",,btl5037,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0092v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Feb/19 1:47 AM;btl5037;https://gerrit.hyperledger.org/r/c/29461/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Raft orderer TLS certificate rotation tests for 1..All orderers, with traffic load",FAB-13904,37165,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,,scottz,scottz,26/Jan/19 8:52 AM,31/Jul/19 5:27 AM,28/Oct/23 3:04 AM,31/Jul/19 5:27 AM,v2.0.0,,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,"Placeholder for test(s).
Describe network and traffic pattern.
Describe test steps.",,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,FAB-14224,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14215,,,No,,Unset,No,,,"1|i006zg:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jul/19 5:27 AM;suryalnvs;Covered in IT;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix balance-transfer script for fabric-samples release-1.4 branch.,FAB-13906,37167,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,preminem,preminem,preminem,26/Jan/19 3:27 PM,29/Apr/19 6:25 PM,28/Oct/23 3:04 AM,29/Apr/19 6:25 PM,v1.4.0,,,,,v1.4.2,,,,fabric-samples,,,,,0,fabric-samples,,,,h3. Query Transaction by TransactionID is not available due to testAPI.sh error.,,preminem,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0093z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),preminem,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Apr/19 6:25 PM;sstone1;https://gerrit.hyperledger.org/r/#/c/28968/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Calling DelState() twice results in an unexpected warning when using CouchDB,FAB-13907,37168,,Bug,To Do,FAB,Fabric,software,denyeart,,,Low,,manish-sethi,denyeart,denyeart,26/Jan/19 8:14 PM,17/Nov/20 5:54 AM,28/Oct/23 3:04 AM,,,,,,,,,,,fabric-ledger,,,,,0,ipm2,,,,"Calling DelState() for the same key in two different transactions results in an unexpected warning message:
{code:java}
2019-01-26 06:04:38.636 EST [statecouchdb] commitUpdates -> WARN 866 CouchDB batch document delete encountered an problem. Retrying delete for document ID:marble1{code}
The reason is that upon commit a bulk update is attempted to create/update/delete documents from CouchDB. The second Delete will fail due to non-existing document. The situation should be detected and a more indicative warning message should be provided instead of the current warning message.

Also the retry of the individual delete should be skipped.
{code:java}
2019-01-26 06:04:38.623 EST [lockbasedtxmgr] Commit -> DEBU 851 Committing updates to state database
2019-01-26 06:04:38.623 EST [pvtstatepurgemgmt] buildExpirySchedule -> DEBU 852 Building the expiry schedules based on the update batch
2019-01-26 06:04:38.623 EST [lockbasedtxmgr] Commit -> DEBU 853 Write lock acquired for committing updates to state database
2019-01-26 06:04:38.624 EST [statecouchdb] executeBatches -> DEBU 854 Executing batches = [%!s(*statecouchdb.nsCommittersBuilder=&{map[marble1:0xc00151ca40] 0xc00024f880 map[] []})]
2019-01-26 06:04:38.624 EST [statecouchdb] addRevisionsForMissingKeys -> DEBU 855 Pulling revisions for the [1] keys for namsespace [myc_marbles] that were not part of the readset
2019-01-26 06:04:38.624 EST [statecouchdb] executeBatches -> DEBU 856 Executing batches = [subNsMetadataRetriever:ns=, num keys=1]
2019-01-26 06:04:38.624 EST [couchdb] BatchRetrieveDocumentMetadata -> DEBU 857 [myc_marbles] Entering BatchRetrieveDocumentMetadata() keys=[marble1]
2019-01-26 06:04:38.624 EST [couchdb] handleRequest -> DEBU 858 Entering handleRequest() method=POST url=http://127.0.0.1:5984 dbName=myc_marbles
2019-01-26 06:04:38.624 EST [couchdb] handleRequest -> DEBU 859 Request URL: http://127.0.0.1:5984/myc_marbles/_all_docs?include_docs=true
2019-01-26 06:04:38.624 EST [couchdb] handleRequest -> DEBU 85a HTTP Request: POST /myc_marbles/_all_docs?include_docs=true HTTP/1.1 | Host: 127.0.0.1:5984 | User-Agent: Go-http-client/1.1 | Content-Length: 20 | Accept: application/json | Content-Type: application/json | Accept-Encoding: gzip | | 
2019-01-26 06:04:38.630 EST [couchdb] handleRequest -> DEBU 85b Exiting handleRequest()
2019-01-26 06:04:38.630 EST [couchdb] BatchRetrieveDocumentMetadata -> DEBU 85c [myc_marbles] HTTP Response: HTTP/1.1 200 OK | Transfer-Encoding: chunked | Cache-Control: must-revalidate | Content-Type: application/json | Date: Sat, 26 Jan 2019 11:04:38 GMT | Server: CouchDB/2.2.0 (Erlang OTP/18) | X-Couch-Request-Id: 277be0c981 | X-Couchdb-Body-Time: 0 | | 
2019-01-26 06:04:38.630 EST [couchdb] BatchRetrieveDocumentMetadata -> DEBU 85d [myc_marbles] Exiting BatchRetrieveDocumentMetadata()
2019-01-26 06:04:38.630 EST [statecouchdb] executeBatches -> DEBU 85e Executing batches = [%!s(*statecouchdb.subNsCommitter=&{0xc00024f880 map[marble1:0xc001231e00]})]
2019-01-26 06:04:38.630 EST [couchdb] BatchUpdateDocuments -> DEBU 85f [myc_marbles] Entering BatchUpdateDocuments() document ids=[marble1]
2019-01-26 06:04:38.631 EST [couchdb] handleRequest -> DEBU 860 Entering handleRequest() method=POST url=http://127.0.0.1:5984 dbName=myc_marbles
2019-01-26 06:04:38.631 EST [couchdb] handleRequest -> DEBU 861 Request URL: http://127.0.0.1:5984/myc_marbles/_bulk_docs
2019-01-26 06:04:38.631 EST [couchdb] handleRequest -> DEBU 862 HTTP Request: POST /myc_marbles/_bulk_docs HTTP/1.1 | Host: 127.0.0.1:5984 | User-Agent: Go-http-client/1.1 | Content-Length: 72 | Accept: application/json | Content-Type: application/json | Accept-Encoding: gzip | | 
2019-01-26 06:04:38.636 EST [couchdb] handleRequest -> DEBU 863 Exiting handleRequest()
2019-01-26 06:04:38.636 EST [couchdb] BatchUpdateDocuments -> DEBU 864 [myc_marbles] HTTP Response: HTTP/1.1 201 Created | Content-Length: 75 | Cache-Control: must-revalidate | Content-Type: application/json | Date: Sat, 26 Jan 2019 11:04:38 GMT | Server: CouchDB/2.2.0 (Erlang OTP/18) | X-Couch-Request-Id: 5b19ecb032 | X-Couchdb-Body-Time: 0 | | 
2019-01-26 06:04:38.636 EST [couchdb] BatchUpdateDocuments -> DEBU 865 [myc_marbles] Exiting BatchUpdateDocuments() _bulk_docs response=[[{""id"":""marble1"",""error"":""conflict"",""reason"":""Document update conflict.""}]
]
2019-01-26 06:04:38.636 EST [statecouchdb] commitUpdates -> WARN 866 CouchDB batch document delete encountered an problem. Retrying delete for document ID:marble1
2019-01-26 06:04:38.636 EST [couchdb] DeleteDoc -> DEBU 867 [myc_marbles] Entering DeleteDoc() id=marble1
2019-01-26 06:04:38.636 EST [couchdb] ReadDoc -> DEBU 868 [myc_marbles] Entering ReadDoc() id=[marble1]
2019-01-26 06:04:38.636 EST [couchdb] handleRequest -> DEBU 869 Entering handleRequest() method=GET url=http://127.0.0.1:5984 dbName=myc_marbles
2019-01-26 06:04:38.636 EST [couchdb] handleRequest -> DEBU 86a Request URL: http://127.0.0.1:5984/myc_marbles/marble1?attachments=true
2019-01-26 06:04:38.636 EST [couchdb] handleRequest -> DEBU 86b HTTP Request: GET /myc_marbles/marble1?attachments=true HTTP/1.1 | Host: 127.0.0.1:5984 | User-Agent: Go-http-client/1.1 | Accept: multipart/related | Accept-Encoding: gzip | | 
2019-01-26 06:04:38.640 EST [couchdb] handleRequest -> DEBU 86c Error handling CouchDB request. Error:not_found, Status Code:404, Reason:deleted
2019-01-26 06:04:38.640 EST [couchdb] ReadDoc -> DEBU 86d [myc_marbles] Document not found (404), returning nil value instead of 404 error
2019-01-26 06:04:38.640 EST [couchdb] handleRequest -> DEBU 86e Entering handleRequest() method=DELETE url=http://127.0.0.1:5984 dbName=myc_marbles
2019-01-26 06:04:38.640 EST [couchdb] handleRequest -> DEBU 86f Request URL: http://127.0.0.1:5984/myc_marbles/marble1
2019-01-26 06:04:38.640 EST [couchdb] handleRequest -> DEBU 870 HTTP Request: DELETE /myc_marbles/marble1 HTTP/1.1 | Host: 127.0.0.1:5984 | User-Agent: Go-http-client/1.1 | Content-Type: application/json | Accept-Encoding: gzip | | 
2019-01-26 06:04:38.643 EST [couchdb] handleRequest -> DEBU 871 Error handling CouchDB request. Error:not_found, Status Code:404, Reason:deleted
2019-01-26 06:04:38.643 EST [couchdb] DeleteDoc -> DEBU 872 [myc_marbles] Document not found (404), returning nil value instead of 404 error{code}",,denyeart,MichaelWang,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0li",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,MichaelWang,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Check that the bootstrap file is read-write-able before accepting START,FAB-13908,37169,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,tock,tock,tock,27/Jan/19 5:44 PM,04/Apr/19 7:47 PM,28/Oct/23 3:04 AM,04/Apr/19 7:47 PM,,,,,,,,,,,,,,,0,,,,,,,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0094f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Data race in TestMetadata (package: core/cclifecycle),FAB-13910,37172,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,kchristidis,kchristidis,28/Jan/19 7:11 AM,19/Mar/19 7:57 PM,28/Oct/23 3:04 AM,28/Jan/19 7:23 AM,,,,,,,,,,,,,,,0,ci-flake,,,,"As seen in: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8260/console

{code}
==================
WARNING: DATA RACE
Write at 0x000001d3e110 by goroutine 25:
  github.com/hyperledger/fabric/core/cclifecycle_test.newLogRecorder()
      /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/lifecycle_test.go:464 +0x99
  github.com/hyperledger/fabric/core/cclifecycle_test.TestMetadata()
      /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/lifecycle_test.go:344 +0x53
  testing.tRunner()
      /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:827 +0x162

Previous read at 0x000001d3e110 by goroutine 24:
  github.com/hyperledger/fabric/core/cclifecycle.(*Lifecycle).fireChangeListeners()
      /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/lifecycle.go:188 +0x2a4
  github.com/hyperledger/fabric/core/cclifecycle.(*Subscription).processPendingUpdate()
      /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/subscription.go:57 +0x6e5
  github.com/hyperledger/fabric/core/cclifecycle.(*Subscription).ChaincodeDeployDone.func1()
      /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/subscription.go:79 +0x131

Goroutine 25 (running) created at:
  testing.(*T).Run()
      /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:878 +0x650
  testing.runTests.func1()
      /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1119 +0xa8
  testing.tRunner()
      /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:827 +0x162
  testing.runTests()
      /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1117 +0x4ee
  testing.(*M).Run()
      /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1034 +0x2ee
  main.main()
      _testmain.go:112 +0x332

Goroutine 24 (finished) created at:
  github.com/hyperledger/fabric/core/cclifecycle.(*Subscription).ChaincodeDeployDone()
      /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/subscription.go:68 +0x7d
  github.com/hyperledger/fabric/core/cclifecycle_test.TestMultipleUpdates()
      /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/cclifecycle/lifecycle_test.go:320 +0x1399
  testing.tRunner()
      /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:827 +0x162
==================
--- FAIL: TestMetadata (0.01s)
    <autogenerated>:1: [] Metadata -> WARN 0021 Requested Metadata for non-existent channel mychannel
    <autogenerated>:1: [] queryChaincodeDefinitions -> DEBU 0022 Chaincode {cc1 1.0 [42]} 's version is 1.0 and Id is [42]
    <autogenerated>:1: [] DeployedChaincodes -> DEBU 0023 Returning [{cc1 1.0 [1 2 3 4 5] [42] []}]
    <autogenerated>:1: [] fireChangeListeners -> DEBU 0024 Listeners for channel mychannel invoked
    <autogenerated>:1: [] Metadata -> DEBU 0025 Returning metadata for channel mychannel , chaincode cc1 : {cc1 1.0 [1 2 3 4 5] [42] []}
    <autogenerated>:1: [] Metadata -> ERRO 0026 Failed obtaining new query for channel mychannel : failed obtaining query executor
    <autogenerated>:1: [] DeployedChaincodes -> ERRO 0027 Failed querying lscc namespace: GetState failed
    <autogenerated>:1: [] Metadata -> ERRO 0028 Failed querying LSCC for channel mychannel : GetState failed
    <autogenerated>:1: [] DeployedChaincodes -> INFO 0029 Chaincode cc2 isn't instantiated
    <autogenerated>:1: [] DeployedChaincodes -> DEBU 002a Returning []
    <autogenerated>:1: [] Metadata -> INFO 002b Chaincode cc2 isn't defined in channel mychannel
    <autogenerated>:1: [] DeployedChaincodes -> DEBU 002c Returning [{cc2 1.0 [] [42] []}]
    <autogenerated>:1: [] DeployedChaincodes -> DEBU 002d Retrieved collection config for cc1 from cc1~collection
    <autogenerated>:1: [] DeployedChaincodes -> DEBU 002e Returning [{cc1 1.0 [1 2 3 4 5] [42] [10 10 10]}]
    <autogenerated>:1: [] DeployedChaincodes -> ERRO 002f Failed querying lscc namespace for cc1~collection: foo
    <autogenerated>:1: [] Metadata -> ERRO 0030 Failed querying LSCC for channel mychannel : foo
    testing.go:771: race detected during execution of test
2019-01-23 12:23:39.789 UTC [discovery.lifecycle] DeployedChaincodes -> ERRO 031 Failed querying lscc namespace: failed querying ledger
2019-01-23 12:23:39.790 UTC [discovery.lifecycle] DeployedChaincodes -> ERRO 032 Failed extracting chaincode info about cc1 from LSCC returned payload. Error: failed unmarshaling lscc read value into ChaincodeData: proto: ccprovider.ChaincodeData: illegal tag 0 (wire type 0)
2019-01-23 12:23:39.791 UTC [discovery.lifecycle] DeployedChaincodes -> ERRO 033 Chaincode cc1 is listed in LSCC as cc2
2019-01-23 12:23:39.791 UTC [discovery.lifecycle] DeployedChaincodes -> INFO 034 Chaincode cc1 isn't instantiated
FAIL
coverage: 99.3% of statements
FAIL	github.com/hyperledger/fabric/core/cclifecycle	0.449s
{code}",,kchristidis,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13843,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00953:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kchristidis,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jan/19 7:12 AM;kchristidis;/cc [~yacovm] ({{git blame}} shows your name in the test but I might be _way_ off; LMK if somebody else should be tagged instead);;;","28/Jan/19 7:20 AM;yacovm;fixed in [https://gerrit.hyperledger.org/r/#/c/28934/] , the change set isn't rebased.;;;","28/Jan/19 7:23 AM;kchristidis;A-ha, thanks.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
"Integration test failure on ""discover peer membership"" spec",FAB-13911,37173,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,kchristidis,kchristidis,28/Jan/19 7:22 AM,04/Dec/19 5:25 AM,28/Oct/23 3:04 AM,04/Dec/19 5:25 AM,,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"As seen in: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4972/consoleFull

{code}
08:26:46 • Failure in Spec Teardown (AfterEach) [82.633 seconds]
08:26:46 DiscoveryService [AfterEach] discovers peer membership 
08:26:46 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/discovery/discovery_test.go:200
08:26:46 
08:26:46   Timed out after 60.000s.
08:26:46   Expected
08:26:46       <<-chan error | len:0, cap:1>: 0xc000ca4660
08:26:46   to receive something.
08:26:46 
08:26:46   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/discovery/discovery_test.go:74
08:26:46 ------------------------------
{code}
",,C0rWin,caod,jyellick,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15309,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0095b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,caod,jyellick,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Apr/19 4:55 AM;C0rWin;{quote}
19:36:29 • Failure in Spec Setup (BeforeEach) [46.682 seconds]
19:36:29 DiscoveryService [BeforeEach] discovers channel information 
19:36:29 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/discovery/discovery_test.go:82
19:36:29 
19:36:29   Timed out after 1.000s.
19:36:29   Expected process to exit.  It did not.
19:36:29 
19:36:29   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/tedsuo/ifrit/ginkgomon/ginkgomon.go:146
19:36:29 ------------------------------
19:37:12 ••
19:37:12 
19:37:12 Summarizing 1 Failure:
19:37:12 
19:37:12 [Fail] DiscoveryService [BeforeEach] discovers channel information 
19:37:12 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/tedsuo/ifrit/ginkgomon/ginkgomon.go:146
19:37:12 
19:37:12 Ran 3 of 3 Specs in 89.041 seconds
19:37:12 FAIL! -- 2 Passed | 1 Failed | 0 Pending | 0 Skipped
19:37:12 --- FAIL: TestEndToEnd (89.04s)
{quote}

Link: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7851/console
Link: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7861/console
;;;","27/Jul/19 2:04 AM;jyellick;Another instance https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/10613/console;;;","04/Dec/19 5:25 AM;caod;Closing as we've now moved to Azure pipelines and haven't seen this flake in some time. Reopen as needed if seen again on Azure.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
While creating channel in 'Balance-transfer' example gives error The channel has been closed URL:grpcs://localhost:7050,FAB-13913,37177,,Bug,Returned,FAB,Fabric,software,denyeart,,,Medium,,,nageshbandaru,nageshbandaru,28/Jan/19 5:00 PM,24/Jun/19 11:55 PM,28/Oct/23 3:04 AM,,v1.3.0,,,,,,,,,fabric-orderer,fabric-samples,,,,0,fabric,orderer,,,"error: [Remote.js]: Error: The channel has been closed URL:grpcs://localhost:7050
error: [Orderer.js]: Orderer grpcs://localhost:7050 has an error Error: The channel has been closed URL:grpcs://localhost:7050
[2019-01-28 13:27:36.138] [ERROR] Create-Channel - Error: The channel has been closed URL:grpcs://localhost:7050
 at Immediate.checkState [as _onImmediate] (/home/seeraj/originalsamples/fabric-samples/balance-transfer/node_modules/grpc/src/client.js:738:18)
 at runCallback (timers.js:810:20)
 at tryOnImmediate (timers.js:768:5)
 at processImmediate [as _immediateCallback] (timers.js:745:5)
(node:29895) UnhandledPromiseRejectionWarning: Error: Failed to initialize the channel: Error: The channel has been closed URL:grpcs://localhost:7050
 at Object.createChannel (/home/seeraj/originalsamples/fabric-samples/balance-transfer/app/create-channel.js:64:9)
 at <anonymous>
 at process._tickCallback (internal/process/next_tick.js:189:7)
(node:29895) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 2)
(node:29895) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.",,jyellick,nageshbandaru,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jan/19 5:05 PM;nageshbandaru;orderer.log;https://jira.hyperledger.org/secure/attachment/16639/orderer.log","28/Jan/19 5:05 PM;nageshbandaru;org1.log;https://jira.hyperledger.org/secure/attachment/16637/org1.log","28/Jan/19 5:05 PM;nageshbandaru;org2.log;https://jira.hyperledger.org/secure/attachment/16638/org2.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00967:",,,,Unset,Unset,,,,"I have followed the fabric 1.3 documentation
1. Install Pre-requisites
2. Installed binaries and fabric samples
3. trying to execute below files in balance-transfer folder
runApp.sh -- SUCCESS
testAPIs.sh -- throws error given in the description",,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,nageshbandaru,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jun/19 11:55 PM;jyellick;Is this still reproducible using fabric v1.4.x?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
intermittent test failure in cft_test.go,FAB-13914,37178,36295,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,guoger,guoger,28/Jan/19 5:09 PM,19/Mar/19 7:57 PM,28/Oct/23 3:04 AM,14/Feb/19 6:01 PM,,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"{code}
14:42:30 [e][Org2.peer1] Error: failed to initialize operations subystems: listen tcp 127.0.0.1:33028: bind: address already in use
{code}

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/5065/consoleFull",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0096f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/19 6:01 PM;guoger;Tentatively close. Reopen if this surfaces again.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
change quantity type to string in protos to support high precision numbers,FAB-13915,37180,36747,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,adc,KaoutarEL,KaoutarEL,28/Jan/19 6:58 PM,26/Feb/19 6:40 PM,28/Oct/23 3:04 AM,26/Feb/19 6:40 PM,,,,,,,,,,,,,,,0,fabtoken,,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0096v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent failure in SBE integration tests,FAB-13916,37181,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Test Error,,guoger,guoger,28/Jan/19 7:00 PM,06/Aug/19 10:03 AM,28/Oct/23 3:04 AM,06/Aug/19 10:03 AM,,,,,,,,,,fabric-peer,,,,,0,ci-flake,,,,"{code}
17:32:12 ------------------------------
17:32:12 • Failure in Spec Setup (BeforeEach) [17.804 seconds]
17:32:12 SBE_E2E basic solo network with 2 orgs [BeforeEach] executes a basic solo network with 2 orgs and SBE checks 
17:32:12 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/sbe/sbe_test.go:76
17:32:12 
17:32:12   Timed out after 1.000s.
17:32:12   Expected process to exit.  It did not.
17:32:12 
17:32:12   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/tedsuo/ifrit/ginkgomon/ginkgomon.go:146
17:32:12 ------------------------------
{code}

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/5072/console",,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00973:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Aug/19 10:03 AM;sykesm;The only updates on this in 8 months are recategorizing component.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
intermittent UT failure in `TestMetrics` - github.com/hyperledger/fabric/gossip/election,FAB-13917,37182,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,guoger,guoger,28/Jan/19 7:10 PM,02/Apr/19 5:40 PM,28/Oct/23 3:04 AM,04/Feb/19 11:50 PM,v2.0.0,,,,,v2.0.0,,,,fabric-gossip,,,,,0,ci-flake,,,,"{code}
16:19:40 --- FAIL: TestMetrics (4.50s)
16:19:40     election_test.go:205: 
16:19:40         	Error Trace:	election_test.go:205
16:19:40         	Error:      	Should have called with given arguments
16:19:40         	Test:       	TestMetrics
16:19:40         	Messages:   	Expected ""ReportMetrics"" to have been called with:
16:19:40         	            	[true]
16:19:40         	            	but no actual calls happened
16:19:40 FAIL
16:19:40 coverage: 96.3% of statements
16:19:40 FAIL	github.com/hyperledger/fabric/gossip/election	10.523s
{code}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8389/consoleFull",,guoger,hagarm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0097b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,hagarm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jan/19 11:11 AM;guoger;hit here: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8475/console;;;","31/Jan/19 11:14 AM;guoger;cc [~hagarm];;;","31/Jan/19 9:16 PM;hagarm;https://gerrit.hyperledger.org/r/#/c/29066/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent UT failure: TestConfiguration in `core/peer`,FAB-13918,37183,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,guoger,guoger,28/Jan/19 7:15 PM,20/Mar/19 4:02 AM,28/Oct/23 3:04 AM,20/Mar/19 4:02 AM,,,,,,,,,,fabric-peer,,,,,0,ci-flake,,,,"{code}
16:38:24 --- FAIL: TestConfiguration (0.04s)
16:38:24     config_test.go:40: found interface address [10.30.66.23]
16:38:24     config_test.go:40: found interface address [172.17.0.1]
16:38:24     config_test.go:40: found interface address [fe80::f816:3eff:fe63:2bd1]
16:38:24     config_test.go:40: found interface address [fe80::42:28ff:fecd:a3f2]
16:38:24     config_test.go:40: found interface address [fe80::8c31:6aff:fe2f:d57b]
16:38:24     config_test.go:40: found interface address [fe80::a8d7:6ff:fec6:7b61]
16:38:24     --- FAIL: TestConfiguration/test3 (0.00s)
16:38:24         <autogenerated>:1: 
16:38:24             	Error Trace:	config_test.go:96
16:38:24             	Error:      	""[:7051]"" does not contain ""10.30.66.23:7051""
16:38:24             	Test:       	TestConfiguration/test3
16:38:24             	Messages:   	GetLocalAddress returned unexpected address
16:38:24         <autogenerated>:1: 
16:38:24             	Error Trace:	config_test.go:117
16:38:24             	Error:      	""[:7051]"" does not contain ""10.30.66.23:7051""
16:38:24             	Test:       	TestConfiguration/test3
16:38:24             	Messages:   	GetLocalAddress returned unexpected address
16:38:24 removing dir = /tmp/peer-fs297063676/ledgersData
16:38:24 2019-01-28 08:36:28.651 UTC [ledgermgmt] initialize -> INFO 026 Initializing ledger mgmt
16:38:24 2019-01-28 08:36:28.652 UTC [kvledger] NewProvider -> INFO 027 Initializing ledger provider
16:38:24 2019-01-28 08:36:28.801 UTC [kvledger] NewProvider -> INFO 028 ledger provider Initialized
16:38:24 2019-01-28 08:36:28.938 UTC [ledgermgmt] initialize -> INFO 029 ledger mgmt initialized
16:38:24 2019-01-28 08:36:32.254 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 02a orderer type: solo
16:38:24 2019-01-28 08:36:32.254 UTC [common.tools.configtxgen.localconfig] Load -> INFO 02b Loaded configuration: /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/sampleconfig/configtx.yaml
16:38:24 2019-01-28 08:36:32.272 UTC [ledgermgmt] CreateLedger -> INFO 02c Creating ledger [testchain1] with genesis block
16:38:24 2019-01-28 08:36:32.276 UTC [fsblkstorage] newBlockfileMgr -> INFO 02d Getting block information from block storage
16:38:24 2019-01-28 08:36:32.309 UTC [kvledger] CommitWithPvtData -> INFO 02e [testchain1] Committed block [0] with 1 transaction(s) in 25ms (state_validation=8ms block_commit=12ms state_commit=4ms)
16:38:24 2019-01-28 08:36:32.313 UTC [ledgermgmt] CreateLedger -> INFO 02f Created ledger [testchain1] with genesis block
16:38:24 2019-01-28 08:36:32.323 UTC [ledgermgmt] Close -> INFO 030 Closing ledger mgmt
16:38:24 2019-01-28 08:36:32.324 UTC [ledgermgmt] Close -> INFO 031 ledger mgmt closed
16:38:24 removing dir = /tmp/peer-fs297063676/ledgersData
16:38:24 removing dir = /tmp/peer-fs603345451/ledgersData
16:38:24 2019-01-28 08:36:32.327 UTC [ledgermgmt] initialize -> INFO 032 Initializing ledger mgmt
16:38:24 2019-01-28 08:36:32.328 UTC [kvledger] NewProvider -> INFO 033 Initializing ledger provider
16:38:24 2019-01-28 08:36:32.377 UTC [kvledger] NewProvider -> INFO 034 ledger provider Initialized
16:38:24 2019-01-28 08:36:32.426 UTC [ledgermgmt] initialize -> INFO 035 ledger mgmt initialized
16:38:24 2019-01-28 08:36:34.837 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 036 orderer type: solo
16:38:24 2019-01-28 08:36:34.837 UTC [common.tools.configtxgen.localconfig] Load -> INFO 037 Loaded configuration: /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/sampleconfig/configtx.yaml
16:38:24 2019-01-28 08:36:34.852 UTC [ledgermgmt] CreateLedger -> INFO 038 Creating ledger [testchain1] with genesis block
16:38:24 2019-01-28 08:36:34.861 UTC [fsblkstorage] newBlockfileMgr -> INFO 039 Getting block information from block storage
16:38:24 2019-01-28 08:36:34.908 UTC [kvledger] CommitWithPvtData -> INFO 03a [testchain1] Committed block [0] with 1 transaction(s) in 28ms (state_validation=6ms block_commit=17ms state_commit=4ms)
16:38:24 2019-01-28 08:36:34.914 UTC [ledgermgmt] CreateLedger -> INFO 03b Created ledger [testchain1] with genesis block
16:38:24 2019-01-28 08:36:34.991 UTC [ledgermgmt] OpenLedger -> INFO 03c Opening ledger with id = testchain1
16:38:24 2019-01-28 08:36:35.001 UTC [ledgermgmt] OpenLedger -> INFO 03d Opened ledger with id = testchain1
16:38:24 2019-01-28 08:36:35.001 UTC [ledgermgmt] Close -> INFO 03e Closing ledger mgmt
16:38:24 2019-01-28 08:36:35.005 UTC [ledgermgmt] Close -> INFO 03f ledger mgmt closed
16:38:24 removing dir = /tmp/peer-fs603345451/ledgersData
16:38:24 2019-01-28 08:36:37.365 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 040 orderer type: solo
16:38:24 2019-01-28 08:36:37.365 UTC [common.tools.configtxgen.localconfig] Load -> INFO 041 Loaded configuration: /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/sampleconfig/configtx.yaml
16:38:24 removing dir = /tmp/peer-fs196375438/ledgersData
16:38:24 2019-01-28 08:36:37.377 UTC [ledgermgmt] initialize -> INFO 042 Initializing ledger mgmt
16:38:24 2019-01-28 08:36:37.377 UTC [kvledger] NewProvider -> INFO 043 Initializing ledger provider
16:38:24 2019-01-28 08:36:37.478 UTC [kvledger] NewProvider -> INFO 044 ledger provider Initialized
16:38:24 2019-01-28 08:36:37.525 UTC [ledgermgmt] initialize -> INFO 045 ledger mgmt initialized
16:38:24 2019-01-28 08:36:37.525 UTC [ledgermgmt] CreateLedger -> INFO 046 Creating ledger [testchain] with genesis block
16:38:24 2019-01-28 08:36:37.530 UTC [fsblkstorage] newBlockfileMgr -> INFO 047 Getting block information from block storage
16:38:24 2019-01-28 08:36:37.585 UTC [kvledger] CommitWithPvtData -> INFO 048 [testchain] Committed block [0] with 1 transaction(s) in 47ms (state_validation=6ms block_commit=36ms state_commit=4ms)
16:38:24 2019-01-28 08:36:37.589 UTC [ledgermgmt] CreateLedger -> INFO 049 Created ledger [testchain] with genesis block
16:38:24 2019-01-28 08:36:37.594 UTC [ledgermgmt] Close -> INFO 04a Closing ledger mgmt
16:38:24 2019-01-28 08:36:37.596 UTC [ledgermgmt] Close -> INFO 04b ledger mgmt closed
16:38:24 removing dir = /tmp/peer-fs196375438/ledgersData
16:38:24 2019-01-28 08:36:37.599 UTC [ledgermgmt] initialize -> INFO 04c Initializing ledger mgmt
16:38:24 2019-01-28 08:36:37.599 UTC [kvledger] NewProvider -> INFO 04d Initializing ledger provider
16:38:24 2019-01-28 08:36:37.673 UTC [kvledger] NewProvider -> INFO 04e ledger provider Initialized
16:38:24 2019-01-28 08:36:37.720 UTC [ledgermgmt] initialize -> INFO 04f ledger mgmt initialized
16:38:24 2019-01-28 08:36:37.720 UTC [ledgermgmt] Close -> INFO 050 Closing ledger mgmt
16:38:24 2019-01-28 08:36:37.721 UTC [ledgermgmt] Close -> INFO 051 ledger mgmt closed
16:38:24 removing dir = /tmp/peer-fs727813013/ledgersData
16:38:24 2019-01-28 08:36:37.734 UTC [common.deliver] deliverBlocks -> WARN 052 Malformed envelope received from  with bad header
16:38:24 2019-01-28 08:36:37.735 UTC [peer] NewPeerServer -> ERRO 053 Failed to create peer server (Missing address parameter)
16:38:24 2019-01-28 08:36:37.735 UTC [ledgermgmt] initialize -> INFO 054 Initializing ledger mgmt
16:38:24 2019-01-28 08:36:37.736 UTC [kvledger] NewProvider -> INFO 055 Initializing ledger provider
16:38:24 2019-01-28 08:36:37.810 UTC [kvledger] NewProvider -> INFO 056 ledger provider Initialized
16:38:24 2019-01-28 08:36:37.863 UTC [ledgermgmt] initialize -> INFO 057 ledger mgmt initialized
16:38:24 2019-01-28 08:36:40.182 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 058 orderer type: solo
16:38:24 2019-01-28 08:36:40.183 UTC [common.tools.configtxgen.localconfig] Load -> INFO 059 Loaded configuration: /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/sampleconfig/configtx.yaml
16:38:24 2019-01-28 08:36:40.222 UTC [msp] Setup -> INFO 05a MSP manager already up
16:38:24 2019-01-28 08:36:40.223 UTC [gossip.service] func1 -> INFO 05b Initialize gossip with endpoint 127.0.0.1:44104 and bootstrap set []
16:38:24 2019-01-28 08:36:40.229 UTC [gossip.gossip] NewGossipService -> INFO 05c Creating gossip service with self membership of Endpoint: , InternalEndpoint: 127.0.0.1:44104, PKI-ID: 0d46737a45894d123895671221dbaddf8480fb0364f404be3aed491df442945f, Metadata: 
16:38:24 2019-01-28 08:36:40.232 UTC [gossip.gossip] NewGossipService -> WARN 05d External endpoint is empty, peer will not be accessible outside of its organization
16:38:24 2019-01-28 08:36:40.233 UTC [ledgermgmt] CreateLedger -> INFO 05e Creating ledger [mytestchainid-5577006791947779410] with genesis block
16:38:24 2019-01-28 08:36:40.234 UTC [gossip.gossip] start -> INFO 05f Gossip instance 127.0.0.1:44104 started
16:38:24 2019-01-28 08:36:40.239 UTC [fsblkstorage] newBlockfileMgr -> INFO 060 Getting block information from block storage
16:38:24 2019-01-28 08:36:40.286 UTC [kvledger] CommitWithPvtData -> INFO 061 [mytestchainid-5577006791947779410] Committed block [0] with 1 transaction(s) in 36ms (state_validation=10ms block_commit=20ms state_commit=6ms)
16:38:24 2019-01-28 08:36:40.290 UTC [ledgermgmt] CreateLedger -> INFO 062 Created ledger [mytestchainid-5577006791947779410] with genesis block
16:38:24 2019-01-28 08:36:40.336 UTC [gossip.gossip] JoinChan -> INFO 063 Joining gossip network of channel mytestchainid-5577006791947779410 with 1 organizations
16:38:24 2019-01-28 08:36:40.336 UTC [gossip.gossip] learnAnchorPeers -> INFO 064 Learning about the configured anchor peers of SampleOrg for channel mytestchainid-5577006791947779410 : [{127.0.0.1 7051}]
16:38:24 2019-01-28 08:36:40.397 UTC [gossip.privdata] NewCoordinator -> WARN 065 Configuration key peer.gossip.pvtData.transientstoreMaxBlockRetention isn't set, defaulting to 1000
16:38:24 2019-01-28 08:36:40.398 UTC [gossip.privdata] GetReconcilerConfig -> WARN 066 Configuration key peer.gossip.pvtData.reconcileSleepInterval isn't set, defaulting to 1m0s
16:38:24 2019-01-28 08:36:40.398 UTC [gossip.privdata] GetReconcilerConfig -> WARN 067 Configuration key peer.gossip.pvtData.reconcileBatchSize isn't set, defaulting to 10
16:38:24 2019-01-28 08:36:40.399 UTC [gossip.state] NewGossipStateProvider -> INFO 068 Updating metadata information, current ledger sequence is at = 0, next expected block is = 1
16:38:24 removing dir = /tmp/peer-fs640818831/ledgersData
16:38:24 2019-01-28 08:36:40.406 UTC [ledgermgmt] initialize -> INFO 069 Initializing ledger mgmt
16:38:24 2019-01-28 08:36:40.407 UTC [kvledger] NewProvider -> INFO 06a Initializing ledger provider
16:38:24 2019-01-28 08:36:40.533 UTC [kvledger] NewProvider -> INFO 06b ledger provider Initialized
16:38:24 2019-01-28 08:36:40.664 UTC [ledgermgmt] initialize -> INFO 06c ledger mgmt initialized
16:38:24 2019-01-28 08:36:43.157 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 06d orderer type: solo
16:38:24 2019-01-28 08:36:43.158 UTC [common.tools.configtxgen.localconfig] Load -> INFO 06e Loaded configuration: /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/sampleconfig/configtx.yaml
16:38:24 2019-01-28 08:36:43.170 UTC [ledgermgmt] CreateLedger -> INFO 06f Creating ledger [testchain] with genesis block
16:38:24 2019-01-28 08:36:43.181 UTC [fsblkstorage] newBlockfileMgr -> INFO 070 Getting block information from block storage
16:38:24 2019-01-28 08:36:43.263 UTC [kvledger] CommitWithPvtData -> INFO 071 [testchain] Committed block [0] with 1 transaction(s) in 54ms (state_validation=6ms block_commit=43ms state_commit=4ms)
16:38:24 2019-01-28 08:36:43.267 UTC [ledgermgmt] CreateLedger -> INFO 072 Created ledger [testchain] with genesis block
16:38:24 2019-01-28 08:36:43.338 UTC [gossip.gossip] func1 -> WARN 073 Deep probe of 127.0.0.1:7051 failed: context deadline exceeded
16:38:24 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).learnAnchorPeers.func1
16:38:24 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:244
16:38:24 github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).Connect.func1
16:38:24 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:159
16:38:24 runtime.goexit
16:38:24 	/opt/go/go1.11.1.linux.amd64/src/runtime/asm_amd64.s:1333
16:38:24 2019-01-28 08:36:43.338 UTC [gossip.discovery] func1 -> WARN 074 Could not connect to Endpoint: 127.0.0.1:7051, InternalEndpoint: 127.0.0.1:7051, PKI-ID: <nil>, Metadata:  : context deadline exceeded
16:38:24 2019-01-28 08:36:45.520 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 075 orderer type: solo
16:38:24 2019-01-28 08:36:45.521 UTC [common.tools.configtxgen.localconfig] Load -> INFO 076 Loaded configuration: /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/sampleconfig/configtx.yaml
16:38:24 2019-01-28 08:36:48.916 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 077 orderer type: solo
16:38:24 2019-01-28 08:36:48.916 UTC [common.tools.configtxgen.localconfig] Load -> INFO 078 Loaded configuration: /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/sampleconfig/configtx.yaml
16:38:24 2019-01-28 08:36:50.954 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 079 orderer type: solo
16:38:24 2019-01-28 08:36:50.955 UTC [common.tools.configtxgen.localconfig] Load -> INFO 07a Loaded configuration: /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/sampleconfig/configtx.yaml
16:38:24 2019-01-28 08:36:51.981 UTC [ledgermgmt] CreateLedger -> INFO 07b Creating ledger [channel1] with genesis block
16:38:24 2019-01-28 08:36:51.992 UTC [fsblkstorage] newBlockfileMgr -> INFO 07c Getting block information from block storage
16:38:24 2019-01-28 08:36:52.048 UTC [kvledger] CommitWithPvtData -> INFO 07d [channel1] Committed block [0] with 1 transaction(s) in 38ms (state_validation=8ms block_commit=23ms state_commit=6ms)
16:38:24 2019-01-28 08:36:52.053 UTC [ledgermgmt] CreateLedger -> INFO 07e Created ledger [channel1] with genesis block
16:38:24 2019-01-28 08:36:52.111 UTC [gossip.gossip] JoinChan -> INFO 07f Joining gossip network of channel channel1 with 2 organizations
16:38:24 2019-01-28 08:36:52.112 UTC [gossip.gossip] learnAnchorPeers -> INFO 080 No configured anchor peers of Org1MSP for channel channel1 to learn about
16:38:24 2019-01-28 08:36:52.112 UTC [gossip.gossip] learnAnchorPeers -> INFO 081 Learning about the configured anchor peers of SampleOrg for channel channel1 : [{127.0.0.1 7051}]
16:38:24 2019-01-28 08:36:52.129 UTC [gossip.privdata] NewCoordinator -> WARN 082 Configuration key peer.gossip.pvtData.transientstoreMaxBlockRetention isn't set, defaulting to 1000
16:38:24 2019-01-28 08:36:52.130 UTC [gossip.privdata] GetReconcilerConfig -> WARN 083 Configuration key peer.gossip.pvtData.reconcileSleepInterval isn't set, defaulting to 1m0s
16:38:24 2019-01-28 08:36:52.130 UTC [gossip.privdata] GetReconcilerConfig -> WARN 084 Configuration key peer.gossip.pvtData.reconcileBatchSize isn't set, defaulting to 10
16:38:24 2019-01-28 08:36:52.132 UTC [gossip.state] NewGossipStateProvider -> INFO 085 Updating metadata information, current ledger sequence is at = 0, next expected block is = 1
16:38:24 2019-01-28 08:36:54.176 UTC [ledgermgmt] CreateLedger -> INFO 086 Creating ledger [channel2] with genesis block
16:38:24 2019-01-28 08:36:54.181 UTC [fsblkstorage] newBlockfileMgr -> INFO 087 Getting block information from block storage
16:38:24 2019-01-28 08:36:54.262 UTC [kvledger] CommitWithPvtData -> INFO 088 [channel2] Committed block [0] with 1 transaction(s) in 59ms (state_validation=7ms block_commit=35ms state_commit=16ms)
16:38:24 2019-01-28 08:36:54.270 UTC [ledgermgmt] CreateLedger -> INFO 089 Created ledger [channel2] with genesis block
16:38:24 2019-01-28 08:36:54.299 UTC [gossip.gossip] JoinChan -> INFO 08a Joining gossip network of channel channel2 with 2 organizations
16:38:24 2019-01-28 08:36:54.300 UTC [gossip.gossip] learnAnchorPeers -> INFO 08b No configured anchor peers of Org2MSP for channel channel2 to learn about
16:38:24 2019-01-28 08:36:54.300 UTC [gossip.gossip] learnAnchorPeers -> INFO 08c Learning about the configured anchor peers of SampleOrg for channel channel2 : [{127.0.0.1 7051}]
16:38:24 2019-01-28 08:36:54.310 UTC [gossip.privdata] NewCoordinator -> WARN 08d Configuration key peer.gossip.pvtData.transientstoreMaxBlockRetention isn't set, defaulting to 1000
16:38:24 2019-01-28 08:36:54.310 UTC [gossip.privdata] GetReconcilerConfig -> WARN 08e Configuration key peer.gossip.pvtData.reconcileSleepInterval isn't set, defaulting to 1m0s
16:38:24 2019-01-28 08:36:54.310 UTC [gossip.privdata] GetReconcilerConfig -> WARN 08f Configuration key peer.gossip.pvtData.reconcileBatchSize isn't set, defaulting to 10
16:38:24 2019-01-28 08:36:54.311 UTC [gossip.state] NewGossipStateProvider -> INFO 090 Updating metadata information, current ledger sequence is at = 0, next expected block is = 1
16:38:24 2019-01-28 08:36:55.114 UTC [gossip.gossip] func1 -> WARN 091 Deep probe of 127.0.0.1:7051 failed: context deadline exceeded
16:38:24 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).learnAnchorPeers.func1
16:38:24 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:244
16:38:24 github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).Connect.func1
16:38:24 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:159
16:38:24 runtime.goexit
16:38:24 	/opt/go/go1.11.1.linux.amd64/src/runtime/asm_amd64.s:1333
16:38:24 2019-01-28 08:36:55.115 UTC [gossip.discovery] func1 -> WARN 092 Could not connect to Endpoint: 127.0.0.1:7051, InternalEndpoint: 127.0.0.1:7051, PKI-ID: <nil>, Metadata:  : context deadline exceeded
16:38:24 2019-01-28 08:36:56.335 UTC [ledgermgmt] CreateLedger -> INFO 093 Creating ledger [channel3] with genesis block
16:38:24 2019-01-28 08:36:56.343 UTC [fsblkstorage] newBlockfileMgr -> INFO 094 Getting block information from block storage
16:38:24 2019-01-28 08:36:57.302 UTC [gossip.gossip] func1 -> WARN 095 Deep probe of 127.0.0.1:7051 failed: context deadline exceeded
16:38:24 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).learnAnchorPeers.func1
16:38:24 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:244
16:38:24 github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).Connect.func1
16:38:24 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:159
16:38:24 runtime.goexit
16:38:24 	/opt/go/go1.11.1.linux.amd64/src/runtime/asm_amd64.s:1333
16:38:24 2019-01-28 08:36:57.302 UTC [gossip.discovery] func1 -> WARN 096 Could not connect to Endpoint: 127.0.0.1:7051, InternalEndpoint: 127.0.0.1:7051, PKI-ID: <nil>, Metadata:  : context deadline exceeded
16:38:24 2019-01-28 08:36:58.180 UTC [kvledger] CommitWithPvtData -> INFO 097 [channel3] Committed block [0] with 1 transaction(s) in 1828ms (state_validation=6ms block_commit=1810ms state_commit=11ms)
16:38:24 2019-01-28 08:36:58.185 UTC [ledgermgmt] CreateLedger -> INFO 098 Created ledger [channel3] with genesis block
16:38:24 2019-01-28 08:36:58.271 UTC [gossip.gossip] JoinChan -> INFO 099 Joining gossip network of channel channel3 with 2 organizations
16:38:24 2019-01-28 08:36:58.271 UTC [gossip.gossip] learnAnchorPeers -> INFO 09a No configured anchor peers of Org2IntermediateMSP for channel channel3 to learn about
16:38:24 2019-01-28 08:36:58.272 UTC [gossip.gossip] learnAnchorPeers -> INFO 09b Learning about the configured anchor peers of SampleOrg for channel channel3 : [{127.0.0.1 7051}]
16:38:24 2019-01-28 08:36:58.294 UTC [gossip.privdata] NewCoordinator -> WARN 09c Configuration key peer.gossip.pvtData.transientstoreMaxBlockRetention isn't set, defaulting to 1000
16:38:24 2019-01-28 08:36:58.296 UTC [gossip.privdata] GetReconcilerConfig -> WARN 09d Configuration key peer.gossip.pvtData.reconcileSleepInterval isn't set, defaulting to 1m0s
16:38:24 2019-01-28 08:36:58.297 UTC [gossip.privdata] GetReconcilerConfig -> WARN 09e Configuration key peer.gossip.pvtData.reconcileBatchSize isn't set, defaulting to 10
16:38:24 2019-01-28 08:36:58.298 UTC [gossip.state] NewGossipStateProvider -> INFO 09f Updating metadata information, current ledger sequence is at = 0, next expected block is = 1
16:38:24 FAIL
16:38:24 coverage: 70.8% of statements
16:38:24 FAIL	github.com/hyperledger/fabric/core/peer	31.275s
{code}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8387/console",,guoger,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0097j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,kchristidis,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Jan/19 5:43 AM;kchristidis;Bumped into it here: [https://gerrit.hyperledger.org/r/c/28892] + [https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8446/consoleFull]

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer commits transaction even if storage location is not available,FAB-13919,37184,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Invalid: Works as Expected,,mghasletwala,mghasletwala,28/Jan/19 8:08 PM,01/Feb/19 7:10 AM,28/Oct/23 3:04 AM,29/Jan/19 11:27 PM,v1.3.0,,,,,,,,,fabric-ledger,,,,,0,,,,,"Test Scenario - To observe behavior of Peer container when its externally mounted ledger storage location is not available (simulate file system failure)
Expectation - Endorsement or Commit should fail at Peer as ledger storage location is inaccessible
Observation -
Case I - when storage location is made inaccessible
- Transaction endorsement is successful
- Block commit is successful
- GetBlockByNumber fails with message [""Failed to get block number 100, error error opening block file /var/hyperledger/production/ledgersData/chains/chains/mychannel/blockfile_000000: open /var/hyperledger/production/ledgersData/chains/chains/mychannel/blockfile_000000: no such file or directory""]
- No error log in Peer but the error is returned as part of [response: status:500]

Case II - after the store location is restored
- Transaction endorsement is successful
- Block commit is successful
- GetBlockByNumber fails with message [""Failed to get block number 100, error error decoding varint with proto.Buffer: unexpected EOF""]
- For block with transaction post restoration GetBlockByNumber fails with message [""Failed to get block number 106, error error peeking [-28848] bytes from block file: bufio: negative count"" ]
- No error log in Peer but the error is returned as part of [response: status:500]

Case III - after Peer is restarted
- Blocks are synced from Orderer and Peer works normally

=====Log Reference Details=====
Note - Some content in log files is masked

Peer Log Important Timestamps (peer1org1_Part1.log)
=============================
2019-01-25 15:28:03.786 ... retrieveBlockByNumber() - blockNum = [99]  >>>> after this we moved the ledger files
2019-01-25 15:42:57.088 >>> new transaction for endorsement 
2019-01-25 15:42:59.127 >>> Block 100 with the transaction
2019-01-25 15:43:25.084 >>> GetBlockByNumber to fetch Block 100

2019-01-25 15:43:33.961 >>> new transaction for endorsement 
2019-01-25 15:43:35.991 >>> Block 101 with the transaction
2019-01-25 15:43:55.414 >>> GetBlockByNumber to fetch Block 101

... more transactions

2019-01-25 15:47:24.830 >>> new transaction for endorsement 
2019-01-25 15:47:26.855 >>> Block 105 with the transaction
2019-01-25 15:48:38.535 >>> GetBlockByNumber to fetch Block 105

Restore the ledger files
2019-01-25 15:56:31.151 >>> GetBlockByNumber to fetch Block 100
2019-01-25 15:59:31.523 >>> GetBlockByNumber to fetch Block 104

2019-01-25 16:01:13.192 >>> new transaction for endorsement 
2019-01-25 16:01:15.224 >>> Block 106 with the transaction
2019-01-25 16:04:17.762 >>> GetBlockByNumber to fetch Block 106

Client Important Timestamps (putty-all.log)
===========================
2019-01-25 15:28:03.745 >>> Call from CLI to fetch Block 99
2019-01-25 15:28:03.782 >>> Block 99 details

2019-01-25 15:43:25.046 >>> Call from CLI to fetch Block 100
2019-01-25 15:43:25.082 >>> endorsement error from peer ""response: status:500""

2019-01-25 15:48:38.492 >>> Call from CLI to fetch Block 105
2019-01-25 15:48:38.533 >>> endorsement error from peer ""response: status:500""

After Restore the ledger files
2019-01-25 15:56:31.111 >>> Call from CLI to fetch Block 100
2019-01-25 15:56:31.149 >>> endorsement error from peer ""response: status:500""

2019-01-25 15:59:31.483 >>> Call from CLI to fetch Block 104
2019-01-25 15:59:31.521 >>> endorsement error from peer ""response: status:500""

2019-01-25 16:04:17.722 >>> Call from CLI to fetch Block 106
2019-01-25 16:04:17.759 >>> endorsement error from peer ""response: status:500""

Peer Log post Restart
=============
After couple of days we restarted the peer (peer1org1_Part2.log)
2019-01-28 06:33:01.078 >>> Peer syncs Block 100-106 from Orderer",,denyeart,manish-sethi,mghasletwala,MHBauer,ooharawork,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jan/19 8:05 PM;mghasletwala;PeerStorageInvestigationLogs.zip;https://jira.hyperledger.org/secure/attachment/16640/PeerStorageInvestigationLogs.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0097r:",,,,Unset,Unset,,,,"1. Fabric 1.3, Single Org, Single Peer, Solo Orderer network with ""fabcar"" chaincode
2. Peer data is externalized on a folder on VM outside Docker container
3. Load data so that 99 blocks are created (99 is just incidental, no significance from issue perspective)
4. Move the ledger folder (""ledgersData"" folder including block files, historyindex, blockindex) on the VM to some other location
5. Using CLI, post new transaction
6. Using CLI, via GetBlockByNumber API fetch newly created Block 100
7. Repeat Step 5 and 6 to add and read few more blocks (in this case 5 more)
8. Restore the ledger data folder to its original location
9. Using CLI, via GetBlockByNumber API fetch previously created Block 100 and few more
10. Using CLI, post new transaction
11. Using CLI, via GetBlockByNumber API fetch newly created Block 106
12. Stop and then Start the Peer Docker container
13. Using CLI, via GetBlockByNumber API fetch block < 100 and > 100",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,manish-sethi,mghasletwala,MHBauer,ooharawork,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jan/19 2:18 AM;denyeart;If you ""Move the ledger folder"" while peer process is up, peer still has a handle to the original file and can continue writing and committing.  This is the expected behavior on unix and is what you are seeing (unix doen't convey to the process that a file has moved). If you however make the file system inaccessible, you will see an error upon commit and peer will stop since it is unable to continue processing blocks.

For more details see unix documentation or various posting like this one:

[https://stackoverflow.com/questions/2028874/what-happens-to-an-open-file-handle-on-linux-if-the-pointed-file-gets-moved-del]

 ;;;","29/Jan/19 2:21 PM;mghasletwala;Actually ""peer"" only seems to be writing but actually nothing is being written. So the conclusion that [If you ""Move the ledger folder"" while peer process is up, peer still has a handle to the original file and can continue writing and committing] is incorrect.
Blocks are not getting written on moved location. If they were then when we move back the files to original location the Block reading should be successful. But it fails. Which means that for some reason ""peer"" is unable to track that block writing is actually failing. The issues needs to be investigated. 
In production deployment, we cannot have a situation where block file writing failures go undetected until some request to read blockfile is generated.;;;","29/Jan/19 11:27 PM;denyeart;[~mghasletwala] Again, on unix when the file is moved it is a request for the OS to delete the original file as soon as all processes that have a handle to it release their handles. Any process that already has a handle to the old file will keep their handle to the old file. The process will continue writing to the old file. When the process dereferences the file handle, assuming it was the last process to have a handle on the file, the file will then be completely deleted from the OS.  This is how unix processes work with files that get removed under them. There is nothing that Fabric can fix with how unix deals with moved/deleted files. In cases where the OS returns an error writing to file, peer will indeed throw an error and stop since it is unable to commit.;;;","31/Jan/19 12:07 AM;manish-sethi;I Agree with the comments made by [~denyeart] here. 
[~mghasletwala] - Following are the links to similar questions that had previous been answered that may help you 
- https://chat.hyperledger.org/channel/fabric-ledger?msg=GCDQ6arZB5biu5N5k
- https://jira.hyperledger.org/browse/FAB-5551;;;","01/Feb/19 7:10 AM;denyeart;[~mghasletwala]

Copying the mailing list answer here:

The Jira subject line is not true:

_>> Peer commits transaction even if storage location is not available_

As part of each block commit, fsync is indeed called to flush the block to disk and make it durable, and if there is an error writing to the file, the peer will panic since it is not able to proceed with block processing.

In your test scenario OS does not return any error because the OS allows you to move or delete a file from under a process that already has a handle to it. And the OS allows the process that has a handle to keep writing to the moved or deleted file. The same is true for any process, this is not Fabric specific behavior. Go ahead and try it on your favorite enterprise database. Or see the accepted answer in this space:
https://stackoverflow.com/questions/2028874/what-happens-to-an-open-file-handle-on-linux-if-the-pointed-file-gets-moved-del

A production system should be locked down such that its files are not tampered with. There are infinite number of ways that a system admin could sabotage their own peer, deleting files underneath a running peer is just one of them. Blockchain doesn't solve the problem of protecting a peer from its own malicious or careless system admin. It solves the problem of protecting the rest of the network from any individual malicious or careless system admin.

I believe you are trying to test peer's behavior when there is an error writing to the file system. In that case, attempt a test that will actually cause an error writing to the file system, for example make the file system unavailable. You will see that peer handles errors upon block commit with this error:
panic: Cannot commit block to the ledger due to Error while appending block to file: <OS ERROR MESSAGE>.

Most container orchestration software will be configured to automatically restart peer. Peer restart has recovery logic to ensure it can resume where it left off. But even the smartest peer will never be able to outsmart its own devilish system admin.;;;",,,,,,,,,,,,,,,,,,,,,,,,
Probability of vote split is high in a two node cluster,FAB-13920,37186,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,guoger,guoger,guoger,28/Jan/19 9:34 PM,19/Mar/19 7:57 PM,28/Oct/23 3:04 AM,25/Feb/19 10:34 PM,,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/5076/consoleFull

In a cluster of two nodes, with ElectionTick == 10x HeartbeatTick, the probability of vote split (two nodes start the election at the same time) is 10/10*10 = 10%

with slow heartbeat interval introduced in [this CR|https://gerrit.hyperledger.org/r/c/28918], period of leaderless is prolonged for at least 5s every time vote split happens.

and our peer cli timeout is not very lenient (even increased to 10s in the CR aforementioned). the chance for this test to fail is 1%",,guoger,kchristidis,,,,,,,,,,,,,,,,,,,FAB-14117,,,,,,,,,,,,,,,,,FAB-13845,FAB-13371,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0097z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,kchristidis,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Jan/19 9:36 PM;guoger;I propose to prevent two-node cluster in our integration test (adding a node), so the probability of failure is reduced by 10x

cc [~kchristidis] [~yacovm];;;","29/Jan/19 12:50 AM;kchristidis;How is the 10% probability derived again?;;;","29/Jan/19 2:53 PM;kchristidis;Via Jay in RC:

{code}
r.randomizedElectionTimeout = r.electionTimeout + globalRand.Intn(r.electionTimeout)
{code}

So:

* A node will start election at any time between [10-20) (10 slots)
* There are 10*10 combinations for two nodes, and 10 out of 100 is they campaigning at the same time;;;","29/Jan/19 3:31 PM;kchristidis;Good with not having tests with just two nodes.;;;","07/Feb/19 10:11 PM;guoger;https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/5441/console;;;","18/Feb/19 5:12 PM;guoger;While I was calculating the probability of vote split, I overlooked another factor that contributes to it: *lease-check when {{CheckQuorum}} is enabled*

the issue is described in detail [here|https://github.com/etcd-io/etcd/issues/10483]

another fact is, when we have a 4 nodes cluster and 3/4 is alive, if a vote split happens among two nodes, the remaining 1 node doesn't make a quorum still...

We need to have a 5 nodes cluster and crash one of them in our integration test, to gain a certain level of determinism...;;;","19/Feb/19 10:11 AM;kchristidis;Roger. Let's move to 5 nodes then.;;;","21/Feb/19 12:05 AM;guoger;https://gerrit.hyperledger.org/r/c/29412;;;","25/Feb/19 10:33 PM;guoger;With raft lib version being bumped, the probability of this happening is fairly low, and we can backlog this for now.;;;",,,,,,,,,,,,,,,,,,,,
"Fabric uses a third-party Docker client, should be replaced with official Docker client",FAB-13921,37190,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,btl5037,btl5037,btl5037,28/Jan/19 11:45 PM,28/Mar/19 9:39 PM,28/Oct/23 3:04 AM,28/Mar/19 9:39 PM,,,,,,,,,,,,,,,0,ipm,ipm-planned,,,"Fabric currently uses the fsouza, 3rd party Docker client. At the time of vendoring, this was the mainstream Docker client for Go. There is now an official Docker Client for Go, and the fsouza repo now states you should use this moving forward, as the fsouza client will no longer guarantee support for Docker updates.",,btl5037,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008g7:4",,,,Unset,Unset,,,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Mar/19 9:37 PM;sykesm;Discussed the with Bret last night. When all is said and done, the official docker client is still quite rough around the edges. Error processing and streaming output behave differently and not really better.

Given where we are, we've decided to abandon this work and stick with the third party client until we need to use some feature it doesn't support. (unlikely for now)

CRs:

https://gerrit.hyperledger.org/r/c/30056/
https://gerrit.hyperledger.org/r/c/30245/;;;","28/Mar/19 9:39 PM;sykesm;Please see comments. Official client does not seem as mature as the legacy third party client. If we ever need a feature or a fix that is not available outside of the official, client, we can revisit...;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
add e2e ledger test for backup and restore,FAB-13922,37191,15597,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,Senthil1,Senthil1,Senthil1,29/Jan/19 12:07 AM,23/Jan/20 7:31 AM,28/Oct/23 3:04 AM,23/Jan/20 7:31 AM,,,,,,v2.0.0,,,,,,,,,0,stale-item,,,,"Using all releases from v1.0 to v1.4, create ledgerData including pvtdata and take a backup of the ledgerData folder. With the ledgerData backup, test the following
 # copy only the chains, pvtdataStore, and ledgerProvider to the newly started peer and ensure that all other stores including the stateDB are built properly by the peer's recovery mechanism. Test the data consistency. 
 # copy the complete ledgerData to the newly started peer and ensure that the newly added peer. Test the data consistency.",,Senthil1,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00993:",,,,Unset,Unset,Sprint 15  - Ledger,Sprint 16  - Ledger,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestDispatchSubmit failed in dispatcher test due to backend error in mychannel,FAB-13923,37193,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,29/Jan/19 12:43 AM,19/Mar/19 7:57 PM,28/Oct/23 3:04 AM,04/Mar/19 9:51 PM,v1.4.0,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"TestDispatchSubmit failed in dispatcher test, failed handling transaction in mychannel(panic error) This is the first time this fail is observed in the daily unit-test coverage.

*Intermittent:* No
*Branch:* release-1.4
*Platform:* x86_64
*Error Snippet:*

{code:java}
21:01:59 [33m2019-01-26 02:01:57.291 UTC [test] OnSubmit -> WARN 002[0m An attempt to submit a transaction to a non existing channel (notmychannel) was made by 1
21:01:59 [31m2019-01-26 02:01:57.291 UTC [test] OnSubmit -> ERRO 003[0m Failed handling transaction on channel mychannel from 1: backend error
21:01:59 github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.TestDispatchSubmit
21:01:59 	/w/workspace/fabric-unit-test-coverage-daily-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/dispatcher_test.go:67
21:01:59 testing.tRunner
21:01:59 	/opt/go/go1.11.1.linux.amd64/src/testing/testing.go:827
21:01:59 runtime.goexit
21:01:59 	/opt/go/go1.11.1.linux.amd64/src/runtime/asm_amd64.s:1333
21:01:59 Running Suite: Etcdraft Suite
21:01:59 =============================
21:01:59 Random Seed: [1m1548468116[0m
21:01:59 Will run [1m66[0m of [1m66[0m specs
21:01:59 
21:01:59 [32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0mpanic: runtime error: invalid memory address or nil pointer dereference
21:01:59 [signal SIGSEGV: segmentation violation code=0x1 addr=0x10 pc=0xea9507]
{code}

*Build Logs:*
https://jenkins.hyperledger.org/view/Daily/job/fabric-unit-test-coverage-daily-release-1.4-x86_64/42/console
",,C0rWin,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,c74ccd3ffe718c7f6e3b7b76c5acac288f7dcd44,Unset,No,,,"1|i0099j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create new policy protobuf,FAB-13924,37194,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,29/Jan/19 12:56 AM,04/Apr/19 10:15 PM,28/Oct/23 3:04 AM,04/Apr/19 10:15 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0099r:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"goroutine test is failing in the daily unit-tests, with timeout error",FAB-13926,37196,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,sambhavdutt,sambhavdutt,29/Jan/19 1:12 AM,19/Mar/19 7:57 PM,28/Oct/23 3:04 AM,02/Feb/19 12:45 AM,v2.0.0,,,,,,,,,fabric-peer,,,,,0,ci-flake,,,,"goroutine test is failing in the daily tests, with timeout error. This has been observed intermittently in the daily coverage unit-tests.

*Consistent:* Yes
*Branch:* master
*Platform:* x86_64, s390x
*Error Snippet:*

{code:java}
00:52:51 goroutine 89 [runnable]:
00:52:51 os/exec.(*Cmd).Start.func2(0xc00035a420)
00:52:51 	/opt/go/go1.11.1.linux.amd64/src/os/exec/exec.go:406
00:52:51 created by os/exec.(*Cmd).Start
00:52:51 	/opt/go/go1.11.1.linux.amd64/src/os/exec/exec.go:406 +0x644
00:52:51 
00:52:51 rax    0xca
00:52:51 rbx    0x20ef560
00:52:51 rcx    0x9896a3
00:52:51 rdx    0x0
00:52:51 rdi    0x20ef6a0
00:52:51 rsi    0x80
00:52:51 rbp    0x7fffc6871ca0
00:52:51 rsp    0x7fffc6871c58
00:52:51 r8     0x0
00:52:51 r9     0x0
00:52:51 r10    0x0
00:52:51 r11    0x286
00:52:51 r12    0x4
00:52:51 r13    0x4
00:52:51 r14    0x1619f59
00:52:51 r15    0x0
00:52:51 rip    0x9896a1
00:52:51 rflags 0x286
00:52:51 cs     0x33
00:52:51 fs     0x0
00:52:51 gs     0x0
00:52:51 *** Test killed with quit: ran too long (21m0s).
00:52:51 FAIL	github.com/hyperledger/fabric/peer/chaincode	1260.012s
{code}

*Build Logs:*

https://jenkins.hyperledger.org/view/Daily/job/fabric-unit-test-coverage-daily-master-x86_64/337/console
",,denyeart,rameshthoomu,sambhavdutt,sykesm,vijaypunugubati,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,9f3b0df3f19d344446ec721eae7010f0021c9027,Unset,No,,,"1|i009a7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,rameshthoomu,sambhavdutt,sykesm,vijaypunugubati,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jan/19 3:21 AM;sykesm;Please attach the full build output. Snippets of a timeout message do not aid with diagnosis.;;;","29/Jan/19 4:17 AM;sambhavdutt;[~sykesm]

I have attached the build output in the *Build Logs* , the full Console Output for the test I mean. Is this what you were asking for ,

https://jenkins.hyperledger.org/view/Daily/job/fabric-unit-test-coverage-daily-master-x86_64/337/console;;;","29/Jan/19 4:54 AM;sykesm;So, you've provided a link to the console output of a build that will disappear within a few days. As intermittent failures of this nature don't get urgent treatment, by the time this gets scheduled for work, the logs will disappear.

The request is that if there's an issue like this, please attach the logs as a file attachment.;;;","29/Jan/19 5:53 AM;sambhavdutt;[~sykesm] I agree, I have just submitted a CR in ci-management to retain the logs for a longer duration.;;;","29/Jan/19 11:51 PM;sambhavdutt;[~sykesm] The plugin for saving the artifacts is active now, the results will be retained after 7 days even if the jobs don't appear in Jenkins starting today, this is the link for today's unit-tests coverage on master(x86_64)

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-x86_64/339/;;;","30/Jan/19 11:23 AM;sambhavdutt;The unit-tests coverage is failing with the timeout error again in goroutine test 59,

*Error Snippet*

{code:java}
20:05:46 goroutine 59 [select]:
20:05:46 os/exec.(*Cmd).Start.func2(0xc0004f0840)
20:05:46 	/opt/go/go1.11.1.linux.amd64/src/os/exec/exec.go:407 +0xc4
20:05:46 created by os/exec.(*Cmd).Start
20:05:46 	/opt/go/go1.11.1.linux.amd64/src/os/exec/exec.go:406 +0x644
20:05:46 
20:05:46 rax    0x1
20:05:46 rbx    0x1630b40
20:05:46 rcx    0xc00032a138
20:05:46 rdx    0xc00054c3c0
20:05:46 rdi    0xc00032c1e0
20:05:46 rsi    0x0
20:05:46 rbp    0xc0005437c0
20:05:46 rsp    0xc0005436d8
20:05:46 r8     0x7
20:05:46 r9     0x1507e26
20:05:46 r10    0x5
20:05:46 r11    0x1505bc3
20:05:46 r12    0x1
20:05:46 r13    0xc000037560
20:05:46 r14    0xc000037680
20:05:46 r15    0x0
20:05:46 rip    0x120ef42
20:05:46 rflags 0x297
20:05:46 cs     0x33
20:05:46 fs     0x0
20:05:46 gs     0x0
20:05:46 *** Test killed with quit: ran too long (21m0s).
20:05:46 FAIL	github.com/hyperledger/fabric/peer/chaincode	1260.010s
{code}

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-x86_64/340/;;;","31/Jan/19 5:54 AM;wlahti;Wondering if this might be fixed by the CR for FAB-13875...;;;","01/Feb/19 4:08 AM;wlahti;The fix for FAB-13875 was merged a few hours ago. I believe this failure should now be resolved but please let me know if not.;;;","02/Feb/19 12:45 AM;sambhavdutt;[~wlahti][~sykesm]

I see now that the unit-tests are not failing in the goroutine test case for x and z. There is fail in gossip service which is a flake again. Marking this as Done as the unit-tests are not failing with the same error

*Last Build Logs*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-s390x/12/

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-x86_64/343/;;;",,,,,,,,,,,,,,,,,,,,
EncCC Fabric-Sample of Broadcast Encryption ,FAB-13928,37202,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,ales,nRyDevOps,nRyDevOps,29/Jan/19 5:57 AM,23/Jan/20 7:32 AM,28/Oct/23 3:04 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,0,stale-item,,,,"The basic use-case is: 

GPG encrypts the file once with a symmetric key, then places a header identifying the target keypair and an encrypted version of the symmetric key.

When encrypted to multiple recipients, this header is placed multiple times providing a *uniquely encrypted version of the same symmetric key for each recipient*.",,ales,maclane,nRyDevOps,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i009bj:",,,,Yes,Unset,,,,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),ales,maclane,nRyDevOps,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Mar/19 1:48 AM;nRyDevOps;Hello, I think this would be a very good example to have as part of the HLF project. [~ales] are you still able to work on this? ;;;","14/Jan/20 12:43 AM;nRyDevOps;[~sykesm] Is there anyone on the Hyperledger dev team that might be able to work on this task? I still feel that it will be incredibly useful. I have also been looking at ways to integrate NuCypher for proxy re-encryption: [https://www.nucypher.com/

];;;","14/Jan/20 3:39 AM;sykesm;> Is there anyone on the Hyperledger dev team that might be able to work on this task?

I have no idea. [~ales] is probably best positioned to answer that.

What I can say is that we're trying to clean out some very old items from JIRA so we're tagging any item that has not had meaningful updates or engagement in the last 9 months. As announced on the mailing list, these items are likely going to get closed next week. If you and Ale can have discussion about the future of this item, that would be helpful.

In general, for features, we're moving to a process where RFCs are opened in https://github.com/hyperledger/fabric-rfcs/ for discussion. If this item were to be implemented, I'd expect it to be reviewed through the process documented there.

Thanks.;;;","18/Jan/20 7:33 AM;maclane;If this is something of interest, we (NuCypher) might be able to provide some assistance. The use case as described (sharing a symmetric key among multiple recipients) is a good fit for proxy re-encryption (PRE) as Alice, the data owner, can encrypt it once and then grant (and revoke) access to arbitrarily many recipients.;;;","21/Jan/20 9:09 PM;ales;The use-case is definitely interesting, but a fair question would be whether the implementation would belong to fabric proper or to an application-level helper library that lets client and chaincode handle the crypto operations. I like Matt's idea of an RFC because we need to clarify the requirements first.;;;","23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,
Disable flaky TestEndedGoroutines test,FAB-13929,37203,33934,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,29/Jan/19 7:20 AM,06/Apr/19 5:37 PM,28/Oct/23 3:04 AM,29/Jan/19 10:45 AM,v2.0.0,,,,,v2.0.0,,,,fabric-gossip,,,,,0,,,,,"In order to stabilize CI and reduce false positives, I suggest to disable TestEndedGoroutines until it got fixed.",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009br:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Jan/19 7:21 AM;C0rWin;https://gerrit.hyperledger.org/r/28991 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE: create helper script to manage IKS/K8S operations,FAB-13930,37204,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,AdnanChoudhury,AdnanChoudhury,AdnanChoudhury,29/Jan/19 7:40 AM,15/Apr/19 10:22 PM,28/Oct/23 3:04 AM,15/Apr/19 10:22 PM,,,,,,,,,,fabric-quality,,,,,0,,,,,,,AdnanChoudhury,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i009bz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),AdnanChoudhury,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"29/Jan/19 8:15 AM;AdnanChoudhury;https://gerrit.hyperledger.org/r/#/c/28993/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer should not panic when the channel is updated to higher capabilities,FAB-13931,37205,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,baohua,baohua,29/Jan/19 8:56 AM,23/Jan/20 7:32 AM,28/Oct/23 3:04 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,0,stale-item,,,,"If the channel capabilities are updated to a over-high version, the peer should leave the channel or report errors, at the same time, keep processing with other normal channels, instead of simply panic;.",,baohua,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13580,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009c7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Fix misspelling of ""commerical""",FAB-13932,37206,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,diizuka,diizuka,diizuka,29/Jan/19 9:18 AM,30/Jan/19 5:06 AM,28/Oct/23 3:04 AM,30/Jan/19 5:06 AM,v1.0.0,v1.1.0,v1.2.0,v1.3.0,v1.4.0,v2.0.0,,,,fabric-docs,,,,,0,,,,,"Fix misspelling of ""commerical"" to “commercial”",,diizuka,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009cf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),diizuka,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Jan/19 5:06 AM;sykesm;[~diizuka], interested in picking up FAB-13948?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix misspellings ,FAB-13933,37209,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,diizuka,diizuka,diizuka,29/Jan/19 11:16 AM,26/Feb/19 3:10 AM,28/Oct/23 3:04 AM,26/Feb/19 3:10 AM,v1.4.0,,,,,v2.0.0,,,,fabric-samples,,,,,0,,,,,"Fix misspellings of ""Prerequesites"" to ""Prerequisites"",
and ""prinicpal"" to ""principal""
",,diizuka,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009d3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),diizuka,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add `GinkgoRecover` to go routines in etcdraft_reconfig if necessary,FAB-13934,37210,36295,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,guoger,guoger,guoger,29/Jan/19 1:03 PM,03/Mar/19 9:58 PM,28/Oct/23 3:04 AM,31/Jan/19 11:47 PM,v2.0.0,,,,,v2.0.0,,,,fabric-orderer,,,,,0,,,,,"To make test failure more debuggable, {{GinkgoRecover}} should be added when necessary.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009db:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Jan/19 2:04 PM;guoger;https://gerrit.hyperledger.org/r/c/28998/1;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Typo in title,FAB-13935,37211,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,rootDistress,rootDistress,rootDistress,29/Jan/19 3:15 PM,23/Jan/20 7:29 AM,28/Oct/23 3:04 AM,23/Jan/20 7:29 AM,,,,,,,,,,,,,,,0,stale-item,,,,"Title of [Membership|https://github.com/hyperledger/fabric/blob/release-1.3/docs/source/membership/membership.md] had typo leading to unintended Markdown display.",,ankur.walia,rootDistress,sykesm,urvashikishnani,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009dj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ankur.walia,rootDistress,sykesm,urvashikishnani,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:29 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support for multiple token owner types,FAB-13936,37213,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bur,angelo.decaro,angelo.decaro,29/Jan/19 4:58 PM,03/Dec/19 3:05 AM,28/Oct/23 3:04 AM,21/Feb/19 6:34 PM,,,,,,,,,,fabric-token,,,,,0,fabtoken,,,,"Currently, the owner field is meant to contain a serialised MSP identity. In the future, we will support additional type of identities like a chiancode identity or MSP Owner Identifier. 

The goal of this story is to introduce an additional data structure to describe the different types of identities an owner field can contain",,angelo.decaro,bur,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i009dz:",,,,Yes,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,bur,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Jan/19 8:11 PM;bur;https://gerrit.hyperledger.org/r/#/c/29021/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove tokenTx key from token RWSet,FAB-13937,37214,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,29/Jan/19 5:03 PM,03/Dec/19 3:05 AM,28/Oct/23 3:04 AM,08/Feb/19 7:57 PM,,,,,,,,,,fabric-token,,,,,0,,,,,"Currently, the token transaction processor adds always a key prefixed with *tokenTx* to check for transaction uniqueness. This is not needed cause this check is already performed at validation time.",,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i009e7:",,,,No,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Jan/19 10:15 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/29003/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
FabToken Tx Processor does not propagate InvalidTxError,FAB-13939,37217,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,29/Jan/19 6:31 PM,03/Dec/19 3:05 AM,28/Oct/23 3:04 AM,30/Jan/19 11:27 PM,,,,,,,,,,fabric-token,,,,,0,,,,,"InvalidTxError errors are used at committing time to signal that a transaction should be marked as invalid. If these errors are not propagated then the committer treats them as fatal errors.

Currently, FabToken Tx Processor does not propagate InvalidTxError. ",,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i009ev:",,,,No,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Jan/19 6:44 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/28999/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename token ledger namespace to fabtoken,FAB-13940,37218,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bur,angelo.decaro,angelo.decaro,29/Jan/19 6:47 PM,03/Dec/19 3:05 AM,28/Oct/23 3:04 AM,06/Feb/19 10:00 PM,,,,,,,,,,fabric-token,,,,,0,,,,,"Currently, the token ledger namespace is set to *tms*. To goal of this story is to make it more readable and rename it to *fabtoken*.

The system must ensure that no chaincode can be deployed with that name.

LSCC is responsible to check if a chaincode name is valid or not. 

Ideas:
 # -add chaincode.name == ""fabtoken"" to lscc. Would be better to access const namespace located in token.namespace but this introduces an import to lscc. Bad idea.-
 # -More general, add a method like isReservedName(chaincode.name)bool that is called when a new chaincode is deployed. lscc can maintain a list of reserved chaincode names.- 
 # -We can introduce a system chaincode called fabtoken. Maybe this sys chaincode can also be used to enable/disable token functionality at a peer?!-
 # Instead of using ""fabtoken"" we can use an invalid chaincode name, such as ""_fabtoken"". That way we do not get a namespace conflict, however, maybe this violates namespace conventions

 

Solution: Use reserved namespace FAB-11308. Reserved namespaces are denoted with ""_"" prefix, for example ""_lifecycle"". See [FAB-13850|https://gerrit.hyperledger.org/r/#/c/28931/]",,angelo.decaro,bur,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i009f3:",,,,No,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,bur,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Feb/19 6:30 PM;bur;https://gerrit.hyperledger.org/r/#/c/29102/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add more unit tests for etcdraft/storage.go,FAB-13941,37221,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,conanoc,guoger,guoger,29/Jan/19 7:50 PM,22/Jan/20 1:10 AM,28/Oct/23 3:04 AM,22/Jan/20 1:10 AM,,,,,,Future,,,,fabric-orderer,,,,,0,help-wanted,ipm,raft,,"coverage is now ~74%

 

Also, we should [refactor etcd/raft file purging with {{filepath.Walk}}|https://gerrit.hyperledger.org/r/c/28850/11/orderer/consensus/etcdraft/storage.go#285]",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00n2e:ar",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Removing MemoryPool,FAB-13942,37222,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,29/Jan/19 9:40 PM,03/Dec/19 3:05 AM,28/Oct/23 3:04 AM,30/Jan/19 11:30 PM,,,,,,,,,,fabric-token,,,,,0,fabtoken,,,,The MemoryPool was used for testing purposes but it has been replaced by mocks.,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i009fz:",,,,No,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Jan/19 9:45 PM;angelo.decaro;[https://gerrit.hyperledger.org/r/#/c/29001/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
`make clean && make peer` does not work,FAB-13944,37226,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Invalid: Works as Expected,,sykesm,sykesm,30/Jan/19 1:37 AM,09/May/19 2:34 AM,28/Oct/23 3:04 AM,09/May/19 2:34 AM,,,,,,,,,,fabric-build,,,,,0,ipm,ipm-planned,,,"{code}
$ make clean && make peer
docker images --quiet --filter=reference='hyperledger/fabric-peer:amd64-2.0.0-snapshot-*' | xargs docker rmi -f
docker images --quiet --filter=reference='hyperledger/fabric-orderer:amd64-2.0.0-snapshot-*' | xargs docker rmi -f
docker images --quiet --filter=reference='hyperledger/fabric-baseos:amd64-2.0.0-snapshot-*' | xargs docker rmi -f
docker images --quiet --filter=reference='hyperledger/fabric-ccenv:amd64-2.0.0-snapshot-*' | xargs docker rmi -f
docker images --quiet --filter=reference='hyperledger/fabric-buildenv:amd64-2.0.0-snapshot-*' | xargs docker rmi -f
docker images --quiet --filter=reference='hyperledger/fabric-tools:amd64-2.0.0-snapshot-*' | xargs docker rmi -f
make: *** No rule to make target `.build/bin/peer', needed by `peer'.  Stop.
{code}

Basically, every target listed in the header of the Makefile should be usable after a clean or removed from the list.

{code}
# This makefile defines the following targets
#
#   - all (default) - builds all targets and runs all non-integration tests/checks
#   - checks - runs all non-integration tests/checks
#   - desk-check - runs linters and verify to test changed packages
#   - configtxgen - builds a native configtxgen binary
#   - configtxlator - builds a native configtxlator binary
#   - cryptogen  -  builds a native cryptogen binary
#   - idemixgen  -  builds a native idemixgen binary
#   - peer - builds a native fabric peer binary
#   - orderer - builds a native fabric orderer binary
#   - release - builds release packages for the host platform
#   - release-all - builds release packages for all target platforms
#   - unit-test - runs the go-test based unit tests
#   - verify - runs unit tests for only the changed package tree
#   - profile - runs unit tests for all packages in coverprofile mode (slow)
#   - test-cmd - generates a ""go test"" string suitable for manual customization
#   - gotools - installs go tools like golint
#   - linter - runs all code checks
#   - check-deps - check for vendored dependencies that are no longer used
#   - license - checks go source files for Apache license header
#   - native - ensures all native binaries are available
#   - docker[-clean] - ensures all docker images are available[/cleaned]
#   - docker-list - generates a list of docker images that 'make docker' produces
#   - peer-docker[-clean] - ensures the peer container is available[/cleaned]
#   - orderer-docker[-clean] - ensures the orderer container is available[/cleaned]
#   - tools-docker[-clean] - ensures the tools container is available[/cleaned]
#   - protos - generate all protobuf artifacts based on .proto files
#   - clean - cleans the build area
#   - clean-all - superset of 'clean' that also removes persistent state
#   - dist-clean - clean release packages for all target platforms
#   - unit-test-clean - cleans unit test state (particularly from docker)
#   - basic-checks - performs basic checks like license, spelling, trailing spaces and linter
#   - enable_ci_only_tests - triggers unit-tests in downstream jobs. Applicable only for CI not to
#     use in the local machine.
#   - docker-thirdparty - pulls thirdparty images (kafka,zookeeper,couchdb)
#   - docker-tag-latest - re-tags the images made by 'make docker' with the :latest tag
#   - docker-tag-stable - re-tags the images made by 'make docker' with the :stable tag
#   - help-docs - generate the command reference docs
{code}",,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00eov:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Feb/19 6:58 AM;sykesm;As usual, none of the pre-canned resolutions are appropriate.

This was fixed in FAB-13792 where the vet checks were added.;;;","13/Feb/19 6:59 AM;sykesm;Updated the wrong bug. :(;;;","16/Mar/19 4:04 PM;mastersingh24;[~sykesm] - Is this still an issue?  I'm able to run `make clean && make peer` on master;;;","19/Apr/19 8:52 PM;mastersingh24;Seems to be working on master;;;","09/May/19 2:34 AM;sykesm;agreed - seems to work;;;",,,,,,,,,,,,,,,,,,,,,,,,
Create profile management commands,FAB-13945,37227,36696,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bpbuch,bpbuch,bpbuch,30/Jan/19 1:44 AM,07/Mar/19 1:57 AM,28/Oct/23 3:04 AM,07/Mar/19 1:57 AM,,,,,,,,,,,,,,,0,,,,,Configuration details should be stored in the home directory for a better user experience.  Multiple different sets of configurations should be able to be stored.,,bpbuch,,,,,,,,,,,,,,,,,,FAB-13891,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009gv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/19 5:09 AM;bpbuch;https://gerrit.hyperledger.org/r/#/c/29423/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
nwo OrdererAdminSession uses hard-coded orderer MSP ID,FAB-13946,37228,36524,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,30/Jan/19 1:47 AM,30/Jan/19 8:07 AM,28/Oct/23 3:04 AM,30/Jan/19 8:07 AM,,,,,,,,,,,,,,,0,,,,,,,kchristidis,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009h3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kchristidis,wlahti,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Jan/19 3:51 AM;wlahti;https://gerrit.hyperledger.org/r/c/29012/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix highlighted spelling errors in the code,FAB-13948,37233,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,nekia,sykesm,sykesm,30/Jan/19 4:37 AM,06/Feb/19 1:46 PM,28/Oct/23 3:04 AM,06/Feb/19 1:46 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,help-wanted,,,,"{code}
The following files are have spelling errors:
common/configtx/validator.go:78:14: ""accomodate"" is a misspelling of ""accommodate""
core/endorser/endorser_test.go:96:3: ""initalize"" is a misspelling of ""initialize""
core/ledger/kvledger/txmgmt/validator/valimpl/helper_test.go:188:54: ""precendence"" is a misspelling of ""precedence""
integration/e2e/acl_test.go:121:52: ""satisifed"" is a misspelling of ""satisfied""
integration/e2e/acl_test.go:148:44: ""satisifed"" is a misspelling of ""satisfied""
integration/discovery/discovery_test.go:111:88: ""satisy"" is a misspelling of ""satisfy""
orderer/common/msgprocessor/standardchannel.go:113:13: ""negligable"" is a misspelling of ""negligible""
orderer/common/msgprocessor/systemchannel.go:121:13: ""negligable"" is a misspelling of ""negligible""
{code}",,denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009hz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Feb/19 2:57 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/29020/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make DeserializeMetadata return sentinal,FAB-13949,37237,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,30/Jan/19 6:06 AM,20/Feb/19 2:30 PM,28/Oct/23 3:04 AM,20/Feb/19 2:30 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,"Today, DeserializeMetadata accepts a parameter whether to return an
error on missing or not.  This is an odd pattern, and it should really
return a sentinal indicating whether or not the metadata was found.
",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i009iv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Require metadata as input to deserialize,FAB-13950,37238,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,30/Jan/19 6:08 AM,28/Feb/19 1:50 AM,28/Oct/23 3:04 AM,28/Feb/19 1:50 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,"Multiple places in the consumption of the serialization code, the caller
must first deserialize the metadata to either check for type or check
for existence before calling deserialize.  It makes more sense to simply
require the metadata as a parameter to prevent redundant calls and
generally simplify the callers.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i009j3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Bulk fix of CR comments,FAB-13951,37239,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,30/Jan/19 6:10 AM,08/Mar/19 2:50 AM,28/Oct/23 3:04 AM,08/Mar/19 2:50 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,Aggregate issue to fix some comments from previous CRs.,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i009jb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cleanup artifacts related to hosting java chaincode from the fabric repository,FAB-13952,37240,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,btl5037,sykesm,sykesm,30/Jan/19 6:19 AM,26/Feb/19 3:21 AM,28/Oct/23 3:04 AM,26/Feb/19 3:21 AM,,,,,,v2.0.0,,,,,,,,,0,help-wanted,hygiene,ipm,ipm-planned,"Examples:

- settings.gradle
- reference to chaincode/shim/java in scripts/compile_protos.sh
- whatever else we can find

This does not mean to remove support for Java chaincode - just the remnants of building some of it in fabric.",,btl5037,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00930:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Feb/19 1:48 AM;btl5037;https://gerrit.hyperledger.org/r/c/29440/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
store_impl.go:Prepare error message typo,FAB-13955,37230,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,berendeanicolae,berendeanicolae,berendeanicolae,30/Jan/19 3:40 AM,18/Feb/19 11:55 PM,28/Oct/23 3:04 AM,18/Feb/19 11:55 PM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,Documentation,,,,"Error message ""Expected block number=%d, recived block number=%d"" contains a typo",,berendeanicolae,,,,,,,,,,1800,1800,,0%,1800,1800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009hj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),berendeanicolae,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Jan/19 9:52 PM;berendeanicolae;I created a commit [https://gerrit.hyperledger.org/r/#/c/29013/] for this issue;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Token protobuf clean up,FAB-13956,37248,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,KaoutarEL,bur,bur,30/Jan/19 8:20 PM,12/Mar/19 5:52 PM,28/Oct/23 3:04 AM,12/Mar/19 5:52 PM,,,,,,,,,,,,,,,0,fabtoken,,,,"Token protobufs need some love.

For instance, in PlainSwapIntention, comments are not correct and variable token_type is used whereas everywhere else we use just type.

Also protobuf related should be fixed, for instance, use proto.Equal instead of deepEqual when testing proto messages.",,bur,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i009lb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bur,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix debug and error message,FAB-13957,37249,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,shimpei,shimpei,shimpei,30/Jan/19 8:37 PM,08/Mar/19 7:09 PM,28/Oct/23 3:04 AM,08/Mar/19 7:09 PM,v1.4.0,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,"Fix debug and error messages in core/chaincode/shim/handler.go

1. Debug Message (notice sending ChaincodeMessage in handleDelState())
""[%s] Sending %s"", shorttxid(msg.Txid), pb.ChaincodeMessage_GET_STATE
-> ""[%s] Sending %s"", shorttxid(msg.Txid), pb.ChaincodeMessage_DEL_STATE

2. Error Message (sending ChaincodeMessage failed)
There are following 3 pattern messages.
(1) ""[%s] error sending %s"", shorttxid(msg.Txid), pb.ChaincodeMessage_XXXXXX
(2) ""[%s] error sending XXXXXX"", shorttxid(msg.Txid)
(3) ""[%s] error sending XXXXXX %s"", shorttxid(msg.Txid), pb.ChaincodeMessage_XXXXXX
(XXXXXX is a ChaincodeMessage type)
The same format should be used.",,shimpei,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009lj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),shimpei,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Green Path: Set up channel using old chaincode lifecycle, then upgrade channel/chaincode to use new lifecycle",FAB-13958,37258,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,30/Jan/19 11:40 PM,03/Apr/19 8:51 AM,28/Oct/23 3:04 AM,03/Apr/19 8:51 AM,,,,,,,,,,,,,,,0,,,,,"Set up channel using old chaincode lifecycle, then upgrade channel/chaincode to use new lifecycle. Perform system queries on old setup and new -> should work

Be sure to turn on 2_0 capabilities.

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo
  When an admin sets up a channel

  And an admin deploys chaincode with args [""init"",""a"",""1000"",""b"",""2000""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000

  Given I want to use the new chaincode lifecycle
  When an admin builds chaincode at path ""github.com/hyperledger/fabric/examples/chaincode/go/example02/cmd"" as version ""2"" with args [""init"",""a"",""1000"",""b"",""2000""] with name ""mycc2"" on all peers
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When the organization admins approve the upgraded chaincode package on all peers
  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000
{code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009mv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"Final steps to get this working:
  Given I have a bootstrapped fabric network of type solo
  When an admin sets up a channel
  And an admin deploys chaincode with args [""init"",""a"",""1000"",""b"",""2000""]
  And I wait up to ""10"" seconds for instantiation to complete
  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  And I wait ""5"" seconds
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 990

  # Upgrade the channel!!!
  Given I want to use the new chaincode lifecycle
  When an admin updates the ""Application"" capabilities in the channel config to version ""V2_0""
  When all organization admins sign the updated channel config
  When the admin updates the channel using peer ""peer0.org1.example.com""
  When an admin fetches genesis information using peer ""peer0.org1.example.com""
  Then the config block file is fetched from peer ""peer0.org1.example.com""
  Then the updated config block contains V2_0

  When an admin packages chaincode at path ""github.com/hyperledger/fabric-test/chaincodes/example02/go/cmd"" as version ""2"" with name ""mycc2""
  And the organization admins install the chaincode package on all peers
  Then a hash value is received on all peers
  When each organization admin approves the chaincode package with policy ""OR ('org1.example.com.member','org2.example.com.member')""
  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode named ""mycc2"" with args [""init"",""a"",""1000"",""b"",""2000""] on both orgs
  When a user queries on the chaincode named ""mycc2"" with args [""query"",""a""]
  Then a user receives a success response of 1000
  When a user invokes on the chaincode named ""mycc2"" with args [""invoke"",""a"",""b"",""10""]
  And I wait ""5"" seconds
  When a user queries on the chaincode named ""mycc2"" with args [""query"",""a""]
  Then a user receives a success response of 990",Unset,,(Please add usage information),latitiah,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"08/Feb/19 6:27 AM;latitiah;[https://gerrit.hyperledger.org/r/#/c/28928/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Negative Test: An admin from an org does not install chaincode package,FAB-13959,37259,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,30/Jan/19 11:42 PM,03/Apr/19 8:51 AM,28/Oct/23 3:04 AM,03/Apr/19 8:51 AM,,,,,,,,,,,,,,,0,,,,,"An admin from an org does not install - peers from that org can't execute (same as if there was no chaincode installed on a channel)

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin builds chaincode at path ""github.com/hyperledger/fabric/examples/chaincode/go/example02/cmd"" as version ""2"" with args [""init"",""a"",""1000"",""b"",""2000""] with name ""mycc2"" on all peers
  And an admin installs the built chaincode package on ""peer0.org1.example.com""
  And an admin installs the built chaincode package on ""peer1.org1.example.com""
  # Note install does not take place on org2 peers
  Then a hash value is received on ""peer0.org1.example.com""
  And a hash value is received on ""peer1.org1.example.com""
  When the organization admins approve the upgraded chaincode package on all peers
  Then an error ""<Error Message>"" is received from ""peer0.org2.example.com""
  And an error ""<Error Message>"" is received from ""peer1.org2.example.com""
{code}",,jyellick,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009n3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,Unset,,(Please add usage information),jyellick,latitiah,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"01/Feb/19 3:50 AM;jyellick;Admins are allowed to approve chaincodes even though they are not installed.  The error should come when the chaincode is queried/invoked on the peer missing the chaincode after the definition commits.;;;","18/Feb/19 11:24 PM;latitiah;The plan was to add these tests to ginkgo-based integration tests. Due to timing constraints, the tests have been added to the fabric-test behave-based tests: https://gerrit.hyperledger.org/r/#/c/29351/

Note the error occurs before the chaincode is queried/invoked.  It occurs when the chaincode is being committed.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Negative Path: Using the wrong hash in approveformyorg call,FAB-13960,37260,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,30/Jan/19 11:43 PM,03/Apr/19 8:51 AM,28/Oct/23 3:04 AM,03/Apr/19 8:51 AM,,,,,,,,,,,,,,,0,,,,,"Given a certain hash is returned from the install step, the admin then uses a different hash that is used for the define - should error at approveformyorg

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin builds chaincode at path ""github.com/hyperledger/fabric/examples/chaincode/go/example02/cmd"" as version ""2"" with args [""init"",""a"",""1000"",""b"",""2000""] with name ""mycc2"" on all peers
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When an admin approves the upgraded chaincode package on peer ""peer0.org1.example.com"" using hash ""1234567890""
  Then an error ""<Error Message>"" is received from ""peer0.org1.example.com""
{code}
",,jyellick,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009nb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"Steps executed:
{code}  Given I changed the ""Application"" capability to version ""V2_0""
  And I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel
  And an admin packages a chaincode
  And the organization admins install the chaincode package on all peers
  Then a hash value is received on all peers
  When an admin approves the chaincode package on peer ""peer0.org1.example.com"" using hash ""1234567890"" with policy ""OR ('org1.example.com.member','org2.example.com.member')""
  And an admin commits the chaincode package to the channel
  Then a user receives a response containing 'Error: could not assemble transaction: ProposalResponsePayloads do not match' from ""peer0.org1.example.com""{code}",Unset,,(Please add usage information),jyellick,latitiah,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,true,"01/Feb/19 3:51 AM;jyellick;The installed version of the chaincode should have no impact on the approve/commit steps.

Instead, if the approval is done for a different hash than the commit, the commit should return an error on endorsement from the peer.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Negative Path: Using ""newlifecycle"" flag with the package and install command with mismatched packages",FAB-13961,37262,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,30/Jan/19 11:57 PM,03/Apr/19 8:51 AM,28/Oct/23 3:04 AM,03/Apr/19 8:51 AM,,,,,,,,,,,,,,,0,,,,,"Package one chaincode tar ball, install a non-existent package - expect “not found” error from install

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel

  And an admin builds a chaincode package named ""mycc.tar""
  And an admin installs the chaincode package ""mycc"" on ""peer0.org1.example.com""
  Then an error containing ""no found"" is received from ""peer0.org1.example.com""
{code}",,jyellick,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009nr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"Executed steps:
{code}  Given I changed the ""Application"" capability to version ""V2_0""
  And I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel
  And an admin packages a chaincode

  And the organization admins install the built ""mycc2"" chaincode package on all peers
  Then a user receives a response containing 'no such file or directory' from ""peer0.org1.example.com""{code}",Unset,,(Please add usage information),jyellick,latitiah,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,true,"01/Feb/19 3:53 AM;jyellick;Scenario seems fine, though the error would be from the CLI, not from the peer, as the CLI sends the package to the peer during the install command.;;;","18/Feb/19 11:30 PM;latitiah;The plan was to add these tests to ginkgo-based integration tests. Due to timing constraints, the tests have been added to the fabric-test behave-based tests: https://gerrit.hyperledger.org/r/#/c/29354/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Negative Test: An admin from an org does not approve the chaincode definition,FAB-13962,37263,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,latitiah,latitiah,30/Jan/19 11:59 PM,08/Jun/19 8:53 AM,28/Oct/23 3:04 AM,08/Jun/19 8:53 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,"1 admin from an org does not perform the approval for the organization - peers from that org can't execute (invoke init call - or any other chaincode invoke - will fail)

{code}
  Given I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel

  And an admin builds a chaincode package
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When an admin approves the chaincode package on peer ""peer0.org1.example.com""

  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""] on ""peer1.org1.example.com""
  When a user queries on the chaincode with args [""query"",""a""] on ""peer1.org1.example.com""
  Then a user receives a success response of 1000 from ""peer1.org1.example.com""

  When a user queries on the chaincode with args [""query"",""a""] on ""peer0.org2.example.com""
  Then a user receives an error response containing ""<Error Message>"" from ""peer0.org2.example.com""
{code}",,jyellick,latitiah,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rq:l",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,latitiah,wlahti,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Feb/19 3:55 AM;jyellick;This will be a hard one to test with only two orgs.  You need a majority of orgs to approve the definition, so to leave one without the definition, you would have to get approve from 2/3, only getting approval from 1/2 in this scenario I would not expect to work.;;;","08/Jun/19 3:14 AM;wlahti;https://gerrit.hyperledger.org/r/c/fabric/+/31767;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Negative Test: An admin from an org approves a different the chaincode definition,FAB-13963,37264,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,31/Jan/19 12:00 AM,03/Apr/19 8:51 AM,28/Oct/23 3:04 AM,03/Apr/19 8:51 AM,,,,,,,,,,,,,,,0,,,,,"1 admin from an org defines a different chaincode definition than what was agreed upon - that org can't execute -> the error is seen on the invoke init

*Proposed Steps:*
{code:java}
  Given I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel

  And an admin builds a chaincode package
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When an admin approves the chaincode package using policy ""<Some different policy>"" on peer ""peer0.org1.example.com""
  When an admin approves the chaincode package on peer ""peer0.org2.example.com""
  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""] on ""peer0.org1.example.com""
  Then a user receives an error response containing ""chaincode definition not agreed to by this org"" from ""peer0.org1.example.com""
{code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009o7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"Final test
{code}  Given I changed the ""Application"" capability to version ""V2_0""
  And I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel
  And an admin packages a chaincode
  And the organization admins install the chaincode package on all peers
  Then a hash value is received on all peers
  When each organization admin approves the chaincode package with policy ""AND ('org1.example.com.member','org2.example.com.member')"" on peer ""peer0.org1.example.com""
  When each organization admin approves the chaincode package with policy ""OR ('org1.example.com.member','org2.example.com.member')"" on peer ""peer0.org2.example.com""
  And an admin commits the chaincode package to the channel with policy ""AND ('org1.example.com.member','org2.example.com.member')"" on peer ""peer0.org1.example.com""
  Then a user receives a response containing 'chaincode definition not agreed to by this org' from ""peer0.org1.example.com""{code}",Unset,,(Please add usage information),latitiah,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,true,"18/Feb/19 11:29 PM;latitiah;The plan was to add these tests to ginkgo-based integration tests. Due to timing constraints, the tests have been added to the fabric-test behave-based tests: https://gerrit.hyperledger.org/r/#/c/29355/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Negative Test: All admins from different orgs approve different the chaincode definitions,FAB-13964,37265,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,31/Jan/19 12:01 AM,03/Apr/19 8:51 AM,28/Oct/23 3:04 AM,03/Apr/19 8:51 AM,,,,,,,,,,,,,,,0,,,,,"All orgs have different chaincode definitions - no one can execute (error when the define for the channel is performed)

Proposed Steps:
{code}
  Given I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel

  And an admin builds a chaincode package
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When an admin approves the chaincode package using policy ""<Some different policy>"" on peer ""peer0.org1.example.com""
  When an admin approves the chaincode package using policy ""<Some different policy>"" on peer ""peer0.org1.example.com""

  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""] on ""peer0.org1.example.com""
  Then a user receives an error response containing ""<Error Message>"" from ""peer0.org1.example.com""
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""] on ""peer0.org2.example.com""
  Then a user receives an error response containing ""<Error Message>"" from ""peer0.org2.example.com""
{code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009of:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Green Path: Install same chaincode on different channels with different chaincode definitions,FAB-13965,37267,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,31/Jan/19 12:03 AM,05/Apr/19 10:02 AM,28/Oct/23 3:04 AM,03/Apr/19 8:51 AM,,,,,,,,,,,,,,,0,,,,,"Install same chaincode on peers with 2 different channels. Define channels with different chaincode definitions. Should be able to execute on both channels successfully

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel named ""channel1""
  When an admin sets up a channel named ""channel2""

  And an admin builds a chaincode package
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When the organization admins approve the chaincode package for channel ""channel1"" using policy ""<Some policy>"" on all peers
  When the organization admins approve the chaincode package for channel ""channel2"" on all peers
  And an admin commits the chaincode package to ""channel1"" channel
  And an admin commits the chaincode package to ""channel2"" channel

  And a user invokes on the channel ""channel1"" with args [""init"",""a"",""1000"",""b"",""2000""]
  And a user invokes on the channel ""channel2"" with args [""init"",""a"",""100"",""b"",""200""]

  When a user queries on the channel ""channel1"" with args [""query"",""a""]
  Then a user receives a success response of 1000

  When a user queries on the channel ""channel2"" with args [""query"",""b""]
  Then a user receives a success response of 200
{code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009ov:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,This test was added to the fabric ginkgo-based integration test suite.,Unset,,(Please add usage information),latitiah,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"15/Feb/19 4:11 AM;latitiah;This test is being written and executed using the ginkgo-based integration framework.;;;","18/Feb/19 11:22 PM;latitiah;The plan was to add these tests to ginkgo-based integration tests. Due to timing constraints, the tests have been added to the fabric-test behave-based tests: https://gerrit.hyperledger.org/r/29364;;;","19/Feb/19 12:57 AM;latitiah;The steps executed are as follows:
{code}  Given I changed the ""Application"" capability to version ""V2_0""
  And I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel named ""channel1""
  When an admin sets up a channel named ""channel2""

  And an admin packages a chaincode
  And the organization admins install the chaincode package on all peers
  Then a hash value is received on all peers

  When each organization admin approves the chaincode package on ""channel1"" with policy ""OR ('org1.example.com.member','org2.example.com.member')""
  And an admin commits the chaincode package to the channel ""channel1""
  And I wait up to ""10"" seconds for the chaincode to be committed
  And a user invokes on the channel ""channel1"" with args [""init"",""a"",""100"",""b"",""200""]
  And I wait up to ""30"" seconds for deploy to complete

  When each organization admin approves the chaincode package on ""channel2"" with policy ""AND ('org1.example.com.member','org2.example.com.member')""
  And an admin commits the chaincode package to the channel ""channel2""
  And I wait up to ""10"" seconds for the chaincode to be committed
  And a user invokes on the channel ""channel2"" with args [""init"",""a"",""1000"",""b"",""2000""]
  And I wait up to ""30"" seconds for deploy to complete

  When a user queries on the channel ""channel1"" with args [""query"",""a""]
  Then a user receives a success response of 100

  When a user queries on the channel ""channel2"" with args [""query"",""b""]
  Then a user receives a success response of 2000{code};;;","23/Feb/19 3:31 AM;latitiah;fabric CR: https://gerrit.hyperledger.org/r/29491;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Negative Path: Different orgs use different version label during upgrade (org approval step),FAB-13966,37268,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,31/Jan/19 12:07 AM,03/Apr/19 8:51 AM,28/Oct/23 3:04 AM,03/Apr/19 8:51 AM,,,,,,,,,,,,,,,0,,,,,"Upgrade different chaincode versions on same channel. 

Org1 executes “peer chaincode defineformyorg --channelID mycc --name mychan --version 1.5 --hash 1234567890abcdef --sequence 1 --policy All” 

Org2 executes “peer chaincode defineformyorg --channelID mycc --name mychan --version 2.0 --hash 1234567890abcdef --sequence 1 --policy All” - should error on defineformychannel.

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel

  And an admin builds a chaincode package
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When the organization admins approve the chaincode package on all peers
  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000

  When an admin builds chaincode at path ""github.com/hyperledger/fabric/examples/chaincode/go/example02/cmd"" as version ""2"" with args [""init"",""a"",""1000"",""b"",""2000""] with name ""mycc2"" on all peers
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When an admin approves the upgraded to version ""1.5"" chaincode package on peer ""peer0.org1.example.com""
  When an admins approve the upgraded to version ""2.0"" chaincode package on peer ""peer0.org2.example.com""
  And an admin commits the chaincode package to the channel
  Then an admin receives an error response containing ""<Error Message>""
{code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009p3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Polling, instead of waiting within `AfterEach`",FAB-13967,37269,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,31/Jan/19 12:09 AM,03/Mar/19 9:58 PM,28/Oct/23 3:04 AM,31/Jan/19 11:47 PM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,,,,,"When tear down a test, we should be polling, instead of waiting. Otherwise, if an assertion fails in test body, *and* something goes wrong in teardown, which causes test to hang till timeout, the coredump will conceal the actual assertion failure.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009pb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jan/19 12:38 AM;guoger;https://gerrit.hyperledger.org/r/c/29034/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Green Path: Upgrade chaincode for different orgs, but committing the chaincode definition with older version of chaincode",FAB-13968,37270,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,31/Jan/19 12:10 AM,03/Apr/19 8:51 AM,28/Oct/23 3:04 AM,03/Apr/19 8:51 AM,,,,,,,,,,,,,,,0,,,,,"Add new version of chaincode to peers, define channel using old version

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel

  And an admin builds a chaincode package
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When the organization admins approve the chaincode package on all peers
  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000

  When an admin builds chaincode at path ""github.com/hyperledger/fabric/examples/chaincode/go/example02/cmd"" as version ""2"" with args [""init"",""a"",""1000"",""b"",""2000""] with name ""mycc2"" on all peers
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers

  # Note the approval below is for the originally installed chaincode
  # Simulates the installation of an upgrade, but no one wants to use it
  #    at this time. 
  When the organization admins approve the upgraded to version ""0"" chaincode package on all peers
  And an admin commits the version ""0"" chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000
{code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009pj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,true,"18/Feb/19 11:25 PM;latitiah;https://gerrit.hyperledger.org/r/#/c/29352/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Green Path: Reuse the same sequence number,FAB-13969,37271,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,31/Jan/19 12:26 AM,03/Apr/19 8:51 AM,28/Oct/23 3:04 AM,03/Apr/19 8:51 AM,,,,,,,,,,,,,,,0,,,,,"When defining chaincode for an Org (approveformyorg), when sequence number stays the same, verify that “vote” is not counted when using this multiple times.

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel

  And an admin builds a chaincode package
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When the organization admins approve the chaincode package on all peers
  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000

  When an admin builds chaincode at path ""github.com/hyperledger/fabric/examples/chaincode/go/example02/cmd"" as version ""2"" with args [""init"",""a"",""1000"",""b"",""2000""] with name ""mycc2"" on all peers
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers

  When an admin approves the upgraded chaincode package using sequence ""0"" on peer ""peer0.org1.example.com""
  When an admin approves the upgraded chaincode package on peer ""peer0.org2.example.com""
  When the organization admins approve the upgraded chaincode package on all peers
  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""] on ""peer0.org1.example.com""
  Then a user receives an error response containing ""<Error Message>""
{code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009pr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Negative Path: 2 Different org admins perform the commitchaincodedefinition,FAB-13970,37272,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,31/Jan/19 12:27 AM,03/Apr/19 8:51 AM,28/Oct/23 3:04 AM,03/Apr/19 8:51 AM,,,,,,,,,,,,,,,0,,,,,"Have 2 org admins perform commitchaincodedefinition. There should be a “already defined” message.

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel

  And an admin builds a chaincode package
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When the organization admins approve the chaincode package on all peers
  And an admin commits the chaincode package to the channel on peer ""peer0.org1.example.com""
  And an admin commits the chaincode package to the channel on peer ""peer0.org2.example.com""
  Then a user receives an error response containing ""<Some already defined message>""
{code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009pz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Green Path: Adding a new org to a channel,FAB-13971,37273,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,31/Jan/19 12:29 AM,03/Apr/19 8:51 AM,28/Oct/23 3:04 AM,03/Apr/19 8:51 AM,,,,,,,,,,,,,,,0,,,,,"An org is a late arrival: new org arrives, defineformyorg for all orgs, then defineformychannel from any org

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel

  And an admin builds a chaincode package
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When the organization admins approve the chaincode package on all peers
  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000

  When an admin adds an organization to the channel config
  # Assume channel config file is distributed out of band
  And all organization admins sign the updated channel config

  # Sequence number is incremented in next step since change to channel config
  When the organization admins approve the upgraded chaincode package on all peers
  And an admin commits the chaincode package to the channel

  When an admin fetches genesis information using peer ""peer0.org1.example.com""
  Then the config block file is fetched from peer ""peer0.org1.example.com""
  Then the updated config block contains Org3ExampleCom

  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 990

  When the peers from the added organization are added to the network

  When an admin fetches genesis information at block 0 using peer ""peer0.org3.example.com""
  When an admin makes peer ""peer0.org3.example.com"" join the channel
  And an admin makes peer ""peer1.org3.example.com"" join the channel

  # Sequence number is incremented in next step since new org is joining
  And an admin installs the built chaincode package on ""peer0.org3.example.com""
  And an admin installs the built chaincode package on ""peer1.org3.example.com""
  Then a hash value is received on all peers
  When the organization admins approve the upgraded chaincode package on all peers
  And an admin commits the chaincode package to the channel

  When a user queries on the chaincode with args [""query"",""a""] from ""peer0.org3.example.com""
  Then a user receives a success response of 1000 from ""peer0.org3.example.com""
{code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009q7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"09/Feb/19 1:23 AM;latitiah;This test scenario will be executed using the fabric ginkgo-based integration tests.;;;","18/Feb/19 11:21 PM;latitiah;For now, the tests have been added to the fabric-test behave-based tests: https://gerrit.hyperledger.org/r/#/c/29350/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Green Path: Removing an org from a channel,FAB-13972,37274,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,31/Jan/19 12:32 AM,03/Apr/19 8:51 AM,28/Oct/23 3:04 AM,03/Apr/19 8:51 AM,,,,,,,,,,,,,,,0,,,,,"Given 3 orgs in a channel, remove 1 org. Verify that peers from that org should not be able to perform transactions on the channel. 

Add that org back to the channel after the removal.

This test can be a continuation of test FAB-13971

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel

  And an admin builds a chaincode package
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When the organization admins approve the chaincode package on all peers
  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000

  When an admin adds an organization to the channel config
  # Assume channel config file is distributed out of band
  And all organization admins sign the updated channel config

  # Sequence number is incremented in next step since change to channel config
  When the organization admins approve the upgraded chaincode package on all peers
  And an admin commits the chaincode package to the channel

  When an admin fetches genesis information using peer ""peer0.org1.example.com""
  Then the config block file is fetched from peer ""peer0.org1.example.com""
  Then the updated config block contains Org3ExampleCom

  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 990

  When the peers from the added organization are added to the network

  When an admin fetches genesis information at block 0 using peer ""peer0.org3.example.com""
  When an admin makes peer ""peer0.org3.example.com"" join the channel
  And an admin makes peer ""peer1.org3.example.com"" join the channel

  # Sequence number is incremented in next step since new org is joining
  And an admin installs the built chaincode package on ""peer0.org3.example.com""
  And an admin installs the built chaincode package on ""peer1.org3.example.com""
  Then a hash value is received on all peers
  When the organization admins approve the upgraded chaincode package on all peers
  And an admin commits the chaincode package to the channel

  When a user queries on the chaincode with args [""query"",""a""] from ""peer0.org3.example.com""
  Then a user receives a success response of 1000 from ""peer0.org3.example.com""

  #### End of FAB-13971
  When an admin removes ""Org2ExampleCom"" from the channel config
  # Assume channel config file is distributed out of band
  And all organization admins sign the updated channel config

  # Sequence number is incremented in next step since change to channel config
  When an admin approves the upgraded chaincode package on peer ""peer0.org1.example.com""
  When the organization admins approve the upgraded chaincode package on peer ""peer0.org3.example.com""
  And an admin commits the chaincode package to the channel

  When an admin fetches genesis information using peer ""peer0.org1.example.com""
  Then the config block file is fetched from peer ""peer0.org1.example.com""
  Then the updated config block does not contain Org2ExampleCom

  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 990

  When a user queries on the chaincode with args [""query"",""a""] from ""peer0.org2.example.com""
  Then a user receives a success response of 1000 from ""peer0.org2.example.com""
{code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009qf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Feb/19 11:21 PM;latitiah;The plan was to add these tests to ginkgo-based integration tests. Due to timing constraints, the tests have been added to the fabric-test behave-based tests: https://gerrit.hyperledger.org/r/#/c/29350/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
unit-tests coverage daily are failing because the `amd64-latest` tag is not present.,FAB-13973,37275,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sambhavdutt,sambhavdutt,sambhavdutt,31/Jan/19 12:43 AM,19/Mar/19 8:13 PM,28/Oct/23 3:04 AM,31/Jan/19 2:17 AM,v1.2.0,v1.3.0,,,,,,,,fabric-ci,,,,,0,ci-failure,,,,"The daily unit-test-coverage is failing from two runs as there is no 'amd64-latest' tag during the unit-tests.

*Intermittent:* No
*Branch:* release-1.2, release-1.3
*Platform:* x86_64
*Error Snippet:*

{code:java}
21:10:14 [33munit-tests_1  |[0m [34m2019-01-29 02:10:01.407 UTC [golang-platform] GenerateDockerBuild -> INFO 160[0m building chaincode with tags:  experimental
21:10:14 [33munit-tests_1  |[0m [31m2019-01-29 02:10:01.657 UTC [chaincode-platform] func1 -> ERRO 161[0m Failed to generate platform-specific docker build: Failed to pull hyperledger/fabric-ccenv:amd64-latest: API error (404): manifest for hyperledger/fabric-ccenv:amd64-latest not found
21:10:14 [33munit-tests_1  |[0m [31m2019-01-29 02:10:01.657 UTC [dockercontroller] deployImage -> ERRO 162[0m Error building images: Failed to generate platform-specific docker build: Failed to pull hyperledger/fabric-ccenv:amd64-latest: API error (404): manifest for hyperledger/fabric-ccenv:amd64-latest not found
{code}

*Build Logs:*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-release-1.3-x86_64/108/",,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,f26a2e2611537be4799836d293dfa0481d3bb173,Unset,No,,,"1|i009qn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jan/19 1:07 AM;sambhavdutt;https://gerrit.hyperledger.org/r/#/c/29040/

The CR has been Merged;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Green Path: An org admin should be able to recover after sending a wrong approval,FAB-13974,37276,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,31/Jan/19 12:46 AM,03/Apr/19 8:51 AM,28/Oct/23 3:04 AM,03/Apr/19 8:51 AM,,,,,,,,,,,,,,,0,,,,,"RECOVERY: Given 3 orgs, endorsement policy: needs 2 of 3, 

Org1 and Org2 defines chaincode correctly, 
Org3 defines differently; 
then call define channel -> error for org3;

call QueryDefinedChaincode to retrieve current sequence number; 

Org1 defines with correct chaincode definition (increment sequence number from what was received in QueryDefinedChaincode call), 
Org2 defines correctly (increment sequence number from what was received in QueryDefinedChaincode call), 
Org3 defines correctly (increment sequence number from what was received in QueryDefinedChaincode call) 
-> works as expected

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo with 3 organizations
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel

  And an admin builds a chaincode package
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When an admin approves the chaincode package on peer ""peer0.org1.example.com""
  When an admin approves the chaincode package on peer ""peer0.org2.example.com""
  When an admin approves the chaincode package using policy ""<Different policy>"" on peer ""peer0.org3.example.com""
  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000
  When a user queries on the chaincode with args [""query"",""a""] on ""peer1.org3.example.com""
  Then a user receives an error response containing ""<Error Message>""

  When the organization admins approve the upgraded chaincode package on all peers
  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000
  When a user queries on the chaincode with args [""query"",""a""] on ""peer1.org3.example.com""
  Then a user receives a success response of 1000 from ""peer1.org3.example.com""
{code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009qv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Negative Path: Different chaincode version used in install and approveformyorg,FAB-13975,37277,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,31/Jan/19 12:48 AM,03/Apr/19 8:51 AM,28/Oct/23 3:04 AM,03/Apr/19 8:51 AM,,,,,,,,,,,,,,,0,,,,,"Send a different version than the version used when generating the hash during the chaincode install? -> expect error

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel

  And an admin builds a chaincode package
  And the organization admins install the version ""2"" built chaincode package on all peers
  Then a user receives an error containing ""<Error Message>""
{code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009r3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Green Path: Set collections in chaincode definition (old lifecycle),FAB-13976,37278,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,31/Jan/19 12:50 AM,03/Apr/19 8:50 AM,28/Oct/23 3:04 AM,03/Apr/19 8:50 AM,,,,,,,,,,,,,,,0,,,,,(See jyellick for steps here.),,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009rb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"Same bug as test case FAB-13977 - https://jira.hyperledger.org/browse/FAB-14461 was opened.

This test now passes with the latest fixes.",Unset,,(Please add usage information),latitiah,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Green Path: Set collections in chaincode definition (new lifecycle),FAB-13977,37279,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,31/Jan/19 12:50 AM,03/Apr/19 8:50 AM,28/Oct/23 3:04 AM,03/Apr/19 8:50 AM,,,,,,,,,,,,,,,0,,,,,(See jyellick for steps here.),,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009rj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"The collection name seems to be hardcoded as ""collection1"" somewhere and does not use the name supplied in the collection config file.

This test now passes with the latest fixes.",Unset,,(Please add usage information),latitiah,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Negative Path: Use private data in chaincode with new chaincode lifecycle,FAB-13978,37280,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,latitiah,latitiah,31/Jan/19 12:52 AM,25/Apr/19 11:24 PM,28/Oct/23 3:04 AM,25/Apr/19 11:24 PM,,,,,,,,,,,,,,,0,,,,,"If private data is set for the chaincode definition for set channel with 2 orgs, but 3rd org does not have access -> org3 invokes/queries should error.

The collections name should start with __implicit_*
",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009rr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Mar/19 12:02 AM;latitiah;https://gerrit.hyperledger.org/r/#/c/29940/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Green Path: Use the Node SDK for new chaincode lifecycle,FAB-13979,37281,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,latitiah,latitiah,31/Jan/19 12:54 AM,03/Jul/19 4:13 AM,28/Oct/23 3:04 AM,03/Jul/19 4:09 AM,,,,,,,,,,,,,,,0,,,,,"SDKs: ensure calls work the same with the same workflow as with the CLI

The Node and Java SDK wrappers in the fabric-test/feature/sdk directory need to be updated to ensure that the correct parameters are being passed with the correct APIs.

It is also recommended that the approve_chaincode and commit_chaincode functions are added.

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo
  And I use the <NodeJS SDK/Java SDK> interface
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel
  And an admin builds a chaincode package
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When the organization admins approve the chaincode package on all peers
  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000
  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 990
{code}",,latitiah,scottz,,,,,,,,,,,,,,,,,FABN-669,FABJ-288,FAB-15372,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rq:o",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Apr/19 8:49 AM;latitiah;This is the NodeSDK CR that is needed in order to test this: https://gerrit.hyperledger.org/r/#/c/29240/;;;","03/Jul/19 4:08 AM;scottz;We can close this, and abandon the effort to add this new behave testcase, because the NodeSDK tests the new cc lifecycle features: all queries, install of all three chaincode lang types, approve of all with two orgs, commit of all with two orgs and then finally invoke all three. Nothing about cc upgrades or negative testcases - which is OK because those tests belong in fabric repo anyways.

   https://github.com/hyperledger/fabric-sdk-node/blob/master/test/scenario/features/chaincode_lifecycle.feature
   https://github.com/hyperledger/fabric-sdk-node/blob/master/test/scenario/features/steps/chaincode_steps.js

Note, however, Bret says as we move forward the NodeSDK 2.0 will not have support for Admin functions including Chaincode lifecycle. So we may need to revisit later.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Green Path: Use the Java SDK for new chaincode lifecycle using different chaincode language from the SDK interface,FAB-13980,37282,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,latitiah,latitiah,31/Jan/19 12:55 AM,03/Jul/19 4:14 AM,28/Oct/23 3:04 AM,03/Jul/19 4:14 AM,,,,,,,,,,,,,,,0,,,,,"SDKs: using different chaincode language from SDK interface

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo
  And I use the <NodeJS SDK/Java SDK> interface
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel
  And an admin builds a chaincode package from path ""<path>"" using lang ""<lang>""
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When the organization admins approve the chaincode package on all peers
  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000
  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  And I wait ""5"" seconds
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 990
{code}",,latitiah,scottz,,,,,,,,,,,,,,,,,FABN-669,FABJ-288,FAB-15372,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rq:s",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Apr/19 8:46 AM;latitiah;Currently, the CLI is being used when using the node and java chaincode environments in test FAB-13701;;;","03/Jul/19 4:13 AM;scottz;We can close this, and abandon the effort to add this new behave testcase, because the JavaSDK IT tests now cover new lifecycle, basic admin functions, with or without Init function, using default or own endorsement policy, example cc or private data config, cc upversion, 3 cc langs, invoke and queries.
 
https://github.com/hyperledger/fabric-sdk-java/blob/master/src/test/java/org/hyperledger/fabric/sdkintegration/End2endLifecycleIT.java#L178-L327;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Green Path: (Stretch) SDKs (and CLI) capable of returning who has approved of the chaincode definition on a channel,FAB-13981,37283,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,latitiah,latitiah,31/Jan/19 12:56 AM,07/Aug/19 4:51 AM,28/Oct/23 3:04 AM,07/Aug/19 4:51 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,"SDKs: queries for who has agreed to a definition (will this be available for CLI as well?)

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo
  And I use the <NodeJS SDK/Java SDK> interface
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel
  And an admin builds a chaincode package
  And the organization admins install the built chaincode package on all peers
  Then a hash value is received on all peers
  When the organization admins approve the chaincode package on all peers

  And an admin queries for who has approved to the chaincode definition

  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000
  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 990
{code}",,denyeart,latitiah,wlahti,,,,,,,,,,,,,,,,FABN-669,FABJ-288,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rq:zzyw",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,latitiah,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Apr/19 8:47 AM;latitiah;This may or may not be covered in the unit tests and integration tests in the NodeSDK and JavaSDK repos.;;;","29/Jul/19 10:58 PM;denyeart;[~wlahti] [~mrosen52] [~ales] Is there integration test for this now?;;;","07/Aug/19 4:49 AM;wlahti;Yes, this functionality is now available in master and is covered in the integration tests. I'll close this item.;;;","07/Aug/19 4:51 AM;wlahti;Covered by the functionality for CheckCommitReadiness as well as the enhancements to QueryChaincodeDefinition/QueryChaincodeDefinitions.;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Incorrect BASE_DOCKER_TAG architecture on s390x,FAB-13982,37208,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,inatatsu,inatatsu,29/Jan/19 10:28 AM,27/Mar/19 5:45 PM,28/Oct/23 3:04 AM,27/Mar/19 5:44 PM,,,,,,,,,,fabric-build,,,,,0,,,,,"The script {{get-docker-images.sh}} in the Hyperledger Fabric archive on the Nexus server defines {{BASE_DOCKER_TAG}} with an incorrect architecture:
 {{DOCKER_NS=hyperledger}}
 {{ARCH=s390x}}
 {{VERSION=1.4.0}}
 {{BASE_DOCKER_TAG=amd64-0.4.14}}",,inatatsu,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14839,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009cv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),inatatsu,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Mar/19 5:44 PM;mastersingh24;So we won't go back and update the existing artifacts, but for 1.4.1 and later we will no longer be creating the script.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Green Path: Chaincode calling chaincode Upgrade,FAB-13983,37284,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,31/Jan/19 12:58 AM,03/Apr/19 8:52 AM,28/Oct/23 3:04 AM,03/Apr/19 8:52 AM,,,,,,,,,,,,,,,0,,,,,"In a chaincode calling chaincode scenario, when upgrading the chaincode versions, ensure that the correct versions are being called.

*Proposed Steps:*
{code}
  Given I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel named ""channel1""
  When an admin sets up a channel named ""channel2""

  And an admin builds a chaincode package using path ""github.com/hyperledger/fabric/examples/chaincode/go/example04/cmd"" with name ""ex04"" on channel ""channel1""
  And an admin builds a chaincode package using path ""github.com/hyperledger/fabric/examples/chaincode/go/example02/cmd"" with name ""ex02"" on channel ""channel2""

  And the organization admins install the built ""ex04"" chaincode package on ""channel1"" for all peers
 Then a hash value is received on all peers
  When the organization admins approve the ""ex04"" chaincode package on ""channel1"" for all peers
  And an admin commits the chaincode package to the channel ""channel1""
 And a user invokes on the chaincode with args [""init"",""Event"",""1""] on channel ""channel1""

  And the organization admins install the built ""ex02"" chaincode package on ""channel2"" for all peers
  Then a hash value is received on all peers
  When the organization admins approve the ""ex02"" chaincode package on ""channel2"" for all peers
  And an admin commits the chaincode package to the channel ""channel2""
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""] on channel ""channel2""

  When a user queries on the channel ""channel2"" using chaincode named ""ex02"" with args [""query"",""a""]
  Then a user receives a success response of 1000
  When a user queries on the chaincode named ""ex04"" with args [""query"",""Event"", ""ex02"", ""a"", ""channel2""]
  Then a user receives a success response of 1000
{code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i009sn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"08/Feb/19 6:27 AM;latitiah;https://gerrit.hyperledger.org/r/#/c/29188/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create evaluator for new policy type,FAB-13984,37286,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,31/Jan/19 1:01 AM,09/Feb/19 1:20 AM,28/Oct/23 3:04 AM,09/Feb/19 1:20 AM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009t3:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wire parser into peer's PackageProvider,FAB-13985,37287,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,31/Jan/19 1:03 AM,21/Feb/19 6:24 AM,28/Oct/23 3:04 AM,21/Feb/19 6:24 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,"The PackageParser was never wired into the peer's PackageProvider at startup, which leads to a nil pointer panic. Once this is wired in, it also revealed an issue with the ChaincodeContainerInfo proto used by lifecycle, which downstream code expects to have an uppercase value for the chaincode type (aka the language).",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i009tb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Respect new lifecycle capability on endorser side,FAB-13986,37303,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,31/Jan/19 1:56 AM,08/Mar/19 2:54 AM,28/Oct/23 3:04 AM,08/Mar/19 2:54 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i009uv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable new lifecycle on V2_0 capability,FAB-13987,37304,37303,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,31/Jan/19 2:00 AM,28/Feb/19 1:49 AM,28/Oct/23 3:04 AM,28/Feb/19 1:49 AM,,,,,,,,,,,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009v3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Retrieve application config earlier in lifecycle scc,FAB-13988,37305,37303,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,31/Jan/19 2:01 AM,08/Mar/19 2:54 AM,28/Oct/23 3:04 AM,08/Mar/19 2:54 AM,,,,,,,,,,,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009vb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Check for lifecycle capability in new lifecycle scc,FAB-13989,37306,37303,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,31/Jan/19 2:02 AM,05/Apr/19 6:41 PM,28/Oct/23 3:04 AM,08/Mar/19 2:54 AM,,,,,,,,,,,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,FAB-13901,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009vj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Disable old lifecycle ops after capability enabled,FAB-13990,37307,37303,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,31/Jan/19 2:02 AM,28/Feb/19 1:48 AM,28/Oct/23 3:04 AM,28/Feb/19 1:48 AM,,,,,,,,,,,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009vr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wire new policy evaluator,FAB-13991,37309,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,31/Jan/19 3:13 AM,04/Apr/19 10:15 PM,28/Oct/23 3:04 AM,04/Apr/19 10:15 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009vz:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move protobuf utility functions out of the protos directory,FAB-13992,37310,,Story,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,31/Jan/19 3:24 AM,02/Mar/19 6:07 AM,28/Oct/23 3:04 AM,02/Mar/19 6:07 AM,,,,,,,,,,,,,,,0,hygiene,ipm,ipm-planned,,"As a fabric consumer, I expect the protos packages to include externally consumable artifacts yet the protos packages contain a collection of generated code, utilities, and extensions to proto objects.

Let's begin to clean this up by moving protos/utils to protoutils",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0085x:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jan/19 4:38 AM;sykesm;https://gerrit.hyperledger.org/r/c/29054/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a user of protocol buffers and grpc, I expect Fabric to consume protocol buffers in the conventional way",FAB-13993,37311,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,31/Jan/19 4:02 AM,13/Mar/19 4:00 AM,28/Oct/23 3:04 AM,13/Mar/19 4:00 AM,,,,,,,,,,,,,,,1,ipm,,,,"The documentation for protocol buffers includes a wonderful note:

{quote}
Protocol Buffers and O-O Design

Protocol buffer classes are basically dumb data holders (like structs in C); they don't make good first class citizens in an object model. If you want to add richer behaviour to a generated class, the best way to do this is to wrap the generated protocol buffer class in an application-specific class. Wrapping protocol buffers is also a good idea if you don't have control over the design of the .proto file (if, say, you're reusing one from another project). In that case, you can use the wrapper class to craft an interface better suited to the unique environment of your application: hiding some data and methods, exposing convenience functions, etc. You should never add behaviour to the generated classes by inheriting from them. This will break internal mechanisms and is not good object-oriented practice anyway.
{quote}

With respect to that note, we violate it many times and in many ways in the following files:

{code}
protos/common/block.go
protos/common/block_test.go
protos/common/common.go
protos/common/common_test.go
protos/common/configtx.go
protos/common/configtx_test.go
protos/common/configuration.go
protos/common/configuration_test.go
protos/common/ledger_test.go
protos/common/policies.go
protos/common/policies_test.go
protos/common/signed_data.go
protos/common/signed_data_test.go
protos/discovery/extensions.go
protos/discovery/extensions_test.go
protos/gossip/compatibility_test.go
protos/gossip/extensions.go
protos/gossip/extensions_test.go
protos/gossip/message_test.go
protos/ledger/rwset/kvrwset/helper.go
protos/ledger/rwset/kvrwset/tests/kv_rwset_test.go
protos/ledger/rwset/rwset.go
protos/ledger/rwset/rwset_test.go
protos/ledger/rwset/tests/rwset_test.go
protos/msp/msp_config.go
protos/msp/msp_principal.go
protos/orderer/configuration.go
protos/orderer/etcdraft/configuration.go
protos/orderer/etcdraft/configuration_test.go
protos/peer/chaincode.go
protos/peer/chaincodeunmarshall.go
protos/peer/configuration.go
protos/peer/proposal.go
protos/peer/proposal_response.go
protos/peer/transaction.go
protos/testutils/txtestutils.go
{code}",,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0085y:i",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move protobuf test utility functions out of the protos directory and to where used,FAB-13994,37312,,Story,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,31/Jan/19 4:34 AM,13/Mar/19 3:59 AM,28/Oct/23 3:04 AM,13/Mar/19 3:59 AM,,,,,,,,,,,,,,,0,hygiene,ipm,ipm-planned,,"As a fabric consumer, I expect the protos packages to include externally consumable artifacts yet the protos packages contain a collection of generated code, utilities, and extensions to proto objects.

Let's begin to clean this up by moving protos/utils to protoutils",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0085y:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jan/19 4:37 AM;sykesm;https://gerrit.hyperledger.org/r/29056 [FAB-13994] move testutils out of protos;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in fabric/token/client TestServer,FAB-13995,37313,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,sykesm,sykesm,31/Jan/19 5:08 AM,25/Jul/19 1:07 AM,28/Oct/23 3:04 AM,25/Jul/19 1:07 AM,v2.0.0,,,,,v2.0.0,,,,fabric-token,,,,,0,ci-flake,,,,"{code}
00:28:05.305     /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/token/client/client_test.go:389
00:28:05.305       returns an error [It]
00:28:05.305       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/token/client/client_test.go:394
00:28:05.305 
00:28:05.305       Test Panicked
00:28:05.306       runtime error: invalid memory address or nil pointer dereference
00:28:05.306       /opt/go/go1.11.1.linux.amd64/src/runtime/panic.go:513
00:28:05.306 
00:28:05.306       Full Stack Trace
00:28:05.306       	/opt/go/go1.11.1.linux.amd64/src/runtime/panic.go:513 +0x1b9
00:28:05.306       github.com/hyperledger/fabric/token/client_test.glob..func1.5.7.2()
00:28:05.306       	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/token/client/client_test.go:396 +0x134
00:28:05.306       github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*runner).runSync(0xc000087320, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
00:28:05.306       	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/token/client/client_suite_test.go:22 +0xf7
00:28:05.306       testing.tRunner(0xc0000e4800, 0x1a17060)
00:28:05.306       	/opt/go/go1.11.1.linux.amd64/src/testing/testing.go:827 +0x163
00:28:05.306       created by testing.(*T).Run
00:28:05.306       	/opt/go/go1.11.1.linux.amd64/src/testing/testing.go:878 +0x651
00:28:05.306       
00:28:05.306 ------------------------------
00:28:05.306 ••2019-01-30 19:43:44.550 UTC [bccsp] GetDefault -> WARN 017 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
00:28:05.307 •2019-01-30 19:43:44.550 UTC [bccsp] GetDefault -> WARN 018 Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
00:28:05.307 ••••2019-01-30 19:43:44.551 UTC [token.client] DeliverReceive -> ERRO 019 Error: error receiving deliver response from peer dummyAddress: flying-banana
00:28:05.307 •2019-01-30 19:43:45.556 UTC [token.client] DeliverWaitForResponse -> ERRO 01a timed out waiting for committing txid another-txid
00:28:05.308 ••••••••2019-01-30 19:43:45.572 UTC [bccsp] GetDefault -> WARN 01b Before using BCCSP, please call InitFactories(). Falling back to bootBCCSP.
00:28:05.310 •••••••••••••••2019-01-30 19:43:45.590 UTC [token.client] BroadcastReceive -> INFO 01c calling OrdererClient.broadcastReceive
00:28:05.310 •2019-01-30 19:43:45.591 UTC [token.client] BroadcastReceive -> INFO 01d calling OrdererClient.broadcastReceive
00:28:05.313 ••••••••••••••••••••••••••••••
00:28:05.313 
00:28:05.314 Summarizing 1 Failure:
00:28:05.314 
00:28:05.314 [Panic!] Client NewClient when NewTxSumitter fails to connect to orderer [It] returns an error 
00:28:05.315 /opt/go/go1.11.1.linux.amd64/src/runtime/panic.go:513
00:28:05.315 
00:28:05.315 Ran 101 of 101 Specs in 3.182 seconds
00:28:05.316 FAIL! -- 100 Passed | 1 Failed | 0 Pending | 0 Skipped
00:28:05.316 --- FAIL: TestServer (3.18s)
00:28:05.316 FAIL
00:28:05.316 coverage: 87.8% of statements
00:28:05.316 FAIL	github.com/hyperledger/fabric/token/client	3.704s
{code}

https://gerrit.hyperledger.org/r/c/29054/

Build logs attached",,denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jan/19 5:09 AM;sykesm;console-timestamp.log.gz.txt;https://jira.hyperledger.org/secure/attachment/16647/console-timestamp.log.gz.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009wf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Jul/19 1:07 AM;denyeart;Has not been reproduced for many months, closing.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
intermittent test failures in integration test cft suite,FAB-13996,37315,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sykesm,sykesm,31/Jan/19 5:46 AM,16/Apr/19 12:16 PM,28/Oct/23 3:04 AM,16/Apr/19 12:16 PM,,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"{{EndToEnd Crash Fault Tolerance when an orderer is behind the latest snapshot on leader [It] catches up using the block stored in snapshot}}

{code}
00:19:45.552 • Failure [61.494 seconds]
00:19:45.552 EndToEnd Crash Fault Tolerance when an orderer is behind the latest snapshot on leader [It] catches up using the block stored in snapshot 
00:19:45.552 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:150
00:19:45.552 
00:19:45.552   Timed out after 60.071s.
00:19:45.552   Expected
00:19:45.552       <int>: 1
00:19:45.552   to equal
00:19:45.552       <int>: 0
00:19:45.552 
00:19:45.552   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/nwo/network.go:732
00:19:45.552 ------------------------------
00:21:28.413 •••••••
00:21:28.414 
00:21:28.416 Summarizing 1 Failure:
00:21:28.416 
00:21:28.418 [Fail] EndToEnd Crash Fault Tolerance when an orderer is behind the latest snapshot on leader [It] catches up using the block stored in snapshot 
00:21:28.420 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/nwo/network.go:732
{code}

https://gerrit.hyperledger.org/r/c/29056/

Build logs attached
",,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,FAB-14362,,,,,,FAB-13776,,,,,,,FAB-13371,,,"31/Jan/19 5:47 AM;sykesm;console-timestamp.log.gz.txt;https://jira.hyperledger.org/secure/attachment/16650/console-timestamp.log.gz.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009wv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jan/19 10:20 PM;guoger;This is the same problem as that jira, and will use that one to track. thanks for filing this!;;;","06/Mar/19 12:44 AM;sykesm;Reopening as the referenced JIRA's are marked closed and this is still occurring.

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/6738/console

{code}
09:25:43 • Failure [61.202 seconds]
09:25:43 EndToEnd Crash Fault Tolerance when an orderer is behind the latest snapshot on leader [It] catches up using the block stored in snapshot 
09:25:43 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:151
09:25:43 
09:25:43   Timed out after 60.028s.
09:25:43   Expected
09:25:43       <int>: 1
09:25:43   to equal
09:25:43       <int>: 0
09:25:43 
09:25:43   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/nwo/network.go:746
09:25:43 ------------------------------
{code};;;","16/Apr/19 12:16 PM;guoger;Pls reopen if hit again. Raft integration test should be reasonably lenient after several changes;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
intermittent test failures in gossip/channel TestOnDemandGossip,FAB-13997,37316,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Invalid: Works as Expected,,sykesm,sykesm,31/Jan/19 6:19 AM,01/Jul/19 10:21 PM,28/Oct/23 3:04 AM,01/Jul/19 10:21 PM,v1.4.0,v2.0.0,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"{code}
has changed. peers went offline:  [[3]] , current view:  [[2]]
00:10:22.311 --- FAIL: TestOnDemandGossip (2.30s)
00:10:22.311     channel_test.go:1762: 
00:10:22.311         	Error Trace:	channel_test.go:1762
00:10:22.311         	Error:      	Should have gossiped a third time
00:10:22.311         	Test:       	TestOnDemandGossip
{code}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8488/console

Build log attached",,denyeart,guoger,MHBauer,sambhavdutt,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15309,,,,,,,"31/Jan/19 6:19 AM;sykesm;console-timestamp.log.gz.txt;https://jira.hyperledger.org/secure/attachment/16651/console-timestamp.log.gz.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009x3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,guoger,MHBauer,sambhavdutt,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jan/19 11:49 PM;wlahti;Also hit by: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8512/console;;;","14/Feb/19 12:50 PM;sambhavdutt;Another fail ""TestOnDemandGossip"" observed in today's unit-tests, 

*Intermittent* Yes

*Branch* master

*Platform* x86_64

*fabric commit:* a2a7a7ada4dc0a4493b06dfbe79a28ab2e99bec5

*Error Snippet*

{code:java}
19:36:54 [33m2019-02-14 00:36:37.679 UTC [gossip.channel#test] HandleMessage -> WARN 01f[0m Failed verifying message: tag:CHAN_OR_ORG state_info_pull_req:<channel_MAC:""\362\217\t|m\314\343\217\034/\177\254.\210\325\261t\320\274\341R\366v\221\3150(\232[\325\224\212"" > 
19:36:54 [33m2019-02-14 00:36:37.868 UTC [gossip.channel#test] EligibleForChannel -> WARN 020[0m Identity for peer 706b694944496e4f726731 doesn't exist
19:36:54 --- FAIL: TestOnDemandGossip (2.30s)
19:36:54     channel_test.go:1772: 
19:36:54         	Error Trace:	channel_test.go:1772
19:36:54         	Error:      	Should have gossiped a third time
19:36:54         	Test:       	TestOnDemandGossip
19:36:54 [33m2019-02-14 00:36:37.983 UTC [gossip.channel#test] verifyMsg -> WARN 021[0m Message contains wrong channel( [66] ), expected [65]
19:36:54 [33m2019-02-14 00:36:37.983 UTC [gossip.channel#test] HandleMessage -> WARN 022[0m Failed verifying message: channel:""B"" tag:CHAN_OR_ORG state_snapshot:<elements:<payload:""\030\005zA\022\014\010\214\340\205\274\264\375\304\301\025\020\001\032\013pkiIDInOrg1\"" \337\276\355\361\345~7\231|\007\363\244\254\213NA>k\007\232\313\243\004\032d\030\222\n;5\307\247*\002\010\004"" >
{code}


*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-x86_64/351/;;;","14/Feb/19 10:25 PM;guoger;https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8904/console;;;","06/Mar/19 2:48 AM;wlahti;Hit again: [https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10023/];;;","11/Apr/19 10:44 PM;denyeart;Hit again: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11456/console;;;","14/May/19 5:53 AM;MHBauer;https://gerrit.hyperledger.org/r/#/c/31349/;;;","16/May/19 6:41 AM;MHBauer;I can't reproduce this anymore.;;;","01/Jul/19 10:21 PM;denyeart;Not hit in over a month, can't reproduce.
Closing for now, please re-open if seen again.;;;",,,,,,,,,,,,,,,,,,,,,
pvtdata disappear,FAB-13998,37317,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,denyeart,sae imSon,sae imSon,31/Jan/19 10:33 AM,23/Jan/20 7:34 AM,28/Oct/23 3:04 AM,23/Jan/20 7:34 AM,,,,,,,,,,,,,,,0,stale-item,,,,"*[ bug ]*

*during rush(stress) test, data in collection are disappear randomly. there is no delete function defined in chaincode. vanished data was created by invoke and queried normally.* 

*when number of injected transactions was over the transientstoreMaxBlockRetention, pvtdata commit was not working properly. so we changed this figure from 1000 to 100000 but not sure this number, whether 100000 is acceptable figure or not in gossip protocol networking.* 

 

[ test env ]
 - 6 endorsing peers with AND policy (chaincode installed and is running) (each org has two peers, so 3 orgs)

 - 14 committing peers ( each org has two peers, so 7 orgs)

 - 7 pvt collections are defined. collection name is defined by following each committing org's MSP.  ex) collection allowed by endorser orgs and firm1 is named as ""Firm1OrgMSP"" 

 - all peers are joined 10 channels.

 - pvtdata configuration

pvtData:

pullRetryThreshold: 20s

transientstoreMaxBlockRetention: 100000

pushAckTimeout: 3s

 

[ transaction injection condition ]
 - 70000 invoke tx(write) per channel without sleep. 

 

 

 ",,denyeart,nextisd,sae imSon,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/19 10:35 AM;sae imSon;collections_config.json;https://jira.hyperledger.org/secure/attachment/16740/collections_config.json",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009xb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,nextisd,sae imSon,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jan/19 10:51 AM;sae imSon;*if you need full logfile to analyze and resolve this issue, let me know.*

*log1] user : tcr2of3_7k_Firm1Org-User000004 create two token balances : krxgld320001, curusd320001.*

*after balance create invoke, queried normally* 

2019-01-29 15:04:53.261 [http-nio-8806-exec-164] INFO c.k.b.f.s.MemberService - get Instance channelName = krxgldcurusd 
2019-01-29 15:04:53.264 [http-nio-8806-exec-260] INFO c.k.b.f.s.FabricApplication - User Name = tcr2of3_7k_Firm6Org-User000035 
2019-01-29 15:04:53.264 [http-nio-8806-exec-260] INFO c.k.b.f.s.FabricApplication - user create mode 
2019-01-29 15:04:53.264 [http-nio-8806-exec-338] INFO c.k.b.f.s.FabricApplication - interval on 
2019-01-29 15:04:53.264 [http-nio-8806-exec-338] INFO c.k.b.f.s.FabricApplication - randomNumber : 1 
2019-01-29 15:04:53.264 [http-nio-8806-exec-338] INFO c.k.b.f.s.FabricApplication - Start FabricMemberService 
2019-01-29 15:04:53.264 [http-nio-8806-exec-338] INFO c.k.b.f.s.FabricApplication - Parameter setting 
2019-01-29 15:04:53.264 [http-nio-8806-exec-338] INFO c.k.b.f.s.FabricApplication - initMember start 
2019-01-29 15:04:53.264 [http-nio-8806-exec-338] INFO c.k.b.f.s.MemberService - get Instance channelName = krxgldcurusd 
2019-01-29 15:04:53.264 [http-nio-8806-exec-338] INFO c.k.b.f.s.MemberService - Memberservice init 
2019-01-29 15:04:53.266 [http-nio-8806-exec-299] INFO c.k.b.f.s.FabricApplication - Result Code : 1 
2019-01-29 15:04:53.266 [http-nio-8806-exec-299] INFO c.k.b.f.s.FabricApplication - Result Message : success 
2019-01-29 15:04:53.266 [http-nio-8806-exec-299] INFO c.k.b.f.s.FabricApplication - Result Data : {color:#FF0000}{""object"":""wallet"",""address"":""0x494b376a415c3335ec83d30109fe1388df119d00"",""token"":""curusd320001"",""orgId"":""Firm3OrgMSP"",""qty"":1000000000,""lockQty"":0,""requiredNumOfKeysForSig"":3,""totalNumOfKeysForSig"":4,""withdrawDayLimit"":10000,{color}""owner"":""-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEEStvRipSvfLuJ3TZfQmHhkv3QSUT\nJxmFFl3A9uZ2/a2bwZ9RnPCJSquzTM7+vEfNwt0E4qaPvGbMYwktG6urYA==\n-----END PUBLIC KEY-----"",""coOwners"":\{""-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEEStvRipSvfLuJ3TZfQmHhkv3QSUT\nJxmFFl3A9uZ2/a2bwZ9RnPCJSquzTM7+vEfNwt0E4qaPvGbMYwktG6urYA==\n-----END PUBLIC KEY-----"":"""",""-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEe+4BW/SRujPfwKypO8uNtccM/hYX\nvfkppr9zjtKI0NK2NFOlUUISSHisxJ72XtfW7HlE+UJKqjLg+apJRO/LnA==\n-----END PUBLIC KEY-----"":"""",""-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEvsSz8AqJjeMTvLfW8bhPnbtkyzI1\nMPSWGvqnrtVHnQdNModxaqzY4c4EEutVtwkXKlNyz5jUTE4XBvSnLfMrOA==\n-----END PUBLIC KEY-----"":""""}}{color:#FF0000}{""object"":""wallet"",""address"":""0x494b376a415c3335ec83d30109fe1388df119d00"",""token"":""krxgld320001"",""orgId"":""Firm3OrgMSP"",""qty"":1000000000,""lockQty"":0,""requiredNumOfKeysForSig"":3,""totalNumOfKeysForSig"":4,""withdrawDayLimit"":10000,{color}""owner"":""-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEEStvRipSvfLuJ3TZfQmHhkv3QSUT\nJxmFFl3A9uZ2/a2bwZ9RnPCJSquzTM7+vEfNwt0E4qaPvGbMYwktG6urYA==\n-----END PUBLIC KEY-----"",""coOwners"":\{""-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEEStvRipSvfLuJ3TZfQmHhkv3QSUT\nJxmFFl3A9uZ2/a2bwZ9RnPCJSquzTM7+vEfNwt0E4qaPvGbMYwktG6urYA==\n-----END PUBLIC KEY-----"":"""",""-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEe+4BW/SRujPfwKypO8uNtccM/hYX\nvfkppr9zjtKI0NK2NFOlUUISSHisxJ72XtfW7HlE+UJKqjLg+apJRO/LnA==\n-----END PUBLIC KEY-----"":"""",""-----BEGIN PUBLIC KEY-----\nMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEvsSz8AqJjeMTvLfW8bhPnbtkyzI1\nMPSWGvqnrtVHnQdNModxaqzY4c4EEutVtwkXKlNyz5jUTE4XBvSnLfMrOA==\n-----END PUBLIC KEY-----"":""""}} 
2019-01-29 15:04:53.266 [http-nio-8806-exec-299] INFO c.k.b.f.s.FabricApplication - tcr2of3_7k_Firm3Org-User000045,krxgldcurusd,tw720,query,queryAccount,-----BEGIN PUBLIC KEY-----@MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAETrqC1lXFMFXVgiPtQKOhjSH/Hjf7@UxjD87DgTwU6IVV2rWIWNwRRtdZbPktbUAJ0Htzzh+by4HslXjtX9UG96A==@-----END PUBLIC KEY-----,DECKEY^WjAiUE5jR97kmA5fpIbo47A4cfmrnLrG^IV^Vu5uKS1JKIK4G6un 
2019-01-29 15:04:53.266 [http-nio-8806-exec-299] INFO c.k.b.f.s.FabricApplication - -----BEGIN PUBLIC KEY-----@MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAETrqC1lXFMFXVgiPtQKOhjSH/Hjf7@UxjD87DgTwU6IVV2rWIWNwRRtdZbPktbUAJ0Htzzh+by4HslXjtX9UG96A==@-----END PUBLIC KEY----- 
2019-01-29 15:04:53.266 [http-nio-8806-exec-299] INFO c.k.b.f.s.FabricApplication - -----BEGIN PUBLIC KEY-----

 

*log2] during balance change invoke, 'curusd3200001' balance is vanished and getstate returned error.* 

2019-01-30 10:15:33.661 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - << start Invoke >>{color:#FF0000} chaincode : tw720, invFnc : lockOrderVol, param : [krxgld320001, 1, 0000000001, -----BEGIN PUBLIC KEY-----{color}
MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEtqLr5DSRcHazfIs8V77suotyamJq
USal9hERwIFvuYxWKqH6N6kvTk+LoWbytuiLZfeCUtd35K+YFN3XtJN5Cw==
-----END PUBLIC KEY-----, MEQCIFVTLNy5XiJvU39Lm0k4CxJziHVIqp2FyFZ8so08nn/oAiBBm4B10XaACz6M2fvK5MFa2NUOoWP5Zg+kgPVNlkagiQ==, -----BEGIN PUBLIC KEY-----
MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEe+4BW/SRujPfwKypO8uNtccM/hYX
vfkppr9zjtKI0NK2NFOlUUISSHisxJ72XtfW7HlE+UJKqjLg+apJRO/LnA==
-----END PUBLIC KEY-----, MEQCIA0Yd9B+z5SFGG7HeBtPITZAC9yKREYtQkFFtw8mMPt7AiAbdawE8m1SqPToQrTcRPvgCN/u9fdx0x/CjqFn1LN1nQ==, -----BEGIN PUBLIC KEY-----
MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEvsSz8AqJjeMTvLfW8bhPnbtkyzI1
MPSWGvqnrtVHnQdNModxaqzY4c4EEutVtwkXKlNyz5jUTE4XBvSnLfMrOA==
-----END PUBLIC KEY-----, MEUCIQDOSKlanZi8+3hJP4ztQ2Crn8245K+ygErflu4uEZztqQIgA2A+Q+MsqH1N5hz2uMwbxV065t2jz76vASYm2tVBFHM=] 
2019-01-30 10:15:33.661 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - Start Time of 'Send Transaction Proposal': 2019-01-30 10:15:33.661 
2019-01-30 10:15:33.661 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - user mspid : KrxOrgMSP 
2019-01-30 10:15:33.782 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - send proposal peer(ENDORSING_PEER) : krxpeer01 
2019-01-30 10:15:33.782 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - send proposal peer(ENDORSING_PEER) : bank1peer01 
2019-01-30 10:15:33.782 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - send proposal peer(ENDORSING_PEER) : issuerpeer01 
2019-01-30 10:15:33.782 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService -{color:#FF0000} Successful transaction proposal response Txid: fb35cc4ae1fe7c1269786612135accae148cc6e15ffc834b4052c8565b65ba34 from peer krxpeer01{color}
 
2019-01-30 10:15:33.782 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - Successful transaction proposal response Txid: fb35cc4ae1fe7c1269786612135accae148cc6e15ffc834b4052c8565b65ba34 from peer bank1peer01
 
2019-01-30 10:15:33.782 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - Successful transaction proposal response Txid: fb35cc4ae1fe7c1269786612135accae148cc6e15ffc834b4052c8565b65ba34 from peer issuerpeer01

=======================================================================================================

2019-01-30 10:15:33.849 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - << start Invoke >>{color:#FF0000} chaincode : tw720, invFnc : lockOrderVol, param : [curusd320001, 1, 0000000001, -----BEGIN PUBLIC KEY-----{color}
MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEtqLr5DSRcHazfIs8V77suotyamJq
USal9hERwIFvuYxWKqH6N6kvTk+LoWbytuiLZfeCUtd35K+YFN3XtJN5Cw==
-----END PUBLIC KEY-----, MEUCIQCmkv7Xr1caTpqkHU+bPczsU/lC+ulPNknDWXdpQ6YKxQIgRv3CdnXALN5QemGeV8GsERa2UBFr0SJNKp2tQf2IKKI=, -----BEGIN PUBLIC KEY-----
MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEe+4BW/SRujPfwKypO8uNtccM/hYX
vfkppr9zjtKI0NK2NFOlUUISSHisxJ72XtfW7HlE+UJKqjLg+apJRO/LnA==
-----END PUBLIC KEY-----, MEUCIQDt4M9EVbcW5wMU1D5qTYgEqJwxsa4V9tHSsulBR3E2egIgBVWCmokHs0plyVpWGxx3hfWdbCiYPD5UlUIk1tFEMbw=, -----BEGIN PUBLIC KEY-----
MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEvsSz8AqJjeMTvLfW8bhPnbtkyzI1
MPSWGvqnrtVHnQdNModxaqzY4c4EEutVtwkXKlNyz5jUTE4XBvSnLfMrOA==
-----END PUBLIC KEY-----, MEQCIG1f9RSCgHFONJ4qXmywD8LFp2lgVenmk0h0r5EG2xiaAiAsUZgzgGKPgPK9B2IBFIlHqRjYXixFwl+SLsNvG9x9eg==] 
2019-01-30 10:15:33.849 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - Start Time of 'Send Transaction Proposal': 2019-01-30 10:15:33.849 
2019-01-30 10:15:33.849 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - user mspid : KrxOrgMSP 
2019-01-30 10:15:33.861 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - send proposal peer(ENDORSING_PEER) : krxpeer01 
2019-01-30 10:15:33.862 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - send proposal peer(ENDORSING_PEER) : bank1peer01 
2019-01-30 10:15:33.862 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - send proposal peer(ENDORSING_PEER) : issuerpeer01 
2019-01-30 10:15:33.862 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - Unsuccessful transaction proposal response Txid: fa970ffefb5fd1c2f66a910d3c54d9c6806557fe6515a11b52215251723d572b from peer krxpeer01Chaincode result message :{color:#FF0000} \{""Error"":""address does not exist: 0x00b8677f4527712b081ba1f5bb7d3c075ff1cc00""}{color}
 
2019-01-30 10:15:33.862 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - Unsuccessful transaction proposal response Txid: fa970ffefb5fd1c2f66a910d3c54d9c6806557fe6515a11b52215251723d572b from peer bank1peer01Chaincode result message : \{""Error"":""address does not exist: 0x00b8677f4527712b081ba1f5bb7d3c075ff1cc00""}
 
2019-01-30 10:15:33.862 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - Unsuccessful transaction proposal response Txid: fa970ffefb5fd1c2f66a910d3c54d9c6806557fe6515a11b52215251723d572b from peer issuerpeer01Chaincode result message : \{""Error"":""address does not exist: 0x00b8677f4527712b081ba1f5bb7d3c075ff1cc00""}
 
2019-01-30 10:15:33.862 [http-nio-8806-exec-2] INFO c.k.b.f.s.MemberService - Not enough endorsers for invoke : 3

 ;;;","04/Feb/19 2:34 AM;denyeart;Are there any ERRO or WARN messages in peer logs?

Please provide a sample collection configuration.

Explain what is meant by ""pvtdata commit was not working properly"".

Explain what is meant by ""data in collection are disappear randomly"". Can you query the private data on one peer but not another peer? What error do you get when attempting to query the private data?

 

 

 ;;;","08/Feb/19 10:35 AM;sae imSon;+Are there any ERRO or WARN messages in peer logs?+
 : I have checked whether transactions are committed successfullly with ""commitwithpvtdata"" phrase in a peer log or not.
 what I mean by ""pvtdata commit was not working properly"" is that,
 - commitwithpvtdata took quite a long time (it was ""stress test"")
 - mvcc error showed up in a log even though a peer was configured by ""1tx/1block""
 - so, transactions are marked as ""invalid""

+Please provide a sample collection configuration.+
 : I attached collection definition file. [^collections_config.json]

+Explain what is meant by ""data in collection are disappear randomly"". Can you query the private data on one peer but not another peer? What error do you get when attempting to query the private data?+
 : the chanincode developed has 4 main functions.
 1) createAccount : with address and token name as a key, token balance is created. 
 2) lockOrderVol : by order, certain amount of targeted token balance is marked as ""locked""
 3) reflectTrade : locked quantity will be transfered to trade counterparty 
 4) queryAccount : with address and token name, created account(token balance) can be queried.

at the stage of createAccount, account was created and queried successfully.
 but after many times of lockordervol transaction, endorser peer returned error ""address(account) does not found""
 and when I queried that address by queryAccount, getstate returned nil. 
 I switched other endorser peers to query but same result was returned.;;;","11/Feb/19 1:17 PM;denyeart;[~sae imSon] The presence of MVCC errors is likely the root cause. Even if you have one transaction per block, you can receive MVCC errors if there are conflicts between transactions before they are committed. For example you attempt to endorse a key read/write when another endorsement of the same key has just occurred but is not yet committed to peers (it may be in the process of being submitted to ordering, being processed by orderers, or being processed by peers but not yet committed). These types of errors are common in stress tests if you are updating the same key in subsequent transactions in quick succession.;;;","11/Feb/19 6:26 PM;sae imSon;to avoid key collision(mvcc error)
- we created many users(key) per channel.
- batch block configured by 1tx/1block(batch timeout 2s)

we injected transactions through 10 application servers which was run on fabric java sdk(version 1.2.1)
one application server was designated to one channel.
so, it was not a case of ""updating same key in quick succession""
and in this case we don't have to consider giving sleep time between transactions. 
(we ran stress test with sleep time from 0 to 15 ms, still got the error);;;","11/Feb/19 10:06 PM;denyeart;[~sae imSon] You mentioned you see some MVCC errors. By definition, this means you have some conflicting transactions. I suggest you start with low volume, look at the debug logs, and determine where the MVCC conflicts are coming from.;;;","23/Jan/20 7:34 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,
Token - Testing,FAB-14001,37321,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,angelo.decaro,angelo.decaro,31/Jan/19 4:32 PM,13/Jan/20 11:42 PM,28/Oct/23 3:04 AM,13/Jan/20 11:42 PM,,,,,,,,,,fabric-token,,,,,0,fabtoken,stale-item,,,"Before closing this testplan task, coverage must be reviewed and approved (via upvote or comment) by the epic feature owner and the test leads identified below.

*Unit Test (UT):*

Automated unit tests are merged in repo, as go tests or otherwise part of build/verify jenkins jobs.
 Code coverage tracked in Jenkins: [https://jenkins.hyperledger.org/view/Daily/job/fabric-unit-test-coverage-daily-master-x86_64/]

*Function Test (FVT)*: 
Expand unit testcases beyond traditional UT coverage, for the following integration scenarios that otherwise might be done using the ginko framework) - we consider the following extended unit tests:
 * Double spending resistance
 * Only the rightful owner can spend a token
 * Tokens cannot be transferred to invalid recipients or for a zero amount

E2E testcases scenario consists of a setup with two orgs A and B for token transactions

Other functional testing required: N/A 

*System Verification Test (SVT):*
 FabToken is a change to fabric that affects validation. We suggest to perform SVT tests that involve these components with a CLI or Client-SDK that issues, transfers and redeem tokens in a network setup with at least two orgs, preferably more.",,angelo.decaro,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,in progress,(Please add high level design or a link to the design),Not Required,Unset,Not Required,ghx-label-2,,token - deep testing,To Do,No,,Required,No,,,"1|i009y7:",,,,No,Not Required,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Feb/19 8:04 AM;denyeart;[~angelo.decaro] I removed the FixVersion so that this Jira item does not show up in v2.0 release dashboards.  Typically we add the test plan to the dev epic Test Plan field (if you click edit on an epic you'll see it), and add 'Test Tasks' to the dev epic.  That being said, I realize its sometimes easier to have a Jira umbrella item for all the Test Tasks.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Token - Double Spending Resistance ,FAB-14002,37322,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,31/Jan/19 4:33 PM,21/Feb/19 7:35 PM,28/Oct/23 3:04 AM,21/Feb/19 7:35 PM,,,,,,,,,,fabric-token,,,,,0,fabtoken,,,,The goal is to have an e2e to test double-spending,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14001,,,No,,Unset,No,,,"1|i009yf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Feb/19 5:05 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/29062/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
e2e token transfer double spending,FAB-14003,37323,37322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,31/Jan/19 4:39 PM,08/Feb/19 12:18 AM,28/Oct/23 3:04 AM,08/Feb/19 12:18 AM,,,,,,v2.0.0,,,,fabric-token,,,,,0,fabtoken,,,,Simple e2e to test a double spending of a token just minted. ,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009yn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Feb/19 12:18 AM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/29062/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Bump etcd/raft lib version,FAB-14004,37324,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,guoger,guoger,guoger,31/Jan/19 5:53 PM,13/Aug/20 10:51 PM,28/Oct/23 3:04 AM,22/Feb/19 8:41 PM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,help-wanted,,,,"Newer version of lib takes zap logger.

Note: newer version is moved from {{github.com/coreos/etcd/raft}} to {{go.etcd.io/etcd/raft}}",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18156,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009yv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/19 5:38 PM;guoger;https://gerrit.hyperledger.org/r/c/29435/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create new SBEP metakey,FAB-14005,37326,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,31/Jan/19 7:17 PM,13/Feb/19 12:07 AM,28/Oct/23 3:04 AM,13/Feb/19 12:07 AM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009zb:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add contextual information to gossip unit test to have more details while addressing flaking behaviour,FAB-14007,37332,33933,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,31/Jan/19 11:13 PM,13/Feb/19 9:51 AM,28/Oct/23 3:04 AM,13/Feb/19 9:51 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,Add description details to reason about timeout expiration failure.,,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00a0f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jan/19 11:48 PM;C0rWin;https://gerrit.hyperledger.org/r/#/c/29068/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Handle broken snapshot files,FAB-14008,37334,,Story,To Do,FAB,Fabric,software,denyeart,,,Lowest,,,kchristidis,kchristidis,31/Jan/19 11:33 PM,12/Nov/19 1:23 AM,28/Oct/23 3:04 AM,,,,,,,Future,,,,,,,,,0,ipm,raft,,,"Per [~C0rWin]'s observation [here|https://gerrit.hyperledger.org/r/c/28850/18/orderer/consensus/etcdraft/storage.go#363]: we are currently leaving broken snapshot files on disk. We may wish to revise this policy.",,C0rWin,jyellick,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00n2e:94",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,jyellick,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jan/19 11:46 PM;C0rWin;My suggestion would be to purge those broken files with probably large retention period. The rational is quite simple if broken file remained untouched and were support to be purged anyway, no reason to continue to maintain it.;;;","29/Mar/19 12:40 PM;jyellick;Was this completely addressed here? https://gerrit.hyperledger.org/r/c/29643;;;","10/Jun/19 10:31 AM;jyellick;Looks like this is still an issue, based on the code, is this something we want to address?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
make gossip to retrieve pvtData from local pvtdatastore after a rollback,FAB-14009,37338,31270,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,Senthil1,Senthil1,01/Feb/19 12:42 AM,01/Jul/19 8:22 PM,28/Oct/23 3:04 AM,01/Jul/19 8:22 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14307,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00a1r:",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration test that removes an OSN,FAB-14010,37339,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,01/Feb/19 1:17 AM,03/Mar/19 9:58 PM,28/Oct/23 3:04 AM,04/Feb/19 11:07 PM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,,,,,,,kchristidis,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00a1z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kchristidis,yacovm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Feb/19 1:23 AM;kchristidis;https://gerrit.hyperledger.org/r/c/29070/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move protos/common.NewBlock to protoutil,FAB-14011,37340,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,01/Feb/19 1:22 AM,02/Mar/19 6:46 AM,28/Oct/23 3:04 AM,02/Mar/19 6:46 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00a27:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Feb/19 1:33 AM;sykesm;https://gerrit.hyperledger.org/r/29071 [FAB-14011] move common.NewBlock to protoutil;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove unused APIs from ledger interface,FAB-14012,37342,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,01/Feb/19 1:29 AM,02/Dec/19 4:47 PM,28/Oct/23 3:04 AM,02/Dec/19 4:47 PM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,"The following APIs defined in the core/ledger/ledger_interface.go are not used and hence, it is good to remove them to reduce the LOC. 
 # PurgePrivateData()
 # Prune()
 # PrivateDataMinBlockNum()",,guoger,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00a2n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Dec/19 4:47 PM;guoger;done with 3560587b9d57b8b112acecf86c9a322ee73c91cd;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Consolidate chaincode definition fields,FAB-14013,37344,36521,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,01/Feb/19 1:38 AM,08/Mar/19 3:08 AM,28/Oct/23 3:04 AM,08/Mar/19 3:08 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00a33:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove unneeded serialization logic,FAB-14014,37345,36521,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,01/Feb/19 1:43 AM,08/Mar/19 3:08 AM,28/Oct/23 3:04 AM,08/Mar/19 3:08 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00a3b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make whether init is required a parameter of a chaincode definition,FAB-14015,37346,36521,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,01/Feb/19 1:45 AM,28/Feb/19 8:46 PM,28/Oct/23 3:04 AM,28/Feb/19 8:46 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00a3j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wire the init checks from new lifecycle into existing chaincode infrastucture,FAB-14016,37347,36521,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,01/Feb/19 1:47 AM,08/Mar/19 3:08 AM,28/Oct/23 3:04 AM,08/Mar/19 3:08 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00a3r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add integration test for ""ApproveChaincodeDefinitionForMyOrg""",FAB-14017,37348,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,01/Feb/19 1:50 AM,07/Mar/19 4:24 PM,28/Oct/23 3:04 AM,07/Mar/19 4:24 PM,,,,,,,,,,,,,,,0,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-9007,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00a3z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add integration test for ""CommitChaincodeDefinition""",FAB-14018,37349,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,01/Feb/19 1:50 AM,06/Mar/19 4:54 AM,28/Oct/23 3:04 AM,06/Mar/19 4:54 AM,,,,,,,,,,,,,,,0,,,,,"This will also exercise the ""QueryChaincodeDefinition"" functionality to ensure the chaincode definition was committed successfully on all peers in the network.",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-9007,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00a47:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move block header and data helpers out of protos and into protoutil,FAB-14019,37351,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,01/Feb/19 4:12 AM,02/Mar/19 6:45 AM,28/Oct/23 3:04 AM,02/Mar/19 6:45 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00a4n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Feb/19 4:15 AM;sykesm;https://gerrit.hyperledger.org/r/29088 [FAB-14019] move proto common.Block helpers;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move NewConfigGroup out of protos/common and into protoutil,FAB-14022,37354,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,01/Feb/19 5:49 AM,02/Mar/19 6:44 AM,28/Oct/23 3:04 AM,02/Mar/19 6:44 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00a5b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Feb/19 5:51 AM;sykesm;https://gerrit.hyperledger.org/r/29090 [FAB-14022] move NewConfigGroup to protoutil;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove common.Signable interface as there are no users,FAB-14023,37356,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,01/Feb/19 7:12 AM,02/Mar/19 6:44 AM,28/Oct/23 3:04 AM,02/Mar/19 6:44 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00a5r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Feb/19 7:29 AM;sykesm;https://gerrit.hyperledger.org/r/29094 [FAB-14023] remove common.Signable interface;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make Prover Peer panic resistant ,FAB-14024,37360,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,01/Feb/19 4:43 PM,03/Dec/19 3:03 AM,28/Oct/23 3:04 AM,07/Feb/19 9:13 PM,,,,,,,,,,,,,,,0,,,,,"If a request to a prover peer generates a panic, this will crash the peer. To goal of this story is to add panic resistance.",,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,FAB-11149,,,No,,Unset,No,,,"1|i00a6n:",,,,No,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Feb/19 4:56 PM;angelo.decaro;https://gerrit.hyperledger.org/r/29098;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Proactively campaign when a new channel is created,FAB-14025,37361,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,guoger,guoger,guoger,01/Feb/19 4:49 PM,11/Mar/19 10:13 AM,28/Oct/23 3:04 AM,08/Mar/19 1:44 AM,v2.0.0,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,watchlist,,,,"When a new channel is created, one of OSNs in this channel should proactively start campaign, instead of having all nodes passively waiting for ElectionTimeout, which could be 5~10s by default.

-A simplest approach is to have *the node with smallest raft id to campaign*, (since all nodes have this knowledge) so there's no contention.-
To deterministically *and* randomly pick one node in channel to campaign, we could pick the node whose id is:
{code}id == hash(channel_id) % len(nodes) + 1 {code}

Note, we should modify an existing integration test to check this.",,guoger,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00a6v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,kchristidis,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Feb/19 12:28 AM;guoger;made a minor attempt, and it seems to be more complicated than I expected:
- when picked node starts campaign and sends out {{Vote Request}}, it's very likely that other nodes are not ready to receive messages yet, and we regress to long-wait
- in order to really shorten leaderless period, we should have a background thread _periodically_ campaign till success, or max attempt, or another node is elected. This adds more config options and complicates code and UT
- UT needs to be mildly refactored to accommodate this (start chains and wait for them to be ready to accept messages)

-IMO, this should be deferred after initial release.-;;;","28/Feb/19 10:45 PM;kchristidis;Thanks for working on this. I actually think it'd be nice to get in to 1.4.1 if we can make it. Are you proceeding according to the second bullet point in your comment above?;;;","01/Mar/19 12:27 AM;guoger;[~kchristidis] yes, i'm going to implement a background thread that does periodical campaign, _only_ when a chain is started with matched id, inferred from hash of channel id.;;;","06/Mar/19 4:37 PM;guoger;https://gerrit.hyperledger.org/r/c/29872/;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Only the rightful owner can spend her token,FAB-14026,37366,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,01/Feb/19 5:06 PM,03/Dec/19 3:05 AM,28/Oct/23 3:04 AM,08/Feb/19 10:16 PM,,,,,,,,,,fabric-token,,,,,0,,,,,The goal of this story is to check that Alice cannot spend Bob's tokens,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,FAB-14001,,,No,,Unset,No,,,"1|i00a7z:",,,,No,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
modify proto message OutputToken so that it is identified by its txID and index,FAB-14027,37373,37248,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,KaoutarEL,KaoutarEL,KaoutarEL,01/Feb/19 6:45 PM,08/Feb/19 12:19 AM,28/Oct/23 3:04 AM,07/Feb/19 8:20 PM,,,,,,,,,,,,,,,0,fabtoken,,,,,,angelo.decaro,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00a9j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,KaoutarEL,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Feb/19 12:19 AM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/29103/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
rename InputID to TokenID,FAB-14028,37375,37248,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,KaoutarEL,KaoutarEL,KaoutarEL,01/Feb/19 7:49 PM,09/Feb/19 12:30 AM,28/Oct/23 3:04 AM,08/Feb/19 11:34 PM,,,,,,,,,,,,,,,0,fabtoken,,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00a9r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Feb/19 12:30 AM;KaoutarEL;https://gerrit.hyperledger.org/r/#/c/29146/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Modify client so that it takes protobuf InputId instead of bytes to identify tokens,FAB-14029,37377,36747,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,KaoutarEL,KaoutarEL,KaoutarEL,01/Feb/19 10:42 PM,09/Feb/19 12:33 AM,28/Oct/23 3:04 AM,07/Feb/19 10:43 PM,,,,,,,,,,,,,,,0,fabtoken,,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00aa7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Feb/19 12:33 AM;KaoutarEL;https://gerrit.hyperledger.org/r/#/c/29137/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestLeaderYield has failed in the unit-tests as deadline exceeded in gossip service,FAB-14030,37384,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,C0rWin,sambhavdutt,sambhavdutt,02/Feb/19 1:16 AM,04/Apr/19 8:17 AM,28/Oct/23 3:04 AM,04/Mar/19 8:18 PM,v2.0.0,,,,,v2.0.0,,,,fabric-gossip,,,,,0,ci-flake,,,,"TestLeaderYield has failed in the unit-tests as deadline exceeded in gossip service tests. This has been observed in recent unit-test fails.

*Intermittent:* Yes
*Branch:* master
*Platform:*  s390x
*Error Snippet:*

{code:java}
09:52:34 	/w/workspace/fabric-unit-test-coverage-daily-master-s390x/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:128 +0x41a
09:52:34 --- FAIL: TestLeaderYield (93.95s)
09:52:34     integration_test.go:166: p0 started its delivery service
09:52:34     integration_test.go:171: p0 stopped its delivery service
09:52:34     integration_test.go:181: p1 hasn't taken over leadership within 1m0s: -1
09:52:34 [31m2019-02-01 09:51:59.114 EST [gossip.service] updateAnchors -> ERRO 043[0m Tried joining channel A but our org( OrgMSP0 ), isn't among the orgs of the channel: [Org0] , aborting.

09:52:34 [33m2019-02-01 09:52:29.151 EST [gossip.comm#20504] sendToEndpoint -> WARN 0d3[0m Failed obtaining connection for localhost:20500, PKIid:6c6f63616c686f73743a3230353030 reason: context deadline exceeded
09:52:34 [33m2019-02-01 09:52:29.288 EST [gossip.gossip#p0] Gossip -> WARN 0d4[0m Failed obtaining gossipChannel of [99 104 97 110 65] aborting
09:52:34 [33m2019-02-01 09:52:29.787 EST [gossip.gossip#p1] Gossip -> WARN 0d5[0m Failed obtaining gossipChannel of [99 104 97 110 65] aborting
09:52:34 [33m2019-02-01 09:52:31.212 EST [gossip.comm#20502] sendToEndpoint -> WARN 0d6[0m Failed obtaining connection for localhost:20500, PKIid:6c6f63616c686f73743a3230353030 reason: context deadline exceeded
09:52:34 [33m2019-02-01 09:52:32.151 EST [gossip.comm#20504] sendToEndpoint -> WARN 0d7[0m Failed obtaining connection for localhost:20500, PKIid:6c6f63616c686f73743a3230353030 reason: context deadline exceeded
09:52:34 [33m2019-02-01 09:52:33.351 EST [gossip.comm#20504] sendToEndpoint -> WARN 0d8[0m Failed obtaining connection for localhost:20501, PKIid:6c6f63616c686f73743a3230353031 reason: ConnStore is closing
09:52:34 [33m2019-02-01 09:52:33.352 EST [gossip.comm#20504] sendToEndpoint -> WARN 0d9[0m Failed obtaining connection for localhost:20500, PKIid:6c6f63616c686f73743a3230353030 reason: ConnStore is closing
09:52:34 [33m2019-02-01 09:52:33.355 EST [gossip.comm#20502] sendToEndpoint -> WARN 0da[0m Failed obtaining connection for localhost:20500, PKIid:6c6f63616c686f73743a3230353030 reason: ConnStore is closing
09:52:34 [33m2019-02-01 09:52:33.361 EST [gossip.comm#20502] sendToEndpoint -> WARN 0db[0m Failed obtaining connection for localhost:20501, PKIid:6c6f63616c686f73743a3230353031 reason: ConnStore is closing
09:52:34 FAIL
09:52:34 coverage: 81.0% of statements
09:52:34 FAIL	github.com/hyperledger/fabric/gossip/service	143.108s
{code}


*Build Logs:*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-s390x/12/",,C0rWin,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,FAB-15039,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,018f527a17b415a103f721773e5f9a20e3415625,Unset,No,,,"1|i00aan:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Feb/19 2:55 AM;denyeart;Hit again January 29th: [https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8464/consoleFull]

 ;;;","21/Feb/19 11:17 PM;rameshthoomu;This seems consistent now [https://jenkins.hyperledger.org/view/Daily/job/fabric-unit-test-coverage-daily-release-1.4-s390x/12/console.] Bumping the priority to High;;;","03/Mar/19 11:08 PM;C0rWin;https://gerrit.hyperledger.org/r/29771;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
TestEtcDraft failed in the unit-tests as the test timed out,FAB-14031,37385,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,guoger,sambhavdutt,sambhavdutt,02/Feb/19 1:34 AM,19/Mar/19 7:57 PM,28/Oct/23 3:04 AM,09/Feb/19 5:15 AM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"TestEtcDraft failed in the daily unit-tests as the test timed out in chain_test.

*Intermittent:* No
 *Branch:* master
 *Platform:* x86_64
 *Error Snippet:*
{code:java}
10:08:53     [90m/w/workspace/fabric-unit-test-coverage-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1765[0m
10:08:53       [91m[1mallows the leader to create multiple normal blocks without having to wait for them to be written out [It][0m
10:08:53       [90m/w/workspace/fabric-unit-test-coverage-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1967[0m
10:08:53 
10:08:53       [91mTimed out after 10.000s.
10:08:53       Expected
10:08:53           <int>: 0
10:08:53       to equal
10:08:53           <int>: 3[0m
10:08:53 
10:08:53       /w/workspace/fabric-unit-test-coverage-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1988
10:08:53 [90m------------------------------[0m
10:08:53 [32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m[32m•[0m
10:08:53 
10:08:53 [91m[1mSummarizing 1 Failure:[0m
10:08:53 
10:08:53 [91m[1m[Fail] [0m[90mChain [0m[0mMultiple Raft nodes [0m[90mwhen 3/3 nodes are running [0m[91m[1m[It] allows the leader to create multiple normal blocks without having to wait for them to be written out [0m
10:08:53 [37m/w/workspace/fabric-unit-test-coverage-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1988[0m
10:08:53 
10:08:53 [1m[91mRan 73 of 73 Specs in 29.067 seconds[0m
10:08:53 [1m[91mFAIL![0m -- [32m[1m72 Passed[0m | [91m[1m1 Failed[0m | [33m[1m0 Pending[0m | [36m[1m0 Skipped[0m
10:08:53 --- FAIL: TestEtcdraft (29.07s)
10:08:53 FAIL
10:08:53 coverage: 81.4% of statements
10:08:53 FAIL	github.com/hyperledger/fabric/orderer/consensus/etcdraft	31.726s
{code}
 cc: [~guoger]

*Build Logs:*

[https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-x86_64/343/]",,C0rWin,denyeart,guoger,rameshthoomu,sambhavdutt,vijaypunugubati,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,018f527a17b415a103f721773e5f9a20e3415625,Unset,No,,,"1|i00aav:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,guoger,rameshthoomu,sambhavdutt,vijaypunugubati,wlahti,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Feb/19 12:29 AM;wlahti;Also hit here: [https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8679/console];;;","07/Feb/19 4:06 AM;wlahti;And again: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8696/console;;;","07/Feb/19 2:15 PM;guoger;https://gerrit.hyperledger.org/r/c/29180/;;;","08/Feb/19 2:36 AM;sambhavdutt;This test fail has also been observed in fabric-merge unit-tests job.

*Build Logs*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/5618/
 ;;;","08/Feb/19 1:11 PM;guoger;Failure in fabric-merge job appears to be a different issue. Created FAB-14113 to track it.;;;",,,,,,,,,,,,,,,,,,,,,,,,
fabric-ca(v1.1) is unable to build as some index files failed to download,FAB-14032,37387,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Not Supported,,sambhavdutt,sambhavdutt,02/Feb/19 2:22 AM,19/Mar/19 8:12 PM,28/Oct/23 3:04 AM,27/Feb/19 11:27 PM,v1.1.0,,,,,,,,,fabric-build,,,,,0,ci-failure,,,,"The end-2-end job is failing,  fabric-ca is not able to build as some index files failed to download

*Intermittent:* No
*Branch:* release-1.1
*Platform:* s390x
*Error Snippet:*

{code:java}
10:11:06 [91mW: Failed to fetch http://security.debian.org/dists/jessie/updates/InRelease  Unable to find expected entry 'main/binary-s390x/Packages' in Release file (Wrong sources.list entry or malformed file)
10:11:06 
10:11:06 E: Some index files failed to download. They have been ignored, or old ones used instead.
10:11:06 [0mThe command '/bin/sh -c apt-get update && apt-get install -y netcat && rm -rf /var/cache/apt' returned a non-zero code: 100
10:11:07 Makefile:137: recipe for target 'build/image/fabric-ca/.dummy-s390x-1.1.1-snapshot-e656889' failed
{code}

*Build Logs:*

https://jenkins.hyperledger.org/view/Daily/job/fabric-end-2-end-daily-release-1.1-s390x/6/console",,ChristopherFerris,denyeart,mastersingh24,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,e6568899913a42ee6ac868cd0386422066e9f6bd,Unset,No,,,"1|i00abb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ChristopherFerris,denyeart,mastersingh24,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Feb/19 7:01 AM;mastersingh24;we aren't going to do anymore fabric-ca 1.1.x releases anyway;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move SignedData out of protos,FAB-14033,37389,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,02/Feb/19 3:07 AM,02/Mar/19 6:44 AM,28/Oct/23 3:04 AM,02/Mar/19 6:44 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00abr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Feb/19 3:09 AM;sykesm;https://gerrit.hyperledger.org/r/29106 [FAB-14033] move SignedData out of protos;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Re-cover encoder package with tests,FAB-14035,37391,37095,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,02/Feb/19 4:20 AM,04/Mar/19 9:11 PM,28/Oct/23 3:04 AM,12/Feb/19 8:49 AM,,,,,,v2.0.0,,,,fabric-tools,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ac7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a Fabric ordering service administrator, I want to be able to resume the service's operation if the Kafka logs have been lost",FAB-14036,37392,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,kchristidis,kchristidis,02/Feb/19 4:28 AM,17/Apr/21 12:15 AM,28/Oct/23 3:04 AM,17/Apr/21 12:15 AM,v1.2.0,,,,,v1.2.1,,,,fabric-orderer,,,,,0,,,,,"Our instructions explicitly call for disabling log retention on the backing Kafka cluster, but this bit goes by unnoticed occasionally:
{quote}log.retention.ms = -1. Until the ordering service adds support for pruning of the Kafka logs, you should disable time-based retention and prevent segments from expiring.
{quote}
If the Kafka cluster is pruning its logs, onboarding a new OSN to the network requires manually copying the ledger from an existing OSN, whose ledger is relatively up-to-date.

If the Kafka cluster has lost _all_ of its logs, the ordering service stops. The ordering service is designed to look at the latest block in its ledger, get the associated Kafka offset (say, 168), and then reach out to Kafka and say ""please bring me everything you got _after_ offset 168""). This request will fail on a Kafka cluster that has lost _all_ of its logs, because that cluster won't have an offset this high.

In order to address this problem, I propose that we introduce a {{RESET}} environment variable that, when set to {{true}}, instructs the OSN to just seek to the latest available offset the Kafka cluster has for each channel and call it a day.

The workflow is as follows:
 # Before moving on with this RESET operation OSN administrators should compare their local ledgers for each channel, and make sure all of them are _identical_. (If they're not, copy ledgers across the board, going with the longest one. Of course, make sure that signatures match, etc.)
 # Then: ensure no client requests (read/write) are reaching the ordering service.
 # Restart each OSN (don't have to do it sequentially...) with the RESET flag set to true.
 # Enable read/write requests from clients to the ordering service.
 # Things should work.

Ensure that subsequent restarts of OSNs have the RESET flag set to false.

Do note that if you wish to onboard a new OSN in a network that had its Kafka cluster reset, you will need to:
 # Push at least one transaction across all channels on the existing ordering service.
 # Then copy the ledger of an existing OSN to the new OSN.

We're doing this to ensure that the donor OSN has encoded offsets in its own ledger that are valid references in the new Kafka cluster.",,kchristidis,xana,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00acf:",,,,No,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kchristidis,xana,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Feb/19 4:29 AM;kchristidis;Will release this first as fix for the {{1.2}} branch and we'll take it from there.;;;","02/Feb/19 7:09 AM;kchristidis;The two commits needed to support this are here:

[https://github.com/kchristidis/fabric/commit/3198521dad3582c3e529b64481b92718a085dc27]

[https://github.com/kchristidis/fabric/commit/87b1b742676e393c19e26a5a08713b6e320fd573]

 ;;;","10/Jun/19 9:12 PM;xana;so what environment variable to add if I'm using docker compose;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Remove some unreachable code,FAB-14037,37393,37095,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,02/Feb/19 4:33 AM,04/Mar/19 9:11 PM,28/Oct/23 3:04 AM,12/Feb/19 8:50 AM,,,,,,v2.0.0,,,,fabric-tools,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00acn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Explicitly construct the default template configuration,FAB-14040,37396,37095,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,02/Feb/19 6:03 AM,04/Mar/19 9:11 PM,28/Oct/23 3:04 AM,12/Feb/19 8:58 AM,,,,,,v2.0.0,,,,fabric-tools,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00adb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Should reject a new Orderer with genesis file based on latest config block of app channel (instead of system channel),FAB-14041,37400,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,suryalnvs,suryalnvs,02/Feb/19 6:48 AM,03/Mar/19 9:58 PM,28/Oct/23 3:04 AM,04/Feb/19 11:31 PM,,,,,,v2.0.0,,,,fabric-orderer,,,,,0,raft,,,,"h2. Steps to Reproduce:
 # Config Updated the orderer system channel with new orderer as consentor
 # Config Updated the application channel with new orderer as consentor
 # Fetched the latest config block from application channel (instead of the proper way, to get it from the orderer system channel)
 # Supplied fetched latest config block from application channel from earlier step to new orderer during its launch as genesis file
 # Observed pulling blocks for channel, and eventually a panic in the orderers

h2. Observed:

When on boarding a new orderer, misconfigured it by supplying the latest config block of application channel during its launch as genesis file instead of latest config block from orderer system channel, orderer was able to pull blocks on the application channel (presumably thinking it was the systemchannel) until the next latest config block on the channel. When it reached and processed that channel config update (from step 2), the orderers panicked.

h2. Expected:

We expect a rejection by the orderer when the wrong type of config block is used for an orderer genesis file, when launching an orderer.",,scottz,suryalnvs,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Feb/19 3:16 AM;suryalnvs;orderer4th-onboarding.zip;https://jira.hyperledger.org/secure/attachment/16700/orderer4th-onboarding.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00adj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,suryalnvs,yacovm,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Feb/19 6:05 AM;yacovm;[https://gerrit.hyperledger.org/r/#/c/29112/]

 

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
A mismatched version number between command and its description in the peer chaincode document,FAB-14042,37401,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,nnao,nnao,nnao,02/Feb/19 7:57 AM,18/Feb/19 11:54 PM,28/Oct/23 3:04 AM,18/Feb/19 11:54 PM,v1.4.0,,,,,v2.0.0,,,,fabric-docs,,,,,0,Documentation,,,,"In the peer chaincode document, there is a mismatched version number between peer chaincode command and its description.

Here is a description
<snip>
At version `1.0` on channel `mychannel` to version `1.1`, …
<snip>

Here is a command
{code:java} 
peer chaincode upgrade -o orderer.example.com:7050 --tls --cafile $ORDERER_CA -C mychannel -n mycc -v 1.2 -c '\{""Args"":[""init"",""a"",""100"",""b"",""200"",""c"",""300""]}' -P ""AND ('Org1MSP.peer','Org2MSP.peer')""
{code}

https://hyperledger-fabric.readthedocs.io/en/latest/commands/peerchaincode.html#peer-chaincode-upgrade-example",,nnao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00adr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),nnao,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Feb/19 9:53 AM;nnao;https://gerrit.hyperledger.org/r/#/c/29111/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ensure completely asynchronous send of consensus messages in communication layer,FAB-14045,37404,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,03/Feb/19 7:48 AM,03/Mar/19 9:58 PM,28/Oct/23 3:04 AM,05/Feb/19 8:11 AM,v2.0.0,,,,,v2.0.0,,,,fabric-orderer,,,,,0,,,,,"The goroutine that processes commands and events from the Raft FSM is the same one that invokes Send() on the communication layer.

Thus, it's crucial that this send will be as short as possible, and will never block or get delayed by any remote node that is too slow to read the messages from a gRPC stream.

Moreover, the communication layer aims to be re-usable for byzantine environments, and therefore when a consensus message is sent, it shouldn't be blocked by the gRPC buffers (in case they get full).

 

We can add an application buffer (golang buffered channel) that the message send will put the message into the buffer, and a goroutine would asynchronously flush the buffer.

I propose, that if a message that is a consensus message is sent to a remote node, and the application (not gRPC) buffer is full - it will be dropped and the send will be canceled.
For transactions - it can block.",,guoger,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00aef:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,yacovm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Feb/19 9:44 AM;yacovm;[https://gerrit.hyperledger.org/r/#/c/29113/]

 ;;;","04/Feb/19 3:57 AM;yacovm;/cc [~kchristidis] [~guoger] [~tock] what do you guys think?;;;","04/Feb/19 1:08 PM;guoger;+1 for this. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
"Onboard an OSN upon startup, and restart it before finished",FAB-14046,37405,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,scottz,scottz,03/Feb/19 8:23 AM,24/Jul/19 5:59 AM,28/Oct/23 3:04 AM,24/Jul/19 5:59 AM,,,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,"Repeat FAB-13856, with these differences:

In SETUP section, create two channels, each with 10,000 blocks, instead of just one.

In the INPUTS section, Step 3:

* After starting up orderer4: watch as it pulls the blocks for one channel. It could take more than 2 minutes to complete that, and then start pulling blocks for the other application channel (before it finally does the systemchannel).
* After about 3 minutes, AFTER it completes the first channel AND WHILE still pulling blocks for second channel:
## Stop and restart the new orderer4
## After it appears the orderer completes the onboarding process (by looking at logs and metrics), send transactions on both channels to confirm functionality.

Variation: Repeat the test, but this time start traffic running on both channels (submitting transactions to the existing orderers - not the onboarding orderer) before/during/after restarting the onboarding orderer. (Refer also to similar testcase FAB-13702 for dynamic onboarding with traffic, and FAB-14047 for dynamic onboarding with traffic plus restart.)",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13856,,,,FAB-14047,FAB-14300,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|i006za:",,,,Unset,Unset,Week ending 2019-Feb-22,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),scottz,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,lindluni-patch-1,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Dynamically Onboard an OSN to application channel, and restart it before finished",FAB-14047,37406,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,scottz,scottz,03/Feb/19 8:35 AM,24/Jul/19 5:59 AM,28/Oct/23 3:04 AM,24/Jul/19 5:59 AM,,,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,"Repeat FAB-13861m with these differences:

In SETUP section, create two channels, each with 10,000 blocks, instead of just one.

In the INPUTS section, after step 4, while the new orderer4 is onboarding:
 * Watch orderer4 as it pulls the blocks for one channel. It could take more than 2 minutes to pull 10,000 transaction. Once all done with the first channel, it will pull blocks for the other application channel (before it finally does the systemchannel).
 * After about 3 minutes, AFTER it completes the first channel AND WHILE still pulling blocks for second channel:
 ## Start traffic running on both channels, and immediately afterwards,
 ## Stop and restart the new orderer4",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14046,FAB-13861,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|i006za:i",,,,Unset,Unset,Week ending 2019-Feb-22,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unit test flake in TestDataLeakage,FAB-14048,37407,,Bug,To Do,FAB,Fabric,software,denyeart,,,Medium,,,denyeart,denyeart,04/Feb/19 3:29 AM,23/Nov/20 11:45 PM,28/Oct/23 3:04 AM,,,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"[https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8574/consoleFull]
{code:java}
14:56:20 — FAIL: TestDataLeakage (192.07s)
 14:56:20 gossip_test.go:1011: 0 joined A
 14:56:20 gossip_test.go:1011: 1 joined A
 14:56:20 gossip_test.go:1011: 2 joined A
 14:56:20 gossip_test.go:1011: 3 joined A
 14:56:20 gossip_test.go:1011: 4 joined A
 14:56:20 gossip_test.go:1011: 5 joined B
 14:56:20 gossip_test.go:1011: 6 joined B
 14:56:20 gossip_test.go:1011: 7 joined B
 14:56:20 gossip_test.go:1011: 8 joined B
 14:56:20 gossip_test.go:1011: 9 joined B
 14:56:20 gossip_test.go:1030: Metadata sync took 3.000504142s
 14:56:20 gossip_test.go:1064: Dissemination took 52.441271ms
 14:56:20 gossip_test.go:1547: 
 14:56:20 Error Trace: gossip_test.go:1547
 14:56:20 asm_amd64.s:1333
 14:56:20 Error: Didn't stop within a timely manner
 14:56:20 Test: TestDataLeakage
 14:56:20 gossip_test.go:1622: 
 14:56:20 Error Trace: gossip_test.go:1622
 14:56:20 gossip_test.go:1069
 14:56:20 Error: Timeout expired, while %s
 14:56:20 Test: TestDataLeakage
 14:56:20 Messages: waiting for all instances to stop
 14:56:20 gossip_test.go:1070: Stop took 3m0.002776731s
 14:56:20 FAIL
 14:56:20 coverage: 86.3% of statements
 14:56:20 FAIL github.com/hyperledger/fabric/gossip/gossip 252.262s{code}",,denyeart,MHBauer,,,,,,,,,,,,,,,,,,,,,,,FAB-14172,,,,,,,,,FAB-15309,,,,,,,"24/May/19 3:57 AM;MHBauer;fab-14048-repro.log;https://jira.hyperledger.org/secure/attachment/17252/fab-14048-repro.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01h7z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/May/19 7:07 AM;MHBauer;Can't reproduce. Doesn't look like anyone has reported an occurrence for three months. Suggest closing.;;;","24/May/19 3:58 AM;MHBauer;left it on in a loop and managed to repro. 

[^fab-14048-repro.log] ;;;","24/May/19 4:23 AM;MHBauer;this looks possibly related to the same comm/conn/connection issues as elsewhere. Since gossip uses Send(), there's no guarantee a message goes through. If it gets dropped on the floor at any point, it won't be resent.

Test structure could be better. There are implicit encodings of ""chA has height 1, and chB has height 2"" but it's not explicitly said, and spread throughout the test.

Given the structure, I don't see any reason why after failing to send a message, gossip would still know to care about sending the message. In a way the test assumes 100% success while sending. Since we're using actual network connections, that is not good.

;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Transfer to a invalid owner or amount should be rejected.,FAB-14049,37411,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,04/Feb/19 10:06 PM,26/Feb/19 6:30 PM,28/Oct/23 3:04 AM,26/Feb/19 6:30 PM,,,,,,,,,,fabric-token,,,,,0,fabtoken,,,,This task is to test that a transfer to a invalid owner or amount should be rejected.,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,FAB-14001,,,No,,Unset,No,,,"1|i00aev:",,,,No,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Feb/19 10:10 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/29117/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
ATD does not catch up the latest Cello directory structure,FAB-14050,37331,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,tkueda,tkueda,31/Jan/19 11:12 PM,21/Sep/19 5:34 AM,28/Oct/23 3:04 AM,21/Sep/19 5:34 AM,,,,,,,,,,fabric-quality,,,,,0,,,,,"Recently, Cello restructured the directory structure and moved the playbooks
 * From (Old): src/agent/ansible
 * To (New):    src/operator-dashboard/agent/ansible

ATD has some hard-coded relative paths to Cello, for example in tools/ATD/roles/tool_pte/fabrictestsetup/tasks/apply.yml. So, ATD cannot work with the latest Cello. I tentatively fixed this issue. I'm planning to post the patch but let me know if someone already has a solution.",,denyeart,scottz,tkueda,vramaiitkgp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13203,,,No,,Unset,No,,,"1|i00a07:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,scottz,tkueda,vramaiitkgp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Feb/19 2:41 AM;denyeart;[~tkueda] I moved the issue from Fabric (FAB) to Cello (CE) project.;;;","04/Feb/19 3:37 PM;tkueda;[~denyeart] OK. So, do the cello developers maintain the ATD playbooks? Who should I contact if I want to merge my updates to fabric-test/tools/ATD?

 ;;;","04/Feb/19 10:20 PM;denyeart;[~tkueda] ok, I didn't know this was in fabric-test. I've moved back to FAB with component fabric-quality. From the change history it looks like [~suryalnvs] is the developer. Please collaborate, you can reach him at rocket chat suryalanka.;;;","08/Aug/19 8:07 AM;scottz;[~tkueda] I am reviewing some issues in our backlog. I have not seen a patch submitted to fix this. Did I miss it? Let us know if this can be closed/abandoned, or if a patch is forthcoming, or if you desire assistance.;;;","21/Sep/19 5:34 AM;scottz;ATD is being deprecated and removed in latest release.;;;",,,,,,,,,,,,,,,,,,,,,,,,
"After migration, block incoming normal TX's on Raft until Migration State is reset to NONE",FAB-14052,37416,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,tock,tock,tock,04/Feb/19 11:01 PM,04/Apr/19 7:48 PM,28/Oct/23 3:04 AM,04/Apr/19 7:48 PM,,,,,,,,,,,,,,,0,,,,,,,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00afz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move discovery extensions out of protos and into discovery package,FAB-14053,37417,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,04/Feb/19 11:03 PM,02/Mar/19 6:43 AM,28/Oct/23 3:04 AM,02/Mar/19 6:43 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ag7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Memory leak in Raft OSNs,FAB-14054,37418,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,scottz,scottz,04/Feb/19 11:22 PM,24/Feb/19 6:08 AM,28/Oct/23 3:04 AM,15/Feb/19 8:17 AM,,,,,,v2.0.0,,,,fabric-orderer,,,,,0,raft,,,,"A long traffic run was started Feb 1 evening.
 It was unexpectedly observed that the memory utilization continually climbs.
 (Strangely enough, the growth is not even consistent among the orderers.)

We used images built Thursday night, so it DID include the streaming changes that were merged Thursday Jan 31.

We used prometheus to monitor the memory and disk usage. Refer to graphs attached from a 24-hour timespan, Sat am - Sun am.
 Disk utilization (count)
 Memory utilization (percent)
 Memory utilization (count)

 

Design team provided these instructions to enable the golang profiler before start test (using ORDERER_GENERAL_PROFILE):

    [https://github.com/hyperledger/fabric/blob/master/sampleconfig/orderer.yaml#L135-L136]

 

For suspected memory leak, they suggest to collect during/after the test: 

    To see how many connections the orderer has

        netstat -anp | grep orderer

    Connect to orderer and dump the stacktrace goroutines into the output, to check for goroutine leak:

        kill -SIGUSR1 1

    An enumeration of the open file descriptors (the <pid> is the process ID)

        cd /proc/<pid>; ls -lr fd | wc -l

     Collect the logs too.",,guoger,scottz,suryalnvs,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13810,,,,,,,"12/Feb/19 7:56 AM;suryalnvs;02112019-orderer1st-netstat.txt;https://jira.hyperledger.org/secure/attachment/16784/02112019-orderer1st-netstat.txt","12/Feb/19 7:56 AM;suryalnvs;02112019-orderer1st-out.png;https://jira.hyperledger.org/secure/attachment/16785/02112019-orderer1st-out.png","12/Feb/19 7:56 AM;suryalnvs;02112019-orderer1st-pprof.pb.gz;https://jira.hyperledger.org/secure/attachment/16786/02112019-orderer1st-pprof.pb.gz","12/Feb/19 7:56 AM;suryalnvs;02112019-orderer2nd-netstat.txt;https://jira.hyperledger.org/secure/attachment/16787/02112019-orderer2nd-netstat.txt","12/Feb/19 7:56 AM;suryalnvs;02112019-orderer2nd-out.png;https://jira.hyperledger.org/secure/attachment/16788/02112019-orderer2nd-out.png","12/Feb/19 7:56 AM;suryalnvs;02112019-orderer2nd-pprof.pb.gz;https://jira.hyperledger.org/secure/attachment/16789/02112019-orderer2nd-pprof.pb.gz","12/Feb/19 7:56 AM;suryalnvs;02112019-orderer3rd-netstat.txt;https://jira.hyperledger.org/secure/attachment/16790/02112019-orderer3rd-netstat.txt","12/Feb/19 7:56 AM;suryalnvs;02112019-orderer3rd-out.png;https://jira.hyperledger.org/secure/attachment/16791/02112019-orderer3rd-out.png","12/Feb/19 7:56 AM;suryalnvs;02112019-orderer3rd-pprof.pb.gz;https://jira.hyperledger.org/secure/attachment/16792/02112019-orderer3rd-pprof.pb.gz","12/Feb/19 8:10 AM;suryalnvs;02112019-orderers-container-memory-during-traffic-2hours.png;https://jira.hyperledger.org/secure/attachment/16794/02112019-orderers-container-memory-during-traffic-2hours.png","12/Feb/19 8:10 AM;suryalnvs;02112019-orderers-pod-memory.png;https://jira.hyperledger.org/secure/attachment/16795/02112019-orderers-pod-memory.png","12/Feb/19 7:56 AM;suryalnvs;02112019-top-command-output-on-orderers.txt;https://jira.hyperledger.org/secure/attachment/16793/02112019-top-command-output-on-orderers.txt","14/Feb/19 1:57 AM;suryalnvs;021319-heap-orderer1st.zip;https://jira.hyperledger.org/secure/attachment/16806/021319-heap-orderer1st.zip","14/Feb/19 1:57 AM;suryalnvs;021319-heap-orderer2nd.zip;https://jira.hyperledger.org/secure/attachment/16807/021319-heap-orderer2nd.zip","14/Feb/19 1:57 AM;suryalnvs;021319-heap-orderer3rd.zip;https://jira.hyperledger.org/secure/attachment/16808/021319-heap-orderer3rd.zip","14/Feb/19 1:24 AM;suryalnvs;021319-memory-orderers.txt;https://jira.hyperledger.org/secure/attachment/16805/021319-memory-orderers.txt","06/Feb/19 5:32 AM;suryalnvs;configtx.yml;https://jira.hyperledger.org/secure/attachment/16726/configtx.yml","04/Feb/19 11:55 PM;suryalnvs;fd-orderer1st.txt;https://jira.hyperledger.org/secure/attachment/16705/fd-orderer1st.txt","05/Feb/19 4:41 AM;suryalnvs;fd_withprofile_orderer1st.txt;https://jira.hyperledger.org/secure/attachment/16708/fd_withprofile_orderer1st.txt","04/Feb/19 11:36 PM;scottz;longrun1_diskGBused.png;https://jira.hyperledger.org/secure/attachment/16701/longrun1_diskGBused.png","04/Feb/19 11:36 PM;scottz;longrun1_memGBused.png;https://jira.hyperledger.org/secure/attachment/16702/longrun1_memGBused.png","04/Feb/19 11:36 PM;scottz;longrun1_memPercentused.png;https://jira.hyperledger.org/secure/attachment/16703/longrun1_memPercentused.png","04/Feb/19 11:55 PM;suryalnvs;netstat-orderer1st.txt;https://jira.hyperledger.org/secure/attachment/16706/netstat-orderer1st.txt","05/Feb/19 4:41 AM;suryalnvs;netstat_withprofile_orderer1st.txt;https://jira.hyperledger.org/secure/attachment/16709/netstat_withprofile_orderer1st.txt","06/Feb/19 5:22 AM;suryalnvs;orderer1st-log-1-withSnapshotInterval.zip;https://jira.hyperledger.org/secure/attachment/16723/orderer1st-log-1-withSnapshotInterval.zip","06/Feb/19 5:22 AM;suryalnvs;orderer1st-log-withSnapshotInterval.zip;https://jira.hyperledger.org/secure/attachment/16724/orderer1st-log-withSnapshotInterval.zip","05/Feb/19 4:55 AM;suryalnvs;orderer1st-pprof.orderer.alloc_objects.alloc_space.inuse_objects.inuse_space.003.pb.gz;https://jira.hyperledger.org/secure/attachment/16713/orderer1st-pprof.orderer.alloc_objects.alloc_space.inuse_objects.inuse_space.003.pb.gz","05/Feb/19 4:54 AM;suryalnvs;orderer1st-profile.png;https://jira.hyperledger.org/secure/attachment/16712/orderer1st-profile.png","06/Feb/19 5:23 AM;suryalnvs;orderer1st-withSnapshotInterval.png;https://jira.hyperledger.org/secure/attachment/16725/orderer1st-withSnapshotInterval.png","06/Feb/19 5:18 AM;suryalnvs;orderer1st-withSnapshotinterval-afterTraffic.txt;https://jira.hyperledger.org/secure/attachment/16722/orderer1st-withSnapshotinterval-afterTraffic.txt",,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,#110498372c,Unset,No,,,"1|i00agf:",,,,Unset,Unset,,,,"1. Create a blockchain network with 3 raft orderers.
2. We created 100 channels, but only used one for the traffic: testorgchannel1.
3. Identify the channel1 leader from the logs (orderer-3rd in our example).
4. Using only 1 thread, the client broadcasts transactions to the leader.
In our example we used PTE in Constant Mode (to send the next transaction as soon as the TX response ACK for the previous one was received. We used a send rate = 100ms; so most blocks contain 20 TXs.
batchsize = 500 ; batchtimeout=2s.
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,scottz,suryalnvs,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Feb/19 5:46 AM;yacovm;[~guoger] the [inuse_space graph|https://jira.hyperledger.org/secure/attachment/16712/orderer1st-profile.png] hints the memory leak comes from the WAL.... can you take a look?

I don't see in the logs attached that *Taking snapshot* is written... can it be that a spanshot is never taken and therefore the WAL is never compacted? ;;;","05/Feb/19 12:16 PM;guoger;[~yacovm] I suspect that it's not enabled. May somebody check the {{SnapshotInterval}} value in channel config?;;;","06/Feb/19 5:31 AM;suryalnvs;After adding SnapshotInterval, reran the test and observed the following:

1. Orderer3 is the leader for both orderer system channel and application channel

2. After running the traffic for 40000 transactions, memory for orderer1st and orderer2nd gradually increased whereas orderer3rd has stable memory
{code:java}
ibmadmin@cello-launcher:~/cello/src/agent/ansible/vars$ ./kubectl --kubeconfig=kubeconfig.regression top pod orderer1st-ordererorg 
NAME                    CPU(cores)   MEMORY(bytes) 
orderer1st-ordererorg   12m          460Mi
ibmadmin@cello-launcher:~/cello/src/agent/ansible/vars$ ./kubectl --kubeconfig=kubeconfig.regression top pod orderer2nd-ordererorg
NAME                    CPU(cores)   MEMORY(bytes)
orderer2nd-ordererorg   16m          490Mi
ibmadmin@cello-launcher:~/cello/src/agent/ansible/vars$ ./kubectl --kubeconfig=kubeconfig.regression top pod orderer3rd-ordererorg
NAME                    CPU(cores)   MEMORY(bytes)
orderer3rd-ordererorg   6m           230Mi
{code}
3. Checked back again after around 5 minutes
{code:java}
ibmadmin@cello-launcher:~/cello/src/agent/ansible/vars$ ./kubectl --kubeconfig=kubeconfig.regression top pod orderer1st-ordererorg ; date
NAME                    CPU(cores)   MEMORY(bytes)
orderer1st-ordererorg   4m           602Mi
Tue Feb  5 15:02:52 EST 2019
ibmadmin@cello-launcher:~/cello/src/agent/ansible/vars$ ./kubectl --kubeconfig=kubeconfig.regression top pod orderer2nd-ordererorg ; date
NAME                    CPU(cores)   MEMORY(bytes)
orderer2nd-ordererorg   4m           600Mi
Tue Feb  5 15:03:13 EST 2019
ibmadmin@cello-launcher:~/cello/src/agent/ansible/vars$ ./kubectl --kubeconfig=kubeconfig.regression top pod orderer3rd-ordererorg ; date
NAME                    CPU(cores)   MEMORY(bytes)
orderer3rd-ordererorg   7m           229Mi
Tue Feb  5 15:03:23 EST 2019
{code}
Attached
 * orderer1st-logs-withSnapshotInterval.zip, orderer1st-logs-1-withSnapshotInterval.zip (extension)
 * orderer1st-withSnapshotinterval-afterTraffic.txt
 * orderer1st-withSnapshotInterval.png
 * confixtx.yml used

 Environment variables used for orderers
{code:java}
        - { name: ""FABRIC_LOGGING_SPEC"", value: ""debug:orderer.common.cluster.step=error"" }
        - { name: ""ORDERER_GENERAL_PROFILE_ENABLED"", value: ""true"" }
        - { name: ""ORDERER_GENERAL_LISTENADDRESS"", value: ""0.0.0.0"" }
        - { name: ""ORDERER_FILELEDGER_LOCATION"", value: ""/shared/data"" }
        - { name: ""ORDERER_CONSENSUS_WALDIR"", value: ""/shared/data/etcdraft/wal"" }
        - { name: ""ORDERER_CONSENSUS_SNAPDIR"", value: ""/shared/data/etcdraft/snapshot"" }
        - { name: ""ORDERER_GENERAL_GENESISMETHOD"", value: ""file"" }
        - { name: ""ORDERER_GENERAL_GENESISFILE"", value: ""/etc/hyperledger/fabric/artifacts/keyfiles/genesis.block"" }
        - { name: ""ORDERER_GENERAL_LOCALMSPID"", value: ""ordererorg"" }
        - { name: ""ORDERER_GENERAL_LOCALMSPDIR"", value: ""/etc/hyperledger/fabric/artifacts/keyfiles/ordererorg/orderers/orderer1st-ordererorg.ordererorg/msp"" }
        - { name: ""ORDERER_GENERAL_TLS_ENABLED"", value: ""true"" }
        - { name: ""ORDERER_GENERAL_TLS_PRIVATEKEY"", value: ""/etc/hyperledger/fabric/artifacts/keyfiles/ordererorg/orderers/orderer1st-ordererorg.ordererorg/tls/server.key"" }
        - { name: ""ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY"", value: ""/etc/hyperledger/fabric/artifacts/keyfiles/ordererorg/orderers/orderer1st-ordererorg.ordererorg/tls/server.key"" }
        - { name: ""ORDERER_GENERAL_TLS_CERTIFICATE"", value: ""/etc/hyperledger/fabric/artifacts/keyfiles/ordererorg/orderers/orderer1st-ordererorg.ordererorg/tls/server.crt"" }
        - { name: ""ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE"", value: ""/etc/hyperledger/fabric/artifacts/keyfiles/ordererorg/orderers/orderer1st-ordererorg.ordererorg/tls/server.crt"" }
        - { name: ""ORDERER_GENERAL_TLS_ROOTCAS"", value: ""[/etc/hyperledger/fabric/artifacts/keyfiles/ordererorg/orderers/orderer1st-ordererorg.ordererorg/tls/ca.crt]"" }
        - { name: ""ORDERER_GENERAL_CLUSTER_ROOTCAS"", value: ""[/etc/hyperledger/fabric/artifacts/keyfiles/ordererorg/orderers/orderer1st-ordererorg.ordererorg/tls/ca.crt]"" }
        - { name: ""ORDERER_KAFKA_RETRY_SHORTINTERVAL"", value: ""1s"" }
        - { name: ""ORDERER_KAFKA_RETRY_SHORTTOTAL"", value: ""30s"" }
        - { name: ""ORDERER_KAFKA_VERBOSE"", value: ""true"" }
{code}
 ;;;","07/Feb/19 12:29 AM;yacovm;Can you try to set the snapshot interval to 5 and try again, but without 100 channels (only 1 application channel), and also - get the stack trace of the goroutines at the end using the SIGUSR1 signal? (stack trace and that memory heap dump picture too)

Thanks in advance. ;;;","07/Feb/19 4:19 AM;yacovm;and can we check it for a more prolonged period of time - like a couple of hours? ;;;","07/Feb/19 8:28 AM;scottz;Yes, [~kchristidis] , we will update the RaftSVT epic where the ""standard"" settings are described.

Yes, [~yacovm] , we will rerun as you request. The lab Surya is using is already using only 1 channel. We will set the snapshot interval to 5, and run for 2 hours before collecting the requested data.

I would like to clarify something from [~suryalnvs] 's previous comment. The data that he collected and shared in his comment shows a memory increase in 2 of the 3 orderers during a period when NO traffic was running. Steps he did:
 # Send 40000 TXs
 # wait until test finished
 # wait a few (10) minutes more
 # execute the top command (his item 2)
 # wait 5 minutes
 # execute the top command (his item 3, which shows orderer 3 with approx same memory usage, but others increased usage)

This was surprising. And it is a different scenario than what was first captured, which showed our pictures of memory consumption increasing in all 3 orderers (albeit somewhat inconsistently) while traffic was running continuously over a 24 hour period. So it seems we may have multiple code paths that could leak memory.

Now that I've clarified that, rest assured that Surya confirms he will rerun the traffic scenario and collect the data as requested, as soon as he frees up from the urgent work his manager asked him to do today. (Apologies for the delay. I suspect it may be another day or two.)

 ;;;","12/Feb/19 2:17 AM;suryalnvs;[~yacovm] What value should be used for SnapshotInterval for rerun as it will be referring bytes with FAB-13656 change ?;;;","12/Feb/19 4:41 AM;yacovm;5MB;;;","12/Feb/19 8:00 AM;suryalnvs;Reran the test with 5MB as snapshot interval and for 2 hours.
 * orderer3 is the leader on testorgschannel1
 * orderer2 is the leader on orderer system channel
 * orderer2 is the ingress for traffic during the test on testorgschannel1

Attached the following:

1. netstat and number of file descriptors output: 02112019-orderer1st-netstat.txt, 02112019-orderer2nd-netstat.txt, 02112019-orderer3rd-netstat.txt

2. pprof out image: 02112019-orderer1st-out.png, 02112019-orderer2nd-out.png, 02112019-orderer3rd-out.png

3. pprof pb.gz file: 02112019-orderer1st-pprof.pb.gz,02112019-orderer2nd-pprof.pb.gz, 02112019-orderer3rd-pprof.pb.gz

4. output of top on all orderers for 100 minutes during the traffic: 02112019-top-command-output-on-orderers.txt

5. Memory analysis from grafana: 02112019-orderers-pod-memory, 02112019-orderers-container-memory-during-traffic-2hours;;;","12/Feb/19 10:47 PM;yacovm;how come the [top command|https://jira.hyperledger.org/secure/attachment/16793/02112019-top-command-output-on-orderers.txt] shows memory which is a lot less than the [pod memory|https://jira.hyperledger.org/secure/attachment/16795/02112019-orderers-pod-memory.png]? ;;;","13/Feb/19 5:34 AM;scottz;Scratching our heads on this. Apparently, the tools do not display the same thing. Looked online for help. Here's what it seems now:
 * The grafana graph for the pod memory usage shows memory used including cached memory and buffers usage. 
 * The top command that we ran against the pods (each with only one container with one orderer) using ""kubectl top pod"" seems to show the memory used, but not counting any cache/buffers (which seem to be the vast majority).

During the life of the test, the overall numbers in the pod graph show an increase (this includes memory and cache/buffers). We ran a constant rate of traffic during the time period. The memory usage in the pods graphs shows a steady increase as well, especially in orderer2. And for the last eighth of the graph, the pod memory usage remained constant, when the traffic had been stopped.  

The series of top commands every minute shows the increase in memory usage too. By the end of the test, the memory shown by the top commands was higher than at the beginning.

====Mon Feb 11 15:27:17 EST 2019====
NAME CPU(cores) MEMORY(bytes) 
orderer1st-ordererorg 15m 75Mi 
orderer2nd-ordererorg 214m *276Mi* 
orderer3rd-ordererorg 59m 74Mi

====Mon Feb 11 17:07:48 EST 2019====
NAME CPU(cores) MEMORY(bytes) 
orderer1st-ordererorg 13m 102Mi 
orderer2nd-ordererorg 160m *419Mi* 
orderer3rd-ordererorg 47m 112Mi

We noticed in other tests (not this one) that the memory usage levels seemed to drop off once the traffic ended. But we do not see that here; possibly we did not wait long enough; we will continue to review other tests and try to understand the behavior.;;;","13/Feb/19 5:58 AM;yacovm;Well, 276MB and 429MB are not that bad. Can you prolong the test? I suggest we wait and see if it goes up to more, like 1GB, and let's see how far it can go in general, and only then provide:

 
 * Heap dump to a png file similar to [^02112019-orderer3rd-out.png].
 * Stack trace dump via *KILL -SIGUSR1*
 * Logs - you can just point us to a server and directory - we'll log in remotely and see, no need to upload them here.

 

Don't stop the traffic but just keep on sending stuff until we get to really high memory levels.

 

Also - what is special about orderer2 ? is that the leader?

 ;;;","13/Feb/19 7:04 AM;suryalnvs;orderer2 is ingress on application channel and it is the leader for orderer system channel;;;","13/Feb/19 7:16 AM;yacovm;If it's the ingress then it somewhat makes sense, because its transaction gRPC streams (we have a stream for consensus message, and a different stream for transactions, for quality of service) are saturated with transactions.;;;","14/Feb/19 1:28 AM;suryalnvs;[^021319-memory-orderers.txt] Top output of orderers from the latest traffic run.

In this case, orderer1 is the leader for application channel OSN and orderer2 is the ingress OSN.;;;","14/Feb/19 1:51 AM;yacovm;thanks for the memory log.

 
 # Can we also get the heap dumps in PNG form, please?
 The best would be to get the dumps really at the start, and the last dumps before it ran out of space.
 # Is it possible to reach at least 1GB on the memory consumption on the next run? I'm curious how far it can go.
 # We now have metrics that are pulled via prometheus, is it possible to obtain them in the next run, (metrics as a function of time)?
 specifically the ones in the ""go"" namespace, with ""mem"" as subsystem.;;;","14/Feb/19 2:06 AM;suryalnvs;Attached the heap dumps of all three orderers (only attached heap dumps from 1 hour apart for all orderers due to attachment limitation here). Can share more heap dumps if needed. Our first heap dump was from 6pm yesterday (02/12) whereas the network was launched on 02/11. The last heap dump is from 2.24am 02/13, 30min  before the out of space crash.;;;","14/Feb/19 2:14 AM;suryalnvs;Definitely, we are aiming to achieve for number 2 by increasing the storage volume of each orderer to 128GB from 50GB and number 3 by enabling metrics with prometheus in the new run with the following:
 * yacov/fabric:orderer image
 * logs - debug level
 * heap dumps - every 30 mins 
 * top output - every 30 mins
 * fabric prometheus metrics;;;","14/Feb/19 2:18 AM;yacovm;Let's run the latest version for the next run, no need to use my custom docker image.;;;","14/Feb/19 2:32 AM;sykesm;Let me expand on Yacov's requests:

We need to identify the area of memory growth over time. Any attempt to use one perspective for that is unworkable. This means, in particular, that looking at the Kubernetes memory information is insufficient. That also means looking at the pprof heap in use isn't enough.

So, what we need:

1. Every 30 minutes, please collect a pprof heap dump from the running orderers. Do this over a span of a couple of hours. Save this data as we will use it to determine what allocations are *growing* - not simply where they are allocated. This basically means something like {{curl -s http://address:port/debug/pprof/heap > heap-profile.pb}} is used to gather the data for each orderer. The thread create profile information could also be helpful...

2. Use the metrics support that was added to the orderer; we added it for a reason. In the case of memory leaks, the go.mem information gives a breakdown of the various types of memory usage. It's very possible memory growth is coming from somewhere other than the heap.

Thanks.;;;","14/Feb/19 2:34 AM;sykesm;{quote}logs - debug level{quote}

Why? We're not trying to debug a logic issue. All that will do is slow things down and generate way more data than is likely going to be helpful.;;;","14/Feb/19 2:39 AM;yacovm;Thanks [~sykesm] for chiming in, good ideas.

[~suryalnvs] - can you please accommodate Matt's requests?

 

By the way - how many/what containers do you have in each pod? What is each pod running besides an orderer?
{quote} 

./kubectl --kubeconfig=kubeconfig.regression top pod orderer1st-ordererorg
{quote}
 

Is it possible to know the memory consumption of the orderer process only, and not the entire pod?;;;","14/Feb/19 2:58 AM;sykesm;Latest data appears to show heap in use going *down* from the beginning to the end.

Example, orderer 1:
Feb 12, 6:03p - 36954.42
Feb 13, 2:24a - 21459.55K;;;","14/Feb/19 3:36 AM;suryalnvs;[~yacovm] one pod is having one container with orderer running in it. so a different pod for each orderer. No other processes are running along side orderer in the pod.;;;","14/Feb/19 5:38 AM;scottz;After talking with Matt and to accommodate other recent requests, here is the new plan in regards to our next test to gather data for mem leak investigation:
 * Use latest stable images.
 * Each pod has one container. Each container has one orderer.
 * Set logs to INFO level in the peers and orderers.
 * Dump heap usage in the orderers - every 15 mins.
 * Dump threadcreate usage in the orderers - every 15 mins.
 * Dump ""top"" output from the pods - every 15 mins.
 * Gather fabric prometheus metrics, especially go.mem.
 * In a new clean network, start traffic (32 threads).
 * After a few minutes for things to stabilize, monitor the metrics, say every 30 minutes.
 * After a couple hours, let's see what we see. After that, we can decide whether to add more time or traffic to the test run.;;;","15/Feb/19 4:50 AM;sykesm;Reviewed metrics from the run that was done last night. With the exception of a steady increase in the container working set of one orderer, everything is flat.

In the case of that one orderer with an increasing working set, there was no increase in heap, threads, go routines, or open file descriptors so it's not something that can be explained relative to those data points.

My understanding is that the test team is going to do a long run with request==limit==4GiB for the orderer containers to ensure things behave within the expected operational limits.;;;","15/Feb/19 5:59 AM;yacovm;Thanks [~sykesm] .

We got to see the usefulness of the 1.4 metrics work :);;;","15/Feb/19 8:14 AM;scottz;Matt's comments explained our analysis, so we can agree to close this now. Thanks to everyone for their help with this.

If we see other memory problems while monitoring other tests, including a weeklong test (restricting ourselves to using lower traffic rate such as 15 tps, in order to avoid running out of disk space), we will open a new bug.;;;","15/Feb/19 8:17 AM;scottz;It looks like we were misled by some of the memory analysis tools; we learned quite a bit about them. It appears that there is no memory leak in the heap. (Refer also to Matt's comments.);;;"
Allow construction of templates from sys channel config,FAB-14056,37423,37095,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,05/Feb/19 1:55 AM,04/Mar/19 9:11 PM,28/Oct/23 3:04 AM,18/Feb/19 11:45 PM,,,,,,v2.0.0,,,,fabric-tools,,,,,0,,,,,,,jyellick,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ahr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,mastersingh24,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Feb/19 11:46 PM;mastersingh24;[~jyellick] - Does this need to in 1.4.1 as well?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Expose base profile selection through configtxgen,FAB-14057,37424,37095,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,05/Feb/19 2:16 AM,14/Feb/20 7:43 AM,28/Oct/23 3:04 AM,19/Feb/19 1:35 PM,v1.4.0,,,,,v2.0.0,,,,fabric-tools,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ahz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Dynamically Onboard an OSN to application channel, while crash existing OSNs",FAB-14058,37426,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,scottz,scottz,05/Feb/19 2:50 AM,25/Feb/19 11:01 PM,28/Oct/23 3:04 AM,25/Feb/19 11:01 PM,,,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,"Repeat FAB-13861 with these differences:

Instead of just 10,000 transactions, generate 100,000 on the channel. This means it would take awhile (over 20 minutes) for the onboarding to complete, which gives us time to restart multiple orderers.  (In the specified IKS lab, it should take approx 2:20 minutes to pull 10,000.)

In the INPUTS section, after step 4, while the new orderer4 (O4) is onboarding, we must stop and start each of the other orderers, one at a time, and eventually stop multiple orderers.
 # A few seconds after start onboarding O4, look in the O4 logs to determine which orderer it is pulling from; observe INFO logs similar to this (which identifies orderer3 as the source) `Got block 16 of size 12KB from orderer3rd-ordererorg:7050`
 # Start traffic running again.
 # Stop the orderer3 container. Look at O4 logs to confirm if it is still pulling blocks - from a different orderer.
 # Restart orderer3.
 # Wait about 2 minutes, and then stop and start orderer2.
 # Wait about 2 minutes, and then stop and start orderer1.
 # Wait about 2 minutes, and then stop all three orderers, orderer1 and orderer2 and orderer3. This will ensure we stop (for at least the second time) the orderer from which O4 is pulling blocks. This leaves only O4 running, but unable to pull blocks because all other orderers are down at the moment.
 # Wait about 2 minutes, and restart all the orderers.
 # Wait about 2 minutes, and look at logs to see if O4 is pulling blocks from orderer1.
 # Wait a few more minutes; O4 should catch up and finish onboarding.

 ",,scottz,suryalnvs,,,,,,,,,,,,,,,,,FAB-13778,,,,,,,,,,,,,,,FAB-13861,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|i006za:r",,,,Unset,Unset,Week ending 2019-Feb-22,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Feb/19 6:32 AM;suryalnvs;As test case requires 100,000 blocks in the network, started traffic and current block height is at 11000;;;","24/Feb/19 4:11 PM;suryalnvs;Onboarding orderer was able to pull blocks from the orderers while bouncing all the orderers. Testorgschannel1 has 42354 blocks while onboarding orderer. Onboarding Orderer started pulling blocks at 12.07am 02/24 EST and completed at 01.55am 02/24 EST.

 

Observed: Onboarding orderer was able to switch to a different orderer when restarted the orderer from which it is pulling the blocks. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Drop code for Advanced and Atomic Swap,FAB-14061,37434,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,angelo.decaro,angelo.decaro,05/Feb/19 4:26 PM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,angelo.decaro,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ajr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove approve and transferFrom functionalities,FAB-14062,37441,36747,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,KaoutarEL,KaoutarEL,KaoutarEL,06/Feb/19 12:02 AM,12/Feb/19 3:34 AM,28/Oct/23 3:05 AM,12/Feb/19 3:34 AM,,,,,,,,,,,,,,,0,fabtoken,,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00akv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Feb/19 12:36 AM;KaoutarEL;https://gerrit.hyperledger.org/r/#/c/29154/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deliver can send multiple blocks when seeking newest,FAB-14063,37442,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,06/Feb/19 12:44 AM,16/Dec/19 3:56 AM,28/Oct/23 3:05 AM,06/Feb/19 11:01 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,"When seeking just the newest block (i.e. starting and stopping at newest), there is a timing bug that can lead to more than one block being sent. This happens if a block is committed just after Deliver acquires a ledger iterator. The logic for newest would then set the stop number to the ledger height minus one:
{code:java}
case *ab.SeekPosition_Newest:		
   stopNum = chain.Reader().Height() - 1{code}
which has changed since the iterator logic evaluated it.

The fix is to check whether the seek start and stop positions are both set to ""newest"" and set the stopNum to the value returned by the iterator for this case. ",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00al3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Feb/19 2:05 AM;wlahti;https://gerrit.hyperledger.org/r/c/29142/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE adds timeout options in gen_cfgInputs.sh,FAB-14064,37443,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,06/Feb/19 1:00 AM,07/Feb/19 1:40 AM,28/Oct/23 3:05 AM,07/Feb/19 1:38 AM,,,,,,,,,,fabric-quality,,,,,0,,,,,"Add timeout options: event timeout, request timeout, and grpc timeout to gen_cfgInputs.sh",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00alb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"06/Feb/19 1:14 AM;dongming;https://gerrit.hyperledger.org/r/#/c/29140/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add default value for SnapshotInterval in channel config,FAB-14065,37445,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,guoger,guoger,guoger,06/Feb/19 1:56 AM,07/Feb/19 3:46 AM,28/Oct/23 3:05 AM,07/Feb/19 3:46 AM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,,,,,"if {{SnapshotInterval}} is unset, it's default to 0, which means snapshotting is disabled. And raft memory storage will keep growing till OOM.

We should enforce a default value in this case, say 100 or 500 (open for suggestions on actual value)

And ideally, {{SnapshotInterval}} should be the size of accumulated data, instead of number of blocks, as captured in FAB-13656",,guoger,kchristidis,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13656,,,FAB-13656,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00alr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,kchristidis,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Feb/19 1:57 AM;guoger;cc [~yacovm] [~kchristidis] [~adarshsaraf123];;;","06/Feb/19 2:00 AM;yacovm;I'd say let's put it on 60 for now... that's my opinion :) ;;;","06/Feb/19 2:56 AM;kchristidis;Yes on the default value, yes on the size of accumulated data. The underlying problem here is that it all depends on the number of channels, so a proper default value is really tricky. My vote's closer to 100 MB rather than 500.;;;","06/Feb/19 4:07 PM;guoger;OK, let's use 100MB as default then.

-For the time being, I propose that we get https://gerrit.hyperledger.org/r/#/c/29150/ in, and switch to size-based snapshotting once FAB-13656 is done (I've started working on it). So we don't have accidental OOM if {{SnapshotInterval}} is not set.-

fixed by https://gerrit.hyperledger.org/r/c/29152/

cc [~yacovm][~kchristidis];;;",,,,,,,,,,,,,,,,,,,,,,,,,
Remove default policy emission from configtxgen for v2.0,FAB-14066,37446,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,06/Feb/19 3:36 AM,20/Feb/19 2:46 AM,28/Oct/23 3:05 AM,20/Feb/19 2:46 AM,v2.0.0,,,,,v2.0.0,,,,fabric-tools,,,,,0,,,,,"Default policy emission was deprecated in v1.3.  Now that we are moving to v2.0, this is an excellent opportunity to finally remove it from configtxgen entirely.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00alz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use net.JoinHostPort instead of simple fmt.Sprintf in gossip,FAB-14070,37451,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,06/Feb/19 4:44 PM,04/Apr/19 11:20 PM,28/Oct/23 3:05 AM,07/Feb/19 8:25 PM,,,,,,,,,,fabric-gossip,,,,,0,,,,,"Right now only IPv4 is supported since network address is created in the form of ""host:port"", while net.JoinHostPort takes into account the possibility of having an IPv6 host. ",,hagarm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00anb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Feb/19 4:59 PM;hagarm;https://gerrit.hyperledger.org/r/#/c/29151/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Metadata created JSON should include ref to fabric-contract-api schema,FAB-14071,37452,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,awjh-ibm,awjh-ibm,awjh-ibm,06/Feb/19 7:01 PM,07/Feb/19 6:41 PM,28/Oct/23 3:05 AM,07/Feb/19 6:41 PM,,,,,,v1.4.1,v2.0.0,,,,,,,,0,,,,,The JSON generated by the metadata command and GetMetadata should include a reference to the fabric-contract-api schema ,,awjh-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00anj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),awjh-ibm,,,,,,,,,,,release-2.4,purge-pd,main-emeritius,main,correct-nodeenv-version,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Backport FAB13816 from master branch,FAB-14072,37454,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,mbwhite,mbwhite,06/Feb/19 8:52 PM,18/Sep/19 5:52 PM,28/Oct/23 3:05 AM,18/Sep/19 5:52 PM,,,,,,,,,,,,,,,0,,,,,"- Back port the Metadata generate command

Ensure that the directory is created if it doesn't exist

Ensure that the path to the file can be either relative or absolute",,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00anz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve links to and explanation of available SDKs.,FAB-14073,37457,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,EdProsser,EdProsser,06/Feb/19 11:10 PM,04/Dec/20 4:40 AM,28/Oct/23 3:05 AM,04/Dec/20 4:40 AM,,,,,,,,,,fabric-docs,,,,,0,Documentation,,,,"Currently our explanations of where to find the SDKs is lacking, and the SDK pages have good information which could be better organised.",,EdProsser,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00aof:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),EdProsser,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/19 8:45 PM;EdProsser;Have started work on this, removing SDK section in getting_started.rst, replacing with a new document called api_intro.md that goes over the client and chaincode APIs available in Java Node and Go. 

This work will link to the external sites hosting the APIs, as well as give a brief 1-2 paragraphs about each.;;;","04/Dec/20 4:40 AM;pandrejko;Content was updated this year per Matthew White's request and Rob's new Getting Started flow addresses this as well.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Unit tests are failing in the due to Initialization error in BCCSP,FAB-14074,37458,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sambhavdutt,sambhavdutt,sambhavdutt,07/Feb/19 1:10 AM,19/Mar/19 8:13 PM,28/Oct/23 3:05 AM,11/Feb/19 11:14 PM,v1.4.0,v2.0.0,,,,,,,,fabric-ci,,,,,0,ci-failure,,,,"The unit-tests have failed in the daily code-coverage job(z) due to the initialization error in BCCSP package in fabric/bccsp/pkcs11

*Consistent:* Yes
*Branch:* master, release-1.4
*Platform:* s390x
*Error Snippet:*

{code:java}
20:19:11 Immutable = [false]Failed initiliazing BCCSP at [{SecLevel:256 HashFamily:SHA2 Ephemeral:false FileKeystore:<nil> DummyKeystore:<nil> Library:/usr/lib/s390x-linux-gnu/softhsm/libsofthsm2.so Label:ForFabric Pin:98765432 SoftVerify:true Immutable:false}]: [Failed initializing PKCS11 library /usr/lib/s390x-linux-gnu/softhsm/libsofthsm2.so ForFabric: Could not get Slot List [pkcs11: 0x190: CKR_CRYPTOKI_NOT_INITIALIZED]]FAIL	github.com/hyperledger/fabric/bccsp/pkcs11	0.033s
{code}

*Build Logs:*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-s390x/15/

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-release-1.4-s390x/10/",,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00aon:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use human readable format for `TickInterval`,FAB-14075,37461,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,guoger,guoger,guoger,07/Feb/19 2:01 AM,07/Mar/19 1:54 AM,28/Oct/23 3:05 AM,01/Mar/19 12:54 AM,v1.4.1,,,,,v1.4.1,,,,fabric-orderer,,,,,0,raft,,,,"Use human readable format, i.e. ""100ms"", ""1s"", in favor of {{uint64}} with millisecond as unit",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00apb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Feb/19 1:59 PM;guoger;https://gerrit.hyperledger.org/r/c/29530;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Register chaincode endpoints,FAB-14076,37464,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,binhn,binhn,binhn,07/Feb/19 6:13 AM,03/Dec/19 8:48 AM,28/Oct/23 3:05 AM,03/Dec/19 8:48 AM,v2.0.0,,,,,,,,,fabric-peer,,,,,0,,,,,"We need to configure peer with the info about the ""external"" chaincode, including its name, endpoint address, and root CA if using TLS. The chaincode 2.0 lifecycle model provides a good framework for a workflow to fit seamlessly with deployment model needed for deploying external chaincodes.

External chaincode will be treated as a new ""Type"" of chaincode called ""external"" (other types are ""golang"", ""java"", ""node"" and ""system"" as defined in the Fabric's proto definitions. In the chaincode lifecycle 2.0 workflow, a chaincode is packaged with other metadata in a targz file. The external chaincode is specified just as a ""yaml"" file with endpoint information including address and CA cert (used if TLS enabled). There is no other change to the chaincode lifecycle 2.0 workflow. ",,baohua,binhn,MichaelWang,muralisr,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13582,,,No,,Unset,No,,,"1|i00apz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,binhn,MichaelWang,muralisr,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/May/19 6:52 AM;muralisr;https://gerrit.hyperledger.org/r/#/c/31120/;;;","03/Dec/19 8:48 AM;muralisr;This is not needed in the new external builder model;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide cluster communication infrastructure metrics,FAB-14077,37465,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,07/Feb/19 6:13 AM,05/Mar/19 9:12 AM,28/Oct/23 3:05 AM,28/Feb/19 6:58 AM,,,,,,,,,,fabric-orderer,,,,,0,raft,,,,"The goal of this task is to create metrics for the cluster communication infrastructure, which entails:

Gauges for:
 * Sizes of egress queues
 * Number of active client side gRPC streams
 * Number of active server side gRPC streams
 * Number of goroutines for message dispatch
 * Number of active TLS connections

Histograms for:
 * Time it took to send a message down the stream

Counters for:
 * Number of messages dropped from the queue due to overflow

All metrics will be labeled with the channel name, except from the number of active TLS connections, which will be labeled with the remote host (it should be 1 or 0, unless we have a server that rotated certificates and forgot to change it in some channels, and that's why I want to do a per host labels- so the admins can easily see that they forgot a channel).

[~sykesm] [~kchristidis] any disagreements or ideas?",,kchristidis,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11937,FAB-11863,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00aq7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kchristidis,yacovm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Feb/19 11:46 PM;kchristidis;List looks good to me.

A couple of questions:

{quote}except from the number of active TLS connections, which will be labeled with the remote host (it should be 1 or 0, unless we have a server that rotated certificates and forgot to change it in some channels, and that's why I want to do a per host labels- so the admins can easily see that they forgot a channel){quote}
I'm not sure I get that. Can you rephrase?

{quote}Number of goroutines for message dispatch{quote}
What information does this give you? How would I, as the inspector of this metric, know whether the range that I'm witnessing is normal or not?;;;","23/Feb/19 12:53 AM;yacovm;{quote}What information does this give you? How would I, as the inspector of this metric, know whether the range that I'm witnessing is normal or not?
{quote}
 

It gives you information about whether you have a goroutine leak or not.

 

 

With regard to the TLS - I meant that if you have a cluster of *N* nodes where you rotated a TLS certificate to a node but didn't do channel updates for all channels (i.e you forgot a channel)- the other nodes would have connections to the new certificate, but also to the old one (it will be in FAILURE status, but the connection object will still exist).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer as client of chaincode,FAB-14080,37468,,Story,In CR Review,FAB,Fabric,software,denyeart,,,Medium,,muralisr,binhn,binhn,07/Feb/19 6:38 AM,03/Dec/19 8:22 AM,28/Oct/23 3:05 AM,,,,,,,,,,,fabric-peer,,,,,0,,,,,Implement peer as a gRPC client of chaincode. Peer instantiates connection to chaincode.,,binhn,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13582,,,No,,Unset,No,,,"1|i00aqv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),binhn,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update chaincode life cycle install step,FAB-14081,37469,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,muralisr,binhn,binhn,07/Feb/19 6:41 AM,03/Dec/19 8:48 AM,28/Oct/23 3:05 AM,03/Dec/19 8:48 AM,,,,,,,,,,fabric-peer,,,,,0,,,,,The install optionally doesn't need the chaincode source package. We need to modify the code to detect and process this chaincode as the 2.0 chaincode model.,,binhn,muralisr,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13582,,,No,,Unset,No,,,"1|i00ar3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),binhn,muralisr,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Dec/19 8:48 AM;muralisr;This is not needed in the new external builder model;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer connection pool,FAB-14082,37470,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,glindsell,binhn,binhn,07/Feb/19 7:15 AM,03/Dec/19 8:47 AM,28/Oct/23 3:05 AM,03/Dec/19 8:47 AM,,,,,,,,,,fabric-peer,,,,,0,,,,,Pending PoC with LB whether we need connection pool or not? It looks like Envoy and Linkerd might load balance if we do multiple rpc call over a connection.,,binhn,glindsell,muralisr,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13582,,,No,,Unset,No,,,"1|i00arb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),binhn,glindsell,muralisr,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Mar/19 3:00 AM;binhn;[~glindsell] we can provide some specific guidance w.r.t Linkerd and Envoy as part of FAB-14083 ;;;","22/Mar/19 8:17 PM;glindsell;[~binhn] Absolutely, there have been successful tests load balancing streams at the request level within an individual k8s cluster (which obviously has limited benefits given the distributed nature of HLF technology) and I still have open issues which are being worked on with the Linked community: [https://github.com/linkerd/linkerd2/issues/2120] for load balancing _between_ different k8s clusters. So I can certainly provide specific guidance w.r.t how it is possible to load balance gRPC at the request level within the same k8s cluster and how it _should_ be possible between them once these issues are resolved (and more generally the aim for load balancing across platform agnostic deployments). Let me know where this is to be documented and I can write something up.;;;","03/Dec/19 8:47 AM;muralisr;This is will add complexity to fabric that really should be solved outside of fabric if possible. We can if need arises.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Document chaincode new model with sample,FAB-14083,37471,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,binhn,binhn,07/Feb/19 7:20 AM,13/Jan/21 12:35 PM,28/Oct/23 3:05 AM,13/Jan/21 12:35 PM,,,,,,,,,,fabric-docs,,,,,0,,,,,Create a section to explain the new chaincode model in 2.0 based on the epic design document. It should include tutorial like to walk developers through the steps to run chaincode.,,binhn,denyeart,muralisr,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/May/19 5:22 AM;muralisr;chaincode2.0.pdf;https://jira.hyperledger.org/secure/attachment/17214/chaincode2.0.pdf",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13582,,,No,,Unset,No,,,"1|i00arj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),binhn,denyeart,muralisr,yoheiueda,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/May/19 5:23 AM;muralisr;Added PDF generated from a RST file (eventually to go into docs).

[~denyeart] [~sykesm] [~mastersingh24] [~binhn];;;","13/Jan/21 12:35 PM;denyeart;Chaincode as a service documented here: [https://hyperledger-fabric.readthedocs.io/en/latest/cc_service.html]

Closing as complete.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
New peer CLI to register chaincode endpoints,FAB-14084,37472,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,muralisr,binhn,binhn,07/Feb/19 7:26 AM,03/Dec/19 8:52 AM,28/Oct/23 3:05 AM,03/Dec/19 8:52 AM,,,,,,,,,,fabric-peer,,,,,0,,,,,"Using the peer admin API, provide CLI to configure chaincode endpoints for a set of peers",,binhn,muralisr,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13582,,,No,,Unset,No,,,"1|i00arr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),binhn,muralisr,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Dec/19 8:52 AM;muralisr;This is not needed in the new external builder model;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update BDD to include the new chaincode model,FAB-14085,37473,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,muralisr,binhn,binhn,07/Feb/19 7:30 AM,03/Dec/19 12:47 PM,28/Oct/23 3:05 AM,03/Dec/19 12:47 PM,,,,,,,,,,,,,,,0,,,,,,,binhn,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13582,,,No,,Unset,No,,,"1|i00arz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),binhn,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Dec/19 12:47 PM;muralisr;https://jira.hyperledger.org/browse/FAB-16938;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Golang chaincode gRPC server,FAB-14086,37474,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,binhn,binhn,07/Feb/19 7:37 AM,23/Jun/20 5:20 AM,28/Oct/23 3:05 AM,23/Jun/20 5:20 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,"The chaincode will run as a server when ""chaincode.servermode"" property is set to true.

*Phase 1 - use existing single-stream protocol*
On receiving a connection it will launch into the old ""chaincode as client"" protocol flow on the established stream.

*Phase 2 - Invoke as a separate RPC call*
Each invoke will be a separate RPC call. This has advantages of simplicity and improved performance. However this is more disruptive from code change and refactoring point of view.

The two phases should be seamless for devops or enduser. Phase 2 can be done later once phase 1 proves out the ""chaincode as server"" concept. ",,baohua,binhn,denyeart,yoheiueda,,,,,,,,,,,,,,,FAB-14156,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13582,,,No,,Unset,No,,,"1|i00as7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,binhn,denyeart,yoheiueda,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/19 10:35 AM;baohua;Separate rpc call definitely will help improve performance, but at the same time will increase the pressure to peers.

Maybe can consider to add some request-limit from peer side, in case of too many requests burst.;;;","03/Dec/19 8:16 AM;denyeart;https://github.com/hyperledger/fabric-chaincode-go/pull/6;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Error while connecting with fabric: Failed to reach implicit threshold of 1 sub-policies,FAB-14094,33026,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,jyellick,NithinKashyap,NithinKashyap,18/Aug/18 5:04 PM,17/Mar/19 9:05 PM,28/Oct/23 3:05 AM,17/Mar/19 9:05 PM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,,,,,"I keep getting the following error while interacting with the fabric network via the Go SDK


{code:java}
2018-08-18 07:23:49.859 UTC [policies] Evaluate -> DEBU 3c4 == Evaluating *cauthdsl.policy Policy /Channel/Application/Org1MSP/Admins ==
2018-08-18 07:23:49.859 UTC [cauthdsl] deduplicate -> ERRO 3c5 Principal deserialization failure (MSP org1.example.com is unknown) for identity 0a106f7267312e6578616d706c652e636f6d1296062d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d494943476a4343416343674177494241674952414a5a69787333383955543053556a397a624a5170664577436759494b6f5a497a6a304541774977637a454c0a4d416b474131554542684d4356564d78457a415242674e5642416754436b4e6862476c6d62334a7561574578466a415542674e564241635444564e68626942470a636d467559326c7a593238784754415842674e5642416f54454739795a7a45755a586868625842735a53356a623230784844416142674e5642414d5445324e680a4c6d39795a7a45755a586868625842735a53356a623230774868634e4d5467774f4445344d4459794e6a49785768634e4d6a67774f4445314d4459794e6a49780a576a42624d517377435159445651514745774a56557a45544d4245474131554543424d4b5132467361575a76636d3570595445574d4251474131554542784d4e0a5532467549455a795957356a61584e6a627a45664d4230474131554541777757515752746157354162334a6e4d53356c654746746347786c4c6d4e766254425a0a4d424d4742797147534d34394167454743437147534d34394177454841304941424833496267694e686d5061686a786262524c7762727a397078316850484a470a44633237596d6768484f36716b457a2f4461483476564e6b4e6a4e4d6467657942394468546e664a434739356d5974774857464b4d62326a5454424c4d4134470a41315564447745422f775145417749486744414d42674e5648524d4241663845416a41414d437347413155644977516b4d434b41495055775953706873614e310a41646e366e7555314c504e2b344e38526e4c36446f64414e71594365573969664d416f4743437147534d343942414d43413067414d455543495143445354726e0a353745707958614451377471525774513871626150704d2b525253615770473778556274554149676661383654594632704b2f565144703135624255722b41500a2f774a7955386b5672365565744c75513756453d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a
2018-08-18 07:23:49.859 UTC [cauthdsl] func1 -> DEBU 3c6 0xc420194fa0 gate 1534577029859895629 evaluation starts
2018-08-18 07:23:49.859 UTC [cauthdsl] func2 -> DEBU 3c7 0xc420194fa0 signed by 0 principal evaluation starts (used [false])
2018-08-18 07:23:49.859 UTC [cauthdsl] func2 -> DEBU 3c8 0xc420194fa0 principal evaluation fails
2018-08-18 07:23:49.860 UTC [cauthdsl] func1 -> DEBU 3c9 0xc420194fa0 gate 1534577029859895629 evaluation fails
2018-08-18 07:23:49.860 UTC [policies] Evaluate -> DEBU 3ca Signature set did not satisfy policy /Channel/Application/Org1MSP/Admins
2018-08-18 07:23:49.860 UTC [policies] Evaluate -> DEBU 3cb == Done Evaluating *cauthdsl.policy Policy /Channel/Application/Org1MSP/Admins
2018-08-18 07:23:49.860 UTC [policies] func1 -> DEBU 3cc Evaluation Failed: Only 0 policies were satisfied, but needed 1 of [ Org1MSP.Admins ]
2018-08-18 07:23:49.860 UTC [policies] Evaluate -> DEBU 3cd Signature set did not satisfy policy /Channel/Application/ChannelCreationPolicy
2018-08-18 07:23:49.860 UTC [policies] Evaluate -> DEBU 3ce == Done Evaluating *policies.implicitMetaPolicy Policy /Channel/Application/ChannelCreationPolicy
2018-08-18 07:23:49.860 UTC [orderer/common/broadcast] Handle -> WARN 3cf [channel: mychannel] Rejecting broadcast of config message from 172.18.0.1:51832 because of error: error authorizing update: error validating DeltaSet: policy for [Group]  /Channel/Application not satisfied: Failed to reach implicit threshold of 1 sub-policies, required 1 remaining{code}
 

My config.yaml file is attached. Can you please lemme know what I am doing wrong.

 

 ",,denyeart,jyellick,n-horiguchi,NithinKashyap,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Aug/18 5:00 PM;NithinKashyap;config.yaml;https://jira.hyperledger.org/secure/attachment/15708/config.yaml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzznaf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,n-horiguchi,NithinKashyap,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Feb/19 9:50 PM;denyeart;[~jyellick] This is another error message from orderer that users do not understand, the message needs to be improved.;;;","11/Feb/19 4:12 AM;denyeart;Another user confused by the unclear message here:

[https://stackoverflow.com/questions/48151804/error-got-unexpected-status-forbidden-failed-to-reach-implicit-threshold-of];;;","18/Feb/19 2:21 PM;denyeart;Actually there are 21 questions on SO asking what this error message means, most of them unanswered:

[https://stackoverflow.com/search?q=%5Bhyperledger-fabric%5D+%22implicit+threshold%22]

 Due to the large number of issues related to this, raising to High.;;;","19/Feb/19 9:40 PM;denyeart;More recent examples from rocket chat:

[https://chat.hyperledger.org/channel/fabric?msg=T2nZQWszhiJGSfKAy]

[https://chat.hyperledger.org/channel/fabric-questions?msg=rND2ABrWtk8R6cfR5]

 ;;;","06/Mar/19 12:12 PM;jyellick;In review via https://gerrit.hyperledger.org/r/29868;;;",,,,,,,,,,,,,,,,,,,,,,,,
"When running a full make, a couchdb container does not get cleaned up",FAB-14096,37494,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,btl5037,sykesm,sykesm,08/Feb/19 12:23 AM,21/Feb/19 2:08 AM,28/Oct/23 3:05 AM,21/Feb/19 2:08 AM,,,,,,v2.0.0,,,,fabric-common,,,,,0,ipm,,,,"Somewhere, in one of the units or integration tests, a container hosting a couchdb instance is created but never terminated...",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i0090o:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
more context to be provided in the error message about DeliverBlocks error,FAB-14098,37496,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,wlahti,chwolf,chwolf,08/Feb/19 12:27 AM,25/Sep/19 1:04 AM,28/Oct/23 3:05 AM,25/Sep/19 1:04 AM,v1.1.0,,,,,,,,,fabric-common,,,,,0,quality,,,,"We are seeing the following error messages:

{{ �[33m2019-02-06 02:22:05.835 UTC [ConnProducer] DisableEndpoint -> WARN d2707�[0m Only 1 endpoint remained, will not black-list it}}
 {{ �[31m2019-02-06 02:22:05.858 UTC [blocksProvider] DeliverBlocks -> ERRO d2708�[0m [public-bci-uat] Got error &\{FORBIDDEN}}}

 

In the long term, could there be more context provided in the error message?

In the short term, can you give me the possible causes about that error?

[~wlahti] [~denyeart]",,chwolf,jyellick,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00awn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),chwolf,jyellick,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/19 3:24 AM;wlahti;Can you provide some more context? Where are you seeing the messages? Is it in a peer log or somewhere else? 

Also, can you look in either the peer logs or the orderer logs for messages similar to the following:
{code:java}
[channel: <channel-name>] Client authorization revoked for deliver request from <address>: <error>{code}
That should tell you exact reason for the FORBIDDEN status to be returned. The possibilities are that the identity has expired or the policy for blocks is not satisfied.

 

 

 ;;;","08/Feb/19 3:24 PM;chwolf;Yes, the errors are from the peer log. And they started right after editing the org. I still have to look into the orderer logs.;;;","09/Feb/19 12:11 AM;wlahti;Can you also provide the context of the general network setup and what you're doing with it when you see this error? You mention ""editing the org"" but not what change has been made. ;;;","11/Feb/19 8:55 PM;chwolf;First I couldn't check the orderer logs on Friday as the already rolled through. Then with edited I meant edited out of the channel let's say removed from the channel. I think this error comes from my client which is still connecting to the channel. I just wanted to have some more detailed error message which seems the case if I had looked in the orderer logs earlier. I will try to wait until this happens again and then retry, from your comments the error looks sufficient for me.;;;","14/Feb/19 1:14 AM;chwolf;The issue happened again and I could look at the orderer logs. This is the outcome

`{{[33m2019-02-13 15:20:56.558 UTC [common/deliver] deliverBlocks -> WARN 52c131[0m [channel: public-bci-uat] Client authorization revoked for deliver request from 10.20.2.108:33038: Failed to reach implicit threshold of 1 sub-policies, required 1 remaining: permission denied}}`

I edited the channel {{public-bci-uat}} that it does not have any members anymore. May this be the mistake? But I can't edit the channel anymore.;;;","25/Sep/19 1:04 AM;jyellick;The error message returned to the client is deliberately vague.  Returning more detail could allow unauthorized users to probe for channel membership information.;;;",,,,,,,,,,,,,,,,,,,,,,,
more context to be provided in the error message about deserialization error,FAB-14099,37497,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,chwolf,chwolf,08/Feb/19 12:30 AM,21/May/20 6:00 AM,28/Oct/23 3:05 AM,21/May/20 6:00 AM,v1.1.0,,,,,v2.2.0,,,,fabric-crypto,,,,,0,ipm,quality,,,"We are seeing the following error message:

{{ �[31m2019-02-06 02:22:48.139 UTC [cauthdsl] deduplicate -> ERRO d2714�[0m Principal deserialization failure (MSP PeerOrg10 is unknown) for identity 0a09506565724f7267313012b6062d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d0a4d4949434d544343416469674177494241674955522f3542724551616a336c585541355a333345456661564b69745577436759494b6f5a497a6a3045417749770a527a45704d416b474131554543784d4359324577436759445651514c45774e70596e4177454159445651514c45776c515a57567954334a6e4d544178476a41590a42674e5642414d544557466b62576c755547566c636b39795a7a4577513045784d423458445445344d5445774e5441334e544d774d466f58445445354d5445770a4e5441334e5467774d466f776644454c4d416b474131554542684d4356564d78467a415642674e5642416754446b3576636e526f49454e68636d3973615735680a4d525177456759445651514b457774496558426c636d786c5a47646c636a45724d4173474131554543784d456347566c636a414b42674e564241735441326c690a6344415142674e56424173544356426c5a584a50636d63784d4445524d4138474131554541784d496347566c636b35765a4755775754415442676371686b6a4f0a5051494242676771686b6a4f50514d4242774e43414153302f4a366b766652552f394e557644646d494c6747474e69514b65484651574962644d674e714d78590a44776a6a44556b394a63586a6c2f313830317777762b5145614b417472576973365139494e2f2f66625444476f323077617a414f42674e5648513842416638450a42414d434234417744415944565230544151482f424149774144416442674e564851344546675155727332586465474b306e5a6d5538686f347158492b546b480a75345577487759445652306a42426777466f4155487a782b426b414f7a586e666c7a666a652b39557843416175446b77437759445652305242415177416f49410a4d416f4743437147534d343942414d43413063414d45514349486f77704d4c794d53314332383569634a4a6a387a583755656c324159586b68724f7849396c440a2f73464e416941616a76584b64626b586e514a453452766b4d4e56506b385754383471634f2f3031727470537a62382b4b513d3d0a2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d0a}}}

Could there be more context provided in the error message in the future, and can you give me the possible causes about that error in the interim?

[~angelo.decaro] [~denyeart]",,angelo.decaro,chwolf,denyeart,jyellick,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzww",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,chwolf,denyeart,jyellick,wlahti,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Feb/19 1:31 AM;denyeart;[~angelo.decaro] many people see this message and don't understand what it means. Can you help to improve the message with a hint on potential reasons, as well as have the caller of {{deduplicate}} provide more context of what function failed due to the error?;;;","08/Feb/19 4:18 PM;angelo.decaro;In the meantime, let me say this. The main point in the attached error message is *MSP PeerOrg10 is unknown*. It means that in the channel where the operation has been performed does not contain an MPS whose ID is *PeerOrg10.*

Now, what we can additional do is to print the identity in a more human readable form. The identity there is, at the end of the day, an X509 certificate. Would be okay to print the X509 certificate in a more human readable form?;;;","12/Feb/19 10:35 AM;denyeart;[~angelo.decaro] Three things that would help:

1) ""{{PeerOrg10}} is unknown"" would be more understandable as ""PeerOrg10 is not defined on the channel"".

2) ""{{deserialization failure}}"" gives users the wrong impression that there was some encoding issue.

3) Have the caller provide context of what it was doing functionally when the error was hit (e.g. was it checking the signer of a transaction proposal? checking the signer of an endorsement? etc).

And yes, making the identity human readable would help (if that doesn't leak any info), so make that four things.;;;","12/Feb/19 4:06 PM;angelo.decaro;[~denyeart], alright, I can prepare a change-set for that :);;;","25/Sep/19 1:03 AM;jyellick;[~angelo.decaro] I'm not seeing any CRs associated with this FAB, are you still planning to implement this?;;;","14/May/20 4:26 AM;wlahti;https://github.com/hyperledger/fabric/pull/1256;;;",,,,,,,,,,,,,,,,,,,,,,,
Add chaincodes for use in fabric-test,FAB-14100,37500,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,latitiah,latitiah,latitiah,08/Feb/19 1:21 AM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,0,stale-item,,,,"The chaincodes that were in the fabric/examples directory in the Hyperledger Fabric repo were removed. These chaincodes were used in much of the testing in fabric-test. As a result, the chaincodes should be moved to the fabric-test repo.",,latitiah,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00axj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,sykesm,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"08/Feb/19 1:23 AM;latitiah;https://gerrit.hyperledger.org/r/29185

This change does not include changes needed in PTE, feature-upgrade, and ATD.

 ;;;","23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Create files in chaincode container with appropriate permissions,FAB-14101,37501,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,skarim,sykesm,sykesm,08/Feb/19 1:34 AM,24/Feb/19 7:53 AM,28/Oct/23 3:05 AM,23/Feb/19 6:14 AM,,,,,,v1.4.1,v2.0.0,,,fabric-peer,,,,,0,ipm,,,,"After creating the chaincode container and prior to starting it, files are copied into the filesystem. The code in {{core/container/util/}}{{writer.go}} does the following:
{code:java}
func WriteBytesToPackage(name string, payload []byte, tw *tar.Writer) error {
	//Make headers identical by using zero time
	var zeroTime time.Time
	tw.WriteHeader(&tar.Header{Name: name, Size: int64(len(payload)), ModTime: zeroTime, AccessTime: zeroTime, ChangeTime: zeroTime})
	tw.Write(payload)

	return nil
}
{code}
Notice the Mode is omitted and defaults to the 0 value. When the files show up inside the container, the permissions are too restrictive and the launched chaincode cannot read the key and certificate material that has been copied.

Setting the mode to 0100644 for those files would enable the chaincode to read them.",,mastersingh24,silliman,skarim,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-9394,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008g7:r",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,silliman,skarim,sykesm,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Feb/19 1:36 AM;sykesm;Tangentially related, WriteStreamToPackage forces *all* files to 0100644; that could also be a problem...

The comment in there about variance in times et al is also interesting - seem to be relics of an earlier time.;;;","23/Feb/19 6:03 AM;skarim;https://gerrit.hyperledger.org/r/c/29497/;;;","23/Feb/19 6:13 PM;mastersingh24;cherry-pick to 1.4:  https://gerrit.hyperledger.org/r/29500;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Change how fabric images are being used,FAB-14102,37503,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,latitiah,latitiah,latitiah,08/Feb/19 2:12 AM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,0,stale-item,,,,"The fabric-ca-peer and fabric-ca-orderer images no longer exist. The desire is that we use the fabric-peer and fabric-orderer images and then use the fabric-ca-client binary as a ""helper binary"" similar to how cryptogen and configtxgen are used.",,latitiah,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ay7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,sykesm,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"11/Feb/19 11:56 PM;latitiah;https://gerrit.hyperledger.org/r/#/c/29186/;;;","23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
intermittent test failure in gossip/state TestMetrics,FAB-14103,37507,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,HagarMeir,sykesm,sykesm,08/Feb/19 5:55 AM,02/Apr/19 5:40 PM,28/Oct/23 3:05 AM,11/Feb/19 11:46 PM,,,,,,,,,,,,,,,0,ci-flake,,,,"Hit this locally...

{code}
--- FAIL: TestMetrics (0.00s)
    metrics_test.go:67: 
        	Error Trace:	metrics_test.go:67
        	Error:      	Not equal: 
        	            	expected: int(1)
        	            	actual  : float64(0)
        	Test:       	TestMetrics
{code}

The assertion in question is the second:
{code}
	// after the push payload buffer size should be 1, and it should've been reported
	assert.Equal(t,
		[]string{""channel"", ""testchainid""},
		testMetricProvider.FakePayloadBufferSizeGauge.WithArgsForCall(0),
	)
	assert.EqualValues(t,
		1,
		testMetricProvider.FakePayloadBufferSizeGauge.SetArgsForCall(0),
	)
{code}",,hagarm,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ayv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Feb/19 7:41 PM;hagarm;https://gerrit.hyperledger.org/r/#/c/29229/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Attempting to send an install proposal with nonexistent chaincode name results in peer panic,FAB-14104,37509,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,wlahti,wlahti,wlahti,08/Feb/19 6:22 AM,06/Apr/19 1:24 AM,28/Oct/23 3:05 AM,06/Apr/19 1:24 AM,v2.0.0,,,,,,,,,fabric-peer,,,,,0,,,,,"Sending an invoke proposal to install a chaincode meant for ""_lifecycle"" with a nonexistent chaincode name (aka the ChaincodeId in the ChaincodeSpec):
{code:java}
ccInput := &pb.ChaincodeInput{Args: [][]byte{[]byte(""InstallChaincode""), installChaincodeArgsBytes}}

cis := &pb.ChaincodeInvocationSpec{ 
    ChaincodeSpec: &pb.ChaincodeSpec{ 
        ChaincodeId: &pb.ChaincodeID{Name: <nonexistent-cc-name>}, 
        Input:       ccInput,
     },
 }{code}
Results in a panic on the peer:
{code:java}
[e][org1.peer1] panic: runtime error: invalid memory address or nil pointer dereference
[e][org1.peer1] [signal SIGSEGV: segmentation violation code=0x1 addr=0x18 pc=0x49bf11e]
[e][org1.peer1] 
[e][org1.peer1] goroutine 780 [running]:
[e][org1.peer1] github.com/hyperledger/fabric/core/chaincode/lifecycle.(*SimpleQueryExecutorShim).GetState(0xc00281c960, 0xc002cf78e0, 0x18, 0x4, 0xc002cf78e0, 0x18, 0x2, 0xc00518bde4)
[e][org1.peer1] 	/Users/wlahti/gopath/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/ledger_shim.go:116 +0x2e
[e][org1.peer1] github.com/hyperledger/fabric/core/chaincode/lifecycle.(*Serializer).DeserializeMetadata(0xc00000e4d0, 0x4df0279, 0xa, 0xc0027b4300, 0x4, 0x4f53560, 0xc00281c960, 0x0, 0x0, 0x0, ...)
[e][org1.peer1] 	/Users/wlahti/gopath/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/serializer.go:308 +0x98
[e][org1.peer1] github.com/hyperledger/fabric/core/chaincode/lifecycle.(*Lifecycle).ChaincodeDefinitionIfDefined(0xc0000e6f00, 0xc0027b4300, 0x4, 0x0, 0x0, 0x0, 0x0, 0xc003c0ac58, 0x44e5252)
[e][org1.peer1] 	/Users/wlahti/gopath/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/deployedcc_infoprovider.go:71 +0x10d
[e][org1.peer1] github.com/hyperledger/fabric/core/chaincode/lifecycle.(*Lifecycle).ChaincodeDefinition(0xc0000e6f00, 0xc0027b4300, 0x4, 0x0, 0x0, 0xc003c0acb0, 0x4a04183, 0xc00016fb30, 0xc0027b4300)
[e][org1.peer1] 	/Users/wlahti/gopath/src/github.com/hyperledger/fabric/core/chaincode/lifecycle/legacy_lifecycle.go:68 +0x74
[e][org1.peer1] github.com/hyperledger/fabric/core/endorser.(*SupportImpl).GetChaincodeDefinition(0xc000374c60, 0xc0027b4300, 0x4, 0x0, 0x0, 0xc003c0ae70, 0x2, 0x2, 0xc00015a648)
[e][org1.peer1] 	/Users/wlahti/gopath/src/github.com/hyperledger/fabric/core/endorser/support.go:154 +0x8e
[e][org1.peer1] github.com/hyperledger/fabric/core/endorser.(*Endorser).SimulateProposal(0xc000096f40, 0xc002dd8bd0, 0xc003631a40, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
[e][org1.peer1] 	/Users/wlahti/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:233 +0xe21
[e][org1.peer1] github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal(0xc000096f40, 0x4f70100, 0xc0031fb470, 0xc0036314a0, 0x0, 0x0, 0x0)
[e][org1.peer1] 	/Users/wlahti/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:507 +0x3c9 {code}",,mastersingh24,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00azb:",,,,Unset,Unset,,,,Modify the ChaincodeId in the new lifecycle install command to use a random chaincode name and not _lifecycle.,,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,wlahti,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/19 5:13 PM;mastersingh24;bumping this to high;;;","03/Apr/19 1:15 AM;wlahti;https://gerrit.hyperledger.org/r/c/30641/;;;","03/Apr/19 4:50 AM;wlahti;Confirmed that this bug does affect other system chaincode calls and the above CR does resolve the panic for random SCC calls I've tried it on (CSCC, LSCC). ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Cobra command package returns error for unknown flag instead of unknown command,FAB-14105,37511,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,,latitiah,latitiah,08/Feb/19 6:40 AM,26/Apr/20 2:25 PM,28/Oct/23 3:05 AM,26/Apr/20 2:25 PM,,,,,,,,,,fabric-common,,,,,0,,,,,"The error message is focused not on the subcommand, but errors on a flag found in the nonexistent command:
{code}peer chaincode commitchaincodedefinition --name mycc --channelID behavesystest --version 0 --hash f471b9a0b0c8e756217795564c8cdeb16dd6beda04fd1f54b040a47307859223 --sequence 1 --init-required{code}

returned error about the flag ""name"" and not about ""commitchaincodedefinition""

Error:
{code}Error: unknown flag: --name\nUsage:\n  peer chaincode [command]\n\nAvailable Commands:\n  approveformyorg Approve the chaincode definition for my org.\n  commit          Commit the chaincode definition on the channel.\n  install         Install a chaincode.\n  instantiate     Deploy the specified chaincode to the network.\n  invoke          Invoke the specified chaincode.\n  list            Get defined chaincode info, list instantiated chaincodes on a channel, or installed chaincodes on a peer.\n  package         Package a chaincode\n  query           Query using the specified chaincode.\n  signpackage     Sign the specified chaincode package\n  upgrade         Upgrade chaincode.\n\nFlags:\n      --cafile string                       Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint\n      --certfile string                     Path to file containing PEM-encoded X509 public key to use for mutual TLS communication with the orderer endpoint\n      --clientauth                          Use mutual TLS when communicating with the orderer endpoint\n      --connTimeout duration                Timeout for client to connect (default 3s)\n  -h, --help                                help for chaincode\n      --keyfile string                      Path to file containing PEM-encoded private key to use for mutual TLS communication with the orderer endpoint\n  -o, --orderer string                      Ordering service endpoint\n      --ordererTLSHostnameOverride string   The hostname override to use when validating the TLS connection to the orderer.\n      --tls                                 Use TLS when communicating with the orderer endpoint\n      --transient string                    Transient map of arguments in JSON encoding\n\nUse ""peer chaincode [command] --help"" for more information about a command.\n\n{code}",,denyeart,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008rj:iw",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/19 7:08 AM;wlahti;I'm not sure there's anything we can do about this one. Pretty sure it's just how Cobra, the CLI package that Fabric uses, ""works"" in this regard. I can investigate and report back.;;;","12/Mar/19 6:20 AM;latitiah;I'll change this to a lower priority issue, but leave it open since if a person were to enter a command in incorrectly, it is a problem that we don't actually return what the actual error is with the command.;;;","14/Jun/19 10:53 PM;wlahti;This problem is not specific to the lifecycle commands and is a general problem with the Cobra CLI package we use for the peer CLI.

For example,
{code:java}
peer channel houstonwehaveaproblem --channel-id saywhat?{code}
results in the same error about an unknown flag:
{code:java}
Error: unknown flag: --channel-id {code};;;","26/Apr/20 2:24 PM;denyeart;Since it is a Cobra issue, I'll close.;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Token client spams meaningless info messages,FAB-14106,37512,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,angelo.decaro,sykesm,sykesm,08/Feb/19 6:43 AM,11/Apr/19 10:56 PM,28/Oct/23 3:05 AM,11/Apr/19 10:56 PM,v2.0.0,,,,,,,,,fabric-token,,,,,0,fabtoken,hygiene,,,"When running tests, the following output is generated:
{code}
 2019-02-07 16:35:44.834 EST [token.client] BroadcastReceive -> INFO 001 calling OrdererClient.broadcastReceive
2019-02-07 16:35:50.669 EST [token.client] BroadcastReceive -> INFO 002 calling OrdererClient.broadcastReceive
2019-02-07 16:35:50.699 EST [token.client] BroadcastReceive -> INFO 003 calling OrdererClient.broadcastReceive
•2019-02-07 16:35:52.124 EST [token.client] BroadcastReceive -> INFO 004 calling OrdererClient.broadcastReceive
2019-02-07 16:35:57.967 EST [token.client] BroadcastReceive -> INFO 005 calling OrdererClient.broadcastReceive
2019-02-07 16:35:57.976 EST [token.client] BroadcastReceive -> INFO 006 calling OrdererClient.broadcastReceive
{code}

This comes from the following code:
{code}
// broadReceive waits until it receives the response from broadcast stream
func BroadcastReceive(broadcast Broadcast, addr string, responses chan common.Status, errs chan error) {
	logger.Infof(""calling OrdererClient.broadcastReceive"")
{code}

Client libraries are intended to be used by external programs. In this context, we should _minimize_ the drag on dependencies **and** our opinions on logging. This includes what and when to log.

The existing logging that's been added to the token clients needs to be removed and replaced with a mechanism for the user to provide a logging implementation that satisfies an extremely simple contract. In most cases, the contract should be a subset of, yet compatible with, the default 'log' package in go.",,angelo.decaro,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11300,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00azz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Mar/19 5:49 AM;yacovm;/CC [~adc] :);;;","28/Mar/19 5:50 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/30485/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
"Workflow Verification Missing: Knowing when ""init"" is complete",FAB-14107,37513,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,latitiah,latitiah,08/Feb/19 6:43 AM,12/Mar/19 1:06 AM,28/Oct/23 3:05 AM,12/Mar/19 1:06 AM,,,,,,,,,,,,,,,0,,,,,"How does one know when the `init` call is complete, other than looking for the chaincode container?

With the previous workflow, it was possible to check for the instantiated chaincodes (peer chaincode list --instantiated). Since instantiation is not ""a thing"" with the new lifecycle this call does not work for filling this gap.
",,latitiah,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00b07:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Feb/19 5:57 AM;wlahti;As far as the peer CLI is concerned, you can use the --waitForEvent flag in combination with the --peerAddresses (and --tlsRootCertFiles flag if TLS is enabled) to ensure the invocation of ""init"" has been committed.;;;","12/Mar/19 1:06 AM;latitiah;With the new workflow, the invoke with the use of the ""waitForEvent"" flag, I will consider ""good enough"". For the tests, I will continue to verify that the chaincode containers are present, just to be sure for now.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to approve/commit without a policy,FAB-14108,37514,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,latitiah,latitiah,08/Feb/19 6:47 AM,03/Apr/19 10:43 PM,28/Oct/23 3:05 AM,03/Apr/19 10:43 PM,,,,,,,,,,,,,,,0,,,,,"When not supplying a policy during the approve and commit steps in the new lifecycle, an error occurred when attempting to query the chaincode.
{code}Error occurs during query: Error: endorsement failure during query. response: status:500 message:""failed to execute transaction d0b40c04c9b72beff7bf70232e69d6f01ae5cf33fea1298fc5ae0e8a29c80ff5: chaincide \'mycc\' has not been initialized for this version, must call \'ini\' first"" \n'{code}

Either having no policy should be acceptable or an error should occur earlier in the process. (preferably during the approveformyorg call).
",,ales,latitiah,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14474,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00b0f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,latitiah,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/19 7:11 AM;wlahti;This is the error as logged by the validator code:
{code:java}
[e][org1.peer1] 2019-02-05 15:41:18.080 EST [committer.txvalidator] GetInfoForValidate -> ERRO 0e9 Unable to get chaincode data from ledger for txid 3ac5e85586d53c68b4651ad233ae280386de85572563d5977754b21476c650ec, due to chaincode definition for [mycc] is invalid, policy field must be set{code};;;","27/Feb/19 4:42 AM;latitiah;An error (non 200 status) should be returned when executing the approveformyorg call when no policy is supplied instead of an error only in the peer log. 
{code}peer lifecycle chaincode approveformyorg --name mycc --channelID behavesystest --version 2 --peerAddresses peer0.org2.example.com:7051 --peerAddresses peer1.org2.example.com:7051 --hash 32f931d616fba506ac858cfda93d7c844afda052052852546fee8184437cbdbb --sequence 2 --init-required --waitForEvent --orderer orderer0.example.com:7050{code}

Something as simple as ""policy field must be set"" would be good enough.

An error isn't seen until a query on the chaincode and then that error message is misleading. ;;;","01/Apr/19 6:09 PM;ales;[~lhaskins] is this defect still valid? With FAB-14474 merged, we should now be able to supply no policy and everything should work okay. Could you please double-check? Many thanks;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Upgrading chaincode when on new lifecycle,FAB-14109,37515,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,latitiah,latitiah,08/Feb/19 6:51 AM,22/Feb/19 12:44 AM,28/Oct/23 3:05 AM,22/Feb/19 12:44 AM,,,,,,,,,,,,,,,0,,,,,"When the initial deploy is done using the new chaincode lifecycle and an attempt to redeploy the chaincode using the new lifecycle, an error occurred that stated that the chaincode already existed - despite changing the name and version on the chaincode.

It should be noted, for this upgrade attempt there was a change in the chaincode name and version, but the code was identical. The install failed with an identical hash error.
{code}Error: install failed with status: 500 - failed to invoke backing implementation of 'InstallChaincode': could not save cc install package: chaincode metadata already exists at /var/hyperledger/production/chaincodes/730045c6268d8b4dc31800b0bee475b3c9776d59734f91ac8e130b03d4a025c5.json{code}

- Expected that the change in version and name would be sufficient for a new hash to be generated.
",,latitiah,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/19 6:16 AM;latitiah;25c2379433b511e98eea0214683e8447-peer0.org1.example.com-mycc_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log;https://jira.hyperledger.org/secure/attachment/16827/25c2379433b511e98eea0214683e8447-peer0.org1.example.com-mycc_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log","19/Feb/19 6:15 AM;latitiah;25c2379433b511e98eea0214683e8447-peer0.org2.example.com-mycc_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log;https://jira.hyperledger.org/secure/attachment/16828/25c2379433b511e98eea0214683e8447-peer0.org2.example.com-mycc_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log","19/Feb/19 6:15 AM;latitiah;25c2379433b511e98eea0214683e8447-peer1.org1.example.com-mycc_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log;https://jira.hyperledger.org/secure/attachment/16829/25c2379433b511e98eea0214683e8447-peer1.org1.example.com-mycc_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log","19/Feb/19 6:15 AM;latitiah;ca.example.com_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log;https://jira.hyperledger.org/secure/attachment/16830/ca.example.com_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log","19/Feb/19 6:15 AM;latitiah;ca.org1.example.com_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log;https://jira.hyperledger.org/secure/attachment/16831/ca.org1.example.com_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log","19/Feb/19 6:15 AM;latitiah;ca.org2.example.com_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log;https://jira.hyperledger.org/secure/attachment/16832/ca.org2.example.com_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log","19/Feb/19 6:15 AM;latitiah;orderer0.example.com_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log;https://jira.hyperledger.org/secure/attachment/16833/orderer0.example.com_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log","19/Feb/19 6:16 AM;latitiah;peer0.org1.example.com_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log;https://jira.hyperledger.org/secure/attachment/16834/peer0.org1.example.com_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log","19/Feb/19 6:16 AM;latitiah;peer0.org2.example.com_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log;https://jira.hyperledger.org/secure/attachment/16835/peer0.org2.example.com_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log","19/Feb/19 6:15 AM;latitiah;peer1.org1.example.com_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log;https://jira.hyperledger.org/secure/attachment/16836/peer1.org1.example.com_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log","19/Feb/19 6:16 AM;latitiah;peer1.org2.example.com_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log;https://jira.hyperledger.org/secure/attachment/16837/peer1.org2.example.com_FAB-13701b_Test_new_chaincode_lifecycle_-_upgrade_both_using_new.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00b0n:",,,,Unset,Unset,,,,"  Given I changed the ""Application"" capability to version ""V2_0""
  And I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel

  And an admin packages a chaincode
  And the organization admins install the chaincode package on all peers
  Then a hash value is received on all peers

  When each organization admin approves the chaincode package with policy ""OR ('org1.example.com.member','org2.example.com.member')""

  And an admin commits the chaincode package to the channel
  And I wait up to ""10"" seconds for the chaincode to be committed
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""] on both orgs
  And I wait up to ""30"" seconds for deploy to complete

  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000

  When an admin packages chaincode at path ""github.com/hyperledger/fabric-test/chaincodes/example02/go/cmd"" as version ""2"" with name ""mycc2""
  And the organization admins install the chaincode package on all peers
  Then a hash value is received on all peers
  When each organization admin approves the upgraded chaincode package
  And an admin commits the chaincode package to the channel
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""] on both orgs
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,wlahti,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Feb/19 12:33 AM;wlahti;The plan for this is to update the logic to allow the metadata JSON for installed chaincodes to contain multiple name/version pairs. ;;;","12/Feb/19 5:00 AM;wlahti;https://jira.hyperledger.org/browse/FAB-14109;;;","19/Feb/19 2:06 AM;latitiah;With CR changes, the command:
{code}peer lifecycle chaincode querycommitted --name mycc2 --channelID behavesystest{code}
generates the following error:
{code}Error: bad response: 500 - failed to invoke backing implementation of \'QueryChaincodeDefinition\': namespace mycc2 is not defined\n{code}

The logs from the test execution have been attached.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
CL2.0: Chaincode calling chaincode,FAB-14110,37516,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Test Error,,latitiah,latitiah,08/Feb/19 6:58 AM,09/Feb/19 12:35 AM,28/Oct/23 3:05 AM,09/Feb/19 12:35 AM,,,,,,,,,,,,,,,0,,,,,"Chaincode calling chaincode fails completion during the ""init"" of the second chaincode on the second channel. The error references the first chaincode that was installed on a separate channel.

command:
{code}
peer chaincode invoke --name ex02 --ctor '{""Args"": [""init"",""a"",""1000"",""b"",""2000""]}' --channelID channel2 --orderer orderer0.example.com:7050 --peerAddresses 172.27.0.6:7051 --peerAddresses 172.27.0.7:7051 {code}

Note, there is no reference to example04, but only example02. ex04 was installed on channel1. (See steps below)
{code}
chaincodeInvokeOrQuery -> DEBU 058 ESCC invoke result: response:<status:500 message:""failed to execute transaction 828a0a5f06ccbbfbc8e49bfa978ee5f13fd65cd90c343ec6439a3edfe61160e2: [channel channel2] could not launch chaincode ex02:0: error starting container: error starting container: Failed to generate platform-specific docker build: Error returned from build: 1 \""can't load package: package github.com/hyperledger/fabric-test/chaincodes/example04/cmd: cannot find package \""github.com/hyperledger/fabric-test/chaincodes/example04/cmd\"" in any of:\n\t/usr/local/go/src/github.com/hyperledger/fabric-test/chaincodes/example04/cmd (from $GOROOT)\n\t/chaincode/input/src/github.com/hyperledger/fabric-test/chaincodes/example04/cmd (from $GOPATH)\n\t/go/src/github.com/hyperledger/fabric-test/chaincodes/example04/cmd\n\"""" > 
      Error: endorsement failure during invoke. response: status:500 message:""failed to execute transaction 828a0a5f06ccbbfbc8e49bfa978ee5f13fd65cd90c343ec6439a3edfe61160e2: [channel channel2] could not launch chaincode ex02:0: error starting container: error starting container: Failed to generate platform-specific docker build: Error returned from build: 1 \""can't load package: package github.com/hyperledger/fabric-test/chaincodes/example04/cmd: cannot find package \""github.com/hyperledger/fabric-test/chaincodes/example04/cmd\"" in any of:\n\t/usr/local/go/src/github.com/hyperledger/fabric-test/chaincodes/example04/cmd (from $GOROOT)\n\t/chaincode/input/src/github.com/hyperledger/fabric-test/chaincodes/example04/cmd (from $GOPATH)\n\t/go/src/github.com/hyperledger/fabric-test/chaincodes/example04/cmd\n\""""{code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00b0v:",,,,Unset,Unset,,,,"  Given I changed the ""Application"" capability to version ""V2_0""
  And I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle

  When an admin sets up a channel named ""channel1""
  And an admin packages chaincode at path ""github.com/hyperledger/fabric-test/chaincodes/example04/cmd"" with name ""ex04""
  And the organization admins install the built ""ex04"" chaincode package on all peers
  Then a hash value is received on all peers
  #When each organization admin approves the ""ex04"" chaincode package on ""channel1""
  When each organization admin approves the ""ex04"" chaincode package on ""channel1"" with policy ""OR ('org1.example.com.member','org2.example.com.member')""
  And an admin commits the chaincode package to the channel ""channel1""
  And I wait up to ""10"" seconds for the chaincode to be committed
  And a user invokes on the channel ""channel1"" using chaincode named ""ex04"" with args [""init"",""Event"",""1""]
  And I wait up to ""30"" seconds for deploy to complete

  When an admin sets up a channel named ""channel2""
  And an admin packages chaincode at path ""github.com/hyperledger/fabric-test/chaincodes/example02/go/cmd"" with name ""ex02""
  And the organization admins install the built ""ex02"" chaincode package on all peers
  Then a hash value is received on all peers
  #When each organization admin approves the ""ex02"" chaincode package on ""channel2""
  When each organization admin approves the ""ex02"" chaincode package on ""channel2"" with policy ""OR ('org1.example.com.member','org2.example.com.member')""
  And an admin commits the chaincode package to the channel ""channel2""
  And I wait up to ""10"" seconds for the chaincode to be committed
  And a user invokes on the channel ""channel2"" using chaincode named ""ex02"" with args [""init"",""a"",""1000"",""b"",""2000""]
  And I wait up to ""30"" seconds for deploy to complete

  When a user queries on the channel ""channel2"" using chaincode named ""ex02"" with args [""query"",""a""]
  Then a user receives a success response of 1000
  When a user queries on the chaincode named ""ex04"" with args [""query"",""Event"", ""ex02"", ""a"", ""channel2""]
  Then a user receives a success response of 1000",,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Feb/19 12:35 AM;latitiah;Withdrawing this bug. Upon further inspection, I found an issue with the test. The chaincode calling chaincode works as expected, but the upgrade still fails. The following chaincode calling chaincode steps are what is passing now:
{code:java}
  Given I changed the ""Application"" capability to version ""V2_0""
  And I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle  When an admin sets up a channel named ""channel2""
  And an admin packages chaincode at path ""github.com/hyperledger/fabric-test/chaincodes/example02/go/cmd"" with name ""ex02""
  And the organization admins install the built ""ex02"" chaincode package on all peers
  Then a hash value is received on all peers
  #When each organization admin approves the ""ex02"" chaincode package on ""channel2""
  When each organization admin approves the ""ex02"" chaincode package on ""channel2"" with policy ""OR ('org1.example.com.member','org2.example.com.member')""
  And an admin commits the chaincode package to the channel ""channel2""
  And I wait up to ""10"" seconds for the chaincode to be committed
  And a user invokes on the channel ""channel2"" using chaincode named ""ex02"" with args [""init"",""a"",""1000"",""b"",""2000""]
  And I wait up to ""30"" seconds for deploy to complete  When an admin sets up a channel named ""channel1""
  And an admin packages chaincode at path ""github.com/hyperledger/fabric-test/chaincodes/example04/cmd"" with name ""ex04""
  And the organization admins install the built ""ex04"" chaincode package on all peers
  Then a hash value is received on all peers
  When each organization admin approves the ""ex04"" chaincode package on ""channel1"" with policy ""OR ('org1.example.com.member','org2.example.com.member')""
  And an admin commits the chaincode package to the channel ""channel1""
  And I wait up to ""10"" seconds for the chaincode to be committed
  And a user invokes on the channel ""channel1"" using chaincode named ""ex04"" with args [""init"",""Event"",""1""]
  And I wait up to ""30"" seconds for deploy to complete  When a user queries on the channel ""channel2"" using chaincode named ""ex02"" with args [""query"",""a""]
  Then a user receives a success response of 1000
  When a user queries on the channel ""channel1"" using chaincode named ""ex04"" with args [""query"",""Event"",""ex02"",""a"",""channel2""]
  Then a user receives a success response of 1000 {code};;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove unused function IsMembershipUpdate,FAB-14111,37519,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,08/Feb/19 8:43 AM,03/Mar/19 9:58 PM,28/Oct/23 3:05 AM,09/Feb/19 2:21 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,,,kchristidis,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b1j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kchristidis,yacovm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Feb/19 2:11 AM;kchristidis;https://gerrit.hyperledger.org/r/c/29196/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add channel ID to ValidationInfo interface,FAB-14112,37521,36519,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,08/Feb/19 11:28 AM,08/Mar/19 3:07 AM,28/Oct/23 3:05 AM,08/Mar/19 3:07 AM,,,,,,,,,,,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b1z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Flaky UT in etcdraft: ""stop cluster quorum and continue reconfiguration after the restart""",FAB-14113,37522,36295,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,guoger,guoger,08/Feb/19 1:10 PM,14/Feb/19 5:49 PM,28/Oct/23 3:05 AM,14/Feb/19 5:49 PM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,,,,,https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/5618/,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b27:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/19 5:49 PM;guoger;2000+ repetition in a container doesn't reproduce this test. Tentatively close. Reopen if it surfaces again.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in integration tests - panic in etcdraft_reconfig_test,FAB-14114,37533,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,sykesm,sykesm,08/Feb/19 11:47 PM,01/Apr/19 11:11 PM,28/Oct/23 3:05 AM,01/Apr/19 11:11 PM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"In CR build https://gerrit.hyperledger.org/r/c/29177/

{code}
20:38:14 EndToEnd basic single node etcdraft network with 2 orgs and 2 channels executes a basic etcdraft network with 2 orgs and 2 channels 
20:38:14 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/e2e_test.go:298
20:38:14 ------------------------------
20:39:30 panic: 
20:39:30 Your test failed.
20:39:30 Ginkgo panics to prevent subsequent assertions from running.
20:39:30 Normally Ginkgo rescues this panic so you shouldn't see it.
20:39:30 
20:39:30 But, if you make an assertion in a goroutine, Ginkgo can't capture the panic.
20:39:30 To circumvent this, you should call
20:39:30 
20:39:30 	defer GinkgoRecover()
20:39:30 
20:39:30 at the top of the goroutine that caused this panic.
20:39:30 
20:39:30 
20:39:30 goroutine 3914 [running]:
20:39:30 github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo.Fail(0xc000bd6000, 0x171, 0xc000dccc18, 0x1, 0x1)
20:39:30 	/w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/ginkgo_dsl.go:257 +0xc8
20:39:30 github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion.(*AsyncAssertion).match.func1(0x10efb32, 0x9)
20:39:30 	/w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion/async_assertion.go:130 +0x3ad
20:39:30 github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion.(*AsyncAssertion).match(0xc000b9fb40, 0x11e3280, 0x1ac6cc8, 0x7e7f01, 0x0, 0x0, 0x0, 0x1ac6cc8)
20:39:30 	/w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion/async_assertion.go:152 +0x43d
20:39:30 github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion.(*AsyncAssertion).Should(0xc000b9fb40, 0x11e3280, 0x1ac6cc8, 0x0, 0x0, 0x0, 0xc000b9fb40)
20:39:30 	/w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion/async_assertion.go:49 +0x81
20:39:30 github.com/hyperledger/fabric/integration/e2e.waitForBlockReception(0xc00102e200, 0xc00114b740, 0xc00010ca00, 0x10f2269, 0xb, 0x1)
20:39:30 	/w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/etcdraft_reconfig_test.go:588 +0x26e
20:39:30 github.com/hyperledger/fabric/integration/e2e.assertBlockReception.func1.1(0xc0004632a0, 0xc00114b740, 0xc00010ca00, 0x10f2269, 0xb, 0x1, 0xc00102e200)
20:39:30 	/w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/etcdraft_reconfig_test.go:547 +0x87
20:39:30 created by github.com/hyperledger/fabric/integration/e2e.assertBlockReception.func1
20:39:30 	/w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/etcdraft_reconfig_test.go:542 +0xfd
{code}",,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14181,,,,,,,FAB-13371,,,"08/Feb/19 11:47 PM;sykesm;console-timestamp.log;https://jira.hyperledger.org/secure/attachment/16743/console-timestamp.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b3z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/19 11:12 AM;guoger;with https://gerrit.hyperledger.org/r/c/29299/, we could hopefully have more meaningful logs at next hit.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in orderer/common/cluster/cluster_test - panic,FAB-14115,37534,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,yacovm,sykesm,sykesm,08/Feb/19 11:54 PM,23/Jan/20 4:26 AM,28/Oct/23 3:05 AM,23/Jan/20 4:26 AM,v2.0.0,,,,,,,,,fabric-orderer,,,,,1,ci-flake,,,,"Occurred in CR build https://gerrit.hyperledger.org/r/c/29192/

{code}
20:38:58 panic: runtime error: invalid memory address or nil pointer dereference
20:38:58 [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x12ed6a4]
20:38:58 
20:38:58 goroutine 554 [running]:
20:38:58 github.com/hyperledger/fabric/orderer/common/cluster_test.(*deliverServer).addExpectPullAssert.func1(0xc0003b4b00, 0xc0001fc2b0, 0x9)
20:38:58 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/deliver_test.go:257 +0x174
20:38:58 github.com/hyperledger/fabric/orderer/common/cluster_test.(*deliverServer).Deliver(0xc000487d00, 0x16a6a20, 0xc0003c82c0, 0x1692820, 0xc000487d00)
20:38:58 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/deliver_test.go:167 +0x19a
20:38:58 github.com/hyperledger/fabric/protos/orderer._AtomicBroadcast_Deliver_Handler(0x151b980, 0xc000487d00, 0x16a4a40, 0xc000382180, 0x2a32ed0, 0xc00001a930)
20:38:58 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/protos/orderer/ab.pb.go:714 +0xce
20:38:58 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC(0xc0004e8f00, 0x16a7f20, 0xc00043cf00, 0xc0001f8700, 0xc0001c3320, 0x1fa1040, 0x0, 0x0, 0x0)
20:38:58 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1170 +0x1603
20:38:58 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc0004e8f00, 0x16a7f20, 0xc00043cf00, 0xc0001f8700, 0x0)
20:38:58 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1249 +0x1304
20:38:58 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc00045a3a0, 0xc0004e8f00, 0x16a7f20, 0xc00043cf00, 0xc0001f8700)
20:38:58 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:685 +0xad
20:38:58 created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
20:38:58 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:683 +0xb9
20:38:58 FAIL	github.com/hyperledger/fabric/orderer/common/cluster	2.181s
{code}
",,C0rWin,manish-sethi,MHBauer,sykesm,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13371,,,"23/Mar/19 3:40 AM;MHBauer;30296.log;https://jira.hyperledger.org/secure/attachment/16984/30296.log","08/Feb/19 11:55 PM;sykesm;console-timestamp.log;https://jira.hyperledger.org/secure/attachment/16744/console-timestamp.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b47:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,manish-sethi,MHBauer,sykesm,wlahti,yacovm,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Mar/19 3:40 AM;MHBauer;same log output [https://gerrit.hyperledger.org/r/#/c/30296/]

 ;;;","02/Apr/19 6:40 AM;C0rWin;https://gerrit.hyperledger.org/r/#/c/30525/
https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11168/console;;;","02/Apr/19 8:38 PM;C0rWin;https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11229/console

{quote}
10:14:52 goroutine 15855 [select]:
10:14:52 github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.(*Stream).waitOnHeader(0xc0086fdc00, 0x8000, 0x8000)
10:14:52 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/transport.go:267 +0x15d
10:14:52 github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.(*Stream).RecvCompress(0xc0086fdc00, 0x858b90, 0x84e90b)
10:14:52 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/transport.go:278 +0x3d
10:14:52 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*csAttempt).recvMsg(0xc0081ec840, 0x155e300, 0xc0067b60f0, 0x0, 0xc000446e3c, 0xc0ffffffff)
10:14:52 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/stream.go:847 +0xf72
10:14:52 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*clientStream).RecvMsg.func1(0xc0081ec840, 0xc001b61d18, 0xc000059de8)
10:14:52 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/stream.go:712 +0x62
10:14:52 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*clientStream).withRetry(0xc000446d80, 0xc008d0dee0, 0xc008d0ded0, 0xc000059ef0, 0x84e6c7)
10:14:52 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/stream.go:568 +0xee
10:14:52 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*clientStream).RecvMsg(0xc000446d80, 0x155e300, 0xc0067b60f0, 0x86e432, 0xc000000008)
10:14:52 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/stream.go:711 +0x16e
10:14:52 github.com/hyperledger/fabric/protos/orderer.(*atomicBroadcastDeliverClient).Recv(0xc0084b9c80, 0x15f0328, 0xc0090fb6f0, 0x16ff5e0)
10:14:52 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/protos/orderer/ab.pb.go:669 +0x85
10:14:52 github.com/hyperledger/fabric/orderer/common/cluster.(*ImpatientStream).Recv.func1(0xc0090fb6f0, 0xc006c2d780, 0xc0075bac60)
10:14:52 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/deliver.go:528 +0x9c
10:14:52 created by github.com/hyperledger/fabric/orderer/common/cluster.(*ImpatientStream).Recv
10:14:52 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/deliver.go:526 +0x19d
10:14:52 FAIL	github.com/hyperledger/fabric/orderer/common/cluster	1200.787s
{quote};;;","04/Apr/19 3:42 AM;sykesm;Hit again today.

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11318/console

{code}
14:08:50 panic: runtime error: invalid memory address or nil pointer dereference
14:08:50 [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x1338d54]
14:08:50 
14:08:50 goroutine 1277 [running]:
14:08:50 github.com/hyperledger/fabric/orderer/common/cluster_test.(*deliverServer).addExpectPullAssert.func1(0xc0004f5f80, 0x2050e01, 0x1)
14:08:50 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/deliver_test.go:264 +0x174
14:08:50 github.com/hyperledger/fabric/orderer/common/cluster_test.(*deliverServer).Deliver(0xc000030ec0, 0x16fdf40, 0xc000070f40, 0x16e9480, 0xc000030ec0)
14:08:50 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/deliver_test.go:174 +0x19a
14:08:50 github.com/hyperledger/fabric/protos/orderer._AtomicBroadcast_Deliver_Handler(0x156f720, 0xc000030ec0, 0x16fc1a0, 0xc00039cb40, 0x2ab5798, 0xc0004aeab0)
14:08:50 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/protos/orderer/ab.pb.go:714 +0xce
14:08:50 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC(0xc000453e00, 0x16ff680, 0xc000505200, 0xc000373400, 0xc000432240, 0x20231a0, 0x0, 0x0, 0x0)
14:08:50 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1175 +0x1603
14:08:50 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc000453e00, 0x16ff680, 0xc000505200, 0xc000373400, 0x0)
14:08:50 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1254 +0x130d
14:08:50 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc000376590, 0xc000453e00, 0x16ff680, 0xc000505200, 0xc000373400)
14:08:50 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:690 +0xad
14:08:50 created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
14:08:50 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:688 +0xb9
14:08:50 FAIL	github.com/hyperledger/fabric/orderer/common/cluster	1.761s
{code};;;","09/May/19 1:58 AM;wlahti;Hit again here: [https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12016/console];;;","10/May/19 4:08 AM;yacovm;I think this might solve it https://gerrit.hyperledger.org/r/#/c/31308/

According to the logs, it looks like some of the goroutines simply don't respond within a timely manner of a second. Perhaps occasional slowness of the machine.
I increased the timeout from 1 second to 10 seconds, and I suggest we keep track to see if it sticks, and reopen if not. ;;;","17/Jan/20 11:20 PM;manish-sethi;Observed again - https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/5469/logs/73

{noformat}

2020-01-17T07:14:09.6074889Z [34m2020-01-17 07:13:14.551 UTC [test] discoverChannels -> INFO 193[0m Discovered 1 channels: [channelWeAreNotPartOf]
2020-01-17T07:14:09.6075189Z [34m2020-01-17 07:13:14.552 UTC [test] channelsToPull -> INFO 194[0m Evaluating channels to pull: [channelWeAreNotPartOf]
2020-01-17T07:14:09.6076040Z [34m2020-01-17 07:13:14.552 UTC [test] channelsToPull -> INFO 195[0m Probing whether I should pull channel channelWeAreNotPartOf
2020-01-17T07:14:09.6076386Z [34m2020-01-17 07:13:14.556 UTC [test] fetchLastBlockSeq -> INFO 196[0m 127.0.0.1:42849 is at block sequence of 1
2020-01-17T07:14:09.6076750Z [34m2020-01-17 07:13:14.556 UTC [test] HeightsByEndpoints -> INFO 197[0m Returning the heights of OSNs mapped by endpoints map[127.0.0.1:42849:2]
2020-01-17T07:14:09.6077076Z [34m2020-01-17 07:13:14.560 UTC [test] fetchLastBlockSeq -> INFO 198[0m 127.0.0.1:42849 is at block sequence of 1
2020-01-17T07:14:09.6077520Z [34m2020-01-17 07:13:14.561 UTC [test] connectToSomeEndpoint -> INFO 199[0m Connected to 127.0.0.1:42849 with last block seq of 1
2020-01-17T07:14:09.6077874Z [34m2020-01-17 07:13:14.561 UTC [test] obtainStream -> INFO 19a[0m Sending request for block [1] to 127.0.0.1:42849
2020-01-17T07:14:09.6078181Z [34m2020-01-17 07:13:14.562 UTC [test] pullBlocks -> INFO 19b[0m Got block [1] of size 0 KB from 127.0.0.1:42849
2020-01-17T07:14:09.6078525Z [31m2020-01-17 07:13:14.566 UTC [test] fetchLastBlockSeq -> ERRO 19c[0m Failed receiving the latest block from 127.0.0.1:42849: EOF
2020-01-17T07:14:09.6078838Z [33m2020-01-17 07:13:14.566 UTC [test] func1 -> WARN 19d[0m Received error of type 'EOF' from \{127.0.0.1:42849 []}
2020-01-17T07:14:09.6079323Z [33m2020-01-17 07:13:14.566 UTC [test] connectToSomeEndpoint -> WARN 19e[0m Could not connect to any endpoint of [\{127.0.0.1:42849 []}]
2020-01-17T07:14:09.6079406Z panic: runtime error: invalid memory address or nil pointer dereference
2020-01-17T07:14:09.6079459Z [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x139bbda]
2020-01-17T07:14:09.6079490Z 
2020-01-17T07:14:09.6079545Z goroutine 1148 [running]:
2020-01-17T07:14:09.6079596Z github.com/hyperledger/fabric/orderer/common/cluster_test.(*deliverServer).addExpectPullAssert.func1(0xc00045d280, 0xc00047af80, 0x15)
2020-01-17T07:14:09.6079650Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/deliver_test.go:262 +0x14a
2020-01-17T07:14:09.6079724Z github.com/hyperledger/fabric/orderer/common/cluster_test.(*deliverServer).Deliver(0xc0001fb800, 0x17a8de0, 0xc000351950, 0x178c3c0, 0xc0001fb800)
2020-01-17T07:14:09.6079780Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/deliver_test.go:171 +0x19a
2020-01-17T07:14:09.6079837Z github.com/hyperledger/fabric/protos/orderer._AtomicBroadcast_Deliver_Handler(0x15d5540, 0xc0001fb800, 0x17a5840, 0xc000548370, 0x2b8c178, 0xc000309900)
2020-01-17T07:14:09.6080011Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/protos/orderer/ab.pb.go:754 +0xce
2020-01-17T07:14:09.6080071Z github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC(0xc0000e3980, 0x17aa6a0, 0xc0000e3b00, 0xc000309900, 0xc0004127b0, 0x20fb1e0, 0x0, 0x0, 0x0)
2020-01-17T07:14:09.6080145Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1124 +0x1178
2020-01-17T07:14:09.6080204Z github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc0000e3980, 0x17aa6a0, 0xc0000e3b00, 0xc000309900, 0x0)
2020-01-17T07:14:09.6080260Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1212 +0x12e3
2020-01-17T07:14:09.6080334Z github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc0001f18a0, 0xc0000e3980, 0x17aa6a0, 0xc0000e3b00, 0xc000309900)
2020-01-17T07:14:09.6080403Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:686 +0xad
2020-01-17T07:14:09.6080455Z created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
2020-01-17T07:14:09.6080524Z /home/vsts/work/1/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:684 +0xb9
2020-01-17T07:14:09.6080737Z FAIL github.com/hyperledger/fabric/orderer/common/cluster 1.586s

{noformat};;;",,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in orderer/common/cluster/comm_test - timeout,FAB-14116,37535,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,sykesm,sykesm,09/Feb/19 12:01 AM,16/Jul/19 10:33 PM,28/Oct/23 3:05 AM,01/Apr/19 11:52 PM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"Hit during CR build https://gerrit.hyperledger.org/r/c/29174/

{code}
21:06:24 coverage: 20.1% of statements
21:06:24 panic: test timed out after 20m0s
21:06:24 
21:06:24 
{code}

Logs are extremely long and attached.",,denyeart,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14858,,,,,,,FAB-13371,FAB-15974,,"09/Feb/19 12:01 AM;sykesm;console-timestamp.log;https://jira.hyperledger.org/secure/attachment/16745/console-timestamp.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b4f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/19 12:23 PM;denyeart;Seen again in https://gerrit.hyperledger.org/r/#/c/30559/
https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11135/consoleFull;;;","01/Apr/19 11:52 PM;yacovm;The stack trace leads to this test. 



05:59:23 goroutine 19 [chan receive, 20 minutes]:
05:59:23 testing.(*T).Parallel(0xc0000e0800)
05:59:23 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:732 +0x3be
05:59:23 github.com/hyperledger/fabric/orderer/common/cluster_test.TestSendBigMessage(0xc0000e0800)
05:59:23 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:289 +0x54
05:59:23 testing.tRunner(0xc0000e0800, 0x1587708)
05:59:23 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0x163
05:59:23 created by testing.(*T).Run
05:59:23 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:878 +0x65a;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent integration test failure in e2e/cft_test,FAB-14117,37536,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,sykesm,sykesm,09/Feb/19 12:06 AM,19/Mar/19 7:57 PM,28/Oct/23 3:05 AM,25/Feb/19 11:05 PM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"Encountered in CR build https://gerrit.hyperledger.org/r/c/29174/

{code}
0:30:11 [e][peer-channel-create] Error: got unexpected status: BAD_REQUEST -- error authorizing update: error validating ReadSet: readset expected key [Group]  /Channel/Application at version 0, but got version 1
20:30:11 [e][OrdererOrg.orderer2] 2019-02-07 20:30:10.415 UTC [common.deliver] Handle -> WARN 607 Error reading from 127.0.0.1:53614: rpc error: code = Canceled desc = context canceled
20:30:11 [e][OrdererOrg.orderer2] 2019-02-07 20:30:10.415 UTC [comm.grpc.server] 1 -> INFO 608 streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Deliver grpc.peer_address=127.0.0.1:53614 error=""rpc error: code = Canceled desc = context canceled"" grpc.code=Canceled grpc.call_duration=12.289257ms
20:30:11 [e][peer-channel-create] 2019-02-07 20:30:10.596 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized
20:30:11 [e][OrdererOrg.orderer2] 2019-02-07 20:30:10.605 UTC [orderer.common.broadcast] ProcessMessage -> WARN 609 [channel: testchannel] Rejecting broadcast of config message from 127.0.0.1:53620 because of error: error authorizing update: error validating ReadSet: readset expected key [Group]  /Channel/Application at version 0, but got version 1
20:30:11 [e][OrdererOrg.orderer2] 2019-02-07 20:30:10.605 UTC [comm.grpc.server] 1 -> INFO 60a streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Broadcast grpc.peer_address=127.0.0.1:53620 grpc.code=OK grpc.call_duration=2.758305ms
20:30:11 [e][peer-channel-create] Error: got unexpected status: BAD_REQUEST -- error authorizing update: error validating ReadSet: readset expected key [Group]  /Channel/Application at version 0, but got version 1
20:30:11 [e][OrdererOrg.orderer2] 2019-02-07 20:30:10.609 UTC [common.deliver] Handle -> WARN 60b Error reading from 127.0.0.1:53618: rpc error: code = Canceled desc = context canceled
20:30:11 [e][OrdererOrg.orderer2] 2019-02-07 20:30:10.609 UTC [comm.grpc.server] 1 -> INFO 60c streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Deliver grpc.peer_address=127.0.0.1:53618 error=""rpc error: code = Canceled desc = context canceled"" grpc.code=Canceled grpc.call_duration=12.661326ms
20:30:11 [e][OrdererOrg.orderer3] 2019-02-07 20:30:10.628 UTC [orderer.common.server] handleSignals -> INFO 05a Received signal: 15 (terminated)
20:30:11 [e][OrdererOrg.orderer2] 2019-02-07 20:30:10.628 UTC [orderer.common.server] handleSignals -> INFO 60d Received signal: 15 (terminated)
20:30:11 [e][OrdererOrg.orderer2] 2019-02-07 20:30:10.629 UTC [orderer.common.cluster] handleMessage -> WARN 60e Stream read from 127.0.0.1:52132 failed: rpc error: code = Canceled desc = context canceled
20:30:11 [e][OrdererOrg.orderer2] 2019-02-07 20:30:10.629 UTC [orderer.common.cluster] handleMessage -> WARN 60f Stream read from 127.0.0.1:52132 failed: rpc error: code = Canceled desc = context canceled
20:30:11 [e][OrdererOrg.orderer2] 2019-02-07 20:30:10.629 UTC [comm.grpc.server] 1 -> INFO 610 streaming call completed grpc.service=orderer.Cluster grpc.method=Step grpc.peer_address=127.0.0.1:52132 grpc.peer_subject=""CN=orderer3.example.com,L=San Francisco,ST=California,C=US"" error=""rpc error: code = Canceled desc = context canceled"" grpc.code=Canceled grpc.call_duration=46.458761282s
20:30:11 [e][OrdererOrg.orderer2] 2019-02-07 20:30:10.629 UTC [comm.grpc.server] 1 -> INFO 611 streaming call completed grpc.service=orderer.Cluster grpc.method=Step grpc.peer_address=127.0.0.1:52132 grpc.peer_subject=""CN=orderer3.example.com,L=San Francisco,ST=California,C=US"" error=""rpc error: code = Canceled desc = context canceled"" grpc.code=Canceled grpc.call_duration=54.283762335s
20:30:11 [e][Org2.peer0] 2019-02-07 20:30:10.638 UTC [nodeCmd] handleSignals -> INFO 01f Received signal: 15 (terminated)
20:30:11 [e][Org2.peer0] 2019-02-07 20:30:10.639 UTC [gossip.gossip] Stop -> INFO 020 Stopping gossip
20:30:11 [e][Org2.peer0] 2019-02-07 20:30:10.639 UTC [gossip.discovery] Stop -> INFO 021 Stopping
20:30:11 [e][Org2.peer0] 2019-02-07 20:30:10.639 UTC [gossip.discovery] Stop -> INFO 022 Stopped
20:30:11 [e][Org2.peer0] 2019-02-07 20:30:10.639 UTC [gossip.comm] Stop -> INFO 023 Stopping
20:30:11 [e][Org2.peer0] 2019-02-07 20:30:10.640 UTC [gossip.comm] Stop -> INFO 024 Stopped
20:30:11 [e][Org1.peer0] 2019-02-07 20:30:10.638 UTC [nodeCmd] handleSignals -> INFO 01f Received signal: 15 (terminated)
20:30:11 [e][Org1.peer0] 2019-02-07 20:30:10.639 UTC [gossip.gossip] Stop -> INFO 020 Stopping gossip
20:30:11 [e][Org1.peer0] 2019-02-07 20:30:10.639 UTC [gossip.discovery] Stop -> INFO 021 Stopping
20:30:11 [e][Org1.peer0] 2019-02-07 20:30:10.639 UTC [gossip.discovery] Stop -> INFO 022 Stopped
20:30:11 [e][Org1.peer0] 2019-02-07 20:30:10.639 UTC [gossip.comm] Stop -> INFO 023 Stopping
20:30:11 [e][Org1.peer0] 2019-02-07 20:30:10.640 UTC [gossip.comm] Stop -> INFO 024 Stopped
20:30:11 [e][Org1.peer1] 2019-02-07 20:30:10.638 UTC [nodeCmd] handleSignals -> INFO 01f Received signal: 15 (terminated)
20:30:11 [e][Org1.peer1] 2019-02-07 20:30:10.639 UTC [gossip.gossip] Stop -> INFO 020 Stopping gossip
20:30:11 [e][Org1.peer1] 2019-02-07 20:30:10.639 UTC [gossip.discovery] Stop -> INFO 021 Stopping
20:30:11 [e][Org1.peer1] 2019-02-07 20:30:10.639 UTC [gossip.discovery] Stop -> INFO 022 Stopped
20:30:11 [e][Org1.peer1] 2019-02-07 20:30:10.639 UTC [gossip.comm] Stop -> INFO 023 Stopping
20:30:11 [e][Org1.peer1] 2019-02-07 20:30:10.640 UTC [gossip.comm] Stop -> INFO 024 Stopped
20:30:11 [e][Org2.peer1] 2019-02-07 20:30:10.639 UTC [nodeCmd] handleSignals -> INFO 01f Received signal: 15 (terminated)
20:30:11 [e][Org2.peer1] 2019-02-07 20:30:10.639 UTC [gossip.gossip] Stop -> INFO 020 Stopping gossip
20:30:11 [e][Org2.peer1] 2019-02-07 20:30:10.639 UTC [gossip.discovery] Stop -> INFO 021 Stopping
20:30:11 [e][Org2.peer1] 2019-02-07 20:30:10.639 UTC [gossip.discovery] Stop -> INFO 022 Stopped
20:30:11 [e][Org2.peer1] 2019-02-07 20:30:10.640 UTC [gossip.comm] Stop -> INFO 023 Stopping
20:30:11 [e][Org2.peer1] 2019-02-07 20:30:10.640 UTC [gossip.comm] Stop -> INFO 024 Stopped
20:30:11 • Failure [62.222 seconds]
20:30:11 EndToEnd Crash Fault Tolerance when an orderer is behind the latest snapshot on leader [It] catches up using the block stored in snapshot 
20:30:11 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:151
20:30:11 
20:30:11   Timed out after 60.148s.
20:30:11   Expected
20:30:11       <int>: 1
20:30:11   to equal
20:30:11       <int>: 0
20:30:11 
20:30:11   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/nwo/network.go:732
{code}

I'm sorry I did not investigate the root cause. This is one of several flakes that I hit in my CR stack so I'm just trying to capture them...

Logs are attached",,guoger,kchristidis,sykesm,,,,,,,,,,,,,,,,FAB-13920,,,,,,,,,,,,,,,,,,,FAB-13371,,,"09/Feb/19 12:06 AM;sykesm;console-timestamp.log;https://jira.hyperledger.org/secure/attachment/16746/console-timestamp.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b4n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,kchristidis,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Feb/19 12:12 AM;sykesm;Also hit this with CR build for https://gerrit.hyperledger.org/r/c/29176/2;;;","19/Feb/19 11:06 AM;guoger;Here's what happened:
- a vote split happens (probability is 10% in 2(alive)/3(total) cluster) in newly created {{testchannel}}
- cluster would wait for another {{ElectionTimeout}} to start a new round of election
- channel-create *fails* because it didn't successfully pulled config block from {{testchannel}}
- channel-create makes another attempt to create channel
- config version check fails

Will solve this as part of FAB-13920

[~kchristidis] pls see if it's ok to close this;;;","20/Feb/19 2:01 AM;kchristidis;Roger. Let's keep it up for a few more days until after FAB-13920 is merged. If we get no more failures, we should be good to close. Linking it to FAB-13920 so that we don't forget.;;;","25/Feb/19 11:04 PM;kchristidis;We've bumped the Raft library a few days ago and the chances of bumping into such issues should now be much much smaller (see update in FAB-13920). Closing this but feel free to re-open or post a new flake if you notice anything odd.;;;","25/Feb/19 11:05 PM;kchristidis;https://jira.hyperledger.org/browse/FAB-13920?focusedCommentId=57540&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-57540;;;",,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in TestNewGossipStateProvider_BatchingOfStateRequest,FAB-14118,37537,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,sykesm,sykesm,09/Feb/19 12:10 AM,20/Mar/19 3:37 PM,28/Oct/23 3:05 AM,18/Feb/19 9:20 PM,v2.0.0,,,,,v2.0.0,,,,fabric-gossip,,,,,0,ci-flake,,,,"Encountered during CR build of https://gerrit.hyperledger.org/r/c/29175/2

{code}
20:29:16 --- FAIL: TestNewGossipStateProvider_BatchingOfStateRequest (22.12s)
20:29:16     state_test.go:1241: Expected to receive two batches with missing payloads
{code}

Logs are attached.",,C0rWin,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Feb/19 12:09 AM;sykesm;console-timestamp.log;https://jira.hyperledger.org/secure/attachment/16747/console-timestamp.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b4v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Feb/19 10:17 PM;C0rWin;https://gerrit.hyperledger.org/r/29343;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent integration test failure in etcdraft_reconfig_test - when an orderer node is evicted [It] it does not complain and does it obediently,FAB-14119,37544,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,sykesm,sykesm,09/Feb/19 1:08 AM,19/Mar/19 7:57 PM,28/Oct/23 3:05 AM,24/Feb/19 6:07 AM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"Encountered in CR build for https://gerrit.hyperledger.org/r/c/29177/

{code}
15:17:23   Waiting for:
15:17:23       Raft node stopped channel=testchannel
15:17:23 
15:17:23   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/etcdraft_reconfig_test.go:399
15:17:23 ------------------------------
15:17:23 
15:17:23 
15:17:23 Summarizing 1 Failure:
15:17:23 
15:17:23 [Fail] EndToEnd reconfiguration and onboarding when an orderer node is evicted [It] it does not complain and does it obediently 
15:17:23 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/etcdraft_reconfig_test.go:399
{code}

Logs attached",,guoger,kchristidis,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13371,,,"09/Feb/19 1:07 AM;sykesm;console-timestamp.log;https://jira.hyperledger.org/secure/attachment/16751/console-timestamp.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b5z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,kchristidis,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Feb/19 3:50 AM;kchristidis;Getting a panic on this spec in: https://gerrit.hyperledger.org/r/c/29233/;;;","19/Feb/19 10:55 AM;guoger;I think this is fixed by https://gerrit.hyperledger.org/r/c/29340/ and can be closed. Pls chime in [~yacovm];;;","24/Feb/19 6:05 AM;yacovm;i think so;;;","24/Feb/19 6:06 AM;kchristidis;If this re-surfaces, we'll re-open. Let's also keep an eye out for it it's listed as new flake under {{flakes}}.;;;",,,,,,,,,,,,,,,,,,,,,,,,,
intermittent test failure in orderer/common/cluster/comm_test TestStreamAbort/Changed_TLS_certificate,FAB-14120,37545,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,sykesm,sykesm,09/Feb/19 1:12 AM,01/Apr/19 10:55 PM,28/Oct/23 3:05 AM,01/Apr/19 10:55 PM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"Encountered in CR build https://gerrit.hyperledger.org/r/c/29175/2

{code}
15:46:56 2019-02-08 15:44:50.656 UTC [test] updateStubInMapping -> INFO 436 Deactivating node 22 in channel test with endpoint of  due to TLS certificate change
15:46:56 2019-02-08 15:44:50.675 UTC [test] applyMembershipConfig -> INFO 437 22 exists in both old and new membership for channel test , skipping its deactivation
15:46:56 2019-02-08 15:44:50.676 UTC [test] Configure -> INFO 438 Exiting
15:46:56 --- FAIL: TestStreamAbort (0.45s)
15:46:56     --- FAIL: TestStreamAbort/Changed_TLS_certificate (0.25s)
15:46:56         <autogenerated>:1: 
15:46:56             	Error Trace:	comm_test.go:558
15:46:56             	            				asm_amd64.s:1333
15:46:56             	Error:      	""EOF"" does not contain ""rpc error""
15:46:56             	Test:       	TestStreamAbort/Changed_TLS_certificate
{code}

Logs are attached.",,sykesm,yacovm,,,,,,,,,,,,,,,,,,,FAB-14818,,,,,,,,,,,,,,,,,FAB-13371,,,"09/Feb/19 1:12 AM;sykesm;console-timestamp.log;https://jira.hyperledger.org/secure/attachment/16752/console-timestamp.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b67:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Apr/19 10:55 PM;yacovm;I think they stem from the same reason;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in integration tests - panic in cft_test,FAB-14121,37546,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,sykesm,sykesm,09/Feb/19 1:16 AM,01/Apr/19 11:07 PM,28/Oct/23 3:05 AM,01/Apr/19 11:07 PM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"Encountered in CR build for https://gerrit.hyperledger.org/r/c/29176/2

{code}
15:43:50 EndToEnd Crash Fault Tolerance when an orderer is behind the latest snapshot on leader catches up using the block stored in snapshot 
15:43:50 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:151
15:43:50 ------------------------------
15:44:59 panic: 
15:44:59 Your test failed.
15:44:59 Ginkgo panics to prevent subsequent assertions from running.
15:44:59 Normally Ginkgo rescues this panic so you shouldn't see it.
15:44:59 
15:44:59 But, if you make an assertion in a goroutine, Ginkgo can't capture the panic.
15:44:59 To circumvent this, you should call
15:44:59 
15:44:59 	defer GinkgoRecover()
15:44:59 
15:44:59 at the top of the goroutine that caused this panic.
15:44:59 
15:44:59 
15:44:59 goroutine 5024 [running]:
15:44:59 github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo.Fail(0xc00091b500, 0x3274, 0xc0018c50c8, 0x1, 0x1)
15:44:59 	/w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/ginkgo_dsl.go:257 +0xc8
15:44:59 github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion.(*AsyncAssertion).match.func1(0x10efb32, 0x9)
15:44:59 	/w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion/async_assertion.go:130 +0x3ad
15:44:59 github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion.(*AsyncAssertion).match(0xc001b57e40, 0x11e31c0, 0xc0015f3d00, 0xc000475f01, 0x0, 0x0, 0x0, 0xc000562140)
15:44:59 	/w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion/async_assertion.go:152 +0x43d
15:44:59 github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion.(*AsyncAssertion).Should(0xc001b57e40, 0x11e31c0, 0xc0015f3d00, 0x0, 0x0, 0x0, 0xc001b57e40)
15:44:59 	/w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/onsi/gomega/internal/asyncassertion/async_assertion.go:49 +0x81
15:44:59 github.com/hyperledger/fabric/integration/e2e.findLeader.func1(0xc0010d7ce0, 0x1126a98)
15:44:59 	/w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:385 +0x12e
15:44:59 github.com/hyperledger/fabric/integration/e2e.findLeader.func2(0xc0013f02d0, 0x1126a90, 0xc001496000, 0xc0010d7ce0)
15:44:59 	/w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:404 +0x5a
15:44:59 created by github.com/hyperledger/fabric/integration/e2e.findLeader
15:44:59 	/w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:398 +0xd3
{code}

Logs are attached.",,guoger,skarim,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14181,,,,,,,FAB-13371,,,"09/Feb/19 1:16 AM;sykesm;console-timestamp.log;https://jira.hyperledger.org/secure/attachment/16753/console-timestamp.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b6f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,skarim,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/19 11:10 AM;guoger;with https://gerrit.hyperledger.org/r/c/29299/, we could hopefully have more meaningful logs at next hit.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failures in etcdraft/chain_test - allows the leader to create multiple normal blocks without having to wait for them to be written out,FAB-14122,37547,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sykesm,sykesm,09/Feb/19 1:21 AM,02/Apr/19 2:11 PM,28/Oct/23 3:05 AM,02/Apr/19 2:11 PM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"Encountered in CR build for https://gerrit.hyperledger.org/r/c/29174/2

{code}
15:42:06 ------------------------------
15:42:06 • Failure [10.343 seconds]
15:42:06 Chain
15:42:06 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:65
15:42:06   Multiple Raft nodes
15:42:06   /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1143
15:42:06     when 3/3 nodes are running
15:42:06     /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1765
15:42:06       allows the leader to create multiple normal blocks without having to wait for them to be written out [It]
15:42:06       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1967
15:42:06 
15:42:06       Timed out after 10.000s.
15:42:06       Expected
15:42:06           <int>: 0
15:42:06       to equal
15:42:06           <int>: 3
15:42:06 
15:42:06       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1988
15:42:06 ------------------------------
15:42:06 ••••
15:42:06 ------------------------------
15:42:06 • Failure [10.366 seconds]
15:42:06 Chain
15:42:06 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:65
15:42:06   Multiple Raft nodes
15:42:06   /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1143
15:42:06     when 3/3 nodes are running
15:42:06     /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1765
15:42:06       when Snapshotting is enabled
15:42:06       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:2154
15:42:06         lagged node can catch up using snapshot [It]
15:42:06         /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:2205
15:42:06 
15:42:06         Timed out after 10.000s.
15:42:06         Expected
15:42:06             <uint64>: 6
15:42:06         to be >
15:42:06             <uint64>: 6
15:42:06 
15:42:06         /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:2227
15:42:06 ------------------------------
{code}

Logs are attached.",,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13371,,,"09/Feb/19 1:21 AM;sykesm;console-timestamp.log;https://jira.hyperledger.org/secure/attachment/16754/console-timestamp.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b6n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Apr/19 2:11 PM;guoger;Re-open if hit again;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Store TLS material on chaincode,FAB-14123,37549,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,binhn,binhn,binhn,09/Feb/19 2:04 AM,03/Dec/19 12:43 PM,28/Oct/23 3:05 AM,,,,,,,,,,,,,,,,0,,,,,"The chaincode may need to store and use TLS material to communicate with the client. We need to standardize a location and mechanism to fetch the cert and key to establish TLS connection. It should be done the same way for all chaincode platforms (Go, Java, Node)",,binhn,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13582,,,No,,Unset,No,,,"1|i00b73:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),binhn,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Store TLS material for Golang chaincode,FAB-14124,37550,37549,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,binhn,binhn,binhn,09/Feb/19 2:06 AM,03/Dec/19 12:43 PM,28/Oct/23 3:05 AM,03/Dec/19 12:43 PM,,,,,,,,,,,,,,,0,,,,,,,binhn,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b7b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),binhn,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Dec/19 12:43 PM;muralisr;This is now done in github https://jira.hyperledger.org/browse/FABCG-5;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Store TLS material for Java chaincode,FAB-14125,37551,37549,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,binhn,binhn,09/Feb/19 2:07 AM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,binhn,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b7j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),binhn,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Store TLS material for Nodejs chaincode,FAB-14126,37552,37549,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,binhn,binhn,09/Feb/19 2:07 AM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,binhn,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b7r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),binhn,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix integration/token/token_test.go,FAB-14127,37553,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,09/Feb/19 3:32 AM,19/Mar/19 8:08 PM,28/Oct/23 3:05 AM,19/Mar/19 7:42 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b7z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TokenOnwer must be validated,FAB-14128,37555,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,09/Feb/19 3:00 PM,12/Feb/19 10:58 PM,28/Oct/23 3:05 AM,12/Feb/19 10:58 PM,,,,,,,,,,,,,,,0,,,,,"Before committing any token transaction, the output's owner must be validated. For an MSP Identity that means that there exist an MSP in the channel that can deserialise and validate it.",,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i00b8f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Feb/19 3:01 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/29198/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft orderers panic: cannot append block,FAB-14129,37556,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,dongming,dongming,10/Feb/19 6:31 AM,09/Aug/19 12:36 AM,28/Oct/23 3:05 AM,25/Feb/19 12:42 PM,,,,,,v2.0.0,,,,fabric-orderer,,,,,0,raft,,,,"The network was created with image from 2/8.

We started the traffic with loop

for (nChan = 1; nChan <=10, nChan++)

      for (nThread=3; nThread<=6; nThread=+3)

             execute PTE

      end nloop

end loop

 

The 3 orderers panic around 23:39 pm (see attached orderer-CPU-Memory.png) with the message

 

 

 

 

^[[36m2019-02-09 04:38:38.734 UTC [msp.identity] Sign -> DEBU 34a9cbf^[[0m Sign: plaintext: 0AA1060A0A6F7264657265726F726712...17598351D7480466E0494164F4445AB1
 ^[[36m2019-02-09 04:38:38.734 UTC [msp.identity] Sign -> DEBU 34a9cc0^[[0m Sign: digest: 2493D2D21CF8BE5A9B950818EDB52D8E6CA57C524F1AE99750EBA1A901FBB412
 ^[[35m2019-02-09 04:38:38.734 UTC [orderer.commmon.multichannel] commitBlock -> PANI 34a9cc1^[[0m [channel: testorgschannel2] Could not append block: block number should have been 8261 but was 8260
 panic: [channel: testorgschannel2] Could not append block: block number should have been 8261 but was 8260

goroutine 3433845 [running]:
 github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc00e658000, 0x0, 0x0, 0x0)
 /go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:229 +0x515
 github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc0003e2050, 0x4, 0x14683ec, 0x28, 0xc0ac895f60, 0x2, 0x2, 0x0, 0x0, 0x0)
 /go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0xf6
 github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Panicf(0xc0003e2050, 0x14683ec, 0x28, 0xc0ac895f60, 0x2, 0x2)
 /go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:159 +0x79
 github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Panicf(0xc0003e2058, 0x14683ec, 0x28, 0xc0ac895f60, 0x2, 0x2)
 /go/src/github.com/hyperledger/fabric/common/flogging/zap.go:74 +0x60
 github.com/hyperledger/fabric/orderer/common/multichannel.(*BlockWriter).commitBlock(0xc00078cb40, 0xc07709d800, 0x163d, 0x163d)
 /go/src/github.com/hyperledger/fabric/orderer/common/multichannel/blockwriter.go:170 +0x2af
 github.com/hyperledger/fabric/orderer/common/multichannel.(*BlockWriter).WriteBlock.func1(0xc00078cb40, 0xc07709d800, 0x163d, 0x163d)
 /go/src/github.com/hyperledger/fabric/orderer/common/multichannel/blockwriter.go:154 +0x79
 created by github.com/hyperledger/fabric/orderer/common/multichannel.(*BlockWriter).WriteBlock
 /go/src/github.com/hyperledger/fabric/orderer/common/multichannel/blockwriter.go:152 +0x87

 

The three orderer log are attached.

If we set the orderer to restart, it will continue to cycle panic, restart, panic, restart.",,dongming,guoger,kchristidis,scottz,suryalnvs,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14240,FAB-14220,FAB-16258,,FAB-13892,,,"10/Feb/19 6:28 AM;dongming;o1st-0209.log;https://jira.hyperledger.org/secure/attachment/16759/o1st-0209.log","10/Feb/19 6:28 AM;dongming;o2nd-0209.log;https://jira.hyperledger.org/secure/attachment/16758/o2nd-0209.log","10/Feb/19 6:28 AM;dongming;o3rd-0209.log;https://jira.hyperledger.org/secure/attachment/16757/o3rd-0209.log","10/Feb/19 7:03 AM;dongming;orderers-CPU-Memory.PNG;https://jira.hyperledger.org/secure/attachment/16760/orderers-CPU-Memory.PNG","20/Feb/19 6:06 AM;suryalnvs;orderers-panic-logs.zip;https://jira.hyperledger.org/secure/attachment/16842/orderers-panic-logs.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b8n:",,,,Unset,Unset,,,,"1. Create a blockchain network with 3 raft orderers
2. We created 30 channels, but only used 10 for the traffic: testorgchannel1-testorgchannel10.  All channels has the same 3 org, 1 peer per org.
3. Using 3*m (m=1 and 2) threads per channel with n (n=1-10) channels, total thread number is 3*m*n, each thread targets 1 orderer in the fashion of roundrobin, i.e., thread 1 to orderer1, thread 2 to orderer 2, etc.

In our example we used PTE in Constant Mode (to send the next transaction as soon as the TX response ACK for the previous one was received. We increase number of channels.  Each thread sends 10,000 transactions.
batchsize = 500 ; batchtimeout=2s.
All orderers panic after sending 4-5000 transactions in the case with 7 channels, 6 thread each (total 42 threads).
Note that the test with 6 channels, 6 thread each (total 36 threads) succeeds.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,guoger,kchristidis,scottz,suryalnvs,yacovm,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Feb/19 10:34 PM;yacovm;[~guoger];;;","11/Feb/19 11:16 PM;guoger;Seems that the same block is proposed twice... although I don't see an obvious reason. My plan is to submit a patch to add more debug logs, and when this problem surfaces again, we can have more info.

https://gerrit.hyperledger.org/r/29236 does this (no change to status of this CR);;;","11/Feb/19 11:36 PM;yacovm;{quote}The three orderer log are attached.{quote}
[~scottz] is it possible to get the full logs since the startup? The logs attached are about - 1 second of runtime... ;;;","14/Feb/19 10:41 PM;guoger;My proposal for this:
1) merge https://gerrit.hyperledger.org/r/c/29236/3 so that if orderers crash again during other svt tests, due to the same reason, we have more info to investigate
2) put more defensive checks against replay of block. However hold off merging it for a little while, to see if this error can eventually happen again, so we can diagnose.

cc [~kchristidis][~yacovm][~dongming];;;","19/Feb/19 7:45 AM;kchristidis;Jay's CR for better logging/diagnostic has been merged.

Until this issue re-occurs and we have full logs to go along with it, I'm marking it as Unverified.;;;","19/Feb/19 8:23 AM;scottz;We are keeping an eye on traffic runs in k8s lab for this, as we try to reproduce another bug, just in case we this one resurface.

It is doubtful, because with 10 IOPS per GB in that cluster, we have not seen it occur yet. The original problem was twice seen in a lab with slower disk read/writes (2 IOPS per GB), so [~dongming] let's go back to a cluster like that to try to reproduce this with some more traffic runs and appropriate logs enabled. ;;;","20/Feb/19 6:12 AM;suryalnvs;Reproduced this issue twice when running FAB-14220 with IOPS 2 per GB within like 200 to 300 blocks. All orderers are crashing with same error
{code:java}
panic: [channel: testorgschannel3] Could not append block: block number should have been 228 but was 227.{code}
Attached the zip of all orderer logs.;;;","20/Feb/19 6:23 PM;guoger;Added an integration test to reproduce this https://gerrit.hyperledger.org/r/c/29400

This is fixed in https://gerrit.hyperledger.org/r/c/29363;;;","24/Feb/19 5:44 AM;kchristidis;Current status: expecting a new SVT run to confirm that this is fixed.;;;","25/Feb/19 12:42 PM;kchristidis;[~suryalnvs] confirms the issue is fixed.;;;",,,,,,,,,,,,,,,,,,,
Flakey gossip tests - out of memory,FAB-14130,37558,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ronenschafferibm,skarim,skarim,11/Feb/19 2:34 AM,06/Jun/19 3:47 PM,28/Oct/23 3:05 AM,06/Jun/19 3:47 PM,,,,,,,,,,fabric-gossip,,,,,0,ci-failure,ci-flake,,,"[https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8782/console]

 
{code:java}
19:22:24 ok  	github.com/hyperledger/fabric/gossip/api	0.012s	coverage: 100.0% of statements
19:26:14 fatal error: runtime: out of memory
19:26:14 
19:26:14 runtime stack:
19:26:14 runtime.throw(0x98054f, 0x16)
19:26:14 	/usr/local/go/src/runtime/panic.go:608 +0x72
19:26:14 runtime.sysMap(0xc00c000000, 0x8000000, 0xd81fb8)
19:26:14 	/usr/local/go/src/runtime/mem_linux.go:156 +0xc7
19:26:14 runtime.(*mheap).sysAlloc(0xd68c00, 0x8000000, 0x0, 0x0)
19:26:14 	/usr/local/go/src/runtime/malloc.go:619 +0x1c7
19:26:14 runtime.(*mheap).grow(0xd68c00, 0x4000, 0x0)
19:26:14 	/usr/local/go/src/runtime/mheap.go:920 +0x42
19:26:14 runtime.(*mheap).allocSpanLocked(0xd68c00, 0x4000, 0xd81fc8, 0x433b4e)
19:26:14 	/usr/local/go/src/runtime/mheap.go:848 +0x337
19:26:14 runtime.(*mheap).alloc_m(0xd68c00, 0x4000, 0xffffffffffff0101, 0x7f0e0d699e18)
19:26:14 	/usr/local/go/src/runtime/mheap.go:692 +0x119
19:26:14 runtime.(*mheap).alloc.func1()
19:26:14 	/usr/local/go/src/runtime/mheap.go:759 +0x4c
19:26:14 runtime.(*mheap).alloc(0xd68c00, 0x4000, 0x10101, 0x7f0e0d699ec0)
19:26:14 	/usr/local/go/src/runtime/mheap.go:758 +0x8a
19:26:14 runtime.largeAlloc(0x7fffe00, 0x7f0e18a20101, 0x434f01)
19:26:14 	/usr/local/go/src/runtime/malloc.go:1019 +0x97
19:26:14 runtime.mallocgc.func1()
19:26:14 	/usr/local/go/src/runtime/malloc.go:914 +0x46
19:26:14 runtime.systemstack(0x7f0e148eebe0)
19:26:14 	/usr/local/go/src/runtime/asm_amd64.s:351 +0x66
19:26:14 runtime.mstart()
19:26:14 	/usr/local/go/src/runtime/proc.go:1229
19:26:14 
19:26:14 goroutine 405 [running]:
19:26:14 runtime.systemstack_switch()
19:26:14 	/usr/local/go/src/runtime/asm_amd64.s:311 fp=0xc000058ca0 sp=0xc000058c98 pc=0x457160
19:26:14 runtime.mallocgc(0x7fffe00, 0x8ce1a0, 0xc009165b01, 0xc000058d78)
19:26:14 	/usr/local/go/src/runtime/malloc.go:913 +0x896 fp=0xc000058d40 sp=0xc000058ca0 pc=0x40d906
19:26:14 runtime.makeslice(0x8ce1a0, 0x7fffe00, 0x7fffe00, 0x4993c9, 0xc0009e2028, 0xc009165bc9)
19:26:14 	/usr/local/go/src/runtime/slice.go:70 +0x77 fp=0xc000058d70 sp=0xc000058d40 pc=0x442627
19:26:14 bytes.makeSlice(0x7fffe00, 0x0, 0x0, 0x0)
19:26:14 	/usr/local/go/src/bytes/buffer.go:231 +0x6d fp=0xc000058db0 sp=0xc000058d70 pc=0x4eb57d
19:26:14 bytes.(*Buffer).grow(0xc0001ae000, 0x200, 0x237)
19:26:14 	/usr/local/go/src/bytes/buffer.go:144 +0x15a fp=0xc000058e00 sp=0xc000058db0 pc=0x4eaeea
19:26:14 bytes.(*Buffer).ReadFrom(0xc0001ae000, 0xa29b60, 0xc0009e2028, 0x7f0e189d9570, 0xc0001ae000, 0x1)
19:26:14 	/usr/local/go/src/bytes/buffer.go:204 +0x4b fp=0xc000058e70 sp=0xc000058e00 pc=0x4eb37b
19:26:14 io.copyBuffer(0xa29260, 0xc0001ae000, 0xa29b60, 0xc0009e2028, 0x0, 0x0, 0x0, 0xc0003e77a0, 0x0, 0x0)
19:26:14 	/usr/local/go/src/io/io.go:388 +0x303 fp=0xc000058ee0 sp=0xc000058e70 pc=0x46fe03
19:26:14 io.Copy(0xa29260, 0xc0001ae000, 0xa29b60, 0xc0009e2028, 0x406825, 0xc0003e7860, 0xc00119b7b0)
19:26:14 	/usr/local/go/src/io/io.go:364 +0x5a fp=0xc000058f40 sp=0xc000058ee0 pc=0x46faba
19:26:14 os/exec.(*Cmd).writerDescriptor.func1(0xc0003e7860, 0xc00119b7b0)
19:26:14 	/usr/local/go/src/os/exec/exec.go:279 +0x4d fp=0xc000058fa0 sp=0xc000058f40 pc=0x4fbe4d
19:26:14 os/exec.(*Cmd).Start.func1(0xc000369760, 0xc000874160)
19:26:14 	/usr/local/go/src/os/exec/exec.go:400 +0x27 fp=0xc000058fd0 sp=0xc000058fa0 pc=0x4fbec7
19:26:14 runtime.goexit()
19:26:14 	/usr/local/go/src/runtime/asm_amd64.s:1333 +0x1 fp=0xc000058fd8 sp=0xc000058fd0 pc=0x459241
19:26:14 created by os/exec.(*Cmd).Start
19:26:14 	/usr/local/go/src/os/exec/exec.go:399 +0x5a6
19:26:14 
19:26:14 goroutine 1 [semacquire, 4 minutes]:
19:26:14 sync.runtime_Semacquire(0xc000898b38)
19:26:14 	/usr/local/go/src/runtime/sema.go:56 +0x39
19:26:14 sync.(*WaitGroup).Wait(0xc000898b30)
19:26:14 	/usr/local/go/src/sync/waitgroup.go:130 +0x64
19:26:14 cmd/go/internal/work.(*Builder).Do(0xc00062f180, 0xc000636780)
19:26:14 	/usr/local/go/src/cmd/go/internal/work/exec.go:174 +0x38e
19:26:14 cmd/go/internal/test.runTest(0xd58480, 0xc0000ae020, 0x1d, 0x1e)
19:26:14 	/usr/local/go/src/cmd/go/internal/test/test.go:759 +0xea9
19:26:14 main.main()
19:26:14 	/usr/local/go/src/cmd/go/main.go:219 +0x7d4
19:26:14 
19:26:14 goroutine 19 [syscall, 4 minutes]:
19:26:14 os/signal.signal_recv(0x0)
19:26:14 	/usr/local/go/src/runtime/sigqueue.go:139 +0x9c
19:26:14 os/signal.loop()
19:26:14 	/usr/local/go/src/os/signal/signal_unix.go:23 +0x22
19:26:14 created by os/signal.init.0
19:26:14 	/usr/local/go/src/os/signal/signal_unix.go:29 +0x41
19:26:14 
19:26:14 goroutine 8 [select, 3 minutes]:
19:26:14 cmd/go/internal/test.(*runCache).builderRunTest(0xc000283f90, 0xc00062f180, 0xc0007fca00, 0x0, 0x0)
19:26:14 	/usr/local/go/src/cmd/go/internal/test/test.go:1167 +0xe0c
19:26:14 cmd/go/internal/test.(*runCache).builderRunTest-fm(0xc00062f180, 0xc0007fca00, 0x797973, 0xc00062f1f0)
19:26:14 	/usr/local/go/src/cmd/go/internal/test/test.go:907 +0x3e
19:26:14 cmd/go/internal/work.(*Builder).Do.func1(0xc0007fca00)
19:26:14 	/usr/local/go/src/cmd/go/internal/work/exec.go:107 +0x72
19:26:14 cmd/go/internal/work.(*Builder).Do.func2(0xc000898b30, 0xc00062f180, 0xc00077eaa0)
19:26:14 	/usr/local/go/src/cmd/go/internal/work/exec.go:165 +0xbb
19:26:14 created by cmd/go/internal/work.(*Builder).Do
19:26:14 	/usr/local/go/src/cmd/go/internal/work/exec.go:152 +0x36a
19:26:14 
19:26:14 goroutine 308 [chan receive, 3 minutes]:
19:26:14 cmd/go/internal/base.processSignals.func1(0xc000364300)
19:26:14 	/usr/local/go/src/cmd/go/internal/base/signal.go:21 +0x34
19:26:14 created by cmd/go/internal/base.processSignals
19:26:14 	/usr/local/go/src/cmd/go/internal/base/signal.go:20 +0x93
19:26:14 
19:26:14 goroutine 407 [syscall, 3 minutes]:
19:26:14 syscall.Syscall6(0xf7, 0x1, 0x4532, 0xc0011b45d8, 0x1000004, 0x0, 0x0, 0x2065687420666920, 0x79207463656a626f, 0x672065726120756f)
19:26:14 	/usr/local/go/src/syscall/asm_linux_amd64.s:44 +0x5
19:26:14 os.(*Process).blockUntilWaitable(0xc00117a840, 0x0, 0x0, 0x0)
19:26:14 	/usr/local/go/src/os/wait_waitid.go:31 +0x98
19:26:14 os.(*Process).wait(0xc00117a840, 0x0, 0x0, 0x0)
19:26:14 	/usr/local/go/src/os/exec_unix.go:22 +0x39
19:26:14 os.(*Process).Wait(0xc00117a840, 0x0, 0x0, 0x0)
19:26:14 	/usr/local/go/src/os/exec.go:125 +0x2b
19:26:14 os/exec.(*Cmd).Wait(0xc000369760, 0x0, 0x0)
19:26:14 	/usr/local/go/src/os/exec/exec.go:465 +0x5b
19:26:14 cmd/go/internal/test.(*runCache).builderRunTest.func1(0xc000628120, 0xc000369760)
19:26:14 	/usr/local/go/src/cmd/go/internal/test/test.go:1164 +0x2b
19:26:14 created by cmd/go/internal/test.(*runCache).builderRunTest
19:26:14 	/usr/local/go/src/cmd/go/internal/test/test.go:1163 +0xd68
19:26:14 Makefile:193: recipe for target 'unit-test' failed
19:26:14 make: *** [unit-test] Error 2
19:26:14 {code}",,denyeart,MHBauer,ronenschafferibm,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15309,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b93:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,MHBauer,ronenschafferibm,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Feb/19 10:38 PM;denyeart;[~sambhavdutt] You've also seen this out of memory error right?  If it is the same one, go ahead and change priority to High.;;;","27/Feb/19 2:59 AM;skarim;[https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/9418/console] 

I hit this again. The above log is from a 1.4 release run.;;;","24/May/19 5:00 AM;MHBauer;I can't see what this was doing at the time.

There is no fabric code in the log provided.

If `go test` order is deterministic, what's next is 
github.com/hyperledger/fabric/gossip/comm	

So it could be some thing in gossip, but it appears to be a failure to start running the next test package. I don't know any reason there would be extremely large by memory to compile or run in these areas.;;;","06/Jun/19 3:47 PM;ronenschafferibm;This failure didn't show up for over a month (last known fail on 10/Feb/19) - closing...;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Move bcssp to fab-lib-go,FAB-14131,37560,37039,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,11/Feb/19 1:08 PM,22/Feb/19 12:59 PM,28/Oct/23 3:05 AM,13/Feb/19 6:54 AM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b9j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update bccsp references,FAB-14132,37561,37039,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,11/Feb/19 1:08 PM,22/Feb/19 12:58 PM,28/Oct/23 3:05 AM,13/Feb/19 6:54 AM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00b9r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Root access from deployed chaincodes,FAB-14134,37576,,Task,To Do,FAB,Fabric,software,denyeart,,,High,,mastersingh24,Tecnalia,Tecnalia,11/Feb/19 7:10 PM,03/Dec/19 1:51 AM,28/Oct/23 3:05 AM,,v1.3.0,v1.4.0,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,"According to Docker best practises, software executed inside Docker containers should not be running as root. At current latest stable version (1.4), chaincodes of containers such as dev-peer0-org1-contractName-1.0.0-a468ee1924d2ac5fc58413a725b295b47a88c39e705a71d5e5201823805e83db are executed with root permissions.

Permissions can be check looking chaincode executable located at /usr/local/bin/chaincode:

{{File: './usr/local/bin/chaincode'}}
{{Size: 20662616 Blocks: 40360 IO Block: 4096 regular file}}
{{Device: 75h/117d Inode: 24 Links: 1}}
{{Access: (0755/-rwxr-xr-x) Uid: ( 0/ root) Gid: ( 0/ root)}}
{{Access: 2019-02-11 09:54:02.000000000 +0000}}
{{Modify: 2019-02-11 09:54:02.000000000 +0000}}
{{Change: 2019-02-11 09:54:05.701075407 +0000}}

 Consider adding a new user with no root acces when building the container image using {{USER}} directive in {{Dockerfile}} and creating it if needed with useradd or similar",,denyeart,mastersingh24,silliman,Tecnalia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bcf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mastersingh24,silliman,Tecnalia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Sep/19 7:40 PM;mastersingh24;This is done for Go chaincode (now runs as user chaincode).;;;","25/Nov/19 8:03 PM;Tecnalia;[~mastersingh24] where should we see the changes? I mean, Im running HLF 1.4.0 and ""dev-peer0-**"" container chaincode process is still running at root.

Im using docker image version with following properties:
 * org.hyperledger.fabric.base.version: 0.4.14
 * org.hyperledger.fabric.chaincode.id.version: 1.0.0
 * org.hyperledger.fabric.chaincode.type: GOLANG
 * org.hyperledger.fabric.version: 1.4.0

Where are supposed to be this changes deployed? Any specific tag? commit?

 ;;;","03/Dec/19 1:50 AM;denyeart;Done for go chaincode in master (v2.0) in FAB-9394. Will keep this Jira open for Node and Java chaincode subtasks.;;;","03/Dec/19 1:51 AM;denyeart;[~mastersingh24] Do you intend to work on this, or should we pass over to the team of [~heatherp] for doing in v2.0 timeframe?;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Token e2e based on Token CLI,FAB-14135,37578,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,11/Feb/19 9:29 PM,21/Feb/19 2:02 AM,28/Oct/23 3:05 AM,21/Feb/19 2:02 AM,,,,,,,,,,,,,,,0,,,,,,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11153,,,No,,Unset,No,,,"1|i00bcn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Feb/19 9:30 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/28953/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
expansion of a single node Raft cluster is impossible,FAB-14136,37579,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,11/Feb/19 9:42 PM,04/Mar/19 9:11 PM,28/Oct/23 3:05 AM,18/Feb/19 2:21 PM,,,,,,,,,,fabric-orderer,,,,,0,raft,Raft,,,"The following facts lead to addition of a node to a single node Raft cluster - impossible:

* We can only add 1 node at a time
* A majority of 2 nodes is all of the nodes
* When a new node is onboarded - it pulls the system channel and application channels via the Deliver API,
prior to starting the etcdraft chain.
* When a leader loses the quorum, it rejects Deliver API requests

The following integration test, verifies it. 

{code}

			launch := func(o *nwo.Orderer) {
				runner := network.OrdererRunner(o)
				ordererRunners = append(ordererRunners, runner)

				process := ifrit.Invoke(grouper.Member{Name: o.ID(), Runner: runner})
				Eventually(process.Ready()).Should(BeClosed())
				ordererProcesses = append(ordererProcesses, process)
			}

			layout := nwo.BasicEtcdRaft()
			network = nwo.New(layout, testDir, client, BasePort(), components)
			orderer := network.Orderer(""orderer"")

			peer = network.Peer(""Org1"", ""peer1"")

			network.GenerateConfigTree()
			network.Bootstrap()

			By(""Launching the orderer"")
			launch(orderer)

			By(""Checking that it elected itself as a leader"")
			findLeader(ordererRunners)

			By(""Extending the network configuration to add a new orderer"")
			orderer2 := &nwo.Orderer{
				Name:         ""orderer2"",
				Organization: ""OrdererOrg"",
			}
			ports := nwo.Ports{}
			for _, portName := range nwo.OrdererPortNames() {
				ports[portName] = network.ReservePort()
			}
			network.PortsByOrdererID[orderer2.ID()] = ports
			network.Orderers = append(network.Orderers, orderer2)
			network.GenerateOrdererConfig(orderer2)
			extendNetwork(network)

			secondOrdererCertificatePath := filepath.Join(testDir, ""crypto"", ""ordererOrganizations"", ""example.com"",
				""orderers"", ""orderer2.example.com"", ""tls"", ""server.crt"")
			secondOrdererCertificate, err := ioutil.ReadFile(secondOrdererCertificatePath)
			Expect(err).NotTo(HaveOccurred())

			By(""Adding the second orderer"")
			nwo.AddConsenter(network, peer, orderer, ""systemchannel"", etcdraft.Consenter{
				ServerTlsCert: secondOrdererCertificate,
				ClientTlsCert: secondOrdererCertificate,
				Host:          ""127.0.0.1"",
				Port:          uint32(network.OrdererPort(orderer2, nwo.ListenPort)),
			})

			By(""Obtaining the last config block from the orderer"")
			// Get the last config block of the system channel
			configBlock := nwo.GetConfigBlock(network, peer, orderer, ""systemchannel"")
			// Plant it in the file system of orderer5, the new node to be onboarded.
			err = ioutil.WriteFile(filepath.Join(testDir, ""systemchannel_block.pb""), utils.MarshalOrPanic(configBlock), 0644)
			Expect(err).NotTo(HaveOccurred())

			By(""Waiting for the existing orderer to relinquish its leadership"")
			Eventually(ordererRunners[0].Err(), time.Minute, time.Second).Should(gbytes.Say(""1 stepped down to follower since quorum is not active""))

			time.Sleep(time.Second * 20)
			By(""Launching orderer5"")
			launch(orderer2)
{code}",,C0rWin,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bcv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,yacovm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Feb/19 11:41 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/29233/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"gossip tests failed in the daily unit-tests, peer failed to connect to channel",FAB-14138,37583,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,sambhavdutt,sambhavdutt,11/Feb/19 11:56 PM,19/Mar/19 7:57 PM,28/Oct/23 3:05 AM,12/Feb/19 12:14 AM,v1.4.0,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"There was an Authentication fail observed in gossip tests and peer failed to connect to channel.

*Intermittent:* No
*Branch:* release-1.4
*Platform:* s390x
*Error Snippet:*

{code:java}
20:44:20 [33m2019-02-06 20:25:31.640 EST [gossip.comm#1619] func1 -> WARN 183[0m localhost:1610, PKIid:6c6f63616c686f73743a31363130 isn't responsive: rpc error: code = Unavailable desc = transport is closing
20:44:20 [33m2019-02-06 20:25:31.640 EST [gossip.discovery#localhost:1619] expireDeadMembers -> WARN 184[0m Entering [6c6f63616c686f73743a31363130]
20:44:20 [33m2019-02-06 20:25:31.640 EST [gossip.discovery#localhost:1619] expireDeadMembers -> WARN 185[0m Closing connection to Endpoint: 1.2.3.4:1610, InternalEndpoint: localhost:1610, PKI-ID: 6c6f63616c686f73743a31363130, Metadata: 
20:44:20 [33m2019-02-06 20:25:31.640 EST [gossip.discovery#localhost:1619] expireDeadMembers -> WARN 186[0m Exiting
20:44:20 [33m2019-02-06 20:25:36.127 EST [gossip.channel#p1] func5 -> WARN 187[0m Peer [108 111 99 97 108 104 111 115 116 58 49 54 49 52] isn't eligible for channel A : Forbidden
{code}

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-release-1.4-s390x/11/",,C0rWin,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,b347664ed1f0d65dcc1f452ef90d2b80f273e4e7,Unset,No,,,"1|i00bdj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Feb/19 12:13 AM;C0rWin;This is fine as we also testing negative path, if something goes wrong test will fail.;;;","12/Feb/19 12:14 AM;C0rWin;Works as expected as negative paths are also tested hence reported log entries.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Backport Kafka health check to fabric 1.4.x,FAB-14139,37588,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,skarim,sykesm,sykesm,12/Feb/19 12:32 AM,22/Feb/19 8:25 AM,28/Oct/23 3:05 AM,22/Feb/19 8:25 AM,,,,,,v1.4.1,,,,fabric-orderer,,,,,0,ipm,,,,"As a user of Fabric 1.4, LTS, I'd like to benefit from the Kafka health checks introduced into the master branch.",,skarim,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzq7t:4",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Feb/19 8:25 AM;skarim;https://gerrit.hyperledger.org/r/c/29448/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Flaky test `TestAccept` in gossip/api,FAB-14140,37594,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,guoger,guoger,12/Feb/19 2:07 AM,27/Mar/19 7:01 PM,28/Oct/23 3:05 AM,27/Mar/19 7:01 PM,,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8812/console

{code}
00:13:30 ok  	github.com/hyperledger/fabric/gossip/api	0.006s	coverage: 100.0% of statements
00:14:00 2019-02-11 16:13:40.814 UTC [gossip.comm#1548] createConnection -> WARN 001 Remote endpoint claims to be a different peer, expected 6c6f63616c686f73743a31353531 but got 6c6f63616c686f73743a31353530
00:14:00 2019-02-11 16:13:40.814 UTC [gossip.comm#1548] sendToEndpoint -> WARN 002 Failed obtaining connection for localhost:1550, PKIid:6c6f63616c686f73743a31353531 reason: authentication failure
00:14:00 2019-02-11 16:13:41.935 UTC [gossip.comm#6870] func1 -> WARN 003 localhost:6871, PKIid:6c6f63616c686f73743a36383731 isn't responsive: EOF
00:14:00 2019-02-11 16:13:41.947 UTC [gossip.comm#4611] func1 -> WARN 004 localhost:4612, PKIid:6c6f63616c686f73743a34363132 isn't responsive: EOF
00:14:00 2019-02-11 16:13:42.447 UTC [gossip.comm#4611] sendToEndpoint -> WARN 005 Failed obtaining connection for localhost:4612, PKIid:6c6f63616c686f73743a34363132 reason: context deadline exceeded
00:14:00 2019-02-11 16:13:42.748 UTC [gossip.comm#4611] sendToEndpoint -> WARN 006 Failed obtaining connection for localhost:4612, PKIid:6c6f63616c686f73743a34363132 reason: context deadline exceeded
00:14:00 2019-02-11 16:13:42.848 UTC [gossip.comm#4611] sendToEndpoint -> WARN 007 Failed obtaining connection for localhost:4612, PKIid:6c6f63616c686f73743a34363132 reason: context deadline exceeded
00:14:00 2019-02-11 16:13:43.048 UTC [gossip.comm#4611] sendToEndpoint -> WARN 008 Failed obtaining connection for localhost:4612, PKIid:6c6f63616c686f73743a34363132 reason: context deadline exceeded
00:14:00 2019-02-11 16:13:46.292 UTC [gossip.comm#2000] SetDialOpts -> WARN 009 Given an empty set of grpc.DialOption, aborting
00:14:00 2019-02-11 16:13:46.292 UTC [gossip.comm#3000] SetDialOpts -> WARN 00a Given an empty set of grpc.DialOption, aborting
00:14:00 2019-02-11 16:13:48.308 UTC [gossip.comm#9611] authenticateRemotePeer -> WARN 00b 127.0.0.1:46828 didn't send TLS certificate
00:14:00 2019-02-11 16:13:48.308 UTC [gossip.comm#9611] GossipStream -> ERRO 00c Authentication failed: No TLS certificate
00:14:00 2019-02-11 16:13:49.312 UTC [gossip.comm#9611] authenticateRemotePeer -> ERRO 00d Failed verifying signature from 127.0.0.1:46830 : Wrong certificate:[203 38 80 186 44 41 213 70 38 207 210 34 213 0 130 215 103 14 206 130 237 34 163 197 164 243 189 76 185 196 110 151 0], [24 1 114 66 10 14 108 111 99 97 108 104 111 115 116 58 57 54 49 50 18 14 108 111 99 97 108 104 111 115 116 58 57 54 49 50 26 32 235 124 177 128 252 221 28 124 114 180 138 128 33 236 66 124 142 192 208 78 103 244 34 136 184 71 63 30 61 86 176 96]
00:14:00 2019-02-11 16:13:49.312 UTC [gossip.comm#9611] GossipStream -> ERRO 00e Authentication failed: Wrong certificate:[203 38 80 186 44 41 213 70 38 207 210 34 213 0 130 215 103 14 206 130 237 34 163 197 164 243 189 76 185 196 110 151 0], [24 1 114 66 10 14 108 111 99 97 108 104 111 115 116 58 57 54 49 50 18 14 108 111 99 97 108 104 111 115 116 58 57 54 49 50 26 32 235 124 177 128 252 221 28 124 114 180 138 128 33 236 66 124 142 192 208 78 103 244 34 136 184 71 63 30 61 86 176 96]
00:14:00 2019-02-11 16:13:50.316 UTC [gossip.comm#9611] authenticateRemotePeer -> WARN 00f Identity store rejected 127.0.0.1:46836 : identity doesn't match the computed pkiID
00:14:00 2019-02-11 16:13:50.316 UTC [gossip.comm#9611] GossipStream -> ERRO 010 Authentication failed: identity doesn't match the computed pkiID
00:14:00 2019-02-11 16:13:51.320 UTC [gossip.comm#9611] GossipStream -> ERRO 011 Authentication failed: Expected [82 25 149 84 65 255 15 68 130 166 222 90 46 179 240 16 45 144 188 71 61 49 162 5 238 39 55 175 152 115 226 148] in remote hash of TLS cert, but got [82 25 149 84 65 255 15 68 130 166 222 90 46 179 240 16 45 144 188 71 61 49 162 5 238 39 55 175 152 115 226 148 0]
00:14:00 2019-02-11 16:13:52.323 UTC [gossip.comm#9611] authenticateRemotePeer -> WARN 012 127.0.0.1:46842 didn't send a pkiID
00:14:00 2019-02-11 16:13:52.323 UTC [gossip.comm#9611] GossipStream -> ERRO 013 Authentication failed: No PKI-ID
00:14:00 2019-02-11 16:13:53.326 UTC [gossip.comm#9611] authenticateRemotePeer -> WARN 014 Expected connection message from 127.0.0.1:46846 but got <nil>
00:14:00 2019-02-11 16:13:53.326 UTC [gossip.comm#9611] GossipStream -> ERRO 015 Authentication failed: Wrong type
00:14:00 --- FAIL: TestAccept (10.01s)
00:14:00     comm_test.go:922: 
00:14:00         	Error Trace:	comm_test.go:922
00:14:00         	            				comm_test.go:750
00:14:00         	Error:      	Not equal: 
00:14:00         	            	expected: 20
00:14:00         	            	actual  : 1
00:14:00         	Test:       	TestAccept
00:14:00         	Messages:   	Didn't receive all messages sent
00:14:00     comm_test.go:758: 
00:14:00         	Error Trace:	comm_test.go:758
00:14:00         	Error:      	Should NOT be empty, but was []
00:14:00         	Test:       	TestAccept
00:14:00 2019-02-11 16:13:56.329 UTC [gossip.comm#9611] authenticateRemotePeer -> WARN 016 Failed reading messge from 127.0.0.1:46848, reason: timed out waiting for connection message from 127.0.0.1:46848
00:14:00 2019-02-11 16:13:56.329 UTC [gossip.comm#9611] GossipStream -> ERRO 017 Authentication failed: timed out waiting for connection message from 127.0.0.1:46848
00:14:00 FAIL
00:14:00 coverage: 90.9% of statements
00:14:00 FAIL	github.com/hyperledger/fabric/gossip/comm	21.577s
{code}",,C0rWin,guoger,,,,,,,,,,,,,,,,,,,,,,,FAB-14353,,,,,,FAB-14748,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bf3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Feb/19 2:09 AM;guoger;[~C0rWin] [~yacovm];;;","27/Mar/19 7:01 PM;C0rWin;appears to same issue as reported in FAB-14748;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Docker namespace confusion between base and fabric,FAB-14141,37595,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suppandi,suppandi,suppandi,12/Feb/19 3:51 AM,09/Mar/19 9:07 PM,28/Oct/23 3:05 AM,09/Mar/19 9:07 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,"By default the base and fabric namespaces are `hyperledger`. When you use two different values, it causes a lot of confusion. eg: the following images are built with

*DOCKER_NS=fabric-ns* and *BASE_DOCKER_NS=base-ns*

 

{{base-ns/fabric-peer:latest}}

{{fabric-ns/}}{{fabric-peer:2.0.0}}

{{fabric-ns/}}{{fabric-peer:amd64-2.0.0-snapshot-extra}}

 

Similar confusion gets across into baseos ... eg from sampleconfig/core.yaml, under the chaincode section.

 

{{builder: $(DOCKER_NS)/fabric-ccenv:$(PROJECT_VERSION)}}

{{golang:}}
{{  # golang will never need more than baseos}}
{{  runtime: $(BASE_DOCKER_NS)/fabric-baseos:$(PROJECT_VERSION)}}{{ }}

{{car:}}
{{  # car may need more facilities (JVM, etc) in the future as the catalog}}
{{  # of platforms are expanded. For now, we can just use baseos}}
{{  runtime: $(BASE_DOCKER_NS)/fabric-baseos:$(PROJECT_VERSION)}}{{ }}

{{java:}}
{{  # This is an image based on java:openjdk-8 with addition compiler}}
{{  # tools added for java shim layer packaging.}}
{{  # This image is packed with shim layer libraries that are necessary}}
{{  # for Java chaincode runtime.}}
{{  runtime: $(DOCKER_NS)/fabric-javaenv:latest}}

 

You can see the mixing of DOCKER_NS, BASE_DOCKER_NS, PROJECT_VERSION, latest.

 

I propose a standard naming convention - use DOCKER_NS for all images built using the fabric project and BASE_DOCKER_NS for all images built using the 3rd party fabric-baseimage project.",,suppandi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bfb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suppandi,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Onboarding a channel of size 2 panics,FAB-14142,37597,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,12/Feb/19 5:40 AM,03/Mar/19 9:58 PM,28/Oct/23 3:05 AM,14/Feb/19 7:13 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,"When the list of channels is iterated on in order to enumerate all application channels in the system channel - we start from the block with a sequence of 1, because the genesis block of the system channel doesn't contain a channel creation transaction.

This has an unexpected problem when the system channel has only 2 blocks in it, and a new orderer is onboarded (so the second block is a configuration block, such that we don't have any channels in the system apart from the system channel) - because it results in a null reference panic.

This can be trivially solved by just pulling that block as well. ",,guoger,kchristidis,yacovm,,,,,,,,,,,,,,,,FAB-13616,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bfj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,kchristidis,yacovm,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Feb/19 6:09 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/29247/;;;","12/Feb/19 11:04 AM;guoger;Is this issue the one we talked about before? [~yacovm] How come we reached the conclusion that was a false alert...;;;","12/Feb/19 5:18 PM;yacovm;yes. i reproduced it. ;;;","14/Feb/19 7:13 AM;kchristidis;Thanks for this fix!;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Use ephemeral ports in gossip comm tests,FAB-14143,37609,33033,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,12/Feb/19 6:03 PM,04/Apr/19 11:22 PM,28/Oct/23 3:05 AM,15/Feb/19 1:06 AM,,,,,,,,,,fabric-gossip,,,,,0,hygiene,,,,"Currently, all unit tests under gossip comm use the test constructor NewCommInstanceWithServer with a hard coded port number.

We need to use ephemeral ports and avoid using that constructor.",,hagarm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bgf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Feb/19 9:49 PM;hagarm;https://gerrit.hyperledger.org/r/#/c/29255/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Endorsement policy n-of fails for n>1 and only for some operations.,FAB-14145,37620,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,jlcs,jlcs,12/Feb/19 9:40 PM,13/Feb/19 6:22 PM,28/Oct/23 3:05 AM,13/Feb/19 4:56 PM,v1.4.0,,,,,,,,,fabric-peer,,,,,0,endorsement,peer,signature,,"Hello, I'm having trouble with the n-of endorsement policy.
In particular, I'm using a 3-of policy with 4 deployed peers in the channel.
I use a custom manager to communicate with the network through the node SDK.

All versions are for Fabric 1.4.

A particular operation, let's call it Y, over the chaincode (with writes) works fine, but other operations always fail with an ENDORSEMENT_POLICY_FAILURE. 
Reading the debug logs in the peer, it appears to validate the signature of the first endorsement, but the other 3 endorsements have invalid signatures.
Nonetheless, the same peers successfully sign the Y operation.

Also, I print the following with results being the ProposalResponseObject returned by the SDK:

{{for(let res of results[0]) {
     console.log(""=====> "", this._channel.verifyProposalResponse(res as ProposalResponse));
}
/*
Prints:
=====> true
=====> true
=====> true
=====> true
*/}}

If I use a 1-of policy, everything works.

If it weren't because calling the same chaincode with different arguments (the function) works, I would suspect that the signatures are indeed invalid and the SDK fails.


----------

The DEBUG logs of one of the peers shows (only partial logs for clarity):

* For the successful endorsement:

{{
[36m2019-02-12 10:15:15.556 UTC [committer.txvalidator] Validate -> DEBU 13193 [0m [rrb] START Block Validation for block [6]
[36m2019-02-12 10:15:15.556 UTC [protoutils] checkSignatureFromCreator -> DEBU 1319c [0m creator is valid
[36m2019-02-12 10:15:15.558 UTC [protoutils] validateEndorserTransaction -> DEBU 131a2 [0m validateEndorserTransaction info: signature header is valid

[36m2019-02-12 10:15:15.559 UTC [cauthdsl] func2 -> DEBU 131b0 [0m 0xc003527480 signed by 0 principal evaluation starts (used [false false false false])


[36m2019-02-12 10:15:15.560 UTC [cauthdsl] func2 -> DEBU 131b1 [0m 0xc003527480 processing identity 0 with bytes of a997a0
[36m2019-02-12 10:15:15.560 UTC [cauthdsl] func2 -> DEBU 131b2 [0m 0xc003527480 principal matched by identity 0
[36m2019-02-12 10:15:15.560 UTC [msp.identity] Verify -> DEBU 131b4 [0m Verify: digest = ...
[36m2019-02-12 10:15:15.560 UTC [msp.identity] Verify -> DEBU 131b5 [0m Verify: sig = ...
[36m2019-02-12 10:15:15.560 UTC [cauthdsl] func2 -> DEBU 131bc [0m 0xc003527480 principal evaluation succeeds for identity 0

[36m2019-02-12 10:15:15.560 UTC [cauthdsl] func2 -> DEBU 131be [0m 0xc003527480 signed by 1 principal evaluation starts (used [true false false false])


[36m2019-02-12 10:15:15.560 UTC [cauthdsl] func2 -> DEBU 131c0 [0m 0xc003527480 skipping identity 0 because it has already been used
[36m2019-02-12 10:15:15.560 UTC [cauthdsl] func2 -> DEBU 131c2 [0m 0xc003527480 principal matched by identity 1
[36m2019-02-12 10:15:15.561 UTC [cauthdsl] func2 -> DEBU 131cc [0m 0xc003527480 principal evaluation succeeds for identity 1

[36m2019-02-12 10:15:15.561 UTC [cauthdsl] func2 -> DEBU 131cd [0m 0xc003527480 signed by 2 principal evaluation starts (used [true true false false])

[36m2019-02-12 10:15:15.561 UTC [cauthdsl] func2 -> DEBU 131ce [0m 0xc003527480 skipping identity 0 because it has already been used
[36m2019-02-12 10:15:15.561 UTC [cauthdsl] func2 -> DEBU 131cf [0m 0xc003527480 skipping identity 1 because it has already been used
[36m2019-02-12 10:15:15.561 UTC [cauthdsl] func2 -> DEBU 131d1 [0m 0xc003527480 principal matched by identity 2
[36m2019-02-12 10:15:15.562 UTC [cauthdsl] func2 -> DEBU 131d4 [0m 0xc003527480 principal evaluation succeeds for identity 2

[36m2019-02-12 10:15:15.562 UTC [cauthdsl] func2 -> DEBU 131d5 [0m 0xc003527480 signed by 3 principal evaluation starts (used [true true true false])

[36m2019-02-12 10:15:15.562 UTC [cauthdsl] func2 -> DEBU 131d6 [0m 0xc003527480 skipping identity 0 because it has already been used
[36m2019-02-12 10:15:15.562 UTC [cauthdsl] func2 -> DEBU 131d7 [0m 0xc003527480 skipping identity 1 because it has already been used
[36m2019-02-12 10:15:15.562 UTC [cauthdsl] func2 -> DEBU 131d8 [0m 0xc003527480 skipping identity 2 because it has already been used
[36m2019-02-12 10:15:15.562 UTC [cauthdsl] func2 -> DEBU 131da [0m 0xc003527480 principal matched by identity 3
[36m2019-02-12 10:15:15.562 UTC [cauthdsl] func2 -> DEBU 131dd [0m 0xc003527480 principal evaluation succeeds for identity 3

[36m2019-02-12 10:15:15.562 UTC [cauthdsl] func1 -> DEBU 131de [0m 0xc003527480 gate 1549966515559216071 evaluation succeeds
[36m2019-02-12 10:15:15.563 UTC [vscc] Validate -> DEBU 131df [0m block 6, namespace: *****, tx 0 validation results is: <nil>

}}
-----------

* For the failing endorsement:

{{
[36m2019-02-12 10:32:12.473 UTC [cauthdsl] func2 -> DEBU 7aa3d [0m 0xc0031a0a40 signed by 0 principal evaluation starts (used [false false false false])

[36m2019-02-12 10:32:12.473 UTC [cauthdsl] func2 -> DEBU 7aa3f [0m 0xc0031a0a40 principal matched by identity 0
[36m2019-02-12 10:32:12.473 UTC [msp.identity] Verify -> DEBU 7aa40 [0m Verify: digest = ...
[36m2019-02-12 10:32:12.473 UTC [msp.identity] Verify -> DEBU 7aa41 [0m Verify: sig = ...
[36m2019-02-12 10:32:12.474 UTC [cauthdsl] func2 -> DEBU 7aa42 [0m 0xc0031a0a40 principal evaluation succeeds for identity 0

[36m2019-02-12 10:32:12.474 UTC [cauthdsl] func2 -> DEBU 7aa43 [0m 0xc0031a0a40 signed by 1 principal evaluation starts (used [true false false false])

[36m2019-02-12 10:32:12.474 UTC [cauthdsl] func2 -> DEBU 7aa44 [0m 0xc0031a0a40 skipping identity 0 because it has already been used
[36m2019-02-12 10:32:12.474 UTC [cauthdsl] func2 -> DEBU 7aa45 [0m 0xc0031a0a40 processing identity 1 with bytes of a997a0
[36m2019-02-12 10:32:12.474 UTC [cauthdsl] func2 -> DEBU 7aa46 [0m 0xc0031a0a40 principal matched by identity 1
[36m2019-02-12 10:32:12.474 UTC [msp.identity] Verify -> DEBU 7aa47 [0m Verify: digest = ...
[36m2019-02-12 10:32:12.474 UTC [msp.identity] Verify -> DEBU 7aa48 [0m Verify: sig = ...

[36m2019-02-12 10:32:12.474 UTC [cauthdsl] func2 -> DEBU 7aa49 [0m 0xc0031a0a40 signature for identity 1 is invalid: The signature is invalid

[36m2019-02-12 10:32:12.474 UTC [cauthdsl] func2 -> DEBU 7aa4a [0m 0xc0031a0a40 processing identity 2 with bytes of a997a0
[36m2019-02-12 10:32:12.474 UTC [cauthdsl] func2 -> DEBU 7aa4b [0m 0xc0031a0a40 identity 2 does not satisfy principal: the identity is a member of a different MSP (expected *******MSP, got ***********MSP)
[36m2019-02-12 10:32:12.474 UTC [cauthdsl] func2 -> DEBU 7aa4c [0m 0xc0031a0a40 processing identity 3 with bytes of a997a0
[36m2019-02-12 10:32:12.474 UTC [cauthdsl] func2 -> DEBU 7aa4d [0m 0xc0031a0a40 identity 3 does not satisfy principal: the identity is a member of a different MSP (expected *******MSP, got *************MSP)
[36m2019-02-12 10:32:12.474 UTC [cauthdsl] func2 -> DEBU 7aa4e [0m 0xc0031a0a40 principal evaluation fails

[36m2019-02-12 10:32:12.474 UTC [cauthdsl] func2 -> DEBU 7aa4f [0m 0xc0031a0a40 signed by 2 principal evaluation starts (used [true false false false])

[36m2019-02-12 10:32:12.474 UTC [cauthdsl] func2 -> DEBU 7aa50 [0m 0xc0031a0a40 skipping identity 0 because it has already been used
[36m2019-02-12 10:32:12.474 UTC [cauthdsl] func2 -> DEBU 7aa51 [0m 0xc0031a0a40 processing identity 1 with bytes of a997a0
[36m2019-02-12 10:32:12.474 UTC [cauthdsl] func2 -> DEBU 7aa52 [0m 0xc0031a0a40 identity 1 does not satisfy principal: the identity is a member of a different MSP (expected ***********MSP, got *******MSP)
[36m2019-02-12 10:32:12.475 UTC [cauthdsl] func2 -> DEBU 7aa53 [0m 0xc0031a0a40 processing identity 2 with bytes of a997a0
[36m2019-02-12 10:32:12.475 UTC [cauthdsl] func2 -> DEBU 7aa54 [0m 0xc0031a0a40 principal matched by identity 2
[36m2019-02-12 10:32:12.475 UTC [msp.identity] Verify -> DEBU 7aa55 [0m Verify: digest = ...
[36m2019-02-12 10:32:12.475 UTC [msp.identity] Verify -> DEBU 7aa56 [0m Verify: sig = ...

[36m2019-02-12 10:32:12.475 UTC [cauthdsl] func2 -> DEBU 7aa57 [0m 0xc0031a0a40 signature for identity 2 is invalid: The signature is invalid

[36m2019-02-12 10:32:12.475 UTC [cauthdsl] func2 -> DEBU 7aa58 [0m 0xc0031a0a40 processing identity 3 with bytes of a997a0
[36m2019-02-12 10:32:12.475 UTC [cauthdsl] func2 -> DEBU 7aa59 [0m 0xc0031a0a40 identity 3 does not satisfy principal: the identity is a member of a different MSP (expected ***********MSP, got *************MSP)
[36m2019-02-12 10:32:12.475 UTC [cauthdsl] func2 -> DEBU 7aa5a [0m 0xc0031a0a40 principal evaluation fails

[36m2019-02-12 10:32:12.475 UTC [cauthdsl] func2 -> DEBU 7aa5b [0m 0xc0031a0a40 signed by 3 principal evaluation starts (used [true false false false])

[36m2019-02-12 10:32:12.475 UTC [cauthdsl] func2 -> DEBU 7aa5c [0m 0xc0031a0a40 skipping identity 0 because it has already been used
[36m2019-02-12 10:32:12.475 UTC [cauthdsl] func2 -> DEBU 7aa5d [0m 0xc0031a0a40 processing identity 1 with bytes of a997a0
[36m2019-02-12 10:32:12.475 UTC [cauthdsl] func2 -> DEBU 7aa5e [0m 0xc0031a0a40 identity 1 does not satisfy principal: the identity is a member of a different MSP (expected *************MSP, got *******MSP)
[36m2019-02-12 10:32:12.475 UTC [cauthdsl] func2 -> DEBU 7aa5f [0m 0xc0031a0a40 processing identity 2 with bytes of a997a0
[36m2019-02-12 10:32:12.475 UTC [cauthdsl] func2 -> DEBU 7aa60 [0m 0xc0031a0a40 identity 2 does not satisfy principal: the identity is a member of a different MSP (expected *************MSP, got ***********MSP)
[36m2019-02-12 10:32:12.475 UTC [cauthdsl] func2 -> DEBU 7aa61 [0m 0xc0031a0a40 processing identity 3 with bytes of a997a0
[36m2019-02-12 10:32:12.475 UTC [cauthdsl] func2 -> DEBU 7aa62 [0m 0xc0031a0a40 principal matched by identity 3
[36m2019-02-12 10:32:12.475 UTC [msp.identity] Verify -> DEBU 7aa63 [0m Verify: digest = ...
[36m2019-02-12 10:32:12.475 UTC [msp.identity] Verify -> DEBU 7aa64 [0m Verify: sig = ...

[36m2019-02-12 10:32:12.476 UTC [cauthdsl] func2 -> DEBU 7aa65 [0m 0xc0031a0a40 signature for identity 3 is invalid: The signature is invalid

[36m2019-02-12 10:32:12.476 UTC [cauthdsl] func2 -> DEBU 7aa66 [0m 0xc0031a0a40 principal evaluation fails

[36m2019-02-12 10:32:12.476 UTC [cauthdsl] func1 -> DEBU 7aa67 [0m 0xc0031a0a40 gate 1549967532473433662 evaluation fails
[31m2019-02-12 10:32:12.476 UTC [vscc] Validate -> ERRO 7aa68 [0m VSCC error: stateBasedValidator.Validate failed, err validation of endorsement policy for chaincode **** in tx 7:0 failed: signature set did not satisfy policy

}}


----------



Anywhere else I could look for debugging info?
Thanks",,angelo.decaro,denyeart,jlcs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14168,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bif:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,denyeart,jlcs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Feb/19 10:37 PM;denyeart;""The signature is invalid"" could happen because different peers got different read/write sets for the transaction.

[~angelo.decaro] What could cause: 

""identity 1 does not satisfy principal: the identity is a member of a different MSP (expected *************MSP, got *******MSP) ""

What two MSPs are being compared here? Perhaps more context is needed in the error message?;;;","12/Feb/19 10:50 PM;angelo.decaro;[~jlcs], would be possible to see the endorsement policy?;;;","12/Feb/19 11:02 PM;jlcs;The endorsement policy is specified through the Node SDK as:

```
""endorsement-policy"":  {
          ""identities"": [
              { ""role"": { ""name"": ""member"", ""mspId"": ""MSP1"" }},
              { ""role"": { ""name"": ""member"", ""mspId"": ""MSP2"" }},
              { ""role"": { ""name"": ""member"", ""mspId"": ""MSP3"" }},
              { ""role"": { ""name"": ""member"", ""mspId"": ""MSP4"" }}
          ],
          ""policy"": {
              ""3-of"": [
                  { ""signed-by"": 0 },
                  { ""signed-by"": 1 },
                  { ""signed-by"": 2 },
                  { ""signed-by"": 3 }
              ]
          }
      },
```


I had to change the MSP names for *************MSP before to hide some company private data. Nonetheless, those lines work as expected, it tries to compare, for example, MSP2 with MSP3 and MSP4 and therefore fails in that step, but continues with the endorsement check.;;;","12/Feb/19 11:04 PM;jlcs;[~denyeart] If the write/read sets were different, wouldn't that appear after checking the individual signatures?;;;","13/Feb/19 4:54 PM;jlcs;Thank you all, it was indeed a problem with one of the write sets.

Nonetheless, I'm going to submit a request to change the debug messages so they are clearer for why an endorsement fails, and to check if the peer checks the write set of the first endorsement with the rest.;;;",,,,,,,,,,,,,,,,,,,,,,,,
"prover verifies that quantity in issue, transfer and redeem is not zero",FAB-14146,37621,36747,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,KaoutarEL,KaoutarEL,12/Feb/19 10:57 PM,26/Feb/19 6:39 PM,28/Oct/23 3:05 AM,26/Feb/19 6:39 PM,,,,,,,,,,,,,,,0,fabtoken,,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bin:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Check Token Owner at Issue time,FAB-14147,37622,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,12/Feb/19 10:58 PM,21/Feb/19 6:33 PM,28/Oct/23 3:05 AM,21/Feb/19 6:33 PM,,,,,,,,,,,,,,,0,,,,,,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i00biv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Feb/19 8:03 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/29260/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
unify the terminology for issue throughout the code.,FAB-14148,37623,36747,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,KaoutarEL,KaoutarEL,12/Feb/19 10:58 PM,26/Feb/19 6:37 PM,28/Oct/23 3:05 AM,26/Feb/19 6:37 PM,,,,,,,,,,,,,,,0,fabtoken,,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bj3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
cleanup transaction.proto,FAB-14149,37624,37248,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,KaoutarEL,KaoutarEL,KaoutarEL,12/Feb/19 11:57 PM,20/Feb/19 10:54 PM,28/Oct/23 3:05 AM,20/Feb/19 10:54 PM,,,,,,,,,,,,,,,0,fabtoken,,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bjb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Feb/19 3:50 AM;KaoutarEL;https://gerrit.hyperledger.org/r/#/c/29362/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
External chaincode configuration,FAB-14150,37627,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,binhn,binhn,binhn,13/Feb/19 12:41 AM,03/Dec/19 12:46 PM,28/Oct/23 3:05 AM,03/Dec/19 12:46 PM,,,,,,,,,,,,,,,0,,,,,"We need a mechanism to specify some configuration for chaincode server:
 # TLS properties (enabled or not, certificate and key files)
 # Root CAs of clients (peers)
 # Logging properties
 # Others?

We will keep these configuration in a `yaml` file, which is read by the chaincode shim upon start up. ",,baohua,binhn,mbwhite,muralisr,yacovm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13582,,,No,,Unset,No,,,"1|i00bjr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,binhn,mbwhite,muralisr,yacovm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Feb/19 10:44 PM;yacovm;What is the mechanism that ensures the chaincode server now knows it is the peer that connected to it, and not someone else (i.e - a client, or some other peer)?;;;","20/Feb/19 12:16 AM;binhn;[~yacovm] it is mutual TLS (when enabled);;;","28/Feb/19 10:36 AM;baohua;Request throughput limit? e.g., max_request_rate=10/s;;;","03/Dec/19 12:46 PM;muralisr;This is now done in github https://jira.hyperledger.org/browse/FABCG-3, https://jira.hyperledger.org/browse/FABCG-4, https://jira.hyperledger.org/browse/FABCG-5;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Golang chaincode configuration,FAB-14151,37628,37627,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,binhn,binhn,13/Feb/19 12:43 AM,03/Dec/19 8:10 AM,28/Oct/23 3:05 AM,,,,,,,,,,,fabric-peer,,,,,0,,,,,,,binhn,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bjz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),binhn,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Token - Documentation,FAB-14154,37631,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,KaoutarEL,KaoutarEL,13/Feb/19 12:50 AM,13/Aug/19 12:40 AM,28/Oct/23 3:05 AM,13/Aug/19 12:40 AM,,,,,,,,,,fabric-token,,,,,0,fabtoken,,,,"Fabtoken documentation includes:
 * An operational documentation
 * A conceptual documentation
 * A tutorial
 * Glossary updates",,denyeart,KaoutarEL,negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11144,,,No,,Unset,No,,,"1|i00bkn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,KaoutarEL,negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Feb/19 10:21 PM;pandrejko;Child issue FAB-14284 CR:

[https://gerrit.hyperledger.org/r/#/c/29266/];;;","06/Mar/19 9:02 PM;denyeart;[~KaoutarEL] We typically use a single Epic to cover a major new feature and create 'Documentation' tasks under it.  I've placed this Documentation task under Token epic FAB-11144 and made the children subtasks.;;;","07/Mar/19 3:24 AM;pandrejko;[~denyeart] Let's revisit this. Sub-tasks don't show up in the dashboard under documentation. In fact, now the token doc issues are completely gone from the dashboard.     [https://jira.hyperledger.org/secure/Dashboard.jspa?selectPageId=11700]

 

I might go ahead and re-swizzle these so they show up.;;;","07/Mar/19 5:16 PM;KaoutarEL;[~denyeart] OK, I see. I was not really sure how to classify the documentation. I am fine with it being just a task. ;;;","29/Jul/19 10:03 PM;negupta;Written here: https://hyperledger-fabric.readthedocs.io/en/latest/token/FabToken.html;;;",,,,,,,,,,,,,,,,,,,,,,,,
revisit the unexpected error path for the deployed cc info interface,FAB-14155,37632,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,ales,ales,13/Feb/19 12:50 AM,05/Apr/19 12:54 AM,28/Oct/23 3:05 AM,05/Apr/19 12:54 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,"The implementation of the deployed cc info interface currently does not distinguish I/O error from deterministic errors. This story tracks the necessary work to review that code, determine if any error conditions may lead to a fork or similar undesired behaviour and fix the code.",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00bkv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
create chaincode-as-server gRPC service,FAB-14156,37633,37468,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,13/Feb/19 12:54 AM,20/Sep/19 9:23 PM,28/Oct/23 3:05 AM,20/Sep/19 9:23 PM,,,,,,,,,,,,,,,0,,,,,Change chaincode_shim.proto to include the chaincode gRPC service used by peer to open connections to chaincode.,,muralisr,,,,,,,,,,,,,,,,,,,,FAB-14086,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bl3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),muralisr,,,,,,,,,,,dependabot/bundler/docs/nokogiri-1.14.3,0.2.x,dependabot/bundler/docs/activesupport-6.0.6.1,dependabot/go_modules/bindings/go-apiv1/golang.org/x/text-0.3.8,0.1.x,dependabot/go_modules/golang.org/x/net-0.7.0,main,dependabot/go_modules/golang.org/x/text-0.3.8,dependabot/go_modules/bindings/go-apiv1/golang.org/x/net-0.7.0,dependabot/bundler/docs/commonmarker-0.23.9,dependabot/go_modules/bindings/go-apiv2/golang.org/x/net-0.7.0,release-2.3,release-2.2,dependabot/go_modules/bindings/go-apiv2/golang.org/x/text-0.3.8,github-settings,dependabot/go_modules/bindings/go-apiv2/golang.org/x/sys-0.1.0,dependabot/go_modules/golang.org/x/sys-0.1.0,dependabot/go_modules/bindings/go-apiv1/golang.org/x/sys-0.1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Sep/19 9:22 PM;muralisr;[https://github.com/hyperledger/fabric-protos/pull/8];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
VSCode Extension: Including a test watch script in package.json causes smart contract package creation to hang indefinitely,FAB-14157,37635,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Not Supported,sstone1,acshea,acshea,13/Feb/19 1:26 AM,06/Mar/19 11:46 PM,28/Oct/23 3:05 AM,06/Mar/19 11:46 PM,,,,,,,,,,,,,,,1,,,,,"While developing an application it is common to utilise the watch capabilities of a test framework.

When including a script that does this within a package.json file, creating a smart contract package via the VSCode extension hangs indefinitely.

A current workaround is to remove the watch script before building, however this is not ideal.",,acshea,JoshuaVines,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00blj:",,,,Unset,Unset,,,,"Step 1: Add the following line to the ""scripts"" section of package.json:
""test:watch"":""nyc mocha -r ts-node/register src/**/*.spec.ts --watch""

Step 2: Attempt to create smart contract package

Step 3: Go for a coffee ☕ 

Step 4: Come back and see it still building",,Unset,,,,,,Unset,,Unset,,(Please add usage information),acshea,JoshuaVines,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Mar/19 11:46 PM;sstone1;This shouldn't have been raised here, moved to:
https://github.com/IBM-Blockchain/blockchain-vscode-extension/issues/693;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add ordering service endpoints to the config,FAB-14158,37636,26285,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,yacovm,yacovm,13/Feb/19 1:30 AM,06/Jun/19 7:48 AM,28/Oct/23 3:05 AM,18/Apr/19 11:34 PM,,,,,,,,,,,,,,,0,,,,,It should at {code}orderer.groups.{Org}{code} alongside the MSP config.,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00blr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update the peer deliver client to prefer orderer endpoints in the new location ,FAB-14159,37637,26285,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,yacovm,yacovm,13/Feb/19 1:31 AM,20/Sep/19 4:35 AM,28/Oct/23 3:05 AM,20/Sep/19 4:35 AM,,,,,,,,,,,,,,,0,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00blz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update the cluster infrastructure puller to prefer extraction of orderer endpoints from the new location,FAB-14160,37638,26285,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,13/Feb/19 1:31 AM,07/Jun/19 12:50 AM,28/Oct/23 3:05 AM,08/May/19 8:56 PM,,,,,,,,,,,,,,,0,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bm7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/May/19 7:47 PM;yacovm;https://jira.hyperledger.org/browse/FAB-14160;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Pin fabric-samples in master to ""unstable""",FAB-14162,37641,36555,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,13/Feb/19 1:41 AM,22/Feb/19 10:00 PM,28/Oct/23 3:05 AM,22/Feb/19 10:00 PM,,,,,,v2.0.0,,,,fabric-samples,,,,,0,,,,,"Pin fabric-samples in master to ""unstable"" so that latest node modules get used by default.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,FABN-1141,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bmv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Feb/19 1:48 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/29267/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Data race in orderer/common/cluster/comm_test,FAB-14163,37642,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,yacovm,wlahti,wlahti,13/Feb/19 7:33 AM,28/Mar/19 5:35 AM,28/Oct/23 3:05 AM,28/Mar/19 5:35 AM,v2.0.0,,,,,,,,,fabric-orderer,,,,,1,ci-flake,,,,"Hit here (and in multiple other CRs today): https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8869/consoleFull
{code:java}
16:25:28 ==================
16:25:28 WARNING: DATA RACE
16:25:28 Write at 0x00c0005810e8 by goroutine 340:
16:25:28   internal/race.Write()
16:25:28       /opt/go/go1.11.1.linux.amd64/src/internal/race/race.go:41 +0x38
16:25:28   sync.(*WaitGroup).Wait()
16:25:28       /opt/go/go1.11.1.linux.amd64/src/sync/waitgroup.go:128 +0xef
16:25:28   github.com/hyperledger/fabric/orderer/common/cluster_test.(*clusterNode).Step()
16:25:28       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:129 +0x52
16:25:28   github.com/hyperledger/fabric/protos/orderer._Cluster_Step_Handler()
16:25:28       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/protos/orderer/cluster.pb.go:525 +0xcd
16:25:28   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC()
16:25:28       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1170 +0x1602
16:25:28   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream()
16:25:28       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1249 +0x1303
16:25:28   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1()
16:25:28       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:685 +0xac
16:25:28 
16:25:28 Previous read at 0x00c0005810e8 by goroutine 11:
16:25:28   internal/race.Read()
16:25:28       /opt/go/go1.11.1.linux.amd64/src/internal/race/race.go:37 +0x38
16:25:28   sync.(*WaitGroup).Add()
16:25:28       /opt/go/go1.11.1.linux.amd64/src/sync/waitgroup.go:71 +0x16b
16:25:28   github.com/hyperledger/fabric/orderer/common/cluster_test.(*clusterNode).freeze()
16:25:28       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:144 +0x43
16:25:28   github.com/hyperledger/fabric/orderer/common/cluster_test.TestSendBigMessage()
16:25:28       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:324 +0x1281
16:25:28   testing.tRunner()
16:25:28       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:827 +0x162
16:25:28 
16:25:28 Goroutine 340 (running) created at:
16:25:28   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1()
16:25:28       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:683 +0xb8
16:25:28   github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.(*http2Server).operateHeaders()
16:25:28       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/http2_server.go:419 +0x1481
16:25:28   github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.(*http2Server).HandleStreams()
16:25:28       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/http2_server.go:459 +0x37a
16:25:28   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams()
16:25:28       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:681 +0x170
16:25:28   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleRawConn.func1()
16:25:28       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:643 +0x50
16:25:28 
16:25:28 Goroutine 11 (running) created at:
16:25:28   testing.(*T).Run()
16:25:28       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:878 +0x650
16:25:28   testing.runTests.func1()
16:25:28       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1119 +0xa8
16:25:28   testing.tRunner()
16:25:28       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:827 +0x162
16:25:28   testing.runTests()
16:25:28       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1117 +0x4ee
16:25:28   testing.(*M).Run()
16:25:28       /opt/go/go1.11.1.linux.amd64/src/testing/testing.go:1034 +0x2ee
16:25:28   main.main()
16:25:28       _testmain.go:238 +0x332
16:25:28 ================== {code}
cc: [~yacovm]",,MHBauer,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,FAB-14835,,,,,,,,,,,,,FAB-13371,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bn3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Feb/19 6:36 PM;yacovm;put it on my tab

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
typo,FAB-14165,37646,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,ping40,ping40,ping40,13/Feb/19 4:07 PM,14/Feb/19 12:01 AM,28/Oct/23 3:05 AM,14/Feb/19 12:01 AM,,,,,,,,,,,,,,,0,,,,,"{code:java}
// getAndStorePlugin returns a plugin instance for the given plugin name and channel
func (pe *PluginEndorser) getOrCreatePlugin(plugin PluginName, channel string) (endorsement.Plugin, error) {{code}
"" getAndStorePlugin returns  "" should change to ""getOrCreatePlugin returns"".",,ping40,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bnz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ping40,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Feb/19 4:19 PM;ping40;https://gerrit.hyperledger.org/r/#/c/29276/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"couchdb throw ""Cannot allocate xxx bytes of memory (of type ""heap"")""",FAB-14166,37647,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Won't Do,,npcxu,npcxu,13/Feb/19 4:24 PM,23/Jan/20 7:34 AM,28/Oct/23 3:05 AM,23/Jan/20 7:34 AM,v1.2.0,,,,,,,,,fabric-ledger,,,,,0,stale-item,,,,"  Our network is 4peer+3orderer+3zookeeper+4kafka and based on fabric 1.2.The network started operating in October 2018.And there is an E2E script running in the background.
  Today, when I was testing, I found that several containers were closed.I think  the main problem should be CouchDB.
 
env:
0. 4 × [Centos7 4vCUPs/8G/450G]
1.Docker version 18.06.1-ce
2.fabric 1.2
3.docker images:
 peer/orderer:1.2.0
 couchdb:amd64-0.4.10 !微信图片_20190213151104.png!",,chris.elder,denyeart,mplisov,npcxu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Feb/19 4:11 PM;npcxu;微信图片_20190213151104.png;https://jira.hyperledger.org/secure/attachment/16798/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20190213151104.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bo7:",,,,Unset,Unset,,,,,,Unset,,,,,,Unset,,Unset,,(Please add usage information),chris.elder,denyeart,mplisov,npcxu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/19 12:40 AM;denyeart;+[~npcxu]+ Since the issue is with CouchDB Erlang environment rather than Fabric, please open a CouchDB issue at [https://github.com/apache/couchdb/issues] and link this issue to the CouchDB issue.;;;","14/Feb/19 2:38 AM;chris.elder;[~npcxu]  Can you comment about the number of channels created?   Also, roughly how high is the blockheight (rough number of records) and roughly what kind of load the network was under?

 ;;;","15/Feb/19 3:24 PM;npcxu;There are 4 channels.One of the channels has a blockheight of 254958;;;","15/Feb/19 3:29 PM;npcxu;After I recovered the crashed node-related containers, the data recovered, but after a period of time repeated problems occurred. Is this related to docker settings, such as disk space?;;;","18/Feb/19 1:45 PM;denyeart;[~npcxu] You'll have to ask this at [https://github.com/apache/couchdb/issues] . ;;;","06/Mar/19 9:08 PM;denyeart;[~npcxu] Any progress working this issue with CouchDB support?;;;","23/Jan/20 7:34 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,
fabric start failed with rsa certificate,FAB-14167,37648,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,doublechaintech,codestone,codestone,13/Feb/19 5:41 PM,23/Jan/20 7:34 AM,28/Oct/23 3:05 AM,23/Jan/20 7:34 AM,v1.1.0,v1.2.0,v1.3.0,v1.4.0,,,,,,fabric-peer,,,,,0,stale-item,,,,"When I use the byfn to start the fabric network, the rsa certificate is loaded and an error occurs，the error is :
 “[main] InitCmd -> ERRO 037 Cannot run peer because error when setting up MSP of type bccsp from directory /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp: admin 0 is invalid: could not obtain certification chain: failed getting validation chain: the supplied identity is not valid: x509: certificate specifies an incompatible key usage”. 

After I modified the code, the problem no longer occurred, but the error that opts is empty，detail error is :
""2019-02-13 02:28:30.587 UTC [nodeCmd] createSelfSignedData -> PANI 003 Failed creating self signed data because message signing failed: Failed signing with opts [<nil>]: Invalid options. Must be different from nil.
panic: Failed creating self signed data because message signing failed: Failed signing with opts [<nil>]: Invalid options. Must be different from nil.""

my certificate's subject public key info is "" Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                Public-Key: (2048 bit)""",,codestone,doublechaintech,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Feb/19 5:40 PM;codestone;admin-0-invalid.jpg;https://jira.hyperledger.org/secure/attachment/16801/admin-0-invalid.jpg","13/Feb/19 5:41 PM;codestone;certificate.jpg;https://jira.hyperledger.org/secure/attachment/16800/certificate.jpg","13/Feb/19 5:39 PM;codestone;crash.jpg;https://jira.hyperledger.org/secure/attachment/16802/crash.jpg",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bof:",,,,Unset,Unset,,,,"1. get fabric-samples
2. generate key and certificate and replace them with rsa certificate and
3. exec “./byfn.sh -m up""",,Unset,,,,,,Unset,,Unset,,(Please add usage information),codestone,doublechaintech,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Feb/19 8:29 AM;sykesm;{quote}x509: certificate specifies an incompatible key usage{quote}

I expect you've generated your certificate with incorrect key usage or extended key usage attributes. The pictures of the messages and bytes is insufficient to determine if that's the case.

The cert should be configured with KeyUsageDigitalSignature and no extensions. The user certificates are for signing only and not TLS.

As for RSA, cryptogen only supports ECDSA so there's not a lot of testing with anything else.;;;","18/Feb/19 9:54 PM;codestone;I use a third-party certificate that happens to be signed with rsa.
when i change the code,it cannot bring up and the gossip print verify error per seconds;;;","20/Feb/19 1:16 PM;doublechaintech;[~codestone]

we (Double Chain Tech) has a went-live project using RSA certification, we implemented RSA bccsp and Java SDK, we want to contribute this to hypperledger fabric.

Please reference here

https://github.com/doublechaintech/hyperledger-fabric-bccsp-rsa

 ;;;","23/Jan/20 7:34 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Improve endorsement failure debug messages ,FAB-14168,37649,,Task,To Do,FAB,Fabric,software,denyeart,,,Low,,angelo.decaro,jlcs,jlcs,13/Feb/19 6:21 PM,21/Aug/19 5:21 AM,28/Oct/23 3:05 AM,,v1.4.0,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,"Related to [FAB-14145|https://jira.hyperledger.org/browse/FAB-14145]

Given an endorsing policy with multiple signatures, e.g. 3-of, with different write sets, the debug logs of the peer shows the following line upon error:

```
[36m2019-02-12 10:32:12.474 UTC [cauthdsl] func2 -> DEBU 7aa49 [0m 0xc0031a0a40 signature for identity 1 is invalid: The signature is invalid
```

My petition is to change the debug messages to something more descriptive of the reason of the invalid signature, as it now seems it is a failure in the signature itself, not the difference between the write sets of the first endorsement checked and the current one being validated.

Also, it might be a bug if indeed the peer checks all write sets against the first endorsement, instead of trying to construct a valid endorsement with the rest of endorsements that might have the same write set.
",,denyeart,jlcs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14145,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,,,,No,,Unset,No,,,"1|i00bon:",,,,No,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jlcs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/19 1:26 AM;denyeart;The client only submits one write-set (it chooses from one of the N peer responses), and then attaches the N endorsement signatures that it received from peers.

If any of the signatures do not match the write-set (actually the whole proposal response), you receive the error ""The signature is invalid"".  At validation time, the peer cannot distinguish whether the endorsing peer returned a different proposal response than the one that was ultimately submitted with the tran, or if it returned the same proposal response but somehow provided a bad signature for it.  All the validating peer knows is that the signature does not match the proposal response that was ultimately submitted.  That being said, I agree the message ""The signature is invalid"" could be improved to indicate that the signature does not match the proposal response, rather than being invalid for some other reason.

I was actually more confused by the message ""identity 1 does not satisfy principal: the identity is a member of a different MSP (expected *************MSP, got *******MSP)"".  I think both messages should be clarified with additional context.;;;","14/Feb/19 1:27 AM;denyeart;I've tagged for v2.0.0 as well as v1.4.1 (assuming the cherry pick is simple, it makes sense to backport to the v1.4 LTS release).;;;","14/Feb/19 1:34 AM;jlcs;Thank you for the explanation. It makes so much sense now. Indeed, the tx from the orderer only needs to include once the read/write set.

The ""expected *************MSP, got *******MSP"" message is altered because the MSP names relate to internal information. You could read it as ""expected MSP1, got MSP2"". It is expected, as during the validation the peer compares the endorsing signature MSP to the endorsing policy MSP.;;;","09/Jun/19 4:48 PM;denyeart;[~angelo.decaro] Could you help to improve the message for v1.4.2?;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Check Quantity for validity and overflow,FAB-14169,37650,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,13/Feb/19 8:20 PM,25/Feb/19 5:53 PM,28/Oct/23 3:05 AM,25/Feb/19 5:53 PM,,,,,,,,,,,,,,,0,,,,,,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i00bov:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Feb/19 8:21 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/29275/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Peer CLI: _lifecycle commands should have their own package ""peer/lifecycle/chaincode""",FAB-14171,37656,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,13/Feb/19 11:41 PM,04/Apr/19 10:59 PM,28/Oct/23 3:05 AM,04/Apr/19 10:59 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00bpr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The goroutine tests(batcher.go) are failing in the daily unit tests,FAB-14172,37659,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,sambhavdutt,sambhavdutt,14/Feb/19 12:08 AM,19/Mar/19 7:57 PM,28/Oct/23 3:05 AM,17/Feb/19 9:47 PM,v1.4.0,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"The goroutine tests(batcher.go) are failing in the daily unit tests

*Intermittent:* Yes
*Branch:* release-1.4
*Platform:* s390x
*Error Snippet:*

{code:java}
20:44:20 goroutine 20306 [sleep]:
20:44:20 time.Sleep(0x1dcd6500)
20:44:20 	/opt/go/go1.11.1.linux.s390x/src/runtime/time.go:105 +0x162
20:44:20 github.com/hyperledger/fabric/gossip/gossip.(*batchingEmitterImpl).periodicEmit(0xc0013a3860)
20:44:20 	/w/workspace/fabric-unit-test-coverage-daily-release-1.4-s390x/gopath/src/github.com/hyperledger/fabric/gossip/gossip/batcher.go:62 +0x46
20:44:20 created by github.com/hyperledger/fabric/gossip/gossip.newBatchingEmitter
20:44:20 	/w/workspace/fabric-unit-test-coverage-daily-release-1.4-s390x/gopath/src/github.com/hyperledger/fabric/gossip/gossip/batcher.go:54 +0x19e
20:44:20 FAIL	github.com/hyperledger/fabric/gossip/gossip	1200.050s
{code}

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-release-1.4-s390x/11/",,C0rWin,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14048,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,b347664ed1f0d65dcc1f452ef90d2b80f273e4e7,Unset,No,,,"1|i00bqf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Feb/19 9:47 PM;C0rWin;Analyzing console log identified test in failure which is TestDataLeakage related to FAB-14048, hence this could be closed a duplicate;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update GOVER to 1.11.5 in Fabric,FAB-14173,37660,37150,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,14/Feb/19 12:08 AM,20/Feb/19 11:54 AM,28/Oct/23 3:05 AM,20/Feb/19 11:54 AM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bqn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update GOVER to 1.11.5 in Fabric CA,FAB-14174,37661,37150,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,14/Feb/19 12:08 AM,22/Feb/19 12:24 AM,28/Oct/23 3:05 AM,20/Feb/19 10:58 AM,,,,,,v1.4.1,v2.0.0,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bqv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update GOVER to 1.11.5 in hyperledger/fabric-baseimage,FAB-14176,37667,37150,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,14/Feb/19 5:08 AM,20/Feb/19 11:53 AM,28/Oct/23 3:05 AM,20/Feb/19 8:04 AM,,,,,,,,,,,,,,,0,ipm,,,,,,btl5037,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00brr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Feb/19 3:23 AM;rameshthoomu;From master branch, we are go alpine images and not depending on fabric-baseimages. I am not really sure why to change fabric-baseimage with the latest changes. [~sykesm] need your inputs.;;;","20/Feb/19 11:53 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/29292/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
got 2 error - proposal responses from 3 endorsers are not identical to each others.,FAB-14178,37670,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,denyeart,sae imSon,sae imSon,14/Feb/19 1:03 PM,14/Feb/19 11:46 PM,28/Oct/23 3:05 AM,14/Feb/19 10:09 PM,,,,,,,,,,,,,,,0,,,,,"[ Test Environment ]
 - Fabric java sdk version is 1.2.1/ fabric version is 1.2.

 - Test system is composed of 3 endorsers, 7 committers(no chaincode),  4 orderers(kafka) on cloud.

 - batch block is configured as 1tx/1block.

 - private data  is used. collection file is attached. 

 - for RBAC(Role based access control) cid package is used in chaincode.

 

[ Error ]

through fabric java sdk, proposal was sent to 3 endorsers(AND policy) and didn't pass below validation. 
 =====================================================================================================

Collection<Set<ProposalResponse>> proposalConsistencySets = SDKUtils.getProposalConsistencySets(transactionPropResp);

if (proposalConsistencySets.size() != 1)

{ fail(format(""Expected only one set of consistent proposal responses but got %d"", proposalConsistencySets.size())); }

=====================================================================================================

only 2 out of 3 endorsers returned same responses so ""Expected only one set of consistent proposal responses but got 2"" message returned from fabric java sdk, and this error appeared randomly during stress test. refer to log I attached.

on endorser, I saw mvcc error but I am not sure whether this caused got 2 error because after mvcc error, still number of transactions successfully committed as valid.

stress test without validation check was tried and orderer rejected transaction and returned error message was almost similar with got 2 error.

1) test condition : 1user, 1key, no commit check(no event receive)
 got 2 error disappear by I giving sleep time(100ms) between transactions.

 2) test condition : various user and key(no key collision), commit check, sleep(0~15ms) 
 still got 2 error occur.

 

 ",,denyeart,sae imSon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/19 1:07 PM;sae imSon;collection.json;https://jira.hyperledger.org/secure/attachment/16811/collection.json","14/Feb/19 1:07 PM;sae imSon;errlog.txt;https://jira.hyperledger.org/secure/attachment/16810/errlog.txt","14/Feb/19 1:02 PM;sae imSon;got2err.png;https://jira.hyperledger.org/secure/attachment/16809/got2err.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bsf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sae imSon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/19 10:09 PM;denyeart;Let's say key1 got updated in block100 in transaction t1.

At about the same time another transaction t2 requests key1 in chaincode.

Let's say peer1 and peer2 are at block100 and peer3 is at block99 (still processing block100). When t2 gets executed in chaincode, peer3 will return a different read-write set.

Your client will need to be intelligent enough to retry the invoke in order to resolve this issue.;;;","14/Feb/19 11:46 PM;denyeart;Note that MVCC errors are a little different.  In the example from prior comment, if all 3 peers endorsed while at block99, and t2 gets included in block101, the endorsements would match but you would get a MVCC invalidation upon commit of block101 due to the conflict with the transaction in block100.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Supply `checkPeers` to `nwo.InstantiateChaincode` when it's called separately,FAB-14179,37671,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,14/Feb/19 3:23 PM,03/Mar/19 9:58 PM,28/Oct/23 3:05 AM,15/Feb/19 3:40 AM,v1.4.0,,,,,,,,,,,,,,0,,,,,"when {{nwo.InstantiateChaincode}} is called from an integration test, i.e. [here|https://github.com/hyperledger/fabric/blob/a2a7a7ada4dc0a4493b06dfbe79a28ab2e99bec5/integration/e2e/e2e_test.go#L306], {{checkPeers}} should be supplied so that checks are performed to ensure deployment. Otherwise, an immediate query/invoke to that cc would fail because that deploy tx may not be committed yet.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bsn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Feb/19 3:25 PM;guoger;https://gerrit.hyperledger.org/r/c/29297/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Protect migration with a Channel capability,FAB-14180,37674,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,14/Feb/19 4:22 PM,05/Jun/19 6:00 AM,28/Oct/23 3:05 AM,08/Mar/19 10:37 PM,,,,,,,,,,,,,,,0,,,,,"*The problem*

Current code in 1.4 (and probably before) has a check in

{{common/channelconfig/Bundle.ValidateNew()}}

that prohibits the change of ConcensusType.Type. This check is performed both in the orderer and in the peer. In the peer through 

{{common/channelconfig/BundleSource.ValidateNew()}}

The implications are that if an orderer allows a migration sequence, all peers that do not run the version that supports migration will crash when they get config update (CONTEXT or COMMIT) that carry  the new consensus type.

*The solution*

In order to protect peers from inadvertent crashes like that, we need to protect migration with a Channel capability, which will force the upgrade of peers prior to migration, and will also ensure that the capability is enabled prior to migration.

The implications are: 
 * A 1.4 peer should be able to work against a 2.0/1.4.1 orderer, if the orderer never changes ConsensusType.Type, be it Kafka or etcd/raft
 * A 1.4 peer will not be able to consume migration: it will reject the first config update that changes ConsensusType.Type, and crash
 * In order to migrate an OSN from Kafka to etcd/raft we first have to upgrade both peers and orderers to 1.41/2.0, and enable the respective Channel capability

Note, under the default policy scheme for channel config the signature requirements are:
 * Orderer capabilities – a majority of orderer admins
 * Application capabilities – a majority of application admins
 * Channel capabilities – a majority of orderer admins and a majority of application admins

 This means we'll have to get a majority of orderer admins and a majority of application admins to consent before migration.

*The plan*

The plan is to have a Channel capability V1_4_1 and an Orderer capability V1_4_1.

We introduce a channel capability method ChannelCapabilities().ConsensusTypeMigration(), and require it on in order to open the gate for migration. Allowing this will enable the peer to consume config updates with changes to fields below ConsensusType (Type, Metadata, etc).

The Orderer capability introduced in  FAB-12983  OrdererCapabilities().Kafka2RaftMigration() will be changed to check V1_4_1. It will be used to modify the behavior of the Orderer. 

Both must be on to perform migration.

 

 ",,C0rWin,jyellick,kchristidis,tock,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bsv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,jyellick,kchristidis,tock,yacovm,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
`GinkgoRecover` should be deferred directly,FAB-14181,37676,36295,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,14/Feb/19 5:56 PM,01/Apr/19 11:11 PM,28/Oct/23 3:05 AM,16/Feb/19 8:00 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,https://chat.hyperledger.org/channel/fabric-orderer-dev?msg=hEPjLw2Bah4kqziQp,,guoger,,,,,,,,,,,,,,,,,,,,,,,,FAB-14121,FAB-14114,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00btb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Feb/19 5:58 PM;guoger;https://gerrit.hyperledger.org/r/c/29299/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Golang chaincode production runtime container optimization,FAB-14182,37677,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,Tecnalia,Tecnalia,14/Feb/19 6:05 PM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,v1.3.0,v1.4.0,,,,,,,,fabric-build,,,,,0,stale-item,,,,"After compiling the chaincode using runtime CCENV container for golang based smart contracts, the compiled code is executed inside a docker container for isolation purposes.

This approach is fine. however there is so much unnecessary software and tools inside running container image that should be removed on 'real production' environment.

A golang based chaincode contract should contain only:
 * a minimum container image based on alpine (which minimizes also the vulnerabilities on container software, and possible attacks on them)
 * a compiled executable chaincode

Currently a runtime container image has the following structure:

h2. Filesize internals

{{root@0a13214caf13:/# du -sh *}}
 {{7.2M bin}}
 {{4.0K boot}}
 {{0 dev}}
 {{1.8M etc}}
 {{4.0K home}}
 {{24M lib}}
 {{4.0K lib64}}
 {{4.0K media}}
 {{4.0K mnt}}
 {{4.0K opt}}
 {{du: cannot access 'proc/51/task/51/fd/4': No such file or directory}}
 {{du: cannot access 'proc/51/task/51/fdinfo/4': No such file or directory}}
 {{du: cannot access 'proc/51/fd/3': No such file or directory}}
 {{du: cannot access 'proc/51/fdinfo/3': No such file or directory}}
 {{0 proc}}
 {{12K root}}
 {{24K run}}
 {{3.5M sbin}}
 {{4.0K srv}}
 {{0 sys}}
 {{4.0K tmp}}
 {{91M usr}}
 {{6.0M var}}

h2. Docker runtime container image layers history

IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT
d6cad6d2231a        About an hour ago   /bin/sh -c #(nop)  ENV CORE_CHAINCODE_BUILDL…   0B                  
61db5fa4f596        About an hour ago   /bin/sh -c #(nop)  LABEL org.hyperledger.fab…   0B                  
1c60132085be        About an hour ago   /bin/sh -c #(nop) ADD file:a110a7c6e08d29a84…   27.4MB              
75f5fb1a0e0c        4 months ago        /bin/sh -c cd /tmp/scripts &&     common/ini…   8.67MB              
<missing>           4 months ago        /bin/sh -c #(nop) COPY dir:7a02c249ea4b9fc7d…   10.7kB              
<missing>           5 months ago        /bin/sh -c #(nop)  CMD [""/bin/bash""]            0B                  
<missing>           5 months ago        /bin/sh -c mkdir -p /run/systemd && echo 'do…   7B                  
<missing>           5 months ago        /bin/sh -c sed -i 's/^#\s*\(deb.*universe\)$…   2.76kB              
<missing>           5 months ago        /bin/sh -c rm -rf /var/lib/apt/lists/*          0B                  
<missing>           5 months ago        /bin/sh -c set -xe   && echo '#!/bin/sh' > /…   745B                
<missing>           5 months ago        /bin/sh -c #(nop) ADD file:a83ab1826f43e88bc…   115MB  

h2. Docker runtime container chaincode file size

{{root@0a13214caf13:/# ls -alh ./usr/local/bin/chaincode}}

{{-rwxr-xr-x 1 root root 27M Feb 14 08:18 ./usr/local/bin/chaincode}}
h2. *{{proposed optimizations}}*

*{{As can be seen, for a 27mb golang chaincode, a container of 151Mb is created adding an extra size of 124Mb. This represents more than x4 size increment over optimal size. This process clearly needs to be optimized for production taking into account that most cloud providers pay per byte transfer and storage used, so that the less used the better.}}*

*{{We propose to create this final runtime container using just an alpine docker image and copying inside compiled golang executable to achieve these goals.}}*",,sykesm,Tecnalia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrhx:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,Tecnalia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use ephemeral ports in gossip gossip tests,FAB-14184,37683,33033,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,14/Feb/19 9:51 PM,06/Apr/19 5:37 PM,28/Oct/23 3:05 AM,19/Feb/19 12:02 AM,,,,,,v2.0.0,,,,fabric-gossip,,,,,0,hygiene,,,,"Currently, all unit tests under gossip gossip use the test constructor NewGossipServiceWithServer with a hard coded port number.

We need to use ephemeral ports and avoid using that constructor.",,hagarm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00btz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Feb/19 10:57 PM;hagarm;https://gerrit.hyperledger.org/r/#/c/29300/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove ConfidentialityLevel from protos,FAB-14186,37687,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,15/Feb/19 12:29 AM,15/Feb/19 2:12 AM,28/Oct/23 3:05 AM,15/Feb/19 2:12 AM,,,,,,v2.0.0,,,,fabric-common,,,,,0,,,,,ConfidentialityLevel was a leftover from 0.6 and is not used in v1.x.,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bun:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Feb/19 12:32 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/29304/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
RAFT orderers SERVICE_UNAVAILABLE,FAB-14187,37689,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,15/Feb/19 2:59 AM,20/Mar/19 2:48 AM,28/Oct/23 3:05 AM,20/Mar/19 2:48 AM,,,,,,v2.0.0,,,,fabric-orderer,,,,,0,raft,,,,"The orderers show no Raft leader, see attached logs (orderer2nd-ordererorg-7.log and orderer3rd-ordererorg-7.log) and PTE log (FAB-13760-ch3-th2-move-0213170638.log)

^[[36m2019-02-13 22:09:29.990 UTC [policies] Evaluate -> DEBU 4d724d^[[0m == Done Evaluating *policies.implicitMetaPolicy Policy /Channel/Application/Writers
^[[36m2019-02-13 22:09:29.990 UTC [policies] Evaluate -> DEBU 4d724e^[[0m Signature set satisfies policy /Channel/Writers
^[[36m2019-02-13 22:09:29.990 UTC [policies] Evaluate -> DEBU 4d724f^[[0m == Done Evaluating *policies.implicitMetaPolicy Policy /Channel/Writers
^[[33m2019-02-13 22:09:29.990 UTC [orderer.common.broadcast] ProcessMessage -> WARN 4d7250^[[0m [channel: testorgschannel3] Rejecting broadcast of normal message from 10.188.208.4:13293 with SERVICE_UNAVAILABLE: rejected by Order: no Raft leader
^[[36m2019-02-13 22:09:29.990 UTC [orderer.common.server] func1 -> DEBU 4d7251^[[0m Closing Broadcast stream
^[[34m2019-02-13 22:09:29.990 UTC [comm.grpc.server] 1 -> INFO 4d7252^[[0m streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Broadcast grpc.peer_address=10.188.208.4:13293 grpc.code=OK grpc.call_duration=1.111798ms
^[[36m2019-02-13 22:09:29.992 UTC [orderer.consensus.etcdraft] consensusSent -> DEBU 4d7253^[[0m Sending msg of 28 bytes to 1 on channel testorgschannel15 took 3.666µs
^[[36m2019-02-13 22:09:29.992 UTC [orderer.consensus.etcdraft] consensusSent -> DEBU 4d7254^[[0m Sending msg of 28 bytes to 3 on channel testorgschannel15 took 3.106µs


PTE log shows:
^[[32minfo^[[39m: [PTE 2 main]: stdout: ^[[32minfo^[[39m: [PTE 2 exec]: [1550095769214 Nid:chan:org:id=0:testorgschannel3:org2:0 invoke_move_dist_evtBlock] failed to sendTransaction status: {""status"":""SERVICE_UNAVAILABLE"",""info"":""no Raft leader""}

^[[32minfo^[[39m: [PTE 2 main]: stdout: ^[[32minfo^[[39m: [PTE 2 exec]: [1550095769227 Nid:chan:org:id=0:testorgschannel3:org2:1 invoke_move_dist_evtBlock] failed to sendTransaction status: {""status"":""SERVICE_UNAVAILABLE"",""info"":""no Raft leader""}
",,dongming,guoger,joaquimpedrooliveira,jyellick,kchristidis,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13760,,,,,,,"15/Feb/19 2:54 AM;dongming;FAB-13760-ch3-th2-move-0213170638.log;https://jira.hyperledger.org/secure/attachment/16817/FAB-13760-ch3-th2-move-0213170638.log","16/Feb/19 11:38 AM;scottz;lost_transactions.txt;https://jira.hyperledger.org/secure/attachment/16823/lost_transactions.txt","15/Feb/19 2:56 AM;dongming;orderer2nd-ordererorg-7.log.gz;https://jira.hyperledger.org/secure/attachment/16816/orderer2nd-ordererorg-7.log.gz","15/Feb/19 2:56 AM;dongming;orderer3rd-ordererorg-7.log.gz;https://jira.hyperledger.org/secure/attachment/16815/orderer3rd-ordererorg-7.log.gz",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bv3:",,,,Unset,Unset,,,,"1. Create a blockchain network with 3 raft orderers
2. We created 100 channels, but only used 3 for the traffic: testorgchannel1-testorgchannel3. All channels has the same 3 org, 1 peer per org.
3. Using 3*m (m=1 ... 10) threads per channel with 3 channels, total thread number is 9*m, each thread targets 1 orderer in the fashion of roundrobin, i.e., thread 1 to orderer1, thread 2 to orderer 2, etc.

In our example we used PTE in Constant Mode (to send the next transaction as soon as the TX response ACK for the previous one was received. We increase number of channels. Each thread sends 10,000 transactions.
batchsize = 500 ; batchtimeout=2s; SnapshotInterval: 100 MB
Two orderers show ""SERVICE_UNAVAILABLE"" after sending 3000 transactions in the case with 3 channels, 6 thread each (total 18 threads).
Note that the test with 3 channels, 3 thread each (total 9 threads) succeeds.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,guoger,joaquimpedrooliveira,jyellick,kchristidis,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Feb/19 6:57 AM;scottz;These logs were also seen.

2019-02-13 22:09:31.551014 W | wal: sync duration of 2.087949482s, expected less than 1s
 2019-02-13 22:09:31.552566 W | wal: sync duration of 7.750080345s, expected less than 1s
 2019-02-13 22:09:31.558517 W | wal: sync duration of 7.743392857s, expected less than 1s

I understand that any orderer in a channel would start a new election term if it does not receive any heartbeats from the leader of the channel. With transactions in flight, an orderer leader change can cause transactions to be dropped, and also other transactions to be NACKed.

We have some questions. Please help us document what happened:
 # Why was a leader election triggered at all? What caused the delays? Jay mentioned that we were waiting for disk IO to complete. Can we dig any deeper?
 # Why was a leader election triggered in *only one* of the channels?
 # How can an operator tune their network configuration, node hardware, or environment variables to prevent this from happening as much as possible?;;;","16/Feb/19 12:26 AM;guoger;bq. 1. Why was a leader election triggered at all? What caused the delays? Jay mentioned that we were waiting for disk IO to complete. Can we dig any deeper?
on linux, it's this call:
{code}
syscall.Fdatasync(int(f.Fd()))
{code}
bq. 2. Why was a leader election triggered in only one of the channels?
because channels are independent from each other, delayed file sync on leader in channelA doesn't affect leaders in other channels.
bq. 3. How can an operator tune their network configuration, node hardware, or environment variables to prevent this from happening as much as possible?
- perhaps find out wal sync performance by running wal [benchmark test|https://github.com/etcd-io/etcd/blob/master/wal/wal_bench_test.go]
- set `ElectionTimeout` accordingly
- trace syscall to spot delay;;;","16/Feb/19 11:34 AM;scottz;Answers make sense. However, upon further analysis, we notice that _something_ affected transactions in two (and maybe all 3) channels at the same time. It seems we should be looking for the root cause of a specific interruption causing disk write delays (and lost transactions) for all the channels. This has happened twice out of many high-volume traffic tests.

We clarified the timeline and added our detailed observations in the attachment `lost_transactions.txt`;;;","19/Feb/19 8:25 AM;scottz;We are rerunning the testcase again tonight, FAB-13760, with logs enabled as per direct message conversations with developers, and if the problem occurs we should have data available for review in about 16 hours.;;;","20/Feb/19 1:23 AM;dongming;Re-ran the same test twice with the latest image 5937ae4 from 2/18/19 with logging level
FABRIC_LOGGING_SPEC=info:orderer.consensus.etcdraft=debug:orderer.common.cluster=debug.
The issue was not reproduced though it was observed three times with the same test in the past.  However, the TPS is degraded by 1/4 (from 496 to 369) compare to the orderer image 55869bc59 from Jay in 2/12/19.  We do not know if this is caused by the debug log or something else. We will run with logging level ""info"" today to see if the logging level impact the TPS.

;;;","21/Feb/19 8:38 AM;scottz;Using INFO logs instead of DEBUG logs with yesterday's images did not get the TPS back up to the rates we were seeing last week with J's private images. It looks like the additional time being consumed is reflected in increased endorsement response time as well as broadcast transaction response time. Investigation ongoing; considering network latency and the test client software and the test machine as possible causes which would impact both of those.;;;","24/Feb/19 6:02 AM;kchristidis;The observation on TPS going down is useful. Let's keep this in the back of our mind as/when we do throughput tests.

The suspicion behind this one is a slow disk. If WAL syncing takes more than 5 seconds the FSM is blocked, hence the leader re-election.

If we want to confirm this suspicion, we'll need to re-run and take note of all the warning-level logs that pop-up whenever WAL syncing takes more than 1 second.;;;","07/Mar/19 1:37 PM;jyellick;Any updates on this?;;;","11/Mar/19 11:42 PM;scottz;Yes, in past runs we have seen wal logs (delays over 5 secs) when leadership changes occurred (warnings which disappeared when the leadership changes disappeared when we increased our hosts IOPS per GB from 2 to 10). Therefore we agree this is the likely cause of the leadership changes (and makes sense with our analysis provided in the attachment lost-transactions.txt) - even though it is difficult to obtain comprehensive and conclusive data to show that it is the only cause, or that those warning logs occurred every time. We will hold this bug open for now, and keep an eye open during other testing.;;;","12/Mar/19 12:00 AM;scottz;Regarding suggestions from [~guoger] :
 *  _perhaps find out wal sync performance by running wal benchmark test_  <-- [~dongming] Let's try this in hosts with 2 IOPS and again in hosts with 10 IOPS
 *  _set `ElectionTimeout` accordingly_  <-- Do you mean increasing *ElectionTick* (10) and/or *TickInterval* (500ms) to allow more than 5 secs before a follower times out waiting for heartbeats and calls for a new election? OK, we previously discussed this and think it might help the network accommodate these occasional delays. However we would prefer to look for another solution because it comes with the drawback that it would take longer for the network to recognize a true outage of the channel leader orderer.
 * _trace syscall to spot delay_ <-- please provide more specifics of what/when/how to do this;;;","20/Mar/19 2:46 AM;dongming;We tested with IOPS=10 and do not see the issue.;;;","20/Mar/19 2:48 AM;dongming;Close the issue.;;;",,,,,,,,,,,,,,,,,
Clarify CouchDB pagination,FAB-14188,37691,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,15/Feb/19 4:12 AM,16/Feb/19 3:43 AM,28/Oct/23 3:05 AM,16/Feb/19 3:43 AM,,,,,,v1.4.1,v2.0.0,,,fabric-docs,,,,,0,,,,,"Document that 'limit' passed into CouchDB queries will not be honored, since Fabric manages the pagination between peer and CouchDB.",,denyeart,RajatSharma1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bvj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,RajatSharma1,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Feb/19 12:43 AM;denyeart;cherry pick to release-1.4: https://gerrit.hyperledger.org/r/#/c/29328/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestStateMessages failing in CI,FAB-14189,37693,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,15/Feb/19 9:19 AM,19/Mar/19 7:57 PM,28/Oct/23 3:05 AM,17/Feb/19 9:12 AM,v2.0.0,,,,,v2.0.0,,,,fabric-gossip,,,,,0,ci-flake,,,,"{quote}
14:27:12 2019-02-14 12:26:59.617 UTC [gossip.discovery#localhost:6270] expireDeadMembers -> WARN 1933 Closing connection to Endpoint: , InternalEndpoint: localhost:6266, PKI-ID: 6c6f63616c686f73743a36323636, Metadata: 
14:27:12 2019-02-14 12:26:59.617 UTC [gossip.discovery#localhost:6270] expireDeadMembers -> WARN 1934 Exiting
14:27:12 panic: runtime error: invalid memory address or nil pointer dereference
14:27:12 [signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xec5bab]
14:27:12 
14:27:12 goroutine 498 [running]:
14:27:12 github.com/hyperledger/fabric/gossip/state.TestGossipStateProvider_TestStateMessages.func3(0xc00020b860, 0xc0000ef900, 0xc0002c9a70)
14:27:12     /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state_test.go:1115 +0xcb
14:27:12 created by github.com/hyperledger/fabric/gossip/state.TestGossipStateProvider_TestStateMessages
14:27:12     /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state_test.go:1112 +0x2a9
14:27:12 FAIL    github.com/hyperledger/fabric/gossip/state    43.318s
14:27:15 ok      github.com/hyperledger/fabric/gossip/state/mocks    0.016s    coverage: 58.8% of statements
14:27:21 ok      github.com/hyperledger/fabric/gossip/util    4.078s    coverage: 79.1% of statements
14:27:22 Makefile:195: recipe for target 'unit-test' failed
{quote}

Failure was discovered in: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8902/console",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bvz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Feb/19 9:22 AM;C0rWin;https://gerrit.hyperledger.org/r/29318 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deadlock when node becomes leaderless while `Propose` or `ProposeConfChange` is called,FAB-14192,37696,36295,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,15/Feb/19 12:15 PM,04/Mar/19 9:11 PM,28/Oct/23 3:05 AM,20/Feb/19 11:55 PM,,,,,,,,,,fabric-orderer,,,,,0,,,,,"when a node becomes leaderless:
- `Propose` or `ProposeConfChange` is *blocked*
- `serveRequest` is blocked
- `applyC` is not consumed
- `etcdraft.node.run` is blocked
- no further change is possible
- deadlock :(

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8920/console",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bwn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Feb/19 7:53 PM;guoger;https://gerrit.hyperledger.org/r/c/29323/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
missing fabric-samples  volume,FAB-14193,37697,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,ping40,ping40,ping40,15/Feb/19 1:33 PM,25/Sep/19 12:37 AM,28/Oct/23 3:05 AM,25/Sep/19 12:37 AM,,,,,,,,,,fabric-samples,,,,,0,,,,,"I got a error  when I  installed  chaincode in  *Using Private Data in Fabric*

[https://hyperledger-fabric.readthedocs.io/en/latest/private_data_tutorial.html#install-and-instantiate-chaincode-with-a-collection]

 

 
{code:java}
 root@e8853f2dc05a:/opt/gopath/src/github.com/hyperledger# peer chaincode install -n marblesp -v 1.0 -p github.com/hyperledger/fabric-samples/chaincode/marbles02_private/go/
2019-02-15 03:33:20.273 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 001 Using default escc
2019-02-15 03:33:20.273 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 002 Using default vscc
Error: error getting chaincode code marblesp: path to chaincode does not exist: /opt/gopath/src/github.com/hyperledger/fabric-samples/chaincode/marbles02_private/go
{code}
because there is on such volume.

 

 

 ",,jyellick,ping40,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bwv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,ping40,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Feb/19 1:37 PM;ping40;https://gerrit.hyperledger.org/r/#/c/29321/;;;","25/Sep/19 12:37 AM;jyellick;Looks like the CR was abandoned as unneeded?  Feel free to re-open if I'm closing in error.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Move gossip's msgComparator impl and ReceivedMessage interface out of protos,FAB-14195,37706,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,15/Feb/19 11:04 PM,02/Mar/19 6:48 AM,28/Oct/23 3:05 AM,02/Mar/19 6:48 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00byf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move _lifecycle commands to peer/lifecycle/chaincode,FAB-14196,37708,37656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,16/Feb/19 12:33 AM,08/Jul/19 11:39 PM,28/Oct/23 3:05 AM,06/Mar/19 6:39 AM,,,,,,,,,,,,,,,0,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15889,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00byv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/19 5:08 AM;wlahti;https://gerrit.hyperledger.org/r/c/29270;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor lifecycle install CLI and tests,FAB-14197,37709,37656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,16/Feb/19 12:34 AM,29/Mar/19 10:09 AM,28/Oct/23 3:05 AM,29/Mar/19 10:09 AM,,,,,,,,,,,,,,,0,,,,,"Switch to blackbox testing using ginkgo, and refactor the CLI code as necessary for proper testing. ",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bz3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/19 5:08 AM;wlahti;[https://gerrit.hyperledger.org/r/c/29416];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move gossip's ConnectionInfo and AuthInfo out out protos,FAB-14198,37710,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,16/Feb/19 12:51 AM,02/Mar/19 6:48 AM,28/Oct/23 3:05 AM,02/Mar/19 6:48 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bzb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move SignedGossipMessage out of protos,FAB-14199,37711,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,16/Feb/19 12:59 AM,02/Mar/19 6:48 AM,28/Oct/23 3:05 AM,02/Mar/19 6:48 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00bzj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE add timestamp to log message,FAB-14200,37713,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,16/Feb/19 1:55 AM,20/Feb/19 1:28 AM,28/Oct/23 3:05 AM,20/Feb/19 1:28 AM,,,,,,,,,,fabric-quality,,,,,0,,,,,"Add timestamp to each log message:
[2019-02-15T02:50:55.292Z PTE 1550198635881 util]: [org:id=org1:19 getOrdererID] orderer assigned to the test: orderer1st-ordererorg
",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00bzz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"16/Feb/19 1:59 AM;dongming;https://gerrit.hyperledger.org/r/#/c/29331/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Dockerize and maintain versioning the gotools,FAB-14201,37714,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,rameshthoomu,rameshthoomu,16/Feb/19 3:12 AM,30/Jan/21 8:15 AM,28/Oct/23 3:05 AM,30/Jan/21 8:15 AM,,,,,,,,,,fabric-build,,,,,0,ipm,,,,"fabric build process installs gotools for every build and it increases build time also there is no versioning on these gotools. Proposed changes are:

 

1) Create a docker image with all the tools required to run

2) Version each gotool

3) Run the docker image from Makefile",,MHBauer,rameshthoomu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i015e8:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,rameshthoomu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Feb/19 12:03 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/29375/;;;","17/Apr/19 10:39 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/30911/;;;","01/May/19 11:15 PM;sykesm;Putting this back on the backlog for now. [~rameshthoomu] made good progress but we have higher priority items to address right now and it's still not quite there.

When we come back to this, we should reference the CRs listed above and restore them as appropriate.;;;","02/May/19 9:02 AM;MHBauer;Is this supposed to go into core fabric repo or the fabric-go-libs repo?

Where are the images going to be stored? Who is going to push it up? When is the image going to be pulled down?

Is this going to be a scheduled chore to periodically update the version of all the tools?

If it's a bunch of different tools all together, then does it have some external version we'll use? I don't see much use for any real version number besides the date, as we'll have to put some kind of manifest inside to know what version of each we have installed.

 

This will also make the build very reliant explicitly on docker when a lot of these can be run as native tools.

Alternatives
 # Each tool should be compiled and stored as an artifact in the nexus and pulled down at the start of the build
 # Whatever build environment jenkins provides should have the tools set up out of band and updated on a schedule, since the version of golang used is also provided this way.;;;","30/Jan/21 8:15 AM;sykesm;Current releases have moved to modules and we have explicit versions for our tools in the tools/go.mod. We've also changed our CI system and rely less on docker.;;;",,,,,,,,,,,,,,,,,,,,,,,,
"Install go 1.11.5 version in CI build systems ( x86, s390x)",FAB-14202,37715,37150,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,rameshthoomu,rameshthoomu,16/Feb/19 3:19 AM,16/Feb/19 3:21 AM,28/Oct/23 3:05 AM,16/Feb/19 3:20 AM,,,,,,,,,,fabric-ci,,,,,0,ipm,ipm-planned,,,"Install go 1.11.5 version in CI build systems ( x86, s390x)

For x86_64 add a new line here with the new go version [https://github.com/hyperledger/ci-management/blob/master/packer/provision/docker.sh#L109]

For s390x - Request @eddie.allen (Eddie Allen) to install in s390x under /opt/go",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrgf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Feb/19 3:20 AM;rameshthoomu;[https://gerrit.hyperledger.org/r/#/c/29285/]

Eddie Allen [11:18 AM]
Ok, go 1.11.5 is on all machines in `/opt/go/go1.11.5.linux.s390x`;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move InternalEndpoint out of protos to gossip proto extensions,FAB-14204,37720,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,16/Feb/19 4:06 AM,02/Mar/19 6:48 AM,28/Oct/23 3:05 AM,02/Mar/19 6:48 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c1b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extract gossip message type methods to functions in gossip's protobuf extensions,FAB-14205,37721,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,16/Feb/19 4:12 AM,02/Mar/19 6:49 AM,28/Oct/23 3:05 AM,02/Mar/19 6:49 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c1j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove object formatting / stringer functions from protos to gossip protocol extensions,FAB-14206,37722,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,16/Feb/19 4:26 AM,02/Mar/19 6:49 AM,28/Oct/23 3:05 AM,02/Mar/19 6:49 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c1r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extract ledger protocol buffer extensions from kvrwset,FAB-14207,37723,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,16/Feb/19 4:38 AM,02/Mar/19 6:49 AM,28/Oct/23 3:05 AM,02/Mar/19 6:49 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c1z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move rwset version compatibility tests out of proto ,FAB-14208,37724,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,16/Feb/19 5:10 AM,02/Mar/19 6:49 AM,28/Oct/23 3:05 AM,02/Mar/19 6:49 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c27:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove  extensions from peer/chaincode protocol buffer messages,FAB-14209,37725,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,16/Feb/19 5:14 AM,02/Mar/19 6:50 AM,28/Oct/23 3:05 AM,02/Mar/19 6:50 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c2f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove ccunmarshal from protos,FAB-14210,37726,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,16/Feb/19 5:18 AM,02/Mar/19 6:50 AM,28/Oct/23 3:05 AM,02/Mar/19 6:50 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c2n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove orderer/etcdraft extensions from protos,FAB-14211,37727,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,16/Feb/19 5:21 AM,02/Mar/19 6:50 AM,28/Oct/23 3:05 AM,02/Mar/19 6:50 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c2v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move protolator support out of protos,FAB-14212,37728,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,16/Feb/19 5:51 AM,02/Mar/19 6:50 AM,28/Oct/23 3:05 AM,02/Mar/19 6:50 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c33:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft Month Longrun Test (started March 18),FAB-14214,37731,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,scottz,scottz,16/Feb/19 10:47 AM,24/Jul/19 3:20 AM,28/Oct/23 3:05 AM,19/Jul/19 2:49 AM,,,,,,v1.4.1,v2.0.0,,,fabric-quality,,,,,0,raft,,,,"Simulate a live network by running traffic for a month in a mixed network. This is a very long traffic test with multiple channels and concurrent traffic in every channel, sending traffic to all the orderers.
h2. Setup:

Create a network similar to the one described in FAB-13601 using 3 raft orderers, with these exceptions: 
 * 2 peers total, 2 orgs
 * {{batchSize.maxMessageCount}} = 500
 * create 6 channels, and join all peers to all channels
 * set loglevels to INFO, the most detail that would be used in a live site
 * allocate 2.0 TB storage per peer and per orderer

h2. Input Traffic:
 * only 1 endorsement required, by any org peer; send each TX to only 1 peer
 * use a very small payload (maybe 8 bytes) in the transactions
 * 6 channels, 2 threads per channel
 * 12 total threads
 * overall traffic rate = 100 tps; each thread tps = 8.33
 * constant mode, frequency (send rate, every thread) = 120 ms
 * Run for 30 days
 * 3 pte/nodesdk clients, each with 4 threads - 2 for each of 2 channels:
 ** client 1, thread 1 - channel1, peer1.org1, orderer1
 ** client 1, thread 2 - channel1, peer1.org2, orderer1
 ** client 1, thread 3 - channel2, peer1.org1, orderer1
 ** client 1, thread 4 - channel2, peer1.org2, orderer1
 ** client 2, thread 5 - channel3, peer1.org1, orderer2
 ** client 2, thread 6 - channel3, peer1.org2, orderer2
 ** client 2, thread 7 - channel4, peer1.org1, orderer2
 ** client 2, thread 8 - channel4, peer1.org2, orderer2
 ** client 3, thread 9 - channel5, peer1.org1, orderer3
 ** client 3, thread 10 - channel5, peer1.org2, orderer3
 ** client 3, thread 11 - channel6, peer1.org1, orderer3
 ** client 3, thread 12 - channel6, peer1.org2, orderer3

 
h2. Expectations:
 * All nodes remain in service throughout the test.
 * No errors in the logs of peers and orderers.
 * PTE Test Passes and End2End Latency (avg per transaction) will be reported.
 * No failures or errors reported by PTE. Approximate Totals:
 ** Transactions: 30 days X 100 tps = 259,200,000
 ** TX per channel: TotalTX / 6 = 43,200,000
 ** TX per Block = 33
 ** Blocks:  7,854,545
 ** Blocks per channel: 1,309,091
  
 * Optionally, we could occasionally upgrade the peers and orderers (preferably one at a time) with new stable images; if choose to do this, then expect a few failures to occur around the time each orderer or peer is stopped and restarted.

 

 ",,adarshsaraf123,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|hzwqrb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"We ran one test on the master branch for 2 weeks (before our k8s cluster was mistakenly deleted), and it seemed to have no memory leaks and it processed well over 100 Million transactions batched into more than 3 Million blocks (total all 6 channels)

We ran 4 weeks on images from v1.4, March 17-April 15.
Totals for all 6 channels:
Metric: endorser_successful_proposals: 226,336,691
Metric: consensus_etcdraft_committed_block_number:  6,881,357 
Test PASS.
Note: After about 2 weeks in to the 4 week traffic runs, one PTE client (out of the three), which was sending transactions on two channels, started experiencing slowness problems due to network bandwidth issues. The input transaction rate on those channels slowed. Otherwise, based on the fabric network metrics, everything looked very stable. We observed no errors in the orderers, and no raft leader changes.
",System Test,,(Please add usage information),adarshsaraf123,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Feb/19 11:24 PM;suryalnvs;Running good so far from 4 days and completed 6+ million transactions and ledger block height is at 182514. Prometheus url for metrics: https://prometheus.community-longrun.us-south.containers.appdomain.cloud/graph;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft Consensus - System Test Ideas Incubator,FAB-14215,37732,,Epic,Closed,FAB,Fabric,software,denyeart,,,High,Done,,scottz,scottz,16/Feb/19 11:10 AM,26/Feb/20 10:48 PM,28/Oct/23 3:05 AM,01/Aug/19 10:21 AM,v1.4.1,v2.0.0,,,,,,,,fabric-quality,,,,,0,raft,,,,"This is the proving ground to capture ideas for upcoming raft system tests areas. Once we harden these ideas and agree to create actual testcases, they should be linked instead to:
 * FAB-13538 ""Raft Consensus - System Test""

 

Below is a preliminary list. (I created Jira testtasks placeholders for each of these, but they each should be reviewed carefully and expanded into multiple testcases.)
h3. Functional and Negative Test Areas:
 * Targeted orderer restarts during onboarding
 * kube-monkey: random restarts during traffic runs with more channels and concurrency
 * Quorum tests: stop multiple orderers(some or all) to prevent quorum, and then recover them in different sequences, with traffic
 * Migration – all tests
 * TLS cert rotation for all orderersand onboard new ordererafterwards
 * TLS cert rotation for one or more orderers, with traffic, with restarts
 * Configure OSNs in channels with only partly overlapping consenter sets (e.g. A,B,C vs B,C,D) and run traffic
 * With overlapping consenter sets, also rerun tests for restarts, onboarding, cert rotation (as needed)
 * Configure OSNsindifferentordererorganizations and run traffic
 * With OSNs in different orgs, also rerun restarts, onboarding, cert rotation (as needed)

h3. Scaling and Performance:
 * Performance: Raft vs Kafka
 * Scaling traffic runs on more orderers, e.g., 5, 7, 11, 15, 100
 * Higher traffic rates using HFRD
 * Higher traffic rates (orderersonly) using OTE

h3. Stress and Disruption:
 * Resend transactions - after timeout of single TXs when needed
 * Resend transactions - DoSscenarios
 * Flood orderersto create stress, some while restarting orderers(e.g. thundering herd)
 * Send duplicate transactions to multiple orderers(IT or SVT?)
 * Other stress and disruptive test ideas…

 
  ",,denyeart,scottz,Vishal3152,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13538,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Not Required,Unset,Not Required,ghx-label-1,,Raft Consensus - System Test Ideas Incubator,Done,No,,Not Required,No,,,"1|i006kl:",,,,No,Not Required,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,scottz,Vishal3152,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Feb/19 8:00 AM;denyeart;[~scottz] I removed FixVersion so that the test epic doesn't show up in v2.0 release dashboards.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
harden integration test of online eviction,FAB-14217,37735,36295,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,17/Feb/19 4:19 AM,04/Mar/19 9:11 PM,28/Oct/23 3:05 AM,18/Feb/19 2:21 PM,,,,,,,,,,,,,,,0,,,,,"The test case ""when an orderer node is evicted, it does not complain and does it obediently"" finds a leader, and then creates a channel, and then removes the leader from both channels.

 

However, obviously - that is only the system channel leader, and it may not be the leader of the application channel.

 

When it's not the leader - the other nodes might cease communication with that evicted node (in case it's slow) - and then the test fails because it doesn't detect its own eviction.

 

 ",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c4f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Feb/19 4:23 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/29340/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use ephemeral ports in gossip service tests,FAB-14218,37738,33033,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,17/Feb/19 11:56 PM,06/Apr/19 5:37 PM,28/Oct/23 3:05 AM,18/Feb/19 11:50 PM,,,,,,v2.0.0,,,,fabric-gossip,,,,,0,hygiene,,,,"Currently, all unit tests under gossip service use the test constructor NewGossipServiceWithServer with a hard coded port number.

We need to use ephemeral ports and avoid using that constructor.",,hagarm,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c53:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,MHBauer,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Feb/19 12:22 AM;hagarm;https://gerrit.hyperledger.org/r/#/c/29344/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable go profiling configuration,FAB-14219,37740,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,baohua,baohua,18/Feb/19 10:45 AM,18/Feb/19 10:09 PM,28/Oct/23 3:05 AM,18/Feb/19 10:09 PM,,,,,,,,,,,,,,,0,,,,,"Currently, if we wanna to enable the go profiling in fabric, it requires to change the source code.

Hence this is not that friendly when debugging or tuning the fabric components.

A more easy way is we add the profiling code and allow to use the config (e.g., core.yaml) to turn on/off it.",,baohua,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c5j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Feb/19 7:34 PM;mastersingh24;[~baohua] - are you looking for something in addition to https://github.com/hyperledger/fabric/blob/release-1.4/sampleconfig/core.yaml#L307 ?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TC: Chaos testing: restart all components peers and raft, in network with mult channels and concurrency",FAB-14220,37741,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,suryalnvs,scottz,scottz,18/Feb/19 11:16 AM,09/Aug/19 12:48 AM,28/Oct/23 3:05 AM,09/Aug/19 12:37 AM,v1.4.1,v2.0.0,,,,v1.4.2,,,,fabric-quality,,,,,0,raft,watchlist,,,"h2. Setup
 * Create a fabric network with 3 channels, 3 raft orderers, 2 orgs with 2 peer per org.
 * Set up the k8s cluster: set servicetype = LoadBalancer to allow bouncing the orderers.
 * Use our usual settings for batchsize = 500 , batchtimeout = 2s, and SnapshotInterval = 100 MB
 * Use fabric-test/tools/PTE/scripts/gen_cfgInputs.sh to create traffic generation files.
 * Do NOT use failover mode in PTE. We want the same clients to continue sending to the same orderers as initially selected. This means there will be multiple failures, but it also means that we will still be sending transactions to ALL the orderers at the end of the test after they have all recovered.

h2. Input
#  * Send transactions using multiple threads, with PTE settings for TargetPeers=OrgAnchor (to use one peer in every org), and TargetOrderers=RoundRobin (to use all the orderers, assuming there are at least that many total threads).
#  * To balance load among the peers as well as among the orderers, choose a number of threads to be Lowest Common Multiple of #orgs X #orderers, for each channel. In our case that means choose 6 per channel (this means 3 for peer1org1 and 3 for peer1org2, for each channel), 9 total per peer, and 6 per orderer.
#  * Use PTE in Constant Mode (to send the next transaction as soon as the TX response ACK for the previous one was received), to provide multiple transactions in flight simultaneously, for every thread.
#  * Start sending transactions for two hours.
#  * After a few minutes, start the chaos-kube tool to restart a random orderer every 2 minutes, for 90 minutes.
#  * Feb 27: modify: restart random orderer every 2 minutes, 2 orderers every 6 minutes, 3 orderers every 12 mins.

h2. Expectations
 * PTE tool does not resend transactions upon receiving NACK, nor when TXs are lost. Therefore there will be transaction failures (unreceived) in the pteReport counters. There will also be failures for the NACKs when sending transactions to an orderer that is stopped, and when sending to an orderer while the leader is stopped while the others are trying to elect a new leader.
 * Since the recovery of a single orderer is expected to take less than 20 seconds, we should never see a situation where consensus quorum is halted, because we are waiting 2 minutes before stopping the next one.
 * At the end of the test, all the orderers should be up, functioning well, processing transactions and blocks, and end with the same block height in all the channels. (We could look at the metrics to possibly help with this validation, or else connect a consumer to each orderer to retrieve the last block on each channel.)

 ",,guoger,joaquimpedrooliveira,kchristidis,scottz,suryalnvs,,,,,,,,,,,,,,FAB-14274,FAB-14454,,,FAB-16258,,,,,,,,,,,,,,,FAB-14129,FAB-14221,FAB-14226,"24/Feb/19 5:58 AM;suryalnvs;FAB-14220-orderers-goroutines-0222.zip;https://jira.hyperledger.org/secure/attachment/16856/FAB-14220-orderers-goroutines-0222.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,Manual,,Unset,No,,,"1|i000e1:i",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"Passed in 1.4.1 mid-March, but we should test again with RC1, after the code stops churning. ",System Test,,(Please add usage information),guoger,joaquimpedrooliveira,kchristidis,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/19 8:15 AM;kchristidis;Expecting an update on this tomorrow.;;;","20/Feb/19 11:50 PM;kchristidis;{quote}Since the recovery of a single orderer is expected to take less than 20 seconds{quote}

What is the source for this statement?;;;","24/Feb/19 5:36 AM;kchristidis;Friday's status: This is being re-run with step logging set to the debug level.;;;","24/Feb/19 5:57 AM;suryalnvs;Reran this test with step logging level set to debug and able to reproduce the issue FAB-14274 . Added goroutines from the latest run.

logs url: https://app.us-south.logging.cloud.ibm.com/87cd83a6af/logs/view
Timestamps to look for logs (rerun): from 02/22 10:16am EST
Instance: regression-lab;;;","24/Feb/19 2:57 PM;suryalnvs;Reran this with guoger/fabric-orderer:leaderless (custom image from Jay).

Test started at 11.27pm EST 02/23, initiated chaos-kube at 11.52pm EST 02/23 and observed the no raft leader on all the application channels at around 12.18am EST 02/24.

Also ran KILL -SIGUSR1 1 to get goroutines at Sun Feb 24 00:52:30 EST

logs url: [https://app.us-south.logging.cloud.ibm.com/87cd83a6af/logs/view]
Timestamps to look for logs (rerun): from 02/23 11.27pm EST
Instance: regression-lab

 ;;;","25/Feb/19 3:17 AM;kchristidis;[~suryalnvs]: The fix in FAB-14274 was just merged. It should be part of tonight's build.

Let's kick off a test early tomorrow morning to confirm that we're good, and let's update the test task with the results.;;;","25/Feb/19 10:56 PM;guoger;If we kick-off a long running test with chaos-kube, is it possible to have some variations based on following 2 parameters:
- random kill interval (say (0-10] min)
- number of nodes to kill (1, 49%, 100%);;;","25/Feb/19 11:01 PM;kchristidis;[~suryalnvs] confirms that we're now good with the original variation of the test.

Keeping this open so that we can try some of the variations that Jay suggested above.;;;","27/Feb/19 7:00 AM;suryalnvs;Started a new run for 12 hours with the following:
 * Batch size as 10
 * 10 channels in the network
 * sending constant mode traffic with PTE on all channels
 * Initiated separate chaos-kube jobs for each orderer, group of two orderers, and for all three orderers using the following:

{code:java}
helm install --kubeconfig=kubeconfig.regression  --set labels='k8s-app=orderer1st-ordererorg',namespaces='default',dryRun=false,rbac.create=true,interval=10m,minimumAge=4m --name chaos-orderer1st stable/chaoskube

helm install --kubeconfig=kubeconfig.regression  --set labels='k8s-app=orderer2nd-ordererorg',namespaces='default',dryRun=false,rbac.create=true,interval=10m,minimumAge=4m --name chaos-orderer2nd stable/chaoskube

helm install --kubeconfig=kubeconfig.regression  --set labels='k8s-app=orderer3rd-ordererorg',namespaces='default',dryRun=false,rbac.create=true,interval=10m,minimumAge=4m --name chaos-orderer3rd stable/chaoskube

helm install --kubeconfig=kubeconfig.regression  --set labels='k8s-app=orderer1st-ordererorg\,orderer2nd-ordererorg',namespaces='default',dryRun=false,rbac.create=true,interval=4m,minimumAge=3m --name chaos-orderer1st-orderer2nd stable/chaoskube

helm install --kubeconfig=kubeconfig.regression  --set labels='k8s-app=orderer1st-ordererorg\,orderer3rd-ordererorg',namespaces='default',dryRun=false,rbac.create=true,interval=4m,minimumAge=3m --name chaos-orderer1st-orderer3rd stable/chaoskube

helm install --kubeconfig=kubeconfig.regression  --set labels='k8s-app=orderer2nd-ordererorg\,orderer3rd-ordererorg',namespaces='default',dryRun=false,rbac.create=true,interval=4m,minimumAge=3m --name chaos-orderer2nd-orderer3rd stable/chaoskube

helm install --kubeconfig=kubeconfig.regression  --set labels='type=orderer',namespaces='default',dryRun=false,rbac.create=true,interval=2m,minimumAge=4m --name chaos-orderer stable/chaoskube

{code}
 ;;;","27/Feb/19 11:37 PM;suryalnvs;Run for 12 hours was failed because of memory pressure on the orderer pods and worker nodes. I will increase the worker nodes to have more memory and will relaunch the test.;;;","28/Feb/19 1:10 AM;suryalnvs;Restarted the test to run for 12 hours by adding 2 more worker nodes.;;;",,,,,,,,,,,,,,,,,,
"5. Raft Quorum Tests: stop multiple orderers (some or all) to prevent consensus quorum, and then recover them, in different sequences, with traffic",FAB-14221,37742,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,scottz,scottz,18/Feb/19 11:17 AM,09/Aug/19 12:36 AM,28/Oct/23 3:05 AM,31/Jul/19 5:29 AM,v1.4.1,v2.0.0,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,"We have covered this at some level with FAB-14220, which became a better test than originally designed, where we stopped/restarted different number of and combinations of orderers. What that test does NOT do is, after some orderers are stopped, to start (only) different subsets orderers (rather than starting all of them at once) to bring up the total number to be just enough to reestablish quorum (with different set of orderers that had been part of the most recent quorum). This is targeting functionality that is part of the raft logic, not so much our orderer code, so it does not have to be in the critical list for this fabric release but still is something we could execute to be thorough. We might also consider doing this along with FAB-14293, when we set up orderers in different clusters in distant locations.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14293,FAB-14220,FAB-16258,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14215,,,No,,Unset,No,,,"1|i00c66:i",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft Migration from Kafka – placeholder for all tests,FAB-14222,37743,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,scottz,scottz,18/Feb/19 11:18 AM,31/Jul/19 5:32 AM,28/Oct/23 3:05 AM,31/Jul/19 5:32 AM,v1.4.1,v2.0.0,,,,Future,,,,fabric-quality,,,,,0,raft,,,,,,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16061,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14215,,,No,,Unset,No,,,"1|i00c8c:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jul/19 5:32 AM;suryalnvs;Tests are added FAB-16061 epic;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft - TLS cert rotation for all orderers and then onboard new orderer afterward,FAB-14223,37744,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,scottz,scottz,18/Feb/19 11:19 AM,20/Feb/19 2:21 AM,28/Oct/23 3:05 AM,20/Feb/19 2:21 AM,v1.4.1,v2.0.0,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,,,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14215,,,No,,Unset,No,,,"1|i00c6f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/19 9:32 AM;yacovm;we have this in FVT.... please close this.;;;","20/Feb/19 2:21 AM;scottz;Duplicates another testcase, so we can abandon this.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
"7. Raft - TLS cert rotation for one or more orderers, with traffic",FAB-14224,37745,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,scottz,scottz,18/Feb/19 11:20 AM,27/Mar/19 5:44 AM,28/Oct/23 3:05 AM,27/Mar/19 5:44 AM,v1.4.1,v2.0.0,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13904,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14215,,,No,,Unset,No,,,"1|i00c5r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"6. Configure Raft OSNs with channels with only partly overlapping consenter sets (e.g. A,B,C vs B,C,D vs E,F,G) and run traffic",FAB-14225,37746,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,scottz,scottz,18/Feb/19 11:21 AM,24/Jul/19 5:48 AM,28/Oct/23 3:05 AM,24/Jul/19 5:48 AM,v1.4.1,v2.0.0,,,,v1.4.2,v2.0.0,,,fabric-quality,,,,,0,raft,,,,"Run traffic on different channels configured with partly overlapping consenters sets.
h2. Setup:
 # Define a fabric network with:
 ## etcd/raft with 7 OSNs (3 in ordererorg1 and remaining 4 in ordererorg2)
 ## minimum 1 peer in 1 org
 # Configure the network with all the 7 OSNs in the {{orderersystemchannel}} consenter set.
 # Batch size=10
 # Create a configtx.yml file with 3 orgchannels in profiles
 ## OrgChannel1 (With orderer1st, orderer2nd, and orderer3rd)
 ## OrgChannel2 (With orderer2nd, orderer3rd, and orderer4th)
 ## OrgChannel3 (With orderer5th, orderer6th, orderer7th)
 # Bring up all the orderers
 # Create three application channels
 ## Channel1(Using OrgChannel1 profile)
 ## Channel2(Using OrgChannel2 profile)
 ## Channel3(Using OrgChannel3 profile)

h2. Inputs
 # In PTE, create 3 SC files(1 per each channel respectively).
 # Start traffic, generating 40K transactions on each channel. 

h2. Expectations
 # Verify all the orderers in each channel has the same number of blocks.
 # All nodes remain in service throughout the test.
 # No errors in the logs of peers and orderers.
 # No failures or errors reported by PTE.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Mar/19 4:08 AM;bharadwajambati1;configtx.yml;https://jira.hyperledger.org/secure/attachment/16927/configtx.yml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|hzwqrk:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"Passed in v1.4.1 
Commit SHA: 609d4ea",System Test,,(Please add usage information),scottz,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Raft OSNs with overlapping consenter sets - rerun tests for restarts, onboarding, cert rotation (as needed)",FAB-14226,37747,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,scottz,scottz,18/Feb/19 11:22 AM,09/Aug/19 12:36 AM,28/Oct/23 3:05 AM,31/Jul/19 5:31 AM,v1.4.1,v2.0.0,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14220,FAB-16258,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14215,,,No,,Unset,No,,,"1|i00c87:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
2. Configure Raft OSNs in different orderer organizations and create channels and run traffic,FAB-14227,37748,,Test Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,bharadwajambati1,scottz,scottz,18/Feb/19 11:23 AM,09/Aug/19 12:55 AM,28/Oct/23 3:05 AM,24/Jul/19 5:56 AM,v1.4.1,v2.0.0,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,"h2. Setup
 # Modify the configtx.yml file with different orderer organizations 
 # Generate the orderer certs using cryptogen
 # Create a genesis block from the modified configtx.yml
 # Create a fabric network with:
 ## 4 raft orderers in multiple ordererorgs: 3 OSNs in ordererorg1 and *1 OSN (orderer4th) in ordererorg2*
 ## 2 peerorgs with 2 peers per org.
 ## etcd/raft with 4 OSNs in the system channel ({{orderersystemchannel}})
 ## Use our usual settings for batchsize = 500, batchtimeout = 2s, and SnapshotInterval = 100 M
 # Set up the k8s cluster: set servicetype = LoadBalancer to allow bouncing the orderers.
 # Create an application channel {{channel1}} with the same consenter set as {{orderersystemchannel}}.
 # Install {{samplecc}} on all peers.
 # Instantiate with simple endorsement policy requiring only 1 peer to endorse.
 # Provide scfile (configuration information) to the Performance Traffic Engine (PTE).
 # The network will be set up in IKS cluster. PTE itself can run in either its own container in the IKS cluster OR in a vLaunch container. For this test we will run in the vLaunch machine (preferred for convenience, but might incur slightly longer transmission delays between the pte traffic client and the fabric nodes in the k8s cluster).
 # Run with logging enabled (per Raft System Test Epic FAB-13538 comments). Logs must be persistent, so we can retrieve them even in cases where a peer or orderer stops.

_Alternatively, the network could be set up in vLaunch VM instead of IKS, using Docker containers for all network nodes, including the PTE client._
h2. Inputs
 * Run the traffic - similar to as described in FAB-14220, but send 10 transactions for each of *8* threads, using nProcsPerOrg=4 with both peerorgs org1 and org2, and using ordererOpt setting for RoundRobin.
 * Create two more channels; total = 3 channels.
 * Run the traffic on all three channels simultaneously. Send 10,000 transactions per thread.
 * Onboard two more orderers in ordererorg2. Total 6; 3 in each ordererorg.
 * Change nProcPerOrg=6, so we will send transactions to all 6 orderers.
 * Run the traffic on all three channels simultaneously. Send 10,000 transactions per thread.

h2. Expectations
 * All nodes remain in service throughout the test.
 * No errors in the logs of peers and orderers.
 * All the orderers have the same number of blocks within each channel
 * No failures or errors reported by PTE.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14228,FAB-16260,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|i006ze:",,,,Unset,Unset,Week ending 2019-Mar-08,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),scottz,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Reconfigure all raft channels to add ordererorg2 and 3 new orderers and remove three old orderers and ordererorg1, then update config and onboard a new orderer",FAB-14228,37749,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,scottz,scottz,18/Feb/19 11:24 AM,24/Sep/19 2:24 AM,28/Oct/23 3:05 AM,09/Aug/19 1:06 AM,v1.4.1,v2.0.0,,,,v1.4.2,,,,fabric-quality,,,,,0,raft,,,,"Reconfigure to add a new orderer org to system channel some time after network has been running. Add new orderers in new org. Remove old org orderers.  
h2. Setup:
 # Define a fabric network with:
 ## etcd/raft with 3 OSNs (all in ordererorg1, defined in configtx.yml)
 ## minimum 1 peer in 1 org
 ## Set default value of Orderer.BatchSize.MaxMessgeCount = 10 in configtx.yaml
 # Configure the network with all the 3 OSNs in the {{orderersystemchannel}} consenter set.
 # Bring up all the orderers

h2. Inputs
 # Run traffic transactions using orderers 1, 2, 3.
 # OrdererOrg1 Admin will fetch the latest config.block from orderer1(orderersystemchannel), add ordererorg2 to the Orderer group section, and orderer4 to orderer system channel for ordererorg2 and send the config update to orderer1 to update the orderer system channel
 # Add orderer5 to orderer system channel for ordererorg2
 # OrdererOrg1 Admin will fetch the latest config.block from orderer1(channel1), add ordererorg2 to the Orderer group section, and orderer4 to channel1 for ordererorg2 and send the config update to orderer1 to update the channel1
 # Add orderer5 to channel1 for ordererorg2
 # Start up orderers 4, 5 to onboard
 # Add orderer6 to orderer system channel for ordererorg2
 # Add orderer6 to channel1 for ordererorg2
 # Start up orderer6 to onboard
 # Run traffic using orderers 4, 5, 6 (throughout remainder of test)
 # Stop traffic running to orderers 1, 2, 3.
 # Ordererorg1 Admin will remove orderer1.ordererorg1 from channel1, sending the update to orderer1
 # Ordererorg1 Admin will remove orderer2.ordererorg1 from channel1, sending the update to orderer3
 # Stop orderer1
 # Remove orderer1.ordererorg1 from orderersystemchannel, sending the update to orderer3
 # Remove orderer2.ordererorg1 from orderersystemchannel, sending the update to orderer2
 # Stop orderer2
 # Ordererorg1 Admin will remove orderer3.ordererorg1 from channel1, sending the update to orderer4
 # Remove orderer3.ordererorg1 from orderersystemchannel, sending update to orderer4
 # Leave orderer3 running, even though it has been removed from all channels
 # Remove the ordererorg1 group from the Orderer group section, and update the orderer system channel
 # *Ordererorg1* Admin will fetch the latest config block of *channel1*, change the Orderer.BatchSize.MaxMessgeCount to 2, and update channel1. This should be *rejected*.
 # *Ordererorg2* Admin will fetch the latest config block of *channel1*, change the Orderer.BatchSize.MaxMessgeCount to 2, and update channel1. This *should be successful*.
 # Ordererorg2 Admin will Onboard orderer7 to orderer system channel for ordererorg2
 # Onboard orderer7 to channel1 for ordererorg2
 # Start up orderer7

h2. Expectations
 # All three orderers in the ordererorg2 are successfully onboarded and remain in service without errors thereafter
 # No errors in the first 3 orderers logs
 # Observe in the metrics a higher rate of increasing blocks in channel1 in all 3 remaining orderers after the batchsize is changed.

 ",,bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,,FAB-16260,,,,,,,,,,,FAB-14227,,,,FAB-14695,FAB-14735,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,Manual,,Unset,No,,,"1|i000e0:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"Passed in 1.4.1, by modifying steps to add ordererorg and new orderer with same config update. FAB-14735 (merged Mar 21 morning) should fix the expected ability to add just an orderer org.",System Test,,(Please add usage information),bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Mar/19 2:47 AM;bharadwajambati1;Tested  [~jyellick] fix for bug FAB-14735. Now it allows updating a channel with a new ordererorg. No errors.

Version: 1.4.1
Commit SHA: dce0e5d

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"8. Performance of Raft vs Kafka - design series of tests for scaling #orderers, #chans, #concurrent traffic threads",FAB-14229,37750,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,18/Feb/19 11:25 AM,01/Aug/19 10:21 AM,28/Oct/23 3:05 AM,01/Aug/19 10:21 AM,v1.4.1,v2.0.0,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14215,,,No,,Unset,No,,,"1|i00uze:rzj",,,,Unset,Unset,In Progress,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Aug/19 10:21 AM;scottz;We already have tests and tools that would allow running testcases like these on both the raft and kafka based networks. One could execute the desired tests; we don't need to automate series of tests and automate comparison data for a one-time measurement such as this.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Scaling traffic runs on networks with more orderers (3, 27, 54, 108) in a channel",FAB-14230,37751,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,scottz,scottz,18/Feb/19 11:26 AM,24/Jul/19 3:20 AM,28/Oct/23 3:05 AM,30/Apr/19 5:53 AM,v1.4.1,v2.0.0,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,watchlist,,,"h2. Summary

This test objective is to measure the throughput performance impact of an increasing number of orderers in a channel. We use the same number of traffic threads and traffic model, same number of peers, and only one channel for all test iterations. The traffic will be distributed evenly among all the orderers of the channel, so that means each orderer would receive less ingress traffic for the later test iterations when the number of orderers is higher. If the number of orderers were irrelevant, i.e. infinite scalability, then we would expect the same overall TPS result with each iteration. We will measure and share the results. If we don't see any different TPS measurements, then we could consider repeating with more traffic (2 or 3 or more multiples of traffic).
h2. Setup

Same setup as in FAB-13601, with the following differences:
 # create 1 channel: {{channel1}}
 # 3 peers with 1 peer/org
 # 36 orderers in orderersystemchannel
 # start with m=3 orderers in testorgschannel1; run tests for #orderers = m = 3, 27, 54, 108
 # {{batchSize.maxMessageCount}}: 500
 # logging level set to {{info}} (and if we see errors, then we can re-run test with debug-level logs in the orderer package per FAB-13597)

h2. Inputs
 # Start 54 thread transactions to each org's peer evenly, i.e., 18 threads to a peer. So each peer will process the same amount of transactions.
 # Each thread sends 10K invokes, using PTE constant mode, i.e. sending next transaction as soon as the previous one is sent to and ACK'd received by the ingress orderer.
 # In the case of 108 orderers, send 108 thread transactions to each org's peer evenly, each thread will send 5K invokes using PTE constant mode.
 # All transactions from a single thread will target the same orderer.
 # The orderer load-balancing will be handled in such a way that the 54 threads (or 108 threads) are evenly distributed among the {{m}} orderers which participate in the application channel, i.e. 18 threads to each orderer if {{m=3}}, 2 threads to each orderer if {{m=27}}, and 1 thread to each orderer if {{m=54}} or {{m=108}}
 # Proceed to the next phase: add orderers and rerun the traffic test. The orderer admin retrieves the latest config block from the orderersystemchannel from orderer1, and modifies it to add 3 more orderers (for a total of 6) to application channel testorgschannel1, and submits a configuration update of the orderersystemchannel. Rerun the traffic.
 # Repeat again with #orderers m = 27, 54, 108

 

Refer also to FAB-14269 for a test with many orderers AND multiple channels.
h2. Expectations
 # No errors in the logs of peers and orderers.
 # No failures or errors reported by PTE.
 # All transaction events are received by PTE.
 # TPS (Transactions Per Second) overall rates will be provided for each test iteration, for the varying values of {{m}} (number of orderers).",,dongming,guoger,kchristidis,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14269,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|hzwqrm:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"Test results were added in comments section. The problems observed were due to network configuration resource limitations, as we pushed traffic higher an started encountering rare dropped transactions due to systems being overloaded. Tweaking a few raft options parameters and network nodes hardware memory and cpu. We will work on documenting the better for users to consume recommendations.",System Test,,(Please add usage information),dongming,guoger,kchristidis,scottz,yacovm,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,true,"21/Feb/19 11:33 AM;guoger;The message complexity of raft protocol is O( n), so i would expect throughput to drop as cluster getting bigger.

 

I think it would be nice to get a grip on the impact of network latency/throughput and disk speed.;;;","26/Feb/19 1:29 AM;kchristidis;Two suggestions:
 # Given time constraints, let's make the step size bigger: 3-18-36.
 # Given time constraints, let's prioritize a test with, say, 3 or 5 OSNs, and heavy traffic on 500 channels. Then we can get back to this.

 ;;;","16/Mar/19 5:21 AM;dongming;Two test are executed for each test scenarios (orderer=27, 54, 108).
1. fixed incoming rate, TPS=100 for 90 min
2. stress test with constant mode, i.e., send tx as soon as poosible
Transactions: for orderers=27 and 54, 54 threads with 10k tx each thread, total 540,000 transactions are sent.  Each transaction has payload size=8B using local disk.  Each test is executed twice. The results are as follow:

27 orderers
test 1: both passed, client (PTE) receives all transaction events
test 2: passed, client receives all transaction events, TPS=827.33
test 2: passed, client receives all transaction events, TPS=823.23

54 orderers:
test 1: both passed, client (PTE) receives all transaction events
test 2: passed, client receives all transaction events, TPS=799.59
test 2: passed, client receives all transaction events, TPS=721.57

108 orderers:
test 1: both passed, client (PTE) receives all transaction events
test 2: passed, client receives all transaction events, TPS=638.76
test 2: failed, 33 broadcast tx failed due to SERVICE_UNAVAILABLE and misses 2172 events, (see FAB-14678);;;","20/Mar/19 2:42 AM;dongming;Using MaxInflightMsgs=1, the test passed for 108 orderers:
test1: both passed, client (PTE) receives all transaction events
test 2: passed, client receives all transaction events, TPS=729.35
test 2: passed, client receives all transaction events, TPS=745.59;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Raft Performance - Higher traffic rates and concurrency using HFRD for release measurements,FAB-14231,37752,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,18/Feb/19 11:27 AM,31/Jul/19 5:31 AM,28/Oct/23 3:05 AM,31/Jul/19 5:31 AM,v1.4.1,v2.0.0,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,"Use go-sdk and HFRD.

(Most previous tests so far have used node-sdk and PTE.)",,scottz,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14215,,,No,,Unset,No,,,"1|hzwqrm:6",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jul/19 5:31 AM;scottz;PTE was used in 1.4 for some scalability tests which ramp up traffic.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
9. Raft Performance and Stress - Higher traffic rates (orderers only) using OTE,FAB-14232,37753,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,18/Feb/19 11:28 AM,31/Jul/19 5:30 AM,28/Oct/23 3:05 AM,31/Jul/19 5:30 AM,v1.4.1,v2.0.0,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,,,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14215,,,No,,Unset,No,,,"1|i00c6c:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jul/19 5:30 AM;suryalnvs;Did performance testing with PTE;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft Robustness - client resend single transactions when necessary after timeout,FAB-14233,37754,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,18/Feb/19 11:30 AM,20/Feb/19 3:27 AM,28/Oct/23 3:05 AM,20/Feb/19 3:27 AM,v1.4.1,v2.0.0,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,,,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14215,,,No,,Unset,No,,,"1|i00c8n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/19 9:26 AM;yacovm;I don't understand what this means... can you elaborate what you had in mind?

 ;;;","20/Feb/19 2:55 AM;scottz;Suppose the client broadcasts an endorsed transaction to an orderer, then waits for the event from the peer for say 2 secs, times out, and tries to send it again (the same transaction) to the same or different orderer.

Maybe that much could be a good FVT test. Do we have something like that?

Our traffic generation clients (PTE, HFRD) currently do NOT have such a capability today to do this automatically. So they would require enhancement to do it. We imagine a real client using this logic, which would accommodate some lost transactions (which is acceptable in our raft implementation because they can occasionally occur due to things like leader changes due to various circumstances) and thus resend them again, so the traffic client/test could still expect all transactions to be successful at the end of the test.

However, the more I think about it, the more this sounds like a way to mask errors. If we do this, then the only time an automated test would fail, based on transaction counts, is if too many orderers halt during the test run. So maybe we should just withdraw this testtask.;;;","20/Feb/19 3:08 AM;yacovm;we should try to use peers as little as possible when testing Raft.

This sounds to me like an FVT, and not a SVT.

 

please close this :) ;;;","20/Feb/19 3:27 AM;scottz;This describes something that would qualify as an FVT test, and not help us much with SVT.;;;",,,,,,,,,,,,,,,,,,,,,,,,,
3. Raft Robustness - Repeatedly resend blasts of (duplicate) transactions - DenialOfService scenarios,FAB-14234,37755,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,dongming,scottz,scottz,18/Feb/19 11:31 AM,24/Jul/19 3:20 AM,28/Oct/23 3:05 AM,15/Mar/19 6:20 AM,v1.4.1,v2.0.0,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14215,,,No,,Unset,No,,,"1|hzwqro:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Mar/19 6:20 AM;scottz;Raft doesn't care; it treats ""duplicate"" transactions just like new transactions. Therefore this is same as many other tests that blast lots of transactions.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"4. Raft Stress and Robustness - Send blasts of transactions to orderers, sometimes while restarting orderers (maybe create thundering herd scenario)",FAB-14235,37756,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,dongming,scottz,scottz,18/Feb/19 11:33 AM,01/Aug/19 10:18 AM,28/Oct/23 3:05 AM,01/Aug/19 10:18 AM,v1.4.1,v2.0.0,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,"With several tests in 1.4, we have run traffic with over 100 threads to generate simultaneous burst of messages at the start of large traffic tests - with many orderers and with many channels. So this has been tested to some degree already.

The restarts test FAB-14220 stopped and restarted multiple orderers at once, causing leader changes, with traffic running. Once the channel reelected a leader, all the orderers were able to start handling transactions again. The PTE-generated traffic resumed simultaneously. These transactions included some already endorsed, and then others would follow soon on the numerous threads concurrently after those inflight transactions were broadcast to the orderers.

To really generate a more extreme burst of transactions to an orderer as soon as it recovers, or to all orderers as soon as a leader is elected in a channel, we could try these ideas:
 * use PTE - but only after we modify it to queue up multiple transactions per thread that are NACKed by orderers (because of lack of leader - or maybe even also those that were dropped, for which we simply did not receive events) and continually reattempt to resend all of them. Is this feasible?
 * use OTE (FAB-14232) - but only after we modify it to continue to send heavy stream of endorsed transactions with no hesitation even when transactions are NACKed by orderers
 * use HFRD (FAB-14231), since it uses lots of threads naturally, with enough peers to share the endorsement load, and blast the orderers with traffic; possibly restart a leader and/or other orderers to test recovery and stability",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14215,,,No,,Unset,No,,,"1|i00c5z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Aug/19 10:18 AM;scottz;Logistics of doing this requires manipulating test environment.

Live network applications would require connections to be established and message acknowledgements.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft Stress and Robustness - Send identical duplicated transaction(s) to multiple orderers (is this IT or SVT?,FAB-14236,37757,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,18/Feb/19 11:36 AM,20/Feb/19 2:40 AM,28/Oct/23 3:05 AM,20/Feb/19 2:40 AM,v1.4.1,v2.0.0,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,"Maybe this should be an IT test, rather than SVT, but we might be more easily able to stress the raft orderers with some traffic volume and simultaneous threads in a SVT lab.",,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14215,,,No,,Unset,No,,,"1|i00c9b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/19 9:19 AM;yacovm;That's actually not a problem... the orderer doesn't care about the transactions being identical.

This should be closed.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
CL2.0: Adding an organization - new org invoking fails ProposalResponsePayload,FAB-14237,37759,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,latitiah,latitiah,18/Feb/19 2:31 PM,03/Apr/19 10:43 PM,28/Oct/23 3:05 AM,03/Apr/19 10:43 PM,,,,,,,,,,,,,,,0,,,,,"When attempting to invoke on a peer from a newly added organization, the invoke fails with the following error:
{code}Error: could not assemble transaction: ProposalResponsePayloads do not match - proposal response: version:1 response:<status:200 > payload:""\n \316v2\200Yk\007N^\033\341\3302\226\367\222.\2510\335\246\250\211\016\272\210\265X\226\rUy\022\325\002\n\302\002\022\333\001\n\n_lifecycle\022\314\001\n(\n\""namespaces/fields/mycc/Collections\022\002\010\003\n,\n&namespaces/fields/mycc/EndorsementInfo\022\002\010\003\n%\n\037namespaces/fields/mycc/Sequence\022\002\010\003\n+\n%namespaces/fields/mycc/ValidationInfo\022\002\010\003\n\036\n\030namespaces/metadata/mycc\022\002\010\003\022b\n\004mycc\022Z\n\017\n\r\000\000initialized\0321\n\r\000\000initialized\032 s\000E\306&\215\213M\303\030\000\260\276\344u\263\311wmYsO\221\254\216\023\013\003\324\240%\305\032\t\n\001a\032\0041000\032\t\n\001b\032\0042000\032\003\010\310\001\""\t\022\004mycc\032\0010"" endorsement:<endorser:""\n\020org2.example.com\022\226\006-----BEGIN CERTIFICATE-----\nMIICGTCCAb+gAwIBAgIQKUqEfDARS2fzJTxFQWBN1DAKBggqhkjOPQQDAjBzMQsw\nCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNU2FuIEZy\nYW5jaXNjbzEZMBcGA1UEChMQb3JnMi5leGFtcGxlLmNvbTEcMBoGA1UEAxMTY2Eu\nb3JnMi5leGFtcGxlLmNvbTAeFw0xOTAyMTgwMzAzMDBaFw0yOTAyMTUwMzAzMDBa\nMFsxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1T\nYW4gRnJhbmNpc2NvMR8wHQYDVQQDExZwZWVyMC5vcmcyLmV4YW1wbGUuY29tMFkw\nEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE++wQSvMllTBwtyPA/SL9VJJeonTP8Fwf\nVZIvq+PmCCXsqlTc+HUgHNnjy/wmCAyrl83j9tapC+H8Iw3m5X7FvKNNMEswDgYD\nVR0PAQH/BAQDAgeAMAwGA1UdEwEB/wQCMAAwKwYDVR0jBCQwIoAgDDRzo/G5vbPD\nEjrD8tUXfIXJ5VNfnsHu1tQc/z8O4u0wCgYIKoZIzj0EAwIDSAAwRQIhAK8tabhq\nsofSWS5XanWuMCZlJY/BSedt+6PIm6Q+DKLtAiABLGIGIfBpYl8AkUo6TOrz87Yq\nbmex0DuxCXN61nJu8g==\n-----END CERTIFICATE-----\n"" signature:""0D\002 A\307\265\336\350\034 \362J\320\226\276fJ\340\252\340\371\245\244Ry\300\257&@\244\267\021\022\227\336\002 \177\tl8X\211\230D\227,3\035O\\\221N\352\200\224-x\001V\371\002(\254\023\305\322\027\207"" > {code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/19 4:39 AM;latitiah;6d9a8f22518711e99fce023052256069-peer0.org1.example.com-mycc_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17021/6d9a8f22518711e99fce023052256069-peer0.org1.example.com-mycc_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 4:39 AM;latitiah;6d9a8f22518711e99fce023052256069-peer0.org2.example.com-mycc_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17022/6d9a8f22518711e99fce023052256069-peer0.org2.example.com-mycc_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 4:39 AM;latitiah;6d9a8f22518711e99fce023052256069-peer0.org3.example.com-mycc_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17023/6d9a8f22518711e99fce023052256069-peer0.org3.example.com-mycc_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 4:39 AM;latitiah;ca.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17032/ca.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 4:39 AM;latitiah;ca.org1.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17031/ca.org1.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 4:39 AM;latitiah;ca.org2.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17030/ca.org2.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 4:39 AM;latitiah;orderer0.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17029/orderer0.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 4:39 AM;latitiah;peer0.org1.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17028/peer0.org1.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 4:39 AM;latitiah;peer0.org2.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17027/peer0.org2.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 4:11 AM;latitiah;peer0.org3.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17020/peer0.org3.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 4:39 AM;latitiah;peer1.org1.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17026/peer1.org1.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 4:39 AM;latitiah;peer1.org2.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17025/peer1.org2.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 4:39 AM;latitiah;peer1.org3.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17024/peer1.org3.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00c9r:",,,,Unset,Unset,,,,"  Given I changed the ""Application"" capability to version ""V2_0""
  And I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel
  And an admin packages a chaincode
  And the organization admins install the chaincode package on all peers
  Then a hash value is received on all peers
  When each organization admin approves the chaincode package with policy ""OR ('org1.example.com.member','org2.example.com.member')""
  And an admin commits the chaincode package to the channel
  And I wait up to ""10"" seconds for the chaincode to be committed
  When a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""] on both orgs
  And I wait up to ""30"" seconds for deploy to complete
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000
  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 990
  When an admin adds an organization to the channel config
  # Assume channel config file is distributed out of band
  And all organization admins sign the updated channel config
  When the admin updates the channel using peer ""peer0.org1.example.com""
  When an admin fetches genesis information using peer ""peer0.org1.example.com""
  Then the config block file is fetched from peer ""peer0.org1.example.com""
  Then the updated config block contains Org3ExampleCom
  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  And I wait ""5"" seconds
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 980
  When the peers from the added organization are added to the network
  When an admin fetches genesis information at block 0 using peer ""peer0.org3.example.com""
  When an admin makes peer ""peer0.org3.example.com"" join the channel
  And an admin makes peer ""peer1.org3.example.com"" join the channel
  When the organization admins install the chaincode package on peer ""peer0.org3.example.com""
  Then a hash value is received on peer ""peer0.org3.example.com""
  When the organization admins install the chaincode package on peer ""peer1.org3.example.com""
  Then a hash value is received on peer ""peer1.org3.example.com""
  When each organization admin approves the upgraded chaincode package with policy ""OutOf(2,'org1.example.com.member','org2.example.com.member','org3.example.member')""
  And an admin commits the chaincode package to the channel on peer ""peer0.org3.example.com""
  And I wait up to ""10"" seconds for the chaincode to be committed on peer ""peer0.org3.example.com""
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""] on ""peer0.org3.example.com""
  And I wait up to ""30"" seconds for deploy to complete
  When a user queries on the chaincode with args [""query"",""a""] from ""peer0.org3.example.com""
  Then a user receives a success response of 980 from ""peer0.org3.example.com""
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 980
  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 970
  When a user queries on the chaincode with args [""query"",""a""] from ""peer0.org3.example.com""
  Then a user receives a success response of 970 from ""peer0.org3.example.com""  ########################################################
  # Breaks  on invoke with the following error:
  # 2019-02-11 16:38:42.623 UTC [vscc] Validate -> ERRO 1ab VSCC error: stateBasedValidator.Validate failed, err validation of endorsement policy for chaincode mycc in tx 11:0 failed: signature set did not satisfy policy
  #  query return 970 because the invoke is unsuccessful
  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""] on ""peer0.org3.example.com""",,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/19 4:05 AM;latitiah;As of today, the symptom of the error stills exists where an invoke is unsuccessful for the newly added org, but the error message is different. There is also a panic in the peer0.org3 log.

{code}
ESCC invoke result: response:<status:500 message:""failed to execute transaction 273a4eba1f1e0998b67ac299ec74968f2c38a674beb8cdf011c3aa545702371f: chaincode 'mycc' is already initialized but called as init"" > 
      Error: endorsement failure during invoke. response: status:500 message:""failed to execute transaction 273a4eba1f1e0998b67ac299ec74968f2c38a674beb8cdf011c3aa545702371f: chaincode 'mycc' is already initialized but called as init""
{code}

I have attached the logs. The panic is located in the peer0.org3.example.com...log file.;;;","29/Mar/19 4:53 AM;latitiah; There is no need to invoke on an init function unless the chaincode version has changed (not the definition only the chaincode). As a result of removing the step to perform the init, the test passes and the panic is no longer seen in the log file.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Use ephemeral ports in gossip state tests,FAB-14238,37766,33033,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,18/Feb/19 8:11 PM,06/Apr/19 5:37 PM,28/Oct/23 3:05 AM,18/Feb/19 11:51 PM,,,,,,v2.0.0,,,,fabric-gossip,,,,,0,hygiene,,,,"Currently, all unit tests under gossip state use the test constructor NewGossipServiceWithServer with a hard coded port number.

We need to use ephemeral ports and avoid using that constructor.",,hagarm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00can:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Feb/19 8:20 PM;hagarm;https://gerrit.hyperledger.org/r/#/c/29358/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Get rid of test constructor NewCommInstanceWithServer ,FAB-14239,37767,33033,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,18/Feb/19 8:38 PM,06/Apr/19 5:37 PM,28/Oct/23 3:05 AM,19/Feb/19 9:48 PM,,,,,,v2.0.0,,,,fabric-gossip,,,,,0,hygiene,,,,The NewCommInstanceWithServer test constructor should not be used anymore,,hagarm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cav:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Feb/19 10:20 PM;hagarm;https://gerrit.hyperledger.org/r/#/c/29359/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Catching up with snapshot may panic due to replay of block,FAB-14240,37773,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,18/Feb/19 11:46 PM,29/Mar/19 6:33 PM,28/Oct/23 3:05 AM,22/Feb/19 8:43 PM,,,,,,,,,,fabric-orderer,,,,,0,,,,,"{{support.Height}} may not reflect correct height of ledger because there might be one in-flight block being committed, since it's done [async|https://github.com/hyperledger/fabric/blob/d3318c21dbaaa086c9836b331f6101a0ea2228ce/orderer/common/multichannel/blockwriter.go#L152-L155]

So, when we use [ledger height as the arg for block puller|https://github.com/hyperledger/fabric/blob/d3318c21dbaaa086c9836b331f6101a0ea2228ce/orderer/consensus/etcdraft/chain.go#L805], we risk replaying the same block and panic the process.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14129,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cbb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Feb/19 11:46 PM;guoger;https://gerrit.hyperledger.org/r/c/29363
https://gerrit.hyperledger.org/r/c/29400;;;","19/Feb/19 11:46 PM;guoger;Hopefully this fixes FAB-14129 as well;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
"CL2.0: Same chaincode, different channels, different definitions",FAB-14241,37775,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,latitiah,latitiah,19/Feb/19 1:01 AM,01/Mar/19 12:18 AM,28/Oct/23 3:05 AM,01/Mar/19 12:18 AM,,,,,,,,,,,,,,,0,,,,,"The following error is received when attempting to execute a query on a second channel with the same chaincode, with a different chaincode definition:
{code}Error: endorsement failure during query. response: status:500 message:""failed to execute transaction 534bdf90958e7b950eee1a759920c348fa67a1d46b128aa135cd29050084e4ca: chaincode 'mycc' has not been initialized for this version, must call 'init' first"" {code}

The command that causes this failure is as follows:
{code}peer chaincode query --name mycc --ctor '{""Args"": [""query"",""b""]}' --channelID channel2{code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00cbr:",,,,Unset,Unset,,,,"  Given I changed the ""Application"" capability to version ""V2_0""
  And I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel named ""channel1""
  When an admin sets up a channel named ""channel2""
  And an admin packages a chaincode
  And the organization admins install the chaincode package on all peers
  Then a hash value is received on all peers
  When each organization admin approves the chaincode package on ""channel1"" with policy ""OR ('org1.example.com.member','org2.example.com.member')""
  And an admin commits the chaincode package to the channel ""channel1""
  And I wait up to ""10"" seconds for the chaincode to be committed
  And a user invokes on the channel ""channel1"" with args [""init"",""a"",""100"",""b"",""200""]
  And I wait up to ""30"" seconds for deploy to complete
  When each organization admin approves the chaincode package on ""channel2"" with policy ""AND ('org1.example.com.member','org2.example.com.member')""
  And an admin commits the chaincode package to the channel ""channel2""
  And I wait up to ""10"" seconds for the chaincode to be committed
  And a user invokes on the channel ""channel2"" with args [""init"",""a"",""1000"",""b"",""2000""]
  And I wait up to ""30"" seconds for deploy to complete
  When a user queries on the channel ""channel1"" with args [""query"",""a""]
  Then a user receives a success response of 100
  When a user queries on the channel ""channel2"" with args [""query"",""b""]
  Then a user receives a success response of 2000",,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Mar/19 12:18 AM;latitiah;This now works as expected with the latest build.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Have new lifecycle fulfill collection validation info interface.,FAB-14242,37779,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,19/Feb/19 7:02 AM,02/Mar/19 7:24 AM,28/Oct/23 3:05 AM,02/Mar/19 7:24 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cc7:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric Chaincode lifecycle tutorial,FAB-14247,37789,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,negupta,negupta,negupta,19/Feb/19 10:33 PM,29/Mar/19 10:47 PM,28/Oct/23 3:05 AM,29/Mar/19 10:47 PM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,fabric-doc,,,,"Tutorial that includes:
 * Packaging a chaincode
 * Approving a chaincode definition for your org.
 * Commiting the chaincode definition
 * Invoking the init function
 * Upgrading the chaincode",,negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00cdz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,pandrejko,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Mar/19 1:59 AM;negupta;https://gerrit.hyperledger.org/r/#/c/30109/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move validateMigrationStep() from Bundle to prevent processing by peer,FAB-14248,37790,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,19/Feb/19 10:34 PM,08/Jun/19 1:15 AM,28/Oct/23 3:05 AM,08/Mar/19 10:37 PM,,,,,,,,,,,,,,,0,,,,,"The code in Bundle.ValidateNew() that handles migration

    if err := b.validateMigrationStep(oc, noc); err != nil \{...}

    func (b *Bundle) validateMigrationStep(oc Orderer, noc Orderer) error {...}

should move somewhere else - it should not be processed by the peer - only the orderer.

This way, after we introduce the channel capability V1_4_1 that gates migration (see FAB-14180), the peer should be oblivious to everything under Orderer.ConsensusType (type, metadata, migration_state, migration_context). This way, in the future, if we want to fix or improve migration, we won't have to upgrade the peers beyond V1_4_1.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ce7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Migration from Lifecycle 2.0 to 1.0,FAB-14249,37791,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,negupta,negupta,negupta,19/Feb/19 10:35 PM,06/Mar/19 12:24 AM,28/Oct/23 3:05 AM,06/Mar/19 12:24 AM,,,,,,,,,,fabric-docs,,,,,0,fabric-doc,,,,,,MHBauer,negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14387,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00cef:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Mar/19 12:24 AM;pandrejko;Closing - Dup of FAB-14387;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration tests for crash and recovery in the middle of migration,FAB-14250,37792,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,tock,tock,tock,19/Feb/19 10:41 PM,04/Apr/19 4:43 PM,28/Oct/23 3:05 AM,04/Apr/19 4:39 PM,,,,,,,,,,,,,,,0,,,,,"# A test case for the restoration of migration status after crash (""empty kafka""):
 ## start a single Kafka orderer, perform a series of migration commands, but not commit. 
 ## stop the node and restart it, verify that migration can proceed.
 # A test case for consuming fast from Kafka, possibly out of order (""full Kafka""):
 ## start three Kafka orderer, perform a single migration command (START)
 ## stop orderer 3
 ## perform a series of migration commands, including commit on orderers 1,2
 ## restart orderer 3
 ## restart all (1,2,3) ro Raft
 ## verify all is well",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cen:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/19 4:43 PM;tock;Switching to alternative  migration design - v2;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE adds nOrderers to participate in the transactions,FAB-14251,37805,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,20/Feb/19 1:28 AM,20/Feb/19 5:36 AM,28/Oct/23 3:05 AM,20/Feb/19 5:36 AM,,,,,,,,,,fabric-quality,,,,,0,,,,,"To support RAFT test, PTE needs an option to have number of orderers participate in the transactions.",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00chj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"20/Feb/19 1:49 AM;dongming;https://gerrit.hyperledger.org/r/#/c/29380/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Typo in Writing Your First Application tutorial,FAB-14252,37809,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Done,yuki-kon,balazsprehoda,balazsprehoda,20/Feb/19 2:52 AM,16/Apr/19 1:09 AM,28/Oct/23 3:05 AM,16/Apr/19 1:09 AM,,,,,,,,,,,,,,,0,,,,,"Under [Querying the ledger|https://hyperledger-fabric.readthedocs.io/en/release-1.4/write_first_app.html#querying-the-ledger], a line of code is not displayed due to a missing empty line after .. code:: bash (and it is also doubled):

!image-2019-02-19-18-52-04-427.png!

!image-2019-02-19-18-51-11-223.png!",,balazsprehoda,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Feb/19 2:51 AM;balazsprehoda;image-2019-02-19-18-51-11-223.png;https://jira.hyperledger.org/secure/attachment/16840/image-2019-02-19-18-51-11-223.png","20/Feb/19 2:52 AM;balazsprehoda;image-2019-02-19-18-52-04-427.png;https://jira.hyperledger.org/secure/attachment/16839/image-2019-02-19-18-52-04-427.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00chr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),balazsprehoda,yuki-kon,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Apr/19 1:48 AM;yuki-kon;CR is posted here. [https://gerrit.hyperledger.org/r/#/c/30778/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to create channel config transaction for channel creation with latest configtxgen,FAB-14253,37811,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,suryalnvs,suryalnvs,20/Feb/19 5:08 AM,05/Mar/19 9:12 AM,28/Oct/23 3:05 AM,20/Feb/19 7:19 AM,v2.0.0,,,,,v1.4.1,v2.0.0,,,fabric-tools,,,,,0,quality,,,,"When creating the channel config transaction with etcdraft as ordererType, getting the following error: 
{code:java}
configtxgen -profile OrgChannel -channelID testorgschannel1 -outputCreateChannelTx ./testorgschannel1.tx
2019-02-19 13:47:59.939 EST [common.tools.configtxgen] main -> INFO 001 Loading configuration
2019-02-19 13:47:59.992 EST [common.tools.configtxgen.localconfig] completeInitialization -> INFO 002 orderer type: etcdraft
2019-02-19 13:47:59.992 EST [common.tools.configtxgen.localconfig] Load -> INFO 003 Loaded configuration: /home/ibmadmin/raft/cello/src/operator-dashboard/agent/ansible/vars/bc1st/fabric/configtx.yml
2019-02-19 13:48:00.074 EST [common.tools.configtxgen.localconfig] completeInitialization -> INFO 004 orderer type: etcdraft
2019-02-19 13:48:00.075 EST [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 005 Loaded configuration: /home/ibmadmin/raft/cello/src/operator-dashboard/agent/ansible/vars/bc1st/fabric/configtx.yml
2019-02-19 13:48:00.075 EST [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 006 Generating new channel configtx
2019-02-19 13:48:00.075 EST [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 007 Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
2019-02-19 13:48:00.080 EST [common.tools.configtxgen.encoder] NewChannelGroup -> WARN 008 Default policy emission is deprecated, please include policy specifications for the channel group in configtx.yaml
2019-02-19 13:48:00.080 EST [common.tools.configtxgen] main -> FATA 009 Error on outputChannelCreateTx: config update generation failure: could not turn parse profile into channel group: could not create orderer group: cannot marshal metadata for orderer type etcdraft: cannot load client cert for consenter orderer1st-orgc:7050: open -----BEGIN CERTIFICATE-----
MIICGDCCAb6gAwIBAgIRAIkHvkyw5q7RObxE8w4swlYwCgYIKoZIzj0EAwIwXjEL
MAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBG
cmFuY2lzY28xDTALBgNVBAoTBG9yZ2MxEzARBgNVBAMTCnRsc2NhLm9yZ2MwHhcN
MTkwMjE5MTgzNzAwWhcNMjkwMjE2MTgzNzAwWjBPMQswCQYDVQQGEwJVUzETMBEG
A1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNU2FuIEZyYW5jaXNjbzETMBEGA1UE
AwwKQWRtaW5Ab3JnYzBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABDqoQudMP9Sa
jiTnXPzW6oV1AN6EOdm7lwoZgK9P5IL5XbRTgwkm/z0vWxx+nbmorMR7kn+jvVt9
9hCSvLYNvBmjbDBqMA4GA1UdDwEB/wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcD
AQYIKwYBBQUHAwIwDAYDVR0TAQH/BAIwADArBgNVHSMEJDAigCDule6ZvQPIJVa3
8vPjzmGsearSU+X763/CKhwUczkeAjAKBggqhkjOPQQDAgNIADBFAiEA6xjnL/a+
3BTqQdaed7d2djYGnjbTpWrgPvXIQvJKwcsCIBycegtYJ+LlYIc0PvIoS7Q1bVGw
QMiw6mvkBgU4CdMk
-----END CERTIFICATE-----
: file name too long
{code}",,jyellick,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00chz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,suryalnvs,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Feb/19 5:10 AM;jyellick;https://gerrit.hyperledger.org/r/c/29384/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve private data collection upgrade and reconciliation doc,FAB-14254,37812,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,20/Feb/19 5:21 AM,27/Feb/19 1:54 PM,28/Oct/23 3:05 AM,27/Feb/19 1:54 PM,,,,,,v1.4.1,v2.0.0,,,,,,,,0,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ci7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Feb/19 5:22 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/29385/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix broken configtxgen outputAnchorPeersUpdate,FAB-14255,37813,37656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,20/Feb/19 5:24 AM,28/Feb/19 1:51 AM,28/Oct/23 3:05 AM,28/Feb/19 1:51 AM,,,,,,,,,,,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cif:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE adds norderers option to gen_cfgInputs and runScaleTraffic,FAB-14256,37814,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,20/Feb/19 5:36 AM,09/Mar/19 2:53 AM,28/Oct/23 3:05 AM,09/Mar/19 2:53 AM,,,,,,,,,,fabric-quality,,,,,0,,,,,Add norderers option to gencfgInputs.sh and runScaleTraffic.sh,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00cin:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"20/Feb/19 6:13 AM;dongming;https://gerrit.hyperledger.org/r/#/c/29387/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
in proc controller and registry lack serialization,FAB-14257,37815,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,20/Feb/19 6:55 AM,01/Mar/19 12:10 AM,28/Oct/23 3:05 AM,01/Mar/19 12:10 AM,,,,,,,,,,fabric-peer,,,,,0,ipm,,,,map is used and mutated willy-nilly but no locking,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00civ:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Feb/19 1:21 PM;sykesm;remote:   https://gerrit.hyperledger.org/r/29396 [FAB-14257] mutex around inproccontroller maps
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use sdk-py to update the channel config,FAB-14259,37820,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,baohua,baohua,20/Feb/19 3:04 PM,20/Feb/19 3:05 PM,28/Oct/23 3:05 AM,20/Feb/19 3:05 PM,,,,,,,,,,,,,,,0,,,,,Change channel configurations like ordering service or capabilities.,,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cjz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
How to insert documents to couchdb in bulk by chaincode,FAB-14261,37825,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Invalid,,CoreyLin,CoreyLin,20/Feb/19 6:52 PM,20/Feb/19 8:57 PM,28/Oct/23 3:05 AM,20/Feb/19 8:57 PM,,,,,,,,,,,,,,,0,,,,,"Hi Fabric experts:

How to insert/write documents to couchdb in bulk by chaincode? It seems that the chaincode shim library([https://godoc.org/github.com/hyperledger/fabric/core/chaincode/shim)] doesn't have such API.

For reading documents, it seems that there is an API named ""GetQueryResult""([https://godoc.org/github.com/hyperledger/fabric/core/chaincode/shim#ChaincodeStub.GetQueryResult]). In the string parameter ""query"", we can construct bulk get request.

But for inserting/writing documents, is there any bulk API for chaincode? Thanks in advance.:)",,C0rWin,CoreyLin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cl3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,CoreyLin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Feb/19 8:56 PM;C0rWin;This is not really a Task, Bug or Improvement, therefore I'd suggest to open it as a question on StackOverflow as it seems more appropriate platform for Q & A. Jira is more about issue planing and tracking, reporting bugs or feature requests.
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
How to refuse endorsing transactions as an organization,FAB-14262,37826,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Invalid,,CoreyLin,CoreyLin,20/Feb/19 6:56 PM,20/Feb/19 8:57 PM,28/Oct/23 3:05 AM,20/Feb/19 8:57 PM,,,,,,,,,,,,,,,0,,,,,"Hello Fabric experts:

I always have a theoretical and general question in my mind: let's assume that there are two orgs: org1 and org2. And each org has one peer. If the endorsement policy is set to AND(org1, org2), which means that every transaction needs the endorsement from both org1 and org2's peer.
Let's assume a scenario: org1 and org2 have already endorsed 5 transactions. But some day, let's say, org1 doesn't want to endorse any transaction at all, which means that for every new incoming transaction(e.g. 6th transaction), org1 wants to say no, and refuses to endorse the new transaction. So my question is:
How can org1 refuse endorsing new incoming transaction? In more vivid words, as an org, how to say no? Thanks in advance.:)",,C0rWin,CoreyLin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00clb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,CoreyLin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Feb/19 8:56 PM;C0rWin;This is not really a Task, Bug or Improvement, therefore I'd suggest to open it as a question on StackOverflow as it seems more appropriate platform for Q & A. Jira is more about issue planing and tracking, reporting bugs or feature requests.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
De-vipererize gossip pull engine,FAB-14264,37828,32906,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,20/Feb/19 7:47 PM,06/Apr/19 5:37 PM,28/Oct/23 3:05 AM,20/Feb/19 11:55 PM,,,,,,,,,,fabric-gossip,,,,,0,hygiene,,,,"Inject configuration of pull engine via struct, and not through viper getter invocations.

Have the viper config at higher levels.",,hagarm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00clr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Feb/19 11:24 PM;hagarm;https://gerrit.hyperledger.org/r/#/c/29402/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
De-vipererize gossip comm,FAB-14265,37839,32906,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,20/Feb/19 11:24 PM,06/Apr/19 5:37 PM,28/Oct/23 3:05 AM,25/Feb/19 5:54 PM,,,,,,,,,,fabric-gossip,,,,,0,hygiene,,,,"Inject configuration of comm via struct, and not through viper getter invocations.

Have the viper config at higher levels.",,hagarm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cnj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Feb/19 11:27 PM;hagarm;https://gerrit.hyperledger.org/r/#/c/29408/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Increase peer channel creation timeout to reduce integration test flakiness,FAB-14266,37841,36295,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,guoger,guoger,guoger,21/Feb/19 12:45 AM,25/Feb/19 10:34 PM,28/Oct/23 3:05 AM,25/Feb/19 10:34 PM,,,,,,,,,,fabric-orderer,,,,,0,,,,,"Default raft tick interval is increased to 500ms in FAB-13845, and default ElectionTimeout becomes 5s.

Actual random election timeout is then 5s - 10s

in worst case, node starts election 10s after channel is created, at which point peer cli timeout would expire

we could increase {{peer channel create}} timeout to 15s to reduce the flakiness caused by this.

However, this is just a temporary workaround, until FAB-14025 is tackled",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cnz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Feb/19 12:47 AM;guoger;https://gerrit.hyperledger.org/r/29414;;;","25/Feb/19 10:34 PM;guoger;With raft lib version being bumped, the probability of this happening is fairly low, and we can backlog this for now.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
CL2.0: Endorsement policy failure returning status 200 for invoke,FAB-14267,37843,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,latitiah,latitiah,21/Feb/19 12:59 AM,30/Mar/19 7:09 AM,28/Oct/23 3:05 AM,30/Mar/19 7:09 AM,,,,,,,,,,,,,,,0,,,,,"When an ""endorsement policy failure"" occurs. The error is stated in the stderr, but it is then followed by an ""invoke successful"" message and given a 200 status. When the endorsement policy fails, the status should not be 200.
",,latitiah,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00cof:",,,,Unset,Unset,,,,,,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,wlahti,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Mar/19 4:14 AM;wlahti;https://gerrit.hyperledger.org/r/c/30290/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
BYFN and service discovery can't be used outside of Docker,FAB-14268,37844,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sstone1,sstone1,sstone1,21/Feb/19 1:48 AM,24/Feb/19 11:59 PM,28/Oct/23 3:05 AM,23/Feb/19 1:18 AM,,,,,,v1.4.1,v2.0.0,,,fabric-samples,,,,,0,,,,,"The BYFN has two organisations with two peers, with the following port mappings:

* peer0.org1.example.com 7051 (external) 7051 (internal)
* peer1.org1.example.com 8051 (external) 7051 (internal)
* peer0.org2.example.com 9051 (external) 7051 (internal)
* peer1.org2.example.com 10051 (external) 7051 (internal)

Service discovery returns the following end points:

peer0.org1.example.com:7051
peer1.org1.example.com:7051
peer0.org2.example.com:7051
peer1.org2.example.com:7051

This works great when your application is inside Docker, because those hostnames/ports work as expected.

However, when your application is outside Docker this does not work.

Problem 1 is that the hostnames don't resolve; however, the Node.js SDK already allows you to override hostnames returned by service discover to localhost for this exact reason. Using this option gives you:

localhost:7051
localhost:7051
localhost:7051
localhost:7051

Problem 2 then is that the ports now conflict; service discovery doesn't know about the external port numbers!

We could change CORE_PEER_GOSSIP_EXTERNALENDPOINT to have the external port numbers, but then applications inside Docker wouldn't work.

I propose that we change the peer configuration for each container so that the internal peer ports and the external peer ports are the same:

* peer0.org1.example.com 7051 (external) 7051 (internal)
* peer1.org1.example.com 8051 (external) 8051 (internal)
* peer0.org2.example.com 9051 (external) 9051 (internal)
* peer1.org2.example.com 10051 (external) 10051 (internal)

Then service discovery will always return the right port, regardless of whether or not the application is running outside or inside Docker, and then the ""as localhost"" override will deal with the hostname problem.",,denyeart,sstone1,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00con:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sstone1,yacovm,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/19 1:54 AM;yacovm;Make sense to me... thanks for this!;;;","22/Feb/19 11:42 PM;sstone1;https://gerrit.hyperledger.org/r/#/c/29481/;;;","23/Feb/19 1:18 AM;denyeart;[~sstone1] Merged. I assume you tested with SDK client :). Do you want to cherry pick to release-1.4 as well, since that's the target for current users?;;;","24/Feb/19 7:16 PM;sstone1;Cherry picked and merged into release-1.4: https://gerrit.hyperledger.org/r/#/c/29496/;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Stability of raft network with 27 orderers all in 27 channels,FAB-14269,37845,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,21/Feb/19 1:55 AM,24/Jul/19 3:20 AM,28/Oct/23 3:05 AM,30/Apr/19 5:54 AM,,,,,,v1.4.1,v2.0.0,,,fabric-quality,,,,,0,raft,,,,"h2. Objective

This objective of this test is to ensure the stability of a network with large number of orderers under various scenarios. The test consists of a set of test from no traffic/no channel to heavy traffic with 108 orderers and 108 channels (or, at least 20 channels).
h2. Setup

Same setup as in FAB-13601, with the following differences:
 # Use k8s cluster with many small hosts, 2 CPU X 4 GB RAM, each with one pod / container / orderer.
 # Create a k8s network with 27 orderers in the system channel, and minimum 3 peers with 1 peer/org.
 # Create 27 channels, with all orderers in all channels, with all the peers joining all channels after each one is created.
 # default values for batchSize.maxMessageCount(500), PreferredMaxBytes(2 MB), EtcdRaft.Options.MaxInflightBlocks(5), EtcdRaft.Options.SnapshotIntervalSize(20MB), and local disk (no PVC)
 # logging level set to {{info}}
 # Connect a logDna server, and sysdig server, and run prometheus to monitor fabric metrics

h2. Inputs
 # bring up network with 27 orderers in the orderersystemchannel only, then examine if the network is stable after 1 hour pause
 # Orderer admin sends channel config update transactions to one orderer to create 27 channels
 # medium traffic: send 27 threads with 100 tx per thread to all channels and all orderers: one thread targets one channel and one orderer
 # heavy traffic: send 108 threads with 10000 tx per thread, total 1,080,000 tx
 # All transactions will be sent using PTE with Constant mode, i.e. sending next transaction as soon as the previous one is sent to and ACK'd received by the ingress orderer.

h2. Expectations
 # No errors in the logs of peers and orderers.
 # No failures or errors reported by PTE.
 # All transaction events are received by PTE.
 # TPS (Transactions Per Second) overall rates will be provided for the test with 10000 transactions",,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14230,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|hzwqro:c",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"First attempt encountered problems after about 30 minutes. Many (still need to confirm if all) orderers restarted. kubectl indicates error code 137, with reason = ""Error"". Nothing of interest was observed in the metrics, nor in the logs. Still investigating, including a possible theory of inodes exhaustion. May retry with DEBUG logs enabled in the orderers.

Launch 27 orderers, create 15 channels, run traffic on all 15 channels with 45 threads, each threads sends 10,000 tx, total incoming TPS is 100, the test passed.

Launch 27 orderer, create 27 channels, run traffic on all 27 channels with 54 threads, each thread sends 10,000 tx, total incoming TPS is 67, the test passed.  If increase the incoming TPS to 80, the test failed with insufficient memory when k8s crashed the orderer. Future test should restrict memory limit in the orderer to be less than the total host memory.",System Test,,(Please add usage information),dongming,scottz,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Only approve the chaincode definition for each org once,FAB-14270,37847,37348,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,21/Feb/19 2:39 AM,07/Mar/19 4:24 PM,28/Oct/23 3:05 AM,07/Mar/19 4:24 PM,,,,,,,,,,,,,,,0,,,,,"With the initial version of the integration tests, the tests are coded to have each peer endorse the ""ApproveChaincodeDefinitionForMyOrg"" step, even though this should be not required. 

This task will be used to ensure that we only approve the chaincode definition once per org in the integration tests and then check that the block has been gossiped to the other peers. ",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cp3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/19 3:18 AM;wlahti;https://gerrit.hyperledger.org/r/c/29382;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Consistent fails in BYFN test to generate channel configuration as no policies are defined in channel,FAB-14271,37848,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,jyellick,sambhavdutt,sambhavdutt,21/Feb/19 3:48 AM,30/Jan/20 3:37 AM,28/Oct/23 3:05 AM,22/Feb/19 9:57 PM,v2.0.0,,,,,v2.0.0,,,,fabric-build,,,,,0,ci-failure,,,,"BYFN test has been failing consistently as outputChannelCreateTx could not generate the default config template as there are no policies defined, 

*Consistent:* Yes
*Branch:* master
*Platform:* s390x, x86_64

*Error Snippet:*

{code:java}
/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-samples/first-network/configtx.yaml
13:15:27 2019-02-19 18:15:27.762 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 005 Generating new channel configtx
13:15:27 2019-02-19 18:15:27.762 UTC [common.tools.configtxgen] main -> FATA 006 Error on outputChannelCreateTx: could not generate default config template: error parsing configuration: error adding policies to channel group: no policies defined
13:15:27 + res=1
13:15:27 + set +x
13:15:27 Failed to generate channel configuration transaction...
{code}

*Build Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/4380/",,denyeart,jyellick,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,35f696615b5b965c02d9c7fe13627275ed4be9da,Unset,No,,,"1|i00cpb:","In Fabric v1.x configtxgen would create default policies if they were omitted in configtx.yaml, but this behavior was deprecated in v1.2.  In v2.0, configtxgen no longer creates default policies, and they must be explicitly defined in configtx.yaml.",Yes,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/19 4:10 AM;jyellick;In review via https://gerrit.hyperledger.org/r/29421;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor lifecycle package CLI and tests,FAB-14272,37849,37656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,21/Feb/19 5:05 AM,29/Mar/19 10:49 PM,28/Oct/23 3:05 AM,29/Mar/19 10:49 PM,,,,,,,,,,,,,,,0,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cpj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/19 5:06 AM;wlahti;[https://gerrit.hyperledger.org/r/c/29422|https://gerrit.hyperledger.org/r/c/29416];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Instructions on channel-ID.block doc update,FAB-14273,37850,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,pandrejko,rameshthoomu,rameshthoomu,21/Feb/19 5:11 AM,06/Mar/19 5:20 AM,28/Oct/23 3:05 AM,06/Mar/19 5:20 AM,,,,,,,,,,fabric-docs,,,,,0,,,,,"../bin/configtxgen -profile TwoOrgsOrdererGenesis {color:#FF0000}-channelID byfn-sys-channel{color} -outputBlock ./channel-artifacts/genesis.block -- *genesis block*

export {color:#FF0000}CHANNEL_NAME=mychannel{color} && ../bin/configtxgen -profile TwoOrgsChannel -outputCreateChannelTx ./channel-artifacts/channel.tx -channelID $CHANNEL_NAME -- *Channel Creation*

In below doc content, instead of <channel-ID.block> I think the instruction has to modify to{{ <CHANNEL_NAME.block>}}

!Screen Shot 2019-02-20 at 3.05.28 PM.png!",,pandrejko,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Feb/19 5:05 AM;rameshthoomu;Screen Shot 2019-02-20 at 3.05.28 PM.png;https://jira.hyperledger.org/secure/attachment/16845/Screen+Shot+2019-02-20+at+3.05.28+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cpr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,rameshthoomu,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.3,release-1.4,release-2.5,release-2.4,release-1.1,main,release-1.2,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/19 5:49 AM;pandrejko;This is in BYFN line 612

Change:
This command returns a genesis block - ``<channel-ID.block>`` - which we will use to join the channel.
It contains the configuration information specified in ``channel.tx`` If you have not
made any modifications to the default channel name, then the command will return you a
proto titled ``mychannel.block``.
to
This command returns a genesis block - ``<CHANNEL_NAME.block>`` - which we will use to join the channel.
It contains the configuration information specified in ``channel.tx`` If you have not
made any modifications to the default channel name, then the command will return you a
proto titled ``mychannel.block``.

 ;;;","21/Feb/19 7:28 AM;pandrejko;also here in the same doc. Same change
```# By default, this joins ``peer0.org1.example.com`` only
# the <channel-ID.block> was returned by the previous command
# if you have not modified the channel name, you will join with mychannel.block
# if you have created a different channel name, then pass in the appropriately named block

peer channel join -b mychannel.block```;;;","05/Mar/19 5:28 AM;pandrejko; 

1.1 https://gerrit.hyperledger.org/r/#/c/29796/

1.2 https://gerrit.hyperledger.org/r/#/c/29795/

1.3 https://gerrit.hyperledger.org/r/#/c/29794/

1.4 [https://gerrit.hyperledger.org/r/#/c/29792/]

master: [https://gerrit.hyperledger.org/r/29791];;;",,,,,,,,,,,,,,,,,,,,,,,,,,
No raft leader after a series of restarts of each orderer randomly in the application channels ,FAB-14274,37851,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,guoger,suryalnvs,suryalnvs,21/Feb/19 5:46 AM,09/Aug/19 12:36 AM,28/Oct/23 3:05 AM,25/Feb/19 3:13 AM,v2.0.0,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,raft,,,,"h2. Observed:

After a series of restarts of each orderer, no raft leader is being elected on all application channels and all transactions are getting rejected with the following:
{code:java}
Rejecting broadcast of normal message from 10.191.5.71:1208 with SERVICE_UNAVAILABLE: rejected by Order: no Raft leader
{code}
After restart of orderer1st at 1.39pm which was the leader on testorgschannel2 until then, no leader is elected on testorgschannel2 after the restart.

 Prometheus URL: [http://169.62.28.13:32522/graph]  

Logs URL: [https://app.us-south.logging.cloud.ibm.com/87cd83a6af/logs/view]

timestamp query for full run is today 11.30am to today 2.00pm

 ",,guoger,joaquimpedrooliveira,kchristidis,suryalnvs,warm3snow,yacovm,,,,,,,,,,,,,,,FAB-14220,FAB-16258,,,,,,,,,,,,,,,,,,,"24/Feb/19 6:39 AM;suryalnvs;FAB-14220-orderers-goroutines-0222.zip;https://jira.hyperledger.org/secure/attachment/16857/FAB-14220-orderers-goroutines-0222.zip","21/Feb/19 11:32 AM;suryalnvs;FAB-14220-orderers-goroutines-logs.zip;https://jira.hyperledger.org/secure/attachment/16853/FAB-14220-orderers-goroutines-logs.zip","21/Feb/19 5:53 AM;suryalnvs;testorgschannel1-leader-graph.png;https://jira.hyperledger.org/secure/attachment/16850/testorgschannel1-leader-graph.png","21/Feb/19 5:53 AM;suryalnvs;testorgschannel2-leader-graph.png;https://jira.hyperledger.org/secure/attachment/16851/testorgschannel2-leader-graph.png","21/Feb/19 5:53 AM;suryalnvs;testorgschannel3-leader-graph.png;https://jira.hyperledger.org/secure/attachment/16852/testorgschannel3-leader-graph.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,5937ae4,Unset,No,,,"1|i00cpz:",,,,Unset,Unset,,,,"1. Start traffic by following instructions in FAB-14220
2. After initializing the traffic, started the chaos-kube to bounce orderer pods after every 5minutes and minimumAge as 10m, so it will bounce each orderer one at a time randomly at every 5mins.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,joaquimpedrooliveira,kchristidis,suryalnvs,warm3snow,yacovm,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/19 6:30 AM;yacovm;can you perhaps attach a dump of the goroutines for each orderer via KILL -SIGUSR1 ?;;;","21/Feb/19 7:08 AM;suryalnvs;[~yacovm] when should I run KILL -SIGUSR1? The test ended at 2pm EST, the network is up and running even now. Is it ok if I add the goroutines from the orderers from now (FYI.. restarted orderers multiple times after the issue was seen initially)? or you want me get the goroutines from orderers during the reproduce of the issue?;;;","21/Feb/19 7:50 AM;yacovm;if you say that there is no leader (and you can't send transactions or pull blocks) then yeah - getting the goroutines will help :);;;","21/Feb/19 11:26 AM;guoger;I don't see any logs via the url provided. is it still available? [~suryalnvs];;;","22/Feb/19 1:55 AM;yacovm;The attached logs don't have the step logger turned on DEBUG... can you please turn the step logger to DEBUG so we can see that messages are [sent|https://github.com/hyperledger/fabric/blob/master/orderer/common/cluster/comm.go#L493] and [received|https://github.com/hyperledger/fabric/blob/master/orderer/common/cluster/service.go#L81]?;;;","24/Feb/19 6:39 AM;suryalnvs;Reran FAb-220 test with step logging level set to debug and able to reproduce the issue FAB-14274 . Added goroutines from the latest run.

logs url: [https://app.us-south.logging.cloud.ibm.com/87cd83a6af/logs/view]
Timestamps to look for logs (rerun): from 02/22 10:16am EST
Instance: regression-lab;;;","24/Feb/19 11:46 PM;guoger;Have a fix here https://gerrit.hyperledger.org/r/29513, going to update status here after it's verified by rerunning chaos test;;;","25/Feb/19 2:33 AM;suryalnvs;Reran the test with [~guoger]'s fix and able to see leader getting elected even after several restarts(more than 20 restarts of each orderer) and unable to reproduce issue with new fix when ran FAB-14220. Previously used to reproduce the issue ""no raft leader"" situation after minimum of 5 restarts of each orderer. 

Logs URL: [https://app.us-south.logging.cloud.ibm.com/87cd83a6af/logs/view]
 Timestamps to look for logs (rerun): from 02/24 10:27am EST
 Instance: regression-lab

Metrics URL: [http://169.62.28.13:32522/graph];;;","25/Feb/19 3:10 AM;kchristidis;Sweet! Thank you both for the fix and the update.;;;",,,,,,,,,,,,,,,,,,,,
Make protos is broken on current master when running in alpine based buildenv container,FAB-14275,37852,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,21/Feb/19 6:32 AM,20/Mar/19 3:19 PM,28/Oct/23 3:05 AM,20/Mar/19 3:19 PM,v2.0.0,,,,,v2.0.0,,,,fabric-build,,,,,0,build,,,,"When our build environment was based on ubuntu, we were using the GNU. coreutils with lots of extra-fancy helper thingies available to us that don't exist in the ""standard"" unix core utility set that's available in busy box or some BSD variants (eh, macOS - not that it matters here).

The protobuf compilation script that we use in fabric uses {{dirname}} with multiple paths as arguments and this does not work in busy box.

{code}
++ for dir in $PROTO_ROOT_DIRS
+++ echo '-path /go/src/github.com/hyperledger/fabric/protos -prune -o '
++ find /go/src/github.com/hyperledger/fabric -path /go/src/github.com/hyperledger/fabric/protos -prune -o -path /go/src/github.com/hyperledger/fabric/vendor -prune -o -path /go/src/github.com/hyperledger/fabric/.build -prune -o -path /go/src/github.com/hyperledger/fabric/core/chaincode/shim/java -prune -o -name '*.proto' -exec readlink -f '{}' ';'
+ ROOTLESS_PROTO_FILES='/go/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb/msgs/msgs.proto
/go/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/stateleveldb/msgs/storage.proto
/go/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/pvtdata_key.proto
/go/src/github.com/hyperledger/fabric/core/ledger/pvtdatastorage/persistent_msgs.proto
/go/src/github.com/hyperledger/fabric/core/comm/testdata/grpc/test.proto
/go/src/github.com/hyperledger/fabric/common/tools/protolator/testprotos/sample.proto
/go/src/github.com/hyperledger/fabric/common/grpclogging/testpb/echo.proto
/go/src/github.com/hyperledger/fabric/common/grpcmetrics/testpb/echo.proto
/go/src/github.com/hyperledger/fabric/idemix/idemix.proto'
++ dirname /go/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb/msgs/msgs.proto /go/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/stateleveldb/msgs/storage.proto /go/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/pvtdata_key.proto /go/src/github.com/hyperledger/fabric/core/ledger/pvtdatastorage/persistent_msgs.proto /go/src/github.com/hyperledger/fabric/core/comm/testdata/grpc/test.proto /go/src/github.com/hyperledger/fabric/common/tools/protolator/testprotos/sample.proto /go/src/github.com/hyperledger/fabric/common/grpclogging/testpb/echo.proto /go/src/github.com/hyperledger/fabric/common/grpcmetrics/testpb/echo.proto /go/src/github.com/hyperledger/fabric/idemix/idemix.proto
++ sort
++ uniq
BusyBox v1.29.3 (2019-01-24 07:45:07 UTC) multi-call binary.

Usage: dirname FILENAME

Strip non-directory suffix from FILENAME
+ ROOTLESS_PROTO_DIRS=
{code}

We need to fix the script (and set the pipefail option).",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cq7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/19 7:27 AM;sykesm;remote:   https://gerrit.hyperledger.org/r/29428 [FAB-14275] fix compile_protos.sh
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use Ginkgo and Gomega to drive unit tests,FAB-14276,37853,36696,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bpbuch,bpbuch,bpbuch,21/Feb/19 6:34 AM,20/Mar/19 11:16 PM,28/Oct/23 3:05 AM,20/Mar/19 11:16 PM,,,,,,,,,,,,,,,0,,,,,"The unit tests should match the patterns created in the Fabric project. For example, [chaincode|https://github.com/hyperledger/fabric/tree/master/core/chaincode] uses the chaincode_test package and Ginkgo/Gomega to drive unit tests.  Private functions can still be tested using the same package for test if necessary. ",,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cqf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Mar/19 12:12 AM;bpbuch;https://gerrit.hyperledger.org/r/#/c/29895/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add locking to core/chaincode/persistence,FAB-14277,37854,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,wlahti,wlahti,21/Feb/19 7:18 AM,09/May/19 8:19 PM,28/Oct/23 3:05 AM,09/May/19 8:19 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00cqn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
etcdraft Flaky UT: lagged node can catch up using snapshot,FAB-14278,37855,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,21/Feb/19 11:05 AM,19/Mar/19 7:57 PM,28/Oct/23 3:05 AM,22/Feb/19 8:41 PM,,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/9147/consoleFull,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13371,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cqv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/19 11:09 AM;guoger;https://gerrit.hyperledger.org/r/c/29431/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Incorrect fabric_version prometheus metric comes form orderer,FAB-14280,37857,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,mastersingh24,fedyiv,fedyiv,21/Feb/19 5:01 PM,24/Feb/19 6:06 AM,28/Oct/23 3:05 AM,23/Feb/19 11:54 PM,,,,,,v1.4.1,v2.0.0,,,,,,,,0,,,,,"Hello!

I have fabric 1.4.0 network and when Operational Service is switched on for peers and orderers *fabric_version* metric is incorrect for orderer. It does not have *version* label.

 

Expected result is that it should show actual fabric version instead of being empty

!image-2019-02-21-10-56-36-597.png!",,fedyiv,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Feb/19 4:56 PM;fedyiv;image-2019-02-21-10-56-36-597.png;https://jira.hyperledger.org/secure/attachment/16854/image-2019-02-21-10-56-36-597.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00crb:",,,,Unset,Unset,,,,"1.  Ensure operational service is activated in orderer configuration and set it to prometheus mode
2. Open http://orderer.example.com:PORT/metrics
3. Locate fabric_version metric and check is is in following form

# HELP fabric_version The active version of Fabric.
# TYPE fabric_version gauge
fabric_version{version=""""} 1
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),fedyiv,mastersingh24,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Feb/19 9:05 PM;mastersingh24;1.4.1 - https://gerrit.hyperledger.org/r/29501
master -  https://gerrit.hyperledger.org/r/29502;;;","24/Feb/19 6:06 AM;mastersingh24;Thanks for reporting this [~fedyiv].
This fix is in both master (2.0.0) and release-1.4 (will ship in 1.4.1);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Support Arbitrary Precision for Token Quantity,FAB-14281,37859,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,21/Feb/19 6:35 PM,28/Feb/19 10:09 PM,28/Oct/23 3:05 AM,26/Feb/19 6:36 PM,,,,,,,,,,,,,,,0,,,,,"Currently fabtoken supports uint64 type for quantity. In certain use-cases this poses a limit. 

This story proposes to enhance fabtoken to be able to handle arbitrary precision numbers, precision that can be customised during initialisation of fabtoken (via lifyccile).

The quantity field will be converted from uint64 to string. Supported encodings will be all provided by [https://golang.org/pkg/math/big/#Int.SetString.] Therefore, a client invoking the prover peer to assemble a token transaction, can use any format supported by [https://golang.org/pkg/math/big/#Int.SetString.] The prover peer will use the hex representation to represent quantities in the token transaction. Though, quantities in token transactions can be represented by using any format supported by [https://golang.org/pkg/math/big/#Int.SetString.]

This is also the approach used by Ethereum.

 ",,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i00crr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/19 6:42 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/29356/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
clean up prover.proto,FAB-14282,37860,37248,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,KaoutarEL,KaoutarEL,KaoutarEL,21/Feb/19 6:42 PM,12/Mar/19 5:52 PM,28/Oct/23 3:05 AM,12/Mar/19 5:52 PM,,,,,,,,,,,,,,,0,,,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00crz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Feb/19 1:03 AM;KaoutarEL;https://gerrit.hyperledger.org/r/#/c/29443/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
operational documentation,FAB-14284,37862,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,KaoutarEL,KaoutarEL,KaoutarEL,21/Feb/19 6:55 PM,03/Dec/19 3:16 AM,28/Oct/23 3:05 AM,09/Apr/19 11:20 PM,v2.0.0,,,,,,,,,fabric-docs,,,,,0,,,,,"

Fabtoken operational documentation includes:

*     A description of what is FabToken
*     A description of how to use FabToken
*     A description of the end-to-end flows

",,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11144,,,No,,Unset,No,,,"1|i00csf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/19 6:58 PM;KaoutarEL;https://gerrit.hyperledger.org/r/#/c/29266/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
conceptual documentation,FAB-14285,37863,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,21/Feb/19 6:55 PM,03/Dec/19 3:16 AM,28/Oct/23 3:05 AM,14/Mar/19 6:13 AM,,,,,,,,,,fabric-docs,,,,,0,,,,,,,KaoutarEL,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11144,,,No,,Unset,No,,,"1|i00csn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Mar/19 6:13 AM;pandrejko;Covered by FAB-14284;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
tutorial,FAB-14286,37864,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,21/Feb/19 6:55 PM,03/Dec/19 3:16 AM,28/Oct/23 3:05 AM,14/Mar/19 6:13 AM,,,,,,,,,,fabric-docs,,,,,0,,,,,,,KaoutarEL,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11144,,,No,,Unset,No,,,"1|i00csv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Mar/19 6:12 AM;pandrejko;Covered by FAB-14284;;;","14/Mar/19 6:13 AM;pandrejko;Covered by FAB-14284;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Invalid formatted token transactions should be rejected,FAB-14287,37865,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bur,angelo.decaro,angelo.decaro,21/Feb/19 7:35 PM,11/Mar/19 10:51 PM,28/Oct/23 3:05 AM,11/Mar/19 10:51 PM,,,,,,,,,,,,,,,0,,,,,,,angelo.decaro,bur,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14001,,,No,,Unset,No,,,"1|i00ct3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,bur,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/19 10:51 PM;bur;https://gerrit.hyperledger.org/r/#/c/29436/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
BlockCommitHash (finalize logging),FAB-14288,37869,,Story,In CR Review,FAB,Fabric,software,denyeart,,,Medium,,denyeart,Senthil1,Senthil1,21/Feb/19 9:46 PM,27/Jan/20 11:39 PM,28/Oct/23 3:05 AM,,,,,,,v1.1.2,v1.4.2,v2.0.0,,fabric-ledger,,,,,0,,,,,"To ensure that all peers are in a consistent state, we need a way to summarise the current state at each peer at a given block height. Toward this summarization of state, we introduce a BlockCommitHash per block which consists of
 # transaction validation code
 # updateBatch 
 # previous block's BlockCommitHash

Challenges:
 * Hash needs to be computed in a deterministic way
 * As previous block's hash is used (i.e., cumulative hashing), the starting block number must be same on all peers",,denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:4i",,,,No,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Nov/19 11:33 PM;denyeart;I'll look at the final log subtask.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deterministic Conversion of UpdateBatch to Bytes for Hash Computation ,FAB-14289,37870,37869,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,Senthil1,Senthil1,21/Feb/19 9:50 PM,01/Mar/19 4:00 AM,28/Oct/23 3:05 AM,01/Mar/19 4:00 AM,,,,,,v1.1.2,,,,,,,,,0,,,,,"The updateBatch consists 
 # publicUpdates
 # hashedUpdates
 # privateUpdates

As privateUpdates could be different on different peers, it should not be included in the constructed bytes. Only publicUpdates and hashedUpdates must be present. Further, we need to ensure that such computation is deterministic across peers. ",,denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ctr:",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Mar/19 4:00 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/29319/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Compute BlockCommitHash and Store it in the BlockStore,FAB-14290,37871,37869,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,21/Feb/19 9:53 PM,27/Feb/19 1:33 PM,28/Oct/23 3:05 AM,27/Feb/19 1:33 PM,,,,,,v1.1.2,,,,,,,,,0,,,,,"In the ledger coordinator, i.e., kvledger, we should retrieve the updateBatchBytes, transaction validation code and the previous BlockCommitHash to compute the current BlockCommitHash. ",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ctz:",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,release-1.1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
De-vipererize gossip election,FAB-14291,37873,32906,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,21/Feb/19 10:50 PM,06/Apr/19 5:37 PM,28/Oct/23 3:05 AM,26/Feb/19 4:39 PM,,,,,,,,,,fabric-gossip,,,,,0,hygiene,,,,"Inject configuration of election via struct, and not through viper getter invocations.

Have the viper config at higher levels.",,hagarm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cu7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Feb/19 12:30 AM;hagarm;https://gerrit.hyperledger.org/r/#/c/29437/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"isolate raft orderers, block 1-way or 2-way messaging, and reconnect",FAB-14293,37875,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,scottz,scottz,21/Feb/19 11:28 PM,24/Jul/19 5:49 AM,28/Oct/23 3:05 AM,24/Jul/19 5:49 AM,,,,,,v1.4.1,v2.0.0,,,fabric-quality,,,,,0,raft,,,,"Set up a raft network similar to FAB-14220, but using 3 orderers in 3 different IKS clusters, in different data center locations around the world. This would introduce natural delay/latency, and also allow stopping/starting individual orderers more easily, in different sequences (per FAB_14221).

Using a networking tool, or by modifying linux stack inside an orderer node, disconnect / partition one orderer from the others so it cannot receive msgs from them and they cannot receive messages from it. After awhile, with traffic running, rejoin it and observe it sync up again, catch up, and resume operations without hiccups.

One tool to consider using is [https://istio.io/] to connect, secure, control, and observe services. However, that may be a bit heavy.

Another way to block one-way communications or to fully partition (block 2-way comms) an orderer might be to edit the iptables. For example, find helpful ideas here: [https://www.howtogeek.com/177621/the-beginners-guide-to-iptables-the-linux-firewall/] 

A possibly better alternative might be to manage the network policies; refer to: [https://console.bluemix.net/docs/containers/cs_network_policy.html#network_policies]

Several possible testcase scenarios to try (and we might want to create some separate testtasks):
 # Fully isolate one orderer (non-leader) for 10 secs or a few minutes, and reconnect.
 # Fully isolate one orderer (non-leader), restart the leader to cause a leadership reelection among the other three, reconnect.
 # Fully isolate one orderer (leader) for 10 secs or a few minutes, observe the others elect a new leader; and then reconnect.
 # Block one-way communications FROM an orderer to the others. Try with a follower, and try with the leader. Examine how this might affect consensus. Reconnect full 2-way communications.
 # Block one-way communications TO an orderer from the others. Try with a follower, and try with the leader. Examine how this might affect consensus. Reconnect full 2-way communications. For instance what to look for: if it was the leader, then its heartbeats would continue to go out and reach the other orderers, and thus should prevent them from electing a new leader - but their responses would not reach the leader; since it would not be receiving responses, we would expect it to step down (and stop sending heartbeats, resulting in the others to start a new term election).

 ",,guoger,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14221,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|hzwqro:o",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),guoger,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Feb/19 11:36 PM;guoger;bq. 3. Partition one orderer (leader) for a few minutes, observe the others elect a new leader; and then rejoin.
also expect leader to step down as follower (return SERVICE_UNAVAILABLE: no raft leader), because it cannot reach quorum

bq. If it was the leader, then its heartbeats would continue to reach the other orderers, and I wonder if this would prevent them from electing a new leader? If so, then the network would effectively halt.
if leader does not receive heartbeat response from quorum for {{ElectionTimeout}}, it voluntarily steps down to follower.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor chaincode persistence for crash consistency,FAB-14294,37880,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,wlahti,wlahti,22/Feb/19 12:32 AM,26/Apr/19 10:07 PM,28/Oct/23 3:05 AM,26/Apr/19 10:07 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,The chaincode persistence code currently lacks crash consistency around the metadata and code package files. Note that the metadata (name/version) portion of chaincode persistence may go away by means of an upcoming JIRA. ,,manish-sethi,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00cuv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,wlahti,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Feb/19 12:40 AM;manish-sethi;Thanks [~wlahti] - Adding context to the discussion - https://gerrit.hyperledger.org/r/#/c/29243/10/core/chaincode/persistence/persistence.go@98;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
De-vipererize gossip privdata,FAB-14295,37881,32906,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,22/Feb/19 12:45 AM,06/Apr/19 5:37 PM,28/Oct/23 3:05 AM,25/Feb/19 11:55 PM,,,,,,,,,,fabric-gossip,,,,,0,hygiene,,,,"Inject configuration of privdata via struct, and not through viper getter invocations.

Have the viper config at higher levels.",,hagarm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cv3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Feb/19 12:52 AM;hagarm;https://gerrit.hyperledger.org/r/#/c/29442/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove metadata provider interface,FAB-14296,37882,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,22/Feb/19 1:17 AM,23/Feb/19 1:47 AM,28/Oct/23 3:05 AM,23/Feb/19 1:47 AM,,,,,,,,,,,,,,,0,ipm,ipm-planned,,,core/chaincode/platforms contains the metadata interface. This serves no purpose and should be removed.,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzzq7y:r",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Feb/19 1:47 AM;btl5037;https://gerrit.hyperledger.org/r/c/29447/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add chaincode upgrade to integration tests,FAB-14297,37883,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,22/Feb/19 1:21 AM,07/Mar/19 4:24 PM,28/Oct/23 3:05 AM,07/Mar/19 4:24 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00cvb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Feb/19 1:45 AM;wlahti;https://gerrit.hyperledger.org/r/c/29444/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable FabToken feature when V2_0 capability is enabled,FAB-14298,37884,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,wenjian,wenjian,wenjian,22/Feb/19 1:28 AM,03/Dec/19 3:04 AM,28/Oct/23 3:05 AM,01/Mar/19 1:01 AM,,,,,,,,,,fabric-token,,,,,0,fabtoken,,,,"- Remove V1_4_FABTOKEN_EXPERIMENTAL capability since it was not used in v1.4 . 

- Enable FabToken feature when V2_0 capability is enabled",,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11144,,,No,,Unset,No,,,"1|i00cvj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Feb/19 5:28 AM;wenjian;CR: https://gerrit.hyperledger.org/r/#/c/29458/;;;","01/Mar/19 1:38 AM;wenjian;V1.4 CR: https://gerrit.hyperledger.org/r/#/c/29714/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor query CLI functions and add unit tests,FAB-14299,37887,37656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,22/Feb/19 2:05 AM,30/Mar/19 1:09 AM,28/Oct/23 3:05 AM,30/Mar/19 1:09 AM,,,,,,,,,,fabric-peer,,,,,0,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14356,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cw7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Feb/19 6:07 AM;wlahti;https://gerrit.hyperledger.org/r/c/29606/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Onboarding orderer halts after restart,FAB-14300,37899,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,suryalnvs,suryalnvs,22/Feb/19 8:09 AM,04/Mar/19 9:11 PM,28/Oct/23 3:05 AM,23/Feb/19 1:03 AM,v1.4.1,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,raft,,,,"Observed:

During testcase FAB-14046, after restarting orderer4:

Orderer4 did not complete the onboarding process; it got stuck trying to pull the next block from other orderers on testorgschannel1.
{quote}{{2019-02-21 22:31:22.960 UTC [orderer.common.cluster.replication] fetchLastBlockSeq -> INFO 056[0m Skipping pulling from orderer1st-ordererorg:7050: minimum requested sequence is 3055 but orderer1st-ordererorg:7050 is at sequence 3054}}
{quote}
Remember, it had already completed pulling all the 3054 blocks for channel1 and was in the middle of pulling blocks for channel2 when it was restarted.

Remember, traffic had stopped before the onboarding started, and therefore no new blocks were added to channel1 since before orderer4 was restarted.

It appears orderer4 mistakenly halts itself until it can retrieve at least one more NEW block for channel1 from one of the other orderers before it can proceed.

To test this theory, with the orderer4 stuck in this state, repeatedly printing logs indicating it could not pull a block for channel1 from other orderers, we broadcasted one more transaction to channel1, and a block was committed on the other 3 orderers, and orderer4 immediately pulled it and completed with channel1, and then resumed pulling blocks from where it had left off for channel2, block 385, and completed onboarding.
{quote}2019-02-21 22:53:31.573 UTC [orderer.common.cluster.replication] pullBlocks -> INFO 9ac[0m Got block 3055 of size 15KB from orderer1st-ordererorg:7050

2019-02-21 22:53:31.607 UTC [orderer.common.cluster] appendBlock -> INFO 9ae[0m Committed block 3055 for channel testorgschannel1
2019-02-21 22:53:31.607 UTC [orderer.common.cluster] PullChannel -> INFO 9af[0m Pulling channel testorgschannel2

2019-02-21 22:53:31.630 UTC [orderer.common.cluster.replication] obtainStream -> INFO 9bd[0m Sending request for block 385 to orderer1st-ordererorg:7050
{quote}
Therefore, we believe that the onboarding would complete successfully with no problems if we repeat the test with traffic running the entire time.

FYI: We restarted orderer4 again before it finished, and the same thing happened.",,kchristidis,scottz,suryalnvs,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14046,,,,,,,"22/Feb/19 8:08 AM;suryalnvs;FAB-14046-orderer4-logs.zip;https://jira.hyperledger.org/secure/attachment/16855/FAB-14046-orderer4-logs.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,5937ae4,Unset,No,,,"1|i00cyf:",,,,Unset,Unset,,,,Follow the steps described in FAB-14046,,Unset,,,,,,Unset,,Unset,,(Please add usage information),kchristidis,scottz,suryalnvs,yacovm,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Feb/19 6:07 PM;yacovm;nice find :)

 

[https://gerrit.hyperledger.org/r/#/c/29477/];;;","23/Feb/19 1:16 AM;kchristidis;[~suryalnvs]: Once you've re-run the test, please confirm that we're good. Otherwise, re-open. Thanks.;;;","24/Feb/19 4:00 PM;suryalnvs;Successfully verified that onboarding orderer was able to proceed by skipping the already pulled channel blocks. Reran test with commit 57ae9a784.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Enable i18n support,FAB-14302,37902,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,baohua,baohua,22/Feb/19 5:00 PM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,0,stale-item,,,,1. The log msg should support multiple languages.,,baohua,binhn,stone-ch,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00cz3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,binhn,stone-ch,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
 fix wrong description,FAB-14304,37904,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,ping40,ping40,22/Feb/19 6:20 PM,08/Mar/19 7:18 PM,28/Oct/23 3:05 AM,08/Mar/19 7:18 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,"1:
{code:java}
// Initialize trans as valid here, then set invalidation reason code upon invalidation below
	txsfltr := ledgerUtil.NewTxValidationFlags(len(block.Data.Data))
{code}
""Initialize trans as valid here "" should  change to ""Initialize trans as not_validated here""

 

2:
{code:java}
// InitBlockMetadata copies metadata from one block into another
func InitBlockMetadata(block *cb.Block) {
{code}
""// InitBlockMetadata copies metadata from one block into another""  is wrong.

 

 ",,denyeart,ping40,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00czj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,ping40,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Feb/19 2:57 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/29478/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric Peer in minikube Kubernetes does not work with service DNS,FAB-14305,37906,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,alexvicegrab,alexvicegrab,22/Feb/19 10:56 PM,23/Jan/20 7:34 AM,28/Oct/23 3:05 AM,23/Jan/20 7:34 AM,,,,,,,,,,,,,,,0,stale-item,,,,"Commands such as `peer channel list` will fail with a `context deadline exceeded` when peer address is set to the Kubernetes service (e.g. `peer-hlf-peer:7051`) that points to the peer pod. Other services (e.g. Peer communicating with Orderer service work fine)

All this works correctly as expected on a normal Kubernetes environment.

Initially I assumed the issue was with Minikube's DNS (either kube DNS or Core DNS both failed), but now suspect something is wrong with how the peer interacts with the Minikube service discovery.",,alexvicegrab,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00czz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),alexvicegrab,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Feb/19 8:04 PM;mastersingh24;Which version of Fabric are you using?  And can you turn on gRPC debug logging:

{code:java}
CORE_LOGGING_GRPC=debug peer channel list ...
{code}
;;;","28/Feb/19 8:20 AM;alexvicegrab;I was using Fabric 1.3, all logging should have been at debug. I will retry with the newest Fabric 1.4 and check how this performs, and what logs I get back.;;;","23/Jan/20 7:34 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Panics with ApproveForMyOrg and Commit commands,FAB-14306,37907,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,latitiah,latitiah,22/Feb/19 11:45 PM,22/Mar/19 2:56 AM,28/Oct/23 3:05 AM,22/Mar/19 2:56 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,"A panic error is seen when executing the following command:
{code}peer lifecycle chaincode approveformyorg --name mycc --channelID behavesystest --version 0 --peerAddresses  172.22.0.6:7051 --peerAddresses 172.22.0.8:7051 --hash 730045c6268d8b4dc31800b0bee475b3c9776d59734f91ac8e130b03d4a025c5 --sequence 1 --init-required --escc escc --vscc vscc --waitForEvent --orderer orderer0.example.com:7050 --policy ""OR ('org1.example.com.member','org2.example.com.member')""{code}

Error:
{code}panic: runtime error: index out of range
      
      goroutine 1 [running]:
      github.com/hyperledger/fabric/peer/lifecycle/chaincode.InitCmdFactory(0x17f1ff5, 0xf, 0x101, 0xc00047bc80, 0x1342920, 0xc00047bc68)
      	/go/src/github.com/hyperledger/fabric/peer/lifecycle/chaincode/common.go:42 +0x11db
      github.com/hyperledger/fabric/peer/lifecycle/chaincode.approveForMyOrgCmd.func1(0xc0003fe280, 0xc0003de3c0, 0x0, 0x14, 0x0, 0x0)
      	/go/src/github.com/hyperledger/fabric/peer/lifecycle/chaincode/approveformyorg.go:123 +0x251
      github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc0003fe280, 0xc0003de280, 0x14, 0x14, 0xc0003fe280, 0xc0003de280)
      	/go/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:762 +0x473
      github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x2482900, 0x1, 0x0, 0x2481ac0)
      	/go/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:852 +0x2fd
      github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x2482900, 0xc00047bf38, 0x1)
      	/go/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:800 +0x2b
      main.main()
      	/go/src/github.com/hyperledger/fabric/peer/main.go:53 +0x33a
      
      panic: runtime error: index out of range
      
      goroutine 1 [running]:
      github.com/hyperledger/fabric/peer/lifecycle/chaincode.InitCmdFactory(0x17f1ff5, 0xf, 0x101, 0xc000415c80, 0x1342920, 0xc000415c68)
      	/go/src/github.com/hyperledger/fabric/peer/lifecycle/chaincode/common.go:42 +0x11db
      github.com/hyperledger/fabric/peer/lifecycle/chaincode.approveForMyOrgCmd.func1(0xc00026e280, 0xc000126500, 0x0, 0x14, 0x0, 0x0)
      	/go/src/github.com/hyperledger/fabric/peer/lifecycle/chaincode/approveformyorg.go:123 +0x251
      github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc00026e280, 0xc0001263c0, 0x14, 0x14, 0xc00026e280, 0xc0001263c0)
      	/go/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:762 +0x473
      github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x2482900, 0x1, 0x0, 0x2481ac0)
      	/go/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:852 +0x2fd
      github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x2482900, 0xc000501f38, 0x1)
      	/go/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:800 +0x2b
      main.main()
      	/go/src/github.com/hyperledger/fabric/peer/main.go:53 +0x33a{code}

For the commit command:
{code}peer lifecycle chaincode commit --name mycc --channelID behavesystest --version 0 --hash 730045c6268d8b4dc31800b0bee475b3c9776d59734f91ac8e130b03d4a025c5 --sequence 1 --init-required --escc escc --vscc vscc --waitForEvent --orderer orderer0.example.com:7050 --peerAddresses 172.22.0.6:7051 --peerAddresses 172.22.0.7:7051 --orderer orderer0.example.com:7050 --policy ""OR ('org1.example.com.member','org2.example.com.member')""{code}

Error:
{code}panic: runtime error: index out of range
      
      goroutine 1 [running]:
      github.com/hyperledger/fabric/peer/lifecycle/chaincode.InitCmdFactory(0x17e79a1, 0x6, 0x101, 0xc0002f7c80, 0x1342920, 0xc0002f7c68)
      	/go/src/github.com/hyperledger/fabric/peer/lifecycle/chaincode/common.go:42 +0x11db
      github.com/hyperledger/fabric/peer/lifecycle/chaincode.commitCmd.func1(0xc000244500, 0xc000248160, 0x0, 0x16, 0x0, 0x0)
      	/go/src/github.com/hyperledger/fabric/peer/lifecycle/chaincode/commit.go:125 +0x251
      github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc000244500, 0xc000248000, 0x16, 0x16, 0xc000244500, 0xc000248000)
      	/go/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:762 +0x473
      github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x2482900, 0x1, 0x0, 0x2481ac0)
      	/go/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:852 +0x2fd
      github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x2482900, 0xc0002f7f38, 0x1)
      	/go/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:800 +0x2b
      main.main()
      	/go/src/github.com/hyperledger/fabric/peer/main.go:53 +0x33a{code}

This test is executed using the fabric-test bdd-based test framework.
",,latitiah,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00d07:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Feb/19 1:10 AM;wlahti;Found the cause of the panic. Should be resolved with the latest update to [https://gerrit.hyperledger.org/r/c/29416|https://gerrit.hyperledger.org/r/c/29416.] (though I recommend checking out the top of the CR stack to get the other related changes: https://gerrit.hyperledger.org/r/c/29444)

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Peer administration: Rollback a channel's ledger on a peer, while preserving private data (finalize doc)",FAB-14307,37913,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,Senthil1,Senthil1,Senthil1,23/Feb/19 2:47 AM,17/Mar/20 1:21 AM,28/Oct/23 3:05 AM,17/Mar/20 1:21 AM,,,,,,v1.4.2,v2.0.0,,,fabric-gossip,fabric-ledger,,,,0,,,,,"Administrative ability to rollback a channel's ledger on a peer to a prior block height in the case the channel gets into a corrupt state at a later block height. During the rollback, need to preserve private data since it cannot be obtained from ordering service at a later time.

Design Doc: [https://docs.google.com/document/d/1_-e4Bu42E9vfdttrYBmiSUeOdanH2SiSnuhM1oOn1TA/edit] ",,denyeart,grapebaba,MichaelWang,Senthil1,spipes,ymlbright,,,,,,,,,,,,,,,,,,,FAB-13881,FAB-14009,FAB-13883,FAB-13884,FAB-13885,FAB-13888,,,,FAB-15963,,,,FAB-15838,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|hzwr6z:zzc",,,,No,Unset,v1.4.x,,,(Please add steps to reproduce),,Yes,,,,,https://docs.google.com/document/d/15kE2vJgabz_rVQqWNtISCGsXH1xv2RVrHvi9M6nYTko/edit?usp=sharing,Unset,,Unset,,(Please add usage information),denyeart,grapebaba,MichaelWang,Senthil1,spipes,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Nov/19 11:28 PM;denyeart;I will work on the doc updates in FAB-15838.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
truncate blockstore and delete index entries,FAB-14308,37914,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,23/Feb/19 2:48 AM,25/Jul/19 4:53 PM,28/Oct/23 3:05 AM,01/Jul/19 1:04 PM,,,,,,v1.4.1,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d13:",,,,Unset,Unset,v1.4.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
drop all DBs except pvtdata store and ledgerProvider,FAB-14309,37915,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,23/Feb/19 2:49 AM,27/Jul/19 11:17 AM,28/Oct/23 3:05 AM,01/Jul/19 1:04 PM,,,,,,v1.4.1,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d1b:",,,,Unset,Unset,v1.4.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fetch pvtdata of both valid/invalid tx (gossip side),FAB-14310,37916,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,23/Feb/19 2:50 AM,27/Jul/19 11:18 AM,28/Oct/23 3:05 AM,01/Jul/19 1:04 PM,,,,,,v1.4.1,,,,fabric-gossip,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d1j:",,,,Unset,Unset,v1.4.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
store pvtdata of both valid/invalid tx  (pvtdataStore),FAB-14311,37917,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,23/Feb/19 2:50 AM,27/Jul/19 11:18 AM,28/Oct/23 3:05 AM,01/Jul/19 1:04 PM,,,,,,v1.4.1,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d1r:",,,,Unset,Unset,v1.4.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
set reprocessing flag after a rollback (gossip),FAB-14312,37918,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,23/Feb/19 2:51 AM,27/Jul/19 11:19 AM,28/Oct/23 3:05 AM,01/Jul/19 1:04 PM,,,,,,v1.4.1,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d1z:",,,,Unset,Unset,v1.4.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
reprocessing: make gossip to fetch pvtdata from local pvtstore,FAB-14313,37919,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,23/Feb/19 2:52 AM,27/Jul/19 11:19 AM,28/Oct/23 3:05 AM,01/Jul/19 1:04 PM,,,,,,v1.4.1,,,,fabric-gossip,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d27:",,,,Unset,Unset,v1.4.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
reprocessing: don't update pvtdata store,FAB-14314,37920,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,Senthil1,Senthil1,23/Feb/19 2:53 AM,05/Aug/19 7:55 PM,28/Oct/23 3:05 AM,12/Mar/19 7:37 PM,,,,,,v1.4.1,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d2f:",,,,Unset,Unset,v1.4.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Mar/19 7:37 PM;Senthil1;We already have a mechanism in place for this. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
reprocessing: disable pvtdata reconciliation ,FAB-14315,37921,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,23/Feb/19 2:54 AM,27/Jul/19 11:18 AM,28/Oct/23 3:05 AM,01/Jul/19 1:04 PM,,,,,,v1.4.1,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d2n:",,,,Unset,Unset,v1.4.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
unset reprocessing flag once the pre rollbacked block height is reached (gossip),FAB-14316,37922,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,23/Feb/19 2:55 AM,27/Jul/19 11:19 AM,28/Oct/23 3:05 AM,01/Jul/19 1:04 PM,,,,,,v1.4.1,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d2v:",,,,Unset,Unset,v1.4.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SIGSEGV: segmentation violation error on eyfn script,FAB-14317,37924,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,jyellick,rameshthoomu,rameshthoomu,23/Feb/19 5:15 AM,27/Feb/19 3:17 AM,28/Oct/23 3:05 AM,27/Feb/19 3:17 AM,,,,,,,,,,fabric-samples,,,,,0,,,,,"Encountered invalid memory address or nil pointer dereference error

Branch: Master

Build Log: https://jenkins.hyperledger.org/view/Daily/job/fabric-nightly-release-job-master-x86_64/47/consoleFull

:24:37.075 + configtxlator proto_encode --input config.json --type common.Config
00:24:37.154 + configtxlator proto_encode --input modified_config.json --type common.Config
00:24:37.228 panic: runtime error: invalid memory address or nil pointer dereference
{color:#FF0000}00:24:37.228 [signal SIGSEGV: segmentation violation code=0x1 addr=0x20 pc=0xd68add]{color}
00:24:37.228

00:24:37.228 /go/src/github.com/hyperledger/fabric/common/tools/configtxlator/main.go:75 +0x573
00:24:37.229 + configtxlator compute_update --channel_id mychannel --original original_config.pb --updated modified_config.pb
{color:#FF0000}00:24:37.291 configtxlator: error: Error computing update: error computing config update: no channel group included for updated config{color}
00:24:37.291 + configtxlator proto_decode --input config_update.pb --type common.ConfigUpdate
00:24:37.350 + jq .
00:24:37.351 ++ cat confi",,jyellick,rameshthoomu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d3b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,rameshthoomu,sykesm,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Feb/19 5:47 AM;jyellick;-[~sykesm] I'm guessing this is related to the proto movement work you've been doing? Any thoughts?- Looks like that hasn't merged;;;","23/Feb/19 6:09 AM;sykesm;Yeah, I was going to say nothing has been merged...;;;","25/Feb/19 10:57 AM;jyellick;In review via https://gerrit.hyperledger.org/r/29528;;;","27/Feb/19 3:17 AM;rameshthoomu;Change has been merged and byfn tests are working as expected;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Upgrade to Alpine 3.9,FAB-14318,37934,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,23/Feb/19 9:41 PM,16/Mar/19 12:49 AM,28/Oct/23 3:05 AM,16/Mar/19 12:49 AM,,,,,,,,,,,,,,,0,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,FAB-14447,,FABC-825,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d3j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Need error codes on failures (instead/in addition to error strings),FAB-14320,37923,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,varadatibm,varadatibm,varadatibm,23/Feb/19 3:31 AM,23/Feb/19 10:12 PM,28/Oct/23 3:05 AM,23/Feb/19 10:12 PM,,,,,,,,,,,,,,,0,,,,,"Currently where there is an error... for example if the chaincode is already installed on the peer or if the policy isn't allowing user to submit a transaction, etc because if insufficient signatures... we get a sting with a reason. But the issue is that string keeps changing between different versions. We can't reliably look for the response and give the user a proper error message. This is also an issue with translation.

 

If could be good to get a list of error codes and what they mean so that we can use that reliably.",,nfrunza,varadatibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3142,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d33:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),nfrunza,varadatibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Feb/19 4:10 AM;nfrunza;[~varadatibm] is this for the Hyperledger Explorer?;;;","23/Feb/19 4:56 AM;varadatibm;This is for IBM Blockchain platform... I suspect this is the same issue for all clients...;;;","23/Feb/19 5:29 AM;nfrunza;HLExplorer supports HLFabric, please assign to the appropriate project.

Hyperledger Explorer is a simple, powerful, easy-to-use, highly maintainable, open source browser for viewing activity on the underlying blockchain network.

Thank you;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Backport Raft OSN to Fabric v1.4.1,FAB-14321,37936,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,C0rWin,C0rWin,C0rWin,24/Feb/19 8:14 AM,07/Mar/19 11:03 PM,28/Oct/23 3:05 AM,07/Mar/19 11:03 PM,v1.4.0,,,,,v1.4.1,,,,fabric-orderer,,,,,0,watchlist,,,,"There is a need to backport Raft related CRs from master branch into v1.4.1. 

Here is the list of items since cut of 1.4.0 which was *merged* into {{master}} while not ported into {{v1.4.0}} branch:

||JIRA ||Gerrit(master) CR|| Backport Gerrit(v1.4.1) CR ||Ported (Yes/No/Gerrit)||
| [FAB-12945] add raft reconfiguration unit-tests  | https://gerrit.hyperledger.org/r/27656| https://gerrit.hyperledger.org/r/29514|Gerrit|
| FAB-12986: ledger per chain for raft chain_test.go  | https://gerrit.hyperledger.org/r/27719| https://gerrit.hyperledger.org/r/29515|Gerrit|
| [FAB-12949] finish reconfiguration after restart  | https://gerrit.hyperledger.org/r/27773| https://gerrit.hyperledger.org/r/29516|Gerrit|
| [FAB-13199] Reduce etcdraft test time.  | https://gerrit.hyperledger.org/r/28083| https://gerrit.hyperledger.org/r/29517|Gerrit|
| [FAB-13057] Remove applied index check in storage  | https://gerrit.hyperledger.org/r/28005| https://gerrit.hyperledger.org/r/29518|Gerrit|
| [FAB-13225] address code review comments  | https://gerrit.hyperledger.org/r/28058| https://gerrit.hyperledger.org/r/29519|Gerrit|
| [FAB-13150] Re-enable etcdraft for v2.0 development  | https://gerrit.hyperledger.org/r/27909| https://gerrit.hyperledger.org/r/29511|Gerrit|
| [FAB-12729] Support subset of system channel OSNs  | https://gerrit.hyperledger.org/r/28046| https://gerrit.hyperledger.org/r/29512|Gerrit|
| [FAB-12949] Fix etcdraft reconfiguration UT  | https://gerrit.hyperledger.org/r/28119| https://gerrit.hyperledger.org/r/29520|Gerrit|
| [FAB-13053] Add an UT to assert retransmission.  | https://gerrit.hyperledger.org/r/27804| https://gerrit.hyperledger.org/r/29521|Gerrit|
| [FAB-13262] typo in configblock.go  | https://gerrit.hyperledger.org/r/28150| https://gerrit.hyperledger.org/r/29522|Gerrit|
| [FAB-12579] Separate TLS listener for intra-cluster  | https://gerrit.hyperledger.org/r/28107| https://gerrit.hyperledger.org/r/29537|Gerrit|
| [FAB-13299] Onboarding: Skip committing existing blocks  | https://gerrit.hyperledger.org/r/28205| https://gerrit.hyperledger.org/r/29538|Gerrit|
| [FAB-13298] Fix TestConfigureClusterListener in MacOS  | https://gerrit.hyperledger.org/r/28202| https://gerrit.hyperledger.org/r/29539|Gerrit|
| [FAB-13350] Fix etcdraft flaky test  | https://gerrit.hyperledger.org/r/28285| https://gerrit.hyperledger.org/r/29540|Gerrit|
| [FAB-13095] fix UT flake RPC timeout  | https://gerrit.hyperledger.org/r/28280| https://gerrit.hyperledger.org/r/29541|Gerrit|
| [FAB-13349] Add more assertion to etcdraft UT.  | https://gerrit.hyperledger.org/r/28295| https://gerrit.hyperledger.org/r/29542|Gerrit|
| [FAB-13330] Rename GetConfigBlock to GetConfig in nwo  | https://gerrit.hyperledger.org/r/28240| https://gerrit.hyperledger.org/r/29543|Gerrit|
| [FAB-13334] Onboarding: Allow empty channels  | https://gerrit.hyperledger.org/r/28238| https://gerrit.hyperledger.org/r/29544|Gerrit|
| [FAB-13332] Add cryptogen extend to integration tests  | https://gerrit.hyperledger.org/r/28239| https://gerrit.hyperledger.org/r/29545|Gerrit|
| [FAB-13298] Fix test flake on MacOS  | https://gerrit.hyperledger.org/r/28246| https://gerrit.hyperledger.org/r/29546|Gerrit|
| [FAB-13333] Orderer config update to use orderer creds  | https://gerrit.hyperledger.org/r/28242| https://gerrit.hyperledger.org/r/29556|Gerrit|
| [FAB-13208] Raft Reconfig&Onboarding integration test  | https://gerrit.hyperledger.org/r/28243| https://gerrit.hyperledger.org/r/29557|Gerrit|
| [FAB-1337] Raft: Commit genesis blocks for non-members  | https://gerrit.hyperledger.org/r/28330| https://gerrit.hyperledger.org/r/29564|Gerrit|
| [FAB-13331] Refactor metadata updates in nwo  | https://gerrit.hyperledger.org/r/28241| https://gerrit.hyperledger.org/r/29558|Gerrit|
| [FAB-13367] Fix flaky etcdraft UT  | https://gerrit.hyperledger.org/r/28308| https://gerrit.hyperledger.org/r/29559|Gerrit|
| [FAB-13415] DRY up UpdateConsensusMetadata in nwo  | https://gerrit.hyperledger.org/r/28346| https://gerrit.hyperledger.org/r/29560|Gerrit|
| [FAB-13360] Fix an etcdraft flaky UT  | https://gerrit.hyperledger.org/r/28341| https://gerrit.hyperledger.org/r/29561|Gerrit|
| [FAB-13427] Make replication tests not depend on time  | https://gerrit.hyperledger.org/r/28354| https://gerrit.hyperledger.org/r/29562|Gerrit|
| [FAB-13428] Make TestReplicateChainsFailures robust  | https://gerrit.hyperledger.org/r/28355| https://gerrit.hyperledger.org/r/29563|Gerrit|
| [FAB-13441] Properly capture OSN output  | https://gerrit.hyperledger.org/r/28377| https://gerrit.hyperledger.org/r/29573|Gerrit|
| [FAB-13362] Pulling not servicing chains in onboarding  | https://gerrit.hyperledger.org/r/28366| https://gerrit.hyperledger.org/r/29574|Gerrit|
| [FAB-13444] Prepare onboarding to multi-time use  | https://gerrit.hyperledger.org/r/28385| https://gerrit.hyperledger.org/r/29575|Gerrit|
| [FAB-13456] Use empty peer list to join raft cluster  | https://gerrit.hyperledger.org/r/28402| https://gerrit.hyperledger.org/r/29579|Gerrit|
| [FAB-13180] Orderer: auto-join existing inactive chains  | https://gerrit.hyperledger.org/r/28391| https://gerrit.hyperledger.org/r/29580|Gerrit|
| [FAB-13456] Fix race in etcdraft test  | https://gerrit.hyperledger.org/r/28475| https://gerrit.hyperledger.org/r/29576|Gerrit|
| [FAB-13465] Max retry attempts for orderer replication  | https://gerrit.hyperledger.org/r/28442| https://gerrit.hyperledger.org/r/29577|Gerrit|
| FAB-12983 capability V2_0 for Kafka2RaftMigration  | https://gerrit.hyperledger.org/r/27822| https://gerrit.hyperledger.org/r/29578|Gerrit|
| [FAB-13495] Activate onboarding max retries  | https://gerrit.hyperledger.org/r/28499| https://gerrit.hyperledger.org/r/29581|Gerrit|
| [FAB-13481] Make onboarding code more idiomatic  | https://gerrit.hyperledger.org/r/28473| https://gerrit.hyperledger.org/r/29582|Gerrit|
| [FAB-11996] Fix failed UT  | https://gerrit.hyperledger.org/r/28620| https://gerrit.hyperledger.org/r/29583|Gerrit|
| [FAB-13178] Simplify the proposition of config block  | https://gerrit.hyperledger.org/r/28345| https://gerrit.hyperledger.org/r/29588|Gerrit|
| [FAB-13633] Make Step RPC failures non blocking  | https://gerrit.hyperledger.org/r/28657| https://gerrit.hyperledger.org/r/29589|Gerrit|
| FAB-12984 consensus migration protos  | https://gerrit.hyperledger.org/r/28113| https://gerrit.hyperledger.org/r/29590|Gerrit|
| FAB-13265 migration status in channelconfig  | https://gerrit.hyperledger.org/r/28155| https://gerrit.hyperledger.org/r/29591|Gerrit|
| [FAB-13643] Leader crash and failover integration test  | https://gerrit.hyperledger.org/r/28648| https://gerrit.hyperledger.org/r/29592|Gerrit|
| [FAB-13698] disable flaky test TestReconnect  | https://gerrit.hyperledger.org/r/28747| https://gerrit.hyperledger.org/r/29593|Gerrit|
| [FAB-13694] Move LastConfigBlock to orderer common  | https://gerrit.hyperledger.org/r/28732| https://gerrit.hyperledger.org/r/29594|Gerrit|
| [FAB-13178] Refactor etcdraft chain to avoid sync  | https://gerrit.hyperledger.org/r/28204| https://gerrit.hyperledger.org/r/29595|Gerrit|
| [FAB-13178] do not accept new env when conf in flight  | https://gerrit.hyperledger.org/r/28427| https://gerrit.hyperledger.org/r/29596|Gerrit|
| [FAB-13178] Move raft logic to its own file  | https://gerrit.hyperledger.org/r/28428| https://gerrit.hyperledger.org/r/29597|Gerrit|
| [FAB-13178] Remove global leader var in etcdraft chain  | https://gerrit.hyperledger.org/r/28478| https://gerrit.hyperledger.org/r/29598|Gerrit|
| [FAB-13178] A dumb version of etcdraft BlockCreator  | https://gerrit.hyperledger.org/r/28541| https://gerrit.hyperledger.org/r/29600|Gerrit|
| [FAB-13447] Streamline the code  | https://gerrit.hyperledger.org/r/28581| https://gerrit.hyperledger.org/r/29601|Gerrit|
| [FAB-13447] new leader should wait for in flight msg  | https://gerrit.hyperledger.org/r/28582| https://gerrit.hyperledger.org/r/29602|Gerrit|
| [FAB-13438] pass SoftState on observe channel  | https://gerrit.hyperledger.org/r/28585| https://gerrit.hyperledger.org/r/29603|Gerrit|
| [FAB-13438] Store raft SoftState  | https://gerrit.hyperledger.org/r/28588| https://gerrit.hyperledger.org/r/29604|Gerrit|
| [FAB-13613] Fix race in etcdraft chain UT  | https://gerrit.hyperledger.org/r/28621| https://gerrit.hyperledger.org/r/29605|Gerrit|
| [FAB-13438] Errored should reflect correct state  | https://gerrit.hyperledger.org/r/28619| https://gerrit.hyperledger.org/r/29623|Gerrit|
| [FAB-13178] Use MaxInflightMsgs to throttle requests  | https://gerrit.hyperledger.org/r/28650| https://gerrit.hyperledger.org/r/29624|Gerrit|
| [FAB-13716] Block verifier book-keeping for onboarding  | https://gerrit.hyperledger.org/r/28768| https://gerrit.hyperledger.org/r/29625|Gerrit|
| [FAB-13178] Move `SendSubmit` out of serveRequest  | https://gerrit.hyperledger.org/r/28847| https://gerrit.hyperledger.org/r/29626|Gerrit|
| [FAB-13363] Block verification for onboarding  | https://gerrit.hyperledger.org/r/28770| https://gerrit.hyperledger.org/r/29627|Gerrit|
| [FAB-13808] Address code review comments for FAB-13363  | https://gerrit.hyperledger.org/r/28866| https://gerrit.hyperledger.org/r/29628|Gerrit|
| FAB-13704 Update doc of ConsensusType proto  | https://gerrit.hyperledger.org/r/28776| https://gerrit.hyperledger.org/r/29629|Gerrit|
| FAB-13705 refine Bundle.validateNew  | https://gerrit.hyperledger.org/r/28780| https://gerrit.hyperledger.org/r/29630|Gerrit|
| [FAB-13845] Increase default raft tick interval  | https://gerrit.hyperledger.org/r/28918| https://gerrit.hyperledger.org/r/29631|Gerrit|
| [FAB-13848] Fix flaky integration test in raft cft  | https://gerrit.hyperledger.org/r/28921| https://gerrit.hyperledger.org/r/29632|Gerrit|
| [FAB-12709] Use another way to elect leader in UT  | https://gerrit.hyperledger.org/r/28778| https://gerrit.hyperledger.org/r/29633|Gerrit|
| [FAB-12709] Enable CheckQuorum  | https://gerrit.hyperledger.org/r/28628| https://gerrit.hyperledger.org/r/29634|Gerrit|
| [FAB-12709] Add integration test for CheckQuorum  | https://gerrit.hyperledger.org/r/28783| https://gerrit.hyperledger.org/r/29635|Gerrit|
| [FAB-13199] Start etcdraft chain sequentially in UT  | https://gerrit.hyperledger.org/r/28846| https://gerrit.hyperledger.org/r/29636|Gerrit|
| [FAB-13059] put raft snapshotting in go routine  | https://gerrit.hyperledger.org/r/28849| https://gerrit.hyperledger.org/r/29637|Gerrit|
| [FAB-11863] Clean orderer network failure logs  | https://gerrit.hyperledger.org/r/28883| https://gerrit.hyperledger.org/r/29638|Gerrit|
| [FAB-13455] Initialize BlockPuller on demand.  | https://gerrit.hyperledger.org/r/28885| https://gerrit.hyperledger.org/r/29639|Gerrit|
| FAB-13264 consensus migration: kafka2raft green path #1  | https://gerrit.hyperledger.org/r/28435| https://gerrit.hyperledger.org/r/29640|Gerrit|
| [FAB-13967] Polling, instead of waiting in AfterEach  | https://gerrit.hyperledger.org/r/29034| https://gerrit.hyperledger.org/r/29641|Gerrit|
| [FAB-13805] Unify Step and Submit into a stream  | https://gerrit.hyperledger.org/r/28892| https://gerrit.hyperledger.org/r/29642|Gerrit|
| [FAB-13059] Purge etcdraft WAL and Snapshot files  | https://gerrit.hyperledger.org/r/28850| https://gerrit.hyperledger.org/r/29643|Gerrit|
| [FAB-13934] Add GinkgoRecover to integration tests.  | https://gerrit.hyperledger.org/r/28998| https://gerrit.hyperledger.org/r/29644|Gerrit|
| [FAB-14041] Validate boot block is system channel block  | https://gerrit.hyperledger.org/r/29112| https://gerrit.hyperledger.org/r/29645|Gerrit|
| [FAB-14010] Integration test- remove OSN from cluster  | https://gerrit.hyperledger.org/r/29070| https://gerrit.hyperledger.org/r/29646|Gerrit|
| [FAB-14045] Send messages asynchronously in clusters  | https://gerrit.hyperledger.org/r/29113| https://gerrit.hyperledger.org/r/29647|Gerrit|
| [FAB-13618] Fix test flake in OSN eviction test  | https://gerrit.hyperledger.org/r/29141| https://gerrit.hyperledger.org/r/29648|Gerrit|
| [FAB-14111] Remove unused function IsMembershipUpdate  | https://gerrit.hyperledger.org/r/29196| https://gerrit.hyperledger.org/r/29649|Gerrit|
| [FAB-13656] Size-based snapshotting  | https://gerrit.hyperledger.org/r/29152| https://gerrit.hyperledger.org/r/29650|Gerrit|
| [FAB-14031] Fix flake in etcdraft UT  | https://gerrit.hyperledger.org/r/29180| https://gerrit.hyperledger.org/r/29651|Gerrit|
| FAB-13665 consensus migration: kafka2raft green path #2  | https://gerrit.hyperledger.org/r/28705| https://gerrit.hyperledger.org/r/29653|Gerrit|
| [FAB-14142] NPE when onboarding without app channels  | https://gerrit.hyperledger.org/r/29247| https://gerrit.hyperledger.org/r/29654|Gerrit|
| [FAB-14129] Add more logs to etcdraft chain  | https://gerrit.hyperledger.org/r/29236| https://gerrit.hyperledger.org/r/29655|Gerrit|
| [FAB-14179] Perform checks of instantiation in test  | https://gerrit.hyperledger.org/r/29297| https://gerrit.hyperledger.org/r/29656|Gerrit|
| [FAB-14181] GinkgoRecover should be deferred directly  | https://gerrit.hyperledger.org/r/29299| https://gerrit.hyperledger.org/r/29657|Gerrit|
| [FAB-11937] Provide Raft-specific metrics  | https://gerrit.hyperledger.org/r/29153| https://gerrit.hyperledger.org/r/29658|Gerrit|
| [FAB-14136] Always Deliver if cluster smaller than 3  | https://gerrit.hyperledger.org/r/29233| https://gerrit.hyperledger.org/r/29659|Gerrit|
| [FAB-14217] Harden etcdraft eviction integration test  | https://gerrit.hyperledger.org/r/29340| https://gerrit.hyperledger.org/r/29660|Gerrit|
| FAB-13666 consensus migration: kafka2raft green path #3  | https://gerrit.hyperledger.org/r/28707| https://gerrit.hyperledger.org/r/29661|Gerrit|
| FAB-13669 consensus migration: kafka2raft green path #4  | https://gerrit.hyperledger.org/r/28708| https://gerrit.hyperledger.org/r/29662|Gerrit|
| FAB-12991 kafka2raft e2e tests green path  | https://gerrit.hyperledger.org/r/28439| https://gerrit.hyperledger.org/r/29663|Gerrit|
| [FAB-14192] Fix deadlock in etcdraft chain  | https://gerrit.hyperledger.org/r/29323| https://gerrit.hyperledger.org/r/29664|Gerrit|
| [FAB-14240] Do not use `support.Height` in chain  | https://gerrit.hyperledger.org/r/29363| https://gerrit.hyperledger.org/r/29675|Gerrit|
| [FAB-14004] Bump etcd/raft lib version  | https://gerrit.hyperledger.org/r/29435| https://gerrit.hyperledger.org/r/29681|Gerrit|
| [FAB-14278] Fix etcdraft flaky UT  | https://gerrit.hyperledger.org/r/29431| https://gerrit.hyperledger.org/r/29682|Gerrit|
| [FAB-14300] Skip pulling pulled channels in onboarding  | https://gerrit.hyperledger.org/r/29477| https://gerrit.hyperledger.org/r/29683|Gerrit|
| [FAB-13750] Detect eviction from channel and halt  | https://gerrit.hyperledger.org/r/29084| https://gerrit.hyperledger.org/r/29684|Gerrit|

And there is still waiting for review item

||JIRA ||Gerrit CR||Ported (Yes/No)||
| [WIP][FAB-14077] cluster comm metrics  | https://gerrit.hyperledger.org/r/29373|No|

In addition need to backport changes from following stack:  https://gerrit.hyperledger.org/r/c/29124 and commit https://gerrit.hyperledger.org/r/#/c/29384/ 

//cc [~kchristidis]",,C0rWin,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00d3z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Feb/19 8:31 AM;kchristidis;Perfect, thanks Artem.

As we discussed, let's come up with the list of CRs that need to be backported, post them here and begin on Monday.

Once we're current with master, we post in #fabric-orderer-dev so any subsequent CRs are posted in both branches ({{master}} and {{1.4}}).;;;","24/Feb/19 9:17 PM;C0rWin;[~kchristidis] I have added a list of items which was pushed and merged into master while not available on v1.4.0 branch. I know we discussed to skip the migration, listed it here only for completeness.;;;","28/Feb/19 7:15 AM;C0rWin;Commits related to the Raft has been back ported to release-1.4 branch and available now on gerrit ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
De-vipererize gossip state,FAB-14322,37937,32906,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,24/Feb/19 6:03 PM,06/Apr/19 5:37 PM,28/Oct/23 3:05 AM,26/Feb/19 12:28 AM,,,,,,,,,,fabric-gossip,,,,,0,hygiene,,,,"Inject configuration of state via struct, and not through viper getter invocations.

Have the viper config at higher levels.",,hagarm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d47:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Feb/19 4:34 PM;hagarm;https://gerrit.hyperledger.org/r/#/c/29505/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Metrics not accessible when TLS is enabled and clientAuth is not required,FAB-14323,37938,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,24/Feb/19 11:00 PM,28/Feb/19 8:27 PM,28/Oct/23 3:05 AM,28/Feb/19 8:27 PM,,,,,,v1.4.1,v2.0.0,,,fabric-docs,,,,,0,,,,,The current implementation actually requires a client certificate for {{*/metrics*}} and {{*/logspec*}} even when {{*Operations.TLS.ClientAuthRequired=false*}}.,,davidkhala,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d4f:",,,,Unset,Unset,,,,Set Operations.TLS.Enabled=true and Operations.TLS.ClientAuthRequired=false and try to access the /metrics endpoint. You'll receive a 401 - Unauthorized.  The same is true for the /logspec endpoint as well,,Unset,,,,,,Unset,,Unset,,(Please add usage information),davidkhala,mastersingh24,sykesm,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Feb/19 3:56 AM;mastersingh24;[~sykesm] - Is this actually what we want?  {{*/healthz*}} does not require a client cert when just TLS is enabled.
If this is the case, then I think we need to update the documentation as this is not clear.;;;","25/Feb/19 5:59 AM;sykesm;Yes. When TLS is enabled, we request a client cert for authentication and, if provided, we verify it against the configured CA. If a cert isn’t provided, authorization will be denied to the logging and metrics handlers. Only health is treated as special and it’s called out explicitly in that section:

{quote}
When TLS is enabled, a valid client certificate is not required to use this service unless requireClientAuth is set to true.
{quote}

And when requireClientAuth is set, health needs it too - which is why I’m not really happy to see that the doc was updated to say we _recommend_ enabling mutual auth since it breaks the default readiness and licenses checks. ;;;","25/Feb/19 7:58 AM;mastersingh24;Thanks [~sykesm] ... that's what all the tests show so makes sense.

{quote}
 Note that if clientAuthRequired is set to false, clients do not need to provide a certificate; if they do, however, and the service cannot verify the certificate, then the request will be rejected.
{quote}

So I don't think that the above if actually accurate .... let me see how I can improve  ;;;","25/Feb/19 8:40 AM;mastersingh24;https://gerrit.hyperledger.org/r/29523
https://gerrit.hyperledger.org/r/29524;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Remove CredentialSupport singleton,FAB-14324,37940,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,mastersingh24,mastersingh24,25/Feb/19 4:36 AM,21/Jun/19 12:13 AM,28/Oct/23 3:05 AM,21/Jun/19 12:11 AM,,,,,,v2.0.0,,,,,,,,,0,hygiene,ipm,,,,,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15773,FAB-15576,,,,FAB-15546,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d4v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/May/19 12:23 AM;sykesm;[~mastersingh24], you referenced this in a CR review where CredentialSupport was being extended. This looks like it was place in-progress on march 16 and I don't see any commits. If you're not actively working on this, I'd like to move it to our backlog and have someone pick it up.

You okay with that?;;;","02/May/19 12:38 AM;mastersingh24;[~sykesm] Either way is fine ... I've actually been doing some work on this but have not checked anything in.
I'll add the specific sub-task I was working on and create a few others so people know what needs to be done.;;;","04/Jun/19 8:30 AM;sykesm;part of a larger refactoring that will be going on for a while:

remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31596 [FAB-14324] remove peer.Support
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31597 [FAB-14324] remove peer.CollectionSupport
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31598 [FAB-14324] rename peerImpl to Peer
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31599 [FAB-14324] move CreateChainFromBlock to instance
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31600 [FAB-14324] Move GetChannelConfig to instance
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31601 [FAB-14324] move GetChannelsInfo to instance
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31602 [FAB-14324] move GetStableChannelConfig to instance
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31603 [FAB-14324] move GetCurrConfigBlock to instance
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31604 [FAB-14324] move GetLedger to instance
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31605 [FAB-14324] move GetMSPIDs to instance
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31606 [FAB-14324] move GetPolicyManager to instance
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31607 [FAB-14324] InitChain and Initialize to instance
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31608 [FAB-14324] move createChain to instance
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31609 [FAB-14324] remove peer.TransientStoreFactory
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31610 [FAB-14324] merge peer_impl back into peer
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31611 [FAB-14324] move GetLocalIP from peer to comm
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31612 [FAB-14324] move SetCurrConfigBlock to instance
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31622 [FAB-14324] kill globals holding tx processors
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31623 [FAB-14324] remove global peer.ConfigTxProcessors
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31624 [FAB-14324] move validation semaphore to instance
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31625 [FAB-14324] move pluginMapper to instance
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31626 [FAB-14324] move chainInitializer to instance
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31627 [FAB-14324] remove MockSetMSPIDGetter from peer
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31629 [FAB-14324] move ledger from chainSupport to chain
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31630 [FAB-14324] move bundleSource to chain
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31646 [FAB-14324] remove mock-only nil check
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31647 [FAB-14324] remove argument from channel.GetMSPIDs
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31657 [FAB-14324] move inline func to chain instance
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31658 [FAB-14324] remove unnecessary chainSupport setup
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31660 [FAB-14324] move resources from support to chain
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31661 [FAB-14324] remove peer.chainSupport
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31662 [FAB-14324] move chains to Peer instance
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31663 [FAB-14324] remove peer.Initialize
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31664 [FAB-14324] remove peer.InitChain
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31675 [FAB-14324] simplify buildTrustedRootsForChain
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31688 [FAB-14324] remove InitGossip...DeliveryFactory;;;","21/Jun/19 12:11 AM;sykesm;full stack:

7a2dffa79 [FAB-14324] simplify committer config callback
f0475d7d9 [FAB-14324] unexport ServerRootCAs
81f742fa2 [FAB-14324] unexport OrdererRootCAsByChain
eaa1141a6 [FAB-14324] remove CredSupport singleton
250ebdf74 [FAB-14324] wire CredentialSupport to delivery
71c88e79b [FAB-14324] introduce CredSupportDialerFactory
276854d5b [FAB-14324] minor cleanup around CredSupport
17e4f5d4d [FAB-14324] remove NewPeerServer
670b76303 [FAB-14324] remove peer.credSupport package var
7bc65de3c [FAB-14324] attach updateTrustedRoots to Peer
2d39f4276 [FAB-14324] unexport CredSupport#AppRootCAsByChain
13bca1fdb [FAB-14324] remove CredentialSupport#ClientRootCAs
627d21a50 [FAB-14324] remove RemoveClientRootCAs
03163a760 [FAB-14324] rename Cs to CollectionStore
a4a22ef39 [FAB-14324] remove Peer#setCurrConfigBlock
87740dc7c [FAB-14324] extract ledgermgmt#Init from Peer#Init
ad3b7260e [FAB-14324] add Channel accessors and use them
784212e84 [FAB-14324] add Peer#Channel(cid string)
c72b3a63d [FAB-14324] move transient store to Channel
da1c5383d [FAB-14324] remove peer.channelPolicyManagerGetter
591af344f [FAB-14324] remove peer.GetGpolicyManager function
db94aec36 [FAB-14324] remove peer.GetMSPIDs function
6de74333f [FAB-14324] remove peer.GetLedger function
766070d4c [FAB-14324] remove GetCurrConfigBlock function
e2113349c [FAB-14324] remove GetStableChannelConfig function
47ffaa7ae [FAB-14324] unexport peer.OpenStore
c84a78a58 [FAB-14324] remove unused methods from Operations
565134fa4 [FAB-14324] remove GetChannelConfig function
d5d287c59 [FAB-14324] rename peer.chain to peer.Channel
7abed4d1f [FAB-14324] unexport InitChain
d6e76b36f [FAB-14324] remove peer.GetChannelsInfo
9055c6ee9 [FAB-14324] rename CreatChainFromBlock
c9c22f05c [FAB-14324] remove peer.CreateChainFromBlock
22c0be61d [FAB-14324] rename NewGossipService to New
1104f768b [FAB-14324] update named imports in gossip_impl.go
dcc427899 [FAB-14324] unexport service.Gossip interface
dc182a695 [FAB-14324] rename GossipServiceImpl GossipService
e26ceaa80 [FAB-14324] export GossipServiceImpl
7b7f33c88 [FAB-14324] reduce usage of GossipService interface
55a9776e5 [FAB-14324] Move gossip.Gossip to service.Gossip
08d05c86f [FAB-14324] rename gossipServiceImpl GossipImpl
9c39cd3fc [FAB-14324] rename InitGossipService to New
ea0234006 [FAB-14324] remove service.GetGossipService
f3206159c [FAB-14324] remove InitGossip...DeliveryFactory
6c728cfb6 [FAB-14324] simplify buildTrustedRootsForChain
13684636f [FAB-14324] remove peer.InitChain
799b282d9 [FAB-14324] remove peer.Initialize
2b554247f [FAB-14324] move chains to Peer instance
16ddb3562 [FAB-14324] remove peer.chainSupport
8d8da5455 [FAB-14324] move resources from support to chain
4e124d0e1 [FAB-14324] remove unnecessary chainSupport setup
d86ddf888 [FAB-14324] move inline func to chain instance
f76089150 [FAB-14324] remove argument from channel.GetMSPIDs
b4816a655 [FAB-14324] remove mock-only nil check
67c0e3f61 [FAB-14324] move bundleSource to chain
52d625949 [FAB-14324] move ledger from chainSupport to chain
26436dc25 [FAB-14324] remove MockSetMSPIDGetter from peer
14610097e [FAB-14324] move chainInitializer to instance
7d50f55ed [FAB-14324] move pluginMapper to instance
ca613b221 [FAB-14324] move validation semaphore to instance
6c09ad3fb [FAB-14324] remove global peer.ConfigTxProcessors
b9d4ec48b [FAB-14324] kill globals holding tx processors
f3d01d00c [FAB-14324] move SetCurrConfigBlock to instance
0b6309752 [FAB-14324] move GetLocalIP from peer to comm
8a85eaeec [FAB-14324] merge peer_impl back into peer
4e32df312 [FAB-14324] remove peer.TransientStoreFactory
1610c49ea [FAB-14324] move createChain to instance
01f02669d [FAB-14324] InitChain and Initialize to instance
254d757da [FAB-14324] move GetPolicyManager to instance
b02cb0333 [FAB-14324] move GetMSPIDs to instance
9dc246f5e [FAB-14324] move GetLedger to instance
dee65090c [FAB-14324] move GetCurrConfigBlock to instance
3b105cbb3 [FAB-14324] move GetStableChannelConfig to instance
1de0159e3 [FAB-14324] move GetChannelsInfo to instance
093078457 [FAB-14324] Move GetChannelConfig to instance
24e98931e [FAB-14324] move CreateChainFromBlock to instance
4ba31f577 [FAB-14324] rename peerImpl to Peer
827695774 [FAB-14324] remove peer.CollectionSupport
42b6cd8e4 [FAB-14324] remove peer.Support
;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Add set -euo pipefail in fabric-samples scripts,FAB-14325,37941,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,jyellick,jyellick,25/Feb/19 11:01 AM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,fabric-samples,,,,,0,help-wanted,stale-item,,,"There have been a couple of different bugs found in CI recently around the fabric samples FAB-14317 for instance which exhibit odd failure behavior, because a previous failure was not detected.  In the case of FAB-14317, a command failed to produce an artifact, which caused another artifact to be misgenerated, which caused a tool to fail.  All of this could have been spotted at the original failure point of the scripts were set to fail on non-zero exits.",,jyellick,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d53:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Etcdraft orderer failover for no apparent reason under traffic,FAB-14326,37946,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,guoger,guoger,25/Feb/19 4:59 PM,02/Apr/19 2:10 PM,28/Oct/23 3:05 AM,02/Apr/19 2:10 PM,,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"[https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/6034/consoleFull]

 
{code}
14:29:51 [e][OrdererOrg.orderer1] 2019-02-25 06:29:07.863 UTC [orderer.consensus.etcdraft] run -> INFO 0f1 raft.node: 1 elected leader 1 at term 3 channel=systemchannel node=1
14:29:51 [e][OrdererOrg.orderer1] 2019-02-25 06:29:07.892 UTC [orderer.consensus.etcdraft] serveRequest -> INFO 0f2 Raft leader changed: 0 -> 1 channel=systemchannel node=1
14:29:51 [e][OrdererOrg.orderer5] 2019-02-25 06:29:07.893 UTC [orderer.consensus.etcdraft] run -> INFO 0ea raft.node: 5 elected leader 1 at term 3 channel=systemchannel node=5
14:29:51 [e][OrdererOrg.orderer5] 2019-02-25 06:29:07.893 UTC [orderer.consensus.etcdraft] serveRequest -> INFO 0eb Raft leader changed: 0 -> 1 channel=systemchannel node=5
14:29:51 [e][OrdererOrg.orderer4] 2019-02-25 06:29:07.893 UTC [orderer.consensus.etcdraft] run -> INFO 0eb raft.node: 4 elected leader 1 at term 3 channel=systemchannel node=4
14:29:51 [e][OrdererOrg.orderer4] 2019-02-25 06:29:07.893 UTC [orderer.consensus.etcdraft] serveRequest -> INFO 0ec Raft leader changed: 0 -> 1 channel=systemchannel node=4
14:29:51 [e][OrdererOrg.orderer3] 2019-02-25 06:29:07.894 UTC [orderer.consensus.etcdraft] run -> INFO 0df raft.node: 3 elected leader 1 at term 3 channel=systemchannel node=3
14:29:51 [e][OrdererOrg.orderer3] 2019-02-25 06:29:07.894 UTC [orderer.consensus.etcdraft] serveRequest -> INFO 0e0 Raft leader changed: 0 -> 1 channel=systemchannel node=3
14:29:51 STEP: Orderer 1 took over as a leader
14:29:51 [e][OrdererOrg.orderer1] 2019-02-25 06:29:08.881 UTC [orderer.consensus.etcdraft] serveRequest -> INFO 0f3 Start accepting requests as Raft leader at block 554 channel=systemchannel node=1
14:29:51 [e][OrdererOrg.orderer5] 2019-02-25 06:29:15.853 UTC [orderer.consensus.etcdraft] Step -> INFO 0ec 5 is starting a new election at term 3 channel=systemchannel node=5
{code}",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13371,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d67:",,,,Unset,Unset,,,,,,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Apr/19 2:10 PM;guoger;Re-open if hit again;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Race between go-routines in multichannel/blockwriter.go that corrupts Sequence(),FAB-14327,37947,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,tock,tock,tock,25/Feb/19 5:16 PM,07/Mar/19 10:48 PM,28/Oct/23 3:05 AM,26/Feb/19 9:41 PM,,,,,,v1.4.0,,,,fabric-orderer,,,,,0,,,,,"h2. The problem

There is a race between the go-routine that submits a config-update block to the internal thread that writes the (previous) block asynchronously to the ledger.

The race may cause to back-to-back config-update transactions to have bad block metadata - in the first the LAST_CONFIG will be ok, but in the second the LAST_CONFIG will point to the first, rather then the second. This may happen independently in different ledgers, creating a *fork*.
h2. The mechanism

The race manifests itself in the following manner. 
 Assume two config-updates TXs (t1 t2) that arrive back to back, and packed into blocks B1 B2.
 The go-routine (SUB) that submits B1 take a lock, spawns a go-routine (WR), and lets it write B1 to disk. see:
{quote}func (bw *BlockWriter) WriteBlock(block *cb.Block, encodedMetadataValue []byte)
{quote}
As part of it work, go-routine WR will call

 
{code:java}
func (bw *BlockWriter) addLastConfigSignature(block *cb.Block) {
       configSeq := bw.support.Sequence()
       if configSeq > bw.lastConfigSeq { 
             ...
             bw.lastConfigBlockNum = block.Header.Number 
             bw.lastConfigSeq = configSeq 
       }
...
}
 {code}
 However, the go-routine SUB continues, and if it is fast enough,  will grab B2, and call 

 
{code:java}
 func (bw *BlockWriter) WriteConfigBlock(block *cb.Block, encodedMetadataValue []byte) {code}
with it. In there, it will call
{code:java}
      bw.support.Update(bundle)
	...
      bw.WriteBlock(block, encodedMetadataValue)
{code}
That is, it may update the StableBundle before the WR go-routine has a chance to read Sequence from it. The first block will be OK, as
{quote}configSeq > bw.lastConfigSeq
{quote}
is still true, although (configSeq = bw.lastConfigSeq+2), rather then (configSeq = bw.lastConfigSeq+1).

In the second block,
{quote}configSeq > bw.lastConfigSeq
{quote}
will NOT hold, and the LAST_CONFIG index will remain pointing to the first block, rather than the first.

This can create a fork between orderers:

O1 blocks: B1 B2
 O1 lastConf: 1 2

O2 blocks: B1 B2
 O2 lastConf: 1 1

 

 Moreover, if a config block overruns a normal block, it can cause a normal block to point to itself as last-config.
h2.  Proposed solutions

There are several possible solutions:
 # Cancel the ""pipeline"" and have go-routine SUB go all the way to disk.
 # Have the go-routine SUB wait for go-routine WR to finish before updating the Bundle.
 # Pass the seq := support.Sequence() to the go-routine WR as a parameter rather than let it access StableBundle 

 

Solution (1) is the safest but has performance issues.

Solution (2) is easy:
{code:java}
// Avoid Bundle update before the go-routine in WriteBlock() finished writing the previous block.
// Avoid Bundle update before the go-routine in WriteBlock() finished writing the previous block. 
// We do this (in particular) to prevent bw.support.Sequence() from advancing before the go-routine read it. 
// In general, this prevents the StableBundle from changing before the go-routine in WriteBlock() finishes. 
bw.committingBlock.Lock() 
bw.committingBlock.Unlock() 
bw.support.Update(bundle) 

{code}
Thus will block go-routine SUB until go-routine WR finishes before updating the Bundle.

Solution (3) is ad-hoc in protecting just the sequence.

*Preferred short term solution: is (2)*

*In the peer:* it is also advisable to improve validation of the metadata in the peer: check that a config block's last-config always points to itself, check that a normal block's last-config never points to itself.
h2. How to reproduce

Start two Kafka orderers O1 O2. Stop one of them, say O2. Run several config-txs back to back through O1. Now restart O2. The orderer O2 will consume the Txs from Kafka as fast as it can and will, with high probability, manifest this bug. Check the metadata of the ledger @O2:  
 * check that a config block's last-config always points to itself,
 * check that a normal block's last-config never points to itself.

 

In the logs - this will show like this:
{code:java}
[e][OrdererOrg.orderer3] 2019-02-24 22:57:27.900 IST [orderer.consensus.kafka] processMigrationStep -> INFO 039 [channel: systemchannel] Consensus-type migration: Processing confi
g tx: type: kafka, state: MIG_STATE_ABORT, context: 3
[e][OrdererOrg.orderer3] 2019-02-24 22:57:27.977 IST [orderer.consensus.migration] stepSystem -> INFO 055 Consensus-type migration: Accepted ABORT Config tx on system channel chan
nel=systemchannel
[e][OrdererOrg.orderer3] 2019-02-24 22:57:27.981 IST [orderer.consensus.kafka] processRegular -> INFO 057 [channel: systemchannel] Committed config message with offset 6
[e][OrdererOrg.orderer3] 2019-02-24 22:57:27.992 IST [orderer.consensus.kafka] processMigrationStep -> INFO 05b [channel: systemchannel] Consensus-type migration: Processing confi
g tx: type: kafka, state: MIG_STATE_START, context: 0
[e][OrdererOrg.orderer3] 2019-02-24 22:57:27.992 IST [orderer.consensus.migration] stepSystem -> INFO 05d Consensus-type migration: Accepted START Config tx on system channel; Sta
tus: State=MIG_STATE_START, Context=5, Sys=true channel=systemchannel
[e][OrdererOrg.orderer3] 2019-02-24 22:57:27.984 IST [orderer.commmon.multichannel] addLastConfigSignature -> DEBU 058 [channel: systemchannel] Detected lastConfigSeq transitionin
g from 1 to 2, setting lastConfigBlockNum from 3 to 4
[e][OrdererOrg.orderer3] 2019-02-24 22:57:27.998 IST [orderer.commmon.multichannel] addLastConfigSignature -> DEBU 05f [channel: systemchannel] About to write block, setting its L
AST_CONFIG to 4
[e][OrdererOrg.orderer3] 2019-02-24 22:57:28.017 IST [orderer.commmon.multichannel] commitBlock -> DEBU 06c [channel: systemchannel] Wrote block 4
[e][OrdererOrg.orderer3] 2019-02-24 22:57:28.017 IST [orderer.consensus.kafka] processRegular -> INFO 06d [channel: systemchannel] Committed config message with offset 7
[e][OrdererOrg.orderer3] 2019-02-24 22:57:28.020 IST [orderer.consensus.kafka] processMigrationStep -> INFO 06e [channel: systemchannel] Consensus-type migration: Processing config tx: type: etcdraft, state: MIG_STATE_COMMIT, context: 5
[e][OrdererOrg.orderer3] 2019-02-24 22:57:28.021 IST [orderer.consensus.migration] stepSystem -> INFO 070 Consensus-type migration: Accepted COMMIT Config tx on system channel; St
atus: State=MIG_STATE_COMMIT, Context=5, Sys=true channel=systemchannel
[e][OrdererOrg.orderer3] 2019-02-24 22:57:28.021 IST [orderer.consensus.kafka] func2 -> INFO 071 [channel: systemchannel] Consensus-type migration: Replaced bootstrap file: /tmp/e2e928641347/orderers/OrdererOrg.orderer3/systemchannel_block.pb; Status: State=MIG_STATE_COMMIT, Context=5, Sys=true

VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV

[e][OrdererOrg.orderer3] 2019-02-24 22:57:28.028 IST [orderer.commmon.multichannel] addLastConfigSignature -> DEBU 073 [channel: systemchannel] Detected lastConfigSeq transitioning from 2 to 4, setting lastConfigBlockNum from 4 to 5

^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

[e][OrdererOrg.orderer3] 2019-02-24 22:57:28.028 IST [orderer.commmon.multichannel] addLastConfigSignature -> DEBU 074 [channel: systemchannel] About to write block, setting its LAST_CONFIG to 5
                                                 ^^^^^^^^^^^^^^^^ 

[e][OrdererOrg.orderer3] 2019-02-24 22:57:28.039 IST [orderer.commmon.multichannel] commitBlock -> DEBU 07a [channel: systemchannel] Wrote block 5
[e][OrdererOrg.orderer3] 2019-02-24 22:57:28.039 IST [orderer.consensus.kafka] processRegular -> INFO 07b [channel: systemchannel] Committed config message with offset 8
[e][OrdererOrg.orderer3] 2019-02-24 22:57:28.039 IST [orderer.commmon.multichannel] addLastConfigSignature -> DEBU 07c [channel: systemchannel] About to write block, setting its LAST_CONFIG to 5
                                                 ^^^^^^^^^^^^^^^^

[e][OrdererOrg.orderer3] 2019-02-24 22:57:28.056 IST [orderer.commmon.multichannel] commitBlock -> DEBU 07e [channel: systemchannel] Wrote block 6
 {code}
 

 Where block 5 and block 6 are two config transactions.",,adarshsaraf123,C0rWin,guoger,kchristidis,tock,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d6f:",,,,Unset,Unset,,,,"Start two Kafka orderers O1 O2. Stop one of them, say O2. Run several config-txs back to back through O1. Now restart O2. The orderer O2 will consume the Txs from Kafka as fast as it can and will, with some probability, manifest this bug. Check the metadata of the ledger @O2:  
 (1) check that a config block's last-config always points to itself,
 (2) check that a normal block's last-config never points to itself.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),adarshsaraf123,C0rWin,guoger,kchristidis,tock,yacovm,,,,,,mergify/bp/release-2.2/pr-4374,release-1.3,release-1.4,release-2.5,release-2.4,release-1.1,main,release-1.2,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Feb/19 9:25 PM;guoger;https://gerrit.hyperledger.org/r/c/29535/;;;","26/Feb/19 9:42 PM;kchristidis;Great write-up.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
De-vipererize gossip discovery ,FAB-14328,37948,32906,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,25/Feb/19 5:18 PM,06/Apr/19 5:37 PM,28/Oct/23 3:05 AM,26/Feb/19 8:28 AM,,,,,,,,,,fabric-gossip,,,,,0,hygiene,,,,"Inject configuration of discovery via struct, and not through viper getter invocations.

Have the viper config at higher levels.",,hagarm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d6n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Feb/19 5:21 PM;hagarm;https://gerrit.hyperledger.org/r/#/c/29531/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Incorrect sample configuration file and documentation for  orderer,FAB-14329,37949,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Duplicate,,fedyiv,fedyiv,25/Feb/19 6:03 PM,19/Nov/19 3:17 AM,28/Oct/23 3:05 AM,19/Nov/19 3:17 AM,,,,,,v1.4.1,v2.0.0,,,,,,,,1,,,,,"Dears,

I was trying to set up gathering prometheus metrics over TLS from orderer and found a bug which prevented  it.

 

Here it is:
 From snippet below, one can see that orderer takes *ClientCACertFiles* from *ops.TLS.ClientRootCAs*

*orderer/server/main.go:* 
{code}
func newOperationsSystem(ops localconfig.Operations, metrics localconfig.Metrics) *operations.System {
	return operations.NewSystem(operations.Options{
		Logger:        flogging.MustGetLogger(""orderer.operations""),
		ListenAddress: ops.ListenAddress,
		Metrics: operations.MetricsOptions{
			Provider: metrics.Provider,
			Statsd: &operations.Statsd{
				Network:       metrics.Statsd.Network,
				Address:       metrics.Statsd.Address,
				WriteInterval: metrics.Statsd.WriteInterval,
				Prefix:        metrics.Statsd.Prefix,
			},
		},
		TLS: operations.TLS{
			Enabled:            ops.TLS.Enabled,
			CertFile:           ops.TLS.Certificate,
			KeyFile:            ops.TLS.PrivateKey,
			ClientCertRequired: ops.TLS.ClientAuthRequired,
			ClientCACertFiles:  ops.TLS.ClientRootCAs,
		},
		Version: metadata.Version,
	})
}
{code}
 While in documentation and in the sample config file which is shipped with docker image goes *RootCAs* variable.

 
{code}
Operations:     # host and port for the operations server
    ListenAddress: 127.0.0.1:8443

    # TLS configuration for the operations endpoint
    TLS:         # TLS enabled
     ...

        # Paths to PEM encoded ca certificates to trust for client authentication
        RootCAs: []
{code}
 

Firstly this is misleading documentation, and secondly it is impossible to override such incorrect config using environment variables. 

I suggest to changed it in docs and in configs to  *ClientRootCAs*  to make it in line with peer configuration.

*P.S.:*  The workaround is to use your own *orderer.yaml* with *ClientRootCAs*  configured or just being empty, in which case environmental variables will be working, But it is not very pretty.

 ",,btl5037,fedyiv,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14709,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d6v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,fedyiv,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jul/19 3:50 AM;btl5037;This issue appears to have already been corrected in the current 1.4 and 2.0 (master) branches? What is the version tag on the Docker image your Orderer container was built from?;;;","24/Jul/19 5:07 PM;fedyiv;Hi Brett, I believe it was fixed under FAB-14709 in 1.4.1 and 2.0

 

But docker image with tag 1.4.0 is still affected, as it was updated before the fix was done:

*hyperledger/fabric-orderer 1.4.0 54f372205580 6 months ago 150MB*;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Add connection profiles for BYFN and EYFN,FAB-14330,37950,35374,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sstone1,sstone1,sstone1,25/Feb/19 8:34 PM,25/Apr/19 10:05 PM,28/Oct/23 3:05 AM,25/Apr/19 10:05 PM,,,,,,v1.4.2,v2.0.0,,,fabric-samples,,,,,0,,,,,"Add connection profiles as part of the BYFN and EYFN samples. The connection profiles can be used by client applications using the Fabric SDKs to connect to those networks.

Each organisation needs its own connection profile that contains the set of peers that organisation should use to connect to the network. Orderers and channels are not needed, as they can be determined by using service discovery.

Connection profiles can be specified in either JSON or YAML, so provide both.",,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d73:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sstone1,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Feb/19 8:37 PM;sstone1;https://gerrit.hyperledger.org/r/#/c/29532/ (master)
https://gerrit.hyperledger.org/r/#/c/29533/ (release-1.4);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Integration test - ""checks when CouchDB is unavailable"" fails in CI",FAB-14331,37952,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,skarim,C0rWin,C0rWin,25/Feb/19 9:48 PM,19/Mar/19 7:57 PM,28/Oct/23 3:05 AM,01/Mar/19 12:35 AM,v1.4.0,,,,,v1.4.1,,,,fabric-peer,,,,,0,ci-flake,,,,"Recently discovered following failures in CI 

{quote}
12:19:05 ------------------------------
12:19:05 • Failure [33.291 seconds]
12:19:05 Health CouchDB health checks when CouchDB is unavailable [It] fails the health check 
12:19:05 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/health_test.go:134
12:19:05 
12:19:05   Expected error:
12:19:05  [# ]    <*json.SyntaxError | 0xc0004209e0>: {
12:19:05           msg: ""unexpected end of JSON input"",
12:19:05           Offset: 0,
12:19:05       }
12:19:05       unexpected end of JSON input
12:19:05   not to have occurred
12:19:05 
12:19:05   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/health_test.go:257
{quote}

The failure is quite flaky. 

Failures encountered at following build: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/6047/console (logs attached).

Here is another example: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/6048/console",,C0rWin,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Feb/19 9:46 PM;C0rWin;console.log.gz;https://jira.hyperledger.org/secure/attachment/16859/console.log.gz",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d7j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,skarim,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Feb/19 3:28 AM;denyeart;I hit the same problem in release-1.4 today:

[https://gerrit.hyperledger.org/r/#/c/29523/]

[https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/6084/console]

 ;;;","27/Feb/19 3:31 AM;skarim;https://gerrit.hyperledger.org/r/c/29608/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
"Disable brittle test - ""checks when CouchDB is unavailable""",FAB-14332,37953,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,25/Feb/19 9:49 PM,01/Mar/19 12:36 AM,28/Oct/23 3:05 AM,01/Mar/19 12:36 AM,v1.4.0,,,,,v1.4.1,,,,,,,,,0,,,,,Disable {{checks when CouchDB is unavailable}} commit which intermittently fails in CI.,,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d7r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Feb/19 10:22 PM;C0rWin;https://gerrit.hyperledger.org/r/29534;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Enable ""checks when CouchDB is unavailable"" test",FAB-14333,37954,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,skarim,C0rWin,C0rWin,25/Feb/19 9:50 PM,01/Mar/19 12:37 AM,28/Oct/23 3:05 AM,01/Mar/19 12:37 AM,v1.4.0,,,,,v1.4.1,,,,,,,,,0,,,,,Once FAB-14331 fixed need to enable {{checks when CouchDB is unavailable}} test back.,,C0rWin,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d7z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,skarim,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Feb/19 3:31 AM;skarim;https://gerrit.hyperledger.org/r/c/29608/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Token (base support) - Non-fungible tokens,FAB-14334,37956,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,KaoutarEL,KaoutarEL,KaoutarEL,25/Feb/19 10:44 PM,13/Jan/20 11:42 PM,28/Oct/23 3:05 AM,13/Jan/20 11:42 PM,,,,,,,,,,fabric-token,,,,,0,fabtoken,stale-item,,,"This epic relates to supporting non-fungible tokens on FabToken.

Initial design for the non-fungible tokens can be found here: 
https://docs.google.com/presentation/d/19F1WIm11NX8rdIX6C0pS_lxtOLvFM9ybGGz_rhpSWKo/edit

We aim at providing the following functionalities:
* Issue
* Transfer
* Redeem
* List",,bur,geahaad,huxd,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,ghx-label-10,,Non-fungible Tokens Support,To Do,No,,Unset,No,,,"1|i00d8f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bur,geahaad,huxd,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Issue for non-fungible tokens,FAB-14335,37957,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,KaoutarEL,KaoutarEL,KaoutarEL,25/Feb/19 10:44 PM,13/Jan/20 11:42 PM,28/Oct/23 3:05 AM,13/Jan/20 11:42 PM,,,,,,,,,,,,,,,0,fabtoken,stale-item,,,"This story aims at providing an e2e flow, not considering the client SDK or the client cli, to allow the client to issue non-fungible tokens. This includes:

* The definition of the protobuf messages
* An update of the client API together with the prover peer's 
*  An update of the issuer and the verifier 
* The implementation of e2e tests",,bur,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14334,,,No,,Unset,No,,,"1|i00d8n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bur,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Transfer for non-fungible tokens,FAB-14336,37958,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,25/Feb/19 10:45 PM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,0,stale-item,,,,"This story aims at providing an e2e flow, not considering the client SDK or the client cli, to allow the client to transfer their non-fungible tokens. This includes:

* The definition of the protobuf messages
* An update of the client API together with the prover peer's
* An update of the transactor and the verifier
* The implementation of e2e tests

",,KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14334,,,No,,Unset,No,,,"1|i00d8v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Redeem for non-fungible tokens,FAB-14337,37959,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,25/Feb/19 10:45 PM,13/Jan/20 11:41 PM,28/Oct/23 3:05 AM,13/Jan/20 11:41 PM,,,,,,,,,,,,,,,0,fabtoken,stale-item,,,"This story aims at providing an e2e flow, not considering the client SDK or the client cli, to allow the client to redeem their non-fungible tokens. This includes:

* The definition of the protobuf messages
* An update of the client API together with the prover peer's
* An update of the transactor and the verifier
* The implementation of e2e tests",,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14334,,,No,,Unset,No,,,"1|i00d93:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
List for non-fungible tokens,FAB-14338,37960,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,25/Feb/19 10:46 PM,13/Jan/20 11:41 PM,28/Oct/23 3:05 AM,13/Jan/20 11:41 PM,,,,,,,,,,,,,,,0,fabtoken,stale-item,,,"This story aims at providing an e2e flow, not considering the client SDK or the client cli, to allow the client list their non-fungible tokens. This includes:

* The definition of the protobuf messages
* An update of the client API together with the prover peer's
* An update of the transactor
* The implementation of e2e tests",,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14334,,,No,,Unset,No,,,"1|i00d9b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable ledger state listener to query on the hashes for private data,FAB-14339,37962,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,25/Feb/19 11:53 PM,04/Apr/19 10:59 PM,28/Oct/23 3:05 AM,04/Apr/19 10:59 PM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,The query executor passed to the state listener exposes the functions for querying the data in the public space. Extend this mechanism to hashes of private data.,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00d9r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable initialization of a ledger state listener,FAB-14340,37963,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,26/Feb/19 12:00 AM,04/Apr/19 10:58 PM,28/Oct/23 3:05 AM,04/Apr/19 10:58 PM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,"In some cases, it is useful to give a callback to the ledger StateListener at the time of opening the ledger. This may particularly be useful where a StateListener maintains a cache.

Introduce a function - 'Initialize' to StateListenner that gets invoked at the time of ledger opening by giving access to the query executor.",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00d9z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update versioning in fabric test scripts,FAB-14342,37969,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,vijaypunugubati,vijaypunugubati,vijaypunugubati,26/Feb/19 2:17 AM,12/Mar/19 10:34 PM,28/Oct/23 3:05 AM,12/Mar/19 10:34 PM,v1.4.0,,,,,v1.4.0,,,,fabric-quality,,,,,0,,,,,"Update the LATEST_TAG with development version in the fabric-test release-1.4 branch in pulldockerimages script and pullbinaries script as well. since fabric, fabric-ca repo's are updated to 1.4.1 in nexus.

To maintain version consistently, update the BASE_VERSION and also include the BASEIMAGE_RELEASE in the makefile of the fabric-test repo.

 ",,latitiah,rameshthoomu,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dav:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,rameshthoomu,scottz,vijaypunugubati,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/19 1:05 AM;vijaypunugubati;https://gerrit.hyperledger.org/r/#/c/29223/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration test flake in Kafka2RaftMigration,FAB-14343,37970,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,tock,denyeart,denyeart,26/Feb/19 3:36 AM,04/Dec/19 5:27 AM,28/Oct/23 3:05 AM,04/Dec/19 5:27 AM,,,,,,,,,,fabric-orderer,,,,,1,ci-flake,,,," 

{code:java}
18:09:42 Summarizing 1 Failure:
18:09:42 
18:09:42 [Fail] Kafka2RaftMigration kafka2raft migration kafka side [BeforeEach] executes kafka2raft system channel green path 
18:09:42 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/migration_test.go:99
{code}

 

{color:#172b4d}[https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/6085/console]{color}

 ",,C0rWin,caod,denyeart,guoger,jyellick,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13371,,,"17/Jul/19 1:10 PM;jyellick;flake.txt;https://jira.hyperledger.org/secure/attachment/17608/flake.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00db3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,caod,denyeart,guoger,jyellick,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Feb/19 3:38 AM;denyeart;[~tock] [~kchristidis] FYI;;;","26/Feb/19 5:19 PM;tock;I suspect that there is interference between the previous test 
{quote}*19:54:32* Health Kafka health checks when running health checks on orderer the kafka health check returns appropriate response code

*19:54:32* /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/health_test.go:198
{quote}
and this one, they both use Kafka. I suspect that the Kafka from the previous test did not shutdown correctly or the new Kafka was slow to start...;;;","01/Apr/19 11:39 PM;C0rWin;https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7865/console;;;","16/Apr/19 12:16 PM;guoger;Test is removed as part of effort to redo migration.;;;","17/Jul/19 1:10 PM;jyellick;I'm still seeing this flake on master?

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/10271/consoleFull;;;","17/Jul/19 1:57 PM;guoger;[~jyellick] I think it's CI network problem?
{code}
11:47:41 [e][Org2.peer0] Error: failed to initialize operations subsystems: listen tcp 127.0.0.1:38018: bind: address already in use
{code};;;","18/Jul/19 4:01 AM;jyellick;https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/10299/console another instance;;;","01/Aug/19 1:39 AM;jyellick;[https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/10740/console] ;;;","04/Dec/19 5:27 AM;caod;Closing as we've now moved to Azure pipelines and haven't seen this flake in some time. Reopen as needed if seen again on Azure.;;;",,,,,,,,,,,,,,,,,,,,
"intermittent test failure in etcdraft integration test ""[It] isn't influenced by outdated orderers""",FAB-14344,37971,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,sykesm,sykesm,26/Feb/19 4:03 AM,01/Apr/19 9:55 PM,28/Oct/23 3:05 AM,01/Apr/19 9:55 PM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"{code}
EndToEnd reconfiguration and onboarding when an orderer node is joined [It] isn't influenced by outdated orderers 
13:56:28 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/etcdraft_reconfig_test.go:573
{code}

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/6087/console
https://gerrit.hyperledger.org/r/c/29174/

Will post logs when available",,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14472,,,,,,,,,,"26/Feb/19 4:21 AM;sykesm;console-timestamp.log.gz.txt;https://jira.hyperledger.org/secure/attachment/16864/console-timestamp.log.gz.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dbb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Mar/19 2:08 AM;sykesm;Hit again: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/6399/console;;;","01/Mar/19 2:43 AM;yacovm;FAB-14413;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove integration/runner tests,FAB-14345,37972,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,26/Feb/19 4:28 AM,28/Feb/19 12:18 AM,28/Oct/23 3:05 AM,28/Feb/19 12:18 AM,,,,,,v2.0.0,,,,fabric-common,,,,,0,hygiene,ipm,ipm-planned,,"The runners are used within the test suites and, given the time our tests take to execute, don't need to be explicitly tested.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dbj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer gets removed from orderer system channel when created application channel without including it in consenters list,FAB-14346,37973,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,guoger,suryalnvs,suryalnvs,26/Feb/19 4:30 AM,07/Mar/19 3:47 AM,28/Oct/23 3:05 AM,07/Mar/19 3:47 AM,v2.0.0,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,raft,watchlist,,,"h2. Observed:

After launching network with 4 orderers in the orderersystemchannel, created channel ""testorgschannel2"" without orderer4 in the consenters list, then orderer4 was removed from orderersystemchannel (automatically, NOT part of the test) and the following was seen in orderer4 logs 
{code:java}
Feb 25 13:15:39 orderer4th-ordererorg-7fdfb59d94-6gdds orderer4th-ordererorg 2019-02-25 18:15:39.191 UTC [orderer.consensus.etcdraft] apply -> INFO 7f7e Applied config change to remove node 4, current nodes in channel: [1 2 3] channel=orderersystemchannel node=4
{code}
Noted below are [~jyellick]'s observations(from slack):
 * What I strongly suspect is going on above, is that the orderer is treating the channel creation tx as a config update (which it is, but to another channel). Likely we have not noticed this before as the updates have not modified the consenter config. I had [~suryalnvs] check the orderer system channel and its config is in fact unchanged.
 * I'm coming at this from the outside, but I _suspect_ that based on the way that the blockwriter was written, that Raft categorizes transactions as either ""normal"" or ""config"", and that channel creation transactions are being classified as ""config"" (good, they should be). However, because they are categorized as a config transaction, the Raft code is inspecting the config contained here and realizing that the update made to the template config removed an orderer and is inappropriately applying it as an update to the orderer system channel. I expect that the fix is essentially to detect when the config update is being done to the template and not to the real orderer system channel and ignore it. Of course this is 90+% speculation based on the symptoms
 * Based on the fact that when [~suryalnvs] pulled the orderer system channel config and the set of consenters still contained all four (while the log indicates the fourth was removed), I do not believe this is a `configtxgen` related bug

 

Attached orderer4th log : orderer4th-FAB-13702.log 

 ",,denyeart,guoger,scottz,suryalnvs,,,,,,,,,,,,,,,,,FAB-13702,,,,,,,,,,,,,,,,,,,,"26/Feb/19 4:34 AM;suryalnvs;orderer4th-FAB-13702.log;https://jira.hyperledger.org/secure/attachment/16865/orderer4th-FAB-13702.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dbr:",,,,Unset,Unset,,,,"Follow steps described  in FAB-13702.

Enable V2_0 capabilities for orderer in configtx.yaml

Command for channel config transaction creation: configtxgen -profile OrgChannel -channelCreateTxBaseProfile OrdererGenesis -channelID testorgschannel1 -outputCreateChannelTx testorgschannel1.tx

Using testorgschannel1.tx, create the channel testorgschannel1",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,guoger,scottz,suryalnvs,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/19 2:04 PM;guoger;https://gerrit.hyperledger.org/r/c/29693
https://gerrit.hyperledger.org/r/c/29694;;;","05/Mar/19 11:48 PM;denyeart;Merged in master, need CRs for release-1.4.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Ensure port assignments in integration tests take parallel node into consideration,FAB-14347,37974,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,26/Feb/19 4:35 AM,02/Mar/19 4:13 AM,28/Oct/23 3:05 AM,02/Mar/19 4:13 AM,,,,,,v2.0.0,,,,fabric-common,,,,,0,hygiene,ipm,ipm-planned,,"Many network instances generated in our integration tests suites use a hard coded number without consideration for parallel execution. We need to fix that.

As part of this work, we should
- reserve a range of 1000 ports per suite that can be used; this base port should be configured in each of the suites. This port should be in the 30-40k range. These may overlap if necessary as suites are currently run one at a time.
- as networks are created within the suite, each node should reserve 100 ports for the network.

Basically, networks are created with {{networkBase = suiteBase + (ParallelNode() - 1) * 100}}.

At the end of this work, we should not encounter port conflicts when running integration tests with {{ginkgo -r -p}}.",,btl5037,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dbz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/19 1:58 AM;btl5037;https://gerrit.hyperledger.org/r/c/29668/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Lazily build component binaries for integration test suite,FAB-14348,37975,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,26/Feb/19 4:41 AM,28/Feb/19 12:18 AM,28/Oct/23 3:05 AM,28/Feb/19 12:18 AM,,,,,,v2.0.0,,,,fabric-common,,,,,0,hygiene,ipm,ipm-planned,,"Each integration test suite starts by building the binaries for each of the fabric components. As the binaries are used, the path to the built artifact is used to generate the command.

This works pretty well but is somewhat wasteful when we run suites that don't need one or more of the binaries (eg. token) or when we are skipping the execution of a suite with the focus or skip options on ginkgo as those options still execute BeforeSuite.

One option is to add serialized build logic to each of the accessors on nwo.Components to lazily build the binaries. This should remove the need to explicitly call Build from each suite.

We can then decide if we want to leave build (enable explicit calls) or remove the function entirely.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dc7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove execute bit from files that are not executables,FAB-14349,37976,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,26/Feb/19 4:52 AM,20/Mar/19 3:43 PM,28/Oct/23 3:05 AM,01/Mar/19 12:26 AM,,,,,,v2.0.0,,,,,,,,,0,hygiene,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dcf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Feb/19 5:08 AM;sykesm;https://gerrit.hyperledger.org/r/29553;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
RAFT test with large number of channels,FAB-14350,37977,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,26/Feb/19 5:03 AM,30/Apr/19 5:54 AM,28/Oct/23 3:05 AM,30/Apr/19 5:54 AM,v2.0.0,,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,watchlist,,,"h2. Summary

This objective of this test is to evaluate the functional impact of a network with large number of channels under heavy traffic

h2. Setup

Same setup as in FAB-13601, with the following differences:
 # create 500 channels: {{channel1-channel500}}
 # install/instantiate samplcc chaincode on all channels
 # 3 peers with 1 peer/org
 # 3 orderers in orderersystemchannel
 # {{batchSize.maxMessageCount}}: 500
 # logging level set to {{info}} (and if we see errors, then we can re-run test with debug-level logs in the orderer package per FAB-13597)

h2. Inputs
 # Start 1 thread transaction to one org's peer for each channel, total 500 threads
 # Each thread sends 10K invokes, using PTE constant mode, i.e. sending next transaction as soon as the previous one is sent to and ACK'd received by the ingress orderer.  Total 5M transactions.
 # All transactions from a single thread will target the same orderer.

h2. Expectations
 # No errors in the logs of peers and orderers.
 # No failures or errors reported by PTE.
 # All transaction events are received by PTE.",,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14497,FAB-14499,FAB-14500,FAB-14502,,,,"27/Feb/19 7:07 AM;dongming;FAB-14350-orderer1st.log.gz;https://jira.hyperledger.org/secure/attachment/16873/FAB-14350-orderer1st.log.gz","27/Feb/19 7:08 AM;dongming;FAB-14350-orderer2nd.log.gz;https://jira.hyperledger.org/secure/attachment/16874/FAB-14350-orderer2nd.log.gz","27/Feb/19 7:07 AM;dongming;FAB-14350-orderer3rd.log.gz;https://jira.hyperledger.org/secure/attachment/16875/FAB-14350-orderer3rd.log.gz","27/Feb/19 7:07 AM;dongming;leader.PNG;https://jira.hyperledger.org/secure/attachment/16876/leader.PNG","28/Feb/19 6:12 AM;dongming;observations.txt;https://jira.hyperledger.org/secure/attachment/16881/observations.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|i006zc:",,,,Unset,Unset,Week ending 2019-Mar-08,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"Attachment observations.txt describes many confusing logs and potential issues; we will open bugs to track each unique one to capture investigation explanations (and fixes where needed).
Marked as Executing because we are rerunning variations of this testcase with different numbers of channels and traffic volume in an effort to identify what we can support in our test environment without those problems:
0: change logspec to WARNING in orderers
1. Create 500 channels, and run traffic on 50.
2. If that looks ok, then (still with 500 channels) run traffic on 100.
3. If that looks ok, then increase by 50. Repeat until problems resurface, and then investigate.
4. Repeat where we left off, but this time change the port used for step messages so that it is different than the one used for invokes. Maybe that will help. Refer to:
Orderer_General_Cluster_ListenPort
Orderer_General_Cluster_ListenAddress
Orderer_General_Cluster_ServerCertificate
Orderer_General_Cluster_ServerPrivateKey
",System Test,,(Please add usage information),dongming,scottz,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"27/Feb/19 1:14 AM;dongming;I am able to create 500 channels and install/instantiate chaincode on all channels. Now I am working on setting up VMs to execute PTE.;;;","27/Feb/19 7:07 AM;dongming;I ran 500 threads from 5 VMs and observed ""SERVICE_UNAVAILABLE"".

info: [2019-02-26T21:12:05.897Z PTE 67 main]: stdout: info: [2019-02-26T21:12:05.804Z PTE 67 exec]: [Nid:chan:org:id=0:testorgschannel368:org2:0 invoke_move_dist_evtBlock] failed to sendTransaction status: {""status"":""SERVICE_UNAVAILABLE"",""info"":""no Raft leader""}

In one instance, channel 98 lost leader for 5 min.  See attached orderer logs and leader graph of channel 98.

We may need to reduce the number of channels to find out the max number of channel that the network can support.;;;","28/Feb/19 6:11 AM;dongming;After looking channel139 in the logs, my observations in included in the observations.txt:
1. SERVICE_UNAVAILABLE
2. Why the leader is 0 instead of 1, or, 2 or, 3?  does 0 mean no leader?
3. term mismatch between orderers, 6 seconds after orderer 1 becomes leader for term 31, orderer 2 is still in term 30.
4. orderer 1 became leader but stepped down in 25 seconds because of quorum is inactive
5. there are 11 starting a new election in 5 min 15 seconds
6. send queue overflown
7. consenter error (no leader)
8. Aborting deliver
9. handshake error
10. Error from reading channel;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
TestAccept failed in the daily unit-tests as deadline exceeded in gossip tests,FAB-14353,37983,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,sambhavdutt,sambhavdutt,26/Feb/19 11:19 PM,19/Mar/19 7:57 PM,28/Oct/23 3:05 AM,03/Mar/19 9:01 PM,v1.4.0,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"TestAccept (comm_test)failed in the daily unit-tests as deadline exceeded during gossip,

*Intermittent:* No
*Branch:* release-1.4
*Platform:* s390x
*Error Snippet:*

{code:java}
20:22:39 [33m2019-02-25 20:22:05.857 EST [gossip.comm#1111] sendToEndpoint -> WARN 010[0m Failed obtaining connection for localhost:2222, PKIid:6c6f63616c686f73743a32323232 reason: context deadline exceeded
20:22:39 --- FAIL: TestAccept (10.01s)
20:22:39     comm_test.go:916: 
20:22:39         	Error Trace:	comm_test.go:916
20:22:39         	            				comm_test.go:744
20:22:39         	Error:      	Not equal: 
20:22:39         	            	expected: 20
20:22:39         	            	actual  : 6
20:22:39         	Test:       	TestAccept
20:22:39         	Messages:   	Didn't receive all messages sent
{code}

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-release-1.4-s390x/16/",,C0rWin,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14140,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,d423beb9c68fe3d9c3ccf11d35d55a0c12ac3260,Unset,No,,,"1|i00ddz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add chaincode lifecycle to BYFN Tutorial,FAB-14354,37984,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,negupta,negupta,negupta,26/Feb/19 11:32 PM,01/Apr/19 12:58 AM,28/Oct/23 3:05 AM,01/Apr/19 12:58 AM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,fabric-doc,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00de7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Mar/19 11:32 AM;negupta;https://gerrit.hyperledger.org/r/#/c/29611/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Error message should note the missing information,FAB-14356,37989,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Environment Issue,,latitiah,latitiah,27/Feb/19 1:08 AM,27/Feb/19 6:07 AM,28/Oct/23 3:05 AM,27/Feb/19 6:07 AM,,,,,,,,,,,,,,,0,,,,,"When the chaincode name is not passed to the command, the error message should say that the chaincode name is missing. 

Command:
{code}peer lifecycle chaincode querycommitted --channelID behavesystest {code}

Returns the following: 
{code}Error: bad response: 500 - failed to invoke backing implementation of \'QueryChaincodeDefinition\': namespace  is not defined\n{code}

Note the empty string where the name is expected.",,latitiah,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14299,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00dfb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Feb/19 6:02 AM;wlahti;If you checkout https://gerrit.hyperledger.org/r/c/29606 you'll notice this has already been addressed. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Dynamically Onboard an OSN and removing an existing OSN from application channel, while traffic is running",FAB-14357,37990,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,bharadwajambati1,bharadwajambati1,27/Feb/19 1:45 AM,24/Jul/19 5:49 AM,28/Oct/23 3:05 AM,24/Jul/19 5:49 AM,,,,,,v1.4.2,v2.0.0,,,fabric-quality,,,,,0,raft,watchlist,,,"Repeat FAB-13861 with these differences:

In the INPUTS section, after step 4, while the new orderer4 is onboarding:
 * Start running the traffic for 1 hour with constant PTE mode
 * After 30 minutes of the traffic runs, onboard the orderer4 to the ordererSystemChannel
 * Launch orderer4 using the latest config block from the ordererSystemChannel
 * Onboard orderer4 to the Application Channel
 * Watch orderer4 as it pulls the blocks for the application channel. 
 * After orderer4 is synced with all the blocks, remove one of the orderers (orderer1, orderer2, orderer3) from the application channel (not the ingress orderer)",,bharadwajambati1,guoger,kchristidis,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14753,FAB-14754,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|hzwqrp:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"These test steps passed - except that the removals were done without traffic running.
We are rerunning the test again (March 20), to remove orderers while traffic running.",System Test,,(Please add usage information),bharadwajambati1,guoger,kchristidis,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Feb/19 3:30 AM;kchristidis;[~bharadwajambati1]: Thanks for capturing this. In the last step, I assume we're removing one of the initial orderers from the application channel, correct?

[~guoger]: Since you suggested this test - I would assume that we'd also want traffic going on while the orderer is being removed?;;;","27/Feb/19 3:57 AM;bharadwajambati1;[~kchristidis] Yes from the application channel(lets say remove orderer1 from the application channel);;;","27/Feb/19 4:52 AM;yacovm;Note that if you remove an orderer from the channel, it might be black-listed by the other orderers before it gets the block that removes it.
In such a case- after [10 minutes|https://github.com/hyperledger/fabric/blob/master/sampleconfig/orderer.yaml#L402] it should notice that there is no leader for a long time and starts suspecting its own eviction, and will pull the block that is missing and commit it to the ledger and then halt the chain.;;;","27/Feb/19 1:47 PM;guoger;Yes, pls keep traffic running when you perform those steps, preferably in constant mode (send tx back-to-back).

As Yacov stated, you *may* see the node being removed produces some error logs and keeps campaigning for a while till it terminates itself, or you'll see it simply exits without complaining at all, both may be observed.

but if you have any doubts about the behavior, pls let us know. [~bharadwajambati1];;;","28/Feb/19 5:37 AM;bharadwajambati1;After running the traffic for 30 minutes, orderer4 is on boarded.

It took almost 20 minutes to pull all the blocks from the other orderers

Once the orderer4 is in sync with the rest of the orderers, orderer2 is removed.

Below are the logs observed in the orderer2 logs

 
{code:java}
Feb 27 15:06:56 orderer2nd-ordererorg-5cb7dcf99f-m8kbv orderer2nd-ordererorg 2019-02-27 20:06:56.292 UTC [orderer.consensus.etcdraft] apply -> INFO 381ff Current node removed from replica set for channel testorgschannel1 channel=testorgschannel1 node=2
{code}
 ;;;","20/Mar/19 3:20 AM;scottz;[~dongming]  I reassigned this to you to rerun; please run traffic at the stable orderers while remove extra orderers from application channel and system channel;;;","22/Mar/19 12:58 AM;scottz;Change of assignment again: Bharadwaj will finish this when he runs another new test: FAB-14753.;;;","23/Mar/19 4:55 AM;bharadwajambati1;* Started the network with 3 orderers in both the orderersystemchannel and the application channel
 * Started traffic
 * After a couple of minutes, on-boarded orderer4 to orderersystem channel and application channel
 * Started the orderer4
 * Once its block count got in sync with other orderers, removed orderer3 from the application channel while traffic is running

 

Below are the logs observed in orderer3
{code:java}
Mar 22 15:45:51 orderer3rd-ordererorg1-84d6696c8f-vmvpj orderer3rd-ordererorg1 2019-03-22 19:45:51.386 UTC [orderer.consensus.etcdraft] apply -> INFO 12872 Current node removed from replica set for channel testorgschannel1 channel=testorgschannel1 node=3
{code};;;",,,,,,,,,,,,,,,,,,,,,
"As a fabric developer, I would like the command line tools in common/tools to live in cmd",FAB-14358,37991,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,27/Feb/19 2:34 AM,05/Mar/19 10:35 PM,28/Oct/23 3:05 AM,05/Mar/19 10:35 PM,v2.0.0,,,,,v2.0.0,,,,fabric-common,,,,,0,ipm,,,,"Each of the command line tools that we ship in support of fabric should be moved to cmd/${tool name}. 

Most of these exist in common/tools and should updated to have their main functions moved to cmd/${tool name}/main.go. The main should handle flag processing and then call supporting code as necessary. The main test (if present) should also be moved with the main.

The supporting code (other than the main) that lives in common/tools should be moved to internal/${tool name}. At some point, some of the code may move again but let's start there.

At first glance, this looks like configtxgen, cryptogen, and configtxlator.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dfr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update to golang 1.12 in master,FAB-14359,37993,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,27/Feb/19 3:50 AM,21/Jun/19 3:24 AM,28/Oct/23 3:05 AM,06/Jun/19 2:23 AM,,,,,,v2.0.0,,,,fabric-build,,,,,1,ipm,ipm-planned,,,Go 1.12 is out.,,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,FAB-13459,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c0a:9",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/May/19 2:36 AM;sykesm;[~btl5037] I think it's time to pick this one up. 1.12.5 is out now and we should be moving to it for master.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove sleeps from Couch and Kafka health check tests,FAB-14360,37994,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,skarim,skarim,skarim,27/Feb/19 4:12 AM,28/Feb/19 9:39 AM,28/Oct/23 3:05 AM,28/Feb/19 9:39 AM,,,,,,v2.0.0,,,,,,,,,0,ipm,ipm-planned,,,Remove sleeps from Couch and Kafka health check tests,,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dg7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Feb/19 4:35 AM;skarim;https://gerrit.hyperledger.org/r/c/29612/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement ‘assert less than’ operation handler,FAB-14361,37998,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,sheehan,sheehan,sheehan,27/Feb/19 4:35 AM,25/Nov/20 12:33 AM,28/Oct/23 3:05 AM,25/Nov/20 12:33 AM,,,,,,v2.1.0,,,,fabric-peer,,,,,0,,,,,"The 'assert less than' operation should be implemented as a built in plugin so that chaincode developers can use the 'range' operation to assert that values are within a specific range.

 

See epic design doc for more details.",,manish-sethi,sheehan,yoheiueda,,,,,,,,,,,,,,,,,,,,,FAB-11425,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,FAB-10711,,,No,,Unset,No,,,"1|i01fvb:zr",,,,No,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,sheehan,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Nov/20 12:33 AM;manish-sethi;Closing individual tasks of the epic ""Enhanced Concurrency Control"". See epic closure comments;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in integration/e2e/cft_test.go,FAB-14362,38003,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,skarim,skarim,27/Feb/19 5:22 AM,01/Apr/19 11:12 PM,28/Oct/23 3:05 AM,01/Apr/19 11:12 PM,,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"{code:java}
14:48:15 • Failure [2.021 seconds]
14:48:15 EndToEnd Crash Fault Tolerance when an orderer is behind the latest snapshot on leader [It] catches up using the block stored in snapshot 
14:48:15 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:150
14:48:15 
14:48:15   Timed out after 1.000s.
14:48:15   Expected
14:48:15       <<-chan struct {} | len:0, cap:0>: 0xc000d4b200
14:48:15   to be closed
14:48:15 
14:48:15   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:172{code}",,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13996,,,,,,,,,,"27/Feb/19 5:23 AM;skarim;failure.rtf;https://jira.hyperledger.org/secure/attachment/16870/failure.rtf",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00di7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create a chaincode cache,FAB-14363,38004,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,27/Feb/19 5:34 AM,09/May/19 9:19 PM,28/Oct/23 3:05 AM,09/May/19 9:19 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,"In order to not introduce a breaking read dependency, we must have a chaincode cache which contains the information about whether a chaincode definition have been approved by our organization.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rq:z",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor approve chaincode definition for my org CLI and tests,FAB-14364,38005,37656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,27/Feb/19 6:08 AM,30/Mar/19 5:29 AM,28/Oct/23 3:05 AM,30/Mar/19 5:29 AM,,,,,,,,,,,,,,,0,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00din:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/19 6:22 AM;wlahti;https://gerrit.hyperledger.org/r/c/29673;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor commit chaincode definition CLI,FAB-14365,38006,37656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,27/Feb/19 6:09 AM,30/Mar/19 5:29 AM,28/Oct/23 3:05 AM,30/Mar/19 5:29 AM,,,,,,,,,,,,,,,0,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00div:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/19 7:00 AM;wlahti;https://gerrit.hyperledger.org/r/c/29674/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Typo in Building Hyperledger Fabric Doc,FAB-14366,38007,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,27/Feb/19 6:46 AM,01/Mar/19 11:35 AM,28/Oct/23 3:05 AM,01/Mar/19 11:35 AM,,,,,,,,,,,,,,,0,documentation,,,,"There need to be a \n after the ""::"" on line 52 and 66 in docs/source/dev-setup/build.rst to apply the code formatting block",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dj3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add tests to verify validation for post order txs,FAB-14367,38009,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,27/Feb/19 7:21 AM,01/Mar/19 1:09 AM,28/Oct/23 3:05 AM,01/Mar/19 1:09 AM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00djj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Feb/19 7:28 AM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/29617/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Glossary updates for Raft,FAB-14368,38010,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,joe-alewine,joe-alewine,27/Feb/19 7:30 AM,28/Mar/19 4:07 AM,28/Oct/23 3:05 AM,27/Mar/19 11:04 PM,v1.4.0,,,,,v1.4.1,v2.0.0,,,fabric-docs,fabric-orderer,,,,0,raft,,,,"Think we need at least:
 * {color:#222222}Raft{color}
 * {color:#222222}Consenter set{color}
 * {color:#222222}Finite State Machine (FSM){color}
 * {color:#222222}Quorum{color}
 * {color:#222222}Leader (in context of orderer){color}
 * {color:#222222}Follower (in context of orderer){color}",,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00djr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Mar/19 11:54 PM;joe-alewine;https://gerrit.hyperledger.org/r/c/30182/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Dev mode fails to build Chaincode,FAB-14369,38011,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yuki-kon,yuki-kon,yuki-kon,27/Feb/19 8:14 AM,16/May/19 11:16 PM,28/Oct/23 3:05 AM,16/May/19 11:16 PM,v2.0.0,,,,,v2.0.0,,,,fabric-samples,,,,,0,,,,,"In fabric-samples/chaincode-docker-devmode, building Chaincode fails with the ccenv container created from Alpine.
The go build process can't import fabric/core/chaincode/shim.

{noformat}
bash-4.4# go build -o abstore
abstore.go:23:2: cannot find package ""github.com/hyperledger/fabric/core/chaincode/shim"" in any of:
        /usr/local/go/src/github.com/hyperledger/fabric/core/chaincode/shim (from $GOROOT)
        /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim (from $GOPATH)
abstore.go:24:2: cannot find package ""github.com/hyperledger/fabric/protos/peer"" in any of:
        /usr/local/go/src/github.com/hyperledger/fabric/protos/peer (from $GOROOT)
        /opt/gopath/src/github.com/hyperledger/fabric/protos/peer (from $GOPATH)
{noformat}

Dev mode uses the ccenv container to build Chaincode.
GOPATH in ccenv changed from ""/opt/gopath"" to ""/go"" due to the move to Alpine.
However, docker-compose-simple.yaml still has `GOPATH=/opt/gopath`. For this environment variable, the go build process looks for shim package under /opt/gopath and fails to find it.
GOPATH should be removed from dokcer-compose-simple.yaml to find shim package correctly.
",,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14810,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,"fabric-samples, 7b673ffd2f27b89d740ae6fdd21c2fd6a4242629",Unset,No,,,"1|i00djz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yuki-kon,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Mar/19 10:33 AM;yuki-kon;CR is posted here. https://gerrit.hyperledger.org/r/#/c/29730/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Factor out chaincode parameter equal method,FAB-14370,38012,38004,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,27/Feb/19 1:22 PM,04/Apr/19 10:54 PM,28/Oct/23 3:05 AM,04/Apr/19 10:54 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dk7:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create a cache tracking defined chaincodes,FAB-14371,38013,38004,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,27/Feb/19 1:22 PM,04/Apr/19 10:54 PM,28/Oct/23 3:05 AM,04/Apr/19 10:54 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dkf:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Indicate org approval in the chaincode cache,FAB-14372,38014,38004,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,27/Feb/19 1:23 PM,04/Apr/19 10:54 PM,28/Oct/23 3:05 AM,04/Apr/19 10:54 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dkn:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow lookup of chaincode name by hashed key,FAB-14373,38015,38004,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,27/Feb/19 1:24 PM,04/Apr/19 10:54 PM,28/Oct/23 3:05 AM,04/Apr/19 10:54 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dkv:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add initialization of currently defined chaincodes to cache,FAB-14374,38016,38004,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,27/Feb/19 1:25 PM,04/Apr/19 10:54 PM,28/Oct/23 3:05 AM,04/Apr/19 10:54 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dl3:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Mutate cache based on updates from the state listener,FAB-14375,38017,38004,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,27/Feb/19 1:27 PM,04/Apr/19 10:54 PM,28/Oct/23 3:05 AM,04/Apr/19 10:54 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dlb:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cache installed chaincode information,FAB-14376,38018,38004,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,27/Feb/19 1:28 PM,04/Apr/19 10:55 PM,28/Oct/23 3:05 AM,04/Apr/19 10:55 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dlj:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Modify chaincode.Lifecycle interface to pass channel id,FAB-14377,38019,38004,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,27/Feb/19 1:29 PM,04/Apr/19 10:55 PM,28/Oct/23 3:05 AM,04/Apr/19 10:55 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dlr:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rewire the chaincode.Lifecycle impl of the new lifecycle to use the new cache,FAB-14378,38020,38004,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,27/Feb/19 1:31 PM,04/Apr/19 10:56 PM,28/Oct/23 3:05 AM,04/Apr/19 10:56 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dlz:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cleanup after the churn from implementing the cache,FAB-14379,38021,38004,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,27/Feb/19 1:32 PM,04/Apr/19 10:56 PM,28/Oct/23 3:05 AM,04/Apr/19 10:56 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dm7:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
It is racy to send two etcdraft Type B config back-to-back,FAB-14380,38022,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,27/Feb/19 3:30 PM,10/Mar/19 11:49 PM,28/Oct/23 3:05 AM,10/Mar/19 11:49 PM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,raft,watchlist,,,"h3. Problem
Suppose we have a cluster that contains 3 nodes: A, B, C. And we send two config transactions, {{Tx_add}} and {{Tx_rm}}, that have consenter set {{<A, B, C, D>}} and {{<A, B>}} respectively, result is erroneous.
To reproduce, put this to {{chain_test.go}} and observe logs:
{code}
				It(""foo"", func() {
					configEnvAdd := newConfigEnv(channelID,
						common.HeaderType_CONFIG,
						newConfigUpdateEnv(channelID, addConsenterConfigValue()))

					configEnvRm := newConfigEnv(channelID,
						common.HeaderType_CONFIG,
						newConfigUpdateEnv(channelID, removeConsenterConfigValue(2)))

					c1.cutter.CutNext = true

					Expect(c1.Configure(configEnvAdd, 0)).To(Succeed())
					Expect(c1.Configure(configEnvRm, 0)).To(Succeed())
				})
{code}

h3. Reason
We have a rule in etcdraft:
bq. _*only 1 node* can be added/removed at a time_
and this is checked against *current* consenter set [here|https://github.com/hyperledger/fabric/blob/83f7fa7555263b67a1b4a8796668f0b62d7cc49f/orderer/consensus/etcdraft/chain.go#L1089-L1095]. However, *current consenter set* is accessed by multiple readers (whoever calls {{Chain.Configure}}) and updated by one writer (when config block is being written [here|https://github.com/hyperledger/fabric/blob/83f7fa7555263b67a1b4a8796668f0b62d7cc49f/orderer/consensus/etcdraft/chain.go#L1146-L1148]). Lock here only makes it thread-safe, but does not guarantee correct behavior.

While {{Tx_add}} is in-flight, {{Tx_rm}} is checked against {{<A, B, C>}}, *deemed valid*, and enqueued to {{submitC}}, even though it's blocked because {{Tx_add}} is in-flight.

h3. Solution
We need to perform the check in the same go routine as the one commits config block, because only that go routine holds up-to-date truth. And if we still want to return error to client if check is failed, {{Configure}} should wait on an error channel, similar to [this trick|https://github.com/hyperledger/fabric/blob/83f7fa7555263b67a1b4a8796668f0b62d7cc49f/orderer/consensus/etcdraft/chain.go#L505]",,C0rWin,guoger,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11863,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dmf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,guoger,kchristidis,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Feb/19 3:34 PM;guoger;This is a problem, but could be solved later because I assume to make read-write versioning correct, admins would most likely submit a config, *wait for it to be committed*, before submitting next. Instead of submitting them back-to-back

wdyt [~kchristidis];;;","28/Feb/19 4:30 AM;kchristidis;[~guoger]: Thanks for the write-up. Will discuss during scrum tomorrow and update here with conclusions, and course of action.;;;","28/Feb/19 8:20 PM;C0rWin;[~guoger] I am missing something, how you can process two configuration transactions simultaneously? I mean you are not supposed to process {{Tx_rm}} before you commit {{Tx_add}}. Not sure that case you describe is valid and if we do allow such situation, I think the problem is somewhat different and current implementation doesn't really aligned with design doc.;;;","28/Feb/19 9:52 PM;guoger;[~C0rWin] What I'm describing here is not really about *processing* a config, instead it's about user *submitting* two config tx back-to-back. {{Tx_rm}} is still processed *after* {{Tx_add}} is committed.



bq. current implementation doesn't really aligned with design doc
mind elaborating on this?;;;","28/Feb/19 10:54 PM;C0rWin;[~guoger] read the description again and now realizing you are speaking about the validation part. What am I curious now, is how can you create two back to back config transactions w/o waiting for first one to be committed? I mean you have to maintain config update sequences, no?;;;","28/Feb/19 11:19 PM;guoger;[~C0rWin] if the config seq advances, the second one is re-validated [here|https://github.com/hyperledger/fabric/blob/f97797659fe0f7c11ec53ac7af40ad3c29898430/orderer/consensus/etcdraft/chain.go#L822]. However, consenter set check is not part of {{c.support.ProcessConfigMsg}}. The simplest solution i guess is to add it there.;;;","28/Feb/19 11:34 PM;kchristidis;{quote}The simplest solution i guess is to add it there.{quote}

The {{ProcessConfigMsg}} method is part of the {{msgprocessor}} package and as such, it should be agnostic to the _contents_ of the configuration update. Not sure how this would work then?;;;","28/Feb/19 11:40 PM;guoger;[~kchristidis] ah, by _there_, i didn't mean {{support.ProcessConfigMsg}}. Instead, i was simply talking about some place around that in chain.go;;;","28/Feb/19 11:43 PM;kchristidis;Got it. I'm fine with that fix.;;;","10/Mar/19 11:49 PM;guoger;https://gerrit.hyperledger.org/r/c/29907/;;;",,,,,,,,,,,,,,,,,,,
Flaky etcdraft UT: ticking leader only once sometimes do not trigger desired heartbeat,FAB-14381,38023,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,guoger,guoger,guoger,27/Feb/19 4:29 PM,19/Mar/19 7:57 PM,28/Oct/23 3:05 AM,01/Mar/19 1:13 AM,,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"If go routine is busy processing a case in {{for-select}}, tick is dropped on the floor, and we do not have the heartbeat desired.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dmn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/19 2:03 PM;guoger;https://gerrit.hyperledger.org/r/c/29692;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Panic error observed in daily unit-tests, PKI id was not found in gossip tests",FAB-14382,38034,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,sambhavdutt,sambhavdutt,27/Feb/19 11:42 PM,19/Mar/19 7:57 PM,28/Oct/23 3:05 AM,04/Mar/19 8:18 PM,v2.0.0,,,,,v2.0.0,,,,fabric-gossip,,,,,0,ci-flake,,,,"Panic error was observed in the last daily unit-tests, PKI ID was not found and the peers were not accessible in gossip tests (

*Intermittent:* No
*Branch:* master
*Platform:* x86_64
*Error Snippet:*

{code:java}
19:37:37 [31m2019-02-27 00:37:06.567 UTC [gossip.privdata] StoreBlock -> ERRO 007[0m Validation failed: foobar
19:37:37 [33m2019-02-27 00:37:06.573 UTC [gossip.gossip#p0] NewGossipService -> WARN 020[0m External endpoint is empty, peer will not be accessible outside of its organization

19:37:37 [33m2019-02-27 00:37:21.185 UTC [gossip.gossip#p2] validateMsg -> WARN 7fc[0m StateInfo message GossipMessage: Channel: , nonce: 0, tag: CHAN_OR_ORG state_info_message: Timestamp:inc_num:1551227837166861514 seq_num:1551227839380844122 PKI-id:3132372e302e302e313a3430393038 channel MAC:14f8a80809579c8d003ffe83ac850c0f610aa0e5012e7c91bab3d3efad71c0b1 properties:ledger_height:11 , Envelope: 81 bytes, Signature: 81 bytes is found invalid: PKIID wasn't found

19:37:37 panic: runtime error: invalid memory address or nil pointer dereference
19:37:37 [signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xed8752]
19:37:37 
19:37:37 goroutine 144 [running]:
19:37:37 github.com/hyperledger/fabric/gossip/state.TestGossipStateProvider_TestStateMessages.func3(0xc000369d40, 0xc0004c0500, 0xc0002bc030)
19:37:37 	/w/workspace/fabric-unit-test-coverage-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state_test.go:1162 +0xe2
19:37:37 created by github.com/hyperledger/fabric/gossip/state.TestGossipStateProvider_TestStateMessages
19:37:37 	/w/workspace/fabric-unit-test-coverage-daily-master-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state_test.go:1159 +0x250
19:37:37 FAIL	github.com/hyperledger/fabric/gossip/state	33.254s
{code}


*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-x86_64/364/",,C0rWin,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,97f5f2faf72738e19877d6985c812f6c714cd9c8,Unset,No,,,"1|i00dnj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Mar/19 10:45 PM;C0rWin;https://gerrit.hyperledger.org/r/29770;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update couchDB tutorial for lifecycle,FAB-14383,38038,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,negupta,negupta,negupta,28/Feb/19 12:10 AM,29/Mar/19 10:43 PM,28/Oct/23 3:05 AM,29/Mar/19 10:43 PM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,fabric-doc,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00dof:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/19 5:52 AM;negupta;https://gerrit.hyperledger.org/r/#/c/30437/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Updating adding an Org to a channel tutorial for lifecycle,FAB-14384,38039,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,negupta,negupta,negupta,28/Feb/19 12:11 AM,02/Apr/19 9:34 AM,28/Oct/23 3:05 AM,01/Apr/19 12:58 AM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,fabric-doc,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14943,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00don:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Mar/19 11:29 AM;negupta;[https://gerrit.hyperledger.org/r/#/c/29866/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update chaincode for developers tutorial for lifecycle,FAB-14385,38040,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,28/Feb/19 12:11 AM,29/Mar/19 10:44 PM,28/Oct/23 3:05 AM,29/Mar/19 10:44 PM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,fabric-doc,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00dov:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Mar/19 6:00 AM;negupta;https://gerrit.hyperledger.org/r/#/c/30124/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update private data tutorial for lifecycle,FAB-14386,38041,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,pandrejko,negupta,negupta,28/Feb/19 12:15 AM,06/Apr/19 7:29 PM,28/Oct/23 3:05 AM,06/Apr/19 7:29 PM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,fabric-doc,,,,,,negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00dp3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,pandrejko,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Mar/19 7:41 AM;pandrejko;* We need to describe how to build the pkg file which includes the collection definition or point to instructions on how to do that
 * We need to revamp step 3 [Install and instantiate chaincode with a collection|https://hyperledger-fabric.readthedocs.io/en/latest/private_data_tutorial.html#pd-install-instantiate-cc]
 * Should we remove or update the Private data tutorial video?

Notes:

We need to package the chaincode before it can be installed on our peers. Use
 the following commands to package a sample Go, Node.js or Java chaincode. 
 peer lifecycle chaincode package mycc.tar.gz --path github.com/hyperledger/fabric-samples/chaincode/abstore/go/ --lang golang

Install cc
 # this command installs a chaincode package on your peer
 peer lifecycle chaincode install mycc.tar.gz --name mycc --version 1.0

 

A successful command will return a hash of the chaincode package. You should see
 output similar to the following:

.. code:: bash

2019-02-28 18:25:29.417 UTC [cli.lifecycle.chaincode] submitInstallProposal -> INFO 001 Installed remotely: response:<status:200 payload:""\n \233[2\032\317\006C6\317\246\343}\253\333z\301\345\327;\216\000\331\253\300$5B\234\252\235\305\206"" > 
 2019-02-28 18:25:29.420 UTC [cli.lifecycle.chaincode] submitInstallProposal -> INFO 002 Chaincode code package hash: 9b5b321acf064336cfa6e37dabdb7ac1e5d73b8e00d9abc02435429caa9dc586

The hash of the chaincode package is used by channel members to ensure that each
 organization has installed and agreed to the same chaincode. You can also find
 the chaincode package hash by querying your peer for information about the
 packages you have installed.

.. code:: bash
 # this returns the details of the packages installed on your peers
 peer lifecycle chaincode queryinstalled

The command above will return the hash of the mycc.tar.gz package. You should see
 output similar to the following:

.. code:: bash

Installed chaincodes on peer:
 Name: mycc, Version: 1.0, Hash: 9b5b321acf064336cfa6e37dabdb7ac1e5d73b8e00d9abc02435429caa9dc586

Save this hash. You will need it when your approve the chaincode definition for
 your organization in a future command.

 
 After you install the chaincode, you need to approve a chaincode definition
 for your organization. The chaincode definition includes the important
 parameters of chaincode governance. The definition also includes the hash of the
 chaincode package to ensure that channel members are approving the same code.

.. code:: bash
 # this approves a chaincode definition for your org
 # make note of the --hash flag that provides the hash of the chaincode package
 peer lifecycle chaincode approveformyorg --channelID $CHANNEL_NAME --name mycc --version 1.0 --hash 9b5b321acf064336cfa6e37dabdb7ac1e5d73b8e00d9abc02435429caa9dc586 --sequence 1 --tls true --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --waitForEvent

 

All organizations need to agree on the definition before they can use the
 chaincode. Modify the following four environment variables operate as Org1:

.. code:: bash
 # Environment variables for PEER0

CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
 CORE_PEER_ADDRESS=peer0.org1.example.com:7051
 CORE_PEER_LOCALMSPID=""Org1MSP""
 CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt

You can now approve a definition for the ``mycc`` chaincode as Org1. Chaincode is
 approved at the organization level. You can issue the command once even if you 
 have multiple peers.

 

 

Once a sufficient number of channel members have approved a chaincode definition,
 one member can commit the definition to the channel. By default a majority of
 channel members need to approve a definition before it can be committed. Since
 two out of two channel members have approved the definition, we can now commit
 the definition to the channel using the following command. You can issue this
 command as either Org1 or Org2.

.. code:: bash
 # this commits the chaincode definition to the channel
 peer lifecycle chaincode commit -o orderer.example.com:7050 --channelID $CHANNEL_NAME --name mycc --version 1.0 --hash 9b5b321acf064336cfa6e37dabdb7ac1e5d73b8e00d9abc02435429caa9dc586 --sequence 1 --init-required --tls true --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --waitForEvent --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt



CouchDB indices may not be supported - need to doc this here: https://hyperledger-fabric.readthedocs.io/en/latest/private_data_tutorial.html#using-indexes-with-private-data;;;","22/Mar/19 2:16 AM;negupta;https://gerrit.hyperledger.org/r/#/c/30240/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Document how to Migrate from old to new lifecycle,FAB-14387,38043,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,negupta,negupta,negupta,28/Feb/19 12:18 AM,03/Dec/19 2:49 AM,28/Oct/23 3:05 AM,03/Dec/19 2:49 AM,,,,,,v2.0.0,,,,fabric-docs,,,,,1,fabric-doc,,,,Will be written in the upgrading your network tutorial,,joaquimpedrooliveira,MHBauer,negupta,,,,,,,,,,,,,,,,,,,,,,FAB-14249,FAB-16754,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:iwry",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joaquimpedrooliveira,MHBauer,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Dec/19 2:48 AM;negupta;Content addressed by: FAB-16754;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update endorsement policies operations guide for lifecycle,FAB-14388,38044,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,negupta,negupta,negupta,28/Feb/19 12:21 AM,02/Apr/19 6:16 AM,28/Oct/23 3:05 AM,29/Mar/19 10:44 PM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,fabric-doc,,,,No longer defined at the instantiate step,,negupta,,,,,,,,,,,,,,,,,,,,,,,,FAB-12080,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00dpr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Mar/19 1:06 AM;negupta;https://gerrit.hyperledger.org/r/29939;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update pluggable endorsement operations guide for lifecycle,FAB-14389,38045,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,28/Feb/19 12:22 AM,01/Apr/19 12:57 AM,28/Oct/23 3:05 AM,01/Apr/19 12:57 AM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,fabric-doc,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00dpz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Mar/19 4:09 AM;negupta;https://gerrit.hyperledger.org/r/30289;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer lifecycle chaincode command reference,FAB-14390,38046,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,negupta,negupta,negupta,28/Feb/19 12:23 AM,05/Apr/19 1:01 AM,28/Oct/23 3:05 AM,05/Apr/19 1:01 AM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,fabric-doc,,,,,,negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00dq7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Mar/19 6:37 AM;pandrejko;[~rameshthoomu] - Hi Ramesh, would you happen to know if these new commands will get auto-generated for the docs, or is an update required somewhere to make that happen?;;;","06/Mar/19 7:01 AM;pandrejko; run the command `make clean-all release native`

then run scripts/generateHelpDocs.sh to update the .md file with the new commands

 

Do we need to create a new file `peerlifecycle.md` perhaps?

 ;;;","13/Mar/19 10:12 PM;negupta;Started by will: https://gerrit.hyperledger.org/r/#/c/30004/3;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Update couchDB architecture reference for lifecycle,FAB-14391,38047,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,28/Feb/19 12:32 AM,10/Apr/19 12:29 AM,28/Oct/23 3:05 AM,10/Apr/19 12:29 AM,,,,,,,,,,fabric-docs,,,,,0,fabric-doc,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00dqf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Mar/19 5:51 AM;negupta;Duplicate of https://jira.hyperledger.org/browse/FAB-14790;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update private data architecture reference for lifecycle,FAB-14392,38048,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,pandrejko,negupta,negupta,28/Feb/19 12:33 AM,06/Apr/19 7:29 PM,28/Oct/23 3:05 AM,06/Apr/19 7:29 PM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,fabric-doc,,,,,,negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00dqn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,pandrejko,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Mar/19 7:27 AM;pandrejko;Some things to address:
The collection definition gets deployed to the channel at the time of chaincode instantiation (or upgrade). If using the peer CLI to instantiate the chaincode, the collection definition file is passed to the chaincode instantiation using the {{--collections-config}} flag. If using a client SDK, check the [SDK documentation|https://fabric-sdk-node.github.io/] for information on providing the collection definition.

Instantiateis now  replaced by Approve and Commit.

The topic [CouchDB as the State Database|https://hyperledger-fabric.readthedocs.io/en/latest/couchdb_as_state_database.html] describes indexes that can be applied to the channel’s state database to enable JSON content queries, by packaging indexes in a {{META-INF/statedb/couchdb/indexes}} directory at chaincode installation time. Similarly, indexes can also be applied to private data collections, by packaging indexes in a {{META-INF/statedb/couchdb/collections/<collection_name>/indexes}} directory. An example index is available [here|https://github.com/hyperledger/fabric-samples/blob/master/chaincode/marbles02_private/go/META-INF/statedb/couchdb/collections/collectionMarbles/indexes/indexOwner.json].

 

How does the private data collection get packaged into the .tar file?;;;","19/Mar/19 4:00 AM;negupta;https://gerrit.hyperledger.org/r/30192;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Add chaincode definition to glossary,FAB-14393,38049,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,28/Feb/19 12:33 AM,06/Apr/19 7:29 PM,28/Oct/23 3:05 AM,06/Apr/19 7:29 PM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,fabric-doc,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00dqv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Mar/19 6:21 AM;negupta;https://gerrit.hyperledger.org/r/30554;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update FAQ doc for lifecycle,FAB-14394,38050,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Done,negupta,negupta,negupta,28/Feb/19 12:34 AM,08/Mar/19 2:03 PM,28/Oct/23 3:05 AM,08/Mar/19 2:03 PM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,fabric-doc,,,,Update FAQ about endorsement policy,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00dr3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Mar/19 12:35 AM;negupta;https://gerrit.hyperledger.org/r/#/c/29890/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
BYFN tests in daily e2e job timeout consistently due to IO locking up in CI infrastructure,FAB-14395,38051,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,tijohnson,sambhavdutt,sambhavdutt,28/Feb/19 12:37 AM,26/Jul/19 3:18 AM,28/Oct/23 3:05 AM,26/Jul/19 3:18 AM,v2.0.0,,,,,,,,,fabric-samples,,,,,0,ci-failure,,,,"Channel proposal is failing consistently for peer1.org2 in BYFN tests. Failed to create ledger from the genesis block as LedgerID already exists.

*Branch:* master
*Platform:* x86_64
*Error Snippet:*

{code:java}
error: desc = ""transport: Error while dialing dial tcp 172.18.0.4:9051: connect: connection refused"". Reconnecting...
[36m2019-03-26 23:47:43.513 UTC [grpc] HandleSubConnStateChange -> DEBU 0af[0m pickfirstBalancer: HandleSubConnStateChange: 0xc002211530, TRANSIENT_FAILURE
[36m2019-03-26 23:47:43.513 UTC [chaincode] LaunchConfig -> DEBU 0b0[0m launchConfig: executable:""chaincode"",Args:[chaincode,-peer.address=peer1.org2.example.com:10052],Envs:[CORE_CHAINCODE_LOGGING_LEVEL=info,CORE_CHAINCODE_LOGGING_SHIM=warning,CORE_CHAINCODE_LOGGING_FORMAT=%{color}%{time:2006-01-02 15:04:05.000 MST} [%{module}] %{shortfunc} -> %{level:.4s} %{id:03x}%{color:reset} %{message},CORE_CHAINCODE_ID_NAME=cscc:2.0.0,CORE_PEER_TLS_ENABLED=true,CORE_TLS_CLIENT_KEY_PATH=/etc/hyperledger/fabric/client.key,CORE_TLS_CLIENT_CERT_PATH=/etc/hyperledger/fabric/client.crt,CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/peer.crt],Files:[/etc/hyperledger/fabric/client.crt /etc/hyperledger/fabric/client.key /etc/hyperledger/fabric/peer.crt]
{code}

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-end-2-end-daily-master-x86_64/75/Docker_Container_Logs/peer1.org2-default-channel.log.gz",,denyeart,jyellick,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,97f5f2faf72738e19877d6985c812f6c714cd9c8,Unset,No,,,"1|i00drb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Feb/19 2:04 PM;jyellick;{noformat}
19:12:26 [34m2019-02-27 00:11:56.123 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
19:12:26 Error: proposal failed (err: bad proposal response 500: failed to execute transaction cffc6245a1866632e4fb86d911f6bf97e496df35be89968805f27738fe29da2a: error sending: timeout expired while executing transaction)
19:12:26 peer0.org1 failed to join the channel, Retry after 3 seconds
19:12:29 + peer channel join -b mychannel.block
19:12:36 + res=1
19:12:36 + set +x
19:12:36 [34m2019-02-27 00:12:29.216 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
19:12:36 Error: proposal failed (err: bad proposal response 500: cannot create ledger from genesis block: LedgerID already exists)
19:12:36 peer0.org1 failed to join the channel, Retry after 3 seconds
19:12:39 + peer channel join -b mychannel.block
{noformat}

This looks transient to me.  It took the peer longer than the timeout to reply that the channel was created successfully, then he tried to join a second time, but the peer was already joined.  I'd be surprised if this can be recreated consistently (or at all)?

If this is consistent, then we'll need to investigate why the peer is suddenly taking so long to join channels.  I don't think this is a configtxgen related error, but is rather something merged into the peer startup or joinchannel code.;;;","28/Feb/19 2:40 PM;sambhavdutt;[~jyellick]

I see that this is consistent, the peer is still taking long to join the channel, retrying after the default timeout and exiting after the retries. This is the log for the last failed build

https://jenkins.hyperledger.org/view/Daily/job/fabric-end-2-end-daily-master-x86_64/44/console;;;","28/Feb/19 2:55 PM;jyellick;I'm unable to reproduce this locally.  

You can see in the second log you sent that the first peer join is successful, and the second one fails.  Has anything changed with the CI or machine it is on?;;;","01/Mar/19 1:00 AM;sambhavdutt;[~jyellick]

The jobs start on a new node which is available at the time, in this case, for the x platform. There have been no changes on the nodes recently.;;;","05/Mar/19 2:14 AM;rameshthoomu;Re-opening this issue again. This has been failing in x build nodes consistently from past 1 week. Have to check the logs [~sambhavdutt] Could you please check the time on console logs.;;;","06/Mar/19 11:39 AM;jyellick;If we can get this reproduced with peer debug logs on, it will be very helpful.;;;","06/Mar/19 12:34 PM;sambhavdutt;[~jyellick] My Patchset was merged today for this, these are the container logs from today's build

https://jenkins.hyperledger.org/view/Daily/job/fabric-end-2-end-daily-master-x86_64/lastSuccessfulBuild/artifact/Docker_Container_Logs/;;;","06/Mar/19 3:03 PM;jyellick;Took a look at the peer logs:

peer1.org2 https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-end-2-end-daily-master-x86_64/53/Docker_Container_Logs/peer1.org2-default-channel.log.gz
{noformat}
[34m2019-03-05 23:50:43.266 UTC [ledgermgmt] CreateLedger -> INFO 320[0m Creating ledger [mychannel] with genesis block
[34m2019-03-05 23:51:17.863 UTC [kvledger] CommitWithPvtData -> INFO 66e[0m [mychannel] Committed block [0] with 1 transaction(s) in 7806ms (state_validation=1ms block_commit=7795ms state_commit=4ms)
[34m2019-03-05 23:51:17.868 UTC [ledgermgmt] CreateLedger -> INFO 66f[0m Created ledger [mychannel] with genesis block
{noformat}

peer1.org1 https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-end-2-end-daily-master-x86_64/53/Docker_Container_Logs/peer1.org1-default-channel.log.gz
{noformat}
[34m2019-03-05 23:50:30.183 UTC [ledgermgmt] CreateLedger -> INFO 1f7[0m Creating ledger [mychannel] with genesis block
[34m2019-03-05 23:50:30.222 UTC [kvledger] CommitWithPvtData -> INFO 266[0m [mychannel] Committed block [0] with 1 transaction(s) in 24ms (state_validation=2ms block_commit=12ms state_commit=4ms)
[34m2019-03-05 23:50:30.225 UTC [ledgermgmt] CreateLedger -> INFO 267[0m Created ledger [mychannel] with genesis block
{noformat}

Looking at the two logs, it's apparent that although perhaps slower in some cases, the time taken to validate signatures, construct configuration, etc. is comparable across peers and relatively negligible to the whole timeout.  Instead, creating the ledger takes much much longer in the one container than the other.  This points to some sort of IO resource constraint problem in CI to me.;;;","28/Mar/19 6:12 AM;rameshthoomu;Thanks for the detailed explanation [~jyellick]. We are still seeing this in fabric-samples master branch. I have enabled debug mode on peer and below is the log file https://jenkins.hyperledger.org/view/fabric-samples/job/fabric-samples-verify-x86_64/157/artifact/Docker_Container_Logs/peer1.org1-default-channel.log/*view*/

{color:red}16:47:44{color} + peer channel join -b mychannel.block
{color:red}16:48:16{color} + res=1
16:48:16 + set +x
16:48:16 2019-03-27 20:47:43.595 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized
16:48:16 Error: proposal failed (err: bad proposal response 500: failed to execute transaction 793a11f75455ec4179653320642661907bdc9fba1d9199774713f2fd4dfccca8: error sending: timeout expired while executing transaction)
16:48:16 peer1.org1 failed to join the channel, Retry after 3 seconds

Not sure why it's taking 30 secs to join the channel.

[~denyeart] FYI;;;","28/Mar/19 11:34 AM;jyellick;This one has exactly the same symptom:

{noformat}
[34m2019-03-27 20:48:26.571 UTC [kvledger] CommitWithPvtData -> INFO 5aa[0m [mychannel] Committed block [0] with 1 transaction(s) in 19264ms (state_validation=2ms block_commit=19253ms state_commit=4ms)
{noformat}

The validation takes no time at all, and then committing the block to the filesystem takes _19 seconds_.  We can obviously tune timeouts up.... but 19 seconds is at least 3, if not 4 or 5 orders of magnitude slower than I would expect the operation to take, it seems like we should be looking to address the underlying problem?  CI overall has been exceptionally flaky lately, it's like there are new resource caps or something?

What about adding some sort of small perf test at the beginning of the CI job? Write a few hundred KB to a file and run fsync, and see how long it takes?;;;","28/Mar/19 9:03 PM;denyeart;I asked Ramesh to turn on peer debug, here it is:
https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/157/artifact/Docker_Container_Logs/peer1.org1-default-channel.log

It hangs at this step when trying to create the chain in ledger:

2019-03-27 20:47:43.610 UTC [ledgermgmt] CreateLedger -> INFO 202[0m Creating ledger [mychannel] with genesis block

So either hit a lock in ledger (I don't see why this could happen yet...) or there is a fundamental problem with IO in this environment.;;;","29/Mar/19 12:54 AM;denyeart;After taking a deeper look at the debug, there are no locks or other problems in Fabric code. Even the most trivial IO operations are taking about 8 seconds each, when normally these operations take less than a millisecond.  This leads to the timeout during the peer join.  This is definitely a problem in the CI infrastructure rather than a Fabric problem.  Re-assigning back to Sambhav to investigate with Linux Foundation CI infrastructure.;;;","29/Mar/19 1:09 AM;rameshthoomu;[~tijohnson] Please read the last comment posted by [~denyeart] We are facing this kind of issues in all of our builds and this is a known issue to LF. We have raised concerns many times... We see build failures with these timeouts and sometimes builds fail to download the binaries from Nexus repository or curl failures.. 

If possible, could you please involve LF infra team to debug and resolve this issue.;;;","03/Apr/19 10:59 PM;sambhavdutt;The BYFN tests are still failing consistently in the daily-end-2-end with peer(peer1.org2) failing to join channel due to timeout. The same tests are passing on the z machines.

*Branch:* master
*Platform:* x86_64
*Error Snippet*

{code:java}
19:51:33 Error: proposal failed (err: bad proposal response 500: failed to execute transaction 7f831dc1b5de0b8a78738da3ec417ca4e5a0a086f5672e8a8342e3a75a02b5ec: error sending: timeout expired while executing transaction)
19:51:33 peer1.org2 failed to join the channel, Retry after 3 seconds
.
.
.
19:52:01 !!!!!!!!!!!!!!! After 10 attempts, peer1.org2 has failed to join channel 'mychannel'  !!!!!!!!!!!!!!!!
19:52:01 ========= ERROR !!! FAILED to execute End-2-End Scenario ===========
{code}

*Error Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-end-2-end-daily-master-x86_64/82/Docker_Container_Logs/peer1.org2-default-channel.log.gz;;;","18/Apr/19 3:12 AM;sambhavdutt;The peer has been timing out on prod. x nodes after the default delay time was increased to 15 seconds, this works fine on Sandbox x-nodes
*Build Log*
https://jenkins.hyperledger.org/sandbox/view/All/job/fabric-end-2-end-daily-master-x86_64/6/consoleFull

but this is still failing in the production x86_64 nodes for the Default Channel BYFN tests in e2e-daily, master branch.
*Build Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-end-2-end-daily-master-x86_64/96/Docker_Container_Logs/

;;;","23/Apr/19 4:59 AM;sambhavdutt;RELENG ticket has been created for this issue as requested
https://jira.linuxfoundation.org/browse/RELENG-1988;;;","24/Apr/19 12:37 PM;sambhavdutt;The end-2-end BYFN tests have passed successfully for master in the last run Build #99, on production Jenkins x86_64 node.

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-end-2-end-daily-master-x86_64/99/;;;",,,,,,,,,,,,
Define new ClientConnections for lifecycle CLI,FAB-14396,38054,37656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,28/Feb/19 3:47 AM,21/Mar/19 3:09 AM,28/Oct/23 3:05 AM,21/Mar/19 3:09 AM,,,,,,,,,,,,,,,0,,,,,Start replacing the CmdFactory. ,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00drr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Mar/19 1:38 AM;wlahti;https://gerrit.hyperledger.org/r/c/29670/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Forbid the definition of lscc/qscc/cscc/_*,FAB-14397,38058,36665,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,ales,ales,ales,28/Feb/19 6:07 AM,04/Apr/19 10:16 PM,28/Oct/23 3:05 AM,04/Apr/19 10:16 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14827,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ds7:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve tests in core/committer/txvalidator and core/handlers/validation/builtin,FAB-14398,38059,,Test Task,In Progress,FAB,Fabric,software,denyeart,,,Lowest,,ales,ales,ales,28/Feb/19 6:29 AM,09/Nov/20 11:20 PM,28/Oct/23 3:05 AM,,v2.0.0,,,,,,,,,,,,,,0,,,,,Split clearly unit tests and integration tests,,ales,denyeart,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-12221,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb0zyy",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,denyeart,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Jan/20 4:38 AM;denyeart;[~ales] Please add description, and mention if you had anything in progress or if you'd suggest this be unassigned and added to backlog for somebody else to pick up.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move idemix.proto out of protos,FAB-14399,38060,37311,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,28/Feb/19 6:32 AM,02/Mar/19 6:51 AM,28/Oct/23 3:05 AM,02/Mar/19 6:51 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dsn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove the strings vscc and escc from the endorsement/validation paths,FAB-14400,38061,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,jyellick,jyellick,28/Feb/19 6:33 AM,03/Dec/19 8:22 PM,28/Oct/23 3:05 AM,,,,,,,,,,,,,,,,0,,,,,"This will likely require two releases to actually implement, but we finally have the opportunity to rename the default endorsement and validation plugins from ""escc"" and ""vscc"" respectively to something sane like... ""builtin"" or a better name if one can be found.

To begin with, for v2.0, we should provide these new name as an alias to the respective plugin, and enforce in the new lifecycle that the old names are rejected or translated to the new readable name.

Then, for v2.1 when we officially remove support for the old lifecycle, we can entirely remove references to these strings.",,ales,denyeart,jyellick,,,,,,,,,,,,,,,,FAB-15338,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|hzzgzb:i",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,denyeart,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Dec/19 11:23 PM;denyeart;[~jyellick] [~ales] Anything we need to do here for v2.0?;;;","03/Dec/19 6:58 PM;ales;My 2 cents: I wouldn't do anything about it in 2.0 and wait to see how the validator/committer refactoring develops because things might still change (e.g. we might no longer have endorsement/validation plugins to begin with).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
passing in go tag as env variable prior to 'make peer' is not reflected in the build,FAB-14401,38062,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,Baha-sk,Baha-sk,28/Feb/19 6:41 AM,10/Apr/19 9:24 PM,28/Oct/23 3:05 AM,10/Apr/19 9:24 PM,v2.0.0,,,,,,,,,fabric-build,,,,,0,ipm,ipm-planned,,,"when doing 

 

GO_TAGS=""pkcs11"" make peer

 

the GO_TAGS value is not passed to the docker container where the peer is being built.

 

This started happening in 2.0 as the peer build is done inside a docker container while previous versions were built locally and build args were properly being propgagated.

 

We need a way to pass in the GO_TAGS env variable to the container where the peer is being built.",,Baha-sk,firas.qutishat,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dt3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Baha-sk,firas.qutishat,mastersingh24,sykesm,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Mar/19 5:55 AM;sykesm;What are you trying to do? What branch?

What you're describing (make peer) does not build anything with docker.;;;","22/Mar/19 6:28 AM;firas.qutishat;[~sykesm] https://gerrit.hyperledger.org/r/#/c/30294/;;;","22/Mar/19 10:09 PM;sykesm;[~firas.qutishat] What was reported and what you've changed are not the same {{make peer}} works as intended and creates a local image with the appropriate tags.

At the end of the day, the information reported does matter and I use bug triage as a forcing function to ensure the information is correct.;;;","22/Mar/19 10:11 PM;sykesm;Also

{quote}
What are you trying to do? What branch?
{quote}

are still valid questions. I can infer all day that you're trying to build the docker image with tags but explicit responses are preferred over inference.

My final assumption, I assume [~firas.qutishat] and [~Baha-sk] are working together as the [~Baha-sk] did not reopen or respond?;;;","22/Mar/19 10:39 PM;Baha-sk;[~sykesm] this is for latest 2.0 version (master branch)

 

passing in PKCS11 tag as env variable prior to 'make peer' is not reflected in the build.  The env variable is empty.

 

This was not the case in previous Fabric versions, it started with 2.0

 

To resolve this, [~firas.qutishat] pushed the patch mentioned in his last comment above.;;;","22/Mar/19 11:23 PM;sykesm;So, part of the confusion here is simple: {{make peer}} does nothing with docker. The issue you're having is with {{make peer-docker}}.

Moving beyond that, the CR that was submitted is, imo, incomplete as it only carries the tags to the peer and does not address the orderer or other commands. I have made comments on the CR.

Thanks.;;;","10/Apr/19 6:30 PM;mastersingh24;https://gerrit.hyperledger.org/r/30856;;;",,,,,,,,,,,,,,,,,,,,,,
DOCKER_DYNAMIC_LINK doesn't work anymore,FAB-14402,38063,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,Baha-sk,Baha-sk,28/Feb/19 6:44 AM,30/Jun/19 8:30 PM,28/Oct/23 3:05 AM,30/Jun/19 8:30 PM,,,,,,,,,,fabric-build,,,,,0,,,,,"* 
I see DOCKER_GO_LDFLAGS was deleted  [https://github.com/hyperledger/fabric/commit/fdd1c72eaf45bb987e407b57ba09d7ba72e5bc31#diff-b67911656ef5d18c4ae36cb6741b7965L239]

DOCKER_DYNAMIC_LINK=true does not work anymore",,Baha-sk,firas.qutishat,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dtb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Baha-sk,firas.qutishat,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Feb/19 11:54 PM;firas.qutishat;[~mastersingh24] How can I enable DOCKER_DYNAMIC_LINK;;;","16/Mar/19 4:13 PM;mastersingh24;[~firas.qutishat]  All of the images should now be built with dynamic linking enabled (i.e. we stopped building static binaries).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
stop.sh kills all node processes,FAB-14403,38065,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,umamani113,nfrunza,nfrunza,28/Feb/19 10:02 AM,28/Feb/19 10:05 AM,28/Oct/23 3:05 AM,28/Feb/19 10:05 AM,,,,,,,,,,,,,,,0,,,,,"When running balance transfer sample, and explorer is stopped by ./stop.sh it will kill the balance transfer application .
We need a mechanism to kill the node by the process id it was started, or another aproach that would not kill the other nodes.

",,nfrunza,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dtr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),nfrunza,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Feb/19 10:05 AM;nfrunza;Wrong project;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft setup tutorial,FAB-14404,38070,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,joe-alewine,joe-alewine,28/Feb/19 11:34 AM,29/Mar/19 5:20 AM,28/Oct/23 3:05 AM,29/Mar/19 5:20 AM,v1.4.0,v1.4.1,v2.0.0,,,v1.4.0,v1.4.1,v2.0.0,,fabric-docs,fabric-orderer,,,,0,raft,,,,"Built on BYFN (like the CouchDB/Private Data, etc tutorials).

Includes configuration, deployment, and reconfiguration.

Scripts? Fabric-samples.",,joe-alewine,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00dun:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,yoheiueda,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Mar/19 4:31 AM;joe-alewine;https://gerrit.hyperledger.org/r/c/30332/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stand up an orderer node,FAB-14405,38071,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,joe-alewine,joe-alewine,28/Feb/19 11:42 AM,29/Mar/19 11:26 PM,28/Oct/23 3:05 AM,29/Mar/19 11:26 PM,,,,,,v1.4.1,v2.0.0,,,fabric-docs,fabric-orderer,,,,0,,,,,"Overview of process to get/compile binary, create org definition, configure node, bootstrap.",,joe-alewine,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00duv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,scottz,suryalnvs,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Mar/19 4:21 AM;joe-alewine;WIP text:

 

*Setting up an ordering node*

In this topic, we'll describe the process for bootstrapping an ordering node.
 If you want more information about the different ordering service implementations
 and their relative strengths and weaknesses, check out our
 [conceptual documentation about ordering](../orderer/ordering_service.html).

Broadly, this topic will involve a few interrelated steps:
 # Compiling the binary
 # Creating the organization your ordering node belongs to (if you have not already
 done so)
 # Configuring your node (using `orderer.yaml`)
 # Creating the genesis block for the orderer system channel
 # Bootstrapping the orderer

*Compile the binary*

This topic assumes you have already cloned Hyperledger Fabric. If you have not,
 check out our documentation on [Prerequisites](prereqs.html). Then, navigate to
 the [Hyperledger Fabric github repo]([https://github.com/hyperledger/fabric]) and
 clone it.

After you have cloned Fabric, navigate to the [Ordering Service README]([https://github.com/hyperledger/fabric/tree/master/orderer/#experimenting-with-the-orderer-service]) and follow the instructions to `go build`.

When this process has completed, the orderer binary has been compiled and is
 ready to be configured and bootstrapped.

*Create an organization definition*

Like peers, all orderers must belong to an organization that must be created
 before the orderer itself is created. This organization has a definition
 encapsulated by a [Membership Service Provider](./membership/membership.html)
 (MSP) that is created by a Certificate Authority (CA) dedicated to creating the
 certificates and MSP for the organization.

For information about creating a CA and using it to create users and an MSP,
 check out the [Fabric CA user's guide]([https://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html]).

*Configure your node*

The configuration of the orderer is handled through a `yaml` filed called
 `orderer.yaml`. The `FABRIC_CFG_PATH` environment variable is used to point to
 an `orderer.yaml` file you've configured, which will extract a series of files
 and certificates on your file system.

To look at a sample `orderer.yaml`, check out the [`fabric-samples` github repo]([https://github.com/hyperledger/fabric/blob/release-1.4/sampleconfig/orderer.yaml]), which **should be read and studied closely** before proceeding.
 Note in particular a few values:
 * `RootCAs` — this certificate path and name will need to match those of your
 root CA certificate in your GoPath.

 * `GenesisFile` — this is the name of the genesis block you will generate for
 this ordering service.

 * `LocalMSPID` — this is the name of the MSP, generated by your CA, of your
 orderer organization. This is where your orderer organization admins will be
 listed.

 * `# TLS enabled`, `Enabled: false`. This is where you specify whether you want
 to [enable TLS](enable_tls.html). If you set this value to `true`, you will have
 to specify the locations of the relevant TLS certificates. Note that this is
 mandatory for Raft nodes.

If you are deploying this node as part of a cluster (for example, as part of a
 cluster of Raft nodes), make note of the `Cluster` and `Consensus` sections.

If you plan to deploy Kafka, you will need to complete `Kafka` section.

*Generate the genesis block of the orderer*

The first block of a newly created channel is known as a ""genesis block"". If
 this genesis block is being created as part of the creation of a **new network**
 (in other words, if the orderer being created will not be joined to an existing
 cluster of orderers), then this genesis block will be the first block of the ""orderer
 system channel"" (also known as the ""ordering system channel""), a special channel
 managed by the orderer admin which includes a list of the organizations permitted
 to create channels. *The genesis block of the orderer system channel is special:
 it must be created and included in the configuration of the node before the node
 can be started.*

To learn how to create a genesis block using the `configtxgen` tool, check out
 [Channel Configuration (configtx)](configtx.html).

Boostrap the ordering node

Once you have built the images, created the MSP, configured your `orderer.yaml`,
 and created the genesis block, you're ready to start your orderer using a
 command that will look similar to:

```
 docker-compose -f docker-compose-cli.yaml up -d --no-deps orderer.example.com
 ```

With the address of your orderer replacing `orderer.example.com`.;;;","13/Mar/19 4:24 AM;joe-alewine;[~scottz] 

[~suryalnvs]

[~dongming]

Appreciate any comments or additions you guys suggest.;;;","19/Mar/19 5:55 AM;suryalnvs;Is this document regarding orderer with raft as consensus type?;;;","19/Mar/19 6:00 AM;joe-alewine;No, it's meant to be implementation agnostic. In other words, it's the process for standing up an orderer node regardless whether it's a Solo node, a Raft node, or a Kafka node.;;;","19/Mar/19 6:01 AM;joe-alewine;That being said, there are fields you need to specify depending on the implementation, so I did try to at least mention what some of them are, though this doc isn't meant to detail those fields or what you should enter (the config docs themselves are meant to do that).;;;","20/Mar/19 4:40 AM;scottz;The section ""*Generate the genesis block of the orderer""* ** should be renamed: ""Creating a new network"". Inside here you describe generating the first config block (ie. the genesis block) for standing up all the initially defined orderers in the network configuration.

Then add another section ""*Adding a new orderer to an existing network*"" where you describe how an orderer admin can retrieve config block, edit it, and submit it as a config update of the orderer system channel (with appropriate signatures) to add a new orderer org, and also add the new orderer, and also then fetch the latest config block and use it with orderer.yaml to stand up the new orderer.

Of course, for Raft, it is more complicated because we would need to explain adding the orderer to the appropriate application channel too. But you can just provide a mention and a link to another doc that explains it for Raft.  (Sorry, I don't yet know of any doc that already exists that you could use.)

In addition, it would probably be nice to see us provide somewhere a similar description of removing an orderer and an orderer organization. Do we have similar documentation already for adding peers and orgs?;;;","20/Mar/19 5:04 AM;joe-alewine;Hey, Scott. Thanks for these comments!

I think the material you're suggesting in your second paragraph would be better added to the ""Configure Raft"" doc, as system channel configuration gets out of the scope of what's involved in standing up a node itself (imo at least). We can give a little more context to the ""reconfiguration"" sections of the Configure Raft doc, with links out to docs where we discuss channel reconfiguration, for a look at that process.

We don't have anything currently in plan for removing an orderer or orderer org.;;;","20/Mar/19 6:58 AM;joe-alewine;https://gerrit.hyperledger.org/r/c/30242/;;;",,,,,,,,,,,,,,,,,,,,,
Remove the chaincode hash from the chaincode definition,FAB-14406,38072,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,jyellick,jyellick,jyellick,28/Feb/19 1:36 PM,04/Apr/19 10:53 PM,28/Oct/23 3:05 AM,04/Apr/19 10:53 PM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,"As we move away from having chaincode installed locally, and even with local chaincodes, it doesn't make a tremendous amount of sense that hash is included in the chaincode definition.  If a peer is dishonest, they may run arbitrary code, and if the peer is honest, then they will be running the correct code in any event.  It really only prevents accidental mis-matches of code packages across the network, which should also be caught by endorsement policy checking.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00dv3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stop storing the hash in the chaincode definition,FAB-14407,38073,38072,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,28/Feb/19 1:37 PM,20/Aug/19 12:57 PM,28/Oct/23 3:05 AM,20/Aug/19 12:57 PM,,,,,,,,,,,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dvb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move hash out of approval definition and into oneof,FAB-14408,38074,38072,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,28/Feb/19 1:37 PM,20/Aug/19 12:57 PM,28/Oct/23 3:05 AM,20/Aug/19 12:57 PM,,,,,,,,,,,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dvj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Broken links to wiki at README.md,FAB-14409,38076,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,vadimreutskiy,vadimreutskiy,28/Feb/19 3:08 PM,09/Apr/19 3:33 AM,28/Oct/23 3:05 AM,,,,,,,,,,,,,,,,0,,,,,"There are several links to the wiki in the README.md file, which guides to the ""Page Not Found"" error message.",,vadimreutskiy,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dvz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),vadimreutskiy,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Apr/19 3:33 AM;yuki-kon;This CR seems duplicated with FAB-15052.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Flakey etcdraft integration test: leader assertion should be more lenient,FAB-14410,38077,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,guoger,guoger,28/Feb/19 3:54 PM,02/Apr/19 2:10 PM,28/Oct/23 3:05 AM,02/Apr/19 2:10 PM,,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"integration tests sometimes try to find raft leader by [inspecting log|https://github.com/hyperledger/fabric/blob/0448fe83c035093eb7402f3081884f51513b3b3e/integration/e2e/cft_test.go#L384]:
{code}
	findLeader := func(runner *ginkgomon.Runner) int {
		Eventually(runner.Err(), time.Minute, time.Second).Should(gbytes.Say(""Raft leader changed: 0 -> ""))

		idBuff := make([]byte, 1)
		runner.Err().Read(idBuff)

		newLeader, err := strconv.ParseInt(string(idBuff), 10, 32)
		Expect(err).To(BeNil())
		return int(newLeader)
	}
{code}

However, leader change does not always transition from zero. If a node in follower state with leader X, receives a raft msg with higher term from Y, the transition is then:
{code}
Raft leader changed: X -> Y
{code}

We should make our assertion here more lenient.

Or, we could simply alter that line of log to not to reflect old leader",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dw7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Apr/19 2:10 PM;guoger;fixed in https://github.com/hyperledger/fabric/commit/2940b73e1980ee16afbae78494e1a9f659004cda;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replace TokenExpection with TokenOperation,FAB-14411,38078,35209,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,angelo.decaro,angelo.decaro,angelo.decaro,28/Feb/19 5:04 PM,02/Dec/19 11:14 PM,28/Oct/23 3:05 AM,02/Dec/19 11:14 PM,,,,,,,,,,,,,,,0,,,,,As per design doc https://docs.google.com/presentation/d/19F1WIm11NX8rdIX6C0pS_lxtOLvFM9ybGGz_rhpSWKo/edit?usp=sharing,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dwf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Mar/19 6:31 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/29697/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Forbid an endorser transaction to write to _fabtoken namespace,FAB-14412,38079,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Won't Do,,angelo.decaro,angelo.decaro,28/Feb/19 5:15 PM,03/Dec/19 3:04 AM,28/Oct/23 3:05 AM,02/Dec/19 11:13 PM,,,,,,,,,,fabric-token,,,,,0,fabtoken,,,,,,angelo.decaro,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,FAB-11144,,,No,,Unset,No,,,"1|i00dwn:",,,,No,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Dec/19 5:07 PM;guoger;[~angelo.decaro] even though fabtoken has been deferred to a future release, i suppose this reservation could still be included into 2.0?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Flaky integration test:  EndToEnd reconfiguration and onboarding when an orderer node is joined [It] isn't influenced by outdated orderer,FAB-14413,38080,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,28/Feb/19 6:13 PM,19/Mar/19 7:57 PM,28/Oct/23 3:05 AM,08/Mar/19 1:44 AM,,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"h2. Problem Statement
As the integration test suggests:
- cluster contains <1, 2, 3, 4>
- <1, 2, 3> are started
- add <5>
- kill <1, 2, 3>
- start <4>
- start <1, 2, 3>
- if <5> is elected as new leader, <4> will never be able to participate in cluster, because it does not know the addition of <5>, and does not have its certificate to communicate with leader (<5>)

h2. Solution
Send artificial signal via `snapC` during eviction suspicion, to trigger catchup


h2. Background
[https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/6356/consoleFull]

The apparent reason of this failure is that {{orderer4}} does not receive any msg from leader {{orderer5}} (orderer1new), and stays in Candidate state indefinitely, while performing periodical campaign and eviction suspicion.

Although the reason behind that is yet to be found. An interesting pattern i observed by skimming over the log is:
{code:java}
[e][OrdererOrg.orderer1new] 2019-02-28 07:31:45.016 UTC [orderer.consensus.etcdraft] logSendFailure -> ERRO 0b1 Failed to send StepRequest to 4, because: aborted channel=systemchannel node=5
[e][OrdererOrg.orderer1new] 2019-02-28 07:31:45.517 UTC [orderer.consensus.etcdraft] send -> INFO 0b2 Successfully sent StepRequest to 4 after failed attempt(s) channel=systemchannel node=5
[e][OrdererOrg.orderer4] 2019-02-28 07:31:45.518 UTC [comm.grpc.server] 1 -> INFO 0f1 streaming call completed grpc.service=orderer.Cluster grpc.method=Step grpc.peer_address=127.0.0.1:52624 grpc.peer_subject=""CN=orderer1new.example.com,L=San Francisco,ST=California,C=US"" error=""certificate extracted from TLS connection isn't authorized"" grpc.code=Unknown grpc.call_duration=321.679µs
[e][OrdererOrg.orderer1new] 2019-02-28 07:31:46.516 UTC [orderer.consensus.etcdraft] logSendFailure -> ERRO 0b3 Failed to send StepRequest to 4, because: aborted channel=systemchannel node=5
[e][OrdererOrg.orderer1new] 2019-02-28 07:31:47.018 UTC [orderer.consensus.etcdraft] send -> INFO 0b4 Successfully sent StepRequest to 4 after failed attempt(s) channel=systemchannel node=5
[e][OrdererOrg.orderer4] 2019-02-28 07:31:47.019 UTC [comm.grpc.server] 1 -> INFO 116 streaming call completed grpc.service=orderer.Cluster grpc.method=Step grpc.peer_address=127.0.0.1:52624 grpc.peer_subject=""CN=orderer1new.example.com,L=San Francisco,ST=California,C=US"" error=""certificate extracted from TLS connection isn't authorized"" grpc.code=Unknown grpc.call_duration=258.742µs
[e][OrdererOrg.orderer1new] 2019-02-28 07:31:48.017 UTC [orderer.consensus.etcdraft] logSendFailure -> ERRO 0b5 Failed to send StepRequest to 4, because: aborted channel=systemchannel node=5
[e][OrdererOrg.orderer1new] 2019-02-28 07:31:48.517 UTC [orderer.consensus.etcdraft] send -> INFO 0b6 Successfully sent StepRequest to 4 after failed attempt(s) channel=systemchannel node=5
[e][OrdererOrg.orderer4] 2019-02-28 07:31:48.518 UTC [comm.grpc.server] 1 -> INFO 156 streaming call completed grpc.service=orderer.Cluster grpc.method=Step grpc.peer_address=127.0.0.1:52624 grpc.peer_subject=""CN=orderer1new.example.com,L=San Francisco,ST=California,C=US"" error=""certificate extracted from TLS connection isn't authorized"" grpc.code=Unknown grpc.call_duration=235.413µs
[e][OrdererOrg.orderer1new] 2019-02-28 07:31:49.516 UTC [orderer.consensus.etcdraft] logSendFailure -> ERRO 0b7 Failed to send StepRequest to 4, because: aborted channel=systemchannel node=5
[e][OrdererOrg.orderer1new] 2019-02-28 07:31:50.017 UTC [orderer.consensus.etcdraft] send -> INFO 0b8 Successfully sent StepRequest to 4 after failed attempt(s) channel=systemchannel node=5
[e][OrdererOrg.orderer4] 2019-02-28 07:31:50.017 UTC [comm.grpc.server] 1 -> INFO 178 streaming call completed grpc.service=orderer.Cluster grpc.method=Step grpc.peer_address=127.0.0.1:52624 grpc.peer_subject=""CN=orderer1new.example.com,L=San Francisco,ST=California,C=US"" error=""certificate extracted from TLS connection isn't authorized"" grpc.code=Unknown grpc.call_duration=331.337µs
[e][OrdererOrg.orderer1new] 2019-02-28 07:31:51.016 UTC [orderer.consensus.etcdraft] logSendFailure -> ERRO 0b9 Failed to send StepRequest to 4, because: aborted channel=systemchannel node=5
[e][OrdererOrg.orderer1new] 2019-02-28 07:31:51.517 UTC [orderer.consensus.etcdraft] send -> INFO 0ba Successfully sent StepRequest to 4 after failed attempt(s) channel=systemchannel node=5
[e][OrdererOrg.orderer4] 2019-02-28 07:31:51.518 UTC [comm.grpc.server] 1 -> INFO 19d streaming call completed grpc.service=orderer.Cluster grpc.method=Step grpc.peer_address=127.0.0.1:52624 grpc.peer_subject=""CN=orderer1new.example.com,L=San Francisco,ST=California,C=US"" error=""certificate extracted from TLS connection isn't authorized"" grpc.code=Unknown grpc.call_duration=272.188µs
{code}
Every 500ms {{orderer1new}} sends a heartbeat msg to {{orderer4}}, and it regularly failed to send this msg, with success in between. I suspect is that this message is actually not delivered to {{orderer4}}

 ",,guoger,kchristidis,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dwv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,kchristidis,yacovm,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/19 6:24 PM;yacovm;It does not. And the failure of sending is a message is because the node on the other side, closes the stream because it rejects the certificate (as seen in the logs). 
The success in sending that is logged in the etcdraft chain is a false positive, because it only thinks it succeeds, due to allocating a new gRPC stream (but not sending the message yet) and then queueing the message in the queue, which returns. The message itself is dropped on the other side and the stream is closed. 
 ;;;","28/Feb/19 9:54 PM;guoger;[~yacovm] hmm, thanks for explaining this. why is certificate rejected? I don't think {{orderer4}} is evicted in that IT, no?;;;","28/Feb/19 10:02 PM;yacovm;Because orderer4 was down while orderer5 was added, so it takes time to get the config update. During that time, it still thinks orderer5 is not in the channel. It's part of the test. ;;;","28/Feb/19 10:08 PM;guoger;[~yacovm] In this case, {{orderer5}} is the leader, and {{orderer4}} is never going to catch up then... I think we have a problem here...;;;","28/Feb/19 10:30 PM;guoger;What we could do, is to actually pull and commit blocks during suspicion, till the latest config block that still contains its certificate. Although this should be done carefully to correctly update the block number in raft go routine to avoid replay. i could take on this if it's considered a viable solution.

[~yacovm][~kchristidis];;;","28/Feb/19 10:36 PM;yacovm;I don't think this needs to be done in the chain. I think this is a trivial extension of the work I did in https://gerrit.hyperledger.org/r/#/c/29084/ ;;;","28/Feb/19 11:11 PM;kchristidis;Based on the discussion in RC just now, a solution to this is to have the eviction suspicion thread push an artificial snapshot (based on the latest config block) to {{snapC}}.;;;",,,,,,,,,,,,,,,,,,,,,,
Multi-node e2e integration test,FAB-14415,38083,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,28/Feb/19 7:28 PM,08/Mar/19 10:37 PM,28/Oct/23 3:05 AM,08/Mar/19 10:37 PM,,,,,,,,,,,,,,,0,,,,,"Improve the green path e2e test with a multi-node test, 3 Kafka orderers to a 3-node Raft cluster.

Supply a valid Raft metadata in all transactions.

Copy the the genesis-file into the orderers directory, so that each orderer has a separate copy.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dxj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
define channel bundle API for orderer endpoints,FAB-14416,38084,26285,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,28/Feb/19 7:40 PM,05/Jun/19 2:03 AM,28/Oct/23 3:05 AM,08/May/19 10:18 PM,,,,,,,,,,,,,,,0,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dxr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/19 8:02 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/29700/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove CASupport.GetClientRootCAs code,FAB-14417,38086,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,28/Feb/19 9:37 PM,01/Mar/19 3:24 AM,28/Oct/23 3:05 AM,01/Mar/19 3:24 AM,,,,,,v2.0.0,,,,,,,,,0,hygiene,,,,dead code,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,FAB-14421,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dy7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Mar/19 12:31 AM;mastersingh24;https://gerrit.hyperledger.org/r/29712;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
define proto messages to support non-fungible tokens,FAB-14418,38087,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,KaoutarEL,KaoutarEL,KaoutarEL,28/Feb/19 10:08 PM,13/Jan/20 11:41 PM,28/Oct/23 3:05 AM,13/Jan/20 11:41 PM,,,,,,,,,,,,,,,0,fabtoken,stale-item,,,"- protos for issue, transfer, redeem and list",,bur,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14334,,,No,,Unset,No,,,"1|i00dyf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bur,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Mar/19 6:55 PM;bur;[https://gerrit.hyperledger.org/r/#/c/29701/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
increase leaderless poll time to 10 seconds,FAB-14419,38093,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,28/Feb/19 11:33 PM,05/Mar/19 11:59 PM,28/Oct/23 3:05 AM,01/Mar/19 6:12 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dzj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow statically configured CAs for TLS communication with orderers,FAB-14420,38094,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,28/Feb/19 11:48 PM,25/Jun/20 7:33 PM,28/Oct/23 3:05 AM,04/Jul/19 10:27 AM,,,,,,v1.4.1,,,,,,,,,0,,,,,"When the peer connects to orderer nodes, if TLS is required the list of trusted CAs is built from the org MSPs in the channel configuration.

There may be situations where a user may want to configure their peer to trust TLS certs from additional root CAs.

This change adds new config options peer.tls.serverRootCAs.files and peer.deliveryclient.staticRootsEnabled.",,denyeart,mastersingh24,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-5288,FAB-16715,FAB-16544,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00dzr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mastersingh24,yacovm,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/19 11:55 PM;mastersingh24;release-1.4:   https://gerrit.hyperledger.org/r/29711;;;","30/Mar/19 3:20 AM;denyeart;[~mastersingh24] I don't see this in master, did you intend to cherry pick?;;;","09/Jun/19 4:51 PM;denyeart;[~mastersingh24] [~yacovm] Is this needed in master still? 

Also want to make sure it still works given the recent change to use org specific orderer endpoints.;;;","09/Jun/19 6:25 PM;yacovm;well, the peer<->orderer endpoints change is not in any of the branches, not in 1.4 or master because in master it was/is blocked by the refactoring and in 1.4 i should do that this week, so the change you speak of didn't happen yet.

Regardless it's a good point and it needs to be taken into account when doing the endpoint change, however I think this item isn't going to master... [~mastersingh24] ? ;;;","25/Jun/20 7:31 PM;denyeart;Note - the overrides were finished in FAB-16544.;;;",,,,,,,,,,,,,,,,,,,,,,,,
Remove CASupport.GetServerRootCAs code,FAB-14421,38096,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,01/Mar/19 12:41 AM,01/Mar/19 11:14 PM,28/Oct/23 3:05 AM,01/Mar/19 11:14 PM,,,,,,v2.0.0,,,,,,,,,0,hygiene,,,,This is only called by another function so will inline and remove,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,FAB-14417,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e07:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Mar/19 12:54 AM;mastersingh24;https://gerrit.hyperledger.org/r/29715;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove CASupport from comm package,FAB-14422,38097,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,01/Mar/19 12:51 AM,02/Mar/19 5:03 AM,28/Oct/23 3:05 AM,02/Mar/19 5:03 AM,,,,,,v2.0.0,,,,,,,,,0,hygiene,,,,"It's now just a struct which is embedded in CredentialSupport ... so should combine.
Also need to simply inline a similar struct in orderer.",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e0f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Mar/19 6:33 PM;mastersingh24;https://gerrit.hyperledger.org/r/29732;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
intermittent UT test failure in common/cluster/comm_test#TestMetrics: panic: runtime error: index out of range [0] with length 0,FAB-14423,38098,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,yacovm,sykesm,sykesm,01/Mar/19 12:52 AM,24/Mar/20 11:47 PM,28/Oct/23 3:05 AM,24/Mar/20 11:47 PM,,,,,,v2.0.0,,,,fabric-orderer,,,,,0,ci-flake,,,,"{code}
-----END CERTIFICATE-----
 for channel test2
2019-02-28 10:45:04.708 EST [test] applyMembershipConfig -> INFO 499 36 exists in both old and new membership for channel test2 , skipping its deactivation
2019-02-28 10:45:04.708 EST [test] Configure -> INFO 49a Exiting
2019-02-28 10:45:04.719 EST [test] NewStream -> DEBU 49b Created new stream to 127.0.0.1:61299 with ID of 1 and buffer size of 1
2019-02-28 10:45:04.723 EST [test] func1 -> DEBU 49c Stream 1 to (127.0.0.1:61299) is aborted
panic: runtime error: index out of range [recovered]
	panic: runtime error: index out of range

goroutine 2856 [running]:
testing.tRunner.func1(0xc000c6e200)
	/usr/local/Cellar/go/1.11.5/libexec/src/testing/testing.go:792 +0x6a7
panic(0x4c66160, 0x56a2080)
	/usr/local/Cellar/go/1.11.5/libexec/src/runtime/panic.go:513 +0x1b9
github.com/hyperledger/fabric/common/metrics/metricsfakes.(*Counter).WithArgsForCall(0xc00055faf0, 0x0, 0x0, 0x0, 0x0)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/common/metrics/metricsfakes/counter.go:57 +0x11d
github.com/hyperledger/fabric/orderer/common/cluster_test.TestMetrics.func6(0xc000b82000, 0xc000b82d80, 0xc00055f500)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:1229 +0x66b
github.com/hyperledger/fabric/orderer/common/cluster_test.TestMetrics.func7(0xc000c6e200)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:1256 +0x54e
testing.tRunner(0xc000c6e200, 0xc0004ac1b0)
	/usr/local/Cellar/go/1.11.5/libexec/src/testing/testing.go:827 +0x163
created by testing.(*T).Run
	/usr/local/Cellar/go/1.11.5/libexec/src/testing/testing.go:878 +0x65a
FAIL	github.com/hyperledger/fabric/orderer/common/cluster	8.427s
{code}

Hit locally on master @3907af21444471f1c6aac3322d58cf7917020491",,btl5037,manish-sethi,sykesm,tsharris,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17593,,,,,,,,,,"24/Mar/20 11:04 PM;tsharris;comm_test_03242020.log;https://jira.hyperledger.org/secure/attachment/18181/comm_test_03242020.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e0n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,manish-sethi,sykesm,tsharris,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Mar/19 11:19 AM;btl5037;Bumped into this here, and several other times today: [https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/9724/consoleFull]

Not very difficult to replicate, focusing the test and running it several times in a row almost always will reproduce;;;","01/Apr/19 5:07 PM;yacovm;I think I fixed it in https://gerrit.hyperledger.org/r/#/c/29961/ ... closing in the meantime ;;;","16/Jan/20 12:55 AM;manish-sethi;Opening this Jira again...

Hit again in CI merge job with the following trace

 ([https://dev.azure.com/Hyperledger/0227bd2c-c4f6-478f-be00-ee519f115180/_apis/build/builds/5368/logs/9])
{noformat}
panic: runtime error: index out of range [0] with length 0 [recovered]
	panic: runtime error: index out of range [0] with length 0

goroutine 1245 [running]:
testing.tRunner.func1(0xc00016c800)
	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:874 +0x69f
panic(0x115fe60, 0xc0012b0180)
	/opt/hostedtoolcache/go/1.13.4/x64/src/runtime/panic.go:679 +0x1b2
github.com/hyperledger/fabric/common/metrics/metricsfakes.(*Histogram).WithArgsForCall(0xc0000c3a48, 0x0, 0x0, 0x0, 0x0)
	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/common/metrics/metricsfakes/histogram.go:95 +0x139
github.com/hyperledger/fabric/orderer/common/cluster_test.TestMetrics.func5(0xc0000f6b00, 0xc0000f7080, 0xc0000c3500)
	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:1208 +0xdc
github.com/hyperledger/fabric/orderer/common/cluster_test.TestMetrics.func7(0xc00016c800)
	/home/vsts/work/1/go/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:1276 +0x611
testing.tRunner(0xc00016c800, 0xc0003183d0)
	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:909 +0x19a
created by testing.(*T).Run
	/opt/hostedtoolcache/go/1.13.4/x64/src/testing/testing.go:960 +0x652
FAIL	github.com/hyperledger/fabric/orderer/common/cluster	16.753s
{noformat}
 ;;;","24/Mar/20 11:05 PM;tsharris;Reopening, I attached logs from recent occurrence. ;;;","24/Mar/20 11:46 PM;sykesm;This is the same as FAB-17593.;;;",,,,,,,,,,,,,,,,,,,,,,,,
cluster comm metrics flake,FAB-14424,38099,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,01/Mar/19 1:24 AM,01/Apr/19 5:42 PM,28/Oct/23 3:05 AM,20/Mar/19 3:17 PM,,,,,,v2.0.0,,,,fabric-orderer,,,,,0,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/9625/console

{quote}
17:30:10 -----END CERTIFICATE-----
17:30:10 ]
17:30:10 2019-02-28 15:28:39.828 UTC [test] updateStubInMapping -> INFO 36b Allocating a new stub for node 24 with endpoint of 127.0.0.1:43134 for channel test2
17:30:10 2019-02-28 15:28:39.828 UTC [test] updateStubInMapping -> INFO 36c Deactivating node 24 in channel test2 with endpoint of 127.0.0.1:43134 due to TLS certificate change
17:30:10 2019-02-28 15:28:39.829 UTC [test] applyMembershipConfig -> INFO 36d 24 exists in both old and new membership for channel test2 , skipping its deactivation
17:30:10 2019-02-28 15:28:39.829 UTC [test] Configure -> INFO 36e Exiting
17:30:10 panic: runtime error: index out of range [recovered]
17:30:10 	panic: runtime error: index out of range
17:30:10 
17:30:10 goroutine 2616 [running]:
17:30:10 testing.tRunner.func1(0xc0004f0800)
17:30:10 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:792 +0x6a7
17:30:10 panic(0x146a940, 0x1fc1060)
17:30:10 	/opt/go/go1.11.5.linux.amd64/src/runtime/panic.go:513 +0x1b9
17:30:10 github.com/hyperledger/fabric/common/metrics/metricsfakes.(*Counter).WithArgsForCall(0xc0005ba5f0, 0x0, 0x0, 0x0, 0x0)
17:30:10 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/metrics/metricsfakes/counter.go:57 +0x11d
17:30:10 github.com/hyperledger/fabric/orderer/common/cluster_test.TestMetrics.func6(0xc000750a20, 0xc000750fc0, 0xc0005ba000)
17:30:10 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:1229 +0x66b
17:30:10 github.com/hyperledger/fabric/orderer/common/cluster_test.TestMetrics.func7(0xc0004f0800)
17:30:10 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:1256 +0x54e
17:30:10 testing.tRunner(0xc0004f0800, 0xc000a44e40)
17:30:10 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0x163
17:30:10 created by testing.(*T).Run
17:30:10 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:878 +0x65a
17:30:10 FAIL	github.com/hyperledger/fabric/orderer/common/cluster	8.743s
17:30:10 ?   	github.com/hyperledger/fabric/orderer/common/cluster/mocks	[no test files]{quote}",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e0v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Mar/19 2:56 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/29961/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Dockerfile for Node chaincode container,FAB-14425,38100,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,skarim,skarim,skarim,01/Mar/19 1:43 AM,03/Dec/19 1:47 AM,28/Oct/23 3:05 AM,03/Dec/19 1:47 AM,,,,,,,,,,,,,,,0,,,,,"Update dockerfile to run chaincode container
as non-root",,denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16670,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e13:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,skarim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Mar/19 1:48 AM;skarim;https://gerrit.hyperledger.org/r/c/29721/;;;","03/Dec/19 1:46 AM;denyeart;abandoned.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Reduce the use of createTokenKey,FAB-14427,38102,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,bur,bur,01/Mar/19 1:45 AM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,fabric-token,,,,,0,stale-item,,,,"Currently, verifier uses createTokenKey which calls createCompositeKey to build tokenKeys during action validation and commit. createCompositeKey internally validates the input and throws an error in case it can not create a valid CompositeKey. 

However, for most transactions, tokenKeys are generated multiple times, first, during validation (check action path), and then again during commit. This looks like unnecessary extra work. In particular, avoiding string concatenation may improve performance.

Also, it seems that during commit the error handling of createTokenKey is never uses, as in presents of an invalid input, it is caught already during check action path. 

Proposal: Create tokenKeys during validation and pass them into the commit path of the verify to avoid unnecessary re-creation of the keys including validation. 

 ",,bur,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i00e1j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bur,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Raft option to BYFN doc,FAB-14428,38103,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,joe-alewine,joe-alewine,01/Mar/19 1:50 AM,25/Mar/19 11:25 PM,28/Oct/23 3:05 AM,25/Mar/19 11:25 PM,,,,,,v1.4.0,v1.4.1,v2.0.0,,fabric-docs,fabric-orderer,,,,0,,,,,"Will give an option to stand up a Raft ordering service in BYFN.

Current plan would not be to give the individual commands — we'll leave that to a separate tutorial: FAB-14404.",,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00e1r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Mar/19 4:36 AM;joe-alewine;https://gerrit.hyperledger.org/r/c/30238/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Raft to introductory docs,FAB-14429,38104,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,joe-alewine,joe-alewine,01/Mar/19 1:51 AM,28/Mar/19 4:09 AM,28/Oct/23 3:05 AM,28/Mar/19 3:33 AM,,,,,,v1.4.1,v2.0.0,,,fabric-docs,,,,,0,,,,,This doc: https://hyperledger-fabric.readthedocs.io/en/release-1.4/whatis.html,,joe-alewine,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00e1z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,yoheiueda,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Mar/19 2:57 AM;joe-alewine;https://gerrit.hyperledger.org/r/c/30189/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Raft to What's New doc,FAB-14430,38105,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,joe-alewine,joe-alewine,01/Mar/19 1:53 AM,28/Mar/19 4:06 AM,28/Oct/23 3:05 AM,28/Mar/19 3:30 AM,,,,,,v1.4.1,v2.0.0,,,fabric-docs,,,,,0,,,,,"Give overview of Raft in What's New doc: https://hyperledger-fabric.readthedocs.io/en/release-1.4/whatsnew.html

Will have to be careful to mention it is for the 1.4.1 release.

Change name of doc to ""What's New in 1.4.x""?",,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00e27:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Mar/19 2:26 AM;joe-alewine;https://gerrit.hyperledger.org/r/c/30187/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Standardize SOLO/solo to ""Solo""",FAB-14431,38106,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Invalid,joe-alewine,joe-alewine,joe-alewine,01/Mar/19 1:56 AM,10/Jan/20 4:37 AM,28/Oct/23 3:05 AM,10/Jan/20 4:37 AM,,,,,,Future,,,,fabric-docs,,,,,0,,,,,Across all docs.,,denyeart,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e2f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Jun/19 4:55 PM;denyeart;[~joe-alewine] I bumped to v1.4.2. Or if you don't think you will get to this, you can just set to Future and unlink from the Raft epic.;;;","10/Jul/19 3:27 AM;joe-alewine;[~denyeart] yeah I think the latter is better.;;;","10/Jan/20 4:37 AM;joe-alewine;Solo has now been removed/deprecated.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Add text to Upgrade doc about Raft,FAB-14432,38107,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,joe-alewine,joe-alewine,joe-alewine,01/Mar/19 1:58 AM,28/Mar/19 4:09 AM,28/Oct/23 3:05 AM,25/Mar/19 11:25 PM,,,,,,v1.4.1,v2.0.0,,,fabric-docs,,,,,0,,,,,"There will be no explicit Upgrade story for v1.4.1, but we do need to put some text telling people that if they want to use Raft, they'll need to upgrade their ordering service to 1.4.1.",,joe-alewine,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00e2n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,pandrejko,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Mar/19 10:25 PM;pandrejko;We'll need some kind of text in the Upgrade doc. Nothing major, but at least addressing the existence of Raft and 1.4.1
And mentioning that we don't have an upgrade story from Solo to Raft;;;","19/Mar/19 4:49 AM;joe-alewine;https://gerrit.hyperledger.org/r/c/30196/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add links in ""Bringing Up Kafka"" doc",FAB-14433,38108,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,joe-alewine,joe-alewine,01/Mar/19 1:59 AM,28/Mar/19 4:08 AM,28/Oct/23 3:05 AM,26/Mar/19 12:44 AM,,,,,,v1.4.1,v2.0.0,,,fabric-docs,fabric-orderer,,,,0,,,,,"Links to ""bringing up a node"" and ""Configure Raft"" doc.",,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00e2v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Mar/19 12:05 AM;joe-alewine;https://gerrit.hyperledger.org/r/c/30183/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
 [Fail] Chain Multiple Raft nodes when reconfiguring raft cluster reconfiguration [It] stop cluster quorum and continue reconfiguration after the restart ,FAB-14434,38109,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sykesm,sykesm,01/Mar/19 2:18 AM,02/Apr/19 2:08 PM,28/Oct/23 3:05 AM,02/Apr/19 2:08 PM,v2.0.0,,,,,v2.0.0,,,,fabric-orderer,,,,,0,ci-flake,,,,"{code}
16:49:06 [Fail] Chain Multiple Raft nodes when reconfiguring raft cluster reconfiguration [It] stop cluster quorum and continue reconfiguration after the restart 
16:49:06 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:3123
16:49:06 
16:49:06 Ran 80 of 80 Specs in 35.862 seconds
16:49:06 FAIL! -- 79 Passed | 1 Failed | 0 Pending | 0 Skipped
16:49:06 --- FAIL: TestEtcdraft (35.86s)
16:49:06 FAIL
{code}",,guoger,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Mar/19 2:19 AM;sykesm;console-timestamp.log.gz.txt;https://jira.hyperledger.org/secure/attachment/16886/console-timestamp.log.gz.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e33:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Apr/19 2:08 PM;guoger;Close for now. Pls re-open if hit again.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve peer rebuild and block commit hash log messages,FAB-14435,38111,37869,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,denyeart,denyeart,denyeart,01/Mar/19 4:01 AM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,v1.1.2,,,,fabric-ledger,,,,,0,stale-item,,,,"Improve log messages for peer rebuild following
a peer node reset operation.

Log commitHash upon block commit only if it has been calculated
since block1.",,denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e3b:",,,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sykesm,,,,,,,,,,release-1.1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Long running test in integration/e2e/etcdraft_reconfig_test.go causing failure,FAB-14436,38112,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,btl5037,btl5037,01/Mar/19 4:56 AM,19/Mar/19 11:11 PM,28/Oct/23 3:05 AM,19/Mar/19 11:11 PM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"The following test:

{color:#4c4c4c}EndToEnd reconfiguration and onboarding {color}when an orderer node is joined {color:#ff0000}*[It] isn't influenced by outdated orderers* {color}

in integration/e2e/etcdraft_reconfig_test.go fails frequently in integration testing. There are 3 occurrences of this failure in the first 2 pages of open CR's on Gerrit. I've run up against it 3 times myself today.

Locally, the test takes 53 seconds to run, it has a 60 second timeout, which when run in Jenkins is extremely flaky given the small margin of error. It is very easy to replicate, if you simply focus the test, and do a `go test -count=2` I get the error every time locally.",,btl5037,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e3j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Mar/19 5:03 AM;btl5037;https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/6418/console;;;","01/Mar/19 7:02 AM;yacovm;what do you mean by ""it has a 60 seconds timeout""? Timeouts are usually for specific operations and are unrelated to how much it takes a test to run.

 

As for this test - it's not that it's flaky... we have a real (deadly) bug, and this test fails because of it - FAB-14413;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Document that Raft provides no ack to submitting clients,FAB-14437,38113,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,denyeart,denyeart,01/Mar/19 6:38 AM,28/Mar/19 4:10 AM,28/Oct/23 3:05 AM,28/Mar/19 3:32 AM,,,,,,v1.4.1,v2.0.0,,,fabric-docs,,,,,0,,,,,"Unlike solo and kafka ordering, Raft ordering will not provide acknowledgement to submitting clients that the transaction was ordered. This can cause lost transactions (e.g. if the leader crashes) and will therefore REQUIRE submitting clients to listen for transaction commit events.

Since this is of critical importance, it needs to be documented in multiple places, e.g. conceptual ordering doc, transaction flow doc, samples/tutorials including developing applications doc (commercial paper) and writing your first application (fabcar).",,denyeart,joe-alewine,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00e3r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,joe-alewine,yoheiueda,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Mar/19 5:59 AM;joe-alewine;Added text to the latest patch set of the Orderer concept doc.;;;","20/Mar/19 4:03 AM;joe-alewine;https://gerrit.hyperledger.org/r/c/30237/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
"Fix key ""\x00\x00initialize"" so as to not collide with a composite key in application space",FAB-14438,38114,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,manish-sethi,manish-sethi,01/Mar/19 2:48 PM,05/May/19 9:54 PM,28/Oct/23 3:05 AM,08/Mar/19 2:45 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,https://gerrit.hyperledger.org/r/#/c/29076/20/core/chaincode/chaincode_support.go@33,,denyeart,jyellick,manish-sethi,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14518,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00e3z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,manish-sethi,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Mar/19 1:12 AM;sykesm;/cc [~jyellick], [~ales] - This appears to have been opened as part of a code review on your stack. Can you please prioritize as appropriate?

Thanks.;;;","05/Mar/19 6:07 AM;jyellick;I'd say 'medium' is appropriate.  The likelihood of collision is low, but we should fix before release.;;;","05/Mar/19 7:17 AM;sykesm;Please reassign as appropriate. Thanks.;;;","05/May/19 9:54 PM;denyeart;Fixed in https://gerrit.hyperledger.org/r/#/c/29914/;;;",,,,,,,,,,,,,,,,,,,,,,,,,
private data collection node-sdk sample not working,FAB-14439,38115,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,kshitij.sinha,kshitij.sinha,01/Mar/19 3:44 PM,04/Mar/19 3:15 PM,28/Oct/23 3:05 AM,04/Mar/19 3:15 PM,v1.4.0,,,,,,,,,fabric-sdk-node,,,,,0,Documentation,node-SDK,privatedata,,"As per example in the document: [https://fabric-sdk-node.github.io/release-1.4/tutorial-private-data.html]

Reference Chaincode: [https://github.com/hyperledger/fabric-samples/tree/release-1.4/chaincode/marbles02_private]

The code in the document gives a {color:#de350b}bad proposal{color} response.

Here is the SDK log:

 
{quote}2019-03-01T06:16:20.039Z - debug: [client-utils.js]: buildChannelHeader - type 3 channel_id mychannel tx_id NaN epoch null chaincode_id marble
 2019-03-01T06:16:20.042Z - debug: [client-utils.js]: buildProposal - adding in transientMap
 Unknown macro: \{ marblename}
 2019-03-01T06:16:20.056Z - debug: [crypto_ecdsa_aes]: ecdsa signature: negative=0, words=[37122400, 56231231, 47016136, 30581968, 6785216, 45689559, 34947538, 54145038, 22507532, 3105674, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], length=10, red=null, negative=0, words=[9694465, 61460886, 60646008, 56278728, 16513404, 39877521, 55050391, 50393339, 39001155, 1960412, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], length=10, red=null, recoveryParam=0
 2019-03-01T06:16:20.057Z - debug: [Remote.js]: getUrl::grpcs://somehost:7051
 2019-03-01T06:16:20.057Z - debug: [Peer.js]: sendProposal - Start ----org1-service-peer1 grpcs://somehost:7051
 2019-03-01T06:16:20.058Z - debug: [Remote.js]: getUrl::grpcs://somehost:7060
 2019-03-01T06:16:20.058Z - debug: [Peer.js]: sendProposal - Start ----org2-service-peer1 grpcs://somehost:7060
 2019-03-01T06:16:20.071Z - debug: [Remote.js]: Successfully connected to remote gRPC server
 2019-03-01T06:16:20.076Z - debug: [Remote.js]: Successfully connected to remote gRPC server
 *{color:#de350b}2019-03-01T06:16:20.095Z - debug: [Peer.js]: sendProposal - Received proposal response from peer ""grpcs://somehost:7060"": status - 500{color}*
 *{color:#de350b}2019-03-01T06:16:20.101Z - debug: [Peer.js]: sendProposal - Received proposal response from peer ""grpcs://somehost:7051"": status - 500{color}*
 2019-03-01T06:16:20.102Z - debug: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: marble must be a key in the transient map
 2019-03-01T06:16:20.102Z - debug: [client-utils.js]: sendPeersProposal - Promise is rejected: Error: marble must be a key in the transient map
{quote}
 
 As per the last error line in the log, even adding the following:
  
 var data = \{""marble"": transient_data}
 causes error of Illegal Buffer
  
 The chaincode expects _marble_ as a key in the json and the value to be a base64 encoding of the transient JSON
  
 So, here is what worked:
{code:java}
var transient_data = {
    'name': 'marble2', 
    'color': 'blue', 
    'size': 8, 
    'owner': 'Joe', 
    'price': 80 
};
var data = JSON.stringify(transient_data); // Convert transient data object to JSON string
data = new Buffer(data).toString('base64'); // convert the JSON string to base64 encoded string
var marble_private = { ""marble"": data };  //Add the encoded data as a value to the marble key expected by the marbles chaincode
const tx_id = client.newTransactionID();
tx_id_string = tx_id.getTransactionID();
var request = {
    chaincodeId: 'marble',
    txId: tx_id,
    fcn: 'initMarble',
    args: [], // all data is transient data
    transientMap: marble_private, // private data
};
{code}
 

After running this the transaction is committed {color:#00875a}successfully{color}.

 
{quote}2019-03-01T06:40:12.694Z - debug: [client-utils.js]: buildChannelHeader - type 3 channel_id mychannel tx_id NaN epoch null chaincode_id marble3
2019-03-01T06:40:12.698Z - debug: [client-utils.js]: buildProposal - adding in transientMap \{ marble: 'eyJuYW1lIjoibWFyYmxlNiIsImNvbG9yIjoiYmx1ZSIsInNpemUiOjgsIm93bmVyIjoiSm9lIiwicHJpY2UiOjgwfQ==' }
2019-03-01T06:40:12.711Z - debug: [crypto_ecdsa_aes]: ecdsa signature: negative=0, words=[42134526, 50606244, 23915505, 49316395, 9771392, 1077880, 37773943, 15416817, 13714539, 1796388, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], length=10, red=null, negative=0, words=[14715548, 18008218, 6840247, 23891351, 53988489, 46167869, 10562088, 43343042, 35793986, 62966, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], length=10, red=null, recoveryParam=1
2019-03-01T06:40:12.712Z - debug: [Remote.js]: getUrl::grpcs://somehost:7051
2019-03-01T06:40:12.712Z - debug: [Peer.js]: sendProposal - Start ----org1-service-peer1 grpcs://somehost:7051
2019-03-01T06:40:12.713Z - debug: [Remote.js]: getUrl::grpcs://somehost:7060
2019-03-01T06:40:12.713Z - debug: [Peer.js]: sendProposal - Start ----org2-service-peer1 grpcs://somehost:7060
2019-03-01T06:40:12.726Z - debug: [Remote.js]: Successfully connected to remote gRPC server
2019-03-01T06:40:12.731Z - debug: [Remote.js]: Successfully connected to remote gRPC server
*{color:#00875a}2019-03-01T06:40:12.760Z - debug: [Peer.js]: sendProposal - Received proposal response from peer ""grpcs://somehost:7051"": status - 200{color}*
*{color:#00875a}2019-03-01T06:40:12.770Z - debug: [Peer.js]: sendProposal - Received proposal response from peer ""grpcs://somehost:7060"": status - 200{color}*
2019-03-01T06:40:12.770Z - debug: [client-utils.js]: sendPeersProposal - Promise is fulfilled: [object Object]
2019-03-01T06:40:12.771Z - debug: [client-utils.js]: sendPeersProposal - Promise is fulfilled: [object Object]{quote}

  
  ",,kshitij.sinha,,,,,,,,,,,,,,,,,,,,FABN-1170,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e47:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kshitij.sinha,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failed revalidation should have no impact on block cutting timer,FAB-14441,38120,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,01/Mar/19 7:15 PM,07/Mar/19 3:47 AM,28/Oct/23 3:05 AM,07/Mar/19 3:47 AM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,raft,,,,,,denyeart,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e5b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,guoger,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Mar/19 7:17 PM;guoger;https://gerrit.hyperledger.org/r/c/29733/;;;","06/Mar/19 12:10 AM;denyeart;Merged in master, need to cherry pick to release-1.4.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Create release note skeleton for v2.0.0,FAB-14443,38122,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,denyeart,denyeart,denyeart,01/Mar/19 9:04 PM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,fabric-release,,,,,0,stale-item,,,,,,denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e5r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
[fabric-samples] No await for FileSystemWallet#import,FAB-14444,38124,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,nicklatkovich,nicklatkovich,nicklatkovich,02/Mar/19 12:12 AM,25/Apr/19 10:05 PM,28/Oct/23 3:05 AM,25/Apr/19 10:05 PM,v1.4.0,,,,,v1.4.2,v2.0.0,,,fabric-samples,,,,,0,,,,,The promise of importing admin/user1 wallets is not awaiting (js and ts fabcar samples).,,nicklatkovich,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzy5h0:",,,,Unset,Unset,,,,"replace `main();` to `main().then(() => process.exit(0));`",,Unset,,,,,,Unset,,Unset,,(Please add usage information),nicklatkovich,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Incomplete/incorrect error message for using an ""old"" sequence number",FAB-14445,38126,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,latitiah,latitiah,02/Mar/19 1:12 AM,15/Aug/19 3:57 AM,28/Oct/23 3:05 AM,15/Aug/19 3:57 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,"Incomplete error message:
{code}failed to invoke backing implementation of 'ApproveChaincodeDefinitionForMyOrg': attempted to define the current sequence (%d) for namespace %s, but: Version '0' != '2'{code}

The values for printf - %d and %s were not completed.
Also, this error occurs when the wrong sequence value is used. Sequence 1 is for version 0 and not version 2, but it also attempts to reuse the sequence that has already been used.
 
The command executed:
{code}peer lifecycle chaincode approveformyorg --name mycc --channelID behavesystest --version 2 --peerAddresses peer0.org1.example.com:7051 --peerAddresses peer1.org1.example.com:7051 --hash 5110c123b643604a196fb030dcbe2d2ba2399a8e26638827239381fc56cd5117 --sequence 1 --init-required --waitForEvent --orderer orderer0.example.com:7050{code}",,latitiah,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e67:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Aug/19 3:57 AM;wlahti;This error message was fixed while working on code the same area for FAB-15234.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make channelConfig encoding/decoding deterministic,FAB-14446,38127,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,Senthil1,Senthil1,02/Mar/19 1:47 AM,25/Oct/19 2:01 AM,28/Oct/23 3:05 AM,25/Oct/19 1:56 AM,,,,,,v2.0.0,,,,fabric-ledger,fabric-peer,,,,0,,,,,"For BlockCommitHash to work, we need to ensure that channelConfig serialization and deserialization is deterministics across peers",,denyeart,manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15499,,,No,,Unset,No,,,"1|i008rj:iwy6",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,manish-sethi,Senthil1,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/May/19 12:16 PM;manish-sethi;In v1.1 version of BlockCommitHash, channelConfig was simply skipped from BlockCommitHash, see https://gerrit.hyperledger.org/r/c/fabric/+/29755

Reevaluate one of the following approaches...

https://gerrit.hyperledger.org/r/#/c/fabric/+/29725/
https://gerrit.hyperledger.org/r/#/c/fabric/+/29744/
https://gerrit.hyperledger.org/r/#/c/fabric/+/29766/

Requires rebuild of statedb;;;","25/Oct/19 1:56 AM;manish-sethi;We still do not include channel config into block commit hash as there is not much value as compared to the burden that it would cause to the existing networks (requiring reset). However this CR fixes the non determinism of bytes of channel config that are persisted in statedb.

[https://gerrit.hyperledger.org/r/#/c/fabric/+/34044/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Update to golang 1.12,FAB-14447,38128,37993,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,02/Mar/19 1:47 AM,22/May/19 12:54 AM,28/Oct/23 3:05 AM,22/May/19 12:54 AM,,,,,,,,,,,,,,,0,,,,,[https://github.com/hyperledger/fabric/blob/master/ci.properties#L1],,btl5037,,,,,,,,,,,,,,,,,,FAB-14318,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e6n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/May/19 4:20 AM;btl5037;https://gerrit.hyperledger.org/r/c/fabric/+/31305;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update to golang 1.12 in Fabric-BaseImage,FAB-14449,38130,37993,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,02/Mar/19 1:50 AM,05/Jun/19 5:49 AM,28/Oct/23 3:05 AM,05/Jun/19 5:49 AM,,,,,,,,,,,,,,,0,,,,,https://github.com/hyperledger/fabric-baseimage/blob/master/scripts/common/setup.sh#L35,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e73:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/May/19 4:20 AM;btl5037;https://gerrit.hyperledger.org/r/c/fabric-baseimage/+/31307;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Go 1.12 to CI,FAB-14450,38131,37993,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,02/Mar/19 1:55 AM,21/May/19 4:21 AM,28/Oct/23 3:05 AM,21/May/19 4:19 AM,,,,,,,,,,,,,,,0,,,,,"For x86: [https://github.com/hyperledger/ci-management/blob/master/packer/provision/docker.sh#L110]

For s390x: Request @eddie.allen (Eddie Allen) to install in s390x under /opt/go",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e7b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/May/19 4:21 AM;btl5037;https://gerrit.hyperledger.org/r/c/ci-management/+/31304;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer is crashing with panic unable to parse TickInterval,FAB-14451,38132,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Test Error,,suryalnvs,suryalnvs,02/Mar/19 2:05 AM,30/May/19 8:39 PM,28/Oct/23 3:05 AM,02/Mar/19 2:48 AM,,,,,,,,,,,,,,,0,,,,,"Orderer is crashing when using latest master (commit number: d29dc24bb Merge ""[FAB-14419] Increase leaderless check interval to 10s"" ) and
{code:java}
TickInterval: 500ms{code}
with error:
{code:java}
2019-03-01 16:32:16.681 UTC [orderer.commmon.multichannel] newChainSupport -> PANI 014 [channel: orderersystemchannel] Error creating consenter: failed to parse TickInterval () to time duration
panic: [channel: orderersystemchannel] Error creating consenter: failed to parse TickInterval () to time durationgoroutine 1 [running]:
github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc0003c0f20, 0x0, 0x0, 0x0)
    /go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:229 +0x515
github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc000170068, 0x4, 0x148d1a4, 0x2a, 0xc00062b738, 0x2, 0x2, 0x0, 0x0, 0x0)
    /go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0xf6
github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Panicf(0xc000170068, 0x148d1a4, 0x2a, 0xc00062b738, 0x2, 0x2)
    /go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:159 +0x79
github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Panicf(0xc000170070, 0x148d1a4, 0x2a, 0xc00062b738, 0x2, 0x2)
    /go/src/github.com/hyperledger/fabric/common/flogging/zap.go:74 +0x60
github.com/hyperledger/fabric/orderer/common/multichannel.newChainSupport(0xc0003b78c0, 0xc0002d0aa0, 0xc0009be570, 0x158fe00, 0x1fb3af0, 0xc0008fefd0, 0x0)
    /go/src/github.com/hyperledger/fabric/orderer/common/multichannel/chainsupport.go:89 +0x668
github.com/hyperledger/fabric/orderer/common/multichannel.(*Registrar).Initialize(0xc0003b78c0, 0xc0009be570)
    /go/src/github.com/hyperledger/fabric/orderer/common/multichannel/registrar.go:166 +0x30a
github.com/hyperledger/fabric/orderer/common/server.initializeMultichannelRegistrar(0xc00017acc0, 0xc0002becc0, 0xc00040e3d0, 0x0, 0xc0003b7830, 0x1f555e0, 0xc0008fe320, 0x2, 0x2, 0xc0008fe330, ...)
    /go/src/github.com/hyperledger/fabric/orderer/common/server/main.go:583 +0x315
github.com/hyperledger/fabric/orderer/common/server.Start(0x1465206, 0x5, 0xc000294000)
    /go/src/github.com/hyperledger/fabric/orderer/common/server/main.go:158 +0x7dd
github.com/hyperledger/fabric/orderer/common/server.Main()
    /go/src/github.com/hyperledger/fabric/orderer/common/server/main.go:91 +0x1ce
main.main()
    /go/src/github.com/hyperledger/fabric/orderer/main.go:15 +0x20
{code}
Attaching the screenshots of configtx.yaml and genesis file to show tick interval notation.

Attached the genesis file (genesis.block) used.

Even with TickInterval set to 500, latest configtxgen is unable to create genesis file. If used older version of configtxgen to generate genesis file with TickInterval set to 500, orderer is still crashing with same error ""unable to parse TickInterval""",,irmman,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,d29dc24bb,Unset,No,,,"1|i00e7j:",,,,Unset,Unset,,,,Create a genesis file with 500ms as the TickInterval in configtx.yaml and then launch orderer with genesis file.,,Unset,,,,,,Unset,,Unset,,(Please add usage information),irmman,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/May/19 8:39 PM;irmman;I had the same issue and I cleaned /var/hyperledger/production and it was fixed ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peers forbidden to join channel created using channelCreateTxBaseProfile,FAB-14453,38137,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,jyellick,bharadwajambati1,bharadwajambati1,02/Mar/19 6:22 AM,12/Mar/19 4:45 AM,28/Oct/23 3:05 AM,12/Mar/19 4:45 AM,,,,,,v1.4.1,v2.0.0,,,,,,,,0,raft,,,,"Peers cannot join a channel created using channelCreateTxBaseProfile:
 * Created a channel with 4 orderers in the order system channel and 3 orderers in the application channel
 * Created testorgschannel1.tx with the channelCreateTxBaseProfile
 * Created channel
 * Joined peers to testorgschannel1 and found the below logs in the peer1st-org1 
{code:java}
Mar 1 16:32:10 peer1st-org1-fbfc5f599-zzpgs peer1st-org1 2019-03-01 21:32:10.266 UTC [deliveryClient] afterConnect -> DEBU 3ef ExitingMar 1 16:32:10 peer1st-org1-fbfc5f599-zzpgs peer1st-org1 2019-03-01 21:32:10.268 UTC [blocksProvider] DeliverBlocks -> ERRO 3f0 [testorgschannel1] Got error &{FORBIDDEN}
{code}

 

In contrast, it worked when we didn't use channelCreateTxBaseProfile
 * Created testorgschannel2.tx without the channelCreateTxBaseProfile
 * Created and joined testorgschannel2 and then the peers are working as expected

 

 Timestamp at which the forbidden error has seen in the logs 2019-03-01 21:32:10.268 UTC

[https://app.us-south.logging.cloud.ibm.com/a52748c56a/logs/view?b=1054766473754943491&e=1054766683753205763&apps=peer1st-org1]

Url for orderer1st logs: [https://app.us-south.logging.cloud.ibm.com/a52748c56a/logs/view?q=testorgschannel1&apps=orderer1st-ordererorg]

 

 ",,bharadwajambati1,jyellick,,,,,,,,,,,,,,,,,,,FAB-13702,,,,,,,,,,,,,,,,,,,,"08/Mar/19 6:26 AM;bharadwajambati1;configtx.yml;https://jira.hyperledger.org/secure/attachment/16905/configtx.yml","08/Mar/19 6:22 AM;bharadwajambati1;genesis.block;https://jira.hyperledger.org/secure/attachment/16902/genesis.block","08/Mar/19 6:22 AM;bharadwajambati1;testorgschannel1.config.block;https://jira.hyperledger.org/secure/attachment/16903/testorgschannel1.config.block","08/Mar/19 6:22 AM;bharadwajambati1;testorgschannel1.tx;https://jira.hyperledger.org/secure/attachment/16904/testorgschannel1.tx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e87:",,,,Unset,Unset,,,,"Create testorgschannel1.tx with channelCreateTxBaseProfile parameter,

./raft-svt/bin/configtxgen -profile OrgChannel -channelCreateTxBaseProfile OrdererGenesis -channelID testorgschannel1 -outputCreateChannelTx ~/cello/src/agent/ansible/vars/testorgschannel1.tx

 create and join the testorgschannel1 and check the peer logs",,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Mar/19 12:48 PM;jyellick;The links provided are not useful, as they are not publicly viewable and I believe tied to your cloud instance.

Please provide:

# Your {{configtx.yaml}} file
# The {{testorgschannel1.tx}} file
# The genesis block which you used as a parameter to join channel
# The genesis block of the orderer system channel

Additionally, though not strictly necessary, it would be helpful to see the orderer logs at debug.;;;","08/Mar/19 6:23 AM;bharadwajambati1;[~jyellick] Please find the attachments;;;","11/Mar/19 11:31 AM;jyellick;I really expected looking at the artifacts that something would stand out, but everything looks correct.

The new channel has appropriate Readers/Writers policies at all levels of the configuration (channel, orderer, application, and org level).

We will need to capture the 'warning' level log message which accompanies the rejection of the deliver request from the orderer to progress further.  If the orderer is returning a FORBIDDEN for the channel, it should log the following message just beforehand:

{noformat}
                logger.Warningf(""[channel: %s] Client authorization revoked for deliver request from %s: %s"", chdr.ChannelId, addr, err)
{noformat}

;;;","12/Mar/19 4:43 AM;jyellick;Okay, finally tracked down the root cause.

In your configtx.yaml there is a section:
{noformat}
  OrdererGenesis:
    <<: *ChannelDefaults
    Capabilities:
      <<: *ChannelCapabilities
    Orderer:
      <<: *OrdererDefaults
    Consortiums:
      FabricConsortium:
        Organizations:
          - *org1
          - *org2
{noformat}

Which defines your orderer system channel.  Then your application channel looks like:

{noformat}
  OrgChannel:
    <<: *ChannelDefaults
{noformat}

What is occurring, is that your genesis block defines new capabilities, which, by default are inherited by channels.  However, when you pass the {{channelCreateTxBaseProfile}} flag, the config update computation recognizes that you have not enabled the capabilities in the desired new channel.  Therefore, in the update, it disables these capabilities.  Consequently, the MSP does not appropriately understand NodeOU based policies, and the peers will always fail to connect.;;;","12/Mar/19 4:45 AM;jyellick;The {{channelCreateeTxBaseProfile}} is a double edged sword.  It will produce exactly the configuration specified in your configtx.yaml, including things like regressed capabilities.  Because the configuration for the new channel did not include the v1.3 channel capabilities, the new channel did not understand NodeOUs and therefore will reject deliver requests.;;;",,,,,,,,,,,,,,,,,,,,,,,,
"Orderer panics after a series of restarts with: ""failed to restore persisted raft data: failed to read WAL: unexpected EOF""",FAB-14454,38138,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,suryalnvs,suryalnvs,02/Mar/19 7:19 AM,09/Aug/19 12:36 AM,28/Oct/23 3:05 AM,08/Mar/19 1:44 AM,v1.4.1,v2.0.0,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,raft,watchlist,,,"h2. Observed:

2 of the 3 orderers panics after a series of restarts with chaos-kube with the following panic:
{code:java}
panic: [channel: testorgschannel3] Error creating consenter: failed to restore persisted raft data: failed to read WAL: unexpected EOFpanic: [channel: testorgschannel3] Error creating consenter: failed to restore persisted raft data: failed to read WAL: unexpected EOF
goroutine 1 [running]:github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc0007ae0b0, 0x0, 0x0, 0x0) /go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:229 +0x515github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc0000e4070, 0x4, 0x148d1a4, 0x2a, 0xc01181d738, 0x2, 0x2, 0x0, 0x0, 0x0) /go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0xf6github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Panicf(0xc0000e4070, 0x148d1a4, 0x2a, 0xc01181d738, 0x2, 0x2) /go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:159 +0x79github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Panicf(0xc0000e4078, 0x148d1a4, 0x2a, 0xc01181d738, 0x2, 0x2) /go/src/github.com/hyperledger/fabric/common/flogging/zap.go:74 +0x60github.com/hyperledger/fabric/orderer/common/multichannel.newChainSupport(0xc0002842d0, 0xc000680d60, 0xc000a383c0, 0x158fe00, 0x1fb3af0, 0xc0002c97f0, 0x0) /go/src/github.com/hyperledger/fabric/orderer/common/multichannel/chainsupport.go:89 +0x668github.com/hyperledger/fabric/orderer/common/multichannel.(*Registrar).Initialize(0xc0002842d0, 0xc000a383c0) /go/src/github.com/hyperledger/fabric/orderer/common/multichannel/registrar.go:196 +0xbfdgithub.com/hyperledger/fabric/orderer/common/server.initializeMultichannelRegistrar(0xc0000a7400, 0xc0000e6fc0, 0xc0004ec590, 0x0, 0xc000284240, 0x1f555e0, 0xc0002c8cc0, 0x2, 0x2, 0xc0002c8cd0, ...) /go/src/github.com/hyperledger/fabric/orderer/common/server/main.go:583 +0x315github.com/hyperledger/fabric/orderer/common/server.Start(0x1465206, 0x5, 0xc00041ec00) /go/src/github.com/hyperledger/fabric/orderer/common/server/main.go:158 +0x7ddgithub.com/hyperledger/fabric/orderer/common/server.Main() /go/src/github.com/hyperledger/fabric/orderer/common/server/main.go:91 +0x1cemain.main() /go/src/github.com/hyperledger/fabric/orderer/main.go:15 +0x20{code}
Output of WAL directory for testorgschannel3:
{code:java}
/shared/etcdraft/wal # ls
orderersystemchannel  testorgschannel1      testorgschannel10     testorgschannel2      testorgschannel3      testorgschannel4      testorgschannel5      testorgschannel6      testorgschannel7      testorgschannel8      testorgschannel9
/shared/etcdraft/wal # cd testorgschannel3/
/shared/etcdraft/wal/testorgschannel3 # ls -lrth
total 696M
-rw-------    1 nobody   42949672   61.1M Mar  1 19:39 0000000000000000-0000000000000000.wal
-rw-------    1 nobody   42949672   61.0M Mar  1 19:43 0000000000000001-000000000000085b.wal
-rw-------    1 nobody   42949672   61.0M Mar  1 19:47 0000000000000002-00000000000010af.wal
-rw-------    1 nobody   42949672   61.0M Mar  1 19:51 0000000000000003-0000000000001903.wal
-rw-------    1 nobody   42949672   61.0M Mar  1 19:55 0000000000000004-0000000000002157.wal
-rw-------    1 nobody   42949672   61.0M Mar  1 20:00 0000000000000005-00000000000029aa.wal
-rw-------    1 nobody   42949672   61.0M Mar  1 20:04 0000000000000006-00000000000031ff.wal
-rw-------    1 nobody   42949672   61.1M Mar  1 20:08 0000000000000007-0000000000003a52.wal
-rw-------    1 nobody   42949672   61.1M Mar  1 20:14 0000000000000008-00000000000042a7.wal
-rw-------    1 nobody   42949672   61.0M Mar  1 20:19 0000000000000009-0000000000004afc.wal
-rw-------    1 nobody   42949672   61.0M Mar  1 20:26 1.tmp
-rw-------    1 nobody   42949672   61.1M Mar  1 20:26 000000000000000a-0000000000005351.wal
-rw-------    1 nobody   42949672   61.0M Mar  1 20:29 000000000000000b-0000000000005ba6.wal
-rw-------    1 nobody   42949672   61.0M Mar  1 21:20 0.tmp
{code}
Logs URL: [https://app.us-south.logging.cloud.ibm.com/87cd83a6af/logs/view?apps=orderer1st-ordererorg]

Instance: LogDNA-community-regression-lab

Timestamp at which first Panic was seen: Mar 1 15:30:23 EST",,bmos299,guoger,suryalnvs,yacovm,,,,,,,,,,,,,,,,,FAB-14220,FAB-16258,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,d29dc24,Unset,No,,,"1|i00e8f:",,,,Unset,Unset,,,,Follow the steps described in FAB-14220 (longrun),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bmos299,guoger,suryalnvs,yacovm,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Mar/19 7:23 AM;yacovm;[~guoger] [~kchristidis];;;","02/Mar/19 7:23 AM;yacovm;My suspicion is that it has something to do with the 2 tmp files (1 of them is not cleaned, or both).;;;","02/Mar/19 10:17 PM;guoger;I think the temp file handling [~yacovm] described in chat channel is correct. However, {{ExpectedEOF}} was thrown if an entry written to wal file is corrupted and cannot be decoded, due to interrupt of write (orderer pod was shutdown *not* gracefully i believe).

we should call {{wal.Repair}} to truncate this entry in this case. I'll take on this. Should be hard, {{etcd/wal}} pkg comes with this util.;;;","02/Mar/19 10:53 PM;bmos299;[~guoger] [~yacovm]Is there any hope to recover the orderer once in this state?;;;","02/Mar/19 11:50 PM;yacovm;With manual intervention - yes, you can always wipe out the WAL and what has been committed is inside the ledger, and what hasn't  - well, that's too bad and the clients need to re-send it. But we need not rely on manual intervention, hence Jay will add a repairing of the WAL and I hope this fixes it. 

Please save the files, so it can be tested whether an OSN recovers from this state or not.;;;","06/Mar/19 12:08 AM;bmos299;[~yacovm] Thanks.  That makes total sense. 
;;;","06/Mar/19 3:14 PM;guoger;https://gerrit.hyperledger.org/r/c/29815/;;;",,,,,,,,,,,,,,,,,,,,,,
Remove unused argument,FAB-14455,38142,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,02/Mar/19 5:46 PM,02/Mar/19 11:01 PM,28/Oct/23 3:05 AM,02/Mar/19 11:01 PM,,,,,,,,,,,,,,,0,,,,,createChain does not require a chaincode provider,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00e93:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove unused function,FAB-14456,38143,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,02/Mar/19 6:11 PM,02/Mar/19 11:02 PM,28/Oct/23 3:05 AM,02/Mar/19 11:02 PM,,,,,,,,,,,,,,,0,,,,,The chaincode provider no longer requires an Execute function,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00e9b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove unused function,FAB-14457,38144,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,ales,ales,ales,02/Mar/19 6:11 PM,04/Apr/19 10:52 PM,28/Oct/23 3:05 AM,04/Apr/19 10:52 PM,,,,,,,,,,,,,,,0,,,,,The chaincode provider no longer requires an Execute function,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00e9j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove version from Launch function,FAB-14458,38145,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,02/Mar/19 7:19 PM,05/Mar/19 8:04 PM,28/Oct/23 3:05 AM,05/Mar/19 7:45 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00e9r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve error for key level endorsement disabled,FAB-14459,38146,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,03/Mar/19 1:03 AM,03/Mar/19 7:35 AM,28/Oct/23 3:05 AM,03/Mar/19 7:35 AM,,,,,,v1.4.1,v2.0.0,,,fabric-peer,,,,,0,,,,,"Prior error:

key level endorsement is not enabled

New error:

key level endorsement is not enabled, channel application capability of V1_3 or later is required",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00e9z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Mar/19 1:29 AM;denyeart;[https://gerrit.hyperledger.org/r/#/c/29763/]

https://gerrit.hyperledger.org/r/#/c/29764/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Not looking for the correct collection,FAB-14461,38148,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Environment Issue,,latitiah,latitiah,03/Mar/19 5:59 AM,12/Mar/19 6:29 AM,28/Oct/23 3:05 AM,12/Mar/19 6:29 AM,,,,,,,,,,,,,,,0,,,,,"When executing the approve and commit commands using the collections-config option, the collection name is not the collection name that is used in the collection config.

The command:
{code}peer lifecycle chaincode commit --name marbles --channelID behavesystest --version 2.0.1 --hash ac838465a5b6aa27e4dfe4b2fb4318080bb4e1c3c93153e52edef9e72c23502f --sequence 1 --waitForEvent --peerAddresses peer0.org1.example.com:7051 --peerAddresses peer0.org2.example.com:7051 --orderer orderer0.example.com:7050 --policy \""OR ('org1.example.com.member','org2.example.com.member')\"" --collections-config /var/hyperledger/configs/0a05b1343c7511e98eea0214683e8447/marblesCollection.json {code}

With the collection file as:
{code}[
  {""name"": ""marblesCollection"",
   ""policy"": ""OR('org1.example.com.member','org2.example.com.member')"",
   ""requiredPeerCount"": 0,
   ""maxPeerCount"": 0,
   ""blockToLive"": 10000000
  }
]{code}

The following error is received when attempting to invoke on the chaincode:
{code}Error: endorsement failure during invoke. response: status:500 message:""Failed to get marble: GET_STATE failed: transaction ID: 843ceda8abcc2e8810c6028516de0e0dfa08a4c49032cb4bb0a147ba1b4b2ebe: collection behavesystest/marbles/collection1 could not be found""{code}

When setting the collection name to ""collection1"" in the collection config file, the invoke works as expected.",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00eaf:",,,,Unset,Unset,,,,"This test was executed using the behave framework - (behave -n ""FAB-13977"")
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Mar/19 12:54 AM;latitiah;This same issue was seen when using the old chaincode lifecycle.;;;","12/Mar/19 6:29 AM;latitiah;The chaincode was expecting collection1 as the name and did not allow for a dynamic collection name for the run.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
EvictionSuspector should be stopped if chain is halted,FAB-14462,38151,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,guoger,guoger,03/Mar/19 11:03 PM,05/Mar/19 11:59 PM,28/Oct/23 3:05 AM,05/Mar/19 12:32 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,"It currently runs forever, which prevents chain from being gc'ed.",,guoger,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00eb3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,kchristidis,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Mar/19 12:31 AM;kchristidis;https://gerrit.hyperledger.org/r/c/29779/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Flaky CouchDB integration test - health checks on Couch DB returns approprate response codes ,FAB-14463,38152,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,C0rWin,C0rWin,04/Mar/19 12:00 AM,19/Mar/19 7:57 PM,28/Oct/23 3:05 AM,07/Mar/19 1:36 AM,v1.4.0,,,,,v1.4.1,v2.0.0,,,fabric-common,,,,,0,ci-flake,,,,"There is a CouchDB health check integration test fails intermittently in CI: 


{quote}
13:38:35 • Failure [61.027 seconds]
13:38:35 EndToEnd Crash Fault Tolerance when an orderer is behind the latest snapshot on leader [It] catches up using the block stored in snapshot 
13:38:35 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:150
13:38:35 
13:38:35   Timed out after 60.018s.
13:38:35   Expected
13:38:35       <int>: 1
13:38:35   to equal
13:38:35       <int>: 0
13:38:35 
13:38:35   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/nwo/network.go:732
13:38:35 ------------------------------
13:38:46 •
13:38:46 
13:38:46 Summarizing 2 Failures:
13:38:46 
13:38:46 [Fail] Health CouchDB health checks when running health checks on Couch DB [It] returns approprate response codes 
13:38:46 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/health_test.go:136
13:38:46 
13:38:46 [Fail] EndToEnd Crash Fault Tolerance when an orderer is behind the latest snapshot on leader [It] catches up using the block stored in snapshot 
13:38:46 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/nwo/network.go:732
13:38:46 
13:38:46 Ran 15 of 15 Specs in 746.447 seconds
13:38:46 FAIL! -- 13 Passed | 2 Failed | 0 Pending | 0 Skipped
13:38:46 --- FAIL: TestEndToEnd (746.45s)
13:38:46 FAIL
{quote}

here: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/6543/console

//cc [~sykesm]",,C0rWin,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ebb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Mar/19 12:01 AM;C0rWin;Another hit:

{quote}
3:30:55 [e][Org1.peer0] 2019-03-03 13:30:54.963 UTC [gossip.comm] Stop -> INFO 026 Stopping
13:30:55 [e][Org1.peer0] 2019-03-03 13:30:54.963 UTC [gossip.comm] Stop -> INFO 027 Stopped
13:30:55 
13:30:55 ------------------------------
13:30:55 • Failure [82.408 seconds]
13:30:55 Health CouchDB health checks when running health checks on Couch DB [It] returns approprate response codes 
13:30:55 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/health_test.go:120
13:30:55 
13:30:55   Timed out after 60.016s.
13:30:55   Expected
13:30:55       <int>: 408
13:30:55   to equal
13:30:55       <int>: 503
13:30:55 
13:30:55   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/health_test.go:136
{quote}

link: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/6540/console;;;","04/Mar/19 12:07 AM;C0rWin;and another one: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/6564/console;;;","05/Mar/19 6:19 AM;sykesm;https://gerrit.hyperledger.org/r/c/29790/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Zookeeper integration flaky test - starts and stops multiple zookeepers ,FAB-14464,38155,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,C0rWin,C0rWin,04/Mar/19 8:08 AM,18/Jun/19 11:02 PM,28/Oct/23 3:05 AM,18/Jun/19 11:01 PM,v1.4.0,,,,,v1.4.1,,,,fabric-orderer,,,,,0,ci-flake,,,,"{quote}
21:00:08 [1551645341] Runner Suite - 23/23 specs ••••••••••••••••••••••
21:00:08 ------------------------------
21:00:08 •! Panic [1.802 seconds]
21:00:08 ZooKeeper Runner [It] starts and stops multiple zookeepers 
21:00:08 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/runner/zookeeper_test.go:92
21:00:08 
21:00:08   Test Panicked
21:00:08   runtime error: invalid memory address or nil pointer dereference
21:00:08   /opt/go/go1.11.5.linux.amd64/src/runtime/panic.go:513
21:00:08 
21:00:08   Full Stack Trace
21:00:08   	/opt/go/go1.11.5.linux.amd64/src/runtime/panic.go:513 +0x1b9
21:00:08   github.com/hyperledger/fabric/integration/runner_test.glob..func3.4()
21:00:08   	/w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/runner/zookeeper_test.go:125 +0x541
21:00:08   github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*runner).runSync(0xc00048e7e0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
21:00:08   	/w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/runner/runner_suite_test.go:19 +0xa2
21:00:08   testing.tRunner(0xc000118100, 0xcdb230)
21:00:08   	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0xbf
21:00:08   created by testing.(*T).Run
21:00:08   	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:878 +0x35c
21:00:08   
21:00:08 ------------------------------
21:00:08 
21:00:08 
21:00:08 Summarizing 1 Failure:
21:00:08 
21:00:08 [Panic!] ZooKeeper Runner [It] starts and stops multiple zookeepers 
21:00:08 /opt/go/go1.11.5.linux.amd64/src/runtime/panic.go:513
21:00:08 
21:00:08 Ran 23 of 23 Specs in 26.076 seconds
21:00:08 FAIL! -- 22 Passed | 1 Failed | 0 Pending | 0 Skipped
21:00:08 --- FAIL: TestRunner (26.08s)
21:00:08 FAIL
21:01:40 [1551645341] State-Based Endorsement EndToEnd Suite - 1/1 specs 
{quote}

found here: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/6605/console

",,C0rWin,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Mar/19 8:07 AM;C0rWin;console.log.gz;https://jira.hyperledger.org/secure/attachment/16888/console.log.gz",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ebz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Mar/19 11:00 PM;sykesm;zookeeper has nothing to do with the peer;;;","28/May/19 11:36 AM;guoger;Not sure if this is still emerging? probably we could close for now and re-open if it's hit again.;;;","18/Jun/19 11:01 PM;sykesm;Logs are attached... Will look quickly.;;;","18/Jun/19 11:02 PM;sykesm;The test in question has been removed from master entirely. If it comes up again, we can remove it from 1.4.;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Make etcdraft UT network mocks more realistic,FAB-14466,38157,38080,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,04/Mar/19 12:58 PM,08/Mar/19 7:44 PM,28/Oct/23 3:05 AM,08/Mar/19 1:43 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,{{Configurator.Configure}} should be called on a node to allow communication from/to that node. UT network mock should also mimic this behavior in order to capture potential bugs,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ecf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Mar/19 6:07 PM;guoger;https://gerrit.hyperledger.org/r/c/29774;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Trigger catchup by sending an artificial snapshot to chain,FAB-14467,38159,38080,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,04/Mar/19 3:38 PM,08/Mar/19 7:44 PM,28/Oct/23 3:05 AM,08/Mar/19 1:43 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,"During eviction suspicion, if it confirms it's *not* evicted, however ledger height is *below* the latest config block, it should send an artificial snapshot to trigger a catchup, so that chain pulls and commits the latest config block, which may contain certificates of newly added nodes.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ecv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Mar/19 6:06 PM;guoger;https://gerrit.hyperledger.org/r/c/29775;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add integration test to assert that node properly configures its communication layer while pulling block,FAB-14468,38160,38080,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,04/Mar/19 3:41 PM,08/Mar/19 7:44 PM,28/Oct/23 3:05 AM,08/Mar/19 1:43 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,"whiling catching up with snapshot, if a config block is pulled, and it contains type b config (add/remove nodes), {{configureComm()}} should be called so that lagged node can start communicating with newly added nodes.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ed3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Mar/19 6:06 PM;guoger;https://gerrit.hyperledger.org/r/c/29812/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer stoped when Peer + Block Explorer run long time ,FAB-14469,38162,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,,bampool,bampool,04/Mar/19 3:54 PM,06/Mar/19 9:41 PM,28/Oct/23 3:05 AM,06/Mar/19 9:41 PM,,,,,,,,,,,,,,,0,,,,,"Peer run 7 day is OK. But Peer stoped when peer + Block Explorer run after 9 hours.
Fabric : 1.4.0
Block Explorer: 4.0

 ",,bampool,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14470,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00edj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bampool,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Mar/19 4:21 PM;bampool;To Bug FAB-14470;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer stoped when Peer + Block Explorer run long time,FAB-14470,38164,,Bug,Returned,FAB,Fabric,software,denyeart,,,Highest,,,bampool,bampool,04/Mar/19 4:13 PM,19/Jul/19 10:29 PM,28/Oct/23 3:05 AM,,v1.4.0,,,,,,,,,,,,,,0,,,,,"Peer run 7 day is OK. But Peer stoped when Peer + Block Explorer run after 9 hours.
Fabric : 1.4.0
Block Explorer: 4.0

 ",,bampool,davidkhala,denyeart,mfaisaltariq,,,,,,,,,,,,,,,,,,,,,FAB-14469,,,,,,,,,,,,,,,,"07/Mar/19 3:37 PM;bampool;image-2019-03-07-14-37-38-077.png;https://jira.hyperledger.org/secure/attachment/16895/image-2019-03-07-14-37-38-077.png","07/Mar/19 3:40 PM;bampool;image-2019-03-07-14-39-58-167.png;https://jira.hyperledger.org/secure/attachment/16896/image-2019-03-07-14-39-58-167.png","07/Mar/19 3:41 PM;bampool;image-2019-03-07-14-41-41-065.png;https://jira.hyperledger.org/secure/attachment/16897/image-2019-03-07-14-41-41-065.png","07/Mar/19 3:43 PM;bampool;image-2019-03-07-14-43-10-514.png;https://jira.hyperledger.org/secure/attachment/16898/image-2019-03-07-14-43-10-514.png","07/Mar/19 3:46 PM;bampool;image-2019-03-07-14-46-01-500.png;https://jira.hyperledger.org/secure/attachment/16899/image-2019-03-07-14-46-01-500.png","07/Mar/19 3:49 PM;bampool;image-2019-03-07-14-49-14-367.png;https://jira.hyperledger.org/secure/attachment/16900/image-2019-03-07-14-49-14-367.png","07/Mar/19 3:00 PM;bampool;peer-down-log.png;https://jira.hyperledger.org/secure/attachment/16894/peer-down-log.png","04/Mar/19 4:12 PM;bampool;peer0.org1.example.com.log.png;https://jira.hyperledger.org/secure/attachment/16890/peer0.org1.example.com.log.png","04/Mar/19 4:12 PM;bampool;peer0.org2.example.com.log.png;https://jira.hyperledger.org/secure/attachment/16889/peer0.org2.example.com.log.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00efj:",,,,Unset,Unset,,,,"1、Deploy Fabric1.4 and first-network
2、Create a cli scripts loop doing : invoke mycc
3、run block explorer，read from peer0.org1.example.com

after 9 hour peer stop，and has not error logging

We less the docker logs can not find peer down error info.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),bampool,davidkhala,denyeart,mfaisaltariq,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Mar/19 9:40 PM;denyeart;If a peer goes down in a panic it will write the panic message to stderr. Please provide the peer panic message.;;;","07/Mar/19 3:49 PM;bampool;[~denyeart] Thanks for your help.

I less the peer docker log but can not find any peer panic message . How can find the peer panic message?

I suspect about the memory and invoke frequency for mycc .  They image is memory status when invoke sleep 3 sec. 
command:    ps auxw|head -1;ps auxw|sort -rn -k6 | head -20

start:
!image-2019-03-07-14-37-38-077.png!

15min:

!image-2019-03-07-14-39-58-167.png!

20min:
!image-2019-03-07-14-41-41-065.png!

15hour：
!image-2019-03-07-14-43-10-514.png!

15hour 20min:

!image-2019-03-07-14-46-01-500.png!

15hour 40min : invoke mycc not sleep, and peer stop service after 20 min

!image-2019-03-07-14-49-14-367.png!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
e2e token transfer double spending within same block,FAB-14471,38169,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,bur,bur,bur,04/Mar/19 7:24 PM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,fabric-token,,,,,0,stale-item,,,,"Currently, token e2e tests only the case when double spending transactions are in different blocks.

 

Idea: Create a network where MaxMessageCount = 2 and BatchTime is large (30 seconds?). Then submit double spending transaction within the same block.",,bur,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14001,,,No,,Unset,No,,,"1|i00efz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bur,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Mar/19 12:12 AM;bur;https://gerrit.hyperledger.org/r/#/c/29884/;;;","23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermitent failure of reconfiguration and onboarding when an orderer node is joined test,FAB-14472,38171,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,C0rWin,C0rWin,04/Mar/19 8:16 PM,16/Apr/19 12:14 PM,28/Oct/23 3:05 AM,16/Apr/19 12:14 PM,,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"Stacktrace of the failure is: 

{quote}
08:59:12 [e][OrdererOrg.orderer2] 2019-03-04 08:59:12.257 UTC [orderer.common.server] handleSignals -> INFO 050 Received signal: 15 (terminated)
08:59:12 [e][OrdererOrg.orderer3] 2019-03-04 08:59:12.267 UTC [orderer.common.server] handleSignals -> INFO 050 Received signal: 15 (terminated)
08:59:12 • Failure [23.136 seconds]
08:59:12 EndToEnd reconfiguration and onboarding when an orderer node is joined [It] isn't influenced by outdated orderers 
08:59:12 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/etcdraft_reconfig_test.go:573
08:59:12 
08:59:12   Timed out after 1.000s.
08:59:12   Expected
08:59:12       <<-chan struct {} | len:0, cap:0>: 0xc000c2d4a0
08:59:12   to be closed
08:59:12 
08:59:12   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/etcdraft_reconfig_test.go:650
08:59:12 ------------------------------
09:00:17 • [SLOW TEST:65.094 seconds]
09:00:17 EndToEnd Crash Fault Tolerance when orderer stops and restarts keeps network up and running 
09:00:17 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:97
09:00:17 ------------------------------
09:01:35 • [SLOW TEST:78.051 seconds]
09:01:35 EndToEnd Crash Fault Tolerance when an orderer is behind the latest snapshot on leader catches up using the block stored in snapshot 
09:01:35 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:150
09:01:35 ------------------------------
09:02:08 ••
09:02:08 
09:02:08 Summarizing 1 Failure:
09:02:08 
09:02:08 [Fail] EndToEnd reconfiguration and onboarding when an orderer node is joined [It] isn't influenced by outdated orderers 
{quote}

found here: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/6631/console
another one:  https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7708/console",,C0rWin,guoger,,,,,,,,,,,,,,,,,,,,,,,FAB-14842,FAB-14344,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00egf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Apr/19 12:14 PM;guoger;Pls reopen if hit again. Raft integration test should be reasonably lenient after several changes;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add additional metrics for etcdraft,FAB-14473,38176,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,adarshsaraf123,guoger,guoger,04/Mar/19 9:31 PM,09/Mar/19 3:39 AM,28/Oct/23 3:05 AM,09/Mar/19 3:37 AM,,,,,,v1.4.1,v2.0.0,,,,,,,,0,,,,,"There has been a need for three additional metrics (per channel):
1. data_persist_duration: We (and operators) need to get a grip of time spent on persisting raft data to disk, to make better decision on raft time configurations. (raft is fairly sensitive to disk IO)
2. normal_proposals_received: The total number of proposals received for normal type transactions.
3. config_proposals_received: The total number of proposals received for config type transactions.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00egn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Set default plugins/arguments in case they are not specified,FAB-14474,38177,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,04/Mar/19 10:46 PM,04/Apr/19 10:52 PM,28/Oct/23 3:05 AM,04/Apr/19 10:52 PM,,,,,,,,,,,,,,,0,,,,,,,ales,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14108,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00egv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,wlahti,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Mar/19 1:59 AM;wlahti;https://gerrit.hyperledger.org/r/c/29784/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address data race in gossip/channel.GenerateMAC(),FAB-14475,38179,31531,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,04/Mar/19 11:51 PM,06/Mar/19 12:35 AM,28/Oct/23 3:05 AM,06/Mar/19 12:35 AM,,,,,,,,,,fabric-gossip,,,,,0,hygiene,,,,"==================
WARNING: DATA RACE
Write at 0x00c0006c92ef by goroutine 29:
 runtime.slicecopy()
 /usr/local/go/src/runtime/slice.go:221 +0x0
 github.com/hyperledger/fabric/gossip/gossip/channel.GenerateMAC()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:993 +0xd3
 github.com/hyperledger/fabric/gossip/gossip.(*channelState).getGossipChannelByMAC()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/chanstate.go:81 +0x20b
 github.com/hyperledger/fabric/gossip/gossip.(*channelState).lookupChannelForGossipMsg()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/chanstate.go:70 +0x168
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).gossipBatch()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:488 +0x752
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).sendGossipBatch()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:425 +0x1a8
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).sendGossipBatch-fm()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:118 +0x5f
 github.com/hyperledger/fabric/gossip/gossip.(*batchingEmitterImpl).emit()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/batcher.go:81 +0x2ab
 github.com/hyperledger/fabric/gossip/gossip.(*batchingEmitterImpl).periodicEmit()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/batcher.go:64 +0xc0

Previous read at 0x00c0006c92e8 by goroutine 217:
 runtime.slicecopy()
 /usr/local/go/src/runtime/slice.go:221 +0x0
 crypto/sha256.(*digest).Write()
 /usr/local/go/src/crypto/sha256/sha256.go:221 +0x1dc
 github.com/hyperledger/fabric/bccsp/sw.(*hasher).Hash()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/bccsp/sw/hash.go:31 +0x8c
 github.com/hyperledger/fabric/bccsp/sw.(*CSP).Hash()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/bccsp/sw/impl.go:188 +0x255
 github.com/hyperledger/fabric/common/util.ComputeSHA256()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/common/util/utils.go:46 +0xbe
 github.com/hyperledger/fabric/gossip/gossip/channel.GenerateMAC()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:994 +0xf5
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).createStateInfoRequest()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:832 +0xdd
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).requestStateInfo()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:376 +0x53
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).requestStateInfo-fm()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:278 +0x41
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).periodicalInvocation()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:314 +0x4e

Goroutine 29 (running) created at:
 github.com/hyperledger/fabric/gossip/gossip.newBatchingEmitter()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/batcher.go:54 +0x2ad
 github.com/hyperledger/fabric/gossip/gossip.NewGossipService()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:116 +0xea8
 github.com/hyperledger/fabric/gossip/gossip.newGossipInstanceWithGrpcMcsMetrics()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:269 +0x8ec
 github.com/hyperledger/fabric/gossip/gossip.TestMembershipMetrics()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:1802 +0x46a
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162

Goroutine 217 (running) created at:
 github.com/hyperledger/fabric/gossip/gossip/channel.NewGossipChannel()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:278 +0xea8
 github.com/hyperledger/fabric/gossip/gossip.(*channelState).joinChannel()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/chanstate.go:108 +0x53a
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).JoinChan()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:185 +0x121
 github.com/hyperledger/fabric/gossip/gossip.(*gossipGRPC).JoinChan()
 <autogenerated>:1 +0x8f
 github.com/hyperledger/fabric/gossip/gossip.TestMembershipMetrics()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:1803 +0x51b
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162
==================",,hagarm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00eh3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.3,release-1.4,release-2.5,release-2.4,release-1.1,main,release-1.2,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Mar/19 11:57 PM;hagarm;https://gerrit.hyperledger.org/r/#/c/29781/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
panic: runtime error: index out of range,FAB-14476,38180,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Test Error,,sambhavdutt,sambhavdutt,05/Mar/19 12:32 AM,19/Mar/19 7:57 PM,28/Oct/23 3:05 AM,08/Mar/19 3:44 AM,v2.0.0,,,,,,,,,fabric-build,,,,,0,ci-flake,,,,"The daily unit-tests failed with panic error(testing.go),  index is out of range

*Intermittent:* No
*Branch:* master
*Platform:* s390x
*Error Snippet:*

{code:java}
20:15:10 [34m2019-03-02 20:15:10.718 EST [test] Configure -> INFO 363[0m Exiting
20:15:10 panic: runtime error: index out of range [recovered]
20:15:10 	panic: runtime error: index out of range
20:15:10 
20:15:10 goroutine 2474 [running]:
20:15:10 testing.tRunner.func1(0xc0002d1200)
20:15:10 	/opt/go/go1.11.5.linux.s390x/src/testing/testing.go:792 +0x3be
20:15:10 panic(0x80c79480, 0x814b1050)
20:15:10 	/opt/go/go1.11.5.linux.s390x/src/runtime/panic.go:513 +0x1d4
20:15:10 github.com/hyperledger/fabric/common/metrics/metricsfakes.(*Counter).WithArgsForCall(0xc00009c1f0, 0x0, 0x0, 0x0, 0x0)
20:15:10 	/w/workspace/fabric-unit-test-coverage-daily-master-s390x/gopath/src/github.com/hyperledger/fabric/common/metrics/metricsfakes/counter.go:57 +0xee
20:15:10 github.com/hyperledger/fabric/orderer/common/cluster_test.TestMetrics.func6(0xc000152480, 0xc0001539e0, 0xc00009bc00)
20:15:10 	/w/workspace/fabric-unit-test-coverage-daily-master-s390x/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:1229 +0x3d2
20:15:10 github.com/hyperledger/fabric/orderer/common/cluster_test.TestMetrics.func7(0xc0002d1200)
20:15:10 	/w/workspace/fabric-unit-test-coverage-daily-master-s390x/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:1256 +0x2f2
20:15:10 testing.tRunner(0xc0002d1200, 0xc00032dca0)
20:15:10 	/opt/go/go1.11.5.linux.s390x/src/testing/testing.go:827 +0xcc
20:15:10 created by testing.(*T).Run
20:15:10 	/opt/go/go1.11.5.linux.s390x/src/testing/testing.go:878 +0x37a
20:15:10 FAIL	github.com/hyperledger/fabric/orderer/common/cluster	1.830s
{code}

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-s390x/40/",,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,eddc7761cd9fed352bea391c0467ee8624bc781f,Unset,No,,,"1|i00ehb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Mar/19 1:37 AM;sambhavdutt;Another panic error observed in the unit-tests, 

{code:java}
06:12:04 panic: runtime error: invalid memory address or nil pointer dereference
06:12:04 [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x12d70a4]
06:12:04 
06:12:04 goroutine 541 [running]:
06:12:04 github.com/hyperledger/fabric/orderer/common/cluster_test.(*deliverServer).addExpectPullAssert.func1(0xc000350e40, 0xc00003aa70, 0x9)
06:12:04 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/deliver_test.go:257 +0x174
06:12:04 github.com/hyperledger/fabric/orderer/common/cluster_test.(*deliverServer).Deliver(0xc0004cc280, 0x16886c0, 0xc00035c530, 0x1674a40, 0xc0004cc280)
06:12:04 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/deliver_test.go:167 +0x19a
06:12:04 github.com/hyperledger/fabric/protos/orderer._AtomicBroadcast_Deliver_Handler(0x1500160, 0xc0004cc280, 0x16867a0, 0xc0000abd90, 0x2a04cf8, 0xc0002b4e70)
06:12:04 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/protos/orderer/ab.pb.go:714 +0xce
06:12:04 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC(0xc000315b00, 0x1689e60, 0xc0004cbe00, 0xc0004d2400, 0xc00033acc0, 0x1f73080, 0x0, 0x0, 0x0)
06:12:04 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1124 +0x11e1
06:12:04 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc000315b00, 0x1689e60, 0xc0004cbe00, 0xc0004d2400, 0x0)
06:12:04 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1212 +0x1322
06:12:04 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc00003aa40, 0xc000315b00, 0x1689e60, 0xc0004cbe00, 0xc0004d2400)
06:12:04 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:686 +0xad
06:12:04 created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
06:12:04 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:684 +0xb9
06:12:04 FAIL	github.com/hyperledger/fabric/orderer/common/cluster	2.253s
{code}

https://jenkins.hyperledger.org/view/fabric/job/fabric-verify-unit-tests-x86_64/10098/consoleFull;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create identity package,FAB-14477,38185,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,05/Mar/19 2:20 AM,05/Mar/19 11:44 PM,28/Oct/23 3:05 AM,05/Mar/19 11:44 PM,,,,,,v2.0.0,,,,,,,,,0,hygiene,,,,"Need a common set of interfaces for consuming identity within Fabric.
This should be separate from any concrete implementations of identity",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14478,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ei7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Mar/19 2:57 AM;mastersingh24;https://gerrit.hyperledger.org/r/29787;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Introduce /pkg in the Fabric project structure,FAB-14478,38186,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,05/Mar/19 2:21 AM,05/Mar/19 11:44 PM,28/Oct/23 3:05 AM,05/Mar/19 11:44 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,https://github.com/golang-standards/project-layout/blob/master/pkg/README.md,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14477,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00eif:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Mar/19 2:57 AM;mastersingh24;https://gerrit.hyperledger.org/r/29787;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Start using identity package,FAB-14479,38187,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,05/Mar/19 2:56 AM,13/Mar/19 5:49 PM,28/Oct/23 3:05 AM,13/Mar/19 5:49 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,Refactor code to leverage the identity package in order to reduce duplication.,,mastersingh24,,,,,,,,,,,,,,,,,,,,FAB-14481,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ein:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Mar/19 7:56 PM;mastersingh24;https://gerrit.hyperledger.org/r/29798;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"When enabling checkpoint, ensure latest channel config in state database is deterministic across peers",FAB-14480,38189,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,denyeart,denyeart,05/Mar/19 4:51 AM,03/Jun/20 4:45 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,0,stale-item,,,,"When checkpoint is enabled with a capability flag, latest channel config will need to be re-written to state database in a deterministic way across peers. The existing channel config at key resourcesconfigtx.CHANNEL_CONFIG_KEY may not have it's content saved in a deterministic order, due to maps not getting saved in a deterministic order during protobuf  marshaling. One approach is to take the Config directly from the ConfigEnvelope as produced by orderer, without unmarshaling and re-marshaling in each peer. Sample code for this approach can be found at https://gerrit.hyperledger.org/r/#/c/29766/.",,denyeart,manish-sethi,MariWade,sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ej3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,manish-sethi,MariWade,sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;","03/Jun/20 4:45 AM;manish-sethi;This was done long ago in some other context - **https://jira.hyperledger.org/browse/FAB-14446;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Replace common/crypto identity functions with pkg/identity interfaces,FAB-14481,38192,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,05/Mar/19 5:24 AM,16/Mar/19 12:51 AM,28/Oct/23 3:05 AM,16/Mar/19 12:51 AM,,,,,,v2.0.0,,,,,,,,,0,hygiene,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,FAB-14479,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ejj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Images failed to publish for 1.3 as BYFN test failed in Node Chaincode tests,FAB-14482,38193,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,05/Mar/19 12:07 PM,15/Jul/19 8:29 PM,28/Oct/23 3:05 AM,08/Mar/19 3:45 AM,,,,,,,,,,fabric-samples,,,,,0,ci-failure,,,,"The 1.3 images failed to publish from the nightly job as BYFN node chaincode test failed 

*Intermittent:* No
*Branch:* release-1.3
*Platform:* s390x
*Error Snippet:*

{code:java}
20:27:18 npm WARN deprecated boom@4.3.1: This version is no longer maintained. Please upgrade to the latest version.
20:27:18 npm ERR! code EINTEGRITY
20:27:18 npm ERR! sha512-xmhA11h2XhqpSVzDAmoQAYdNQ+swILXpKOiRpAEQ2kX55ioxVADc6v7SkS4zQBxm4klhQHgGqpGKvoL6LGx4VQ== integrity checksum failed when using sha512: wanted sha512-xmhA11h2XhqpSVzDAmoQAYdNQ+swILXpKOiRpAEQ2kX55ioxVADc6v7SkS4zQBxm4klhQHgGqpGKvoL6LGx4VQ== but got sha512-AyD3juml6l1KTjxqAunjZduXj+oDWUFLDOUXnxiJmnYdk3qWcUda99UOevwEWBnWgtoNZYiA+czk+v/Hw5pTWg==. (458126 bytes)
20:27:18 
20:27:18 npm ERR! A complete log of this run can be found in:
20:27:18 npm ERR!     /root/.npm/_logs/2019-03-05T01_27_18_123Z-debug.log
20:27:18 ""
20:27:18 !!!!!!!!!!!!!!! Chaincode instantiation on peer0.org2 on channel 'mychannel' failed !!!!!!!!!!!!!!!!
20:27:18 ========= ERROR !!! FAILED to execute End-2-End Scenario ===========
20:27:18 
20:27:18 ERROR !!!! Test failed
{code}

*Build Log*

https://jenkins.hyperledger.org/view/Daily/job/fabric-nightly-release-job-release-1.3-x86_64/49/consoleFull",,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,66a2b49709f5e9f72572166b8df951e6185f7098,Unset,No,,,"1|i00ejr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The daily unit-tests failed as Couchdb container exit during the test,FAB-14483,38195,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Not Supported,denyeart,sambhavdutt,sambhavdutt,05/Mar/19 1:07 PM,26/Jul/19 3:11 AM,28/Oct/23 3:05 AM,26/Jul/19 3:11 AM,v1.2.0,,,,,,,,,fabric-build,,,,,0,ci-failure,,,,"The Couchdb container exit abruptly before the unit-tests was completed,


*Intermittent:* Yes
*Branch:* release-1.2, release-1.3
*Platform:* s390x
*Error Snippet:*

{code:java}
20:44:12 [33munit-tests_1  |[0m ?   	github.com/hyperledger/fabric/core/aclmgmt/mocks	[no test files]
20:44:12 [33munit-tests_1  |[0m ?   	github.com/hyperledger/fabric/core/aclmgmt/resources	[no test files]
20:44:14 [33munit-tests_1  |[0m ok  	github.com/hyperledger/fabric/core/admin	0.084s	coverage: 98.5% of statements
20:44:16 [33munit-tests_1  |[0m ok  	github.com/hyperledger/fabric/core/cclifecycle	0.115s	coverage: 99.3% of statements
20:44:16 [33munit-tests_1  |[0m ?   	github.com/hyperledger/fabric/core/cclifecycle/mocks	[no test files]
21:06:47 [33munit-test_unit-tests_1 exited with code 1
21:06:47 [0mStopping couchdb
{code}

*Build Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-release-1.3-s390x/8/",,rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,66a2b49709f5e9f72572166b8df951e6185f7098,Unset,No,,,"1|i00ek7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Mar/19 10:27 PM;rameshthoomu;The actual failure is not because of the ""no test files"". It's taking time while starting chaincode tests. I see in s390x build log that the chaincode container is exited and there are no container logs available.

FYI: no test files meaning there are no unit test cases written in that particular component. Please see this file.
https://github.com/hyperledger/fabric/tree/master/core/cclifecycle/mocks
there are no _test.go file. _test.go represents a go based unit-test case in fabric

The test is not starting

*00:08:52.191 [33munit-tests_1  |[0m ok  	github.com/hyperledger/fabric/core/chaincode	94.307s	coverage: 94.6% of statements
*
{code:java}
root@hyperledger-08 fabric # docker ps -a
CONTAINER ID        IMAGE                                                                                                          COMMAND                  CREATED             STATUS                        PORTS                                        NAMES
0613ae556565        a4714c3e-951f-42ad-980d-2cbe86b6419a-simple-023d159b175367818739bc5f4f00e78417f4bac13e6753c5b9bd73554cd0e204   ""tail -f /dev/null""      11 minutes ago      Exited (137) 11 minutes ago                                                a4714c3e-951f-42ad-980d-2cbe86b6419a-simple
87dc4cffd970        hyperledger/fabric-testenv                                                                                     ""./unit-test/run.sh""     18 minutes ago      Up 18 minutes                                                              unit-test_unit-tests_1
0847345e9152        hyperledger/fabric-couchdb                                                                                     ""tini -- /docker-ent…""   18 minutes ago      Up 18 minutes                 4369/tcp, 9100/tcp, 0.0.0.0:5984->5984/tcp   couchdb
{code}
;;;","26/Jul/19 3:10 AM;vijaypunugubati;No support for the unit-test-coverage-s390x platform, all unit-tets-coverage jobs on s390x platform are disabled for all branches.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix TestMetrics flake,FAB-14484,38204,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,05/Mar/19 6:59 PM,19/Mar/19 7:57 PM,28/Oct/23 3:05 AM,05/Mar/19 11:39 PM,,,,,,v2.0.0,,,,,,,,,0,ci-flake,,,,"*github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go*

{code:java}
panic: runtime error: index out of range [recovered]
	panic: runtime error: index out of range

goroutine 248 [running]:
testing.tRunner.func1(0xc0002ca200)
	/usr/local/go/src/testing/testing.go:792 +0x6a7
panic(0x4c58880, 0x568b180)
	/usr/local/go/src/runtime/panic.go:513 +0x1b9
github.com/hyperledger/fabric/common/metrics/metricsfakes.(*Counter).WithArgsForCall(0xc000408cf0, 0x0, 0x0, 0x0, 0x0)
	/Users/gsingh/Projects/golang/src/github.com/hyperledger/fabric/common/metrics/metricsfakes/counter.go:57 +0x11d
github.com/hyperledger/fabric/orderer/common/cluster_test.TestMetrics.func6(0xc000432000, 0xc000432b40, 0xc000408700)
	/Users/gsingh/Projects/golang/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:1229 +0x66b
github.com/hyperledger/fabric/orderer/common/cluster_test.TestMetrics.func7(0xc0002ca200)
	/Users/gsingh/Projects/golang/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:1256 +0x54e
testing.tRunner(0xc0002ca200, 0xc0004aa5a0)
	/usr/local/go/src/testing/testing.go:827 +0x163
created by testing.(*T).Run
	/usr/local/go/src/testing/testing.go:878 +0x651
exit status 2
FAIL	github.com/hyperledger/fabric/orderer/common/cluster	0.570s
{code}
",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00elr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Mar/19 9:26 PM;mastersingh24;https://gerrit.hyperledger.org/r/29825;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extend BYFN to optionally include certificate authorities,FAB-14485,38208,35374,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sstone1,sstone1,sstone1,05/Mar/19 8:40 PM,25/Apr/19 10:44 PM,28/Oct/23 3:05 AM,25/Apr/19 10:44 PM,,,,,,v1.4.2,v2.0.0,,,,,,,,0,,,,,,,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00emf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sstone1,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Mar/19 11:51 PM;sstone1;https://gerrit.hyperledger.org/r/29823 (master);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extend BYFN to optionally skip the deployment of abstore chaincode,FAB-14486,38209,35374,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sstone1,sstone1,sstone1,05/Mar/19 8:40 PM,25/Apr/19 11:59 PM,28/Oct/23 3:05 AM,25/Apr/19 11:59 PM,,,,,,v1.4.2,v2.0.0,,,,,,,,0,,,,,,,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00emn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sstone1,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Mar/19 11:49 PM;sstone1;https://gerrit.hyperledger.org/r/29824 (master);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update FabCar sample to use BYFN instead of basic-network,FAB-14487,38210,35374,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sstone1,sstone1,sstone1,05/Mar/19 8:41 PM,21/Jun/19 7:16 PM,28/Oct/23 3:05 AM,21/Jun/19 7:16 PM,,,,,,v1.4.1,v2.0.0,,,,,,,,0,,,,,,,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00emv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sstone1,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Mar/19 11:50 PM;sstone1;https://gerrit.hyperledger.org/r/29827 (master);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Writing Your First Application tutorial to reference BYFN,FAB-14488,38211,35374,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sstone1,sstone1,sstone1,05/Mar/19 8:41 PM,14/Jul/20 11:13 PM,28/Oct/23 3:05 AM,14/Jul/20 11:13 PM,,,,,,v2.0.0,,,,fabric-samples,,,,,0,,,,,,,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00en3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove basic-network sample,FAB-14489,38212,35374,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sstone1,sstone1,sstone1,05/Mar/19 8:41 PM,14/Jul/20 11:13 PM,28/Oct/23 3:05 AM,14/Jul/20 11:13 PM,,,,,,v2.0.0,,,,fabric-samples,,,,,0,,,,,,,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00enb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a fabric operator, I want the peer to execute a binary I configure to determine if a custom builder should be used",FAB-14491,38214,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,sykesm,sykesm,05/Mar/19 11:17 PM,07/Aug/19 12:52 AM,28/Oct/23 3:05 AM,01/Aug/19 5:46 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,ipm,ipm-planned,,,"Acceptance:

I can add keys to {{core.yaml}} that point to a path in the peer's local file system that contains a {{detect}} binary. If it exits, it is called prior to building chaincode. No further action is required.

System chaincode never uses the external launcher.",,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16206,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,FAB-13584,,,No,,Unset,No,,,"1|i00n2c:rri",,,,Unset,Unset,,,,(Please add steps to reproduce),3.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/May/19 2:11 PM;guoger;IIUC, {{FAB 1449[1-4]}} should be grouped and collectively result in custom chaincode management? [~sykesm];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a fabric operator, I want a custom builder to be invoked when my detect script exits normally",FAB-14492,38215,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,sykesm,sykesm,05/Mar/19 11:23 PM,07/Aug/19 12:53 AM,28/Oct/23 3:05 AM,01/Aug/19 5:46 AM,v2.0.0,,,,,v2.0.0,,,,fabric-peer,,,,,1,ipm,ipm-planned,,,"Acceptance:

I can drop a {{build}} script the peer's local file system next to the {{detect}} script. When the {{detect}} script  exits successfully, the {{build}} script will be called. The arguments to the build script should be the extracted contents of the chaincode package, a directory to place chaincode metadata for the peer (ie. CouchDB index files), and a directory to place assets that may be needed to launch chaincode.

If the {{build}} script exits abnormally, the build process has failed.",,mwagner,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13584,,,No,,Unset,No,,,"1|i00n2c:w",,,,Unset,Unset,,,,(Please add steps to reproduce),3.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),mwagner,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a fabric operator, I want a custom launcher to be called when my custom builder has exited successfully",FAB-14493,38216,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,sykesm,sykesm,05/Mar/19 11:28 PM,07/Aug/19 12:53 AM,28/Oct/23 3:05 AM,01/Aug/19 5:46 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,1,ipm,,,,"Acceptance:

I can place a {{launch}} script in the peer's local file system next to {{detect}} and {{build}}. If present and {{detect}} and {{build}} have been successful, call the {{launch}} script with the following arguments: the path to the build directory populated by the {{build}} script and a path to a JSON file that contains chaincode metadata.

The chaincode metadata should minimally contain key/value pairs for the pem encoded keys and certificates necessary to launch chaincode, a pointer to the chaincode server address required for registration, and the chaincode ID/name.",,mwagner,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13584,,,No,,Unset,No,,,"1|i00n2d:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mwagner,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a fabric developer, I want my tests to use a custom launcher to reduce the time necessary to test networks",FAB-14494,38218,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,sykesm,sykesm,05/Mar/19 11:34 PM,15/Oct/19 2:50 AM,28/Oct/23 3:05 AM,15/Oct/19 2:50 AM,,,,,,v2.0.0,,,,fabric-common,fabric-peer,,,,0,ipm,,,,"Acceptance:

An end-to-end test against a solo network and Golang chaincode can be executed without docker. In particular, the chaincode binary is compiled for the host platform, the peer that is launched points to a custom no-op builder, and the launcher simply executes the chaincode with the correct flags and environment variables.",,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,FAB-16737,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13584,,,No,,Unset,No,,,"1|i00n2c:ruic",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Oct/19 2:50 AM;sykesm;I just did a quick audit and it looks like this is complete or nearly complete. The only remaining chaincode that does not use the _binary_ language (yuck) are:

nwo/network_test.go
ledger/couchdb_indexes_test.go
ledger/marbles_test.go
sbe/sbe_test.go

The ledger tests will be handled by FAB-16737.

The SBE test needs to be reviewed. There are also e2e tests that continue to use ""golang"".;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
RAFT log for heartbeat response should not say ConsensusRequest,FAB-14497,38221,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,dongming,dongming,06/Mar/19 12:14 AM,11/Mar/19 10:48 AM,28/Oct/23 3:05 AM,11/Mar/19 10:48 AM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,Raft,,,,"In the RAFT orderer debug log message below, OSN1 is the leader and sends ConsensusRequest to followers, OSN2 and OSN3. Then in the responses from OSN2 and OSN3, ConsensusRequest is used instead of ConsensusResponse. It will be more clear if we print that it is a response, i.e. ConsensusResponse instead of ConsensusRequest.

{{ Feb 27 22:15:26 orderer1st-ordererorg orderer1st-ordererorg 2019-02-28 03:15:16.054 UTC [orderer.common.cluster.step] sendMessage -> DEBU 36f3dbc Send of ConsensusRequest for channel testorgschannel139 with payload of size 28 to orderer2nd-ordererorg.ordererorg(orderer2nd-ordererorg:7050) took 23.335µs }}
{{ Feb 27 22:15:26 orderer1st-ordererorg orderer1st-ordererorg 2019-02-28 03:15:26.643 UTC [orderer.consensus.etcdraft] consensusSent -> DEBU 36f4c2e Sending msg of 28 bytes to 2 on channel testorgschannel139 took 4.841µs}}
{{ Feb 27 22:15:26 *orderer1st*-ordererorg orderer1st-ordererorg 2019-02-28 03:15:26.643 UTC [orderer.common.cluster.step] sendMessage -> DEBU 36f4c34 Send of ConsensusRequest for channel testorgschannel139 with payload of size 28 to *orderer2nd*-ordererorg.ordererorg(orderer2nd-ordererorg:7050) took 25.995µs }}
{{ Feb 27 22:15:26 *orderer2nd*-ordererorg orderer2nd-ordererorg 2019-02-28 03:15:26.642 UTC [orderer.common.cluster.step] handleMessage -> DEBU 3bf28dc *Received message from orderer1st*-ordererorg.ordererorg(172.30.231.76:55060): ConsensusRequest for channel testorgschannel139 with payload of size 28}}

There is no log for orderer2nd sending a response or a request to orderer1st. Should we add one? In any case, it is not clear if this next msg (received in orderer1st from orderer2nd) is a response or if is a new request. All it says is that a ConsensusRequest was received; this was unexpected. We expected it to say ""response"" somewhere in this log text (or else it is a bigger problem if it is an actual new request).

{{ Feb 27 22:15:26 *orderer1st*-ordererorg orderer1st-ordererorg 2019-02-28 03:15:26.698 UTC [orderer.common.cluster.step] handleMessage -> DEBU 36f50fb *Received message from orderer2nd*-ordererorg.ordererorg(172.30.181.167:54758): _ConsensusRequest_ for channel testorgschannel139 with payload of size 28}}
{{ Feb 27 22:15:27 *orderer2nd*-ordererorg orderer2nd-ordererorg 2019-02-28 03:15:27.135 UTC [orderer.common.cluster.step] handleMessage -> DEBU 3bf3c26 *Received message from orderer1st*-ordererorg.ordererorg(172.30.231.76:55060): ConsensusRequest for channel testorgschannel139 with payload of size 28}}
{{ Feb 27 22:15:26 *orderer1st*-ordererorg orderer1st-ordererorg 2019-02-28 03:15:26.609 UTC [orderer.common.cluster.step] handleMessage -> DEBU 36f49ed *Received message from orderer2nd*-ordererorg.ordererorg(172.30.181.167:54758): ConsensusRequest for channel testorgschannel139 with payload of size 28}}",,dongming,jyellick,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14350,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00epr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,jyellick,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Mar/19 10:48 AM;jyellick;The orderer cluster protos clearly define two message types.

https://github.com/hyperledger/fabric/blob/1bd01d8641ab687bff382e98732cb54cf83672f7/protos/orderer/cluster.proto#L22-L30

There are messages related to the consensus protocol ({{ConsensusRequest}} messages) and messages which are simply forwarding ordering requests to the leader. ({{SubmitRequest}} messages).

Because this is a _Debug_ level message, using the correct message type name even though it might be confusing to an end user seems acceptable to me, and I would not consider this to be a bug.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address data race in gossip/gossip,FAB-14498,38222,31531,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,06/Mar/19 12:36 AM,17/Mar/19 4:19 PM,28/Oct/23 3:05 AM,17/Mar/19 4:19 PM,,,,,,v2.0.0,,,,fabric-gossip,,,,,0,hygiene,,,,"==================
 WARNING: DATA RACE
 Read at 0x00c00330aa90 by goroutine 1759:
 github.com/hyperledger/fabric/gossip/gossip.TestConfidentiality.func4()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/orgs_test.go:435 +0x55

Previous write at 0x00c00330aa90 by goroutine 123:
 github.com/hyperledger/fabric/gossip/gossip.TestConfidentiality()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/orgs_test.go:427 +0x1b6d
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162

Goroutine 1759 (running) created at:
 github.com/hyperledger/fabric/gossip/gossip.TestConfidentiality()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/orgs_test.go:432 +0x1ecb
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162

Goroutine 123 (running) created at:
 testing.(*T).Run()
 /usr/local/go/src/testing/testing.go:878 +0x659
 testing.runTests.func1()
 /usr/local/go/src/testing/testing.go:1119 +0xa8
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162
 testing.runTests()
 /usr/local/go/src/testing/testing.go:1117 +0x4ee
 testing.(*M).Run()
 /usr/local/go/src/testing/testing.go:1034 +0x2ee
 main.main()
 _testmain.go:152 +0x332
 ==================

 

==================
 WARNING: DATA RACE
 Read at 0x00c004389a70 by goroutine 3176:
 github.com/hyperledger/fabric/gossip/protoext.(*SignedGossipMessage).String()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/protoext/signing.go:159 +0x19e4
 fmt.(*pp).handleMethods()
 /usr/local/go/src/fmt/print.go:603 +0x404
 fmt.(*pp).printArg()
 /usr/local/go/src/fmt/print.go:686 +0x255
 fmt.(*pp).doPrintln()
 /usr/local/go/src/fmt/print.go:1146 +0xbd
 fmt.Sprintln()
 /usr/local/go/src/fmt/print.go:271 +0x5f
 github.com/hyperledger/fabric/common/flogging.formatArgs()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/common/flogging/zap.go:105 +0x50
 github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Debug()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/common/flogging/zap.go:61 +0x50
 github.com/hyperledger/fabric/gossip/comm.(*commImpl).sendToEndpoint()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:227 +0x1e2
 github.com/hyperledger/fabric/gossip/comm.(*commImpl).Send.func1()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:218 +0x51

Previous write at 0x00c004389a70 by goroutine 833:
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).sendAndFilterSecrets()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:533 +0x32b
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).gossipBatch()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:519 +0x13a5
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).sendGossipBatch()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:425 +0x1a8
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).sendGossipBatch-fm()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:118 +0x5f
 github.com/hyperledger/fabric/gossip/gossip.(*batchingEmitterImpl).emit()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/batcher.go:81 +0x2ab
 github.com/hyperledger/fabric/gossip/gossip.(*batchingEmitterImpl).periodicEmit()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/batcher.go:64 +0xc0

Goroutine 3176 (running) created at:
 github.com/hyperledger/fabric/gossip/comm.(*commImpl).Send()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:217 +0x244
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).sendAndFilterSecrets()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:536 +0x2bc
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).gossipBatch()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:519 +0x13a5
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).sendGossipBatch()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:425 +0x1a8
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).sendGossipBatch-fm()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:118 +0x5f
 github.com/hyperledger/fabric/gossip/gossip.(*batchingEmitterImpl).emit()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/batcher.go:81 +0x2ab
 github.com/hyperledger/fabric/gossip/gossip.(*batchingEmitterImpl).periodicEmit()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/batcher.go:64 +0xc0

Goroutine 833 (running) created at:
 github.com/hyperledger/fabric/gossip/gossip.newBatchingEmitter()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/batcher.go:54 +0x2ad
 github.com/hyperledger/fabric/gossip/gossip.NewGossipService()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:116 +0xea8
 github.com/hyperledger/fabric/gossip/gossip.newGossipInstanceWithGRPCWithExternalEndpoint()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/orgs_test.go:136 +0x85a
 github.com/hyperledger/fabric/gossip/gossip.TestMultipleOrgEndpointLeakage()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/orgs_test.go:212 +0xc60
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162
 ==================

 

WARNING: DATA RACE
 Read at 0x00c0001c8930 by goroutine 1020:
 runtime.mapaccess2_faststr()
 /usr/local/go/src/runtime/map_faststr.go:101 +0x0
 github.com/hyperledger/fabric/gossip/gossip.(*naiveCryptoService).Expiration()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:142 +0xa3
 github.com/hyperledger/fabric/gossip/identity.(*identityMapperImpl).Put()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/identity/identity.go:113 +0xcf
 github.com/hyperledger/fabric/gossip/gossip.(*discoverySecurityAdapter).ValidateAliveMsg()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:998 +0x3d0
 github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMsgFromComm()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:350 +0x7c7
 github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMessages()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:304 +0x162

Previous write at 0x00c0001c8930 by goroutine 131:
 runtime.mapassign_faststr()
 /usr/local/go/src/runtime/map_faststr.go:190 +0x0
 github.com/hyperledger/fabric/gossip/gossip.TestIdentityExpiration()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:1440 +0x484
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162

Goroutine 1020 (running) created at:
 github.com/hyperledger/fabric/gossip/discovery.NewDiscoveryService()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:120 +0x856
 github.com/hyperledger/fabric/gossip/gossip.NewGossipService()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:129 +0x120c
 github.com/hyperledger/fabric/gossip/gossip.newGossipInstanceWithGrpcMcsMetrics()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:269 +0x8ec
 github.com/hyperledger/fabric/gossip/gossip.TestDataLeakage.func1()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:1093 +0x3af

Goroutine 131 (running) created at:
 testing.(*T).Run()
 /usr/local/go/src/testing/testing.go:878 +0x659
 testing.runTests.func1()
 /usr/local/go/src/testing/testing.go:1119 +0xa8
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162
 testing.runTests()
 /usr/local/go/src/testing/testing.go:1117 +0x4ee
 testing.(*M).Run()
 /usr/local/go/src/testing/testing.go:1034 +0x2ee
 main.main()
 _testmain.go:152 +0x332
 ==================

 

 

WARNING: DATA RACE
 Write at 0x00c0003df090 by goroutine 92:
 runtime.closechan()
 /usr/local/go/src/runtime/chan.go:327 +0x0
 github.com/hyperledger/fabric/gossip/gossip.(*discoveryAdapter).close()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:882 +0x7e
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).Stop()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:749 +0x185
 github.com/hyperledger/fabric/gossip/gossip.(*gossipGRPC).Stop()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:351 +0x4b
 github.com/hyperledger/fabric/gossip/gossip.TestMultipleOrgEndpointLeakage()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/orgs_test.go:269 +0x14d1
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162

Previous read at 0x00c0003df090 by goroutine 1096:
 runtime.chansend()
 /usr/local/go/src/runtime/chan.go:140 +0x0
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).forwardDiscoveryMsg()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:400 +0xe5
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).handleMessage()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:387 +0x106e
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).acceptMessages()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:318 +0x1b0

Goroutine 92 (running) created at:
 testing.(*T).Run()
 /usr/local/go/src/testing/testing.go:878 +0x659
 testing.runTests.func1()
 /usr/local/go/src/testing/testing.go:1119 +0xa8
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162
 testing.runTests()
 /usr/local/go/src/testing/testing.go:1117 +0x4ee
 testing.(*M).Run()
 /usr/local/go/src/testing/testing.go:1034 +0x2ee
 main.main()
 _testmain.go:152 +0x332

Goroutine 1096 (running) created at:
 github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).start()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:304 +0x105
 ==================

 

==================
WARNING: DATA RACE
Read at 0x00c0004b0030 by goroutine 114:
 github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Info()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/common/flogging/zap.go:70 +0x74
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).reportMembershipChanges()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:295 +0x98
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).reportMembershipChanges-fm()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:283 +0x5f
 github.com/hyperledger/fabric/gossip/gossip/channel.(*membershipTracker).checkIfPeersChanged()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:1045 +0xb0c
 github.com/hyperledger/fabric/gossip/gossip/channel.(*membershipTracker).trackMembershipChanges()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:1074 +0x24a

Previous write at 0x00c0004b0030 by goroutine 41:
 github.com/hyperledger/fabric/common/flogging.(*FabricLogger).WithOptions()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/common/flogging/zap.go:102 +0x2c5
 github.com/hyperledger/fabric/gossip/gossip/channel.TestMembershiptrackerStopWhenGCStops()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:2220 +0x16a2
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162

Goroutine 114 (running) created at:
 github.com/hyperledger/fabric/gossip/gossip/channel.NewGossipChannel()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:290 +0x12bd
 github.com/hyperledger/fabric/gossip/gossip/channel.TestMembershiptrackerStopWhenGCStops()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:2209 +0xe74
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162

Goroutine 41 (running) created at:
 testing.(*T).Run()
 /usr/local/go/src/testing/testing.go:878 +0x659
 testing.runTests.func1()
 /usr/local/go/src/testing/testing.go:1119 +0xa8
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162
 testing.runTests()
 /usr/local/go/src/testing/testing.go:1117 +0x4ee
 testing.(*M).Run()
 /usr/local/go/src/testing/testing.go:1034 +0x2ee
 main.main()
 _testmain.go:140 +0x332
==================",,hagarm,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00epz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,MHBauer,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Mar/19 12:48 AM;hagarm;https://gerrit.hyperledger.org/r/#/c/29839/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
RAFT OSN1 does not receive consensusRequest for 6 seconds,FAB-14499,38223,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Environment Issue,,dongming,dongming,06/Mar/19 12:41 AM,05/Apr/19 4:57 AM,28/Oct/23 3:05 AM,05/Apr/19 4:57 AM,,,,,,,,,,fabric-orderer,,,,,0,Raft,,,,"Under the stress test (FAB-14350), the followers OSN1 does not receive ConsensusRequest from leader OSN2 for 6 seconds and then initiates leader election.

at 21:44.394, both OSN1 and OSN3 respond to leader OSN2:
    Feb 27 22:21:44 orderer1st-ordererorg orderer1st-ordererorg 2019-02-28 03:21:44.394 UTC [orderer.common.cluster.step] sendMessage -> DEBU 37a20fc Send of ConsensusRequest for channel testorgschannel139 with payload of size 28 to orderer2nd-ordererorg.ordererorg(orderer2nd-ordererorg:7050) took 16.181µs 
    Feb 27 22:21:44 orderer1st-ordererorg orderer1st-ordererorg 2019-02-28 03:21:44.433 UTC [orderer.common.cluster.step] sendMessage -> DEBU 37a23c9 Send of ConsensusRequest for channel testorgschannel139 with payload of size 28 to orderer2nd-ordererorg.ordererorg(orderer2nd-ordererorg:7050) took 27.121µs 

OSN2 keeps sending sonsensusRequest every 500ms:
	Feb 27 22:21:48 orderer2nd-ordererorg orderer2nd-ordererorg 2019-02-28 03:21:48.483 UTC [orderer.common.cluster.step] sendMessage -> DEBU 3d027f0 Send of ConsensusRequest for channel testorgschannel139 with payload of size 28 to orderer3rd-ordererorg.ordererorg(orderer3rd-ordererorg:7050) took 23.266µs 
    Feb 27 22:21:48 orderer2nd-ordererorg orderer2nd-ordererorg 2019-02-28 03:21:48.483 UTC [orderer.common.cluster.step] sendMessage -> DEBU 3d027f1 Send of ConsensusRequest for channel testorgschannel139 with payload of size 28 to orderer1st-ordererorg.ordererorg(orderer1st-ordererorg:7050) took 21.426µs 

OSN1 does not receive consensusRequest from OSN2 for more than 5 seconds. As a result, OSN1 initiates leader election at 21:50.079:
    Feb 27 22:21:50 orderer1st-ordererorg orderer1st-ordererorg 2019-02-28 03:21:50.079 UTC [orderer.consensus.etcdraft] Step -> INFO 37a2e6f 1 is starting a new election at term 11 channel=testorgschannel139 node=1

The log does not show the reason why OSN1 does not receive consensusRequest from OSN2 for 6 seconds.

The log is attached to the bug.

The logDNA is available in LogDNA-community-quality-lab, with the following filter:
02/27 10:21pm to 02/27 11pm  and ""testorgschannel139"" 
",,bmos299,dongming,jyellick,sambhavdutt,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14350,,,"06/Mar/19 12:42 AM;dongming;FAB-14499.txt;https://jira.hyperledger.org/secure/attachment/16892/FAB-14499.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00eq7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bmos299,dongming,jyellick,sambhavdutt,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Mar/19 8:18 AM;bmos299;Do you know if OSN2 sent it? Where is the latency occurring?;;;","29/Mar/19 1:22 PM;jyellick;Based on the available information, this sounds like it is simply a resource constraint of the underlying cluster we are hitting.  If there's more detail you can provide which indicates this is a legitimate Raft bug, please re-open with additional info.;;;","05/Apr/19 4:57 AM;scottz;symptom of resource constraint.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
RAFT term mismatch for 6 seconds,FAB-14500,38224,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Environment Issue,,dongming,dongming,06/Mar/19 1:11 AM,05/Apr/19 5:02 AM,28/Oct/23 3:05 AM,05/Apr/19 5:02 AM,,,,,,,,,,fabric-orderer,,,,,0,Raft,,,,"Under stress test (FAB-14350), we observed that OSN1 becomes leader with a new term 31, but 6 seconds later OSN2 still remains in the old term 30.

    2019-02-26 21:26:47.341 UTC [orderer.consensus.etcdraft] run -> INFO 6305f raft.node: 1 lost leader 3 at term 30 channel=testorgschannel139 node=1
    2019-02-26 21:26:47.383 UTC [orderer.consensus.etcdraft] becomeLeader -> INFO 632f5 1 became leader at term 31 channel=testorgschannel139 node=1
    2019-02-26 21:26:47.383 UTC [orderer.consensus.etcdraft] run -> INFO 632f6 raft.node: 1 elected leader 1 at term 31 channel=testorgschannel139 node=1
    2019-02-26 21:26:53.786 UTC [orderer.consensus.etcdraft] run -> INFO b00ca raft.node: 2 lost leader 3 at term 30 channel=testorgschannel139 node=2

Jay answered in the slack channel: every time a new election is completed, term is advanced by 1. Those nodes in old term will eventually catch up when they receive message from new leader. If leader failover happens, this log is expected.  Although the real question is, why leader failover occurs?

Our question is why it takes 6 seconds to catch up?  This means that OSN1 and ONS2 are disconnected. What causes the disconnection?  Is this related to FAB-14499?  Also since it takes 6 seconds to catch up, shall the leader re-elect again?

This defect is to followup Jay's answer in order to track this issue.

",,dongming,jyellick,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14350,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00eqf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,jyellick,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/19 1:22 PM;jyellick;Based on the available information, this sounds like it is simply a resource constraint of the underlying cluster we are hitting.  If there's more detail you can provide which indicates this is a legitimate Raft bug, please re-open with additional info.;;;","05/Apr/19 5:02 AM;scottz;symptom of resource constraint.

The timing of when the logs are printed from different orderers is confusing; but it does seem the orderers are each experiencing slow disk writes or overwhelming messaging and queues issues. These issues tend to dissipate with less ingress traffic, or larger hosts with more CPU or RAM and faster disks IOPS containers. Nevertheless, the ordering system never forked.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer crashes with nil pointer if cannot verify connection to CouchDB,FAB-14501,38225,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,06/Mar/19 2:55 AM,24/Mar/19 4:47 AM,28/Oct/23 3:05 AM,24/Mar/19 4:47 AM,,,,,,v1.4.1,v2.0.0,,,,,,,,0,,,,,"In v1.4.0 there is a regression caused by [https://gerrit.hyperledger.org/r/27558] where the error caused by connection failure to CouchDB does not get handled. This leads to a nil pointer panic when the nil vdbProvider tries to get a handle to a database:

 
{code:java}
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x20 pc=0x482af8f]
goroutine 1 [running]:
github.com/hyperledger/fabric/core/ledger/kvledger.(*Provider).openInternal(0xc00015a680, 0xc000218ac0, 0x3, 0xc0002ed001, 0x0, 0x0, 0x402ca32)
 /Users/denyeart/work/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:158 +0x1ef
github.com/hyperledger/fabric/core/ledger/kvledger.(*Provider).Open(0xc00015a680, 0xc000218ac0, 0x3, 0x3, 0x5948c40, 0x0, 0x1)
 /Users/denyeart/work/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:145 +0x116
github.com/hyperledger/fabric/core/ledger/ledgermgmt.OpenLedger(0xc000218ac0, 0x3, 0x0, 0x0, 0x0, 0x0)
 /Users/denyeart/work/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:122 +0x19b
{code}
 

This change will handle the CouchDB connection error gracefully and panic the peer with a good error message (e.g. connection problem, username/password problem) as was done in prior releases.

 

 ",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00eqn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Mar/19 1:29 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/29850/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
RAFT log message clarification: Aborting deliver for request because of background error,FAB-14502,38227,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,jyellick,dongming,dongming,06/Mar/19 4:12 AM,20/Mar/19 2:53 AM,28/Oct/23 3:05 AM,20/Mar/19 2:53 AM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,Raft,,,,"This is a request for log message clarification, not a bug.  We see a very general log message as below:

    2019-02-26 21:23:18.013 UTC [common.deliver] deliverBlocks -> WARN 50b16 Aborting deliver for request because of background error
    2019-02-26 21:23:18.023 UTC [common.deliver] deliverBlocks -> WARN 50b83 Aborting deliver for request because of background error
    2019-02-26 21:23:18.040 UTC [common.deliver] deliverBlocks -> WARN 50bc8 Aborting deliver for request because of background error
    2019-02-26 21:23:18.040 UTC [common.deliver] deliverBlocks -> WARN 50bc9 Aborting deliver for request because of background error
    2019-02-26 21:23:18.040 UTC [common.deliver] deliverBlocks -> WARN 50bca Aborting deliver for request because of background error
    2019-02-26 21:23:18.042 UTC [common.deliver] deliverBlocks -> WARN 50be8 Aborting deliver for request because of background error
    2019-02-26 21:23:18.062 UTC [common.deliver] deliverBlocks -> WARN 50c2a Aborting deliver for request because of background error

Yacov answered in the slack channel: the background error is just because you received something in the `errorChan`

Please add more information in the log message to help users to understand this.",,dongming,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14350,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00eqv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,jyellick,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Mar/19 10:58 AM;jyellick; https://gerrit.hyperledger.org/r/29988;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
sampleconfig/core.yaml fails make basic-checks,FAB-14503,38231,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sheehan,sheehan,sheehan,06/Mar/19 7:43 AM,08/Mar/19 1:09 AM,28/Oct/23 3:05 AM,08/Mar/19 1:09 AM,v1.4.0,,,,,v2.0.0,,,,fabric-samples,,,,,0,,,,,sampleconfig/core.yaml fails make basic-checks due to misspellings and a trailing space,,sheehan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00erj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sheehan,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Basic functionality on minimal HW and network configuration with 1 raft orderer, 1 or 2 peers, 1 channel and chaincode",FAB-14504,38232,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,06/Mar/19 8:12 AM,31/Jul/19 5:25 AM,28/Oct/23 3:05 AM,31/Jul/19 5:25 AM,,,,,,v2.0.0,,,,fabric-quality,,,,,0,raft,,,,"Define a minimal hardware configuration in a k8s cluster. For example, we could obtain a small free cluster from the IBM Cloud Kubernetes Service (IKS). It could contain only a single VM host; set it up with one raft orderer, 1 or 2 peers, 1 CA server, 1 channel and 1 chaincode, with a small payload.

Ensure it can process transactions. Even 1 (or a few) per minute would be sufficient, like a user manually invoking their chaincode via UI.

Possible variation, stretch goal: Increase network size to 3 raft orderers, and 2 peers in separate orgs, and send transactions.

Stretch goal: Using HFRD, starting at a low rate, such as 0.1 tps, ramp up the traffic rate to determine the transactions per second (tps) it can handle successfully, until transactions get dropped or other troubles are encountered. (Raft does not guarantee the delivery of all transactions it receives, so the client user will need to register with a peer for block event notification.)",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14215,,,No,,Unset,No,,,"1|hzwqrp:i",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Remove the ca-peer, ca-orderer, ca-tools from pull images script.",FAB-14505,38236,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sambhavdutt,sambhavdutt,sambhavdutt,06/Mar/19 2:28 PM,09/Mar/19 7:00 AM,28/Oct/23 3:05 AM,09/Mar/19 7:00 AM,v1.4.0,,,,,,,,,fabric-quality,,,,,0,,,,,"Remove the ca-peer, ca-orderer, ca-tools from pull images script as they no longer exist and are failing the builds trying to pull these three images.",,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00esn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE tests are failing in all test cases in Couchdb and Leveldb ,FAB-14506,38237,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,dongming,sambhavdutt,sambhavdutt,06/Mar/19 3:23 PM,11/Apr/19 1:26 AM,28/Oct/23 3:05 AM,11/Apr/19 1:26 AM,v2.0.0,,,,,,,,,fabric-quality,,,,,0,ci-failure,,,,"The PTE tests are failing in the Couchdb and LevelDB in all the test cases from several builds.
*Consistent:* Yes
*Branch:* master
*Error Snippet:*

{code:java}
E       AssertionError: Error: incorrect number of INVOKE transactions sent or received

#x1B[35m2019-03-06 02:18:26.092 UTC [common.tools.configtxgen] main -> FATA 006#x1B[0m Error on inspectChannelCreateTx: error parsing profile as channel group: error adding policies to channel group: no policies defined

UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)
(node:2055) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.
(node:2056) UnhandledPromiseRejectionWarning: Error: ENOENT: no such file or directory, open '/w/workspace/fabric-test-daily-pte-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/fabric/common/tools/cryptogen/crypto-config/ordererOrganizations/testorgschannel2.tx'

#x1B[35m2019-03-06 02:18:26.092 UTC [common.tools.configtxgen] main -> FATA 006#x1B[0m Error on inspectChannelCreateTx: error parsing profile as channel group: error adding policies to channel group: no policies defined
{code}


*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-pte-master-x86_64/182/PTE_Test_Logs/",,sambhavdutt,scottz,,,,,,,,,,,,,,,,,,,,,,,FAB-14825,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00esv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Apr/19 1:26 AM;scottz;This was resolved by [https://gerrit.hyperledger.org/r/#/c/30429/] merged March 29, using FAB-14825. After that, the PTE tests ran successfully for a few days (until April 6, when they all failed due to some other reason, FAB-15128).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rollback from a misconfigured etcd/raft cluster back to kafka,FAB-14507,38238,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,tock,tock,tock,06/Mar/19 5:58 PM,04/Apr/19 4:43 PM,28/Oct/23 3:05 AM,04/Apr/19 4:39 PM,,,,,,,,,,,,,,,0,,,,,"If a user provides a bad etcd/raft metadata in the CONTEXT and COMMIT config updates, the etcd/raft orderers will not be able to communicate, form a majority, and elect a leader.

This can happen, for example, if the HOST field in the EtcdRaft Consenter field is wrong. This is not far fetched, as the HOST field represents the ""outside"" address other orderers need to use in order to reach the node. In environments with NAT it is easy to get that wrong.

If an etcd/raft cluster fails to form a majority, it should be possible to: 
 * shut down the nodes
 * replace the genesis file (that is the last system channel config block - the COMMIT) with the original genesis file (which is saved along side it with a *.bak suffix)
 * restart the nodes - they will boot back to kafka
 * abort the migration using the normal procedure for abort (see...)
 * try migration again, with a corrected Raft  metadata ",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00et3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/19 4:43 PM;tock;Switching to alternative  migration design - v2;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve Token CLI to match the requirements of a fabric sample for tokens,FAB-14508,38239,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,angelo.decaro,angelo.decaro,06/Mar/19 6:41 PM,19/Mar/19 2:39 AM,28/Oct/23 3:05 AM,19/Mar/19 2:39 AM,,,,,,,,,,,,,,,0,,,,,,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i00etb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Mar/19 2:39 AM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/29873/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Documentation updates for port changes to BYFN,FAB-14509,38244,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sstone1,sstone1,sstone1,06/Mar/19 9:56 PM,26/Mar/19 11:05 PM,28/Oct/23 3:05 AM,26/Mar/19 11:05 PM,,,,,,v1.4.1,v2.0.0,,,fabric-docs,,,,,0,,,,,The private data tutorial needs updates to reflect recent port changes I made to BYFN to ensure that the peer nodes have the same ports both inside and outside the Docker network.,,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00euf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sstone1,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Mar/19 11:33 PM;sstone1;https://gerrit.hyperledger.org/r/#/c/29882/ (master)
https://gerrit.hyperledger.org/r/#/c/29883/ (release-1.4);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address data races in gossip/comm/conn,FAB-14510,38246,31531,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,06/Mar/19 10:41 PM,14/Mar/19 2:12 AM,28/Oct/23 3:05 AM,14/Mar/19 2:12 AM,,,,,,,,,,fabric-gossip,,,,,0,,,,,"==================
WARNING: DATA RACE
Write at 0x00c0004cecd0 by goroutine 1172:
 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*clientStream).CloseSend()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/stream.go:751 +0x5e
 github.com/hyperledger/fabric/protos/gossip.(*gossipGossipStreamClient).CloseSend()
 <autogenerated>:1 +0x62
 github.com/hyperledger/fabric/gossip/comm.(*connection).close()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/comm/conn.go:256 +0x2b2
 github.com/hyperledger/fabric/gossip/comm.(*connectionStore).closeByPKIid()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/comm/conn.go:194 +0x19b
 github.com/hyperledger/fabric/gossip/comm.(*connectionStore).shutdown.func1()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/comm/conn.go:161 +0x88

Previous read at 0x00c0004cecd0 by goroutine 680:
 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*clientStream).SendMsg()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/stream.go:668 +0xf8
 github.com/hyperledger/fabric/protos/gossip.(*gossipGossipStreamClient).Send()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/protos/gossip/message.pb.go:2725 +0x6a
 github.com/hyperledger/fabric/gossip/comm.(*connection).writeToStream()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/comm/conn.go:332 +0x2d6

Goroutine 1172 (running) created at:
 github.com/hyperledger/fabric/gossip/comm.(*connectionStore).shutdown()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/comm/conn.go:160 +0x36a
 github.com/hyperledger/fabric/gossip/comm.(*commImpl).Stop()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:375 +0x206
 github.com/hyperledger/fabric/gossip/comm.(*commGRPC).Stop()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/comm/comm_test.go:152 +0x4b
 github.com/hyperledger/fabric/gossip/comm.TestMetrics()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/comm/metrics_test.go:87 +0x7bd
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162

Goroutine 680 (running) created at:
 github.com/hyperledger/fabric/gossip/comm.(*connection).serviceConnection()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/comm/conn.go:306 +0x13b
==================
--- FAIL: TestMetrics (0.43s)",,hagarm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00euv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Mar/19 10:46 PM;hagarm;https://gerrit.hyperledger.org/r/#/c/29885/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Handle couchdb crash during block commit (with postorder transactions),FAB-14511,38250,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,07/Mar/19 12:35 AM,02/Apr/19 3:49 AM,28/Oct/23 3:05 AM,02/Apr/19 3:49 AM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,"With the introduction of tokens that are implemented as post order transactions, there is a problem with couch database. Couchdb does not offer batch level commit atomicity. During a block commit, while updating state, a couchdb crash may take place. However, part of the state updates may have gone in. Upon restart, when a post order transaction executes, it is sort of running against the wrong world state and would lead to a different (and wrong) results.

With the endorser transactions, we manage the statedb recovery during start with just the validation flag since writes were already part of the transaction present in the block. However, with the presence of post order transactions, the writes are generated during commit based on the world state managed in the statedb.

In order to recover the statedb in this case, we need to persists writes on a stable storage before applying to couchdb (sort of redo logs).",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00evb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Persist and use redorecord for update batch,FAB-14512,38251,38250,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,07/Mar/19 12:42 AM,09/Mar/19 2:44 AM,28/Oct/23 3:05 AM,09/Mar/19 2:44 AM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00evj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Mar/19 12:48 AM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/29891/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric performance improvements - v2.x,FAB-14513,38252,,Epic,In Progress,FAB,Fabric,software,denyeart,,,Medium,,,denyeart,denyeart,07/Mar/19 12:43 AM,02/Sep/20 12:49 AM,28/Oct/23 3:05 AM,,,,,,,v2.0.0,,,,,,,,,4,performance,,,,"Epic to serve as an umbrella for various v2.x performance improvements.

Various performance studies have been undertaken with Fabric v1.x:
 [https://arxiv.org/abs/1801.10228]
 [https://arxiv.org/abs/1805.11390] 
 [https://arxiv.org/abs/1901.00910]
  
 Some of the improvements have already been made in the v1.x epic, next set of improvements will be made for v2.x.",,baohua,denyeart,Hangyu_FJH,knagware9,logannwu,robmurgai,xixuejia,ymlbright,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6421,FAB-12221,,,FAB-12279,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,State database cache merged (CouchDB),See performance studies in description.,Available,Unset,Not Required,ghx-label-13,,Fabric performance improvements - v2.x,To Do,No,,Required,No,,,"1|i00evr:",,,,No,Not Required,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,denyeart,Hangyu_FJH,knagware9,logannwu,robmurgai,xixuejia,ymlbright,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Optimize and persist redo record only if updates contain post order generated writes,FAB-14514,38253,38250,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,07/Mar/19 12:44 AM,02/Apr/19 3:49 AM,28/Oct/23 3:05 AM,02/Apr/19 3:49 AM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00evz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Mar/19 10:18 AM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/29891/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Encapsulate Fabric GO SDK,FAB-14515,38255,36696,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bpbuch,bpbuch,bpbuch,07/Mar/19 2:01 AM,04/Apr/19 11:32 PM,28/Oct/23 3:05 AM,04/Apr/19 11:32 PM,,,,,,,,,,,,,,,0,,,,,The Fabric GO SDK should be encapsulated to provide a common package for commands to initialize clients.  This will also serve as an entry point for a future daemon implementation.,,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ewf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/19 3:37 AM;bpbuch;https://gerrit.hyperledger.org/r/#/c/30555/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use a common terminal utility,FAB-14516,38256,38927,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Low,,,bpbuch,bpbuch,07/Mar/19 2:14 AM,02/Apr/19 5:52 AM,28/Oct/23 3:05 AM,,,,,,,,,,,,,,,,0,,,,,"Commands will receive data or write data using the terminal.  A utility that defines common UI/UX should be implemented to improve ease of use.  

Common display options:
* Text
* Table
* Lists
* Nested Lists
* Loading indicator",,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ewn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer CLI: Add ability to supply channel config policy reference,FAB-14517,38257,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,07/Mar/19 3:34 AM,30/Mar/19 5:44 AM,28/Oct/23 3:05 AM,30/Mar/19 5:44 AM,,,,,,,,,,fabric-peer,,,,,0,,,,,"The CLI currently only supports signature policies when it should support both signature policies and channel config policy references. 

 

Create new flags ""signature-policy"" and ""channel-config-policy"" (and remove the old, generic ""policy"" flag). ",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00ewv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Mar/19 4:46 AM;wlahti;https://gerrit.hyperledger.org/r/c/29901/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cleanup init functions for lifecycle,FAB-14518,38259,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,07/Mar/19 6:51 AM,08/Mar/19 3:10 AM,28/Oct/23 3:05 AM,08/Mar/19 3:10 AM,,,,,,v2.0.0,,,,fabric-peer,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,FAB-14438,FAB-9168,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00exb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stop hard-coding peers for commit and init steps,FAB-14519,38260,36525,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,07/Mar/19 7:37 AM,08/Mar/19 3:24 AM,28/Oct/23 3:05 AM,08/Mar/19 3:24 AM,,,,,,,,,,fabric-peer,,,,,0,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00exj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Mar/19 11:57 AM;wlahti;https://gerrit.hyperledger.org/r/c/29915/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestPluginLoadingFailure observed in unit-tests,FAB-14520,38261,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,07/Mar/19 9:58 AM,19/Mar/19 8:12 PM,28/Oct/23 3:05 AM,14/Mar/19 5:09 AM,v2.0.0,,,,,,,,,fabric-common,,,,,0,ci-failure,,,,"The unit-tests are failing intermittently with TestPluginLoadingFailure, panic error observed as could not load msp config

*Intermittent:* Yes
*Branch:* master
*Platform:* x86_64
*Error Snippet:*

{code:java}
16:24:42 --- FAIL: TestPluginLoadingFailure (14.25s)
16:24:42     <autogenerated>:1: 
16:24:42         Got stuck at:
16:24:42             panic: Could not load msp config, err Error obtaining DevConfigDir: 
16:24:42             
16:24:42             goroutine 1 [running]:
16:24:42             github.com/hyperledger/fabric/common/ledger/testutil.init.0()
16:24:42             	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/ledger/testutil/test_helper.go:35 +0x15b
16:24:42             
16:24:42         Waiting for:
16:24:42             panic: Error opening plugin at path testdata/invalid_plugins/invalidplugin.so
16:24:42     --- FAIL: TestPluginLoadingFailure/ENDORSERS_ESCC (0.12s)
16:24:42         testing.go:782: test executed panic(nil) or runtime.Goexit: subtest may have called FailNow on a parent test
16:24:42 FAIL
16:24:42 coverage: 0.0% of statements
16:24:42 FAIL	github.com/hyperledger/fabric/peer	14.790s
{code}

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/10123/",,aambati,C0rWin,denyeart,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,da323fd773a17cc6774e9179d394438641ce7a96,Unset,No,,,"1|i00exr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),aambati,C0rWin,denyeart,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Get protos in sync,FAB-14521,38263,38259,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,07/Mar/19 11:53 AM,08/Mar/19 3:10 AM,28/Oct/23 3:05 AM,08/Mar/19 3:10 AM,,,,,,,,,,,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ey7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update SoftHSM version for macOS,FAB-14523,38267,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,07/Mar/19 6:27 PM,16/Mar/19 12:47 AM,28/Oct/23 3:05 AM,16/Mar/19 12:47 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,"The FindPKCS11Lib() function currently looks for softhsm 2.1.0 on macOS.
This is no longer available.  Current version is 2.5.0",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00eyv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Mar/19 6:34 PM;mastersingh24;https://gerrit.hyperledger.org/r/29922;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration test for Rollback from a misconfigured etcd/raft cluster ,FAB-14526,38270,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,tock,tock,tock,07/Mar/19 8:10 PM,04/Apr/19 4:44 PM,28/Oct/23 3:05 AM,04/Apr/19 4:39 PM,,,,,,,,,,,,,,,0,,,,,,,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ezj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/19 4:44 PM;tock;Switching to alternative  migration design - v2;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
release chores for fabric-chaincode-node v1.4.x,FAB-14528,38272,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,mbwhite,mbwhite,07/Mar/19 8:21 PM,30/Aug/19 1:29 AM,28/Oct/23 3:05 AM,30/Aug/19 1:29 AM,,,,,,,,,,,,,,,0,,,,,"Updates, changes, and fixes that are 'chores'

Items needed to maintain the infrastructure and quality of the code.

Items do not affect the function, rather our ability to delivery quality function",,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,ghx-label-5,,fabric-chaincode-node release chores (v1.4x),To Do,No,,Unset,No,,,"1|i00ezz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Production compilation optimization,FAB-14530,38274,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,Tecnalia,Tecnalia,07/Mar/19 8:58 PM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,v1.4.0,,,,,,,,,fabric-build,fabric-ca,,,,0,stale-item,,,,"Since, we are at v1.4, and this was introduced as 'production' release (or at least closer than previous releases) we have to compile our Fabric binaries for production too. This involves that, when compiling with GO, we must take into account the following details:
 * Compile binaries without DWARF debugging information. We can *use the [{{-s}} and {{-w}} linker flags|https://golang.org/cmd/link/]* to strip the debugging info
 * We may also want to use UPX style packers too

Check out this post for better understanding: [https://blog.filippo.io/shrink-your-go-binaries-with-this-one-weird-trick/]

 ",,sykesm,Tecnalia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00f0f:",,,,No,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),sykesm,Tecnalia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extend fabric-samples first-network etcd/raft to 5 nodes,FAB-14531,38275,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,07/Mar/19 9:55 PM,15/Apr/19 5:53 PM,28/Oct/23 3:05 AM,15/Apr/19 5:53 PM,,,,,,,,,,,,,,,0,,,,,"Extend the 3-node etcd/raft cluster in BYFN to 5 nodes, in order to better support the documentation effort. This will allow users to experiment creating channels with less then 5 nodes, but avoid the pitfalls of a 2-node cluster.

 ",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00f0n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update low level FabCar sample to use BYFN instead of basic-network,FAB-14532,38277,35374,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sstone1,sstone1,sstone1,07/Mar/19 11:20 PM,30/Jul/19 10:02 PM,28/Oct/23 3:05 AM,30/Jul/19 10:02 PM,,,,,,,,,,,,,,,0,,,,,,,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00f13:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sstone1,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Mar/19 11:50 PM;sstone1;https://gerrit.hyperledger.org/r/29934 (master);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Regression calling configtxlator is not reporting batch timeout,FAB-14534,38279,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,jyellick,rickr,rickr,07/Mar/19 11:45 PM,20/Mar/19 3:43 PM,28/Oct/23 3:05 AM,08/Mar/19 9:35 PM,v2.0.0,,,,,v2.0.0,,,,,,,,,0,,,,,"The JSDK test have a config block with a Batch timeout of 2s 
The sdk updates that to 5s in : 

https://github.com/hyperledger/fabric-sdk-java/blob/dbc41c1a119f9567ec7b39d972663813c45e0d04/src/test/java/org/hyperledger/fabric/sdkintegration/UpdateChannelIT.java#L144

This is now not found  https://ctrlv.it/id/166976/3139891254

This is working in v1.4 build and on my local older v2.0 build.",,rickr,,,,,,,,,,,,,,,,,,,,,,,,FAB-14551,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00f1j:",,,,Unset,Unset,,,,,,Unset,,,,,,Unset,,Unset,,(Please add usage information),rickr,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clarify private data conceptual documentation,FAB-14536,38281,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,08/Mar/19 12:21 AM,08/Mar/19 1:07 AM,28/Oct/23 3:05 AM,08/Mar/19 1:07 AM,,,,,,v1.4.1,v2.0.0,,,fabric-docs,,,,,0,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00f1z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Mar/19 12:29 AM;denyeart;[https://gerrit.hyperledger.org/r/#/c/29936/]

https://gerrit.hyperledger.org/r/#/c/29937/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
GetCCHandlerKey is dead code,FAB-14538,38283,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,sykesm,sykesm,sykesm,08/Mar/19 1:38 AM,09/Mar/19 2:28 AM,28/Oct/23 3:05 AM,09/Mar/19 2:28 AM,,,,,,,,,,,,,,,0,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00f2f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Mar/19 2:28 AM;sykesm;Looks like this is being addressed as part of the lifecycle work.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support cert rotation in single config tx,FAB-14539,38284,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,08/Mar/19 1:40 AM,17/Mar/19 8:55 PM,28/Oct/23 3:05 AM,17/Mar/19 8:55 PM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,,,,,"If a config tx adds and removes 1 node, it should be considered to be cert rotation therefore allowed and supported.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14540,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00f2n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Mar/19 1:42 AM;guoger;https://gerrit.hyperledger.org/r/#/c/29943/ is pushed to release-1.4, and should be forward-ported to master once merged;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Leader should yield if its cert is being rotated before configuring communication,FAB-14540,38285,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,08/Mar/19 1:46 AM,21/Mar/19 10:32 PM,28/Oct/23 3:05 AM,21/Mar/19 10:32 PM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,raft,,,,"This is to proactively transfer leadership to avoid failover, which results in leaderless period.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14539,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00f2v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Mar/19 7:02 PM;guoger;https://gerrit.hyperledger.org/r/c/29954;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode upgrade fails intermittently for Org 3 peers in Node chaincode test,FAB-14541,38288,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,08/Mar/19 4:04 AM,18/Apr/19 10:32 PM,28/Oct/23 3:05 AM,18/Apr/19 10:32 PM,v2.0.0,,,,,,,,,fabric-samples,,,,,0,ci-flake,,,,"Chaincode upgrade is failing  in the BYFN Node Chaincode tests intermittently for Org3 peers with Npm error,

*Branch:* master
*Platform:* x86_64
*Error Snippet:*

{code:java}
19:09:19 npm ERR! Failed at the x509@0.3.3 install script.
19:09:19 npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
19:09:19 
19:09:19 npm ERR! A complete log of this run can be found in:
19:09:19 npm ERR!     /root/.npm/_logs/2019-03-07T00_09_18_313Z-debug.log
19:09:19 ""
19:09:19 + res=1
19:09:19 + set +x
19:09:19 [34m2019-03-07 00:09:05.668 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 001[0m Using default escc
19:09:19 [34m2019-03-07 00:09:05.668 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 002[0m Using default vscc
19:09:19 [34m2019-03-07 00:09:05.675 UTC [chaincodeCmd] submitInstallProposal -> INFO 003[0m Installed remotely: response:<status:200 payload:""OK"" > 
19:09:19 !!!!!!!!!!!!!!! Chaincode upgrade on peer0.org1 has failed !!!!!!!!!!!!!!!!
19:09:19 ========= ERROR !!! FAILED to execute End-2-End Scenario ===========
19:09:19 
19:09:19 ERROR !!!! Unable to add Org3 peers on network
{code}

*Build Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-end-2-end-daily-master-x86_64/54/",,denyeart,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,f21d18014b1fd45a27f83955eef07316c014a184,Unset,No,,,"1|i00f3j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Mar/19 10:50 PM;denyeart;From Sambhav: it's intermittent and I have seen it pass at times.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"When leader is removed from network, it should yield leadership first before stop",FAB-14543,38299,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,08/Mar/19 7:05 PM,09/Jul/19 11:06 PM,28/Oct/23 3:05 AM,09/Jul/19 11:06 PM,,,,,,v2.0.0,,,,,,,,,0,ipm,raft,,,"If the removal of leader would cause the loss of quorum, raft protocol requires it to be connected after the removal, until other nodes commit this conf change. For more details, see Raft thesis 4.2.2 section.

when leader is being removed in a 2-node cluster, if communication leader is reconfigured too early before follower commits the config change, the system non-functional, even after reboot (because ex-leader finds it self not among consenters, therefore not started).

We should do following:
- On leader: transfer leadership when leader is removed/rotated, this should be retried till success. (It cannot service channel during/after this transition anyway)
- On Follower: wait for leadership transfer for a period of time, and configure communication. (it's fine not to wait indefinitely on followers, because at this point, it already picks up the config change
- When an orderer is started, it should still start the raft chain even if it's not among consenter set, when the last block is config block and removes itself.

First two are easy, but the third changes bootstrap logic considerably. Short term solution would be tackling FAB-14714",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00f5r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Mar/19 4:38 PM;guoger;review starts from https://gerrit.hyperledger.org/r/c/fabric/+/31974;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Advanced Commercial Paper - Documentation,FAB-14545,38301,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,Jakeeyturner,Jakeeyturner,08/Mar/19 11:43 PM,23/Jan/20 7:33 AM,28/Oct/23 3:05 AM,23/Jan/20 7:33 AM,,,,,,,,,,fabric-samples,,,,,0,stale-item,,,,"High-level epic to cover the documentation for the Advanced Commercial Paper sample

 ",,divina10,Jakeeyturner,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13844,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,ghx-label-9,,Advanced Commercial Paper - Documentation,To Do,No,,Unset,No,,,"1|i00f67:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),divina10,Jakeeyturner,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:33 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Advanced Commercial Paper - Tutorial,FAB-14546,38302,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,Jakeeyturner,Jakeeyturner,08/Mar/19 11:52 PM,23/Jan/20 7:29 AM,28/Oct/23 3:05 AM,23/Jan/20 7:29 AM,,,,,,,,,,fabric-samples,,,,,0,stale-item,,,,"This issue tracks the work for a Advanced Commercial Paper tutorial.

This tutorial should run through the Advanced Commercial Paper sample contract and applications.",,divina10,Jakeeyturner,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14545,,,No,,Unset,No,,,"1|i00f6f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),divina10,Jakeeyturner,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:29 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Advanced Commercial Paper - Contract,FAB-14547,38303,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,SamRasha,Jakeeyturner,Jakeeyturner,09/Mar/19 12:00 AM,23/Jan/20 7:33 AM,28/Oct/23 3:05 AM,23/Jan/20 7:33 AM,,,,,,,,,,fabric-samples,,,,,1,stale-item,,,,"This epic tracks the development of the Advanced Commercial Paper TypeScript contract.

 ",,frbrkoala,Jakeeyturner,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13844,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,ghx-label-11,,Advanced Commercial Paper - Contract,To Do,No,,Unset,No,,,"1|i00f6n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),frbrkoala,Jakeeyturner,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Mar/19 4:20 PM;frbrkoala;Some more requirements based on discussions last week:
 * Role-based access control to transactions and assets. Ideally similar to the functions that were available in Composer.
 * Sample code with token lifecycle features. This can be Account-based for now and converted to fabtoken later once it will be available.
 * API to create MVCC read conflict tolerant data structures. See more here: [https://github.com/hyperledger/fabric-samples/tree/release/high-throughput] 
 * Caching for WorldState queries/updates. Sometimes when the algorithm requires to update an asset multiple times across many functions, it's handy to keep it a temporary map object. This can be built into the API that is manipulating the contract object.
 * JSON documents parsing (for Golang-based implementation) and validation. In our current project we are implementing input data with JSON schemas and open source libraries that already exist for that purpose.
 * Include in samples examples for writing unit testing and supporting TDD (test driven development).;;;","23/Jan/20 7:33 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Advanced Commercial Paper - Application,FAB-14548,38304,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,SamRasha,Jakeeyturner,Jakeeyturner,09/Mar/19 12:01 AM,23/Jan/20 7:33 AM,28/Oct/23 3:05 AM,23/Jan/20 7:33 AM,,,,,,,,,,fabric-samples,,,,,0,stale-item,,,,This epic tracks the development of the Advanced Commercial Paper TypeScript application.,,isaacwch,Jakeeyturner,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13844,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,ghx-label-13,,Advanced Commercial Paper - Application,To Do,No,,Unset,No,,,"1|i00f6v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),isaacwch,Jakeeyturner,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:33 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
intermittent panic in gossip/state/state_test unit test,FAB-14549,38310,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,09/Mar/19 2:46 AM,09/Apr/19 6:21 AM,28/Oct/23 3:05 AM,09/Apr/19 6:21 AM,,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"{code}
10:31:52 panic: runtime error: invalid memory address or nil pointer dereference
10:31:52 [signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xea92e2]
10:31:52 
10:31:52 goroutine 387 [running]:
10:31:52 github.com/hyperledger/fabric/gossip/state.TestGossipStateProvider_TestStateMessages.func3(0xc000255560, 0xc000139400, 0xc000559570)
10:31:52 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state_test.go:1164 +0xe2
10:31:52 created by github.com/hyperledger/fabric/gossip/state.TestGossipStateProvider_TestStateMessages
10:31:52 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state_test.go:1161 +0x250
10:31:52 FAIL	github.com/hyperledger/fabric/gossip/state	39.826s
10:31:54 ok  	github.com/hyperledger/fabric/gossip/state/mocks	0.049s
{code}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10220/console
https://gerrit.hyperledger.org/r/c/29904/",,C0rWin,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Mar/19 2:47 AM;sykesm;console-timestamp.log.gz.txt;https://jira.hyperledger.org/secure/attachment/16906/console-timestamp.log.gz.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00f87:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/19 12:26 AM;sykesm;Again?

{code}
11:02:15 2019-03-26 15:02:08.943 UTC [gossip.comm] func1 -> WARN 13d8 127.0.0.1:35739, PKIid:3132372e302e302e313a3335373339 isn't responsive: EOF
11:02:15 panic: runtime error: invalid memory address or nil pointer dereference
11:02:15 [signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xeadce6]
11:02:15 
11:02:15 goroutine 225 [running]:
11:02:15 github.com/hyperledger/fabric/gossip/state.TestGossipStateProvider_TestStateMessages.func2(0xc00041f680, 0xc000137200, 0xc0001d7c70)
11:02:15 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state_test.go:1154 +0xd6
11:02:15 created by github.com/hyperledger/fabric/gossip/state.TestGossipStateProvider_TestStateMessages
11:02:15 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state_test.go:1151 +0x214
11:02:15 FAIL	github.com/hyperledger/fabric/gossip/state	34.525s
11:02:17 ok  	github.com/hyperledger/fabric/gossip/state/mocks	0.019s	coverage: 58.8% of statements
11:02:23 ok  	github.com/hyperledger/fabric/gossip/util	4.054s	coverage: 78.5% of statements
11:02:23 Makefile:196: recipe for target 'unit-test' failed
{code}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10900/console;;;","27/Mar/19 6:39 PM;C0rWin; https://gerrit.hyperledger.org/r/30454 this suppose to add more information so it will be possible to explore the failure.;;;","08/Apr/19 6:03 AM;C0rWin;https://gerrit.hyperledger.org/r/30798 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Fix across channel concurrency issue,FAB-14550,38311,39734,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,manish-sethi,manish-sethi,09/Mar/19 2:56 AM,09/May/19 9:19 PM,28/Oct/23 3:05 AM,,,,,,,,,,,,,,,,0,,,,,https://gerrit.hyperledger.org/r/#/c/29468/8/core/chaincode/lifecycle/cache.go@53,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00f8f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to have Org3 peers join network in BYFN Default Channel.,FAB-14551,38312,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,jyellick,sambhavdutt,sambhavdutt,09/Mar/19 4:02 AM,19/Mar/19 8:13 PM,28/Oct/23 3:05 AM,14/Mar/19 4:20 AM,v2.0.0,,,,,v2.0.0,,,,fabric-samples,,,,,0,ci-failure,,,,"The Org3 peers are not able to join the channel, failed to fetch config block from orderer,

*Consistent:* Yes
 *Branch:* master
 *Platform:* x86_64, s390x
 *Error Snippet:*
{code:java}
13:03:33 ========= Getting Org3 on to your first network ========= 
13:03:33 
13:03:33 Fetching channel config block from orderer...
13:03:33 + peer channel fetch 0 mychannel.block -o orderer.example.com:7050 -c mychannel --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
13:03:34 + res=1
13:03:34 + set +x
13:03:34 [34m2019-03-08 18:03:33.983 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
13:03:34 [34m2019-03-08 18:03:33.988 UTC [cli.common] readBlock -> INFO 002[0m Got status: &{FORBIDDEN}
13:03:34 Error: can't read the block: &{FORBIDDEN}
13:03:34 !!!!!!!!!!!!!!! Fetching config block from orderer has Failed !!!!!!!!!!!!!!!!
13:03:34 ========= ERROR !!! FAILED to execute End-2-End Scenario ===========
13:03:34 
13:03:34 ERROR !!!! Unable to have Org3 peers join network
{code}
*Build Log*

[https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-end-2-end-daily-master-s390x/55/]",,jyellick,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14534,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No, ed0f1cc,Unset,No,,,"1|i00f8n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,sambhavdutt,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Mar/19 10:10 AM;jyellick;I suspect this is a duplicate of https://jira.hyperledger.org/browse/FAB-14534 which has been merged, [~sambhavdutt] can you confirm?;;;","11/Mar/19 9:06 PM;sambhavdutt;[~jyellick]

I think this one is different,(please correct me if wrong)the BYFN tests are successful for the default channel, this is happening during the config update in Org 3
{code:java}
19:53:03 [34m2019-03-10 23:53:03.638 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
19:53:03 Error: got unexpected status: BAD_REQUEST -- error authorizing update: ConfigUpdate for channel '' but envelope for channel 'mychannel'
{code}
and after this,
{code:java}
19:53:08 ========= Getting Org3 on to your first network ========= 
19:53:08 
19:53:08 Fetching channel config block from orderer...
19:53:08 + peer channel fetch 0 mychannel.block -o orderer.example.com:7050 -c mychannel --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
19:53:08 + res=1
19:53:08 + set +x
19:53:08 [34m2019-03-10 23:53:08.895 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
19:53:08 [34m2019-03-10 23:53:08.908 UTC [cli.common] readBlock -> INFO 002[0m Got status: &{FORBIDDEN}
19:53:08 Error: can't read the block: &{FORBIDDEN}
19:53:08 !!!!!!!!!!!!!!! Fetching config block from orderer has Failed !!!!!!!!!!!!!!!!
19:53:08 ========= ERROR !!! FAILED to execute End-2-End Scenario ===========

{code}
*Console log*

[https://jenkins.hyperledger.org/view/Daily/job/fabric-end-2-end-daily-master-x86_64/59/console];;;","12/Mar/19 1:36 AM;jyellick;{noformat}19:53:03 ========= Submitting transaction from a different peer (peer0.org2) which also signs it ========= 
19:53:03 
19:53:03 + peer channel update -f org3_update_in_envelope.pb -c mychannel -o orderer.example.com:7050 --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
19:53:03 [34m2019-03-10 23:53:03.638 UTC [channelCmd] InitCmdFactory -> INFO 001[0m Endorser and orderer connections initialized
19:53:03 Error: got unexpected status: BAD_REQUEST -- error authorizing update: ConfigUpdate for channel '' but envelope for channel 'mychannel'
19:53:03 + set +x
{noformat}

This is the actual error.  The channel is not modified, likely because the config update is corrupted, because of the bad level of configtxlator. (So I would maintain, I think this is likely a dup of FAB-14534 ).;;;","12/Mar/19 1:38 AM;jyellick;I'd also note this is yet another one which https://jira.hyperledger.org/browse/FAB-14325 I think would have helped us catch the underlying cause of more quickly.;;;","14/Mar/19 3:01 AM;jyellick;In review via  https://gerrit.hyperledger.org/r/30067;;;",,,,,,,,,,,,,,,,,,,,,,,,
Duplicate word typo in error messages,FAB-14552,38313,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,nnao,nnao,nnao,09/Mar/19 4:06 AM,04/Jun/19 5:14 AM,28/Oct/23 3:05 AM,04/Jun/19 5:14 AM,v2.0.0,,,,,v2.0.0,,,,,,,,,0,,,,,"Some error messages have duplicate words such as
 - as
 - from
 - before

{code:java}
ubuntu@localhost:~/src/fabric$ grep -r "" as as ""
 core/ledger/pvtdatastorage/store_impl.go: return &ErrIllegalCall{`A pending batch exists as as result of last invoke to ""Prepare"" call.
 ubuntu@localhost:~/src/fabric$ grep -r "" from from ""
 core/scc/lscc/lscc.go: return fmt.Errorf(""nil deployment spec from from the CC package"")
 ubuntu@localhost:~/src/fabric$ grep -r "" before before ""
 core/chaincode/handler_test.go: It(""returns an error before before timing out"", func()
{code}",,nnao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,2a11adcfa08b83a72cbb4254a3231f7acd900a57,Unset,No,,,"1|i00f8v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),nnao,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Mar/19 5:26 AM;nnao;https://gerrit.hyperledger.org/r/c/29966/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Optimize memory use for 'hash -> name reverse mapping',FAB-14553,38314,39734,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,manish-sethi,manish-sethi,09/Mar/19 5:10 AM,09/May/19 9:19 PM,28/Oct/23 3:05 AM,,,,,,,,,,,,,,,,0,,,,,"CR - https://gerrit.hyperledger.org/r/#/c/29470 ebables lifecycle cache to handle the updates on the hashed state and hence maintain a reverse mapping of `hashes (the keys in the hashed state) -> chaincode name`

The current code can be optimized in two ways
1) maintain the mapping at the global level (require change in the cleanup of entries a bit challenge - i.e., when not being used by any channel)

2) maintain only one entry per Hash(chaincodeName, sequenceNo) as opposed to for all the fields (requires change in the approve transaction such that it always includes sequence number entry at least)",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00f93:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add operation writes to block metadata,FAB-14554,38316,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,aambati,sheehan,sheehan,09/Mar/19 6:16 AM,25/Nov/20 12:32 AM,28/Oct/23 3:05 AM,25/Nov/20 12:32 AM,,,,,,v2.1.0,,,,fabric-ledger,,,,,0,,,,,"Operation writes must be applied to the world state, but must not modify the WriteSet in the block data so that the hash and signature are still valid. 

A consumer of block events may wish to know the outcome of any transaction operations. To accomplish this, operation writes can be added to BlockMetadata field in the Block message in common.proto.

 

See BlockMetadataIndex in common.proto. You can see that TRANSACTIONS_FILTER stores invalid transactions.

 

Tasks

1) Add a new field to BlockMetadataIndex that is a map of

transactionId -> final write set after operations are applied.

 

2) Ensure that any removed transactions due to invalid operations are present in TRANSACTIONS_FILTER

 

 

 ",,manish-sethi,MHBauer,sheehan,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10711,,,No,,Unset,No,,,"1|i01fvb:z",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,MHBauer,sheehan,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Nov/20 12:32 AM;manish-sethi;Closing individual tasks of the epic ""Enhanced Concurrency Control"". See epic closure comments;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ensure serialized Operation message produces same bytes across endorsers,FAB-14555,38317,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,sheehan,sheehan,sheehan,09/Mar/19 6:44 AM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,fabric-ledger,,,,,0,stale-item,,,,"The serialized operation message must produce the same bytes across endorsers.

[https://developers.google.com/protocol-buffers/docs/encoding#order]

This is likely already the case given that the Operation message from the chaincode (in Go, Java, Node, etc.) is unmarshalled on the endorser peer and always marshalled in Go before being added to the read/write/operation set.

 

Tasks

1) look in Go source for protocol buffer marshalling to ensure bytes produced are always the same.

2) do we have to be concerned about different versions of the peer. At this point, protocol buffer serializing is likely stable between versions.

3) Consider converting Operation message to DER encoded ASN.1 on the peer. 

[https://golang.org/pkg/encoding/asn1/]

We would not want to expose this API to chaincode writers, but may be ok to keep on the peer side and ensure bytes produced are always the same.

 

4) Consider custom serialization based on proto serialization rules. See FAB-11418 and FAB-11419.

 

 ",,sheehan,sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,FAB-10711,,,No,,Unset,No,,,"1|i00f9j:",,,,No,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),sheehan,sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Simplify matching condition while looking for hashed updates,FAB-14556,38319,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,manish-sethi,manish-sethi,09/Mar/19 7:28 AM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,0,stale-item,,,,https://gerrit.hyperledger.org/r/#/c/29472/13/core/chaincode/lifecycle/cache.go@127,,manish-sethi,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00f9z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
A raft orderer config update to re-add duplicate orderer was not rejected,FAB-14557,38320,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,scottz,scottz,09/Mar/19 7:43 AM,20/Mar/19 3:16 PM,28/Oct/23 3:05 AM,20/Mar/19 3:16 PM,v1.4.1,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,raft,,,,"h3. Observed:
The raft orderers orderersystemchannel accepted an update to re-add orderer5th (duplicate information) multiple successive times. A new block was added to the orderersystemchannel each time, even though we added identical information (same orderer name, port, etc) each time.

h3. Expected:
On the second and subsequent attempts, we expected the config transaction to be rejected.

h3. Attachments and Links:
Refer to timestamps from 21:53 - 22:02 when we added orderer5th-ordererorg2 the second and third time.

LogDNA: https://app.us-south.logging.cloud.ibm.com/a52748c56a/logs/view (edited) 

Prometheus URL for metrics: https://prometheus.community-svt.us-south.containers.appdomain.cloud/graph
",,bharadwajambati1,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13856,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,images from march 7th,Unset,No,,,"1|i00fa7:",,,,Unset,Unset,,,,"1. Create a network with 4 orderers and 1 channel.
2. Complete some traffic on each channel.
3. Fetch latest config block from orderer system channel.
4. Modify it to add orderer5th-ordererorg2, and submit config update.
5. Fetch latest config block from orderer system channel AGAIN.
6. Modify it to add orderer5th-ordererorg2, and submit config update.
7. Fetch latest config block from orderer system channel AGAIN.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,scottz,yacovm,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Mar/19 9:16 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/29971/;;;","15/Mar/19 10:34 PM;bharadwajambati1;Re-tested [~yacovm] fix for bug FAB-14557 and it didn't allow to add duplicate orderers to the channel

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor chaincode package,FAB-14558,38322,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,10/Mar/19 12:00 AM,09/May/19 9:51 PM,28/Oct/23 3:05 AM,09/May/19 9:51 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rq:zr",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Derive namespace id from context and not chaincode package name,FAB-14559,38323,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,10/Mar/19 12:00 AM,04/Apr/19 10:40 PM,28/Oct/23 3:05 AM,04/Apr/19 10:40 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fav:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor CCID,FAB-14560,38324,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,10/Mar/19 12:56 AM,04/Apr/19 10:40 PM,28/Oct/23 3:05 AM,04/Apr/19 10:40 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fb3:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Name/Version fields from the ChaincodeContainerInfo and InstalledChaincode structs,FAB-14561,38325,39736,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,AnilSingh,ales,ales,10/Mar/19 4:11 AM,09/May/19 10:26 PM,28/Oct/23 3:05 AM,,,,,,,v2.1.0,,,,,,,,,0,,,,,Name and version are no longer properties of a container or an installed chaincode,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fbb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
GenerateDockerfile should not set chaincode name/version,FAB-14562,38326,39736,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,AnilSingh,ales,ales,10/Mar/19 4:11 AM,09/May/19 10:26 PM,28/Oct/23 3:05 AM,,,,,,,v2.1.0,,,,,,,,,0,,,,,"core/chaincode/platforms/platforms.go has the following code
{code:java}
buf = append(buf, fmt.Sprintf(`LABEL %s.chaincode.id.name=""%s"" \`, metadata.BaseDockerLabel, name))
buf = append(buf, fmt.Sprintf(`      %s.chaincode.id.version=""%s"" \`, metadata.BaseDockerLabel, version))
{code}
to set these properties in the docker file. However, chaincode name and chaincode version are not properties of the container.",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fbj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove CORE_CHAINCODE_ID_NAME from container creation,FAB-14563,38327,39736,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,ales,ales,10/Mar/19 4:13 AM,09/May/19 9:42 PM,28/Oct/23 3:05 AM,,,,,,,v2.1.0,,,,,,,,,0,,,,,"core/chaincode/container_runtime.go has the following code

 
{code:java}
	lc.Envs = append(c.CommonEnv, ""CORE_CHAINCODE_ID_NAME=""+packageID)
{code}
which creates an environment variable called CORE_CHAINCODE_ID_NAME to store the package ID of the chaincode. That variable should be renamed

 ",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fbr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Code package retrieval does not use name/version,FAB-14564,38328,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,10/Mar/19 4:36 AM,04/Apr/19 10:41 PM,28/Oct/23 3:05 AM,04/Apr/19 10:41 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fbz:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove legacy chaincode package provider,FAB-14565,38329,,Story,To Do,FAB,Fabric,software,denyeart,,,Medium,,,ales,ales,10/Mar/19 4:43 AM,09/May/19 9:43 PM,28/Oct/23 3:05 AM,,,,,,,v2.1.0,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00fc7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode should register with its package ID,FAB-14566,38330,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,ales,ales,10/Mar/19 7:39 AM,09/May/19 9:47 PM,28/Oct/23 3:05 AM,09/May/19 9:47 PM,,,,,,v2.1.0,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14568,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fcf:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Use "":"" as a name/version separator",FAB-14567,38331,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,10/Mar/19 8:38 AM,04/Apr/19 10:42 PM,28/Oct/23 3:05 AM,04/Apr/19 10:42 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fcn:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode registry uses CCID as lookup key,FAB-14568,38332,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,10/Mar/19 9:49 AM,09/May/19 9:47 PM,28/Oct/23 3:05 AM,04/Apr/19 10:42 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,FAB-14566,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fcv:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Package ID is returned by lifecycle,FAB-14569,38334,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,10/Mar/19 6:26 PM,15/Mar/19 10:52 PM,28/Oct/23 3:05 AM,15/Mar/19 10:52 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fdb:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support ExtractStatedbArtifactsForChaincode in the new lifecycle,FAB-14570,38335,39066,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,ales,ales,10/Mar/19 6:47 PM,05/May/19 6:57 AM,28/Oct/23 3:05 AM,20/Apr/19 7:31 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,"This function
{code:java}
// ExtractStatedbArtifactsAsTarbytes extracts the statedb artifacts from the code package tar and create a statedb artifact tar.
// The state db artifacts are expected to contain state db specific artifacts such as index specification in the case of couchdb.
// This function is intended to be used during chaincode instantiate/upgrade so that statedb artifacts can be created.
func ExtractStatedbArtifactsForChaincode(ccname, ccversion string, pr *platforms.Registry) (installed bool, statedbArtifactsTar []byte, err error) {
       ccpackage, err := GetChaincodeFromFS(ccname, ccversion)
       if err != nil {
              // TODO for now, we assume that an error indicates that the chaincode is not installed on the peer.
              // However, we need a way to differentiate between the 'not installed' and a general error so that on general error,
              // we can abort the chaincode instantiate/upgrade/install operation.
              ccproviderLogger.Infof(""Error while loading installation package for ccname=%s, ccversion=%s. Err=%s"", ccname, ccversion, err)
              return false, nil, nil
       }

       statedbArtifactsTar, err = ExtractStatedbArtifactsFromCCPackage(ccpackage, pr)
       return true, statedbArtifactsTar, err
}
{code}
is problematic for the new lifecycle because it assumes that it is possible to retrieve the chaincode package directly from the file system by supplying ccname/ccversion. The new lifecycle requires one extra lookup from ccname to package identifier.",,ales,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13811,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fdj:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Mar/19 11:41 PM;wlahti;FYI, this duplicates FAB-13811.;;;","20/Apr/19 7:31 PM;ales;We've coded around that - no point in fixing that since that code will disappear;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Upgrade fabric-nodenv to Node 10 LTS,FAB-14571,38336,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,10/Mar/19 8:43 PM,06/Apr/19 4:39 AM,28/Oct/23 3:05 AM,20/Mar/19 11:59 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14716,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FABCN-2,,,No,,Unset,No,,,"1|i00fdr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,release-2.4,purge-pd,main-emeritius,main,correct-nodeenv-version,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Mar/19 8:59 PM;mastersingh24;https://gerrit.hyperledger.org/r/29982;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove name/version from InstallChaincodeArgs,FAB-14572,38338,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,ales,ales,10/Mar/19 11:07 PM,16/Mar/19 3:57 AM,28/Oct/23 3:05 AM,16/Mar/19 3:57 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fe7:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
InstallChaincodeResult should return a packageID,FAB-14573,38339,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,ales,ales,10/Mar/19 11:07 PM,16/Mar/19 3:56 AM,28/Oct/23 3:05 AM,16/Mar/19 3:56 AM,,,,,,,,,,,,,,,0,,,,,"As part of the work of this CR (which is self-descriptive), we should also fix the note in https://gerrit.hyperledger.org/r/#/c/29985/8/core/cclifecycle/subscription.go@89",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fef:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
QueryInstalledChaincodeArgs should not have name/version but it should have label,FAB-14574,38340,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,ales,ales,10/Mar/19 11:09 PM,15/Mar/19 11:19 PM,28/Oct/23 3:05 AM,15/Mar/19 11:19 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14575,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fen:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rework QueryInstalledChaincode,FAB-14575,38341,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,ales,ales,10/Mar/19 11:10 PM,19/Mar/19 11:00 PM,28/Oct/23 3:05 AM,19/Mar/19 5:33 AM,,,,,,,,,,,,,,,0,,,,,"# Address [https://gerrit.hyperledger.org/r/#/c/29985/8/core/chaincode/lifecycle/lifecycle.go]
 # Return label",,ales,,,,,,,,,,,,,,,,,,,,,,,,FAB-14574,FAB-14681,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fev:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor chaincode persistence,FAB-14576,38344,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,11/Mar/19 12:07 AM,16/Mar/19 11:05 PM,28/Oct/23 3:05 AM,16/Mar/19 11:05 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ffj:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
go version check does not allow experimentation with newer go versions,FAB-14577,38347,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,11/Mar/19 6:58 AM,20/Mar/19 3:40 PM,28/Oct/23 3:05 AM,12/Mar/19 4:48 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,"FAB-10416 forces the all builds to be done with the same go release (ignores patch) that’s called out in ci.properties. This does not allow those with newer, compatible versions of go to build the tree.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14582,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ffz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Mar/19 7:02 AM;sykesm;https://gerrit.hyperledger.org/r/29986;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Decide on the default value for MaxInflightMsgs & MaxMessageCount,FAB-14578,38350,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,guoger,guoger,11/Mar/19 3:25 PM,12/Mar/19 4:11 AM,28/Oct/23 3:05 AM,12/Mar/19 4:11 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,"Note that blocks are optimistically created, which is much faster than consensus.

A big number gives us better throughput.

However, if leader crashes, this also means that more transactions are likely to be lost.

We need to have a sane default value.

Some simple benchmark result to help with decision making:
h4. Test env:
5 orderer procs running locally via integration test. {{MaxMessageCount = 10}}, single channel. 5 client threads per orderer, 10000 tx in total.
h4. Measurement:
time between the *beginning of traffic* and *receipt of block 1000 from leader*
h4. Result:
MaxInflightMsgs = 10, Duration = 13.2s
MaxInflightMsgs = 128, Duration = 3.7s
MaxInflightMsgs = 256, Duration = 2.9s",,guoger,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fgn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,yacovm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Mar/19 3:26 PM;guoger;cc [~yacovm] [~jyellick];;;","11/Mar/19 5:00 PM;guoger;with {{MaxMessageCount = 500}}, difference in {{MaxInflightMsgs}} doesn't have much impact on result. (still running locally on OSX);;;","11/Mar/19 5:28 PM;yacovm;I think it shouldn't be a high value. I'd say even 5 suffices. Moreover, if we pour too many blocks into the network, we might overflow the leader's egress buffers and it would start dropping messages. Ultimately, having too many outstanding blocks i*n the transmission buffers* isn't a good thing in my opinion.;;;","11/Mar/19 10:27 PM;yacovm;[https://gerrit.hyperledger.org/r/#/c/29996/]

https://gerrit.hyperledger.org/r/#/c/29997/;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Integration test for equal Raft metadata check before commit,FAB-14579,38351,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,tock,tock,tock,11/Mar/19 5:43 PM,04/Apr/19 4:46 PM,28/Oct/23 3:05 AM,04/Apr/19 4:46 PM,,,,,,,,,,,,,,,0,,,,,,,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fgv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/19 4:45 PM;tock;Switching to alternative  migration design - v2;;;","04/Apr/19 4:46 PM;tock;Switching to alternative  migration design - v2;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
The fabric docs has some error.,FAB-14580,38353,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,TopJohn,TopJohn,TopJohn,11/Mar/19 7:35 PM,23/Mar/19 2:47 AM,28/Oct/23 3:05 AM,23/Mar/19 2:47 AM,,,,,,v1.4.1,v2.0.0,,,fabric-docs,,,,,0,Documentation,,,,"The fabric docs has some error:

 /docs/sources/Gerrit/best-practices.rst has some error,and miss some code.

 

private-data-arch.rst 

Private collection data can be queried just like normal channel data, using shim APIs:

should be Private data collection at line 214.",,TopJohn,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fhb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),TopJohn,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
FabToken Sample,FAB-14581,38356,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,angelo.decaro,angelo.decaro,angelo.decaro,11/Mar/19 9:32 PM,13/Jan/20 11:41 PM,28/Oct/23 3:05 AM,13/Jan/20 11:41 PM,,,,,,Future,,,,fabric-token,,,,,0,fabtoken,,,,"The goal is to provide a sample network, like the one used in the *first network* example, where to use how to use the Token CLI to drive fabtoken.",,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i00fhz:",,,,No,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Mar/19 9:34 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/29874/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Go version check script is too restrictive,FAB-14582,38357,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,lehors,lehors,lehors,11/Mar/19 10:26 PM,12/Mar/19 6:47 AM,28/Oct/23 3:05 AM,12/Mar/19 6:47 AM,,,,,,,,,,fabric-build,,,,,0,,,,,"In response to FAB-10416 a script was added to check that the Go version being used is supported but the check wants the exact same major version when it should merely check for a recent enough version, allowing for newer one. Although possible, it is unlikely that a newer version will be backwards incompatible and prevent building successfully.

This makes the build unnecessarily fail using go1.12:
{code:java}
$ make
ERROR: go1.11.x is required to build Fabric. Please update your Go installation: https://golang.org/dl/
make: *** [check-go-version] Error 2
$ go version
go version go1.12 darwin/amd64{code}",,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-10416,FAB-14577,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,a680214fd4,Unset,No,,,"1|i00fi7:",,,,Unset,Unset,,,,"Install Go1.12
Run make
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move non-linked packages to internal,FAB-14583,38358,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,12/Mar/19 12:46 AM,29/Oct/19 12:01 AM,28/Oct/23 3:05 AM,29/Oct/19 12:01 AM,v2.0.0,,,,,,,,,,,,,,0,ipm,,,,,,btl5037,ChristopherFerris,mastersingh24,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r7u:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,ChristopherFerris,mastersingh24,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/19 3:52 AM;troyronda;Is there a description of the rationale and scope of these internalization changes, along with an anticipated roadmap? Those, like us, who have created customized peers are being impacted; this is something we've been doing since early in our usage of Fabric.  Do you plan to allow for a modular usage of the peer libraries, such that a developer could re-use the Fabric codebase to build customized peers?;;;","02/Apr/19 6:15 AM;ChristopherFerris;[~sykesm] ^^^;;;","03/Apr/19 11:52 PM;mastersingh24;The rationale is quite simple:  fabric is not a library or set of libraries.  It was never designed to be and certainly is not currently structured as such.   We should never even have allowed vendoring of bccsp by other projects.   The way we handle chaincode shim today is also very problematic (being addressed separately).  The peer does support a few plug points via Go plugins with defined interfaces and surface exposure.  We will likely need to improve these in 2.0.0 as well.

If there are other things that people desire to have as externally linkable packages, we can discuss but it needs to be done correctly.;;;","29/Oct/19 12:01 AM;sykesm;There's some disagreement about this intent, scope, and benefit of this work.;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Move peer to internal,FAB-14584,38359,38358,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,12/Mar/19 12:48 AM,15/Mar/19 10:49 PM,28/Oct/23 3:05 AM,15/Mar/19 10:49 PM,,,,,,,,,,,,,,,0,,,,,Move the command line interface to cmd and its dependencies to internal,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fif:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move core/peer to internal,FAB-14585,38360,38358,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,ajp,btl5037,btl5037,12/Mar/19 12:49 AM,13/Jan/20 11:34 PM,28/Oct/23 3:05 AM,13/Jan/20 11:34 PM,,,,,,,,,,,,,,,0,,,,,,,btl5037,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fin:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/19 4:21 AM;troyronda;There are several important functions within core/peer for usage by certain filters and SCC plugins. 

Some of these functions are providing access to package-level objects. In particular ""var chains""  (https://github.com/hyperledger/fabric/blob/master/core/peer/peer.go#L199) accessed by using: 
* GetLedger (https://github.com/hyperledger/fabric/blob/master/core/peer/peer.go#L479)
* GetChannelConfig(L5012)
* GetStableChannelConfig (L490)
* GetPolicyManager (L512)
* Various wrappers of the above, etc.

As with my comment in FAB-14583, I'm also curious about the roadmap of these refactoring tickets and how it might impact a possible future where we could have a more module-based build of a peer (allowing for customized/extended peers from a common base).;;;","04/Apr/19 12:22 AM;troyronda;[~ChristopherFerris] [~sykesm] [~mastersingh24] ^^^;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Broken link in Chaincode for Developers tutorial Encc Example,FAB-14586,38361,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,pandrejko,pandrejko,12/Mar/19 1:49 AM,07/Jan/20 6:59 AM,28/Oct/23 3:05 AM,07/Jan/20 6:59 AM,v1.2.0,v1.3.0,v1.4.0,,,,,,,fabric-docs,,,,,0,,,,,"Under Chaincode encryption, this link no longer works

 

For more information and samples, see the [Encc Example|https://github.com/hyperledger/fabric/tree/master/examples/chaincode/go/enccc_example] within the {{fabric/examples}} directory.",,ales,lehors,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:i",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,lehors,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Mar/19 1:50 AM;pandrejko;[~ales] Would you know what the link should be updated to?

 ;;;","12/Apr/19 11:04 PM;ales;I think it just disappeared... we should just probably remove the whole mention of this sample?;;;","12/Apr/19 11:07 PM;ales;[~lehors] moved stuff around, maybe he knows where the sample ended up :);;;","12/Apr/19 11:32 PM;lehors;Indeed, I know where it went! :)

This is part of the samples that I took on to move from the fabric repo to the fabric-samples repo. The change therefore involved two different CRs: one that removed samples from fabric and one that added them back to fabric-samples. The first one was accepted and merged, but the second one was blocked by [~mastersingh24] on the basis that we did not have adequate support for those samples. So, my CR stayed in limbo for a while and I eventually abandoned it (see [https://gerrit.hyperledger.org/r/#/c/28887/])

But Gari had said he was blocking it ""for now"". So, he might be open to adding the Encc sample. If that were the case I'd be happy to resubmit a CR for that.

 ;;;","12/Apr/19 11:44 PM;ales;Ah great, thanks for the explanation [~lehors]. [~mastersingh24], what do you think? Should we restore the enccc sample so that Pam can rebuild the link or should we just remove the link altogether and any mention of enccc?;;;","07/Jan/20 6:57 AM;pandrejko;Content was removed from /master branch and updated in the release-1.4 branch. Closing.

release 1.4 PR: https://github.com/hyperledger/fabric/pull/451#event-2922957038;;;",,,,,,,,,,,,,,,,,,,,,,,
Unable to add new org to existing channel with new lifecycle,FAB-14587,38363,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,latitiah,latitiah,12/Mar/19 2:55 AM,20/Mar/19 3:15 PM,28/Oct/23 3:05 AM,20/Mar/19 3:15 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,"This test was executed using the behave framework in fabric-test.

When adding a new (3rd) org to an existing channel, the new org is failing to endorse the new policy during the approval step.
{code}\x1b[34m2019-03-11 13:48:44.880 UTC [chaincodeCmd] ClientWait -> INFO 001\x1b[0m txid [a645a928ff9f5a5b216abdb0cd99fbe544de8193bdbf5a4bdade864511c5376e] committed with status (ENDORSEMENT_POLICY_FAILURE) at peer1.org3.example.com:7051
\x1b[34m2019-03-11 13:48:44.885 UTC [chaincodeCmd] ClientWait -> INFO 002\x1b[0m txid [a645a928ff9f5a5b216abdb0cd99fbe544de8193bdbf5a4bdade864511c5376e] committed with status (ENDORSEMENT_POLICY_FAILURE) at peer0.org3.example.com:7051{code}

This is the command that is failing: {code}peer lifecycle chaincode approveformyorg --name mycc --channelID behavesystest --version 0 --peerAddresses peer0.org3.example.com:7051 --peerAddresses peer1.org3.example.com:7051 --hash 3f808b08421089a4a4fe10ee2cfe9c1a7dfaf4ffd0dff3430182a1e3a78b3a0f --sequence 2 --waitForEvent --orderer orderer0.example.com:7050 --init-required --policy ""OutOf(2,'org1.example.com.member','org2.example.com.member','org3.example.member')""{code}

The org1 and org2 approvals were successful executed.
The org3 'configtx.yaml' has an'Endorsement' policy defined for the org.
The error {code}VSCC error: stateBasedValidator.Validate failed, err validation of endorsement policy for collection _implicit_org_org3.example.com chaincode _lifecycle in tx 8:0 failed: could not create evaluator for channel reference policy: failed to retrieve policy for reference /Channel/Application/Org3ExampleCom/Endorsement{code} is in the log, but the channel config information in the log also shows the endorsement policy info is set.

See the attached peer log file.",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00fj3:",,,,Unset,Unset,,,,"FAB-13971: Test adding new org using new chaincode lifecycle
  Given I changed the ""Application"" capability to version ""V2_0""
  And I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel
  And an admin packages a chaincode
  And the organization admins install the chaincode package on all peers
  Then a hash value is received on all peers
  When each organization admin approves the chaincode package with policy ""OR ('org1.example.com.member','org2.example.com.member')""
  And an admin commits the chaincode package to the channel
  And I wait up to ""10"" seconds for the chaincode to be committed

  When a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""] on both orgs
  And I wait up to ""30"" seconds for deploy to complete
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000
  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  And I wait ""5"" seconds
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 990

  # Start update process
  When an admin adds an organization to the channel config
  # Assume channel config file is distributed out of band
  And all organization admins sign the updated channel config
  When the admin updates the channel using peer ""peer0.org1.example.com""

  When an admin fetches genesis information using peer ""peer0.org1.example.com""
  Then the config block file is fetched from peer ""peer0.org1.example.com""
  Then the updated config block contains Org3ExampleCom

  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  And I wait ""5"" seconds
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 980

  When the peers from the added organization are added to the network

  When an admin fetches genesis information at block 0 using peer ""peer0.org3.example.com""
  When an admin makes peer ""peer0.org3.example.com"" join the channel
  And an admin makes peer ""peer1.org3.example.com"" join the channel

  When the organization admins install the chaincode package on peer ""peer0.org3.example.com""
  Then a hash value is received on peer ""peer0.org3.example.com""
  When the organization admins install the chaincode package on peer ""peer1.org3.example.com""
  Then a hash value is received on peer ""peer1.org3.example.com""

  When each organization admin approves the upgraded chaincode package with policy ""OutOf(2,'org1.example.com.member','org2.example.com.member','org3.example.member')""

  And an admin commits the chaincode package to the channel on peer ""peer0.org3.example.com""
  And I wait up to ""10"" seconds for the chaincode to be committed on peer ""peer0.org3.example.com""
  And a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""] on ""peer0.org3.example.com""
  And I wait up to ""30"" seconds for deploy to complete

  When a user queries on the chaincode with args [""query"",""a""] from ""peer0.org3.example.com""
  Then a user receives a success response of 980 from ""peer0.org3.example.com""

  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 980
  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  And I wait ""5"" seconds
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 970

  When a user queries on the chaincode with args [""query"",""a""] from ""peer0.org3.example.com""
  Then a user receives a success response of 970 from ""peer0.org3.example.com""

  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""] on ""peer0.org3.example.com""
  And I wait ""5"" seconds
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 960

  # now remove an org
  When an admin fetches genesis information using peer ""peer0.org1.example.com""
  Then the config block file is fetched from peer ""peer0.org1.example.com""
  When an admin removes an organization named Org2ExampleCom from the channel config
  And all organization admins sign the updated channel config
  When the admin updates the channel using peer ""peer0.org1.example.com""

  When an admin fetches genesis information using peer ""peer0.org1.example.com""
  Then the config block file is fetched from peer ""peer0.org1.example.com""
  Then the updated config block does not contain Org2ExampleCom

  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  And I wait ""5"" seconds
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 950
  When a user queries on the chaincode with args [""query"",""a""] from ""peer0.org2.example.com""
  Then a user receives a success response of 960 from ""peer0.org2.example.com""",,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generate CLI docs for _lifecycle,FAB-14588,38364,37656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,12/Mar/19 2:57 AM,04/Apr/19 10:39 PM,28/Oct/23 3:05 AM,04/Apr/19 10:39 PM,,,,,,,,,,fabric-peer,,,,,0,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fjb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Mar/19 3:19 AM;wlahti;https://gerrit.hyperledger.org/r/c/30004/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update pkg/errors dep,FAB-14589,38365,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,12/Mar/19 4:41 AM,13/Mar/19 11:14 PM,28/Oct/23 3:05 AM,13/Mar/19 11:14 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,Update github.com/pkg/errors dependency to 0.8.1.,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fjj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Mar/19 4:44 AM;wlahti;https://gerrit.hyperledger.org/r/c/30007/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Pass more restricted interface to operations instead of TxSimulator interface,FAB-14590,38366,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,sheehan,sheehan,sheehan,12/Mar/19 5:01 AM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,fabric-ledger,,,,,0,stale-item,,,,Pass a more restricted interface to Fabric operations instead of the full TxSimulator interface.  This will allow control over what functions Fabric Operations have access to.,,sheehan,sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,FAB-10711,,,No,,Unset,No,,,"1|i00fjr:",,,,No,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),sheehan,sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Doc update,FAB-14592,38371,38250,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,manish-sethi,manish-sethi,12/Mar/19 10:23 AM,12/Mar/19 11:11 AM,28/Oct/23 3:05 AM,12/Mar/19 11:11 AM,,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,"Document that drop the folder ""<peer.fileSystemPath>/ledgersData/couchdbRedoLogs"" while rebuilding the statedb.",,manish-sethi,,,,,,,,,,,,,,,,,,FAB-1039,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fkv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Mar/19 11:11 AM;manish-sethi;Should be included in FAB-1039;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
hide etcd/raft config option `MaxInflightMsgs` and `MaxSizePerMsg`,FAB-14593,38372,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,12/Mar/19 11:36 AM,21/Mar/19 10:31 PM,28/Oct/23 3:05 AM,18/Mar/19 10:43 PM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,,,,,"{{MaxInflightMsgs}} is equivalent to {{MaxInflightBlocks}} in most cases

{{MaxSizePerMsg}} should be {{PreferredMaxBytes * MaxInflightBlocks}}",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fl3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Mar/19 1:54 PM;guoger;https://gerrit.hyperledger.org/r/c/30018;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
The docs/README.md is out of time.,FAB-14594,38373,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,TopJohn,TopJohn,TopJohn,12/Mar/19 12:06 PM,28/Nov/19 6:42 PM,28/Oct/23 3:05 AM,28/Nov/19 6:42 PM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,documentation,,,,"Line 43

Setting up your own staging repo and publication website is not correct now.

GIthub canceled the  Integration & services ,so we should use webhooks to replace it.",,guoger,TopJohn,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00flb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,TopJohn,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Nov/19 6:42 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/30019;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename/retype local package source,FAB-14596,38377,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,12/Mar/19 8:58 PM,16/Mar/19 3:56 AM,28/Oct/23 3:05 AM,16/Mar/19 3:56 AM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fm7:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Character restrictions for package label,FAB-14597,38379,38776,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,12/Mar/19 9:42 PM,21/Jun/19 5:59 PM,28/Oct/23 3:05 AM,24/May/19 3:14 AM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fmn:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dev,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
convert updateBatch to updateBatchBytes (deterministically),FAB-14598,38380,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,Senthil1,Senthil1,12/Mar/19 9:52 PM,26/Jul/19 3:07 AM,28/Oct/23 3:05 AM,28/Jun/19 3:59 PM,,,,,,v1.4.1,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fmv:",,,,Unset,Unset,v1.4.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
BlockCommitHash per Block,FAB-14599,38381,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,12/Mar/19 9:53 PM,09/Jan/20 3:48 AM,28/Oct/23 3:05 AM,28/Jun/19 4:04 PM,,,,,,v1.4.2,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fn3:",,,,Unset,Unset,v1.4.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Specify package label at package time,FAB-14600,38384,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,12/Mar/19 10:48 PM,16/Mar/19 3:57 AM,28/Oct/23 3:05 AM,16/Mar/19 3:57 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fnj:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove  conf_change_counts from RaftMetadata,FAB-14601,38385,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,12/Mar/19 11:11 PM,27/Mar/19 11:47 AM,28/Oct/23 3:05 AM,27/Mar/19 11:47 AM,v1.4.0,v2.0.0,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,,,,,There is no need/usage of {{conf_change_counts}} from Raft protocol perspective while handling/proposing re-configuration. Hence RaftMetadata message could be simplified.,,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00fnr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Mar/19 11:13 PM;C0rWin;https://gerrit.hyperledger.org/r/30030 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix comments to https://gerrit.hyperledger.org/r/#/c/29972/,FAB-14602,38386,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,12/Mar/19 11:15 PM,16/Mar/19 3:57 AM,28/Oct/23 3:05 AM,16/Mar/19 3:57 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fnz:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Regenerate peer and core/peer files,FAB-14603,38387,38358,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,btl5037,btl5037,btl5037,12/Mar/19 11:23 PM,13/Jan/20 11:29 PM,28/Oct/23 3:05 AM,13/Jan/20 11:29 PM,,,,,,,,,,,,,,,0,stale-item,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fo7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
containerLocks use CCID type as map key,FAB-14604,38388,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,12/Mar/19 11:25 PM,16/Mar/19 3:58 AM,28/Oct/23 3:05 AM,16/Mar/19 3:58 AM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fof:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As a client to a Fabric Network I shouldn't have to assume defaults,FAB-14605,38389,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,aatkddny,aatkddny,13/Mar/19 12:31 AM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,0,stale-item,,,,"I'll use the concrete example that sparked this. I'm sure there are others.

A fabric network defines the maximum permissible message size at creation time. 

As a client - regardless of SDK - a user ought to be able to determine the maximum message size allowed by this network so they can configure my client access methods appropriately.

Currently this is left to the individual SDK implementations rather than being specified by the network owner. It would be far more convenient if it were returned by a network configuration call so clients can act on it - and set their own connection values - appropriately.

This is especially true when the network is managed by a third party and access to configuration is limited.

 ",,aatkddny,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fon:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),aatkddny,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Vendor official Docker Client,FAB-14606,38394,37190,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,btl5037,btl5037,btl5037,13/Mar/19 4:13 AM,28/Mar/19 9:37 PM,28/Oct/23 3:05 AM,28/Mar/19 9:37 PM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fp3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Error ""No verifier for channel"" in onboarded orderer",FAB-14607,38395,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,bharadwajambati1,bharadwajambati1,13/Mar/19 4:32 AM,14/Mar/19 5:19 AM,28/Oct/23 3:05 AM,14/Mar/19 5:19 AM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,raft,,,,"h3. Expected:

The onboarded orderer should retrieve all blocks in the channel from other orderer and continue thereafter to participate in consensus in the channel. During this process, we expected to see no errors, as described in FAB-13702.
h3. Observed:

We observed that the orderer4 go onboarded and started pulling the blocks from other orderers.

We found ERROR logs in the orderer4, when on-boarded to the application channel while traffic running.

 
{code:java}
Mar 12 11:21:08 orderer4th-ordererorg2-c78cfb48b-nt8cp orderer4th-ordererorg2 2019-03-12 15:21:08.606 UTC [orderer.common.cluster] RetrieveVerifier -> ERRO 70418 No verifier for channel testorgschannel1 existsMar 12 11:21:08 orderer4th-ordererorg2-c78cfb48b-nt8cp orderer4th-ordererorg2 2019-03-12 15:21:08.606 UTC [orderer.common.cluster.replication] tryFetchBlock -> ERRO 70419 Failed verifying received blocks: couldn't acquire verifier for channel testorgschannel1{code}
 

Timestamp at which the error found: Mar 12 11:21:08 

URL for orderer4 logs: Go to [https://cloud.ibm.com/observe/logging] and click on View LogDNA for LogDNA-community-svt-lab

Metrics URL: [https://prometheus.community-svt.us-south.containers.appdomain.cloud/graph?g0.range_input=12h&g0.expr=&g0.tab=0&g1.range_input=1h&g1.expr=&g1.tab=1]

 ",,bharadwajambati1,yacovm,,,,,,,,,,,,,,,,,,,FAB-13702,,,,,,,,,,,,,,,,,,,,"13/Mar/19 5:24 AM;bharadwajambati1;configtx.yml;https://jira.hyperledger.org/secure/attachment/16918/configtx.yml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fpb:",,,,Unset,Unset,,,,"1. Create a network with 4 orderers in the orderer system channel and 3 in the application channel consenters. Three orderers are in ordererorg1, whereas the 4th orderer is in ordererorg2.
2. Bring up all 4 orderers. All 4 are in the system channel. Just 3 are in the channel1.
3. Create and join the channel and start sending the traffic, as described in FAB-13702
4. After some time while traffic is running, onboard the orderer4 to the application channel 'testorgschannel1'.
5. Check the logs of orderer4 to find the error logs while it's pulling the blocks from other orderers",,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,yacovm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Mar/19 8:55 AM;yacovm; 1.4 [https://gerrit.hyperledger.org/r/#/c/30046/]

2.0 [https://gerrit.hyperledger.org/r/#/c/30041/]

 

 

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Convert core/[container, chaincode] to Official Docker SDK",FAB-14608,38398,37190,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,13/Mar/19 6:30 AM,28/Mar/19 9:38 PM,28/Oct/23 3:05 AM,28/Mar/19 9:38 PM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fpz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert core/container to Official Docker SDK,FAB-14609,38399,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,13/Mar/19 6:30 AM,14/Mar/19 12:19 AM,28/Oct/23 3:05 AM,14/Mar/19 12:19 AM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fq7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Convert integration/[token,pvtdata,sbe] to Official Docker SDK",FAB-14610,38400,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,13/Mar/19 6:32 AM,13/Mar/19 12:59 PM,28/Oct/23 3:05 AM,13/Mar/19 12:58 PM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fqf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert integration/nwo to Official Docker SDK,FAB-14611,38401,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,btl5037,btl5037,btl5037,13/Mar/19 6:32 AM,13/Mar/19 1:01 PM,28/Oct/23 3:05 AM,13/Mar/19 1:01 PM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fqn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert integration to Official Docker SDK,FAB-14612,38402,37190,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,btl5037,btl5037,btl5037,13/Mar/19 6:32 AM,28/Mar/19 9:37 PM,28/Oct/23 3:05 AM,28/Mar/19 9:37 PM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fqv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Convert integration/[discovery,pluggable] to Official Docker SDK",FAB-14613,38403,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,13/Mar/19 6:32 AM,13/Mar/19 12:59 PM,28/Oct/23 3:05 AM,13/Mar/19 12:59 PM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fr3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert integration/e2e to Official Docker SDK,FAB-14614,38404,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,13/Mar/19 6:34 AM,13/Mar/19 1:00 PM,28/Oct/23 3:05 AM,13/Mar/19 1:00 PM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00frb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert integration/helpers to Official Docker SDK,FAB-14615,38405,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,btl5037,btl5037,btl5037,13/Mar/19 6:34 AM,13/Mar/19 1:02 PM,28/Oct/23 3:05 AM,13/Mar/19 1:02 PM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00frj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Externalize gossip state transfer configuration parameters.,FAB-14616,38407,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,13/Mar/19 9:53 AM,25/Mar/19 8:37 PM,28/Oct/23 3:05 AM,25/Mar/19 8:37 PM,v1.1.1,,,,,v1.1.2,v1.4.1,v2.0.0,,fabric-gossip,,,,,0,,,,,"We would like to control and be able to configure gossip state transfer in particular following set of parameters:

{code}
        # Gossip state transfer related configuration
        state:
            # checkInterval interval to check out whenever peer is lagging behind
            checkInterval: 10s
            # responseTimeout amount of time to wait for state transfer response from
            # other peers
            responseTimeout: 3s
            # batchSize the batch size of block per state transfer request
            batchSize: 10
            # maxBlockDistance maximum allowed distance between blocks in
            # state transfer re-ordering payloads buffer
            maxBlockDistance: 100
            # maxRetries maximum number of re-tries to ask
            # for single state transfer request
            maxRetries: 3
            # channelSize number of parallel state transfer requests
            channelSize: 100

{code}",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00frz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,release-1.1,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Mar/19 9:56 AM;C0rWin;https://gerrit.hyperledger.org/r/30047 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove the redundant TLS certificate information stored per block,FAB-14618,38414,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,13/Mar/19 2:12 PM,29/Mar/19 1:03 PM,28/Oct/23 3:05 AM,29/Mar/19 1:03 PM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,,,,,"Presently, the TLS certificates are specified in the channel config, then replicated into every block metadata persisted to disk.  Because the TLS certificates are non-trivial in size (and there may be many raft nodes) this presents a significant amount of wasted space.

Because there is a set of Raft nodes specified in the channel config, all we need to know is how to map those certs in the channel config to the underlying Raft IDs.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00ftj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename metadata protos to be more specific,FAB-14619,38415,38414,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,13/Mar/19 2:13 PM,29/Mar/19 1:02 PM,28/Oct/23 3:05 AM,29/Mar/19 1:02 PM,,,,,,,,,,,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ftr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor detectConfChange,FAB-14620,38416,38414,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,13/Mar/19 2:13 PM,29/Mar/19 1:02 PM,28/Oct/23 3:05 AM,29/Mar/19 1:02 PM,,,,,,,,,,,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ftz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Further refactoring of CCID,FAB-14621,38419,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,13/Mar/19 9:15 PM,16/Mar/19 3:58 AM,28/Oct/23 3:05 AM,16/Mar/19 3:58 AM,,,,,,,,,,,,,,,0,,,,,"* rename to more appropriate PackageID
 * Implement fmt.Stringer",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fun:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestParallelSend failed in unit-tests as TLS authentication failed.,FAB-14622,38420,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,C0rWin,sambhavdutt,sambhavdutt,13/Mar/19 10:17 PM,02/Apr/19 10:21 PM,28/Oct/23 3:05 AM,14/Mar/19 8:27 PM,v2.0.0,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"TestParallelSend failed in the daily unit-tests. Remote peer authentication failed as no TLS certificate was not sent from peer.

 

*Intermittent:* No

*Branch:* master

*Platform:* s390x

*Error Snippet:*

{code:java}
23:18:59 [33m2019-03-12 23:18:41.847 EDT [gossip.comm] createConnection -> WARN 00b[0m Remote endpoint claims to be a different peer, expected 3132372e302e302e313a3334373533 but got 3132372e302e302e313a3338343532
23:18:59 [33m2019-03-12 23:18:41.847 EDT [gossip.comm] sendToEndpoint -> WARN 00c[0m Failed obtaining connection for 127.0.0.1:38452, PKIid:3132372e302e302e313a3334373533 reason: authentication failure
23:18:59 [33m2019-03-12 23:18:47.853 EDT [gossip.comm] authenticateRemotePeer -> WARN 00d[0m 127.0.0.1:44850 didn't send TLS certificate
23:18:59 [31m2019-03-12 23:18:47.853 EDT [gossip.comm] GossipStream -> ERRO 00e[0m Authentication failed: No TLS certificate
:
23:18:59 --- FAIL: TestParallelSend (30.01s)
23:18:59     comm_test.go:663: 
23:18:59         	Error Trace:	comm_test.go:663
23:18:59         	Error:      	Not equal: 
23:18:59         	            	expected: 20
23:18:59         	            	actual  : 1
23:18:59         	Test:       	TestParallelSend
{code}

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-s390x/51/",,denyeart,guoger,sambhavdutt,,,,,,,,,,,,,,,,,,,,FAB-14960,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,aa6bfc6b21bb7460bd331c29c1a08515f5276673,Unset,No,,,"1|i00fuv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,guoger,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Apr/19 10:38 AM;guoger;hit [here|https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11160/console]. I'm wondering why is this working as expected though? cc [~C0rWin];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
CC registry receives a value object,FAB-14623,38422,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,13/Mar/19 10:42 PM,16/Mar/19 3:58 AM,28/Oct/23 3:05 AM,16/Mar/19 3:58 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fvb:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove PackageProviderWrapper,FAB-14624,38423,38329,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,ales,ales,13/Mar/19 11:01 PM,09/May/19 9:51 PM,28/Oct/23 3:05 AM,,,,,,,v2.1.0,,,,,,,,,0,,,,,"PackageProviderWrapper is used for tests of the legacy package provider that still require name/version on lookups. In the new lifecycle we have moved away from that to simply supplying a PackageID but this breaks the old code. This struct is used in tests to make the old interface act as the new one. As soon as the old provider disappears (or its functions are aligned with the new interface), this struct should be removed.",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fvj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove GetCanonicalNameForTests,FAB-14625,38424,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,13/Mar/19 11:29 PM,16/Mar/19 3:59 AM,28/Oct/23 3:05 AM,16/Mar/19 3:59 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fvr:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove legacy lifecycle compatibility,FAB-14627,38427,39075,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,ales,ales,14/Mar/19 12:11 AM,05/Apr/19 1:50 AM,28/Oct/23 3:05 AM,,,,,,,v2.1.0,,,,,,,,,0,,,,,"The legacy lifecycle is still part of fabric proper because of compatibility reasons. It shall be removed once an appropriate amount of releases have permitted the transition of all chaincodes from legacy to new. This may simply take place by redefining all legacy chaincodes with the new lifecycle. Once this is done, all the legacy code may disappear.",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fwf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
_lifecycle should have definitions for (legacy) system chaincodes,FAB-14628,38428,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,ales,ales,14/Mar/19 12:12 AM,20/Aug/19 12:56 PM,28/Oct/23 3:05 AM,20/Aug/19 12:56 PM,,,,,,v2.1.0,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-10983,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00fwn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove done fixmes or add FABs,FAB-14629,38429,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,14/Mar/19 12:13 AM,16/Mar/19 3:59 AM,28/Oct/23 3:05 AM,16/Mar/19 3:59 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00fwv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename chaincode ID with package ID for container labels/env variables,FAB-14630,38431,39736,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,ales,ales,14/Mar/19 12:18 AM,09/May/19 9:49 PM,28/Oct/23 3:05 AM,,,,,,,,,,,,,,,,0,,,,,"In particular, see these comments
{noformat}
github.com/hyperledger/fabric$ grep FAB-14630 * -RI

core/chaincode/platforms/platforms.go:  // FIXME: remove these two fields since they are *NOT* properties of the chaincode; rather add packageid/label (FAB-14630)

core/chaincode/container_runtime.go:    // peer still adopt this broken convention. (FAB-14630)

core/chaincode/handler_registry.go:     // usage of the chaincodeID field is misleading (FAB-14630)

core/chaincode/handler.go:              // and version (FAB-14630)
{noformat}",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fxb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add collections config integration test using _lifecycle,FAB-14632,38435,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,14/Mar/19 1:17 AM,19/Mar/19 2:29 AM,28/Oct/23 3:05 AM,19/Mar/19 2:29 AM,,,,,,,,,,fabric-peer,,,,,0,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00fy7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Mar/19 1:18 AM;wlahti;https://gerrit.hyperledger.org/r/c/29940/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove apt-get install from eyfn scripts.,FAB-14633,38438,38312,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,14/Mar/19 3:01 AM,15/Mar/19 2:45 AM,28/Oct/23 3:05 AM,14/Mar/19 4:20 AM,,,,,,,,,,,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fyn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
catchup to evicting block should not sign the blocks on its own,FAB-14634,38441,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,14/Mar/19 5:23 AM,14/Mar/19 12:31 PM,28/Oct/23 3:05 AM,14/Mar/19 12:31 PM,,,,,,,,,,fabric-orderer,,,,,0,,,,,"When a Raft node detects its eviction, it pulls all blocks up to the last config block and then commits it using the WriteBlock method of the chain.

 

The problem is that this method, signs the block as well, but it means the orderer signs blocks using an identity that might not be authorized, so peers won't be able to verify it when they will pull it.

 

Another problem is that it doesn't update the last config (because WriteConfigBlock isn't used), so it writes a wrong last config in the metadata.

 

What we need to do, is to just append the block to the ledger in its raw form since it is pulled from a remote Raft node.",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00fz3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Mar/19 6:27 AM;yacovm;[https://gerrit.hyperledger.org/r/#/c/30075/]

https://gerrit.hyperledger.org/r/#/c/30073/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
State transfer need to respect and wait for response or timeout to expire,FAB-14637,38445,,Bug,To Do,FAB,Fabric,software,denyeart,,,Medium,,,C0rWin,C0rWin,14/Mar/19 9:12 AM,23/Nov/20 11:47 PM,28/Oct/23 3:05 AM,,v1.1.1,,,,,v1.1.2,,,,fabric-gossip,,,,,0,ipm2,,,,"Currently in state transfer code it waits for response or timeout before re-trying. However if it gets late response from previous round it will trigger next trial w/o actually waiting for neither response nor timeout. 

This behavior should be fixed and make state transfer to respect timeout before doing another try.",,C0rWin,rockleelx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01h7y:i",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,rockleelx,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Mar/19 9:13 AM;C0rWin;https://gerrit.hyperledger.org/r/30078 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address data races in gossip/gossip/channel,FAB-14639,38451,31531,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,14/Mar/19 7:55 PM,15/Mar/19 7:23 PM,28/Oct/23 3:05 AM,15/Mar/19 7:23 PM,,,,,,v2.0.0,,,,fabric-gossip,,,,,0,hygiene,,,,"WARNING: DATA RACE
Write at 0x00c0004b6050 by goroutine 99:
 github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock.(*Mock).On()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock/mock.go:255 +0x45e
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipAdapterMock).wasMocked()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:267 +0xb4
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipAdapterMock).Lookup()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:223 +0x65
 github.com/hyperledger/fabric/gossip/gossip/channel.NewGossipChannel.func4()
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipAdapterMock).wasMocked()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:267 +0xb4
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipAdapterMock).GetIdentityByPKIID()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:258 +0x65
 github.com/hyperledger/fabric/gossip/gossip/channel.NewGossipChannel.func5()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:230 +0x212
 github.com/hyperledger/fabric/gossip/gossip/channel.(*stateInfoCache).Add()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:966 +0xed
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).HandleMessage()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:605 +0xefa
 github.com/hyperledger/fabric/gossip/gossip/channel.TestGossipChannelEligibility()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:1594 +0x1a25
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162

Previous read at 0x00c00040a000 by goroutine 128:
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipAdapterMock).wasMocked()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:268 +0xc2
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipAdapterMock).GetIdentityByPKIID()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:258 +0x65
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).EligibleForChannel()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:505 +0x93
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).GetPeers()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:357 +0x1e5
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).GetPeers-fm()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:282 +0x41
 github.com/hyperledger/fabric/gossip/gossip/channel.(*membershipTracker).trackMembershipChanges()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:1063 +0xc2

Goroutine 36 (running) created at:
 testing.(*T).Run()
 /usr/local/go/src/testing/testing.go:878 +0x659
 testing.runTests.func1()
 /usr/local/go/src/testing/testing.go:1119 +0xa8
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162
 testing.runTests()
 /usr/local/go/src/testing/testing.go:1117 +0x4ee
 testing.(*M).Run()
 /usr/local/go/src/testing/testing.go:1034 +0x2ee
 main.main()
 _testmain.go:140 +0x332

Goroutine 128 (running) created at:
 github.com/hyperledger/fabric/gossip/gossip/channel.NewGossipChannel()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:290 +0x12bd
 github.com/hyperledger/fabric/gossip/gossip/channel.TestGossipChannelEligibility()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:1586 +0x1617
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162

 

WARNING: DATA RACE
Write at 0x00c000103b80 by goroutine 6:
 github.com/hyperledger/fabric/gossip/gossip/channel.TestOnDemandGossip()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:1769 +0xc4c
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162

Previous read at 0x00c000103b80 by goroutine 15:
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).publishStateInfo()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:405 +0xd3
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).publishStateInfo-fm()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:281 +0x41
 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).periodicalInvocation()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:319 +0x4e

Goroutine 6 (running) created at:
 testing.(*T).Run()
 /usr/local/go/src/testing/testing.go:878 +0x659
 testing.runTests.func1()
 /usr/local/go/src/testing/testing.go:1119 +0xa8
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162
 testing.runTests()
 /usr/local/go/src/testing/testing.go:1117 +0x4ee
 testing.(*M).Run()
 /usr/local/go/src/testing/testing.go:1034 +0x2ee
 main.main()
 _testmain.go:92 +0x221

Goroutine 15 (running) created at:
 github.com/hyperledger/fabric/gossip/gossip/channel.NewGossipChannel()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:281 +0xd50
 github.com/hyperledger/fabric/gossip/gossip/channel.TestOnDemandGossip()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:1744 +0x73c
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162

 ",,hagarm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g0v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Mar/19 8:30 PM;hagarm;https://gerrit.hyperledger.org/r/#/c/30083/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use nodenv as Node CC Builder,FAB-14640,38453,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,14/Mar/19 9:08 PM,20/Sep/19 7:59 PM,28/Oct/23 3:05 AM,15/Mar/19 1:49 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,FAB-10852,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g13:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Mar/19 9:18 PM;mastersingh24;https://gerrit.hyperledger.org/r/30084;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode Attribute-based Access Control failing with OpenSSL user certificate,FAB-14641,38454,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,chrisf,chrisf,14/Mar/19 9:49 PM,20/Mar/19 3:51 PM,28/Oct/23 3:05 AM,20/Mar/19 3:51 PM,v1.4.0,,,,,,,,,fabric-crypto,,,,,0,Chaincode,crypto,,,"We have a chaincode that uses the cid package ( [https://github.com/hyperledger/fabric/tree/release-1.4/core/chaincode/lib/cid] ) to get the custom attributes from the caller certificate.

When using certs created with OpenSSL we get the following error: 
{code:java}
failed to get attributes from the transaction invoker's certificate: Failed to unmarshal attributes from certificate: invalid character '\\f' looking for beginning of value
{code}
 The error is thrown in the attrmgr component  [https://github.com/hyperledger/fabric/blob/eca1b14b7e3453a5d32296af79cc7bad10c7673b/core/chaincode/shim/ext/attrmgr/attrmgr.go#L129] 

 When comparing openssl output of a fabric ca and an openssl cert I can see the following difference: 

 
||Fabric CA certificate||OpenSSL certificate||
|{code:java}
X509v3 extensions:
 [..] 
  1.2.3.4.5.6.7.8.1:       
      {""attrs"":{}}
{code}|{code:java}
X509v3 extensions: 
  [..]
  1.2.3.4.5.6.7.8.1: 
      .d{""attrs"":{}}
{code}|

 The custom extension of the openSSL cert seems to be prefixed with some characters which is causing the json.Unmarshal to fail. The custom attributes are generated like shown in the OpenSSL docs for Arbitrary Extensions [https://www.openssl.org/docs/man1.0.2/man5/x509v3_config.html#ARBITRARY-EXTENSIONS] 

 

Quick fix:

If I change the attrmgr code to remove the first to bytes of the value input byte array the unmarshal works as expected. However, the fabric ca certs will not work with this fix anymore...
{code:java}
err := json.Unmarshal(buf[2:], attrs){code}
 

Please also add support for certificates created with OpenSSL.

 

 ",,chrisf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g1b:",,,,Unset,Unset,,,,,,Unset,,,,,,Unset,,Unset,,(Please add usage information),chrisf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Mar/19 3:51 PM;chrisf;openssl DER encoding solved the issue;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Decrease severity of BCCSP log entry,FAB-14642,38455,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,14/Mar/19 9:51 PM,16/Mar/19 3:59 AM,28/Oct/23 3:05 AM,16/Mar/19 3:59 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g1j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.3,release-1.4,release-2.5,release-2.4,release-1.0,main,release-1.1,release-1.2,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestLeaderYield failed in the integration_test in the daily unit-tests.,FAB-14643,38456,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,14/Mar/19 10:24 PM,19/Mar/19 7:57 PM,28/Oct/23 3:05 AM,15/Mar/19 12:22 PM,v1.4.0,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"TestLeaderYield failed in the integration tests and gossip.service test failed right after this, this is the first instance the TestLeaderYield has failed.

*Branch:* release-1.4
*Platform:* s390x
*Error Snippet:*

{code:java}
21:32:28 	/w/workspace/fabric-unit-test-coverage-daily-release-1.4-s390x/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/http2_client.go:299 +0xb20
21:32:28 --- FAIL: TestLeaderYield (93.95s)
21:32:28     integration_test.go:166: p0 started its delivery service
21:32:28     integration_test.go:171: p0 stopped its delivery service
21:32:28     integration_test.go:181: p1 hasn't taken over leadership within 1m0s: -1
21:32:28 [31m2019-03-13 21:31:51.518 EDT [gossip.service] updateAnchors -> ERRO 048[0m Tried joining channel A but our org( OrgMSP0 ), isn't among the orgs of the channel: [Org0] , aborting.
21:32:28 [33m2019-03-13 21:31:52.841 EDT [gossip.comm#20502] func1 -> WARN 049[0m localhost:20503, PKIid:6c6f63616c686f73743a3230353033 isn't responsive: rpc error: code = Unavailable desc = transport is closing
21:32:28 [33m2019-03-13 21:31:52.841 EDT [gossip.discovery#localhost:20502] expireDeadMembers -> WARN 04a[0m Entering [6c6f63616c686f73743a3230353033]
21:32:28 [33m2019-03-13 21:31:52.841 EDT [gossip.discovery#localhost:20502] expireDeadMembers -> WARN 04b[0m Closing connection to Endpoint: 1.2.3.4:20503, InternalEndpoint: localhost:20503, PKI-ID: 6c6f63616c686f73743a3230353033, Metadata: 
21:32:28 [33m2019-03-13 21:31:52.841 EDT [gossip.discovery#localhost:20502] expireDeadMembers -> WARN 04c[0m Exiting
21:32:28 [33m2019-03-13 21:31:54.646 EDT [gossip.privdata] NewCoordinator -> WARN 04d[0m Configuration key peer.gossip.pvtData.transientstoreMaxBlockRetention isn't set, defaulting to 1000
{code}

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-release-1.4-s390x/36/",,C0rWin,denyeart,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,bf34e3038ecafbfa59ce0777c411514a03dd29ad,Unset,No,,,"1|i00g1r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix review comments for https://gerrit.hyperledger.org/r/#/c/29985/8/,FAB-14644,38458,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,14/Mar/19 11:34 PM,16/Mar/19 3:59 AM,28/Oct/23 3:05 AM,16/Mar/19 3:59 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g27:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cache of unmarshaled blocks for improved performance,FAB-14645,38459,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,denyeart,denyeart,14/Mar/19 11:39 PM,11/Jan/21 3:32 PM,28/Oct/23 3:05 AM,,,,,,,,,,,fabric-peer,,,,,2,help-wanted,,,,"For details see [https://arxiv.org/abs/1901.00910] section: *Peer improvement V: Cache unmarshaled blocks*.

Note, this optimization could be completed on its own, or could be combined with the wider validation refactoring proposed in FAB-12221.",,denyeart,JohnSColeman,MHBauer,yoheiueda,,,,,,,,,,,,,,,,,,,,,FAB-16307,,,,,,,,,FAB-12221,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14513,,,No,,Unset,No,,,"1|hzwqrk:5iwr4rb0zyw2",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,JohnSColeman,MHBauer,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Apr/19 6:32 AM;MHBauer;Summary

1. Caching only useful to transfer blocks between stages
 - looking at the validation code, it appears to only unmarshal things once.
 - haven't seen the following commit code, and only some of the
 2. Should establish Block-ish and Transaction-ish types, that transparently can do the lookup or caching
 - blocks appear to be look-up-able by number, thus transferring a block around by pointer or number achieves the same result as all blocks have their number in them.
 - hides the proto handling. Reusable. Non-proto backends could be made available.
 3. Cache design, the bit-twiddling is probably too clever
 - Must be one per peer to take advantage of work between stages on a peer.
 - Memory vs CPU tradeoff. Could be a tunable.
 - cache size MUST be larger than # of transactions in blocks
 4. Did not have a clear understanding of how to test this beyond an entire fabric setup. Individual performance gains should be visible at a lower level.
 
Recommendations
 1. Instrument all proto unmarshalling to print the identifier of what is being unmarshalled. (Block Number/Hash, Transaction ID/Hash, etc). Then count up the number of times you see each call happen per ID.
 2. Replace *common.Block with BlockInterface that has functions to do unmarshal or lookup in background. Same for Transactions and below objects.
 3. Use an established cache algorithm. Assertion on startup about size of cache vs size of block. Tunables flags to allow configuration. 
 4. Micro benchmarks for areas less than a complete end-to-end test run. Adapt existing tests if possible.

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update dependency github.com/opencontainers/runc,FAB-14646,38461,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,firas.qutishat,firas.qutishat,15/Mar/19 12:01 AM,29/Jun/19 3:42 AM,28/Oct/23 3:05 AM,29/Jun/19 3:42 AM,,,,,,,,,,fabric-build,,,,,1,,,,,See [https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-5736] and [https://docs.docker.com/engine/release-notes/#18092].,,firas.qutishat,gbolo,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g2v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),firas.qutishat,gbolo,mastersingh24,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Apr/19 6:53 AM;mastersingh24;but is this really a threat vector for us?  (not opposed to updating, but don't want it to seem like there is an exposure here);;;","24/Apr/19 2:53 AM;gbolo;Hi [~mastersingh24]

you are correct, there is no threat vector here. Unfortunately, some security scanners will simply pick up the version of the main runc package (ignoring that the actual sub package that gets imported is harmless) and falsely report we are vulnerable. Updating the dep will simply remove that incorrect threat assessment from being reported and would make a bunch of security people a bit happier.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
QueryInstalledChaincodes returns label/hash/packageID,FAB-14647,38462,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,15/Mar/19 12:57 AM,16/Mar/19 4:00 AM,28/Oct/23 3:05 AM,16/Mar/19 4:00 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g33:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
All existing orderers panic and halt when onboard new orderer incorrect host name,FAB-14648,38468,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,bharadwajambati1,bharadwajambati1,15/Mar/19 1:23 AM,21/Mar/19 11:16 PM,28/Oct/23 3:05 AM,21/Mar/19 8:29 AM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,raft,,,,"h3. Expected:

When executing testcase FAB-13702, after restarting network, and running traffic, using a script to onboard orderer to our k8s environment:
 *     source fabric-test/tools/PTE/scenarios/PTECIutils.sh 
 *     AddOrderer raft-svt testorgschannel1 169.46.35.154 orderer1st-ordererorg1 oerer4th-ordererorg2

the onboarded orderer should retrieve all blocks in the channel from other orderer and continue thereafter to participate in consensus in the channel. During this process, we expected to see no errors.
h3. Observed:

We observed that, except for the onboarded orderer, all the orderers panic.
{code:java}
Mar 14 10:54:14 orderer1st-ordererorg1-67d6bf8749-27xx8 orderer1st-ordererorg1 panic: Failed to configure communication: invalid PEM block
Mar 14 10:54:14 orderer1st-ordererorg1-67d6bf8749-27xx8 orderer1st-ordererorg1 github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Panicf(0xc00015eba0, 0x102db50, 0x25, 0xc00ae27aa8, 0x1, 0x1)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:159 +0x79Mar 14 10:54:14 orderer1st-ordererorg1-67d6bf8749-27xx8 orderer1st-ordererorg1 github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Panicf(0xc00015eba8, 0x102db50, 0x25, 0xc00ae27aa8, 0x1, 0x1)
{code}
 

Timestamp: Panic errors found: *Mar 14 10:54:14*.919, after the 3 orderers got to block 1519.

URL for orderer4 logs: Go to [https://cloud.ibm.com/observe/logging] and click on View LogDNA for LogDNA-community-svt-lab

 
h3. Further observations:

This does NOT occur every time; when doing it manually and correctly, it worked ok.

When we used the script, we discovered that a typo in the line using an incorrect orderer name (oerer4th-ordererorg2) led to us adding an orderer that had no cert stored on the disk volume (because the actual cert was in a different path with the correctly named orderer4th). The AddOrderer command spit out this to stderr:

{{    stderr:  cat: ../keyfiles/ordererorg2/orderers/oerer4th-ordererorg2.ordererorg2/tls/server.crt: No such file or directory}}

This led to the panic in the orderers as they tried to process the config block, “invalid PEM block”

But why do the orderers halt? Stop handling traffic. Even when they restart afterwards, they do not proceed further. *Could they reject this invalid config update, and continue living*?

When we used the correct orderer name(orderer4th-ordererorg2) in the below script, it's working successfully as expected:

{{    AddOrderer raft-svt testorgschannel1 169.46.35.154 orderer1st-ordererorg1 oerer4th-ordererorg2}}

 ",,bharadwajambati1,guoger,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Mar/19 4:15 AM;bharadwajambati1;PTECIutils.sh;https://jira.hyperledger.org/secure/attachment/16949/PTECIutils.sh",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g4f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,guoger,scottz,yacovm,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Mar/19 4:31 AM;yacovm;[~guoger];;;","15/Mar/19 4:57 AM;yacovm;I think we can just halt the chain for now instead of panicking.;;;","16/Mar/19 6:39 PM;guoger;https://gerrit.hyperledger.org/r/30134;;;","21/Mar/19 11:16 PM;bharadwajambati1;Tested Jay Guo fix for bug FAB-14648. This time the existing orderers didn't panic or halt when onboard a new orderer with an incorrect hostname

 

Version: 1.4.1
Commit SHA: 02dace6;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Orderers are being killed with OOM error after a series of restarts,FAB-14653,38480,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,suryalnvs,suryalnvs,15/Mar/19 5:59 AM,21/Mar/19 12:28 PM,28/Oct/23 3:05 AM,21/Mar/19 12:28 PM,v1.4.1,v2.0.0,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,raft,,,,"h2. Observed:

After a series of restarts of orderers, during the recovery of restarted orderer, utilization of memory by orderer is reaching its limit 8Gi quickly due to which kubernetes is terminating the orderer pods. From which orderer is not able to recover completely.
h2. Expected: 

Orderer should be able to recover even after multiple restarts and able to serve the transactions.

 

Prometheus url: [https://prometheus.community-regression.us-south.containers.appdomain.cloud/graph]

Log Instance: LogDNA-community-regression-lab

 

Attaching screenshot of orderer pod working set bytes from prometheus. !Screen Shot 2019-03-14 at 4.57.48 PM.png!

 ",,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,FAB-14656,,,,,,FAB-14656,,,,,,,,,,"15/Mar/19 5:58 AM;suryalnvs;Screen Shot 2019-03-14 at 4.57.48 PM.png;https://jira.hyperledger.org/secure/attachment/16950/Screen+Shot+2019-03-14+at+4.57.48+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g6v:",,,,Unset,Unset,,,,"Follow the steps from FAB-14220.

Set the hard limits on OSN's to use 8Gi Memory

Use chaos-kube to restart orderers.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create a key concept topic for policies,FAB-14654,38482,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,pandrejko,pandrejko,15/Mar/19 9:03 AM,15/Mar/19 9:05 AM,28/Oct/23 3:05 AM,15/Mar/19 9:05 AM,,,,,,,,,,fabric-docs,,,,,0,,,,,Introduce what is a policy and how it is used in Fabric.,,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6151,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:r",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ProverPeer#ListTokens should return quantity in decimal format,FAB-14655,38486,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,angelo.decaro,angelo.decaro,angelo.decaro,15/Mar/19 4:14 PM,13/Jan/20 11:40 PM,28/Oct/23 3:05 AM,13/Jan/20 11:40 PM,,,,,,,,,,fabric-token,,,,,0,fabtoken,,,,"Currently, the prover peer returns a list of unspent tokens where quantities are encoded in hex format. To simplify the life of the client-sdks, the quantities will be returned in decimal format.

Notice, that this does not affect the way quantities are stored in token transactions.",,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i00g7z:",,,,Yes,Unset,,,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"When a node restarts, it should take into account wal data after the last snapshot",FAB-14656,38489,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,15/Mar/19 6:06 PM,21/Mar/19 10:32 PM,28/Oct/23 3:05 AM,21/Mar/19 8:09 AM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,,,,,"Say we have SnapshotIntervalSize = 100 MB, and node accumulated 80 MB of data before being killed. Then it restarts, it should take snapshot once accumulate 20 MB of data, instead of another 100 MB. Otherwise, we risk OOM if node is frequently rebooted.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,FAB-14653,,,,,,FAB-14653,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g8f:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Mar/19 6:23 PM;guoger;https://gerrit.hyperledger.org/r/30114;;;","15/Mar/19 10:36 PM;guoger;This fixes FAB-14653;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Prover Server: issue non-fungible token,FAB-14657,38490,37957,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,KaoutarEL,KaoutarEL,KaoutarEL,15/Mar/19 6:46 PM,13/Jan/20 11:40 PM,28/Oct/23 3:05 AM,13/Jan/20 11:40 PM,,,,,,,,,,,,,,,0,fabtoken,,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g8n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Mar/19 7:41 PM;KaoutarEL;https://gerrit.hyperledger.org/r/#/c/30184/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Client: issue non-fungible token,FAB-14658,38491,37957,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,KaoutarEL,KaoutarEL,KaoutarEL,15/Mar/19 6:46 PM,13/Jan/20 11:40 PM,28/Oct/23 3:05 AM,13/Jan/20 11:40 PM,,,,,,,,,,,,,,,0,fabtoken,,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g8v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Mar/19 7:40 PM;KaoutarEL;https://gerrit.hyperledger.org/r/#/c/30273/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Issuer: issue non-fungible token,FAB-14659,38492,37957,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,bur,KaoutarEL,KaoutarEL,15/Mar/19 6:47 PM,13/Jan/20 11:40 PM,28/Oct/23 3:05 AM,13/Jan/20 11:40 PM,,,,,,,,,,,,,,,0,fabtoken,stale-item,,,,,bur,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g93:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bur,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Mar/19 4:04 AM;bur;[https://gerrit.hyperledger.org/r/#/c/30234/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Verifier: issue non-fungible token,FAB-14660,38493,37957,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,bur,KaoutarEL,KaoutarEL,15/Mar/19 6:47 PM,13/Jan/20 11:40 PM,28/Oct/23 3:05 AM,13/Jan/20 11:40 PM,,,,,,,,,,,,,,,0,fabtoken,stale-item,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g9b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
e2e test: issue non-fungible token,FAB-14661,38494,37957,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,KaoutarEL,KaoutarEL,KaoutarEL,15/Mar/19 6:47 PM,13/Jan/20 11:40 PM,28/Oct/23 3:05 AM,13/Jan/20 11:40 PM,,,,,,,,,,,,,,,0,fabtoken,stale-item,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g9j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prover Server: transfer non-fungible tokens,FAB-14662,38496,37958,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,15/Mar/19 7:02 PM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g9z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prover Client: transfer non-fungible tokens,FAB-14663,38497,37958,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,15/Mar/19 7:02 PM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ga7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Transactor: transfer non-fungible tokens,FAB-14664,38498,37958,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,15/Mar/19 7:03 PM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gaf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Verifier: transfer non-fungible tokens,FAB-14665,38499,37958,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,15/Mar/19 7:05 PM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gan:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
e2e test: transfer non-fungible tokens,FAB-14666,38500,37958,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,15/Mar/19 7:05 PM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gav:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prover Server: List non-fungible tokens,FAB-14667,38501,37960,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,15/Mar/19 7:06 PM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gb3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prover Client: List non-fungible tokens,FAB-14668,38502,37960,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,15/Mar/19 7:07 PM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gbb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Transactor: List non-fungible tokens,FAB-14669,38503,37960,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,15/Mar/19 7:07 PM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gbj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
e2e test: List non-fungible tokens,FAB-14670,38504,37960,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,15/Mar/19 7:08 PM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gbr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prover Server: redeem non-fungible tokens,FAB-14671,38505,37959,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,15/Mar/19 7:09 PM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gbz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prover Client: redeem non-fungible tokens,FAB-14672,38506,37959,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,15/Mar/19 7:09 PM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gc7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Transactor: redeem non-fungible tokens,FAB-14673,38507,37959,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,15/Mar/19 7:09 PM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gcf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Verifier: redeem non-fungible tokens,FAB-14674,38508,37959,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,15/Mar/19 7:09 PM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gcn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
e2e test: redeem non-fungible tokens,FAB-14675,38509,37959,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,KaoutarEL,KaoutarEL,15/Mar/19 7:10 PM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gcv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Identity should be injected into deliver service,FAB-14676,38510,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,15/Mar/19 7:13 PM,15/Mar/19 9:09 PM,28/Oct/23 3:05 AM,15/Mar/19 9:09 PM,,,,,,v2.0.0,,,,,,,,,0,hygiene,,,,"Currently, core/deliverservice calls localmsp.NewSigner() which wraps a direct call to loading the local msp.  We should actually inject the signing identity instead.",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gd3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Mar/19 7:16 PM;mastersingh24;https://gerrit.hyperledger.org/r/30115;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replace mockClient with mock DockerClient,FAB-14677,38521,37190,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,15/Mar/19 11:19 PM,28/Mar/19 9:37 PM,28/Oct/23 3:05 AM,28/Mar/19 9:37 PM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gev:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
RAFT SERVICE UNAVAILABLE with 108 orderers,FAB-14678,38522,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,dongming,dongming,16/Mar/19 12:09 AM,20/Mar/19 2:38 AM,28/Oct/23 3:05 AM,20/Mar/19 2:38 AM,,,,,,,,,,fabric-orderer,,,,,0,Raft,,,,"orderer:
 Version: 1.4.1
 Commit SHA: bf34e30

When test FAb-14230, with 108 orderers, some orderers show ""SERVICE_UNAVAILABLE"" during the test.  As a result, there are small number of transactions (2172 or 0.4%) were dropped without noticing client.
I ran the test twice, the first time succeeded but the second time failed.
The same test was successful with 3, 27, 54 orderers. 

When the ""SERVICE_UNAVAILABLE"" occurs, there is no leader changes.  Here is an snippet log:

Mar 14 14:48:57 orderer7-ordererorg2-6bfdd7b54-6rfxs orderer7-ordererorg2 2019-03-14 18:48:57.000 UTC [comm.grpc.server] 1 -> INFO 3ce0 streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Broadcast grpc.peer_address=10.191.5.91:49804 grpc.code=OK grpc.call_duration=21.758415ms
Mar 14 14:48:57 orderer7-ordererorg2-6bfdd7b54-6rfxs orderer7-ordererorg2 2019-03-14 18:48:57.084 UTC [comm.grpc.server] 1 -> INFO 3ce1 streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Broadcast grpc.peer_address=10.191.5.91:49804 grpc.code=OK grpc.call_duration=17.936084ms
Mar 14 14:49:02 orderer7-ordererorg2-6bfdd7b54-6rfxs orderer7-ordererorg2 2019-03-14 18:49:02.809 UTC [orderer.common.broadcast] ProcessMessage -> WARN 3ce2 [channel: testorgschannel1] Rejecting broadcast of normal message from 10.191.5.91:49804 with SERVICE_UNAVAILABLE: rejected by Order: stream aborted
Mar 14 14:49:02 orderer7-ordererorg2-6bfdd7b54-6rfxs orderer7-ordererorg2 2019-03-14 18:49:02.809 UTC [comm.grpc.server] 1 -> INFO 3ce3 streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Broadcast grpc.peer_address=10.191.5.91:49804 grpc.code=OK grpc.call_duration=5.620683066s
Mar 14 14:49:02 orderer7-ordererorg2-6bfdd7b54-6rfxs orderer7-ordererorg2 2019-03-14 18:49:02.810 UTC [orderer.common.cluster.step] sendMessage -> WARN 3ce4 Stream 2 to orderer2-ordererorg2.ordererorg2(orderer2-ordererorg2:7050) was forcibly terminated because timeout (7s) expired
Mar 14 14:49:02 orderer7-ordererorg2-6bfdd7b54-6rfxs orderer7-ordererorg2 2019-03-14 18:49:02.921 UTC [comm.grpc.server] 1 -> INFO 3ce5 streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Broadcast grpc.peer_address=10.191.5.91:49804 grpc.code=OK grpc.call_duration=19.256127ms


We also did a test with fixed incoming TPS=100 for 90 min. This test passed.

This may related to FAB-14187.

The log is available on the LogDNA-community-quality-lab. Look for Mar 14 14:48:00.
The snippet log for orderer7-ordererorg2 is attached.
PTE log is attached.",,dongming,guoger,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Mar/19 5:02 AM;dongming;108-2orderers.log;https://jira.hyperledger.org/secure/attachment/16960/108-2orderers.log","16/Mar/19 12:00 AM;dongming;108.log;https://jira.hyperledger.org/secure/attachment/16957/108.log","16/Mar/19 12:00 AM;dongming;FAB-14230-ch1-th12-move-0314144424.log;https://jira.hyperledger.org/secure/attachment/16956/FAB-14230-ch1-th12-move-0314144424.log","16/Mar/19 4:53 AM;dongming;is-leader.PNG;https://jira.hyperledger.org/secure/attachment/16958/is-leader.PNG","16/Mar/19 4:53 AM;dongming;leader-change.PNG;https://jira.hyperledger.org/secure/attachment/16959/leader-change.PNG",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gf3:",,,,Unset,Unset,,,,"1. Create a blockchain network with 108 raft orderers, 3 org, 1 peer per org.
2. We created 1 channel, testorgchannel1. See FAB-14230 for detail.
3. Using 108 threads, each thread targets 1 orderer in the fashion of roundrobin, i.e., thread 1 to orderer1, thread 2 to orderer 2, etc.  Each thread sends 5000 transactions in constant mode, total 540,000 tx
4. Using 3 PTEs, each sends 36 threads",,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,guoger,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Mar/19 2:11 AM;yacovm;{quote}We also did a test with fixed incoming TPS=100 for 90 min. This test passed.
{quote}
 

At what TPS it stops working?;;;","16/Mar/19 2:15 AM;yacovm;and can we please get some more information, like - the logs of the leader and the follower that intercepted the service unavailable ? I presume the log in the description is the follower. Can we have the logs of the leader too?;;;","16/Mar/19 4:50 AM;dongming;[~yacovm]
I did two test on the system with 108 orderers using local storage with tx payload=8B
1. fixed incoming rate, TPS=100 for 90 min, this test passed: PTE receives events for all transactions.
2. send the tx as soon as possible, the first time passed with TPS=638, 2nd time failed.

I will post logs of leader and the follower once I gather them.;;;","16/Mar/19 5:04 AM;dongming;Attached loader and follower log, see108-2orderers.log, where the leader is orderer12-ordererorg4, and follower is orderer7-ordererorg2.;;;","16/Mar/19 5:09 AM;yacovm;All I see in [^108-2orderers.log] are logs of comm.grpc.server ... where are the cluster and etcdraft logs?;;;","16/Mar/19 12:11 PM;guoger;I'm seeing this in that timeframe:
{code}
Mar 15 02:49:02 2019-03-14 18:49:02.809 UTC [orderer.common.broadcast] ProcessMessage -> WARN 3ce2 [channel: testorgschannel1] Rejecting broadcast of normal message from 10.191.5.91:49804 with SERVICE_UNAVAILABLE: rejected by Order: stream aborted
Mar 15 02:49:02 2019-03-14 18:49:02.809 UTC [comm.grpc.server] 1 -> INFO 3ce3 streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Broadcast grpc.peer_address=10.191.5.91:49804 grpc.code=OK grpc.call_duration=5.620683066s
Mar 15 02:49:02 2019-03-14 18:49:02.810 UTC [orderer.common.cluster.step] sendMessage -> WARN 3ce4 Stream 2 to orderer2-ordererorg2.ordererorg2(orderer2-ordererorg2:7050) was forcibly terminated because timeout (7s) expired
{code}
on orderer7-ordererorg2;;;","16/Mar/19 9:37 PM;yacovm;{quote}2. send the tx as soon as possible, the first time passed with TPS=638, 2nd time failed.
{quote}
 

Let's try something - do 3 runs with every combination with the following changes that includes at least one of them (meaning- \{(01), (10), (11)} ):
 * [MaxInflightMsgs|https://gerrit.hyperledger.org/r/#/c/30018/10/sampleconfig/configtx.yaml] (in the future it's MaxInflightBlocks) is 5 by default. Let's set it to 1.
 * [RPCTimeout|https://gerrit.hyperledger.org/r/#/c/29717/2/sampleconfig/orderer.yaml] - make it 30s instead of the default 7s.;;;","19/Mar/19 12:06 AM;dongming;[~yacovm] Will do the 3 runs as you suggested.

Another data point, I did a run with 54 threads hitting 54 orderers instead of all 108 orderers few times and did NOT see the SERVICE_UNAVAILABLE issue.  So it seems the burst traffic is a factor.;;;","19/Mar/19 11:02 PM;dongming;[~yacovm]
I executed the same test with MaxInflightMsgs=1 twice successfully without the ""SERVICE_UNAVAILABLE"" issue. TPS=729.35 and 745.59 resp.

Do you think we need to run the test with RPCTimeout?;;;","20/Mar/19 12:30 AM;yacovm;[~jyellick] ^ 

?;;;","20/Mar/19 2:37 AM;dongming;close the issue per conversation with Jason;;;",,,,,,,,,,,,,,,,,,
Update commercial paper tutorial for cc lifecycle,FAB-14679,38524,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,odowdaibm,negupta,negupta,16/Mar/19 2:04 AM,12/Feb/20 7:49 AM,28/Oct/23 3:05 AM,12/Feb/20 7:26 AM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,,,,,,,denyeart,negupta,pandrejko,robmurgai,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:iwx49",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,negupta,pandrejko,robmurgai,silliman,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jan/20 10:26 PM;denyeart;[~odowdaibm] [~negupta] [~sstone1] The commercial paper tutorial still uses old lifecycle. Is this on anybody's radar for shifting over to new lifecycle?
Nick, minimally I think we'd want to put disclaimers around references to old lifecycle that remain in v2.0 docs, before v2.0 is released.;;;","20/Jan/20 11:57 PM;negupta;[~denyeart] Matt White and I decided that we are going to move the commercial paper tutorial to the new test network, and as part of that process, script out the deployment of the chaincode to the channel so that it does not take so much of the tutorial. That will fix issues with the sample and the doc.

Not sure when that will be done. I will add a quick disclaimer to the commercial paper between now and then.;;;","22/Jan/20 6:54 AM;robmurgai;I have been playing with it and am running into issues so if y'all are moving it to the new test network, it would be nice to get these looked at.

1) It's confusing to install things to the GOPATH.  If you are not a Go developer you honestly will find this confusing, like a GOPATH is where GO's installed, maybe? Why is fabric-samples supposed to be installed there?  Also why did I install fabric-samples wherever I wanted when I was playing with Fab Car, (which is right before Commercial Paper in the docs) and now have to re-install it at GOPATH?

2) When I downloaded samples with the following command, there was an issue I guess with ""Latest"" label so I had mismatches.
{noformat}
curl -sSL http://bit.ly/2ysbOFE| bash -s -- 2.0.0-beta 1.4.4 0.4.18{noformat}
 Curl didn't have any issues, but I guess I did not get all the right files, and when i ran start.sh, I had probs.
{noformat}
./start.sh

# Create the channel
docker exec -e ""CORE_PEER_LOCALMSPID=Org1MSP"" -e ""CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/msp/users/Admin@org1.example.com/msp"" peer0.org1.example.com peer channel create -o orderer.example.com:7050 -c mychannel -f /etc/hyperledger/configtx/channel.tx
2020-01-16 01:45:07.041 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized
Error: got unexpected status: BAD_REQUEST -- error validating channel creation transaction for new channel 'mychannel', could not succesfully apply update to template configuration: error authorizing update: error validating ReadSet: existing config does not contain element for [Group]  /Channel/Application/Org1MSP but was in the read set{noformat}
I finally got the curl command with the right versions from [~btl5037] and was able to get the right copies.  The problem is not just the fix, but also how it would be difficult for a new person to figure out that's what the problem is.

 
{noformat}
curl -sSL http://bit.ly/2ysbOFE | bash -s -- 2.0.0-beta 1.4.4 0.4.18{noformat}
 

 

3) Got start.sh to work and moved down to starting the cliMagnetoCorp container and ran into another issue

 
{noformat}
docker-compose -f docker-compose.yml up -d cliMagnetoCorp

Starting cliMagnetoCorp ... error

ERROR: for cliMagnetoCorp  Cannot start service cliMagnetoCorp: b'network e82916a3a6d6a367f92802ce14cdf6bdccfaed381b5a1cc1aea84b03f76dcaac not found'

ERROR: for cliMagnetoCorp  Cannot start service cliMagnetoCorp: b'network e82916a3a6d6a367f92802ce14cdf6bdccfaed381b5a1cc1aea84b03f76dcaac not found'
ERROR: Encountered errors while bringing up the project.{noformat}
Looks like I had an errant cliMagentoCorp container running already??  So my instinct would have been to execute stop.sh (I think that's what I did, not sure of this one, but I got something like

 
{noformat}
Removing network net_basic
ERROR: error while removing network: network net_basic id 03bbf0ecac081ec8ea0461c92ae8296f0397c81904a293a5d26dd6e584fcd9a6 has active endpoints
{noformat}
 

so I killed all my docker containers.  Then I went to the magnetoCorp directory

 
{noformat}
docker-compose down
 
Removing cliMagnetoCorp ... done
Network net_basic is external, skipping
{noformat}
Then again ./start.sh This time things started okay. 

4) Moving to magnetoCorp directory.

 
{noformat}
docker-compose -f docker-compose.yml up -d cliMagnetoCorp

Creating cliMagnetoCorp ... done{noformat}
Next step, installing Chaincode
{noformat}
docker exec cliMagnetoCorp peer chaincode install -n papercontract -v 0 -p /opt/gopath/src/github.com/contract -l node

2020-01-21 21:18:24.164 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 001 Using default escc
2020-01-21 21:18:24.164 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 002 Using default vscc
Error: error endorsing chaincode install: rpc error: code = Unknown desc = error validating proposal: access denied: channel [] creator org [Org1MSP]{noformat}
Ugh! Come on.  Back to debugging.   Once I figure out the issue here, I will post more.

 

 

 

 ;;;","29/Jan/20 9:53 PM;pandrejko;From Matthew White regarding the Commerical Paper sample:
The PR has built with running the java,node and golang variants, all with the new lifecycle. The 'quick-start' readme.md in the sample commercial-paper directory has also been updated to reflect the new changes.
Previously the tutorial had a mix of both using the cli containers, and local command line;  the flow felt confusing - and plus with test-network using the local apparoach (not the cli) container. I've swapped the README.md to do likewise and the CI scripts.
The CI scripts are cumbersome as the is a vast amount of duplication, but functional.
I'm going to take the WIP tag off - so any comments welcome.


 https://github.com/hyperledger/fabric-samples/pull/109;;;","05/Feb/20 6:59 AM;negupta;Hey [~robmurgai] Addressing your issues one by one with how the updated doc will address:

1. ) No more need for the GOPATH. Removing this section entirely.

2. ) For installation, directing users to the main install page: https://hyperledger-fabric.readthedocs.io/en/latest/install.html, so users will have the latest method to use bootstrap.sh

3. ) We are adding a script in the commercial paper directory that will start the test network. No CLI container necessary.

4. ) You do not need to use the CLI container to install cc anymore. We provide a script that will set an the env variables that are needed to interact with the test network.;;;","12/Feb/20 7:24 AM;negupta;https://github.com/hyperledger/fabric/pull/610;;;",,,,,,,,,,,,,,,,,,,,,,,
A broken link on README of integration,FAB-14680,38525,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,pandrejko,nnao,nnao,16/Mar/19 3:17 AM,04/Jun/19 6:12 AM,28/Oct/23 3:05 AM,04/Jun/19 5:17 AM,v2.0.0,,,,,v1.4.2,v2.0.0,,,fabric-docs,,,,,0,,,,,"There is a broken link.

{code:java}
You must have the following installed:
    * `go`_
    * `docker`_
...
.. _ginkgo: [https://golang.org/]
.._docker: [https://www.docker.com/]
{code}

I think it should be ""_go: [https://golang.org/]"" instead ""_ginkgo: [https://golang.org/]"".",,nnao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gfr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),nnao,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Mar/19 4:51 AM;nnao;https://gerrit.hyperledger.org/r/c/30126/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove hash from all getters/responses,FAB-14681,38526,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,ales,ales,16/Mar/19 4:48 AM,16/Mar/19 8:16 PM,28/Oct/23 3:05 AM,16/Mar/19 8:16 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14575,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gfz:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add stream id to error message,FAB-14682,38527,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,16/Mar/19 5:42 AM,17/Mar/19 4:09 AM,28/Oct/23 3:05 AM,17/Mar/19 4:09 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gg7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove dead code,FAB-14683,38529,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,16/Mar/19 10:06 PM,31/Mar/19 11:22 PM,28/Oct/23 3:05 AM,31/Mar/19 11:22 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ggn:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
log payload buffer size in gossip/state,FAB-14684,38530,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,16/Mar/19 10:33 PM,17/Mar/19 8:42 AM,28/Oct/23 3:05 AM,16/Mar/19 10:35 PM,,,,,,,,,,fabric-gossip,,,,,0,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ggv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,release-1.1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename PackageID file/package/directory,FAB-14685,38531,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,ales,ales,ales,16/Mar/19 11:05 PM,31/Mar/19 11:22 PM,28/Oct/23 3:05 AM,31/Mar/19 11:22 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gh3:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update to grpc-go 1.19,FAB-14686,38534,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,16/Mar/19 11:31 PM,17/Mar/19 8:14 PM,28/Oct/23 3:05 AM,17/Mar/19 8:14 PM,,,,,,v2.0.0,,,,,,,,,0,hygiene,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ghr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix memory leak - Skip adding block message from orderer to block puller if it isn't added to message store,FAB-14687,38535,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,17/Mar/19 5:03 AM,15/Jul/19 8:29 PM,28/Oct/23 3:05 AM,20/Mar/19 3:10 PM,,,,,,v1.1.2,v1.2.2,v1.4.1,v2.0.0,fabric-gossip,,,,,0,,,,,"The gossip channel's method AddToMsgStore adds a block message to both the block store and to the block puller.

However, it can be that the message isn't added to the block store due to it being too old. In such a case we must *not* add it to the block puller, because :
 * it is evicted by the invalidation trigger of the block store which is programmed to remove it from the block puller, so if the message wasn't added to the block message store, it also cannot be evicted and hence cannot trigger the invalidation trigger to remove it from the block puller.
 * If the message wasn't added to the message store, it means it is either resides in it, or shouldn't be added, so there is no reason to add it to the block puller as well.",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ghz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.3,release-1.4,release-2.5,release-2.4,main,release-1.1,release-1.2,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Mar/19 5:47 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/30141/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Check against the inner block message instead of the out update message,FAB-14688,38536,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,17/Mar/19 9:15 AM,26/Apr/19 3:35 AM,28/Oct/23 3:05 AM,26/Apr/19 3:35 AM,,,,,,,,,,fabric-gossip,,,,,0,,,,,"The gossip code that handles pull block data updates has an optimization that first performs a simulation of adding an inner block message to the message store, and only if the simulation is successful  - it then verifies the message.

The problem is that the simulation is done against the outer message, and thus the optimization does not occur.",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gi7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.3,release-1.4,release-2.5,release-2.4,main,release-1.1,release-1.2,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address data races in gossip msgstore and certstore,FAB-14689,38537,31531,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hagarm,hagarm,hagarm,17/Mar/19 6:45 PM,19/Mar/19 12:42 AM,28/Oct/23 3:05 AM,19/Mar/19 12:42 AM,,,,,,v2.0.0,,,,fabric-gossip,,,,,0,,,,,"WARNING: DATA RACE
Write at 0x00c00022f358 by goroutine 41:
 github.com/hyperledger/fabric/gossip/gossip.TestCertRevocation()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/certstore_test.go:148 +0x2ed
 github.com/hyperledger/fabric/gossip/gossip.TestCertRevocation()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/certstore_test.go:138 +0x1b5
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162

Previous write at 0x00c00022f358 by goroutine 47:
 sync/atomic.AddInt32()
 /usr/local/go/src/runtime/race_amd64.s:269 +0xb
 sync.(*Mutex).Unlock()
 /usr/local/go/src/sync/mutex.go:182 +0x54
 github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock.(*Mock).MethodCalled()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock/mock.go:396 +0x52f
 github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock.(*Mock).Called()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock/mock.go:333 +0x18c
 github.com/hyperledger/fabric/gossip/gossip.(*senderMock).Send()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/certstore_test.go:78 +0x127
 github.com/hyperledger/fabric/gossip/gossip/pull.(*pullMediatorImpl).SendReq()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/pull/pullstore.go:330 +0x841
 github.com/hyperledger/fabric/gossip/gossip/algo.(*PullEngine).processIncomingDigests()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/algo/pull.go:211 +0x6ee
 github.com/hyperledger/fabric/gossip/gossip/algo.(*PullEngine).initiatePull.func1()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/algo/pull.go:187 +0x41

Goroutine 41 (running) created at:
 testing.(*T).Run()
 /usr/local/go/src/testing/testing.go:878 +0x659
 testing.runTests.func1()
 /usr/local/go/src/testing/testing.go:1119 +0xa8
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162
 testing.runTests()
 /usr/local/go/src/testing/testing.go:1117 +0x4ee
 testing.(*M).Run()
 /usr/local/go/src/testing/testing.go:1034 +0x2ee
 main.main()
 _testmain.go:152 +0x332

Goroutine 47 (finished) created at:
 time.goFunc()
 /usr/local/go/src/time/sleep.go:172 +0x51
==================
--- FAIL: TestCertRevocation (7.19s)

 

 

WARNING: DATA RACE
Write at 0x00c0001b72e0 by goroutine 17:
 github.com/hyperledger/fabric/gossip/gossip/msgstore.TestExpiration.func1()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/msgstore/msgs_test.go:151 +0x100
 github.com/hyperledger/fabric/gossip/gossip/msgstore.(*messageStoreImpl).expireMessages()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/msgstore/msgs.go:212 +0x611
 github.com/hyperledger/fabric/gossip/gossip/msgstore.(*messageStoreImpl).expirationRoutine()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/msgstore/msgs.go:253 +0x205

Previous read at 0x00c0001b72e0 by goroutine 12:
 github.com/hyperledger/fabric/gossip/gossip/msgstore.TestExpiration()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/msgstore/msgs_test.go:181 +0x8dd
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162

Goroutine 17 (running) created at:
 github.com/hyperledger/fabric/gossip/gossip/msgstore.NewMessageStoreExpirable()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/msgstore/msgs.go:53 +0x115
 github.com/hyperledger/fabric/gossip/gossip/msgstore.TestExpiration()
 /Users/hagarmei/golang/src/github.com/hyperledger/fabric/gossip/gossip/msgstore/msgs_test.go:150 +0x199
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162

Goroutine 12 (running) created at:
 testing.(*T).Run()
 /usr/local/go/src/testing/testing.go:878 +0x659
 testing.runTests.func1()
 /usr/local/go/src/testing/testing.go:1119 +0xa8
 testing.tRunner()
 /usr/local/go/src/testing/testing.go:827 +0x162
 testing.runTests()
 /usr/local/go/src/testing/testing.go:1117 +0x4ee
 testing.(*M).Run()
 /usr/local/go/src/testing/testing.go:1034 +0x2ee
 main.main()
 _testmain.go:106 +0x332
==================
--- FAIL: TestExpiration (8.01s)",,hagarm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gif:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hagarm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Mar/19 6:50 PM;hagarm;https://gerrit.hyperledger.org/r/#/c/30155/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add logging to gossip pull,FAB-14690,38539,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,17/Mar/19 8:05 PM,29/Apr/19 6:47 PM,28/Oct/23 3:05 AM,29/Apr/19 6:47 PM,,,,,,,,,,fabric-gossip,,,,,0,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gin:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.3,release-1.4,release-2.5,release-2.4,main,release-1.1,release-1.2,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make block addition to msgStore and puller atomic,FAB-14691,38540,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,18/Mar/19 8:58 AM,20/Mar/19 6:48 PM,28/Oct/23 3:05 AM,19/Mar/19 7:23 PM,,,,,,,,,,fabric-gossip,,,,,0,,,,,"When adding a block to the message store, if it is added and not rejected - it is then added to the block puller.

When the block is removed from the message store, a callback is triggered to remove the block from the block puller.

However, these 2 operations are not atomic.

Since we can add a block to the message store from both *AddToMsgStore* (which is invoked by *Gossip()* )and from *HandleMessage*, we can have the following schedule:

 
 # A block with sequence of 100 is gossiped by the upper layer of the peer, and *AddToMsgStore* is called, which adds the block to the message store, and the CPU is preempted.
 # A block message 210 is received via *HandleMessage* and it causes the block 100 to be evicted from the message store, and the callback to remove the message from the block puller is called, but it is not removed because it is not there yet.
 # The block 210 is added to the block puller, since it was added to the message store.
 # The CPU is back to perform AddToMsgStore, and adds block 100 to the block puller.

Now the block puller has block 100, and the message store doesn't have block 100 anymore - which means it will never be evicted from the block puller.

To prevent this we need to make these 2 operations be atomic.

 ",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00giv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.3,release-1.4,release-2.5,release-2.4,main,release-1.1,release-1.2,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer exits if it tries to join a channel that requires capability that it does not support,FAB-14692,38541,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,aambati,aambati,18/Mar/19 9:04 AM,01/Dec/20 5:25 AM,28/Oct/23 3:05 AM,,,,,,,Future,,,,fabric-peer,,,,,0,,,,,"Currently, a peer exits either it tries to join a channel that requires a capability that it does not support or one of the updated capabilities of a channel that a peer has already joined is not supported by the peer. This is going to be a problem if the peer participates in multiple channels.

Instead of exiting, peer should stop participating in the offending channel and continue to participate in other channels.",,aambati,sheehan,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01h7v:r",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),aambati,sheehan,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Jun/19 7:41 AM;sykesm;This is actually a feature request hiding as a bug.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rebuild fabric-amcl package,FAB-14693,38542,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,18/Mar/19 5:34 PM,17/May/20 5:27 PM,28/Oct/23 3:05 AM,17/May/20 5:27 PM,,,,,,v2.0.0,,,,fabric-amcl,,,,,0,,,,,The Milagro crypto library which is the basis of fabric-amcl has been moved to Apache as an incubator.  Need to update the build scripts to use https://github.com/apache/incubator-milagro-crypto rather than the previous repo.,,btl5037,denyeart,mastersingh24,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16533,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gjb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,mastersingh24,ryjones,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Sep/19 10:57 PM;ryjones;Is this a blocker for, blocked by, or orthogonal to FAB-16533 ?;;;","03/Dec/19 8:28 AM;denyeart;[~mastersingh24] [~angelo.decaro] This should be done before v2.0 right?;;;","03/Dec/19 12:00 PM;btl5037;[~mastersingh24] What do you want to do with this? The milagro Go project was archived. The libraries only exist in C, Javascript and Rust.;;;","05/Dec/19 10:15 PM;denyeart;https://github.com/hyperledger/fabric-amcl/pull/2;;;","05/Dec/19 11:51 PM;mastersingh24;[https://github.com/hyperledger/fabric/pull/370];;;",,,,,,,,,,,,,,,,,,,,,,,,
skip channelConfig from commit hash,FAB-14694,38545,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,Senthil1,Senthil1,18/Mar/19 6:53 PM,26/Jul/19 3:08 AM,28/Oct/23 3:05 AM,28/Jun/19 3:59 PM,,,,,,v1.4.1,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gjz:",,,,Unset,Unset,v1.4.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Updating the channel without modifying the config file gives an incorrect error message,FAB-14695,38552,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,bharadwajambati1,bharadwajambati1,19/Mar/19 3:53 AM,09/Aug/19 12:55 AM,28/Oct/23 3:05 AM,19/Mar/19 5:29 AM,v1.4.1,,,,,v1.4.1,v2.0.0,,,,,,,,0,Raft,,,,"h2. Observed:

Found the below error message, while updating the channel with unmodified latest config block

 
{code:java}
Error: got unexpected status: BAD_REQUEST -- error applying config update to existing channel 'testorgschannel1': error authorizing update: ConfigUpdate for channel '' but envelope for channel 'testorgschannel1'
{code}
h2. Expected:

We expect to see the error message something like the following
{code:java}
error computing config update: no differences detected between original and updated config
{code}
 ",,bharadwajambati1,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14228,FAB-16260,,,,,,"19/Mar/19 4:20 AM;bharadwajambati1;addOrderer_update_in_envelope.json;https://jira.hyperledger.org/secure/attachment/16967/addOrderer_update_in_envelope.json",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00glj:",,,,Unset,Unset,,,,"1. Bring up the network with minimum of 1 orderer and 1 peer
2. Create and join the application channel(testorgschannel1)
3. Fetch the latest config.block from the orderersystemchannel or application channel
4. Update the channel using the correct steps, but without modifying the config.block",,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Mar/19 5:29 AM;jyellick;There was a {{configtxlator}} failure earlier in the script which resulted in bad input to the {{peer channel update}} command.  This error message is seemingly random because of the corrupted output from earlier.;;;","19/Mar/19 5:50 AM;jyellick;Although this was not directly fabric-samples, I suspect the underlying logic was probably copied from there.  This is another case where failing on non-zero return would be helpful: https://jira.hyperledger.org/browse/FAB-14325;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Incorrect last config metadata when creating genesis blocks for inactive channels,FAB-14696,38553,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,19/Mar/19 3:54 AM,21/Mar/19 5:19 AM,28/Oct/23 3:05 AM,21/Mar/19 5:19 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00glr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make orderer sign the metadata along with the block,FAB-14697,38556,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,19/Mar/19 6:02 AM,21/Mar/19 6:32 AM,28/Oct/23 3:05 AM,21/Mar/19 6:32 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gmf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update fabric to baseimage 0.4.15,FAB-14698,38562,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,19/Mar/19 6:19 PM,22/Mar/19 10:07 AM,28/Oct/23 3:05 AM,22/Mar/19 10:07 AM,,,,,,v1.4.1,v2.0.0,,,fabric-release,,,,,0,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gnr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Green path struct/var rename & skeleton functions,FAB-14699,38563,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,19/Mar/19 6:45 PM,08/Jun/19 1:31 AM,28/Oct/23 3:05 AM,26/Mar/19 6:56 PM,,,,,,,,,,,,,,,0,,,,,"Struct and variable renames, in response to review comments.

Skeleton functions in preparation for abort & recovery.

*No functional change.*",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gnz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Validate config update in broadcast phase,FAB-14700,38564,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,19/Mar/19 6:50 PM,08/Jun/19 1:33 AM,28/Oct/23 3:05 AM,26/Mar/19 6:56 PM,,,,,,,,,,,,,,,0,,,,,"Add methods to validate a config update in broadcast phase.

Validate a proposed config update versus the current config.

This the code that was removed from the Bundle.ValidateNew().

Checks the validity of the state transitions of a possible migration config update tx by comparing the current ConsensusType config with the next (proposed) ConsensusType fields. It is called during the broadcast phase and never changes the status of the underlying chain.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00go7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Review comments for https://gerrit.hyperledger.org/r/#/c/30119/,FAB-14701,38565,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,19/Mar/19 7:36 PM,31/Mar/19 11:22 PM,28/Oct/23 3:05 AM,31/Mar/19 11:22 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gof:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration test flake: Token EndToEnd basic solo network for token transaction,FAB-14702,38566,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,denyeart,denyeart,19/Mar/19 7:47 PM,17/Oct/19 9:45 PM,28/Oct/23 3:05 AM,17/Oct/19 9:45 PM,,,,,,,,,,fabric-token,,,,,0,ci-flake,,,,"https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7329/ 

 

06:07:13 • Failure in Spec Setup (BeforeEach) [16.569 seconds]
 06:07:13 Token EndToEnd basic solo network for token transaction bad path e2e [BeforeEach] user1 sends malformed TokenTransaction when serialized token transaction is empty should fail with BAD_PAYLOAD 
 06:07:13 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/token/token_test.go:654
 06:07:13 
 06:07:13 Timed out after 1.000s.
 06:07:13 Expected
 06:07:13 <<-chan struct {} | len:0, cap:0>: 0xc000955020
 06:07:13 to be closed
 06:07:13 
 06:07:13 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/token/token_test.go:356

06:08:42 [Fail] Token EndToEnd basic solo network for token transaction bad path e2e [BeforeEach] user1 sends malformed TokenTransaction when serialized token transaction is empty should fail with BAD_PAYLOAD 
 06:08:42 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/token/token_test.go:356
 06:08:42 
 06:08:42 Ran 18 of 18 Specs in 166.428 seconds
 06:08:42 FAIL! – 17 Passed | 1 Failed | 0 Pending | 0 Skipped
 06:08:42 — FAIL: TestEndToEnd (166.43s)",,denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gon:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/19 2:54 AM;denyeart;Hit again: https://gerrit.hyperledger.org/r/#/c/30895/;;;","12/Jul/19 10:39 PM;sykesm;https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/10107/console

Similar failure here:
{code}
15:07:13 ------------------------------
15:07:13 • Failure in Spec Setup (BeforeEach) [20.696 seconds]
15:07:13 Token EndToEnd basic solo network for token transaction bad path e2e  [BeforeEach] user1 sends malformed TokenTransaction when token action is transfer and transfer has no inputs  Should fail with INVALID_OTHER_REASON 
15:07:13 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/token/token_test.go:772
15:07:13 
15:07:13   Timed out after 1.000s.
15:07:13   Expected
15:07:13       <<-chan struct {} | len:0, cap:0>: 0xc0006fdf20
15:07:13   to be closed
15:07:13 
15:07:13   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/token/token_test.go:359
15:07:13 ------------------------------
15:08:44 •••••••••
15:08:44 
15:08:44 Summarizing 1 Failure:
15:08:44 
15:08:44 [Fail] Token EndToEnd basic solo network for token transaction bad path e2e  [BeforeEach] user1 sends malformed TokenTransaction when token action is transfer and transfer has no inputs  Should fail with INVALID_OTHER_REASON 
{code};;;","17/Oct/19 9:45 PM;sykesm;Token has been removed from master.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
BYFN has some lingering unused e2e stuff that ought to be removed,FAB-14703,38567,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,lehors,lehors,lehors,19/Mar/19 10:18 PM,21/Mar/19 12:16 AM,28/Oct/23 3:05 AM,21/Mar/19 12:16 AM,v1.4.0,,,,,v2.0.0,,,,fabric-samples,,,,,0,,,,,"byfn.sh generates a docker-compose-e2e.yaml file from docker-compose-e2e-template.yaml that is not used.

Unless we make this usable it is just confusing clutter.

Using it implies using fabric-ca so, I think it should simply be removed.

 ",,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gov:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Mar/19 12:16 AM;lehors;This stuff is actually used to run the Node.js SDK end to end test. As long this remains true this should be left alone. See:

https://hyperledger-fabric.readthedocs.io/en/latest/build_network.html#understanding-the-docker-compose-topology;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use multi-stage Docker builds for chaincode,FAB-14704,38571,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,mastersingh24,mastersingh24,mastersingh24,19/Mar/19 10:47 PM,26/Dec/20 7:23 PM,28/Oct/23 3:05 AM,26/Dec/20 7:23 PM,,,,,,,,,,,,,,,0,,,,,"The various platform builders currently use a builder image to build the chaincode binary and then add that to a separate container.  If we require Docker 17.05, we can move to multi-stage builds and build the images in a single shot.",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gpr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Dec/20 7:23 PM;mastersingh24;No longer needed with the custom builder and launcher;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
refactoring chain.processRegular duplicate code in orderer kafka,FAB-14705,38573,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,longcoding,longcoding,20/Mar/19 12:26 AM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,longcoding,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gq7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),longcoding,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
refactoring chain.processRegular duplicate code in orderer kafka source,FAB-14706,38574,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,longcoding,longcoding,20/Mar/19 12:27 AM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,0,stale-item,,,,,,longcoding,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gqf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),longcoding,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
refactoring chain.processRegular duplicate code in orderer kafka source,FAB-14707,38575,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,longcoding,longcoding,longcoding,20/Mar/19 12:28 AM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,Future,,,,,Future,,,,fabric-orderer,,,,,0,quality,stale-item,,,,,longcoding,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gqn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),longcoding,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Mar/19 1:55 AM;longcoding;[https://gerrit.hyperledger.org/r/#/c/30230/]

please review it.;;;","23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor core/comm tests,FAB-14708,38579,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,20/Mar/19 1:55 AM,20/Mar/19 6:19 PM,28/Oct/23 3:05 AM,20/Mar/19 6:19 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,Can shave off some time with some refactoring,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00grj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Operations missing config ClientRootCAs from orderer.yaml,FAB-14709,38580,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,dbshah,dbshah,20/Mar/19 3:21 AM,19/Nov/19 3:17 AM,28/Oct/23 3:05 AM,22/Mar/19 4:36 AM,v1.4.0,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,,,,,"In orderer logs the configs for operations are:
{code:java}
Operations.ListenAddress = ""0.0.0.0:8443""
Operations.TLS.Enabled = true
Operations.TLS.PrivateKey = ""/certs/tls/keystore/key.pem""
Operations.TLS.Certificate = ""/certs/tls/signcerts/cert.pem""
Operations.TLS.RootCAs = [/certs/tls/cacerts/cacert.pem]
Operations.TLS.ClientAuthRequired = false
Operations.TLS.ClientRootCAs = []
{code}
 

In orderer.yaml:

 
{code:java}
Operations:    # host and port for the operations server
    ListenAddress: 127.0.0.1:8443
    # TLS configuration for the operations endpoint
    TLS:        # TLS enabled
        Enabled: false
        # Certificate is the location of the PEM encoded TLS certificate
        Certificate:
        # PrivateKey points to the location of the PEM-encoded key
        PrivateKey:
        # Require client certificate authentication to access all resources
        ClientAuthRequired: false
        # Paths to PEM encoded ca certificates to trust for client authentication
        RootCAs: []
{code}
 

Comparing the above two, ClientRootCAs is missing from orderer.yaml. The only way to add that or override the config is to update the orderer.yaml. If we are running hyperledger fabric images, that means editing the `orderer.yaml` in the image and adding that field, only after that does the environment variable override work.

 

Can someone please look into if it was deliberately left or was missed. Also, comparing with the peer's operations config from core.yaml, the peer's config does not have a field for Operations.TLS.RootCAs but only has Operations.TLS.clientRootCAs.files.

 ",,dbshah,pandrejko,varadatibm,,,,,,,,,,,,,,,,,,,,,,FAB-14712,,,,,,,,,,,,,FAB-14329,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00grr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dbshah,pandrejko,varadatibm,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Mar/19 6:56 AM;pandrejko;[~sykesm] Hi Matt - Who can help resolve this?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
service discovery with channel1 raft orderers as a subset of system channel orderers,FAB-14710,38581,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,scottz,scottz,20/Mar/19 3:32 AM,20/Mar/19 5:15 AM,28/Oct/23 3:05 AM,20/Mar/19 5:15 AM,,,,,,v1.4.1,v2.0.0,,,fabric-quality,,,,,0,raft,,,,"Since each raft channel defines a set of orderers, we should ensure the SDKs can request service discovery for a named channel1 from the orderers and expect a response with an appropriate list of orderers in the consenter set for only that channel1.",,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14215,,,No,,Unset,No,,,"1|hzwzz8:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Mar/19 5:13 AM;yacovm;service discovery queries are channel scoped, so there is nothing to do... you can see for yourself by playing with the discovery CLI and looking at the orderers in the configuration query.;;;","20/Mar/19 5:15 AM;yacovm;nothing to be done;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Byfn,FAB-14711,38582,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,20/Mar/19 3:48 AM,31/Mar/19 11:22 PM,28/Oct/23 3:05 AM,31/Mar/19 11:22 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00grz:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer config options not in orderer.yaml cannot be overridden with env variables,FAB-14712,38584,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,denyeart,denyeart,20/Mar/19 7:56 AM,28/Mar/19 12:47 AM,28/Oct/23 3:05 AM,28/Mar/19 12:47 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,"Peer config options can be overridden by environment variable even if they are not included in core.yaml.

However, orderer config options not in orderer.yaml cannot be overridden with environment variables.  There should be consistent behavior across peer and orderer in this regard.",,denyeart,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14709,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gsf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Mar/19 7:58 AM;yacovm;[~sykesm];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
handle corner case in removing leader from 2-node cluster,FAB-14714,38586,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,guoger,guoger,20/Mar/19 12:53 PM,28/Oct/19 11:57 PM,28/Oct/23 3:05 AM,,,,,,,Future,,,,fabric-orderer,,,,,0,ipm,raft,,,"It is currently unsafe to remove node from 2-node cluster. Because if the node being removed is leader, Raft protocol requires it to remain connected and coordinate the commitment of this config change, even after restart. However, in current etcdraft implementation, Chain won't start if it cannot find itself among consenters. For more details, see Raft thesis 4.2.2

This requires orderer bootstrap logic to be changed considerably and we could defer it to v2",,guoger,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00sli:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Jun/19 1:22 PM;guoger;quote etcd implementation notes:
bq. This approach introduces a problem when removing a member from a two-member cluster: If one of the members dies before the other one receives the commit of the confchange entry, then the member cannot be removed any more since the cluster cannot make progress. For this reason it is highly recommended to use three or more nodes in every cluster.;;;","26/Jul/19 3:39 PM;guoger;I see this being moved to active iteration in ipm, however i'm not sure if this is worth tackling, given the amount of code change it entails vs the rarity of problem.

IMHO, as long as we suggest running at least 3 nodes in production, we are safe

wdyt [~yacovm] [~jyellick];;;","26/Jul/19 5:12 PM;yacovm;Wait, I thought that you changed the etcdraft chain to transfer leadership if the leader is removed? Why doesn't that solve our problem?;;;","26/Jul/19 5:18 PM;guoger;[~yacovm] that doesn't 100% prevent this from happening, as transfer may fail - i.e. network partition;;;","26/Jul/19 6:50 PM;yacovm;If there is network partition then you can't agree on anything anyway so aren't we safe?;;;","26/Jul/19 7:03 PM;guoger;consider the flow:
1. config block to remove current leader is agreed
2. leader disseminates conf change (1st round in Raft protocol)
3. follower acks conf change
4. *network partition occurs*
5. leader sends commit to follower (2nd round in Raft protocol) - *Fail*
6. leader apply conf change locally - *Success*
7. leader attempts leader transfer *Fail*

If the leader node reboots at any point after 1, it will not start Raft instance, as it does not find itself among consenter set. So the remaining node is stuck.

[~yacovm];;;","26/Jul/19 7:34 PM;yacovm;I thought that leadership transfer should take before actually handling the leader removal, and in any case the leader will never propose a block that removes itself, but the new leader will propose it...  isn't that the case?;;;",,,,,,,,,,,,,,,,,,,,,,
Homebrew fails to install gnutar with '--with-default-names' option,FAB-14715,38587,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,magpie73,magpie73,magpie73,20/Mar/19 3:01 PM,23/Jun/19 8:14 PM,28/Oct/23 3:05 AM,01/May/19 2:06 AM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,devenv,dev-setup,,,"The 'Setting up the development environment'([https://github.com/hyperledger/fabric/blob/master/docs/source/dev-setup/devenv.rst )|https://github.com/hyperledger/fabric/blob/master/docs/source/dev-setup/devenv.rst] doc says that macOS user should use Homebrew to install gnutar as follows:

    *brew install gnu-tar --with-default-names*

But it fails with following error .

   *Error: invalid option: --with-default-names*

The reason is '--with-default-names' option removed from Homebrew. 
 ( [https://github.com/Homebrew/homebrew-core/pull/35720] )

So the document should be modified to execute Homebrew without that option, then add path of gnutar to the environment variable($PATH) .

cf)

  *brew install gnu-tar* 
   *export PATH=""/usr/local/opt/gnu-tar/libexec/gnubin:$PATH""*

 ",,magpie73,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-1282,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gt3:",,,,Unset,Unset,,,,"Execute as follows with current version of Homebrew

brew install gnu-tar --with-default-names",,Unset,,,,,,Unset,,Unset,,(Please add usage information),magpie73,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Upgrade fabric-nodenv to Alpine 3.10,FAB-14716,38589,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,mastersingh24,mastersingh24,mastersingh24,20/Mar/19 5:25 PM,25/Oct/19 7:09 PM,28/Oct/23 3:05 AM,25/Oct/19 7:09 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,mastersingh24,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14571,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gtj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Mar/19 5:25 PM;mastersingh24;currently blocked by https://github.com/grpc/grpc-node/issues/401;;;","05/Apr/19 4:25 PM;mastersingh24;looks like this might be resolved with grpc@1.20.0;;;","16/Jun/19 8:51 PM;mastersingh24;https://gerrit.hyperledger.org/r/c/fabric-chaincode-node/+/31933;;;","18/Jun/19 10:27 PM;vijaypunugubati;Node ver-10.15.3 is configured in Jenkins by LF team yesterday evening, we can use it now. It took time from LF to configure the version.;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Explicitly pass validation dependencies to the Validate function of plugins,FAB-14717,38590,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,ales,ales,20/Mar/19 5:51 PM,02/Aug/19 12:57 AM,28/Oct/23 3:05 AM,02/Aug/19 12:57 AM,,,,,,,,,,,,,,,0,,,,,"As opposed to passing dependencies through init (and ensuring that they are always referring to the latest channel config), we should generate appropriate dependencies and supply them to each invocation of the Validation function of the plugins.

 

See [https://gerrit.hyperledger.org/r/#/c/30123/2/core/policy/application.go@90] and discussion",,ales,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-12221,,,No,,Unset,No,,,"1|i00gtr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Aug/19 12:57 AM;ales;We're ditching plugins anyway so no point in redesigning them;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove unnecessary function from interface,FAB-14718,38591,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,20/Mar/19 6:03 PM,04/Apr/19 10:36 PM,28/Oct/23 3:05 AM,04/Apr/19 10:36 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00gtz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Node from fabric-ccenv,FAB-14719,38592,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,20/Mar/19 6:07 PM,20/Sep/19 8:00 PM,28/Oct/23 3:05 AM,20/Mar/19 10:09 PM,,,,,,v2.0.0,,,,,,,,,0,hygiene,,,,We now use nodeenv to build and run Node CC so we can remove Node from the ccenv image,,baohua,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,FAB-10852,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gu7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,mastersingh24,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Mar/19 6:15 PM;mastersingh24;https://gerrit.hyperledger.org/r/30247;;;","20/Mar/19 10:28 PM;baohua;Curious to know which repo maintains nodeenv image now?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove support for CAR packages,FAB-14720,38593,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,20/Mar/19 6:10 PM,18/Jul/19 12:51 AM,28/Oct/23 3:05 AM,01/Apr/19 4:55 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15337,,,No,,Unset,No,,,"1|i00guf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Mar/19 9:05 PM;mastersingh24;https://gerrit.hyperledger.org/r/30565;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
RequestIssue should return error when no correct inputs are submitted,FAB-14721,38594,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bur,bur,bur,20/Mar/19 6:12 PM,01/Apr/19 8:22 PM,28/Oct/23 3:05 AM,01/Apr/19 8:22 PM,,,,,,,,,,,,,,,0,,,,,"RequestIssue currently returns an empty token transaction when the tokens are nil or empty, however, it should return an error.

Moreover, when no valid inputs are submitted also an error should be returned.
",,bur,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i00gun:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bur,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Mar/19 6:31 PM;bur;https://gerrit.hyperledger.org/r/#/c/30248/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deprecate CAR package format,FAB-14723,38598,38593,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,20/Mar/19 8:27 PM,01/Apr/19 4:55 PM,28/Oct/23 3:05 AM,01/Apr/19 4:55 PM,,,,,,v1.4.1,,,,,,,,,0,,,,,"It is desired to remove support for CAR packages in v2.0.  If we do so, we must deprecate the feature in v1.4.1",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gvj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Mar/19 8:43 PM;mastersingh24; https://gerrit.hyperledger.org/r/30250;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Reject config update that removes/adds a node, if it results in the loss of active quorum",FAB-14724,38599,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,20/Mar/19 10:24 PM,14/Aug/19 7:41 AM,28/Oct/23 3:05 AM,14/Aug/19 7:41 AM,,,,,,v2.0.0,,,,,,,,,0,ipm,raft,,,"The tricky part is that followers don't have the knowledge of active nodes in the network, so this info needs to be retrieved from leader.",,guoger,jyellick,kchristidis,,,,,,,,,,,,,,,,FAB-14799,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00n2c:r",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,jyellick,kchristidis,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Jul/19 11:45 PM;guoger;should newly added node be considered as active? for instance, given 3-node cluster with 2 active nodes, should addition of 4th node be rejected?

cc [~jyellick]

 ;;;","11/Jul/19 12:34 AM;jyellick;I would say ""No"", the new node should not be considered as a part of the active quorum.  I say this for a few different reasons:

1) Assuming this is a normal case operation where the node is already online and a member of the system channel, then it could take that node up to 10 minutes to discover he's been added to a channel, meaning adding the node could result in 10 minutes of downtime, in a normal operational case.
2) Assuming this is an addition to the orderer system channel, it is in general not possible to have the node already available, so there would almost definitely be a loss of quorum.
3) If adding a node would result in loss of quorum (if the node were inactive), then cluster can/should repair or eject any faulty nodes beforehand. (ie, by adding this check, we are not preventing any recovery scenarios I can think of).

Of course, there is one special case we will have to handle, and that's the transition from a 1 node to a 2 node cluster, in this case, we'll have to accept the loss of quorum.;;;","11/Jul/19 1:10 AM;guoger;[~jyellick] thanks for chiming in. Great, it is how i currently implemented it, pls take a look: https://gerrit.hyperledger.org/r/c/fabric/+/32221 (it accepts 1-> 2 transition);;;","14/Jul/19 12:55 PM;guoger;CR stack starts from https://gerrit.hyperledger.org/r/c/fabric/+/32311;;;","14/Aug/19 7:41 AM;kchristidis;Best as I can tell, story is done. Closing, but feel free to re-open if I'm wrong.;;;",,,,,,,,,,,,,,,,,,,,,,,,
Using Go mod to maintain vendors,FAB-14725,38600,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,baohua,baohua,20/Mar/19 10:25 PM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,0,stale-item,,,,"Since Golang v1.11, the module tool will become the official way to maintain vendored packages.

We should switch to that as using Golang v1.11.",,baohua,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gvz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-samples needs to be updated to work with fabric 2.0,FAB-14732,38608,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,lehors,lehors,lehors,21/Mar/19 12:36 AM,05/Jun/19 9:13 PM,28/Oct/23 3:05 AM,05/Jun/19 9:12 PM,,,,,,v2.0.0,,,,fabric-samples,,,,,0,,,,,"For one thing, the new configtxgen requires a channelID parameter and policies to be specified which makes about all existing samples fail. For instance:

 
{code:java}
$ cd fabric-samples/basic-network

$ ./generate.sh
org1.example.com
2019-03-20 16:27:12.901 CET [common.tools.configtxgen] main -> FATA 001 Missing channelID, please specify it with '-channelID'
Failed to generate orderer genesis block...

$ ./generate.sh
org1.example.com
2019-03-20 16:29:55.190 CET [common.tools.configtxgen] main -> INFO 001 Loading configuration
2019-03-20 16:29:55.198 CET [common.tools.configtxgen.localconfig] completeInitialization -> INFO 002 orderer type: solo
2019-03-20 16:29:55.198 CET [common.tools.configtxgen.localconfig] Load -> INFO 003 Loaded configuration: /Users/lehors/Projects/Go/src/github.com/hyperledger/fabric-samples/basic-network/configtx.yaml
2019-03-20 16:29:55.200 CET [common.tools.configtxgen.localconfig] completeInitialization -> INFO 004 orderer type: solo
2019-03-20 16:29:55.200 CET [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 005 Loaded configuration: /Users/lehors/Projects/Go/src/github.com/hyperledger/fabric-samples/basic-network/configtx.yaml
2019-03-20 16:29:55.200 CET [common.tools.configtxgen] main -> FATA 006 Error on outputBlock: could not create bootstrapper: could not create channel group: error adding policies to channel group: no policies defined
Failed to generate orderer genesis block...

{code}
 

 ",,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gxr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Jun/19 9:13 PM;lehors;Although this isn't quite complete, every identified item has either been handled or is tracked via other tasks.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update basic-network to work with fabric 2.0,FAB-14733,38609,38608,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,lehors,lehors,lehors,21/Mar/19 12:38 AM,03/May/19 9:00 PM,28/Oct/23 3:05 AM,03/May/19 9:00 PM,,,,,,v2.0.0,,,,fabric-samples,,,,,0,,,,," 

 
{code:java}
$ ./generate.sh
org1.example.com
2019-03-26 14:58:23.957 CET [common.tools.configtxgen] main -> FATA 001 Missing channelID, please specify it with '-channelID'
Failed to generate orderer genesis block...

[...]
2019-03-26 15:00:18.706 CET [common.tools.configtxgen] main -> FATA 006 Error on outputBlock: could not create bootstrapper: could not create channel group: error adding policies to channel group: no policies defined
Failed to generate orderer genesis block...

{code}
 ",,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15022,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gxz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/May/19 9:00 PM;lehors;This has now been addressed in relation to another issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update high-throughput to work with fabric 2.0,FAB-14734,38610,38608,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,lehors,lehors,lehors,21/Mar/19 12:39 AM,29/May/19 1:40 AM,28/Oct/23 3:05 AM,29/May/19 1:40 AM,,,,,,v2.0.0,,,,fabric-samples,,,,,0,,,,,,,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gy7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/May/19 1:40 AM;lehors;Addressed by https://gerrit.hyperledger.org/r/c/fabric-samples/+/30847;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Error while updating the channel with a new ordererorg,FAB-14735,38611,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,bharadwajambati1,bharadwajambati1,21/Mar/19 12:44 AM,09/Aug/19 12:55 AM,28/Oct/23 3:05 AM,26/Mar/19 6:26 AM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,Raft,,,,"h3. Observed:

Observed the following error while updating the channel(ordersystemchannel or testorgschannel1) with a new ordererorg(ordererorg2)
{code:java}
2019-03-20 09:20:39.935 EDT [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized
Error: got unexpected status: SERVICE_UNAVAILABLE -- update of more than one consenter at a time is not supported, requested changes: add 0 node(s), remove 3 node(s)
{code}
 

Besides the fact that the error occurs, we think the error message itself is not helpful in identifying the problem.

 

In contrast, the channel update was successful if we add a new ordererorg(ordererorg2) along with a new orderer(orderer4-ordererorg2) to this ordererorg(ordererorg2) in the same config update.
h3. Expected:

The channel should be updated successfully when only adding a new ordererorg

 

 

Below are the steps followed to update the channel:
 # Fetched latest config block and converted it into config.json
 # Modified the config.json by adding new ordererorg(ordererorg2) to the orderer groups in the config.json
 # Commands used for updating the channel
{code:java}
* configtxlator proto_encode --input config.json --type common.Config --output config.pb
* configtxlator proto_encode --input modified_config.json --type common.Config --output modified_config.pb
* configtxlator compute_update --channel_id $CHANNEL_NAME --original config.pb --updated modified_config.pb --output addOrdererOrg_update.pb
* configtxlator proto_decode --input addOrdererOrg_update.pb --type common.ConfigUpdate | jq . > addOrdererOrg_update.json
* echo '{""payload"":{""header"":{""channel_header"":{""channel_id"":""'$CHANNEL_NAME'"", ""type"":2}},""data"":{""config_update"":'$(cat addOrdererOrg_update.json)'}}}' | jq . > addOrdererOrg_update_in_envelope.json
* configtxlator proto_encode --input addOrdererOrg_update_in_envelope.json --type common.Envelope --output addOrdererOrg_update_in_envelope.pb
* peer channel update -f addOrdererOrg_update_in_envelope.pb -c $CHANNEL_NAME -o orderer1st-ordererorg1:7050 --tls --cafile $CORE_PEER_TLS_ROOTCERT_FILE{code}",,bharadwajambati1,C0rWin,denyeart,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14228,FAB-16260,,,,,,"21/Mar/19 3:07 AM;bharadwajambati1;config.json;https://jira.hyperledger.org/secure/attachment/16972/config.json","21/Mar/19 12:45 AM;bharadwajambati1;configtx.yml;https://jira.hyperledger.org/secure/attachment/16970/configtx.yml","21/Mar/19 3:08 AM;bharadwajambati1;modified_config.json;https://jira.hyperledger.org/secure/attachment/16973/modified_config.json",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gyf:",,,,Unset,Unset,,,,"1. Create a network with 3 orderers(all in one ordererorg) and 1 channel
2. Start sending traffic
3. While traffic is running, fetch the latest config block from orderersystemchannel or testorgschannel1
4. Update the config block with ordererorg2 in orderer groups
5. Update the channel with the modified config block",,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,C0rWin,denyeart,jyellick,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Mar/19 12:27 PM;jyellick;In review via https://gerrit.hyperledger.org/r/c/30260/ (release-1.4 merged)
Need master CR.;;;","22/Mar/19 10:57 PM;C0rWin;Unfortunately provided fix is not complete, added an IT 

{code}
	When(""Adding new orderer organization"", func() {
		It(""it will be added successfully"", func() {
			network = nwo.New(nwo.MultiNodeEtcdRaft(), testDir, client, BasePort(), components)
			network.GenerateConfigTree()
			network.Bootstrap()

			networkRunner := network.NetworkGroupRunner()
			process := ifrit.Invoke(networkRunner)
			Eventually(process.Ready(), network.EventuallyTimeout).Should(BeClosed())

			peer := network.Peer(""Org1"", ""peer1"")
			orderer := network.Orderer(""orderer1"")
			channel := ""systemchannel""

			config := nwo.GetConfig(network, peer, orderer, channel)
			updatedConfig := proto.Clone(config).(*common.Config)

			ordererOrg := updatedConfig.ChannelGroup.Groups[""Orderer""].Groups[""OrdererOrg""]
			mspConfig := &msp.MSPConfig{}
			proto.Unmarshal(ordererOrg.Values[""MSP""].Value, mspConfig)

			fabMSPConfig := &msp.FabricMSPConfig{}
			proto.Unmarshal(mspConfig.Config, fabMSPConfig)

			fabMSPConfig.Name = ""OrdererMSP2""

			mspConfig.Config, _ = proto.Marshal(fabMSPConfig)
			updatedConfig.ChannelGroup.Groups[""Orderer""].Groups[""OrdererMSP2""] = &common.ConfigGroup{
				Values: map[string]*common.ConfigValue{
					""MSP"": {
						Value:     utils.MarshalOrPanic(mspConfig),
						ModPolicy: ""Admins"",
					},
				},
				ModPolicy: ""Admins"",
			}

			nwo.UpdateOrdererConfig(network, orderer, channel, config, updatedConfig, peer, orderer)
		})
	})
{code}

which keeps failing in {{release-1.4}} branch which already contains fix merged.


Here provided the missing part: https://gerrit.hyperledger.org/r/30311 which concludes the fix, not IT passes. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
RAFT orderer excessive log message,FAB-14737,38613,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,dongming,dongming,21/Mar/19 2:51 AM,05/Apr/19 3:14 AM,28/Oct/23 3:05 AM,05/Apr/19 3:14 AM,,,,,,Future,,,,fabric-orderer,,,,,0,Raft,,,,"In testing 27 orderers with 27 channels, with orderer image:

orderer:
 Version: 1.4.1
 Commit SHA: 8da563d

the orderer log (Log Level=INFO) shows excessive same message as follow within a second.

Mar 19 18:16:29 orderer10-ordererorg2-74755b76d8-rz7j5 orderer10-ordererorg2 2019-03-19 22:16:29.567 UTC [orderer.consensus.etcdraft] Step -> INFO 2123 16 [logterm: 3, index: 773, vote: 18] ignored MsgPreVote from 9 [logterm: 2, index: 616] at term 3: lease is not expired (remaining ticks: 10) channel=testorgschannel14 node=22
Mar 19 18:16:29 orderer10-ordererorg2-74755b76d8-rz7j5 orderer10-ordererorg2 2019-03-19 22:16:29.567 UTC [orderer.consensus.etcdraft] Step -> INFO 2124 16 [logterm: 3, index: 773, vote: 18] ignored MsgPreVote from 9 [logterm: 2, index: 616] at term 3: lease is not expired (remaining ticks: 10) channel=testorgschannel14 node=22
Mar 19 18:16:29 orderer10-ordererorg2-74755b76d8-rz7j5 orderer10-ordererorg2 2019-03-19 22:16:29.567 UTC [orderer.consensus.etcdraft] Step -> INFO 2125 16 [logterm: 3, index: 773, vote: 18] ignored MsgPreVote from 9 [logterm: 2, index: 616] at term 3: lease is not expired (remaining ticks: 10) channel=testorgschannel14 node=22
Mar 19 18:16:29 orderer10-ordererorg2-74755b76d8-rz7j5 orderer10-ordererorg2 2019-03-19 22:16:29.567 UTC [orderer.consensus.etcdraft] Step -> INFO 2126 16 [logterm: 3, index: 773, vote: 18] ignored MsgPreVote from 9 [logterm: 2, index: 616] at term 3: lease is not expired (remaining ticks: 10) channel=testorgschannel14 node=22
Mar 19 18:16:29 orderer10-ordererorg2-74755b76d8-rz7j5 orderer10-ordererorg2 2019-03-19 22:16:29.567 UTC [orderer.consensus.etcdraft] Step -> INFO 2127 16 [logterm: 3, index: 773, vote: 18] ignored MsgPreVote from 9 [logterm: 2, index: 616] at term 3: lease is not expired (remaining ticks: 10) channel=testorgschannel14 node=22
Mar 19 18:16:29 orderer10-ordererorg2-74755b76d8-rz7j5 orderer10-ordererorg2 2019-03-19 22:16:29.567 UTC [orderer.consensus.etcdraft] Step -> INFO 2128 16 [logterm: 3, index: 773, vote: 18] ignored MsgPreVote from 9 [logterm: 2, index: 616] at term 3: lease is not expired (remaining ticks: 10) channel=testorgschannel14 node=22
Mar 19 18:16:29 orderer10-ordererorg2-74755b76d8-rz7j5 orderer10-ordererorg2 2019-03-19 22:16:29.567 UTC [orderer.consensus.etcdraft] Step -> INFO 2129 16 [logterm: 3, index: 773, vote: 18] ignored MsgPreVote from 9 [logterm: 2, index: 616] at term 3: lease is not expired (remaining ticks: 10) channel=testorgschannel14 node=22


Shall the number of the same messages be reduced in such a short time interval?",,dongming,guoger,jyellick,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Mar/19 11:19 PM;dongming;FAB-14737.log;https://jira.hyperledger.org/secure/attachment/16976/FAB-14737.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,8da563d,Unset,No,,,"1|i00gyv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,guoger,jyellick,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Mar/19 12:31 PM;jyellick;[~guoger] What do you think?;;;","22/Mar/19 4:27 PM;guoger;[~jyellick] i think the bigger problem here is why does node 9 repeatedly starts election in that period of time... [~dongming] do you have more info so i can debug?

the log message is from etcd/raft lib itself, we could probably name the logger passed into it, so user can choose to set different level for it.;;;","22/Mar/19 11:18 PM;dongming;[~guoger] I attached a snippet of log here.  The full log is available in LogDNA-community-quality-lab, search for orderer10-ordererorg2 at timestamp `Mar 19 6:16:00pm`.
This is a stress test with Log Level=INFO.;;;","02/Apr/19 12:10 PM;guoger;My theory is, node 9 sent {{MsgPreVote}} at reasonable interval (HeartbeatTimeout), however those messages are not processed instantaneously at recipient (bulked in either sender or receiver buffer). However, this turbulence shouldn't prevent cluster from eventually stablizing, as the test eventually passed election phase and started serving requests. (To confirm this theory, we'll need the log of orderer 9.)

Therefore, I think this can be tackled at communication layer (maybe through QoS)in the future, when we see a valid use case where dynamic network (nodes come and go) with dozens of nodes is needed.;;;","05/Apr/19 3:14 AM;scottz;J says this orderer is quickly processing the prevotes in the ingress Q from that other orderer. It is not a problem. And if anything it is a symptom of turbulence/delays due to other reasons.;;;",,,,,,,,,,,,,,,,,,,,,,,,
Do not use bccsp with cryptogen,FAB-14738,38616,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,21/Mar/19 3:46 AM,02/Jun/20 7:16 AM,28/Oct/23 3:05 AM,03/Jun/19 6:44 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABG-957,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gzj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/May/19 8:14 PM;mastersingh24;https://gerrit.hyperledger.org/r/31334;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Update the submodules for fabric, fabric-ca, fabric-sdk-node",FAB-14739,38617,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,sambhavdutt,sambhavdutt,21/Mar/19 4:06 AM,27/Mar/19 9:58 PM,28/Oct/23 3:05 AM,27/Mar/19 9:58 PM,v1.4.1,v2.0.0,,,,v1.4.1,v2.0.0,,,fabric-quality,,,,,0,ci-failure,,,,"The submodules for fabric, fabric-ca, fabric-sdk-node need to be updated to sync the Baseimage version 0.4.15",,latitiah,sambhavdutt,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00gzr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,sambhavdutt,scottz,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"26/Mar/19 12:16 AM;latitiah;https://gerrit.hyperledger.org/r/30355 - does not include fabric-sdk-node since it is not available for master at this time.

A new CR can be done for the sdk submodule.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
BYFN node error,FAB-14740,38619,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,negupta,negupta,21/Mar/19 5:08 AM,22/Mar/19 11:20 PM,28/Oct/23 3:05 AM,22/Mar/19 11:20 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,"Running the first-network sample with node chainocde on master results in the following error:

Error: endorsement failure during invoke. response: status:500 message:""failed to execute transaction ee10362944e7ba95b5317f8a038f31207d17e017da0e9749cf35f6e2b52212fe: [channel testchannel] could not launch chaincode mycc_1:d133f26a3d3ce4cf6f9bd06b03589802a54005b036c0684b151e42b654dce56e: error starting container: error starting container: Failed to generate platform-specific docker build: Failed to pull hyperledger/fabric-nodeenv:latest: API error (404): pull access denied for hyperledger/fabric-nodeenv, repository does not exist or may require 'docker login'""
!!!!!!!!!!!!!!! Invoke execution on peer0.org1 peer0.org2 failed !!!!!!!!!!!!!!!!
========= ERROR !!! FAILED to execute End-2-End Scenario ===========",,denyeart,mastersingh24,mbwhite,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14743,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00h07:",,,,Unset,Unset,,,,"(Please add steps to reproduce)
Use the docker images made from master and run the following:

./byfn.sh up -c testchannel -s couchdb -l node",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mastersingh24,mbwhite,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Mar/19 11:22 AM;denyeart;Due to the new nodeenv image in fabric-chaincode-node, you must now either build the nodeenv image from fabric-chaincode-node, or pull it from Nexus. For the latter I've pushed
FAB-14743 to update the script that pulls from Nexus. You can use this to pull nodeenv image as follows:


{code:java}
STABLE_VERSION=2.0.0-stable BASE_VERSION=2.0.0 ./scripts/pull_build_artifacts.sh --pull_Node_Images
{code}

or simply:


{code:java}
docker pull nexus3.hyperledger.org:10001/hyperledger/fabric-nodeenv:amd64-2.0.0-stable
docker tag nexus3.hyperledger.org:10001/hyperledger/fabric-nodeenv:amd64-2.0.0-stable hyperledger/fabric-nodeenv
{code}



;;;","21/Mar/19 11:26 AM;denyeart;With nodeenv pulled into local environment, it gets further in the chaincode instantiate image creation, but stills fails with the following error during instantiate step:


{code:java}
2019-03-21 02:24:40.942 UTC [core.comm] ServerHandshake -> ERRO 05f TLS handshake failed with error EOF server=ChaincodeServer remoteaddress=172.18.0.8:37938
2019-03-21 02:24:41.552 UTC [endorser] callChaincode -> INFO 060 [mychannel][f1b50292] Exit chaincode: name:""lscc""  (26138ms)
2019-03-21 02:24:41.552 UTC [endorser] SimulateProposal -> ERRO 061 [mychannel][f1b50292] failed to invoke chaincode name:""lscc"" , error: container exited with 0
github.com/hyperledger/fabric/core/chaincode.(*RuntimeLauncher).Launch.func1
	/go/src/github.com/hyperledger/fabric/core/chaincode/runtime_launcher.go:64
runtime.goexit
	/usr/local/go/src/runtime/asm_amd64.s:1333
chaincode registration failed
{code}

Note that the Go and Java chaincode options in BYFN works for me... only 
{code:java}
-l node
{code}
 fails.
Ideas [~mbwhite] [~mastersingh24]?;;;","21/Mar/19 7:19 PM;mbwhite;Honestly at the moment.. no ideas... I'll pull the latest images down now.;;;","21/Mar/19 7:32 PM;denyeart;Ok, the issue in my prior comment is being tracked as FAB-14741.;;;","21/Mar/19 9:52 PM;mbwhite;Have reproduced this locally - as far as I can tell.. this is the problem [https://github.com/grpc/grpc/issues/6722]

There's something about the SSL certs that node 10 & grpc are not happy with.;;;","22/Mar/19 11:20 PM;mastersingh24;This is now fixed with https://gerrit.hyperledger.org/r/30300 ;;;",,,,,,,,,,,,,,,,,,,,,,,
channel init failure using lifecycle,FAB-14742,38623,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,muralisr,muralisr,21/Mar/19 7:31 AM,24/May/19 1:16 PM,28/Oct/23 3:05 AM,24/May/19 1:16 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,"Restarting peer after deploying a lifecycle chaincode results in the following error on channel load:
{code:java}
^[[33m2019-03-20 18:18:52.268 EDT [peer] Initialize -> WARN 022^[[0m Failed to load ledger myc(could not check opaque org state for 'mycc' on channel 'myc': could not get value for key namespaces/metadata/mycc#1: could not create implicit collections for channel: could not get channelconfig for channel myc)
{code}

Basically a chicken/egg problem 


{code:java}
	for _, cid := range ledgerIds {
		peerLogger.Infof(""Loading chain %s"", cid)
		if ledger, err = ledgermgmt.OpenLedger(cid); err != nil { . -------> fails here; requires config block to get ChaincodeImplicitCollections
			peerLogger.Warningf(""Failed to load ledger %s(%s)"", cid, err)
			peerLogger.Debugf(""Error while loading ledger %s with message %s. We continue to the next ledger rather than abort."", cid, err)
			continue
		}
                 ...
		// Create a chain if we get a valid ledger with config block
		if err = createChain(cid, ledger, cb, sccp, pm, deployedCCInfoProvider, legacyLifecycleValidation, newLifecycleValidation); err != nil {     --------> config block is obtained here 
			peerLogger.Warningf(""Failed to load chain %s(%s)"", cid, err)
			peerLogger.Debugf(""Error reloading chain %s with message %s. We continue to the next chain rather than abort."", cid, err)
			continue
		}

		InitChain(cid)
	}
{code}
",,denyeart,jyellick,manish-sethi,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00h13:",,,,Unset,Unset,,,,"1. Start peer and join channel 'myc'.

2. Instantiate chaincode 'mycc"":

peer lifecycle chaincode package mycc.tar.gz --path ex02/cmd --label mycc
peer lifecycle chaincode install mycc.tar.gz
export CC_PACKAGE_ID=<set package ID>
peer lifecycle chaincode approveformyorg --channelID myc --name mycc --version 0 --init-required --package-id $CC_PACKAGE_ID --sequence 1  --waitForEvent
peer lifecycle chaincode commit -o 127.0.0.1:7050 --channelID myc --name mycc --version 0 --sequence 1 --init-required --waitForEvent
peer chaincode invoke -I -C myc -n mycc -c '{""Args"":[""invoke"",""a"", ""100"", ""b"", ""200""]}' -o 127.0.0.1:7050


3. kill peer

4. restart peer to see the failure",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,manish-sethi,muralisr,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Mar/19 8:18 AM;jyellick;[~ales] Could you take a look?;;;","21/Mar/19 9:08 AM;muralisr;[~ales] merely trying to be helpful... feel free to ignore if there are better approaches.

This section of code in *kvledger.initTxMgr* is the one that ends up requiring post config block operations.  Just separating this out into a new ""postOpen"" method and calling after *peer.createChain* should take care of the chicken/egg situation.


{code:java}
	qe, err := l.NewQueryExecutor()
	if err != nil {
		return err
	}
	defer qe.Done()
	for _, sl := range stateListeners {
		if err := sl.Initialize(l.ledgerID, qe); err != nil {
			return err
		}
	}
{code}

for [~manish-sethi] eyes;;;","23/Mar/19 4:46 AM;manish-sethi;Thanks [~muralisr] for catching this. Yes, your finding is also correct about the dependencies in the initialization cycle.

https://gerrit.hyperledger.org/r/#/c/30333/;;;","17/May/19 6:32 AM;denyeart;Switching back to In Review since the related tests are still in review: https://gerrit.hyperledger.org/r/#/c/30601/;;;","24/May/19 6:23 AM;manish-sethi;The test for this is included in - https://gerrit.hyperledger.org/r/#/c/fabric/+/31036/
Abandoned - https://gerrit.hyperledger.org/r/#/c/30601/;;;",,,,,,,,,,,,,,,,,,,,,,,,
Add nodeenv to pull_build_artifacts.sh,FAB-14743,38626,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,denyeart,denyeart,denyeart,21/Mar/19 11:14 AM,22/Mar/19 6:05 AM,28/Oct/23 3:05 AM,22/Mar/19 6:05 AM,,,,,,v2.0.0,,,,fabric-build,,,,,0,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14740,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00h1r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Mar/19 11:19 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/30265/;;;","22/Mar/19 6:04 AM;denyeart;Duplicate of https://gerrit.hyperledger.org/r/#/c/28210/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a blockchain solution developer, I need platform capability to transfer private data between collections",FAB-14744,38627,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,balaji.viswanathan,balaji.viswanathan,21/Mar/19 12:42 PM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,fabric-ledger,,,,,0,stale-item,,,,"In our solution, at the time of adding a private data on the ledger, we do not know the sub-set of peers it will need to be shared with. Hence, all new private data will be written to a single peer collection. The membership information is known only over time and then we need to share the private data with other peer(s) dynamically.

The expected effect (for that private data) is similar to expanding a collection membership with additional peers (i.e., new peers see the existing private data w/o any explicit txns performed by chaincode).

Option 1: 1 Collection created dynamically per key
 T1: Create CollectionK1 (peerA), Write K1 to CollectionK1
 T2: Create CollectionK2 (peerB), Write K2 to CollectionK2
 T3: Change Membership(CollectionK1) = peerA,peerB
 T4: Change Membership(CollectionK2) = peerA,peerB,peerC

K1 is visible to peerA and peerB. K2 is visible to peerA, peerB and peerC

Each collection will contain only 1 kv pair
 Cons: Management & Scalability?
   With millions of state variables, will need to create 1 collection per kv pair.
   Need to perform a chaincode instantiate/upgrade every time we change a collection membership (causing chaincode version bump and associated MVCC failures for unrelated in-flight txns)
    i.e., Millions of collections, Millions of collection spec changes.

Option 2: Pre-defined collections and Transfer private data across them.
 CollectionA (peerA)
 CollectionAB (peerA,peerB)
 CollectionABC (peerA,peerB,peerC)
 CollectionBC (peerB,peerC)

T1: Write K1 to CollectionA
 T2: Write K2 to CollectionA
 T3: Transfer K1 from CollectionA to CollectionAB <-- peerB has access to K1
 T4: Transfer K2 from CollectionA to CollectionABC <-- peerB & peerC have access to K2
 T5: Transfer K1 from CollectionABC to CollectionBC <-- peerA looses access to K1

 ",,balaji.viswanathan,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-5108,,,No,,Unset,No,,,"1|i00h1z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),balaji.viswanathan,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Alter snapshot integration test to be more harsh,FAB-14745,38634,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,21/Mar/19 6:54 PM,03/Apr/19 6:31 PM,28/Oct/23 3:05 AM,03/Apr/19 6:31 PM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,,,,,"Alter snapshot integration test to cover following case:
{code}
// Steps:
// - start o2 & o3
// - send several transactions so snapshot is created
// - kill o2 & o3, so that entries prior to snapshot are not in memory upon restart
// - start o1 & o2
// - assert that o1 can catch up with o2 using snapshot
{code}",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00h33:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Mar/19 6:59 PM;guoger;[https://gerrit.hyperledger.org/r/c/30270/] release-1.4
[https://gerrit.hyperledger.org/r/c/30518] master;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Counterfeiter failed to build as the required packages are not available,FAB-14746,38636,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Duplicate,rameshthoomu,sambhavdutt,sambhavdutt,21/Mar/19 7:04 PM,04/Apr/19 8:10 PM,28/Oct/23 3:05 AM,04/Apr/19 8:10 PM,v1.2.0,,,,,,,,,fabric-build,,,,,1,ci-failure,,,,"Counterfeiter failed to build as the required packages in +github.com/maxbrunsfeld/counterfeiter/v6/arguments+
 was not found.

*Branch:* release-1.2
 *Platform:* s390x, x86_64
 *Error Snippet:*
{code:java}
20:26:39 Building github.com/maxbrunsfeld/counterfeiter -> counterfeiter
20:26:40 package github.com/maxbrunsfeld/counterfeiter/v6/arguments: cannot find package ""github.com/maxbrunsfeld/counterfeiter/v6/arguments"" in any of:
20:26:40 	/opt/go/src/github.com/maxbrunsfeld/counterfeiter/v6/arguments (from $GOROOT)
20:26:40 	/opt/gotools/obj/src/github.com/maxbrunsfeld/counterfeiter/v6/arguments (from $GOPATH)
20:26:40 package github.com/maxbrunsfeld/counterfeiter/v6/generator: cannot find package ""github.com/maxbrunsfeld/counterfeiter/v6/generator"" in any of:
20:26:40 	/opt/go/src/github.com/maxbrunsfeld/counterfeiter/v6/generator (from $GOROOT)
20:26:40 	/opt/gotools/obj/src/github.com/maxbrunsfeld/counterfeiter/v6/generator (from $GOPATH)
20:26:40 gotools.mk:53: recipe for target 'gotool.counterfeiter' failed
{code}
*Build Log*
 [https://jenkins.hyperledger.org/view/Daily/job/fabric-nightly-release-job-release-1.2-x86_64/68/console]",,coffeeplease,denyeart,mastersingh24,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14783,,,FAB-14783,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,bfe2907bfc13eeb153edaa2a36615e26bfef294d,Unset,No,,,"1|i00h3j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),coffeeplease,denyeart,mastersingh24,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Mar/19 10:39 PM;coffeeplease;I believe this needs to be bumped to high priority. I'm seeing it affect 1.3 as well. 7 days ago, *counterfeiter* version bumped from *6.0.1* to *6.0.2*. This change is what's causing a crash loop during build of HLF:

 
{code:java}
Cloning into '/opt/gopath/src/github.com/hyperledger/fabric'...
make[1]: Entering directory `/opt/gopath/src/github.com/hyperledger/fabric'
Building github.com/maxbrunsfeld/counterfeiter -> counterfeiter
package github.com/maxbrunsfeld/counterfeiter/v6/arguments: cannot find package ""github.com/maxbrunsfeld/counterfeiter/v6/arguments"" in any of:
 /root/.gvm/gos/go1.10/src/github.com/maxbrunsfeld/counterfeiter/v6/arguments (from $GOROOT) {code}
[https://github.com/maxbrunsfeld/counterfeiter/tree/v6.0.1]

[https://github.com/maxbrunsfeld/counterfeiter/tree/v6.0.2]

 

 ;;;","27/Mar/19 11:23 PM;denyeart;This was resolved in release-1.2 with FAB-14783.

[~mastersingh24] From your statements in FAB-14783 you thought counterfeiter required Go 1.10.3, but release-1.3 is already at 1.10.4. Do we need a change in release-1.3?;;;","04/Apr/19 8:07 PM;mastersingh24;I don't see the issue on release-1.3 ... I just ran make buildenv with no issues.
I'm going to close this for now;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Clean up prover server unit test,FAB-14747,38639,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,KaoutarEL,KaoutarEL,KaoutarEL,21/Mar/19 8:16 PM,15/Apr/19 10:02 PM,28/Oct/23 3:05 AM,,,,,,,,,,,,,,,,0,,,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i00h47:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Remote peer authentication failed in gossip tests, failed to send TLS certificate",FAB-14748,38641,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,sambhavdutt,sambhavdutt,21/Mar/19 8:53 PM,07/Apr/19 3:31 AM,28/Oct/23 3:05 AM,07/Apr/19 3:31 AM,v1.4.0,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"The Remote peer authentication failed in gossip tests, endpoint claims to be a different peer and this failed to send TLS certificate,

*Branch:* release-1.4
*Platform:* x86_64
*Error Snippet:*

{code:java}
*21:47:43* [33m2019-03-21 01:47:22.579 UTC [gossip.comm#3000] SetDialOpts -> WARN 002[0m Given an empty set of grpc.DialOption, aborting*21:47:43* [33m2019-03-21 01:47:22.586 UTC [gossip.comm#1548] createConnection -> WARN 003[0m Remote endpoint claims to be a different peer, expected 6c6f63616c686f73743a31353531 but got 6c6f63616c686f73743a31353530*21:47:43* [33m2019-03-21 01:47:22.586 UTC [gossip.comm#1548] sendToEndpoint -> WARN 004[0m Failed obtaining connection for localhost:1550, PKIid:6c6f63616c686f73743a31353531 reason: authentication failure*21:47:43* [33m2019-03-21 01:47:24.590 UTC [gossip.comm#9611] authenticateRemotePeer -> WARN 005[0m 127.0.0.1:45584 didn't send TLS certificate*21:47:43* [31m2019-03-21 01:47:24.590 UTC [gossip.comm#9611] GossipStream -> ERRO 006[0m Authentication failed: No TLS certificate

21:47:43 [33m2019-03-21 01:47:32.620 UTC [gossip.comm#9611] authenticateRemotePeer -> WARN 01e[0m Failed reading messge from 127.0.0.1:45642, reason: timed out waiting for connection message from 127.0.0.1:45642
21:47:43 [31m2019-03-21 01:47:32.620 UTC [gossip.comm#9611] GossipStream -> ERRO 01f[0m Authentication failed: timed out waiting for connection message from 127.0.0.1:45642
21:47:43 --- FAIL: TestAccept (10.01s)
21:47:43     comm_test.go:916: 
21:47:43         	Error Trace:	comm_test.go:916
21:47:43         	            				comm_test.go:744
21:47:43         	Error:      	Not equal: 
21:47:43         	            	expected: 20
21:47:43         	            	actual  : 1
21:47:43         	Test:       	TestAccept
21:47:43         	Messages:   	Didn't receive all messages sent
21:47:43     comm_test.go:752: 
21:47:43         	Error Trace:	comm_test.go:752
21:47:43         	Error:      	Should NOT be empty, but was []
21:47:43         	Test:       	TestAccept
{code}

*Build Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-release-1.4-x86_64/72/",,C0rWin,denyeart,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,FAB-14140,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,02dace615a9dd4d304fbf5ed109a3c933f61dea7,Unset,No,,,"1|i00h4n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Mar/19 11:56 PM;sambhavdutt;Another *TestAccept* fail observed due to remote peer authentication fail.

*Branch:* master
*Platform:* s390x
*fabric commit:* abd9ab035cb960d7f80b7f20ae9e1f3ea25f6a9c

*Build Log:*
https://jenkins.hyperledger.org/view/Daily/job/fabric-unit-test-coverage-daily-master-s390x/63/consoleFull;;;","03/Apr/19 6:17 PM;C0rWin;There was line of work in master (v2.0.0) to take care of major root causes for gossip flaky tests, now to address those flakes for 1.4 fixes being backported:

https://gerrit.hyperledger.org/r/#/c/30632/
https://gerrit.hyperledger.org/r/#/c/30633/
https://gerrit.hyperledger.org/r/#/c/30634/
https://gerrit.hyperledger.org/r/#/c/30635/
https://gerrit.hyperledger.org/r/#/c/30636/
https://gerrit.hyperledger.org/r/#/c/30636/
https://gerrit.hyperledger.org/r/#/c/30672/
https://gerrit.hyperledger.org/r/#/c/30673/
https://gerrit.hyperledger.org/r/#/c/30673/
https://gerrit.hyperledger.org/r/#/c/30673/
https://gerrit.hyperledger.org/r/#/c/30676/
https://gerrit.hyperledger.org/r/#/c/30677/
https://gerrit.hyperledger.org/r/#/c/30678/
;;;","07/Apr/19 3:31 AM;C0rWin;Closing since stack of CRs above has been ported, they assumed to fix reported issue;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Install java chaincode on when new peer is added in BYFN,FAB-14749,38644,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,ales,negupta,negupta,21/Mar/19 9:08 PM,30/Mar/19 8:41 PM,28/Oct/23 3:05 AM,30/Mar/19 8:41 PM,,,,,,,,,,fabric-docs,,,,,0,,,,,"The current BYFN tutorial allows you to install a chaincode on a third peer, and join it the channel after it has been instantitated. [https://hyperledger-fabric.readthedocs.io/en/latest/build_network.html#install]

 

With the the new Fabric chaincode lifecycle, this chaincode does not have be the same language, as long as the chaincode definition has been committed. we could install a java or node chaincode on this third peer rather than another golang chaincode. It would be an easy to demonstrate the new capability maintaining the overall flow of the tutorial.",,mastersingh24,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00h5b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/19 8:41 PM;mastersingh24;There is no need to do this;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Token Operations in Proposal Response,FAB-14750,38645,35209,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,angelo.decaro,angelo.decaro,21/Mar/19 9:35 PM,02/Dec/19 11:14 PM,28/Oct/23 3:05 AM,02/Dec/19 11:14 PM,,,,,,,,,,fabric-token,,,,,0,fabtoken,,,,This task is about extending the in-flight endorsement context to include also the token operations. The token operations are then taken from the context and passed to the layer that assembles the proposal response.,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00h5j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SimulateProposal to return TokenOperationSets,FAB-14751,38646,35209,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,angelo.decaro,angelo.decaro,angelo.decaro,21/Mar/19 9:45 PM,02/Dec/19 11:13 PM,28/Oct/23 3:05 AM,02/Dec/19 11:13 PM,,,,,,v2.0.0,,,,fabric-token,,,,,0,fabtoken,,,,"This task is about the following updates:
 # core/endorser/endorser.go#SimulateProposal to returns the arrays of token operation set.
 # core/endorser/endorser.go#ProcessProposal to pass the token operation sets to the layer that endorses the simulation results.",,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00h5r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Mar/19 7:26 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/30401/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
move request throttling from comm to qscc,FAB-14752,38647,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,21/Mar/19 11:06 PM,22/Mar/19 4:58 PM,28/Oct/23 3:05 AM,22/Mar/19 4:58 PM,,,,,,v2.0.0,,,,,,,,,0,ipm-planned,,,,"Current throttle is not configurable and at the wrong level... 

Longer term, the throttle should be moved down to the layers that perform the most syscall operations, mostly file, and largely at ledger and block store layer.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00h5z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Remove an OSN, while traffic is running, and onboard same orderer again",FAB-14753,38651,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,scottz,scottz,22/Mar/19 12:41 AM,24/Jul/19 5:50 AM,28/Oct/23 3:05 AM,24/Jul/19 5:50 AM,,,,,,v1.4.2,v2.0.0,,,fabric-quality,,,,,0,Raft,,,,"Test similar to that as described in FAB-14357:

With traffic running, do the following variations dynamically with config updates:
 # Remove an orderer from channel1, then restart the orderer, and then submit a config update to add it again to channel1, using same certs, with ledger and artifacts intact. Use persistent volume claims (PVC) to maintain the data. (And maybe we should repeat this case, in between removal and addition of an orderer, submit a config update to add a DIFFERENT orderer too.)
 # VOID: Remove an orderer from channel1, then restart it, and then add it again to channel1, using same certs, but fresh without any ledger and artifacts. (We originally thought we could simply restart the pod and skip using any persistent volumes for the data in k8s, as in scenario 4. But then restarting the node would mean losing all the data for all the channels. Thus we will skip this scenario because an operator would not likely have access to remove ledger and wal data for just one application channel. Refer to scenario 4, which encompasses this.)
 # Remove an orderer from channel1, AND remove it from orderer system channel too;  then add the same orderer to orderer system channel AND to channel1 again, using same certs with ledger and artifacts intact. Fetch the latest block from system channel and then restart the orderer. Use PVCs. 
 # Remove an orderer from channel1 AND orderer system channel, add it again to orderer system channel AND channel1. After a couple of minutes fetch the latest config block from the system channel and finally restart it fresh using same certs but without any ledger and artifacts; to do this, we will NOT use PVCs for the data in k8s, thus the artifacts will be removed when we restart the pod containing the orderer.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14357,,,,FAB-14762,,,"27/Mar/19 11:22 PM;bharadwajambati1;scenario-1.txt;https://jira.hyperledger.org/secure/attachment/17003/scenario-1.txt","27/Mar/19 11:22 PM;bharadwajambati1;scenario-3.txt;https://jira.hyperledger.org/secure/attachment/17004/scenario-3.txt","27/Mar/19 11:22 PM;bharadwajambati1;scenario-4.txt;https://jira.hyperledger.org/secure/attachment/17005/scenario-4.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|hzwqrq:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,"Tested scenario 1,3 and 4. All the scenarios were passed.",System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
modify raft config parameters,FAB-14754,38652,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,scottz,scottz,22/Mar/19 1:22 AM,24/Jul/19 5:50 AM,28/Oct/23 3:05 AM,24/Jul/19 5:50 AM,,,,,,v1.4.2,v2.0.0,,,fabric-quality,,,,,0,Raft,,,,"Using a setup similar to FAB-14357, with traffic running, an orderer admin will submit config updates to the orderer for an application channel, to modify one or multiple of these parameters defined in the configtx.yaml:

{{Orderer:
     BatchTimeout: 2s
     BatchSize:
 MaxMessageCount: 500
         AbsoluteMaxBytes: 10 MB
         PreferredMaxBytes: 2 MB
     EtcdRaft:
         Options:
             SnapshotIntervalSize: 20 MB}}

Note: the following EtcdRaft Options require orderer restart, so changing them is supported only during system maintianence window, so we will NOT change and test them:
 *    TickInterval: 500ms
 *    ElectionTick: 10
 *    HeartbeatTick: 1
 *    MaxInflightBlocks: 5       ",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14357,,,,,,,"27/Mar/19 5:47 AM;bharadwajambati1;scenario.txt;https://jira.hyperledger.org/secure/attachment/17001/scenario.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|hzwqrq:i",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add prover peer to glossary,FAB-14755,38653,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,22/Mar/19 2:23 AM,03/Dec/19 3:16 AM,28/Oct/23 3:05 AM,13/Apr/19 1:04 AM,,,,,,,,,,fabric-docs,,,,,0,,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11144,,,No,,Unset,No,,,"1|i00h73:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/19 5:46 AM;negupta;https://gerrit.hyperledger.org/r/30509;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add FabToken to glossary,FAB-14756,38654,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,22/Mar/19 2:25 AM,03/Dec/19 3:16 AM,28/Oct/23 3:05 AM,13/Apr/19 1:04 AM,,,,,,,,,,fabric-docs,,,,,0,,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11144,,,No,,Unset,No,,,"1|i00h7b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/19 5:46 AM;negupta;https://gerrit.hyperledger.org/r/30509;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update system chaincode pluggins tutorial,FAB-14757,38655,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,22/Mar/19 2:30 AM,01/Apr/19 12:57 AM,28/Oct/23 3:05 AM,01/Apr/19 12:57 AM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,,,,,Add _lifecycle and indicate that LSCC is a legacy feature.,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00h7j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Mar/19 3:15 AM;negupta;https://gerrit.hyperledger.org/r/#/c/30288/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor Viper,FAB-14758,38656,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,dereckluo,btl5037,btl5037,22/Mar/19 3:43 AM,10/Jul/19 1:31 AM,28/Oct/23 3:05 AM,10/Jul/19 1:31 AM,,,,,,v2.0.0,,,,,,,,,0,ipm,,,,"Hyperledger Fabric currently uses version 1.0.0 of the spf13/Viper package and is currently locked at an older revision for managing Fabric's configuration files. We want remove the dependency on Viper and introduces a codified solution for managing network configurations.

Viper used to support case-insensitive keys, despite the YAML specification calling for case-sensitivity. In mid-2016 Viper adopted a case-sensitive model (specifically adopting lowercase keys) to re-align itself with the YAML spec, and now, when keys are read into Viper, its Getter methods, which return the data in the configuration files, now return maps, where subsets of data are only returned if their respective keys are lowercase in the configuration file.

While parts of Fabric follow both the YAML and Viper spec's, there are also several parts, namely the Orderer, which have keys defined in PascalCase. When newer versions of Viper are used, these keys, and their subsets are not parsed and do not become part of the configuration object. Simply changing the config files to all lowercase is not enough to address this, as parts of the code assume these keys are defined in their original PascalCase, and calls to the Viper configuration return no results as the case-sensitive keys no longer match. Viper is now permanently locked at its current version, unless we re-architect our current implementation across all of Fabric.

Also of note is, currently in Fabric, the configuration file tells the network what model it's configuration file represents. There is no mechanism in code to define what a ""valid"" configuration file is. This allows users to define keys and values in the files which Fabric does not otherwise provide a mechanism for support. It also allows developers to use Viper to add and store data in the configuration objects which are not part of a ""valid"" configuration.

Because of these breaking changes, and our need to define what a valid configuration is, the end goal of this story is to decouple Fabric from Viper, and provide our own codified solution for managing the configuration internally.

At the conclusion of this story the following work should be completed:
 - Fabric should only support one naming convention for configuration file keys, and all existing calls should be configured as such
 - Starting a network should generate TopLevel structs, that defines the structure of the individual elements of the network configuration. As the child structs are initialized they are added to the parent struct for future use
 - Fabric should remove all calls to Viper and replace them with calls to the configuration structs
 - All utilities built around Viper should be reconfigured to use the native configuration structs, simplified as much as possible, and removed where possible
 - The Fabric build process should provide some mechanism for generating valid configuration file templates based on the codified configuration data structure
 - This process should also provide some mechanism for generating comments in the template file for each key, providing information on what that key is for and it's attributes, such as whether it is optional
 - This process should also provide a mechanism for admins to hide attributes that are generated in the templates, that are both optional, and not easily configurable by the lay user

Ultimately Fabric's configuration should be defined by the code, Viper should be removed, and the configuration should be consumed in a read-only manner",,btl5037,guoger,mastersingh24,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c0a:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,guoger,mastersingh24,yoheiueda,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/19 6:37 PM;guoger;as part of this work, maybe we could refactor orderer to do the same (remove kingpin)? [~jyellick];;;","01/May/19 8:01 AM;mastersingh24;[~guoger] - not sure that removing kingpin is related per se; I think we need to decide what we want to use for our cli / cmds.
peer clearly started with cobra but then kingpin was introduced and used for the other ""tools"" ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Audit Fabric to determine the usage of Viper throughout project,FAB-14759,38657,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,dereckluo,btl5037,btl5037,22/Mar/19 3:44 AM,26/Mar/19 3:05 AM,28/Oct/23 3:05 AM,26/Mar/19 3:04 AM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00h7r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI: _lifecycle commands should default to using the -waitForEvent flag,FAB-14760,38659,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,22/Mar/19 4:18 AM,30/Mar/19 5:49 AM,28/Oct/23 3:05 AM,30/Mar/19 5:49 AM,,,,,,,,,,,,,,,0,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00h87:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Mar/19 4:39 AM;wlahti;https://gerrit.hyperledger.org/r/c/30291/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Throttle file access operations that pin go routine to a pthread,FAB-14761,38660,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,sykesm,sykesm,22/Mar/19 5:08 AM,18/Feb/20 3:50 AM,28/Oct/23 3:05 AM,18/Feb/20 3:37 AM,,,,,,v2.1.0,,,,fabric-ledger,,,,,0,,,,,"FAB-13347 reports the following: 

{quote}
While using `channel.queryBlock(qi)` to query the blocks, if there are more than 10K threads, the peer crashes.
{quote}

In response to that, we applied a very naive change at the highest comm layer to limit the concurrency of grpc requests with the understanding that it wasn't optimal. That change has (of course) impacted performance so, as a middle ground, we've moved the the throttle to qscc.

The reality is that the vast majority of system calls in the peer which cause the creation of new pthreads come from file access. In particular, os.Open/OpenFile and File.ReadAt were the source of the pinned threads in the test that resulted in a crash.

Auditing the code, most file access occurs during chanicode deployment, statedb access, and block access.

Examples:
{code}
common/ledger/blockledger/json/impl.go
common/ledger/util/ioutil.go
common/ledger/testutil/test_util.go
common/ledger/blkstorage/fsblkstorage/block_stream.go
common/ledger/blkstorage/fsblkstorage/blockfile_rw.go
{code}

While file access is not the only source of pthread creation, it's significant enough to warrant some explicit limits to prevent resource exhaustion.",,btl5037,denyeart,dhuseby,guoger,kchristidis,manish-sethi,ryjones,Senthil1,sykesm,wenjian,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,btl5037,guoger,kchristidis,manish-sethi,Senthil1,wenjian,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0i",,Yes,,Unset,Unset,v2.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,dhuseby,guoger,kchristidis,manish-sethi,ryjones,Senthil1,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Mar/19 5:08 AM;sykesm;/cc [~denyeart];;;","22/Mar/19 5:23 AM;sykesm;Example stacks:

{code}
goroutine 1231582 [syscall]:
syscall.Syscall6(0x11, 0x3f, 0xc00b092600, 0xfaf, 0x6c630, 0x0, 0x0, 0xc000272d50, 0xc00b195e98, 0x4a79fd)
	/opt/go/src/syscall/asm_linux_amd64.s:44 +0x5
syscall.Pread(0x3f, 0xc00b092600, 0xfaf, 0x1005, 0x6c630, 0x3, 0xc000052570, 0xc000052500)
	/opt/go/src/syscall/zsyscall_linux_amd64.go:1311 +0x72
internal/poll.(*FD).Pread(0xc002f901e0, 0xc00b092600, 0xfaf, 0x1005, 0x6c630, 0x2a3e64859d02b800, 0xc00b195f58, 0xc00b196020)
	/opt/go/src/internal/poll/fd_unix.go:196 +0x9f
os.(*File).pread(0xc002c7c270, 0xc00b092600, 0xfaf, 0x1005, 0x6c630, 0x552eb640aee0ccb0, 0xd38da93b5979815, 0xc00013a900)
	/opt/go/src/os/file_unix.go:258 +0x58
os.(*File).ReadAt(0xc002c7c270, 0xc00b092600, 0xfaf, 0x1005, 0x6c630, 0x0, 0x0, 0x0)
	/opt/go/src/os/file.go:126 +0xfd
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*iStorageReader).ReadAt(0xc002ad5540, 0xc00b092600, 0xfaf, 0x1005, 0x6c630, 0x4c7ad96ea5cfab83, 0xbaa4b2f0838145ab, 0x8b9acd932fe89f20)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/storage.go:49 +0x5f
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/table.(*Reader).readRawBlock(0xc0027d88f0, 0x6c630, 0xfaa, 0xc00b0a9101, 0xc00b196260, 0xb1a2ea, 0xc000272bd0, 0xc00b0a91f0, 0xc0000c6900)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/table/reader.go:564 +0xb5
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/table.(*Reader).readBlock(0xc0027d88f0, 0x6c630, 0xfaa, 0x1, 0xc000000008, 0xc008f9e380, 0x60)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/table/reader.go:603 +0x55
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/table.(*Reader).readBlockCached.func1(0xc00b0a9210, 0xc000142740, 0xc000142700)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/table/reader.go:627 +0x51
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/cache.(*Cache).Get(0xc000142740, 0x117b, 0x6c630, 0xc00b196360, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/cache/cache.go:389 +0x1d8
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/cache.(*NamespaceGetter).Get(0xc002985450, 0x6c630, 0xc00b196360, 0x52)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/cache/cache.go:58 +0x4b
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/table.(*Reader).readBlockCached(0xc0027d88f0, 0x6c630, 0xfaa, 0xb20101, 0xc009759bcd, 0x2, 0x70ea, 0xfaa, 0x2)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/table/reader.go:625 +0xc3
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/table.(*Reader).getDataIter(0xc0027d88f0, 0x6c630, 0xfaa, 0x0, 0x101, 0x5, 0xc00b18a4b0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/table/reader.go:765 +0x5b
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/table.(*Reader).find(0xc0027d88f0, 0xc00b15c6c0, 0x5a, 0x5a, 0xc00b196501, 0xc0001e30b0, 0xc000142900, 0x0, 0x0, 0x0, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/table/reader.go:861 +0x475
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/table.(*Reader).Find(0xc0027d88f0, 0xc00b15c6c0, 0x5a, 0x5a, 0x1, 0xc0001e30b0, 0xc000140400, 0xc0001bee40, 0x52, 0x5a, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/table/reader.go:918 +0x7a
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*tOps).find(0xc0002730e0, 0xc0003d7e00, 0xc00b15c6c0, 0x5a, 0x5a, 0xc0001e30b0, 0x0, 0x0, 0x0, 0x0, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/table.go:382 +0x132
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*version).get.func1(0x2, 0xc0003d7e00, 0x52)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/version.go:176 +0x452
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*version).walkOverlapping(0xc0027f34f0, 0x0, 0x0, 0x0, 0xc00b15c6c0, 0x5a, 0x5a, 0xc00b196880, 0xc00b196850)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/version.go:125 +0x477
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*version).get(0xc0027f34f0, 0x0, 0x0, 0x0, 0xc00b15c6c0, 0x5a, 0x5a, 0xc0001e30b0, 0x3fff00, 0x0, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/version.go:160 +0x2b2
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).get(0xc000162d00, 0x0, 0x0, 0x0, 0x0, 0xc00b15c660, 0x52, 0x60, 0x3ecb18, 0xc0001e30b0, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:779 +0x397
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).Get(0xc000162d00, 0xc00b15c660, 0x52, 0x60, 0xc0001e30b0, 0x0, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:845 +0x12f
github.com/hyperledger/fabric/common/ledger/util/leveldbhelper.(*DB).Get(0xc000142600, 0xc00b15c660, 0x52, 0x60, 0x52, 0xc00b15c660, 0x11, 0x60, 0xc00b15aac0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/ledger/util/leveldbhelper/leveldb_helper.go:99 +0x74
github.com/hyperledger/fabric/common/ledger/util/leveldbhelper.(*DBHandle).Get(0xc00128d180, 0xc00b0d8910, 0x41, 0x50, 0x41, 0xc00b0d8910, 0x1, 0x50, 0x27)
	/opt/gopath/src/github.com/hyperledger/fabric/common/ledger/util/leveldbhelper/leveldb_provider.go:69 +0x135
github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage.(*blockIndex).getTxLoc(0xc00128fe20, 0xc00b15aa80, 0x40, 0xc00b196d48, 0x1, 0x1)
	/opt/gopath/src/github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage/blockindex.go:236 +0x12f
github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage.(*blockfileMgr).retrieveTransactionByID(0xc0012be600, 0xc00b15aa80, 0x40, 0x42c5f1, 0x126e0d8, 0xc00b196dd0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage/blockfile_mgr.go:515 +0xd7
github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage.(*fsBlockStore).RetrieveTxByID(0xc00128d4a0, 0xc00b15aa80, 0x40, 0xc00b196e00, 0xcd704e, 0x1f27720)
	/opt/gopath/src/github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage/fs_blockstore.go:72 +0x43
github.com/hyperledger/fabric/core/ledger/kvledger.(*kvLedger).GetTransactionByID(0xc0012bfaa0, 0xc00b15aa80, 0x40, 0x10, 0x13899a0, 0xc001228280)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger.go:204 +0x4f
github.com/hyperledger/fabric/core/endorser.(*SupportImpl).GetTransactionByID(0xc0003b60c0, 0xc00b03dad0, 0x10, 0xc00b15aa80, 0x40, 0x3, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/support.go:86 +0x89
github.com/hyperledger/fabric/core/endorser.(*Endorser).preProcess(0xc0003a1140, 0xc007a758b0, 0xc00014c6e8, 0xc00b197228, 0x2)
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:375 +0x709
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal(0xc0003a1140, 0x137e360, 0xc008171aa0, 0xc007a758b0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:408 +0x20b
github.com/hyperledger/fabric/core/handlers/auth/filter.(*expirationCheckFilter).ProcessProposal(0xc0003b10d0, 0x137e360, 0xc008171aa0, 0xc007a758b0, 0x107a3a0, 0x40d100, 0x2b54a05b4f10)
	/opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/expiration.go:61 +0x8f
github.com/hyperledger/fabric/core/handlers/auth/filter.(*filter).ProcessProposal(0xc0003b1090, 0x137e360, 0xc008171aa0, 0xc007a758b0, 0xc0003b1090, 0x16, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/filter.go:32 +0x51
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler.func1(0x137e360, 0xc008171aa0, 0x1171b80, 0xc007a758b0, 0xc009fcf438, 0x7891b8, 0xc00b0aafc0, 0xc008171afe)
	/opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:169 +0x86
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1(0x137e360, 0xc008171aa0, 0x1171b80, 0xc007a758b0, 0x0, 0x137e3fe, 0xc008171aa0, 0xc00aedb980)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:31 +0x118
github.com/hyperledger/fabric/common/grpclogging.UnaryServerInterceptor.func1(0x137e360, 0xc008171aa0, 0x1171b80, 0xc007a758b0, 0xc00b079f40, 0xc007a75900, 0xc0038da980, 0x49fa26, 0x5c196cac, 0xc026dcee45)
	/opt/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server.go:91 +0x265
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1(0x137e360, 0xc008171830, 0x1171b80, 0xc007a758b0, 0x1369020, 0xc00b03fae0, 0x116d980, 0xc00b070101)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:34 +0x9f
github.com/hyperledger/fabric/common/grpcmetrics.UnaryServerInterceptor.func1(0x137e360, 0xc008171830, 0x1171b80, 0xc007a758b0, 0xc00b079f40, 0xc007a75900, 0x106c640, 0x1f4ed58, 0xc0038daae8, 0x40d1d8)
	/opt/gopath/src/github.com/hyperledger/fabric/common/grpcmetrics/interceptor.go:30 +0x1d6
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1(0x137e360, 0xc008171830, 0x1171b80, 0xc007a758b0, 0xc00b079f40, 0xc00b079f60, 0x106c640, 0x1f4ed58, 0x11d8500, 0xc001e35600)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:39 +0x153
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler(0x107a3a0, 0xc0003b1090, 0x137e360, 0xc008171830, 0xc00b0a8ee0, 0xc00025dfb0, 0x0, 0x0, 0xc001e35600, 0x50)
	/opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:171 +0x158
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC(0xc000344180, 0x13851e0, 0xc003903680, 0xc001e35600, 0xc0003a11d0, 0x1e30740, 0xc003291aa0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:982 +0x4cd
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc000344180, 0x13851e0, 0xc003903680, 0xc001e35600, 0xc003291aa0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1208 +0x1308
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc0032e21e0, 0xc000344180, 0x13851e0, 0xc003903680, 0xc001e35600)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:686 +0x9f
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:684 +0xa1
{code}

{code}
goroutine 1268651 [syscall]:
syscall.Syscall6(0x101, 0xffffffffffffff9c, 0xc026a751d0, 0x80000, 0x180, 0x0, 0x0, 0xc00a043570, 0x7891b8, 0xc00013ad20)
	/opt/go/src/syscall/asm_linux_amd64.s:44 +0x5
syscall.openat(0xffffffffffffff9c, 0xc026a75180, 0x48, 0x80000, 0x180, 0xc02ff08900, 0x81, 0xfe64e0)
	/opt/go/src/syscall/zsyscall_linux_amd64.go:68 +0xab
syscall.Open(0xc026a75180, 0x48, 0x80000, 0x180, 0xc00a043770, 0x2, 0x2)
	/opt/go/src/syscall/syscall_linux.go:138 +0x50
os.openFileNolog(0xc026a75180, 0x48, 0x0, 0x180, 0xc00a043770, 0x2, 0x2)
	/opt/go/src/os/file_unix.go:190 +0x85
os.OpenFile(0xc026a75180, 0x48, 0x0, 0xc000000180, 0x2, 0x2, 0x8)
	/opt/go/src/os/file.go:284 +0x5f
github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage.newBlockfileStream(0xc000440880, 0x37, 0x8, 0xa06db2, 0xc03077a580, 0xc01d68b0f8, 0x6)
	/opt/gopath/src/github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage/block_stream.go:59 +0x16f
github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage.(*blockfileMgr).fetchBlockBytes(0xc0012be600, 0xc03077a580, 0x0, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage/blockfile_mgr.go:555 +0x67
github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage.(*blockfileMgr).fetchBlock(0xc0012be600, 0xc03077a580, 0xc03077a580, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage/blockfile_mgr.go:532 +0x39
github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage.(*blockfileMgr).retrieveBlockByNumber(0xc0012be600, 0x1120, 0xc00043d4c0, 0x10000c03077a420, 0x15)
	/opt/gopath/src/github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage/blockfile_mgr.go:473 +0x15d
github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage.(*fsBlockStore).RetrieveBlockByNumber(0xc00128d4a0, 0x1120, 0x0, 0x2b549954b6c0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/ledger/blkstorage/fsblkstorage/fs_blockstore.go:67 +0x39
github.com/hyperledger/fabric/core/ledger/kvledger.(*kvLedger).GetBlockByNumber(0xc0012bfaa0, 0x1120, 0xc01d68aff8, 0x4, 0xffffffffffffffff)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger.go:229 +0x45
github.com/hyperledger/fabric/core/scc/qscc.getBlockByNumber(0x13899a0, 0xc001228280, 0xc01d68aff8, 0x4, 0x8, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/core/scc/qscc/query.go:149 +0x1a4
github.com/hyperledger/fabric/core/scc/qscc.(*LedgerQuerier).Invoke(0xc000263860, 0x138e780, 0xc0307480b0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/core/scc/qscc/query.go:111 +0xa09
github.com/hyperledger/fabric/core/chaincode/shim.(*Handler).handleTransaction.func1(0xc0011fecc0, 0xc00004bda0, 0xc044995c00)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/handler.go:273 +0x4eb
created by github.com/hyperledger/fabric/core/chaincode/shim.(*Handler).handleTransaction
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/handler.go:242 +0x53
{code};;;","21/Jan/20 10:12 AM;ryjones;Is this a security issue? Does it need the restricted access?;;;","21/Jan/20 11:32 AM;denyeart;[~ryjones] Yes it is a security issue since it describes how to crash peer.;;;","22/Jan/20 2:20 AM;dhuseby;[~denyeart] is this scheduled to be fixed soon? 1.4? 2.0?;;;","22/Jan/20 4:27 AM;denyeart;[~dhuseby] It is being actively worked, targeted for 2.1 at this time. After it is done we'll assess feasibility of backport.;;;","29/Jan/20 5:05 AM;dhuseby;Sounds good. We have a responsibility to disclose this. Should have disclosed it last year, 90 days after it was filed. Even if it isn't fixed. Either it's a high/critical security bug and therefor higher priority than everything else or it isn't. Its sounds like it isn't higher priority. There's a few others marked as security bugs laying around we should disclose as well.

Thoughts? I think a blog post talking about known security bugs and potential mitigations is in order.;;;","18/Feb/20 3:49 AM;denyeart;This has been merged in master and will release in v2.1. The fix ensures that requesters will receive an error if there are more than the threshold of requests already being processed, rather than allowing the peer to reach the maximum number of operating system threads and panic. The peer is built to tolerate panics well anyways, so in my opinion this is not a very important security fix. I think a mention in the v2.1 release notes will be sufficient. The maintainers do not see a need to backport to prior releases.;;;",,,,,,,,,,,,,,,,,,,,,
"Orderer3rd removed, re-added but is not accepted",FAB-14762,38661,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Test Error,,bharadwajambati1,bharadwajambati1,22/Mar/19 7:17 AM,26/Mar/19 5:58 AM,28/Oct/23 3:05 AM,26/Mar/19 5:58 AM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,Raft,,,,"h3. Expected:

While executing FAB-14753 the onboarded orderer should pull blocks from the other OSNs, and then continue as a functioning member of the channel.
h3. Observed:

*Revising this description with the new data. Refer to modified testcase (as of March 22), with the added step where we restart the orderer before sending config updates to add the orderer to the channels again.* 

We observed that after adding the orderer again to the application channel, its blockheight does not grow. It maintains the same block count from the time when it was removed from the application channel.

We sent the config updates to orderer1.
 Orderer3rd was removed ok, and then added but it does not seem to know it is a part of the channel again.
 The channel leader sends something to it, but then almost seems stuck forever processing the config update.
 Maybe ... is the problem during the processing of the config update, because the certs are the same? 
 Refer to some interesting logs below.

In the linked logDNA data, you may observe that orderer3rd was removed, and then added, in the channel1. Interestingly, orderer2nd was the leader of the orderersystemchannel and channel1 and continued happily in that role throughout.

URL for orderer logs: Go to [https://cloud.ibm.com/observe/logging] and click on View LogDNA for LogDNA-community-svt-lab

Metrics URL: [https://prometheus.community-svt.us-south.containers.appdomain.cloud/graph?g0.range_input=10s&g0.expr=consensus_etcdraft_committed_block_number&g0.tab=0] 

Timestamp at which the orderer was removed: Mar 21 17:52:31 

Timestamp at which the orderer has added again to the application channel: Mar 21 17:55:47

 

Some interesting logs, from orderer1st, which occur approximately when the config update was first processed to add the orderer2nd back into the channel1:

 

{{Mar 21 17:55:46 orderer1st-ordererorg1-67d6bf8749-tll28 orderer1st-ordererorg1 2019-03-21 21:55:46.300 UTC [orderer.consensus.etcdraft] submitSent -> DEBU 63fa8 Sending msg of 5839 bytes to 2 on channel testorgschannel1 took 45.827µs
 Mar 21 17:55:46 orderer1st-ordererorg1-67d6bf8749-tll28 orderer1st-ordererorg1 2019-03-21 21:55:46.300 UTC [orderer.common.cluster.step] sendMessage -> DEBU 63fa9 Send of SubmitRequest for channel testorgschannel1 with payload of size 5839 to orderer2nd-ordererorg1.ordererorg1(orderer2nd-ordererorg1:7050) took 174.608µs
 Mar 21 17:55:46 orderer1st-ordererorg1-67d6bf8749-tll28 orderer1st-ordererorg1 2019-03-21 21:55:46.304 UTC [orderer.common.cluster.step] handleMessage -> DEBU 63faa Received message from orderer2nd-ordererorg1.ordererorg1(172.30.8.28:57200): ConsensusRequest for channel testorgschannel1 with payload of size 59080
 Mar 21 17:55:46 orderer1st-ordererorg1-67d6bf8749-tll28 orderer1st-ordererorg1 2019-03-21 21:55:46.306 UTC [orderer.consensus.etcdraft] consensusSent -> DEBU 63fab Sending msg of 29 bytes to 2 on channel testorgschannel1 took 12.66µs
 Mar 21 17:55:46 orderer1st-ordererorg1-67d6bf8749-tll28 orderer1st-ordererorg1 2019-03-21 21:55:46.306 UTC [orderer.common.cluster.step] sendMessage -> DEBU 63fac Send of ConsensusRequest for channel testorgschannel1 with payload of size 29 to orderer2nd-ordererorg1.ordererorg1(orderer2nd-ordererorg1:7050) took 73.836µs
 Mar 21 17:55:46 orderer1st-ordererorg1-67d6bf8749-tll28 orderer1st-ordererorg1 2019-03-21 21:55:46.307 UTC [orderer.common.cluster.step] handleMessage -> DEBU 63fad Received message from orderer2nd-ordererorg1.ordererorg1(172.30.8.28:57200): ConsensusRequest for channel testorgschannel1 with payload of size 30
 Mar 21 17:55:46 orderer1st-ordererorg1-67d6bf8749-tll28 orderer1st-ordererorg1 2019-03-21 21:55:46.307 UTC [orderer.consensus.etcdraft] consensusSent -> DEBU 63fae Sending msg of 29 bytes to 2 on channel testorgschannel1 took 17.395µs
 Mar 21 17:55:46 orderer1st-ordererorg1-67d6bf8749-tll28 orderer1st-ordererorg1 2019-03-21 21:55:46.307 UTC [orderer.consensus.etcdraft] writeBlock -> INFO 63faf Writing block 1265 (Raft index: 1270) to ledger channel=testorgschannel1 node=1
 Mar 21 17:55:46 orderer1st-ordererorg1-67d6bf8749-tll28 orderer1st-ordererorg1 2019-03-21 21:55:46.307 UTC [orderer.common.cluster.step] sendMessage -> DEBU 63fb0 Send of ConsensusRequest for channel testorgschannel1 with payload of size 29 to orderer2nd-ordererorg1.ordererorg1(orderer2nd-ordererorg1:7050) took 65.539µs
 Mar 21 17:55:46 orderer1st-ordererorg1-67d6bf8749-tll28 orderer1st-ordererorg1 2019-03-21 21:55:46.307 UTC [msp] GetDefaultSigningIdentity -> DEBU 63fb1 Obtaining default signing identity}}

 ",,bharadwajambati1,guoger,jyellick,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14753,,,,,,,"23/Mar/19 6:13 AM;scottz;Fail_orderer3.txt;https://jira.hyperledger.org/secure/attachment/16990/Fail_orderer3.txt","23/Mar/19 6:07 AM;bharadwajambati1;Success_orderer4.txt;https://jira.hyperledger.org/secure/attachment/16989/Success_orderer4.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00h8n:",,,,Unset,Unset,,,,"1. Create a network with 3 orderers(all in one ordererorg) and 1 channel 
2. Start sending traffic 
3. While traffic is running, send a config update to remove an orderer from the application channel. Keep the ledger and certs.
4. After a couple of minutes, onboard the removed orderer to the application channel 
5. Check the block count for the on boarded orderer",,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,guoger,jyellick,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Mar/19 7:59 PM;guoger;Sorry my suggestion was incorrect yesterday. For this to work, currently you have to reboot the re-added orderer. Can you pls try the test again? thx [~bharadwajambati1]

cc [~yacovm] pls correct me if i get this wrong.;;;","22/Mar/19 9:35 PM;yacovm;Yes that's correct. When I implemented onboarding, I made it that if your node is evicted and then re-added, it will not detect it again until a restart.

This is because:
 * Dynamic onboarding is single threaded and i didn't want to complicate the code with concurrent operations.
 * The use cases of re-adding an orderer again in reality are very rare - usually when you remove a node, it is due to some business reason or you are going to remove the physical node itself (i.e - the server is down for a long time and you gave up on bringing it back). 
The only use case I can think of that someone will remove a node and then add it back , is a human error.

Therefore I didn't implement it for v1.4.1, but we can discuss whether to implement it for v2.0 ([~jyellick] [~guoger] ).

 

[~bharadwajambati1] - nice job on describing the problem and thanks for giving interesting logs. Even though I am not sure how these logs point at the problem you described, this process is what I expect to see (describing the problem well, and looking at the logs and taking interesting lines from it and putting it in the JIRA).

 

Can you please explain what you mean by:
{quote} 
The channel leader sends something to it, but then almost seems stuck forever processing the config update.
{quote}

And give some logs that point at this leader being stuck?

{quote}
Interestingly, orderer2nd was the leader of the orderersystemchannel, and continued happily in that role throughout.
{quote}
This is by design - the leader of a channel is independent of other channels, and so are config updates.
;;;","23/Mar/19 6:15 AM;scottz;Reproduced the problem described in this bug.

Note: It passes for 4th orderer, but fails here when removing and adding 3rd orderer (when there are only 3 to start with). *Even* when restarting the 3rd orderer before adding it to the channels. *And* even after restarting again several minutes later. With traffic running throughout.

The key logs are attached. See the attached logs from orderer4th, `Success_orderer4.txt`, from a successful test using 4 orderers; and see the attached logs from orderer3rd, `Fail_orderer3.txt`, from the failure case when using 3 orderers. These are from the orderer that was removed and added, in each scenario.

Timestamp for key orderer4th logs in successful scenario: *14:46:44.401 UTC*

Timestamp for corresponding key orderer3rd logs in failure scenario: *15:10:30.683 UTC*

In failure case:
 # We started network with 3 orderers.
 # Removed orderer3rd from channel1 and orderersystemchannel.
 # Restarted orderer3rd.
 # Added orderer3rd to orderersystemchannel and channel1.
 # Later restarted orderer3rd again.
 # The first log seen that is _not_ seen in the success case is at 15:10:30.683 UTC :  ""Successfully sent StepRequest to 2 after failed attempt(s) channel=orderersystemchannel node=3""

Compared logs to a successful test (see Success_orderer4.txt) which:
 # Started network fresh with 3 orderers
 # Added orderer4 to both channels
 # Removed orderer4 from both channels
 # Restarted orderer4
 # Added orderer4 to both channels.
 # Logs indicate a few ConsensusRequest msgs and responses, and then we see some things that differentiate this scenario from the failure case. Here at 14:46:45.439 we see log that says ""No need to register verifier for chanin testorgschannel1"", and later it pulls blocks, etc.;;;","23/Mar/19 6:23 AM;yacovm;{quote}started with 3, added orderer4, removed orderer4, added orderer4.{quote}
what does ""started with 3"" mean?;;;","23/Mar/19 6:27 AM;scottz;""Started with 3"" means we started the network with 3 orderers, in both the orderersystemchannel and application ""testorgschannel1"".;;;","23/Mar/19 6:31 AM;yacovm;how can you start the network again with 3 orderers in the middle of the scenario?

are statements 1 to 4 describing 1 scenario and statments 5-6 describing the next one? 
i don't understand. Also please explain what you see when you say it doesn't work. did you restart the orderer after it was removed from the channel?;;;","23/Mar/19 6:32 AM;scottz;And please ignore my comment:
{quote} The channel leader sends something to it, but then almost seems stuck forever processing the config update.
{quote}
There are things I do not understand yet. Even in the successful case, the orderer is doing things like checking policies and such, at least until the blocks are pulled (e.g. look in the orderer4th logs in successful scenario after 14:46:44.401 UTC).;;;","23/Mar/19 6:40 AM;scottz;Sorry for the confusion. I edited the comment again to fix it, and answer your questions to describe the test steps we did today.;;;","26/Mar/19 5:58 AM;scottz;Works ok.

We retested scenario 4 of FAB-14753: removing and adding 3rd orderer to both channel1 and orderersystemchannel, (using the same orderername and certs again, but without any persistent data). This time we were sure to fetch the very latest config block before booting up the new orderer, instead of using the original genesis block for ORDERER_GENERAL_GENESISFILE that was used to boot up the 3 orderers in the beginning.;;;",,,,,,,,,,,,,,,,,,,,
benchmark for txvalidator,FAB-14763,38664,38459,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,MHBauer,MHBauer,MHBauer,22/Mar/19 10:25 AM,23/Jan/20 7:31 AM,28/Oct/23 3:05 AM,23/Jan/20 7:31 AM,Future,,,,,,,,,,,,,,0,stale-item,,,,"We need something to know if we're getting better or worse.

 

The traces I was given show improvements in CPU usage in the txvalidator. Start by adapting an existing test into a benchmark.

 

future add output to the fabric build to know if changes make things better or worse.",,MHBauer,sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00h9b:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:31 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Delay halting leader if leader is being removed from consenter set,FAB-14764,38665,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,22/Mar/19 11:05 AM,03/Apr/19 6:31 PM,28/Oct/23 3:05 AM,03/Apr/19 6:31 PM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,,,,,this is to give followers some time to pick up this config change,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00h9j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Mar/19 11:37 AM;guoger;[https://gerrit.hyperledger.org/r/c/30297/] release-1.4(closed)
[https://gerrit.hyperledger.org/r/c/30517/] master (in review);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Expose `SendBufferSize` in sample config,FAB-14765,38666,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,guoger,guoger,22/Mar/19 11:40 AM,23/Mar/19 11:57 PM,28/Oct/23 3:05 AM,23/Mar/19 11:57 PM,,,,,,v1.4.1,,,,fabric-orderer,,,,,0,,,,,"IIUC, this parameter specifies how many messages (blocks) are buffered before being put into gRPC buffer, and if it's full, further messages being enqueued via {{rpc.SendConsensus}} are dropped. So this parameter has a strong relation with {{MaxInflightBlocks}} and should be exposed to user as well.

wdyt [~yacovm] [~jyellick]",,guoger,jyellick,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00h9r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,jyellick,yacovm,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Mar/19 11:42 AM;jyellick;Sounds good to me, let's make sure we doc in the comment how it's related to {{MaxInflightBlocks}} and under what conditions a user would want to tune it.;;;","22/Mar/19 8:54 PM;yacovm;+1;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve logs text for serviceability,FAB-14766,38667,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,22/Mar/19 1:01 PM,03/Apr/19 6:31 PM,28/Oct/23 3:05 AM,03/Apr/19 6:31 PM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,,,,,"{code}
- consistent name for Raft. I saw 'etcdraft', 'raft', and 'Raft'
- channel name at the beginning of each log statement rather than in the middle
- block number in block brackets so it is easy to see and grep
- e.g. here's a typical peer log statement: [mychannel] Committed block [1] with 1 transaction(s) in 53ms
{code}",,guoger,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00h9z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,yacovm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Mar/19 4:03 PM;guoger;w.r.t the term *etcdraft*/*raft*/*Raft*, we current do have a mix of them and i think we should have consistent name.

I think we should definitely note etcd/raft lib in docs. However, if we use the term etcdraft heavily in code/logs/tutorials, it may sometimes confuse users, as i once got question asking whether we are depending on etcd, the distributed kv store.

I'd vote for using Raft whenever possible. However, this is somehow invasive because we are heavily using etcdraft in current codebase.

does anyone know the reason we started off with etcdraft? it's very likely that i overlooked some important reasons here..

cc [~jyellick] [~yacovm] [~yacovm] [~tock] [~adarshsaraf123];;;","22/Mar/19 8:59 PM;yacovm;I also agree that we should use Raft and not prefix with etcd. We can still stay with the consenter type ""etcdraft"", and just use ""raft"" in the logs... that's my opinion.

 

I think Kostas wanted etcdraft from a reason that if someone wanted to get another Raft implementation (i.e - consul) then ""etcdraft"" will be specific enough to not confuse users.;;;","26/Mar/19 11:39 AM;guoger;[https://gerrit.hyperledger.org/r/c/30299] release-1.4 (closed)
[https://gerrit.hyperledger.org/r/c/30519] master (in review);;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Explicitly set ext key usage for CA used by chaincode server,FAB-14767,38669,,Task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,mastersingh24,mastersingh24,mastersingh24,22/Mar/19 4:41 PM,28/Mar/19 11:30 PM,28/Oct/23 3:05 AM,28/Mar/19 11:30 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,"The generated CA certificates currently have contain anyExtendedKeyUsage in their Extended Key Usage attributes.  This is actually not allowed and is now enforced by openssl 1.1 and later.  Without this change, Node CC cannot upgrade to Node 10.",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00haf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Mar/19 4:50 PM;mastersingh24;https://gerrit.hyperledger.org/r/30300;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename -escc -vscc flags in CLI and in pubs,FAB-14768,38670,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,wlahti,ales,ales,22/Mar/19 5:47 PM,05/Apr/19 7:19 AM,28/Oct/23 3:05 AM,05/Apr/19 7:19 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,ales,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00han:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,wlahti,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Apr/19 7:25 AM;wlahti;https://gerrit.hyperledger.org/r/c/30657/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move InitTLSForShim to shim package,FAB-14769,38671,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,22/Mar/19 5:48 PM,22/Mar/19 7:39 PM,28/Oct/23 3:05 AM,22/Mar/19 7:39 PM,,,,,,v2.0.0,,,,,,,,,0,hygiene,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hav:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Mar/19 6:17 PM;mastersingh24;https://gerrit.hyperledger.org/r/30302 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor shim,FAB-14770,38672,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,22/Mar/19 6:18 PM,04/Jul/19 5:30 AM,28/Oct/23 3:05 AM,16/Apr/19 4:07 PM,,,,,,v2.0.0,,,,,,,,,0,hygiene,,,,"Cleanup the shim:

- avoid package scoped variables
- use comm.GRPCClient
- remove bccsp from core shim
- split apart chaincode.go
- replace viper with os.Env and flags
",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hb3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,mergify/bp/release-2.2/pr-4374,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,main,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,mergify/bp/release-2.2/pr-3750,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,release-2.5,release-2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Mar/19 6:32 PM;mastersingh24;https://gerrit.hyperledger.org/r/30303
https://gerrit.hyperledger.org/r/30304
https://gerrit.hyperledger.org/r/30305
https://gerrit.hyperledger.org/r/30335
https://gerrit.hyperledger.org/r/30343;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
HYGIENE: Raft integration tests take too long to complete,FAB-14772,38675,,Task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,,sykesm,denyeart,22/Mar/19 8:53 PM,02/Dec/19 5:18 PM,28/Oct/23 3:05 AM,02/Dec/19 5:18 PM,v1.4.1,,,,,v2.0.0,,,,fabric-orderer,,,,,0,ci,hygiene,,,"Raft integration tests were introduced in v1.4.1 and have greatly expanded the time it takes for integration tests to complete.

A combination of improvements would help:
- Merge multiple integration tests together so that networks don't have to come up and down
- Move system test oriented tests out of integration test bucket.",,C0rWin,denyeart,guoger,sykesm,yacovm,yoheiueda,,,,,,,,,,,,,,,,,,FAB-8697,,,,,,,FAB-14869,,,,,,,FAB-15033,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzz06c:",,,,,,,,,,,,,,,,,,,,,,C0rWin,denyeart,guoger,sykesm,yacovm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Dec/19 5:18 PM;guoger;Raft IT pkg now takes ~16min to complete in AZP;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft unit tests are broken,FAB-14774,38682,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,22/Mar/19 11:38 PM,23/Mar/19 1:04 AM,28/Oct/23 3:05 AM,23/Mar/19 1:04 AM,v1.4.0,,,,,v1.4.1,,,,fabric-orderer,,,,,0,,,,,"Following CI failure encountered recently due to Raft tests

{code}
14:02:52 # github.com/hyperledger/fabric/orderer/consensus/etcdraft_test [github.com/hyperledger/fabric/orderer/consensus/etcdraft.test]
14:02:52 orderer/consensus/etcdraft/chain_test.go:1594:87: not enough arguments in call to newConfigUpdateEnv
14:02:52 	have (string, map[string]*common.ConfigValue)
14:02:52 	want (string, map[string]*common.ConfigValue, map[string]*common.ConfigValue)
14:02:52 orderer/consensus/etcdraft/chain_test.go:1670:87: not enough arguments in call to newConfigUpdateEnv
14:02:52 	have (string, map[string]*common.ConfigValue)
14:02:52 	want (string, map[string]*common.ConfigValue, map[string]*common.ConfigValue)
14:02:52 orderer/consensus/etcdraft/chain_test.go:1712:88: not enough arguments in call to newConfigUpdateEnv
14:02:52 	have (string, map[string]*common.ConfigValue)
14:02:52 	want (string, map[string]*common.ConfigValue, map[string]*common.ConfigValue)
14:02:52 orderer/consensus/etcdraft/chain_test.go:1779:88: not enough arguments in call to newConfigUpdateEnv
14:02:52 	have (string, map[string]*common.ConfigValue)
14:02:52 	want (string, map[string]*common.ConfigValue, map[string]*common.ConfigValue)
14:02:58 Makefile:208: recipe for target 'linter' failed
14:02:58 make: *** [linter] Error 2
{code}",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hdb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Mar/19 11:45 PM;C0rWin;https://gerrit.hyperledger.org/r/#/c/30316/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update fabric-ca to baseimage 0.4.15,FAB-14775,38684,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sambhavdutt,sambhavdutt,sambhavdutt,23/Mar/19 12:43 AM,23/Mar/19 2:39 AM,28/Oct/23 3:05 AM,23/Mar/19 2:39 AM,v1.4.1,v2.0.0,,,,v1.4.1,v2.0.0,,,fabric-release,,,,,0,,,,,Update fabric-ca to Baseimage 0.4.15 for master(v2.0.0) and release-1.4(v1.4.1),,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hdr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestDissemination failed in the gossip tests as timeout expired.,FAB-14776,38685,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,C0rWin,sambhavdutt,sambhavdutt,23/Mar/19 12:46 AM,27/Mar/19 7:09 PM,28/Oct/23 3:05 AM,27/Mar/19 7:09 PM,v1.4.1,,,,,,,,,fabric-gossip,,,,,0,ci-flake,,,,"gossip_test failed with TestDissemination as timeout expired during the tests.

*Branch:* release-1.4
*Platform:* x86_64
*Error Snippet:*

{code:java}
21:57:57 <<<TestDissemination>>>
21:57:57 --- FAIL: TestDissemination (184.10s)
21:57:57     gossip_test.go:707: Membership establishment took 3.01716954s
21:57:57     gossip_test.go:715: Block dissemination took 532.093606ms
21:57:57     gossip_test.go:718: Metadata dissemination took 2.002602ms
21:57:57     gossip_test.go:747: Leadership message dissemination took 528.827188ms
21:57:57     gossip_test.go:753: Stopping peers
21:57:57     gossip_test.go:1531: 
21:57:57         	Error Trace:	gossip_test.go:1531
21:57:57         	            				asm_amd64.s:1333
21:57:57         	Error:      	Didn't stop within a timely manner
21:57:57         	Test:       	TestDissemination
21:57:57     gossip_test.go:1607: 
21:57:57         	Error Trace:	gossip_test.go:1607
21:57:57         	            				gossip_test.go:760
21:57:57         	Error:      	Timeout expired!
21:57:57         	Test:       	TestDissemination
21:57:57     gossip_test.go:761: Stop took 3m0.005174819s
21:57:57     gossip_test.go:762: Took 3m4.102663876s
{code}

*Build Logs*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-release-1.4-x86_64/73/",,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13377,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,3ac8d11893015b5db1025f1aa009eec0567da32d,Unset,No,,,"1|i00hdz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove some dead vars and exports from Makefile,FAB-14777,38686,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,23/Mar/19 1:07 AM,26/Mar/19 2:31 AM,28/Oct/23 3:05 AM,24/Mar/19 4:24 AM,v2.0.0,,,,,v2.0.0,,,,,,,,,0,hygiene,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00he7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Mar/19 1:09 AM;sykesm;https://gerrit.hyperledger.org/r/30322;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Expose QueryApprovalStatus function to retrieve the approval status for a given definition,FAB-14778,38687,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,23/Mar/19 1:48 AM,28/Mar/19 7:39 AM,28/Oct/23 3:05 AM,28/Mar/19 7:38 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,FAB-14779,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00hef:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Introduce QueryApprovalStatus step in byfn/eyfn,FAB-14779,38688,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,ales,ales,23/Mar/19 1:48 AM,04/Apr/19 10:34 PM,28/Oct/23 3:05 AM,04/Apr/19 10:34 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,FAB-14778,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00hen:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,mergify/bp/release-2.2/pr-4374,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,main,mergify/bp/release-2.2/pr-3750,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,release-2.5,release-2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Hide cluster TLS root CAs,FAB-14780,38691,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,23/Mar/19 3:27 AM,08/Dec/20 6:21 PM,28/Oct/23 3:05 AM,19/Apr/19 12:23 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,We use the channel config ones anyway,,lmars,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hf3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),lmars,yacovm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Dec/20 6:07 PM;lmars;The orderer still parses this property at startup (in version 1.4.9) and if I checked correctly, the parsed value is used!;;;","08/Dec/20 6:21 PM;yacovm;It is supposed to be used. This Jira is to hide it from the user.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Unit test flake - orderer/common/server timed out,FAB-14781,38698,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,denyeart,denyeart,23/Mar/19 7:05 AM,27/Jun/19 7:31 AM,28/Oct/23 3:05 AM,27/Jun/19 7:31 AM,,,,,,,,,,fabric-orderer,,,,,0,ci-flake,ipm,,,"{code:java}
16:46:51 2019-03-22 20:27:41.400 UTC [orderer.common.server] func1 -> ERRO 03f Broadcast client triggered panic: runtime error: invalid memory address or nil pointer dereference
16:46:51 goroutine 148 [running]:
16:46:51 runtime/debug.Stack(0x29c84a0, 0x1, 0x1)
16:46:51 	/opt/go/go1.11.5.linux.amd64/src/runtime/debug/stack.go:24 +0xb5
16:46:51 github.com/hyperledger/fabric/orderer/common/server.(*server).Broadcast.func1()
16:46:51 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/server/server.go:145 +0x104
16:46:51 panic(0x1a63aa0, 0x2986530)
...
16:46:52 coverage: 74.4% of statements
16:46:52 panic: test timed out after 20m0s
...
16:46:52 FAIL	github.com/hyperledger/fabric/orderer/common/server	1200.480s
{code}


https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10797/consoleFull",,C0rWin,denyeart,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/19 7:08 AM;denyeart;console_output.txt;https://jira.hyperledger.org/secure/attachment/16991/console_output.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mtg:w",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,sykesm,yacovm,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/19 5:03 AM;C0rWin;{quote}
10:29:00 panic: test timed out after 20m0s
10:29:00 
10:29:00 goroutine 15887 [running]:
10:29:00 testing.(*M).startAlarm.func1()
10:29:00 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:1296 +0x13a
10:29:00 created by time.goFunc
10:29:00 	/opt/go/go1.11.5.linux.amd64/src/time/sleep.go:172 +0x52
10:29:00 
10:29:00 goroutine 1 [chan receive, 19 minutes]:
10:29:00 testing.(*T).Run(0xc0000e0400, 0x15c0a1a, 0x17, 0x15ede60, 0xc000235b01)
10:29:00 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:879 +0x692
10:29:00 testing.runTests.func1(0xc0000e0400)
10:29:00 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:1119 +0xa9
10:29:00 testing.tRunner(0xc0000e0400, 0xc000235d20)
10:29:00 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0x163
10:29:00 testing.runTests(0xc0002422a0, 0x202ab20, 0x4a, 0x4a, 0xa80)
10:29:00 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:1117 +0x4ef
10:29:00 testing.(*M).Run(0xc0000ee180, 0x0)
10:29:00 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:1034 +0x2ef
10:29:00 main.main()
10:29:00 	_testmain.go:252 +0x333

{quote}

Link: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11107/consoleFull
Link: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11108/console;;;","27/Jun/19 3:47 AM;sykesm;Someone with more background in the orderer should probably add some color and context to this issue.

The test that seems to be hung is this sub-test of TestReplicate:

{code}
		{
			name: ""Replication is needed, but pulling fails"",
			panicValue: ""Failed pulling system channel: "" +
				""failed obtaining the latest block for channel testchainid"",
			shouldConnect:      true,
			systemLedgerHeight: 10,
			bootBlock:          &bootBlock,
			conf: &localconfig.TopLevel{
				General: localconfig.General{
					SystemChannel: ""system"",
					Cluster: localconfig.Cluster{
						ReplicationPullTimeout:  time.Millisecond * 100,
						DialTimeout:             time.Millisecond * 100,
						RPCTimeout:              time.Millisecond * 100,
						ReplicationRetryTimeout: time.Millisecond * 100,
						ReplicationBufferSize:   1,
					},
				},
			},
			secOpts: &comm.SecureOptions{
				Certificate:   cert,
				Key:           key,
				UseTLS:        true,
				ServerRootCAs: [][]byte{caCert},
			},
			replicateFunc: func(ri *replicationInitiator, bootstrapBlock *common.Block) {
				ri.replicateIfNeeded(bootstrapBlock)
			},
		},
{code}

Local executions run fine but, given I can't easily discern what this test is trying to do, that doesn't mean much.

;;;","27/Jun/19 4:29 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/fabric/+/32105/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Pin counterfeiter to pre-module version,FAB-14783,38701,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,24/Mar/19 7:50 PM,04/Apr/19 8:10 PM,28/Oct/23 3:05 AM,24/Mar/19 9:19 PM,,,,,,v1.2.2,,,,,,,,,0,,,,,"Latest version of counterfeiter is now fully enabled for v2+ Go modules.
This requires Go 1.10.3 or higher but unfortunately v1.2.x using Go 1.10 from the baseimage.",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,FAB-14746,,,,,,,,,,,,,FAB-14746,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hgn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,release-1.2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Mar/19 7:53 PM;mastersingh24;https://gerrit.hyperledger.org/r/30346;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove  balance-transfer samples,FAB-14784,38702,34936,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,24/Mar/19 9:14 PM,07/Apr/19 9:55 AM,28/Oct/23 3:05 AM,01/Apr/19 6:42 PM,,,,,,v2.0.0,,,,fabric-samples,,,,,0,,,,,,,mastersingh24,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-12535,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hgv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,yuki-kon,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Apr/19 3:41 AM;yuki-kon;Hi, [~mastersingh24]. Could you explain the reason why balance-transfer is removed? You may have written the reason on the Pivotal Tracker but I couldn’t assess to the link.
 Many application developers utilize balance transfer because it was a best practice for SDK and Chaincode. It might be better to write the reason in the release note of v2.0.0 alpha.;;;","07/Apr/19 4:05 AM;mastersingh24;[~yuki-kon]  - Actually, the point is that the application was not using best practices and people were building ""production"" apps based on it.  That's why new samples applications for Node SDK were introduced in 1.4.x and continued in mater/2.0.0.

Reason to remove:

1) The sample uses a REST server ... and while people may want to try to build REST interfaces, this was not the way to do it nor was it officially supported by anyone.  There were many questions about the REST piece itself which was really not the point of the sample.

2) The sample stored the private keys for multiple users .... meaning you login via REST but the reality is that behind the scenes the server was enrolling with the CA and storing the keys for multiple users in the middle tier.  This is not a best practice.

3) There were too many ""wrapper"" layers in the application.  While it sounds like you were able to modify this sample, most others were not.  We want to demonstrate actually using the SDK APIs not wrapper around them.  The new samples do this.;;;","07/Apr/19 9:55 AM;yuki-kon;[~mastersingh24] - Thank you very much for explaining the reasons in detail. I understand the points. It's good idea to show developers the improved best practices like fabcar and commercial-paper.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Disclaimer for Service discovery,FAB-14786,38715,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,26/Mar/19 3:17 AM,06/Apr/19 7:30 PM,28/Oct/23 3:05 AM,06/Apr/19 7:30 PM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,,,,,Put warning that service discovery is not supported for the new chaincode lifecycle.,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00hjr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/19 5:45 AM;negupta;[https://gerrit.hyperledger.org/r/#/c/30431/]

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update smart contract concept doc,FAB-14787,38716,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,26/Mar/19 3:18 AM,09/Apr/19 9:00 PM,28/Oct/23 3:05 AM,09/Apr/19 9:00 PM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,,,,,Update the smart contract concept doc for lifecycle,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00hjz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Mar/19 11:07 AM;negupta;https://gerrit.hyperledger.org/r/#/c/30397/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update network concept topic,FAB-14788,38717,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,26/Mar/19 3:20 AM,09/Apr/19 5:33 AM,28/Oct/23 3:05 AM,09/Apr/19 5:33 AM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,,,,,"Add disclaimer to the network concept that it is describes the previous lifecycle.

The topic is built around instantiate as a concept. It will take some effort to update, which can happen after the beta.",,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00hk7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix some serviceability items.,FAB-14789,38718,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,26/Mar/19 3:27 AM,29/Mar/19 12:35 PM,28/Oct/23 3:05 AM,29/Mar/19 12:35 PM,,,,,,,,,,,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hkf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add discaimer to couchDB as state database,FAB-14790,38720,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,26/Mar/19 3:49 AM,29/Mar/19 10:48 PM,28/Oct/23 3:05 AM,29/Mar/19 10:48 PM,,,,,,v2.0.0,,,,fabric-docs,,,,,0,,,,,"Chaincode lifecycle does not support couchDB indexes. As a result, we need to add a disclaimer to the couchDB indexes section.",,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00hkv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/19 3:04 AM;negupta;https://gerrit.hyperledger.org/r/#/c/30430/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add datastructures for chaincode to core/chaincode,FAB-14791,38724,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,dereckluo,btl5037,btl5037,26/Mar/19 5:15 AM,03/Apr/19 1:45 AM,28/Oct/23 3:05 AM,03/Apr/19 1:44 AM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hlj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add datastructures for vm to core/container,FAB-14792,38725,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,btl5037,btl5037,btl5037,26/Mar/19 5:16 AM,03/Apr/19 1:44 AM,28/Oct/23 3:05 AM,03/Apr/19 1:43 AM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hlr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add datastructures for peer, operations, and metrics  to internal/peer",FAB-14793,38726,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,dereckluo,btl5037,btl5037,26/Mar/19 5:16 AM,03/Apr/19 1:44 AM,28/Oct/23 3:05 AM,03/Apr/19 1:44 AM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hlz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert all Viper calls to lowercase,FAB-14794,38727,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,btl5037,btl5037,btl5037,26/Mar/19 5:32 AM,26/Mar/19 10:44 PM,28/Oct/23 3:05 AM,26/Mar/19 10:44 PM,,,,,,,,,,,,,,,0,,,,,This provides a stepping stone to the future implementation. When we begin replacing case-sensitive calls to global struct we need the current configuration files to be all lowercase,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hm7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Log warnings when certificates are about to expire,FAB-14795,38728,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,26/Mar/19 5:58 AM,29/Apr/19 6:47 PM,28/Oct/23 3:05 AM,29/Apr/19 6:47 PM,,,,,,,,,,fabric-orderer,,,,,0,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hmf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
log warnings on egress connections,FAB-14796,38729,38728,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,26/Mar/19 5:59 AM,29/Apr/19 6:05 PM,28/Oct/23 3:05 AM,29/Apr/19 6:05 PM,,,,,,,,,,fabric-orderer,,,,,0,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hmn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Expose QueryApprovalStatus CLI,FAB-14797,38730,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,ales,ales,26/Mar/19 6:10 AM,04/Apr/19 10:34 PM,28/Oct/23 3:05 AM,04/Apr/19 10:34 PM,,,,,,,,,,,,,,,0,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00hmv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add metrics to indicate active nodes for raft,FAB-14799,38733,38599,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,26/Mar/19 11:40 AM,16/Aug/20 4:17 AM,28/Oct/23 3:05 AM,23/Jul/19 1:58 AM,,,,,,v2.0.0,,,,fabric-orderer,,,,,0,help-wanted,ipm,raft,,"This task is to add a metrics {{ActiveNodes}} to indicate number of active nodes from leader's pov.

This info is available on leader *only*, but we could disseminate it to followers by piggybacking heartbeat messages (in its context field).

This is particularly useful in a multi-org setup, where Prometheus server in leader org is not always accessible for other orgs. Another benefit is that operators don't need to identify leader before gathering this metrics.

Note that if a node is partitioned, this metrics should be cleared, as it doesn't make any sense. This can be done if node starts election (becomes candidate).

However it does involve adding protobuf message in an extensible way. Design decision at this point of release is scary.

My suggestion is to add this metrics to leader only, and we could always extend it to be shown on followers without breaking compatibility.

pls chime in [~yacovm] [~jyellick] [~adarshsaraf123]",,adarshsaraf123,guoger,jyellick,sykesm,yacovm,,,,,,,,,,,,,,,,FAB-14724,,,,,,,,,,,,,,,,,FAB-18167,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2c:9",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),adarshsaraf123,guoger,jyellick,sykesm,yacovm,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/19 6:54 PM;yacovm;I think that adding it to the leader is not that intrusive, but we shouldn't piggyback this into the heart-beats. ;;;","02/Apr/19 10:54 PM;jyellick;[~yacovm] How would you ultimately address the need for multiple orgs to monitor Raft health without either a) requiring that the orderer operations endpoint be opened across orgs b) that the prometheus server scraping the endpoint be opened across orgs?;;;","02/Apr/19 11:04 PM;yacovm;they can either look at the logs, and we do log there errors and warnings, or we can add metrics for transmission errors... what do you say? ;;;","03/Apr/19 3:10 AM;adarshsaraf123;I might have missed something but the last time around we were discussing about this there was no reliable way of figuring out the number of active nodes. Do we plan on using the heartbeats from followers at the leader for this? I believe [~yacovm] had some problem with this approach back then.  

Also, I am curious about why just knowing about the leader is not enough from an operations standpoint? If an admin observes that the cluster is leaderless for a long time (we can do so by changing back the {{IsLeader}} metric to the earlier {{LeaderID}} metric), isn't that sufficient indication of the cluster health versus needing to know the number of active nodes?;;;","03/Apr/19 3:44 AM;jyellick;If we have decided to use metrics to surface cluster health, I don't think ""look at the logs"" is an acceptable answer.  And, operationally it would be very confusing to say ""If your node is the leader, check cluster health by looking at your metric server for 'active nodes', otherwise look at your logs"".

I'm also a little unsure what metrics for transmission errors gives us?  If that's a useful metric, then it's one we might want to consider adding, but, concretely, consider the following scenario:

There are five orgs, each contributing a single node to a five node cluster.  One org, wants to do some maintenance on their node.  They know their node is not the leader, but, they have no insight into whether bringing their node down would cause loss of quorum.  Obviously this org _could_  talk with each of the other admins until discovering which node is the leader and how many nodes are in quorum, but, this seems like a bad workflow.

[~yacovm] What is your opposition to including this in the heartbeat? It should be quite small, and seems like generally useful information?;;;","03/Apr/19 6:20 AM;yacovm;So, first of all - I, as an SRE - would hope that someone from another org talks to me about a maintenance when he/she brings down an OSN, because I might be doing some network maintenance that would affect my own node, and even if not - then I would see in my logs that I lost contact to that other OSN and start wondering what's up.

In addition, when you bring down a node for maintenace, even if it doesn't make you lose quorum - you reduce the amount of nodes you can lose, so in a way - the SLA is impacted here, and you need to ensure (or at least that's what makes sense to me) that the other parties are OK with it, and are not planning any special event that a loss would lead to massive revenue loss

From my experience, when a node goes down - you (as an SRE) start investigating and making phone calls why it is down - is that a network outage? a maintenance you're not aware of? etc. No one should bring down servers of a running system, *even* if the system is not an active-active, but only an active-passive replication system.

So, by doing this we are actually creating a slippery slope for admins to take unnecessary risks. 

Secondly - I personally think that an organization should connect the logs to some ELK stack or something equivalent, and actually monitor errors and warnings in the logs.

Metrics - are usually used to measure how bad the system performs from a quantitative aspect, than from a qualitative aspect.  

Now, if we add the active nodes count that means we need to take the existing payload, and wrap it into another protobuf message, which means we're adding an indirection of marshaling or unmarshaling for every block we send. Are we sure that's the right approach? 

What if we, for instance - add another field to the ConsensusMessage we have which would be a metadata  bytes field, that would be used as a catch-all field for metadata from now onwards? we can then take this metadata and have it be EtcdRaftMetadata protobuf message. 

Also - if we do that, I think we can go the extra mile and actually compute ourselves the amount of nodes that can crash without the loss of the quorum, and report that metrics instead of the alive nodes. We don't want people that are bad at integer division to make mistakes ;) 

Opinions?;;;","03/Apr/19 10:35 AM;guoger;bq. I might have missed something but the last time around we were discussing about this there was no reliable way of figuring out the number of active nodes
[~adarshsaraf123] IIRC, last time we talked about this is when i ask Yacov whether it is possible/easy to retrieve this info directly from communication layer, and the answer was no. But this does not prevent us from getting it at upper layer - every time a message is received from a node, mark it as active with a timeout ({{ElectionTimeout}})

bq. What if we, for instance - add another field to the ConsensusMessage we have which would be a metadata bytes field, that would be used as a catch-all field for metadata from now onwards? we can then take this metadata and have it be EtcdRaftMetadata protobuf message.
[~yacovm] This is what I would advocate for if we decide to cascade extra info. However I was concerned about adding extra marshaling/unmarshaling. but we need to have a decision before official release, otherwise it wouldn't be extensible due to compatibility.

Also, if we do this, we probably can simply have a pingpong service running on every node, which is independent from consensus, and no info needs to be cascaded from leader. If a network is split and none of the partitions can form quorum, {{ActiveNodes}} can still be a meaningful indicator.;;;","25/Jun/19 12:22 AM;sykesm;This story needs to be broken down a bit. We don't have clear acceptance criteria and much of the nuance of the work is not captured in the story. There are some references to what's required but they need to be more explicit.

Will follow up with [~jyellick] after IPM.;;;","08/Jul/19 11:20 PM;guoger;[https://gerrit.hyperledger.org/r/c/fabric/+/32206];;;",,,,,,,,,,,,,,,,,,,,
Enable raft tests in fabric-samples CI pipeline flow,FAB-14800,38734,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,rameshthoomu,rameshthoomu,26/Mar/19 1:29 PM,02/Dec/19 5:24 PM,28/Oct/23 3:05 AM,02/Dec/19 5:24 PM,v1.4.1,,,,,v2.0.0,,,,,,,,,0,,,,,Enable raft tests in fabric-samples CI pipeline flow,,guoger,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hnr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Dec/19 5:24 PM;guoger;I believe Raft is now the default option for fabric-samples;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Transaction Handlers topic needs updating,FAB-14801,38736,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,odowdaibm,odowdaibm,odowdaibm,26/Mar/19 3:40 PM,27/Apr/19 12:32 AM,28/Oct/23 3:05 AM,27/Apr/19 12:32 AM,v1.4.0,v2.0.0,,,,v2.0.0,,,,fabric-docs,,,,,0,Documentation,,,,"Transaction handlers topic (e.g. [https://hyperledger-fabric.readthedocs.io/en/latest/developapps/transactionhandler.html)] needs to be updated to reflect the changes on the API introduced in Fabric 1.4.

 

Specifically, the topic should
 * There is only one handler of each type for a smart contract
 * Highlight the handler names are fixed
 * Update the diagram to reflect these changes
 * Ensure the code snipped matches the diagram",,denyeart,odowdaibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11459,,,No,,Unset,No,,,"1|i00ho7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,odowdaibm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Mar/19 3:42 PM;odowdaibm;[~Suma] [~spnair] [~sumanair] [~andrew-coleman] [~mbwhite] Raised defect and will add you as reviewer.;;;","27/Apr/19 12:32 AM;denyeart;Merged in master. Merge conflict in release-1.4 so I did not cherry pick, but feel free to submit a release-1.4 CR.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
log warnings on ingress connections,FAB-14802,38737,38728,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,26/Mar/19 6:36 PM,29/Apr/19 6:05 PM,28/Oct/23 3:05 AM,29/Apr/19 6:05 PM,,,,,,,,,,fabric-orderer,,,,,0,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hof:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Only peer nodes fail to startup if machine is rebooted while byfn network is running,FAB-14803,38448,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,,sejalpawar,sejalpawar,14/Mar/19 4:06 PM,24/Apr/19 7:15 AM,28/Oct/23 3:05 AM,24/Apr/19 7:15 AM,v1.4.0,,,,,,,,,fabric-samples,,,,,0,1.4.0-rc1,byfn,Hyperledger,peer,"I have a hyperledger fabric network running on a single AWS instance using the default byfn script.

ERROR: Orderer, cli, CA docker containers show ""Up"" status. Peers show ""Exited"" status.

Error occurs when:
 # Byfn network is running, machine is rebooted (not in my control but because of some external reason).
 # Network is left running overnight without shutting the machine. Shows same status next morning.

Error shown:
{noformat}
docker ps -a
CONTAINER ID        IMAGE                               COMMAND             CREATED             STATUS                         PORTS                    NAMES
e69e2a7bcc34        hyperledger/fabric-tools:latest     ""/bin/bash""         About an hour ago   Up About an hour                                        cli
c86d2388c9fb        hyperledger/fabric-peer:latest      ""peer node start""   About an hour ago   Exited (2) About an hour ago                            peer0.org1.example.com
23c3c8333bc4        hyperledger/fabric-peer:latest      ""peer node start""   About an hour ago   Exited (2) About an hour ago                            peer0.org2.example.com
b9161e211260        hyperledger/fabric-peer:latest      ""peer node start""   About an hour ago   Exited (2) About an hour ago                            peer1.org1.example.com
b5cf08f21f21        hyperledger/fabric-orderer:latest   ""orderer""           About an hour ago   Up About an hour               0.0.0.0:7050->7050/tcp   orderer.example.com
5b3fc3ea8a72        hyperledger/fabric-peer:latest      ""peer node start""   About an hour ago   Exited (2) About an hour ago                            peer1.org2.example.com
{noformat}
Attaching docker log: https://hastebin.com/ahuyihubup.cs

Only the peers fail to start up.
Steps I have tried to solve the issue:
 # docker start $(docker ps -aq) or manually, starting individual peers.
 # byfn down, generate and then up again. Shows the same result as above.
 # Rolled back to previous versions of fabric binaries. Same result on 1.1, 1.2 and 1.4. In older binaries, error is not repeated if network is left running overnight but repeats when machine is restarted.
 # Used older docker images such as 1.1 and 1.2.
 # Tried starting up only one peer, orderer and cli.
 # Changed network name and domain name.
 # Uninstalled docker, docker-compose and reinstalled.
 # Changed port numbers of all nodes.
 # Tried restarting without mounting any volumes.

The only thing that works is reformatting the AWS instance and reinstalling everything from scratch. Also, I am NOT using AWS blockchain template.
Any help would be appreciated. I have been stuck on this issue for a month now.",,agiledeveloper,denyeart,mastersingh24,sejalpawar,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13419,,,,,,,,,,"14/Mar/19 4:05 PM;sejalpawar;docker_log.txt;https://jira.hyperledger.org/secure/attachment/16928/docker_log.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00g0f:",,,,Unset,Unset,,,,"1. On fabric 1.4, execute byfn generate and up.
2. Shut down the machine and restart.
3. Check docker ps -a.
4. Execute byfn down.
5. Execute byfn generate, up. Check docker ps -a.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),agiledeveloper,denyeart,mastersingh24,sejalpawar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Mar/19 3:20 PM;agiledeveloper;I have the same issue;;;","26/Mar/19 9:17 PM;mastersingh24;[~sejalpawar] [~agiledeveloper]  - Which EC2 Linux VM are you using?;;;","26/Mar/19 9:37 PM;mastersingh24;I'm trying this with amzn2-ami-hvm-2.0.20190313-x86_64-gp2 (ami-0451ae4fd8dd178f7);;;","26/Mar/19 9:40 PM;sejalpawar;I have a t3.medium instance with Ubuntu 18.04;;;","26/Mar/19 10:39 PM;mastersingh24;Could not seem to reproduce this with the Amazon Linux 2 AMI.
Will try Ubuntu 18.04;;;","26/Mar/19 11:31 PM;mastersingh24;So I cannot reproduce this ... I'm on AWS with an Ubuntu 18.04 instance and I followed the repro steps above and did not have any issues.



 ;;;","26/Mar/19 11:36 PM;mastersingh24;You might be able to avoid this by adding the env variable

{noformat}
GODEBUG=netdns=go
{noformat}

to the docker-compose file  (  https://stackoverflow.com/a/49649678/6160507 );;;","28/Mar/19 11:58 PM;sejalpawar;[~mastersingh24] Thank you for replying. The environment I am working on goes down on weekends. I will let you know if the issue is resolved.;;;","05/Apr/19 6:17 PM;sejalpawar;[~mastersingh24] Hey, the issue did indeed get resolved by setting GODEBUG=netdns=go but I wanted to know the mechanics behind it. What is it that causes the error? And why does setting it to Go resolver solve it?;;;","16/Apr/19 4:49 PM;mastersingh24;[~sejalpawar]   - I forget the exact issue, but basically there are a few edge cases where certain settings / stanzas in resolv.conf end up being problematic .... when you set * GODEBUG=netdns=go*, this tells Go to use it's built-in DNS resolver which simply finds the list of DNS servers in resolv.conf and communicates directly with them.

;;;","24/Apr/19 7:15 AM;denyeart;There is more information in FAB-13419, so let's use FAB-13419 for further discussion.

Closing this one as duplicate.;;;",,,,,,,,,,,,,,,,,,
Support for deploying chaincode on peers,FAB-14804,24907,,Story,To Do,FAB,Fabric,software,denyeart,,,High,,,YashGanthe,YashGanthe,11/Dec/17 3:20 PM,08/Aug/19 5:21 PM,28/Oct/23 3:05 AM,,,,,,,Future,,,,,,,,,0,,,,,"If there is a channel that is joined by about 100 peers that are all involved in the endorsement process, every time there is a new version of the chaincode to be deployed, the install chaincode command needs to be invoked against each peer. The Peers may be in data centers of different organizations. Asking each organization to deploy the chaincode individually is cumbersome. 

There should be a way to make a transaction of a channel such that the chaincode is deployed on all peers that have joined the channel. There is an *instantiate* transaction which launches the chaincode on all peers of a channel. The *deploy* transaction should be similar, with the difference that it would transport the chaincode files to peers but not launch the chaincode.",,fredbi,mastersingh24,YashGanthe,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzyqkf:",,,,Unset,,,,,,,Unset,,,,,,,,,,,fredbi,mastersingh24,YashGanthe,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Aug/19 5:21 PM;mastersingh24;Actually, we intentionally do not want to do this.  The idea is that each organization needs to inspect any chaincode package (even upgrades) before installing on their peers.  We also do not want to propagate chaincode bytes using any of the peer to peer or channel broadcast mechanisms.

I'll leave this open for now as there might be a way to deal with this via the new lifecycle and future work to actually leverage existing Docker images for chaincode rather than actually building container via the peer.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a chaincode developer, I want to provide my own custom builds for chaincode containers",FAB-14805,37829,,Story,Backlog,FAB,Fabric,software,denyeart,,,High,,,SinTan1071,SinTan1071,20/Feb/19 8:18 PM,01/May/19 8:08 PM,28/Oct/23 3:05 AM,,,,,,,Future,,,,,,,,,0,,,,,"Because of the need of the project, we have changed the core/chaincode/shim of fabric1.0.0. The tree structure of shim is:

```
  shim
 ├── chaincode.go
 ├── handler.go
 ├── inprocstream.go
 ├── interfaces.go
 ├── java
 │   └── ···
 ├── mockstub.go
 ├── mockstub_test.go
 ├── response.go
 ├── myxxxutil.go
 ├── shim_test.go
 └── myxxx.go

```

 Some of these functions require cgo, which is writen in c++, there is some code snippet:

```
 //myxxx.go 
 package shim

/*
 #cgo CFLAGS: -I/opt/xxxsrc
 #cgo LDFLAGS: -L/usr/lib -lmyxxx
 #include ""interface.hpp""
 #include <stdlib.h>
 */
 import ""C""

func SomeFucn()

{ ··· //the C++ source code is in /opt/xxxsrc folder，so is interface.hpp file，the libmyxxx.so file is in /usr/lib folder }

```

The, I used the make docker command to create a peer image based on hyperledger/fabric-baseimage:x86_64-0.3.1 under fabric directory. This hyperledger/fabric-baseimage:x86_64-0.3.1 has been modified by me. I put the libmyxxx. so file into /usr/lib folder of this ""baseimage"", and put the c++ soure code into /opt/xxxsrc,  Then the execution log is:

```
  Building build/docker/bin/peer

(the docker command line is：
 docker run -i --rm --user=0 -v /home/my/gopath/src/github.com/hyperledger/fabric:/opt/gopath/src/github.com/hyperledger/fabric -w /opt/gopath/src/github.com/hyperledger/fabric -v /home/my/gopath/src/github.com/hyperledger/fabric/build/docker/bin:/opt/gopath/bin -v /home/my/gopath/src/github.com/hyperledger/fabric/build/docker/peer/pkg:/opt/gopath/pkg hyperledger/fabric-baseimage:x86_64-0.3.1 
 go install -ldflags ""-X github.com/hyperledger/fabric/common/metadata.Version=1.0.0 -X github.com/hyperledger/fabric/common/metadata.BaseVersion=0.3.1 -X github.com/hyperledger/fabric/common/metadata.BaseDockerLabel=org.hyperledger.fabric -X github.com/hyperledger/fabric/common/metadata.DockerNamespace=hyperledger -X github.com/hyperledger/fabric/common/metadata.BaseDockerNamespace=hyperledger -linkmode external -extldflags -static -lpthread"" github.com/hyperledger/fabric/peer
 )

github.com/hyperledger/fabric/core/chaincode/shim
 mkdir -p $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/
 cd /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim
 CGO_LDFLAGS=""-g"" ""-O2"" ""-L/usr/lib"" ""-lmyxxx"" ""-L/usr/lib"" ""-lmyxxx"" /opt/go/pkg/tool/linux_amd64/cgo -objdir $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/ -importpath github.com/hyperledger/fabric/core/chaincode/shim – -I $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/ -I/opt/xxxsrc -I/opt/xxxsrc myxxxutil.go myxxx.go
 cd /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim
 gcc -I . -fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -I $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/ -g -O2 -I/opt/xxxsrc -I/opt/xxxsrc -o $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/_cgo_main.o -c $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/_cgo_main.c
 cd /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim
 gcc -I . -fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -I $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/ -g -O2 -I/opt/xxxsrc -I/opt/xxxsrc -o $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/_cgo_export.o -c $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/_cgo_export.c
 gcc -I . -fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -I $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/ -g -O2 -I/opt/xxxsrc -I/opt/xxxsrc -o $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/myxxxutil.cgo2.o -c $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/myxxxutil.cgo2.c
 gcc -I . -fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -I $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/ -g -O2 -I/opt/xxxsrc -I/opt/xxxsrc -o $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/xxx.cgo2.o -c $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/xxx.cgo2.c
 cd /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim
 gcc -I . -fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -o $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/_cgo_.o $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/_cgo_main.o $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/_cgo_export.o $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/myxxxutil.cgo2.o $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/myxxx.cgo2.o -g -O2 -L/usr/lib -lmyxxx -L/usr/lib -lmyxxx
 cd /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim
 /opt/go/pkg/tool/linux_amd64/cgo -objdir $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/ -dynpackage shim -dynimport $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/_cgo_.o -dynout $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/_cgo_import.go
 gcc -I . -fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -o $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/_all.o $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/_cgo_export.o $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/myxxxutil.cgo2.o $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/myxxx.cgo2.o -g -O2 -L/usr/lib -L/usr/lib -Wl,-r -nostdlib -no-pie -Wl,--build-id=none
 /opt/go/pkg/tool/linux_amd64/compile -o $WORK/github.com/hyperledger/fabric/core/chaincode/shim.a -trimpath $WORK -p github.com/hyperledger/fabric/core/chaincode/shim -buildid 2ee9889b3f3fdd6fc02e5029d94e8c287f977ccb -importmap github.com/golang/protobuf/proto=github.com/hyperledger/fabric/vendor/github.com/golang/protobuf/proto -importmap github.com/golang/protobuf/ptypes/timestamp=github.com/hyperledger/fabric/vendor/github.com/golang/protobuf/ptypes/timestamp -importmap github.com/looplab/fsm=github.com/hyperledger/fabric/vendor/github.com/looplab/fsm -importmap github.com/op/go-logging=github.com/hyperledger/fabric/vendor/github.com/op/go-logging -importmap github.com/spf13/viper=github.com/hyperledger/fabric/vendor/github.com/spf13/viper -importmap golang.org/x/net/context=github.com/hyperledger/fabric/vendor/golang.org/x/net/context -importmap google.golang.org/grpc=github.com/hyperledger/fabric/vendor/google.golang.org/grpc -D _/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim -I $WORK -I /opt/gopath/pkg/linux_amd64 -pack ./chaincode.go ./fileIO.go ./handler.go ./inprocstream.go ./interfaces.go ./mockstub.go ./response.go $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/_cgo_gotypes.go $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/myxxxutil.cgo1.go $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/myxxx.cgo1.go $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/_cgo_import.go
 cd /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim
 pack r $WORK/github.com/hyperledger/fabric/core/chaincode/shim.a $WORK/github.com/hyperledger/fabric/core/chaincode/shim/_obj/_all.o # internal
 cp $WORK/github.com/hyperledger/fabric/core/chaincode/shim.a /opt/gopath/pkg/linux_amd64/github.com/hyperledger/fabric/core/chaincode/shim.a
 /opt/go/pkg/tool/linux_amd64/link -o $WORK/github.com/hyperledger/fabric/peer/_obj/exe/a.out -L $WORK -L /opt/gopath/pkg/linux_amd64 -extld=gcc -buildmode=exe -buildid=c7ee3188106eddcbae7255ad032536402bc38b29 -X github.com/hyperledger/fabric/common/metadata.Version=1.0.0 -X github.com/hyperledger/fabric/common/metadata.BaseVersion=0.3.1 -X github.com/hyperledger/fabric/common/metadata.BaseDockerLabel=org.hyperledger.fabric -X github.com/hyperledger/fabric/common/metadata.DockerNamespace=hyperledger -X github.com/hyperledger/fabric/common/metadata.BaseDockerNamespace=hyperledger -linkmode external -extldflags ""-static -lpthread"" $WORK/github.com/hyperledger/fabric/peer.a

github.com/hyperledger/fabric/peer
 /opt/go/pkg/tool/linux_amd64/link: running gcc failed: exit status 1
 /usr/bin/ld: cannot find -lmyxxx
 /usr/bin/ld: cannot find -lmyxxx
 /usr/lib/gcc/x86_64-linux-gnu/5/../../../x86_64-linux-gnu/libltdl.a(dlopen.o): In function `vm_open':
 (.text+0x5e): warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
 /tmp/go-link-940349017/000001.o: In function `_cgo_7a2d42f1a351_C2func_getaddrinfo':
 /tmp/workdir/go/src/net/cgo_unix.go:66: warning: Using 'getaddrinfo' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
 collect2: error: ld returned 1 exit status

Makefile:197: recipe for target 'build/docker/bin/peer' failed
 make: *** [build/docker/bin/peer] Error 2

```

I already tried to add path (/usr/lib) in /etc/ld.so.conf file, and executed ""ldconfig"", and also tried to add path to environment variables LD_LIBRARY_PATH and LIBRARY_PATH, the problem still reappears, so I would like to ask if there is any solution to the problem, thank you

 ",,mastersingh24,SinTan1071,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00clz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,SinTan1071,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Mar/19 8:17 PM;mastersingh24;We won't be doing anything to address this in any of the prior releases.
We do eventually plan to move to a model where chaincode is no longer built by the peer but rather outside of the peer and deployed as a Docker container.  Once that work is done (likely post-2.0) then you'll be able to included whatever is needed in your own images.

For now, you'd need to modify fabric-ccenv and baseos to include your library.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Make Docker throws error Makefile:105: *** ""No go in PATH: Check dependencies"".  Stop. Fabric version 1.1",FAB-14806,31163,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Environment Issue,,bnagpur,bnagpur,19/Jun/18 3:05 PM,26/Mar/19 8:20 PM,28/Oct/23 3:05 AM,26/Mar/19 8:19 PM,,,,,,,,,,,,,,,0,,,,,"I have tried to find all possible posts across internet and they all suggested to set go path and goroot.

I have done so and  here is the go env detail:

GO is installed at /usr/local/go

{color:#59afe1}GOARCH=""amd64""{color}
{color:#59afe1}GOBIN=""""{color}
{color:#59afe1}GOCACHE=""/home/balee/.cache/go-build""{color}
{color:#59afe1}GOEXE=""""{color}
{color:#59afe1}GOHOSTARCH=""amd64""{color}
{color:#59afe1}GOHOSTOS=""linux""{color}
{color:#59afe1}GOOS=""linux""{color}
{color:#59afe1}GOPATH=""/home/balee/go""{color}
{color:#59afe1}GORACE=""""{color}
{color:#59afe1}GOROOT=""/usr/local/go""{color}
{color:#59afe1}GOTMPDIR=""""{color}
{color:#59afe1}GOTOOLDIR=""/usr/local/go/pkg/tool/linux_amd64""{color}
{color:#59afe1}GCCGO=""gccgo""{color}
{color:#59afe1}CC=""gcc""{color}
{color:#59afe1}CXX=""g++""{color}
{color:#59afe1}CGO_ENABLED=""1""{color}
{color:#59afe1}CGO_CFLAGS=""-g -O2""{color}
{color:#59afe1}CGO_CPPFLAGS=""""{color}
{color:#59afe1}CGO_CXXFLAGS=""-g -O2""{color}
{color:#59afe1}CGO_FFLAGS=""-g -O2""{color}
{color:#59afe1}CGO_LDFLAGS=""-g -O2""{color}
{color:#59afe1}PKG_CONFIG=""pkg-config""{color}
{color:#59afe1}GOGCCFLAGS=""-fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=/tmp/go-build664507062=/tmp/go-build -gno-record-gcc-switches""{color}

{color:#f691b2}updated the .bashrc file with export GOPATH=/home/balee/go{color}

{color:#f691b2}export PATH=$PATH:$GOROOT/bin{color}

{color:#f691b2}go version{color}
{color:#f691b2}go version go1.10.1 linux/amd64{color}

 

{color:#d04437}from fabric directory issue command sudo make docker and getting and error:{color}

{color:#f691b2}{color:#d04437}balee@balee-VirtualBox:~/go/src/github.com/hyperledger/fabric$ sudo make docker{color}
{color:#d04437}[sudo] password for balee: {color}
{color:#d04437}Makefile:105: *** ""No go in PATH: Check dependencies"".  Stop.{color}
{color:#d04437}balee@balee-VirtualBox:~/go/src/github.com/hyperledger/fabric${color} {color}

 

{color:#f691b2}Despite having the path set Makefile is not able to find go executable @ {color}

{color:#f79232}EXECUTABLES = go docker git curl
K := $(foreach exec,$(EXECUTABLES),\
        $(if $(shell which $(exec)),some string,$(error ""No $(exec) in PATH: Check dependencies""))){color}","Ubuntu 16.4 on Oracle Virtual box inside a Windows 7, go version 1.10, fabric 1.1",bnagpur,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzzf9j:",,,,,,,,,,,,,,,,,,,,,,bnagpur,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Jun/18 10:25 AM;kchristidis;Did you {{source ~/.bashrc}} after you edited it?;;;","22/Jun/18 2:29 PM;bnagpur;[~kchristidis] yes I did but it did not help.Then I read a temporary solution to create softlink between /opt/gopath and $GOPATH(/home/user/go) and I could get past that error but the new error I see while running make docker is {color:#d04437}""/src{color}/github.com/hyperledger/fabric/core/chaincode/shim"" not found in $GOROOT or $GOPATH.
 
 This means that GOPATH is ignored in make command, here path should be {color:#205081}'/home/balee/go{color}{color:#d04437}/src{color}/github.com/hyperledger/fabric/core/chaincode/shim'

but in the error message it says path for the package begins with {color:#d04437}/src..{color}. ""/home/balee/go"" (GOPATH) should apper before /src

Makefile throws error at following
{code:java}
GOSHIM_DEPS = $(shell ./scripts/goListFiles.sh $(PKGNAME)/core/chaincode/shim)
{code};;;","22/Jun/18 2:35 PM;bnagpur;Bottom line is $GOPATH does not persist in the session when the Make command is executed;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Update interest_rate_swaps to work with fabric 2.0,FAB-14807,38742,38608,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,lehors,lehors,lehors,26/Mar/19 9:53 PM,05/Jun/19 9:11 PM,28/Oct/23 3:05 AM,05/Jun/19 9:11 PM,,,,,,v2.0.0,,,,fabric-samples,,,,,0,,,,,"Artifacts generation fails.

 
{code:java}
$ ./network.sh generate
Generating certs and genesis block for channel 'irs'
/Users/lehors/Projects/Go/src/github.com/hyperledger/fabric-samples/interest_rate_swaps/network/../../bin/cryptogen
[...]
#########  Generating Orderer Genesis block ##############
2019-03-26 13:36:35.228 CET [common.tools.configtxgen] main -> FATA 001 Missing channelID, please specify it with '-channelID'
Failed to generate orderer genesis block...

### Generating channel configuration transaction 'channel.tx' ###
[...]
2019-03-26 13:39:32.841 CET [common.tools.configtxgen] main -> FATA 006 Error on outputChannelCreateTx: could not generate default config template: error parsing configuration: error adding policies to channel group: no policies defined
Failed to generate channel configuration transaction...

{code}",,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15199,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hpb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Jun/19 9:11 PM;lehors;Although this was created before this is now essentially a duplicate.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow all ledgers on a peer to reset to genesis block,FAB-14808,38744,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,Senthil1,Senthil1,Senthil1,26/Mar/19 10:22 PM,25/Jul/19 4:33 PM,28/Oct/23 3:05 AM,22/Jun/19 2:37 AM,,,,,,v1.4.2,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hpr:",,,,Unset,Unset,v1.4.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Delay starting the endorser server,FAB-14809,38745,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,Senthil1,Senthil1,Senthil1,26/Mar/19 10:23 PM,26/Jul/19 2:33 AM,28/Oct/23 3:05 AM,22/Jun/19 2:37 AM,v1.4.2,,,,,,,,,fabric-ledger,,,,,0,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hpz:",,,,Unset,Unset,v1.4.x,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update chaincode-docker-devmode to work with fabric 2.0,FAB-14810,38747,38608,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,lehors,lehors,lehors,26/Mar/19 10:40 PM,27/Mar/19 5:47 AM,28/Oct/23 3:05 AM,27/Mar/19 4:48 AM,,,,,,v2.0.0,,,,fabric-samples,,,,,0,,,,,"Building the abstore chaincode fails:
{code:java}
$ go build -o abstore
abstore.go:23:2: cannot find package ""github.com/hyperledger/fabric/core/chaincode/shim"" in any of:
	/usr/local/go/src/github.com/hyperledger/fabric/core/chaincode/shim (from $GOROOT)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim (from $GOPATH)
abstore.go:24:2: cannot find package ""github.com/hyperledger/fabric/protos/peer"" in any of:
	/usr/local/go/src/github.com/hyperledger/fabric/protos/peer (from $GOROOT)
	/opt/gopath/src/github.com/hyperledger/fabric/protos/peer (from $GOPATH)

{code}
 ",,lehors,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hqf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),lehors,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Mar/19 2:15 AM;yuki-kon;Hi, [~lehors]. I submitted the same issue FAB-14369 last month. I also posted a CR (https://gerrit.hyperledger.org/r/#/c/29730/). The CR is waiting reviews. If you are OK, could you add the duplicated tag to this JIRA and take a look at my CR?;;;","27/Mar/19 4:48 AM;lehors;Done. Thanks!;;;","27/Mar/19 5:47 AM;yuki-kon;[~lehors] Thank you very much!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Add datastructures for ledger to core/ledger,FAB-14811,38748,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,dereckluo,btl5037,btl5037,26/Mar/19 10:46 PM,03/Apr/19 1:45 AM,28/Oct/23 3:05 AM,03/Apr/19 1:44 AM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hqn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add datastructures for operations and metrics to internal/peer,FAB-14812,38749,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,26/Mar/19 10:56 PM,26/Mar/19 10:57 PM,28/Oct/23 3:05 AM,26/Mar/19 10:57 PM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hqv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add channel event sample to fabric-samples,FAB-14813,38754,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,26/Mar/19 11:09 PM,18/Jan/21 5:07 AM,28/Oct/23 3:05 AM,08/Aug/19 9:07 AM,,,,,,,,,,fabric-samples,,,,,0,,,,,"This task is to add a channel event handler sample based on block events.


Scope:

create a block event handler

write events received to the console

write events received to a log file

write events to an off chain couchdb database

demonstrate a basic map reduce view for aggregation",,chris.elder,greglinux,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hrz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),chris.elder,greglinux,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jan/21 5:07 AM;greglinux;it fails at this step: ""write events to an off chain couchdb database"";;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update dep to version 0.5.1,FAB-14814,38756,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,26/Mar/19 11:40 PM,27/Mar/19 1:49 AM,28/Oct/23 3:05 AM,27/Mar/19 1:49 AM,,,,,,v1.4.1,v2.0.0,,,,,,,,0,hygiene,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hsf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Mar/19 11:43 PM;mastersingh24;https://gerrit.hyperledger.org/r/30417
https://gerrit.hyperledger.org/r/30418;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generate Token CLI reference,FAB-14815,38760,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,27/Mar/19 12:14 AM,03/Dec/19 3:16 AM,28/Oct/23 3:05 AM,09/Apr/19 11:19 PM,,,,,,,,,,fabric-docs,,,,,0,,,,,Generate the token CLI references for Fabric Docs,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11144,,,No,,Unset,No,,,"1|i00htb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/19 6:25 AM;negupta;https://gerrit.hyperledger.org/r/#/c/30511/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Race in comm/server_test,FAB-14816,38761,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,sykesm,sykesm,27/Mar/19 12:20 AM,29/Mar/19 9:50 PM,28/Oct/23 3:05 AM,29/Mar/19 9:50 PM,v2.0.0,,,,,v2.0.0,,,,fabric-peer,,,,,0,ci-flake,race,,,"{code}
11:10:30 ==================
11:10:30 WARNING: DATA RACE
11:10:30 Write at 0x00c0002502a0 by goroutine 36:
11:10:30   github.com/hyperledger/fabric/core/comm_test.TestCipherSuites.func1()
11:10:30       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/comm/server_test.go:1671 +0x298
11:10:30   testing.tRunner()
11:10:30       /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0x162
11:10:30 
11:10:30 Previous write at 0x00c0002502a0 by goroutine 35:
11:10:30   github.com/hyperledger/fabric/core/comm_test.TestCipherSuites.func1()
11:10:30       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/comm/server_test.go:1671 +0x298
11:10:30   testing.tRunner()
11:10:30       /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0x162
11:10:30 
11:10:30 Goroutine 36 (running) created at:
11:10:30   testing.(*T).Run()
11:10:30       /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:878 +0x659
11:10:30   github.com/hyperledger/fabric/core/comm_test.TestCipherSuites()
11:10:30       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/comm/server_test.go:1663 +0xc2b
11:10:30   testing.tRunner()
11:10:30       /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0x162
11:10:30 
11:10:30 Goroutine 35 (finished) created at:
11:10:30   testing.(*T).Run()
11:10:30       /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:878 +0x659
11:10:30   github.com/hyperledger/fabric/core/comm_test.TestCipherSuites()
11:10:30       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/comm/server_test.go:1663 +0xc2b
11:10:30   testing.tRunner()
11:10:30       /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0x162
11:10:30 ==================
11:10:30 --- FAIL: TestCipherSuites (0.00s)
11:10:30     --- FAIL: TestCipherSuites/server_default_/_client_no_match (0.00s)
11:10:30         server_test.go:1665: Running test server default / client no match ...
11:10:30         server_test.go:1675: remote error: tls: handshake failure
11:10:30         testing.go:771: race detected during execution of test
11:10:30 --- FAIL: TestBindingInspector (1.18s)
11:10:30     testing.go:771: race detected during execution of test
{code}",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00htj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/19 12:34 AM;sykesm;https://gerrit.hyperledger.org/r/c/30420/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test failure in TestBlockingSend/ConsensusRequest,FAB-14817,38763,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,yacovm,sykesm,sykesm,27/Mar/19 12:24 AM,01/Apr/19 10:54 PM,28/Oct/23 3:05 AM,01/Apr/19 10:54 PM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"{code}
11:17:52 --- FAIL: TestBlockingSend (1.40s)
11:17:52     --- FAIL: TestBlockingSend/ConsensusRequest (0.22s)
11:17:52         <autogenerated>:1: 
11:17:52             	Error Trace:	comm_test.go:430
11:17:52             	Error:      	An error is expected but got nil.
11:17:52             	Test:       	TestBlockingSend/ConsensusRequest
11:17:52         comm_test.go:446: Elapsed time: 126.882µs
11:17:52 2019-03-26 15:16:33.518 UTC [test] Configure -> INFO 492 Entering, channel: test, nodes: [ID: 50
11:17:52 Endpoint: 127.0.0.1:44622
11:17:52 ServerTLSCert:-----BEGIN CERTIFICATE-----
11:17:52 MIIBozCCAUmgAwIBAgIQJJWu1v0+R5PTad/pRO4QAjAKBggqhkjOPQQDAjAyMTAw
11:17:52 LgYDVQQFEycxODM4NzAwMzE1NzI4Mzc5Mzc0ODQyMDA5MDEwMjU1OTcyOTM1NDQw
11:17:52 HhcNMTkwMzI1MTUxNjMzWhcNMjkwMzIzMTUxNjMzWjAxMS8wLQYDVQQFEyY0ODYy
11:17:52 OTQwNjI1MjY1MTQ3MzA4NDk1MjEzNTM0NzEyNTIyNzUyMjBZMBMGByqGSM49AgEG
11:17:52 CCqGSM49AwEHA0IABKaToNZ47DyYCA+g8Sz5YvbzgIl0RFikPsXCdmY3iya1tifk
11:17:52 b4ZO35cT8IWhIAJOcw0GSuY9THBBcVAheVWJfTKjQjBAMA4GA1UdDwEB/wQEAwIF
11:17:52 oDAdBgNVHSUEFjAUBggrBgEFBQcDAgYIKwYBBQUHAwEwDwYDVR0RBAgwBocEfwAA
11:17:52 ATAKBggqhkjOPQQDAgNIADBFAiAihc90Wv+4Afk71CgFrwwLKNA2qs8Z0jcfGN/H
11:17:52 xFm/pwIhALxXk++LsviggDozjzmP3BdvAzVPuR5vZHO88ElTgn4r
11:17:52 -----END CERTIFICATE-----
11:17:52  ClientTLSCert:-----BEGIN CERTIFICATE-----
11:17:52 MIIBhzCCAS2gAwIBAgIQAmWoA2zBKZwq9XZI5syHdTAKBggqhkjOPQQDAjAyMTAw
11:17:52 LgYDVQQFEycxODM4NzAwMzE1NzI4Mzc5Mzc0ODQyMDA5MDEwMjU1OTcyOTM1NDQw
11:17:52 HhcNMTkwMzI1MTUxNjMzWhcNMTkwMzI3MTUxNjMzWjAwMS4wLAYDVQQFEyUzMTg2
11:17:52 Mjg1NjkwNDM3NjUwNjAxNDE3NzA0NTUwMTY3MjUwODA1MFkwEwYHKoZIzj0CAQYI
11:17:52 KoZIzj0DAQcDQgAEq3vvDStPfmfhXkgHQSye7nMKs9ud7Bf4PzevkAyEmJKC8+m3
11:17:52 bgHdYYp68OPK65t1yKZogOQAZ+PH0vRRfY5826MnMCUwDgYDVR0PAQH/BAQDAgWg
11:17:52 MBMGA1UdJQQMMAoGCCsGAQUFBwMCMAoGCCqGSM49BAMCA0gAMEUCIA7FBU/wMDd5
11:17:52 0iUOWNpbK3oMcVbE0UfRT7jAfNkeALb0AiEAyYnyDRbYiHc4EtrtjogeIHLzjfPk
11:17:52 nJuGxrsNRuSqCjc=
11:17:52 -----END CERTIFICATE-----
11:17:52 ]
11:17:52 2019-03-26 15:16:33.519 UTC [test] updateStubInMapping -> INFO 493 Allocating a new stub for node 50 with endpoint of 127.0.0.1:44622 for channel test
11:17:52 2019-03-26 15:16:33.519 UTC [test] updateStubInMapping -> INFO 494 Deactivating node 50 in channel test with endpoint of 127.0.0.1:44622 due to TLS certificate change
11:17:52 2019-03-26 15:16:33.520 UTC [test] applyMembershipConfig -> INFO 495 50 exists in both old and new membership for channel test , skipping its deactivation
11:17:52 2019-03-26 15:16:33.521 UTC [test] Configure -> INFO 496 Exiting
11:17:52 2019-03-26 15:16:34.147 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 497 orderer type: solo
11:17:52 2019-03-26 15:16:34.148 UTC [common.tools.configtxgen.localconfig] Load -> INFO 498 Loaded configuration: /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/sampleconfig/configtx.yaml
11:17:52 2019-03-26 15:16:34.150 UTC [test] VerifyBlockSignature -> ERRO 499 Failed creating a new bundle for channel mychannel, Config content is: {
11:17:52 	""channel_group"": null,
11:17:52 	""sequence"": ""0""
11:17:52 }
11:17:52 2019-03-26 15:16:34.153 UTC [test] VerifyBlockSignature -> INFO 49a Initializing new PolicyManager for channel mychannel
11:17:52 2019-03-26 15:16:34.295 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 49b orderer type: solo
11:17:52 2019-03-26 15:16:34.305 UTC [common.tools.configtxgen.localconfig] Load -> INFO 49c Loaded configuration: /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/sampleconfig/configtx.yaml
11:17:52 FAIL
11:17:52 coverage: 96.3% of statements
11:17:52 FAIL	github.com/hyperledger/fabric/orderer/common/cluster	23.549s
{code}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10901/consoleFull",,sykesm,,,,,,,,,,,,,,,,,,,,FAB-14863,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00htz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
FAIL: TestStreamAbort/Evicted_from_membership,FAB-14818,38764,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,sykesm,sykesm,27/Mar/19 12:30 AM,02/Apr/19 6:07 PM,28/Oct/23 3:05 AM,02/Apr/19 12:38 AM,v2.0.0,,,,,,,,,fabric-orderer,,,,,0,ci-flake,,,,"{code}
11:22:46 2019-03-26 15:20:59.477 UTC [test] updateStubInMapping -> INFO 377 Deactivating node 19 in channel test with endpoint of  due to TLS certificate change
11:22:46 2019-03-26 15:20:59.481 UTC [test] applyMembershipConfig -> INFO 378 19 exists in both old and new membership for channel test , skipping its deactivation
11:22:46 2019-03-26 15:20:59.493 UTC [test] Configure -> INFO 379 Exiting
11:22:46 --- FAIL: TestStreamAbort (0.22s)
11:22:46     --- FAIL: TestStreamAbort/Evicted_from_membership (0.09s)
11:22:46         <autogenerated>:1: 
11:22:46             	Error Trace:	comm_test.go:573
11:22:46             	            				asm_amd64.s:1333
11:22:46             	Error:      	""EOF"" does not contain ""rpc error""
11:22:46             	Test:       	TestStreamAbort/Evicted_from_membership
11:22:46 2019-03-26 15:20:59.543 UTC [test] Configure -> INFO 37a Entering, channel: test, nodes: [ID: 22
{code}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10905/consoleFull",,sykesm,yacovm,,,,,,,,,,,,,,,,,FAB-14120,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hu7:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,yacovm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Apr/19 10:57 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/30586/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Duplicate call to GetTxReadWriteSet during GetTxSimulationResults,FAB-14819,38765,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sheehan,sheehan,sheehan,27/Mar/19 12:35 AM,31/Oct/19 4:09 PM,28/Oct/23 3:05 AM,04/Apr/19 6:00 AM,v1.4.0,,,,,v2.0.0,,,,fabric-ledger,,,,,0,,,,,"In rwset_builder.go GetTxSimulationResults() there are two calls to GetTxReadWriteSet() which each build a new TxRwSet. It's only necessary to do this once in GetTxSimulationResults()

 ",,sheehan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00huf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sheehan,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test restarting a peer using the new chaincode lifecycle,FAB-14820,38767,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,27/Mar/19 12:42 AM,03/Apr/19 8:52 AM,28/Oct/23 3:05 AM,03/Apr/19 8:52 AM,,,,,,,,,,,,,,,0,,,,,"  Given I changed the ""Application"" capability to version ""V2_0""
  And I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel
  And an admin packages a chaincode
  And the organization admins install the chaincode package on all peers
  Then a packageId is received on all peers
  When each organization admin approves the chaincode package with policy ""OR ('org1.example.com.member','org2.example.com.member')""
  And an admin commits the chaincode package to the channel
  And I wait up to ""10"" seconds for the chaincode to be committed

  When a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""] on both orgs
  And I wait up to ""30"" seconds for deploy to complete
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000
  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 990

  When ""peer0.org2.example.com"" is taken down

  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 980

  When ""peer0.org2.example.com"" comes back up

  When a user queries on the chaincode with args [""query"",""a""] on ""peer0.org2.example.com""
  Then a user receives a success response of 970 from ""peer0.org2.example.com""",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,Automated,,Unset,No,,,"1|i00huv:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Pass,Passes with build using CR https://gerrit.hyperledger.org/r/c/30333/,Unset,,(Please add usage information),latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
More rigorous validation against Raft config metadata,FAB-14821,38768,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,27/Mar/19 12:44 AM,03/Apr/19 6:30 PM,28/Oct/23 3:05 AM,03/Apr/19 6:30 PM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,,,,,"Channel creation tx should be validated **before** being proposed to avoid crashing orderer due to malformed config tx.

this should also be done with config tx targeting current channel (instead of creation)",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hv3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change nwo `CreateChannelFail` to match the signature of `CreateChannel`,FAB-14822,38769,38768,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,27/Mar/19 12:46 AM,02/Apr/19 5:19 AM,28/Oct/23 3:05 AM,28/Mar/19 6:15 PM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,,,,,,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hvb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
validate Raft config metadata at channel creation,FAB-14823,38770,38768,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,27/Mar/19 12:48 AM,03/Apr/19 6:29 PM,28/Oct/23 3:05 AM,03/Apr/19 6:29 PM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,,,,,,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hvj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Apr/19 6:29 PM;guoger;https://gerrit.hyperledger.org/r/c/30521/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
add an integration test to assert malformed Raft config doesn't crash orderer,FAB-14824,38771,38768,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,27/Mar/19 12:50 AM,03/Apr/19 6:29 PM,28/Oct/23 3:05 AM,03/Apr/19 6:29 PM,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,0,,,,,,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hvr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Apr/19 6:29 PM;guoger;https://gerrit.hyperledger.org/r/c/30525;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
"fabric-test verify jobs fail; tests require a policy",FAB-14825,38772,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,latitiah,scottz,scottz,27/Mar/19 1:03 AM,17/Oct/19 2:51 AM,28/Oct/23 3:05 AM,17/Apr/19 2:54 AM,,,,,,v1.4.1,v2.0.0,,,fabric-quality,,,,,0,ci-blocker,ci-failure,,,"All verify tests requiring an actual network seem to always fail with this error:

{{11:37:14 2019-03-21 15:37:14.564 UTC [common.tools.configtxgen] main -> FATA 006 Error on outputChannelCreateTx: could not generate default config template: error parsing configuration: error adding policies to channel group: no policies defined
11:38:36       Assertion Failed: Unable to find the genesis block file behavesystest.block}}

Even the bootstrapping test ""Scenario: Setting of environment variables"", which does not require a genesis block, produces this ""error"" in its stdout:

{{Captured stdout:
testConfigs: configs/0767735c4bef11e9ad0cfa163e2694e6
Unable to generate channel config data: Command '['configtxgen', '-profile', 'SysTestChannel', '-outputCreateChannelTx', 'behavesyschan.tx', '-configPath', '.', '-channelID', 'behavesyschan']' returned non-zero exit status 1
Unable to generate channel anchor config data: Command '['configtxgen', '-profile', 'SysTestChannel', '-outputAnchorPeersUpdate', 'org2.example.combehavesyschanAnchor.tx', '-channelID', 'behavesyschan', '-configPath', 'configs/0767735c4bef11e9ad0cfa163e2694e6', '-asOrg', 'Org2ExampleCom']' returned non-zero exit status 1
Unable to generate channel anchor config data: Command '['configtxgen', '-profile', 'SysTestChannel', '-outputAnchorPeersUpdate', 'org1.example.combehavesyschanAnchor.tx', '-channelID', 'behavesyschan', '-configPath', 'configs/0767735c4bef11e9ad0cfa163e2694e6', '-asOrg', 'Org1ExampleCom']' returned non-zero exit status 1}}

The latest merge job in release 1.4 also shows a similar error, although not on all the same tests, so more investigation may be required there. Here is a recently failed merge job in 1.4:
https://jenkins.hyperledger.org/job/fabric-test-merge-x86_64/602/testReport/ ",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14506,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hvz:",,,,Unset,Unset,,,,"Run a verify job. For example:
https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-merge-x86_64/608/testReport/",,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,true,"17/Apr/19 2:54 AM;scottz;[https://gerrit.hyperledger.org/r/#/c/30429/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
_lifecycle input validation,FAB-14826,38776,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,wlahti,wlahti,27/Mar/19 3:03 AM,30/May/19 10:26 PM,28/Oct/23 3:05 AM,30/May/19 10:26 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,"_lifecycle should handle some input validation on the server-side and return meaningful error messages when the inputs are invalid.

For example, we should validate input for chaincode names, versions, collection names, etc.",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:g",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Validate input for chaincode name and version,FAB-14827,38777,38776,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,27/Mar/19 3:03 AM,09/Apr/19 2:47 AM,28/Oct/23 3:05 AM,05/Apr/19 4:24 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,FAB-14397,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hwn:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Mar/19 12:28 AM;wlahti;https://gerrit.hyperledger.org/r/c/30461/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
 configtx manager failed for channel ID with capital letters.,FAB-14829,38779,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,nileshdeotale,nileshdeotale,27/Mar/19 3:38 AM,23/Jan/20 7:32 AM,28/Oct/23 3:05 AM,23/Jan/20 7:32 AM,,,,,,,,,,fabric-orderer,,,,,0,stale-item,,,,"Using go sdk I send a channel create request with channel ID nileshIBPICPZdemo0 and it failed due to below error.

2019-03-26 17:42:22.835 UTC [orderer.common.broadcast] ProcessMessage -> WARN 03f [channel: nileshIBPICPZdemo0] Rejecting broadcast of config message from 10.1.92.0:1404 because of error: initializing configtx manager failed: bad channel ID: channel ID 'nileshIBPICPZdemo0' contains illegal characters


I retried with a channel Id with all lower case in the name and it worked.

Can channel IDs with capital letters be supported please. 

",,nileshdeotale,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hx3:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),nileshdeotale,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Spelling mistakes in prover.proto comments,FAB-14830,38780,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,sheehan,sheehan,sheehan,27/Mar/19 4:14 AM,14/Aug/19 10:58 PM,28/Oct/23 3:05 AM,14/Aug/19 10:58 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,There are a number of spelling mistakes in the comments of the token prover.proto file.,,sheehan,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hxb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sheehan,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Aug/19 10:58 PM;wlahti;CR was abandoned. Closing this JIRA. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
rename QueryApprovalStatus to SimulateCommitChaincodeDefinition ,FAB-14831,38781,39057,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,ales,ales,27/Mar/19 4:23 AM,25/Jul/19 8:50 PM,28/Oct/23 3:05 AM,28/Jun/19 1:39 AM,,,,,,v2.0.0,,,,,,,,,0,,,,,"The new name should rather represent the fact that this is a ""dry-run"" version of the commit step.",,ales,denyeart,manish-sethi,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15831,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hxj:",,,,Unset,Unset,v2.0,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,denyeart,manish-sethi,wlahti,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/19 4:40 AM;manish-sethi;For a better surrounding discussion - https://gerrit.hyperledger.org/r/#/c/30340/1/core/chaincode/lifecycle/lifecycle.go@228 ;;;","19/Jun/19 5:57 AM;wlahti;Server-side CR: [https://gerrit.hyperledger.org/r/c/fabric/+/31968] 

Follow-up CR will handle the rename for the CLI and integration runners/tests.;;;","20/Jun/19 2:29 AM;wlahti;CLI/integration CR: [https://gerrit.hyperledger.org/r/c/fabric/+/31987];;;","02/Jul/19 3:22 AM;denyeart;[~wlahti] [~ales] 

This change broke fabric-samples, CI that uses fabric-samples, and the doc topics/tutorials that reference lifecycle functions.  See FAB-15831.

Question: Does the new SimulateCommitChaincodeDefinition still return the list of orgs that have approved?

Note that in the discussion of https://gerrit.hyperledger.org/r/#/c/30340/1/core/chaincode/lifecycle/lifecycle.go@228 , it says ""we plan to add another query that takes only the sequence number as arguments and returns the full info about the definition with that sequence number, including the list of orgs that have approved it.""  Is that still the plan?;;;",,,,,,,,,,,,,,,,,,,,,,,,,
TestConnMetricsGRPCServer  fails,FAB-14832,38782,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,27/Mar/19 4:25 AM,27/Mar/19 6:59 PM,28/Oct/23 3:05 AM,27/Mar/19 6:59 PM,v2.0.0,,,,,v2.0.0,,,,,,,,,0,ci-flake,,,,"
{noformat}
--- FAIL: TestConnMetricsGRPCServer (0.25s)
    <autogenerated>:1: 
        Expected error:
            <context.deadlineExceededError>: {}
            context deadline exceeded
        not to have occurred
{noformat}
",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hxr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/19 4:26 AM;mastersingh24;I think this is a side effect of reducing var timeout in the test.;;;","27/Mar/19 4:45 AM;mastersingh24;https://gerrit.hyperledger.org/r/30434;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
panic: error in eyfn java chaincode tests in release-1.4,FAB-14833,38783,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,rameshthoomu,rameshthoomu,27/Mar/19 4:31 AM,17/Jul/19 10:55 AM,28/Oct/23 3:05 AM,17/Jul/19 10:55 AM,v1.4.1,,,,,,,,,fabric-samples,,,,,0,ci-blocker,,,,"Run 
`./byfn.sh -m up -l java` after the tests ran successfully, execute 
`./eyfn.sh -m up -l java`

These tests are now disabled from fabric-samples verify and merge job as this is consistently failing in CI and in Local machine too,

*Java Chaincode on eyfn is failing consistently with panic errors in release-1.4 branch.*

Installing chaincode 2.0 on peer0.org3...
+ peer chaincode install -n mycc -v 2.0 -l java -p github.com/chaincode/chaincode_example02/go/
+ res=2
+ set +x
2019-03-26 19:28:55.298 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 001 Using default escc
2019-03-26 19:28:55.299 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 002 Using default vscc
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xed342b]",,denyeart,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hxz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Mar/19 10:08 PM;denyeart;[~rameshthoomu] with every panic there will be a stack dump... need the stack dump to troubleshoot.;;;","07/Apr/19 8:59 PM;mastersingh24;We really need to simply stop installing every type of chaincode during these samples ... it's overkill.
I also plan to open a story to entirely remove install and instantiate from the ""network"" samples.;;;","11/Apr/19 3:42 AM;rameshthoomu;[~denyeart] Here is stack dump

```
Installing chaincode 2.0 on peer0.org3...
+ peer chaincode install -n mycc -v 2.0 -l java -p github.com/chaincode/chaincode_example02/go/
+ res=2
+ set +x
2019-04-10 18:42:02.601 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 001 Using default escc
2019-04-10 18:42:02.601 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 002 Using default vscc
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xed634b]

goroutine 1 [running]:
github.com/hyperledger/fabric/core/container/util.WriteFolderToTarPackage.func1(0x7ffee2c6ab4e, 0x2b, 0x0, 0x0, 0x18d62e0, 0xc000518630, 0x60, 0x16ed2c0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/util/writer.go:64 +0xcb
path/filepath.Walk(0x7ffee2c6ab4e, 0x2b, 0xc000346b40, 0x2, 0x3)
	/opt/go/src/path/filepath/path.go:402 +0x6a
github.com/hyperledger/fabric/core/container/util.WriteFolderToTarPackage(0xc0002b6e00, 0x7ffee2c6ab4e, 0x2b, 0xc0004ab858, 0x3, 0x3, 0x0, 0xc00012bd40, 0xc0002b6e00, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/util/writer.go:136 +0x24a
github.com/hyperledger/fabric/core/container/util.WriteJavaProjectToPackage(0xc0002b6e00, 0x7ffee2c6ab4e, 0x2b, 0xc0004ab940, 0x1)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/util/writer.go:152 +0x158
github.com/hyperledger/fabric/core/chaincode/platforms/java.(*Platform).GetDeploymentPayload(0x24c7b80, 0x7ffee2c6ab4e, 0x2c, 0x4, 0xc000167068, 0x1774f01, 0x4, 0xc0004ab9c0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/java/platform.go:123 +0x1e0
github.com/hyperledger/fabric/core/chaincode/platforms.(*Registry).GetDeploymentPayload(0xc000494980, 0x1774faa, 0x4, 0x7ffee2c6ab4e, 0x2c, 0x4, 0x7ffee2c6ab4e, 0x2c, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/platforms.go:103 +0x8f
github.com/hyperledger/fabric/core/container.GetChaincodePackageBytes(0xc000494980, 0xc000131240, 0x0, 0x16cebc0, 0xc00031c780, 0xc000348254, 0x4)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/controller.go:217 +0xc7
github.com/hyperledger/fabric/peer/chaincode.getChaincodeDeploymentSpec(0xc000131240, 0xc000131201, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/common.go:58 +0x11c
github.com/hyperledger/fabric/peer/chaincode.genChaincodeDeploymentSpec(0xc0000d2c80, 0x7ffee2c6ab37, 0x4, 0x7ffee2c6ab3f, 0x3, 0x0, 0x8020102, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:109 +0xac
github.com/hyperledger/fabric/peer/chaincode.chaincodeInstall(0xc0000d2c80, 0x0, 0x0, 0xc0002f89a0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:177 +0x156
github.com/hyperledger/fabric/peer/chaincode.installCmd.func1(0xc0000d2c80, 0xc000150480, 0x0, 0x8, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:44 +0x54
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc0000d2c80, 0xc000150300, 0x8, 0x8, 0xc0000d2c80, 0xc000150300)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:762 +0x473
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x23be220, 0x8, 0x0, 0x23bd3e0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:852 +0x2fd
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x23be220, 0xc0004abf40, 0x1)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:800 +0x2b
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:53 +0x2f7
!!!!!!!!!!!!!!! Chaincode installation on peer0.org3 has failed !!!!!!!!!!!!!!!!
========= ERROR !!! FAILED to execute End-2-End Scenario ===========

ERROR !!!! Unable to have Org3 peers join network
```;;;","17/Jul/19 10:40 AM;denyeart;It looks like this is passing a go chaincode ""github.com/chaincode/chaincode_example02/go/"" but indicating that it is java language ""-l java"".
As Gari said, there is no value having eyfn support various chaincode languages. Closing as Won't Do.;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Reconcile timeout and testTimeout in comm package,FAB-14834,38785,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,27/Mar/19 4:34 AM,27/Mar/19 11:04 PM,28/Oct/23 3:05 AM,27/Mar/19 11:04 PM,v2.0.0,,,,,v2.0.0,,,,,,,,,0,hygiene,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hyf:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/19 4:44 AM;mastersingh24;https://gerrit.hyperledger.org/r/30436;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test failure / data race in common/cluster TestSendBigMessage,FAB-14835,38786,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,sykesm,sykesm,27/Mar/19 6:08 AM,28/Mar/19 7:46 AM,28/Oct/23 3:05 AM,28/Mar/19 7:46 AM,v2.0.0,,,,,,,,,fabric-orderer,,,,,1,ci-flake,race,,,"{code}
16:19:20 --- FAIL: TestSendBigMessage (17.88s)
16:19:20     comm_test.go:344: Sending took 48.422µs
16:19:20     comm_test.go:344: Sending took 37.916µs
16:19:20     comm_test.go:344: Sending took 15.885µs
16:19:20     comm_test.go:344: Sending took 8.489µs
16:19:20     comm_test.go:351: Total sending time to all 4 nodes took: 251.258µs
16:19:20     testing.go:771: race detected during execution of test
16:19:20 FAIL
16:19:20 coverage: 96.4% of statements
16:19:20 FAIL	github.com/hyperledger/fabric/orderer/common/cluster	26.797s
{code}

{code}
16:19:20 ==================
16:19:20 WARNING: DATA RACE
16:19:20 Write at 0x00c0000daa28 by goroutine 252:
16:19:20   internal/race.Write()
16:19:20       /opt/go/go1.11.5.linux.amd64/src/internal/race/race.go:41 +0x38
16:19:20   sync.(*WaitGroup).Wait()
16:19:20       /opt/go/go1.11.5.linux.amd64/src/sync/waitgroup.go:128 +0xef
16:19:20   github.com/hyperledger/fabric/orderer/common/cluster_test.(*clusterNode).Step()
16:19:20       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:139 +0x52
16:19:20   github.com/hyperledger/fabric/protos/orderer._Cluster_Step_Handler()
16:19:20       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/protos/orderer/cluster.pb.go:525 +0xcd
16:19:20   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC()
16:19:20       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1175 +0x1602
16:19:20   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream()
16:19:20       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1254 +0x130c
16:19:20   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1()
16:19:20       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:690 +0xac
16:19:20 
16:19:20 Previous read at 0x00c0000daa28 by goroutine 11:
16:19:20   internal/race.Read()
16:19:20       /opt/go/go1.11.5.linux.amd64/src/internal/race/race.go:37 +0x38
16:19:20   sync.(*WaitGroup).Add()
16:19:20       /opt/go/go1.11.5.linux.amd64/src/sync/waitgroup.go:71 +0x16b
16:19:20   github.com/hyperledger/fabric/orderer/common/cluster_test.(*clusterNode).freeze()
16:19:20       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:154 +0x43
16:19:20   github.com/hyperledger/fabric/orderer/common/cluster_test.TestSendBigMessage()
16:19:20       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm_test.go:339 +0x1281
16:19:20   testing.tRunner()
16:19:20       /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0x162
16:19:20 
16:19:20 Goroutine 252 (running) created at:
16:19:20   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1()
16:19:20       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:688 +0xb8
16:19:20   github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.(*http2Server).operateHeaders()
16:19:20       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/http2_server.go:419 +0x1486
16:19:20   github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.(*http2Server).HandleStreams()
16:19:20       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/http2_server.go:459 +0x37a
16:19:20   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams()
16:19:20       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:686 +0x170
16:19:20   github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleRawConn.func1()
16:19:20       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:648 +0x50
16:19:20 
16:19:20 Goroutine 11 (running) created at:
16:19:20   testing.(*T).Run()
16:19:20       /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:878 +0x659
16:19:20   testing.runTests.func1()
16:19:20       /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:1119 +0xa8
16:19:20   testing.tRunner()
16:19:20       /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0x162
16:19:20   testing.runTests()
16:19:20       /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:1117 +0x4ee
16:19:20   testing.(*M).Run()
16:19:20       /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:1034 +0x2ee
16:19:20   main.main()
16:19:20       _testmain.go:248 +0x332
16:19:20 ==================
{code}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10953/consoleFull",,MHBauer,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14163,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hyn:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,sykesm,yacovm,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/19 8:17 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/30443/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric unit-test dependency on logger output,FAB-14836,38787,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,,MHBauer,MHBauer,27/Mar/19 6:41 AM,17/Apr/21 4:15 AM,28/Oct/23 3:05 AM,17/Apr/21 4:15 AM,,,,,,,,,,fabric-orderer,,,,,0,,,,,"The goal of this issue is to figure out if this is okay and document it if it is, and fix it if it isn't.

 

On master @f17770510c6da766aa8471b3ee633b8d1a36835a

 

I did 3 runs of each of the following invocations of `make unit-test`.

The default logging level appears to be INFO, which is too chatty for me, personally.

So I set to FATAL, to silence the loggers and encountered failures and hangs til timeout.

 

Thankfully, only two packages seem to change behavior.

FAIL github.com/hyperledger/fabric/common/flogging 0.153s

FAIL github.com/hyperledger/fabric/orderer/common/cluster 1200.588s

 

For `flogging` the functionality appears to be overridden by environment variables, so I am not 100% sure it's testing what is written.

 

For cluster, the BlockPuller tests are reading from loggers to determine the current state, looking for things such as ""Got Block"".

 

Attached is the failure output only.",,guoger,jyellick,MHBauer,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Mar/19 6:36 AM;MHBauer;fails.txt;https://jira.hyperledger.org/secure/attachment/17002/fails.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hyv:",,,,Unset,Unset,,,,"# Everything works
FABRIC_LOGGING_SPEC=INFO make unit-test


# some test failures and timeouts
FABRIC_LOGGING_SPEC=FATAL make unit-test

",,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,jyellick,MHBauer,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Mar/19 6:42 AM;MHBauer;My personal opinion is that none of these should fail, but especially the 'cluster' tests.;;;","27/Mar/19 7:49 AM;yacovm;the cluster UT doesn't depend on the logger.... it times out because of other reasons. I have it on my todo list to fix it. ;;;","27/Mar/19 9:47 AM;MHBauer;Other reasons related to the value of FABRIC_LOGGING_SPEC? What would that be?;;;","16/Apr/19 12:13 PM;guoger;[~yacovm] those UT does depend on certain log message output, which is not a very elegant pattern IMO

although i'm not sure this could be prioritized and refactoring code to make it more testable is often hard. If no one can take on this, I suggest we backlog this. I'll remove the ci-flake label cuz it doesn't really make CI flaky.;;;","24/Jun/19 11:57 PM;jyellick;Presumably this means we simply need to inject a logger rather than using a singleton?  This can be said for essentially all of our packages.;;;","17/Apr/21 4:15 AM;jyellick;There's been no interest in changing this behavior, so closing, it can be re-opened if desired.;;;",,,,,,,,,,,,,,,,,,,,,,,
Properly cleanup resources after integration tests,FAB-14838,38789,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,27/Mar/19 9:22 AM,15/May/19 9:52 PM,28/Oct/23 3:05 AM,15/May/19 9:52 PM,v1.4.1,,,,,v1.4.1,,,,fabric-orderer,,,,,0,,,,,"Recent commit to fix FAB-14735 added an integration end to end test, which doesn't properly treat resources cleanup in case of test failure. Meaning if some of the tests assertion fails it doesn't reaches the code which takes care to stop peers and orderers processes.

These treatment has to be done with {{BeforeEach}} and {{AfterEach}} sections.",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hzb:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/19 9:25 AM;C0rWin;https://gerrit.hyperledger.org/r/30445;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove get-docker-images.sh from release,FAB-14839,38791,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,27/Mar/19 5:22 PM,08/Apr/19 10:12 PM,28/Oct/23 3:05 AM,27/Mar/19 11:54 PM,,,,,,v1.4.1,v2.0.0,,,,,,,,0,hygiene,,,,This script has never really been kept up to date and is not actually documented anywhere.,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13982,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hzj:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/19 5:39 PM;mastersingh24;https://gerrit.hyperledger.org/r/30452;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Apply config metadata validation to non-channel-creation configs,FAB-14840,38792,38768,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,27/Mar/19 6:33 PM,03/Apr/19 6:29 PM,28/Oct/23 3:05 AM,03/Apr/19 6:29 PM,,,,,,v1.4.1,,,,fabric-orderer,,,,,0,,,,,,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hzr:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/19 7:03 PM;guoger;https://gerrit.hyperledger.org/r/c/30455;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactoring Raft config metadata to msg processor,FAB-14841,38793,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,adarshsaraf123,guoger,guoger,27/Mar/19 6:34 PM,19/Apr/21 12:46 AM,28/Oct/23 3:05 AM,19/Apr/21 12:46 AM,,,,,,,,,,fabric-orderer,,,,,0,Raft,,,,,,denyeart,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00hzz:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Apr/21 12:19 AM;denyeart;[~guoger] [~adarshsaraf123] Can this be closed?;;;","19/Apr/21 12:46 AM;guoger;I think the needed refactor was already merged.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
The Raft IT failing - onboarding when an orderer node is joined isn't influenced by outdated orderers,FAB-14842,38800,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,C0rWin,C0rWin,28/Mar/19 12:11 AM,01/Apr/19 9:54 PM,28/Oct/23 3:05 AM,01/Apr/19 9:54 PM,v2.0.0,,,,,v2.0.0,,,,fabric-orderer,,,,,0,ci-failure,ci-flake,,,"{code}
13:23:20 [e][OrdererOrg.orderer7] 2019-03-27 13:23:19.671 UTC [orderer.common.cluster.puller] HeightsByEndpoints -> INFO 13d Returning the heights of OSNs mapped by endpoints map[]
13:23:20 [e][OrdererOrg.orderer7] 2019-03-27 13:23:19.671 UTC [orderer.consensus.etcdraft] confirmSuspicion -> ERRO 13e Failed pulling the last config block: retry attempts exhausted channel=systemchannel node=7
13:23:20 
13:23:20 ------------------------------
13:23:20 • Failure [90.834 seconds]
13:23:20 EndToEnd reconfiguration and onboarding when an orderer node is joined [It] isn't influenced by outdated orderers 
13:23:20 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/etcdraft_reconfig_test.go:801
13:23:20 
13:23:20   Timed out after 60.000s.
13:23:20   Expected
13:23:20       <<-chan struct {} | len:0, cap:0>: 0xc0014e3740
13:23:20   to be closed
13:23:20 
13:23:20   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/etcdraft_reconfig_test.go:844
13:23:20 ------------------------------
13:30:10 ••••••••••••
13:30:10 
13:30:10 Summarizing 1 Failure:
13:30:10 
13:30:10 [Fail] EndToEnd reconfiguration and onboarding when an orderer node is joined [It] isn't influenced by outdated orderers 
13:30:10 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/etcdraft_reconfig_test.go:844
{code}

found in: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7708/console

It seems that many of Raft IT we just need to wait for channels to be ready to serve requests.",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14472,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i1j:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update fabric-sdk-node submodule,FAB-14843,38802,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sambhavdutt,sambhavdutt,sambhavdutt,28/Mar/19 1:11 AM,28/Mar/19 6:11 AM,28/Oct/23 3:05 AM,28/Mar/19 6:10 AM,v2.0.0,,,,,,,,,fabric-quality,,,,,0,ci-failure,,,,This updates the fabric-sdk-node submodule to the latest commit on master,,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i1z:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,true,"28/Mar/19 6:11 AM;sambhavdutt;CR has been merged
https://gerrit.hyperledger.org/r/#/c/30462/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create a global config directory and populate with orderer and core structs,FAB-14844,38805,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,btl5037,btl5037,btl5037,28/Mar/19 2:18 AM,03/Apr/19 1:45 AM,28/Oct/23 3:05 AM,03/Apr/19 1:44 AM,,,,,,,,,,,,,,,0,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i2n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor Viper usage in core/chaincode,FAB-14845,38806,38656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,btl5037,btl5037,28/Mar/19 2:29 AM,05/Jun/19 11:08 PM,28/Oct/23 3:05 AM,05/Jun/19 11:08 PM,,,,,,v2.0.0,,,,,,,,,0,,,,,,,btl5037,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i2v:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,yoheiueda,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
We should make sure people use the right version of the doc,FAB-14847,38810,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,lehors,lehors,lehors,28/Mar/19 4:23 AM,29/Mar/19 7:41 PM,28/Oct/23 3:05 AM,29/Mar/19 7:41 PM,v1.4.0,,,,,v2.0.0,,,,fabric-docs,,,,,0,,,,,"People often end up looking at master which doesn't always match the release they are using. This is especially true when going through a major revision like right now where we have both 1.4 and 2.0 at play. As one user reported:

""{color:#444444}Currently, it's easy to mistake those pages for documentation about release 1.4: so a banner to direct people to the pages that are actually relevant to the Fabric release they want might [help them]{color}""

https://chat.hyperledger.org/channel/fabric-documentation?msg=8s3jYgTBT7dH9vgwY

 ",,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i3r:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),lehors,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a developer, I need to prevent CRLF line endings from creeping into the fabric repo as it makes CRs challenging to review.",FAB-14848,38812,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,28/Mar/19 5:04 AM,28/Jun/19 1:07 PM,28/Oct/23 3:05 AM,09/Apr/19 11:00 PM,,,,,,,,,,,,,,,0,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i47:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove user setup from buildenv,FAB-14849,38814,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,sykesm,sykesm,28/Mar/19 6:14 AM,01/Apr/19 9:39 PM,28/Oct/23 3:05 AM,01/Apr/19 9:39 PM,v2.0.0,,,,,v2.0.0,,,,fabric-build,,,,,0,ipm,,,,"The buildenv docker image should only be used in the build process but it includes the addition of a chaincode user and a user directive.

An explicit user shouldn't be needed in a build environment and is confusing. After seeing if there's any fallout, remove the user setup from the image.",,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i4n:",,,,Unset,Unset,,,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,sykesm,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/19 5:07 PM;mastersingh24;I could not find any issue with removing the USER stanza;;;","29/Mar/19 5:09 PM;mastersingh24;https://gerrit.hyperledger.org/r/30516;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
